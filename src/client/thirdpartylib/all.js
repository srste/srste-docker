System.register("client/acl_styles.js",[],function(_export,_context){"use strict";return _export("default",function(){return{}}),{setters:[],execute:function(){}}});
System.register("client/pd_styles.js",[],function(_export,_context){"use strict";return _export("default",function(){return{}}),{setters:[],execute:function(){}}});
System.register("client/mmf_styles.js",[],function(_export,_context){"use strict";return _export("default",function(){return{ScriptRunner:".navPane {\n    width:19%;\n    position: relative;\n    height: 100vh;\n    border-right: 1px solid #c3c3c3;\n    min-height: 600px;\n    overflow-y: auto;\n    float: left;\n    left: 0;\n    top: 0;\n}\n\n.scriptEditor {\n    background-color: white;\n    display: 'inline-block';\n    float:right;    \n}\n.react-monaco-editor-container {\n    display: inline-block;\n    text-align: left;\n}\n.runScript {\n  margin-left: 10px;\n}\n\n.ResultSection {\n    text-align: left;\n    justify-content: left;\n    overflow: auto;\n    align-content: center;\n    border: 1px solid rgb(212, 211, 211);\n    box-shadow: rgba(0, 0, 0, 0.133) 0px 1.6px 3.6px 0px, rgba(0, 0, 0, 0.11) 0px 0.3px 0.9px 0px;\n    padding: 10px;\n    background-color: #ffffff;\n    color: black;\n    height: 96%;\n    width: 38vw;\n    float: right;\n    white-space: pre-wrap;\n}\n\n.content {\n    padding: 2px;\n    border: 1px solid rgb(212, 211, 211);\n    box-shadow: rgba(0, 0, 0, 0.133) 0px 1.6px 3.6px 0px, rgba(0, 0, 0, 0.11) 0px 0.3px 0.9px 0px;\n}\n\n",RegisterPage:".register{\n    display: inline-flex;\n    width: 50vw;\n    height: 100vh;\n    background-repeat: no-repeat;\n    background-size: contain;\n    background-image: url(/resources/loginpagebg.jpg);\n}\n.leftContainer{\n    width: 20%;\n    position: absolute;\n    left: 20%;\n    top: 20%;\n}\n\n.rightContainer{\n    width:40%;\n    position: absolute;\n    right: 7%;\n    top: 20%;\n}\n\n@media only screen and (min-width: 320px) and (max-width: 960px) {\n   .register{\n      display:block;\n      width:100%;\n   }\n\n  .leftContainer{\n      width:100%;\n      left: 0;\n      top: 0;\n    position: relative;\n  }\n  img{\n    width: 100%;\n    padding: 2% 20%;\n  }\n\n  .rightContainer{\n      width:100%;\n      position: relative;\n      right: 0;\n      top: 0;\n      margin-bottom: 15%;\n  }\n\n}\n\n.errMsg{\n    color:red;\n}\n\nimg{\n    width: 100%;\n    padding: 2% 20%;\n}\n\n.bx--btn--primary{\n  margin-left: 0;\n  margin-top: 25px;\n  margin-right: 10px;\n}\n\n.container{\n    padding: 5%;\n   /* background:white;*/\n}\n\n.container button{\n    margin-top:10px;\n}\n\n",PageParameter:".withInnerProps .bx--form-item {\n    width: 25% !important;\n}\n\n.withProps .bx--form-item {\n    width: 33% !important;\n}\n\n.withInnerPageProps .bx--form-item {\n    width: 20% !important;\n}\n\n",OrderedList:".OrderedItem:hover {\n    background-color: #dcf3df;\n    cursor: pointer;\n}\n\n.OrderedItem {\n    padding: 2px;\n    margin: 1px;\n    border: 1px solid #d6d6d6;\n}\n\n.SelectedItem{\n    background-color: #7ab483;\n}\n\n",NotificationBar:"/* add css styles to the component */\n\n",NewWidgetAction:".CodeMirror-code {\n    text-align: left !important;\n}\n\n.CodeMirror {\n    height: 70vh;\n    font-family: Inconsolata, monospace;\n    font-size: 16px;\n}\n\n.bx--label {\n    text-align: left;\n}\n\n.CodeMirror pre {\n    padding-left: 30px;\n}\n\n",NewState:"/* add css styles to the component */\n.sr-state-header{\n  font-weight: 600;\n  font-size: 16px;\n  margin-bottom: 1%;\n}\n.bx--text-input__field-wrapper{\n    width: 50%;\n}\n.sr-state-alias{\n  margin-bottom:2%;\n}\n.sr-state-combo{\n    width: 50%;\n    margin-left: 18px;\n    margin-bottom:2%;\n}\n.sr-state-acpath{\n    margin-bottom:2%;\n}\n.sr-state-dfval{\n    margin-bottom:2%;\n}\n.sr-state-btns{    \n    bottom: 20px;\n    right: 10%;\n    position: absolute;\n}\nbutton{\n    margin: 5px;\n}\n.sr-comp-chose-dis .bx--text-input__field-wrapper{\n  width:100%;\n  margin-left: -18px;\n}\n.sr-field-id{\n    position: absolute;\n    right: 0;\n    top: 34px;\n    width: 50%; \n}\n\n",NewRouteRequires:"/* add css styles to the component */\n.sr-route-router, .sr-route-requires{\n    margin-top: 3%;\n    width: 50%;\n}\n.sr-route-button{\n    bottom: 5px;\n    position: absolute;\n    right: 20px;\n}\n.sr-comp-chose-dis .bx--text-input-wrapper{\n    margin-left: 0px;\n}\n.sr-comp-chose-dis .bx--text-input__field-wrapper{\n  width:100%;\n}\n.sr-route-button button{\n    margin: 2px;\n}\n\n.sr-route-header{\n  font-weight: 600;\n  font-size: 16px;\n  margin-bottom: 1%;\n}\n.bx--text-input__field-wrapper{\n    width: 50%;\n}\n\n.sr-route-combo{\n    width: 50%;\n    margin-left: 18px;\n    margin-bottom:2%;\n}\n\n.sr-route-btns{    \n    bottom: 20px;\n    right: 10%;\n    position: absolute;\n}\n\nbutton{\n    margin: 5px;\n}\n\n.sr-comp-chose-dis .bx--text-input__field-wrapper{\n  width:100%;\n  margin-left: -18px;\n}\n\n.sr-field-id{\n    position: absolute;\n    right: 0;\n    top: 34px;\n    width: 50%; \n}\n\n",NewRoute:"/* add css styles to the component */\n\n",NewRelationship:"/* add css styles to the component */\n\n",NewPageAction:".CodeMirror-code {\n    text-align: left !important;\n}\n\n.CodeMirror {\n    height: 70vh;\n    font-family: Inconsolata, monospace;\n    font-size: 16px;\n}\n\n.CodeMirror pre {\n    padding-left: 5px;\n}\n\n",NewLaneSection:"/* add css styles to the component */\n\n",NewFileSyncConfig:"/* add css styles to the component */\n\n",NewComponentRequires:"/* add css styles to the component */\n\n",NewComponentProp:".sr-action-btns {\n    bottom: 20px;\n    right: 10%;\n    position: absolute;\n}\n\n",NewAction:"/* add css styles to the component */\n.sr-action-header{\n  font-weight: 600;\n  font-size: 16px;\n  margin-bottom: 1%;\n}\n\n.sr-field-id{\n    position: absolute;\n    right: 0;\n    top: 34px;\n    width: 50%; \n}\n.sr-action-alias{\n    margin-bottom:2%;\n}\n.sr-action-combo{\n    width: 50%;\n    margin-left: 18px;\n    margin-bottom:2%;\n}\n.bx--text-input__field-wrapper{\n    width: 50%;\n}\n.sr-comp-chose-dis .bx--text-input__field-wrapper{\n    width:100%;\n    margin-left: -18px;\n}\nbutton{\n    margin: 5px;\n}\n\n.sr-action-btns{    \n    bottom: 20px;\n    right: 10%;\n    position: absolute;\n}\n\n",Navigator:"/* add css styles to the component */\n\n",LoginPage:"/* add css styles to the component */\n.loginComp{\n    display: inline-flex;\n    width: 50vw;\n    height: 100vh;\n    background-repeat: no-repeat;\n    background-size: contain;\n    background-image: url(/resources/loginpagebg.jpg);\n}\n\n.leftContainer{\n    width: 20%;\n    position: absolute;\n    left: 20%;\n    top: 20%;\n}\n\n.rightContainer{\n    width:40%;\n    position: absolute;\n    right: 7%;\n    top: 20%;\n}\n\n@media only screen and (min-width: 320px) and (max-width: 960px) {\n.loginComp{\n    display:block;\n}\n  .leftContainer{\n      width:100%;\n  }\n\n  .rightContainer{\n      width:100%;\n      position: relative;\n      right: 0;\n    top: 0;\n  }\n\n}\n\n.erMsg{\n    color:red;\n}\nimg{\n    width: 100%;\n    padding: 2% 20%;\n}\n\n.bx--btn--primary{\n  margin-left: 0;\n  margin-top: 25px;\n  margin-right: 10px;\n}\n\n.container{\n    padding: 5%;\n    background: white;\n}\n\n.login-actions{\n  margin-top:10px;\n}\n\n.login-actions button{\n    margin-right:5px;\n}\n\n",ListLayout:".bx--search-close{\n    position: absolute;\n    right: 0px;\n}\n.bx--search-close--hidden{\n    visibility: hidden !important;\n}\n.no_data_found{\n    font-size: 18px;\n    margin: 15px;\n    font-weight: 600;\n}\n.no_data_found_td{\n    text-align: center !important;\n}\n.bx--toolbar-content{\n  width:fit-content;\n}\n.bx--action-list{\n  top: 20px;\n}\n.bx--btn--primary{\n  bottom:0;\n}\n.bx--batch-actions--active .bx--btn--primary{\n  bottom:10px;\n}\n.bx--toolbar-search-container-active {\n    width: 100rem;\n}\n\n.bx--toolbar-content {\n    display: flex;\n    height: 3rem;\n    width: 100%;\n    justify-content: flex-end;\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n    transition: -webkit-transform 110ms cubic-bezier(0.2, 0, 0.38, 0.9),-webkit-clip-path 110ms cubic-bezier(0.2, 0, 0.38, 0.9);\n    transition: transform 110ms cubic-bezier(0.2, 0, 0.38, 0.9),clip-path 110ms cubic-bezier(0.2, 0, 0.38, 0.9);\n    transition: transform 110ms cubic-bezier(0.2, 0, 0.38, 0.9),clip-path 110ms cubic-bezier(0.2, 0, 0.38, 0.9),-webkit-transform 110ms cubic-bezier(0.2, 0, 0.38, 0.9),-webkit-clip-path 110ms cubic-bezier(0.2, 0, 0.38, 0.9);\n}\n\n.bx--table-sort {\n    font-size: small;\n    font-weight: 600;\n}\n\n.bx--table-column-checkbox {\n    width: inherit!;\n}\n\n.srs-filter-value{\n    position: absolute;\n    top: 12px;\n}\n\n.NoData .bx--data-table-container .bx--data-table th.bx--table-column-checkbox {\n    width: auto !important;\n}\n\n.bx--table-column-checkbox {\n    padding-left: 0.5rem !important;\n}\n\n",HomePage:'.menu-icon{\n  float: left;\n  position: relative;\n  left: 10px;\n  top: 25px;\n}\n\n.mainHome {\n  padding-left: 0;\n  -webkit-transition: all 0.5s ease;\n  -moz-transition: all 0.5s ease;\n  -o-transition: all 0.5s ease;\n  transition: all 0.5s ease;\n}\n\n.mainHome.toggled {\n  padding-left: 250px;\n}\n\n.sidebar-wrapper {\n  z-index: 1000;\n  position: fixed;\n  left: 250px;\n  width: 0;\n  height: 100%;\n  margin-left: -250px;\n  overflow-y: auto;\n  background: black;\n  -webkit-transition: all 0.5s ease;\n  -moz-transition: all 0.5s ease;\n  -o-transition: all 0.5s ease;\n  transition: all 0.5s ease;\n}\n\n.mainHome.toggled .sidebar-wrapper {\n  width: 250px;\n}\n\n/* #page-content-wrapper {\n  width: 100%;\n  position: absolute;\n  padding: 15px;\n} */\n\n.mainHome.toggled .homeContainer {\n  /* position: absolute;\n  margin-right: -250px; */\n}\n\n\n/* Sidebar Styles */\n\n.sidebar-nav {\n  position: absolute;\n  top: 0;\n  width: 250px;\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n\n.sidebar-nav li {\n  text-indent: 20px;\n  line-height: 40px;\n}\n\n.sidebar-nav li a {\n  display: block;\n  text-decoration: none;\n  color: #999999;\n}\n\n.sidebar-nav li a:hover {\n  text-decoration: none;\n  color: #fff;\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.sidebar-nav li a:active, .sidebar-nav li a:focus {\n  text-decoration: none;\n}\n\n.sidebar-nav>.sidebar-brand {\n  height: 65px;\n  font-size: 18px;\n  line-height: 60px;\n}\n\n.sidebar-nav>.sidebar-brand a {\n  color: #999999;\n}\n\n.sidebar-nav>.sidebar-brand a:hover {\n  color: #fff;\n  background: none;\n}\n/* \n@media(min-width:768px) {\n  .mainHome {\n    padding-left: 0;\n  }\n  .mainHome.toggled {\n    padding-left: 250px;\n  }\n  .sidebar-wrapper {\n    width: 0;\n  }\n  .mainHome.toggled .sidebar-wrapper {\n    width: 250px;\n  }\n  .homeContainer {\n    padding: 20px;\n    position: relative;\n  }\n  .mainHome.toggled  .homeContainer{\n    position: relative;\n    margin-right: 0;\n  }\n} */\n\n\n.homeContainer{\n  display: grid;\n  grid-template-columns: repeat(2,1fr);\n  grid-row-gap: 2px;\n}\n\n.homeContent{\n    display: grid;\n    grid-template-columns: repeat(auto-fill,minmax(300px, 1fr));\n    justify-items: center;\n    grid-gap: 5px;\n    grid-column: 1/4;\n    height: 100vh;\n}\n\n.designer{\n  width: 100%;\n  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);\n  transition: 0.3s;\n  border-radius: 1%;\n}\n\n.card{\n  height: 100% !important;\n}\n/* \n.pageDesigner{\n  background: grey;\n}\n\n.componentDesigner{\n  background: slateblue;\n}\n\n.modelDesigner{\n  background: skyblue;\n}\n\n.workflowDesigner{\n  background: teal;\n}\n.queryBuilder{\n  background: mediumpurple;\n} */\n\n/* .designConent{\n  position: relative;\n  left: 5%;\n  top: 45%;\n  font-size: 18px;\n  font-weight: bold;\n  cursor: pointer;\n\n}\n.designConent a{\n  color: white !important;\n} */\na:hover{\n  text-decoration: none;\n}\n\n.homeHeader{\n  height: 65px;\n  background: cadetblue;\n  grid-column: 1/4;\n}\n\n.main-head{\n    font-size: 26px;\n    font-weight: bold;\n    color: powderblue;\n    float: left;\n    position: relative;\n    top: 12px;\n    left: 30px;\n}\n\n.logout-head{\n    float: right;\n    top: 5px;\n    position: relative;\n    right: 5px;\n}\n\n/* .nav>li>a:hover, .nav>li>a:focus, .nav .open>a, .nav .open>a:hover, .nav .open>a:focus {\n  background:#fff;\n} */\n.dropdown {\n  /* background:#fff; */\n  /* border:1px solid #ccc;\n  border-radius:4px; */\n  width: 200px;  \n}\n.dropdown-menu>li>a {\n  color:#428bca;\n}\n.dropdown ul.dropdown-menu {\n  border-radius:4px;\n  box-shadow:none;\n  margin-top:20px;\n  width:200px;\n}\n.dropdown ul.dropdown-menu:before {\n  content: "";\n  border-bottom: 10px solid #fff;\n  border-right: 10px solid transparent;\n  border-left: 10px solid transparent;\n  position: absolute;\n  top: -10px;\n  right: 16px;\n  z-index: 10;\n}\n\nnav li a {\n  color: powderblue !important;\n}\n.dropdown ul.dropdown-menu:after {\n  content: "";\n  border-bottom: 12px solid #ccc;\n  border-right: 12px solid transparent;\n  border-left: 12px solid transparent;\n  position: absolute;\n  top: -12px;\n  right: 14px;\n  z-index: 9;\n}\n\n.logout-head a {\n    color: white;\n}\n\n.logout-head a:hover {\n    color: blue;\n}\n\n',FormCard:".appCard {\n    margin-bottom: 5px;\n}\n\n",FileSyncer:".MasterSection {\n  clear: both;\n  position:relative;\n  width: 100vw;\n  height: 30vh;\n}\n\n.DetailsSection {\n  width: 100vw;\n  height: 70vh;\n  clear:both;\n  position:relative;\n}\n\n",ComponentWrapper:"/* add css styles to the component */\n\n",AppsBoard:"/* add css styles to the component */\n\n",ApplicationCard:".appCard:hover {\n    cursor: pointer;    \n}\n.appCardContent:hover {\n    background-color: #ceccd7 !important;\n}\n.appCardFooter:hover {\n    background-color: #ceccd7 !important;\n}\n\n",AddApplicationCard:".bx--btn--primary:focus::after {\n    border-color: #5a805f !important;\n}\n\n"}}),{setters:[],execute:function(){}}}),System.register("client/script/mmf/BlockDropDownDataUtil.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,BlockDropdownDataUtil;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default}],execute:function(){BlockDropdownDataUtil=function(){function BlockDropdownDataUtil(){_classCallCheck(this,BlockDropdownDataUtil),this.dropDownMap={}}return _createClass(BlockDropdownDataUtil,[{key:"isEmpty",value:function(){for(var prop in his.dropDownMap)if(his.dropDownMap.hasOwnProperty(prop))return!1;return JSON.stringify(his.dropDownMap)===JSON.stringify({})}},{key:"setDropDown",value:function(key,value){dropDownMap[key]=value}},{key:"getDropDown",value:function(key){return dropDownMap[key]}},{key:"processDropDown",value:function(name,defintion){var definitionObj=JSON.parse(defintion);if(definitionObj&&definitionObj.properties){for(var keys=Object.keys(definitionObj.properties),propertyOptions=[],k=0;k<keys.length;k++){var propOption=[keys[k],keys[k]];propertyOptions.push(propOption)}setDropDown(name,propertyOptions)}}}]),BlockDropdownDataUtil}(),_export("default",BlockDropdownDataUtil)}}}),System.register("client/script/mmf/Connect2Store.js",["react-redux"],function(_export,_context){"use strict";var connect,anyAction,mapState2Props,mapDispatch2Action,Connect2Store;return{setters:[function(_reactRedux){connect=_reactRedux.connect}],execute:function(){anyAction=function(actionName,payload,origin){return{type:actionName,payload:Object.assign(payload,origin)}},_export("mapState2Props",mapState2Props=function(state){return console.log("In mapState2props "),state.dynamicReducer.payload||(state.dynamicReducer.payload={}),console.log(this),function(payload,deps,componentName){var result={};if(deps.componentState&&deps.componentState[componentName]){var componentState=deps.componentState[componentName],stateKeys=Object.keys(componentState);if(stateKeys&&stateKeys.length>0)return stateKeys.forEach(function(stateKey){var accessPath=componentState[stateKey].access,payload2Update=Object.assign(payload);if(accessPath.split(".").filter(function(key){return payload2Update&&(payload2Update=payload2Update[key]),!1}),!payload2Update||!Object.keys(payload2Update)||0==Object.keys(payload2Update).length){var payloadUpdated=Object.assign(payload,componentState[stateKey].default);payload2Update=Object.assign(payloadUpdated),accessPath.split(".").filter(function(key){return payload2Update&&(payload2Update=payload2Update[key]),!1})}payload2Update&&(result[stateKey]=payload2Update)}),result}}(state.dynamicReducer.payload,this.deps,this.componentName)}),_export("mapDispatch2Action",mapDispatch2Action=function(dispatch){var result={};if(this.deps&&this.deps.componentAction&&this.deps.componentAction[this.componentName]){var eventNames=Object.keys(this.deps.componentAction[this.componentName]);if(eventNames&&eventNames.length>0){var self=this;eventNames.forEach(function(eventName){self.deps.componentAction[self.componentName][eventName];result[eventName]=function(payload){dispatch(anyAction(eventName,payload=payload||{},{origin:self.componentName}))}})}}return result}),_export("Connect2Store",Connect2Store=function(props,wrapper){return connect(mapState2Props.bind(props),mapDispatch2Action.bind(props))(wrapper)}),_export("Connect2Store",Connect2Store),_export("mapState2Props",mapState2Props),_export("mapDispatch2Action",mapDispatch2Action),_export("default",Connect2Store)}}}),System.register("client/script/mmf/GraphQLDataUtil.js",[],function(_export,_context){"use strict";var GraphQLDataUtil;return{setters:[],execute:function(){_export("GraphQLDataUtil",GraphQLDataUtil=function(){return{saveOrUpdate:function(query,paramsObj){return new Promise(function(resolve,reject){$qry.run(query,paramsObj).then(function(qryResult){resolve(qryResult)})})},getAllRecords:function(query){return new Promise(function(resolve,reject){$qry.run(query).then(function(qryResult){resolve(qryResult)})})},getRecord:function(query,paramsObj){return new Promise(function(resolve,reject){$qry.run(query,paramsObj).then(function(qryResult){resolve(qryResult)})})},saveMultiple:function(query,paramsArray){return new Promise(function(resolve,reject){var promises=[];paramsArray.forEach(function(params){var promise=new Promise(function(resolve,reject){$qry.run(query,params).then(function(qryResult){resolve(qryResult)})});promises.push(promise)}),Promise.all(promises).then(function(responses){resolve(responses)})})},saveMetaQuery:function(name,scope,query,variables){return new Promise(function(resolve,reject){$qry.saveQuery(name,scope,query,variables).then(function(result){result?resolve(result):reject(result)})})},deleteRecord:function(query,paramsObj){return new Promise(function(resolve,reject){$qry.run(query,paramsObj).then(function(qryResult){resolve(qryResult)})})},deleteMultiple:function(query,paramsArray){return new Promise(function(resolve,reject){var promises=[];paramsArray&&paramsArray.forEach(function(params){var promise=new Promise(function(resolve,reject){$qry.run(query,params).then(function(qryResult){resolve(qryResult)})});promises.push(promise)}),Promise.all(promises).then(function(responses){resolve(responses)}).catch(function(error){reject(error)})})}}}),_export("GraphQLDataUtil",GraphQLDataUtil)}}}),System.register("client/script/mmf/DesignerConstants.js",[],function(_export,_context){"use strict";var DESIGNER_CONST;return{setters:[],execute:function(){_export("DESIGNER_CONST",DESIGNER_CONST={TABLE_BLOCK:"table",RELATIONSHIP_BLOCK:"relationship",ROLEMAPPING_BLOCK:"role_mapping",QUERY_BLOCK:"query_head",MUTATION_BLOCK:"mutation",PAGE_BLOCK:"grid",GET_MODELS:"mmf.getModels",GET_META_RELATIONSHIPS:"mmf.getMetaRelations",GET_ROLE:"mmf.getRole",GET_META_COMPONENT_ACTION_BY_ID:"mmf.getCompAction",GET_META_COMPONENT_STATE_BY_ID:"mmf.getMetaCompState",GET_META_COMPONENT_PROP_BY_ID:"mmf.getMetaCompProp",SAVE_META_MODEL:"mmf.saveMetaModel",SAVE_META_RELATIONSHIP:"mmf.saveRelationship",SAVE_META_ROLE:"mmf.saveRole",SAVE_META_ROLE_MAPPING:"mmf.saveRoleMapping",SAVE_BLOCKLY_DOM:"mmf.saveBlockyDom",SAVE_META_OPERATION_HOOK:"mmf.saveMetaOperationHook",SAVE_META_ROUTE:"mmf.saveMetaRoute",SAVE_META_ROUTE_REQUIRES:"mmf.saveMetaRouteRequires"}),_export("DESIGNER_CONST",DESIGNER_CONST),_export("default",DESIGNER_CONST)}}}),System.register("client/script/mmf/DesignerUtil.js",["client/script/mmf/GraphQLDataUtil.js","client/script/mmf/DesignerConstants.js"],function(_export,_context){"use strict";var GraphQLDataUtil,DESIGNER_CONST,DesignerUtil;return{setters:[function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_clientScriptMmfDesignerConstantsJs){DESIGNER_CONST=_clientScriptMmfDesignerConstantsJs.DESIGNER_CONST}],execute:function(){_export("DesignerUtil",DesignerUtil=function(){function makeFilter(results,data,key){if(results[key]||(results[key]=[]),data&&data.length>0)for(var i=0;i<data.length;i++){var node=data[i].node,searchObj={id:node.uid||node.id,name:node.Name||node.name};results[key].push(searchObj)}}function getVariablesJSON(variableType,variableName,variables){var variableBuilder="";if("String"==variableType)variableBuilder='{"'+variableName+'":"$'+variableName+'"}';else if("JSON"==variableType){variableBuilder='{"'+variableName+'":{\n',variableBuilder+='"where":{\n';for(var filters=variables.split(","),i=0;i<filters.length;i++){var filterBuilder=filters[i].replace(/[{ }]/g,"").trim().split(":")[0];filterBuilder+=':"${'+filterBuilder.replace('"',"").replace('"',"")+'}"',i!=filters.length-1?variableBuilder+=filterBuilder+",\n":variableBuilder+=filterBuilder+"\n"}variableBuilder+="}"}else variableBuilder="{}";return variableBuilder}function saveOrExportDom(res,type,name,roleId){var workspace,xml;GraphQLDataUtil().saveOrUpdate(DESIGNER_CONST.SAVE_BLOCKLY_DOM,{Name:res.Name||name,Type:type,DomId:res.uid||roleId,Dom:(workspace=Blockly.getMainWorkspace(),xml=Blockly.Xml.workspaceToDom(workspace),Blockly.Xml.domToText(xml))}).then(function(response){console.log("Dom saved..")})}return{getSearchResults:function(){return new Promise(function(resolve,reject){var results={},finalResult={name:"Search Results",toggled:!0,children:[]};GraphQLDataUtil().getAllRecords(DESIGNER_CONST.GET_MODELS).then(function(tables){makeFilter(results,tables,"Tables"),GraphQLDataUtil().getAllRecords(DESIGNER_CONST.GET_META_RELATIONSHIPS).then(function(relations){makeFilter(results,relations,"Relations"),GraphQLDataUtil().getAllRecords(DESIGNER_CONST.GET_ROLE).then(function(roles){makeFilter(results,roles,"Roles"),Object.keys(results).forEach(function(scopeValue){var searchScopeChildren=results[scopeValue],scopeLevelChildObjects=[];searchScopeChildren&&searchScopeChildren.forEach(function(searchScopeChild){scopeLevelChildObjects.push({id:searchScopeChild.id,name:searchScopeChild.name})});var scopeLevelSearchObj={name:scopeValue,toggled:!1,children:scopeLevelChildObjects};finalResult.children.push(scopeLevelSearchObj)}),resolve(finalResult)})})})})},saveCustomBlock:function(code){return new Promise(function(resolve,reject){var relationCode,tableCode,roleCode,topBlocks=Blockly.getMainWorkspace().topBlocks_,designerMsg="";if(topBlocks)if(topBlocks.length>1)designerMsg="Invalid workspace....";else if(1==topBlocks.length){var type=topBlocks[0].type,workSpaceCode=JSON.parse(code);switch(type){case DESIGNER_CONST.ROLEMAPPING_BLOCK:roleCode=workSpaceCode,GraphQLDataUtil().saveOrUpdate(DESIGNER_CONST.SAVE_META_ROLE,{name:roleCode.name,description:roleCode.description}).then(function(response){var roleMapping=roleCode.role_mapping,name=response.name,roleId=response.id;GraphQLDataUtil().saveOrUpdate(DESIGNER_CONST.SAVE_META_ROLE_MAPPING,{principalType:roleMapping.principalType,principalId:roleMapping.principalId,roleId:parseInt(atob(response.id).split(":")[1])}).then(function(response){saveOrExportDom(response,"Role",name,roleId),console.log("Got the response "+response)})});break;case DESIGNER_CONST.TABLE_BLOCK:tableCode=workSpaceCode,GraphQLDataUtil().saveOrUpdate(DESIGNER_CONST.SAVE_META_MODEL,{Name:tableCode.name,Definition:JSON.stringify(tableCode.config),Scope:tableCode.scope}).then(function(response){saveOrExportDom(response,"Table"),console.log("Table has been created..."+response),function(tableCode){var hooks=tableCode.traps;if(hooks&&hooks.length>0){var hooksData=[];hooks.forEach(function(hook){var hookData={};hookData.Type=hook.type,hookData.Trap=hook.trapName,hookData.Model=tableCode.name,hooksData.push(hookData)}),hooksData.length>0&&GraphQLDataUtil().saveMultiple(DESIGNER_CONST.SAVE_META_OPERATION_HOOK,hooksData).then(function(responses){console.log("Hooks has been created successfully..."+responses)})}}(tableCode)});break;case DESIGNER_CONST.RELATIONSHIP_BLOCK:relationCode=workSpaceCode,GraphQLDataUtil().saveOrUpdate(DESIGNER_CONST.SAVE_META_RELATIONSHIP,{Name:relationCode.name,Table1:relationCode.table1,RelationType:relationCode.relation,Table2:relationCode.table2,ForeignKey:relationCode.foreignKey,ForeignKeyAlias:relationCode.foreignKeyAlias}).then(function(response){saveOrExportDom(response,"Relation"),console.log("Relationship has been created... "+response)});break;case DESIGNER_CONST.QUERY_BLOCK:!function(queryCode){var queryName=queryCode.name,queryScope=queryCode.scope,queryTable=queryCode.table,fields=queryCode.fields,variables=queryCode.variables,variableName=queryCode.variableName,variableType=queryCode.variableType,findClause=queryCode.findClause,qureyBuilder="";if(queryName&&"name"!=queryName&&queryScope&&"Scope"!=queryScope&&queryTable&&"none"!=queryTable&&fields&&0!=fields.length&&-1==fields.indexOf("none")){if(variableName&&"name"!=variableName&&variables.length>0){var findClauseFilter="";qureyBuilder+="query($"+variableName+":"+variableType+"){\n"+queryTable+"{\n"+(findClauseFilter+="Find"==findClause?queryTable+"Find(filter:"+("String"==variableType?"{Name: $"+variableName+"}){\n":"$"+variableName+"){\n")+"edges { \n node { \n":"FindOne"==findClause?queryTable+"FindOne(filter:"+("String"==variableType?"{Name: $"+variableName+"}){\n":"$"+variableName+"){\n"):queryTable+"FindById(filter:"+("String"==variableType?"{Name: $"+variableName+"}){\n":"$"+variableName+"){\n"))}else qureyBuilder+="query{\n"+queryTable+"{\n"+queryTable+"Find{\n edges { \n node { \n";for(var i=0;i<fields.length;i++)qureyBuilder+=fields[i]+"\n";qureyBuilder+="Find"==findClause?"}\n}\n}\n}\n}":"}\n}\n}",console.log(qureyBuilder);var variableBuilder=getVariablesJSON(variableType,variableName,variables);"Find"!=findClause||variableName&&"name"!=variableName&&variables.length>0||(variableBuilder="{}"),console.log(variableBuilder),GraphQLDataUtil().saveMetaQuery(queryName,queryScope,qureyBuilder,variableBuilder).then(function(response){console.log(response)})}}(workSpaceCode);break;case DESIGNER_CONST.MUTATION_BLOCK:!function(mutationCode){var mutationName=mutationCode.name,mutationScope=mutationCode.scope,mutationTable=mutationCode.table,fields=mutationCode.fields,variables=mutationCode.variables,variableName=mutationCode.variableName,variableType=mutationCode.variableType,mutationBuilder="";if(mutationName&&"name"!=mutationName&&mutationScope&&"Scope"!=mutationScope&&mutationTable&&"none"!=mutationTable&&fields&&0!=fields.length&&-1==fields.indexOf("none")&&variableName&&"name"!=variableName&&variables.length>0){mutationBuilder+="mutation($"+variableName+":"+mutationTable+"UpsertWithWhereInput!){\n"+mutationTable+"UpsertWithWhere(input:$"+variableName+"){\nobj{\n";for(var i=0;i<fields.length;i++)mutationBuilder+=fields[i]+"\n";mutationBuilder+="}\n}\n}",console.log(mutationBuilder);var variableBuilder=getVariablesJSON(variableType,variableName,variables);console.log(variableBuilder),GraphQLDataUtil().saveMetaQuery(mutationName,mutationScope,mutationBuilder,variableBuilder).then(function(response){console.log(response)})}}(workSpaceCode);break;default:designerMsg="Unable to parse the code"}}resolve(designerMsg)})}}}),_export("DesignerUtil",DesignerUtil)}}}),System.registerDynamic("client/script/mmf/GetRequiredComponents.js",[],!1,function($__require,$__exports,$__module){var _retrieveGlobal=System.registry.get("@@global-helpers").prepareGlobal($__module.id,null,null);return function($__global){$__global.getActions=getActions,$__global.getStates=getStates,$__global.processRoute=function(route2Process){if(route2Process&&route2Process.node){var{uid:uid,Name:Name,Path:Path,HTML:HTML,requiredComponents:requiredComponents}=route2Process.node,resolvedRoute={uid:uid,Name:Name,Path:Path,HTML:HTML,requiredComponents:{}};if(resolvedRoutes[Name]=resolvedRoute,requiredComponents&&requiredComponents.edges&&requiredComponents.edges.length>0){var requiredComponentList=requiredComponents.edges;requiredComponentList.forEach(requiredComponentNode=>{var requiredComponent=requiredComponentNode&&requiredComponentNode.node?requiredComponentNode.node.requiredComponent:null;if(requiredComponent&&!resolvedRoute.requiredComponents[requiredComponent.uid]){var{Name:Name,Definition:Definition,HTML:HTML,Type:Type,States:States,Actions:Actions}=requiredComponent;resolvedRoute.requiredComponents[requiredComponent.uid]={Name:Name,Definition:Definition,HTML:HTML,Type:Type},resolvedRoute.requiredComponents[requiredComponent.uid].States=getStates(States),resolvedRoute.requiredComponents[requiredComponent.uid].Actions=getActions(Actions)}})}}};var resolvedRoutes=$__global.resolvedRoutes;resolvedRoutes={};function getStates(data){let statesArry=[];return data&&data.edges&&data.edges.forEach(stateNode=>{if(stateNode&&stateNode.node){var{KeyName:KeyName,AccessPath:AccessPath,DefaultValue:DefaultValue}=stateNode.node;statesArry.push({KeyName:KeyName,AccessPath:AccessPath,DefaultValue:DefaultValue})}}),statesArry}function getActions(data){let actionsArry=[];return data&&data.edges&&data.edges.forEach(actionNode=>{if(actionNode&&actionNode.node){var{Action:Action,Definition:Definition}=actionNode.node;actionsArry.push({Action:Action,Definition:Definition})}}),actionsArry}$__global.resolvedRoutes=resolvedRoutes}(this),_retrieveGlobal()}),System.register("client/script/mmf/GetResolvedRoutes.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default}],execute:function(){_export("default",function(){this.resolvedRoutes=[],this.process=function(pathName){var _ref,_this=this,rootPath=pathName;return pathName.startsWith("/")&&(rootPath=pathName.slice(1)),rootPath=(rootPath=(rootPath=rootPath.indexOf("/")>-1?rootPath.split("/")[0]:rootPath).startsWith("/")?rootPath:"/"+rootPath).indexOf("?debug=true")>-1?rootPath.split("?debug=true")[0]:rootPath,new Promise((_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(resolve,reject){var slides;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,$qry.run("mmf.getSlidesWithPath",{basePath:rootPath});case 2:slides=_context.sent,!slides||0==Object.keys(slides).length?$qry.run("mmf.getMatchingRoutes",{PATH:rootPath}).then(function(matchingRoutes){_this.processRoutes(matchingRoutes).then(function(res){resolve(_this.resolvedRoutes)})}):$qry.run("mmf.getMatchingRoutes",{PATH:"/page"}).then(function(matchingRoutes){_this.processRoutes(matchingRoutes).then(function(res){_this.resolvedRoutes&&_this.resolvedRoutes.map(function(resolvedRoute){slides&&(resolvedRoute.pages=[],Object.keys(slides).map(function(slideKey){var pageObj={};pageObj.pageId=slides[slideKey].pageId,pageObj.pageType=slides[slideKey].Type,pageObj.pagePath=slides[slideKey].Path,resolvedRoute.pages.push(pageObj)}))}),resolve(_this.resolvedRoutes)})});case 5:case"end":return _context.stop()}},_callee,_this)})),function(_x,_x2){return _ref.apply(this,arguments)}))},this.processRoutes=function(matchingRoutes){var _this2=this;return new Promise(function(resolve,reject){if(matchingRoutes){var pendingRoutes=matchingRoutes.length;try{matchingRoutes.forEach(function(matchingRoute){_this2.processRoute(matchingRoute).then(function(data){0==--pendingRoutes&&resolve()}).catch(function(err){0==--pendingRoutes&&resolve()})})}catch(err){console.log("Error occurred in processRoutes..."+err),resolve()}}else resolve()})},this.processRoute=function(route2Process){var _this3=this;return new Promise(function(resolve,reject){try{if(route2Process&&route2Process.node){var _route2Process$node=route2Process.node,Path=(_route2Process$node.uid,_route2Process$node.Name,_route2Process$node.Path),HTML=_route2Process$node.HTML,Scope=_route2Process$node.Scope,requiredComponents=_route2Process$node.requiredComponents,resolvedRoute={path:Path,html:HTML,scope:Scope,requiredComponents:[]};if(_this3.resolvedRoutes.push(resolvedRoute),requiredComponents&&requiredComponents.edges&&requiredComponents.edges.length>0){var visitedRequiredComponents={};requiredComponents.edges.forEach(function(requiredComponentNode){var requiredComponent=requiredComponentNode&&requiredComponentNode.node?requiredComponentNode.node.requiredComponent:null;requiredComponent&&!visitedRequiredComponents[requiredComponent.uid]&&(resolvedRoute.requiredComponents.push({Name:requiredComponent.Name,Scope:requiredComponent.Scope,Type:requiredComponent.Type,States:_this3.getStates(requiredComponent.States),Actions:_this3.getActions(requiredComponent.Actions)}),visitedRequiredComponents[requiredComponent.uid]=!0)})}resolve()}else resolve()}catch(err){console.log("Error occurred in processRoute..."+err),resolve()}})},this.getStates=function(data){var statesArry=[];return data&&data.edges&&data.edges.forEach(function(stateNode){if(stateNode&&stateNode.node){var _stateNode$node=stateNode.node,KeyName=_stateNode$node.KeyName,AccessPath=_stateNode$node.AccessPath,DefaultValue=_stateNode$node.DefaultValue;statesArry.push({KeyName:KeyName,AccessPath:AccessPath,DefaultValue:DefaultValue})}}),statesArry},this.getActions=function(data){var actionsArry=[];return data&&data.edges&&data.edges.forEach(function(actionNode){if(actionNode&&actionNode.node){var _actionNode$node=actionNode.node,Action=_actionNode$node.Action,Definition=_actionNode$node.Definition;actionsArry.push({Action:Action,Definition:Definition})}}),actionsArry}})}}}),System.register("client/script/mmf/GetResourceData.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){_export("default",function(resourceName,resourceScope){return new Promise(function(resolve,reject){$qry.run("mmf.getResource",{Name:resourceName,Scope:resourceScope},"data.MetaResource.MetaResourceFind.edges").then(function(qryResult){if(qryResult&&qryResult.length>0){var result=qryResult[0];result&&result.node&&result.node.Definition?resolve(result.node.Definition):resolve("")}else resolve("")})})})}}}),System.register("client/script/mmf/PreviewLoader.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","react","react-dom","react-redux","redux"],function(_export,_context){"use strict";var _extends,React,Provider,createStore,combineReducers,dynamicReducer,sampleReducer,dynamicReducerImpl,rootReducer,previewStore,PreviewLoader;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_reactRedux){Provider=_reactRedux.Provider},function(_redux){createStore=_redux.createStore,combineReducers=_redux.combineReducers}],execute:function(){sampleReducer=function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments[1];return state},dynamicReducerImpl=(dynamicReducer=function(availableActions){return function(){var actionDefinition,state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{payload:{}},action=arguments[1];state.payload||(state.payload={});var payloadCopy=JSON.parse(JSON.stringify(state.payload)),origin=action.payload?action.payload.origin:"";if(availableActions&&availableActions[origin]&&(actionDefinition=availableActions[origin][action.type]),actionDefinition){var newPayload=availableActions[origin][action.type](payloadCopy,action.payload);return _extends({},state,{payload:newPayload})}return state}})({}),rootReducer=combineReducers({dynamicReducer:dynamicReducerImpl,sampleReducer:sampleReducer}),previewStore=createStore(rootReducer,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),_export("PreviewLoader",PreviewLoader=function(deps){var dynamicReducerImpl=dynamicReducer(deps.componentAction),rootReducer=combineReducers({dynamicReducer:dynamicReducerImpl,sampleReducer:sampleReducer});previewStore.replaceReducer(rootReducer);var props={deps:deps},Component2Render=(0,deps.rootComponent)(props);return React.createElement("div",{className:"previewPane"},React.createElement(Provider,{store:previewStore},React.createElement(Component2Render,null)))}),_export("PreviewLoader",PreviewLoader),_export("default",PreviewLoader)}}}),System.register("client/script/mmf/$script.js",[],function(_export,_context){"use strict";var $script;return{setters:[],execute:function(){_export("$script",$script={getCookie:function(cname){for(var name=cname+"=",ca=decodeURIComponent(document.cookie).split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""},names:function(){return new Promise(function(resolve,reject){var accessPaths=["data.MetaReusableScript.MetaReusableScriptFind.edges"].join();$qry.run("mmf.getClientScripts",{},accessPaths).then(function(result){var clientScripts=[];result&&result.length>0&&result.forEach(function(eachFile){eachFile&&eachFile.node&&clientScripts.push(eachFile.node.Scope+"."+eachFile.node.Name)}),resolve(clientScripts)}).catch(function(err){resolve([])})})},runWithoutCache:function(name,inputParams){return this.run(name,inputParams,!0)},runscript:function(name,inputParams,noCache){var _this=this;return new Promise(function(resolve,reject){_this.getscript(name,noCache).then(function(_ref){var scriptResult=(0,_ref.default)(inputParams);scriptResult&&scriptResult.then?scriptResult.then(function(data){return resolve(data)}):resolve(scriptResult)})})},getWithoutCache:function(name){return this.getscript(name,!0)},getscript:function(name,noCache){return new Promise(function(resolve,reject){var scriptName=name.split("."),scopeName=void 0;1==scriptName.length?scopeName="mmf":(scopeName=scriptName[0],scriptName=scriptName[1]);var url=noCache?"/client/script/"+scopeName+"/"+scriptName+".js?ts="+Date.now():"/client/script/"+scopeName+"/"+scriptName+".js";System.import(url).then(function(clientScriptModule){resolve(clientScriptModule)}).catch(function(err){console.error(err),resolve(null)})})},runAtServer:function(scriptName,inputParams){var _this2=this;return new Promise(function(resolve,reject){var inputScript='$script.runscript("'+scriptName+'", '+JSON.stringify(inputParams)+").then((results)=>$resolve(results))";fetch("/runscript",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:_this2.getCookie("authorization")},body:JSON.stringify({script:inputScript})}).then(_this2.checkStatus).then(_this2.parseJSON).then(function(result){resolve(result)})})},checkStatus:function(response){if(response.redirected&&response.location)return window.location=response.location,"{}";if(response.url&&"/login"==new URL(response.url).pathname)return window.location="/login","{}";if(response.status>=200&&response.status<300)return response;var error=new Error("HTTP Error "+response.statusText);throw error.status=response.statusText,error.response=response,console.log(error),error},parseJSON:function(response){return response.json()}}),_export("$script",$script),_export("default",$script)}}}),System.register("client/script/mmf/getStore.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/toConsumableArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","redux","redux-first-routing","redux-virtual-dom"],function(_export,_context){"use strict";var _toConsumableArray,_extends,createStore,combineReducers,applyMiddleware,compose,routerReducer,routerMiddleware,injectCreator,storeUtil;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs){_toConsumableArray=_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_redux){createStore=_redux.createStore,combineReducers=_redux.combineReducers,applyMiddleware=_redux.applyMiddleware,compose=_redux.compose},function(_reduxFirstRouting){_reduxFirstRouting.createBrowserHistory,routerReducer=_reduxFirstRouting.routerReducer,routerMiddleware=_reduxFirstRouting.routerMiddleware,_reduxFirstRouting.startListener,_reduxFirstRouting.push,_reduxFirstRouting.replace},function(_reduxVirtualDom){injectCreator=_reduxVirtualDom.default}],execute:function(){storeUtil=new function(){this.store=null,this.injectCreator=null,this.coreActions=["updateStore","addFlashMessage","addInfoMessage","addWarningMessage","addErrorMessage","openModal"],this.setReducerRegistry=function(reducerRegistry){this.reducerRegistry=reducerRegistry},this.getReducers=function(origin){return this.reducerRegistry?this.reducerRegistry.getReducers(origin):{}},this.addReducers=function(reducers,origin){var self=this;reducers&&Object.keys(reducers).forEach(function(reducerName){reducerName?self.reducerRegistry.register(reducerName,reducers[reducerName],origin):console.log("Unable to register the reducer!")})},this.dynamicReducer=function(){var self=this;return function(){var actionDefinition,state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{payload:{}},action=arguments[1];state.payload||(state.payload={});var payloadCopy=JSON.parse(JSON.stringify(state.payload)),origin=action.payload?action.payload.origin:"",availableActions=self.getReducers(origin);if(availableActions)try{actionDefinition=availableActions[action.type]}catch(err){console.log("Error loading the action definition - "+err)}var newPayload=payloadCopy;return actionDefinition?(newPayload=self.coreActions.indexOf(action.type)>-1?actionDefinition(payloadCopy,action.payload):self.actionWrapper(action.payload,actionDefinition),_extends({},state,{payload:newPayload})):state}},this.actionWrapper=function(input,actionFn){return actionFn(input.$input,input.$update)},this.sampleReducer=function(){var state=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments[1];return state},this.getStore=function(context){if(!this.store){var dynamicReducerImpl=this.dynamicReducer({}),sampleReducer=this.sampleReducer,rootReducer=combineReducers({dynamicReducer:dynamicReducerImpl,sampleReducer:sampleReducer,router:routerReducer}),middleware=routerMiddleware(context.history),enhancer=("object"==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0}):compose)(applyMiddleware.apply(void 0,_toConsumableArray(middleware)));this.store=createStore(rootReducer,enhancer)}return this.store},this.getInjectCreator=function(){if(!this.injectCreator){var _injectCreator=injectCreator(this.getStore()),inject=_injectCreator.inject,connect=_injectCreator.connect;this.injectCreator={inject2vdom:inject,connect2vdom:connect}}return this.injectCreator},this.updateStore=function(reducers){var store=this.getStore(),dynamicReducerImpl=this.dynamicReducer(reducers),sampleReducer=this.sampleReducer,rootReducer=combineReducers({dynamicReducer:dynamicReducerImpl,sampleReducer:sampleReducer,router:routerReducer});store.replaceReducer(rootReducer)}},_export("default",storeUtil)}}}),System.register("client/script/mmf/WConnectUtil.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/toConsumableArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/defineProperty.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/get.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","redux","deepmerge","lodash.debounce"],function(_export,_context){"use strict";var _toConsumableArray,_extends,_defineProperty,_get,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,bindActionCreators,deepmerge,debounce;function _CustomElement(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}return _export("default",function(rawComponentStyles){this.setStoreUtil=function(storeUtil){this.storeUtil=storeUtil},this.cssCarbonLoaded=null,this.getStoreUtil=function(){return this.storeUtil},this.isFunction=function(f){return"function"==typeof f},this.shallowEqual=function(first,second){if(first==first)return!0;if(null==first||null==second)return!1;var firstObjKeys=Object.keys(first),secondObjKeys=Object.keys(second);if(firstObjKeys.length!==secondObjKeys.length)return!1;var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=firstObjKeys[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var key=_step.value;if(firstObjKeys[key]!==secondObjKeys[key])return!1}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return!0},this.withStore=function(store){return function(baseClass){return function(_baseClass){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,baseClass),_createClass(_class,[{key:"getStore",value:function(){return store}}]),_class}()}},this.withRender=function(templateDefinition,templateDefaultProps,templatingFn){var self=this;return function(){return function(_CustomElement2){function Element(){_classCallCheck(this,Element);var _this2=_possibleConstructorReturn(this,(Element.__proto__||Object.getPrototypeOf(Element)).call(this));_this2._isConnected=!1,_this2._nodeName=_this2.nodeName.toLowerCase(),_this2._renderEnqueued=!1,_this2.isRenderedOnce=!1;var selfElem=_this2,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_loop=function(){var propName=_step2.value;Object.defineProperty(selfElem,propName,{configurable:!0,enumerable:!0,get:function(){return selfElem.ownProps?selfElem.ownProps[propName]:void 0},set:function(val){selfElem[propName]!==val&&(selfElem.ownProps=Object.assign({},selfElem.ownProps,_defineProperty({},propName,val)))}})},_iterator2=Object.keys(Element.properties)[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0)_loop()}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return _this2.shadowDOM=_this2.attachShadow({mode:"open"}),_this2}return _inherits(Element,_CustomElement),_createClass(Element,[{key:"updateAttributes",value:function(){var _this3=this,currentRenderProps=this._renderProps;this._renderProps&&"string"!=typeof this._renderProps.shadow&&(currentRenderProps={},Object.keys(this._renderProps).map(function(propName,indx){"shadow"!=propName&&(currentRenderProps[propName]=_this3._renderProps[propName])})),this._renderProps=deepmerge.all([currentRenderProps,this.eleAttributes]),this.enqueueRender()}},{key:"objectCompare",value:function(obj1,obj2){if("boolean"==typeof obj1)return"boolean"==typeof obj2&&obj1==obj2;for(var p in obj1){if(obj1.hasOwnProperty(p)!==obj2.hasOwnProperty(p))return!1;switch(typeof obj1[p]){case"object":if(!_.isEqual(obj1[p],obj2[p]))return!1;break;case"function":if(void 0===obj2[p]||"compare"!=p&&obj1[p].toString()!=obj2[p].toString())return!1;break;default:if(obj1[p]!=obj2[p])return!1}}for(var p in obj2)if(void 0===obj1[p])return!1;return!0}},{key:"anyPropChanged",value:function(updatedProps){var _this4=this;if(!this.isRenderedOnce)return this.isRenderedOnce=!0,this.isRenderedOnce;var changedPropKeysOfInterest=[];this._ownProps.states&&this._ownProps.states.length>0&&this._ownProps.states.forEach(function(st){changedPropKeysOfInterest.push(st.KeyName)});var changedProps=Object.keys(updatedProps).filter(function(p,indx){return changedPropKeysOfInterest.indexOf(p)>-1&&"function"!=typeof updatedProps[p]&&null!=updatedProps[p]&&void 0!=updatedProps[p]&&(!_this4._renderProps||!_this4._renderProps[p]||!_this4.objectCompare(updatedProps[p],_this4._renderProps[p]))});return changedProps&&changedProps.length>0}},{key:"attributeChangedCallback",value:function(name,oldValue,newValue){if(self.isFunction(_get(Element.prototype.__proto__||Object.getPrototypeOf(Element.prototype),"attributeChangedCallback",this))&&_get(Element.prototype.__proto__||Object.getPrototypeOf(Element.prototype),"attributeChangedCallback",this).call(this,name,oldValue,newValue),name in Element.properties&&oldValue!==newValue){var transformer=Element.properties[name];transformer?transformer===Boolean?this[name]=null!=newValue:this[name]=transformer(newValue):this[name]=newValue}}},{key:"connectedCallback",value:function(){self.isFunction(_get(Element.prototype.__proto__||Object.getPrototypeOf(Element.prototype),"connectedCallback",this))&&_get(Element.prototype.__proto__||Object.getPrototypeOf(Element.prototype),"connectedCallback",this).call(this),this._isConnected=!0}},{key:"disconnectedCallback",value:function(){self.isFunction(_get(Element.prototype.__proto__||Object.getPrototypeOf(Element.prototype),"disconnectedCallback",this))&&_get(Element.prototype.__proto__||Object.getPrototypeOf(Element.prototype),"disconnectedCallback",this).call(this),this._isConnected=!1}},{key:"enqueueRender",value:function(){var _this5=this;this._renderEnqueued||(this._renderEnqueued=!0,Promise.resolve().then(function(){_this5._renderEnqueued=!1,_this5._isConnected&&_this5.render()}))}},{key:"render",value:function(){console.log("Default rendering")}},{key:"ownProps",get:function(){return this.renderProps},set:function(props){this.renderProps=props}},{key:"renderProps",get:function(){return this._renderProps},set:function(props){this.anyPropChanged(props)&&(this._renderProps=props,this.enqueueRender())}},{key:"template",get:function(){return templateDefinition}}],[{key:"observedAttributes",get:function(){return this.ownProps?Object.keys(this.ownProps):[]}},{key:"properties",get:function(){return templateDefaultProps||{}}}]),Element}()}},this.connect=function(templatingFn,templateProps){var _this6=this;return function(b){var self=_this6,base=_this6.isTemplateFunction(b)?_this6.withRender(b,{name:templateProps.componentName},templatingFn)():b;return function(_base){function _class2(){var _ref;_classCallCheck(this,_class2);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var _this7=_possibleConstructorReturn(this,(_ref=_class2.__proto__||Object.getPrototypeOf(_class2)).call.apply(_ref,[this].concat(args)));_this7.eleAttributes={},_this7._propsEnqueued=!1,_this7.templateProps=templateProps;var storeState=_this7.getStore()?_this7.getStore().getState():{};return _this7._preparedMapStateToProps=self.isFactory(self.mapState2Props)?self.mapState2Props(storeState,templateProps.states).bind(self):self.mapState2Props.bind(self),_this7.ownProps={states:templateProps.states},_this7}return _inherits(_class2,base),_createClass(_class2,[{key:"observeAttrChange",value:function(el,callback){var observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){if("attributes"===mutation.type){var newVal=mutation.target.getAttribute(mutation.attributeName);callback(mutation.attributeName,newVal)}})});return observer.observe(el,{attributes:!0}),observer}},{key:"connectedCallback",value:function(){var _this8=this;_get(_class2.prototype.__proto__||Object.getPrototypeOf(_class2.prototype),"connectedCallback",this).call(this);var store=this.getStore();if(this.getAttributeNames().forEach(function(attrName){_this8.eleAttributes[attrName]=_this8.getAttribute(attrName)}),this.eleAttributes.uid||(this.eleAttributes.uid=this.getUUID()),this.eleAttributes.keypropname){var keyPropName=this.eleAttributes.keypropname;this.eleAttributes[keyPropName]?this.eleAttributes.key=this.eleAttributes[keyPropName]:this.eleAttributes.key=this.eleAttributes.uid}else this.eleAttributes.key=this.eleAttributes.uid;var self2=this;this.observeAttrChange(this,function(attrName,newValue){_.isEqual(self2.eleAttributes[attrName],newValue)||(self2.eleAttributes[attrName]=newValue,debounce(function(){self2.updateAttributes()},200,{maxWait:500})())}),this.isLite=this.hasAttribute("lite"),this.injectShadow=this.hasAttribute("shadow");var context={origin:templateProps.name,states:templateProps.states,eleAttrs:self2.eleAttributes,actions:templateProps.actions,store:store,anyAction:self.anyAction,storeUtil:self.getStoreUtil()};this._preparedMapDispatchToProps=self.isFunction(self.mapDispatch2Action)?self.mapDispatch2Action.bind(context):bindActionCreators(self.mapDispatch2Action.bind(context),store.dispatch);var currentThis=this;this._unsubscribe=store.subscribe(function(){return currentThis._computeProps()}),this._computeProps()}},{key:"disconnectedCallback",value:function(){_get(_class2.prototype.__proto__||Object.getPrototypeOf(_class2.prototype),"disconnectedCallback",this).call(this),this._unsubscribe(),this._store=void 0}},{key:"getUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)})}},{key:"getStore",value:function(){return self.getStoreUtil()?self.getStoreUtil().getStore({history:history}):{}}},{key:"_computeProps",value:function(){var _this9=this;this._propsEnqueued||(this._propsEnqueued=!0,Promise.resolve().then(function(){_this9._propsEnqueued=!1;var store=_this9.getStore(),propsNAttrs=Object.assign({},_extends({},_this9.ownProps),_extends({},_this9.eleAttributes)),props=_this9._preparedMapStateToProps(store.getState(),propsNAttrs),dispatch=self.isFunction(_this9._preparedMapDispatchToProps)?_this9._preparedMapDispatchToProps(store.dispatch,_this9.ownProps):_this9._preparedMapDispatchToProps;_this9.renderProps=Object.assign({},props,_extends({},_this9.eleAttributes),dispatch)}))}},{key:"render",value:function(){var _this10=this;if(templatingFn){var wrappedTemplate=(0,self.getStoreUtil().getInjectCreator().connect2vdom)(this._preparedMapStateToProps,this._preparedMapDispatchToProps)(this.template),options={lite:this.isLite},mainRootEl=void 0;if(this.isLite){var el1;this.children&&0!=this.children.length?el1=this.children[0]:((el1=document.createElement("div")).setAttribute("style","height: inherit;"),el1.setAttribute("slot","literoot"),this.appendChild(el1)),this.injectShadow&&(this.renderProps.shadow=this.shadowRoot),(rootEle=$("#head",this.shadowRoot))&&0!=rootEle.length?rootEle=rootEle[0]:((rootEle=document.createElement("div")).setAttribute("id","head"),rootEle.setAttribute("style","height: inherit;"),rootEle.innerHTML='<slot name="literoot"></slot>',this.shadowRoot.appendChild(rootEle));var parentNonLightShadowDOM=this.shadowRoot;if(this.shadowRoot&&this.shadowRoot.host&&this.shadowRoot.host.hasAttribute("lite")){for(var ele=this.shadowDOM.host;ele.parentElement;)ele=ele.parentElement;ele.getRootNode()&&(ele.getRootNode()==document?parentNonLightShadowDOM=document:ele.getRootNode().host&&!ele.getRootNode().host.hasAttribute("lite")&&(parentNonLightShadowDOM=ele.getRootNode()))}if(Object.defineProperty(el1,"ownerDocument",{value:parentNonLightShadowDOM}),parentNonLightShadowDOM!=document&&(parentNonLightShadowDOM.createElementNS=function(){var _document;return(_document=document).createElementNS.apply(_document,arguments)},parentNonLightShadowDOM.createElement=function(){var _document2;return(_document2=document).createElement.apply(_document2,arguments)},parentNonLightShadowDOM.createTextNode=function(){var _document3;return(_document3=document).createTextNode.apply(_document3,arguments)},parentNonLightShadowDOM.defaultView=document.defaultView,!document.defaultView.getComputedStyleOverride)){var getComputedStyleFn=document.defaultView.getComputedStyle;document.defaultView.getComputedStyle=function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];window.getComputedStyle;var updatedArgs=[].concat(args);return args&&args.length>0&&11==args[0].nodeType&&(updatedArgs[0]=args[0].host),getComputedStyleFn.apply(void 0,_toConsumableArray(updatedArgs))},document.defaultView.getComputedStyleOverride=!0}mainRootEl=el1}else{var rootEle;if((rootEle=$("#head",this.shadowRoot))&&0!=rootEle.length?rootEle=rootEle[0]:((rootEle=document.createElement("div")).setAttribute("id","head"),rootEle.setAttribute("style","height: inherit;"),this.shadowRoot.appendChild(rootEle)),Object.defineProperty(rootEle,"ownerDocument",{value:this.shadowRoot}),this.shadowRoot.createElement=function(){var _document4;return(_document4=document).createElement.apply(_document4,arguments)},this.shadowRoot.createElementNS=function(){var _document5;return(_document5=document).createElementNS.apply(_document5,arguments)},this.shadowRoot.createTextNode=function(){var _document6;return(_document6=document).createTextNode.apply(_document6,arguments)},this.shadowRoot.defaultView=document.defaultView,!document.defaultView.getComputedStyleOverride){getComputedStyleFn=document.defaultView.getComputedStyle;document.defaultView.getComputedStyle=function(){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];window.getComputedStyle;var updatedArgs=[].concat(args);return args&&args.length>0&&11==args[0].nodeType&&(updatedArgs[0]=args[0].host),getComputedStyleFn.apply(void 0,_toConsumableArray(updatedArgs))},document.defaultView.getComputedStyleOverride=!0}this.injectShadow&&(this.renderProps.shadow=this.shadowRoot),mainRootEl=rootEle}if(rawComponentStyles[templateProps.name+"_"+templateProps.scope]){var key="style_"+templateProps.name+"_"+templateProps.scope,styleEl=$("."+key,this.shadowRoot);styleEl&&0!=styleEl.length||this.shadowRoot.appendChild(self.getStyleEl(rawComponentStyles[templateProps.name+"_"+templateProps.scope],key)),templatingFn(this._nodeName,wrappedTemplate,Object.assign({},this.renderProps),mainRootEl,options)}else self.getStyles(templateProps.name,templateProps.scope,function(){var key="style_"+templateProps.name+"_"+templateProps.scope,styleEl=$("."+key,_this10.shadowRoot);styleEl&&0!=styleEl.length||_this10.shadowRoot.appendChild(self.getStyleEl(rawComponentStyles[templateProps.name+"_"+templateProps.scope],key)),templatingFn(_this10._nodeName,wrappedTemplate,Object.assign({},_this10.renderProps),mainRootEl,options)})}else _get(_class2.prototype.__proto__||Object.getPrototypeOf(_class2.prototype),"render",this).call(this)}},{key:"ownProps",get:function(){return this._ownProps},set:function(props){this._ownProps=props,this._computeProps()}}],[{key:"observedAttributes",get:function(){return this.eleAttributes?Object.keys(this.eleAttributes):[]}}]),_class2}()}},this.isFactory=function(fn){return 0===fn.length},this.getStyles=function(componentName,componentScope,cb){rawComponentStyles[componentName+"_"+componentScope]?cb():_context.import("/client/"+componentScope+"_styles.js").then(function(componentCSSFn){if(componentCSSFn&&componentCSSFn.default){var componentStyleStr=componentCSSFn.default()[componentName];rawComponentStyles.carbon?(rawComponentStyles[componentName+"_"+componentScope]=componentStyleStr+"\n"+rawComponentStyles.carbon,cb()):fetch("/thirdpartylib/carbon-components/styles.css").then(function(res){return res.text().then(function(carbonCSS){rawComponentStyles.carbon=carbonCSS,rawComponentStyles[componentName+"_"+componentScope]=componentStyleStr+"\n"+rawComponentStyles.carbon,cb()})})}else cb()})},this.getStyleEl=function(rawStyles,keyName){var styleEl=document.createElement("style");return styleEl.setAttribute("class",keyName),styleEl.styleSheet?styleEl.styleSheet.cssText=rawStyles:styleEl.appendChild(document.createTextNode(rawStyles)),styleEl},this.isTemplateFunction=function(base){return base&&!(base.prototype instanceof HTMLElement)},this.mapState2Props=function(storeState,ownProps){storeState.dynamicReducer.payload;return this._constructPropsMap(storeState.dynamicReducer.payload,ownProps)},this.anyAction=function(actionName,payload,origin){return{type:actionName,payload:Object.assign(payload,origin)}},this.mapDispatch2Action=function(dispatch){var self=this,result={};if(self.actions){var actionNames=Object.keys(self.actions);self.storeUtil.addReducers(self.actions,self.origin),actionNames.forEach(function(actionName){result[actionName]=function(payload,$live){var live=$live||{};payload=payload||{};var newProps=Object.assign({},_extends({},self.eleAttrs),{origin:self.origin,states:JSON.stringify(self.states)});"asyncUpdateStore"==actionName?setTimeout(function(){return dispatch({type:"updateStore",payload:_extends({},payload,newProps,live)})}):dispatch({type:actionName,payload:_extends({},payload,newProps,live)})}})}return result},this._replaceDynamicParams=function(currentValue,lookupProps){var newValueStr=currentValue;if(newValueStr){var matchingParams=newValueStr.match(/\${\w+}/g);matchingParams&&matchingParams.forEach(function(matchingParam){if(matchingParam){var paramName=matchingParam.slice(2,matchingParam.length-1),paramValue=lookupProps[paramName];paramValue&&(newValueStr=newValueStr.replace(matchingParam,paramValue))}})}return JSON.parse(newValueStr)},this._constructPropsMap=function(payload,ownProps){var _this11=this,result={};return ownProps&&Object.keys(ownProps).forEach(function(ownPropKey){if("states"==ownPropKey){var updatedPayload=_extends({},payload,ownProps);delete updatedPayload.states,result=_extends({},result,_this11._populateSubscribedStateProps(updatedPayload,ownProps.states))}else result[ownPropKey]=Object.assign({},ownProps[ownPropKey])}),result},this._populateSubscribedStateProps=function(payload,subscribedStates){var result={},self=this;if(!subscribedStates||!subscribedStates.forEach)return result;var pendingStatesForPhase2=[],isPhase2=!1,payloadUpdated={};payloadUpdated=Object.assign(payloadUpdated,payload);do{(isPhase2?pendingStatesForPhase2:subscribedStates).forEach(function(newState){var keyName=newState.KeyName,defaultValue=newState.DefaultValue,accessPathParts=newState.AccessPath.split("."),newAccessPath="";accessPathParts&&accessPathParts.forEach(function(pathPart){var dynamicParams=pathPart.match(/[$][{](\w+)[}]/g);dynamicParams&&dynamicParams.map(function(dynamicParam){var params=dynamicParam.match(/[$][{](\w+)[}]/);if(params&&2==params.length&&Object.keys(payloadUpdated).indexOf(params[1])>-1){var tempPathPart=pathPart.replace(params[0],payloadUpdated[params[1]]);pathPart=tempPathPart||pathPart}}),newAccessPath=newAccessPath?newAccessPath+"."+pathPart:pathPart});var payload2Update=Object.assign({},payloadUpdated);if(newAccessPath.split(".").filter(function(key){return payload2Update&&(payload2Update=payload2Update[key]),!1}),!(1==payload2Update||0==payload2Update||payload2Update&&Object.keys(payload2Update)&&0!=Object.keys(payload2Update).length)){newAccessPath.split(".").length>1&&newAccessPath.split(".")[0];var newDefaultValue=self._replaceDynamicParams(defaultValue,payloadUpdated);!isPhase2&&newDefaultValue&&JSON.stringify(newDefaultValue).match(".*[$][{][^}]+[}].*","g")?pendingStatesForPhase2.push(newState):(payloadUpdated=deepmerge.all([payloadUpdated,newDefaultValue]),payload2Update=Object.assign({},payloadUpdated),newAccessPath.split(".").filter(function(key){return payload2Update&&(payload2Update=payload2Update[key]),!1}))}null!=payload2Update&&void 0!=payload2Update&&(result[keyName]=payload2Update)}),pendingStatesForPhase2=isPhase2?[]:pendingStatesForPhase2,isPhase2=!isPhase2}while(pendingStatesForPhase2.length>0);return result}}),{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs){_toConsumableArray=_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs){_defineProperty=_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersGetJs){_get=_npmSystemjsPluginBabel0025BabelHelpersGetJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_redux){bindActionCreators=_redux.bindActionCreators},function(_deepmerge){deepmerge=_deepmerge.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){Object.setPrototypeOf(_CustomElement.prototype,HTMLElement.prototype),Object.setPrototypeOf(_CustomElement,HTMLElement)}}}),System.register("component/mmf/RouteComponent/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-router","react-router-dom"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Route,Router,RouteComponent;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactRouter){Route=_reactRouter.Route},function(_reactRouterDom){Router=_reactRouterDom.BrowserRouter,_reactRouterDom.Link,_reactRouterDom.withRouter,_reactRouterDom.Switch,_reactRouterDom.matchPath}],execute:function(){_export("RouteComponent",RouteComponent=function(_React$Component){function RouteComponent(){return _classCallCheck(this,RouteComponent),_possibleConstructorReturn(this,(RouteComponent.__proto__||Object.getPrototypeOf(RouteComponent)).apply(this,arguments))}return _inherits(RouteComponent,_React$Component),_createClass(RouteComponent,[{key:"render",value:function(){console.log("Props for the RouterComponent - "),console.log(this.props);var modules=this.props.deps.routes,moduleNames=Object.keys(modules),self=this,dynamicRoutes=moduleNames.map(function(routeModuleName,indx){var routeModule=modules[moduleNames[indx]];if(routeModule){var DynamicComponent=routeModule.component(self.props);return React.createElement(Route,{path:routeModule.path,render:function(props){return React.createElement(DynamicComponent,_extends({},props,{key:routeModuleName}))},key:routeModuleName})}});return React.createElement(Router,null,React.createElement("div",null,dynamicRoutes))}}]),RouteComponent}(React.Component)),_export("RouteComponent",RouteComponent)}}}),System.register("client/script/mmf/ElementUtil.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","lodash.set"],function(_export,_context){"use strict";var _extends,lodash_set;return _export("default",function(store,wconnect){this.standardize=function(name){return name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},this.registerElements=function(requiredElements){var _this=this;return new Promise(function(resolve,reject){if(requiredElements){var promises=[];requiredElements.forEach(function(requiredElement,indx){promises.push(_this.registerElement(requiredElement.Name,requiredElement.Scope,requiredElement.Type))}),Promise.all(promises).then(function(){return resolve()})}else resolve()})},this._replaceDynamicParams=function(currentValue,lookupProps){var newValueStr=currentValue;if(newValueStr){var matchingParams=newValueStr.match(/\${\w+}/g);if(matchingParams)for(var matchingParamsIndx in matchingParams){var matchingParam=matchingParams[matchingParamsIndx];if(matchingParam){var paramName=matchingParam.slice(2,matchingParam.length-1);if(Object.keys(lookupProps).indexOf(paramName)>-1){var paramValue=lookupProps[paramName];newValueStr=newValueStr.replace(matchingParam,paramValue)}}}}return newValueStr},this.registerElement=function(name,scope,type){var customElementName=this.standardize(name),self=this;return new Promise(function(resolve,reject){if(document.createElement(customElementName).constructor.__proto__==Element){var templateType=type||"React";_context.import("client/template/mmf/"+templateType+".js").then(function(templateFn){_context.import("component/"+scope+"/"+name+".js").then(function(templateDef){var Component=templateDef.default,states=templateDef.states,actions=templateDef.actions;actions&&(actions.updateStore=function(payload,input){var payloadClone=_extends({},payload),statesObj=JSON.parse(input.states),changedProps=Object.keys(input.updates),_loop=function(changedPropsIndx){var changedProp=changedProps[changedPropsIndx],matchingStateObj=statesObj.filter(function(stateObj){return stateObj.KeyName==changedProp});if(matchingStateObj&&1==matchingStateObj.length){matchingStateObj=matchingStateObj[0];var value2ReplaceInStore=input.updates[matchingStateObj.KeyName],inputData=_extends({},input);delete inputData.origin,delete inputData.updates,delete inputData.states,inputData=_extends({},payloadClone,inputData);var accessPathOfStateObj=self._replaceDynamicParams(matchingStateObj.AccessPath,inputData);lodash_set(payloadClone,accessPathOfStateObj,value2ReplaceInStore)}};for(var changedPropsIndx in changedProps)_loop(changedPropsIndx);return payloadClone},actions.asyncUpdateStore=function(payload,input){setTimeout(function(){return actions.updateStore(payload,input)})},actions.addFlashMessage=function(payload,input){var payloadClone=_extends({},payload),notifications=payloadClone.notifications||[],delay=input.timeout?parseInt(input.timeout):2e3,message={title:input.title,subtitle:input.subtitle,kind:"info",delay:delay};return notifications.push(message),payloadClone.notifications=notifications,payloadClone},actions.addInfoMessage=function(payload,input){var payloadClone=_extends({},payload),notifications=payloadClone.notifications||[];return notifications.push({title:input.title,subtitle:input.subtitle,kind:"info"}),payloadClone.notifications=notifications,payloadClone},actions.addErrorMessage=function(payload,input){var payloadClone=_extends({},payload),notifications=payloadClone.notifications||[];return notifications.push({title:input.title,subtitle:input.subtitle,kind:"error"}),payloadClone.notifications=notifications,payloadClone},actions.addWarningMessage=function(payload,input){var payloadClone=_extends({},payload),notifications=payloadClone.notifications||[];return notifications.push({title:input.title,subtitle:input.subtitle,kind:"warning"}),payloadClone.notifications=notifications,payloadClone},actions.openModal=function(payload,input){var payloadClone=_extends({},payload),pagemodal=payloadClone.pagemodal;return pagemodal={modalname:input.modalname,modalcomponent:input.modalcomponent,componentprops:input.props,modalpage:input.modalpage,modalparams:input.modalparams,layout:input.layout,key:Date.now()},payloadClone.pagemodal=pagemodal,payloadClone});var customElement=wconnect.connect(templateFn.default,{name:name,scope:scope,states:states,actions:actions})(Component),connectedCustomElement=wconnect.withStore(store)(customElement);document.createElement(customElementName).constructor.__proto__==Element&&customElements.define(customElementName,connectedCustomElement),resolve()}).catch(function(err){throw console.error(err.message),err})}).catch(function(err){throw console.error(err.message),err})}else resolve()})}}),{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_lodashSet){lodash_set=_lodashSet.default}],execute:function(){}}}),System.register("client/script/mmf/ReducerRegistry.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/defineProperty.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js"],function(_export,_context){"use strict";var _defineProperty,_extends,_classCallCheck,_createClass,ReducerRegistry,reducerRegistry;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs){_defineProperty=_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default}],execute:function(){ReducerRegistry=function(){function ReducerRegistry(){_classCallCheck(this,ReducerRegistry),this._reducers={}}return _createClass(ReducerRegistry,[{key:"getReducers",value:function(origin){return _extends({},this._reducers[origin])}},{key:"register",value:function(name,reducer,origin){this._reducers[origin]=this._reducers[origin]||{},this._reducers[origin]=_extends({},this._reducers[origin],_defineProperty({},name,reducer))}}]),ReducerRegistry}(),reducerRegistry=new ReducerRegistry,_export("default",reducerRegistry)}}}),System.register("client/script/mmf/RootLoader.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","jquery","client/script/mmf/$qry.js","client/script/mmf/$script.js","client/script/mmf/getStore.js","graphql-lodash","client/script/mmf/WConnectUtil.js","component/mmf/RouteComponent/Definition.js","universal-router","client/script/mmf/ElementUtil.js","client/script/mmf/ReducerRegistry.js","redux-first-routing","thirdpartylib/monaco/min/vs/customPolyfill.js"],function(_export,_context4){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,$qry,$script,storeUtil,graphqlLodash,WebConnectUtil,Router,ElementUtil,reducerRegistry,createBrowserHistory,startListener,_this,history,wconnect,store,eleUtil,loadNecessaryBundles,defaultActionHandler,wrapRoutes,loadedCache,currentLocation,RootLoader,render,pushState,getUrlQueryParams,routify,subscribe2LocationChange;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_jquery){},function(_clientScriptMmf$qryJs){$qry=_clientScriptMmf$qryJs.$qry},function(_clientScriptMmf$scriptJs){$script=_clientScriptMmf$scriptJs.$script},function(_clientScriptMmfGetStoreJs){storeUtil=_clientScriptMmfGetStoreJs.default},function(_graphqlLodash){graphqlLodash=_graphqlLodash.graphqlLodash},function(_clientScriptMmfWConnectUtilJs){WebConnectUtil=_clientScriptMmfWConnectUtilJs.default},function(_componentMmfRouteComponentDefinitionJs){_componentMmfRouteComponentDefinitionJs.RouteComponent},function(_universalRouter){Router=_universalRouter.default},function(_clientScriptMmfElementUtilJs){ElementUtil=_clientScriptMmfElementUtilJs.default},function(_clientScriptMmfReducerRegistryJs){reducerRegistry=_clientScriptMmfReducerRegistryJs.default},function(_reduxFirstRouting){createBrowserHistory=_reduxFirstRouting.createBrowserHistory,startListener=_reduxFirstRouting.startListener,_reduxFirstRouting.push,_reduxFirstRouting.replace},function(_thirdpartylibMonacoMinVsCustomPolyfillJs){}],execute:function(){var _ref;_this=this,history=createBrowserHistory(),wconnect=new WebConnectUtil({}),store=storeUtil.getStore({history:history}),eleUtil=new ElementUtil(store,wconnect),_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(appScope){var bundleFilter,bundleMaps,bundleMapIndx,bundleMap;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return[],bundleFilter={where:{Application:appScope}},_context.next=4,$qry.getCachableRecords("MetaBundleMap",bundleFilter,["uid","Type","Name","Resource"]);case 4:if(!((bundleMaps=_context.sent)&&bundleMaps.length>0)){_context.next=27;break}_context.t0=_regeneratorRuntime.keys(bundleMaps);case 7:if((_context.t1=_context.t0()).done){_context.next=27;break}bundleMapIndx=_context.t1.value,bundleMap=bundleMaps[bundleMapIndx],_context.t2=bundleMap.Type,_context.next="internal"===_context.t2?13:"external"===_context.t2?16:25;break;case 13:return _context.next=15,System.import("/load/bundle/"+bundleMap.Name+".js");case 15:return _context.abrupt("break",25);case 16:return _context.prev=16,_context.next=19,System.import(bundleMap.Resource);case 19:_context.next=24;break;case 21:_context.prev=21,_context.t3=_context.catch(16),console.error("Unable to import bundle "+bundleMap.Name);case 24:return _context.abrupt("break",25);case 25:_context.next=7;break;case 27:case"end":return _context.stop()}},_callee,_this,[[16,21]])})),loadNecessaryBundles=function(_x){return _ref.apply(this,arguments)},defaultActionHandler=function(context){var _this2=this,self=this;return _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,loadNecessaryBundles(self.scope);case 3:return _context2.next=5,eleUtil.registerElements(self.requiredComponents);case 5:_context2.next=10;break;case 7:_context2.prev=7,_context2.t0=_context2.catch(0),console.log(_context2.t0);case 10:case"end":return _context2.stop()}},_callee2,_this2,[[0,7]])}))(),{html:self.html,routeParams:context.params}},wrapRoutes=function(routes){return routes.forEach(function(routeObj){routeObj.action=defaultActionHandler}),routes},storeUtil.setReducerRegistry(reducerRegistry),wconnect.setStoreUtil(storeUtil),loadedCache=window.$qry&&window.$qry.cache?window.$qry.cache:{},window.$qry=_extends({},window.$qry,$qry),window.$qry.cache=_extends({},loadedCache,$qry.cache),window.$script=window.$script||_extends({},$script),window.$ele=window.$ele||eleUtil,window.graphqlLodash=window.graphqlLodash||graphqlLodash,currentLocation=store.getState().router.pathname,_export("RootLoader",RootLoader=function(){startListener(history,store);subscribe2LocationChange(store);currentLocation=store.getState().router.pathname,render(currentLocation)}),render=function(pathname){$script.getscript("mmf.GetResolvedRoutes").then(function(resolvedRoutes){var _ref3,_this3=this;(new(0,resolvedRoutes.default)).process(pathname).then((_ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(routesData){var router,transformedPath,tempPath,routeData,routeArry,resolvedOriginalRouteData,pageParams,paramKeys,paramValue,paramParts,paramIndx,paramKey,_paramValue;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(router=new Router(wrapRoutes(routesData)),transformedPath=pathname,!(routesData&&1==routesData.length&&routesData[0].pages&&routesData[0].pages.length>0)){_context3.next=14;break}return pathname.startsWith("/")?(tempPath=pathname.substr(1),transformedPath=tempPath.indexOf("/")>-1?"/"+tempPath.split("/")[0]+"/"+tempPath.split("/").splice(1).join("^"):tempPath.indexOf("?debug=true")>-1?"/"+tempPath.split("?debug=true")[0]:"/"+tempPath):transformedPath=pathname.indexOf("/")>-1?pathname.split("/")[0]+"/"+pathname.split("/").splice(1).join("^"):pathname.indexOf("?debug=true")>-1?pathname.split("?debug=true")[0]:pathname,routeData=routesData[0],routeArry=[],routeData.pages&&routeData.pages.map(function(pageObj){var routeObj={path:pageObj.pagePath,action:function(ctx){return{routeParams:ctx.params,pageId:pageObj.pageId}}};routeArry.push(routeObj)}),_context3.next=10,new Router(routeArry).resolve(transformedPath);case 10:if(resolvedOriginalRouteData=_context3.sent,pageParams={recordId:-1},resolvedOriginalRouteData&&resolvedOriginalRouteData.routeParams&&(paramKeys=Object.keys(resolvedOriginalRouteData.routeParams))&&1==paramKeys.length)if((paramValue=resolvedOriginalRouteData.routeParams[paramKeys[0]])&&paramValue.indexOf("^")>-1)for(pageParams={},paramParts=paramValue.split("^"),paramIndx=0;paramIndx<paramParts.length;paramIndx+=2)paramKey=paramParts[paramIndx],_paramValue=paramParts[paramIndx+1],pageParams[paramKey]=_paramValue.indexOf("?debug=true")>-1?_paramValue.split("?debug=true")[0]:_paramValue;else pageParams=paramValue?{recordid:paramValue}:pageParams;transformedPath="/page/"+resolvedOriginalRouteData.pageId+"/"+btoa(JSON.stringify(pageParams));case 14:router.resolve(transformedPath).then(function(routeResolveData){try{var rootElement=document.getElementById("root");$(rootElement).html(routify(routeResolveData.html,_extends({},routeResolveData.routeParams,getUrlQueryParams())))}catch(e){console.log(e)}});case 15:case"end":return _context3.stop()}},_callee3,_this3)})),function(_x2){return _ref3.apply(this,arguments)}))})},pushState=window.history.pushState,window.history.pushState=function(){pushState.apply(window.history,arguments);store.dispatch({type:"ROUTER/LOCATION_CHANGE",payload:{pathname:arguments[2],search:"",hash:""}})},window.onaclick=function(event){event.preventDefault(),window.history.pushState(null,"",event.target.pathname)},window.navigateTo=function(pathname){window.history.pushState(null,"",pathname)},getUrlQueryParams=function(){var queryParamStr=location.search.substr(1),routeParams={};if(queryParamStr){var urlQueryParams=queryParamStr.split("&");urlQueryParams&&urlQueryParams.length>0&&urlQueryParams.map(function(queryParam,indx){var queryKeyValue=queryParam.split("=");if(queryKeyValue&&queryKeyValue.length>0){var paramValue=queryKeyValue[1];routeParams[queryKeyValue[0]]=paramValue}})}return routeParams},routify=function(html,params){var routifiedHtml=html;params&&Object.keys(params)&&Object.keys(params).forEach(function(paramName){routifiedHtml=routifiedHtml.replace(new RegExp("\\${"+paramName+"}","g"),params[paramName]).replace(/\[QUOTE\]/g,'\\"')});return routifiedHtml},subscribe2LocationChange=function(store){return store.subscribe(function(){currentLocation!==(currentLocation=store.getState().router.pathname)&&render(currentLocation)})},_export("RootLoader",RootLoader),_export("default",RootLoader)}}}),System.register("client/script/mmf/addFields2Model.js",[],function(_export,_context){"use strict";return _export("default",function(modelName,modelScope,fields){return new Promise(function(resolve,reject){$qry.run("mmf.getModelDefinition",{ModelName:modelName,ModelScope:modelScope},"data.MetaModel.MetaModelFindOne").then(function(qryResult){var definitionObj=JSON.parse(qryResult.Definition);fields&&fields.length>0&&(fields.map(function(field,indx){"uid"==field.name?definitionObj.properties[field.name]={type:"String",id:!0,defaultFn:"guid"}:(definitionObj.properties[field.name]=definitionObj.properties[field.name]||{},definitionObj.properties[field.name].type=field.type)}),delete definitionObj.properties.id,$qry.run("mmf.updateModelDefinition",{ModelName:modelName,ModelScope:modelScope,Definition:JSON.stringify(definitionObj)}).then(function(updatedModelData){resolve(updatedModelData)}))})})}),{setters:[],execute:function(){}}}),System.register("client/script/mmf/createModel.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js"],function(_export,_context){"use strict";var _extends;return _export("default",function(tableName,scope,fields){return new Promise(function(resolve,reject){var properties={uid:{type:"String",id:!0,defaultFn:"guid"},srs_created_at:{type:"date",dataType:"timestamp",defaultFn:"now"},srs_updated_at:{type:"date",dataType:"timestamp",defaultFn:"now"},srs_created_by:{type:"String",default:"System"},srs_updated_by:{type:"String",default:"System"}};fields&&(Array.isArray(fields)?fields.map(function(fieldInfo){"id"==fieldInfo.id||("uid"==fieldInfo.id?properties.uid={type:"String",id:!0,defaultFn:"guid"}:properties[fieldInfo.id||fieldInfo.text]={type:fieldInfo.datatype})}):properties=_extends({},properties,fields));var definition={name:tableName+"_"+scope,plural:tableName+"s_"+scope,idInjection:!1,base:"PersistedModel",options:{validateUpsert:!0,public:!0},properties:properties};$qry.run("mmf.createModel",{Name:tableName,Scope:scope,Definition:JSON.stringify(definition)}).then(function(qryResult){resolve(qryResult)})})}),{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default}],execute:function(){}}}),System.register("client/script/mmf/createRelationship.js",[],function(_export,_context){"use strict";return _export("default",function(relationName,table1,table2,relationType,field,fieldAlias){return new Promise(function(resolve,reject){$qry.run("mmf.saveRelationship",{Name:relationName,Table1:table1,Table2:table2,RelationType:relationType,ForeignKey:field,ForeignKeyAlias:fieldAlias}).then(function(qryResult){resolve(qryResult)})})}),{setters:[],execute:function(){}}}),System.registerDynamic("client/script/mmf/getDBSchema.js",[],!1,function($__require,$__exports,$__module){var _retrieveGlobal=System.registry.get("@@global-helpers").prepareGlobal($__module.id,null,null);return $qry.run("mmf.getIntrospectionQuery",{},"data.schema").then(function(qryResult){let queries=qryResult.Query,allTables=(Object.keys(queries),[]);Object.keys(qryResult).map((item,indx)=>{item.match(/.*(Queries)$/g)||item.match(/.*(Mutation)$/g)||item.match(/(PageInfo)$/g)||item.match(/(File)$/g)||item.match(/.*(Edge)$/g)||item.match(/.*(Connection)$/g)||item.match(/(^JSON)$/g)||item.match(/(^Boolean)$/g)||item.match(/(^String)$/g)||item.match(/(^Query)$/g)||item.match(/(^Node)$/g)||item.match(/(^Int)$/g)||item.match(/(^ID)$/g)||item.match(/(^Float)$/g)||item.match(/(^DateTime)$/g)||item.match(/(^Upload)$/g)||item.match(/.*(Input)$/g)||item.match(/.*(Payload)$/g)||item.match(/__.*/g)||allTables.push(item)});let table2Fields={};allTables.map((tableName,indx)=>{table2Fields[tableName]=qryResult[tableName]}),$resolve(table2Fields)}),_retrieveGlobal()}),System.register("client/script/mmf/getScopes.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator;return _export("default",function(){return new Promise(function(resolve,reject){var _ref;$qry.run("mmf.getScopes",{},"data.MetaScope.MetaScopeFind").then((_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(qryResult){var result,_ref2,currentScope;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return result={},qryResult&&Object.keys(qryResult).length>0&&Object.keys(qryResult).map(function(scopeCode){qryResult[scopeCode]&&(result[scopeCode]={uid:qryResult[scopeCode].uid,Name:qryResult[scopeCode].Name,Code:qryResult[scopeCode].Code,Description:qryResult[scopeCode].Description,IconName:qryResult[scopeCode].IconName,Category:qryResult[scopeCode].Category})}),_context.next=4,$script.runAtServer("mmf.getLoggedInUserScope",{});case 4:_ref2=_context.sent,currentScope=_ref2.currentScope,result.currentScope=currentScope,resolve(result);case 8:case"end":return _context.stop()}},_callee,this)})),function(_x){return _ref.apply(this,arguments)})).catch(function(err){console.log(err),resolve({})})})}),{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default}],execute:function(){}}}),System.register("client/script/mmf/saveRecord.js",[],function(_export,_context){"use strict";return _export("default",function(tableName,payload,whereClause){return new Promise(function(resolve,reject){var queryStr="mutation($input: "+tableName+"UpsertWithWhereInput!) {\n                            "+tableName+"UpsertWithWhere(input: $input) {\n                                obj{\n                                    uid\n                                }\n                            }\n                        }",variables={input:{where:whereClause,data:payload}};$qry._run(queryStr,variables,"data."+tableName+"UpsertWithWhere.obj.uid").then(function(qryResult){resolve(qryResult)}).catch(function(err){console.error(err),resolve("")})})}),{setters:[],execute:function(){}}}),System.register("client/template/mmf/React.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","react","react-dom","styled-components"],function(_export,_context){"use strict";var _extends,React,ReactDOM,StyleSheetManager;return _export("default",function(name,templateDefinition,properties,rootElem,options){options.lite;var ReactComponent=templateDefinition();properties.theme&&stlyeIncludes.push(properties.theme);var props={},actions={};properties&&(Object.keys(properties).map(function(propName,indx){"function"==typeof properties[propName]?actions[propName]=properties[propName]:props[propName]=properties[propName]}),actions&&Object.keys(actions).length>0&&Object.keys(actions).map(function(actionName,indx){var actionFn=actions[actionName];actions[actionName]=function(){for(var newArguments=new Array(arguments.length+1),i=0;i<arguments.length;++i)newArguments[i]=arguments[i];return newArguments[i]={$input:props,$update:actions.asyncUpdateStore},actionFn.apply(this,newArguments)}}));var TemplateComponent=React.createElement(StyleSheetManager,{target:rootElem},React.createElement(ReactComponent,_extends({key:properties.uid||""},props,actions)));ReactDOM.render(TemplateComponent,rootElem)}),{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_react){React=_react.default},function(_reactDom){ReactDOM=_reactDom.default},function(_styledComponents){StyleSheetManager=_styledComponents.StyleSheetManager,_styledComponents.withTheme,_styledComponents.ThemeProvider}],execute:function(){}}}),System.register("client/template/mmf/Snabbdom.js",["snabbdom-jsx","snabbdom","snabbdom/modules/class","snabbdom/modules/props","snabbdom/modules/attributes","snabbdom/modules/style","snabbdom/modules/eventlisteners","snabbdom/h","thirdpartylib/retargetEvents.js"],function(_export,_context){"use strict";var snabbdomJSX,snabbdom,classModule,propsModule,attributesModule,styleModule,eventlistenersModule,html,patch;return _export("default",function(name,TemplateDefinition,properties,rootElem){var vnode=html(TemplateDefinition,properties);patch(rootElem,vnode),rootElem=vnode}),{setters:[function(_snabbdomJsx){snabbdomJSX=_snabbdomJsx.default},function(_snabbdom){snabbdom=_snabbdom.default},function(_snabbdomModulesClass){classModule=_snabbdomModulesClass.default},function(_snabbdomModulesProps){propsModule=_snabbdomModulesProps.default},function(_snabbdomModulesAttributes){attributesModule=_snabbdomModulesAttributes.default},function(_snabbdomModulesStyle){styleModule=_snabbdomModulesStyle.default},function(_snabbdomModulesEventlisteners){eventlistenersModule=_snabbdomModulesEventlisteners.default},function(_snabbdomH){_snabbdomH.default},function(_thirdpartylibRetargetEventsJs){_thirdpartylibRetargetEventsJs.default}],execute:function(){html=snabbdomJSX.html,patch=snabbdom.init([classModule,attributesModule,propsModule,styleModule,eventlistenersModule])}}}),System.register("client/template/mmf/Vue.js",["vue/dist/vue.js","thirdpartylib/retargetEvents.js"],function(_export,_context){"use strict";var Vue;return _export("default",function(name,componentDefinition,properties,rootElem){var RootComponent=componentDefinition(properties);new Vue({el:rootElem,components:{RootComponent:RootComponent},template:"<RootComponent/>"})}),{setters:[function(_vueDistVueJs){Vue=_vueDistVueJs.default},function(_thirdpartylibRetargetEventsJs){_thirdpartylibRetargetEventsJs.default}],execute:function(){}}}),System.registerDynamic("client/widget/global/mmf/BackButton.js",[],!1,function($__require,$__exports,$__module){return System.registry.get("@@global-helpers").prepareGlobal($__module.id,null,null)()}),System.registerDynamic("client/widget/global/mmf/NavigateTo.js",[],!1,function($__require,$__exports,$__module){return System.registry.get("@@global-helpers").prepareGlobal($__module.id,null,null)()}),System.registerDynamic("client/widget/global/mmf/RequiredFieldValidation.js",[],!1,function($__require,$__exports,$__module){return System.registry.get("@@global-helpers").prepareGlobal($__module.id,null,null)()}),System.registerDynamic("client/widget/global/mmf/SaveRecord.js",[],!1,function($__require,$__exports,$__module){return System.registry.get("@@global-helpers").prepareGlobal($__module.id,null,null)()}),System.register("component/mmf/AddApplicationCard.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-addons-cloud-react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Card,Button,TextInput,cloneDeep,_AddApplicationCard_,AddApplicationCard,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_AddApplicationCard_=function(_React$Component){function _AddApplicationCard_(props){return _classCallCheck(this,_AddApplicationCard_),_possibleConstructorReturn(this,(_AddApplicationCard_.__proto__||Object.getPrototypeOf(_AddApplicationCard_)).call(this,props))}return _inherits(_AddApplicationCard_,_React$Component),_createClass(_AddApplicationCard_,[{key:"render",value:function(){var _this2=this,laneForm=React.createElement("div",null,React.createElement("style",null,'@import url("component/mmf/AddApplicationCard/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(TextInput,{id:"category_id",style:{width:"80%"},labelText:"Category",placeholder:"Enter Category Name",invalid:this.state.category_invalid,invalidText:"Value Required",onChange:function(e){_this2.setState({category:e.target.value})}}),React.createElement(TextInput,{id:"app_name",style:{width:"80%"},labelText:"Application Name",placeholder:"Enter Application Name...",invalid:this.state.appname_invalid,invalidText:"Value Required",onChange:function(e){_this2.setState({appName:e.target.value})}}),React.createElement(TextInput,{id:"app_code",style:{width:"80%"},labelText:"Code",placeholder:"Enter App Code..",invalid:this.state.appcode_invalid,invalidText:"Value Required",onChange:function(e){_this2.setState({appCode:e.target.value})}}),React.createElement("div",{style:{display:"flex",marginTop:5,marginBottom:5,width:"100%"}},React.createElement(Button,{style:{width:"40%",marginLeft:"2%",minWidth:"4rem"},onClick:function(e){_this2.setState({showForm:!1})}},"Cancel"),React.createElement(Button,{style:{width:"40%",marginLeft:"2%",minWidth:"4rem"},onClick:function(e){var validForm=!0;if(_this2.state.category||(_this2.setState({category_invalid:!0}),validForm=!1),_this2.state.appName||(_this2.setState({appname_invalid:!0}),validForm=!1),_this2.state.appCode||(_this2.setState({appcode_invalid:!0}),validForm=!1),validForm){var scopes=cloneDeep(_this2.props.scopes);(scopes=scopes||[])[_this2.state.appCode]={Name:_this2.state.appName,Code:_this2.state.appCode,Description:"sample desc",IconName:"archive/32",Category:_this2.state.category},_this2.props.updateStore({updates:{scopes:scopes}}),_this2.props.addFlashMessage({title:"Success - ",subtitle:"New Application created successfully!"})}else _this2.props.addErrorMessage({title:"Error - ",subtitle:"Please fill the mandatory fields and try again...!"})}},"Create")));return React.createElement("div",null,React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement(Card,{style:{height:"auto",minHeight:"3rem",width:"15rem",backgroundColor:"white",marginTop:5}},laneForm))}}]),_AddApplicationCard_}(React.Component),_export("AddApplicationCard",AddApplicationCard=function(props){return _AddApplicationCard_}),_export("AddApplicationCard",AddApplicationCard),_export("default",AddApplicationCard),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/AddApplicationCard/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-addons-cloud-react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Card,Button,TextInput,cloneDeep,_AddApplicationCard_,AddApplicationCard;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_AddApplicationCard_=function(_React$Component){function _AddApplicationCard_(props){return _classCallCheck(this,_AddApplicationCard_),_possibleConstructorReturn(this,(_AddApplicationCard_.__proto__||Object.getPrototypeOf(_AddApplicationCard_)).call(this,props))}return _inherits(_AddApplicationCard_,_React$Component),_createClass(_AddApplicationCard_,[{key:"render",value:function(){var _this2=this,laneForm=React.createElement("div",null,React.createElement("style",null,'@import url("component/mmf/AddApplicationCard/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(TextInput,{id:"category_id",style:{width:"80%"},labelText:"Category",placeholder:"Enter Category Name",invalid:this.state.category_invalid,invalidText:"Value Required",onChange:function(e){_this2.setState({category:e.target.value})}}),React.createElement(TextInput,{id:"app_name",style:{width:"80%"},labelText:"Application Name",placeholder:"Enter Application Name...",invalid:this.state.appname_invalid,invalidText:"Value Required",onChange:function(e){_this2.setState({appName:e.target.value})}}),React.createElement(TextInput,{id:"app_code",style:{width:"80%"},labelText:"Code",placeholder:"Enter App Code..",invalid:this.state.appcode_invalid,invalidText:"Value Required",onChange:function(e){_this2.setState({appCode:e.target.value})}}),React.createElement("div",{style:{display:"flex",marginTop:5,marginBottom:5,width:"100%"}},React.createElement(Button,{style:{width:"40%",marginLeft:"2%",minWidth:"4rem"},onClick:function(e){_this2.setState({showForm:!1})}},"Cancel"),React.createElement(Button,{style:{width:"40%",marginLeft:"2%",minWidth:"4rem"},onClick:function(e){var validForm=!0;if(_this2.state.category||(_this2.setState({category_invalid:!0}),validForm=!1),_this2.state.appName||(_this2.setState({appname_invalid:!0}),validForm=!1),_this2.state.appCode||(_this2.setState({appcode_invalid:!0}),validForm=!1),validForm){var scopes=cloneDeep(_this2.props.scopes);(scopes=scopes||[])[_this2.state.appCode]={Name:_this2.state.appName,Code:_this2.state.appCode,Description:"sample desc",IconName:"archive/32",Category:_this2.state.category},_this2.props.updateStore({updates:{scopes:scopes}}),_this2.props.addFlashMessage({title:"Success - ",subtitle:"New Application created successfully!"})}else _this2.props.addErrorMessage({title:"Error - ",subtitle:"Please fill the mandatory fields and try again...!"})}},"Create")));return React.createElement("div",null,React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement(Card,{style:{height:"auto",minHeight:"3rem",width:"15rem",backgroundColor:"white",marginTop:5}},laneForm))}}]),_AddApplicationCard_}(React.Component),_export("AddApplicationCard",AddApplicationCard=function(props){return _AddApplicationCard_}),_export("AddApplicationCard",AddApplicationCard)}}}),System.register("component/mmf/ApplicationCard.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-addons-cloud-react"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Card,_ApplicationCard_,ApplicationCard,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card,_carbonAddonsCloudReact.CardContent,_carbonAddonsCloudReact.CardFooter}],execute:function(){_ApplicationCard_=function(_React$Component){function _ApplicationCard_(props){_classCallCheck(this,_ApplicationCard_);var _this=_possibleConstructorReturn(this,(_ApplicationCard_.__proto__||Object.getPrototypeOf(_ApplicationCard_)).call(this,props));return _this.state={reload:!1},System.import("@carbon/icons-react/lib/"+_this.props.icon).then(function(iconDef){_this.cardIcon=iconDef,_this.setState({reload:!0})}),_this}return _inherits(_ApplicationCard_,_React$Component),_createClass(_ApplicationCard_,[{key:"render",value:function(){var _this2=this;if(!this.cardIcon)return React.createElement("div",null,"Loading...");var _ref,CardIcon=this.cardIcon,backgroundColor=this.props.currentscope==this.props.code?"#ceccd7":"white";return React.createElement("div",{className:"appCard",onClick:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _this2.props.updateStore({updates:{currentscope:_this2.props.code}}),_context.next=3,$script.runAtServer("mmf.bindScope2User",{code:_this2.props.code});case 3:_context.sent,_this2.props.addFlashMessage({title:"Application Scope - ",subtitle:"Switched to "+_this2.props.cardtitle});case 5:case"end":return _context.stop()}},_callee,_this2)})),function(_x){return _ref.apply(this,arguments)})},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement(Card,{className:"appCardContent",style:{height:"6rem",width:"15rem",backgroundColor:backgroundColor}},React.createElement(CardIcon,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},this.props.cardtitle),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center"}},this.props.description)))}}]),_ApplicationCard_}(React.Component),_export("ApplicationCard",ApplicationCard=function(props){return _ApplicationCard_}),_export("ApplicationCard",ApplicationCard),_export("default",ApplicationCard),_export("states",states=[{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/ApplicationCard/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-addons-cloud-react"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Card,_ApplicationCard_,ApplicationCard;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card,_carbonAddonsCloudReact.CardContent,_carbonAddonsCloudReact.CardFooter}],execute:function(){_ApplicationCard_=function(_React$Component){function _ApplicationCard_(props){_classCallCheck(this,_ApplicationCard_);var _this=_possibleConstructorReturn(this,(_ApplicationCard_.__proto__||Object.getPrototypeOf(_ApplicationCard_)).call(this,props));return _this.state={reload:!1},System.import("@carbon/icons-react/lib/"+_this.props.icon).then(function(iconDef){_this.cardIcon=iconDef,_this.setState({reload:!0})}),_this}return _inherits(_ApplicationCard_,_React$Component),_createClass(_ApplicationCard_,[{key:"render",value:function(){var _this2=this;if(!this.cardIcon)return React.createElement("div",null,"Loading...");var _ref,CardIcon=this.cardIcon,backgroundColor=this.props.currentscope==this.props.code?"#ceccd7":"white";return React.createElement("div",{className:"appCard",onClick:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _this2.props.updateStore({updates:{currentscope:_this2.props.code}}),_context.next=3,$script.runAtServer("mmf.bindScope2User",{code:_this2.props.code});case 3:_context.sent,_this2.props.addFlashMessage({title:"Application Scope - ",subtitle:"Switched to "+_this2.props.cardtitle});case 5:case"end":return _context.stop()}},_callee,_this2)})),function(_x){return _ref.apply(this,arguments)})},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement(Card,{className:"appCardContent",style:{height:"6rem",width:"15rem",backgroundColor:backgroundColor}},React.createElement(CardIcon,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},this.props.cardtitle),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center"}},this.props.description)))}}]),_ApplicationCard_}(React.Component),_export("ApplicationCard",ApplicationCard=function(props){return _ApplicationCard_}),_export("ApplicationCard",ApplicationCard)}}}),System.register("component/mmf/AppsBoard.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_AppsBoard_,AppsBoard,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_AppsBoard_=function(_React$Component){function _AppsBoard_(props){_classCallCheck(this,_AppsBoard_);var _this=_possibleConstructorReturn(this,(_AppsBoard_.__proto__||Object.getPrototypeOf(_AppsBoard_)).call(this,props));_this.state={reload:!1};_this.props.scopes;return _this}return _inherits(_AppsBoard_,_React$Component),_createClass(_AppsBoard_,[{key:"componentDidUpdate",value:function(prevProps){prevProps.scopes||_.isEqual(prevProps.scopes,this.props.scopes)||this.setState({reload:!this.state.reload})}},{key:"render",value:function(){if(!this.props.scopes||0==Object.keys(this.props.scopes).length)return React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});var notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{styles:JSON.stringify({position:"fixed",width:"30%",right:10,minHeight:100,overflow:"auto",display:"block",zIndex:99999,bottom:5})}):null;return React.createElement("div",null,notificationBar,React.createElement("srs-board",{shadow:"true",tablename:"MetaScope",lanefield:"Category",boardfilter:JSON.stringify({}),canaddlanes:"true",boardtype:"simple",style:{height:"97rem"},fieldmapping:JSON.stringify([{name:"id",value:"uid"},{name:"title",value:"Name"},{name:"code",value:"Code"},{name:"description",value:"Description"},{name:"icon",value:"IconName"}]),themeprops:JSON.stringify([{name:"backgroundColor",value:"#6a9f7194"}]),cardcomponent:"43cdaf50-5dd2-11ea-969c-35d7d5d13520",newlanecomponent:"08e6cd20-5eb0-11ea-ad85-493da0a22331",newcardcomponent:"08e6cd20-5eb0-11ea-ad85-493da0a22331",addcardlinkcomponent:"db831670-61a9-11ea-9c50-f711e9e6864f"}))}}]),_AppsBoard_}(React.Component),_export("AppsBoard",AppsBoard=function(props){return _AppsBoard_}),_export("AppsBoard",AppsBoard),_export("default",AppsBoard),_export("states",states=[{KeyName:"scopes",AccessPath:"scopes",DefaultValue:'{"scopes": {}}'},{KeyName:"notifications",AccessPath:"notifications",DefaultValue:'{"notifications": []}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/AppsBoard/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_AppsBoard_,AppsBoard;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_AppsBoard_=function(_React$Component){function _AppsBoard_(props){_classCallCheck(this,_AppsBoard_);var _this=_possibleConstructorReturn(this,(_AppsBoard_.__proto__||Object.getPrototypeOf(_AppsBoard_)).call(this,props));_this.state={reload:!1};_this.props.scopes;return _this}return _inherits(_AppsBoard_,_React$Component),_createClass(_AppsBoard_,[{key:"componentDidUpdate",value:function(prevProps){prevProps.scopes||_.isEqual(prevProps.scopes,this.props.scopes)||this.setState({reload:!this.state.reload})}},{key:"render",value:function(){if(!this.props.scopes||0==Object.keys(this.props.scopes).length)return React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});var notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{styles:JSON.stringify({position:"fixed",width:"30%",right:10,minHeight:100,overflow:"auto",display:"block",zIndex:99999,bottom:5})}):null;return React.createElement("div",null,notificationBar,React.createElement("srs-board",{shadow:"true",tablename:"MetaScope",lanefield:"Category",boardfilter:JSON.stringify({}),canaddlanes:"true",boardtype:"simple",style:{height:"97rem"},fieldmapping:JSON.stringify([{name:"id",value:"uid"},{name:"title",value:"Name"},{name:"code",value:"Code"},{name:"description",value:"Description"},{name:"icon",value:"IconName"}]),themeprops:JSON.stringify([{name:"backgroundColor",value:"#6a9f7194"}]),cardcomponent:"43cdaf50-5dd2-11ea-969c-35d7d5d13520",newlanecomponent:"08e6cd20-5eb0-11ea-ad85-493da0a22331",newcardcomponent:"08e6cd20-5eb0-11ea-ad85-493da0a22331",addcardlinkcomponent:"db831670-61a9-11ea-9c50-f711e9e6864f"}))}}]),_AppsBoard_}(React.Component),_export("AppsBoard",AppsBoard=function(props){return _AppsBoard_}),_export("AppsBoard",AppsBoard)}}}),System.register("component/mmf/ComponentWrapper.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,_ComponentWrapper_,withComponentDetails,ComponentWrapper,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_ComponentWrapper_=function(_React$Component){function _ComponentWrapper_(props){_classCallCheck(this,_ComponentWrapper_);var _this=_possibleConstructorReturn(this,(_ComponentWrapper_.__proto__||Object.getPrototypeOf(_ComponentWrapper_)).call(this,props)),cardcomponentname=props.cardcomponentname,cardcomponentscope=props.cardcomponentscope,cardcomponenttype=props.cardcomponenttype;return $ele&&$ele.registerElement(cardcomponentname,cardcomponentscope,cardcomponenttype),_this.cardTag=cardcomponentname.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),_this}return _inherits(_ComponentWrapper_,_React$Component),_createClass(_ComponentWrapper_,[{key:"render",value:function(){var props=cloneDeep(this.props);if(props.shadow=!0,!props.add_events_on_host){var clickEvent=props.onClick;props.onOpen=clickEvent,delete props.onClick}var cardInstance=React.createElement(this.cardTag,_extends({key:props[props.keyPropName]},props));return React.createElement("div",{key:props.key},cardInstance)}}]),_ComponentWrapper_}(React.Component),withComponentDetails=function(WrappedComponent,componentDetails){return function(_React$Component2){function HOC(){return _classCallCheck(this,HOC),_possibleConstructorReturn(this,(HOC.__proto__||Object.getPrototypeOf(HOC)).apply(this,arguments))}return _inherits(HOC,_React$Component2),_createClass(HOC,[{key:"render",value:function(){var newProps=this.props?cloneDeep(this.props):{};return newProps.title&&(newProps.cardtitle=newProps.title+"",delete newProps.title),newProps.cardcomponentname=componentDetails.componentname,newProps.cardcomponentscope=componentDetails.componentscope,newProps.cardcomponenttype=componentDetails.componenttype,newProps.parentpageid=componentDetails.parentpageid,newProps.parentwidgetid=componentDetails.parentwidgetid,componentDetails.keyprop&&(newProps.keyprop=componentDetails.keyprop),newProps.add_events_on_host=componentDetails.add_events_on_host,newProps.config=componentDetails.config,React.createElement(WrappedComponent,newProps)}}]),HOC}(React.Component)},_export("ComponentWrapper",ComponentWrapper=function(props){return withComponentDetails(_ComponentWrapper_,props)}),_export("ComponentWrapper",ComponentWrapper),_export("default",ComponentWrapper),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/ComponentWrapper/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,_ComponentWrapper_,withComponentDetails,ComponentWrapper;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_ComponentWrapper_=function(_React$Component){function _ComponentWrapper_(props){_classCallCheck(this,_ComponentWrapper_);var _this=_possibleConstructorReturn(this,(_ComponentWrapper_.__proto__||Object.getPrototypeOf(_ComponentWrapper_)).call(this,props)),cardcomponentname=props.cardcomponentname,cardcomponentscope=props.cardcomponentscope,cardcomponenttype=props.cardcomponenttype;return $ele&&$ele.registerElement(cardcomponentname,cardcomponentscope,cardcomponenttype),_this.cardTag=cardcomponentname.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),_this}return _inherits(_ComponentWrapper_,_React$Component),_createClass(_ComponentWrapper_,[{key:"render",value:function(){var props=cloneDeep(this.props);if(props.shadow=!0,!props.add_events_on_host){var clickEvent=props.onClick;props.onOpen=clickEvent,delete props.onClick}var cardInstance=React.createElement(this.cardTag,_extends({key:props[props.keyPropName]},props));return React.createElement("div",{key:props.key},cardInstance)}}]),_ComponentWrapper_}(React.Component),withComponentDetails=function(WrappedComponent,componentDetails){return function(_React$Component2){function HOC(){return _classCallCheck(this,HOC),_possibleConstructorReturn(this,(HOC.__proto__||Object.getPrototypeOf(HOC)).apply(this,arguments))}return _inherits(HOC,_React$Component2),_createClass(HOC,[{key:"render",value:function(){var newProps=this.props?cloneDeep(this.props):{};return newProps.title&&(newProps.cardtitle=newProps.title+"",delete newProps.title),newProps.cardcomponentname=componentDetails.componentname,newProps.cardcomponentscope=componentDetails.componentscope,newProps.cardcomponenttype=componentDetails.componenttype,newProps.parentpageid=componentDetails.parentpageid,newProps.parentwidgetid=componentDetails.parentwidgetid,componentDetails.keyprop&&(newProps.keyprop=componentDetails.keyprop),newProps.add_events_on_host=componentDetails.add_events_on_host,newProps.config=componentDetails.config,React.createElement(WrappedComponent,newProps)}}]),HOC}(React.Component)},_export("ComponentWrapper",ComponentWrapper=function(props){return withComponentDetails(_ComponentWrapper_,props)}),_export("ComponentWrapper",ComponentWrapper)}}}),System.register("component/mmf/Dummy123.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_Dummy123_,Dummy123,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_Dummy123_=function(_React$Component){function _Dummy123_(){return _classCallCheck(this,_Dummy123_),_possibleConstructorReturn(this,(_Dummy123_.__proto__||Object.getPrototypeOf(_Dummy123_)).apply(this,arguments))}return _inherits(_Dummy123_,_React$Component),_createClass(_Dummy123_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Hello World!"))}}]),_Dummy123_}(React.Component),_export("Dummy123",Dummy123=function(props){return _Dummy123_}),_export("Dummy123",Dummy123),_export("default",Dummy123),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/Dummy123/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_Dummy123_,Dummy123;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_Dummy123_=function(_React$Component){function _Dummy123_(){return _classCallCheck(this,_Dummy123_),_possibleConstructorReturn(this,(_Dummy123_.__proto__||Object.getPrototypeOf(_Dummy123_)).apply(this,arguments))}return _inherits(_Dummy123_,_React$Component),_createClass(_Dummy123_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Hello World!"))}}]),_Dummy123_}(React.Component),_export("Dummy123",Dummy123=function(props){return _Dummy123_}),_export("Dummy123",Dummy123)}}}),System.register("component/mmf/FileSyncMapperList.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","react-router-dom","react-monaco-editor","namor","react-table","react-table/react-table.css!css","client/script/persist/MMFAPI.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ReactTable,MMFAPI,_FileSyncMapper,FileSyncMapperList,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_reactRouterDom){_reactRouterDom.BrowserRouter,_reactRouterDom.Route,_reactRouterDom.Link,_reactRouterDom.withRouter,_reactRouterDom.matchPath},function(_reactMonacoEditor){_reactMonacoEditor.default},function(_namor){_namor.default},function(_reactTable){ReactTable=_reactTable.default},function(_reactTableReactTableCssCss){},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI}],execute:function(){_FileSyncMapper=function(_React$Component){function _FileSyncMapper(props,context){_classCallCheck(this,_FileSyncMapper);var _this=_possibleConstructorReturn(this,(_FileSyncMapper.__proto__||Object.getPrototypeOf(_FileSyncMapper)).call(this,props,context));return _this.state={},_this.state.columns=[{columns:[{Header:"Table",accessor:"Table"},{Header:"Field",accessor:"Field"},{Header:"LocalPath",accessor:"LocalPath"}]}],_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_FileSyncMapper,_React$Component),_createClass(_FileSyncMapper,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var rows=[],self=this;MMFAPI().search("MetaLocalSyncs","{}",function(instances){instances&&(console.log("Instances = "),console.log(instances),instances.forEach(function(instance){var row={};row.Table=instance.Table,row.Field=instance.Field,row.LocalPath=instance.LocalPath,row.uid=instance.uid,rows.push(row)}),self.setState({rows:rows}))})}},{key:"render",value:function(){return React.createElement("div",null,React.createElement(ReactTable,{data:this.state.rows,columns:this.state.columns,defaultPageSize:10,className:"-striped -highlight"}))}}]),_FileSyncMapper}(React.Component),_export("FileSyncMapperList",FileSyncMapperList=function(props){return _FileSyncMapper}),_export("FileSyncMapperList",FileSyncMapperList),_export("default",FileSyncMapperList),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/FileSyncer.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","react-router-dom","react-monaco-editor","namor","react-table","react-table/react-table.css!css","component/mmf/FileSyncMapperList/Definition.js","component/mmf/NewFileSyncConfig/Definition.js","component/mmf/FileSyncer/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,FileSyncMapperList,NewFileSyncConfig,_FileSyncer,FileSyncer,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_reactRouterDom){_reactRouterDom.BrowserRouter,_reactRouterDom.Route,_reactRouterDom.Link,_reactRouterDom.withRouter,_reactRouterDom.matchPath},function(_reactMonacoEditor){_reactMonacoEditor.default},function(_namor){_namor.default},function(_reactTable){_reactTable.default},function(_reactTableReactTableCssCss){},function(_componentMmfFileSyncMapperListDefinitionJs){FileSyncMapperList=_componentMmfFileSyncMapperListDefinitionJs.FileSyncMapperList},function(_componentMmfNewFileSyncConfigDefinitionJs){NewFileSyncConfig=_componentMmfNewFileSyncConfigDefinitionJs.NewFileSyncConfig},function(_componentMmfFileSyncerStyleCssCss){}],execute:function(){_FileSyncer=function(_React$Component){function _FileSyncer(props,context){_classCallCheck(this,_FileSyncer);var _this=_possibleConstructorReturn(this,(_FileSyncer.__proto__||Object.getPrototypeOf(_FileSyncer)).call(this,props,context));return _this.state={},_this}return _inherits(_FileSyncer,_React$Component),_createClass(_FileSyncer,[{key:"render",value:function(){var MasterComp,DetailComp,result=[];return FileSyncMapperList&&(MasterComp=FileSyncMapperList(),result.push(React.createElement(MasterComp,{className:"DetailsSection"}))),NewFileSyncConfig&&(DetailComp=NewFileSyncConfig(),result.push(React.createElement(DetailComp,{className:"MasterSection"}))),React.createElement("div",null,result)}}]),_FileSyncer}(React.Component),_export("FileSyncer",FileSyncer=function(props){return _FileSyncer}),_export("FileSyncer",FileSyncer),_export("default",FileSyncer),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/FileSyncMapperList/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","react-router-dom","react-monaco-editor","namor","react-table","react-table/react-table.css!css","client/script/persist/MMFAPI.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ReactTable,MMFAPI,_FileSyncMapper,FileSyncMapperList;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_reactRouterDom){_reactRouterDom.BrowserRouter,_reactRouterDom.Route,_reactRouterDom.Link,_reactRouterDom.withRouter,_reactRouterDom.matchPath},function(_reactMonacoEditor){_reactMonacoEditor.default},function(_namor){_namor.default},function(_reactTable){ReactTable=_reactTable.default},function(_reactTableReactTableCssCss){},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI}],execute:function(){_FileSyncMapper=function(_React$Component){function _FileSyncMapper(props,context){_classCallCheck(this,_FileSyncMapper);var _this=_possibleConstructorReturn(this,(_FileSyncMapper.__proto__||Object.getPrototypeOf(_FileSyncMapper)).call(this,props,context));return _this.state={},_this.state.columns=[{columns:[{Header:"Table",accessor:"Table"},{Header:"Field",accessor:"Field"},{Header:"LocalPath",accessor:"LocalPath"}]}],_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_FileSyncMapper,_React$Component),_createClass(_FileSyncMapper,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var rows=[],self=this;MMFAPI().search("MetaLocalSyncs","{}",function(instances){instances&&(console.log("Instances = "),console.log(instances),instances.forEach(function(instance){var row={};row.Table=instance.Table,row.Field=instance.Field,row.LocalPath=instance.LocalPath,row.uid=instance.uid,rows.push(row)}),self.setState({rows:rows}))})}},{key:"render",value:function(){return React.createElement("div",null,React.createElement(ReactTable,{data:this.state.rows,columns:this.state.columns,defaultPageSize:10,className:"-striped -highlight"}))}}]),_FileSyncMapper}(React.Component),_export("FileSyncMapperList",FileSyncMapperList=function(props){return _FileSyncMapper}),_export("FileSyncMapperList",FileSyncMapperList)}}}),System.register("component/mmf/NewFileSyncConfig/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/persist/MMFAPI.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MonacoEditor,MMFAPI,Button,TextInput,_NewFileSyncConfig,NewFileSyncConfig;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewFileSyncConfig=function(_React$Component){function _NewFileSyncConfig(props,context){_classCallCheck(this,_NewFileSyncConfig);var _this=_possibleConstructorReturn(this,(_NewFileSyncConfig.__proto__||Object.getPrototypeOf(_NewFileSyncConfig)).call(this,props));return _this.state={importScriptEditor:{width:.6*screen.width,height:"350",importScript:_this.props.rowInfo?_this.props.rowInfo.Definition:"(function() {\n   //business logic using $qry, $fileUID, $fileContent, $dataTable, $topResolve, $topReject\n})"},exportScriptEditor:{width:.6*screen.width,height:"350",exportScript:_this.props.rowInfo?_this.props.rowInfo.Definition:"(function() {\n   //business logic using $qry, $live\n})"}},_this.topElement=React.createRef(),_this.importScriptChanged=_this.importScriptChanged.bind(_this),_this.exportScriptChanged=_this.exportScriptChanged.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.importScriptEditorDidMount=_this.importScriptEditorDidMount.bind(_this),_this.exportScriptEditorDidMount=_this.exportScriptEditorDidMount.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%",clear:"both",marginTop:"1%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%"},_this.modalButtonGroup={marginLeft:"60%",position:"relative"},_this}return _inherits(_NewFileSyncConfig,_React$Component),_createClass(_NewFileSyncConfig,[{key:"importScriptChanged",value:function(newValue,e){var editor=this.state.importScriptEditor;editor.htmlCode=newValue,this.setState({importScriptEditor:editor})}},{key:"exportScriptChanged",value:function(newValue,e){var editor=this.state.exportScriptEditor;editor.htmlCode=newValue,this.setState({exportScriptEditor:editor})}},{key:"importScriptEditorDidMount",value:function(editor,monaco){var self=this,saveEditorValue=editor.setValue.bind(editor);editor.setValue=function(val){saveEditorValue(val),self.state.importScriptEditor?(editor.setPosition(self.state.importScriptEditor.position),editor.revealLine(self.state.importScriptEditor.position.lineNumber),editor.revealLineInCenter(self.state.importScriptEditor.position.lineNumber)):(editor.setPosition({lineNumber:1,column:1}),editor.revealLine(1),editor.revealLineInCenter(15)),editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(editor._themeService._styleElement),editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"exportScriptEditorDidMount",value:function(editor,monaco){var self=this,saveEditorValue=editor.setValue.bind(editor);editor.setValue=function(val){saveEditorValue(val),self.state.exportScriptEditor?(editor.setPosition(self.state.exportScriptEditor.position),editor.revealLine(self.state.exportScriptEditor.position.lineNumber),editor.revealLineInCenter(self.state.exportScriptEditor.position.lineNumber)):(editor.setPosition({lineNumber:1,column:1}),editor.revealLine(1),editor.revealLineInCenter(15)),editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(editor._themeService._styleElement),editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"importScriptChanged",value:function(newValue,e,type){this.setState({importScript:newValue})}},{key:"exportScriptChanged",value:function(newValue,e,type){this.setState({exportScript:newValue})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Table:"",Field:"",LocalPath:""})}},{key:"saveAsNewData",value:function(){var _this2=this,data={Name:this.state.name,Order:this.state.order,Table:this.state.table,Field:this.state.field,ImportScript:this.state.importScript,ImportCondition:this.state.ImportCondition,ExportScript:this.state.exportScript,ExportCondition:this.state.ExportCondition,LocalPath:this.state.localPath,Level:this.state.level,Active:this.state.active};MMFAPI().createRecord("MetaLocalSync",data,["uid"],function(result){_this2.setState({file_id:result.uid})})}},{key:"saveData",value:function(){var _this3=this,data={Name:this.state.name,Order:this.state.order,Table:this.state.table,Field:this.state.field,ImportScript:this.state.importScript,ImportCondition:this.state.ImportCondition,ExportScript:this.state.exportScript,ExportCondition:this.state.ExportCondition,LocalPath:this.state.localPath,Level:this.state.level,Active:this.state.active};this.state.file_id?MMFAPI().updateRecord("MetaLocalSync",this.state.file_id,data,["uid"],function(result){_this3.setState({file_id:result.uid})}):MMFAPI().createRecord("MetaLocalSync",data,["uid"],function(result){_this3.setState({file_id:result.uid})})}},{key:"render",value:function(){var _this4=this,uidField=this.state.file_id?React.createElement(TextInput,{s:3,required:"required",value:this.state.file_id,disabled:"true"}):uidField,requireConfig={url:"/thirdpartylib/require.js",paths:{vs:"/thirdpartylib/monaco/min/vs"}},options={selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1};return React.createElement("div",{ref:this.topElement},React.createElement("style",null,'@import url("component/mmf/NewRoute/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("h4",{style:this.headerStyle},"Import/Export - Form"),React.createElement("div",{style:this.groupParentStyle},React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{labelText:"Table Name",placeholder:"Enter the Table Name",s:12,onChange:function(e){return _this4.onChange(e,"tablename")},label:"Table Name",required:"required"})),React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{labelText:"Relative Path",placeholder:"Enter Local Path...",s:6,onChange:function(e){return _this4.onChange(e,"path")},label:"Local Path",required:"required"}),uidField)),React.createElement("div",{style:this.groupParentStyle},React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{labelText:"Table Name",placeholder:"Enter the Table Name",s:12,onChange:function(e){return _this4.onChange(e,"tablename")},label:"Table Name",required:"required"})),React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{labelText:"Relative Path",placeholder:"Enter Local Path...",s:6,onChange:function(e){return _this4.onChange(e,"path")},label:"Local Path",required:"required"}),uidField)),React.createElement("div",{style:this.groupParentStyle},React.createElement("div",{style:this.groupElementStyle},React.createElement("label",{class:"bx--label"},"Import Script"),React.createElement(MonacoEditor,{width:this.state.importScriptEditor.width,height:this.state.importScriptEditor.height,language:"javascript",theme:"vs-dark",value:this.state.importScriptEditor.importScript,defaultValue:this.state.importScriptEditor.importScript,options:options,onChange:this.importScriptEditorCodeChanged,requireConfig:requireConfig,editorDidMount:this.importScriptEditorDidMount}))),React.createElement("div",{style:this.fieldStyle},React.createElement("label",{class:"bx--label"},"Export Script"),React.createElement(MonacoEditor,{width:this.state.exportScriptEditor.width,height:this.state.exportScriptEditor.height,language:"javascript",theme:"vs-dark",value:this.state.exportScriptEditor.exportScript,defaultValue:this.state.exportScriptEditor.exportScript,options:options,onChange:this.exportScriptEditorCodeChanged,requireConfig:requireConfig,editorDidMount:this.exportScriptEditorDidMount})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveAsNewData()}},"Save As"),React.createElement(Button,{waves:"light",onClick:function(e){return _this4.resetData()}},"Reset")))}}]),_NewFileSyncConfig}(React.Component),_export("NewFileSyncConfig",NewFileSyncConfig=function(props){return _NewFileSyncConfig}),_export("NewFileSyncConfig",NewFileSyncConfig)}}}),System.register("component/mmf/FileSyncer/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","react-router-dom","react-monaco-editor","namor","react-table","react-table/react-table.css!css","component/mmf/FileSyncMapperList/Definition.js","component/mmf/NewFileSyncConfig/Definition.js","component/mmf/FileSyncer/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,FileSyncMapperList,NewFileSyncConfig,_FileSyncer,FileSyncer;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_reactRouterDom){_reactRouterDom.BrowserRouter,_reactRouterDom.Route,_reactRouterDom.Link,_reactRouterDom.withRouter,_reactRouterDom.matchPath},function(_reactMonacoEditor){_reactMonacoEditor.default},function(_namor){_namor.default},function(_reactTable){_reactTable.default},function(_reactTableReactTableCssCss){},function(_componentMmfFileSyncMapperListDefinitionJs){FileSyncMapperList=_componentMmfFileSyncMapperListDefinitionJs.FileSyncMapperList},function(_componentMmfNewFileSyncConfigDefinitionJs){NewFileSyncConfig=_componentMmfNewFileSyncConfigDefinitionJs.NewFileSyncConfig},function(_componentMmfFileSyncerStyleCssCss){}],execute:function(){_FileSyncer=function(_React$Component){function _FileSyncer(props,context){_classCallCheck(this,_FileSyncer);var _this=_possibleConstructorReturn(this,(_FileSyncer.__proto__||Object.getPrototypeOf(_FileSyncer)).call(this,props,context));return _this.state={},_this}return _inherits(_FileSyncer,_React$Component),_createClass(_FileSyncer,[{key:"render",value:function(){var MasterComp,DetailComp,result=[];return FileSyncMapperList&&(MasterComp=FileSyncMapperList(),result.push(React.createElement(MasterComp,{className:"DetailsSection"}))),NewFileSyncConfig&&(DetailComp=NewFileSyncConfig(),result.push(React.createElement(DetailComp,{className:"MasterSection"}))),React.createElement("div",null,result)}}]),_FileSyncer}(React.Component),_export("FileSyncer",FileSyncer=function(props){return _FileSyncer}),_export("FileSyncer",FileSyncer)}}}),System.register("component/mmf/FormCard.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-addons-cloud-react","carbon-components-react","@carbon/icons-react/lib/save/16","@carbon/icons-react/lib/edit/16","@carbon/icons-react/lib/add/16"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Card,TextInput,Button,SaveIcon,EditIcon,AddIcon,_FormCard_,FormCard,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,Button=_carbonComponentsReact.Button},function(_carbonIconsReactLibSave){SaveIcon=_carbonIconsReactLibSave.default},function(_carbonIconsReactLibEdit){EditIcon=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibAdd){AddIcon=_carbonIconsReactLibAdd.default}],execute:function(){_FormCard_=function(_React$Component){function _FormCard_(props){_classCallCheck(this,_FormCard_);var _this=_possibleConstructorReturn(this,(_FormCard_.__proto__||Object.getPrototypeOf(_FormCard_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_FormCard_,_React$Component),_createClass(_FormCard_,[{key:"render",value:function(){var propsConfig=this.props.config?JSON.parse(this.props.config):{},fieldMapping=propsConfig?propsConfig.fieldMapping:[],cardProps=[];fieldMapping&&fieldMapping.map(function(fieldMap){fieldMap.name&&"title"!=fieldMap.name&&cardProps.push(fieldMap.name)});for(var fieldRows=[],cardPropIndx=0;cardPropIndx<cardProps.length;cardPropIndx+=2)fieldRows.push(React.createElement("div",{style:{width:"100%",display:"inline-flex"}},React.createElement(TextInput,{value:this.props[cardProps[cardPropIndx].toLowerCase()],readOnly:!0,labelText:cardProps[cardPropIndx],style:{marginBottom:5,marginRight:2},defaultValue:"",placeholder:"Enter "+cardProps[cardPropIndx]+"..."}),cardProps.length>cardPropIndx+1?React.createElement(TextInput,{value:this.props[cardProps[cardPropIndx+1].toLowerCase()],readOnly:!0,labelText:cardProps[cardPropIndx+1],style:{marginBottom:5},defaultValue:"",placeholder:"Enter "+cardProps[cardPropIndx+1]+"..."}):null));return React.createElement("div",{className:"appCard"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement(Card,{className:"appCardContent",style:{minHeight:"6rem",maxHeight:"50rem",overflow:"scroll",width:"15rem",backgroundColor:"white"}},React.createElement("label",{style:{paddingBottom:15,fontSize:"small",fontFamily:"sans-serif",color:"black",width:230,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},className:"bx--label"},this.props.cardtitle||"Title will come here..."),React.createElement("div",{className:"fields",style:{display:"inline-grid",padding:10}},fieldRows.map(function(fieldRow){return fieldRow})),React.createElement("div",{className:"actions",style:{overflow:"scroll",paddingRight:10,marginTop:10,marginBottom:10,textAlign:"right",display:"inline-table",width:"100%"}},React.createElement(Button,{size:"xs",style:{margin:2,minWidth:32,padding:5,paddingLeft:40},hasIconOnly:!0,renderIcon:SaveIcon}),React.createElement(Button,{size:"xs",style:{margin:2,minWidth:32,padding:5,paddingLeft:40},hasIconOnly:!0,renderIcon:EditIcon}),React.createElement(Button,{size:"xs",style:{margin:2,minWidth:32,padding:5,paddingLeft:40},hasIconOnly:!0,renderIcon:AddIcon}))))}}]),_FormCard_}(React.Component),_export("FormCard",FormCard=function(props){return _FormCard_}),_export("FormCard",FormCard),_export("default",FormCard),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/FormCard/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-addons-cloud-react","carbon-components-react","@carbon/icons-react/lib/save/16","@carbon/icons-react/lib/edit/16","@carbon/icons-react/lib/add/16"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Card,TextInput,Button,SaveIcon,EditIcon,AddIcon,_FormCard_,FormCard;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,Button=_carbonComponentsReact.Button},function(_carbonIconsReactLibSave){SaveIcon=_carbonIconsReactLibSave.default},function(_carbonIconsReactLibEdit){EditIcon=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibAdd){AddIcon=_carbonIconsReactLibAdd.default}],execute:function(){_FormCard_=function(_React$Component){function _FormCard_(props){_classCallCheck(this,_FormCard_);var _this=_possibleConstructorReturn(this,(_FormCard_.__proto__||Object.getPrototypeOf(_FormCard_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_FormCard_,_React$Component),_createClass(_FormCard_,[{key:"render",value:function(){var propsConfig=this.props.config?JSON.parse(this.props.config):{},fieldMapping=propsConfig?propsConfig.fieldMapping:[],cardProps=[];fieldMapping&&fieldMapping.map(function(fieldMap){fieldMap.name&&"title"!=fieldMap.name&&cardProps.push(fieldMap.name)});for(var fieldRows=[],cardPropIndx=0;cardPropIndx<cardProps.length;cardPropIndx+=2)fieldRows.push(React.createElement("div",{style:{width:"100%",display:"inline-flex"}},React.createElement(TextInput,{value:this.props[cardProps[cardPropIndx].toLowerCase()],readOnly:!0,labelText:cardProps[cardPropIndx],style:{marginBottom:5,marginRight:2},defaultValue:"",placeholder:"Enter "+cardProps[cardPropIndx]+"..."}),cardProps.length>cardPropIndx+1?React.createElement(TextInput,{value:this.props[cardProps[cardPropIndx+1].toLowerCase()],readOnly:!0,labelText:cardProps[cardPropIndx+1],style:{marginBottom:5},defaultValue:"",placeholder:"Enter "+cardProps[cardPropIndx+1]+"..."}):null));return React.createElement("div",{className:"appCard"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement(Card,{className:"appCardContent",style:{minHeight:"6rem",maxHeight:"50rem",overflow:"scroll",width:"15rem",backgroundColor:"white"}},React.createElement("label",{style:{paddingBottom:15,fontSize:"small",fontFamily:"sans-serif",color:"black",width:230,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},className:"bx--label"},this.props.cardtitle||"Title will come here..."),React.createElement("div",{className:"fields",style:{display:"inline-grid",padding:10}},fieldRows.map(function(fieldRow){return fieldRow})),React.createElement("div",{className:"actions",style:{overflow:"scroll",paddingRight:10,marginTop:10,marginBottom:10,textAlign:"right",display:"inline-table",width:"100%"}},React.createElement(Button,{size:"xs",style:{margin:2,minWidth:32,padding:5,paddingLeft:40},hasIconOnly:!0,renderIcon:SaveIcon}),React.createElement(Button,{size:"xs",style:{margin:2,minWidth:32,padding:5,paddingLeft:40},hasIconOnly:!0,renderIcon:EditIcon}),React.createElement(Button,{size:"xs",style:{margin:2,minWidth:32,padding:5,paddingLeft:40},hasIconOnly:!0,renderIcon:AddIcon}))))}}]),_FormCard_}(React.Component),_export("FormCard",FormCard=function(props){return _FormCard_}),_export("FormCard",FormCard)}}}),System.register("component/mmf/HomePage.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","react-router-dom","component/mmf/HomePage/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,scope1,HomePage,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_reactRouterDom){_reactRouterDom.BrowserRouter,_reactRouterDom.Route,_reactRouterDom.Link,_reactRouterDom.withRouter,_reactRouterDom.matchPath},function(_componentMmfHomePageStyleCssCss){}],execute:function(){scope1={Home:function(_React$Component){function Home(props){_classCallCheck(this,Home);var _this=_possibleConstructorReturn(this,(Home.__proto__||Object.getPrototypeOf(Home)).call(this,props));return _this.state={toggle:!1},_this.toggleMenu=_this.toggleMenu.bind(_this),_this}return _inherits(Home,_React$Component),_createClass(Home,[{key:"toggleMenu",value:function(){this.setState({toggle:!this.state.toggle})}},{key:"render",value:function(){console.log("In Home Components!");this.props.match;var mainClass=this.state.toggle?"mainHome toggled":"mainHome";return React.createElement("div",{className:mainClass},React.createElement("div",{className:"sidebar-wrapper"},React.createElement("ul",{className:"sidebar-nav"},React.createElement("li",{className:"sidebar-brand"},React.createElement("a",{href:"#"},"Models")),React.createElement("li",null,React.createElement("a",{href:"#"},"Employee")),React.createElement("li",null,React.createElement("a",{href:"#"},"Ravi")),React.createElement("li",null,React.createElement("a",{href:"#"},"Survey")),React.createElement("li",null,React.createElement("a",{href:"#"},"Application Form")))),React.createElement("div",{className:"homeContainer"},React.createElement("div",{className:"homeHeader"},React.createElement("span",{className:"glyphicon glyphicon-menu-hamburger menu-icon",onClick:this.toggleMenu}),React.createElement("header",{className:"main-head"},"Sristee"),React.createElement("div",{className:"logout-head"},React.createElement("ul",{className:"nav navbar-nav"},React.createElement("li",{className:"dropdown"},React.createElement("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown"},"Haribabu Garbhana",React.createElement("span",{className:"glyphicon glyphicon-user pull-right"})),React.createElement("ul",{className:"dropdown-menu"},React.createElement("li",null,React.createElement("a",{href:"#"},"Account Settings ",React.createElement("span",{className:"glyphicon glyphicon-cog pull-right"}))),React.createElement("li",{className:"divider"}),React.createElement("li",null,React.createElement("a",{href:"#"},"Sign Out ",React.createElement("span",{className:"glyphicon glyphicon-log-out pull-right"})))))))),React.createElement("div",{className:"homeContent"},React.createElement("div",{className:"designer pageDesigner"},React.createElement("div",{className:"card medium blue-grey darken-1"},React.createElement("div",{className:"card-content white-text"},React.createElement("span",{className:"card-title"},"Page Desginer"),React.createElement("p",null,"Design and Customize your pages")),React.createElement("div",{className:"card-action"},React.createElement("a",{href:"/ide"},"Page Action")))),React.createElement("div",{className:"designer componentDesigner"},React.createElement("div",{className:"card medium blue-grey darken-1"},React.createElement("div",{className:"card-content white-text"},React.createElement("span",{className:"card-title"},"Component Desginer"),React.createElement("p",null,"Design and Customize your Components")),React.createElement("div",{className:"card-action"},React.createElement("a",{href:"/ide"},"Component Action")))),React.createElement("div",{className:"designer modelDesigner"},React.createElement("div",{className:"card medium blue-grey darken-1"},React.createElement("div",{className:"card-content white-text"},React.createElement("span",{className:"card-title"},"Model Desginer"),React.createElement("p",null,"Design and Customize your Models")),React.createElement("div",{className:"card-action"},React.createElement("a",{href:"/ide"},"Model Action")))),React.createElement("div",{className:"designer workflowDesigner"},React.createElement("div",{className:"card medium blue-grey darken-1"},React.createElement("div",{className:"card-content white-text"},React.createElement("span",{className:"card-title"},"Model Workflow"),React.createElement("p",null,"Design and Customize your Workflows")),React.createElement("div",{className:"card-action"},React.createElement("a",{href:"/ide"},"Workflow Action")))),React.createElement("div",{className:"designer queryBuilder"},React.createElement("div",{className:"card medium blue-grey darken-1"},React.createElement("div",{className:"card-content white-text"},React.createElement("span",{className:"card-title"},"Query Builder"),React.createElement("p",null,"Prepare and save your own queres and reuse the same in everywhere")),React.createElement("div",{className:"card-action"},React.createElement("a",{href:"/query"},"Query Action")))))))}}]),Home}(React.Component)},_export("HomePage",HomePage=function(props){return scope1.Home}),_export("HomePage",HomePage),_export("default",HomePage),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/HomePage/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","react-router-dom","component/mmf/HomePage/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,scope1,HomePage;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_reactRouterDom){_reactRouterDom.BrowserRouter,_reactRouterDom.Route,_reactRouterDom.Link,_reactRouterDom.withRouter,_reactRouterDom.matchPath},function(_componentMmfHomePageStyleCssCss){}],execute:function(){scope1={Home:function(_React$Component){function Home(props){_classCallCheck(this,Home);var _this=_possibleConstructorReturn(this,(Home.__proto__||Object.getPrototypeOf(Home)).call(this,props));return _this.state={toggle:!1},_this.toggleMenu=_this.toggleMenu.bind(_this),_this}return _inherits(Home,_React$Component),_createClass(Home,[{key:"toggleMenu",value:function(){this.setState({toggle:!this.state.toggle})}},{key:"render",value:function(){console.log("In Home Components!");this.props.match;var mainClass=this.state.toggle?"mainHome toggled":"mainHome";return React.createElement("div",{className:mainClass},React.createElement("div",{className:"sidebar-wrapper"},React.createElement("ul",{className:"sidebar-nav"},React.createElement("li",{className:"sidebar-brand"},React.createElement("a",{href:"#"},"Models")),React.createElement("li",null,React.createElement("a",{href:"#"},"Employee")),React.createElement("li",null,React.createElement("a",{href:"#"},"Ravi")),React.createElement("li",null,React.createElement("a",{href:"#"},"Survey")),React.createElement("li",null,React.createElement("a",{href:"#"},"Application Form")))),React.createElement("div",{className:"homeContainer"},React.createElement("div",{className:"homeHeader"},React.createElement("span",{className:"glyphicon glyphicon-menu-hamburger menu-icon",onClick:this.toggleMenu}),React.createElement("header",{className:"main-head"},"Sristee"),React.createElement("div",{className:"logout-head"},React.createElement("ul",{className:"nav navbar-nav"},React.createElement("li",{className:"dropdown"},React.createElement("a",{href:"#",className:"dropdown-toggle","data-toggle":"dropdown"},"Haribabu Garbhana",React.createElement("span",{className:"glyphicon glyphicon-user pull-right"})),React.createElement("ul",{className:"dropdown-menu"},React.createElement("li",null,React.createElement("a",{href:"#"},"Account Settings ",React.createElement("span",{className:"glyphicon glyphicon-cog pull-right"}))),React.createElement("li",{className:"divider"}),React.createElement("li",null,React.createElement("a",{href:"#"},"Sign Out ",React.createElement("span",{className:"glyphicon glyphicon-log-out pull-right"})))))))),React.createElement("div",{className:"homeContent"},React.createElement("div",{className:"designer pageDesigner"},React.createElement("div",{className:"card medium blue-grey darken-1"},React.createElement("div",{className:"card-content white-text"},React.createElement("span",{className:"card-title"},"Page Desginer"),React.createElement("p",null,"Design and Customize your pages")),React.createElement("div",{className:"card-action"},React.createElement("a",{href:"/ide"},"Page Action")))),React.createElement("div",{className:"designer componentDesigner"},React.createElement("div",{className:"card medium blue-grey darken-1"},React.createElement("div",{className:"card-content white-text"},React.createElement("span",{className:"card-title"},"Component Desginer"),React.createElement("p",null,"Design and Customize your Components")),React.createElement("div",{className:"card-action"},React.createElement("a",{href:"/ide"},"Component Action")))),React.createElement("div",{className:"designer modelDesigner"},React.createElement("div",{className:"card medium blue-grey darken-1"},React.createElement("div",{className:"card-content white-text"},React.createElement("span",{className:"card-title"},"Model Desginer"),React.createElement("p",null,"Design and Customize your Models")),React.createElement("div",{className:"card-action"},React.createElement("a",{href:"/ide"},"Model Action")))),React.createElement("div",{className:"designer workflowDesigner"},React.createElement("div",{className:"card medium blue-grey darken-1"},React.createElement("div",{className:"card-content white-text"},React.createElement("span",{className:"card-title"},"Model Workflow"),React.createElement("p",null,"Design and Customize your Workflows")),React.createElement("div",{className:"card-action"},React.createElement("a",{href:"/ide"},"Workflow Action")))),React.createElement("div",{className:"designer queryBuilder"},React.createElement("div",{className:"card medium blue-grey darken-1"},React.createElement("div",{className:"card-content white-text"},React.createElement("span",{className:"card-title"},"Query Builder"),React.createElement("p",null,"Prepare and save your own queres and reuse the same in everywhere")),React.createElement("div",{className:"card-action"},React.createElement("a",{href:"/query"},"Query Action")))))))}}]),Home}(React.Component)},_export("HomePage",HomePage=function(props){return scope1.Home}),_export("HomePage",HomePage)}}}),System.register("component/mmf/ImportExportMetaData.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_ImportExportMetaData_,ImportExportMetaData,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_ImportExportMetaData_=function(_React$Component){function _ImportExportMetaData_(){return _classCallCheck(this,_ImportExportMetaData_),_possibleConstructorReturn(this,(_ImportExportMetaData_.__proto__||Object.getPrototypeOf(_ImportExportMetaData_)).apply(this,arguments))}return _inherits(_ImportExportMetaData_,_React$Component),_createClass(_ImportExportMetaData_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Hello World!"))}}]),_ImportExportMetaData_}(React.Component),_export("ImportExportMetaData",ImportExportMetaData=function(props){return _ImportExportMetaData_}),_export("ImportExportMetaData",ImportExportMetaData),_export("default",ImportExportMetaData),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/ImportExportMetaData/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_ImportExportMetaData_,ImportExportMetaData;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_ImportExportMetaData_=function(_React$Component){function _ImportExportMetaData_(){return _classCallCheck(this,_ImportExportMetaData_),_possibleConstructorReturn(this,(_ImportExportMetaData_.__proto__||Object.getPrototypeOf(_ImportExportMetaData_)).apply(this,arguments))}return _inherits(_ImportExportMetaData_,_React$Component),_createClass(_ImportExportMetaData_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Hello World!"))}}]),_ImportExportMetaData_}(React.Component),_export("ImportExportMetaData",ImportExportMetaData=function(props){return _ImportExportMetaData_}),_export("ImportExportMetaData",ImportExportMetaData)}}}),System.register("component/mmf/Link.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_Link,Link,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_Link=function(_React$Component){function _Link(){return _classCallCheck(this,_Link),_possibleConstructorReturn(this,(_Link.__proto__||Object.getPrototypeOf(_Link)).apply(this,arguments))}return _inherits(_Link,_React$Component),_createClass(_Link,[{key:"render",value:function(){return React.createElement("a",{href:this.props.url,onClick:function(event){event.preventDefault(),history.push(event.currentTarget.getAttribute("href"))}},this.props.name)}}]),_Link}(React.Component),_export("Link",Link=function(props){return _Link}),_export("Link",Link),_export("default",Link),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/Link/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_Link,Link;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_Link=function(_React$Component){function _Link(){return _classCallCheck(this,_Link),_possibleConstructorReturn(this,(_Link.__proto__||Object.getPrototypeOf(_Link)).apply(this,arguments))}return _inherits(_Link,_React$Component),_createClass(_Link,[{key:"render",value:function(){return React.createElement("a",{href:this.props.url,onClick:function(event){event.preventDefault(),history.push(event.currentTarget.getAttribute("href"))}},this.props.name)}}]),_Link}(React.Component),_export("Link",Link=function(props){return _Link}),_export("Link",Link)}}}),System.register("component/mmf/ListLayout.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","classnames","prop-types","client/script/mmf/$qry.js","carbon-icons","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/filter/32","@carbon/icons-react/lib/close/32","deep-equal","lodash.clonedeep","client/script/mmf/MemoryCache.js"],function(_export,_context7){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,DataTableSkeleton,Link,classNames,$qry,Edit20,Filter32,deepEqual,cloneDeep,memoryCache,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableBatchActions,TableBatchAction,_ListLayout,ListLayout,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination,DataTableSkeleton=_carbonComponentsReact.DataTableSkeleton,Link=_carbonComponentsReact.Link},function(_classnames){classNames=_classnames.default},function(_propTypes){_propTypes.default},function(_clientScriptMmf$qryJs){$qry=_clientScriptMmf$qryJs.$qry},function(_carbonIcons){_carbonIcons.iconDownload,_carbonIcons.iconEdit,_carbonIcons.iconSettings},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibFilter){Filter32=_carbonIconsReactLibFilter.default},function(_carbonIconsReactLibClose){_carbonIconsReactLibClose.default},function(_deepEqual){deepEqual=_deepEqual.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_clientScriptMmfMemoryCacheJs){memoryCache=_clientScriptMmfMemoryCacheJs.default}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,DataTable.TableToolbarAction,TableBatchActions=DataTable.TableBatchActions,TableBatchAction=DataTable.TableBatchAction,_ListLayout=function(_React$Component){function _ListLayout(props){_classCallCheck(this,_ListLayout);var _this=_possibleConstructorReturn(this,(_ListLayout.__proto__||Object.getPrototypeOf(_ListLayout)).call(this,props));_this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],isTableNotValid:!1,fieldsAreNotValid:!1,showDialog:!1,hideFilter:!0,reload:!1,appliedFilter:"",isReady:!1,editBtn:Edit20},_this.getPagePath=_this.getPagePath.bind(_this),_this.setFilterValue=_this.setFilterValue.bind(_this);var widgetProps=_this.props.widgetProps||{};if(_this.tableName=widgetProps.TableName?widgetProps.TableName:props.table,_this.fields=widgetProps.Fields?widgetProps.Fields:props.fields?props.fields:"uid",_this.title=widgetProps.Title?widgetProps.Title:props.title,_this.filter=widgetProps.Filter?widgetProps.Filter:null,_this.searchTable=_this.searchTable.bind(_this),_this.relationName=widgetProps.RelationName?widgetProps.RelationName:props.relation,_this.relatedRecord=widgetProps.RelatedRecord?widgetProps.RelatedRecord:props.recordid,_this.onRowSelect=_this.onRowSelect.bind(_this),props.filter)try{var filterVal=atob(props.filter);filterVal=decodeURIComponent(filterVal),_this.filter=filterVal}catch(err){try{_this.filter=props.filter}catch(err){}}widgetProps.EditPage?_this.getPagePath(widgetProps.EditPage).then(function(path){_this.editView=path,_this.setState({reload:!_this.state.reload})}):_this.editView=props.editpath?props.editpath:"",widgetProps.CreatePage?_this.getPagePath(widgetProps.CreatePage).then(function(path){_this.createView=path,_this.setState({reload:!_this.state.reload})}):_this.createView=props.createpath?props.createpath:"",_this.includeUID=!!widgetProps.ShowUID&&("string"==typeof widgetProps.ShowUID?"true"==widgetProps.ShowUID:widgetProps.ShowUID),_this.isSortable=!!widgetProps.isSortable&&("string"==typeof widgetProps.isSortable?"true"==widgetProps.isSortable:widgetProps.isSortable),_this.showNewButton=!!widgetProps.ShowNewButton&&("string"==typeof widgetProps.ShowNewButton?"true"==widgetProps.ShowNewButton:widgetProps.ShowNewButton),_this.showEditButton=!!widgetProps.ShowEditButton&&("string"==typeof widgetProps.ShowEditButton?"true"==widgetProps.ShowEditButton:widgetProps.ShowEditButton);var clickPreview=widgetProps.ClickPreview?widgetProps.ClickPreview:props.clickpreview;if(clickPreview)try{_this.clickpreview=JSON.parse(clickPreview)}catch(err){_this.clickpreview=""}_this.showEditButton=_this.showEditButton||!!_this.clickpreview,_this.showNewButton=_this.showNewButton||!!_this.clickpreview,_this.editRow=_this.editRow.bind(_this),_this.defultFields=[],_this.PAGINATION_PAGE_SIZE_DEFAULT=20;var pageSize=widgetProps.PageSize?widgetProps.PageSize:props.pagesize;return _this.pagesize=pageSize?parseInt(pageSize,20):_this.PAGINATION_PAGE_SIZE_DEFAULT,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[1,_this.pagesize],_this}return _inherits(_ListLayout,_React$Component),_createClass(_ListLayout,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var schemaData,editBtn;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.t0=$ele,!_context.t0){_context.next=4;break}return _context.next=4,$ele.registerElement("SrsFilter","studio","React");case 4:if(this.props.schema&&0!=Object.keys(this.props.schema).length){_context.next=16;break}if(schemaData=memoryCache.get("mmf.getSchemaData")){_context.next=11;break}return _context.next=9,$script.runAtServer("mmf.getSchemaData");case 9:schemaData=_context.sent,memoryCache.put("mmf.getSchemaData",schemaData);case 11:return this.props.updateStore({updates:{schema:schemaData}}),_context.next=14,this.processRequest();case 14:_context.next=18;break;case 16:return _context.next=18,this.processRequest();case 18:if(!this.props.widgetProps||!this.props.widgetProps.EditBtn){_context.next=28;break}return _context.prev=19,_context.next=22,System.import("@carbon/icons-react/lib/"+this.props.widgetProps.EditBtn);case 22:editBtn=_context.sent,this.setState({editBtn:editBtn}),_context.next=28;break;case 26:_context.prev=26,_context.t1=_context.catch(19);case 28:this.setState({isReady:!0});case 29:case"end":return _context.stop()}},_callee,this,[[19,26]])}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){var selectedRowIds,_widgetProps,widgetProps,newFilter,result,editBtn,_widgetProps2,clickPreview,pageSize,_this2=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_.isEqual(prevState.rowsById,this.state.rowsById)||(selectedRowIds=[],this.state.rowsById&&this.state.rowsById.map(function(row,indx){row.isSelected&&selectedRowIds.push(row.id)}),selectedRowIds.length>0&&((_widgetProps=Object.assign({},this.props.widgetProps)).SelectedRowIds=selectedRowIds,this.props.updateStore({updates:{widgetProps:_widgetProps}}))),widgetProps=this.props.widgetProps,prevProps.active_filters&&!deepEqual(prevProps.active_filters[this.props.widgetid],this.props.active_filters[this.props.widgetid])&&(widgetProps=cloneDeep(widgetProps),newFilter=(newFilter=this.props.active_filters[this.props.widgetid]).where?newFilter:{where:newFilter},result=this.setFilterValue(newFilter.where),this.setState({appliedFilter:result}),widgetProps.Filter=JSON.stringify(newFilter),this.props.updateStore({updates:{widgetProps:widgetProps}})),!prevProps.widgetProps||prevProps.widgetProps.Reload+""==this.props.widgetProps.Reload+""&&prevProps.widgetProps.Size==this.props.widgetProps.Size&&prevProps.widgetProps.StickyHeader==this.props.widgetProps.StickyHeader||this.setState({reload:!this.state.reload}),!prevProps.widgetProps||prevProps.widgetProps.EditBtn==this.props.widgetProps.EditBtn){_context2.next=14;break}return _context2.prev=5,_context2.next=8,System.import("@carbon/icons-react/lib/"+this.props.widgetProps.EditBtn);case 8:editBtn=_context2.sent,this.setState({editBtn:editBtn}),_context2.next=14;break;case 12:_context2.prev=12,_context2.t0=_context2.catch(5);case 14:if((!this.props.widgetProps||prevProps.widgetProps.TableName==this.props.widgetProps.TableName&&_.isEqual(prevProps.widgetProps.Fields,this.props.widgetProps.Fields)&&prevProps.widgetProps.Filter==this.props.widgetProps.Filter&&prevProps.widgetProps.PageSize==this.props.widgetProps.PageSize&&prevProps.widgetProps.Reload+""==this.props.widgetProps.Reload+"")&&prevProps.table==this.props.table&&prevProps.fields==this.props.fields&&prevProps.filter==this.props.filter&&prevProps.pagesize==this.props.pagesize){_context2.next=35;break}if(this.setState({isReady:!1}),_widgetProps2=this.props.widgetProps,this.tableName=_widgetProps2.TableName?_widgetProps2.TableName:this.props.table,this.fields=_widgetProps2.Fields?_widgetProps2.Fields:this.props.fields?this.props.fields:"uid",this.title=_widgetProps2.Title?_widgetProps2.Title:this.props.title,this.filter=_widgetProps2.Filter?_widgetProps2.Filter:this.props.filter,_widgetProps2.EditPage?this.getPagePath(_widgetProps2.EditPage).then(function(path){_this2.editView=path,_this2.setState({reload:!_this2.state.reload})}):this.editView=this.props.editpath?this.props.editpath:"",_widgetProps2.CreatePage?this.getPagePath(_widgetProps2.CreatePage).then(function(path){_this2.createView=path,_this2.setState({reload:!_this2.state.reload})}):this.createView=this.props.createpath?this.props.createpath:"",this.includeUID=_widgetProps2.ShowUID,this.isSortable=_widgetProps2.isSortable,this.showNewButton=_widgetProps2.ShowNewButton,clickPreview=_widgetProps2.ClickPreview?_widgetProps2.ClickPreview:this.props.clickpreview)try{this.clickpreview=JSON.parse(clickPreview)}catch(err){this.clickpreview=""}return this.showEditButton=_widgetProps2.ShowEditButton||this.clickpreview,this.showNewButton=this.showNewButton||this.clickpreview,pageSize=_widgetProps2.PageSize?_widgetProps2.PageSize:this.props.pagesize,this.pagesize=pageSize?parseInt(pageSize,20):this.PAGINATION_PAGE_SIZE_DEFAULT,_context2.next=34,this.processRequest();case 34:this.setState({isReady:!0});case 35:prevProps.showpreview!=this.props.showpreview&&this.setState({showDialog:this.props.showpreview});case 36:case"end":return _context2.stop()}},_callee2,this,[[5,12]])}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"getPagePath",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(pageId){var result;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,$qry.run("mmf.getSlideById",{pageId:pageId});case 2:return result=_context3.sent,_context3.abrupt("return",result?result.Path:"");case 4:case"end":return _context3.stop()}},_callee3,this)}));return function(_x3){return _ref3.apply(this,arguments)}}()},{key:"onRowSelect",value:function(evt){if(evt.target&&evt.target.name&&evt.target.name.indexOf("select-row-")>-1){var rowIndx=parseInt(evt.target.name.split("select-row-")[1]),dataRow=this.state.rows[rowIndx],widgetProps=Object.assign({},this.props.widgetProps);widgetProps.SelectRowIds=[dataRow.uid],this.props.updateStore({updates:{widgetProps:widgetProps}})}}},{key:"setFilterValue",value:function(filter){var _this3=this,result="";filter&&"object"==typeof filter&&(Array.isArray(filter)?filter.map(function(rule){var field=rule&&Object.keys(rule)&&1==Object.keys(rule).length&&Object.keys(rule)[0],operator="=",value=void 0;rule[field]&&("and"==field||"or"==field?result+=_this3.setFilterValue(rule[field])+"."+field:"object"==typeof rule[field]?(operator=Object.keys(rule[field])&&1==Object.keys(rule[field]).length&&Object.keys(rule[field])[0],(value=Object.keys(rule[field])&&1==Object.keys(rule[field]).length&&rule[field][Object.keys(rule[field])[0]])&&(value=value.replace(/%/g,"")),result+=field+""+operator+value):((value=rule[field])&&(value=value.replace(/%/g,"")),result+=field+""+operator+value))}):Object.keys(filter).map(function(filterKey){"and"!=filterKey&&"or"!=filterKey||(result+=_this3.setFilterValue(filter[filterKey])+"."+filterKey)}));return result}},{key:"editRow",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(rowData,rowId){var rowinfo,componentName,componentScope,componentProps,result,tagName,editPath,widgetProps;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(rowinfo={},rowData&&rowData.cells&&rowData.cells.length>0&&(rowData.cells.forEach(function(cell){var key=cell.id.split(":")[1];rowinfo[key]=cell.value}),rowinfo.uid=rowinfo.uid||rowId),!this.clickpreview){_context4.next=20;break}return componentName=this.clickpreview.component.Name,componentScope=this.clickpreview.component.Scope,componentProps=this.clickpreview.component.props?this.clickpreview.component.props:{},componentProps=_extends({},componentProps,{rowinfo:JSON.stringify(rowinfo)}),_context4.next=9,$qry.run("mmf.getComponentType",{Name:componentName,Scope:componentScope});case 9:if(!(result=_context4.sent)||!result.Type){_context4.next=17;break}return _context4.next=13,$ele.registerElement(componentName,componentScope,result.Type);case 13:tagName=componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),this.props.updateStore({updates:{showpreview:!0,previewcontent:{tag:tagName,props:componentProps}}}),_context4.next=18;break;case 17:this.props.addFlashMessage({title:"Info - ",subtitle:'Invalid "Add new" configuration found.'});case 18:_context4.next=21;break;case 20:this.editView&&(editPath=this.editView.replace(/(:[a-zA-Z_-]+)/g,rowId),window.history.pushState(null,"",editPath));case 21:this.props.updateStore&&((widgetProps=cloneDeep(this.props.widgetProps)).EditableRowId=rowId,widgetProps.Reload=widgetProps.Reload+""=="true",this.props.updateStore({updates:{widgetProps:widgetProps}}));case 22:case"end":return _context4.stop()}},_callee4,this)}));return function(_x4,_x5){return _ref4.apply(this,arguments)}}()},{key:"processRequest",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(){var filter,fields,fieldAliases,rawFields,inputParams,tableRows;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:filter={};try{filter=this.filter?JSON.parse(this.filter):{}}catch(err){filter={}}if(fields=[],fieldAliases={},this.fields){if(rawFields=this.fields,"string"==typeof this.fields)try{rawFields=JSON.parse(this.fields)}catch(err){rawFields=this.fields}"string"==typeof rawFields?this.fields.split(",").map(function(fieldName){fieldName&&fieldName.trim().length>0&&(fields.push(fieldName.trim()),fieldAliases[fieldName.trim()]=fieldName.trim())}):rawFields&&"object"==typeof rawFields&&(Array.isArray(rawFields)?rawFields.map(function(rawField){"string"==typeof rawField?(fields.push(rawField),fieldAliases[rawField]=rawField):"object"==typeof rawField&&(fields.push(rawField.value),fieldAliases[rawField.value]=rawField.name)}):Object.keys(rawFields).map(function(rawFieldAlias){fields.push(rawFields[rawFieldAlias]),fieldAliases[rawFieldAlias]=rawFields[rawFieldAlias]}))}return inputParams={tableName:this.tableName,fields:fields||["uid"],fieldAliases:fieldAliases,filter:filter,relationName:this.relationName,recordId:this.relatedRecord},_context5.next=8,$script.runAtServer("mmf.getRecords",inputParams);case 8:(tableRows=_context5.sent)&&!tableRows.error?this.prepareTableData(tableRows):tableRows.error&&this.setState({isTableNotValid:!0});case 10:case"end":return _context5.stop()}},_callee5,this)}));return function(){return _ref5.apply(this,arguments)}}()},{key:"prepareTableData",value:function(tableRows){if(tableRows&&tableRows.length>0){var initHead=tableRows[0].node,headers=Object.keys(initHead).map(function(key){return{key:key,header:key}});this.showEditButton&&headers.push({key:"row_actions",header:"Action(s)"});for(var rows=[],tabIn=0;tabIn<tableRows.length;tabIn++){var tableRow=tableRows[tabIn].node;tableRow.id=tabIn,rows.push(tableRow)}this.setState({isTableNotValid:!1,fieldsAreNotValid:!1,headers:headers,nonFilteredRows:rows,rows:rows,rowsSubset:rows.slice(0,this.pagesize)})}else{var _headers=this.state.headers;_headers&&this.fields&&this.fields.indexOf(",")>-1&&(_headers=this.fields.split(",").map(function(key){return{key:key.trim(),header:key.trim()}})),this.setState({isTableNotValid:!1,fieldsAreNotValid:!1,headers:_headers,rows:[],rowsSubset:[]})}}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this4=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this4.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"clearAll",value:function(){var checked=this.state.checked;this.state.rows.forEach(function(row,index){checked[index]=!!checked[index]&&!checked[index]}),this.setState({checked:checked,selectAll:!1})}},{key:"getCheckedItems",value:function(){var checkedItems=0;return this.state.checked.forEach(function(entry){entry&&checkedItems++}),checkedItems}},{key:"searchTable",value:function(evt){var newRows=[];this.state.nonFilteredRows.map(function(obj){obj.Name&&obj.Name.toUpperCase().includes(evt.currentTarget.value.toUpperCase())&&!newRows.includes(obj)&&newRows.push(obj)}),this.setState({rows:newRows,rowsSubset:newRows.slice(0,this.pagesize)})}},{key:"batchActionClick",value:function(){}},{key:"getDataTableTemplate",value:function(){var _this5=this,self=this,tableName=(this.getCheckedItems(),classNames({"bx--data-table-v2":!0,"bx--data-table-v2--zebra":this.props.zebra}),this.props.isSelectable,this.tableName);tableName=tableName&&tableName.indexOf("_")>-1?tableName.split("_").slice(0,tableName.split("_").length-1).join("_"):tableName;this.title&&this.title;var headers=this.state.headers;this.state.rowsSubset;1!=this.includeUID&&(headers=headers.filter(function(header,indx){return"uid"!=header.key}));var listFilter=this.props.widgetProps&&("true"==this.props.widgetProps.HideFilter||1==this.props.widgetProps.HideFilter)?null:React.createElement("div",null,React.createElement("div",{style:{cursor:"pointer",textAlign:"left",fontWeight:"larger",color:"blue"},onClick:function(e){_this5.props.updateStore&&_this5.props.updateStore({updates:{showFilter:!_this5.props.showFilter}})}},React.createElement(Filter32,null),this.state.appliedFilter?React.createElement("span",{className:"srs-filter-value"},this.state.appliedFilter):null),this.props.showFilter?React.createElement("div",{style:{cursor:"pointer",minHeight:"10rem",display:"flex",width:"100%",maxHeight:"30rem",overflow:"hidden",backgroundColor:"rgb(243, 243, 243)"}},React.createElement("srs-filter",{resultkey:this.props.widgetid,tableName:this.tableName,style:{width:"100vw",overflow:"scroll"}})):null),extraOptions={useZebraStyles:!0,size:"compact",stickyHeader:!0};this.isSortable&&(extraOptions.isSortable=!0),this.props.widgetProps&&this.props.widgetProps.ShowRadioButton+""=="true"&&(extraOptions.radio=!0),this.props.widgetProps&&this.props.widgetProps.Size&&(extraOptions.size=this.props.widgetProps.Size),this.props.widgetProps&&this.props.widgetProps.StickyHeader&&(extraOptions.stickyHeader=this.props.widgetProps.StickyHeader+""=="true");var EditBtn=this.state.editBtn;return React.createElement("div",null,listFilter,React.createElement(DataTable,_extends({},extraOptions,{rows:this.state.rowsSubset,headers:headers,render:function(_ref6){var _ref7,rows=_ref6.rows,headers=_ref6.headers,getHeaderProps=_ref6.getHeaderProps,getTableProps=(_ref6.getRowProps,_ref6.getTableProps),getSelectionProps=(_ref6.getTableContainerProps,_ref6.getSelectionProps),getBatchActionProps=_ref6.getBatchActionProps,selectedRows=(_ref6.onInputChange,_ref6.selectedRows);return React.createElement(TableContainer,null,React.createElement(TableToolbar,null,React.createElement(TableBatchActions,getBatchActionProps(),React.createElement(TableBatchAction,{onClick:_this5.batchActionClick(selectedRows)},"Export"),React.createElement(TableBatchAction,{onClick:_this5.batchActionClick(selectedRows)},"Delete")),React.createElement(TableToolbarContent,null,React.createElement(TableToolbarSearch,{onChange:_this5.searchTable}),_this5.showNewButton?React.createElement(Button,{size:"small",kind:"primary",onClick:(_ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(e){var componentName,componentScope,componentProps,result,tagName,widgetProps;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(!_this5.clickpreview){_context6.next=17;break}return componentName=_this5.clickpreview.component.Name,componentScope=_this5.clickpreview.component.Scope,componentProps=_this5.clickpreview.component.props?_this5.clickpreview.component.props:{},_context6.next=6,$qry.run("mmf.getComponentType",{Name:componentName,Scope:componentScope});case 6:if(!(result=_context6.sent)||!result.Type){_context6.next=14;break}return _context6.next=10,$ele.registerElement(componentName,componentScope,result.Type);case 10:tagName=componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),_this5.props.updateStore({updates:{showpreview:!0,previewcontent:{tag:tagName,props:componentProps}}}),_context6.next=15;break;case 14:_this5.props.addFlashMessage({title:"Info - ",subtitle:'Invalid "Add new" configuration found.'});case 15:_context6.next=18;break;case 17:_this5.createView&&window.history.pushState(null,"",_this5.createView);case 18:_this5.props.updateStore&&((widgetProps=Object.assign({},_this5.props.widgetProps)).EditableRowId=-1,widgetProps.Reload=widgetProps.Reload+""=="true",_this5.props.updateStore({updates:{widgetProps:widgetProps}}));case 19:case"end":return _context6.stop()}},_callee6,_this5)})),function(_x6){return _ref7.apply(this,arguments)})},"Add new"):React.createElement("div",null))),React.createElement(Table,getTableProps(),!_this5.props.widgetProps||_this5.props.widgetProps&&(_this5.props.widgetProps.ShowHeader+""=="true"||_this5.props.widgetProps.ShowHeader+""=="1")?React.createElement(TableHead,null,React.createElement(TableRow,null,_this5.props.widgetProps&&_this5.props.widgetProps.ShowRadioButton+""!="true"?React.createElement(TableSelectAll,getSelectionProps()):null,rows&&rows.length>0?headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}):null)):null,React.createElement(TableBody,null,0==rows.length?React.createElement(TableRow,{key:"no_data",className:"no_data_found"},React.createElement(TableCell,{className:"no_data_found_td",colSpan:"100",key:"no_data"},"No data")):rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row,onClick:_this5.onRowSelect})),row.cells.map(function(cell,indx){return cell.id.indexOf("row_actions")>-1&&_this5.showEditButton?React.createElement(TableCell,{key:"row_actions"},React.createElement(EditBtn,{style:{cursor:"pointer"},onClick:function(){var rowId="",rowIndx=cell.id.indexOf(":")>-1?parseInt(cell.id.split(":")[0]):-1;(rowIndx=rowIndx>self.pagesize?rowIndx%self.pagesize:rowIndx)>-1&&self.state.rowsSubset&&self.state.rowsSubset[rowIndx]&&(rowId=self.state.rowsSubset[rowIndx].uid),_this5.editRow(row,rowId)}})):React.createElement(TableCell,{key:cell.id},0==indx?React.createElement(Link,{style:{cursor:"pointer"},onClick:function(e){var rowId="",rowIndx=cell.id.indexOf(":")>-1?parseInt(cell.id.split(":")[0]):-1;(rowIndx=rowIndx>self.pagesize?rowIndx%self.pagesize:rowIndx)>-1&&self.state.rowsSubset&&self.state.rowsSubset[rowIndx]&&(rowId=self.state.rowsSubset[rowIndx].uid),_this5.editRow(row,rowId)}},cell.value):cell.value)}))}))),React.createElement(Pagination,{totalItems:_this5.state.rows.length,pageSize:_this5.pagesize,pageSizes:_this5.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this5.handlePaginationChange.bind(_this5)}))}})))}},{key:"render",value:function(){var _this6=this;if(this.state.isReady){var previewComponent=null;if(this.state.showDialog&&this.props.previewcontent&&this.props.previewcontent.tag){var previewItem=React.createElement(this.props.previewcontent.tag,this.props.previewcontent.props),salt=Math.random().toString(36).substring(7);previewComponent=React.createElement("preview-component",{key:"actionform"+salt},previewItem)}var template=null;if(this.relationName){if(!this.props.schema||0==Object.keys(this.props.schema).length)return React.createElement("div",null,"Loading...");var matchingRelationship=this.props.schema.fields.filter(function(field){return field.parent==_this6.tableName&&field.text==_this6.relationName&&"one2many"==field.type});matchingRelationship&&0!=matchingRelationship.length||(template=React.createElement("div",{className:""},"Please provide a valid table/relationship."))}return template=this.state.isTableNotValid?React.createElement("div",{className:""},"Please provide a valid table."):this.state.fieldsAreNotValid?React.createElement("div",{className:""},"Please provide valid fields."):this.getDataTableTemplate(),React.createElement("div",{className:this.state.rows&&0!=this.state.rows.length?"":"NoData",style:{padding:5,overflowX:"auto",backgroundColor:"#f3f3f3",height:"inherit"}},previewComponent,template)}return React.createElement(DataTableSkeleton,{style:{backgroundColor:"#f3f3f3",height:"inherit"}})}}]),_ListLayout}(React.Component),_export("ListLayout",ListLayout=function(props){return _ListLayout}),_export("ListLayout",ListLayout),_export("default",ListLayout),_export("states",states=[{KeyName:"previewcontent",AccessPath:"previewcontent",DefaultValue:'{"previewcontent": {}}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema": {}}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"showFilter",AccessPath:"showFilter.${widgetid}",DefaultValue:'{"showFilter": {"${widgetid}": false}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"active_filters",AccessPath:"active_filters",DefaultValue:'{"active_filters": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("client/script/mmf/MemoryCache.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){window.memoryCache=window.memoryCache||new function(){var _cache=Object.create(null),_hitCount=0,_missCount=0,_size=0,_debug=!1;function _del(key){_size--,delete _cache[key]}this.put=function(key,value,time,timeoutCallback){if(_debug&&console.log("caching: %s = %j (@%s)",key,value,time),void 0!==time&&("number"!=typeof time||isNaN(time)||time<=0))throw new Error("Cache timeout must be a positive number");if(void 0!==timeoutCallback&&"function"!=typeof timeoutCallback)throw new Error("Cache timeout callback must be a function");var oldRecord=_cache[key];oldRecord?clearTimeout(oldRecord.timeout):_size++;var record={value:value,expire:time+Date.now()};return isNaN(record.expire)||(record.timeout=setTimeout(function(){_del(key),timeoutCallback&&timeoutCallback(key,value)}.bind(this),time)),_cache[key]=record,value},this.del=function(key){var canDelete=!0,oldRecord=_cache[key];return oldRecord?(clearTimeout(oldRecord.timeout),!isNaN(oldRecord.expire)&&oldRecord.expire<Date.now()&&(canDelete=!1)):canDelete=!1,canDelete&&_del(key),canDelete},this.clear=function(){for(var key in _cache)clearTimeout(_cache[key].timeout);_size=0,_cache=Object.create(null),_debug&&(_hitCount=0,_missCount=0)},this.get=function(key){var data=_cache[key];if(void 0!==data){if(isNaN(data.expire)||data.expire>=Date.now())return _debug&&_hitCount++,data.value;_debug&&_missCount++,_size--,delete _cache[key]}else _debug&&_missCount++;return null},this.size=function(){return _size},this.memsize=function(){var key,size=0;for(key in _cache)size++;return size},this.debug=function(bool){_debug=bool},this.hits=function(){return _hitCount},this.misses=function(){return _missCount},this.keys=function(){return Object.keys(_cache)},this.exportJson=function(){var plainJsCache={};for(var key in _cache){var record=_cache[key];plainJsCache[key]={value:record.value,expire:record.expire||"NaN"}}return JSON.stringify(plainJsCache)},this.importJson=function(jsonToImport,options){var cacheToImport=JSON.parse(jsonToImport),currTime=Date.now(),skipDuplicates=options&&options.skipDuplicates;for(var key in cacheToImport)if(cacheToImport.hasOwnProperty(key)){if(skipDuplicates&&_cache[key]){_debug&&console.log('Skipping duplicate imported key "%s"',key);continue}var record=cacheToImport[key],remainingTime=record.expire-currTime;if(remainingTime<=0){this.del(key);continue}remainingTime=remainingTime>0?remainingTime:void 0,this.put(key,record.value,remainingTime)}return this.size()}},_export("default",window.memoryCache)}}}),System.register("component/mmf/ListLayout/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","classnames","prop-types","client/script/mmf/$qry.js","carbon-icons","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/filter/32","@carbon/icons-react/lib/close/32","deep-equal","lodash.clonedeep","client/script/mmf/MemoryCache.js"],function(_export,_context7){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,DataTableSkeleton,Link,classNames,$qry,Edit20,Filter32,deepEqual,cloneDeep,memoryCache,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableBatchActions,TableBatchAction,_ListLayout,ListLayout;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination,DataTableSkeleton=_carbonComponentsReact.DataTableSkeleton,Link=_carbonComponentsReact.Link},function(_classnames){classNames=_classnames.default},function(_propTypes){_propTypes.default},function(_clientScriptMmf$qryJs){$qry=_clientScriptMmf$qryJs.$qry},function(_carbonIcons){_carbonIcons.iconDownload,_carbonIcons.iconEdit,_carbonIcons.iconSettings},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibFilter){Filter32=_carbonIconsReactLibFilter.default},function(_carbonIconsReactLibClose){_carbonIconsReactLibClose.default},function(_deepEqual){deepEqual=_deepEqual.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_clientScriptMmfMemoryCacheJs){memoryCache=_clientScriptMmfMemoryCacheJs.default}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,DataTable.TableToolbarAction,TableBatchActions=DataTable.TableBatchActions,TableBatchAction=DataTable.TableBatchAction,_ListLayout=function(_React$Component){function _ListLayout(props){_classCallCheck(this,_ListLayout);var _this=_possibleConstructorReturn(this,(_ListLayout.__proto__||Object.getPrototypeOf(_ListLayout)).call(this,props));_this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],isTableNotValid:!1,fieldsAreNotValid:!1,showDialog:!1,hideFilter:!0,reload:!1,appliedFilter:"",isReady:!1,editBtn:Edit20},_this.getPagePath=_this.getPagePath.bind(_this),_this.setFilterValue=_this.setFilterValue.bind(_this);var widgetProps=_this.props.widgetProps||{};if(_this.tableName=widgetProps.TableName?widgetProps.TableName:props.table,_this.fields=widgetProps.Fields?widgetProps.Fields:props.fields?props.fields:"uid",_this.title=widgetProps.Title?widgetProps.Title:props.title,_this.filter=widgetProps.Filter?widgetProps.Filter:null,_this.searchTable=_this.searchTable.bind(_this),_this.relationName=widgetProps.RelationName?widgetProps.RelationName:props.relation,_this.relatedRecord=widgetProps.RelatedRecord?widgetProps.RelatedRecord:props.recordid,_this.onRowSelect=_this.onRowSelect.bind(_this),props.filter)try{var filterVal=atob(props.filter);filterVal=decodeURIComponent(filterVal),_this.filter=filterVal}catch(err){try{_this.filter=props.filter}catch(err){}}widgetProps.EditPage?_this.getPagePath(widgetProps.EditPage).then(function(path){_this.editView=path,_this.setState({reload:!_this.state.reload})}):_this.editView=props.editpath?props.editpath:"",widgetProps.CreatePage?_this.getPagePath(widgetProps.CreatePage).then(function(path){_this.createView=path,_this.setState({reload:!_this.state.reload})}):_this.createView=props.createpath?props.createpath:"",_this.includeUID=!!widgetProps.ShowUID&&("string"==typeof widgetProps.ShowUID?"true"==widgetProps.ShowUID:widgetProps.ShowUID),_this.isSortable=!!widgetProps.isSortable&&("string"==typeof widgetProps.isSortable?"true"==widgetProps.isSortable:widgetProps.isSortable),_this.showNewButton=!!widgetProps.ShowNewButton&&("string"==typeof widgetProps.ShowNewButton?"true"==widgetProps.ShowNewButton:widgetProps.ShowNewButton),_this.showEditButton=!!widgetProps.ShowEditButton&&("string"==typeof widgetProps.ShowEditButton?"true"==widgetProps.ShowEditButton:widgetProps.ShowEditButton);var clickPreview=widgetProps.ClickPreview?widgetProps.ClickPreview:props.clickpreview;if(clickPreview)try{_this.clickpreview=JSON.parse(clickPreview)}catch(err){_this.clickpreview=""}_this.showEditButton=_this.showEditButton||!!_this.clickpreview,_this.showNewButton=_this.showNewButton||!!_this.clickpreview,_this.editRow=_this.editRow.bind(_this),_this.defultFields=[],_this.PAGINATION_PAGE_SIZE_DEFAULT=20;var pageSize=widgetProps.PageSize?widgetProps.PageSize:props.pagesize;return _this.pagesize=pageSize?parseInt(pageSize,20):_this.PAGINATION_PAGE_SIZE_DEFAULT,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[1,_this.pagesize],_this}return _inherits(_ListLayout,_React$Component),_createClass(_ListLayout,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var schemaData,editBtn;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.t0=$ele,!_context.t0){_context.next=4;break}return _context.next=4,$ele.registerElement("SrsFilter","studio","React");case 4:if(this.props.schema&&0!=Object.keys(this.props.schema).length){_context.next=16;break}if(schemaData=memoryCache.get("mmf.getSchemaData")){_context.next=11;break}return _context.next=9,$script.runAtServer("mmf.getSchemaData");case 9:schemaData=_context.sent,memoryCache.put("mmf.getSchemaData",schemaData);case 11:return this.props.updateStore({updates:{schema:schemaData}}),_context.next=14,this.processRequest();case 14:_context.next=18;break;case 16:return _context.next=18,this.processRequest();case 18:if(!this.props.widgetProps||!this.props.widgetProps.EditBtn){_context.next=28;break}return _context.prev=19,_context.next=22,System.import("@carbon/icons-react/lib/"+this.props.widgetProps.EditBtn);case 22:editBtn=_context.sent,this.setState({editBtn:editBtn}),_context.next=28;break;case 26:_context.prev=26,_context.t1=_context.catch(19);case 28:this.setState({isReady:!0});case 29:case"end":return _context.stop()}},_callee,this,[[19,26]])}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){var selectedRowIds,_widgetProps,widgetProps,newFilter,result,editBtn,_widgetProps2,clickPreview,pageSize,_this2=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_.isEqual(prevState.rowsById,this.state.rowsById)||(selectedRowIds=[],this.state.rowsById&&this.state.rowsById.map(function(row,indx){row.isSelected&&selectedRowIds.push(row.id)}),selectedRowIds.length>0&&((_widgetProps=Object.assign({},this.props.widgetProps)).SelectedRowIds=selectedRowIds,this.props.updateStore({updates:{widgetProps:_widgetProps}}))),widgetProps=this.props.widgetProps,prevProps.active_filters&&!deepEqual(prevProps.active_filters[this.props.widgetid],this.props.active_filters[this.props.widgetid])&&(widgetProps=cloneDeep(widgetProps),newFilter=(newFilter=this.props.active_filters[this.props.widgetid]).where?newFilter:{where:newFilter},result=this.setFilterValue(newFilter.where),this.setState({appliedFilter:result}),widgetProps.Filter=JSON.stringify(newFilter),this.props.updateStore({updates:{widgetProps:widgetProps}})),!prevProps.widgetProps||prevProps.widgetProps.Reload+""==this.props.widgetProps.Reload+""&&prevProps.widgetProps.Size==this.props.widgetProps.Size&&prevProps.widgetProps.StickyHeader==this.props.widgetProps.StickyHeader||this.setState({reload:!this.state.reload}),!prevProps.widgetProps||prevProps.widgetProps.EditBtn==this.props.widgetProps.EditBtn){_context2.next=14;break}return _context2.prev=5,_context2.next=8,System.import("@carbon/icons-react/lib/"+this.props.widgetProps.EditBtn);case 8:editBtn=_context2.sent,this.setState({editBtn:editBtn}),_context2.next=14;break;case 12:_context2.prev=12,_context2.t0=_context2.catch(5);case 14:if((!this.props.widgetProps||prevProps.widgetProps.TableName==this.props.widgetProps.TableName&&_.isEqual(prevProps.widgetProps.Fields,this.props.widgetProps.Fields)&&prevProps.widgetProps.Filter==this.props.widgetProps.Filter&&prevProps.widgetProps.PageSize==this.props.widgetProps.PageSize&&prevProps.widgetProps.Reload+""==this.props.widgetProps.Reload+"")&&prevProps.table==this.props.table&&prevProps.fields==this.props.fields&&prevProps.filter==this.props.filter&&prevProps.pagesize==this.props.pagesize){_context2.next=35;break}if(this.setState({isReady:!1}),_widgetProps2=this.props.widgetProps,this.tableName=_widgetProps2.TableName?_widgetProps2.TableName:this.props.table,this.fields=_widgetProps2.Fields?_widgetProps2.Fields:this.props.fields?this.props.fields:"uid",this.title=_widgetProps2.Title?_widgetProps2.Title:this.props.title,this.filter=_widgetProps2.Filter?_widgetProps2.Filter:this.props.filter,_widgetProps2.EditPage?this.getPagePath(_widgetProps2.EditPage).then(function(path){_this2.editView=path,_this2.setState({reload:!_this2.state.reload})}):this.editView=this.props.editpath?this.props.editpath:"",_widgetProps2.CreatePage?this.getPagePath(_widgetProps2.CreatePage).then(function(path){_this2.createView=path,_this2.setState({reload:!_this2.state.reload})}):this.createView=this.props.createpath?this.props.createpath:"",this.includeUID=_widgetProps2.ShowUID,this.isSortable=_widgetProps2.isSortable,this.showNewButton=_widgetProps2.ShowNewButton,clickPreview=_widgetProps2.ClickPreview?_widgetProps2.ClickPreview:this.props.clickpreview)try{this.clickpreview=JSON.parse(clickPreview)}catch(err){this.clickpreview=""}return this.showEditButton=_widgetProps2.ShowEditButton||this.clickpreview,this.showNewButton=this.showNewButton||this.clickpreview,pageSize=_widgetProps2.PageSize?_widgetProps2.PageSize:this.props.pagesize,this.pagesize=pageSize?parseInt(pageSize,20):this.PAGINATION_PAGE_SIZE_DEFAULT,_context2.next=34,this.processRequest();case 34:this.setState({isReady:!0});case 35:prevProps.showpreview!=this.props.showpreview&&this.setState({showDialog:this.props.showpreview});case 36:case"end":return _context2.stop()}},_callee2,this,[[5,12]])}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"getPagePath",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(pageId){var result;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,$qry.run("mmf.getSlideById",{pageId:pageId});case 2:return result=_context3.sent,_context3.abrupt("return",result?result.Path:"");case 4:case"end":return _context3.stop()}},_callee3,this)}));return function(_x3){return _ref3.apply(this,arguments)}}()},{key:"onRowSelect",value:function(evt){if(evt.target&&evt.target.name&&evt.target.name.indexOf("select-row-")>-1){var rowIndx=parseInt(evt.target.name.split("select-row-")[1]),dataRow=this.state.rows[rowIndx],widgetProps=Object.assign({},this.props.widgetProps);widgetProps.SelectRowIds=[dataRow.uid],this.props.updateStore({updates:{widgetProps:widgetProps}})}}},{key:"setFilterValue",value:function(filter){var _this3=this,result="";filter&&"object"==typeof filter&&(Array.isArray(filter)?filter.map(function(rule){var field=rule&&Object.keys(rule)&&1==Object.keys(rule).length&&Object.keys(rule)[0],operator="=",value=void 0;rule[field]&&("and"==field||"or"==field?result+=_this3.setFilterValue(rule[field])+"."+field:"object"==typeof rule[field]?(operator=Object.keys(rule[field])&&1==Object.keys(rule[field]).length&&Object.keys(rule[field])[0],(value=Object.keys(rule[field])&&1==Object.keys(rule[field]).length&&rule[field][Object.keys(rule[field])[0]])&&(value=value.replace(/%/g,"")),result+=field+""+operator+value):((value=rule[field])&&(value=value.replace(/%/g,"")),result+=field+""+operator+value))}):Object.keys(filter).map(function(filterKey){"and"!=filterKey&&"or"!=filterKey||(result+=_this3.setFilterValue(filter[filterKey])+"."+filterKey)}));return result}},{key:"editRow",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(rowData,rowId){var rowinfo,componentName,componentScope,componentProps,result,tagName,editPath,widgetProps;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(rowinfo={},rowData&&rowData.cells&&rowData.cells.length>0&&(rowData.cells.forEach(function(cell){var key=cell.id.split(":")[1];rowinfo[key]=cell.value}),rowinfo.uid=rowinfo.uid||rowId),!this.clickpreview){_context4.next=20;break}return componentName=this.clickpreview.component.Name,componentScope=this.clickpreview.component.Scope,componentProps=this.clickpreview.component.props?this.clickpreview.component.props:{},componentProps=_extends({},componentProps,{rowinfo:JSON.stringify(rowinfo)}),_context4.next=9,$qry.run("mmf.getComponentType",{Name:componentName,Scope:componentScope});case 9:if(!(result=_context4.sent)||!result.Type){_context4.next=17;break}return _context4.next=13,$ele.registerElement(componentName,componentScope,result.Type);case 13:tagName=componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),this.props.updateStore({updates:{showpreview:!0,previewcontent:{tag:tagName,props:componentProps}}}),_context4.next=18;break;case 17:this.props.addFlashMessage({title:"Info - ",subtitle:'Invalid "Add new" configuration found.'});case 18:_context4.next=21;break;case 20:this.editView&&(editPath=this.editView.replace(/(:[a-zA-Z_-]+)/g,rowId),window.history.pushState(null,"",editPath));case 21:this.props.updateStore&&((widgetProps=cloneDeep(this.props.widgetProps)).EditableRowId=rowId,widgetProps.Reload=widgetProps.Reload+""=="true",this.props.updateStore({updates:{widgetProps:widgetProps}}));case 22:case"end":return _context4.stop()}},_callee4,this)}));return function(_x4,_x5){return _ref4.apply(this,arguments)}}()},{key:"processRequest",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(){var filter,fields,fieldAliases,rawFields,inputParams,tableRows;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:filter={};try{filter=this.filter?JSON.parse(this.filter):{}}catch(err){filter={}}if(fields=[],fieldAliases={},this.fields){if(rawFields=this.fields,"string"==typeof this.fields)try{rawFields=JSON.parse(this.fields)}catch(err){rawFields=this.fields}"string"==typeof rawFields?this.fields.split(",").map(function(fieldName){fieldName&&fieldName.trim().length>0&&(fields.push(fieldName.trim()),fieldAliases[fieldName.trim()]=fieldName.trim())}):rawFields&&"object"==typeof rawFields&&(Array.isArray(rawFields)?rawFields.map(function(rawField){"string"==typeof rawField?(fields.push(rawField),fieldAliases[rawField]=rawField):"object"==typeof rawField&&(fields.push(rawField.value),fieldAliases[rawField.value]=rawField.name)}):Object.keys(rawFields).map(function(rawFieldAlias){fields.push(rawFields[rawFieldAlias]),fieldAliases[rawFieldAlias]=rawFields[rawFieldAlias]}))}return inputParams={tableName:this.tableName,fields:fields||["uid"],fieldAliases:fieldAliases,filter:filter,relationName:this.relationName,recordId:this.relatedRecord},_context5.next=8,$script.runAtServer("mmf.getRecords",inputParams);case 8:(tableRows=_context5.sent)&&!tableRows.error?this.prepareTableData(tableRows):tableRows.error&&this.setState({isTableNotValid:!0});case 10:case"end":return _context5.stop()}},_callee5,this)}));return function(){return _ref5.apply(this,arguments)}}()},{key:"prepareTableData",value:function(tableRows){if(tableRows&&tableRows.length>0){var initHead=tableRows[0].node,headers=Object.keys(initHead).map(function(key){return{key:key,header:key}});this.showEditButton&&headers.push({key:"row_actions",header:"Action(s)"});for(var rows=[],tabIn=0;tabIn<tableRows.length;tabIn++){var tableRow=tableRows[tabIn].node;tableRow.id=tabIn,rows.push(tableRow)}this.setState({isTableNotValid:!1,fieldsAreNotValid:!1,headers:headers,nonFilteredRows:rows,rows:rows,rowsSubset:rows.slice(0,this.pagesize)})}else{var _headers=this.state.headers;_headers&&this.fields&&this.fields.indexOf(",")>-1&&(_headers=this.fields.split(",").map(function(key){return{key:key.trim(),header:key.trim()}})),this.setState({isTableNotValid:!1,fieldsAreNotValid:!1,headers:_headers,rows:[],rowsSubset:[]})}}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this4=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this4.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"clearAll",value:function(){var checked=this.state.checked;this.state.rows.forEach(function(row,index){checked[index]=!!checked[index]&&!checked[index]}),this.setState({checked:checked,selectAll:!1})}},{key:"getCheckedItems",value:function(){var checkedItems=0;return this.state.checked.forEach(function(entry){entry&&checkedItems++}),checkedItems}},{key:"searchTable",value:function(evt){var newRows=[];this.state.nonFilteredRows.map(function(obj){obj.Name&&obj.Name.toUpperCase().includes(evt.currentTarget.value.toUpperCase())&&!newRows.includes(obj)&&newRows.push(obj)}),this.setState({rows:newRows,rowsSubset:newRows.slice(0,this.pagesize)})}},{key:"batchActionClick",value:function(){}},{key:"getDataTableTemplate",value:function(){var _this5=this,self=this,tableName=(this.getCheckedItems(),classNames({"bx--data-table-v2":!0,"bx--data-table-v2--zebra":this.props.zebra}),this.props.isSelectable,this.tableName);tableName=tableName&&tableName.indexOf("_")>-1?tableName.split("_").slice(0,tableName.split("_").length-1).join("_"):tableName;this.title&&this.title;var headers=this.state.headers;this.state.rowsSubset;1!=this.includeUID&&(headers=headers.filter(function(header,indx){return"uid"!=header.key}));var listFilter=this.props.widgetProps&&("true"==this.props.widgetProps.HideFilter||1==this.props.widgetProps.HideFilter)?null:React.createElement("div",null,React.createElement("div",{style:{cursor:"pointer",textAlign:"left",fontWeight:"larger",color:"blue"},onClick:function(e){_this5.props.updateStore&&_this5.props.updateStore({updates:{showFilter:!_this5.props.showFilter}})}},React.createElement(Filter32,null),this.state.appliedFilter?React.createElement("span",{className:"srs-filter-value"},this.state.appliedFilter):null),this.props.showFilter?React.createElement("div",{style:{cursor:"pointer",minHeight:"10rem",display:"flex",width:"100%",maxHeight:"30rem",overflow:"hidden",backgroundColor:"rgb(243, 243, 243)"}},React.createElement("srs-filter",{resultkey:this.props.widgetid,tableName:this.tableName,style:{width:"100vw",overflow:"scroll"}})):null),extraOptions={useZebraStyles:!0,size:"compact",stickyHeader:!0};this.isSortable&&(extraOptions.isSortable=!0),this.props.widgetProps&&this.props.widgetProps.ShowRadioButton+""=="true"&&(extraOptions.radio=!0),this.props.widgetProps&&this.props.widgetProps.Size&&(extraOptions.size=this.props.widgetProps.Size),this.props.widgetProps&&this.props.widgetProps.StickyHeader&&(extraOptions.stickyHeader=this.props.widgetProps.StickyHeader+""=="true");var EditBtn=this.state.editBtn;return React.createElement("div",null,listFilter,React.createElement(DataTable,_extends({},extraOptions,{rows:this.state.rowsSubset,headers:headers,render:function(_ref6){var _ref7,rows=_ref6.rows,headers=_ref6.headers,getHeaderProps=_ref6.getHeaderProps,getTableProps=(_ref6.getRowProps,_ref6.getTableProps),getSelectionProps=(_ref6.getTableContainerProps,_ref6.getSelectionProps),getBatchActionProps=_ref6.getBatchActionProps,selectedRows=(_ref6.onInputChange,_ref6.selectedRows);return React.createElement(TableContainer,null,React.createElement(TableToolbar,null,React.createElement(TableBatchActions,getBatchActionProps(),React.createElement(TableBatchAction,{onClick:_this5.batchActionClick(selectedRows)},"Export"),React.createElement(TableBatchAction,{onClick:_this5.batchActionClick(selectedRows)},"Delete")),React.createElement(TableToolbarContent,null,React.createElement(TableToolbarSearch,{onChange:_this5.searchTable}),_this5.showNewButton?React.createElement(Button,{size:"small",kind:"primary",onClick:(_ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(e){var componentName,componentScope,componentProps,result,tagName,widgetProps;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(!_this5.clickpreview){_context6.next=17;break}return componentName=_this5.clickpreview.component.Name,componentScope=_this5.clickpreview.component.Scope,componentProps=_this5.clickpreview.component.props?_this5.clickpreview.component.props:{},_context6.next=6,$qry.run("mmf.getComponentType",{Name:componentName,Scope:componentScope});case 6:if(!(result=_context6.sent)||!result.Type){_context6.next=14;break}return _context6.next=10,$ele.registerElement(componentName,componentScope,result.Type);case 10:tagName=componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),_this5.props.updateStore({updates:{showpreview:!0,previewcontent:{tag:tagName,props:componentProps}}}),_context6.next=15;break;case 14:_this5.props.addFlashMessage({title:"Info - ",subtitle:'Invalid "Add new" configuration found.'});case 15:_context6.next=18;break;case 17:_this5.createView&&window.history.pushState(null,"",_this5.createView);case 18:_this5.props.updateStore&&((widgetProps=Object.assign({},_this5.props.widgetProps)).EditableRowId=-1,widgetProps.Reload=widgetProps.Reload+""=="true",_this5.props.updateStore({updates:{widgetProps:widgetProps}}));case 19:case"end":return _context6.stop()}},_callee6,_this5)})),function(_x6){return _ref7.apply(this,arguments)})},"Add new"):React.createElement("div",null))),React.createElement(Table,getTableProps(),!_this5.props.widgetProps||_this5.props.widgetProps&&(_this5.props.widgetProps.ShowHeader+""=="true"||_this5.props.widgetProps.ShowHeader+""=="1")?React.createElement(TableHead,null,React.createElement(TableRow,null,_this5.props.widgetProps&&_this5.props.widgetProps.ShowRadioButton+""!="true"?React.createElement(TableSelectAll,getSelectionProps()):null,rows&&rows.length>0?headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}):null)):null,React.createElement(TableBody,null,0==rows.length?React.createElement(TableRow,{key:"no_data",className:"no_data_found"},React.createElement(TableCell,{className:"no_data_found_td",colSpan:"100",key:"no_data"},"No data")):rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row,onClick:_this5.onRowSelect})),row.cells.map(function(cell,indx){return cell.id.indexOf("row_actions")>-1&&_this5.showEditButton?React.createElement(TableCell,{key:"row_actions"},React.createElement(EditBtn,{style:{cursor:"pointer"},onClick:function(){var rowId="",rowIndx=cell.id.indexOf(":")>-1?parseInt(cell.id.split(":")[0]):-1;(rowIndx=rowIndx>self.pagesize?rowIndx%self.pagesize:rowIndx)>-1&&self.state.rowsSubset&&self.state.rowsSubset[rowIndx]&&(rowId=self.state.rowsSubset[rowIndx].uid),_this5.editRow(row,rowId)}})):React.createElement(TableCell,{key:cell.id},0==indx?React.createElement(Link,{style:{cursor:"pointer"},onClick:function(e){var rowId="",rowIndx=cell.id.indexOf(":")>-1?parseInt(cell.id.split(":")[0]):-1;(rowIndx=rowIndx>self.pagesize?rowIndx%self.pagesize:rowIndx)>-1&&self.state.rowsSubset&&self.state.rowsSubset[rowIndx]&&(rowId=self.state.rowsSubset[rowIndx].uid),_this5.editRow(row,rowId)}},cell.value):cell.value)}))}))),React.createElement(Pagination,{totalItems:_this5.state.rows.length,pageSize:_this5.pagesize,pageSizes:_this5.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this5.handlePaginationChange.bind(_this5)}))}})))}},{key:"render",value:function(){var _this6=this;if(this.state.isReady){var previewComponent=null;if(this.state.showDialog&&this.props.previewcontent&&this.props.previewcontent.tag){var previewItem=React.createElement(this.props.previewcontent.tag,this.props.previewcontent.props),salt=Math.random().toString(36).substring(7);previewComponent=React.createElement("preview-component",{key:"actionform"+salt},previewItem)}var template=null;if(this.relationName){if(!this.props.schema||0==Object.keys(this.props.schema).length)return React.createElement("div",null,"Loading...");var matchingRelationship=this.props.schema.fields.filter(function(field){return field.parent==_this6.tableName&&field.text==_this6.relationName&&"one2many"==field.type});matchingRelationship&&0!=matchingRelationship.length||(template=React.createElement("div",{className:""},"Please provide a valid table/relationship."))}return template=this.state.isTableNotValid?React.createElement("div",{className:""},"Please provide a valid table."):this.state.fieldsAreNotValid?React.createElement("div",{className:""},"Please provide valid fields."):this.getDataTableTemplate(),React.createElement("div",{className:this.state.rows&&0!=this.state.rows.length?"":"NoData",style:{padding:5,overflowX:"auto",backgroundColor:"#f3f3f3",height:"inherit"}},previewComponent,template)}return React.createElement(DataTableSkeleton,{style:{backgroundColor:"#f3f3f3",height:"inherit"}})}}]),_ListLayout}(React.Component),_export("ListLayout",ListLayout=function(props){return _ListLayout}),_export("ListLayout",ListLayout)}}}),System.register("component/mmf/LoginPage.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,Button,Link,_Login,LoginPage,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.PasswordInput,Button=_carbonComponentsReact.Button,Link=_carbonComponentsReact.Link}],execute:function(){_Login=function(_React$Component){function _Login(props){_classCallCheck(this,_Login);var _this=_possibleConstructorReturn(this,(_Login.__proto__||Object.getPrototypeOf(_Login)).call(this,props));return _this.login=_this.login.bind(_this),_this.changeRoute=_this.changeRoute.bind(_this),_this.state={email:"",pwd:"",valid:!0,error:""},_this}return _inherits(_Login,_React$Component),_createClass(_Login,[{key:"login",value:function(){var _this2=this,email=this.state.email,password=this.state.pwd;if(email&&password){var loginObj={};loginObj.email=email,loginObj.password=password,fetch("/verifylogin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(loginObj)}).then(function(response){return response.json()}).then(function(myJson){myJson&&"success"==myJson.message?(location.href="/workmania/apps-board",_this2.props.updateStore({updates:{loggedIn:!0}})):_this2.setState({valid:!1,error:myJson.message})})}else this.setState({valid:!1,error:"All fields are required."})}},{key:"changeRoute",value:function(data){data&&data.id&&(document.cookie="accessToken = "+data.id,location.href="/ide")}},{key:"updateInputValue",value:function(evt){"password"==evt.target.name?this.setState({pwd:evt.target.value}):this.setState({email:evt.target.value})}},{key:"enterPressed",value:function(event){13===(event.keyCode||event.which)&&this.login()}},{key:"render",value:function(){var _this3=this,errorMsg=this.state.valid?null:React.createElement("p",{className:"erMsg"},this.state.error);return React.createElement("div",{className:"loginComp"},React.createElement("div",{className:"leftContainer"},React.createElement("img",{src:"/resources/logo.gif",alt:"SrsteeImage"})),React.createElement("div",{className:"rightContainer"},React.createElement("div",{className:"container"},errorMsg,React.createElement(TextInput,{className:"login-username",defaultValue:"",name:"username",labelText:"Email",onChange:function(evt){return _this3.updateInputValue(evt)},placeholder:"Email",type:"text"}),React.createElement(TextInput,{className:"login-password",defaultValue:"",name:"password",labelText:"Password",onChange:function(evt){return _this3.updateInputValue(evt)},placeholder:"Password",type:"password",onKeyPress:this.enterPressed.bind(this)}),React.createElement("div",{className:"login-actions"},React.createElement(Button,{className:"btn-cls",onClick:this.login},"Login"),React.createElement(Link,{className:"register",href:"/register"},"Register")))))}}]),_Login}(React.Component),_export("LoginPage",LoginPage=function(props){return _Login}),_export("LoginPage",LoginPage),_export("default",LoginPage),_export("states",states=[{KeyName:"loggedIn",AccessPath:"loggedIn",DefaultValue:'{"loggedIn":false}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/LoginPage/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,Button,Link,_Login,LoginPage;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.PasswordInput,Button=_carbonComponentsReact.Button,Link=_carbonComponentsReact.Link}],execute:function(){_Login=function(_React$Component){function _Login(props){_classCallCheck(this,_Login);var _this=_possibleConstructorReturn(this,(_Login.__proto__||Object.getPrototypeOf(_Login)).call(this,props));return _this.login=_this.login.bind(_this),_this.changeRoute=_this.changeRoute.bind(_this),_this.state={email:"",pwd:"",valid:!0,error:""},_this}return _inherits(_Login,_React$Component),_createClass(_Login,[{key:"login",value:function(){var _this2=this,email=this.state.email,password=this.state.pwd;if(email&&password){var loginObj={};loginObj.email=email,loginObj.password=password,fetch("/verifylogin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(loginObj)}).then(function(response){return response.json()}).then(function(myJson){myJson&&"success"==myJson.message?(location.href="/workmania/apps-board",_this2.props.updateStore({updates:{loggedIn:!0}})):_this2.setState({valid:!1,error:myJson.message})})}else this.setState({valid:!1,error:"All fields are required."})}},{key:"changeRoute",value:function(data){data&&data.id&&(document.cookie="accessToken = "+data.id,location.href="/ide")}},{key:"updateInputValue",value:function(evt){"password"==evt.target.name?this.setState({pwd:evt.target.value}):this.setState({email:evt.target.value})}},{key:"enterPressed",value:function(event){13===(event.keyCode||event.which)&&this.login()}},{key:"render",value:function(){var _this3=this,errorMsg=this.state.valid?null:React.createElement("p",{className:"erMsg"},this.state.error);return React.createElement("div",{className:"loginComp"},React.createElement("div",{className:"leftContainer"},React.createElement("img",{src:"/resources/logo.gif",alt:"SrsteeImage"})),React.createElement("div",{className:"rightContainer"},React.createElement("div",{className:"container"},errorMsg,React.createElement(TextInput,{className:"login-username",defaultValue:"",name:"username",labelText:"Email",onChange:function(evt){return _this3.updateInputValue(evt)},placeholder:"Email",type:"text"}),React.createElement(TextInput,{className:"login-password",defaultValue:"",name:"password",labelText:"Password",onChange:function(evt){return _this3.updateInputValue(evt)},placeholder:"Password",type:"password",onKeyPress:this.enterPressed.bind(this)}),React.createElement("div",{className:"login-actions"},React.createElement(Button,{className:"btn-cls",onClick:this.login},"Login"),React.createElement(Link,{className:"register",href:"/register"},"Register")))))}}]),_Login}(React.Component),_export("LoginPage",LoginPage=function(props){return _Login}),_export("LoginPage",LoginPage)}}}),System.register("component/mmf/MMF_API.js",[],function(_export,_context){"use strict";var MMFAPI,states,actions;return{setters:[],execute:function(){_export("MMFAPI",MMFAPI=function(){return{searchAndWait:function(model,query){var url="/api/t1/"+model+"?filter="+query;return console.log("url = "+url),fetch(url,{accept:"application/json"})},search:function(model,query,cb){var url="/api/t1/"+model+"?filter="+query;return console.log("url = "+url),fetch(url,{accept:"application/json"}).then(this.checkStatus).then(this.parseJSON).then(cb)},checkStatus:function(response){if(response.status>=200&&response.status<300)return response;var error=new Error("HTTP Error "+response.statusText);throw error.status=response.statusText,error.response=response,console.log(error),error},parseJSON:function(response){return console.log(response),response.json()}}}),_export("MMFAPI",MMFAPI),_export("default",MMF_API),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/MMF_API/Definition.js",[],function(_export,_context){"use strict";var MMFAPI;return{setters:[],execute:function(){_export("MMFAPI",MMFAPI=function(){return{searchAndWait:function(model,query){var url="/api/t1/"+model+"?filter="+query;return console.log("url = "+url),fetch(url,{accept:"application/json"})},search:function(model,query,cb){var url="/api/t1/"+model+"?filter="+query;return console.log("url = "+url),fetch(url,{accept:"application/json"}).then(this.checkStatus).then(this.parseJSON).then(cb)},checkStatus:function(response){if(response.status>=200&&response.status<300)return response;var error=new Error("HTTP Error "+response.statusText);throw error.status=response.statusText,error.response=response,console.log(error),error},parseJSON:function(response){return console.log(response),response.json()}}}),_export("MMFAPI",MMFAPI)}}}),System.register("component/mmf/Navigator.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-treebeard"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Treebeard,defaultData,_Navigator,navigatorTheme,animations,Navigator,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactTreebeard){Treebeard=_reactTreebeard.Treebeard}],execute:function(){defaultData={name:"Srste",toggled:!0,children:[{name:"Client",children:[{name:"Groups1",children:[{name:"Omni",children:[{name:"Components",children:[{name:"Definitions",children:[]},{name:"State",children:[]},{name:"Actions",children:[]}]},{name:"Instances",children:[]},{name:"Reusable Scripts",children:[]}]}]}]},{name:"Server",children:[{name:"Models",children:[{name:"Groups",children:[{name:"Student"}]}]},{name:"Operation Hooks",children:[{name:"Model",children:[]}]},{name:"Reusable Scripts",children:[{name:"Groups",children:[{name:"Omni",children:{name:"Script1"}}]}]}]}]},_Navigator=function(_React$Component){function _Navigator(props,context){_classCallCheck(this,_Navigator);var _this=_possibleConstructorReturn(this,(_Navigator.__proto__||Object.getPrototypeOf(_Navigator)).call(this,props,context));return _this.state={data:_this.props.data?_this.props.data:defaultData,navigatorTheme:_this.props.navigatorTheme?_this.props.navigatorTheme:navigatorTheme,animations:_this.props.animations?_this.props.animations:animations,onToggle:_this.props.onToggle?_this.props.onToggle:_this.onToggleSelf.bind(_this)},_this}return _inherits(_Navigator,_React$Component),_createClass(_Navigator,[{key:"componentWillReceiveProps",value:function(nextProps){this.setState({data:nextProps.data})}},{key:"onToggleSelf",value:function(node,toggled){var cursor=this.state.cursor;cursor&&(cursor.active=!1),node.active=!0,node.children&&(node.toggled=toggled),this.props.postToggle&&this.props.postToggle(node,this.state.data),this.setState({cursor:node}),this.props.handleClick&&this.props.handleClick(node)}},{key:"handleClick",value:function(e){console.log(e.target.value)}},{key:"render",value:function(){return React.createElement(Treebeard,{style:this.state.navigatorTheme,animations:this.state.animations,data:this.state.data,onToggle:this.state.onToggle})}}]),_Navigator}(React.Component),navigatorTheme={tree:{base:{listStyle:"none",backgroundColor:"white",margin:0,padding:0,color:"darksalmon",fontFamily:"lucida grande ,tahoma,verdana,arial,sans-serif",fontSize:"14px"},node:{base:{position:"relative"},link:{cursor:"pointer",position:"relative",padding:"0px 5px",display:"block"},activeLink:{background:"#26a599"},toggle:{base:{position:"relative",display:"inline-block",verticalAlign:"top",marginLeft:"-5px",height:"24px",width:"24px"},wrapper:{position:"absolute",top:"50%",left:"50%",margin:"-7px 0 0 -7px",height:"14px"},height:14,width:14,arrow:{fill:"black",strokeWidth:0}},header:{base:{display:"inline-block",verticalAlign:"top",color:"black"},connector:{width:"2px",height:"12px",borderLeft:"solid 2px black",borderBottom:"solid 2px black",position:"absolute",top:"0px",left:"-21px"},title:{lineHeight:"24px",verticalAlign:"middle"}},subtree:{listStyle:"none",paddingLeft:"19px"},loading:{color:"#E2C089"}}}},animations={toggle:function(_ref){return{animation:{rotateZ:_ref.node.toggled?90:0},duration:100}},drawer:function(){return{enter:{animation:"slideDown",duration:100},leave:{animation:"slideUp",duration:100}}}},_export("Navigator",Navigator=function(props){return _Navigator}),_export("Navigator",Navigator),_export("default",Navigator),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/Navigator/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-treebeard"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Treebeard,defaultData,_Navigator,navigatorTheme,animations,Navigator;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactTreebeard){Treebeard=_reactTreebeard.Treebeard}],execute:function(){defaultData={name:"Srste",toggled:!0,children:[{name:"Client",children:[{name:"Groups1",children:[{name:"Omni",children:[{name:"Components",children:[{name:"Definitions",children:[]},{name:"State",children:[]},{name:"Actions",children:[]}]},{name:"Instances",children:[]},{name:"Reusable Scripts",children:[]}]}]}]},{name:"Server",children:[{name:"Models",children:[{name:"Groups",children:[{name:"Student"}]}]},{name:"Operation Hooks",children:[{name:"Model",children:[]}]},{name:"Reusable Scripts",children:[{name:"Groups",children:[{name:"Omni",children:{name:"Script1"}}]}]}]}]},_Navigator=function(_React$Component){function _Navigator(props,context){_classCallCheck(this,_Navigator);var _this=_possibleConstructorReturn(this,(_Navigator.__proto__||Object.getPrototypeOf(_Navigator)).call(this,props,context));return _this.state={data:_this.props.data?_this.props.data:defaultData,navigatorTheme:_this.props.navigatorTheme?_this.props.navigatorTheme:navigatorTheme,animations:_this.props.animations?_this.props.animations:animations,onToggle:_this.props.onToggle?_this.props.onToggle:_this.onToggleSelf.bind(_this)},_this}return _inherits(_Navigator,_React$Component),_createClass(_Navigator,[{key:"componentWillReceiveProps",value:function(nextProps){this.setState({data:nextProps.data})}},{key:"onToggleSelf",value:function(node,toggled){var cursor=this.state.cursor;cursor&&(cursor.active=!1),node.active=!0,node.children&&(node.toggled=toggled),this.props.postToggle&&this.props.postToggle(node,this.state.data),this.setState({cursor:node}),this.props.handleClick&&this.props.handleClick(node)}},{key:"handleClick",value:function(e){console.log(e.target.value)}},{key:"render",value:function(){return React.createElement(Treebeard,{style:this.state.navigatorTheme,animations:this.state.animations,data:this.state.data,onToggle:this.state.onToggle})}}]),_Navigator}(React.Component),navigatorTheme={tree:{base:{listStyle:"none",backgroundColor:"white",margin:0,padding:0,color:"darksalmon",fontFamily:"lucida grande ,tahoma,verdana,arial,sans-serif",fontSize:"14px"},node:{base:{position:"relative"},link:{cursor:"pointer",position:"relative",padding:"0px 5px",display:"block"},activeLink:{background:"#26a599"},toggle:{base:{position:"relative",display:"inline-block",verticalAlign:"top",marginLeft:"-5px",height:"24px",width:"24px"},wrapper:{position:"absolute",top:"50%",left:"50%",margin:"-7px 0 0 -7px",height:"14px"},height:14,width:14,arrow:{fill:"black",strokeWidth:0}},header:{base:{display:"inline-block",verticalAlign:"top",color:"black"},connector:{width:"2px",height:"12px",borderLeft:"solid 2px black",borderBottom:"solid 2px black",position:"absolute",top:"0px",left:"-21px"},title:{lineHeight:"24px",verticalAlign:"middle"}},subtree:{listStyle:"none",paddingLeft:"19px"},loading:{color:"#E2C089"}}}},animations={toggle:function(_ref){return{animation:{rotateZ:_ref.node.toggled?90:0},duration:100}},drawer:function(){return{enter:{animation:"slideDown",duration:100},leave:{animation:"slideUp",duration:100}}}},_export("Navigator",Navigator=function(props){return _Navigator}),_export("Navigator",Navigator)}}}),System.register("component/mmf/NewAction.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/persist/MMFAPI.js","react-codemirror","codemirror/mode/javascript/javascript","codemirror/mode/xml/xml","codemirror/mode/markdown/markdown","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,CodeMirror,Select,SelectItem,Button,TextInput,_NewAction,NewAction,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_reactCodemirror){CodeMirror=_reactCodemirror.default},function(_codemirrorModeJavascriptJavascript){},function(_codemirrorModeXmlXml){},function(_codemirrorModeMarkdownMarkdown){},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewAction=function(_React$Component){function _NewAction(props){_classCallCheck(this,_NewAction);var _this=_possibleConstructorReturn(this,(_NewAction.__proto__||Object.getPrototypeOf(_NewAction)).call(this,props));_this.editorOptions={mode:"javascript",theme:"material-darker",width:"70%",height:"350px",styleActiveLine:!0,lineNumbers:!1,autofocus:!0,lineWrapping:!0};var record=_this.props.record?JSON.parse(_this.props.record):{};return _this.state={ComponentId:_this.props.component_id,ComponentName:"Unnamed"==_this.props.component_name?"":_this.props.component_name,Components:{},ComponentNames:[],actionDefinitionEditor:{width:.6*screen.width,height:"270",code:record.Definition?record.Definition:"(function(payload, input) {\n //payload is the copy of the state \n //input is the object sent by the caller.\n return payload;\n})\n"},Action:record.Action,Definition:record.Definition,file_id:record.uid,componentData:record,reload:!1},_this.topElement=React.createRef(),_this.loadComponents=_this.loadComponents.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.editorContent=null,_this.actionDefinitionEditorDidMount=_this.actionDefinitionEditorDidMount.bind(_this),_this.resetEditor=null,_this.close=_this.close.bind(_this),_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this.buttonInlineStyle={top:80,right:"10%",position:"absolute"},_this}return _inherits(_NewAction,_React$Component),_createClass(_NewAction,[{key:"componentDidMount",value:function(){var _this2=this;this.refs.editor&&this.refs.editor.getCodeMirror().setValue(this.state.actionDefinitionEditor.code),setTimeout(function(){_this2.refs.editor&&_this2.refs.editor.getCodeMirror().refresh()})}},{key:"componentDidUpdate",value:function(prevProps){if(prevProps.record!=this.props.record){var record=this.props.record?JSON.parse(this.props.record):{};this.setState({ComponentId:this.props.component_id,ComponentName:"Unnamed"==this.props.component_name?"":this.props.component_name,Components:{},ComponentNames:[],actionDefinitionEditor:{width:.6*screen.width,height:"270",code:record.Definition?record.Definition:"(function(payload, input) {\n //payload is the copy of the state \n //input is the object sent by the caller.\n return payload;\n})\n"},Action:record.Action,Definition:record.Definition,file_id:record.uid,componentData:record,reload:!1})}}},{key:"actionDefinitionEditorDidMount",value:function(editor,monaco){var self=this,saveEditorValue=editor.setValue.bind(editor);editor.setValue=function(val){saveEditorValue(val),self.state.actionDefinitionEditor?(editor.setPosition(self.state.actionDefinitionEditor.position),editor.revealLine(self.state.actionDefinitionEditor.position.lineNumber),editor.revealLineInCenter(self.state.actionDefinitionEditor.position.lineNumber)):(editor.setPosition({lineNumber:1,column:1}),editor.revealLine(1),editor.revealLineInCenter(15)),editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(editor._themeService._styleElement),editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"codeChanged",value:function(newValue,e){var editor=this.state.actionDefinitionEditor;editor.code=newValue,this.setState({actionDefinitionEditor:editor})}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponent",["uid","Name","Scope"],null,function(results){var componentIdByLabel={},componentList=[];results&&(results.forEach(function(componentObj,indx){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;componentIdByLabel[componentLabel]=componentId,componentList.push({id:componentId,Label:componentLabel}),componentList=componentList.sort(function(a,b){return a.Label.localeCompare(b.Label)})}),Object.keys(componentIdByLabel).length>0&&self.setState({componentIdByLabel:componentIdByLabel,componentList:componentList,componentLoaded:!0}))})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Action:"",Defintion:"",ComponentId:"",ComponentName:""})}},{key:"close",value:function(){this.setState({isClosed:!0})}},{key:"saveAsNewData",value:function(e){var _this3=this;e.stopPropagation();var data={Action:this.state.Action,Definition:this.state.actionDefinitionEditor.code,ActionComponent:this.state.ComponentId};MMFAPI().createRecord("MetaComponentAction",data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"New action "+_this3.state.Action+" created!"})})}},{key:"saveData",value:function(e){var _this4=this;e.stopPropagation();var data={Action:this.state.Action,Definition:this.state.actionDefinitionEditor.code,ActionComponent:this.state.ComponentId};this.state.file_id?MMFAPI().updateRecord("MetaComponentAction",this.state.file_id,data,["uid"],function(result){_this4.props.updateStore&&_this4.props.addFlashMessage({title:"Success - ",subtitle:_this4.state.Action+" updated!"})}):MMFAPI().createRecord("MetaComponentAction",data,["uid"],function(result){_this4.setState({file_id:result.uid}),_this4.props.updateStore&&_this4.props.addFlashMessage({title:"Success - ",subtitle:_this4.state.Action+" created!"})})}},{key:"render",value:function(){var _this5=this;if(!(this.state.componentLoaded||this.props.component_id&&-1!=this.props.component_id))return this.loadComponents(),null;var file_id=this.state.file_id||this.state.componentData&&this.state.componentData.uid,uidField=file_id?React.createElement("div",{className:"sr-field-id",style:{width:"50%",marginLeft:10}},React.createElement(TextInput,{labelText:"uid",required:"required",value:file_id,readOnly:!0})):uidField,componentName=null;componentName="object"==typeof this.state.ComponentName?this.state.ComponentName.text:this.state.ComponentName;var componentSelectItems=[];return this.state.componentList&&this.state.componentList.map(function(componentItem){return componentSelectItems.push(React.createElement(SelectItem,{value:componentItem.id,text:componentItem.Label}))}),this.state.isClosed?null:React.createElement("div",{ref:this.topElement,style:this.props.inline?{padding:40,border:"1px solid #bfbfbf",margin:10,borderRadius:10}:{height:"inherit",overflow:"hidden"}},React.createElement("style",null,'@import url("/thirdpartylib/codemirror.css");'),React.createElement("h4",{className:"sr-action-header"},"Action - Form"),React.createElement("div",{className:"sr-action-alias",style:{display:"inline-flex",width:"80%",marginBottom:10}},React.createElement(TextInput,{placeholder:"Enter action name...",onChange:function(e){return _this5.onChange(e,"Action")},labelText:"Name",required:"required",value:this.state.Action}),uidField),React.createElement("div",{className:"sr-action-combo"},componentName?React.createElement("div",{className:"sr-comp-chose-dis",style:{width:"50%",marginBottom:10}},React.createElement(TextInput,{label:"Choose the component....",value:componentName,readOnly:!0})):React.createElement(Select,{labelText:"Component",onChange:function(e){var value=e.target.value;_this5.setState({ComponentId:value})},placeholder:"Choose the component...",value:this.state.ComponentId,id:"selectfield",defaultValue:this.state.componentList[0].id},componentSelectItems)),React.createElement("div",{style:{marginBottom:"2%",width:"70%",clear:"both"}},React.createElement(CodeMirror,{ref:"editor",value:this.state.actionDefinitionEditor.code,onChange:this.codeChanged,options:this.editorOptions,autoFocus:!0})),React.createElement("div",{style:this.props.inline?this.buttonInlineStyle:this.buttonStyle},React.createElement(Button,{waves:"light",size:"small",onClick:this.saveData},"Save"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:this.saveAsNewData},"Save As"),this.props.inline?React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this5.close()}},"Close"):React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this5.resetData()}},"Reset")))}}]),_NewAction}(React.Component),_export("NewAction",NewAction=function(props){return _NewAction}),_export("NewAction",NewAction),_export("default",NewAction),_export("states",states=[{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"ide_reload",AccessPath:"ide_reload",DefaultValue:'{"ide_reload": false}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/NewAction/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/persist/MMFAPI.js","react-codemirror","codemirror/mode/javascript/javascript","codemirror/mode/xml/xml","codemirror/mode/markdown/markdown","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,CodeMirror,Select,SelectItem,Button,TextInput,_NewAction,NewAction;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_reactCodemirror){CodeMirror=_reactCodemirror.default},function(_codemirrorModeJavascriptJavascript){},function(_codemirrorModeXmlXml){},function(_codemirrorModeMarkdownMarkdown){},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewAction=function(_React$Component){function _NewAction(props){_classCallCheck(this,_NewAction);var _this=_possibleConstructorReturn(this,(_NewAction.__proto__||Object.getPrototypeOf(_NewAction)).call(this,props));_this.editorOptions={mode:"javascript",theme:"material-darker",width:"70%",height:"350px",styleActiveLine:!0,lineNumbers:!1,autofocus:!0,lineWrapping:!0};var record=_this.props.record?JSON.parse(_this.props.record):{};return _this.state={ComponentId:_this.props.component_id,ComponentName:"Unnamed"==_this.props.component_name?"":_this.props.component_name,Components:{},ComponentNames:[],actionDefinitionEditor:{width:.6*screen.width,height:"270",code:record.Definition?record.Definition:"(function(payload, input) {\n //payload is the copy of the state \n //input is the object sent by the caller.\n return payload;\n})\n"},Action:record.Action,Definition:record.Definition,file_id:record.uid,componentData:record,reload:!1},_this.topElement=React.createRef(),_this.loadComponents=_this.loadComponents.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.editorContent=null,_this.actionDefinitionEditorDidMount=_this.actionDefinitionEditorDidMount.bind(_this),_this.resetEditor=null,_this.close=_this.close.bind(_this),_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this.buttonInlineStyle={top:80,right:"10%",position:"absolute"},_this}return _inherits(_NewAction,_React$Component),_createClass(_NewAction,[{key:"componentDidMount",value:function(){var _this2=this;this.refs.editor&&this.refs.editor.getCodeMirror().setValue(this.state.actionDefinitionEditor.code),setTimeout(function(){_this2.refs.editor&&_this2.refs.editor.getCodeMirror().refresh()})}},{key:"componentDidUpdate",value:function(prevProps){if(prevProps.record!=this.props.record){var record=this.props.record?JSON.parse(this.props.record):{};this.setState({ComponentId:this.props.component_id,ComponentName:"Unnamed"==this.props.component_name?"":this.props.component_name,Components:{},ComponentNames:[],actionDefinitionEditor:{width:.6*screen.width,height:"270",code:record.Definition?record.Definition:"(function(payload, input) {\n //payload is the copy of the state \n //input is the object sent by the caller.\n return payload;\n})\n"},Action:record.Action,Definition:record.Definition,file_id:record.uid,componentData:record,reload:!1})}}},{key:"actionDefinitionEditorDidMount",value:function(editor,monaco){var self=this,saveEditorValue=editor.setValue.bind(editor);editor.setValue=function(val){saveEditorValue(val),self.state.actionDefinitionEditor?(editor.setPosition(self.state.actionDefinitionEditor.position),editor.revealLine(self.state.actionDefinitionEditor.position.lineNumber),editor.revealLineInCenter(self.state.actionDefinitionEditor.position.lineNumber)):(editor.setPosition({lineNumber:1,column:1}),editor.revealLine(1),editor.revealLineInCenter(15)),editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(editor._themeService._styleElement),editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"codeChanged",value:function(newValue,e){var editor=this.state.actionDefinitionEditor;editor.code=newValue,this.setState({actionDefinitionEditor:editor})}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponent",["uid","Name","Scope"],null,function(results){var componentIdByLabel={},componentList=[];results&&(results.forEach(function(componentObj,indx){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;componentIdByLabel[componentLabel]=componentId,componentList.push({id:componentId,Label:componentLabel}),componentList=componentList.sort(function(a,b){return a.Label.localeCompare(b.Label)})}),Object.keys(componentIdByLabel).length>0&&self.setState({componentIdByLabel:componentIdByLabel,componentList:componentList,componentLoaded:!0}))})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Action:"",Defintion:"",ComponentId:"",ComponentName:""})}},{key:"close",value:function(){this.setState({isClosed:!0})}},{key:"saveAsNewData",value:function(e){var _this3=this;e.stopPropagation();var data={Action:this.state.Action,Definition:this.state.actionDefinitionEditor.code,ActionComponent:this.state.ComponentId};MMFAPI().createRecord("MetaComponentAction",data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"New action "+_this3.state.Action+" created!"})})}},{key:"saveData",value:function(e){var _this4=this;e.stopPropagation();var data={Action:this.state.Action,Definition:this.state.actionDefinitionEditor.code,ActionComponent:this.state.ComponentId};this.state.file_id?MMFAPI().updateRecord("MetaComponentAction",this.state.file_id,data,["uid"],function(result){_this4.props.updateStore&&_this4.props.addFlashMessage({title:"Success - ",subtitle:_this4.state.Action+" updated!"})}):MMFAPI().createRecord("MetaComponentAction",data,["uid"],function(result){_this4.setState({file_id:result.uid}),_this4.props.updateStore&&_this4.props.addFlashMessage({title:"Success - ",subtitle:_this4.state.Action+" created!"})})}},{key:"render",value:function(){var _this5=this;if(!(this.state.componentLoaded||this.props.component_id&&-1!=this.props.component_id))return this.loadComponents(),null;var file_id=this.state.file_id||this.state.componentData&&this.state.componentData.uid,uidField=file_id?React.createElement("div",{className:"sr-field-id",style:{width:"50%",marginLeft:10}},React.createElement(TextInput,{labelText:"uid",required:"required",value:file_id,readOnly:!0})):uidField,componentName=null;componentName="object"==typeof this.state.ComponentName?this.state.ComponentName.text:this.state.ComponentName;var componentSelectItems=[];return this.state.componentList&&this.state.componentList.map(function(componentItem){return componentSelectItems.push(React.createElement(SelectItem,{value:componentItem.id,text:componentItem.Label}))}),this.state.isClosed?null:React.createElement("div",{ref:this.topElement,style:this.props.inline?{padding:40,border:"1px solid #bfbfbf",margin:10,borderRadius:10}:{height:"inherit",overflow:"hidden"}},React.createElement("style",null,'@import url("/thirdpartylib/codemirror.css");'),React.createElement("h4",{className:"sr-action-header"},"Action - Form"),React.createElement("div",{className:"sr-action-alias",style:{display:"inline-flex",width:"80%",marginBottom:10}},React.createElement(TextInput,{placeholder:"Enter action name...",onChange:function(e){return _this5.onChange(e,"Action")},labelText:"Name",required:"required",value:this.state.Action}),uidField),React.createElement("div",{className:"sr-action-combo"},componentName?React.createElement("div",{className:"sr-comp-chose-dis",style:{width:"50%",marginBottom:10}},React.createElement(TextInput,{label:"Choose the component....",value:componentName,readOnly:!0})):React.createElement(Select,{labelText:"Component",onChange:function(e){var value=e.target.value;_this5.setState({ComponentId:value})},placeholder:"Choose the component...",value:this.state.ComponentId,id:"selectfield",defaultValue:this.state.componentList[0].id},componentSelectItems)),React.createElement("div",{style:{marginBottom:"2%",width:"70%",clear:"both"}},React.createElement(CodeMirror,{ref:"editor",value:this.state.actionDefinitionEditor.code,onChange:this.codeChanged,options:this.editorOptions,autoFocus:!0})),React.createElement("div",{style:this.props.inline?this.buttonInlineStyle:this.buttonStyle},React.createElement(Button,{waves:"light",size:"small",onClick:this.saveData},"Save"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:this.saveAsNewData},"Save As"),this.props.inline?React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this5.close()}},"Close"):React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this5.resetData()}},"Reset")))}}]),_NewAction}(React.Component),_export("NewAction",NewAction=function(props){return _NewAction}),_export("NewAction",NewAction)}}}),System.register("component/mmf/NewApplicationLink.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","carbon-addons-cloud-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,Card,_NewApplicationLink_,NewApplicationLink,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card}],execute:function(){_NewApplicationLink_=function(_React$Component){function _NewApplicationLink_(props){return _classCallCheck(this,_NewApplicationLink_),_possibleConstructorReturn(this,(_NewApplicationLink_.__proto__||Object.getPrototypeOf(_NewApplicationLink_)).call(this,props))}return _inherits(_NewApplicationLink_,_React$Component),_createClass(_NewApplicationLink_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(Card,{style:{height:"auto",minHeight:"3rem",width:"15rem",backgroundColor:"white",marginTop:5}},React.createElement(Button,{style:{color:"white",textAlign:"center",backgroundColor:"#5a805f",width:"100%"}},"New Application")))}}]),_NewApplicationLink_}(React.Component),_export("NewApplicationLink",NewApplicationLink=function(props){return _NewApplicationLink_}),_export("NewApplicationLink",NewApplicationLink),_export("default",NewApplicationLink),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/NewApplicationLink/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","carbon-addons-cloud-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,Card,_NewApplicationLink_,NewApplicationLink;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card}],execute:function(){_NewApplicationLink_=function(_React$Component){function _NewApplicationLink_(props){return _classCallCheck(this,_NewApplicationLink_),_possibleConstructorReturn(this,(_NewApplicationLink_.__proto__||Object.getPrototypeOf(_NewApplicationLink_)).call(this,props))}return _inherits(_NewApplicationLink_,_React$Component),_createClass(_NewApplicationLink_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(Card,{style:{height:"auto",minHeight:"3rem",width:"15rem",backgroundColor:"white",marginTop:5}},React.createElement(Button,{style:{color:"white",textAlign:"center",backgroundColor:"#5a805f",width:"100%"}},"New Application")))}}]),_NewApplicationLink_}(React.Component),_export("NewApplicationLink",NewApplicationLink=function(props){return _NewApplicationLink_}),_export("NewApplicationLink",NewApplicationLink)}}}),System.register("component/mmf/NewComponentProp.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/persist/MMFAPI.js","carbon-components-react","component/studio/DynamicWidgetParameter/Definition.js","component/studio/SrsReference/Definition.js","lodash.clonedeep"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Select,SelectItem,Button,TextInput,DynamicWidgetParameter,SrsReference,cloneDeep,_NewComponentProp_,NewComponentProp,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){_reactMonacoEditor.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput},function(_componentStudioDynamicWidgetParameterDefinitionJs){DynamicWidgetParameter=_componentStudioDynamicWidgetParameterDefinitionJs.DynamicWidgetParameter},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_NewComponentProp_=function(_React$Component){function _NewComponentProp_(props){_classCallCheck(this,_NewComponentProp_);var _this=_possibleConstructorReturn(this,(_NewComponentProp_.__proto__||Object.getPrototypeOf(_NewComponentProp_)).call(this,props)),record=_this.props.record?JSON.parse(_this.props.record):{},recordAttributes={};try{recordAttributes=JSON.parse(record.Attributes)}catch(err){}return _this.state={ComponentId:_this.props.component_id,ComponentName:"Unnamed"==_this.props.component_name?"":_this.props.component_name,Components:{},ComponentNames:[],Name:record.Name,Order:record.Order,DefaultValue:record.DefaultValue,Type:record.Type?record.Type:"TextInput",file_id:record.uid,componentData:record,schemaTables:_this.props.schemaTables,schemaFields:_this.props.schemaFields,widgetData:null,additionalAttributes:recordAttributes,fieldSelectorTablePickerType:recordAttributes&&recordAttributes.tableType?recordAttributes.tableType:"",paramsForPagePickerType:recordAttributes&&recordAttributes.pageType?recordAttributes.pageType:"",widgetName:recordAttributes&&"Dynamic"==recordAttributes.tableType?recordAttributes.value.widgetName:"",tableName:recordAttributes&&"Static"==recordAttributes.tableType?recordAttributes.value:""},_this.loadComponents=_this.loadComponents.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.close=_this.close.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.componentUpdated=_this.componentUpdated.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this.buttonInlineStyle={top:80,right:"10%",position:"absolute"},_this}return _inherits(_NewComponentProp_,_React$Component),_createClass(_NewComponentProp_,[{key:"componentDidUpdate",value:function(prevProps){if(prevProps.record!=this.props.record){var record=this.props.record?JSON.parse(this.props.record):{},recordAttributes={};try{recordAttributes=JSON.parse(record.Attributes)}catch(err){}this.setState({ComponentId:this.props.component_id,ComponentName:"Unnamed"==this.props.component_name?"":this.props.component_name,Components:{},ComponentNames:[],Name:record.Name,Order:record.Order,DefaultValue:record.DefaultValue,Type:record.Type?record.Type:"TextInput",file_id:record.uid,componentData:record,schemaTables:this.props.schemaTables,schemaFields:this.props.schemaFields,widgetData:null,additionalAttributes:recordAttributes,fieldSelectorTablePickerType:recordAttributes&&recordAttributes.tableType?recordAttributes.tableType:"",paramsForPagePickerType:recordAttributes&&recordAttributes.pageType?recordAttributes.pageType:"",widgetName:recordAttributes&&"Dynamic"==recordAttributes.tableType?recordAttributes.value.widgetName:"",tableName:recordAttributes&&"Static"==recordAttributes.tableType?recordAttributes.value:""})}}},{key:"codeChanged",value:function(newValue,e){var editor=this.state.editor;editor.code=newValue,this.setState({editor:editor})}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponent",["uid","Name","Scope"],null,function(results){var componentIdByLabel={},componentList=[];results&&(results.forEach(function(componentObj,indx){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;componentIdByLabel[componentLabel]=componentId,componentList.push({id:componentId,Label:componentLabel}),componentList=componentList.sort(function(a,b){return a.Label.localeCompare(b.Label)})}),Object.keys(componentIdByLabel).length>0&&self.setState({componentIdByLabel:componentIdByLabel,componentList:componentList,componentLoaded:!0}))})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Action:"",Defintion:"",ComponentId:"",ComponentName:""})}},{key:"close",value:function(){this.setState({isClosed:!0})}},{key:"saveAsNewData",value:function(){var _this2=this,data={Name:this.state.Name,DefaultValue:this.state.DefaultValue,Type:this.state.Type,Order:this.state.Order,PropsComponent:this.state.ComponentId,Attributes:this.props.selectChoices&&this.props.selectChoices.length>0?JSON.stringify(this.props.selectChoices):JSON.stringify(this.state.additionalAttributes)};MMFAPI().createRecord("MetaComponentProps",data,["uid"],function(result){_this2.setState({file_id:result.uid}),_this2.props&&_this2.props.updateStore&&_this2.props.updateStore({updates:{ide_reload:!_this2.props.ide_reload}}),_this2.props.addFlashMessage({title:"Success - ",subtitle:"Added the new component props successfully"})})}},{key:"saveData",value:function(){var _this3=this,data={Name:this.state.Name,DefaultValue:this.state.DefaultValue,Type:this.state.Type,Order:this.state.Order,PropsComponent:this.state.ComponentId,Attributes:this.props.selectChoices&&this.props.selectChoices.length>0?JSON.stringify(this.props.selectChoices):JSON.stringify(this.state.additionalAttributes)};this.state.file_id?MMFAPI().updateRecord("MetaComponentProps",this.state.file_id,data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props&&_this3.props.updateStore&&_this3.props.updateStore({updates:{ide_reload:!_this3.props.ide_reload}}),_this3.props&&_this3.props.addFlashMessage({title:"Success - ",subtitle:"component prop updated."})}):MMFAPI().createRecord("MetaComponentProps",data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props&&_this3.props.updateStore&&_this3.props.updateStore({updates:{ide_reload:!_this3.props.ide_reload}}),_this3.props&&_this3.props.addFlashMessage({title:"Success - ",subtitle:"component prop created."})})}},{key:"componentUpdated",value:function(componentValue){this.setState({ComponentName:componentValue,ComponentId:this.state.Components[componentValue]})}},{key:"render",value:function(){var _this4=this;if(!(this.state.componentLoaded||this.props.component_id&&-1!=this.props.component_id))return this.loadComponents(),null;if(!this.state.widgetData)return $script.runAtServer("mmf.getComponentProps",{componentId:this.props.component_id}).then(function(widgetData){return _this4.setState({widgetData:widgetData})}),null;if(!this.state.schemaTables||0==this.state.schemaTables.length)return $script.runscript("mmf.getSchema").then(function(schemaData){return _this4.setState({schemaTables:schemaData.tables,schemaFields:schemaData.fields})}),null;var file_id=this.state.file_id||this.state.componentData&&this.state.componentData.uid,uidField=file_id?React.createElement("div",{className:"sr-field-id"},React.createElement(TextInput,{labelText:"uid",required:"required",value:file_id,disabled:"true"})):uidField,componentName=null;componentName="object"==typeof this.state.ComponentName?this.state.ComponentName.text:this.state.ComponentName;var additionalAttributes=null,tablePickerChoices=[];tablePickerChoices.push(React.createElement(SelectItem,{value:"",text:"None"}));var schemaTables=this.state.schemaTables||[];schemaTables.sort(function(a,b){return a==b?0:a>b?1:-1}),schemaTables.map(function(tableName){tablePickerChoices.push(React.createElement(SelectItem,{value:tableName,text:tableName}))});var fieldPickerChoices=[];fieldPickerChoices.push(React.createElement(SelectItem,{value:"",text:"None"}));var schemaFields=this.state.schemaFields||[];(schemaFields=schemaFields&&schemaFields.filter(function(field,indx){return _this4.state.additionalAttributes&&field.parent==_this4.state.additionalAttributes.tableName&&"id"!==field.id}))&&schemaFields.map(function(fieldObj){"field"==fieldObj.type?fieldPickerChoices.push(React.createElement(SelectItem,{value:fieldObj.id,text:fieldObj.text})):"one2one"==fieldObj.type&&fieldPickerChoices.push(React.createElement(SelectItem,{value:fieldObj.id+"@@"+fieldObj.to,text:fieldObj.text}))});var _ref,tablePickerEl=React.createElement(Select,{style:{display:"flex"},defaultValue:this.state.tableName,labelText:"Table Picker",onChange:function(e){var additionalAttributes=_this4.state.additionalAttributes||{};additionalAttributes.tableType="Static",additionalAttributes.value=e.target.value,_this4.setState({additionalAttributes:additionalAttributes})}},tablePickerChoices),ParamPicker=DynamicWidgetParameter(),DynamicTablePickerEl=React.createElement(ParamPicker,{defaultValue:this.state.widgetName,updateProps:function(data){var additionalAttributes=_this4.state.additionalAttributes||{};additionalAttributes.tableType="Dynamic",additionalAttributes.value=data,_this4.setState({additionalAttributes:additionalAttributes})},parentPageParams:{recordid:"Parent Record ID"},widgetData:this.state.widgetData,params:["recordid"]}),RecordLookup=SrsReference(),pageLookupProps={title:"Choose a Page",tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",searchfields:"Name,Scope",onChange:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(item){var additionalAttributes;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:(additionalAttributes=cloneDeep(_this4.state.additionalAttributes)||{}).pageType="Static",additionalAttributes.value=item.id,_this4.setState({additionalAttributes:additionalAttributes});case 4:case"end":return _context.stop()}},_callee,_this4)})),function(_x){return _ref.apply(this,arguments)})},pagePickerEl=React.createElement(RecordLookup,pageLookupProps),DynamicPagePickerEl=React.createElement(ParamPicker,{defaultValue:this.state.widgetName,updateProps:function(data){var additionalAttributes=_this4.state.additionalAttributes||{};additionalAttributes.pageType="Dynamic",additionalAttributes.value=data,_this4.setState({additionalAttributes:additionalAttributes})},parentPageParams:{recordid:"Parent Record ID"},widgetData:this.state.widgetData,params:["recordid"]});switch(this.state.Type){case"KeyFieldList":case"FieldSelector":additionalAttributes=React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Table Picker Type",onChange:function(e){return _this4.setState({fieldSelectorTablePickerType:e.target.value})},required:"required",defaultValue:this.state.fieldSelectorTablePickerType,className:"sr-carb-sele"},React.createElement(SelectItem,{text:"Static",value:"Static"}),React.createElement(SelectItem,{text:"Dynamic",value:"Dynamic"})),"Dynamic"==this.state.fieldSelectorTablePickerType?DynamicTablePickerEl:tablePickerEl);break;case"Select":additionalAttributes=React.createElement(React.Fragment,null,React.createElement("srs-key-value-pair",{varname:this.props.uid+"_params",label:"Create Choices",placeholder_name:"Enter Name...",placeholder_value:"Enter Value...",items:this.state.additionalAttributes&&Object.keys(this.state.additionalAttributes).length>0?JSON.stringify(this.state.additionalAttributes):null}));break;case"PageParameter":additionalAttributes=React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Page Picker Type",onChange:function(e){return _this4.setState({paramsForPagePickerType:e.target.value})},required:"required",defaultValue:this.state.paramsForPagePickerType,className:"sr-carb-sele"},React.createElement(SelectItem,{text:"Static",value:"Static"}),React.createElement(SelectItem,{text:"Dynamic",value:"Dynamic"})),"Dynamic"==this.state.paramsForPagePickerType?DynamicPagePickerEl:pagePickerEl);break;case"RecordSelector":additionalAttributes=React.createElement(React.Fragment,null,React.createElement(Select,{style:{display:"flex"},defaultValue:this.state.additionalAttributes.tableName,labelText:"Table Picker",onChange:function(e){var additionalAttributes=cloneDeep(_this4.state.additionalAttributes)||{};additionalAttributes.tableName=e.target.value,_this4.setState({additionalAttributes:additionalAttributes})}},tablePickerChoices),React.createElement(Select,{style:{display:"flex"},defaultValue:this.state.additionalAttributes.displayFieldName,labelText:"Display Field Picker",onChange:function(e){var additionalAttributes=cloneDeep(_this4.state.additionalAttributes)||{};additionalAttributes.displayFieldName=e.target.value,_this4.setState({additionalAttributes:additionalAttributes})}},fieldPickerChoices),React.createElement(Select,{style:{display:"flex"},defaultValue:this.state.additionalAttributes.secondaryDisplayFieldName,labelText:"Secondary display Field Picker",onChange:function(e){var additionalAttributes=cloneDeep(_this4.state.additionalAttributes)||{};additionalAttributes.secondaryDisplayFieldName=e.target.value,_this4.setState({additionalAttributes:additionalAttributes})}},fieldPickerChoices),React.createElement(TextInput,{placeholder:"Enter search fields",onChange:function(e){var additionalAttributes=cloneDeep(_this4.state.additionalAttributes)||{};additionalAttributes.seachFields=e.target.value,_this4.setState({additionalAttributes:additionalAttributes})},labelText:"Search Fields",style:{width:100},value:this.state.additionalAttributes.seachFields}))}return this.state.isClosed?null:React.createElement("div",{style:this.props.inline?{padding:40,border:"1px solid #bfbfbf",margin:10,borderRadius:10}:{}},React.createElement("h4",{className:"sr-action-header"},"Component Props - Form"),React.createElement("div",{className:"sr-action-alias",style:{height:"25rem",overflow:"auto"}},React.createElement(TextInput,{labelText:"Component",value:componentName,disabled:!0}),React.createElement("div",{style:{marginBottom:"2%"}},React.createElement(TextInput,{placeholder:"Enter name...",onChange:function(e){return _this4.onChange(e,"Name")},labelText:"Name",required:"required",value:this.state.Name}),uidField),React.createElement(TextInput,{placeholder:"Enter default value...",onChange:function(e){return _this4.onChange(e,"DefaultValue")},labelText:"Defaultvalue",required:"required",value:this.state.DefaultValue}),React.createElement(TextInput,{placeholder:"Enter order value...",onChange:function(e){return _this4.onChange(e,"Order")},labelText:"Order",required:"required",value:this.state.Order,style:{width:100}}),React.createElement(Select,{label:"Type",labelText:"Type",onChange:function(e){return _this4.onChange(e,"Type")},value:this.state.Type,required:"required",className:"sr-carb-sele"},React.createElement(SelectItem,{text:"Input Text",value:"TextInput"}),React.createElement(SelectItem,{text:"Input Text Area",value:"TextArea"}),React.createElement(SelectItem,{text:"Number",value:"Number"}),React.createElement(SelectItem,{text:"Field Map",value:"FieldMap"}),React.createElement(SelectItem,{text:"Checkbox",value:"Checkbox"}),React.createElement(SelectItem,{text:"Hidden",value:"Hidden"}),React.createElement(SelectItem,{text:"Select",value:"Select"}),React.createElement(SelectItem,{text:"KeyValue List",value:"KeyValueList"}),React.createElement(SelectItem,{text:"KeyField List",value:"KeyFieldList"}),React.createElement(SelectItem,{text:"Table Selector",value:"TableSelector"}),React.createElement(SelectItem,{text:"Field Selector",value:"FieldSelector"}),React.createElement(SelectItem,{text:"Component Selector",value:"ComponentSelector"}),React.createElement(SelectItem,{text:"Page Selector",value:"PageSelector"}),React.createElement(SelectItem,{text:"Page Parameter",value:"PageParameter"}),React.createElement(SelectItem,{text:"Navigation Selector",value:"NavSelector"}),React.createElement(SelectItem,{text:"Record Selector",value:"RecordSelector"})),additionalAttributes),React.createElement("div",{style:this.props.inline?this.buttonInlineStyle:this.buttonStyle},React.createElement(Button,{waves:"light",size:"small",onClick:function(e){return _this4.saveData()}},"Save"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.saveAsNewData()}},"Save As"),this.props.inline?React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.close()}},"Close"):React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.resetData()}},"Reset")))}}]),_NewComponentProp_}(React.Component),_export("NewComponentProp",NewComponentProp=function(props){return _NewComponentProp_}),_export("NewComponentProp",NewComponentProp),_export("default",NewComponentProp),_export("states",states=[{KeyName:"selectChoices",AccessPath:"keyvaluepair.${uid}_params",DefaultValue:'{"keyvaluepair": { "${uid}_params": []}}'},{KeyName:"schemaTables",AccessPath:"schema.tables",DefaultValue:'{"schema": {"tables": []}}'},{KeyName:"ide_reload",AccessPath:"ide_reload",DefaultValue:'{"ide_reload": false}'},{KeyName:"schemaFields",AccessPath:"schema.fields",DefaultValue:'{"schema": {"fields": []}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/NewComponentProp/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/persist/MMFAPI.js","carbon-components-react","component/studio/DynamicWidgetParameter/Definition.js","component/studio/SrsReference/Definition.js","lodash.clonedeep"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Select,SelectItem,Button,TextInput,DynamicWidgetParameter,SrsReference,cloneDeep,_NewComponentProp_,NewComponentProp;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){_reactMonacoEditor.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput},function(_componentStudioDynamicWidgetParameterDefinitionJs){DynamicWidgetParameter=_componentStudioDynamicWidgetParameterDefinitionJs.DynamicWidgetParameter},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_NewComponentProp_=function(_React$Component){function _NewComponentProp_(props){_classCallCheck(this,_NewComponentProp_);var _this=_possibleConstructorReturn(this,(_NewComponentProp_.__proto__||Object.getPrototypeOf(_NewComponentProp_)).call(this,props)),record=_this.props.record?JSON.parse(_this.props.record):{},recordAttributes={};try{recordAttributes=JSON.parse(record.Attributes)}catch(err){}return _this.state={ComponentId:_this.props.component_id,ComponentName:"Unnamed"==_this.props.component_name?"":_this.props.component_name,Components:{},ComponentNames:[],Name:record.Name,Order:record.Order,DefaultValue:record.DefaultValue,Type:record.Type?record.Type:"TextInput",file_id:record.uid,componentData:record,schemaTables:_this.props.schemaTables,schemaFields:_this.props.schemaFields,widgetData:null,additionalAttributes:recordAttributes,fieldSelectorTablePickerType:recordAttributes&&recordAttributes.tableType?recordAttributes.tableType:"",paramsForPagePickerType:recordAttributes&&recordAttributes.pageType?recordAttributes.pageType:"",widgetName:recordAttributes&&"Dynamic"==recordAttributes.tableType?recordAttributes.value.widgetName:"",tableName:recordAttributes&&"Static"==recordAttributes.tableType?recordAttributes.value:""},_this.loadComponents=_this.loadComponents.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.close=_this.close.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.componentUpdated=_this.componentUpdated.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this.buttonInlineStyle={top:80,right:"10%",position:"absolute"},_this}return _inherits(_NewComponentProp_,_React$Component),_createClass(_NewComponentProp_,[{key:"componentDidUpdate",value:function(prevProps){if(prevProps.record!=this.props.record){var record=this.props.record?JSON.parse(this.props.record):{},recordAttributes={};try{recordAttributes=JSON.parse(record.Attributes)}catch(err){}this.setState({ComponentId:this.props.component_id,ComponentName:"Unnamed"==this.props.component_name?"":this.props.component_name,Components:{},ComponentNames:[],Name:record.Name,Order:record.Order,DefaultValue:record.DefaultValue,Type:record.Type?record.Type:"TextInput",file_id:record.uid,componentData:record,schemaTables:this.props.schemaTables,schemaFields:this.props.schemaFields,widgetData:null,additionalAttributes:recordAttributes,fieldSelectorTablePickerType:recordAttributes&&recordAttributes.tableType?recordAttributes.tableType:"",paramsForPagePickerType:recordAttributes&&recordAttributes.pageType?recordAttributes.pageType:"",widgetName:recordAttributes&&"Dynamic"==recordAttributes.tableType?recordAttributes.value.widgetName:"",tableName:recordAttributes&&"Static"==recordAttributes.tableType?recordAttributes.value:""})}}},{key:"codeChanged",value:function(newValue,e){var editor=this.state.editor;editor.code=newValue,this.setState({editor:editor})}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponent",["uid","Name","Scope"],null,function(results){var componentIdByLabel={},componentList=[];results&&(results.forEach(function(componentObj,indx){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;componentIdByLabel[componentLabel]=componentId,componentList.push({id:componentId,Label:componentLabel}),componentList=componentList.sort(function(a,b){return a.Label.localeCompare(b.Label)})}),Object.keys(componentIdByLabel).length>0&&self.setState({componentIdByLabel:componentIdByLabel,componentList:componentList,componentLoaded:!0}))})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Action:"",Defintion:"",ComponentId:"",ComponentName:""})}},{key:"close",value:function(){this.setState({isClosed:!0})}},{key:"saveAsNewData",value:function(){var _this2=this,data={Name:this.state.Name,DefaultValue:this.state.DefaultValue,Type:this.state.Type,Order:this.state.Order,PropsComponent:this.state.ComponentId,Attributes:this.props.selectChoices&&this.props.selectChoices.length>0?JSON.stringify(this.props.selectChoices):JSON.stringify(this.state.additionalAttributes)};MMFAPI().createRecord("MetaComponentProps",data,["uid"],function(result){_this2.setState({file_id:result.uid}),_this2.props&&_this2.props.updateStore&&_this2.props.updateStore({updates:{ide_reload:!_this2.props.ide_reload}}),_this2.props.addFlashMessage({title:"Success - ",subtitle:"Added the new component props successfully"})})}},{key:"saveData",value:function(){var _this3=this,data={Name:this.state.Name,DefaultValue:this.state.DefaultValue,Type:this.state.Type,Order:this.state.Order,PropsComponent:this.state.ComponentId,Attributes:this.props.selectChoices&&this.props.selectChoices.length>0?JSON.stringify(this.props.selectChoices):JSON.stringify(this.state.additionalAttributes)};this.state.file_id?MMFAPI().updateRecord("MetaComponentProps",this.state.file_id,data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props&&_this3.props.updateStore&&_this3.props.updateStore({updates:{ide_reload:!_this3.props.ide_reload}}),_this3.props&&_this3.props.addFlashMessage({title:"Success - ",subtitle:"component prop updated."})}):MMFAPI().createRecord("MetaComponentProps",data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props&&_this3.props.updateStore&&_this3.props.updateStore({updates:{ide_reload:!_this3.props.ide_reload}}),_this3.props&&_this3.props.addFlashMessage({title:"Success - ",subtitle:"component prop created."})})}},{key:"componentUpdated",value:function(componentValue){this.setState({ComponentName:componentValue,ComponentId:this.state.Components[componentValue]})}},{key:"render",value:function(){var _this4=this;if(!(this.state.componentLoaded||this.props.component_id&&-1!=this.props.component_id))return this.loadComponents(),null;if(!this.state.widgetData)return $script.runAtServer("mmf.getComponentProps",{componentId:this.props.component_id}).then(function(widgetData){return _this4.setState({widgetData:widgetData})}),null;if(!this.state.schemaTables||0==this.state.schemaTables.length)return $script.runscript("mmf.getSchema").then(function(schemaData){return _this4.setState({schemaTables:schemaData.tables,schemaFields:schemaData.fields})}),null;var file_id=this.state.file_id||this.state.componentData&&this.state.componentData.uid,uidField=file_id?React.createElement("div",{className:"sr-field-id"},React.createElement(TextInput,{labelText:"uid",required:"required",value:file_id,disabled:"true"})):uidField,componentName=null;componentName="object"==typeof this.state.ComponentName?this.state.ComponentName.text:this.state.ComponentName;var additionalAttributes=null,tablePickerChoices=[];tablePickerChoices.push(React.createElement(SelectItem,{value:"",text:"None"}));var schemaTables=this.state.schemaTables||[];schemaTables.sort(function(a,b){return a==b?0:a>b?1:-1}),schemaTables.map(function(tableName){tablePickerChoices.push(React.createElement(SelectItem,{value:tableName,text:tableName}))});var fieldPickerChoices=[];fieldPickerChoices.push(React.createElement(SelectItem,{value:"",text:"None"}));var schemaFields=this.state.schemaFields||[];(schemaFields=schemaFields&&schemaFields.filter(function(field,indx){return _this4.state.additionalAttributes&&field.parent==_this4.state.additionalAttributes.tableName&&"id"!==field.id}))&&schemaFields.map(function(fieldObj){"field"==fieldObj.type?fieldPickerChoices.push(React.createElement(SelectItem,{value:fieldObj.id,text:fieldObj.text})):"one2one"==fieldObj.type&&fieldPickerChoices.push(React.createElement(SelectItem,{value:fieldObj.id+"@@"+fieldObj.to,text:fieldObj.text}))});var _ref,tablePickerEl=React.createElement(Select,{style:{display:"flex"},defaultValue:this.state.tableName,labelText:"Table Picker",onChange:function(e){var additionalAttributes=_this4.state.additionalAttributes||{};additionalAttributes.tableType="Static",additionalAttributes.value=e.target.value,_this4.setState({additionalAttributes:additionalAttributes})}},tablePickerChoices),ParamPicker=DynamicWidgetParameter(),DynamicTablePickerEl=React.createElement(ParamPicker,{defaultValue:this.state.widgetName,updateProps:function(data){var additionalAttributes=_this4.state.additionalAttributes||{};additionalAttributes.tableType="Dynamic",additionalAttributes.value=data,_this4.setState({additionalAttributes:additionalAttributes})},parentPageParams:{recordid:"Parent Record ID"},widgetData:this.state.widgetData,params:["recordid"]}),RecordLookup=SrsReference(),pageLookupProps={title:"Choose a Page",tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",searchfields:"Name,Scope",onChange:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(item){var additionalAttributes;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:(additionalAttributes=cloneDeep(_this4.state.additionalAttributes)||{}).pageType="Static",additionalAttributes.value=item.id,_this4.setState({additionalAttributes:additionalAttributes});case 4:case"end":return _context.stop()}},_callee,_this4)})),function(_x){return _ref.apply(this,arguments)})},pagePickerEl=React.createElement(RecordLookup,pageLookupProps),DynamicPagePickerEl=React.createElement(ParamPicker,{defaultValue:this.state.widgetName,updateProps:function(data){var additionalAttributes=_this4.state.additionalAttributes||{};additionalAttributes.pageType="Dynamic",additionalAttributes.value=data,_this4.setState({additionalAttributes:additionalAttributes})},parentPageParams:{recordid:"Parent Record ID"},widgetData:this.state.widgetData,params:["recordid"]});switch(this.state.Type){case"KeyFieldList":case"FieldSelector":additionalAttributes=React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Table Picker Type",onChange:function(e){return _this4.setState({fieldSelectorTablePickerType:e.target.value})},required:"required",defaultValue:this.state.fieldSelectorTablePickerType,className:"sr-carb-sele"},React.createElement(SelectItem,{text:"Static",value:"Static"}),React.createElement(SelectItem,{text:"Dynamic",value:"Dynamic"})),"Dynamic"==this.state.fieldSelectorTablePickerType?DynamicTablePickerEl:tablePickerEl);break;case"Select":additionalAttributes=React.createElement(React.Fragment,null,React.createElement("srs-key-value-pair",{varname:this.props.uid+"_params",label:"Create Choices",placeholder_name:"Enter Name...",placeholder_value:"Enter Value...",items:this.state.additionalAttributes&&Object.keys(this.state.additionalAttributes).length>0?JSON.stringify(this.state.additionalAttributes):null}));break;case"PageParameter":additionalAttributes=React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Page Picker Type",onChange:function(e){return _this4.setState({paramsForPagePickerType:e.target.value})},required:"required",defaultValue:this.state.paramsForPagePickerType,className:"sr-carb-sele"},React.createElement(SelectItem,{text:"Static",value:"Static"}),React.createElement(SelectItem,{text:"Dynamic",value:"Dynamic"})),"Dynamic"==this.state.paramsForPagePickerType?DynamicPagePickerEl:pagePickerEl);break;case"RecordSelector":additionalAttributes=React.createElement(React.Fragment,null,React.createElement(Select,{style:{display:"flex"},defaultValue:this.state.additionalAttributes.tableName,labelText:"Table Picker",onChange:function(e){var additionalAttributes=cloneDeep(_this4.state.additionalAttributes)||{};additionalAttributes.tableName=e.target.value,_this4.setState({additionalAttributes:additionalAttributes})}},tablePickerChoices),React.createElement(Select,{style:{display:"flex"},defaultValue:this.state.additionalAttributes.displayFieldName,labelText:"Display Field Picker",onChange:function(e){var additionalAttributes=cloneDeep(_this4.state.additionalAttributes)||{};additionalAttributes.displayFieldName=e.target.value,_this4.setState({additionalAttributes:additionalAttributes})}},fieldPickerChoices),React.createElement(Select,{style:{display:"flex"},defaultValue:this.state.additionalAttributes.secondaryDisplayFieldName,labelText:"Secondary display Field Picker",onChange:function(e){var additionalAttributes=cloneDeep(_this4.state.additionalAttributes)||{};additionalAttributes.secondaryDisplayFieldName=e.target.value,_this4.setState({additionalAttributes:additionalAttributes})}},fieldPickerChoices),React.createElement(TextInput,{placeholder:"Enter search fields",onChange:function(e){var additionalAttributes=cloneDeep(_this4.state.additionalAttributes)||{};additionalAttributes.seachFields=e.target.value,_this4.setState({additionalAttributes:additionalAttributes})},labelText:"Search Fields",style:{width:100},value:this.state.additionalAttributes.seachFields}))}return this.state.isClosed?null:React.createElement("div",{style:this.props.inline?{padding:40,border:"1px solid #bfbfbf",margin:10,borderRadius:10}:{}},React.createElement("h4",{className:"sr-action-header"},"Component Props - Form"),React.createElement("div",{className:"sr-action-alias",style:{height:"25rem",overflow:"auto"}},React.createElement(TextInput,{labelText:"Component",value:componentName,disabled:!0}),React.createElement("div",{style:{marginBottom:"2%"}},React.createElement(TextInput,{placeholder:"Enter name...",onChange:function(e){return _this4.onChange(e,"Name")},labelText:"Name",required:"required",value:this.state.Name}),uidField),React.createElement(TextInput,{placeholder:"Enter default value...",onChange:function(e){return _this4.onChange(e,"DefaultValue")},labelText:"Defaultvalue",required:"required",value:this.state.DefaultValue}),React.createElement(TextInput,{placeholder:"Enter order value...",onChange:function(e){return _this4.onChange(e,"Order")},labelText:"Order",required:"required",value:this.state.Order,style:{width:100}}),React.createElement(Select,{label:"Type",labelText:"Type",onChange:function(e){return _this4.onChange(e,"Type")},value:this.state.Type,required:"required",className:"sr-carb-sele"},React.createElement(SelectItem,{text:"Input Text",value:"TextInput"}),React.createElement(SelectItem,{text:"Input Text Area",value:"TextArea"}),React.createElement(SelectItem,{text:"Number",value:"Number"}),React.createElement(SelectItem,{text:"Field Map",value:"FieldMap"}),React.createElement(SelectItem,{text:"Checkbox",value:"Checkbox"}),React.createElement(SelectItem,{text:"Hidden",value:"Hidden"}),React.createElement(SelectItem,{text:"Select",value:"Select"}),React.createElement(SelectItem,{text:"KeyValue List",value:"KeyValueList"}),React.createElement(SelectItem,{text:"KeyField List",value:"KeyFieldList"}),React.createElement(SelectItem,{text:"Table Selector",value:"TableSelector"}),React.createElement(SelectItem,{text:"Field Selector",value:"FieldSelector"}),React.createElement(SelectItem,{text:"Component Selector",value:"ComponentSelector"}),React.createElement(SelectItem,{text:"Page Selector",value:"PageSelector"}),React.createElement(SelectItem,{text:"Page Parameter",value:"PageParameter"}),React.createElement(SelectItem,{text:"Navigation Selector",value:"NavSelector"}),React.createElement(SelectItem,{text:"Record Selector",value:"RecordSelector"})),additionalAttributes),React.createElement("div",{style:this.props.inline?this.buttonInlineStyle:this.buttonStyle},React.createElement(Button,{waves:"light",size:"small",onClick:function(e){return _this4.saveData()}},"Save"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.saveAsNewData()}},"Save As"),this.props.inline?React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.close()}},"Close"):React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.resetData()}},"Reset")))}}]),_NewComponentProp_}(React.Component),_export("NewComponentProp",NewComponentProp=function(props){return _NewComponentProp_}),_export("NewComponentProp",NewComponentProp)}}}),System.register("component/mmf/NewComponentRequires.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","react-router-dom","client/script/persist/MMFAPI.js","thirdpartylib/materialize.js","react-materialize"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Button,Row,TextInput,Autocomplete,_NewComponentRequires,NewComponentRequires,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_reactRouterDom){_reactRouterDom.BrowserRouter,_reactRouterDom.Route,_reactRouterDom.Link,_reactRouterDom.withRouter,_reactRouterDom.matchPath},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_thirdpartylibMaterializeJs){},function(_reactMaterialize){Button=_reactMaterialize.Button,_reactMaterialize.Icon,_reactMaterialize.Card,Row=_reactMaterialize.Row,_reactMaterialize.Col,TextInput=_reactMaterialize.TextInput,_reactMaterialize.Collection,_reactMaterialize.CollectionItem,Autocomplete=_reactMaterialize.Autocomplete}],execute:function(){_NewComponentRequires=function(_React$Component){function _NewComponentRequires(props,context){_classCallCheck(this,_NewComponentRequires);var _this=_possibleConstructorReturn(this,(_NewComponentRequires.__proto__||Object.getPrototypeOf(_NewComponentRequires)).call(this,props));return _this.state={ComponentId:_this.props.componentId,ComponentName:"Unnamed"==_this.props.componentName?"":_this.props.componentName,DependentComponentId:_this.props.dependentComponentId,DependentComponentName:"Unnamed"==_this.props.dependentComponentName?"":_this.props.dependentComponentName,Components:{},ComponentNames:{},componentData:_this.props.rowInfo?_this.props.rowInfo:null},_this.loadComponents=_this.loadComponents.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.componentUpdated=_this.componentUpdated.bind(_this),_this.dependentComponentUpdated=_this.dependentComponentUpdated.bind(_this),_this}return _inherits(_NewComponentRequires,_React$Component),_createClass(_NewComponentRequires,[{key:"componentDidMount",value:function(){this.props.componentId&&-1!=this.props.componentId||this.loadComponents()}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponents","{}",function(results){var components={},componentNames={};results&&(results.forEach(function(componentObj){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;components[componentLabel]=componentId,componentNames[componentLabel]=null}),components&&self.setState({Components:components,ComponentNames:componentNames}))})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",ComponentId:"",ComponentName:"",DependentComponentId:"",DependentComponentName:""})}},{key:"saveAsNewData",value:function(){console.log(this.state);var data={Component:this.state.ComponentId,RequiredComponent:this.state.DependentComponentId},self=this;fetch("/api/t1/MetaComponentRequires",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"saveData",value:function(){var endPoint="/api/t1/MetaComponentRequires",method="POST";this.state.file_id&&(endPoint=endPoint+"/"+this.state.file_id,method="PUT"),console.log("Endpoint = "+endPoint);var data={Component:this.state.ComponentId,RequiredComponent:this.state.DependentComponentId},self=this;fetch(endPoint,{method:method,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"componentUpdated",value:function(componentValue){this.setState({ComponentName:componentValue,ComponentId:this.state.Components[componentValue]})}},{key:"dependentComponentUpdated",value:function(componentValue){this.setState({DependentComponentName:componentValue,DependentComponentId:this.state.Components[componentValue]})}},{key:"render",value:function(){var _this2=this,file_id=this.state.file_id||this.state.componentData&&this.state.componentData.uid,uidField=file_id?React.createElement(TextInput,{s:3,required:"required",value:file_id,disabled:"true"}):uidField;return React.createElement("div",null,React.createElement(Row,null,"New Component Dependency - Form"),React.createElement(Row,null,uidField),React.createElement(Row,null,React.createElement(Autocomplete,{s:6,title:"Component....",value:this.state.ComponentName,data:this.state.ComponentNames,onAutocomplete:this.componentUpdated,required:"required"})),React.createElement(Row,null,React.createElement(Autocomplete,{s:6,title:"Requires....",value:this.state.DependentComponentName,data:this.state.ComponentNames,onAutocomplete:this.dependentComponentUpdated,required:"required"})),React.createElement(Row,null,React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveAsNewData()}},"Save As"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.resetData()}},"Reset")))}}]),_NewComponentRequires}(React.Component),_export("NewComponentRequires",NewComponentRequires=function(props){return _NewComponentRequires}),_export("NewComponentRequires",NewComponentRequires),_export("default",NewComponentRequires),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/NewComponentRequires/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","react-router-dom","client/script/persist/MMFAPI.js","thirdpartylib/materialize.js","react-materialize"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Button,Row,TextInput,Autocomplete,_NewComponentRequires,NewComponentRequires;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_reactRouterDom){_reactRouterDom.BrowserRouter,_reactRouterDom.Route,_reactRouterDom.Link,_reactRouterDom.withRouter,_reactRouterDom.matchPath},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_thirdpartylibMaterializeJs){},function(_reactMaterialize){Button=_reactMaterialize.Button,_reactMaterialize.Icon,_reactMaterialize.Card,Row=_reactMaterialize.Row,_reactMaterialize.Col,TextInput=_reactMaterialize.TextInput,_reactMaterialize.Collection,_reactMaterialize.CollectionItem,Autocomplete=_reactMaterialize.Autocomplete}],execute:function(){_NewComponentRequires=function(_React$Component){function _NewComponentRequires(props,context){_classCallCheck(this,_NewComponentRequires);var _this=_possibleConstructorReturn(this,(_NewComponentRequires.__proto__||Object.getPrototypeOf(_NewComponentRequires)).call(this,props));return _this.state={ComponentId:_this.props.componentId,ComponentName:"Unnamed"==_this.props.componentName?"":_this.props.componentName,DependentComponentId:_this.props.dependentComponentId,DependentComponentName:"Unnamed"==_this.props.dependentComponentName?"":_this.props.dependentComponentName,Components:{},ComponentNames:{},componentData:_this.props.rowInfo?_this.props.rowInfo:null},_this.loadComponents=_this.loadComponents.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.componentUpdated=_this.componentUpdated.bind(_this),_this.dependentComponentUpdated=_this.dependentComponentUpdated.bind(_this),_this}return _inherits(_NewComponentRequires,_React$Component),_createClass(_NewComponentRequires,[{key:"componentDidMount",value:function(){this.props.componentId&&-1!=this.props.componentId||this.loadComponents()}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponents","{}",function(results){var components={},componentNames={};results&&(results.forEach(function(componentObj){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;components[componentLabel]=componentId,componentNames[componentLabel]=null}),components&&self.setState({Components:components,ComponentNames:componentNames}))})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",ComponentId:"",ComponentName:"",DependentComponentId:"",DependentComponentName:""})}},{key:"saveAsNewData",value:function(){console.log(this.state);var data={Component:this.state.ComponentId,RequiredComponent:this.state.DependentComponentId},self=this;fetch("/api/t1/MetaComponentRequires",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"saveData",value:function(){var endPoint="/api/t1/MetaComponentRequires",method="POST";this.state.file_id&&(endPoint=endPoint+"/"+this.state.file_id,method="PUT"),console.log("Endpoint = "+endPoint);var data={Component:this.state.ComponentId,RequiredComponent:this.state.DependentComponentId},self=this;fetch(endPoint,{method:method,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"componentUpdated",value:function(componentValue){this.setState({ComponentName:componentValue,ComponentId:this.state.Components[componentValue]})}},{key:"dependentComponentUpdated",value:function(componentValue){this.setState({DependentComponentName:componentValue,DependentComponentId:this.state.Components[componentValue]})}},{key:"render",value:function(){var _this2=this,file_id=this.state.file_id||this.state.componentData&&this.state.componentData.uid,uidField=file_id?React.createElement(TextInput,{s:3,required:"required",value:file_id,disabled:"true"}):uidField;return React.createElement("div",null,React.createElement(Row,null,"New Component Dependency - Form"),React.createElement(Row,null,uidField),React.createElement(Row,null,React.createElement(Autocomplete,{s:6,title:"Component....",value:this.state.ComponentName,data:this.state.ComponentNames,onAutocomplete:this.componentUpdated,required:"required"})),React.createElement(Row,null,React.createElement(Autocomplete,{s:6,title:"Requires....",value:this.state.DependentComponentName,data:this.state.ComponentNames,onAutocomplete:this.dependentComponentUpdated,required:"required"})),React.createElement(Row,null,React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveAsNewData()}},"Save As"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.resetData()}},"Reset")))}}]),_NewComponentRequires}(React.Component),_export("NewComponentRequires",NewComponentRequires=function(props){return _NewComponentRequires}),_export("NewComponentRequires",NewComponentRequires)}}}),System.register("component/mmf/NewFileSyncConfig.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/persist/MMFAPI.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MonacoEditor,MMFAPI,Button,TextInput,_NewFileSyncConfig,NewFileSyncConfig,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewFileSyncConfig=function(_React$Component){function _NewFileSyncConfig(props,context){_classCallCheck(this,_NewFileSyncConfig);var _this=_possibleConstructorReturn(this,(_NewFileSyncConfig.__proto__||Object.getPrototypeOf(_NewFileSyncConfig)).call(this,props));return _this.state={importScriptEditor:{width:.6*screen.width,height:"350",importScript:_this.props.rowInfo?_this.props.rowInfo.Definition:"(function() {\n   //business logic using $qry, $fileUID, $fileContent, $dataTable, $topResolve, $topReject\n})"},exportScriptEditor:{width:.6*screen.width,height:"350",exportScript:_this.props.rowInfo?_this.props.rowInfo.Definition:"(function() {\n   //business logic using $qry, $live\n})"}},_this.topElement=React.createRef(),_this.importScriptChanged=_this.importScriptChanged.bind(_this),_this.exportScriptChanged=_this.exportScriptChanged.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.importScriptEditorDidMount=_this.importScriptEditorDidMount.bind(_this),_this.exportScriptEditorDidMount=_this.exportScriptEditorDidMount.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%",clear:"both",marginTop:"1%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%"},_this.modalButtonGroup={marginLeft:"60%",position:"relative"},_this}return _inherits(_NewFileSyncConfig,_React$Component),_createClass(_NewFileSyncConfig,[{key:"importScriptChanged",value:function(newValue,e){var editor=this.state.importScriptEditor;editor.htmlCode=newValue,this.setState({importScriptEditor:editor})}},{key:"exportScriptChanged",value:function(newValue,e){var editor=this.state.exportScriptEditor;editor.htmlCode=newValue,this.setState({exportScriptEditor:editor})}},{key:"importScriptEditorDidMount",value:function(editor,monaco){var self=this,saveEditorValue=editor.setValue.bind(editor);editor.setValue=function(val){saveEditorValue(val),self.state.importScriptEditor?(editor.setPosition(self.state.importScriptEditor.position),editor.revealLine(self.state.importScriptEditor.position.lineNumber),editor.revealLineInCenter(self.state.importScriptEditor.position.lineNumber)):(editor.setPosition({lineNumber:1,column:1}),editor.revealLine(1),editor.revealLineInCenter(15)),editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(editor._themeService._styleElement),editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"exportScriptEditorDidMount",value:function(editor,monaco){var self=this,saveEditorValue=editor.setValue.bind(editor);editor.setValue=function(val){saveEditorValue(val),self.state.exportScriptEditor?(editor.setPosition(self.state.exportScriptEditor.position),editor.revealLine(self.state.exportScriptEditor.position.lineNumber),editor.revealLineInCenter(self.state.exportScriptEditor.position.lineNumber)):(editor.setPosition({lineNumber:1,column:1}),editor.revealLine(1),editor.revealLineInCenter(15)),editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(editor._themeService._styleElement),editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"importScriptChanged",value:function(newValue,e,type){this.setState({importScript:newValue})}},{key:"exportScriptChanged",value:function(newValue,e,type){this.setState({exportScript:newValue})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Table:"",Field:"",LocalPath:""})}},{key:"saveAsNewData",value:function(){var _this2=this,data={Name:this.state.name,Order:this.state.order,Table:this.state.table,Field:this.state.field,ImportScript:this.state.importScript,ImportCondition:this.state.ImportCondition,ExportScript:this.state.exportScript,ExportCondition:this.state.ExportCondition,LocalPath:this.state.localPath,Level:this.state.level,Active:this.state.active};MMFAPI().createRecord("MetaLocalSync",data,["uid"],function(result){_this2.setState({file_id:result.uid})})}},{key:"saveData",value:function(){var _this3=this,data={Name:this.state.name,Order:this.state.order,Table:this.state.table,Field:this.state.field,ImportScript:this.state.importScript,ImportCondition:this.state.ImportCondition,ExportScript:this.state.exportScript,ExportCondition:this.state.ExportCondition,LocalPath:this.state.localPath,Level:this.state.level,Active:this.state.active};this.state.file_id?MMFAPI().updateRecord("MetaLocalSync",this.state.file_id,data,["uid"],function(result){_this3.setState({file_id:result.uid})}):MMFAPI().createRecord("MetaLocalSync",data,["uid"],function(result){_this3.setState({file_id:result.uid})})}},{key:"render",value:function(){var _this4=this,uidField=this.state.file_id?React.createElement(TextInput,{s:3,required:"required",value:this.state.file_id,disabled:"true"}):uidField,requireConfig={url:"/thirdpartylib/require.js",paths:{vs:"/thirdpartylib/monaco/min/vs"}},options={selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1};return React.createElement("div",{ref:this.topElement},React.createElement("style",null,'@import url("component/mmf/NewRoute/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("h4",{style:this.headerStyle},"Import/Export - Form"),React.createElement("div",{style:this.groupParentStyle},React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{labelText:"Table Name",placeholder:"Enter the Table Name",s:12,onChange:function(e){return _this4.onChange(e,"tablename")},label:"Table Name",required:"required"})),React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{labelText:"Relative Path",placeholder:"Enter Local Path...",s:6,onChange:function(e){return _this4.onChange(e,"path")},label:"Local Path",required:"required"}),uidField)),React.createElement("div",{style:this.groupParentStyle},React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{labelText:"Table Name",placeholder:"Enter the Table Name",s:12,onChange:function(e){return _this4.onChange(e,"tablename")},label:"Table Name",required:"required"})),React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{labelText:"Relative Path",placeholder:"Enter Local Path...",s:6,onChange:function(e){return _this4.onChange(e,"path")},label:"Local Path",required:"required"}),uidField)),React.createElement("div",{style:this.groupParentStyle},React.createElement("div",{style:this.groupElementStyle},React.createElement("label",{class:"bx--label"},"Import Script"),React.createElement(MonacoEditor,{width:this.state.importScriptEditor.width,height:this.state.importScriptEditor.height,language:"javascript",theme:"vs-dark",value:this.state.importScriptEditor.importScript,defaultValue:this.state.importScriptEditor.importScript,options:options,onChange:this.importScriptEditorCodeChanged,requireConfig:requireConfig,editorDidMount:this.importScriptEditorDidMount}))),React.createElement("div",{style:this.fieldStyle},React.createElement("label",{class:"bx--label"},"Export Script"),React.createElement(MonacoEditor,{width:this.state.exportScriptEditor.width,height:this.state.exportScriptEditor.height,language:"javascript",theme:"vs-dark",value:this.state.exportScriptEditor.exportScript,defaultValue:this.state.exportScriptEditor.exportScript,options:options,onChange:this.exportScriptEditorCodeChanged,requireConfig:requireConfig,editorDidMount:this.exportScriptEditorDidMount})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveAsNewData()}},"Save As"),React.createElement(Button,{waves:"light",onClick:function(e){return _this4.resetData()}},"Reset")))}}]),_NewFileSyncConfig}(React.Component),_export("NewFileSyncConfig",NewFileSyncConfig=function(props){return _NewFileSyncConfig}),_export("NewFileSyncConfig",NewFileSyncConfig),_export("default",NewFileSyncConfig),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/NewLaneSection.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-addons-cloud-react","carbon-components-react","lodash.clonedeep"],function(_export,_context2){"use strict";var _regeneratorRuntime,_extends,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Card,Button,TextInput,cloneDeep,_NewLaneSection_,NewLaneSection,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card,_carbonAddonsCloudReact.CardContent,_carbonAddonsCloudReact.CardFooter},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_NewLaneSection_=function(_React$Component){function _NewLaneSection_(props){_classCallCheck(this,_NewLaneSection_);var _this=_possibleConstructorReturn(this,(_NewLaneSection_.__proto__||Object.getPrototypeOf(_NewLaneSection_)).call(this,props));return _this.onExistingLane=!!props.laneid,_this.state={showForm:!1},_this.config=_this.props.config?JSON.parse(_this.props.config):{},_this.saveRecord=_this.saveRecord.bind(_this),$ele&&$ele.registerElement("IconPicker","studio","React"),_this}return _inherits(_NewLaneSection_,_React$Component),_createClass(_NewLaneSection_,[{key:"saveRecord",value:function(payload){var _this2=this;return new Promise(function(resolve,reject){_this2.config&&_this2.config.tableName?$script.getscript("mmf.saveRecord").then(function(_ref){var saveRecordFn=_ref.default,whereClause={or:[{uid:payload.uid},{Code:payload.Code}]};saveRecordFn(_this2.config.tableName,payload,whereClause).then(function(recordId){resolve(recordId)})}):resolve("")})}},{key:"render",value:function(){var _ref2,_this3=this,laneForm=(this.config&&JSON.stringify(this.props.config),React.createElement("div",null,this.props.laneid?null:React.createElement(TextInput,{id:"category_id",style:{width:"80%"},labelText:"Category",placeholder:"Enter Category Name",invalid:this.state.category_invalid,invalidText:"Value Required",onChange:function(e){_this3.setState({category:e.target.value})}}),React.createElement(TextInput,{id:"app_name",style:{width:"80%"},labelText:"Application Name",placeholder:"Enter Application Name...",invalid:this.state.appname_invalid,invalidText:"Value Required",onChange:function(e){_this3.setState({appName:e.target.value})}}),React.createElement(TextInput,{id:"app_code",style:{width:"80%"},labelText:"Code",placeholder:"Enter App Code..",invalid:this.state.appcode_invalid,invalidText:"Value Required",onChange:function(e){_this3.setState({appCode:e.target.value})}}),React.createElement(TextInput,{id:"app_desc",style:{width:"80%"},labelText:"Description",placeholder:"Enter the description...",invalid:this.state.appdescription_invalid,invalidText:"Value Required",onChange:function(e){_this3.setState({appDescription:e.target.value})}}),React.createElement("icon-picker",null),React.createElement("div",{style:{display:"flex",marginTop:5,marginBottom:5,width:"100%"}},React.createElement(Button,{style:{width:"40%",marginLeft:"2%",minWidth:"4rem"},onClick:function(e){_this3.setState({showForm:!1});var event=new Event("cancel",{bubbles:!0});event.simulated=!0,_this3.props.shadow.host.dispatchEvent(event)}},"Cancel"),React.createElement(Button,{style:{width:"40%",marginLeft:"2%",minWidth:"4rem"},onClick:(_ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(e){var validForm,recordPayload,recordId,scopes,event;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(validForm=!0,_this3.state.category||_this3.props.laneid||(_this3.setState({category_invalid:!0}),validForm=!1),_this3.state.appName||(_this3.setState({appname_invalid:!0}),validForm=!1),_this3.state.appCode||(_this3.setState({appcode_invalid:!0}),validForm=!1),_this3.state.appDescription||(_this3.setState({appdescription_invalid:!0}),validForm=!1),!validForm){_context.next=13;break}return recordPayload={Name:_this3.state.appName,Code:_this3.state.appCode,Description:_this3.state.appDescription,IconName:_this3.props.selectedIcon&&_this3.props.selectedIcon.iconName?_this3.props.selectedIcon.iconName:"archive/32",Category:_this3.props.laneid?_this3.props.laneid:_this3.state.category},_context.next=9,_this3.saveRecord(recordPayload);case 9:(recordId=_context.sent)?((scopes=(scopes=cloneDeep(_this3.props.scopes))||{})[_this3.state.appCode]=_extends({uid:recordId},recordPayload),_this3.props.updateStore({updates:{scopes:scopes}}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"New Application created successfully!"}),(event=new Event("cancel",{bubbles:!0})).simulated=!0,_this3.props.shadow.host.dispatchEvent(event)):((event=new Event("cancel",{bubbles:!0})).simulated=!0,_this3.props.shadow.host.dispatchEvent(event),_this3.props.addErrorMessage({title:"Error - ",subtitle:"Error saving the card, please try again...!"})),_context.next=14;break;case 13:_this3.props.addErrorMessage({title:"Error - ",subtitle:"Please fill the mandatory fields and try again...!"});case 14:case"end":return _context.stop()}},_callee,_this3)})),function(_x){return _ref2.apply(this,arguments)})},"Create")))),conditionalLaneForm=this.state.showForm?laneForm:null,newLaneForm=React.createElement("div",null,React.createElement(Button,{style:{color:"white",textAlign:"center",backgroundColor:"#5a805f",width:"100%"},onClick:function(e){_this3.setState({showForm:!0})}},"Add Application & Category"),conditionalLaneForm);return React.createElement("div",null,React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement(Card,{style:{height:"auto",minHeight:"3rem",width:this.onExistingLane?"15rem":"18rem",backgroundColor:"white",marginTop:5}},this.onExistingLane?laneForm:newLaneForm))}}]),_NewLaneSection_}(React.Component),_export("NewLaneSection",NewLaneSection=function(props){return _NewLaneSection_}),_export("NewLaneSection",NewLaneSection),_export("default",NewLaneSection),_export("states",states=[{KeyName:"selectedIcon",AccessPath:"selectedIcon",DefaultValue:'{"selectedIcon": {"iconName": "apps/16"}}'},{KeyName:"scopes",AccessPath:"scopes",DefaultValue:'{"scopes": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/NewLaneSection/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-addons-cloud-react","carbon-components-react","lodash.clonedeep"],function(_export,_context2){"use strict";var _regeneratorRuntime,_extends,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Card,Button,TextInput,cloneDeep,_NewLaneSection_,NewLaneSection;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card,_carbonAddonsCloudReact.CardContent,_carbonAddonsCloudReact.CardFooter},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_NewLaneSection_=function(_React$Component){function _NewLaneSection_(props){_classCallCheck(this,_NewLaneSection_);var _this=_possibleConstructorReturn(this,(_NewLaneSection_.__proto__||Object.getPrototypeOf(_NewLaneSection_)).call(this,props));return _this.onExistingLane=!!props.laneid,_this.state={showForm:!1},_this.config=_this.props.config?JSON.parse(_this.props.config):{},_this.saveRecord=_this.saveRecord.bind(_this),$ele&&$ele.registerElement("IconPicker","studio","React"),_this}return _inherits(_NewLaneSection_,_React$Component),_createClass(_NewLaneSection_,[{key:"saveRecord",value:function(payload){var _this2=this;return new Promise(function(resolve,reject){_this2.config&&_this2.config.tableName?$script.getscript("mmf.saveRecord").then(function(_ref){var saveRecordFn=_ref.default,whereClause={or:[{uid:payload.uid},{Code:payload.Code}]};saveRecordFn(_this2.config.tableName,payload,whereClause).then(function(recordId){resolve(recordId)})}):resolve("")})}},{key:"render",value:function(){var _ref2,_this3=this,laneForm=(this.config&&JSON.stringify(this.props.config),React.createElement("div",null,this.props.laneid?null:React.createElement(TextInput,{id:"category_id",style:{width:"80%"},labelText:"Category",placeholder:"Enter Category Name",invalid:this.state.category_invalid,invalidText:"Value Required",onChange:function(e){_this3.setState({category:e.target.value})}}),React.createElement(TextInput,{id:"app_name",style:{width:"80%"},labelText:"Application Name",placeholder:"Enter Application Name...",invalid:this.state.appname_invalid,invalidText:"Value Required",onChange:function(e){_this3.setState({appName:e.target.value})}}),React.createElement(TextInput,{id:"app_code",style:{width:"80%"},labelText:"Code",placeholder:"Enter App Code..",invalid:this.state.appcode_invalid,invalidText:"Value Required",onChange:function(e){_this3.setState({appCode:e.target.value})}}),React.createElement(TextInput,{id:"app_desc",style:{width:"80%"},labelText:"Description",placeholder:"Enter the description...",invalid:this.state.appdescription_invalid,invalidText:"Value Required",onChange:function(e){_this3.setState({appDescription:e.target.value})}}),React.createElement("icon-picker",null),React.createElement("div",{style:{display:"flex",marginTop:5,marginBottom:5,width:"100%"}},React.createElement(Button,{style:{width:"40%",marginLeft:"2%",minWidth:"4rem"},onClick:function(e){_this3.setState({showForm:!1});var event=new Event("cancel",{bubbles:!0});event.simulated=!0,_this3.props.shadow.host.dispatchEvent(event)}},"Cancel"),React.createElement(Button,{style:{width:"40%",marginLeft:"2%",minWidth:"4rem"},onClick:(_ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(e){var validForm,recordPayload,recordId,scopes,event;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(validForm=!0,_this3.state.category||_this3.props.laneid||(_this3.setState({category_invalid:!0}),validForm=!1),_this3.state.appName||(_this3.setState({appname_invalid:!0}),validForm=!1),_this3.state.appCode||(_this3.setState({appcode_invalid:!0}),validForm=!1),_this3.state.appDescription||(_this3.setState({appdescription_invalid:!0}),validForm=!1),!validForm){_context.next=13;break}return recordPayload={Name:_this3.state.appName,Code:_this3.state.appCode,Description:_this3.state.appDescription,IconName:_this3.props.selectedIcon&&_this3.props.selectedIcon.iconName?_this3.props.selectedIcon.iconName:"archive/32",Category:_this3.props.laneid?_this3.props.laneid:_this3.state.category},_context.next=9,_this3.saveRecord(recordPayload);case 9:(recordId=_context.sent)?((scopes=(scopes=cloneDeep(_this3.props.scopes))||{})[_this3.state.appCode]=_extends({uid:recordId},recordPayload),_this3.props.updateStore({updates:{scopes:scopes}}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"New Application created successfully!"}),(event=new Event("cancel",{bubbles:!0})).simulated=!0,_this3.props.shadow.host.dispatchEvent(event)):((event=new Event("cancel",{bubbles:!0})).simulated=!0,_this3.props.shadow.host.dispatchEvent(event),_this3.props.addErrorMessage({title:"Error - ",subtitle:"Error saving the card, please try again...!"})),_context.next=14;break;case 13:_this3.props.addErrorMessage({title:"Error - ",subtitle:"Please fill the mandatory fields and try again...!"});case 14:case"end":return _context.stop()}},_callee,_this3)})),function(_x){return _ref2.apply(this,arguments)})},"Create")))),conditionalLaneForm=this.state.showForm?laneForm:null,newLaneForm=React.createElement("div",null,React.createElement(Button,{style:{color:"white",textAlign:"center",backgroundColor:"#5a805f",width:"100%"},onClick:function(e){_this3.setState({showForm:!0})}},"Add Application & Category"),conditionalLaneForm);return React.createElement("div",null,React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement(Card,{style:{height:"auto",minHeight:"3rem",width:this.onExistingLane?"15rem":"18rem",backgroundColor:"white",marginTop:5}},this.onExistingLane?laneForm:newLaneForm))}}]),_NewLaneSection_}(React.Component),_export("NewLaneSection",NewLaneSection=function(props){return _NewLaneSection_}),_export("NewLaneSection",NewLaneSection)}}}),System.register("component/mmf/NewPageAction.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/persist/MMFAPI.js","carbon-components-react","lodash.debounce","@carbon/icons-react/lib/terminal/32","@carbon/icons-react/lib/account/32"],function(_export,_context4){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Button,Checkbox,TextInput,debounce,Editor32,Form32,_NewPageAction_,NewPageAction,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,Checkbox=_carbonComponentsReact.Checkbox,TextInput=_carbonComponentsReact.TextInput},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_carbonIconsReactLibTerminal){Editor32=_carbonIconsReactLibTerminal.default},function(_carbonIconsReactLibAccount){Form32=_carbonIconsReactLibAccount.default}],execute:function(){_NewPageAction_=function(_React$Component){function _NewPageAction_(props,context){_classCallCheck(this,_NewPageAction_);var _this=_possibleConstructorReturn(this,(_NewPageAction_.__proto__||Object.getPrototypeOf(_NewPageAction_)).call(this,props)),rowinfo=_this.props.rowinfo?JSON.parse(_this.props.rowinfo):{};return _this.defaultCode="(function() {\n\t//$pageData, $widgets, $ctx\n})",_this.state={file_id:rowinfo.uid,Name:rowinfo.Name,Definition:rowinfo.Definition?rowinfo.Definition:_this.defaultCode,Order:rowinfo.Order,Active:!rowinfo||rowinfo.Active,isNewRecord:!rowinfo||!rowinfo.uid,reload:!1,varname:rowinfo.uid?"pageaction_"+rowinfo.uid:"pageaction_"+Date.now(),propKey:rowinfo.uid?rowinfo.uid:Date.now()},_this.topElement=React.createRef(),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.updateCode=_this.updateCode.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.saveFormDebounced=debounce(function(){_this.saveData()},1e3),_this.saveAsFormDebounced=debounce(function(){_this.saveAsNewData()},1e3),_this.resetDataDebounced=debounce(function(){_this.resetData()},1e3),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%",width:"100%",textAlign:"left"},_this.modalButtonGroup={position:"absolute",marginRight:"5%",float:"right",right:0,bottom:20},$ele.registerElement("SrsCodeEditor","studio","React"),_this}return _inherits(_NewPageAction_,_React$Component),_createClass(_NewPageAction_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.state.file_id){_context.next=5;break}return _context.next=3,$qry.run("mmf.getPageActionById",{uid:this.state.file_id});case 3:(result=_context.sent)&&this.setState({Name:result.Name,Order:result.Order,Active:result.Active,Definition:result.Definition?result.Definition:this.defaultCode});case 5:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(prevProps.rowinfo==this.props.rowinfo){_context2.next=4;break}return _context2.next=4,this.updateCode(prevProps);case 4:!_.isEqual(prevProps.editorCodes,this.props.editorCodes)&&this.props.editorCodes[this.state.varname]&&this.setState({Definition:this.props.editorCodes[this.state.varname]});case 5:case"end":return _context2.stop()}},_callee2,this)}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"updateCode",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(prevProps){var rowinfo,prevRowInfo,payload,result;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(rowinfo=this.props.rowinfo?JSON.parse(this.props.rowinfo):{},prevRowInfo=prevProps.rowinfo?JSON.parse(prevProps.rowinfo):{},payload={file_id:rowinfo.uid,Name:rowinfo.Name,Definition:rowinfo.Definition?rowinfo.Definition:this.defaultCode,Order:rowinfo.Order||"",Active:rowinfo.Active||!0,isNewRecord:!rowinfo||!rowinfo.uid},rowinfo.uid==prevRowInfo.uid||!rowinfo.uid){_context3.next=10;break}return _context3.next=6,$qry.run("mmf.getPageActionById",{uid:rowinfo.uid});case 6:(result=_context3.sent)&&(payload.file_id=result.uid||"",payload.Name=result.Name,payload.Definition=result.Definition?result.Definition:this.defaultCode,payload.Order=result.Order,payload.Active=result.Active,payload.isNewRecord=!1),_context3.next=15;break;case 10:payload.Name="",payload.Order="",payload.Active=!0,payload.Definition=this.defaultCode,payload.isNewRecord=!0;case 15:this.setState(_extends({},payload));case 16:case"end":return _context3.stop()}},_callee3,this)}));return function(_x3){return _ref3.apply(this,arguments)}}()},{key:"codeChanged",value:function(newValue){this.setState({Definition:newValue})}},{key:"onChange",value:function(e,type){var newValue=e.target.value,stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",Order:"",Active:"",Definition:""})}},{key:"saveAsNewData",value:function(){var _this2=this,data={Name:this.state.Name,Scope:this.props.currentscope,Order:this.state.Order,Active:this.state.Active,Slide:this.props.active_page_id,Definition:this.state.Definition};this.state.Definition&&this.state.Definition.indexOf("'")>-1?this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."}):MMFAPI().createRecord("MetaSlideAction",data,["uid"],function(result){result&&result.uid?(_this2.setState({file_id:result.uid,isNewRecord:!1,Active:!_this2.state.Active||_this2.state.Active}),_this2.props.addFlashMessage({title:"Success - ",subtitle:"Page action created successfully."})):_this2.props.addErrorMessage({title:"Error - ",subtitle:"Provide the mandatory fields and try again."})})}},{key:"saveData",value:function(){var _this3=this,data={Name:this.state.Name,Scope:this.props.currentscope,Order:this.state.Order,Active:this.state.Active,Slide:this.props.active_page_id,Definition:this.state.Definition};this.state.Definition&&this.state.Definition.indexOf("'")>-1?this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."}):this.state.file_id?MMFAPI().updateRecord("MetaSlideAction",this.state.file_id,data,["uid"],function(result){result&&result.uid?(_this3.setState({file_id:result.uid}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page action updated successfully."})):result&&!result.errors||_this3.props.addErrorMessage({title:"Error - ",subtitle:"Page action update operation failed."})}):MMFAPI().createRecord("MetaSlideAction",data,["uid"],function(result){result&&result.uid?(_this3.setState({file_id:result.uid,isNewRecord:!1,Active:!_this3.state.Active||_this3.state.Active}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page action created successfully."})):result&&result.errors&&_this3.props.addErrorMessage({title:"Error - ",subtitle:"Page action create operation failed."})})}},{key:"render",value:function(){var _this4=this,uidField=this.state.file_id?React.createElement(TextInput,{s:3,required:"required",value:this.state.file_id,disabled:"true"}):uidField,normalView=React.createElement(React.Fragment,null,React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Action Name...",onChange:function(e){return _this4.onChange(e,"Name")},labelText:"Page Action Name",required:"required",value:this.state.Name}),React.createElement(TextInput,{placeholder:"Enter Order",onChange:function(e){return _this4.onChange(e,"Order")},labelText:"Order",value:this.state.Order})),React.createElement("div",{style:this.groupElementStyle},React.createElement(Checkbox,{labelText:"Active",id:"sr-check-bx",onChange:function(value){_this4.setState({Active:value})},checked:this.state.Active})),React.createElement("div",{style:{marginBottom:"2%",paddingTop:20,width:"90%",clear:"both",height:"65vh",textAlign:"left"}},React.createElement("srs-code-editor",{key:this.state.file_id?this.state.file_id:"-1",editorCode:this.state.Definition,varname:this.state.varname,style:{height:"inherit"}})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",size:"small",onClick:function(e){return _this4.saveFormDebounced()}},"Save"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.saveAsFormDebounced()}},"Save As"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.resetDataDebounced()}},"Reset"))),ideView=React.createElement("code-editor",{recordid:this.state.file_id,contenttype:"page_action"});return React.createElement("div",{ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/codemirror.css");'),this.state.isNewRecord?React.createElement("h4",{style:this.headerStyle},"New Page Action - Form"):React.createElement("h4",{style:this.headerStyle},"Page Action - Edit Form"),this.state.isNewRecord?null:this.state.showingIde?React.createElement(Form32,{style:{position:"absolute",top:0,right:20},onClick:function(e){return _this4.setState({showingIde:!1})}}):React.createElement(Editor32,{style:{position:"absolute",top:0,right:20},onClick:function(e){return _this4.setState({showingIde:!0})}}),this.state.showingIde?ideView:normalView)}}]),_NewPageAction_}(React.Component),_export("NewPageAction",NewPageAction=function(props){return _NewPageAction_}),_export("NewPageAction",NewPageAction),_export("default",NewPageAction),_export("states",states=[{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'},{KeyName:"editorCodes",AccessPath:"editor.codes",DefaultValue:'{"editor": {"codes": {}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/NewPageAction/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/persist/MMFAPI.js","carbon-components-react","lodash.debounce","@carbon/icons-react/lib/terminal/32","@carbon/icons-react/lib/account/32"],function(_export,_context4){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Button,Checkbox,TextInput,debounce,Editor32,Form32,_NewPageAction_,NewPageAction;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,Checkbox=_carbonComponentsReact.Checkbox,TextInput=_carbonComponentsReact.TextInput},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_carbonIconsReactLibTerminal){Editor32=_carbonIconsReactLibTerminal.default},function(_carbonIconsReactLibAccount){Form32=_carbonIconsReactLibAccount.default}],execute:function(){_NewPageAction_=function(_React$Component){function _NewPageAction_(props,context){_classCallCheck(this,_NewPageAction_);var _this=_possibleConstructorReturn(this,(_NewPageAction_.__proto__||Object.getPrototypeOf(_NewPageAction_)).call(this,props)),rowinfo=_this.props.rowinfo?JSON.parse(_this.props.rowinfo):{};return _this.defaultCode="(function() {\n\t//$pageData, $widgets, $ctx\n})",_this.state={file_id:rowinfo.uid,Name:rowinfo.Name,Definition:rowinfo.Definition?rowinfo.Definition:_this.defaultCode,Order:rowinfo.Order,Active:!rowinfo||rowinfo.Active,isNewRecord:!rowinfo||!rowinfo.uid,reload:!1,varname:rowinfo.uid?"pageaction_"+rowinfo.uid:"pageaction_"+Date.now(),propKey:rowinfo.uid?rowinfo.uid:Date.now()},_this.topElement=React.createRef(),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.updateCode=_this.updateCode.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.saveFormDebounced=debounce(function(){_this.saveData()},1e3),_this.saveAsFormDebounced=debounce(function(){_this.saveAsNewData()},1e3),_this.resetDataDebounced=debounce(function(){_this.resetData()},1e3),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%",width:"100%",textAlign:"left"},_this.modalButtonGroup={position:"absolute",marginRight:"5%",float:"right",right:0,bottom:20},$ele.registerElement("SrsCodeEditor","studio","React"),_this}return _inherits(_NewPageAction_,_React$Component),_createClass(_NewPageAction_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.state.file_id){_context.next=5;break}return _context.next=3,$qry.run("mmf.getPageActionById",{uid:this.state.file_id});case 3:(result=_context.sent)&&this.setState({Name:result.Name,Order:result.Order,Active:result.Active,Definition:result.Definition?result.Definition:this.defaultCode});case 5:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(prevProps.rowinfo==this.props.rowinfo){_context2.next=4;break}return _context2.next=4,this.updateCode(prevProps);case 4:!_.isEqual(prevProps.editorCodes,this.props.editorCodes)&&this.props.editorCodes[this.state.varname]&&this.setState({Definition:this.props.editorCodes[this.state.varname]});case 5:case"end":return _context2.stop()}},_callee2,this)}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"updateCode",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(prevProps){var rowinfo,prevRowInfo,payload,result;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(rowinfo=this.props.rowinfo?JSON.parse(this.props.rowinfo):{},prevRowInfo=prevProps.rowinfo?JSON.parse(prevProps.rowinfo):{},payload={file_id:rowinfo.uid,Name:rowinfo.Name,Definition:rowinfo.Definition?rowinfo.Definition:this.defaultCode,Order:rowinfo.Order||"",Active:rowinfo.Active||!0,isNewRecord:!rowinfo||!rowinfo.uid},rowinfo.uid==prevRowInfo.uid||!rowinfo.uid){_context3.next=10;break}return _context3.next=6,$qry.run("mmf.getPageActionById",{uid:rowinfo.uid});case 6:(result=_context3.sent)&&(payload.file_id=result.uid||"",payload.Name=result.Name,payload.Definition=result.Definition?result.Definition:this.defaultCode,payload.Order=result.Order,payload.Active=result.Active,payload.isNewRecord=!1),_context3.next=15;break;case 10:payload.Name="",payload.Order="",payload.Active=!0,payload.Definition=this.defaultCode,payload.isNewRecord=!0;case 15:this.setState(_extends({},payload));case 16:case"end":return _context3.stop()}},_callee3,this)}));return function(_x3){return _ref3.apply(this,arguments)}}()},{key:"codeChanged",value:function(newValue){this.setState({Definition:newValue})}},{key:"onChange",value:function(e,type){var newValue=e.target.value,stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",Order:"",Active:"",Definition:""})}},{key:"saveAsNewData",value:function(){var _this2=this,data={Name:this.state.Name,Scope:this.props.currentscope,Order:this.state.Order,Active:this.state.Active,Slide:this.props.active_page_id,Definition:this.state.Definition};this.state.Definition&&this.state.Definition.indexOf("'")>-1?this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."}):MMFAPI().createRecord("MetaSlideAction",data,["uid"],function(result){result&&result.uid?(_this2.setState({file_id:result.uid,isNewRecord:!1,Active:!_this2.state.Active||_this2.state.Active}),_this2.props.addFlashMessage({title:"Success - ",subtitle:"Page action created successfully."})):_this2.props.addErrorMessage({title:"Error - ",subtitle:"Provide the mandatory fields and try again."})})}},{key:"saveData",value:function(){var _this3=this,data={Name:this.state.Name,Scope:this.props.currentscope,Order:this.state.Order,Active:this.state.Active,Slide:this.props.active_page_id,Definition:this.state.Definition};this.state.Definition&&this.state.Definition.indexOf("'")>-1?this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."}):this.state.file_id?MMFAPI().updateRecord("MetaSlideAction",this.state.file_id,data,["uid"],function(result){result&&result.uid?(_this3.setState({file_id:result.uid}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page action updated successfully."})):result&&!result.errors||_this3.props.addErrorMessage({title:"Error - ",subtitle:"Page action update operation failed."})}):MMFAPI().createRecord("MetaSlideAction",data,["uid"],function(result){result&&result.uid?(_this3.setState({file_id:result.uid,isNewRecord:!1,Active:!_this3.state.Active||_this3.state.Active}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page action created successfully."})):result&&result.errors&&_this3.props.addErrorMessage({title:"Error - ",subtitle:"Page action create operation failed."})})}},{key:"render",value:function(){var _this4=this,uidField=this.state.file_id?React.createElement(TextInput,{s:3,required:"required",value:this.state.file_id,disabled:"true"}):uidField,normalView=React.createElement(React.Fragment,null,React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Action Name...",onChange:function(e){return _this4.onChange(e,"Name")},labelText:"Page Action Name",required:"required",value:this.state.Name}),React.createElement(TextInput,{placeholder:"Enter Order",onChange:function(e){return _this4.onChange(e,"Order")},labelText:"Order",value:this.state.Order})),React.createElement("div",{style:this.groupElementStyle},React.createElement(Checkbox,{labelText:"Active",id:"sr-check-bx",onChange:function(value){_this4.setState({Active:value})},checked:this.state.Active})),React.createElement("div",{style:{marginBottom:"2%",paddingTop:20,width:"90%",clear:"both",height:"65vh",textAlign:"left"}},React.createElement("srs-code-editor",{key:this.state.file_id?this.state.file_id:"-1",editorCode:this.state.Definition,varname:this.state.varname,style:{height:"inherit"}})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",size:"small",onClick:function(e){return _this4.saveFormDebounced()}},"Save"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.saveAsFormDebounced()}},"Save As"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.resetDataDebounced()}},"Reset"))),ideView=React.createElement("code-editor",{recordid:this.state.file_id,contenttype:"page_action"});return React.createElement("div",{ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/codemirror.css");'),this.state.isNewRecord?React.createElement("h4",{style:this.headerStyle},"New Page Action - Form"):React.createElement("h4",{style:this.headerStyle},"Page Action - Edit Form"),this.state.isNewRecord?null:this.state.showingIde?React.createElement(Form32,{style:{position:"absolute",top:0,right:20},onClick:function(e){return _this4.setState({showingIde:!1})}}):React.createElement(Editor32,{style:{position:"absolute",top:0,right:20},onClick:function(e){return _this4.setState({showingIde:!0})}}),this.state.showingIde?ideView:normalView)}}]),_NewPageAction_}(React.Component),_export("NewPageAction",NewPageAction=function(props){return _NewPageAction_}),_export("NewPageAction",NewPageAction)}}}),System.register("component/mmf/NewRelationship.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/persist/MMFAPI.js","thirdpartylib/materialize.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Select,SelectItem,Button,TextInput,_NewRelationship,NewRelationship,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_thirdpartylibMaterializeJs){},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewRelationship=function(_React$Component){function _NewRelationship(props,context){_classCallCheck(this,_NewRelationship);var _this=_possibleConstructorReturn(this,(_NewRelationship.__proto__||Object.getPrototypeOf(_NewRelationship)).call(this,props));return _this.state={Name:"",PrimaryModelObj:{},RelatedModelObj:{},PrimaryModelName:"",RelatedModelName:"",RelationshipType:"",ForeignKey:"",ForeignKeyAlias:"",Models:{},ModelNames:{}},_this.loadModels=_this.loadModels.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.primaryModelUpdated=_this.primaryModelUpdated.bind(_this),_this.relatedModelUpdated=_this.relatedModelUpdated.bind(_this),_this.relationshipTypeUpdated=_this.relationshipTypeUpdated.bind(_this),_this.relationshipNameUpdated=_this.relationshipNameUpdated.bind(_this),_this.foreignKeyUpdated=_this.foreignKeyUpdated.bind(_this),_this.foreignKeyAliasUpdated=_this.foreignKeyAliasUpdated.bind(_this),_this.loadModels(),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%"},_this.modalButtonGroup={marginLeft:"60%",position:"relative"},_this}return _inherits(_NewRelationship,_React$Component),_createClass(_NewRelationship,[{key:"loadModels",value:function(){var self=this;MMFAPI().search("MetaModels","{}",function(results){var modelIds={},modelNames={},allModels=[].concat(results,[{Name:"MetaModel"},{Name:"MetaComponent"},{Name:"MetaComponentAction"},{Name:"MetaComponentState"},{Name:"MetaOperationHook"},{Name:"MetaProperty"},{Name:"MetaQuery"},{Name:"MetaRelationship"},{Name:"MetaResource"},{Name:"MetaReusableScript"},{Name:"MetaRoute"},{Name:"ACL"},{Name:"AccessToken"},{Name:"SrsteeUser"}]);allModels&&(allModels.forEach(function(modelObj){modelIds[modelObj.Name]={Name:modelObj.Name},modelNames[modelObj.Name]=null}),modelIds&&self.setState({Models:modelIds,ModelNames:modelNames}))})}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",PrimaryModel:"",RelatedModel:"",ModelName:"",ModelObj:{}})}},{key:"saveAsNewData",value:function(){var _this2=this;console.log(this.state);var data={Name:this.state.Name,Table1:this.state.PrimaryModelName,Table2:this.state.RelatedModelName,RelationType:this.state.RelationshipType,ForeignKey:this.state.ForeignKey,ForeignKeyAlias:this.state.ForeignKeyAlias};MMFAPI().createRecord("MetaRelationship",data,["uid"],function(result){_this2.setState({file_id:result.uid}),_this2.props.addFlashMessage({title:"Success - ",subtitle:"Relationship created."})})}},{key:"saveData",value:function(){var _this3=this,data={Name:this.state.Name,Table1:this.state.PrimaryModelName,Table2:this.state.RelatedModelName,RelationType:this.state.RelationshipType,ForeignKey:this.state.ForeignKey,ForeignKeyAlias:this.state.ForeignKeyAlias};this.state.file_id?MMFAPI().updateRecord("MetaRelationship",this.state.file_id,data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Relationship updated."})}):MMFAPI().createRecord("MetaRelationship",data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Relationship created."})})}},{key:"primaryModelUpdated",value:function(modelValue){this.setState({PrimaryModelName:modelValue,PrimaryModelObj:this.state.Models[modelValue]})}},{key:"relatedModelUpdated",value:function(modelValue){this.setState({RelatedModelName:modelValue,RelatedModelObj:this.state.Models[modelValue]})}},{key:"relationshipTypeUpdated",value:function(e){var newValue=e.target.value;this.setState({RelationshipType:newValue})}},{key:"relationshipNameUpdated",value:function(e){var newValue=e.target.value;this.setState({Name:newValue})}},{key:"foreignKeyUpdated",value:function(e){var newValue=e.target.value;this.setState({ForeignKey:newValue})}},{key:"foreignKeyAliasUpdated",value:function(e){var newValue=e.target.value;this.setState({ForeignKeyAlias:newValue})}},{key:"render",value:function(){var _this4=this,modelItems=[];this.state.ModelNames&&this.state.ModelNames.map(function(modelItem){return modelItems.push(React.createElement(SelectItem,{value:modelItem.id,text:modelItem.Label}))});var uidField=this.state.file_id?React.createElement(TextInput,{s:3,required:"required",value:this.state.file_id,disabled:"true"}):uidField;return React.createElement("div",{ref:this.topElement},React.createElement("style",null,'@import url("component/mmf/NewRoute/Style.css");'),React.createElement("h4",{style:this.headerStyle},"New Relationship - Form"),React.createElement("div",{style:this.groupParentStyle},React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Relationship Name...",onChange:function(e){return _this4.onChange(e,"Name")},labelText:"Relationship Name",required:"required",value:this.state.Name}),uidField),React.createElement("div",{style:this.groupElementStyle},React.createElement(Select,{labelText:"Component",onChange:function(e){var value=e.target.value;_this4.setState({ComponentId:value})},placeholder:"Choose the component...",value:this.state.PrimaryModelName,id:"selectfield",defaultValue:this.state.ModelNames[0].id},modelItems))),React.createElement("div",{style:this.fieldStyle},React.createElement(TextInput,{placeholder:"Enter Route Path...",onChange:function(e){return _this4.onChange(e,"Path")},labelText:"Route Path",required:"required",value:this.state.Path})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveAsNewData()}},"Save As"),React.createElement(Button,{waves:"light",onClick:function(e){return _this4.resetData()}},"Reset")))}}]),_NewRelationship}(React.Component),_export("NewRelationship",NewRelationship=function(props){return _NewRelationship}),_export("NewRelationship",NewRelationship),_export("default",NewRelationship),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/NewRelationship/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/persist/MMFAPI.js","thirdpartylib/materialize.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Select,SelectItem,Button,TextInput,_NewRelationship,NewRelationship;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_thirdpartylibMaterializeJs){},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewRelationship=function(_React$Component){function _NewRelationship(props,context){_classCallCheck(this,_NewRelationship);var _this=_possibleConstructorReturn(this,(_NewRelationship.__proto__||Object.getPrototypeOf(_NewRelationship)).call(this,props));return _this.state={Name:"",PrimaryModelObj:{},RelatedModelObj:{},PrimaryModelName:"",RelatedModelName:"",RelationshipType:"",ForeignKey:"",ForeignKeyAlias:"",Models:{},ModelNames:{}},_this.loadModels=_this.loadModels.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.primaryModelUpdated=_this.primaryModelUpdated.bind(_this),_this.relatedModelUpdated=_this.relatedModelUpdated.bind(_this),_this.relationshipTypeUpdated=_this.relationshipTypeUpdated.bind(_this),_this.relationshipNameUpdated=_this.relationshipNameUpdated.bind(_this),_this.foreignKeyUpdated=_this.foreignKeyUpdated.bind(_this),_this.foreignKeyAliasUpdated=_this.foreignKeyAliasUpdated.bind(_this),_this.loadModels(),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%"},_this.modalButtonGroup={marginLeft:"60%",position:"relative"},_this}return _inherits(_NewRelationship,_React$Component),_createClass(_NewRelationship,[{key:"loadModels",value:function(){var self=this;MMFAPI().search("MetaModels","{}",function(results){var modelIds={},modelNames={},allModels=[].concat(results,[{Name:"MetaModel"},{Name:"MetaComponent"},{Name:"MetaComponentAction"},{Name:"MetaComponentState"},{Name:"MetaOperationHook"},{Name:"MetaProperty"},{Name:"MetaQuery"},{Name:"MetaRelationship"},{Name:"MetaResource"},{Name:"MetaReusableScript"},{Name:"MetaRoute"},{Name:"ACL"},{Name:"AccessToken"},{Name:"SrsteeUser"}]);allModels&&(allModels.forEach(function(modelObj){modelIds[modelObj.Name]={Name:modelObj.Name},modelNames[modelObj.Name]=null}),modelIds&&self.setState({Models:modelIds,ModelNames:modelNames}))})}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",PrimaryModel:"",RelatedModel:"",ModelName:"",ModelObj:{}})}},{key:"saveAsNewData",value:function(){var _this2=this;console.log(this.state);var data={Name:this.state.Name,Table1:this.state.PrimaryModelName,Table2:this.state.RelatedModelName,RelationType:this.state.RelationshipType,ForeignKey:this.state.ForeignKey,ForeignKeyAlias:this.state.ForeignKeyAlias};MMFAPI().createRecord("MetaRelationship",data,["uid"],function(result){_this2.setState({file_id:result.uid}),_this2.props.addFlashMessage({title:"Success - ",subtitle:"Relationship created."})})}},{key:"saveData",value:function(){var _this3=this,data={Name:this.state.Name,Table1:this.state.PrimaryModelName,Table2:this.state.RelatedModelName,RelationType:this.state.RelationshipType,ForeignKey:this.state.ForeignKey,ForeignKeyAlias:this.state.ForeignKeyAlias};this.state.file_id?MMFAPI().updateRecord("MetaRelationship",this.state.file_id,data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Relationship updated."})}):MMFAPI().createRecord("MetaRelationship",data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Relationship created."})})}},{key:"primaryModelUpdated",value:function(modelValue){this.setState({PrimaryModelName:modelValue,PrimaryModelObj:this.state.Models[modelValue]})}},{key:"relatedModelUpdated",value:function(modelValue){this.setState({RelatedModelName:modelValue,RelatedModelObj:this.state.Models[modelValue]})}},{key:"relationshipTypeUpdated",value:function(e){var newValue=e.target.value;this.setState({RelationshipType:newValue})}},{key:"relationshipNameUpdated",value:function(e){var newValue=e.target.value;this.setState({Name:newValue})}},{key:"foreignKeyUpdated",value:function(e){var newValue=e.target.value;this.setState({ForeignKey:newValue})}},{key:"foreignKeyAliasUpdated",value:function(e){var newValue=e.target.value;this.setState({ForeignKeyAlias:newValue})}},{key:"render",value:function(){var _this4=this,modelItems=[];this.state.ModelNames&&this.state.ModelNames.map(function(modelItem){return modelItems.push(React.createElement(SelectItem,{value:modelItem.id,text:modelItem.Label}))});var uidField=this.state.file_id?React.createElement(TextInput,{s:3,required:"required",value:this.state.file_id,disabled:"true"}):uidField;return React.createElement("div",{ref:this.topElement},React.createElement("style",null,'@import url("component/mmf/NewRoute/Style.css");'),React.createElement("h4",{style:this.headerStyle},"New Relationship - Form"),React.createElement("div",{style:this.groupParentStyle},React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Relationship Name...",onChange:function(e){return _this4.onChange(e,"Name")},labelText:"Relationship Name",required:"required",value:this.state.Name}),uidField),React.createElement("div",{style:this.groupElementStyle},React.createElement(Select,{labelText:"Component",onChange:function(e){var value=e.target.value;_this4.setState({ComponentId:value})},placeholder:"Choose the component...",value:this.state.PrimaryModelName,id:"selectfield",defaultValue:this.state.ModelNames[0].id},modelItems))),React.createElement("div",{style:this.fieldStyle},React.createElement(TextInput,{placeholder:"Enter Route Path...",onChange:function(e){return _this4.onChange(e,"Path")},labelText:"Route Path",required:"required",value:this.state.Path})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveAsNewData()}},"Save As"),React.createElement(Button,{waves:"light",onClick:function(e){return _this4.resetData()}},"Reset")))}}]),_NewRelationship}(React.Component),_export("NewRelationship",NewRelationship=function(props){return _NewRelationship}),_export("NewRelationship",NewRelationship)}}}),System.register("component/mmf/NewRoute.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/persist/MMFAPI.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MonacoEditor,MMFAPI,Button,TextInput,_NewRoute,NewRoute,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewRoute=function(_React$Component){function _NewRoute(props,context){_classCallCheck(this,_NewRoute);var _this=_possibleConstructorReturn(this,(_NewRoute.__proto__||Object.getPrototypeOf(_NewRoute)).call(this,props));return _this.state={htmlDefinitionEditor:{width:.6*screen.width,height:"350",htmlCode:_this.props.rowInfo?_this.props.rowInfo.Definition:'<h1>Hello world, do not use single quotes in this html</h1>\n<script>console.log("Hello World!");<\/script>'}},_this.topElement=React.createRef(),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.htmlDefinitionEditorDidMount=_this.htmlDefinitionEditorDidMount.bind(_this),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%"},_this.modalButtonGroup={marginLeft:"60%",position:"relative"},_this}return _inherits(_NewRoute,_React$Component),_createClass(_NewRoute,[{key:"htmlDefinitionEditorDidMount",value:function(editor,monaco){var self=this,saveEditorValue=editor.setValue.bind(editor);editor.setValue=function(val){saveEditorValue(val),self.state.htmlDefinitionEditor?(editor.setPosition(self.state.htmlDefinitionEditor.position),editor.revealLine(self.state.htmlDefinitionEditor.position.lineNumber),editor.revealLineInCenter(self.state.htmlDefinitionEditor.position.lineNumber)):(editor.setPosition({lineNumber:1,column:1}),editor.revealLine(1),editor.revealLineInCenter(15)),editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(editor._themeService._styleElement),editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"codeChanged",value:function(newValue,e){var editor=this.state.htmlDefinitionEditor;editor.htmlCode=newValue,this.setState({htmlDefinitionEditor:editor})}},{key:"onChange",value:function(e,type){var newValue="";e&&(newValue="checkbox"===e.target.type?e.target.checked:e.target.value);var stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",Path:"",Exact:"",Scope:"",Object:"",ObjectScope:"",ComponentName:"",ComponentObj:{}})}},{key:"saveAsNewData",value:function(){var _this2=this,data={Name:this.state.Name,Scope:this.state.Scope,Path:this.state.Path,HTML:this.state.htmlDefinitionEditor.htmlCode};MMFAPI().createRecord("MetaRoute",data,["uid"],function(result){_this2.setState({file_id:result.uid})})}},{key:"saveData",value:function(){var _this3=this,data={Name:this.state.Name,Scope:this.state.Scope,Path:this.state.Path,HTML:this.state.htmlDefinitionEditor.htmlCode};this.state.file_id?MMFAPI().updateRecord("MetaRoute",this.state.file_id,data,["uid"],function(result){_this3.setState({file_id:result.uid})}):MMFAPI().createRecord("MetaRoute",data,["uid"],function(result){_this3.setState({file_id:result.uid})})}},{key:"render",value:function(){var _this4=this,uidField=this.state.file_id?React.createElement(TextInput,{s:3,required:"required",value:this.state.file_id,disabled:"true"}):uidField;return React.createElement("div",{ref:this.topElement},React.createElement("h4",{style:this.headerStyle},"New Route - Form"),React.createElement("div",{style:this.groupParentStyle},React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Route Name...",onChange:function(e){return _this4.onChange(e,"Name")},labelText:"Route Name",required:"required",value:this.state.Name}),uidField),React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Route Scope...",onChange:function(e){return _this4.onChange(e,"Scope")},labelText:"Route Scope",required:"required",value:this.state.Scope}))),React.createElement("div",{style:this.fieldStyle},React.createElement(TextInput,{placeholder:"Enter Route Path...",onChange:function(e){return _this4.onChange(e,"Path")},labelText:"Route Path",required:"required",value:this.state.Path})),React.createElement("div",{style:this.fieldStyle},React.createElement(MonacoEditor,{width:this.state.htmlDefinitionEditor.width,height:this.state.htmlDefinitionEditor.height,language:"html",theme:"vs-dark",value:this.state.htmlDefinitionEditor.htmlCode,defaultValue:this.state.htmlDefinitionEditor.htmlCode,options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1},onChange:this.codeChanged,requireConfig:{url:"/thirdpartylib/require.js",paths:{vs:"/thirdpartylib/monaco/min/vs"}},editorDidMount:this.htmlDefinitionEditorDidMount})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveAsNewData()}},"Save As"),React.createElement(Button,{waves:"light",onClick:function(e){return _this4.resetData()}},"Reset")))}}]),_NewRoute}(React.Component),_export("NewRoute",NewRoute=function(props){return _NewRoute}),_export("NewRoute",NewRoute),_export("default",NewRoute),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/NewRoute/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/persist/MMFAPI.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MonacoEditor,MMFAPI,Button,TextInput,_NewRoute,NewRoute;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewRoute=function(_React$Component){function _NewRoute(props,context){_classCallCheck(this,_NewRoute);var _this=_possibleConstructorReturn(this,(_NewRoute.__proto__||Object.getPrototypeOf(_NewRoute)).call(this,props));return _this.state={htmlDefinitionEditor:{width:.6*screen.width,height:"350",htmlCode:_this.props.rowInfo?_this.props.rowInfo.Definition:'<h1>Hello world, do not use single quotes in this html</h1>\n<script>console.log("Hello World!");<\/script>'}},_this.topElement=React.createRef(),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.htmlDefinitionEditorDidMount=_this.htmlDefinitionEditorDidMount.bind(_this),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%"},_this.modalButtonGroup={marginLeft:"60%",position:"relative"},_this}return _inherits(_NewRoute,_React$Component),_createClass(_NewRoute,[{key:"htmlDefinitionEditorDidMount",value:function(editor,monaco){var self=this,saveEditorValue=editor.setValue.bind(editor);editor.setValue=function(val){saveEditorValue(val),self.state.htmlDefinitionEditor?(editor.setPosition(self.state.htmlDefinitionEditor.position),editor.revealLine(self.state.htmlDefinitionEditor.position.lineNumber),editor.revealLineInCenter(self.state.htmlDefinitionEditor.position.lineNumber)):(editor.setPosition({lineNumber:1,column:1}),editor.revealLine(1),editor.revealLineInCenter(15)),editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(editor._themeService._styleElement),editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"codeChanged",value:function(newValue,e){var editor=this.state.htmlDefinitionEditor;editor.htmlCode=newValue,this.setState({htmlDefinitionEditor:editor})}},{key:"onChange",value:function(e,type){var newValue="";e&&(newValue="checkbox"===e.target.type?e.target.checked:e.target.value);var stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",Path:"",Exact:"",Scope:"",Object:"",ObjectScope:"",ComponentName:"",ComponentObj:{}})}},{key:"saveAsNewData",value:function(){var _this2=this,data={Name:this.state.Name,Scope:this.state.Scope,Path:this.state.Path,HTML:this.state.htmlDefinitionEditor.htmlCode};MMFAPI().createRecord("MetaRoute",data,["uid"],function(result){_this2.setState({file_id:result.uid})})}},{key:"saveData",value:function(){var _this3=this,data={Name:this.state.Name,Scope:this.state.Scope,Path:this.state.Path,HTML:this.state.htmlDefinitionEditor.htmlCode};this.state.file_id?MMFAPI().updateRecord("MetaRoute",this.state.file_id,data,["uid"],function(result){_this3.setState({file_id:result.uid})}):MMFAPI().createRecord("MetaRoute",data,["uid"],function(result){_this3.setState({file_id:result.uid})})}},{key:"render",value:function(){var _this4=this,uidField=this.state.file_id?React.createElement(TextInput,{s:3,required:"required",value:this.state.file_id,disabled:"true"}):uidField;return React.createElement("div",{ref:this.topElement},React.createElement("h4",{style:this.headerStyle},"New Route - Form"),React.createElement("div",{style:this.groupParentStyle},React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Route Name...",onChange:function(e){return _this4.onChange(e,"Name")},labelText:"Route Name",required:"required",value:this.state.Name}),uidField),React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Route Scope...",onChange:function(e){return _this4.onChange(e,"Scope")},labelText:"Route Scope",required:"required",value:this.state.Scope}))),React.createElement("div",{style:this.fieldStyle},React.createElement(TextInput,{placeholder:"Enter Route Path...",onChange:function(e){return _this4.onChange(e,"Path")},labelText:"Route Path",required:"required",value:this.state.Path})),React.createElement("div",{style:this.fieldStyle},React.createElement(MonacoEditor,{width:this.state.htmlDefinitionEditor.width,height:this.state.htmlDefinitionEditor.height,language:"html",theme:"vs-dark",value:this.state.htmlDefinitionEditor.htmlCode,defaultValue:this.state.htmlDefinitionEditor.htmlCode,options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1},onChange:this.codeChanged,requireConfig:{url:"/thirdpartylib/require.js",paths:{vs:"/thirdpartylib/monaco/min/vs"}},editorDidMount:this.htmlDefinitionEditorDidMount})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveAsNewData()}},"Save As"),React.createElement(Button,{waves:"light",onClick:function(e){return _this4.resetData()}},"Reset")))}}]),_NewRoute}(React.Component),_export("NewRoute",NewRoute=function(props){return _NewRoute}),_export("NewRoute",NewRoute)}}}),System.register("component/mmf/NewRouteRequires.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/persist/MMFAPI.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Select,SelectItem,Button,TextInput,_NewRouteRequires,NewRouteRequires,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewRouteRequires=function(_React$Component){function _NewRouteRequires(props){_classCallCheck(this,_NewRouteRequires);var _this=_possibleConstructorReturn(this,(_NewRouteRequires.__proto__||Object.getPrototypeOf(_NewRouteRequires)).call(this,props)),record=_this.props.record?JSON.parse(_this.props.record):{};return _this.state={RouteId:_this.props.route_id,RouteName:"Unnamed"==_this.props.route_name?"":_this.props.route_name,Routes:{},RouteNames:{},ComponentId:record.component_id,ComponentName:"Unnamed"==record.component_name?"":record.component_name,file_id:record.uid,order:record.order?record.order:1,Components:{},ComponentNames:[],componentData:record},_this.loadComponents=_this.loadComponents.bind(_this),_this.loadRoutes=_this.loadRoutes.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.close=_this.close.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this.buttonInlineStyle={top:80,right:"10%",position:"absolute"},_this}return _inherits(_NewRouteRequires,_React$Component),_createClass(_NewRouteRequires,[{key:"componentDidMount",value:function(){this.props.componentId&&-1!=this.props.componentId||this.loadComponents(),this.props.routeId&&-1!=this.props.routeId||this.loadRoutes()}},{key:"componentDidUpdate",value:function(prevProps){if(prevProps.record!=this.props.record){var record=this.props.record?JSON.parse(this.props.record):{};this.setState({RouteId:this.props.route_id,RouteName:"Unnamed"==this.props.route_name?"":this.props.route_name,Routes:{},RouteNames:{},ComponentId:record.component_id,ComponentName:"Unnamed"==record.component_name?"":record.component_name,file_id:record.uid,order:record.order?record.order:1,Components:{},ComponentNames:[],componentData:record})}}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponent",["uid","Name","Scope"],null,function(results){var componentIdByLabel={},componentList=[];results&&(results.forEach(function(componentObj,indx){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;componentIdByLabel[componentLabel]=componentId,componentList.push({id:componentId,Label:componentLabel}),componentList=componentList.sort(function(a,b){return a.Label.localeCompare(b.Label)})}),Object.keys(componentIdByLabel).length>0&&self.setState({componentIdByLabel:componentIdByLabel,componentList:componentList,componentLoaded:!0}))})}},{key:"loadRoutes",value:function(){var self=this;MMFAPI().search("MetaRoute",["uid","Name","Scope"],null,function(results){var routeIdByLabel={},routeList=[];results&&(results.forEach(function(routeObj,indx){var routeLabel=routeObj.Name+"["+routeObj.Scope+"]",routetId=routeObj.uid;routeIdByLabel[routeLabel]=routetId,routeList.push({id:routetId,Label:routeLabel}),routeList=routeList.sort(function(a,b){return a.Label.localeCompare(b.Label)})}),Object.keys(routeIdByLabel).length>0&&self.setState({routeIdByLabel:routeIdByLabel,routeList:routeList,routeLoaded:!0}))})}},{key:"resetData",value:function(){this.setState({file_id:"",RouteId:"",RouteName:"",ComponentId:"",ComponentName:""})}},{key:"close",value:function(){this.setState({isClosed:!0})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"saveAsNewData",value:function(){var _this2=this,data={Router:this.state.RouteId,RequiredComponent:this.state.ComponentId,Order:this.state.order?this.state.order:1};MMFAPI().createRecord("MetaRouteRequires",data,["uid"],function(result){_this2.setState({file_id:result.uid}),_this2.props&&_this2.props.addFlashMessage({title:"Success - ",subtitle:"Page dependency added."})})}},{key:"saveData",value:function(){var _this3=this,data={Router:this.state.RouteId,RequiredComponent:this.state.ComponentId,Order:this.state.order?this.state.order:1};this.state.file_id?MMFAPI().updateRecord("MetaRouteRequires",this.state.file_id,data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props&&_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page dependency updated."})}):MMFAPI().createRecord("MetaRouteRequires",data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props&&_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page dependency added."})})}},{key:"render",value:function(){var _this4=this;if(!(this.state.componentLoaded||this.props.component_id&&-1!=this.props.component_id))return this.loadComponents(),null;if(!(this.state.routeLoaded||this.props.route_id&&-1!=this.props.route_id))return this.loadRoutes(),null;var file_id=this.state.file_id||this.state.componentData&&this.state.componentData.uid,uidField=file_id?React.createElement("div",{className:"sr-field-id"},React.createElement(TextInput,{labelText:"uid",required:"required",value:file_id,disabled:!0})):uidField,componentName=null,routeName=null;componentName="object"==typeof this.state.ComponentName?this.state.ComponentName.text:this.state.ComponentName,routeName="object"==typeof this.state.RouteName?this.state.RouteName.text:this.state.RouteName;var componentSelectItems=[];this.state.componentList&&this.state.componentList.map(function(componentItem){return componentSelectItems.push(React.createElement(SelectItem,{value:componentItem.id,text:componentItem.Label}))});var routeSelectItems=[];return this.state.routeList&&this.state.routeList.map(function(routeItem){return routeSelectItems.push(React.createElement(SelectItem,{value:routeItem.id,text:routeItem.Label}))}),this.state.isClosed?null:React.createElement("div",{className:"sr-new-route-req",style:this.props.inline?{padding:40,border:"1px solid #bfbfbf",margin:10,borderRadius:10}:{height:"inherit",overflow:"hidden"}},React.createElement("style",null,'@import url("component/mmf/NewRouteRequires/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("h4",{className:"sr-route-header"},"Route Dependency - Form"),React.createElement("div",{className:"sr-uid-field"},uidField),React.createElement("div",{className:"sr-route-router"},routeName?React.createElement("div",{className:"sr-comp-chose-dis"},React.createElement(TextInput,{label:"Choose the page....",value:routeName,disabled:!0})):React.createElement(Select,{labelText:"Route",onChange:function(e){var value=e.target.value;_this4.setState({RouteId:value})},placeholder:"Choose the page...",value:this.state.RouteId,id:"selectfield",defaultValue:this.state.routeList&&this.state.routeList.length>0?this.state.routeList[0].id:""},routeSelectItems)),React.createElement("div",{className:"sr-route-requires"},componentName?React.createElement("div",{className:"sr-comp-chose-dis"},React.createElement(TextInput,{label:"Choose the component....",value:componentName,disabled:!0})):React.createElement(Select,{labelText:"Component",onChange:function(e){var value=e.target.value;_this4.setState({ComponentId:value})},placeholder:"Choose the component...",value:this.state.ComponentId,id:"selectfield",defaultValue:this.state.componentList&&this.state.componentList.length>0?this.state.componentList[0].id:""},componentSelectItems)),React.createElement("div",{className:"sr-route-router"},React.createElement(TextInput,{label:"Enter the order....",value:this.state.order,onChange:function(e){return _this4.setState({order:e.target.value})}})),React.createElement("div",{className:"sr-route-button",style:this.props.inline?this.buttonInlineStyle:this.buttonStyle},React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveAsNewData()}},"Save As"),this.props.inline?React.createElement(Button,{waves:"light",onClick:function(e){return _this4.close()}},"Close"):React.createElement(Button,{waves:"light",onClick:function(e){return _this4.resetData()}},"Reset")))}}]),_NewRouteRequires}(React.Component),_export("NewRouteRequires",NewRouteRequires=function(props){return _NewRouteRequires}),_export("NewRouteRequires",NewRouteRequires),_export("default",NewRouteRequires),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/NewRouteRequires/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/persist/MMFAPI.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Select,SelectItem,Button,TextInput,_NewRouteRequires,NewRouteRequires;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewRouteRequires=function(_React$Component){function _NewRouteRequires(props){_classCallCheck(this,_NewRouteRequires);var _this=_possibleConstructorReturn(this,(_NewRouteRequires.__proto__||Object.getPrototypeOf(_NewRouteRequires)).call(this,props)),record=_this.props.record?JSON.parse(_this.props.record):{};return _this.state={RouteId:_this.props.route_id,RouteName:"Unnamed"==_this.props.route_name?"":_this.props.route_name,Routes:{},RouteNames:{},ComponentId:record.component_id,ComponentName:"Unnamed"==record.component_name?"":record.component_name,file_id:record.uid,order:record.order?record.order:1,Components:{},ComponentNames:[],componentData:record},_this.loadComponents=_this.loadComponents.bind(_this),_this.loadRoutes=_this.loadRoutes.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.close=_this.close.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this.buttonInlineStyle={top:80,right:"10%",position:"absolute"},_this}return _inherits(_NewRouteRequires,_React$Component),_createClass(_NewRouteRequires,[{key:"componentDidMount",value:function(){this.props.componentId&&-1!=this.props.componentId||this.loadComponents(),this.props.routeId&&-1!=this.props.routeId||this.loadRoutes()}},{key:"componentDidUpdate",value:function(prevProps){if(prevProps.record!=this.props.record){var record=this.props.record?JSON.parse(this.props.record):{};this.setState({RouteId:this.props.route_id,RouteName:"Unnamed"==this.props.route_name?"":this.props.route_name,Routes:{},RouteNames:{},ComponentId:record.component_id,ComponentName:"Unnamed"==record.component_name?"":record.component_name,file_id:record.uid,order:record.order?record.order:1,Components:{},ComponentNames:[],componentData:record})}}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponent",["uid","Name","Scope"],null,function(results){var componentIdByLabel={},componentList=[];results&&(results.forEach(function(componentObj,indx){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;componentIdByLabel[componentLabel]=componentId,componentList.push({id:componentId,Label:componentLabel}),componentList=componentList.sort(function(a,b){return a.Label.localeCompare(b.Label)})}),Object.keys(componentIdByLabel).length>0&&self.setState({componentIdByLabel:componentIdByLabel,componentList:componentList,componentLoaded:!0}))})}},{key:"loadRoutes",value:function(){var self=this;MMFAPI().search("MetaRoute",["uid","Name","Scope"],null,function(results){var routeIdByLabel={},routeList=[];results&&(results.forEach(function(routeObj,indx){var routeLabel=routeObj.Name+"["+routeObj.Scope+"]",routetId=routeObj.uid;routeIdByLabel[routeLabel]=routetId,routeList.push({id:routetId,Label:routeLabel}),routeList=routeList.sort(function(a,b){return a.Label.localeCompare(b.Label)})}),Object.keys(routeIdByLabel).length>0&&self.setState({routeIdByLabel:routeIdByLabel,routeList:routeList,routeLoaded:!0}))})}},{key:"resetData",value:function(){this.setState({file_id:"",RouteId:"",RouteName:"",ComponentId:"",ComponentName:""})}},{key:"close",value:function(){this.setState({isClosed:!0})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"saveAsNewData",value:function(){var _this2=this,data={Router:this.state.RouteId,RequiredComponent:this.state.ComponentId,Order:this.state.order?this.state.order:1};MMFAPI().createRecord("MetaRouteRequires",data,["uid"],function(result){_this2.setState({file_id:result.uid}),_this2.props&&_this2.props.addFlashMessage({title:"Success - ",subtitle:"Page dependency added."})})}},{key:"saveData",value:function(){var _this3=this,data={Router:this.state.RouteId,RequiredComponent:this.state.ComponentId,Order:this.state.order?this.state.order:1};this.state.file_id?MMFAPI().updateRecord("MetaRouteRequires",this.state.file_id,data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props&&_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page dependency updated."})}):MMFAPI().createRecord("MetaRouteRequires",data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props&&_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page dependency added."})})}},{key:"render",value:function(){var _this4=this;if(!(this.state.componentLoaded||this.props.component_id&&-1!=this.props.component_id))return this.loadComponents(),null;if(!(this.state.routeLoaded||this.props.route_id&&-1!=this.props.route_id))return this.loadRoutes(),null;var file_id=this.state.file_id||this.state.componentData&&this.state.componentData.uid,uidField=file_id?React.createElement("div",{className:"sr-field-id"},React.createElement(TextInput,{labelText:"uid",required:"required",value:file_id,disabled:!0})):uidField,componentName=null,routeName=null;componentName="object"==typeof this.state.ComponentName?this.state.ComponentName.text:this.state.ComponentName,routeName="object"==typeof this.state.RouteName?this.state.RouteName.text:this.state.RouteName;var componentSelectItems=[];this.state.componentList&&this.state.componentList.map(function(componentItem){return componentSelectItems.push(React.createElement(SelectItem,{value:componentItem.id,text:componentItem.Label}))});var routeSelectItems=[];return this.state.routeList&&this.state.routeList.map(function(routeItem){return routeSelectItems.push(React.createElement(SelectItem,{value:routeItem.id,text:routeItem.Label}))}),this.state.isClosed?null:React.createElement("div",{className:"sr-new-route-req",style:this.props.inline?{padding:40,border:"1px solid #bfbfbf",margin:10,borderRadius:10}:{height:"inherit",overflow:"hidden"}},React.createElement("style",null,'@import url("component/mmf/NewRouteRequires/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("h4",{className:"sr-route-header"},"Route Dependency - Form"),React.createElement("div",{className:"sr-uid-field"},uidField),React.createElement("div",{className:"sr-route-router"},routeName?React.createElement("div",{className:"sr-comp-chose-dis"},React.createElement(TextInput,{label:"Choose the page....",value:routeName,disabled:!0})):React.createElement(Select,{labelText:"Route",onChange:function(e){var value=e.target.value;_this4.setState({RouteId:value})},placeholder:"Choose the page...",value:this.state.RouteId,id:"selectfield",defaultValue:this.state.routeList&&this.state.routeList.length>0?this.state.routeList[0].id:""},routeSelectItems)),React.createElement("div",{className:"sr-route-requires"},componentName?React.createElement("div",{className:"sr-comp-chose-dis"},React.createElement(TextInput,{label:"Choose the component....",value:componentName,disabled:!0})):React.createElement(Select,{labelText:"Component",onChange:function(e){var value=e.target.value;_this4.setState({ComponentId:value})},placeholder:"Choose the component...",value:this.state.ComponentId,id:"selectfield",defaultValue:this.state.componentList&&this.state.componentList.length>0?this.state.componentList[0].id:""},componentSelectItems)),React.createElement("div",{className:"sr-route-router"},React.createElement(TextInput,{label:"Enter the order....",value:this.state.order,onChange:function(e){return _this4.setState({order:e.target.value})}})),React.createElement("div",{className:"sr-route-button",style:this.props.inline?this.buttonInlineStyle:this.buttonStyle},React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this4.saveAsNewData()}},"Save As"),this.props.inline?React.createElement(Button,{waves:"light",onClick:function(e){return _this4.close()}},"Close"):React.createElement(Button,{waves:"light",onClick:function(e){return _this4.resetData()}},"Reset")))}}]),_NewRouteRequires}(React.Component),_export("NewRouteRequires",NewRouteRequires=function(props){return _NewRouteRequires}),_export("NewRouteRequires",NewRouteRequires)}}}),System.register("component/mmf/NewState.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/persist/MMFAPI.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Select,SelectItem,Button,TextInput,_NewState,NewState,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewState=function(_React$Component){function _NewState(props){_classCallCheck(this,_NewState);var _this=_possibleConstructorReturn(this,(_NewState.__proto__||Object.getPrototypeOf(_NewState)).call(this,props)),record=_this.props.record?JSON.parse(_this.props.record):{};return _this.state={ComponentId:_this.props.component_id,ComponentName:"Unnamed"==_this.props.component_name?"":_this.props.component_name,Components:{},ComponentNames:[],file_id:record.uid,KeyName:record.KeyName,AccessPath:record.AccessPath,DefaultValue:record.DefaultValue},_this.loadComponents=_this.loadComponents.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.close=_this.close.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this.buttonInlineStyle={top:80,right:"10%",position:"absolute"},_this}return _inherits(_NewState,_React$Component),_createClass(_NewState,[{key:"componentDidUpdate",value:function(prevProps){if(prevProps.record!=this.props.record){var record=this.props.record?JSON.parse(this.props.record):{};this.setState({ComponentId:this.props.component_id,ComponentName:"Unnamed"==this.props.component_name?"":this.props.component_name,Components:{},ComponentNames:[],file_id:record.uid,KeyName:record.KeyName,AccessPath:record.AccessPath,DefaultValue:record.DefaultValue})}}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponent",["uid","Name","Scope"],null,function(results){var componentIdByLabel={},componentList=[];results&&(results.forEach(function(componentObj,indx){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;componentIdByLabel[componentLabel]=componentId,componentList.push({id:componentId,Label:componentLabel}),componentList=componentList.sort(function(a,b){return a.Label.localeCompare(b.Label)})}),Object.keys(componentIdByLabel).length>0&&self.setState({componentIdByLabel:componentIdByLabel,componentList:componentList,componentLoaded:!0}))})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"close",value:function(){this.setState({isClosed:!0})}},{key:"resetData",value:function(){this.setState({file_id:"",KeyName:"",AccessPath:"",DefaultValue:"",ComponentId:"",ComponentName:""})}},{key:"saveAsNewData",value:function(){var _this2=this,data={KeyName:this.state.KeyName,AccessPath:this.state.AccessPath,DefaultValue:this.state.DefaultValue,StateComponent:this.state.ComponentId};MMFAPI().createRecord("MetaComponentState",data,["uid"],function(result){_this2.setState({file_id:result.uid}),_this2.props&&_this2.props.updateStore({updates:{ide_reload:!_this2.props.ide_reload}}),_this2.props&&_this2.props.addFlashMessage({title:"Success - ",subtitle:"component state created."})})}},{key:"saveData",value:function(){var _this3=this,data={KeyName:this.state.KeyName,AccessPath:this.state.AccessPath,DefaultValue:this.state.DefaultValue,StateComponent:this.state.ComponentId};this.state.file_id?MMFAPI().updateRecord("MetaComponentState",this.state.file_id,data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props&&_this3.props.updateStore&&_this3.props.updateStore({updates:{ide_reload:!_this3.props.ide_reload}}),_this3.props&&_this3.props.addFlashMessage({title:"Success - ",subtitle:"component state updated."})}):MMFAPI().createRecord("MetaComponentState",data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props&&_this3.props.updateStore&&_this3.props.updateStore({updates:{ide_reload:!_this3.props.ide_reload}}),_this3.props&&_this3.props.addFlashMessage({title:"Success - ",subtitle:"component state created."})})}},{key:"render",value:function(){var _this4=this;if(!(this.state.componentLoaded||this.props.component_id&&-1!=this.props.component_id))return this.loadComponents(),null;var file_id=this.state.file_id||this.state&&this.state.uid,uidField=file_id?React.createElement("div",{className:"sr-field-id"},React.createElement(TextInput,{labelText:"uid",required:"required",value:file_id,disabled:!0})):uidField,keyName=this.state&&this.state.KeyName||"",accessPath=this.state&&this.state.AccessPath||"",defaultValue=this.state&&this.state.DefaultValue||"",componentName=null;componentName="object"==typeof this.state.ComponentName?this.state.ComponentName.text:this.state.ComponentName;var componentSelectItems=[];return this.state.componentList&&this.state.componentList.map(function(componentItem){return componentSelectItems.push(React.createElement(SelectItem,{value:componentItem.id,text:componentItem.Label}))}),this.state.isClosed?null:React.createElement("div",{style:this.props.inline?{padding:40,border:"1px solid #bfbfbf",margin:10,borderRadius:10}:{}},React.createElement("style",null,'@import url("component/mmf/NewState/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("h4",{className:"sr-state-header"},"State - Form"),React.createElement("div",{className:"sr-state-alias"},React.createElement(TextInput,{placeholder:"Enter state alias...",value:keyName,onChange:function(e){return _this4.onChange(e,"KeyName")},labelText:"Alias",required:"required"}),uidField),React.createElement("div",{className:"sr-state-combo"},componentName?React.createElement("div",{className:"sr-comp-chose-dis"},React.createElement(TextInput,{label:"Choose the component....",value:componentName,disabled:!0})):React.createElement(Select,{labelText:"Component",onChange:function(e){var value=e.target.value;_this4.setState({ComponentId:value})},placeholder:"Choose the component...",value:this.state.ComponentId,id:"selectfield",defaultValue:this.state.componentList[0].id},componentSelectItems)),React.createElement("div",{className:"sr-state-acpath"},React.createElement(TextInput,{placeholder:"Access Path",onChange:function(e){return _this4.onChange(e,"AccessPath")},labelText:"Access Path",required:"required",value:accessPath})),React.createElement("div",{className:"sr-state-dfval"},React.createElement(TextInput,{placeholder:"Default Value",onChange:function(e){return _this4.onChange(e,"DefaultValue")},labelText:"Default Value",required:"required",value:defaultValue})),React.createElement("div",{style:this.props.inline?this.buttonInlineStyle:this.buttonStyle},React.createElement(Button,{waves:"light",size:"small",onClick:function(e){return _this4.saveData()}},"Save"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.saveAsNewData()}},"Save As"),this.props.inline?React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.close()}},"Close"):React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.resetData()}},"Reset")))}}]),_NewState}(React.Component),_export("NewState",NewState=function(props){return _NewState}),_export("NewState",NewState),_export("default",NewState),_export("states",states=[{KeyName:"ide_reload",AccessPath:"ide_reload",DefaultValue:'{"ide_reload": false}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/NewState/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/persist/MMFAPI.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Select,SelectItem,Button,TextInput,_NewState,NewState;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewState=function(_React$Component){function _NewState(props){_classCallCheck(this,_NewState);var _this=_possibleConstructorReturn(this,(_NewState.__proto__||Object.getPrototypeOf(_NewState)).call(this,props)),record=_this.props.record?JSON.parse(_this.props.record):{};return _this.state={ComponentId:_this.props.component_id,ComponentName:"Unnamed"==_this.props.component_name?"":_this.props.component_name,Components:{},ComponentNames:[],file_id:record.uid,KeyName:record.KeyName,AccessPath:record.AccessPath,DefaultValue:record.DefaultValue},_this.loadComponents=_this.loadComponents.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.close=_this.close.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this.buttonInlineStyle={top:80,right:"10%",position:"absolute"},_this}return _inherits(_NewState,_React$Component),_createClass(_NewState,[{key:"componentDidUpdate",value:function(prevProps){if(prevProps.record!=this.props.record){var record=this.props.record?JSON.parse(this.props.record):{};this.setState({ComponentId:this.props.component_id,ComponentName:"Unnamed"==this.props.component_name?"":this.props.component_name,Components:{},ComponentNames:[],file_id:record.uid,KeyName:record.KeyName,AccessPath:record.AccessPath,DefaultValue:record.DefaultValue})}}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponent",["uid","Name","Scope"],null,function(results){var componentIdByLabel={},componentList=[];results&&(results.forEach(function(componentObj,indx){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;componentIdByLabel[componentLabel]=componentId,componentList.push({id:componentId,Label:componentLabel}),componentList=componentList.sort(function(a,b){return a.Label.localeCompare(b.Label)})}),Object.keys(componentIdByLabel).length>0&&self.setState({componentIdByLabel:componentIdByLabel,componentList:componentList,componentLoaded:!0}))})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"close",value:function(){this.setState({isClosed:!0})}},{key:"resetData",value:function(){this.setState({file_id:"",KeyName:"",AccessPath:"",DefaultValue:"",ComponentId:"",ComponentName:""})}},{key:"saveAsNewData",value:function(){var _this2=this,data={KeyName:this.state.KeyName,AccessPath:this.state.AccessPath,DefaultValue:this.state.DefaultValue,StateComponent:this.state.ComponentId};MMFAPI().createRecord("MetaComponentState",data,["uid"],function(result){_this2.setState({file_id:result.uid}),_this2.props&&_this2.props.updateStore({updates:{ide_reload:!_this2.props.ide_reload}}),_this2.props&&_this2.props.addFlashMessage({title:"Success - ",subtitle:"component state created."})})}},{key:"saveData",value:function(){var _this3=this,data={KeyName:this.state.KeyName,AccessPath:this.state.AccessPath,DefaultValue:this.state.DefaultValue,StateComponent:this.state.ComponentId};this.state.file_id?MMFAPI().updateRecord("MetaComponentState",this.state.file_id,data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props&&_this3.props.updateStore&&_this3.props.updateStore({updates:{ide_reload:!_this3.props.ide_reload}}),_this3.props&&_this3.props.addFlashMessage({title:"Success - ",subtitle:"component state updated."})}):MMFAPI().createRecord("MetaComponentState",data,["uid"],function(result){_this3.setState({file_id:result.uid}),_this3.props&&_this3.props.updateStore&&_this3.props.updateStore({updates:{ide_reload:!_this3.props.ide_reload}}),_this3.props&&_this3.props.addFlashMessage({title:"Success - ",subtitle:"component state created."})})}},{key:"render",value:function(){var _this4=this;if(!(this.state.componentLoaded||this.props.component_id&&-1!=this.props.component_id))return this.loadComponents(),null;var file_id=this.state.file_id||this.state&&this.state.uid,uidField=file_id?React.createElement("div",{className:"sr-field-id"},React.createElement(TextInput,{labelText:"uid",required:"required",value:file_id,disabled:!0})):uidField,keyName=this.state&&this.state.KeyName||"",accessPath=this.state&&this.state.AccessPath||"",defaultValue=this.state&&this.state.DefaultValue||"",componentName=null;componentName="object"==typeof this.state.ComponentName?this.state.ComponentName.text:this.state.ComponentName;var componentSelectItems=[];return this.state.componentList&&this.state.componentList.map(function(componentItem){return componentSelectItems.push(React.createElement(SelectItem,{value:componentItem.id,text:componentItem.Label}))}),this.state.isClosed?null:React.createElement("div",{style:this.props.inline?{padding:40,border:"1px solid #bfbfbf",margin:10,borderRadius:10}:{}},React.createElement("style",null,'@import url("component/mmf/NewState/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("h4",{className:"sr-state-header"},"State - Form"),React.createElement("div",{className:"sr-state-alias"},React.createElement(TextInput,{placeholder:"Enter state alias...",value:keyName,onChange:function(e){return _this4.onChange(e,"KeyName")},labelText:"Alias",required:"required"}),uidField),React.createElement("div",{className:"sr-state-combo"},componentName?React.createElement("div",{className:"sr-comp-chose-dis"},React.createElement(TextInput,{label:"Choose the component....",value:componentName,disabled:!0})):React.createElement(Select,{labelText:"Component",onChange:function(e){var value=e.target.value;_this4.setState({ComponentId:value})},placeholder:"Choose the component...",value:this.state.ComponentId,id:"selectfield",defaultValue:this.state.componentList[0].id},componentSelectItems)),React.createElement("div",{className:"sr-state-acpath"},React.createElement(TextInput,{placeholder:"Access Path",onChange:function(e){return _this4.onChange(e,"AccessPath")},labelText:"Access Path",required:"required",value:accessPath})),React.createElement("div",{className:"sr-state-dfval"},React.createElement(TextInput,{placeholder:"Default Value",onChange:function(e){return _this4.onChange(e,"DefaultValue")},labelText:"Default Value",required:"required",value:defaultValue})),React.createElement("div",{style:this.props.inline?this.buttonInlineStyle:this.buttonStyle},React.createElement(Button,{waves:"light",size:"small",onClick:function(e){return _this4.saveData()}},"Save"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.saveAsNewData()}},"Save As"),this.props.inline?React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.close()}},"Close"):React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.resetData()}},"Reset")))}}]),_NewState}(React.Component),_export("NewState",NewState=function(props){return _NewState}),_export("NewState",NewState)}}}),System.register("component/mmf/NewTemplate.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","react-monaco-editor","client/script/persist/MMFAPI.js","react-materialize"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MonacoEditor,Button,Row,TextInput,_NewTemplate,NewTemplate,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_clientScriptPersistMMFAPIJs){_clientScriptPersistMMFAPIJs.MMFAPI},function(_reactMaterialize){Button=_reactMaterialize.Button,_reactMaterialize.Icon,_reactMaterialize.Card,Row=_reactMaterialize.Row,_reactMaterialize.Col,TextInput=_reactMaterialize.TextInput,_reactMaterialize.Collection,_reactMaterialize.CollectionItem,_reactMaterialize.Autocomplete}],execute:function(){_NewTemplate=function(_React$Component){function _NewTemplate(props,context){_classCallCheck(this,_NewTemplate);var _this=_possibleConstructorReturn(this,(_NewTemplate.__proto__||Object.getPrototypeOf(_NewTemplate)).call(this,props));return _this.state={editor:{width:.79*screen.width,height:"500",code:_this.props.rowInfo?_this.props.rowInfo.Definition:"(function(payload, input) {\n //payload is the copy of the state \n //input is the object sent by the caller.\n return payload;\n})\n"}},_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this}return _inherits(_NewTemplate,_React$Component),_createClass(_NewTemplate,[{key:"codeChanged",value:function(newValue,e){var editor=this.state.editor;editor.code=newValue,this.setState({editor:editor})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",Scope:"",Defintion:""})}},{key:"saveAsNewData",value:function(){console.log(this.state);var data={Name:this.state.Name,Scope:this.state.Scope,Definition:this.state.editor.code},self=this;fetch("/api/t1/MetaTemplates",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"saveData",value:function(){var endPoint="/api/t1/MetaTemplates",method="POST";this.state.file_id&&(endPoint=endPoint+"/"+this.state.file_id,method="PUT"),console.log("Endpoint = "+endPoint);var data={Name:this.state.Name,Scope:this.state.Scope,Definition:this.state.editor.code},self=this;fetch(endPoint,{method:method,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"render",value:function(){var _this2=this,file_id=this.state.file_id,uidField=file_id?React.createElement(TextInput,{s:3,required:"required",value:file_id,disabled:"true"}):uidField;return React.createElement("div",null,React.createElement(Row,null,"New Template - Form"),React.createElement(Row,null,uidField,React.createElement(TextInput,{placeholder:"Enter name...",s:6,label:"Name",value:this.state.name,onChange:function(e){return _this2.onChange(e,"Name")}}),React.createElement(TextInput,{placeholder:"Enter scope...",s:6,label:"Scope",value:this.state.name,onChange:function(e){return _this2.onChange(e,"Scope")}})),React.createElement(Row,null,React.createElement("div",{className:this.state.editor.className},React.createElement(MonacoEditor,{width:this.state.editor.width,height:this.state.editor.height,language:"javascript",theme:"vs-dark",value:this.state.editor.code,defaultValue:this.state.editor.defaultCode,options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1},onChange:this.codeChanged,requireConfig:{url:"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.1/require.min.js",paths:{vs:"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.12.0/min/vs"}}}))),React.createElement(Row,null,React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveAsNewData()}},"Save As"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.resetData()}},"Reset")))}}]),_NewTemplate}(React.Component),_export("NewTemplate",NewTemplate=function(props){return _NewTemplate}),_export("NewTemplate",NewTemplate),_export("default",NewTemplate),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/NewTemplate/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","react-monaco-editor","client/script/persist/MMFAPI.js","react-materialize"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MonacoEditor,Button,Row,TextInput,_NewTemplate,NewTemplate;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_clientScriptPersistMMFAPIJs){_clientScriptPersistMMFAPIJs.MMFAPI},function(_reactMaterialize){Button=_reactMaterialize.Button,_reactMaterialize.Icon,_reactMaterialize.Card,Row=_reactMaterialize.Row,_reactMaterialize.Col,TextInput=_reactMaterialize.TextInput,_reactMaterialize.Collection,_reactMaterialize.CollectionItem,_reactMaterialize.Autocomplete}],execute:function(){_NewTemplate=function(_React$Component){function _NewTemplate(props,context){_classCallCheck(this,_NewTemplate);var _this=_possibleConstructorReturn(this,(_NewTemplate.__proto__||Object.getPrototypeOf(_NewTemplate)).call(this,props));return _this.state={editor:{width:.79*screen.width,height:"500",code:_this.props.rowInfo?_this.props.rowInfo.Definition:"(function(payload, input) {\n //payload is the copy of the state \n //input is the object sent by the caller.\n return payload;\n})\n"}},_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this}return _inherits(_NewTemplate,_React$Component),_createClass(_NewTemplate,[{key:"codeChanged",value:function(newValue,e){var editor=this.state.editor;editor.code=newValue,this.setState({editor:editor})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",Scope:"",Defintion:""})}},{key:"saveAsNewData",value:function(){console.log(this.state);var data={Name:this.state.Name,Scope:this.state.Scope,Definition:this.state.editor.code},self=this;fetch("/api/t1/MetaTemplates",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"saveData",value:function(){var endPoint="/api/t1/MetaTemplates",method="POST";this.state.file_id&&(endPoint=endPoint+"/"+this.state.file_id,method="PUT"),console.log("Endpoint = "+endPoint);var data={Name:this.state.Name,Scope:this.state.Scope,Definition:this.state.editor.code},self=this;fetch(endPoint,{method:method,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"render",value:function(){var _this2=this,file_id=this.state.file_id,uidField=file_id?React.createElement(TextInput,{s:3,required:"required",value:file_id,disabled:"true"}):uidField;return React.createElement("div",null,React.createElement(Row,null,"New Template - Form"),React.createElement(Row,null,uidField,React.createElement(TextInput,{placeholder:"Enter name...",s:6,label:"Name",value:this.state.name,onChange:function(e){return _this2.onChange(e,"Name")}}),React.createElement(TextInput,{placeholder:"Enter scope...",s:6,label:"Scope",value:this.state.name,onChange:function(e){return _this2.onChange(e,"Scope")}})),React.createElement(Row,null,React.createElement("div",{className:this.state.editor.className},React.createElement(MonacoEditor,{width:this.state.editor.width,height:this.state.editor.height,language:"javascript",theme:"vs-dark",value:this.state.editor.code,defaultValue:this.state.editor.defaultCode,options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1},onChange:this.codeChanged,requireConfig:{url:"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.1/require.min.js",paths:{vs:"https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.12.0/min/vs"}}}))),React.createElement(Row,null,React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveAsNewData()}},"Save As"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.resetData()}},"Reset")))}}]),_NewTemplate}(React.Component),_export("NewTemplate",NewTemplate=function(props){return _NewTemplate}),_export("NewTemplate",NewTemplate)}}}),System.register("component/mmf/NewWidgetAction.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/persist/MMFAPI.js","carbon-components-react","lodash.debounce","@carbon/icons-react/lib/terminal/32","@carbon/icons-react/lib/account/32"],function(_export,_context4){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Select,SelectItem,Button,Checkbox,TextInput,debounce,Editor32,Form32,_NewWidgetAction_,NewWidgetAction,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,Checkbox=_carbonComponentsReact.Checkbox,TextInput=_carbonComponentsReact.TextInput},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_carbonIconsReactLibTerminal){Editor32=_carbonIconsReactLibTerminal.default},function(_carbonIconsReactLibAccount){Form32=_carbonIconsReactLibAccount.default}],execute:function(){_NewWidgetAction_=function(_React$Component){function _NewWidgetAction_(props,context){_classCallCheck(this,_NewWidgetAction_);var _this=_possibleConstructorReturn(this,(_NewWidgetAction_.__proto__||Object.getPrototypeOf(_NewWidgetAction_)).call(this,props)),rowinfo=_this.props.rowinfo?JSON.parse(_this.props.rowinfo):{};return _this.defaultCode="(function() {\n\t//$live, $pageData, $fields, $widgets, $ctx\n})",_this.state={file_id:rowinfo.uid,Name:rowinfo.Name,Order:rowinfo.Order,Active:_this.props.modal+""=="true"||(!rowinfo||rowinfo.Active),ActionType:"Widget",Trigger:rowinfo.Trigger,UpdateType:rowinfo.Type,Target:rowinfo.Target,Definition:rowinfo.Definition?rowinfo.Definition:_this.defaultCode,isNewRecord:!rowinfo||!rowinfo.uid,varname:rowinfo.uid?"widgetaction_"+rowinfo.uid:"widgetaction_"+Date.now()},_this.topElement=React.createRef(),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.updateCode=_this.updateCode.bind(_this),_this.saveFormDebounced=debounce(function(){_this.saveData()},1e3),_this.saveAsFormDebounced=debounce(function(){_this.saveAsNewData()},1e3),_this.resetDataDebounced=debounce(function(){_this.resetData()},1e3),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%",width:"100%",textAlign:"left"},_this.modalButtonGroup={position:"absolute",marginRight:"5%",float:"right",right:0,bottom:20},$ele.registerElement("SrsCodeEditor","studio","React"),_this}return _inherits(_NewWidgetAction_,_React$Component),_createClass(_NewWidgetAction_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.state.file_id){_context.next=7;break}return _context.next=3,$qry.run("mmf.getWidgetActionById",{uid:this.state.file_id});case 3:(result=_context.sent)&&this.setState({Name:result.Name,Order:result.Order,Active:result.Active,Trigger:result.Trigger,ActionType:result.Widget?"Widget":"Global",Definition:result.Definition?result.Definition:this.defaultCode}),_context.next=7;break;case 7:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(prevProps.rowinfo==this.props.rowinfo){_context2.next=4;break}return _context2.next=4,this.updateCode(prevProps);case 4:!_.isEqual(prevProps.editorCodes,this.props.editorCodes)&&this.props.editorCodes[this.state.varname]&&this.setState({Definition:this.props.editorCodes[this.state.varname]});case 5:case"end":return _context2.stop()}},_callee2,this)}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"updateCode",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(prevProps){var rowinfo,prevRowInfo,payload,result;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(rowinfo=this.props.rowinfo?JSON.parse(this.props.rowinfo):{},prevRowInfo=prevProps.rowinfo?JSON.parse(prevProps.rowinfo):{},payload={file_id:rowinfo.uid,Name:rowinfo.Name,Order:rowinfo.Order,Active:!rowinfo||rowinfo.Active,ActionType:"Widget",Trigger:rowinfo.Trigger,UpdateType:rowinfo.Type,Target:rowinfo.Target,Definition:rowinfo.Definition?rowinfo.Definition:this.defaultCode,isNewRecord:!rowinfo||!rowinfo.uid},rowinfo.uid==prevRowInfo.uid||!rowinfo.uid){_context3.next=10;break}return _context3.next=6,$qry.run("mmf.getWidgetActionById",{uid:rowinfo.uid});case 6:(result=_context3.sent)&&(payload.Name=result.Name,payload.Order=result.Order,payload.Active=result.Active,payload.Trigger=result.Trigger,payload.ActionType=result.Widget?"Widget":"Global",payload.Definition=result.Definition?result.Definition:this.defaultCode,payload.isNewRecord=!1),_context3.next=15;break;case 10:payload.Name="",payload.Order="",payload.Active=!0,payload.Definition=this.defaultCode,payload.isNewRecord=!0;case 15:this.setState(_extends({},payload));case 16:case"end":return _context3.stop()}},_callee3,this)}));return function(_x3){return _ref3.apply(this,arguments)}}()},{key:"codeChanged",value:function(newValue){this.setState({Definition:newValue})}},{key:"onChange",value:function(e,type){var newValue=e.target.value,stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",Order:"",Active:"",Trigger:"",Definition:""})}},{key:"saveAsNewData",value:function(){var _this2=this,widgetName=this.state.Name;if(this.state.Name&&-1==this.state.Name.indexOf("@@")&&(widgetName=this.state.Name+"@@"+this.props.activePage.name+"_"+this.props.activePage.scope),this.state.Definition&&this.state.Definition.indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var data={Name:widgetName,Scope:this.props.currentscope,Order:this.state.Order,Active:this.state.Active?this.state.Active:1,Widget:this.props.modal?"pagemodal_"+this.props.active_page_id:"Widget"==this.state.ActionType?this.props.active_widget_id:"",Trigger:this.props.modal?"onChange":this.state.Trigger,Definition:this.state.Definition};MMFAPI().createRecord("MetaWidgetAction",data,["uid"],function(result){result&&result.uid?(_this2.setState({file_id:result.uid,isNewRecord:!1,Active:!_this2.state.Active||_this2.state.Active}),_this2.props.addFlashMessage({title:"Success - ",subtitle:"Widget action created successfully."})):_this2.props.addErrorMessage({title:"Error - ",subtitle:"Provide the mandatory fields and try again."})})}}},{key:"saveData",value:function(){var _this3=this,widgetName=this.state.Name;if(this.state.Name&&-1==this.state.Name.indexOf("@@")&&(widgetName=this.state.Name+"@@"+this.props.activePage.name+"_"+this.props.activePage.scope),this.state.Definition&&this.state.Definition.indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var data={Name:widgetName,Scope:this.props.currentscope,Order:this.state.Order,Active:this.state.Active?this.state.Active:1,Widget:this.props.modal?"pagemodal_"+this.props.active_page_id:"Widget"==this.state.ActionType?this.props.active_widget_id:"",Trigger:this.props.modal?"onChange":this.state.Trigger,Definition:this.state.Definition};this.state.file_id?MMFAPI().updateRecord("MetaWidgetAction",this.state.file_id,data,["uid"],function(result){result&&result.uid?(_this3.setState({file_id:result.uid}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Widget action updated successfully."})):result&&!result.errors||_this3.props.addErrorMessage({title:"Error - ",subtitle:"Widget action update operation failed."})}):MMFAPI().createRecord("MetaWidgetAction",data,["uid"],function(result){result&&result.uid?(_this3.setState({file_id:result.uid,isNewRecord:!1,Active:!_this3.state.Active||_this3.state.Active}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Widget action created successfully."})):result&&result.errors&&_this3.props.addErrorMessage({title:"Error - ",subtitle:"Widget action create operation failed."})})}}},{key:"render",value:function(){var _this4=this,uidField=this.state.file_id?React.createElement(TextInput,{s:3,required:"required",value:this.state.file_id,disabled:"true"}):uidField;try{JSON.parse(this.props.activeWidget.widgettree)}catch(err){}var normalView=React.createElement(React.Fragment,null,React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Action Name...",onChange:function(e){return _this4.onChange(e,"Name")},labelText:"Widget Action Name",required:"required",value:this.state.Name}),React.createElement(TextInput,{placeholder:"Enter Order",onChange:function(e){return _this4.onChange(e,"Order")},labelText:"Order",value:this.state.Order})),React.createElement("div",{style:this.groupElementStyle},this.props.modal+""!="true"?React.createElement(Select,{labelText:"Trigger Type",onChange:function(e){_this4.setState({Trigger:e.target.value})},id:"selecttriggertype",value:this.state.Trigger?this.state.Trigger:"Always"},React.createElement(SelectItem,{value:"Always",text:"Always"}),React.createElement(SelectItem,{value:"onClick",text:"onClick"}),React.createElement(SelectItem,{value:"onChange",text:"onChange"})):null,this.state.isNewRecord?null:React.createElement(Checkbox,{labelText:"Active",id:"sr-check-bx",onChange:function(value){_this4.setState({Active:value})},checked:this.state.Active})),React.createElement("div",{style:{marginBottom:"2%",paddingTop:20,width:"90%",clear:"both",height:"65vh",textAlign:"left"}},React.createElement("srs-code-editor",{key:this.state.file_id?this.state.file_id:"-1",editorCode:this.state.Definition,varname:this.state.varname,style:{height:"inherit"}})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",size:"small",onClick:function(e){return _this4.saveFormDebounced()}},"Save"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.saveAsFormDebounced()}},"Save As"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.resetDataDebounced()}},"Reset"))),ideView=React.createElement("srs-iframe",{key:Date.now(),url:"/code-editor?recordid="+this.state.file_id+"&contenttype=widget_action",width:"100%",height:.8*screen.height});return React.createElement("div",{ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/codemirror.css");'),this.state.isNewRecord?React.createElement("h4",{style:this.headerStyle},"New Widget Action - Form"):React.createElement("h4",{style:this.headerStyle},"Widget Action - Edit Form"),this.state.isNewRecord?null:this.state.showingIde?React.createElement(Form32,{style:{position:"absolute",top:0,right:20},onClick:function(e){return _this4.setState({showingIde:!1})}}):React.createElement(Editor32,{style:{position:"absolute",top:0,right:20},onClick:function(e){return _this4.setState({showingIde:!0})}}),this.state.showingIde?ideView:normalView)}}]),_NewWidgetAction_}(React.Component),_export("NewWidgetAction",NewWidgetAction=function(props){return _NewWidgetAction_}),_export("NewWidgetAction",NewWidgetAction),_export("default",NewWidgetAction),_export("states",states=[{KeyName:"pages",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id": ""}'},{KeyName:"activeWidget",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {"${active_widget_id}":{}}}}}'},{KeyName:"editorCodes",AccessPath:"editor.codes",DefaultValue:'{"editor": {"codes": {}}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/NewWidgetAction/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/persist/MMFAPI.js","carbon-components-react","lodash.debounce","@carbon/icons-react/lib/terminal/32","@carbon/icons-react/lib/account/32"],function(_export,_context4){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Select,SelectItem,Button,Checkbox,TextInput,debounce,Editor32,Form32,_NewWidgetAction_,NewWidgetAction;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,Checkbox=_carbonComponentsReact.Checkbox,TextInput=_carbonComponentsReact.TextInput},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_carbonIconsReactLibTerminal){Editor32=_carbonIconsReactLibTerminal.default},function(_carbonIconsReactLibAccount){Form32=_carbonIconsReactLibAccount.default}],execute:function(){_NewWidgetAction_=function(_React$Component){function _NewWidgetAction_(props,context){_classCallCheck(this,_NewWidgetAction_);var _this=_possibleConstructorReturn(this,(_NewWidgetAction_.__proto__||Object.getPrototypeOf(_NewWidgetAction_)).call(this,props)),rowinfo=_this.props.rowinfo?JSON.parse(_this.props.rowinfo):{};return _this.defaultCode="(function() {\n\t//$live, $pageData, $fields, $widgets, $ctx\n})",_this.state={file_id:rowinfo.uid,Name:rowinfo.Name,Order:rowinfo.Order,Active:_this.props.modal+""=="true"||(!rowinfo||rowinfo.Active),ActionType:"Widget",Trigger:rowinfo.Trigger,UpdateType:rowinfo.Type,Target:rowinfo.Target,Definition:rowinfo.Definition?rowinfo.Definition:_this.defaultCode,isNewRecord:!rowinfo||!rowinfo.uid,varname:rowinfo.uid?"widgetaction_"+rowinfo.uid:"widgetaction_"+Date.now()},_this.topElement=React.createRef(),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.updateCode=_this.updateCode.bind(_this),_this.saveFormDebounced=debounce(function(){_this.saveData()},1e3),_this.saveAsFormDebounced=debounce(function(){_this.saveAsNewData()},1e3),_this.resetDataDebounced=debounce(function(){_this.resetData()},1e3),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%",width:"100%",textAlign:"left"},_this.modalButtonGroup={position:"absolute",marginRight:"5%",float:"right",right:0,bottom:20},$ele.registerElement("SrsCodeEditor","studio","React"),_this}return _inherits(_NewWidgetAction_,_React$Component),_createClass(_NewWidgetAction_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.state.file_id){_context.next=7;break}return _context.next=3,$qry.run("mmf.getWidgetActionById",{uid:this.state.file_id});case 3:(result=_context.sent)&&this.setState({Name:result.Name,Order:result.Order,Active:result.Active,Trigger:result.Trigger,ActionType:result.Widget?"Widget":"Global",Definition:result.Definition?result.Definition:this.defaultCode}),_context.next=7;break;case 7:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(prevProps.rowinfo==this.props.rowinfo){_context2.next=4;break}return _context2.next=4,this.updateCode(prevProps);case 4:!_.isEqual(prevProps.editorCodes,this.props.editorCodes)&&this.props.editorCodes[this.state.varname]&&this.setState({Definition:this.props.editorCodes[this.state.varname]});case 5:case"end":return _context2.stop()}},_callee2,this)}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"updateCode",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(prevProps){var rowinfo,prevRowInfo,payload,result;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(rowinfo=this.props.rowinfo?JSON.parse(this.props.rowinfo):{},prevRowInfo=prevProps.rowinfo?JSON.parse(prevProps.rowinfo):{},payload={file_id:rowinfo.uid,Name:rowinfo.Name,Order:rowinfo.Order,Active:!rowinfo||rowinfo.Active,ActionType:"Widget",Trigger:rowinfo.Trigger,UpdateType:rowinfo.Type,Target:rowinfo.Target,Definition:rowinfo.Definition?rowinfo.Definition:this.defaultCode,isNewRecord:!rowinfo||!rowinfo.uid},rowinfo.uid==prevRowInfo.uid||!rowinfo.uid){_context3.next=10;break}return _context3.next=6,$qry.run("mmf.getWidgetActionById",{uid:rowinfo.uid});case 6:(result=_context3.sent)&&(payload.Name=result.Name,payload.Order=result.Order,payload.Active=result.Active,payload.Trigger=result.Trigger,payload.ActionType=result.Widget?"Widget":"Global",payload.Definition=result.Definition?result.Definition:this.defaultCode,payload.isNewRecord=!1),_context3.next=15;break;case 10:payload.Name="",payload.Order="",payload.Active=!0,payload.Definition=this.defaultCode,payload.isNewRecord=!0;case 15:this.setState(_extends({},payload));case 16:case"end":return _context3.stop()}},_callee3,this)}));return function(_x3){return _ref3.apply(this,arguments)}}()},{key:"codeChanged",value:function(newValue){this.setState({Definition:newValue})}},{key:"onChange",value:function(e,type){var newValue=e.target.value,stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",Order:"",Active:"",Trigger:"",Definition:""})}},{key:"saveAsNewData",value:function(){var _this2=this,widgetName=this.state.Name;if(this.state.Name&&-1==this.state.Name.indexOf("@@")&&(widgetName=this.state.Name+"@@"+this.props.activePage.name+"_"+this.props.activePage.scope),this.state.Definition&&this.state.Definition.indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var data={Name:widgetName,Scope:this.props.currentscope,Order:this.state.Order,Active:this.state.Active?this.state.Active:1,Widget:this.props.modal?"pagemodal_"+this.props.active_page_id:"Widget"==this.state.ActionType?this.props.active_widget_id:"",Trigger:this.props.modal?"onChange":this.state.Trigger,Definition:this.state.Definition};MMFAPI().createRecord("MetaWidgetAction",data,["uid"],function(result){result&&result.uid?(_this2.setState({file_id:result.uid,isNewRecord:!1,Active:!_this2.state.Active||_this2.state.Active}),_this2.props.addFlashMessage({title:"Success - ",subtitle:"Widget action created successfully."})):_this2.props.addErrorMessage({title:"Error - ",subtitle:"Provide the mandatory fields and try again."})})}}},{key:"saveData",value:function(){var _this3=this,widgetName=this.state.Name;if(this.state.Name&&-1==this.state.Name.indexOf("@@")&&(widgetName=this.state.Name+"@@"+this.props.activePage.name+"_"+this.props.activePage.scope),this.state.Definition&&this.state.Definition.indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var data={Name:widgetName,Scope:this.props.currentscope,Order:this.state.Order,Active:this.state.Active?this.state.Active:1,Widget:this.props.modal?"pagemodal_"+this.props.active_page_id:"Widget"==this.state.ActionType?this.props.active_widget_id:"",Trigger:this.props.modal?"onChange":this.state.Trigger,Definition:this.state.Definition};this.state.file_id?MMFAPI().updateRecord("MetaWidgetAction",this.state.file_id,data,["uid"],function(result){result&&result.uid?(_this3.setState({file_id:result.uid}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Widget action updated successfully."})):result&&!result.errors||_this3.props.addErrorMessage({title:"Error - ",subtitle:"Widget action update operation failed."})}):MMFAPI().createRecord("MetaWidgetAction",data,["uid"],function(result){result&&result.uid?(_this3.setState({file_id:result.uid,isNewRecord:!1,Active:!_this3.state.Active||_this3.state.Active}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Widget action created successfully."})):result&&result.errors&&_this3.props.addErrorMessage({title:"Error - ",subtitle:"Widget action create operation failed."})})}}},{key:"render",value:function(){var _this4=this,uidField=this.state.file_id?React.createElement(TextInput,{s:3,required:"required",value:this.state.file_id,disabled:"true"}):uidField;try{JSON.parse(this.props.activeWidget.widgettree)}catch(err){}var normalView=React.createElement(React.Fragment,null,React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Action Name...",onChange:function(e){return _this4.onChange(e,"Name")},labelText:"Widget Action Name",required:"required",value:this.state.Name}),React.createElement(TextInput,{placeholder:"Enter Order",onChange:function(e){return _this4.onChange(e,"Order")},labelText:"Order",value:this.state.Order})),React.createElement("div",{style:this.groupElementStyle},this.props.modal+""!="true"?React.createElement(Select,{labelText:"Trigger Type",onChange:function(e){_this4.setState({Trigger:e.target.value})},id:"selecttriggertype",value:this.state.Trigger?this.state.Trigger:"Always"},React.createElement(SelectItem,{value:"Always",text:"Always"}),React.createElement(SelectItem,{value:"onClick",text:"onClick"}),React.createElement(SelectItem,{value:"onChange",text:"onChange"})):null,this.state.isNewRecord?null:React.createElement(Checkbox,{labelText:"Active",id:"sr-check-bx",onChange:function(value){_this4.setState({Active:value})},checked:this.state.Active})),React.createElement("div",{style:{marginBottom:"2%",paddingTop:20,width:"90%",clear:"both",height:"65vh",textAlign:"left"}},React.createElement("srs-code-editor",{key:this.state.file_id?this.state.file_id:"-1",editorCode:this.state.Definition,varname:this.state.varname,style:{height:"inherit"}})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",size:"small",onClick:function(e){return _this4.saveFormDebounced()}},"Save"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.saveAsFormDebounced()}},"Save As"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.resetDataDebounced()}},"Reset"))),ideView=React.createElement("srs-iframe",{key:Date.now(),url:"/code-editor?recordid="+this.state.file_id+"&contenttype=widget_action",width:"100%",height:.8*screen.height});return React.createElement("div",{ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/codemirror.css");'),this.state.isNewRecord?React.createElement("h4",{style:this.headerStyle},"New Widget Action - Form"):React.createElement("h4",{style:this.headerStyle},"Widget Action - Edit Form"),this.state.isNewRecord?null:this.state.showingIde?React.createElement(Form32,{style:{position:"absolute",top:0,right:20},onClick:function(e){return _this4.setState({showingIde:!1})}}):React.createElement(Editor32,{style:{position:"absolute",top:0,right:20},onClick:function(e){return _this4.setState({showingIde:!0})}}),this.state.showingIde?ideView:normalView)}}]),_NewWidgetAction_}(React.Component),_export("NewWidgetAction",NewWidgetAction=function(props){return _NewWidgetAction_}),_export("NewWidgetAction",NewWidgetAction)}}}),System.register("component/mmf/NotificationBar.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.debounce"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,InlineNotification,_NotificationBar_,NotificationBar,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){InlineNotification=_carbonComponentsReact.InlineNotification},function(_lodashDebounce){_lodashDebounce.default}],execute:function(){_NotificationBar_=function(_React$Component){function _NotificationBar_(){return _classCallCheck(this,_NotificationBar_),_possibleConstructorReturn(this,(_NotificationBar_.__proto__||Object.getPrototypeOf(_NotificationBar_)).apply(this,arguments))}return _inherits(_NotificationBar_,_React$Component),_createClass(_NotificationBar_,[{key:"componentDidUpdate",value:function(prevProps){prevProps.notifications.length!=this.props.notifications.length&&this.setState({reload:!0})}},{key:"render",value:function(){var _this2=this,notificationElements=[],topDivStyles={};return this.props.notifications&&(this.props.notifications.map(function(notificationItem,indx){var notificationKey=indx+"@@"+"xxxxx".replace(/[xy]/g,function(c){var r=5*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),delay=(notificationItem.kind&&notificationItem.kind,notificationItem.title&&notificationItem.title,notificationItem.kind&&notificationItem.subtitle,notificationItem.delay?notificationItem.delay:null),notifyProps={lowContrast:!0,role:"alert",hideCloseButton:!1,onCloseButtonClick:function(e){var notificationKey=null;if(e.target&&e.target.parentElement&&e.target.parentElement.hasAttribute("name")?notificationKey=e.target.parentElement.parentElement.getAttribute("name"):e.target&&e.target.parentElement&&e.target.parentElement.parentElement.hasAttribute("name")?notificationKey=e.target.parentElement.parentElement.getAttribute("name"):e.target&&e.target.parentElement&&e.target.parentElement.parentElement.parentElement.hasAttribute("name")&&(notificationKey=e.target.parentElement.parentElement.parentElement.getAttribute("name")),notificationKey)try{var notificationIndx=notificationKey.split("@@")[0];notificationIndx=parseInt(notificationIndx);var notifications=_this2.props.notifications;notifications=notifications.filter(function(noticationItem,indx){return notificationIndx!=indx}),_this2.props.updateStore({updates:{notifications:notifications}})}catch(e){console.error("Invalid key to the notificaiton element")}}};delay&&(notifyProps.hideCloseButton=!0),notificationElements.push(React.createElement(InlineNotification,_extends({key:notificationKey,name:notificationKey,kind:notificationItem.kind,title:notificationItem.title,subtitle:notificationItem.subtitle},notifyProps,{style:{display:"flex",minWidth:"100%",maxWidth:"100%",margin:0,overflow:"auto",position:"relative",zIndex:99999}}))),delay&&setTimeout(function(){var notifications=_this2.props.notifications;notifications=notifications.filter(function(noticationItem,notificationIndx){return notificationIndx!=indx}),_this2.props.updateStore({updates:{notifications:notifications}})},delay)}),topDivStyles=this.props.styles?JSON.parse(this.props.styles):{position:"fixed",width:"42%",left:"23%",minHeight:100,overflow:"auto",display:"block",zIndex:99999,top:this.props.style_top?parseInt(this.props.style_top):80}),React.createElement("div",{style:topDivStyles},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),notificationElements)}}]),_NotificationBar_}(React.Component),_export("NotificationBar",NotificationBar=function(props){return _NotificationBar_}),_export("NotificationBar",NotificationBar),_export("default",NotificationBar),_export("states",states=[{KeyName:"notifications",AccessPath:"notifications",DefaultValue:'{"notifications": []}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/NotificationBar/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.debounce"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,InlineNotification,_NotificationBar_,NotificationBar;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){InlineNotification=_carbonComponentsReact.InlineNotification},function(_lodashDebounce){_lodashDebounce.default}],execute:function(){_NotificationBar_=function(_React$Component){function _NotificationBar_(){return _classCallCheck(this,_NotificationBar_),_possibleConstructorReturn(this,(_NotificationBar_.__proto__||Object.getPrototypeOf(_NotificationBar_)).apply(this,arguments))}return _inherits(_NotificationBar_,_React$Component),_createClass(_NotificationBar_,[{key:"componentDidUpdate",value:function(prevProps){prevProps.notifications.length!=this.props.notifications.length&&this.setState({reload:!0})}},{key:"render",value:function(){var _this2=this,notificationElements=[],topDivStyles={};return this.props.notifications&&(this.props.notifications.map(function(notificationItem,indx){var notificationKey=indx+"@@"+"xxxxx".replace(/[xy]/g,function(c){var r=5*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),delay=(notificationItem.kind&&notificationItem.kind,notificationItem.title&&notificationItem.title,notificationItem.kind&&notificationItem.subtitle,notificationItem.delay?notificationItem.delay:null),notifyProps={lowContrast:!0,role:"alert",hideCloseButton:!1,onCloseButtonClick:function(e){var notificationKey=null;if(e.target&&e.target.parentElement&&e.target.parentElement.hasAttribute("name")?notificationKey=e.target.parentElement.parentElement.getAttribute("name"):e.target&&e.target.parentElement&&e.target.parentElement.parentElement.hasAttribute("name")?notificationKey=e.target.parentElement.parentElement.getAttribute("name"):e.target&&e.target.parentElement&&e.target.parentElement.parentElement.parentElement.hasAttribute("name")&&(notificationKey=e.target.parentElement.parentElement.parentElement.getAttribute("name")),notificationKey)try{var notificationIndx=notificationKey.split("@@")[0];notificationIndx=parseInt(notificationIndx);var notifications=_this2.props.notifications;notifications=notifications.filter(function(noticationItem,indx){return notificationIndx!=indx}),_this2.props.updateStore({updates:{notifications:notifications}})}catch(e){console.error("Invalid key to the notificaiton element")}}};delay&&(notifyProps.hideCloseButton=!0),notificationElements.push(React.createElement(InlineNotification,_extends({key:notificationKey,name:notificationKey,kind:notificationItem.kind,title:notificationItem.title,subtitle:notificationItem.subtitle},notifyProps,{style:{display:"flex",minWidth:"100%",maxWidth:"100%",margin:0,overflow:"auto",position:"relative",zIndex:99999}}))),delay&&setTimeout(function(){var notifications=_this2.props.notifications;notifications=notifications.filter(function(noticationItem,notificationIndx){return notificationIndx!=indx}),_this2.props.updateStore({updates:{notifications:notifications}})},delay)}),topDivStyles=this.props.styles?JSON.parse(this.props.styles):{position:"fixed",width:"42%",left:"23%",minHeight:100,overflow:"auto",display:"block",zIndex:99999,top:this.props.style_top?parseInt(this.props.style_top):80}),React.createElement("div",{style:topDivStyles},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),notificationElements)}}]),_NotificationBar_}(React.Component),_export("NotificationBar",NotificationBar=function(props){return _NotificationBar_}),_export("NotificationBar",NotificationBar)}}}),System.register("component/mmf/OrderedList.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/arrow--up/16","@carbon/icons-react/lib/arrow--down/16"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Up,Down,_OrderedList_,OrderedList,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibArrowUp){Up=_carbonIconsReactLibArrowUp.default},function(_carbonIconsReactLibArrowDown){Down=_carbonIconsReactLibArrowDown.default}],execute:function(){_OrderedList_=function(_React$Component){function _OrderedList_(props){_classCallCheck(this,_OrderedList_);var _this=_possibleConstructorReturn(this,(_OrderedList_.__proto__||Object.getPrototypeOf(_OrderedList_)).call(this,props));return _this.state={key:_this.props.labelAttr?_this.props.labelAttr:"text",data:_this.props.data?_this.props.data:[{text:"Item-A"},{text:"Item-B"},{text:"Item-C"},{text:"Item-D"},{text:"Item-E"}],selectedItemIndx:-1},_this.handleUp=_this.handleUp.bind(_this),_this.handleDown=_this.handleDown.bind(_this),_this}return _inherits(_OrderedList_,_React$Component),_createClass(_OrderedList_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.data,this.props.data)||this.setState({selectedItemIndx:-1,data:this.props.data})}},{key:"handleUp",value:function(e){var currentIndx=this.state.selectedItemIndx,data=this.state.data;currentIndx>0&&(data.splice(currentIndx-1,0,data.splice(currentIndx,1)[0]),this.setState({data:data,selectedItemIndx:currentIndx-1}),this.props.updatedList&&this.props.updatedList(data))}},{key:"handleDown",value:function(e){var currentIndx=this.state.selectedItemIndx,data=this.state.data;currentIndx>-1&&currentIndx<data.length-1&&(data.splice(currentIndx+1,0,data.splice(currentIndx,1)[0]),this.setState({data:data,selectedItemIndx:currentIndx+1}),this.props.updatedList&&this.props.updatedList(data))}},{key:"render",value:function(){var _this2=this,data=this.props.data?this.props.data:[{text:"Item-A"},{text:"Item-B"},{text:"Item-C"},{text:"Item-D"},{text:"Item-E"}],dataEl=(this.props.labelAttr&&this.props.labelAttr,[]);return data.map(function(dataItem,indx){var className=_this2.state.selectedItemIndx==indx?"OrderedItem SelectedItem":"OrderedItem",ele=React.createElement("li",{className:className,onClick:function(e){return _this2.setState({selectedItemIndx:indx})}},indx+1,". ",_this2.state.key?dataItem[_this2.state.key]:dataItem);dataEl.push(ele)}),React.createElement("div",null,React.createElement("style",null,'@import url("component/mmf/OrderedList/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("div",{style:{display:"inline-flex"}},React.createElement("span",null,"Total : ",data.length),React.createElement("div",{style:{marginLeft:"2rem"}},React.createElement(Up,{style:{cursor:"pointer"},onClick:this.handleUp}),React.createElement(Down,{style:{cursor:"pointer"},onClick:this.handleDown}))),React.createElement("ul",null,dataEl))}}]),_OrderedList_}(React.Component),_export("OrderedList",OrderedList=function(props){return _OrderedList_}),_export("OrderedList",OrderedList),_export("default",OrderedList),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/OrderedList/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/arrow--up/16","@carbon/icons-react/lib/arrow--down/16"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Up,Down,_OrderedList_,OrderedList;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibArrowUp){Up=_carbonIconsReactLibArrowUp.default},function(_carbonIconsReactLibArrowDown){Down=_carbonIconsReactLibArrowDown.default}],execute:function(){_OrderedList_=function(_React$Component){function _OrderedList_(props){_classCallCheck(this,_OrderedList_);var _this=_possibleConstructorReturn(this,(_OrderedList_.__proto__||Object.getPrototypeOf(_OrderedList_)).call(this,props));return _this.state={key:_this.props.labelAttr?_this.props.labelAttr:"text",data:_this.props.data?_this.props.data:[{text:"Item-A"},{text:"Item-B"},{text:"Item-C"},{text:"Item-D"},{text:"Item-E"}],selectedItemIndx:-1},_this.handleUp=_this.handleUp.bind(_this),_this.handleDown=_this.handleDown.bind(_this),_this}return _inherits(_OrderedList_,_React$Component),_createClass(_OrderedList_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.data,this.props.data)||this.setState({selectedItemIndx:-1,data:this.props.data})}},{key:"handleUp",value:function(e){var currentIndx=this.state.selectedItemIndx,data=this.state.data;currentIndx>0&&(data.splice(currentIndx-1,0,data.splice(currentIndx,1)[0]),this.setState({data:data,selectedItemIndx:currentIndx-1}),this.props.updatedList&&this.props.updatedList(data))}},{key:"handleDown",value:function(e){var currentIndx=this.state.selectedItemIndx,data=this.state.data;currentIndx>-1&&currentIndx<data.length-1&&(data.splice(currentIndx+1,0,data.splice(currentIndx,1)[0]),this.setState({data:data,selectedItemIndx:currentIndx+1}),this.props.updatedList&&this.props.updatedList(data))}},{key:"render",value:function(){var _this2=this,data=this.props.data?this.props.data:[{text:"Item-A"},{text:"Item-B"},{text:"Item-C"},{text:"Item-D"},{text:"Item-E"}],dataEl=(this.props.labelAttr&&this.props.labelAttr,[]);return data.map(function(dataItem,indx){var className=_this2.state.selectedItemIndx==indx?"OrderedItem SelectedItem":"OrderedItem",ele=React.createElement("li",{className:className,onClick:function(e){return _this2.setState({selectedItemIndx:indx})}},indx+1,". ",_this2.state.key?dataItem[_this2.state.key]:dataItem);dataEl.push(ele)}),React.createElement("div",null,React.createElement("style",null,'@import url("component/mmf/OrderedList/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("div",{style:{display:"inline-flex"}},React.createElement("span",null,"Total : ",data.length),React.createElement("div",{style:{marginLeft:"2rem"}},React.createElement(Up,{style:{cursor:"pointer"},onClick:this.handleUp}),React.createElement(Down,{style:{cursor:"pointer"},onClick:this.handleDown}))),React.createElement("ul",null,dataEl))}}]),_OrderedList_}(React.Component),_export("OrderedList",OrderedList=function(props){return _OrderedList_}),_export("OrderedList",OrderedList)}}}),System.register("component/mmf/PageParameter.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,TextInput,cloneDeep,_PageParameter_,PageParameter,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_PageParameter_=function(_React$Component){function _PageParameter_(props){_classCallCheck(this,_PageParameter_);var _this=_possibleConstructorReturn(this,(_PageParameter_.__proto__||Object.getPrototypeOf(_PageParameter_)).call(this,props));return _this.state={},_this.updateProps=_this.updateProps.bind(_this),_this.reload=_this.reload.bind(_this),_this}return _inherits(_PageParameter_,_React$Component),_createClass(_PageParameter_,[{key:"componentDidMount",value:function(){this.reload()}},{key:"reload",value:function(){var _this2=this,pageParams={},defaultValue=this.props.defaultValue?this.props.defaultValue:"";if("string"==typeof this.props.defaultValue)try{defaultValue=JSON.parse(this.props.defaultValue)}catch(err){}this.props.params&&this.props.params.map(function(paramName){pageParams[paramName]=defaultValue&&defaultValue[paramName]?defaultValue[paramName]:{type:""}});var widgetData={},parentPageFields=[];this.props.widgetData&&Object.keys(this.props.widgetData).map(function(widgetId){var widgetItem=_this2.props.widgetData[widgetId],widgetName=widgetItem&&widgetItem.props&&(widgetItem.props.Name||widgetItem.props.Label);widgetData[widgetName=widgetName||widgetId]=widgetItem&&widgetItem.props||{},widgetData[widgetName].id=widgetId}),this.props.widgetData&&Object.keys(this.props.widgetData).map(function(widgetId){var widgetItem=_this2.props.widgetData[widgetId];if(widgetItem&&widgetItem.props&&widgetItem.props.FieldName){var fieldName=widgetItem.props.FieldName;fieldName.indexOf("@@[")>-1&&fieldName.endsWith("]")&&(fieldName=(fieldName=fieldName.split("@@[")[1]).substring(0,fieldName.length-1),parentPageFields.push(fieldName))}}),this.setState({pageParams:pageParams||defaultValue,parentPageFields:parentPageFields,widgetData:widgetData})}},{key:"updateProps",value:function(pageParams){this.props.updateProps&&this.props.updateProps(pageParams)}},{key:"componentDidUpdate",value:function(prevProps){prevProps.pageId==this.props.pageId&&_.isEqual(prevProps.defaultValue,this.props.defaultValue)&&_.isEqual(prevProps.params,this.props.params)||this.reload()}},{key:"render",value:function(){var _this3=this,result=[],paramClassName="",defaultValue=this.props.defaultValue?this.props.defaultValue:"";if("string"==typeof this.props.defaultValue)try{defaultValue=JSON.parse(this.props.defaultValue)}catch(err){}this.state.pageParams&&this.state.pageParams&&Object.keys(this.state.pageParams)&&Object.keys(this.state.pageParams).map(function(paramName,indx){var paramPicker=null,pageParamType=_this3.state.pageParams&&_this3.state.pageParams[paramName].type;if(pageParamType=pageParamType||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].type:""))switch(pageParamType){case"page_param":var pageParamsEl=[];pageParamsEl.push(React.createElement(SelectItem,{value:"",text:"None"})),_this3.props.parentPageParams&&Object.keys(_this3.props.parentPageParams).map(function(pageParamValue){pageParamsEl.push(React.createElement(SelectItem,{value:pageParamValue,text:_this3.props.parentPageParams[pageParamValue]||pageParamValue}))});var pageParamDefaultValue=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].paramId||"";pageParamDefaultValue=pageParamDefaultValue||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].paramId:""),paramPicker=React.createElement(Select,{onChange:function(e){var pageParams=cloneDeep(_this3.state.pageParams);pageParams[paramName].pageParamId=e.target.value,_this3.setState({pageParams:pageParams})},id:"select_pageparam",labelText:"Page Parameter",defaultValue:pageParamDefaultValue},pageParamsEl);break;case"parent_state":var pageParamStateDefaultValue=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].paramId||"";pageParamStateDefaultValue=pageParamStateDefaultValue||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].paramId:""),paramPicker=React.createElement(TextInput,{onChange:function(e){var pageParams=cloneDeep(_this3.state.pageParams);pageParams[paramName].parentStatePath=e.target.value,_this3.setState({pageParams:pageParams}),_this3.updateProps(pageParams)},id:"select_parentstate",labelText:"Parent State",defaultValue:pageParamStateDefaultValue});break;case"widget_props":var widgetsEl=[],childWidgetsEl=[],childWidgetPagesEl=[],widgetPropsEl=[],currentWidgetName=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].widgetName||"";currentWidgetName=currentWidgetName||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].widgetName:"");var currentChildWidgetPageName=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].childWidgetPageName||"";currentChildWidgetPageName=currentChildWidgetPageName||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetPageName:"");var currentChildWidgetPageId=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].childWidgetPageId||"";currentChildWidgetPageId=currentChildWidgetPageId||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetPageId:"");var currentChildWidgetName=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].childWidgetName||"";currentChildWidgetName=currentChildWidgetName||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetName:"");var currentWidgetPropName=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].widgetPropName||"";currentWidgetPropName=currentWidgetPropName||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].widgetPropName:""),widgetsEl.push(React.createElement(SelectItem,{value:"",text:"None"})),_this3.state.widgetData&&Object.keys(_this3.state.widgetData).map(function(widgetName){widgetsEl.push(React.createElement(SelectItem,{value:widgetName,text:widgetName}))}),widgetPropsEl.push(React.createElement(SelectItem,{value:"",text:"None"})),widgetPropsEl.push(React.createElement(SelectItem,{value:"value",text:"Value"}));var widgetId=_this3.state.widgetData[currentWidgetName]&&_this3.state.widgetData[currentWidgetName].id||"",pageIdOfWidget="",pageIdOfWidgetMap={},isContainerWidget=_this3.props.widgetData&&_this3.props.widgetData[widgetId]&&_this3.props.widgetData[widgetId].props&&"true"==_this3.props.widgetData[widgetId].props.is_container;if(currentWidgetName)if(isContainerWidget){if(childWidgetsEl.push(React.createElement(SelectItem,{value:"",text:"None"})),"PageDesignerPreview"==_this3.props.widgetData[widgetId].name)pageIdOfWidget=_this3.props.widgetData[widgetId].props.PageId;else{pageIdOfWidget=currentChildWidgetPageId;var pagePropNames=_this3.props.widgetData[widgetId].props.PagePropNames;(pagePropNames=pagePropNames?pagePropNames.split(","):pagePropNames)&&pagePropNames.length>0&&pagePropNames.map(function(pagePropName){if(pagePropName&&Object.keys(_this3.props.widgetData[widgetId].props).indexOf(pagePropName.trim())>-1){var tempPageId=_this3.props.widgetData[widgetId].props[pagePropName.trim()];pageIdOfWidgetMap[tempPageId+"_"+pagePropName]=pagePropName.trim()}}),pageIdOfWidgetMap&&Object.keys(pageIdOfWidgetMap).length>0&&(childWidgetPagesEl.push(React.createElement(SelectItem,{value:"",text:"None"})),Object.keys(pageIdOfWidgetMap).map(function(pageIdKey){var pageId2Select=pageIdKey.indexOf("_")>-1?pageIdKey.split("_")[0]:pageIdKey;childWidgetPagesEl.push(React.createElement(SelectItem,{value:pageId2Select,text:pageIdOfWidgetMap[pageIdKey]}))}))}if(pageIdOfWidget){var rawChildWidgets=_this3.props.pageData&&_this3.props.pageData[pageIdOfWidget]&&_this3.props.pageData[pageIdOfWidget].widgets||{};Object.keys(rawChildWidgets).map(function(childWidgetId){if(rawChildWidgets[childWidgetId]&&rawChildWidgets[childWidgetId].props){var childWidgetName=rawChildWidgets[childWidgetId].props.Name||rawChildWidgets[childWidgetId].props.id;childWidgetName&&(childWidgetsEl.push(React.createElement(SelectItem,{value:childWidgetName,text:childWidgetName})),currentChildWidgetName?currentChildWidgetName==childWidgetName&&Object.keys(rawChildWidgets[childWidgetId].props).map(function(widgetPropName){var newWidgetPropName=widgetPropName;widgetPropName.endsWith("_params")?newWidgetPropName=widgetPropName.split("__params")[0]:widgetPropName.startsWith("__Pageparam__")?newWidgetPropName=widgetPropName.split("__Pageparam__")[1]:widgetPropName.startsWith("__Dynamic__")?newWidgetPropName=widgetPropName.split("__Dynamic__")[1]:widgetPropName.startsWith("__Child__")?newWidgetPropName=widgetPropName.split("__Child__")[1]:widgetPropName.startsWith("__Sibling__")&&(newWidgetPropName=widgetPropName.split("__Sibling__")[1]),widgetPropsEl.push(React.createElement(SelectItem,{value:newWidgetPropName,text:newWidgetPropName}))}):currentWidgetName==childWidgetName&&Object.keys(rawChildWidgets[childWidgetId].props).map(function(widgetPropName){var newWidgetPropName=widgetPropName;widgetPropName.endsWith("_params")?newWidgetPropName=widgetPropName.split("__params")[0]:widgetPropName.startsWith("__Pageparam__")?newWidgetPropName=widgetPropName.split("__Pageparam__")[1]:widgetPropName.startsWith("__Dynamic__")?newWidgetPropName=widgetPropName.split("__Dynamic__")[1]:widgetPropName.startsWith("__Child__")?newWidgetPropName=widgetPropName.split("__Child__")[1]:widgetPropName.startsWith("__Sibling__")&&(newWidgetPropName=widgetPropName.split("__Sibling__")[1]),widgetPropsEl.push(React.createElement(SelectItem,{value:newWidgetPropName,text:newWidgetPropName}))}))}})}}else if(_this3.state.widgetData&&_this3.state.widgetData[currentWidgetName]&&_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].widgetName){var selectedWidgetName=_this3.state.pageParams[paramName].widgetName;_this3.state.widgetData[selectedWidgetName]&&Object.keys(_this3.state.widgetData[selectedWidgetName])&&Object.keys(_this3.state.widgetData[selectedWidgetName]).map(function(widgetPropName){var newWidgetPropName=widgetPropName;widgetPropName.endsWith("_params")?newWidgetPropName=widgetPropName.split("__params")[0]:widgetPropName.startsWith("__Dynamic__")?newWidgetPropName=widgetPropName.split("__Dynamic__")[1]:widgetPropName.startsWith("__Pageparam__")?newWidgetPropName=widgetPropName.split("__Pageparam__")[1]:widgetPropName.startsWith("__Child__")?newWidgetPropName=widgetPropName.split("__Child__")[1]:widgetPropName.startsWith("__Sibling__")&&(newWidgetPropName=widgetPropName.split("__Sibling__")[1]),widgetPropsEl.push(React.createElement(SelectItem,{value:newWidgetPropName,text:newWidgetPropName}))})}paramClassName=childWidgetsEl&&childWidgetsEl.length>0?childWidgetPagesEl&&childWidgetPagesEl.length>0?"withInnerPageProps":"withInnerProps":"withProps";var widgetSelector=React.createElement(Select,{onChange:function(e){var pageParams=cloneDeep(_this3.state.pageParams)||{};pageParams[paramName]=pageParams[paramName]||{};var widgetName=e.target.value,paramType=pageParams[paramName].type;pageParams[paramName].type=paramType,pageParams[paramName].widgetName=widgetName,_this3.setState({pageParams:pageParams})},id:"select_widget",labelText:"Widget",defaultValue:currentWidgetName},widgetsEl),childwidgetPagesSelector=isContainerWidget&&childWidgetPagesEl&&childWidgetPagesEl.length>0?React.createElement(Select,{onChange:function(e){var pageParams=cloneDeep(_this3.state.pageParams)||{};pageParams[paramName]=pageParams[paramName]||{};var paramType=pageParams[paramName].type?pageParams[paramName].type:defaultValue&&defaultValue[paramName]?defaultValue[paramName].type:null,widgetName=pageParams[paramName].widgetName?pageParams[paramName].widgetName:defaultValue&&defaultValue[paramName]?defaultValue[paramName].widgetName:null,childWidgetPageId=e.target.value,childWidgetPageName=e.target.options[e.target.selectedIndex].text;pageParams[paramName].type=paramType,pageParams[paramName].widgetName=widgetName,pageParams[paramName].childWidgetPageName=childWidgetPageName,pageParams[paramName].childWidgetPageId=childWidgetPageId,_this3.setState({pageParams:pageParams})},labelText:"Inner Page",id:"widget_props",defaultValue:currentChildWidgetPageName},childWidgetPagesEl):null,childwidgetsSelector=isContainerWidget&&childWidgetsEl&&childWidgetsEl.length>0?React.createElement(Select,{onChange:function(e){var pageParams=cloneDeep(_this3.state.pageParams)||{};pageParams[paramName]=pageParams[paramName]||{};var paramType=pageParams[paramName].type?pageParams[paramName].type:defaultValue&&defaultValue[paramName]?defaultValue[paramName].type:null,widgetName=pageParams[paramName].widgetName?pageParams[paramName].widgetName:defaultValue&&defaultValue[paramName]?defaultValue[paramName].widgetName:"",childWidgetPageName=pageParams[paramName].childWidgetPageName?pageParams[paramName].childWidgetPageName:defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetPageName:"",childWidgetPageId=pageParams[paramName].childWidgetPageId?pageParams[paramName].childWidgetPageId:defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetPageId:null;pageParams[paramName].type=paramType,pageParams[paramName].widgetName=widgetName,pageParams[paramName].childWidgetPageId=childWidgetPageId,pageParams[paramName].childWidgetPageName=childWidgetPageName;var childWidgetName=e.target.value;pageParams[paramName].childWidgetName=childWidgetName,_this3.setState({pageParams:pageParams})},labelText:"Inner Widget",id:"widget_props",defaultValue:currentChildWidgetName},childWidgetsEl):null,widgetPropSelector=React.createElement(Select,{onChange:function(e){var pageParams=cloneDeep(_this3.state.pageParams)||{};pageParams[paramName]=pageParams[paramName]||{};var paramType=pageParams[paramName].type?pageParams[paramName].type:defaultValue&&defaultValue[paramName]?defaultValue[paramName].type:null,widgetName=pageParams[paramName].widgetName?pageParams[paramName].widgetName:defaultValue&&defaultValue[paramName]?defaultValue[paramName].widgetName:"",childWidgetName=pageParams[paramName].childWidgetName?pageParams[paramName].childWidgetName:defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetName:"",childWidgetPageId=pageParams[paramName].childWidgetPageId?pageParams[paramName].childWidgetPageId:defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetPageId:null,childWidgetPageName=pageParams[paramName].childWidgetPageName?pageParams[paramName].childWidgetPageName:defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetPageName:"";pageParams[paramName].type=paramType,pageParams[paramName].widgetName=widgetName,pageParams[paramName].childWidgetName=childWidgetName,pageParams[paramName].childWidgetPageId=childWidgetPageId,pageParams[paramName].childWidgetPageName=childWidgetPageName,pageParams[paramName].widgetPropName=e.target.value,_this3.setState({pageParams:pageParams}),_this3.updateProps(pageParams)},labelText:"Widget Prop",id:"widget_props",defaultValue:currentWidgetPropName},widgetPropsEl);paramPicker=React.createElement(React.Fragment,null,widgetSelector,childwidgetPagesSelector,childwidgetsSelector,widgetPropSelector);break;case"page_field":var pageFieldsEl=[];pageFieldsEl.push(React.createElement(SelectItem,{value:"",text:"None"})),_this3.state.parentPageFields&&_this3.state.parentPageFields.map(function(pageFieldName){pageFieldsEl.push(React.createElement(SelectItem,{value:pageFieldName,text:pageFieldName}))});var pageFieldDefaultValue=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].pageFieldId||"";pageFieldDefaultValue=pageFieldDefaultValue||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].pageFieldId:""),paramPicker=React.createElement(Select,{onChange:function(e){var pageParams=cloneDeep(_this3.state.pageParams);pageParams[paramName].pageFieldId=e.target.value,_this3.setState({pageParams:pageParams}),_this3.updateProps(pageParams)},id:"select_pagefield",labelText:"Page Field",defaultValue:pageFieldDefaultValue},pageFieldsEl)}result.push(React.createElement("div",{className:paramClassName,style:{display:"flex",overflow:"hidden"}},React.createElement(Select,{onChange:function(e){var value=e.target.value,pageParams=cloneDeep(_this3.state.pageParams);pageParams[paramName]={},pageParams[paramName].type=value,_this3.setState({pageParams:pageParams}),_this3.updateProps(pageParams)},labelText:paramName,id:paramName,value:pageParamType||"page_param",defaultValue:pageParamType||"page_param"},React.createElement(SelectItem,{value:"page_param",text:"Parent Page Parameter"}),React.createElement(SelectItem,{value:"page_field",text:"Parent Page Field"}),React.createElement(SelectItem,{value:"widget_props",text:"Widget Props"}),React.createElement(SelectItem,{value:"parent_state",text:"Parent State"})),paramPicker))});var paramOutput=React.createElement("div",{style:{border:"1px solid grey",borderRadius:5,paddingTop:10,paddingBottom:10,paddingLeft:2,paddingRight:2,marginTop:10}},result);return React.createElement(React.Fragment,null,React.createElement("style",null,'@import url("component/mmf/PageParameter/Style.css");'),paramOutput)}}]),_PageParameter_}(React.Component),_export("PageParameter",PageParameter=function(props){return _PageParameter_}),_export("PageParameter",PageParameter),_export("default",PageParameter),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/PageParameter/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,TextInput,cloneDeep,_PageParameter_,PageParameter;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_PageParameter_=function(_React$Component){function _PageParameter_(props){_classCallCheck(this,_PageParameter_);var _this=_possibleConstructorReturn(this,(_PageParameter_.__proto__||Object.getPrototypeOf(_PageParameter_)).call(this,props));return _this.state={},_this.updateProps=_this.updateProps.bind(_this),_this.reload=_this.reload.bind(_this),_this}return _inherits(_PageParameter_,_React$Component),_createClass(_PageParameter_,[{key:"componentDidMount",value:function(){this.reload()}},{key:"reload",value:function(){var _this2=this,pageParams={},defaultValue=this.props.defaultValue?this.props.defaultValue:"";if("string"==typeof this.props.defaultValue)try{defaultValue=JSON.parse(this.props.defaultValue)}catch(err){}this.props.params&&this.props.params.map(function(paramName){pageParams[paramName]=defaultValue&&defaultValue[paramName]?defaultValue[paramName]:{type:""}});var widgetData={},parentPageFields=[];this.props.widgetData&&Object.keys(this.props.widgetData).map(function(widgetId){var widgetItem=_this2.props.widgetData[widgetId],widgetName=widgetItem&&widgetItem.props&&(widgetItem.props.Name||widgetItem.props.Label);widgetData[widgetName=widgetName||widgetId]=widgetItem&&widgetItem.props||{},widgetData[widgetName].id=widgetId}),this.props.widgetData&&Object.keys(this.props.widgetData).map(function(widgetId){var widgetItem=_this2.props.widgetData[widgetId];if(widgetItem&&widgetItem.props&&widgetItem.props.FieldName){var fieldName=widgetItem.props.FieldName;fieldName.indexOf("@@[")>-1&&fieldName.endsWith("]")&&(fieldName=(fieldName=fieldName.split("@@[")[1]).substring(0,fieldName.length-1),parentPageFields.push(fieldName))}}),this.setState({pageParams:pageParams||defaultValue,parentPageFields:parentPageFields,widgetData:widgetData})}},{key:"updateProps",value:function(pageParams){this.props.updateProps&&this.props.updateProps(pageParams)}},{key:"componentDidUpdate",value:function(prevProps){prevProps.pageId==this.props.pageId&&_.isEqual(prevProps.defaultValue,this.props.defaultValue)&&_.isEqual(prevProps.params,this.props.params)||this.reload()}},{key:"render",value:function(){var _this3=this,result=[],paramClassName="",defaultValue=this.props.defaultValue?this.props.defaultValue:"";if("string"==typeof this.props.defaultValue)try{defaultValue=JSON.parse(this.props.defaultValue)}catch(err){}this.state.pageParams&&this.state.pageParams&&Object.keys(this.state.pageParams)&&Object.keys(this.state.pageParams).map(function(paramName,indx){var paramPicker=null,pageParamType=_this3.state.pageParams&&_this3.state.pageParams[paramName].type;if(pageParamType=pageParamType||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].type:""))switch(pageParamType){case"page_param":var pageParamsEl=[];pageParamsEl.push(React.createElement(SelectItem,{value:"",text:"None"})),_this3.props.parentPageParams&&Object.keys(_this3.props.parentPageParams).map(function(pageParamValue){pageParamsEl.push(React.createElement(SelectItem,{value:pageParamValue,text:_this3.props.parentPageParams[pageParamValue]||pageParamValue}))});var pageParamDefaultValue=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].paramId||"";pageParamDefaultValue=pageParamDefaultValue||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].paramId:""),paramPicker=React.createElement(Select,{onChange:function(e){var pageParams=cloneDeep(_this3.state.pageParams);pageParams[paramName].pageParamId=e.target.value,_this3.setState({pageParams:pageParams})},id:"select_pageparam",labelText:"Page Parameter",defaultValue:pageParamDefaultValue},pageParamsEl);break;case"parent_state":var pageParamStateDefaultValue=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].paramId||"";pageParamStateDefaultValue=pageParamStateDefaultValue||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].paramId:""),paramPicker=React.createElement(TextInput,{onChange:function(e){var pageParams=cloneDeep(_this3.state.pageParams);pageParams[paramName].parentStatePath=e.target.value,_this3.setState({pageParams:pageParams}),_this3.updateProps(pageParams)},id:"select_parentstate",labelText:"Parent State",defaultValue:pageParamStateDefaultValue});break;case"widget_props":var widgetsEl=[],childWidgetsEl=[],childWidgetPagesEl=[],widgetPropsEl=[],currentWidgetName=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].widgetName||"";currentWidgetName=currentWidgetName||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].widgetName:"");var currentChildWidgetPageName=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].childWidgetPageName||"";currentChildWidgetPageName=currentChildWidgetPageName||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetPageName:"");var currentChildWidgetPageId=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].childWidgetPageId||"";currentChildWidgetPageId=currentChildWidgetPageId||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetPageId:"");var currentChildWidgetName=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].childWidgetName||"";currentChildWidgetName=currentChildWidgetName||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetName:"");var currentWidgetPropName=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].widgetPropName||"";currentWidgetPropName=currentWidgetPropName||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].widgetPropName:""),widgetsEl.push(React.createElement(SelectItem,{value:"",text:"None"})),_this3.state.widgetData&&Object.keys(_this3.state.widgetData).map(function(widgetName){widgetsEl.push(React.createElement(SelectItem,{value:widgetName,text:widgetName}))}),widgetPropsEl.push(React.createElement(SelectItem,{value:"",text:"None"})),widgetPropsEl.push(React.createElement(SelectItem,{value:"value",text:"Value"}));var widgetId=_this3.state.widgetData[currentWidgetName]&&_this3.state.widgetData[currentWidgetName].id||"",pageIdOfWidget="",pageIdOfWidgetMap={},isContainerWidget=_this3.props.widgetData&&_this3.props.widgetData[widgetId]&&_this3.props.widgetData[widgetId].props&&"true"==_this3.props.widgetData[widgetId].props.is_container;if(currentWidgetName)if(isContainerWidget){if(childWidgetsEl.push(React.createElement(SelectItem,{value:"",text:"None"})),"PageDesignerPreview"==_this3.props.widgetData[widgetId].name)pageIdOfWidget=_this3.props.widgetData[widgetId].props.PageId;else{pageIdOfWidget=currentChildWidgetPageId;var pagePropNames=_this3.props.widgetData[widgetId].props.PagePropNames;(pagePropNames=pagePropNames?pagePropNames.split(","):pagePropNames)&&pagePropNames.length>0&&pagePropNames.map(function(pagePropName){if(pagePropName&&Object.keys(_this3.props.widgetData[widgetId].props).indexOf(pagePropName.trim())>-1){var tempPageId=_this3.props.widgetData[widgetId].props[pagePropName.trim()];pageIdOfWidgetMap[tempPageId+"_"+pagePropName]=pagePropName.trim()}}),pageIdOfWidgetMap&&Object.keys(pageIdOfWidgetMap).length>0&&(childWidgetPagesEl.push(React.createElement(SelectItem,{value:"",text:"None"})),Object.keys(pageIdOfWidgetMap).map(function(pageIdKey){var pageId2Select=pageIdKey.indexOf("_")>-1?pageIdKey.split("_")[0]:pageIdKey;childWidgetPagesEl.push(React.createElement(SelectItem,{value:pageId2Select,text:pageIdOfWidgetMap[pageIdKey]}))}))}if(pageIdOfWidget){var rawChildWidgets=_this3.props.pageData&&_this3.props.pageData[pageIdOfWidget]&&_this3.props.pageData[pageIdOfWidget].widgets||{};Object.keys(rawChildWidgets).map(function(childWidgetId){if(rawChildWidgets[childWidgetId]&&rawChildWidgets[childWidgetId].props){var childWidgetName=rawChildWidgets[childWidgetId].props.Name||rawChildWidgets[childWidgetId].props.id;childWidgetName&&(childWidgetsEl.push(React.createElement(SelectItem,{value:childWidgetName,text:childWidgetName})),currentChildWidgetName?currentChildWidgetName==childWidgetName&&Object.keys(rawChildWidgets[childWidgetId].props).map(function(widgetPropName){var newWidgetPropName=widgetPropName;widgetPropName.endsWith("_params")?newWidgetPropName=widgetPropName.split("__params")[0]:widgetPropName.startsWith("__Pageparam__")?newWidgetPropName=widgetPropName.split("__Pageparam__")[1]:widgetPropName.startsWith("__Dynamic__")?newWidgetPropName=widgetPropName.split("__Dynamic__")[1]:widgetPropName.startsWith("__Child__")?newWidgetPropName=widgetPropName.split("__Child__")[1]:widgetPropName.startsWith("__Sibling__")&&(newWidgetPropName=widgetPropName.split("__Sibling__")[1]),widgetPropsEl.push(React.createElement(SelectItem,{value:newWidgetPropName,text:newWidgetPropName}))}):currentWidgetName==childWidgetName&&Object.keys(rawChildWidgets[childWidgetId].props).map(function(widgetPropName){var newWidgetPropName=widgetPropName;widgetPropName.endsWith("_params")?newWidgetPropName=widgetPropName.split("__params")[0]:widgetPropName.startsWith("__Pageparam__")?newWidgetPropName=widgetPropName.split("__Pageparam__")[1]:widgetPropName.startsWith("__Dynamic__")?newWidgetPropName=widgetPropName.split("__Dynamic__")[1]:widgetPropName.startsWith("__Child__")?newWidgetPropName=widgetPropName.split("__Child__")[1]:widgetPropName.startsWith("__Sibling__")&&(newWidgetPropName=widgetPropName.split("__Sibling__")[1]),widgetPropsEl.push(React.createElement(SelectItem,{value:newWidgetPropName,text:newWidgetPropName}))}))}})}}else if(_this3.state.widgetData&&_this3.state.widgetData[currentWidgetName]&&_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].widgetName){var selectedWidgetName=_this3.state.pageParams[paramName].widgetName;_this3.state.widgetData[selectedWidgetName]&&Object.keys(_this3.state.widgetData[selectedWidgetName])&&Object.keys(_this3.state.widgetData[selectedWidgetName]).map(function(widgetPropName){var newWidgetPropName=widgetPropName;widgetPropName.endsWith("_params")?newWidgetPropName=widgetPropName.split("__params")[0]:widgetPropName.startsWith("__Dynamic__")?newWidgetPropName=widgetPropName.split("__Dynamic__")[1]:widgetPropName.startsWith("__Pageparam__")?newWidgetPropName=widgetPropName.split("__Pageparam__")[1]:widgetPropName.startsWith("__Child__")?newWidgetPropName=widgetPropName.split("__Child__")[1]:widgetPropName.startsWith("__Sibling__")&&(newWidgetPropName=widgetPropName.split("__Sibling__")[1]),widgetPropsEl.push(React.createElement(SelectItem,{value:newWidgetPropName,text:newWidgetPropName}))})}paramClassName=childWidgetsEl&&childWidgetsEl.length>0?childWidgetPagesEl&&childWidgetPagesEl.length>0?"withInnerPageProps":"withInnerProps":"withProps";var widgetSelector=React.createElement(Select,{onChange:function(e){var pageParams=cloneDeep(_this3.state.pageParams)||{};pageParams[paramName]=pageParams[paramName]||{};var widgetName=e.target.value,paramType=pageParams[paramName].type;pageParams[paramName].type=paramType,pageParams[paramName].widgetName=widgetName,_this3.setState({pageParams:pageParams})},id:"select_widget",labelText:"Widget",defaultValue:currentWidgetName},widgetsEl),childwidgetPagesSelector=isContainerWidget&&childWidgetPagesEl&&childWidgetPagesEl.length>0?React.createElement(Select,{onChange:function(e){var pageParams=cloneDeep(_this3.state.pageParams)||{};pageParams[paramName]=pageParams[paramName]||{};var paramType=pageParams[paramName].type?pageParams[paramName].type:defaultValue&&defaultValue[paramName]?defaultValue[paramName].type:null,widgetName=pageParams[paramName].widgetName?pageParams[paramName].widgetName:defaultValue&&defaultValue[paramName]?defaultValue[paramName].widgetName:null,childWidgetPageId=e.target.value,childWidgetPageName=e.target.options[e.target.selectedIndex].text;pageParams[paramName].type=paramType,pageParams[paramName].widgetName=widgetName,pageParams[paramName].childWidgetPageName=childWidgetPageName,pageParams[paramName].childWidgetPageId=childWidgetPageId,_this3.setState({pageParams:pageParams})},labelText:"Inner Page",id:"widget_props",defaultValue:currentChildWidgetPageName},childWidgetPagesEl):null,childwidgetsSelector=isContainerWidget&&childWidgetsEl&&childWidgetsEl.length>0?React.createElement(Select,{onChange:function(e){var pageParams=cloneDeep(_this3.state.pageParams)||{};pageParams[paramName]=pageParams[paramName]||{};var paramType=pageParams[paramName].type?pageParams[paramName].type:defaultValue&&defaultValue[paramName]?defaultValue[paramName].type:null,widgetName=pageParams[paramName].widgetName?pageParams[paramName].widgetName:defaultValue&&defaultValue[paramName]?defaultValue[paramName].widgetName:"",childWidgetPageName=pageParams[paramName].childWidgetPageName?pageParams[paramName].childWidgetPageName:defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetPageName:"",childWidgetPageId=pageParams[paramName].childWidgetPageId?pageParams[paramName].childWidgetPageId:defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetPageId:null;pageParams[paramName].type=paramType,pageParams[paramName].widgetName=widgetName,pageParams[paramName].childWidgetPageId=childWidgetPageId,pageParams[paramName].childWidgetPageName=childWidgetPageName;var childWidgetName=e.target.value;pageParams[paramName].childWidgetName=childWidgetName,_this3.setState({pageParams:pageParams})},labelText:"Inner Widget",id:"widget_props",defaultValue:currentChildWidgetName},childWidgetsEl):null,widgetPropSelector=React.createElement(Select,{onChange:function(e){var pageParams=cloneDeep(_this3.state.pageParams)||{};pageParams[paramName]=pageParams[paramName]||{};var paramType=pageParams[paramName].type?pageParams[paramName].type:defaultValue&&defaultValue[paramName]?defaultValue[paramName].type:null,widgetName=pageParams[paramName].widgetName?pageParams[paramName].widgetName:defaultValue&&defaultValue[paramName]?defaultValue[paramName].widgetName:"",childWidgetName=pageParams[paramName].childWidgetName?pageParams[paramName].childWidgetName:defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetName:"",childWidgetPageId=pageParams[paramName].childWidgetPageId?pageParams[paramName].childWidgetPageId:defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetPageId:null,childWidgetPageName=pageParams[paramName].childWidgetPageName?pageParams[paramName].childWidgetPageName:defaultValue&&defaultValue[paramName]?defaultValue[paramName].childWidgetPageName:"";pageParams[paramName].type=paramType,pageParams[paramName].widgetName=widgetName,pageParams[paramName].childWidgetName=childWidgetName,pageParams[paramName].childWidgetPageId=childWidgetPageId,pageParams[paramName].childWidgetPageName=childWidgetPageName,pageParams[paramName].widgetPropName=e.target.value,_this3.setState({pageParams:pageParams}),_this3.updateProps(pageParams)},labelText:"Widget Prop",id:"widget_props",defaultValue:currentWidgetPropName},widgetPropsEl);paramPicker=React.createElement(React.Fragment,null,widgetSelector,childwidgetPagesSelector,childwidgetsSelector,widgetPropSelector);break;case"page_field":var pageFieldsEl=[];pageFieldsEl.push(React.createElement(SelectItem,{value:"",text:"None"})),_this3.state.parentPageFields&&_this3.state.parentPageFields.map(function(pageFieldName){pageFieldsEl.push(React.createElement(SelectItem,{value:pageFieldName,text:pageFieldName}))});var pageFieldDefaultValue=_this3.state.pageParams&&_this3.state.pageParams[paramName]&&_this3.state.pageParams[paramName].pageFieldId||"";pageFieldDefaultValue=pageFieldDefaultValue||(defaultValue&&defaultValue[paramName]?defaultValue[paramName].pageFieldId:""),paramPicker=React.createElement(Select,{onChange:function(e){var pageParams=cloneDeep(_this3.state.pageParams);pageParams[paramName].pageFieldId=e.target.value,_this3.setState({pageParams:pageParams}),_this3.updateProps(pageParams)},id:"select_pagefield",labelText:"Page Field",defaultValue:pageFieldDefaultValue},pageFieldsEl)}result.push(React.createElement("div",{className:paramClassName,style:{display:"flex",overflow:"hidden"}},React.createElement(Select,{onChange:function(e){var value=e.target.value,pageParams=cloneDeep(_this3.state.pageParams);pageParams[paramName]={},pageParams[paramName].type=value,_this3.setState({pageParams:pageParams}),_this3.updateProps(pageParams)},labelText:paramName,id:paramName,value:pageParamType||"page_param",defaultValue:pageParamType||"page_param"},React.createElement(SelectItem,{value:"page_param",text:"Parent Page Parameter"}),React.createElement(SelectItem,{value:"page_field",text:"Parent Page Field"}),React.createElement(SelectItem,{value:"widget_props",text:"Widget Props"}),React.createElement(SelectItem,{value:"parent_state",text:"Parent State"})),paramPicker))});var paramOutput=React.createElement("div",{style:{border:"1px solid grey",borderRadius:5,paddingTop:10,paddingBottom:10,paddingLeft:2,paddingRight:2,marginTop:10}},result);return React.createElement(React.Fragment,null,React.createElement("style",null,'@import url("component/mmf/PageParameter/Style.css");'),paramOutput)}}]),_PageParameter_}(React.Component),_export("PageParameter",PageParameter=function(props){return _PageParameter_}),_export("PageParameter",PageParameter)}}}),System.register("component/mmf/RegisterPage.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,Button,_Register,RegisterPage,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.PasswordInput,Button=_carbonComponentsReact.Button,_carbonComponentsReact.Link}],execute:function(){_Register=function(_React$Component){function _Register(props){_classCallCheck(this,_Register);var _this=_possibleConstructorReturn(this,(_Register.__proto__||Object.getPrototypeOf(_Register)).call(this,props));return _this.register=_this.register.bind(_this),_this.state={firstname:"",lastname:"",email:"",password:"",cpassword:"",error:""},_this}return _inherits(_Register,_React$Component),_createClass(_Register,[{key:"updateInputValue",value:function(evt){switch(evt.target.name){case"firstname":this.setState({firstname:evt.target.value});break;case"lastname":this.setState({lastname:evt.target.value});break;case"email":this.setState({email:evt.target.value});break;case"password":this.setState({password:evt.target.value});break;case"cpassword":this.setState({cpassword:evt.target.value})}}},{key:"register",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var regObj;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:(regObj={}).firstname=this.state.firstname,regObj.lastname=this.state.lastname,regObj.email=this.state.email,regObj.password=this.state.password,""==this.state.firstname||""==this.state.lastname||""==this.state.email||""==this.state.password||""==this.state.cpassword?this.setState({error:"* All fields are required."}):this.state.password!==this.state.cpassword?this.setState({error:"Passwords did not matach"}):fetch("/registeruser",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(regObj)}).then(function(response){return response.json()}).then(function(myJson){location.href="/login"});case 6:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this;return React.createElement("div",{className:"register"},React.createElement("div",{className:"leftContainer"},React.createElement("img",{src:"/resources/logo.gif",alt:"SrsteeImage"})),React.createElement("div",{className:"rightContainer"},React.createElement("div",{className:"container"},this.state.error&&React.createElement("div",{className:"errMsg"},this.state.error),React.createElement(TextInput,{className:"firstname",defaultValue:"",name:"firstname",labelText:"First Name",onChange:function(evt){return _this2.updateInputValue(evt)},placeholder:"First Name",type:"text"}),React.createElement(TextInput,{className:"lastname",defaultValue:"",name:"lastname",labelText:"Last Name",onChange:function(evt){return _this2.updateInputValue(evt)},placeholder:"Last Name",type:"text"}),React.createElement(TextInput,{className:"email",defaultValue:"",name:"email",labelText:"Email",onChange:function(evt){return _this2.updateInputValue(evt)},placeholder:"Email",type:"text"}),React.createElement(TextInput,{className:"password",defaultValue:"",name:"password",labelText:"Password",onChange:function(evt){return _this2.updateInputValue(evt)},placeholder:"Password",type:"password"}),React.createElement(TextInput,{className:"confirm",defaultValue:"",name:"cpassword",labelText:"Confirm Password",onChange:function(evt){return _this2.updateInputValue(evt)},placeholder:"Confirm Password",type:"password"}),React.createElement(Button,{className:"btn-cls",onClick:this.register},"Register"))))}}]),_Register}(React.Component),_export("RegisterPage",RegisterPage=function(props){return _Register}),_export("RegisterPage",RegisterPage),_export("default",RegisterPage),_export("states",states=[{KeyName:"loggedIn",AccessPath:"loggedIn",DefaultValue:'{"loggedIn":false}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/RegisterPage/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,Button,_Register,RegisterPage;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.PasswordInput,Button=_carbonComponentsReact.Button,_carbonComponentsReact.Link}],execute:function(){_Register=function(_React$Component){function _Register(props){_classCallCheck(this,_Register);var _this=_possibleConstructorReturn(this,(_Register.__proto__||Object.getPrototypeOf(_Register)).call(this,props));return _this.register=_this.register.bind(_this),_this.state={firstname:"",lastname:"",email:"",password:"",cpassword:"",error:""},_this}return _inherits(_Register,_React$Component),_createClass(_Register,[{key:"updateInputValue",value:function(evt){switch(evt.target.name){case"firstname":this.setState({firstname:evt.target.value});break;case"lastname":this.setState({lastname:evt.target.value});break;case"email":this.setState({email:evt.target.value});break;case"password":this.setState({password:evt.target.value});break;case"cpassword":this.setState({cpassword:evt.target.value})}}},{key:"register",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var regObj;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:(regObj={}).firstname=this.state.firstname,regObj.lastname=this.state.lastname,regObj.email=this.state.email,regObj.password=this.state.password,""==this.state.firstname||""==this.state.lastname||""==this.state.email||""==this.state.password||""==this.state.cpassword?this.setState({error:"* All fields are required."}):this.state.password!==this.state.cpassword?this.setState({error:"Passwords did not matach"}):fetch("/registeruser",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(regObj)}).then(function(response){return response.json()}).then(function(myJson){location.href="/login"});case 6:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this;return React.createElement("div",{className:"register"},React.createElement("div",{className:"leftContainer"},React.createElement("img",{src:"/resources/logo.gif",alt:"SrsteeImage"})),React.createElement("div",{className:"rightContainer"},React.createElement("div",{className:"container"},this.state.error&&React.createElement("div",{className:"errMsg"},this.state.error),React.createElement(TextInput,{className:"firstname",defaultValue:"",name:"firstname",labelText:"First Name",onChange:function(evt){return _this2.updateInputValue(evt)},placeholder:"First Name",type:"text"}),React.createElement(TextInput,{className:"lastname",defaultValue:"",name:"lastname",labelText:"Last Name",onChange:function(evt){return _this2.updateInputValue(evt)},placeholder:"Last Name",type:"text"}),React.createElement(TextInput,{className:"email",defaultValue:"",name:"email",labelText:"Email",onChange:function(evt){return _this2.updateInputValue(evt)},placeholder:"Email",type:"text"}),React.createElement(TextInput,{className:"password",defaultValue:"",name:"password",labelText:"Password",onChange:function(evt){return _this2.updateInputValue(evt)},placeholder:"Password",type:"password"}),React.createElement(TextInput,{className:"confirm",defaultValue:"",name:"cpassword",labelText:"Confirm Password",onChange:function(evt){return _this2.updateInputValue(evt)},placeholder:"Confirm Password",type:"password"}),React.createElement(Button,{className:"btn-cls",onClick:this.register},"Register"))))}}]),_Register}(React.Component),_export("RegisterPage",RegisterPage=function(props){return _Register}),_export("RegisterPage",RegisterPage)}}}),System.register("component/mmf/RouteComponent.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-router","react-router-dom"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Route,Router,RouteComponent,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactRouter){Route=_reactRouter.Route},function(_reactRouterDom){Router=_reactRouterDom.BrowserRouter,_reactRouterDom.Link,_reactRouterDom.withRouter,_reactRouterDom.Switch,_reactRouterDom.matchPath}],execute:function(){_export("RouteComponent",RouteComponent=function(_React$Component){function RouteComponent(){return _classCallCheck(this,RouteComponent),_possibleConstructorReturn(this,(RouteComponent.__proto__||Object.getPrototypeOf(RouteComponent)).apply(this,arguments))}return _inherits(RouteComponent,_React$Component),_createClass(RouteComponent,[{key:"render",value:function(){console.log("Props for the RouterComponent - "),console.log(this.props);var modules=this.props.deps.routes,moduleNames=Object.keys(modules),self=this,dynamicRoutes=moduleNames.map(function(routeModuleName,indx){var routeModule=modules[moduleNames[indx]];if(routeModule){var DynamicComponent=routeModule.component(self.props);return React.createElement(Route,{path:routeModule.path,render:function(props){return React.createElement(DynamicComponent,_extends({},props,{key:routeModuleName}))},key:routeModuleName})}});return React.createElement(Router,null,React.createElement("div",null,dynamicRoutes))}}]),RouteComponent}(React.Component)),_export("RouteComponent",RouteComponent),_export("default",RouteComponent),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/ScriptRunner.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","react-router-dom","@carbon/icons-react/lib/close/32","react-monaco-editor","@carbon/icons-react/lib/data--unstructured/32","carbon-components-react","component/studio/SrsReference/Definition.js","component/studio/SrsKeyValuePair/Definition.js","client/script/mmf/ScriptRunnerUtil.js","react-copy-to-clipboard","client/script/mmf/$qry.js","@carbon/icons-react/lib/run/32","react-json-view","lodash.clonedeep"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Close32,MonacoEditor,FieldMapper,Button,TextInput,Select,SelectItem,SrsReference,SrsKeyValuePair,ScriptRunnerUtil,CopyToClipboard,$qry,ReactJson,cloneDeep,_ScriptRunner,ScriptRunner,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_reactRouterDom){_reactRouterDom.BrowserRouter,_reactRouterDom.Route,_reactRouterDom.Link,_reactRouterDom.withRouter,_reactRouterDom.matchPath},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_carbonIconsReactLibDataUnstructured){FieldMapper=_carbonIconsReactLibDataUnstructured.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_componentStudioSrsKeyValuePairDefinitionJs){SrsKeyValuePair=_componentStudioSrsKeyValuePairDefinitionJs.SrsKeyValuePair},function(_clientScriptMmfScriptRunnerUtilJs){ScriptRunnerUtil=_clientScriptMmfScriptRunnerUtilJs.ScriptRunnerUtil},function(_reactCopyToClipboard){CopyToClipboard=_reactCopyToClipboard.default},function(_clientScriptMmf$qryJs){$qry=_clientScriptMmf$qryJs.$qry},function(_carbonIconsReactLibRun){_carbonIconsReactLibRun.default},function(_reactJsonView){ReactJson=_reactJsonView.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_ScriptRunner=function(_React$Component){function _ScriptRunner(props,context){_classCallCheck(this,_ScriptRunner);var _this=_possibleConstructorReturn(this,(_ScriptRunner.__proto__||Object.getPrototypeOf(_ScriptRunner)).call(this,props)),defaultEditorCode='(async function SampleFn() {    \n    var result = {};\n    let qryResult = await $qry.run("mmf.getModelDefinition", {ModelName: $input.modelName, ModelScope: $input.modelScope} , "data.MetaModel.MetaModelFindOne");\n    $resolve(qryResult.Name);                                                    \n})';return _this.historyLimit=10,_this.state={dirty:!1,resetEditor:!0,editor:{width:.5*screen.width,height:.9*screen.height,mode:"collapsed",className:"scriptEditor"},editorCode:_this.props.scriptRunnerCode?_this.props.scriptRunnerCode:defaultEditorCode,position:_this.props.scriptRunnerPosition?_this.props.scriptRunnerPosition:{lineNumber:1,column:1},form:{editorCode:defaultEditorCode,fileName:"",fileScope:"",Type:"server",result:""},fieldMappingValues:{},queryToCopy:""},_this.runScript=_this.runScript.bind(_this),_this.save2File=_this.save2File.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.fileNameChanged=_this.fileNameChanged.bind(_this),_this.fileScopeChanged=_this.fileScopeChanged.bind(_this),_this.captureScriptType=_this.captureScriptType.bind(_this),_this.editorContent=null,_this.editorDidMount=_this.editorDidMount.bind(_this),_this.restoreEditor=_this.restoreEditor.bind(_this),_this.editor=null,_this.editorModel=null,_this.editorModelViewState=null,_this.loadDetails=_this.loadDetails.bind(_this),_this.refreshHistory=_this.refreshHistory.bind(_this),$ele.registerElement("SrsKeyValuePair","studio","React"),_this}return _inherits(_ScriptRunner,_React$Component),_createClass(_ScriptRunner,[{key:"componentDidMount",value:function(){!this.state.activeScriptId&&this.props.activeSearchScriptId&&this.loadDetails(this.props.activeSearchScriptId)}},{key:"editorDidMount",value:function(editor,monaco){monaco.languages.registerCompletionItemProvider("javascript",{provideCompletionItems:function(model,position){return[{label:'let records = await $qry.getRecords("[model]_[scope]", {where: {}}, ["uid"], [pageNumber], [pageSize])',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let records = await $qry.getRecords("[model]_[scope]", {where: {}, skip: 0, limit: 10}, ["uid"], [pageNumber], [pageSize])',documentation:"Utility to get the records"},{label:'let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',documentation:"Utility to get the record count of the matching filter"},{label:'let createdRecord = await $qry.createRecord("[model]_[scope]", {"Name": ""}, ["uid"])',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - createRecord = await $qry.createRecord("[model]_[scope]", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to create a new record"},{label:'let updatedRecord = await $qry.updateRecord("[model]_[scope]", "model_id", {"Name": ""}, ["uid"])',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to update an existing record"},{label:'let deletedRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',documentation:"Utility to delete a record"},{label:'deleteRecords = await $qry.deleteRecords("[model]_[scope]", "{uid: {"inq": ["id1", "id"]}}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "filter")',documentation:"Utility to delete multiple records"},{label:'$qry.run("{queryName}", "{variables}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'await $qry.run("{queryName}", "{variables}")',documentation:"Utility to mutate/fetch data from server using GraphQL"},{label:'$script.runscript("{scope.scriptName}", {inputVar: "inputValue"}).then((data)=>$resolve(data))',kind:monaco.languages.CompletionItemKind.Keyword,detail:'$script.runscript("{scope.scriptName}", {inputVar: "inputValue"}).then((data)=>$resolve(data))',documentation:"Utility to run the reusable script function."},{label:'tableDelete = await $qry._run(`mutation($inputData:[Table]DestroyAllInput!) {\n\t\t[Table]DestroyAll(input:$inputData){\n\t\t\tobj\n\t\t}\t}`, { "inputData": { "where": { "[FieldName]":"${varname}"} } },\n\t\t"data.[Table]DestroyAll.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-delete",documentation:"Delete query to remove the records from the table"},{label:'tableRead = await $qry._run(`query($input:JSON){\n\t[Table]{\n\t\t[Table]Find(filter: $input) @_(get: "edges"){\n\t\t\tedges @_(keyBy: "node.uid", mapValues:"node"){\n\t\t\t\tnode{\n\t\t\t\t\tuid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}`, { "input": { "where": { "uid": "${varname}" } } },\n"data.[Table].[Table]Find");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-read",documentation:"Open query to get the data from the table"},{label:'tableUpsert = await $qry._run(`mutation($input: [Table]UpsertWithWhereInput!){\n\t[Table]UpsertWithWhere(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "where": { "uid": "${varname}" }, "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]UpsertWithWhere.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-upsert",documentation:"Query to update the data in the table"},{label:'tableCreate = await $qry._run(`mutation($input: [Table]CreateInput!){\n\t[Table]Create(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]Create.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-create",documentation:"Query to create the record with the data"}]}});this.editor=editor,this.monaco=monaco,this.editorModel=editor.getModel(),this.restoreEditor()}},{key:"restoreEditor",value:function(){var self=this,saveEditorValue=this.editor.setValue.bind(this.editor);this.editor.setValue=function(val){saveEditorValue(val),self.state.position?(self.editor.setPosition(self.state.position),self.editor.revealLine(self.state.position.lineNumber),self.editor.revealLineInCenter(self.state.position.lineNumber)):(self.editor.setPosition({lineNumber:1,column:1}),self.editor.revealLine(1),self.editor.revealLineInCenter(15)),self.editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:this.editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(this.editor._themeService._styleElement),this.editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"codeChanged",value:function(newValue,e){var form=cloneDeep(this.state.form);form.editorCode=newValue,this.setState({form:form,dirty:!0}),this.props.updateStore({updates:{scriptRunnerCode:newValue,scriptRunnerPosition:this.state.position}})}},{key:"save2File",value:function(){var self=this;this.state.form.fileName&&this.state.form.fileScope?$qry.run("mmf.SaveAsScript",{Name:this.state.form.fileName,Scope:this.state.form.fileScope,Definition:this.state.form.editorCode,Type:this.state.form.Type}).then(function(result){result&&self.props.addFlashMessage({title:"Success - ",subtitle:"script saved successfully!"})}):this.setState({invalidFileName:!this.state.form.fileName,invalidScope:!this.state.form.fileScope})}},{key:"runScript",value:function(){var self=this,form=cloneDeep(self.state.form);form.result="",self.setState({form:form});var mockInput={};(this.props.MockInputValue&&this.props.MockInputValue||[]).map(function(mockInputItem,indx){mockInput[mockInputItem.name]=mockInputItem.value}),ScriptRunnerUtil(this.state.form.editorCode,this.state.form.Type,mockInput).then(function(result){var form=self.state.form;form.result=JSON.stringify(result,null,"\t"),self.setState({form:form})}).catch(function(err){var form=self.state.form;form.result=JSON.stringify({result:{error:err.message}},null,"\t"),self.setState({form:form})})}},{key:"fileNameChanged",value:function(e){var form=this.state.form;form.fileName=e.target.value,this.setState({form:form})}},{key:"fileScopeChanged",value:function(e){var form=this.state.form;form.fileScope=e.target.value,this.setState({form:form})}},{key:"captureScriptType",value:function(e){var form=this.state.form;form.Type=e.target.value,this.setState({form:form}),this.props.updateStore({updates:{scriptRunnerCode:this.state.form.editorCode,scriptRunnerPosition:this.state.position}})}},{key:"refreshHistory",value:function(activeScriptId){var _this2=this;return new Promise(function(resolve,reject){if(_this2.props.recentlySearchedScripts){var scriptIds=_this2.props.recentlySearchedScripts?_this2.props.recentlySearchedScripts:[];-1==scriptIds.indexOf(activeScriptId)&&scriptIds.push(activeScriptId),$qry.run("mmf.GetCommonServerScripts",{scriptIds:scriptIds},"data.MetaReusableScript.MetaReusableScriptFind").then(function(result){if(result&&Object.keys(result)){var searchResults=[];Object.keys(result).map(function(scriptId){searchResults.push({uid:scriptId,Name:result[scriptId].Name,Scope:result[scriptId].Scope,Definition:result[scriptId].Definition,Type:result[scriptId].Type})}),resolve(searchResults)}})}})}},{key:"loadDetails",value:function(activeScriptId){var _this3=this;this.refreshHistory(activeScriptId).then(function(searchResults){var matchingScript=searchResults.filter(function(item){return item.uid==activeScriptId});matchingScript=1==matchingScript.length?matchingScript[0]:null;var form=cloneDeep(_this3.state.form);matchingScript&&(form={fileName:matchingScript.Name,fileScope:matchingScript.Scope,editorCode:matchingScript.Definition,Type:matchingScript.Type});var inputVariables={};(_this3.props.MockInputValue&&_this3.props.MockInputValue||[]).map(function(mockInputItem,indx){inputVariables[mockInputItem.name]=mockInputItem.value});var queryStr=_this3.state.showInputMapper&&form&&form.fileName?'$script.runscript("'+form.fileScope+"."+form.fileName+'", '+JSON.stringify(inputVariables)+").then((result)=>{ $resolve(result); })":_this3.state.queryToCopy+"";_this3.setState({activeScriptId:activeScriptId,form:form,searchResults:searchResults,queryToCopy:queryStr})})}},{key:"render",value:function(){var _ref,_this4=this,RecordLookup=SrsReference(),searchQueriesProps={title:"Search History",tablename:"MetaReusableScript",displayfield:"Name",secondarydisplayfield:"Scope",searchfields:"Name,Scope",filter:JSON.stringify({where:{or:[{Type:"common"},{Type:"server"}]}}),onChange:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(item){var scripts,scriptsWithoutCurrentId;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:scripts=cloneDeep(_this4.props.recentlySearchedScripts),scriptsWithoutCurrentId=scripts.filter(function(scriptId,indx){return scriptId!=item.id&&indx<_this4.historyLimit}),scripts=[item.id].concat(scriptsWithoutCurrentId),_this4.props.updateStore({updates:{recentlySearchedScripts:scripts,activeSearchScriptId:item.id}}),_this4.loadDetails(item.id);case 5:case"end":return _context.stop()}},_callee,_this4)})),function(_x){return _ref.apply(this,arguments)})};this.editorContent=React.createElement(MonacoEditor,{width:this.state.editor.width,height:this.state.editor.height,language:"javascript",theme:"vs-dark",value:this.state.form.editorCode,defaultValue:this.state.form.editorCode,options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1},onChange:this.codeChanged,requireConfig:{url:"/thirdpartylib/require.js",paths:{vs:"/thirdpartylib/monaco/min/vs"}},editorWillMount:this.editorWillMount,editorDidMount:this.editorDidMount});var fieldMapperStyles={left:0,bottom:0,cursor:"pointer",position:"absolute",height:this.state.showInputMapper?"30%":"2rem",width:this.state.showInputMapper?"100%":"2rem",zIndex:100};this.state.showInputMapper?(fieldMapperStyles.borderTop="1px solid #787a80",fieldMapperStyles.backgroundColor="#ececec"):(fieldMapperStyles.border=0,fieldMapperStyles.backgroundColor="#eefef0");for(var regex=new RegExp("\\$input.([a-zA-Z0-9_]+)","g"),match=void 0,fields2Map=[];match=regex.exec(this.state.editorCode);)match&&2==match.length&&fields2Map.push(match[1]);var groupElementStyle={marginRight:30,width:"20vw",display:"inline-block",float:"left"},groupedItems={},fieldResult=(SrsKeyValuePair(),React.createElement("srs-key-value-pair",_extends({varname:"inputobj"},{placeholder_name:"Enter Variable Name",placeholder_value:"Enter Value",label:"Mock Input Object"}))),listOfFields=(this.props.form&&this.props.form.formFields&&this.props.form.formFields,[]);(fields2Map=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[]).map(function(fieldName,indx){listOfFields.push(React.createElement(TextInput,{labelText:fieldName,placeholder:"Enter value...",required:!0,defaultValue:_this4.state.fieldMappingValues?_this4.state.fieldMappingValues[fieldName]:"",onChange:function(e){var fieldValue=e.target.value,fieldMappingValues=cloneDeep(_this4.state.fieldMappingValues);fieldMappingValues[fieldName]=fieldValue;var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this4.state.fieldMappingValues&&_this4.state.fieldMappingValues[inputField]?_this4.state.fieldMappingValues[inputField]:""});var queryStr=_this4.state.showInputMapper&&form&&form.fileName?'$script.runscript("'+form.fileScope+"."+form.fileName+'", '+JSON.stringify(inputVariables)+").then((result)=>{ $resolve(result); })":_this4.state.queryToCopy+"";_this4.setState({fieldMappingValues:fieldMappingValues,queryToCopy:queryStr})}}))});var fieldCount=0;listOfFields.map(function(field,indx){if(field){var group=parseInt(fieldCount/4);groupedItems[group]=groupedItems[group]||[],groupedItems[group].push(React.createElement("div",{style:groupElementStyle},field)),fieldCount++}});var notificationBar=this.props.embedded+""!="true"&&this.props.notifications&&this.props.notifications.length>0&&!this.props.showpreview?React.createElement("notification-bar",{styles:JSON.stringify({position:"fixed",width:"30%",right:10,minHeight:100,overflow:"auto",display:"block",zIndex:99999,bottom:5})}):null;return React.createElement("div",{style:{height:"inherit",maxHeight:"97vh",overflow:"hidden",display:"inline-flex",width:"100%"},ref:"topElement"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/mmf/ScriptRunner/Style.css"); @import url("/thirdpartylib/monaco/min/vs/editor/editor.main.css")'),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsMode.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/lib/typescriptServices.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsWorker.js"}),notificationBar,React.createElement("div",{style:fieldMapperStyles},this.state.showInputMapper&&this.state.editorCode?React.createElement("div",{style:{float:"right",marginTop:-20,width:"10rem",border:"1px solid blue",backgroundColor:"#76ae7e",color:"white",textAlign:"center",cursor:"copy"}},React.createElement(CopyToClipboard,{text:this.state.queryToCopy,onCopy:function(){return _this4.props.addFlashMessage({title:"Success - ",subtitle:"Query script copied to clipboard!"})}},React.createElement("span",null,"Copy Script"))):null,this.state.showInputMapper?React.createElement(Close32,{style:{float:"right"},onClick:function(e){return _this4.setState({showInputMapper:!_this4.state.showInputMapper})}}):React.createElement(FieldMapper,{style:{float:"left"},onClick:function(e){var queryStr=_this4.state.queryToCopy+"";if(!_this4.state.showInputMapper){var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this4.state.fieldMappingValues&&_this4.state.fieldMappingValues[inputField]?_this4.state.fieldMappingValues[inputField]:""}),queryStr='$script.runscript("'+_this4.state.form.fileScope+"."+_this4.state.form.fileName+'", '+JSON.stringify(inputVariables)+").then((result)=>{ $resolve(result); })"}_this4.setState({showInputMapper:!_this4.state.showInputMapper,queryToCopy:queryStr})}}),this.state.showInputMapper?fieldResult:null),React.createElement("div",{className:"navPane",style:{width:"20%"}},React.createElement("div",{style:{display:"inline-table",marginLeft:"20%",marginTop:10,marginBottom:10}},React.createElement(Button,_extends({},{kind:"primary",size:"small"},{onClick:this.runScript,style:{justifyContent:"center",backgroundColor:"rgb(144, 23, 23)",boxShadow:"rgba(0, 0, 0, 0.133) 0px 1.6px 3.6px 0px, rgba(0, 0, 0, 0.11) 0px 0.3px 0.9px 0px",paddingLeft:60}}),"Run")),React.createElement("div",{style:{display:"inline-table",marginTop:10,marginLeft:20,padding:20,border:"1px solid #d4d3d3",boxShadow:"rgba(0, 0, 0, 0.133) 0px 1.6px 3.6px 0px, rgba(0, 0, 0, 0.11) 0px 0.3px 0.9px 0px"}},React.createElement(Select,{labelText:"Execute Script",onChange:this.captureScriptType,id:"type",iconDescription:"Run Script",value:this.state.form&&this.state.form.Type?this.state.form.Type:"server",required:"required"},React.createElement(SelectItem,{value:"server",text:"Server Side"}),React.createElement(SelectItem,{value:"common",text:"Common Side"})),React.createElement(TextInput,{labelText:"Script Name",placeholder:"Enter name...",style:{float:"left"},invalid:this.state.invalidFileName,invalidText:"Value Required",value:this.state.form.fileName,onChange:this.fileNameChanged}),React.createElement(TextInput,{labelText:"Script Scope",placeholder:"Scope...",style:{float:"left"},invalid:this.state.invalidFileName,invalidText:"Value Required",value:this.state.form.fileScope,onChange:this.fileScopeChanged}),React.createElement(Button,{style:{justifyContent:"center",marginLeft:"15%",marginTop:"10%"},size:"small",onClick:this.save2File},"Save")),React.createElement(RecordLookup,searchQueriesProps)),React.createElement("div",{style:{display:"inline-flex",float:"left",marginTop:10,width:"80%"}},React.createElement("div",{className:"content"},React.createElement("div",{className:this.state.editor.className},this.editorContent)),React.createElement("div",{className:"ResultSection",style:{height:"97vh",marginRight:5}},React.createElement(Button,{style:{position:"sticky",top:0,display:"grid"},size:"small",onClick:function(e){var form=_this4.state.form;form.result="",_this4.setState({form:form})}}," Reset "),this.state.form.result?React.createElement("div",{style:{marginTop:20,height:"90%",overflow:"scroll"}},React.createElement(ReactJson,{src:JSON.parse(this.state.form.result)})):React.createElement("img",{src:"/resources/NoResults.jpg",style:{width:"20rem",height:"20rem",marginLeft:"15%",marginTop:"15%"}}))))}}]),_ScriptRunner}(React.Component),_export("ScriptRunner",ScriptRunner=function(props){return _ScriptRunner}),_export("ScriptRunner",ScriptRunner),_export("default",ScriptRunner),_export("states",states=[{KeyName:"scriptRunnerCode",AccessPath:"scriptRunnerCode",DefaultValue:'{"scriptRunnerCode": ""}'},{KeyName:"scriptRunnerPosition",AccessPath:"scriptRunnerPosition",DefaultValue:'{"scriptRunnerPosition": { "lineNumber": 1, "column": 1 }}'},{KeyName:"MockInputValue",AccessPath:"keyvaluepair.inputobj",DefaultValue:'{"keyvaluepair": {"inputobj": []}}'},{KeyName:"activeSearchScriptId",AccessPath:"activeSearchScriptId",DefaultValue:'{"activeSearchScriptId": ""}'},{KeyName:"notifications",AccessPath:"notifications",DefaultValue:'{"notifications": []}'},{KeyName:"recentlySearchedScripts",AccessPath:"recentlySearchedScripts",DefaultValue:'{"recentlySearchedScripts": []}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("client/script/mmf/ScriptRunnerUtil.js",[],function(_export,_context){"use strict";var ScriptRunnerUtil;function checkStatus(response){if(response.status>=200&&response.status<300)return response;var error=new Error("HTTP Error "+response.statusText);throw error.status=response.statusText,error.response=response,console.log(error),error}function parseJSON(response){return console.log(response),response.json()}return{setters:[],execute:function(){_export("ScriptRunnerUtil",ScriptRunnerUtil=function(inputScript,scriptType,$input){switch(scriptType){case"common":return function(inputScript,$input){return new Promise(function(resolve,reject){var variables={Payload:"module.exports=function($qry, $script){\n                return new Promise((resolve, reject) => {\n                    (async function($qry, $script, $resolve, $reject){\n                        var $input = ($input? JSON.stringify($input): JSON.stringify({}));\n                        try {\n                            await "+inputScript+"();\n                        }catch(err) {\n                            $resolve({error: err.message});\n                        }\n                    })($qry, $script, resolve, reject)\n                });\n            };"};$qry.run("add2Transient",variables).then(function(resp){resp.uid&&System.import("/script/dynamic/"+resp.uid+".js").then(function(code2Execute){code2Execute($qry,$script).then(function(result){resolve(result)}).catch(function(err){resolve(err)})}).catch(function(err){console.log(err),resolve(err)})})})}(inputScript);case"server":return function(inputScript,$input){return new Promise(function(resolve,reject){var script="(async function() {\n          var $input = "+($input?JSON.stringify($input):JSON.stringify({}))+";\n          try {\n            await "+inputScript+"();          \n          }catch(err) {\n              $resolve({error: err.message});\n          }\n      })()";fetch("/runscript",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({script:script})}).then(checkStatus).then(parseJSON).then(function(result){resolve(result)})})}(inputScript,$input)}}),_export("ScriptRunnerUtil",ScriptRunnerUtil),_export("default",ScriptRunnerUtil)}}}),System.register("client/script/mmf/$qry.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js"],function(_export,_context12){"use strict";var _regeneratorRuntime,_asyncToGenerator,$qry;function escapeStr(input){var result=input;try{input&&input.replace&&(result=input.replace(/\"/g,'\\"').replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\{/g,"\\{").replace(/[\u0000-\u0019]+/g,""))}catch(err){console.log("Error occurred while escaping "+input+"--"+err)}return result}return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default}],execute:function(){_export("$qry",$qry={cache:{},cachableRequests:[],cacheInPromise:[],setCachableScripts:function(scriptNames){this.cachableRequests=scriptNames},getAggregate:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(model,filter,field,operation){var result,rows;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return result=null,_context.next=3,this.getRecords(model,filter,[field]);case 3:return rows=_context.sent,rows.map(function(row){if(row[field]){if(row[field]&&!parseFloat(row[field]))throw Error("Invalid Field or value");var currentVal=row[field];switch(operation){case"sum":result=result?result+currentVal:currentVal;break;case"min":result=result?result-currentVal>0?currentVal:result:currentVal;break;case"max":result=result?result-currentVal<0?currentVal:result:currentVal}}}),_context.abrupt("return",result);case 6:case"end":return _context.stop()}},_callee,this)}));return function(_x,_x2,_x3,_x4){return _ref.apply(this,arguments)}}(),getCachableRecords:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(model,filter,outputFields,pageNumber,pageSize,forceLoad){var cacheKey,data;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(cacheKey="records_"+model+"_"+JSON.stringify(filter)+"_"+outputFields.join("_"),data=null,!this.cache[cacheKey]||forceLoad){_context2.next=6;break}data=this.cache[cacheKey],_context2.next=10;break;case 6:return _context2.next=8,this.getRecords(model,filter,outputFields,pageNumber,pageSize);case 8:data=_context2.sent,this.cache[cacheKey]=data;case 10:return _context2.abrupt("return",data);case 11:case"end":return _context2.stop()}},_callee2,this)}));return function(_x5,_x6,_x7,_x8,_x9,_x10){return _ref2.apply(this,arguments)}}(),getRecords:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(model,filter,outputFields,pageNumber,pageSize){var result,modelName,resultantFields,self,needServerCall,cachedData,queryKey,recordNodes;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(result=[],modelName=model,model.endsWith("_mmf")&&(modelName=model.split("_mmf")[0]),resultantFields=outputFields&&outputFields.length>0?outputFields:["uid"],self=this,needServerCall=!0,cachedData=null,queryKey=encodeURI(modelName+JSON.stringify(filter)+resultantFields),!(self.cachableRequests.indexOf(modelName)>-1)){_context3.next=23;break}if(!self.cache[queryKey]){_context3.next=14;break}return needServerCall=!1,_context3.abrupt("return",self.cache[queryKey]);case 14:if(!(self.cacheInPromise.indexOf(queryKey)>-1)){_context3.next=22;break}return needServerCall=!1,_context3.next=18,self.getCachedData(queryKey);case 18:return cachedData=_context3.sent,_context3.abrupt("return",cachedData);case 22:self.cacheInPromise.push(queryKey);case 23:if(!needServerCall){_context3.next=30;break}return _context3.next=26,$script.runAtServer("getRecords",{tableName:modelName,fields:outputFields,fieldAliases:null,filter:filter,pageNumber:pageNumber,pageSize:pageSize});case 26:return(recordNodes=_context3.sent)&&recordNodes.length>0&&recordNodes.map(function(recordNode){var resultObj={};resultantFields.map(function(resultantField){recordNode.node&&(resultObj[resultantField]=recordNode.node[resultantField]||"")}),result.push(resultObj)}),self.cachableRequests.indexOf(modelName)>-1&&(self.cache[queryKey]=result),_context3.abrupt("return",result);case 30:case"end":return _context3.stop()}},_callee3,this)}));return function(_x11,_x12,_x13,_x14,_x15){return _ref3.apply(this,arguments)}}(),getRecordCount:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(model,filter){var modelName,queryDefinition,variables,countData,countPath,count;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return modelName=model,model.endsWith("_mmf")&&(modelName=model.split("_mmf")[0]),queryDefinition="query($input: JSON){\n                                "+modelName+"{\n                                "+modelName+"Count(where: $input)\n                                }\n                            }",variables={input:filter},_context4.next=6,this._run(queryDefinition,variables);case 6:return countData=_context4.sent,countPath="data."+modelName+"."+modelName+"Count",count=this.getValue(countData,countPath),_context4.abrupt("return",{count:count});case 10:case"end":return _context4.stop()}},_callee4,this)}));return function(_x16,_x17){return _ref4.apply(this,arguments)}}(),createRecord:function(model,fields,outputFields,cb){var _this=this,modelName=model;model.endsWith("_mmf")&&(modelName=model.split("_mmf")[0]);var _ref5,queryNParams=this._getInsertQueryNParams(modelName,fields,outputFields);if(!cb)return new Promise((_ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(resolve,reject){var data;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.prev=0,_context5.next=3,_this._run(queryNParams.query,queryNParams.variables,queryNParams.accesspath);case 3:data=_context5.sent,resolve(data),_context5.next=10;break;case 7:_context5.prev=7,_context5.t0=_context5.catch(0),resolve({result:{error:!0,msg:_context5.t0}});case 10:case"end":return _context5.stop()}},_callee5,_this,[[0,7]])})),function(_x18,_x19){return _ref5.apply(this,arguments)}));this._run(queryNParams.query,queryNParams.variables,queryNParams.accesspath).then(function(data){cb(data)}).catch(function(err){console.error("Error occurred in $qry.createRecord - "+err)})},updateRecord:function(model,modelId,fields,outputFields,cb){var _this2=this,modelName=model;model.endsWith("_mmf")&&(modelName=model.split("_mmf")[0]);var _ref6,queryNParams=this._getUpsertQueryNParams(modelName,modelId,fields,outputFields);if(!cb)return new Promise((_ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(resolve,reject){var data;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.prev=0,_context6.next=3,_this2._run(queryNParams.query,queryNParams.variables,queryNParams.accesspath);case 3:data=_context6.sent,resolve(data),_context6.next=10;break;case 7:_context6.prev=7,_context6.t0=_context6.catch(0),resolve({result:{error:!0,msg:_context6.t0}});case 10:case"end":return _context6.stop()}},_callee6,_this2,[[0,7]])})),function(_x20,_x21){return _ref6.apply(this,arguments)}));this._run(queryNParams.query,queryNParams.variables,queryNParams.accesspath).then(function(data){cb(data)}).catch(function(err){console.error("Error occurred in $qry.updateRecord - "+err)})},updateRecords:function(model,filter,fields,outputFields,cb){var _this3=this,modelName=model;model.endsWith("_mmf")&&(modelName=model.split("_mmf")[0]);var _ref7,queryNParams=this._getUpsertFilterQueryNParams(modelName,filter,fields,outputFields);if(!cb)return new Promise((_ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(resolve,reject){var data;return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.prev=0,_context7.next=3,_this3._run(queryNParams.query,queryNParams.variables,queryNParams.accesspath);case 3:data=_context7.sent,resolve(data),_context7.next=10;break;case 7:_context7.prev=7,_context7.t0=_context7.catch(0),resolve({result:{error:!0,msg:_context7.t0}});case 10:case"end":return _context7.stop()}},_callee7,_this3,[[0,7]])})),function(_x22,_x23){return _ref7.apply(this,arguments)}));this._run(queryNParams.query,queryNParams.variables,queryNParams.accesspath).then(function(data){cb(data)}).catch(function(err){console.error("Error occurred in $qry.updateRecord - "+err)})},deleteRecord:function(model,modelId,cb){var _this4=this,modelName=model;model.endsWith("_mmf")&&(modelName=model.split("_mmf")[0]);var _ref8,queryNParams=this._getDeleteByIdQueryNParams(modelName,modelId);if(!cb)return new Promise((_ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(resolve,reject){var data;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return _context8.prev=0,_context8.next=3,_this4._run(queryNParams.query,queryNParams.variables);case 3:data=_context8.sent,resolve(data),_context8.next=10;break;case 7:_context8.prev=7,_context8.t0=_context8.catch(0),resolve({result:{error:!0,msg:_context8.t0}});case 10:case"end":return _context8.stop()}},_callee8,_this4,[[0,7]])})),function(_x24,_x25){return _ref8.apply(this,arguments)}));this._run(queryNParams.query,queryNParams.variables).then(function(data){cb(data)}).catch(function(err){console.error("Error occurred in $qry.deleteRecord - "+err)})},deleteRecords:function(model,filter,cb){var _this5=this,modelName=model;model.endsWith("_mmf")&&(modelName=model.split("_mmf")[0]);var _ref9,queryNParams={query:"mutation($input:JSON){\n          "+modelName+"DestroyAll(input:$input){\n            obj\n          }  \n        }",variables:'{\n          "input": {\n            "where": '+JSON.stringify(filter)+"\n          }  \n        }"};if(!cb)return new Promise((_ref9=_asyncToGenerator(_regeneratorRuntime.mark(function _callee9(resolve,reject){var data;return _regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.prev=0,_context9.next=3,_this5._run(queryNParams.query,queryNParams.variables);case 3:data=_context9.sent,resolve(data),_context9.next=10;break;case 7:_context9.prev=7,_context9.t0=_context9.catch(0),resolve({result:{error:!0,msg:_context9.t0}});case 10:case"end":return _context9.stop()}},_callee9,_this5,[[0,7]])})),function(_x26,_x27){return _ref9.apply(this,arguments)}));this._run(queryNParams.query,queryNParams.variables).then(function(data){cb(data)}).catch(function(err){console.error("Error occurred in $qry.deleteRecord - "+err)})},_getInsertQueryNParams:function(tableName,fields,outputFields){var result={},modelName=tableName;return tableName.endsWith("_mmf")&&(modelName=tableName.split("_mmf")[0]),result.query="mutation($input: "+modelName+"CreateInput!){\n "+modelName+"Create(input:$input){\n obj{\n "+outputFields.join(" ")+" \n} \n} \n}",result.variables='{"input": { "data": '+JSON.stringify(fields)+" } }",result.accesspath="data."+modelName+"Create.obj",result},_getUpsertQueryNParams:function(tableName,recordId,fields,outputFields){var result={},modelName=tableName;return tableName.endsWith("_mmf")&&(modelName=tableName.split("_mmf")[0]),result.query="mutation($input: "+modelName+"UpsertWithWhereInput!){\n "+modelName+"UpsertWithWhere(input:$input){\n obj{\n "+outputFields.join(" ")+" \n} \n} \n}",result.variables='{"input": { "data": '+JSON.stringify(fields)+', "where":{ "uid": "'+recordId+'" }  } }',result.accesspath="data."+modelName+"UpsertWithWhere.obj",result},_getUpsertFilterQueryNParams:function(tableName,filter,fields,outputFields){var result={},modelName=tableName;return tableName.endsWith("_mmf")&&(modelName=tableName.split("_mmf")[0]),result.query="mutation($input: "+modelName+"UpsertWithWhereInput!){\n "+modelName+"UpsertWithWhere(input:$input){\n obj{\n "+outputFields.join(" ")+" \n} \n} \n}",result.variables='{"input": { "data": '+JSON.stringify(fields)+', "where":'+JSON.stringify(filter)+"  } }",result.accesspath="data."+modelName+"UpsertWithWhere.obj",result},_getDeleteByIdQueryNParams:function(tableName,recordId){var result={},modelName=tableName;return tableName.endsWith("_mmf")&&(modelName=tableName.split("_mmf")[0]),result.query="mutation($input: "+modelName+"DeleteByIdInput!){\n "+modelName+"DeleteById(input:$input){\n obj \n} \n}",result.variables='{"input": { "id": "'+recordId+'" } }',result},getQuery:function(queryName,scope){var _this6=this,self=this,scopeValue=scope||"mmf";return new Promise(function(resolve,reject){var variables={whereClause:{where:{Name:queryName,Scope:scopeValue}}};_this6._run("query($whereClause: JSON){\n  MetaQuery{\n  MetaQueryFindOne(filter: $whereClause){\n    uid\n    Name\n    Definition\n    Variables\n  AccessPath\n}\n }\n}\n",variables).then(function(result){resolve(self.getValue(result,"data.MetaQuery.MetaQueryFindOne"))}).catch(function(err){console.log("Error occurred... "+err),resolve("")})})},getValue:function(obj,paths){var result;if(!paths)return obj;var accessPaths=paths.split(",");return accessPaths&&accessPaths.forEach(function(path){var partialResult=path.split(".").reduce(function(prev,curr){return prev?prev[curr]:null},obj);result=result?Object.assign(result,partialResult):partialResult}),result},run:function(queryName,inputParams,overrideAccessPaths,atClient,getFromCache){return atClient?this.runAtClient(queryName,inputParams,overrideAccessPaths,getFromCache):this.runAtServer(queryName,inputParams,overrideAccessPaths,getFromCache)},runAtClient:function(queryName,inputParams,overrideAccessPaths,getFromCache){var _this7=this;return new Promise(function(resolve,reject){var self=_this7,queryKey=encodeURI(queryName+JSON.stringify(inputParams)+overrideAccessPaths);if(getFromCache&&self.cache[queryKey])resolve(self.cache[queryKey]);else{var queryNameValue=queryName,scopeValue="mmf";if(queryName.indexOf(".")>=0){var queryParts=queryName.split(".");queryNameValue=queryParts[1],scopeValue=queryParts[0]}try{_this7.getQuery(queryNameValue,scopeValue).then(function(result){if(result){var queryDefinition=result.Definition,variables=result.Variables,accessPaths=overrideAccessPaths||result.AccessPath,fileParam=null;inputParams&&(inputParams.constructor==File?fileParam=inputParams:Array.isArray(inputParams)?inputParams.forEach(function(paramValue){var regex=new RegExp("\\${"+paramValue+"}","g");paramValue&&paramValue.constructor==File?fileParam=inputParams:variables=variables.replace(regex,escapeStr(paramValue))}):Object.keys(inputParams).forEach(function(inputParam){var paramValue=inputParams[inputParam];if("object"==typeof paramValue){paramValue=Array.isArray(paramValue)?void 0==paramValue||null==paramValue?[]:paramValue:void 0==paramValue||null==paramValue?{}:paramValue;var regex=new RegExp('"\\$\\{'+inputParam+'\\}"',"g");variables=variables.replace(regex,JSON.stringify(paramValue))}else{paramValue=void 0==paramValue||null==paramValue?"":paramValue;regex=new RegExp("\\${"+inputParam+"}","g");paramValue&&paramValue.constructor==File?console.log(paramValue):variables=variables.replace(regex,escapeStr(paramValue))}})),variables=fileParam?Array.isArray(fileParam)?{files:fileParam}:{file:fileParam}:JSON.parse(variables),self._run(queryDefinition,variables).then(function(result){result&&accessPaths?resolve(self.getValue(result,accessPaths)):(self.cache[queryKey]=result,resolve(result))}).catch(function(err){console.log("Error occurred when running query definition - "+queryDefinition+" - "+err),self.cache[queryKey]="",resolve("")})}else self.cache[queryKey]="",resolve("")}).catch(function(err){console.log("Error occurred fetching the query - "+queryNameValue+"."+scopeValue+" - "+err),self.cache[queryKey]="",resolve("")})}catch(ex){console.log("Error occurred fetching query - "+queryName+" - "+ex),self.cache[queryKey]="",resolve("")}}})},getCachedData:function(cacheKey){var self=this;return new Promise(function(resolve,reject){var watchInternal=setInterval(function(){self.cache[cacheKey]&&(clearInterval(watchInternal),resolve(self.cache[cacheKey]))},10)})},runAtServer:function(queryName,inputParams,overrideAccessPaths,getFromCache){var _ref10,_this8=this;return new Promise((_ref10=_asyncToGenerator(_regeneratorRuntime.mark(function _callee11(resolve,reject){var self,needServerCall,queryKey,url,inputScript;return _regeneratorRuntime.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:self=_this8,needServerCall=!0,queryKey=encodeURI(queryName+JSON.stringify(inputParams)+overrideAccessPaths),self.cachableRequests.indexOf(queryName)>-1&&self.cache[queryKey]&&(needServerCall=!1,setTimeout(function(){return resolve(self.cache[queryKey])},10)),needServerCall&&(url="/runscript",inputScript="$qry.run("+JSON.stringify(queryName)+", "+JSON.stringify(inputParams)+", "+JSON.stringify(overrideAccessPaths)+").then((results)=>$resolve(results))",fetch(url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:_this8.getCookie("authorization")},body:JSON.stringify({script:inputScript})}).then(_this8.checkStatus).then(function(){var _ref11=_asyncToGenerator(_regeneratorRuntime.mark(function _callee10(response){var result,updatedResponse,responseAfterCheck;return _regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return result={},_context10.prev=1,_context10.next=4,response.json();case 4:if("replay"!=(result=_context10.sent).status){_context10.next=17;break}return _context10.next=8,fetch(url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:_this8.getCookie("authorization")},body:JSON.stringify({script:inputScript})});case 8:return updatedResponse=_context10.sent,_context10.next=11,_this8.checkStatus(updatedResponse);case 11:return responseAfterCheck=_context10.sent,_context10.next=14,responseAfterCheck.json();case 14:result=_context10.sent,_context10.next=18;break;case 17:"loggedout"==result.status&&(top.location="/loginhome");case 18:_context10.next=23;break;case 20:_context10.prev=20,_context10.t0=_context10.catch(1),console.error("Error parsing response for Query - "+queryName+" with error - "+_context10.t0.message);case 23:return _context10.abrupt("return",result);case 24:case"end":return _context10.stop()}},_callee10,_this8,[[1,20]])}));return function(_x30){return _ref11.apply(this,arguments)}}()).then(function(result){self.cachableRequests.indexOf(queryName)>-1&&(self.cache[queryKey]=result),resolve(result)}));case 5:case"end":return _context11.stop()}},_callee11,_this8)})),function(_x28,_x29){return _ref10.apply(this,arguments)}))},_run:function(query,variables,overrideAccessPaths){var _this9=this,_ref12=window.graphqlLodash?window.graphqlLodash(query):{query:query,function:function(q){return q}},_query=_ref12.query,_transform=_ref12.transform,requestPayload={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:this.getCookie("authorization")},body:JSON.stringify({query:_query,variables:variables})},self=this;return new Promise(function(resolve,reject){try{fetch("/graphql?",requestPayload).then(_this9.checkStatus).then(function(response){var result={};try{result=response.json()}catch(err){console.error("Error parsing response from graphql request with payload - "+requestPayload)}return result}).then(function(result){if(result.errors&&result.errors.length>0){var errors=[];result.errors.map(function(error){return errors.push(error.message)}),resolve({errors:errors,data:null})}else{var resultData={data:_transform(result.data)};resolve(resultData&&overrideAccessPaths?self.getValue(resultData,overrideAccessPaths):resultData)}}).catch(function(err){console.error(err),document.cookie="accessToken=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",resolve("")})}catch(err){console.error(err)}})},waituntil:function(condition,condition_value){var _this10=this,requestPayload={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:this.getCookie("authorization")},body:JSON.stringify({condition:condition,condition_value:condition_value})};return new Promise(function(resolve,reject){fetch("/waituntil",requestPayload).then(_this10.checkStatus).then(_this10.parseJSON).then(function(result){resolve(result)}).catch(function(err){resolve({status:"error",error:err.message})})})},saveQuery:function(queryName,scopeValue,queryPayload,variablesPayload,accessPath){var variables={input:{where:{Name:queryName,Scope:scopeValue},data:{Name:queryName,Scope:scopeValue,Definition:queryPayload,Variables:variablesPayload||{},AccessPath:accessPath||"data"}}};return this._run("mutation($input: MetaQueryUpsertWithWhereInput!){\nMetaQueryUpsertWithWhere(input: $input) {\nobj{\nuid\n}\n}\n}\n",variables)},checkStatus:function(response){if(response.redirected&&response.location)return window.location=response.location,"{}";if(response.url&&"/login"==new URL(response.url).pathname)return window.location="/login","{}";if(response.status>=200&&response.status<300)return response;var error=new Error("HTTP Error "+response.statusText);throw error.status=response.statusText,error.response=response,console.log(error),error},getCookie:function(cname){for(var name=cname+"=",ca=decodeURIComponent(document.cookie).split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""}}),_export("$qry",$qry),_export("default",$qry)}}}),System.register("component/mmf/ScriptRunner/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","react-router-dom","@carbon/icons-react/lib/close/32","react-monaco-editor","@carbon/icons-react/lib/data--unstructured/32","carbon-components-react","component/studio/SrsReference/Definition.js","component/studio/SrsKeyValuePair/Definition.js","client/script/mmf/ScriptRunnerUtil.js","react-copy-to-clipboard","client/script/mmf/$qry.js","@carbon/icons-react/lib/run/32","react-json-view","lodash.clonedeep"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Close32,MonacoEditor,FieldMapper,Button,TextInput,Select,SelectItem,SrsReference,SrsKeyValuePair,ScriptRunnerUtil,CopyToClipboard,$qry,ReactJson,cloneDeep,_ScriptRunner,ScriptRunner;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_reactRouterDom){_reactRouterDom.BrowserRouter,_reactRouterDom.Route,_reactRouterDom.Link,_reactRouterDom.withRouter,_reactRouterDom.matchPath},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_carbonIconsReactLibDataUnstructured){FieldMapper=_carbonIconsReactLibDataUnstructured.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_componentStudioSrsKeyValuePairDefinitionJs){SrsKeyValuePair=_componentStudioSrsKeyValuePairDefinitionJs.SrsKeyValuePair},function(_clientScriptMmfScriptRunnerUtilJs){ScriptRunnerUtil=_clientScriptMmfScriptRunnerUtilJs.ScriptRunnerUtil},function(_reactCopyToClipboard){CopyToClipboard=_reactCopyToClipboard.default},function(_clientScriptMmf$qryJs){$qry=_clientScriptMmf$qryJs.$qry},function(_carbonIconsReactLibRun){_carbonIconsReactLibRun.default},function(_reactJsonView){ReactJson=_reactJsonView.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_ScriptRunner=function(_React$Component){function _ScriptRunner(props,context){_classCallCheck(this,_ScriptRunner);var _this=_possibleConstructorReturn(this,(_ScriptRunner.__proto__||Object.getPrototypeOf(_ScriptRunner)).call(this,props)),defaultEditorCode='(async function SampleFn() {    \n    var result = {};\n    let qryResult = await $qry.run("mmf.getModelDefinition", {ModelName: $input.modelName, ModelScope: $input.modelScope} , "data.MetaModel.MetaModelFindOne");\n    $resolve(qryResult.Name);                                                    \n})';return _this.historyLimit=10,_this.state={dirty:!1,resetEditor:!0,editor:{width:.5*screen.width,height:.9*screen.height,mode:"collapsed",className:"scriptEditor"},editorCode:_this.props.scriptRunnerCode?_this.props.scriptRunnerCode:defaultEditorCode,position:_this.props.scriptRunnerPosition?_this.props.scriptRunnerPosition:{lineNumber:1,column:1},form:{editorCode:defaultEditorCode,fileName:"",fileScope:"",Type:"server",result:""},fieldMappingValues:{},queryToCopy:""},_this.runScript=_this.runScript.bind(_this),_this.save2File=_this.save2File.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.fileNameChanged=_this.fileNameChanged.bind(_this),_this.fileScopeChanged=_this.fileScopeChanged.bind(_this),_this.captureScriptType=_this.captureScriptType.bind(_this),_this.editorContent=null,_this.editorDidMount=_this.editorDidMount.bind(_this),_this.restoreEditor=_this.restoreEditor.bind(_this),_this.editor=null,_this.editorModel=null,_this.editorModelViewState=null,_this.loadDetails=_this.loadDetails.bind(_this),_this.refreshHistory=_this.refreshHistory.bind(_this),$ele.registerElement("SrsKeyValuePair","studio","React"),_this}return _inherits(_ScriptRunner,_React$Component),_createClass(_ScriptRunner,[{key:"componentDidMount",value:function(){!this.state.activeScriptId&&this.props.activeSearchScriptId&&this.loadDetails(this.props.activeSearchScriptId)}},{key:"editorDidMount",value:function(editor,monaco){monaco.languages.registerCompletionItemProvider("javascript",{provideCompletionItems:function(model,position){return[{label:'let records = await $qry.getRecords("[model]_[scope]", {where: {}}, ["uid"], [pageNumber], [pageSize])',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let records = await $qry.getRecords("[model]_[scope]", {where: {}, skip: 0, limit: 10}, ["uid"], [pageNumber], [pageSize])',documentation:"Utility to get the records"},{label:'let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',documentation:"Utility to get the record count of the matching filter"},{label:'let createdRecord = await $qry.createRecord("[model]_[scope]", {"Name": ""}, ["uid"])',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - createRecord = await $qry.createRecord("[model]_[scope]", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to create a new record"},{label:'let updatedRecord = await $qry.updateRecord("[model]_[scope]", "model_id", {"Name": ""}, ["uid"])',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to update an existing record"},{label:'let deletedRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',documentation:"Utility to delete a record"},{label:'deleteRecords = await $qry.deleteRecords("[model]_[scope]", "{uid: {"inq": ["id1", "id"]}}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "filter")',documentation:"Utility to delete multiple records"},{label:'$qry.run("{queryName}", "{variables}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'await $qry.run("{queryName}", "{variables}")',documentation:"Utility to mutate/fetch data from server using GraphQL"},{label:'$script.runscript("{scope.scriptName}", {inputVar: "inputValue"}).then((data)=>$resolve(data))',kind:monaco.languages.CompletionItemKind.Keyword,detail:'$script.runscript("{scope.scriptName}", {inputVar: "inputValue"}).then((data)=>$resolve(data))',documentation:"Utility to run the reusable script function."},{label:'tableDelete = await $qry._run(`mutation($inputData:[Table]DestroyAllInput!) {\n\t\t[Table]DestroyAll(input:$inputData){\n\t\t\tobj\n\t\t}\t}`, { "inputData": { "where": { "[FieldName]":"${varname}"} } },\n\t\t"data.[Table]DestroyAll.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-delete",documentation:"Delete query to remove the records from the table"},{label:'tableRead = await $qry._run(`query($input:JSON){\n\t[Table]{\n\t\t[Table]Find(filter: $input) @_(get: "edges"){\n\t\t\tedges @_(keyBy: "node.uid", mapValues:"node"){\n\t\t\t\tnode{\n\t\t\t\t\tuid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}`, { "input": { "where": { "uid": "${varname}" } } },\n"data.[Table].[Table]Find");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-read",documentation:"Open query to get the data from the table"},{label:'tableUpsert = await $qry._run(`mutation($input: [Table]UpsertWithWhereInput!){\n\t[Table]UpsertWithWhere(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "where": { "uid": "${varname}" }, "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]UpsertWithWhere.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-upsert",documentation:"Query to update the data in the table"},{label:'tableCreate = await $qry._run(`mutation($input: [Table]CreateInput!){\n\t[Table]Create(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]Create.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-create",documentation:"Query to create the record with the data"}]}});this.editor=editor,this.monaco=monaco,this.editorModel=editor.getModel(),this.restoreEditor()}},{key:"restoreEditor",value:function(){var self=this,saveEditorValue=this.editor.setValue.bind(this.editor);this.editor.setValue=function(val){saveEditorValue(val),self.state.position?(self.editor.setPosition(self.state.position),self.editor.revealLine(self.state.position.lineNumber),self.editor.revealLineInCenter(self.state.position.lineNumber)):(self.editor.setPosition({lineNumber:1,column:1}),self.editor.revealLine(1),self.editor.revealLineInCenter(15)),self.editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:this.editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(this.editor._themeService._styleElement),this.editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"codeChanged",value:function(newValue,e){var form=cloneDeep(this.state.form);form.editorCode=newValue,this.setState({form:form,dirty:!0}),this.props.updateStore({updates:{scriptRunnerCode:newValue,scriptRunnerPosition:this.state.position}})}},{key:"save2File",value:function(){var self=this;this.state.form.fileName&&this.state.form.fileScope?$qry.run("mmf.SaveAsScript",{Name:this.state.form.fileName,Scope:this.state.form.fileScope,Definition:this.state.form.editorCode,Type:this.state.form.Type}).then(function(result){result&&self.props.addFlashMessage({title:"Success - ",subtitle:"script saved successfully!"})}):this.setState({invalidFileName:!this.state.form.fileName,invalidScope:!this.state.form.fileScope})}},{key:"runScript",value:function(){var self=this,form=cloneDeep(self.state.form);form.result="",self.setState({form:form});var mockInput={};(this.props.MockInputValue&&this.props.MockInputValue||[]).map(function(mockInputItem,indx){mockInput[mockInputItem.name]=mockInputItem.value}),ScriptRunnerUtil(this.state.form.editorCode,this.state.form.Type,mockInput).then(function(result){var form=self.state.form;form.result=JSON.stringify(result,null,"\t"),self.setState({form:form})}).catch(function(err){var form=self.state.form;form.result=JSON.stringify({result:{error:err.message}},null,"\t"),self.setState({form:form})})}},{key:"fileNameChanged",value:function(e){var form=this.state.form;form.fileName=e.target.value,this.setState({form:form})}},{key:"fileScopeChanged",value:function(e){var form=this.state.form;form.fileScope=e.target.value,this.setState({form:form})}},{key:"captureScriptType",value:function(e){var form=this.state.form;form.Type=e.target.value,this.setState({form:form}),this.props.updateStore({updates:{scriptRunnerCode:this.state.form.editorCode,scriptRunnerPosition:this.state.position}})}},{key:"refreshHistory",value:function(activeScriptId){var _this2=this;return new Promise(function(resolve,reject){if(_this2.props.recentlySearchedScripts){var scriptIds=_this2.props.recentlySearchedScripts?_this2.props.recentlySearchedScripts:[];-1==scriptIds.indexOf(activeScriptId)&&scriptIds.push(activeScriptId),$qry.run("mmf.GetCommonServerScripts",{scriptIds:scriptIds},"data.MetaReusableScript.MetaReusableScriptFind").then(function(result){if(result&&Object.keys(result)){var searchResults=[];Object.keys(result).map(function(scriptId){searchResults.push({uid:scriptId,Name:result[scriptId].Name,Scope:result[scriptId].Scope,Definition:result[scriptId].Definition,Type:result[scriptId].Type})}),resolve(searchResults)}})}})}},{key:"loadDetails",value:function(activeScriptId){var _this3=this;this.refreshHistory(activeScriptId).then(function(searchResults){var matchingScript=searchResults.filter(function(item){return item.uid==activeScriptId});matchingScript=1==matchingScript.length?matchingScript[0]:null;var form=cloneDeep(_this3.state.form);matchingScript&&(form={fileName:matchingScript.Name,fileScope:matchingScript.Scope,editorCode:matchingScript.Definition,Type:matchingScript.Type});var inputVariables={};(_this3.props.MockInputValue&&_this3.props.MockInputValue||[]).map(function(mockInputItem,indx){inputVariables[mockInputItem.name]=mockInputItem.value});var queryStr=_this3.state.showInputMapper&&form&&form.fileName?'$script.runscript("'+form.fileScope+"."+form.fileName+'", '+JSON.stringify(inputVariables)+").then((result)=>{ $resolve(result); })":_this3.state.queryToCopy+"";_this3.setState({activeScriptId:activeScriptId,form:form,searchResults:searchResults,queryToCopy:queryStr})})}},{key:"render",value:function(){var _ref,_this4=this,RecordLookup=SrsReference(),searchQueriesProps={title:"Search History",tablename:"MetaReusableScript",displayfield:"Name",secondarydisplayfield:"Scope",searchfields:"Name,Scope",filter:JSON.stringify({where:{or:[{Type:"common"},{Type:"server"}]}}),onChange:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(item){var scripts,scriptsWithoutCurrentId;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:scripts=cloneDeep(_this4.props.recentlySearchedScripts),scriptsWithoutCurrentId=scripts.filter(function(scriptId,indx){return scriptId!=item.id&&indx<_this4.historyLimit}),scripts=[item.id].concat(scriptsWithoutCurrentId),_this4.props.updateStore({updates:{recentlySearchedScripts:scripts,activeSearchScriptId:item.id}}),_this4.loadDetails(item.id);case 5:case"end":return _context.stop()}},_callee,_this4)})),function(_x){return _ref.apply(this,arguments)})};this.editorContent=React.createElement(MonacoEditor,{width:this.state.editor.width,height:this.state.editor.height,language:"javascript",theme:"vs-dark",value:this.state.form.editorCode,defaultValue:this.state.form.editorCode,options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1},onChange:this.codeChanged,requireConfig:{url:"/thirdpartylib/require.js",paths:{vs:"/thirdpartylib/monaco/min/vs"}},editorWillMount:this.editorWillMount,editorDidMount:this.editorDidMount});var fieldMapperStyles={left:0,bottom:0,cursor:"pointer",position:"absolute",height:this.state.showInputMapper?"30%":"2rem",width:this.state.showInputMapper?"100%":"2rem",zIndex:100};this.state.showInputMapper?(fieldMapperStyles.borderTop="1px solid #787a80",fieldMapperStyles.backgroundColor="#ececec"):(fieldMapperStyles.border=0,fieldMapperStyles.backgroundColor="#eefef0");for(var regex=new RegExp("\\$input.([a-zA-Z0-9_]+)","g"),match=void 0,fields2Map=[];match=regex.exec(this.state.editorCode);)match&&2==match.length&&fields2Map.push(match[1]);var groupElementStyle={marginRight:30,width:"20vw",display:"inline-block",float:"left"},groupedItems={},fieldResult=(SrsKeyValuePair(),React.createElement("srs-key-value-pair",_extends({varname:"inputobj"},{placeholder_name:"Enter Variable Name",placeholder_value:"Enter Value",label:"Mock Input Object"}))),listOfFields=(this.props.form&&this.props.form.formFields&&this.props.form.formFields,[]);(fields2Map=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[]).map(function(fieldName,indx){listOfFields.push(React.createElement(TextInput,{labelText:fieldName,placeholder:"Enter value...",required:!0,defaultValue:_this4.state.fieldMappingValues?_this4.state.fieldMappingValues[fieldName]:"",onChange:function(e){var fieldValue=e.target.value,fieldMappingValues=cloneDeep(_this4.state.fieldMappingValues);fieldMappingValues[fieldName]=fieldValue;var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this4.state.fieldMappingValues&&_this4.state.fieldMappingValues[inputField]?_this4.state.fieldMappingValues[inputField]:""});var queryStr=_this4.state.showInputMapper&&form&&form.fileName?'$script.runscript("'+form.fileScope+"."+form.fileName+'", '+JSON.stringify(inputVariables)+").then((result)=>{ $resolve(result); })":_this4.state.queryToCopy+"";_this4.setState({fieldMappingValues:fieldMappingValues,queryToCopy:queryStr})}}))});var fieldCount=0;listOfFields.map(function(field,indx){if(field){var group=parseInt(fieldCount/4);groupedItems[group]=groupedItems[group]||[],groupedItems[group].push(React.createElement("div",{style:groupElementStyle},field)),fieldCount++}});var notificationBar=this.props.embedded+""!="true"&&this.props.notifications&&this.props.notifications.length>0&&!this.props.showpreview?React.createElement("notification-bar",{styles:JSON.stringify({position:"fixed",width:"30%",right:10,minHeight:100,overflow:"auto",display:"block",zIndex:99999,bottom:5})}):null;return React.createElement("div",{style:{height:"inherit",maxHeight:"97vh",overflow:"hidden",display:"inline-flex",width:"100%"},ref:"topElement"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/mmf/ScriptRunner/Style.css"); @import url("/thirdpartylib/monaco/min/vs/editor/editor.main.css")'),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsMode.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/lib/typescriptServices.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsWorker.js"}),notificationBar,React.createElement("div",{style:fieldMapperStyles},this.state.showInputMapper&&this.state.editorCode?React.createElement("div",{style:{float:"right",marginTop:-20,width:"10rem",border:"1px solid blue",backgroundColor:"#76ae7e",color:"white",textAlign:"center",cursor:"copy"}},React.createElement(CopyToClipboard,{text:this.state.queryToCopy,onCopy:function(){return _this4.props.addFlashMessage({title:"Success - ",subtitle:"Query script copied to clipboard!"})}},React.createElement("span",null,"Copy Script"))):null,this.state.showInputMapper?React.createElement(Close32,{style:{float:"right"},onClick:function(e){return _this4.setState({showInputMapper:!_this4.state.showInputMapper})}}):React.createElement(FieldMapper,{style:{float:"left"},onClick:function(e){var queryStr=_this4.state.queryToCopy+"";if(!_this4.state.showInputMapper){var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this4.state.fieldMappingValues&&_this4.state.fieldMappingValues[inputField]?_this4.state.fieldMappingValues[inputField]:""}),queryStr='$script.runscript("'+_this4.state.form.fileScope+"."+_this4.state.form.fileName+'", '+JSON.stringify(inputVariables)+").then((result)=>{ $resolve(result); })"}_this4.setState({showInputMapper:!_this4.state.showInputMapper,queryToCopy:queryStr})}}),this.state.showInputMapper?fieldResult:null),React.createElement("div",{className:"navPane",style:{width:"20%"}},React.createElement("div",{style:{display:"inline-table",marginLeft:"20%",marginTop:10,marginBottom:10}},React.createElement(Button,_extends({},{kind:"primary",size:"small"},{onClick:this.runScript,style:{justifyContent:"center",backgroundColor:"rgb(144, 23, 23)",boxShadow:"rgba(0, 0, 0, 0.133) 0px 1.6px 3.6px 0px, rgba(0, 0, 0, 0.11) 0px 0.3px 0.9px 0px",paddingLeft:60}}),"Run")),React.createElement("div",{style:{display:"inline-table",marginTop:10,marginLeft:20,padding:20,border:"1px solid #d4d3d3",boxShadow:"rgba(0, 0, 0, 0.133) 0px 1.6px 3.6px 0px, rgba(0, 0, 0, 0.11) 0px 0.3px 0.9px 0px"}},React.createElement(Select,{labelText:"Execute Script",onChange:this.captureScriptType,id:"type",iconDescription:"Run Script",value:this.state.form&&this.state.form.Type?this.state.form.Type:"server",required:"required"},React.createElement(SelectItem,{value:"server",text:"Server Side"}),React.createElement(SelectItem,{value:"common",text:"Common Side"})),React.createElement(TextInput,{labelText:"Script Name",placeholder:"Enter name...",style:{float:"left"},invalid:this.state.invalidFileName,invalidText:"Value Required",value:this.state.form.fileName,onChange:this.fileNameChanged}),React.createElement(TextInput,{labelText:"Script Scope",placeholder:"Scope...",style:{float:"left"},invalid:this.state.invalidFileName,invalidText:"Value Required",value:this.state.form.fileScope,onChange:this.fileScopeChanged}),React.createElement(Button,{style:{justifyContent:"center",marginLeft:"15%",marginTop:"10%"},size:"small",onClick:this.save2File},"Save")),React.createElement(RecordLookup,searchQueriesProps)),React.createElement("div",{style:{display:"inline-flex",float:"left",marginTop:10,width:"80%"}},React.createElement("div",{className:"content"},React.createElement("div",{className:this.state.editor.className},this.editorContent)),React.createElement("div",{className:"ResultSection",style:{height:"97vh",marginRight:5}},React.createElement(Button,{style:{position:"sticky",top:0,display:"grid"},size:"small",onClick:function(e){var form=_this4.state.form;form.result="",_this4.setState({form:form})}}," Reset "),this.state.form.result?React.createElement("div",{style:{marginTop:20,height:"90%",overflow:"scroll"}},React.createElement(ReactJson,{src:JSON.parse(this.state.form.result)})):React.createElement("img",{src:"/resources/NoResults.jpg",style:{width:"20rem",height:"20rem",marginLeft:"15%",marginTop:"15%"}}))))}}]),_ScriptRunner}(React.Component),_export("ScriptRunner",ScriptRunner=function(props){return _ScriptRunner}),_export("ScriptRunner",ScriptRunner)}}}),System.register("component/mmf/StateList.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","react-router-dom","react-monaco-editor","namor","react-table","react-table/react-table.css!css","client/script/persist/MMFAPI.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ReactTable,MMFAPI,_StateList,StateList,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_reactRouterDom){_reactRouterDom.BrowserRouter,_reactRouterDom.Route,_reactRouterDom.Link,_reactRouterDom.withRouter,_reactRouterDom.matchPath},function(_reactMonacoEditor){_reactMonacoEditor.default},function(_namor){_namor.default},function(_reactTable){ReactTable=_reactTable.default},function(_reactTableReactTableCssCss){},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI}],execute:function(){_StateList=function(_React$Component){function _StateList(props,context){_classCallCheck(this,_StateList);var _this=_possibleConstructorReturn(this,(_StateList.__proto__||Object.getPrototypeOf(_StateList)).call(this,props,context));return _this.state={},_this.state.columns=[{columns:[{Header:"Alias",accessor:"KeyName"},{Header:"Access Path",accessor:"AccessPath"},{Header:"Default Value",accessor:"DefaultValue"}]}],_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_StateList,_React$Component),_createClass(_StateList,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var rows=[],self=this;MMFAPI().search("MetaComponentStates","{}",function(instances){instances&&(console.log("Instances = "),console.log(instances),instances.forEach(function(instance){var row={};row.KeyName=instance.KeyName,row.AccessPath=instance.AccessPath,row.DefaultValue=instance.DefaultValue,row.uid=instance.uid,rows.push(row)}),self.setState({rows:rows}))})}},{key:"render",value:function(){return React.createElement("div",null,React.createElement(ReactTable,{data:this.state.rows,columns:this.state.columns,defaultPageSize:10,className:"-striped -highlight"}))}}]),_StateList}(React.Component),_export("StateList",StateList=function(props){return _StateList}),_export("StateList",StateList),_export("default",StateList),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/mmf/StateList/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","react-router-dom","react-monaco-editor","namor","react-table","react-table/react-table.css!css","client/script/persist/MMFAPI.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ReactTable,MMFAPI,_StateList,StateList;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_reactRouterDom){_reactRouterDom.BrowserRouter,_reactRouterDom.Route,_reactRouterDom.Link,_reactRouterDom.withRouter,_reactRouterDom.matchPath},function(_reactMonacoEditor){_reactMonacoEditor.default},function(_namor){_namor.default},function(_reactTable){ReactTable=_reactTable.default},function(_reactTableReactTableCssCss){},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI}],execute:function(){_StateList=function(_React$Component){function _StateList(props,context){_classCallCheck(this,_StateList);var _this=_possibleConstructorReturn(this,(_StateList.__proto__||Object.getPrototypeOf(_StateList)).call(this,props,context));return _this.state={},_this.state.columns=[{columns:[{Header:"Alias",accessor:"KeyName"},{Header:"Access Path",accessor:"AccessPath"},{Header:"Default Value",accessor:"DefaultValue"}]}],_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_StateList,_React$Component),_createClass(_StateList,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var rows=[],self=this;MMFAPI().search("MetaComponentStates","{}",function(instances){instances&&(console.log("Instances = "),console.log(instances),instances.forEach(function(instance){var row={};row.KeyName=instance.KeyName,row.AccessPath=instance.AccessPath,row.DefaultValue=instance.DefaultValue,row.uid=instance.uid,rows.push(row)}),self.setState({rows:rows}))})}},{key:"render",value:function(){return React.createElement("div",null,React.createElement(ReactTable,{data:this.state.rows,columns:this.state.columns,defaultPageSize:10,className:"-striped -highlight"}))}}]),_StateList}(React.Component),_export("StateList",StateList=function(props){return _StateList}),_export("StateList",StateList)}}});
System.register("client/designer_styles.js",[],function(_export,_context){"use strict";return _export("default",function(){return{WorkSpace:"/* add css styles to the component */\n\n",SrsteeDesigner:'.mainContainer {\n    display: grid;\n    /*grid-template-rows: auto auto; */\n    height: 100vh;\n    overflow: hidden;\n    background: black;\n  }\n  \n  .headerContainer {\n    border-bottom: 5px solid #36383F;\n    box-shadow: 0 1px 1px black;\n  \n    /* display: grid;\n    grid-template-columns: 2fr 8fr 1fr; */\n    /* background-color: black; */\n    /* text-align: center; */\n    font-size: x-large;\n    color: white;\n    /* border-bottom: 3px solid #5f5f61; */\n   }\n  \n   .header-text-bar{\n      float: left;\n      /* margin-left: 5%;\n      margin-top: 15px; */\n   }\n  \n   .header-left-bar{\n      float: right;\n      margin-right: 2%;\n      margin-top: 15px;\n   }\n  \n   .header-middle-bar{\n      float: right;\n      display: flex;\n      margin-right: 2%;\n      justify-content: flex-end;\n      flex-grow: 0;\n      flex-shrink: 0;\n      margin-top: 10px;\n   }\n  \n   .toolButton{\n      font-family: "Lato", "Lucida Grande", "Lucida Sans Unicode", Tahoma, Sans-Serif;\n      -webkit-appearance: none;\n      font-size: 1rem;\n      text-shadow: none;\n      line-height: 1.2;\n      display: inline-block;\n      outline: 0;\n      padding: 10px 16px;\n      margin: 0 10px 0 0;\n      position: relative;\n      border-radius: 3px;\n      border: 3px solid transparent;\n      color: white;\n      cursor: pointer;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      text-decoration: none !important;\n      text-align: center;\n      font-weight: normal !important;\n      border: 3px solid #36383F;\n      background: #36383F;\n   }\n  \n  .middleContainer {\n    display: flex;\n    /*grid-template-columns: 1fr 20px 2fr 20px 1fr;*/\n    background-color: black;\n    height: 100%;\n    /* position: relative; */\n    /* overflow: hidden; */\n    /* top: 20%; */\n    margin-top: 11px;\n    max-height:90vh;\n  }\n      \n  .Navigator {\n        display: grid;\n        grid-template-rows: 1fr 1fr;\n        background-color: #5f5f61;\n        background: #34363f;      \n    }\n    \n  .MiscPane {\n    display: flex;\n    grid-template-rows: 2fr 1fr;\n    max-height:90vh;\n  }\n  \n  .footerContainer {\n      background-color: #34363F;\n      color: white;\n      font-family: "Lato", "Lucida Grande", "Lucida Sans Unicode", Tahoma, Sans-Serif;\n      height: 40px;\n      line-height: 1;\n      position: fixed;\n      width: 100%;\n      bottom: 0;\n      left: 0;\n      padding: 0 5px;\n      display: -webkit-flex;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-align-items: center;\n      -ms-flex-align: center;\n      align-items: center;\n      white-space: nowrap;\n      /* color: #9396A4; */\n      background: #34363F;\n      border-top: 1px solid #3F414B;\n      z-index: 80;\n  }\n  \n  .NavigatorTop {\n      padding-top: 10px;\n      color: white;\n      border-bottom: 10px solid #000000;\n      display: grid;\n      grid-template-columns: repeat(auto-fill,minmax(80px, 5fr));\n      grid-gap: 10px;\n      overflow-x: hidden;\n  }\n  \n  .NavigatorBottom {\n      color: black;\n      max-height: 300px;\n      overflow: scroll;\n  }\n  \n  .red {\n    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#E82E3B), to(#FF7228));\n  }\n  \n  .blue {\n    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#257bec), to(#79eeff));\n  }\n  \n  .green {\n    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#86fe65), to(#06d315));\n  }\n  \n  .iconContainer {\n    height: 100px;\n    width: 80px;\n  }\n  \n  .iconContainer:hover {\n      cursor: pointer;    \n  }\n  \n  .iconBox {\n    height: 80px;\n    width: 80px;\n    background-color: blue;\n    border-radius: 10px;\n    text-align: center;\n  }\n  \n  .iconImg {\n    color: #e1fff5;\n    padding-top: 10px;\n  }\n  \n  .Workspace {\n      display: flex;\n      /*grid-template-rows: 28px; 11fr*/\n      background-color: #343436;\n      max-height:90vh;\n  }\n  \n  .wsToolbar {\n      display:grid;\n      grid-template-columns: repeat(10, 1fr);\n      grid-gap: 2px;\n      background-color: #36383F;\n      padding-top: 2px;\n  }\n  \n  /* .toolButton {\n      border: 3px solid #343436;\n  .toolButton {\n      border: 1px solid #4f5155;\n      border-radius: 3px;\n      height:23px;\n      padding: 2px;\n      font-size: x-small;\n      text-align: center;\n      background-color: #4f5157;\n      color: white;\n  } */\n  \n  .editor-resizer{\n      position: relative;\n      z-index: 2;\n      /* width: 20px; */\n      cursor: col-resize;\n      border-left: 1px solid rgba(255,255,255,0.1);\n      border-right: 1px solid rgba(0,0,0,0.4);\n      background: #36383F;\n  }\n  \n  .toolButton:hover {\n      background-color: #000000;\n  }\n  \n  .PreviewPane {\n      border-bottom: 8px solid #4f5157;\n      background-color: #343436;\n      color: white;\n      overflow: auto;\n  }\n  \n  .PropertiesPane {\n      background-color: #343436;\n  }\n  \n  .iconTitle {\n      text-align: center;\n      font-size: xx-small;\n  }\n  \n  /* width */\n  ::-webkit-scrollbar {\n      width: 2px;\n  }\n  \n  /* Track */\n  ::-webkit-scrollbar-track {\n      background: #f1f1f1; \n  }\n   \n  /* Handle */\n  ::-webkit-scrollbar-thumb {\n      background: #888; \n  }\n  \n  /* Handle on hover */\n  ::-webkit-scrollbar-thumb:hover {\n      background: #555; \n  }\n  \n  .HeaderLogo {\n      display: grid;\n      grid-template-columns: 50px 1fr 1fr;\n      margin-left: 10px;\n  }\n  \n  .srsteeTitle {\n      padding: 10px;\n      color: white;\n      font-family: fantasy;\n      font-size: xx-large;\n  }\n  \n  .toolImg {\n      color: #75f759;\n      margin-right: 5px;\n  }\n\n'}}),{setters:[],execute:function(){}}}),System.register("component/designer/SrsteeDesigner.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","node-blockly/browser","component/blockly/BlocklyWorkspace/Definition.js","component/mmf/Navigator/Definition.js","component/designer/SrsteeDesigner/Style.css!css","react-materialize","react-icons/lib/fa/cogs","react-icons/lib/fa/file-o","react-icons/lib/fa/plus","react-icons/lib/fa/check","react-icons/lib/fa/database","react-icons/lib/fa/file-code-o","react-icons/lib/fa/arrow-circle-down","react-icons/lib/fa/arrow-circle-up","react-icons/lib/ti/flow-switch","react-icons/lib/fa/simplybuilt","react-icons/lib/fa/clock-o","react-icons/lib/fa/plane","react-icons/lib/ti/map","react-icons/lib/ti/business-card","react-icons/lib/ti/book","client/script/blockly/DataBlocks.js","client/script/blockly/LogicBlocks.js","client/script/blockly/FlowBlocks.js","client/script/blockly/QueryBlocks.js","client/script/blockly/PageBlocks.js","client/script/blockly/MapBlocks.js","client/script/blockly/DataBlockGenerator.js","client/script/blockly/LogicBlockGenerator.js","client/script/blockly/PageBlockGenerator.js","client/script/blockly/QueryBlockGenerator.js","client/script/blockly/MapBlockGenerator.js","client/script/blockly/DefaultToolbox.js","client/script/blockly/DataBlocksEventHandlers.js","client/script/blockly/LoadToolbox.js","client/script/mmf/GraphQLDataUtil.js","client/script/mmf/DesignerUtil.js","re-resizable"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,BlocklyRoot,BlocklyWorkspace,Navigator,SrsteeIcon,SaveIcon,NewIcon,ValidateIcon,StoreIcon,CoreIcon,InboundIcon,OutboundIcon,FlowIcon,QueryBuilderIcon,TriggersIcon,AppDesignerIcon,PageDesignerIcon,ComponentDesignerIcon,MapBlocksFn,QueryBlocksGenFun,MapBlocksGenFun,defaultToolboxFn,LoadToolbox,GraphQLDataUtil,DesignerUtil,Resizable,IconBox,_SrsteeDesigner_,SrsteeDesigner,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput},function(_nodeBlocklyBrowser){BlocklyRoot=_nodeBlocklyBrowser.default},function(_componentBlocklyBlocklyWorkspaceDefinitionJs){BlocklyWorkspace=_componentBlocklyBlocklyWorkspaceDefinitionJs.BlocklyWorkspace},function(_componentMmfNavigatorDefinitionJs){Navigator=_componentMmfNavigatorDefinitionJs.Navigator},function(_componentDesignerSrsteeDesignerStyleCssCss){},function(_reactMaterialize){_reactMaterialize.Icon},function(_reactIconsLibFaCogs){SrsteeIcon=_reactIconsLibFaCogs.default},function(_reactIconsLibFaFileO){SaveIcon=_reactIconsLibFaFileO.default},function(_reactIconsLibFaPlus){NewIcon=_reactIconsLibFaPlus.default},function(_reactIconsLibFaCheck){ValidateIcon=_reactIconsLibFaCheck.default},function(_reactIconsLibFaDatabase){StoreIcon=_reactIconsLibFaDatabase.default},function(_reactIconsLibFaFileCodeO){CoreIcon=_reactIconsLibFaFileCodeO.default},function(_reactIconsLibFaArrowCircleDown){InboundIcon=_reactIconsLibFaArrowCircleDown.default},function(_reactIconsLibFaArrowCircleUp){OutboundIcon=_reactIconsLibFaArrowCircleUp.default},function(_reactIconsLibTiFlowSwitch){FlowIcon=_reactIconsLibTiFlowSwitch.default},function(_reactIconsLibFaSimplybuilt){QueryBuilderIcon=_reactIconsLibFaSimplybuilt.default},function(_reactIconsLibFaClockO){_reactIconsLibFaClockO.default},function(_reactIconsLibFaPlane){TriggersIcon=_reactIconsLibFaPlane.default},function(_reactIconsLibTiMap){AppDesignerIcon=_reactIconsLibTiMap.default},function(_reactIconsLibTiBusinessCard){PageDesignerIcon=_reactIconsLibTiBusinessCard.default},function(_reactIconsLibTiBook){ComponentDesignerIcon=_reactIconsLibTiBook.default},function(_clientScriptBlocklyDataBlocksJs){},function(_clientScriptBlocklyLogicBlocksJs){},function(_clientScriptBlocklyFlowBlocksJs){},function(_clientScriptBlocklyQueryBlocksJs){},function(_clientScriptBlocklyPageBlocksJs){},function(_clientScriptBlocklyMapBlocksJs){MapBlocksFn=_clientScriptBlocklyMapBlocksJs.default},function(_clientScriptBlocklyDataBlockGeneratorJs){},function(_clientScriptBlocklyLogicBlockGeneratorJs){},function(_clientScriptBlocklyPageBlockGeneratorJs){},function(_clientScriptBlocklyQueryBlockGeneratorJs){QueryBlocksGenFun=_clientScriptBlocklyQueryBlockGeneratorJs.default},function(_clientScriptBlocklyMapBlockGeneratorJs){MapBlocksGenFun=_clientScriptBlocklyMapBlockGeneratorJs.default},function(_clientScriptBlocklyDefaultToolboxJs){defaultToolboxFn=_clientScriptBlocklyDefaultToolboxJs.default},function(_clientScriptBlocklyDataBlocksEventHandlersJs){},function(_clientScriptBlocklyLoadToolboxJs){LoadToolbox=_clientScriptBlocklyLoadToolboxJs.LoadToolbox},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_clientScriptMmfDesignerUtilJs){DesignerUtil=_clientScriptMmfDesignerUtilJs.DesignerUtil},function(_reResizable){Resizable=_reResizable.default}],execute:function(){IconBox=function(_React$Component){function IconBox(){return _classCallCheck(this,IconBox),_possibleConstructorReturn(this,(IconBox.__proto__||Object.getPrototypeOf(IconBox)).apply(this,arguments))}return _inherits(IconBox,_React$Component),_createClass(IconBox,[{key:"render",value:function(){var iconClass="iconBox "+this.props.theme;return React.createElement("div",{className:"iconContainer",onClick:this.props.onClick},React.createElement("div",{className:iconClass},this.props.children),React.createElement("div",{className:"iconTitle"},this.props.title))}}]),IconBox}(React.Component),_SrsteeDesigner_=function(_React$Component2){function _SrsteeDesigner_(props){_classCallCheck(this,_SrsteeDesigner_);var _this2=_possibleConstructorReturn(this,(_SrsteeDesigner_.__proto__||Object.getPrototypeOf(_SrsteeDesigner_)).call(this,props));_this2.blocklyWorkSpace={},_this2.blocklyDefaultWs=null,_this2.blocklyToolbox={data:'<xml id="toolbox" style="display: none">\n                        <category name="Data">                    \n                        </category>" +\n                        </xml>',logic:'<xml id="toolbox" style="display: none">\n                           <category name="Logic">                    \n                           </category>\n                        </xml>',inbound:'<xml id="toolbox" style="display: none">\n                           <category name="Inbound">\n                           </category>\n                        </xml>',outbound:'<xml id="toolbox" style="display: none">\n                           <category name="Outbound">                    \n                           </category>\n                         </xml>',flow:'<xml id="toolbox" style="display: none">\n                           <category name="FlowDesigner">                            \n                           </category>" +\n                        </xml>',query:'<xml id="toolbox" style="display: none">\n                           <category name="QueryBuilder">                           \n                           </category>" +\n                        </xml>',trigger:'<xml id="toolbox" style="display: none">\n                           <category name="Trigger">                    \n                           </category>" +\n                        </xml>',app_designer:'<xml id="toolbox" style="display: none">\n                           <category name="AppDesigner">\n                           </category>" +\n                        </xml>',page_designer:'<xml id="toolbox" style="display: none">\n                           <category name="PageDesigner">                            \n                           </category>\n                        </xml>',component_designer:'<xml id="toolbox" style="display: none">\n                           <category name="ComponentDesigner">\n                           </category>\n                        </xml>'},_this2.state={currentCategory:"data",code:"",xmlDOMText:'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',reload:!1,searchResult:{name:"Search Results",toggled:!0,children:[]},initialResult:{},sizes:{leftpane:{width:"20vw",navfirst:{width:"20vw",height:"50vh"},navsecond:{width:"20vw",height:"48vh"}},middlepane:{width:"60vw",height:"98vh"},rightpane:{width:"20vw",firstpane:{width:"20vw",height:"50vh"},secondpane:{width:"20vw",height:"48vh"}}}},_this2.updateToolbox=_this2.updateToolbox.bind(_this2),_this2.updateToolboxOnClick=_this2.updateToolboxOnClick.bind(_this2),_this2.clearWorkspace=_this2.clearWorkspace.bind(_this2),_this2.saveWorkspace=_this2.saveWorkspace.bind(_this2),_this2.validateWorkspace=_this2.validateWorkspace.bind(_this2),_this2.workspaceChangeHandlers={},_this2.addWorkspaceChangeHandler=_this2.addWorkspaceChangeHandler.bind(_this2),_this2.getWorkspaceChangeHandlers=_this2.getWorkspaceChangeHandlers.bind(_this2),_this2.removeWorkspaceChangeHandler=_this2.removeWorkspaceChangeHandler.bind(_this2),_this2.onResizeNavigator=_this2.onResizeNavigator.bind(_this2),_this2.onResizeRightPane=_this2.onResizeRightPane.bind(_this2);var self=_this2;_this2.addWorkspaceChangeHandler("default",function(event,Blockly){var code=this.props.language?this.props.language.workspaceToCode(this.workspacePlayground):null,xml=Blockly.Xml.workspaceToDom(this.workspacePlayground),xmlText=Blockly.Xml.domToText(xml);self.setState({xmlText:xmlText,code:code})}),Object.keys(Blockly_EventHandler).forEach(function(eventHandlerName){self.addWorkspaceChangeHandler(eventHandlerName,Blockly_EventHandler[eventHandlerName])}),MapBlocksFn(BlocklyRoot),MapBlocksGenFun(BlocklyRoot),QueryBlocksGenFun(BlocklyRoot);var defaultValues=defaultToolboxFn();return _this2.defaultBlocks=defaultValues.DefaultBlocks,_this2.defaultBlocksCategories=defaultValues.DefaultBlocksCategories,_this2}return _inherits(_SrsteeDesigner_,_React$Component2),_createClass(_SrsteeDesigner_,[{key:"updateToolboxOnClick",value:function(categoryValue){var self=this;return function(){self.setState({currentCategory:categoryValue,reload:!0})}}},{key:"onResizeNavigator",value:function(e,direction,ref,d){var resizableContainerWidth=e.screenX;"TouchEvent"==e.constructor.name&&(resizableContainerWidth=e.changedTouches[0].pageX);var screenWidth=innerWidth,viewPortWidthOfContainer=Math.floor(resizableContainerWidth/screenWidth*100);viewPortWidthOfContainer=viewPortWidthOfContainer<5?5:viewPortWidthOfContainer;var sizes=this.state.sizes,deltaWidthOfContainer=sizes.leftpane.width.split("vw")[0]-viewPortWidthOfContainer;sizes.middlepane.width=parseInt(sizes.middlepane.width.split("vw")[0])+deltaWidthOfContainer+"vw",sizes.leftpane.width=viewPortWidthOfContainer+"vw",this.setState({sizes:sizes}),window.dispatchEvent(new Event("resize"))}},{key:"onResizeRightPane",value:function(e,direction,ref,d){var resizableContainerWidth=e.screenX;"TouchEvent"==e.constructor.name&&(resizableContainerWidth=innerWidth-e.changedTouches[0].pageX);var screenWidth=innerWidth,viewPortWidthOfContainer=Math.floor(resizableContainerWidth/screenWidth*100);viewPortWidthOfContainer=viewPortWidthOfContainer<5?5:viewPortWidthOfContainer;var sizes=this.state.sizes,deltaWidthOfContainer=sizes.rightpane.width.split("vw")[0]-viewPortWidthOfContainer;sizes.middlepane.width=parseInt(sizes.middlepane.width.split("vw")[0])+deltaWidthOfContainer+"vw",sizes.rightpane.width=viewPortWidthOfContainer+"vw",this.setState({sizes:sizes}),window.dispatchEvent(new Event("resize"))}},{key:"addWorkspaceChangeHandler",value:function(name,workspaceChangeHandler){this.workspaceChangeHandlers[name]=workspaceChangeHandler}},{key:"getWorkspaceChangeHandlers",value:function(){return this.workspaceChangeHandlers}},{key:"removeWorkspaceChangeHandler",value:function(name){delete this.workspaceChangeHandlers[name]}},{key:"updateToolbox",value:function(){BlocklyRoot.getMainWorkspace().updateToolbox(this.blocklyToolbox[this.state.currentCategory])}},{key:"validateWorkspace",value:function(){}},{key:"saveWorkspace",value:function(){DesignerUtil().saveCustomBlock(this.state.code).then(function(responseMsg){console.log(responseMsg)})}},{key:"clearWorkspace",value:function(){BlocklyRoot.getMainWorkspace().clear()}},{key:"componentDidMount",value:function(){var self=this;new Promise(function(resolve,reject){var processingData=[{name:"CoreToolbox",toolboxName:"logic"},{name:"DataToolbox",toolboxName:"data"},{name:"InboundToolbox",toolboxName:"inbound"},{name:"OutboundToolbox",toolboxName:"outbound"},{name:"FlowToolbox",toolboxName:"flow"},{name:"QueryToolbox",toolboxName:"query"},{name:"TriggerToolbox",toolboxName:"trigger"},{name:"AppDesignerToolbox",toolboxName:"app_designer"},{name:"PageDesignerToolbox",toolboxName:"page_designer"},{name:"ComponentDesignerToolbox",toolboxName:"component_designer"}],pending2load=processingData.length;processingData.forEach(function(toBeProcessed){LoadToolbox(toBeProcessed.name,"blockly").then(function(data){self.blocklyToolbox[toBeProcessed.toolboxName]=data,0==--pending2load&&resolve()})})}).then(function(res){self.setState({currentCategory:"data",reload:!0})}),this.renderedBlocks()}},{key:"renderedBlocks",value:function(){var self=this;DesignerUtil().getSearchResults().then(function(finalResult){self.setState({searchResult:finalResult,initialResult:finalResult})})}},{key:"importWorkspaceDom",value:function(res){var dom=res&&res.Dom,workspace=Blockly.getMainWorkspace();if(dom){var xml=Blockly.Xml.textToDom(dom);Blockly.Xml.domToWorkspace(xml,workspace)}}},{key:"handleClick",value:function(node){var self=this;"Tables"!=node.name&&"Relations"!=node.name&&"Roles"!=node.name&&GraphQLDataUtil().getRecord("mmf.getBlockyDom",{DomId:node.id}).then(function(response){self.importWorkspaceDom(response),console.log(response)})}},{key:"renderdBlock",value:function(){var NavigatorComp=Navigator();return React.createElement(NavigatorComp,{data:this.state.searchResult,handleClick:this.handleClick.bind(this)})}},{key:"searchChanged",value:function(e){var searchString=e&&e.target?e.target.value:"",searchCopy=JSON.parse(JSON.stringify(this.state.initialResult));if(searchString){var children=searchCopy&&searchCopy.children;if(children&&children.length>0)for(var index=0;index<children.length;index++){var child=children[index];if(child){var innerChilds=child.children;if(innerChilds){var filterdChilds=innerChilds.filter(function(item){return item.name.includes(searchString)});child.children=filterdChilds}}}}this.setState({searchResult:searchCopy})}},{key:"render",value:function(){if(this.blocklyDefaultWS&&1==this.state.reload)this.updateToolbox(),this.setState({reload:!1}),window.dispatchEvent(new Event("resize"));else{var BlocklyWS=BlocklyWorkspace();this.blocklyDefaultWS=React.createElement(BlocklyWS,{blockly:BlocklyRoot,tools:this.defaultBlocks,categories:this.defaultBlocksCategories,reload:this.state.reload,toolboxOnUpdate:this.updateToolbox,wsOnChange:this.workspaceChangeHandlers})}React.createElement("div",{class:"wsToolbar"},React.createElement("div",{class:"toolButton",onClick:this.saveWorkspace},React.createElement(SaveIcon,{size:12,className:"toolImg"}),"Save"),React.createElement("div",{class:"toolButton",onClick:this.clearWorkspace},React.createElement(NewIcon,{size:12,className:"toolImg"}),"New"),React.createElement("div",{class:"toolButton",onClick:this.validateWorkspace},React.createElement(ValidateIcon,{size:12,className:"toolImg"}),"Validate"));return React.createElement("div",{class:"mainContainer",style:{width:"100vw",height:"100vh"}},React.createElement("div",{class:"headerContainer",style:{width:"100vw",height:"2vh"}},React.createElement("div",{className:"HeaderLogo header-text-bar"},React.createElement(SrsteeIcon,{size:48,className:"iconImg"}),React.createElement("div",{className:"srsteeTitle"},"Srstee")),React.createElement("div",{className:"header-middle-bar"},React.createElement("div",{class:"toolButton",onClick:this.saveWorkspace},React.createElement(SaveIcon,{size:12,className:"toolImg"}),"Save"),React.createElement("div",{class:"toolButton",onClick:this.clearWorkspace},React.createElement(NewIcon,{size:12,className:"toolImg"}),"New"),React.createElement("div",{class:"toolButton",onClick:this.validateWorkspace},React.createElement(ValidateIcon,{size:12,className:"toolImg"}),"Validate")),React.createElement("div",null)),React.createElement("div",{class:"middleContainer",style:{width:"100vw",height:"98vh"}},React.createElement(Resizable,{size:{width:this.state.sizes.leftpane.width,height:"98vh"},style:{display:"flex",justifyContent:"center",borderRight:"1vw solid rgb(0, 0, 0)",background:"rgb(0, 0, 0)"},default:{x:0,y:0,width:this.state.sizes.leftpane.width,height:"98vh"},onResizeStop:this.onResizeNavigator},React.createElement("div",{class:"Navigator",style:{width:this.state.sizes.leftpane.width,height:"98vh"}},React.createElement("div",{class:"NavigatorTop",style:{width:this.state.sizes.leftpane.width,height:this.state.sizes.leftpane.navfirst.height}},React.createElement(IconBox,{theme:"red",title:"Data",onClick:this.updateToolboxOnClick("data")},React.createElement(StoreIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"blue",title:"Business Logic",onClick:this.updateToolboxOnClick("logic")},React.createElement(CoreIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"green",title:"Inbound",onClick:this.updateToolboxOnClick("inbound")},React.createElement(InboundIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"red",title:"Outbound",onClick:this.updateToolboxOnClick("outbound")},React.createElement(OutboundIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"green",title:"Flow",onClick:this.updateToolboxOnClick("flow")},React.createElement(FlowIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"blue",title:"Query Builder",onClick:this.updateToolboxOnClick("query")},React.createElement(QueryBuilderIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"red",title:"Triggers",onClick:this.updateToolboxOnClick("trigger")},React.createElement(TriggersIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"green",title:"App Designer",onClick:this.updateToolboxOnClick("app_designer")},React.createElement(AppDesignerIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"blue",title:"Page Designer",onClick:this.updateToolboxOnClick("page_designer")},React.createElement(PageDesignerIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"red",title:"Component Designer",onClick:this.updateToolboxOnClick("component_designer")},React.createElement(ComponentDesignerIcon,{size:48,className:"iconImg"}))),React.createElement("div",{class:"NavigatorBottom",style:{width:this.state.sizes.leftpane.width,height:this.state.sizes.leftpane.navsecond.height}},React.createElement(TextInput,{placeholder:"Search here...",labelText:"",onChange:this.searchChanged.bind(this),required:"required"}),this.renderdBlock()))),React.createElement("div",{class:"Workspace",style:{width:this.state.sizes.middlepane.width,height:this.state.sizes.middlepane.height}},this.blocklyDefaultWS),React.createElement(Resizable,{size:{width:this.state.sizes.rightpane.width,height:"98vh"},style:{justifyContent:"center",borderLeft:"5px solid rgb(0, 0, 0)",background:"rgb(0, 0, 0)",width:this.state.sizes.rightpane.width,height:"98vh"},default:{x:0,y:0,width:this.state.sizes.rightpane.width,height:"98vh"},onResizeStop:this.onResizeRightPane},React.createElement("div",{className:"MiscPane",style:{width:this.state.sizes.rightpane.width,height:"98vh"}},React.createElement("div",{className:"PreviewPane",style:{width:this.state.sizes.rightpane.width,height:"50vh"}},React.createElement("pre",null,this.state.code))),React.createElement("div",{className:"PropertiesPane",style:{width:this.state.sizes.rightpane.width,height:"48vh"}}))))}}]),_SrsteeDesigner_}(React.Component),_export("SrsteeDesigner",SrsteeDesigner=function(props){return _SrsteeDesigner_}),_export("SrsteeDesigner",SrsteeDesigner),_export("default",SrsteeDesigner),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/designer/SrsteeDesigner/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","node-blockly/browser","component/blockly/BlocklyWorkspace/Definition.js","component/mmf/Navigator/Definition.js","component/designer/SrsteeDesigner/Style.css!css","react-materialize","react-icons/lib/fa/cogs","react-icons/lib/fa/file-o","react-icons/lib/fa/plus","react-icons/lib/fa/check","react-icons/lib/fa/database","react-icons/lib/fa/file-code-o","react-icons/lib/fa/arrow-circle-down","react-icons/lib/fa/arrow-circle-up","react-icons/lib/ti/flow-switch","react-icons/lib/fa/simplybuilt","react-icons/lib/fa/clock-o","react-icons/lib/fa/plane","react-icons/lib/ti/map","react-icons/lib/ti/business-card","react-icons/lib/ti/book","client/script/blockly/DataBlocks.js","client/script/blockly/LogicBlocks.js","client/script/blockly/FlowBlocks.js","client/script/blockly/QueryBlocks.js","client/script/blockly/PageBlocks.js","client/script/blockly/MapBlocks.js","client/script/blockly/DataBlockGenerator.js","client/script/blockly/LogicBlockGenerator.js","client/script/blockly/PageBlockGenerator.js","client/script/blockly/QueryBlockGenerator.js","client/script/blockly/MapBlockGenerator.js","client/script/blockly/DefaultToolbox.js","client/script/blockly/DataBlocksEventHandlers.js","client/script/blockly/LoadToolbox.js","client/script/mmf/GraphQLDataUtil.js","client/script/mmf/DesignerUtil.js","re-resizable"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,BlocklyRoot,BlocklyWorkspace,Navigator,SrsteeIcon,SaveIcon,NewIcon,ValidateIcon,StoreIcon,CoreIcon,InboundIcon,OutboundIcon,FlowIcon,QueryBuilderIcon,TriggersIcon,AppDesignerIcon,PageDesignerIcon,ComponentDesignerIcon,MapBlocksFn,QueryBlocksGenFun,MapBlocksGenFun,defaultToolboxFn,LoadToolbox,GraphQLDataUtil,DesignerUtil,Resizable,IconBox,_SrsteeDesigner_,SrsteeDesigner;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput},function(_nodeBlocklyBrowser){BlocklyRoot=_nodeBlocklyBrowser.default},function(_componentBlocklyBlocklyWorkspaceDefinitionJs){BlocklyWorkspace=_componentBlocklyBlocklyWorkspaceDefinitionJs.BlocklyWorkspace},function(_componentMmfNavigatorDefinitionJs){Navigator=_componentMmfNavigatorDefinitionJs.Navigator},function(_componentDesignerSrsteeDesignerStyleCssCss){},function(_reactMaterialize){_reactMaterialize.Icon},function(_reactIconsLibFaCogs){SrsteeIcon=_reactIconsLibFaCogs.default},function(_reactIconsLibFaFileO){SaveIcon=_reactIconsLibFaFileO.default},function(_reactIconsLibFaPlus){NewIcon=_reactIconsLibFaPlus.default},function(_reactIconsLibFaCheck){ValidateIcon=_reactIconsLibFaCheck.default},function(_reactIconsLibFaDatabase){StoreIcon=_reactIconsLibFaDatabase.default},function(_reactIconsLibFaFileCodeO){CoreIcon=_reactIconsLibFaFileCodeO.default},function(_reactIconsLibFaArrowCircleDown){InboundIcon=_reactIconsLibFaArrowCircleDown.default},function(_reactIconsLibFaArrowCircleUp){OutboundIcon=_reactIconsLibFaArrowCircleUp.default},function(_reactIconsLibTiFlowSwitch){FlowIcon=_reactIconsLibTiFlowSwitch.default},function(_reactIconsLibFaSimplybuilt){QueryBuilderIcon=_reactIconsLibFaSimplybuilt.default},function(_reactIconsLibFaClockO){_reactIconsLibFaClockO.default},function(_reactIconsLibFaPlane){TriggersIcon=_reactIconsLibFaPlane.default},function(_reactIconsLibTiMap){AppDesignerIcon=_reactIconsLibTiMap.default},function(_reactIconsLibTiBusinessCard){PageDesignerIcon=_reactIconsLibTiBusinessCard.default},function(_reactIconsLibTiBook){ComponentDesignerIcon=_reactIconsLibTiBook.default},function(_clientScriptBlocklyDataBlocksJs){},function(_clientScriptBlocklyLogicBlocksJs){},function(_clientScriptBlocklyFlowBlocksJs){},function(_clientScriptBlocklyQueryBlocksJs){},function(_clientScriptBlocklyPageBlocksJs){},function(_clientScriptBlocklyMapBlocksJs){MapBlocksFn=_clientScriptBlocklyMapBlocksJs.default},function(_clientScriptBlocklyDataBlockGeneratorJs){},function(_clientScriptBlocklyLogicBlockGeneratorJs){},function(_clientScriptBlocklyPageBlockGeneratorJs){},function(_clientScriptBlocklyQueryBlockGeneratorJs){QueryBlocksGenFun=_clientScriptBlocklyQueryBlockGeneratorJs.default},function(_clientScriptBlocklyMapBlockGeneratorJs){MapBlocksGenFun=_clientScriptBlocklyMapBlockGeneratorJs.default},function(_clientScriptBlocklyDefaultToolboxJs){defaultToolboxFn=_clientScriptBlocklyDefaultToolboxJs.default},function(_clientScriptBlocklyDataBlocksEventHandlersJs){},function(_clientScriptBlocklyLoadToolboxJs){LoadToolbox=_clientScriptBlocklyLoadToolboxJs.LoadToolbox},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_clientScriptMmfDesignerUtilJs){DesignerUtil=_clientScriptMmfDesignerUtilJs.DesignerUtil},function(_reResizable){Resizable=_reResizable.default}],execute:function(){IconBox=function(_React$Component){function IconBox(){return _classCallCheck(this,IconBox),_possibleConstructorReturn(this,(IconBox.__proto__||Object.getPrototypeOf(IconBox)).apply(this,arguments))}return _inherits(IconBox,_React$Component),_createClass(IconBox,[{key:"render",value:function(){var iconClass="iconBox "+this.props.theme;return React.createElement("div",{className:"iconContainer",onClick:this.props.onClick},React.createElement("div",{className:iconClass},this.props.children),React.createElement("div",{className:"iconTitle"},this.props.title))}}]),IconBox}(React.Component),_SrsteeDesigner_=function(_React$Component2){function _SrsteeDesigner_(props){_classCallCheck(this,_SrsteeDesigner_);var _this2=_possibleConstructorReturn(this,(_SrsteeDesigner_.__proto__||Object.getPrototypeOf(_SrsteeDesigner_)).call(this,props));_this2.blocklyWorkSpace={},_this2.blocklyDefaultWs=null,_this2.blocklyToolbox={data:'<xml id="toolbox" style="display: none">\n                        <category name="Data">                    \n                        </category>" +\n                        </xml>',logic:'<xml id="toolbox" style="display: none">\n                           <category name="Logic">                    \n                           </category>\n                        </xml>',inbound:'<xml id="toolbox" style="display: none">\n                           <category name="Inbound">\n                           </category>\n                        </xml>',outbound:'<xml id="toolbox" style="display: none">\n                           <category name="Outbound">                    \n                           </category>\n                         </xml>',flow:'<xml id="toolbox" style="display: none">\n                           <category name="FlowDesigner">                            \n                           </category>" +\n                        </xml>',query:'<xml id="toolbox" style="display: none">\n                           <category name="QueryBuilder">                           \n                           </category>" +\n                        </xml>',trigger:'<xml id="toolbox" style="display: none">\n                           <category name="Trigger">                    \n                           </category>" +\n                        </xml>',app_designer:'<xml id="toolbox" style="display: none">\n                           <category name="AppDesigner">\n                           </category>" +\n                        </xml>',page_designer:'<xml id="toolbox" style="display: none">\n                           <category name="PageDesigner">                            \n                           </category>\n                        </xml>',component_designer:'<xml id="toolbox" style="display: none">\n                           <category name="ComponentDesigner">\n                           </category>\n                        </xml>'},_this2.state={currentCategory:"data",code:"",xmlDOMText:'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',reload:!1,searchResult:{name:"Search Results",toggled:!0,children:[]},initialResult:{},sizes:{leftpane:{width:"20vw",navfirst:{width:"20vw",height:"50vh"},navsecond:{width:"20vw",height:"48vh"}},middlepane:{width:"60vw",height:"98vh"},rightpane:{width:"20vw",firstpane:{width:"20vw",height:"50vh"},secondpane:{width:"20vw",height:"48vh"}}}},_this2.updateToolbox=_this2.updateToolbox.bind(_this2),_this2.updateToolboxOnClick=_this2.updateToolboxOnClick.bind(_this2),_this2.clearWorkspace=_this2.clearWorkspace.bind(_this2),_this2.saveWorkspace=_this2.saveWorkspace.bind(_this2),_this2.validateWorkspace=_this2.validateWorkspace.bind(_this2),_this2.workspaceChangeHandlers={},_this2.addWorkspaceChangeHandler=_this2.addWorkspaceChangeHandler.bind(_this2),_this2.getWorkspaceChangeHandlers=_this2.getWorkspaceChangeHandlers.bind(_this2),_this2.removeWorkspaceChangeHandler=_this2.removeWorkspaceChangeHandler.bind(_this2),_this2.onResizeNavigator=_this2.onResizeNavigator.bind(_this2),_this2.onResizeRightPane=_this2.onResizeRightPane.bind(_this2);var self=_this2;_this2.addWorkspaceChangeHandler("default",function(event,Blockly){var code=this.props.language?this.props.language.workspaceToCode(this.workspacePlayground):null,xml=Blockly.Xml.workspaceToDom(this.workspacePlayground),xmlText=Blockly.Xml.domToText(xml);self.setState({xmlText:xmlText,code:code})}),Object.keys(Blockly_EventHandler).forEach(function(eventHandlerName){self.addWorkspaceChangeHandler(eventHandlerName,Blockly_EventHandler[eventHandlerName])}),MapBlocksFn(BlocklyRoot),MapBlocksGenFun(BlocklyRoot),QueryBlocksGenFun(BlocklyRoot);var defaultValues=defaultToolboxFn();return _this2.defaultBlocks=defaultValues.DefaultBlocks,_this2.defaultBlocksCategories=defaultValues.DefaultBlocksCategories,_this2}return _inherits(_SrsteeDesigner_,_React$Component2),_createClass(_SrsteeDesigner_,[{key:"updateToolboxOnClick",value:function(categoryValue){var self=this;return function(){self.setState({currentCategory:categoryValue,reload:!0})}}},{key:"onResizeNavigator",value:function(e,direction,ref,d){var resizableContainerWidth=e.screenX;"TouchEvent"==e.constructor.name&&(resizableContainerWidth=e.changedTouches[0].pageX);var screenWidth=innerWidth,viewPortWidthOfContainer=Math.floor(resizableContainerWidth/screenWidth*100);viewPortWidthOfContainer=viewPortWidthOfContainer<5?5:viewPortWidthOfContainer;var sizes=this.state.sizes,deltaWidthOfContainer=sizes.leftpane.width.split("vw")[0]-viewPortWidthOfContainer;sizes.middlepane.width=parseInt(sizes.middlepane.width.split("vw")[0])+deltaWidthOfContainer+"vw",sizes.leftpane.width=viewPortWidthOfContainer+"vw",this.setState({sizes:sizes}),window.dispatchEvent(new Event("resize"))}},{key:"onResizeRightPane",value:function(e,direction,ref,d){var resizableContainerWidth=e.screenX;"TouchEvent"==e.constructor.name&&(resizableContainerWidth=innerWidth-e.changedTouches[0].pageX);var screenWidth=innerWidth,viewPortWidthOfContainer=Math.floor(resizableContainerWidth/screenWidth*100);viewPortWidthOfContainer=viewPortWidthOfContainer<5?5:viewPortWidthOfContainer;var sizes=this.state.sizes,deltaWidthOfContainer=sizes.rightpane.width.split("vw")[0]-viewPortWidthOfContainer;sizes.middlepane.width=parseInt(sizes.middlepane.width.split("vw")[0])+deltaWidthOfContainer+"vw",sizes.rightpane.width=viewPortWidthOfContainer+"vw",this.setState({sizes:sizes}),window.dispatchEvent(new Event("resize"))}},{key:"addWorkspaceChangeHandler",value:function(name,workspaceChangeHandler){this.workspaceChangeHandlers[name]=workspaceChangeHandler}},{key:"getWorkspaceChangeHandlers",value:function(){return this.workspaceChangeHandlers}},{key:"removeWorkspaceChangeHandler",value:function(name){delete this.workspaceChangeHandlers[name]}},{key:"updateToolbox",value:function(){BlocklyRoot.getMainWorkspace().updateToolbox(this.blocklyToolbox[this.state.currentCategory])}},{key:"validateWorkspace",value:function(){}},{key:"saveWorkspace",value:function(){DesignerUtil().saveCustomBlock(this.state.code).then(function(responseMsg){console.log(responseMsg)})}},{key:"clearWorkspace",value:function(){BlocklyRoot.getMainWorkspace().clear()}},{key:"componentDidMount",value:function(){var self=this;new Promise(function(resolve,reject){var processingData=[{name:"CoreToolbox",toolboxName:"logic"},{name:"DataToolbox",toolboxName:"data"},{name:"InboundToolbox",toolboxName:"inbound"},{name:"OutboundToolbox",toolboxName:"outbound"},{name:"FlowToolbox",toolboxName:"flow"},{name:"QueryToolbox",toolboxName:"query"},{name:"TriggerToolbox",toolboxName:"trigger"},{name:"AppDesignerToolbox",toolboxName:"app_designer"},{name:"PageDesignerToolbox",toolboxName:"page_designer"},{name:"ComponentDesignerToolbox",toolboxName:"component_designer"}],pending2load=processingData.length;processingData.forEach(function(toBeProcessed){LoadToolbox(toBeProcessed.name,"blockly").then(function(data){self.blocklyToolbox[toBeProcessed.toolboxName]=data,0==--pending2load&&resolve()})})}).then(function(res){self.setState({currentCategory:"data",reload:!0})}),this.renderedBlocks()}},{key:"renderedBlocks",value:function(){var self=this;DesignerUtil().getSearchResults().then(function(finalResult){self.setState({searchResult:finalResult,initialResult:finalResult})})}},{key:"importWorkspaceDom",value:function(res){var dom=res&&res.Dom,workspace=Blockly.getMainWorkspace();if(dom){var xml=Blockly.Xml.textToDom(dom);Blockly.Xml.domToWorkspace(xml,workspace)}}},{key:"handleClick",value:function(node){var self=this;"Tables"!=node.name&&"Relations"!=node.name&&"Roles"!=node.name&&GraphQLDataUtil().getRecord("mmf.getBlockyDom",{DomId:node.id}).then(function(response){self.importWorkspaceDom(response),console.log(response)})}},{key:"renderdBlock",value:function(){var NavigatorComp=Navigator();return React.createElement(NavigatorComp,{data:this.state.searchResult,handleClick:this.handleClick.bind(this)})}},{key:"searchChanged",value:function(e){var searchString=e&&e.target?e.target.value:"",searchCopy=JSON.parse(JSON.stringify(this.state.initialResult));if(searchString){var children=searchCopy&&searchCopy.children;if(children&&children.length>0)for(var index=0;index<children.length;index++){var child=children[index];if(child){var innerChilds=child.children;if(innerChilds){var filterdChilds=innerChilds.filter(function(item){return item.name.includes(searchString)});child.children=filterdChilds}}}}this.setState({searchResult:searchCopy})}},{key:"render",value:function(){if(this.blocklyDefaultWS&&1==this.state.reload)this.updateToolbox(),this.setState({reload:!1}),window.dispatchEvent(new Event("resize"));else{var BlocklyWS=BlocklyWorkspace();this.blocklyDefaultWS=React.createElement(BlocklyWS,{blockly:BlocklyRoot,tools:this.defaultBlocks,categories:this.defaultBlocksCategories,reload:this.state.reload,toolboxOnUpdate:this.updateToolbox,wsOnChange:this.workspaceChangeHandlers})}React.createElement("div",{class:"wsToolbar"},React.createElement("div",{class:"toolButton",onClick:this.saveWorkspace},React.createElement(SaveIcon,{size:12,className:"toolImg"}),"Save"),React.createElement("div",{class:"toolButton",onClick:this.clearWorkspace},React.createElement(NewIcon,{size:12,className:"toolImg"}),"New"),React.createElement("div",{class:"toolButton",onClick:this.validateWorkspace},React.createElement(ValidateIcon,{size:12,className:"toolImg"}),"Validate"));return React.createElement("div",{class:"mainContainer",style:{width:"100vw",height:"100vh"}},React.createElement("div",{class:"headerContainer",style:{width:"100vw",height:"2vh"}},React.createElement("div",{className:"HeaderLogo header-text-bar"},React.createElement(SrsteeIcon,{size:48,className:"iconImg"}),React.createElement("div",{className:"srsteeTitle"},"Srstee")),React.createElement("div",{className:"header-middle-bar"},React.createElement("div",{class:"toolButton",onClick:this.saveWorkspace},React.createElement(SaveIcon,{size:12,className:"toolImg"}),"Save"),React.createElement("div",{class:"toolButton",onClick:this.clearWorkspace},React.createElement(NewIcon,{size:12,className:"toolImg"}),"New"),React.createElement("div",{class:"toolButton",onClick:this.validateWorkspace},React.createElement(ValidateIcon,{size:12,className:"toolImg"}),"Validate")),React.createElement("div",null)),React.createElement("div",{class:"middleContainer",style:{width:"100vw",height:"98vh"}},React.createElement(Resizable,{size:{width:this.state.sizes.leftpane.width,height:"98vh"},style:{display:"flex",justifyContent:"center",borderRight:"1vw solid rgb(0, 0, 0)",background:"rgb(0, 0, 0)"},default:{x:0,y:0,width:this.state.sizes.leftpane.width,height:"98vh"},onResizeStop:this.onResizeNavigator},React.createElement("div",{class:"Navigator",style:{width:this.state.sizes.leftpane.width,height:"98vh"}},React.createElement("div",{class:"NavigatorTop",style:{width:this.state.sizes.leftpane.width,height:this.state.sizes.leftpane.navfirst.height}},React.createElement(IconBox,{theme:"red",title:"Data",onClick:this.updateToolboxOnClick("data")},React.createElement(StoreIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"blue",title:"Business Logic",onClick:this.updateToolboxOnClick("logic")},React.createElement(CoreIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"green",title:"Inbound",onClick:this.updateToolboxOnClick("inbound")},React.createElement(InboundIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"red",title:"Outbound",onClick:this.updateToolboxOnClick("outbound")},React.createElement(OutboundIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"green",title:"Flow",onClick:this.updateToolboxOnClick("flow")},React.createElement(FlowIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"blue",title:"Query Builder",onClick:this.updateToolboxOnClick("query")},React.createElement(QueryBuilderIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"red",title:"Triggers",onClick:this.updateToolboxOnClick("trigger")},React.createElement(TriggersIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"green",title:"App Designer",onClick:this.updateToolboxOnClick("app_designer")},React.createElement(AppDesignerIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"blue",title:"Page Designer",onClick:this.updateToolboxOnClick("page_designer")},React.createElement(PageDesignerIcon,{size:48,className:"iconImg"})),React.createElement(IconBox,{theme:"red",title:"Component Designer",onClick:this.updateToolboxOnClick("component_designer")},React.createElement(ComponentDesignerIcon,{size:48,className:"iconImg"}))),React.createElement("div",{class:"NavigatorBottom",style:{width:this.state.sizes.leftpane.width,height:this.state.sizes.leftpane.navsecond.height}},React.createElement(TextInput,{placeholder:"Search here...",labelText:"",onChange:this.searchChanged.bind(this),required:"required"}),this.renderdBlock()))),React.createElement("div",{class:"Workspace",style:{width:this.state.sizes.middlepane.width,height:this.state.sizes.middlepane.height}},this.blocklyDefaultWS),React.createElement(Resizable,{size:{width:this.state.sizes.rightpane.width,height:"98vh"},style:{justifyContent:"center",borderLeft:"5px solid rgb(0, 0, 0)",background:"rgb(0, 0, 0)",width:this.state.sizes.rightpane.width,height:"98vh"},default:{x:0,y:0,width:this.state.sizes.rightpane.width,height:"98vh"},onResizeStop:this.onResizeRightPane},React.createElement("div",{className:"MiscPane",style:{width:this.state.sizes.rightpane.width,height:"98vh"}},React.createElement("div",{className:"PreviewPane",style:{width:this.state.sizes.rightpane.width,height:"50vh"}},React.createElement("pre",null,this.state.code))),React.createElement("div",{className:"PropertiesPane",style:{width:this.state.sizes.rightpane.width,height:"48vh"}}))))}}]),_SrsteeDesigner_}(React.Component),_export("SrsteeDesigner",SrsteeDesigner=function(props){return _SrsteeDesigner_}),_export("SrsteeDesigner",SrsteeDesigner)}}}),System.register("component/designer/WorkSpace.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/blockly/BlocklyWorkspace/Definition.js","component/designer/SrsteeDesigner/Style.css!css","client/script/blockly/DataBlocks.js","client/script/blockly/LogicBlocks.js","client/script/blockly/FlowBlocks.js","client/script/blockly/QueryBlocks.js","client/script/blockly/MapBlocks.js","client/script/blockly/DataBlockGenerator.js","client/script/blockly/LogicBlockGenerator.js","client/script/blockly/QueryBlockGenerator.js","client/script/blockly/MapBlockGenerator.js","client/script/blockly/DefaultToolbox.js","client/script/blockly/DataBlocksEventHandlers.js","client/script/blockly/LoadToolbox.js","client/script/mmf/GraphQLDataUtil.js","client/script/mmf/DesignerUtil.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,BlocklyWorkspace,MapBlocksFn,QueryBlocksGenFun,MapBlocksGenFun,defaultToolboxFn,LoadToolbox,GraphQLDataUtil,DesignerUtil,_WorkSpace_,WorkSpace,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentBlocklyBlocklyWorkspaceDefinitionJs){BlocklyWorkspace=_componentBlocklyBlocklyWorkspaceDefinitionJs.BlocklyWorkspace},function(_componentDesignerSrsteeDesignerStyleCssCss){},function(_clientScriptBlocklyDataBlocksJs){},function(_clientScriptBlocklyLogicBlocksJs){},function(_clientScriptBlocklyFlowBlocksJs){},function(_clientScriptBlocklyQueryBlocksJs){},function(_clientScriptBlocklyMapBlocksJs){MapBlocksFn=_clientScriptBlocklyMapBlocksJs.default},function(_clientScriptBlocklyDataBlockGeneratorJs){},function(_clientScriptBlocklyLogicBlockGeneratorJs){},function(_clientScriptBlocklyQueryBlockGeneratorJs){QueryBlocksGenFun=_clientScriptBlocklyQueryBlockGeneratorJs.default},function(_clientScriptBlocklyMapBlockGeneratorJs){MapBlocksGenFun=_clientScriptBlocklyMapBlockGeneratorJs.default},function(_clientScriptBlocklyDefaultToolboxJs){defaultToolboxFn=_clientScriptBlocklyDefaultToolboxJs.default},function(_clientScriptBlocklyDataBlocksEventHandlersJs){},function(_clientScriptBlocklyLoadToolboxJs){LoadToolbox=_clientScriptBlocklyLoadToolboxJs.LoadToolbox},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_clientScriptMmfDesignerUtilJs){DesignerUtil=_clientScriptMmfDesignerUtilJs.DesignerUtil}],execute:function(){_WorkSpace_=function(_React$Component){function _WorkSpace_(props){_classCallCheck(this,_WorkSpace_);var _this=_possibleConstructorReturn(this,(_WorkSpace_.__proto__||Object.getPrototypeOf(_WorkSpace_)).call(this,props)),self=_this;return System.import("node-blockly/browser").then(function(data){window.Blockly[props.name]=data,self.Blockly=data,MapBlocksFn(self.Blockly),MapBlocksGenFun(self.Blockly),QueryBlocksGenFun(self.Blockly);var defaultValues=defaultToolboxFn();self.defaultBlocks=defaultValues.DefaultBlocks,self.defaultBlocksCategories=defaultValues.DefaultBlocksCategories,self.setState({reload:!self.state.reload})}),_this.blocklyWorkSpace={},_this.blocklyDefaultWs=null,_this.blocklyToolbox={data:'<xml id="toolbox" style="display: none">\n                        <category name="Data">                    \n                        </category>\n                     </xml>',logic:'<xml id="toolbox" style="display: none">\n                        <category name="Logic">                    \n                        </category>\n                      </xml>',inbound:'<xml id="toolbox" style="display: none">\n                            <category name="Inbound">\n                            </category>\n                        </xml>',outbound:'<xml id="toolbox" style="display: none">\n                            <category name="Outbound">                    \n                            </category>" +\n                        </xml>',flow:'<xml id="toolbox" style="display: none">\n                           <category name="FlowDesigner">                            \n                           </category>\n                        </xml>',query:'<xml id="toolbox" style="display: none">\n                           <category name="QueryBuilder">\n                           </category>\n                      </xml>',trigger:'<xml id="toolbox" style="display: none">\n                            <category name="Trigger">                    \n                            </category>\n                        </xml>',app_designer:'<xml id="toolbox" style="display: none">\n                           <category name="AppDesigner">\n                           </category>\n                        </xml>',page_designer:'<xml id="toolbox" style="display: none">\n                                <category name="PageDesigner">                   \n                                </category>" +\n                              </xml>',component_designer:'<xml id="toolbox" style="display: none">\n                                    <category name="ComponentDesigner">                            \n                                    </category>\n                                  </xml>'},_this.state={currentCategory:props.type?props.type:"data",code:"",xmlDOMText:'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',reload:!1,initialResult:{},name:props.name,active:props.active},_this.updateToolbox=_this.updateToolbox.bind(_this),_this.updateToolboxOnClick=_this.updateToolboxOnClick.bind(_this),_this.clearWorkspace=_this.clearWorkspace.bind(_this),_this.saveWorkspace=_this.saveWorkspace.bind(_this),_this.validateWorkspace=_this.validateWorkspace.bind(_this),_this.workspaceChangeHandlers={},_this.addWorkspaceChangeHandler=_this.addWorkspaceChangeHandler.bind(_this),_this.getWorkspaceChangeHandlers=_this.getWorkspaceChangeHandlers.bind(_this),_this.removeWorkspaceChangeHandler=_this.removeWorkspaceChangeHandler.bind(_this),_this.addWorkspaceChangeHandler("default",function(event,Blockly){var code=this.props.language?this.props.language.workspaceToCode(this.workspacePlayground):null,xml=Blockly.Xml.workspaceToDom(this.workspacePlayground),xmlText=Blockly.Xml.domToText(xml);self.setState({xmlText:xmlText,code:code})}),Object.keys(Blockly_EventHandler).forEach(function(eventHandlerName){self.addWorkspaceChangeHandler(eventHandlerName,Blockly_EventHandler[eventHandlerName])}),_this}return _inherits(_WorkSpace_,_React$Component),_createClass(_WorkSpace_,[{key:"updateToolboxOnClick",value:function(categoryValue){var self=this;return function(){self.setState({currentCategory:categoryValue,reload:!0})}}},{key:"addWorkspaceChangeHandler",value:function(name,workspaceChangeHandler){this.workspaceChangeHandlers[name]=workspaceChangeHandler}},{key:"getWorkspaceChangeHandlers",value:function(){return this.workspaceChangeHandlers}},{key:"removeWorkspaceChangeHandler",value:function(name){delete this.workspaceChangeHandlers[name]}},{key:"updateToolbox",value:function(){Blockly[this.state.name]&&Blockly[this.state.name].Blockly&&Blockly[this.state.name].Blockly.getMainWorkspace()&&Blockly[this.state.name].Blockly.getMainWorkspace().updateToolbox(this.blocklyToolbox[this.state.currentCategory])}},{key:"validateWorkspace",value:function(){}},{key:"saveWorkspace",value:function(){DesignerUtil().saveCustomBlock(this.state.code).then(function(responseMsg){console.log(responseMsg)})}},{key:"clearWorkspace",value:function(){BlocklyBrowser.getMainWorkspace()&&BlocklyBrowser.getMainWorkspace().clear()}},{key:"componentDidMount",value:function(){var self=this;new Promise(function(resolve,reject){var processingData=[{name:"CoreToolbox",toolboxName:"logic"},{name:"DataToolbox",toolboxName:"data"},{name:"InboundToolbox",toolboxName:"inbound"},{name:"OutboundToolbox",toolboxName:"outbound"},{name:"FlowToolbox",toolboxName:"flow"},{name:"QueryToolbox",toolboxName:"query"},{name:"TriggerToolbox",toolboxName:"trigger"},{name:"AppDesignerToolbox",toolboxName:"app_designer"},{name:"PageDesignerToolbox",toolboxName:"page_designer"},{name:"ComponentDesignerToolbox",toolboxName:"component_designer"}],pending2load=processingData.length;processingData.forEach(function(toBeProcessed){LoadToolbox(toBeProcessed.name,"blockly").then(function(data){self.blocklyToolbox[toBeProcessed.toolboxName]=data,0==--pending2load&&resolve()})})}).then(function(res){self.setState({reload:!0})}),this.renderedBlocks()}},{key:"renderedBlocks",value:function(){var self=this;DesignerUtil().getSearchResults().then(function(finalResult){self.setState({searchResult:finalResult,initialResult:finalResult})})}},{key:"importWorkspaceDom",value:function(res){var dom=res&&res.Dom,workspace=BlocklyBrowser.getMainWorkspace();if(dom){var xml=Blockly.Xml.textToDom(dom);Blockly.Xml.domToWorkspace(xml,workspace)}}},{key:"handleClick",value:function(node){var self=this;"Tables"!=node.name&&"Relations"!=node.name&&"Roles"!=node.name&&GraphQLDataUtil().getRecord("mmf.getBlockyDom",{DomId:node.id}).then(function(response){self.importWorkspaceDom(response),console.log(response)})}},{key:"render",value:function(){if("true"==this.state.active){if(this.blocklyDefaultWS&&1==this.state.reload)this.updateToolbox(),this.setState({reload:!1}),window.dispatchEvent(new Event("resize"));else{var BlocklyWS=BlocklyWorkspace();this.blocklyDefaultWS=React.createElement(BlocklyWS,{name:this.state.name,blockly:this.Blockly,tools:this.defaultBlocks,categories:this.defaultBlocksCategories,reload:this.state.reload,toolboxOnUpdate:this.updateToolbox,wsOnChange:this.workspaceChangeHandlers})}return React.createElement("div",{class:"Workspace"},this.blocklyDefaultWS)}return React.createElement("div",null)}}]),_WorkSpace_}(React.Component),_export("WorkSpace",WorkSpace=function(props){return _WorkSpace_}),_export("WorkSpace",WorkSpace),_export("default",WorkSpace),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/designer/WorkSpace/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/blockly/BlocklyWorkspace/Definition.js","component/designer/SrsteeDesigner/Style.css!css","client/script/blockly/DataBlocks.js","client/script/blockly/LogicBlocks.js","client/script/blockly/FlowBlocks.js","client/script/blockly/QueryBlocks.js","client/script/blockly/MapBlocks.js","client/script/blockly/DataBlockGenerator.js","client/script/blockly/LogicBlockGenerator.js","client/script/blockly/QueryBlockGenerator.js","client/script/blockly/MapBlockGenerator.js","client/script/blockly/DefaultToolbox.js","client/script/blockly/DataBlocksEventHandlers.js","client/script/blockly/LoadToolbox.js","client/script/mmf/GraphQLDataUtil.js","client/script/mmf/DesignerUtil.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,BlocklyWorkspace,MapBlocksFn,QueryBlocksGenFun,MapBlocksGenFun,defaultToolboxFn,LoadToolbox,GraphQLDataUtil,DesignerUtil,_WorkSpace_,WorkSpace;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentBlocklyBlocklyWorkspaceDefinitionJs){BlocklyWorkspace=_componentBlocklyBlocklyWorkspaceDefinitionJs.BlocklyWorkspace},function(_componentDesignerSrsteeDesignerStyleCssCss){},function(_clientScriptBlocklyDataBlocksJs){},function(_clientScriptBlocklyLogicBlocksJs){},function(_clientScriptBlocklyFlowBlocksJs){},function(_clientScriptBlocklyQueryBlocksJs){},function(_clientScriptBlocklyMapBlocksJs){MapBlocksFn=_clientScriptBlocklyMapBlocksJs.default},function(_clientScriptBlocklyDataBlockGeneratorJs){},function(_clientScriptBlocklyLogicBlockGeneratorJs){},function(_clientScriptBlocklyQueryBlockGeneratorJs){QueryBlocksGenFun=_clientScriptBlocklyQueryBlockGeneratorJs.default},function(_clientScriptBlocklyMapBlockGeneratorJs){MapBlocksGenFun=_clientScriptBlocklyMapBlockGeneratorJs.default},function(_clientScriptBlocklyDefaultToolboxJs){defaultToolboxFn=_clientScriptBlocklyDefaultToolboxJs.default},function(_clientScriptBlocklyDataBlocksEventHandlersJs){},function(_clientScriptBlocklyLoadToolboxJs){LoadToolbox=_clientScriptBlocklyLoadToolboxJs.LoadToolbox},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_clientScriptMmfDesignerUtilJs){DesignerUtil=_clientScriptMmfDesignerUtilJs.DesignerUtil}],execute:function(){_WorkSpace_=function(_React$Component){function _WorkSpace_(props){_classCallCheck(this,_WorkSpace_);var _this=_possibleConstructorReturn(this,(_WorkSpace_.__proto__||Object.getPrototypeOf(_WorkSpace_)).call(this,props)),self=_this;return System.import("node-blockly/browser").then(function(data){window.Blockly[props.name]=data,self.Blockly=data,MapBlocksFn(self.Blockly),MapBlocksGenFun(self.Blockly),QueryBlocksGenFun(self.Blockly);var defaultValues=defaultToolboxFn();self.defaultBlocks=defaultValues.DefaultBlocks,self.defaultBlocksCategories=defaultValues.DefaultBlocksCategories,self.setState({reload:!self.state.reload})}),_this.blocklyWorkSpace={},_this.blocklyDefaultWs=null,_this.blocklyToolbox={data:'<xml id="toolbox" style="display: none">\n                        <category name="Data">                    \n                        </category>\n                     </xml>',logic:'<xml id="toolbox" style="display: none">\n                        <category name="Logic">                    \n                        </category>\n                      </xml>',inbound:'<xml id="toolbox" style="display: none">\n                            <category name="Inbound">\n                            </category>\n                        </xml>',outbound:'<xml id="toolbox" style="display: none">\n                            <category name="Outbound">                    \n                            </category>" +\n                        </xml>',flow:'<xml id="toolbox" style="display: none">\n                           <category name="FlowDesigner">                            \n                           </category>\n                        </xml>',query:'<xml id="toolbox" style="display: none">\n                           <category name="QueryBuilder">\n                           </category>\n                      </xml>',trigger:'<xml id="toolbox" style="display: none">\n                            <category name="Trigger">                    \n                            </category>\n                        </xml>',app_designer:'<xml id="toolbox" style="display: none">\n                           <category name="AppDesigner">\n                           </category>\n                        </xml>',page_designer:'<xml id="toolbox" style="display: none">\n                                <category name="PageDesigner">                   \n                                </category>" +\n                              </xml>',component_designer:'<xml id="toolbox" style="display: none">\n                                    <category name="ComponentDesigner">                            \n                                    </category>\n                                  </xml>'},_this.state={currentCategory:props.type?props.type:"data",code:"",xmlDOMText:'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',reload:!1,initialResult:{},name:props.name,active:props.active},_this.updateToolbox=_this.updateToolbox.bind(_this),_this.updateToolboxOnClick=_this.updateToolboxOnClick.bind(_this),_this.clearWorkspace=_this.clearWorkspace.bind(_this),_this.saveWorkspace=_this.saveWorkspace.bind(_this),_this.validateWorkspace=_this.validateWorkspace.bind(_this),_this.workspaceChangeHandlers={},_this.addWorkspaceChangeHandler=_this.addWorkspaceChangeHandler.bind(_this),_this.getWorkspaceChangeHandlers=_this.getWorkspaceChangeHandlers.bind(_this),_this.removeWorkspaceChangeHandler=_this.removeWorkspaceChangeHandler.bind(_this),_this.addWorkspaceChangeHandler("default",function(event,Blockly){var code=this.props.language?this.props.language.workspaceToCode(this.workspacePlayground):null,xml=Blockly.Xml.workspaceToDom(this.workspacePlayground),xmlText=Blockly.Xml.domToText(xml);self.setState({xmlText:xmlText,code:code})}),Object.keys(Blockly_EventHandler).forEach(function(eventHandlerName){self.addWorkspaceChangeHandler(eventHandlerName,Blockly_EventHandler[eventHandlerName])}),_this}return _inherits(_WorkSpace_,_React$Component),_createClass(_WorkSpace_,[{key:"updateToolboxOnClick",value:function(categoryValue){var self=this;return function(){self.setState({currentCategory:categoryValue,reload:!0})}}},{key:"addWorkspaceChangeHandler",value:function(name,workspaceChangeHandler){this.workspaceChangeHandlers[name]=workspaceChangeHandler}},{key:"getWorkspaceChangeHandlers",value:function(){return this.workspaceChangeHandlers}},{key:"removeWorkspaceChangeHandler",value:function(name){delete this.workspaceChangeHandlers[name]}},{key:"updateToolbox",value:function(){Blockly[this.state.name]&&Blockly[this.state.name].Blockly&&Blockly[this.state.name].Blockly.getMainWorkspace()&&Blockly[this.state.name].Blockly.getMainWorkspace().updateToolbox(this.blocklyToolbox[this.state.currentCategory])}},{key:"validateWorkspace",value:function(){}},{key:"saveWorkspace",value:function(){DesignerUtil().saveCustomBlock(this.state.code).then(function(responseMsg){console.log(responseMsg)})}},{key:"clearWorkspace",value:function(){BlocklyBrowser.getMainWorkspace()&&BlocklyBrowser.getMainWorkspace().clear()}},{key:"componentDidMount",value:function(){var self=this;new Promise(function(resolve,reject){var processingData=[{name:"CoreToolbox",toolboxName:"logic"},{name:"DataToolbox",toolboxName:"data"},{name:"InboundToolbox",toolboxName:"inbound"},{name:"OutboundToolbox",toolboxName:"outbound"},{name:"FlowToolbox",toolboxName:"flow"},{name:"QueryToolbox",toolboxName:"query"},{name:"TriggerToolbox",toolboxName:"trigger"},{name:"AppDesignerToolbox",toolboxName:"app_designer"},{name:"PageDesignerToolbox",toolboxName:"page_designer"},{name:"ComponentDesignerToolbox",toolboxName:"component_designer"}],pending2load=processingData.length;processingData.forEach(function(toBeProcessed){LoadToolbox(toBeProcessed.name,"blockly").then(function(data){self.blocklyToolbox[toBeProcessed.toolboxName]=data,0==--pending2load&&resolve()})})}).then(function(res){self.setState({reload:!0})}),this.renderedBlocks()}},{key:"renderedBlocks",value:function(){var self=this;DesignerUtil().getSearchResults().then(function(finalResult){self.setState({searchResult:finalResult,initialResult:finalResult})})}},{key:"importWorkspaceDom",value:function(res){var dom=res&&res.Dom,workspace=BlocklyBrowser.getMainWorkspace();if(dom){var xml=Blockly.Xml.textToDom(dom);Blockly.Xml.domToWorkspace(xml,workspace)}}},{key:"handleClick",value:function(node){var self=this;"Tables"!=node.name&&"Relations"!=node.name&&"Roles"!=node.name&&GraphQLDataUtil().getRecord("mmf.getBlockyDom",{DomId:node.id}).then(function(response){self.importWorkspaceDom(response),console.log(response)})}},{key:"render",value:function(){if("true"==this.state.active){if(this.blocklyDefaultWS&&1==this.state.reload)this.updateToolbox(),this.setState({reload:!1}),window.dispatchEvent(new Event("resize"));else{var BlocklyWS=BlocklyWorkspace();this.blocklyDefaultWS=React.createElement(BlocklyWS,{name:this.state.name,blockly:this.Blockly,tools:this.defaultBlocks,categories:this.defaultBlocksCategories,reload:this.state.reload,toolboxOnUpdate:this.updateToolbox,wsOnChange:this.workspaceChangeHandlers})}return React.createElement("div",{class:"Workspace"},this.blocklyDefaultWS)}return React.createElement("div",null)}}]),_WorkSpace_}(React.Component),_export("WorkSpace",WorkSpace=function(props){return _WorkSpace_}),_export("WorkSpace",WorkSpace)}}});
System.register("client/workspace_styles.js",[],function(_export,_context){"use strict";return _export("default",function(){return{WorkMania:".showPinnedNav {\n    width: 86%;\n    height: calc(100vh - 3rem);\n    min-height: calc(100vh - 3rem);\n    position: absolute;\n    overflow: hidden;\n    top: 3rem;\n    left: 14%;\n}\n\n.showNav {\n    width: calc(100% - 30px);\n    height: calc(100vh - 3rem );\n    min-height: calc(100vh - 3rem);\n    overflow: hidden;\n    position: absolute;\n    top: 3rem;\n    left: 30px;\n}\n\n"}}),{setters:[],execute:function(){}}}),System.register("component/workspace/WorkMania.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_WorkMania_,WorkMania,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_WorkMania_=function(_React$Component){function _WorkMania_(props){_classCallCheck(this,_WorkMania_);var _this=_possibleConstructorReturn(this,(_WorkMania_.__proto__||Object.getPrototypeOf(_WorkMania_)).call(this,props));return _this.workspaces={},_this}return _inherits(_WorkMania_,_React$Component),_createClass(_WorkMania_,[{key:"render",value:function(){var page=this.props.page;if(!this.workspaces[page]){var extraProps={};"false"!=this.props.pagelite&&(extraProps.lite=!0),this.workspaces[page]=React.createElement(page,_extends({},extraProps,{shadow:!0}))}return React.createElement("div",{className:this.props.sideNavPinned&&!window.location.pathname.startsWith("/login")?"showPinnedNav":"showNav"},[this.workspaces[page]])}}]),_WorkMania_}(React.Component),_export("WorkMania",WorkMania=function(props){return _WorkMania_}),_export("WorkMania",WorkMania),_export("default",WorkMania),_export("states",states=[{KeyName:"sideNavOpen",AccessPath:"sideNavOpen",DefaultValue:'{"sideNavOpen": "open"}'},{KeyName:"sideNavPinned",AccessPath:"sideNavPinned",DefaultValue:'{"sideNavPinned": true}'},{KeyName:"headerMenuItems",AccessPath:"header.menuitems",DefaultValue:'{"header": {"menuitems": {}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/workspace/WorkMania/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_WorkMania_,WorkMania;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_WorkMania_=function(_React$Component){function _WorkMania_(props){_classCallCheck(this,_WorkMania_);var _this=_possibleConstructorReturn(this,(_WorkMania_.__proto__||Object.getPrototypeOf(_WorkMania_)).call(this,props));return _this.workspaces={},_this}return _inherits(_WorkMania_,_React$Component),_createClass(_WorkMania_,[{key:"render",value:function(){var page=this.props.page;if(!this.workspaces[page]){var extraProps={};"false"!=this.props.pagelite&&(extraProps.lite=!0),this.workspaces[page]=React.createElement(page,_extends({},extraProps,{shadow:!0}))}return React.createElement("div",{className:this.props.sideNavPinned&&!window.location.pathname.startsWith("/login")?"showPinnedNav":"showNav"},[this.workspaces[page]])}}]),_WorkMania_}(React.Component),_export("WorkMania",WorkMania=function(props){return _WorkMania_}),_export("WorkMania",WorkMania)}}});
System.register("client/persist_styles.js",[],function(_export,_context){"use strict";return _export("default",function(){return{}}),{setters:[],execute:function(){}}}),System.register("client/script/persist/MMFAPI.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","client/script/mmf/$qry.js"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,$qry,MMFAPI;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_clientScriptMmf$qryJs){$qry=_clientScriptMmf$qryJs.$qry}],execute:function(){_export("MMFAPI",MMFAPI=function(){return{createRecord:function(model,fields,outputFields,cb){var queryNParams=this.getInsertQueryNParams(model,fields,outputFields);$qry._run(queryNParams.query,queryNParams.variables,queryNParams.accesspath).then(function(data){cb(data)}).catch(function(err){console.error("Error occurred in MMFAPI.createRecord - "+err)})},updateRecord:function(model,modelId,fields,outputFields,cb){var queryNParams=this.getUpsertQueryNParams(model,modelId,fields,outputFields);$qry._run(queryNParams.query,queryNParams.variables,queryNParams.accesspath).then(function(data){cb(data)}).catch(function(err){console.error("Error occurred in MMFAPI.updateRecord - "+err)})},deleteRecord:function(model,modelId,cb){var queryNParams=this.getDeleteByIdQueryNParams(model,modelId);$qry._run(queryNParams.query,queryNParams.variables).then(function(data){cb(data)}).catch(function(err){console.error("Error occurred in MMFAPI.search - "+err)})},search:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(model,fields,queryParams,cb){var fieldNames,filter,queryStr,data,resultData;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,fieldNames=fields||["uid"],filter=queryParams?JSON.parse(decodeURIComponent(queryParams)):{},queryStr=this.getQuery(model,fieldNames),_context.next=6,$qry._run(queryStr,{whereClause:filter},"data."+model+"."+model+"Find.edges");case 6:if(data=_context.sent,resultData=[],data&&data.forEach(function(dataItem,indx){dataItem&&dataItem.node&&resultData.push(dataItem.node)}),!cb){_context.next=13;break}cb(resultData),_context.next=14;break;case 13:return _context.abrupt("return",resultData);case 14:_context.next=19;break;case 16:_context.prev=16,_context.t0=_context.catch(0),console.error("Error occurred in MMFAPI.search - "+_context.t0);case 19:case"end":return _context.stop()}},_callee,this,[[0,16]])}));return function(_x,_x2,_x3,_x4){return _ref.apply(this,arguments)}}(),getQuery:function(tableName,fields){var query="query($whereClause:JSON){\n"+tableName+"{\n"+tableName+"Find(filter:$whereClause){\nedges{\nnode{\n";return fields.forEach(function(field){query+=field+"\n"}),query+="}\n}\n}\n}\n}"},getInsertQueryNParams:function(tableName,fields,outputFields){var result={};return result.query="mutation($input: "+tableName+"CreateInput!){\n "+tableName+"Create(input:$input){\n obj{\n "+outputFields.join(" ")+" \n} \n} \n}",result.variables='{"input": { "data": '+JSON.stringify(fields)+" } }",result.accesspath="data."+tableName+"Create.obj",result},getUpsertQueryNParams:function(tableName,recordId,fields,outputFields){var result={};return result.query="mutation($input: "+tableName+"UpsertWithWhereInput!){\n "+tableName+"UpsertWithWhere(input:$input){\n obj{\n "+outputFields.join(" ")+" \n} \n} \n}",result.variables='{"input": { "data": '+JSON.stringify(fields)+', "where":{ "uid": "'+recordId+'" }  } }',result.accesspath="data."+tableName+"UpsertWithWhere.obj",result},getDeleteByIdQueryNParams:function(tableName,recordId){var result={};return result.query="mutation($input: "+tableName+"DeleteByIdInput!){\n "+tableName+"DeleteById(input:$input){\n obj \n} \n}",result.variables='{"input": { "id": "'+recordId+'" } }',result}}}),_export("MMFAPI",MMFAPI),_export("default",MMFAPI)}}});
System.register("client/buildingblock_styles.js",[],function(_export,_context){"use strict";return _export("default",function(){return{QuillEditor:"/* add css styles to the component */\n\n",FileUpload:"/* add css styles to the component */\n\n",AutoComplete:"/* add css styles to the component */\n\n"}}),{setters:[],execute:function(){}}}),System.register("component/buildingblock/AutoComplete.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/objectWithoutProperties.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","thirdpartylib/formBuilder.css!css"],function(_export,_context){"use strict";var _objectWithoutProperties,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,el,_AutoComplete_,AutoComplete,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersObjectWithoutPropertiesJs){_objectWithoutProperties=_npmSystemjsPluginBabel0025BabelHelpersObjectWithoutPropertiesJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_thirdpartylibFormBuilderCssCss){}],execute:function(){el=React.createElement,_AutoComplete_=function(_React$Component){function _AutoComplete_(props,context){_classCallCheck(this,_AutoComplete_);var _this=_possibleConstructorReturn(this,(_AutoComplete_.__proto__||Object.getPrototypeOf(_AutoComplete_)).call(this,props)),_JSON$parse=JSON.parse(props.attrs),values=_JSON$parse.values,type=_JSON$parse.type,data=_objectWithoutProperties(_JSON$parse,["values","type"]);return _this.values=values,_this.type=type,_this.data=data,_this.hideList=_this.hideList.bind(_this),_this.showList=_this.showList.bind(_this),_this.getActiveOption=_this.getActiveOption.bind(_this),_this.getPreviousOption=_this.getPreviousOption.bind(_this),_this.getNextOption=_this.getNextOption.bind(_this),_this.selectOption=_this.selectOption.bind(_this),_this.isOptionValid=_this.isOptionValid.bind(_this),_this.keyboardNav=_this.keyboardNav.bind(_this),_this.filter=_this.filter.bind(_this),_this.fauxEvents={onFocus:function(evt){var list=evt.target.nextSibling.nextSibling,filteredOptions=_this.filter(list.querySelectorAll("li"),evt.target.value);if(evt.target.addEventListener("keydown",_this.keyboardNav),evt.target.value.length>0){var selectedOption=filteredOptions.length>0?filteredOptions[filteredOptions.length-1]:null;_this.showList(list,selectedOption)}},onBlur:function(evt){if(evt.target.removeEventListener("keydown",_this.keyboardNav),setTimeout(function(){evt.target.nextSibling.nextSibling.style.display="none"},200),_this.data.requireValidOption){var list=evt.target.nextSibling.nextSibling;_this.isOptionValid(list,evt.target.value)||(evt.target.value="",evt.target.nextSibling.value="")}},onChange:function(evt){var list=evt.target.nextSibling.nextSibling;evt.target.nextSibling.value=evt.target.value;var filteredOptions=_this.filter(list.querySelectorAll("li"),evt.target.value);if(0==filteredOptions.length)_this.hideList(list);else{var activeOption=_this.getActiveOption(list);activeOption||(activeOption=filteredOptions[filteredOptions.length-1]),_this.showList(list,activeOption)}}},_this.fauxAttrs=Object.assign({},_this.data,_this.fauxEvents,{id:_this.data.id+"-input",autocomplete:"off"}),_this.hiddenAttrs=Object.assign({},_this.data,{type:"hidden"}),delete _this.fauxAttrs.name,_this}return _inherits(_AutoComplete_,_React$Component),_createClass(_AutoComplete_,[{key:"filter",value:function(elems,term){var filteredElems=[],toggle=["none","block"];(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(toggle=toggle.reverse());for(var i=elems.length-1;i>=0;i--){-1!==elems[i].textContent.toLowerCase().indexOf(term.toLowerCase())?(elems[i].style.display=toggle[0],filteredElems.push(elems[i])):elems[i].style.display=toggle[1]}return filteredElems}},{key:"keyboardNav",value:function(e){var _this2=this,list=e.target.nextSibling.nextSibling,hiddenField=e.target.nextSibling,activeOption=this.getActiveOption(list),direction=new Map([[38,function(){var previous=_this2.getPreviousOption(activeOption);previous&&_this2.selectOption(list,previous)}],[40,function(){var next=_this2.getNextOption(activeOption);next&&_this2.selectOption(list,next)}],[13,function(){activeOption?(e.target.value=activeOption.innerHTML,hiddenField.value=activeOption.getAttribute("value"),"none"===list.style.display?_this2.showList(list,activeOption):_this2.hideList(list)):_this2.config.requireValidOption&&(_this2.isOptionValid(list,e.target.value)||(e.target.value="",e.target.nextSibling.value="")),e.preventDefault()}],[27,function(){_this2.hideList(list)}]]).get(e.keyCode);return direction||(direction=function(){return!1}),direction()}},{key:"hideList",value:function(list){this.selectOption(list,null),list.style.display="none"}},{key:"showList",value:function(list,selectedOption){this.selectOption(list,selectedOption),list.style.display="block",list.style.width=list.parentElement.offsetWidth+"px"}},{key:"getActiveOption",value:function(list){var activeOption=list.getElementsByClassName("active-option")[0];return activeOption&&"none"!==activeOption.style.display?activeOption:null}},{key:"getPreviousOption",value:function(current){var previous=current;do{previous=previous?previous.previousSibling:null}while(null!=previous&&"none"===previous.style.display);return previous}},{key:"getNextOption",value:function(current){var next=current;do{next=next?next.nextSibling:null}while(null!=next&&"none"===next.style.display);return next}},{key:"selectOption",value:function(list,selectedOption){for(var options=list.querySelectorAll("li"),i=0;i<options.length;i++)options[i].classList.remove("active-option");selectedOption&&selectedOption.classList.add("active-option")}},{key:"isOptionValid",value:function(list,value){for(var options=list.querySelectorAll("li"),validValue=!1,i=0;i<options.length;i++)if(options[i].innerHTML===value){validValue=!0;break}return validValue}},{key:"render",value:function(){var _this3=this,field=[];field.push(el("style",{},"@import url('/thirdpartylib/formBuilder.css');")),field.push(el("input",this.fauxAttrs,null)),field.push(el("input",this.hiddenAttrs,null));var options=this.values.map(function(optionData){var label=optionData.label,config={onClick:function(evt){var list=evt.target.parentElement,field=list.previousSibling.previousSibling;field.value=optionData.label,field.nextSibling.value=optionData.value,_this3.hideList(list)},value:optionData.value};return el("li",config,label)});return field.push(el("ul",{id:this.data.id+"-list",className:"fb-"+this.type+"-list"},options)),el.apply(void 0,[React.Fragment,{}].concat(field))}}]),_AutoComplete_}(React.Component),_export("AutoComplete",AutoComplete=function(props){return _AutoComplete_}),_export("AutoComplete",AutoComplete),_export("default",AutoComplete),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/buildingblock/AutoComplete/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/objectWithoutProperties.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","thirdpartylib/formBuilder.css!css"],function(_export,_context){"use strict";var _objectWithoutProperties,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,el,_AutoComplete_,AutoComplete;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersObjectWithoutPropertiesJs){_objectWithoutProperties=_npmSystemjsPluginBabel0025BabelHelpersObjectWithoutPropertiesJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_thirdpartylibFormBuilderCssCss){}],execute:function(){el=React.createElement,_AutoComplete_=function(_React$Component){function _AutoComplete_(props,context){_classCallCheck(this,_AutoComplete_);var _this=_possibleConstructorReturn(this,(_AutoComplete_.__proto__||Object.getPrototypeOf(_AutoComplete_)).call(this,props)),_JSON$parse=JSON.parse(props.attrs),values=_JSON$parse.values,type=_JSON$parse.type,data=_objectWithoutProperties(_JSON$parse,["values","type"]);return _this.values=values,_this.type=type,_this.data=data,_this.hideList=_this.hideList.bind(_this),_this.showList=_this.showList.bind(_this),_this.getActiveOption=_this.getActiveOption.bind(_this),_this.getPreviousOption=_this.getPreviousOption.bind(_this),_this.getNextOption=_this.getNextOption.bind(_this),_this.selectOption=_this.selectOption.bind(_this),_this.isOptionValid=_this.isOptionValid.bind(_this),_this.keyboardNav=_this.keyboardNav.bind(_this),_this.filter=_this.filter.bind(_this),_this.fauxEvents={onFocus:function(evt){var list=evt.target.nextSibling.nextSibling,filteredOptions=_this.filter(list.querySelectorAll("li"),evt.target.value);if(evt.target.addEventListener("keydown",_this.keyboardNav),evt.target.value.length>0){var selectedOption=filteredOptions.length>0?filteredOptions[filteredOptions.length-1]:null;_this.showList(list,selectedOption)}},onBlur:function(evt){if(evt.target.removeEventListener("keydown",_this.keyboardNav),setTimeout(function(){evt.target.nextSibling.nextSibling.style.display="none"},200),_this.data.requireValidOption){var list=evt.target.nextSibling.nextSibling;_this.isOptionValid(list,evt.target.value)||(evt.target.value="",evt.target.nextSibling.value="")}},onChange:function(evt){var list=evt.target.nextSibling.nextSibling;evt.target.nextSibling.value=evt.target.value;var filteredOptions=_this.filter(list.querySelectorAll("li"),evt.target.value);if(0==filteredOptions.length)_this.hideList(list);else{var activeOption=_this.getActiveOption(list);activeOption||(activeOption=filteredOptions[filteredOptions.length-1]),_this.showList(list,activeOption)}}},_this.fauxAttrs=Object.assign({},_this.data,_this.fauxEvents,{id:_this.data.id+"-input",autocomplete:"off"}),_this.hiddenAttrs=Object.assign({},_this.data,{type:"hidden"}),delete _this.fauxAttrs.name,_this}return _inherits(_AutoComplete_,_React$Component),_createClass(_AutoComplete_,[{key:"filter",value:function(elems,term){var filteredElems=[],toggle=["none","block"];(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(toggle=toggle.reverse());for(var i=elems.length-1;i>=0;i--){-1!==elems[i].textContent.toLowerCase().indexOf(term.toLowerCase())?(elems[i].style.display=toggle[0],filteredElems.push(elems[i])):elems[i].style.display=toggle[1]}return filteredElems}},{key:"keyboardNav",value:function(e){var _this2=this,list=e.target.nextSibling.nextSibling,hiddenField=e.target.nextSibling,activeOption=this.getActiveOption(list),direction=new Map([[38,function(){var previous=_this2.getPreviousOption(activeOption);previous&&_this2.selectOption(list,previous)}],[40,function(){var next=_this2.getNextOption(activeOption);next&&_this2.selectOption(list,next)}],[13,function(){activeOption?(e.target.value=activeOption.innerHTML,hiddenField.value=activeOption.getAttribute("value"),"none"===list.style.display?_this2.showList(list,activeOption):_this2.hideList(list)):_this2.config.requireValidOption&&(_this2.isOptionValid(list,e.target.value)||(e.target.value="",e.target.nextSibling.value="")),e.preventDefault()}],[27,function(){_this2.hideList(list)}]]).get(e.keyCode);return direction||(direction=function(){return!1}),direction()}},{key:"hideList",value:function(list){this.selectOption(list,null),list.style.display="none"}},{key:"showList",value:function(list,selectedOption){this.selectOption(list,selectedOption),list.style.display="block",list.style.width=list.parentElement.offsetWidth+"px"}},{key:"getActiveOption",value:function(list){var activeOption=list.getElementsByClassName("active-option")[0];return activeOption&&"none"!==activeOption.style.display?activeOption:null}},{key:"getPreviousOption",value:function(current){var previous=current;do{previous=previous?previous.previousSibling:null}while(null!=previous&&"none"===previous.style.display);return previous}},{key:"getNextOption",value:function(current){var next=current;do{next=next?next.nextSibling:null}while(null!=next&&"none"===next.style.display);return next}},{key:"selectOption",value:function(list,selectedOption){for(var options=list.querySelectorAll("li"),i=0;i<options.length;i++)options[i].classList.remove("active-option");selectedOption&&selectedOption.classList.add("active-option")}},{key:"isOptionValid",value:function(list,value){for(var options=list.querySelectorAll("li"),validValue=!1,i=0;i<options.length;i++)if(options[i].innerHTML===value){validValue=!0;break}return validValue}},{key:"render",value:function(){var _this3=this,field=[];field.push(el("style",{},"@import url('/thirdpartylib/formBuilder.css');")),field.push(el("input",this.fauxAttrs,null)),field.push(el("input",this.hiddenAttrs,null));var options=this.values.map(function(optionData){var label=optionData.label,config={onClick:function(evt){var list=evt.target.parentElement,field=list.previousSibling.previousSibling;field.value=optionData.label,field.nextSibling.value=optionData.value,_this3.hideList(list)},value:optionData.value};return el("li",config,label)});return field.push(el("ul",{id:this.data.id+"-list",className:"fb-"+this.type+"-list"},options)),el.apply(void 0,[React.Fragment,{}].concat(field))}}]),_AutoComplete_}(React.Component),_export("AutoComplete",AutoComplete=function(props){return _AutoComplete_}),_export("AutoComplete",AutoComplete)}}}),System.register("component/buildingblock/FileUpload.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/slicedToArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/taggedTemplateLiteral.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","graphql-tag","react-apollo","apollo-client","apollo-upload-client","apollo-cache-inmemory","carbon-components-react","lodash.clonedeep"],function(_export,_context2){"use strict";var _regeneratorRuntime,_slicedToArray,_asyncToGenerator,_taggedTemplateLiteral,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,gql,Mutation,ApolloProvider,ApolloClient,apolloUploadClient,InMemoryCache,FileUploader,cloneDeep,_templateObject,createUploadLink,apolloClient,_FileUpload_,FileUpload,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs){_slicedToArray=_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs){_taggedTemplateLiteral=_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_graphqlTag){gql=_graphqlTag.default},function(_reactApollo){Mutation=_reactApollo.Mutation,ApolloProvider=_reactApollo.ApolloProvider},function(_apolloClient){ApolloClient=_apolloClient.ApolloClient},function(_apolloUploadClient){apolloUploadClient=_apolloUploadClient.default},function(_apolloCacheInmemory){InMemoryCache=_apolloCacheInmemory.InMemoryCache},function(_carbonComponentsReact){FileUploader=_carbonComponentsReact.FileUploader},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_templateObject=_taggedTemplateLiteral(["\n              mutation($file: Upload!) {\n                singleUpload(file: $file) {\n                  id\n                  filename\n                  mimetype\n                  path\n                }\n              }\n            "],["\n              mutation($file: Upload!) {\n                singleUpload(file: $file) {\n                  id\n                  filename\n                  mimetype\n                  path\n                }\n              }\n            "]),createUploadLink=apolloUploadClient.createUploadLink,apolloClient=function(){var cache=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ApolloClient({ssrMode:"undefined"!=typeof window,cache:(new InMemoryCache).restore(cache),link:createUploadLink({uri:"/graphql"})})}(),_FileUpload_=function(_React$Component){function _FileUpload_(props){_classCallCheck(this,_FileUpload_);var _this=_possibleConstructorReturn(this,(_FileUpload_.__proto__||Object.getPrototypeOf(_FileUpload_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_FileUpload_,_React$Component),_createClass(_FileUpload_,[{key:"render",value:function(){var _this2=this;return React.createElement(ApolloProvider,{client:apolloClient},React.createElement(Mutation,{mutation:gql(_templateObject)},function(mutate){return React.createElement("div",null,React.createElement(FileUploader,{labelTitle:"",labelDescription:"",buttonLabel:_this2.props.widgetProps?_this2.props.widgetProps.Label:"Add files",filenameStatus:"edit",accept:[".jpg",".png"],name:"",size:"small",onChange:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(_ref2){var result,widgetProps,_ref2$target=_ref2.target,validity=_ref2$target.validity,file=_slicedToArray(_ref2$target.files,1)[0];return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!validity.valid){_context.next=5;break}return _context.next=3,mutate({variables:{file:file}});case 3:(result=_context.sent)&&result.data&&result.data.singleUpload&&result.data.singleUpload.id&&((widgetProps=cloneDeep(_this2.props.widgetProps)).UploadedFileId=result.data.singleUpload.id,_this2.props.updateStore({updates:{widgetProps:widgetProps}}));case 5:case"end":return _context.stop()}},_callee,_this2)})),function(_x2){return _ref.apply(this,arguments)})}),React.createElement("img",{src:_this2.props.widgetProps&&_this2.props.widgetProps.UploadedFileId?"/file/"+_this2.props.widgetProps.UploadedFileId:"/file/"+_this2.props.widgetProps.DefaultFileId}));var _ref}))}}]),_FileUpload_}(React.Component),_export("FileUpload",FileUpload=function(props){return _FileUpload_}),_export("FileUpload",FileUpload),_export("default",FileUpload),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/buildingblock/FileUpload/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/slicedToArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/taggedTemplateLiteral.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","graphql-tag","react-apollo","apollo-client","apollo-upload-client","apollo-cache-inmemory","carbon-components-react","lodash.clonedeep"],function(_export,_context2){"use strict";var _regeneratorRuntime,_slicedToArray,_asyncToGenerator,_taggedTemplateLiteral,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,gql,Mutation,ApolloProvider,ApolloClient,apolloUploadClient,InMemoryCache,FileUploader,cloneDeep,_templateObject,createUploadLink,apolloClient,_FileUpload_,FileUpload;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs){_slicedToArray=_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs){_taggedTemplateLiteral=_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_graphqlTag){gql=_graphqlTag.default},function(_reactApollo){Mutation=_reactApollo.Mutation,ApolloProvider=_reactApollo.ApolloProvider},function(_apolloClient){ApolloClient=_apolloClient.ApolloClient},function(_apolloUploadClient){apolloUploadClient=_apolloUploadClient.default},function(_apolloCacheInmemory){InMemoryCache=_apolloCacheInmemory.InMemoryCache},function(_carbonComponentsReact){FileUploader=_carbonComponentsReact.FileUploader},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_templateObject=_taggedTemplateLiteral(["\n              mutation($file: Upload!) {\n                singleUpload(file: $file) {\n                  id\n                  filename\n                  mimetype\n                  path\n                }\n              }\n            "],["\n              mutation($file: Upload!) {\n                singleUpload(file: $file) {\n                  id\n                  filename\n                  mimetype\n                  path\n                }\n              }\n            "]),createUploadLink=apolloUploadClient.createUploadLink,apolloClient=function(){var cache=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ApolloClient({ssrMode:"undefined"!=typeof window,cache:(new InMemoryCache).restore(cache),link:createUploadLink({uri:"/graphql"})})}(),_FileUpload_=function(_React$Component){function _FileUpload_(props){_classCallCheck(this,_FileUpload_);var _this=_possibleConstructorReturn(this,(_FileUpload_.__proto__||Object.getPrototypeOf(_FileUpload_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_FileUpload_,_React$Component),_createClass(_FileUpload_,[{key:"render",value:function(){var _this2=this;return React.createElement(ApolloProvider,{client:apolloClient},React.createElement(Mutation,{mutation:gql(_templateObject)},function(mutate){return React.createElement("div",null,React.createElement(FileUploader,{labelTitle:"",labelDescription:"",buttonLabel:_this2.props.widgetProps?_this2.props.widgetProps.Label:"Add files",filenameStatus:"edit",accept:[".jpg",".png"],name:"",size:"small",onChange:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(_ref2){var result,widgetProps,_ref2$target=_ref2.target,validity=_ref2$target.validity,file=_slicedToArray(_ref2$target.files,1)[0];return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!validity.valid){_context.next=5;break}return _context.next=3,mutate({variables:{file:file}});case 3:(result=_context.sent)&&result.data&&result.data.singleUpload&&result.data.singleUpload.id&&((widgetProps=cloneDeep(_this2.props.widgetProps)).UploadedFileId=result.data.singleUpload.id,_this2.props.updateStore({updates:{widgetProps:widgetProps}}));case 5:case"end":return _context.stop()}},_callee,_this2)})),function(_x2){return _ref.apply(this,arguments)})}),React.createElement("img",{src:_this2.props.widgetProps&&_this2.props.widgetProps.UploadedFileId?"/file/"+_this2.props.widgetProps.UploadedFileId:"/file/"+_this2.props.widgetProps.DefaultFileId}));var _ref}))}}]),_FileUpload_}(React.Component),_export("FileUpload",FileUpload=function(props){return _FileUpload_}),_export("FileUpload",FileUpload)}}}),System.register("component/buildingblock/QuillEditor.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","quill-render","react-render-html"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_render,renderHTML,_QuillEditor_,QuillEditor,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_quillRender){_render=_quillRender.default},function(_reactRenderHtml){renderHTML=_reactRenderHtml.default}],execute:function(){_QuillEditor_=function(_React$Component){function _QuillEditor_(props){_classCallCheck(this,_QuillEditor_);var _this=_possibleConstructorReturn(this,(_QuillEditor_.__proto__||Object.getPrototypeOf(_QuillEditor_)).call(this,props));return _this.state={contents:{ops:[{insert:""}]}},_this.update=_this.update.bind(_this),_this}return _inherits(_QuillEditor_,_React$Component),_createClass(_QuillEditor_,[{key:"update",value:function(delta){var contents=this.quill.getContents();contents&&this.setState({contents:contents})}},{key:"render",value:function(){if(_render.format.block.image=function($,src){var img=$("<img>");img.attr("src",src),this.append(img)},!this.quill){this.quill=new Quill(this.props.editorselector,{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],["link","image"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]]},theme:"snow"}),this.quill.on("text-change",this.update)}var htmlString=_render(this.state.contents.ops);console.log(htmlString);var RenderedHTML=renderHTML(htmlString);return React.createElement("div",null,RenderedHTML)}}]),_QuillEditor_}(React.Component),_export("QuillEditor",QuillEditor=function(props){return _QuillEditor_}),_export("QuillEditor",QuillEditor),_export("default",QuillEditor),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/buildingblock/QuillEditor/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","quill-render","react-render-html"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_render,renderHTML,_QuillEditor_,QuillEditor;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_quillRender){_render=_quillRender.default},function(_reactRenderHtml){renderHTML=_reactRenderHtml.default}],execute:function(){_QuillEditor_=function(_React$Component){function _QuillEditor_(props){_classCallCheck(this,_QuillEditor_);var _this=_possibleConstructorReturn(this,(_QuillEditor_.__proto__||Object.getPrototypeOf(_QuillEditor_)).call(this,props));return _this.state={contents:{ops:[{insert:""}]}},_this.update=_this.update.bind(_this),_this}return _inherits(_QuillEditor_,_React$Component),_createClass(_QuillEditor_,[{key:"update",value:function(delta){var contents=this.quill.getContents();contents&&this.setState({contents:contents})}},{key:"render",value:function(){if(_render.format.block.image=function($,src){var img=$("<img>");img.attr("src",src),this.append(img)},!this.quill){this.quill=new Quill(this.props.editorselector,{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],["link","image"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]]},theme:"snow"}),this.quill.on("text-change",this.update)}var htmlString=_render(this.state.contents.ops);console.log(htmlString);var RenderedHTML=renderHTML(htmlString);return React.createElement("div",null,RenderedHTML)}}]),_QuillEditor_}(React.Component),_export("QuillEditor",QuillEditor=function(props){return _QuillEditor_}),_export("QuillEditor",QuillEditor)}}});
System.register("client/script/studio/PageDesignerFormUtil.js",[],function(_export,_context){"use strict";var PageDesignerFormUtil;return{setters:[],execute:function(){_export("PageDesignerFormUtil",PageDesignerFormUtil={PageDesignerFormUtil:function(){}}.PageDesignerFormUtil),_export("PageDesignerFormUtil",PageDesignerFormUtil),_export("default",PageDesignerFormUtil)}}}),System.register("client/studio_styles.js",[],function(_export,_context){"use strict";return _export("default",function(){return{WidgetContainer:".widgetactive {\n    border: 1px solid red;\n}\n\n",SrsteeIDE:"[draggable=true] {\n  cursor: move;\n}\n\n.resizable-sidebar {\n  overflow: auto;\n  resize: horizontal;\n  max-width: 40%;\n  min-width: 2%;\n}\n\n.sr-editorial-space > .content {\n  overflow: hidden;\n  resize: vertical;\n  max-height: 100%;\n  min-height: 20%;\n  height: 75%;\n}\n\n.editorNormal {\n    background-color: #1e1e1e;\n    width: 100%;\n    height: 100%;\n}\n\n.cancelPreview {\n  position: fixed;\n  z-index: 99999;\n  background-color: white;\n  top: 8%;\n  float: right;\n  border: 1px solid black;\n  border-radius: 50%;\n  right: 9%;\n  color: black;\n}\n\n.cancelPreview:hover {\n  border: 1px solid #4f7955;\n  cursor: pointer;\n}\n\n.editorFullScreen {\n  background-color: #1E1E1E;\n  position:fixed;\n  top: 3rem;\n  left: 0px;\n  z-index:5000;\n  width:100%;\n}\n\n.editorToolkit {\n  width: fit-content;\n  position: absolute;\n  z-index: 999;\n  top: 30px;\n  right: 0;\n  background-color: #7CB985;\n  color: black;\n  text-align: center;\n}\n\n.react-monaco-editor-container {\n    padding-top:10px;\n    text-align: left;\n}\n\n.editorViewMode {\n  color: black;\n  background-color: #dadfe8;\n  float: left;\n  padding-left: 5px;\n  padding-right: 5px;\n  text-align: center;\n}\n\n.editorViewMode:hover {\n  color: blue;\n  cursor: pointer;\n}\n\n.saveFile, .deleteFile {\n    color: white;\n    float: left;\n    background-color: #374b98;\n    padding-left: 10px;\n    padding-right: 10px;\n    text-align: center;\n}\n\n\n.saveFile:hover, .showHidePreview:hover, .deleteFile:hover {\n    color: blue;\n    cursor: pointer;\n}\n\n.showCSSorJS {\n  color:black;\n  float: left;\n  background-color: aqua;\n  padding-right: 10px;\n  padding-left: 10px;\n  text-align: center;\n}\n\n.showCSSorJS:hover {\n  cursor: pointer;\n  color: blue;\n}\n\n.editorsLayout {       \n    float: left;\n    display: block;\n}\n\n.editor {\n    position:relative;\n    left:10px;        \n    float: left;\n    margin-left: 20px;\n    display: block;\n}\n.top-level {\n    margin-left: 2px;\n    height: inherit;\n}\n\n.link2Btn {\n   color: white!important;\n   decoration: none;\n   text-decoration: none!important;\n   margin: 0!important;\n   margin-left: 10px!important;\n}\n\n.dependentsPane {\n    width: 18%;\n    position:relative;\n    float: left;\n    left: 3%;\n    top: 100px;\n}\n\n.searchPane {\n    width:19%;\n    position: relative;\n    height: 100%;\n    overflow-y: auto;\n    overflow-x: hidden;\n    float: left;\n    left: 0;\n    top: 0;\n}\n\n.content {\n    position: relative;\n    float: left;\n    padding-left: 2px;\n    width: 100%;    \n}\n\n.searchResults {\n    height: 70vh;\n    overflow-y: auto;\n    overflow-x: hidden;\n    padding: 10px;\n}\n\n.searchItem {\n    width: 75%;\n    height:30px;\n    background-color:white;\n    color: rgb(38,164,156); \n    padding-left:10px;\n    padding-top:4px;\n    border-bottom: 1px solid grey;    \n}\n\n.searchItem:hover {\n    cursor: pointer;\n    background-color: rgb(38,164,156);\n    color: rgb(210, 230, 209);\n    border: 1px solid white;\n    font-weight: 400;\n}\n\n.operationalButtons {\n    margin-right: 10px;\n}\n\n.dependentsHeader {\n    color: #26a69a;\n    text-decoration: underline;\n    font-size: large;\n    margin-bottom: 10px;\n}\n\n.dependentItem {\n    margin-left: 15px;\n    width:50%;\n    text-align:left;\n    font-style: italic;\n    margin-top: 10px;\n    font-size: smaller;\n}\n\n.dependentItem:hover {\n    cursor:pointer;\n    width:50%;\n    text-align:left;\n    margin-left: 15px;    \n    margin-top: 10px;\n    color:white;\n    font-size: small;\n    background-color: #26a69a;\n}\n\n.searchScopeHeader {\n    font-style: italic;\n    color: black;\n}\n\n.editor-toolkit {\n    z-index:99999;\n    position:relative;\n    float: left;\n    left: 0;\n    width: 70px;\n    border: 1px solid green;\n    border-top:  1px solid green;\n    border-right:  1px solid green;\n    border-left: 1px solid green;\n    height: 20px;\n    text-align: center;\n    bottom: 5px;\n    color: #45215f;\n    font-size: small;\n    font-weight: 800;\n    background-color: #fbfbfb;\n}\n\n.editor-toolkit:hover {\n    cursor: pointer;\n    background-color: #eae3e3;\n}\n\n.previewPane {\n    position: fixed;\n    top: 10%;\n    left: 10%;\n    background-color: white;\n    z-index: 9999;\n    margin-top: 5px;\n    border: 1px solid #848484;\n    padding: 5px;\n    width: 80%;\n    height: 80%;\n    overflow: scroll;\n}\n\n.screenOverlay {\n  position: fixed;\n  background-color: #000000;\n  opacity: 0.5;\n  z-index: 9999;\n  top: 0px;\n  left: 0px;\n  height: 2000px;\n  width: 2000px;\n}\n\n.propertiesPane {\n  position:relative;\n  clear:both;\n  float:left;\n  left: 0px;\n  background-color: whitesmoke;\n  width:20%;\n  height: 250px;\n  margin-top: 1px;\n  border: 1px solid lightgray;\n}\n\n.footerPane {\n  position:relative;\n  height: 25%;\n  float:left;\n  margin-left: 2px; \n  padding-left: 2px;\n  width: 100%;\n  min-height: 25%;\n  background-color: whitesmoke;\n  overflow-x: hidden;\n  overflow-y: auto;\n  z-index: 100;\n}\n\n.sr-new-file-menu{\n  padding: 15px;\n}\n.sr-new-file{\n  font-weight: 600;\n    padding-left: 50px;\n    position: absolute;\n    padding-top: 9px;\n}\n\n/* .footerTabs {\n  height: 30px;\n  background-color: #dcdada;\n} */\n\n/* .footerTab {\n  width: max-content;\n  background-color: #f5f5f5;\n  min-width: 10%;\n  margin-left: 3px;\n  float: left;\n  position: relative;\n  top: 7px;\n  border-left: 1px solid gray;\n  text-align: center;\n  border-top: 1px solid gray;\n  border-right: 1px solid gray;\n  height: 22px;\n  } */\n\n.bx--tabs.footerTabs {\n    position: sticky;\n    top: 0;\n    z-index: 100;\n    background-color: #f3f3f3;\n}\n\n.sr-editorial-space{\n    width:81%;\n    float: left;\n    height: 95vh;\n    overflow: hidden;\n}\n\n.footerContents {\n  overflow:visible;\n  scroll-behavior:  initial;\n  margin-top:1%;\n}\n\n.footerTab:hover {\n    cursor: pointer;    \n    color: white;\n}\n\n.contentTabs {\n    -ms-overflow-style: none;  /* Internet Explorer 10+ */\n    scrollbar-width: none;  /* Firefox */\n}\n.contentTabs::-webkit-scrollbar { \n    display: none;  /* Safari and Chrome */\n}\n\n.contentTabs {\n    min-height: 27px;\n    background-color: #c3c3c3;\n    width: 100%;\n    display: inline-flex;\n    margin-bottom: -5px;\n    position: relative;\n    z-index: 9;\n    height: 30px;\n    overflow-x: scroll;\n}\n\n.contentTab {\n  font-size: smaller;\n  color: black;\n  position: relative;\n  float: left;\n  display: inline-block;\n  margin-top: 3px;\n  margin-left: 5px;\n  background-color: #e4e4e4;\n  padding: 3px;\n  width: auto;\n  min-width: 80px;\n  text-align: center;\n  height: auto;\n}\n\n.contentTabActive {\n  font-size: smaller;\n  color: black;\n  cursor: crosshair;\n  position: relative;\n  display: block;\n  float: left;\n  margin-top: 4px;\n  margin-left: 5px;\n  background-color: white;\n  padding: 3px;\n  width: max-content;\n  min-width: 80px;\n  text-align: center;\n  height: 23px;\n  border-bottom: 2px solid #ff4f6b;\n}\n\n.contentTab:hover, .contentTabActive:hover {\n  background-color: white;\n  cursor: default;\n}\n\n.showHidePreview {\n    float: left;\n    color: white;\n    padding-left: 10px;\n    padding-right: 10px;\n    background-color: red;\n}\n\n.closeTab:hover {\n  cursor: pointer;\n  background-color: #dadada;\n}\n\nsvg.closeTab {\n    margin-top: 3px;\n    height: 23px;\n}\n\n.contentTabItems {\n    display: inline-flex;\n}\n.caret{\n    position: absolute;\n    right: 0;\n    top: 20px;\n}\n.sr-carb-sele{\n  height: 42px;\n  margin-bottom: 5px;\n}\n\n.sr-carb-items-search{\n  height: 42px;\n  width: 98%; \n  margin-bottom: 5px;\n}\n.searchPane .bx--text-input__field-wrapper{\n  width: 98%;\n  margin-bottom: 5px;\n}\n.searchPane .bx--form-item{\n  margin-top: 5px\n}\n.searchPane .bx--btn--primary{\n  margin-top: 5px;\n}\n\n.bx--side-nav {\n    position: relative !important;\n}\n.bx--side-nav__navigation {\n    z-index: 10 !important;\n}\n\n.bx--side-nav__item {\n    list-style: none !important;\n}\n\n",SrsteeHeader:'/* add css styles to the component */\n.srstee-search{\n  width:45% !important;\n}\n.panes {\n  height: var(--panes-height,100vh);\n  margin-top: var(--panesmargin-top,50px);\n  width: var(--panes-width,20px);\n  display: var(--panes-display,block);\n  position: var(--panes-position,fixed);\n  z-index:var(--panes-z-index,10);\n}\n\n.paneitem a {\n  text-orientation: var(--pane-item-text-orientation,mixed);\n  font-size: var(--pane-item-font-size,small);\n  border-radius: var(--pane-item-border-radius,5px);\n  writing-mode: var(--pane-item-writing-mode,vertical-lr);\n  padding-bottom: var(--pane-item-padding-bottom,5px);\n  opacity: var(--pane-item-opacity,0.5);\n  padding-top: var(--pane-item-padding-top,5px);\n  border: var(--pane-item-border);\n  margin-bottom: var(--pane-item-margin-bottom,10px);\n  background-color: var(--pane-item-background-color,#090920);\n  color: var(--pane-item-color,white);\n}\n\n.paneitem a:hover {\n  cursor: var(--pane-item-hover-cursor,pointer);\n  color: var(--pane-item-hover-color,white);\n  border-radius: var(--pane-item-hover-border-radius,10px);\n  padding-left: var(--pane-item-hover-padding-left,5px);\n  opacity: var(--pane-item-hover-opacity,1);\n  background-color: var(--pane-item-hover-background-color,white);\n  border: var(--pane-item-hover-border);\n}\n\n.avatarMenuItems .bx--header__menu {    \n    left: -200% !important;\n    width: 15.2rem !important;\n}\n\n.bx--header-panel{\n    height:20%;\n}\n\n.bx--side-nav__navigation {\n    top: 5px !important;\n    position: absolute !important;        \n    height: 100vh !important;\n    width: 90% !important;    \n}\n\n.pinnedSideNav > .bx--side-nav {\n    height: inherit;\n    background-color: black !important; \n    border-right: 1px solid #e0e0e0\n}\n\n.sideNav > .bx--side-nav {\n    height: inherit;\n}\n\n.sideNav, .pinnedSideNav {\n    position: fixed;    \n    width: calc(16rem - 30px);\n    top: 3rem;\n    height: calc(100% - 3rem);\n    left: 30px;\n}\n\n.bx--side-nav__item > .bx--side-nav__menu {\n    padding-left: 20px;\n}\n.bx--side-nav__item > .bx--side-nav__menu > .bx--side-nav__menu {\n    padding-left: 40px;\n}\n.bx--side-nav__item > .bx--side-nav__menu > .bx--side-nav__menu > .bx--side-nav__menu {\n    padding-left: 60px;\n}\n.bx--side-nav__item > .bx--side-nav__menu > .bx--side-nav__menu > .bx--side-nav__menu > .bx--side-nav__menu {\n    padding-left: 80px;\n}\n.bx--side-nav__footer {\n    display: none;\n}\n.MultiSelect {\n    width: 100vw;    \n}\n\n.bx--side-nav__navigation, .bx--side-nav {\n    position: absolute !important;\n    max-height: 100% !important;\n    height: 100% !important;\n    background-color: black !important;\n}\n\n\n.MultiSelect .bx--select, .MultiSelect .bx--select-input__wrapper {\n    width: 100vw !important;\n}\n\n.MultiSelect .bx--select-input {\n    background-color: rgb(6 183 177) !important;\n    color: white !important;\n    padding-left: 45% !important;\n    width: 100vw !important;\n    max-width: 100vw !important;\n}\n\n.bx--side-nav__submenu {\n    padding: 0 8px !important;\n}\n\n.bx--side-nav__navigation {\n    overflow-y: auto !important;\n    width: calc(16rem - 30px) !important;\n}\n\n.bx--label {\n    display: none !important;\n}\n\n.simpleref {\n    margin-top: 5px;\n    width: 170px;\n}\n\n.bx--list-box--light {\n    background-color: #c3c3c3 !important;\n}\n\n.bx--side-nav__submenu-title {\n    font-weight: 900;\n    font-size: medium;\n    font-family: "IBM Plex Sans" !important;\n}\n\n.bx--side-nav__submenu:hover {\n    color: white !important;\n    background-color: #0043ce !important;\n}\n\n.bx--side-nav__submenu {\n    color: white !important;\n}\n\n.menubtn > svg {\n    fill: black !important;\n}\n\n.menubtn {\n    top: 3rem !important;\n    position: absolute !important;\n    left: 16rem !important;\n    cursor: pointer;\n}\n\n.menubtn:hover {\n    background-color: #ededed !important;        \n}\n\n.menubtn-closed {\n    top: 3rem !important;\n    position: absolute !important;\n    left: 33px !important;\n    cursor: pointer;\n}\n\n.fixedMenu {\n    top: 3rem;\n    position: absolute;\n    background: #292828;\n    width: 30px;\n    height: calc(100vh - 3rem);\n    cursor: pointer;\n}\n\n.fixedMenuItem {\n    background-color: #c6afaf;\n    margin-left: 5px;\n    margin-top: 5px;\n    margin-bottom: 5px;\n    border-radius: 3px;\n    cursor: pointer;\n}\n\n.fixedMenuItemFreeText {\n    margin-left: 5px;\n    margin-top: 5px;\n    margin-bottom: 5px;\n    border-radius: 3px;\n    width: 23px;\n    height: 20px;\n    padding-left: 2px;\n    padding-right: 2px;\n    cursor: pointer;\n    font-size: x-small;\n    text-align: center;\n    padding-top: 5px;\n    font-weight: 600;\n}\n\n.bx--side-nav__items {\n    padding: 0px !important;\n}\n\n.bx--tooltip__trigger {\n    font-size: xx-small !important;\n    font-weight: 600 !important;\n}\n\n',SrsTreeSortable:".list-group {\n    padding-left: 0;\n    margin-bottom: 20px;\n    cursor: grab;\n}\n\n.list-group-item {\n    position: relative;\n    display: block;\n    padding: 10px 15px;\n    margin-bottom: -1px;\n    background-color: #fff;\n    border: 1px solid #ddd;\n    cursor: grab;\n}\n\n.list-group-item:first-child {\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n}\n\n",SrsToggle:"/* add css styles to the component */\n.srs-prem-container{\n    width: 98%;\n    padding: 1%;\n }\n\n",SrsTitle:"/* add css styles to the component */\n\n",SrsTime:"/* add css styles to the component */\n.srs-prem-container{\n    width: 98%;\n    padding: 1%;\n }\n\n",SrsThreeWaySwitch:'.switchradio {\n    display: none;\n}\n\n.switchradio:checked {\n    transition: 0.15s ease-out;\n    color: #fff;\n}\n\n.switch {\n    font-family: "Lucida Grande", Tahoma, Verdana, sans-serif;\n    position: relative;\n    height: 26px;    \n    background-color: black;\n    border-radius: 3px;\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px rgba(255, 255, 255, 0.1);\n}\n\n.switchselection {\n    display: block;\n    position: absolute;\n    z-index: 1;\n    top: 0px;\n    left: 0px;\n    width: 45px;\n    height: 26px;\n    background: #216BA5;\n    border-radius: 3px;\n    transition: left 0.25s ease-out;\n}\n\n.switchlabel {\n    position: relative;\n    z-index: 2;\n    float: left;\n    width: 45px;\n    line-height: 26px;\n    font-size: 11px;\n    color: white;\n    text-align: center;\n    cursor: pointer;\n}\n\n',SrsTextField:"/* add css styles to the component */\n.srs-prem-container{\n   width: 100%;\n}\n\n.bx--text-input--light:disabled {\n    border: 1px solid lightgrey !important;\n}\n\n",SrsTextArea:"/* add css styles to the component */\n.srs-prem-container{\n    width: 98%;\n    padding: 1%;\n }\n\n",SrsTabs:"/* add css styles to the component */\n.srs-prem-container{\n    width: 98%;\n    padding: 1%;\n }\n \n .bx--tabs.tab-content {\n    z-index: 1000;\n }\n\n .tab-content {    \n     position: sticky;\n     top: 0;     \n     background-color: gainsboro;\n }\n.autotabbing > .bx--tabs.tab-content {\n    display: none;\n}\n:host {    \n    display: block;   // this is the same as shown above   \n}\n\n",SrsSortableNestedList:".list-group {\n    padding-left: 0;\n    margin-bottom: 20px;\n    cursor: grab;\n}\n\n.list-group-item {\n    position: relative;\n    display: block;\n    padding: 10px 15px;\n    margin-bottom: -1px;\n    background-color: #fff;\n    border: 1px solid #ddd;\n    cursor: grab;\n}\n\n.list-group-item:first-child {\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n}\n\n.hide {\n    display: none !important;\n}\n\n.create-btn-group {\n    border: 1px solid black;\n    display: inline-block;\n    border-radius: 3px;    \n}\n\n.create-btn-group.expanded {\n    border: 1px solid black;\n    border-radius: 3px;    \n}\n\n.create-btn-group.collapsed {\n    border: 0px;    \n}\n\n.create-btn-subgroup {\n    display: inline-block;\n}\n\n.grop-item-header {    \n    height: 30px;\n    width: 100%;\n    display: inline-block;\n}\n\n.group-title {\n    float: left;    \n}\n\n.rootcontrolactions, .controlactions {\n    text-align: right;\n    float: right;\n    right: 20px;\n}\n\n.add-active {\n    display: none;\n}\n\n",SrsSortableList:".dragHandle {\n    flex: none;\n    width: 7.5px;\n    height: 100%;\n    cursor: -webkit-grab; \n    cursor: grab;\n}\n\n.dragHandle:before {\n    content: '';\n    border-left: 4px dotted #ccc;\n    display: block;\n    height: 20px;\n    margin: 15px 3px;\n}\n\n.dragHandle:hover:before {\n    border-color: #888;\n}\n\n",SrsSimpleTabs:".bx--tabs__nav {\n    height: 40px;\n    overflow-y: auto;\n}\n\n",SrsSimpleNavigator:".bx--side-nav__item > .bx--side-nav__menu {\n    //margin-left: 20px;\n}\n.bx--side-nav__item > .bx--side-nav__menu > .bx--side-nav__menu {\n    margin-left: 40px;\n}\n.bx--side-nav__item > .bx--side-nav__menu > .bx--side-nav__menu > .bx--side-nav__menu {\n    margin-left: 60px;\n}\n.bx--side-nav__item > .bx--side-nav__menu > .bx--side-nav__menu > .bx--side-nav__menu > .bx--side-nav__menu {\n    margin-left: 80px;\n}\n.bx--side-nav__footer {\n    display: none;\n}\n.MultiSelect {\n    width: 100vw;    \n}\n\n.bx--side-nav__submenu {\n    padding: 0 8px !important;\n}\n\n.bx--side-nav__navigation {\n    min-height: 100%;\n}\n    \n.bx--side-nav__navigation, .bx--side-nav {\n    position: absolute !important;\n    max-height: 100% !important;\n    height: fit-content !important;\n    background-color: #f3f3f3 !important;\n}\n\n.MultiSelect .bx--select, .MultiSelect .bx--select-input__wrapper {\n    width: 100vw !important;\n}\n\n.MultiSelect .bx--select-input {\n    background-color: rgb(6 183 177) !important;\n    color: white !important;\n    padding-left: 45% !important;\n    width: 100vw !important;\n    max-width: 100vw !important;\n}\n\n",SrsSimpleList:".simpleList, .singleColumnList {    \n    overflow-x: hidden;\n    overflow-y: auto;\n    height: inherit;\n}\n\n.simpleList > .bx--structured-list, .singleColumnList > .bx--structured-list {\n    overflow: hidden;\n    max-width: inherit;\n    display: flow-root;\n    text-align: left;\n}\n\n.singleColumnList > .bx--structured-list {\n    min-width: 0px;\n}\n\n.singleColumnList .bx--structured-list-th {    \n    width: 100vw;\n}\n\n.Align-center .bx--structured-list-th {  \n    text-align: center;      \n}\n\n.Align-left .bx--structured-list-th {  \n    text-align: left;      \n}\n\n.Align-right .bx--structured-list-th {  \n    text-align: right;      \n}\n\n.singleColumnList .bx--structured-list-td {\n    text-align: center;    \n}\n\n.Align-center .bx--structured-list-td {  \n    text-align: center;      \n}\n\n.Align-left .bx--structured-list-td {  \n    text-align: left;      \n}\n\n.Align-right .bx--structured-list-td {  \n    text-align: right;      \n}\n\n::-webkit-scrollbar {\n    width: 5px;\n    height: 5px;\n}\n \n/* Track */\n::-webkit-scrollbar-track {\n    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); \n    -webkit-border-radius: 10px;\n    border-radius: 10px;\n}\n \n/* Handle */\n::-webkit-scrollbar-thumb {\n    -webkit-border-radius: 10px;\n    border-radius: 10px;\n    background: rgba(255,0,0,0.8); \n    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); \n}\n::-webkit-scrollbar-thumb:window-inactive {\n\tbackground: rgba(255,0,0,0.4); \n}\n\n",SrsSelect:"/* add css styles to the component */\n .srs-prem-container{\n    width: 100%;\n }\n\n .bx--label{\n     text-align:left;\n }\n\n .bx--select-input__wrapper, .bx--select, .bx--select-input {\n    width: 100% !important;\n }\n\n",SrsReference:".inlineref  .bx--label{\n     text-align:left;\n }\n\n.inlineref  .bx--list-box__wrapper {\n    text-align: left;\n    display: inline-grid;\n    margin-left: 5px;\n    width: 97%;\n }\n \n .inlineref  .bx--list-box__field {\n     width: 40% !important;\n }\n\n .inlineref  .bx--list-box__menu {   \n    overflow-y: scroll !important;;\n    display: inline-flex !important;;\n    margin-left: 40% !important;;\n    padding-left: 0 !important;;\n    width: 60% !important;\n    border: 1px solid #0062ff !important;;\n }\n\n.inlineref  ::-webkit-scrollbar {\n    width: 0px !important;;  /* Remove scrollbar space */\n    background: transparent !important;;  /* Optional: just make scrollbar invisible */\n}\n/* Optional: show position indicator in red */\n.inlineref  ::-webkit-scrollbar-thumb {\n    background: #FF0000 !important;;\n}\n.bx--list-box__wrapper {\n    width: 100%;\n}\n\n",SrsRadio:"/* add css styles to the component */\n.srs-prem-container{\n    width: 98%;\n    padding: 1%;\n }\n\n.wrapItems {\n    float: left;\n}\n\n",SrsPollData:"/* add css styles to the component */\n\n",SrsPagination:"/* add css styles to the component */\n.bx--pagination{\n    width:100% !important;\n    float:right !important;\n    height: inherit !important;\n}\n.bx--pagination__left{\n    display:none !important;\n}\n\n.srs-pagination {\n    height: inherit;\n}\n\n",SrsNumber:"/* add css styles to the component */\n.srs-prem-container{\n    width: 98%;\n    padding: 1%;\n }\n .srs-num{\n     width:100%;\n }\n .bx--label{\n     text-align:left;\n }\n .bx--number {\n    width: 100% !important;\n}\n\n",SrsNavigation:".bx--side-nav__item > .bx--side-nav__menu {\n    margin-left: 20px;\n}\n.bx--side-nav__item > .bx--side-nav__menu > .bx--side-nav__menu {\n    margin-left: 40px;\n}\n.bx--side-nav__item > .bx--side-nav__menu > .bx--side-nav__menu > .bx--side-nav__menu {\n    margin-left: 60px;\n}\n.bx--side-nav__item > .bx--side-nav__menu > .bx--side-nav__menu > .bx--side-nav__menu > .bx--side-nav__menu {\n    margin-left: 80px;\n}\n.bx--side-nav__footer {\n    display: none;\n}\n.MultiSelect {\n    width: 100vw;    \n}\n\n.bx--side-nav__navigation {\n    position: absolute;\n}\n\n.MultiSelect .bx--select, .MultiSelect .bx--select-input__wrapper {\n    width: 100vw !important;\n}\n\n.MultiSelect .bx--select-input {\n    background-color: rgb(6 183 177) !important;\n    color: white !important;\n    padding-left: 45% !important;\n    width: 100vw !important;\n    max-width: 100vw !important;\n}\n\n",SrsNavigateBtn:"/* add css styles to the component */\n.srs-prem-container{\n   width: 98%;\n   padding: 1%;\n   text-align: center;\n}\n\n",SrsMultiButton:"/* add css styles to the component */\n.MultiSelect {\n    width: 100vw;    \n}\n\nselect, .bx--select, .bx--select-input__wrapper {\n    width: 100vw !important;\n}\n\n",SrsLoading:"/* add css styles to the component */\n.srs-prem-container{\n    width: 98%;\n    padding: 1%;\n }\n\n",SrsLink:"/* add css styles to the component */\n.srs-prem-container{\n    width: 98%;\n    padding: 1%;\n }\n\n",SrsKeyValuePair:"/* add css styles to the component */\n\n",SrsImage:"/* add css styles to the component */\n.srs-prem-container{\n    width: 98%;\n    padding: 1%;\n }\n\n",SrsIFrame:"/* add css styles to the component */\n\n",SrsHtml:"/* add css styles to the component */\n\n",SrsGroupButton:".btnItem, .btnItem:hover {\n    cursor: pointer;\n}\n\n.btnItem:hover {\n    background-color: #e3f7e6;\n}\n\n.labelBtn {\n    text-align: center;\n}\n\n",SrsGrid:'.rdg-cell{contain:strict;contain:size layout style paint;position:absolute;height:inherit;padding:0 8px;border-right:1px solid var(--border-color);border-bottom:1px solid var(--border-color);background-color:inherit;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.rdg-cell-frozen{position:sticky;z-index:1}.rdg-cell-frozen-last{box-shadow:2px 0 5px -2px rgba(136,136,136,.3)}.rdg-cell-selected{box-shadow:inset 0 0 0 2px var(--selection-color)}.rdg-cell-copied{background-color:#ccf}.rdg-cell-drag-handle{cursor:move;position:absolute;right:0;bottom:0;width:8px;height:8px;background-color:var(--selection-color)}.rdg-cell-drag-handle:hover{width:16px;height:16px;border:2px solid var(--selection-color);background-color:var(--background-color)}.rdg-cell-dragged-over{background-color:#ccf}.rdg-cell-copied.rdg-cell-dragged-over{background-color:#99f}.rdg-cell-editing{padding:0}.rdg-checkbox-label{cursor:pointer;display:flex;align-items:center;justify-content:center;position:absolute;top:0;right:0;bottom:0;left:0;margin-right:1px}.rdg-checkbox-label-disabled{cursor:default}.rdg-checkbox-label-disabled .rdg-checkbox{border-color:var(--checkbox-disabled-border-color);background-color:var(--checkbox-disabled-background-color)}.rdg-checkbox-input{all:unset;width:0;margin:0}.rdg-checkbox{content:\'\';width:20px;height:20px;border:2px solid var(--border-color);background-color:var(--background-color)}.rdg-checkbox-input:checked+.rdg-checkbox{background-color:var(--checkbox-color);box-shadow:inset 0 0 0 4px var(--background-color)}.rdg-checkbox-input:focus+.rdg-checkbox{border-color:var(--checkbox-focus-color)}.rdg{--color:#000;--border-color:#ddd;--summary-border-color:#aaa;--background-color:#fff;--header-background-color:#f9f9f9;--row-hover-background-color:#f5f5f5;--row-selected-background-color:#dbecfa;--row-selected-hover-background-color:#c9e3f8;--checkbox-color:#005295;--checkbox-focus-color:#62b8ff;--checkbox-disabled-border-color:#ccc;--checkbox-disabled-background-color:#ddd;--selection-color:#66afe9;--font-size:14px;contain:strict;contain:size layout style paint;content-visibility:auto;height:350px;border:1px solid var(--border-color);box-sizing:border-box;overflow-x:auto;overflow-y:auto;-webkit-user-select:none;user-select:none;background-color:var(--background-color);color:var(--color);font-size:var(--font-size)}.rdg *,.rdg ::after,.rdg ::before{box-sizing:inherit}.rdg.rdg-dark{--color:#ddd;--border-color:#444;--summary-border-color:#555;--background-color:#222;--header-background-color:#1c1c1c;--row-hover-background-color:#181818;--row-selected-background-color:#1a73bc;--row-selected-hover-background-color:#1868aa;--checkbox-color:#95cfff;--checkbox-focus-color:#c8e6ff;--checkbox-disabled-border-color:#000;--checkbox-disabled-background-color:#333}@media (prefers-color-scheme:dark){.rdg:not(.rdg-light){--color:#ddd;--border-color:#444;--summary-border-color:#555;--background-color:#222;--header-background-color:#1c1c1c;--row-hover-background-color:#181818;--row-selected-background-color:#1a73bc;--row-selected-hover-background-color:#1868aa;--checkbox-color:#95cfff;--checkbox-focus-color:#c8e6ff;--checkbox-disabled-border-color:#000;--checkbox-disabled-background-color:#333}}@supports not (contain:strict){.rdg{position:relative;z-index:0}}.rdg-focus-sink{position:sticky;top:0;left:0;height:0;width:0;outline:0}.rdg-viewport-dragging .rdg-row{cursor:move}.rdg-editor-container{display:contents}.rdg-text-editor{-webkit-appearance:none;appearance:none;box-sizing:border-box;width:100%;height:100%;padding:0 6px;border:2px solid #ccc;vertical-align:top;color:var(--color);background-color:var(--background-color);font-family:inherit;font-size:var(--font-size)}.rdg-text-editor:focus{border-color:var(--selection-color);outline:0}.rdg-text-editor::placeholder{color:#999;opacity:1}.rdg-filter-row,.rdg-header-row{contain:strict;contain:size layout style paint;display:flex;width:var(--row-width);position:sticky;background-color:var(--header-background-color);font-weight:700;z-index:3}.rdg-header-row{height:var(--header-row-height);line-height:var(--header-row-height);top:0}.rdg-filter-row{height:var(--filter-row-height);line-height:var(--filter-row-height);top:var(--header-row-height)}.rdg-cell-resizable::after{content:"";cursor:col-resize;position:absolute;top:0;right:0;bottom:0;width:10px}.rdg-cell .Select{max-height:30px;font-size:12px;font-weight:400}.rdg-header-sort-cell{cursor:pointer;display:flex}.rdg-header-sort-name{flex-grow:1;overflow:hidden;text-overflow:ellipsis}.rdg-row{contain:strict;contain:size layout style paint;display:flex;position:absolute;left:0;width:var(--row-width);height:var(--row-height);line-height:var(--row-height);background-color:var(--background-color)}.rdg-row:hover{background-color:var(--row-hover-background-color)}.rdg-row-selected{background-color:var(--row-selected-background-color)}.rdg-row-selected:hover{background-color:var(--row-selected-hover-background-color)}.rdg-summary-row{position:sticky;z-index:3}.rdg-summary-row>.rdg-cell{border-top:2px solid var(--summary-border-color)}.rdg-group-row:not(.rdg-row-selected){background-color:var(--header-background-color)}.rdg-group-row>.rdg-cell:not(:last-child):not(.rdg-cell-frozen-last){border-right:none}.rdg-group-row-selected::after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;box-shadow:inset 0 0 0 2px var(--selection-color);pointer-events:none;z-index:2}.rdg-group-row-selected>.rdg-cell:first-child{box-shadow:inset 2px 0 0 0 var(--selection-color)}.rdg-group-cell-content{outline:0}.rdg-caret{margin-left:4px;stroke:currentColor;stroke-width:1.5px;fill:transparent;vertical-align:middle}.rdg-caret>path{transition:d .1s}\n\n.rdg-cell{\n    background-color: white !important;\n    color: black !important;\n}\n\n.rdg-cell > .cellActions {\n    display: none;\n}\n.rdg-cell-selected > .cellActions {\n    display: block;\n    position: absolute;        \n    top: 0;\n    z-index: 100;\n}\n\n .showFilter {\n     right: 0;\n }\n\n .removeFilter {\n     right: 20px !important;\n }\n\n .bx--list-box {\n     border-bottom: 0px !important;\n }\n\n .gridTop {\n    box-shadow: 0px 2px 4px -1px rgb(0 0 0 / 20%), 0px 1px 2px 0px rgb(0 0 0 / 14%), 0px 1px 5px 0px rgb(0 0 0 / 12%);\n    margin-top: -7px;\n    padding-top: 5px;\n }\n\n .MuiPaper-elevation4 {\n    box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%) !important;\n}\n\n.MuiGrid-grid-xs-true {\n    margin-bottom: 5px;\n}\n.rgd-cell {\n\ttext-align: center;\n    padding-top: 3px;\n}\n.gridTop .bx--label {\n    display: none !important;\n}\n\n.bx--tile {\n    background-color: rgb(242 242 242) !important;\n}\n\n',SrsForm:"/* add css styles to the component */\n\n",SrsFilter:".closeBtn, .addRuleBtn {\n   width: 98%;\n   padding: 1%;\n   cursor: pointer;\n}\n\n.ruleGroup {\n  padding: 0.5rem;\n  border: 1px solid #e1e1e1;\n  border-radius: 4px;\n  background: white;\n}\n\n.ruleGroup .rule, .ruleGroup .ruleGroup {\n    margin-top: 0.5rem;\n    margin-left: 0.5rem;\n}\n\n.ruleGroup .ruleGroup-combinators.betweenRules {\n    margin-top: 0.5rem;\n}\n\n.ruleGroup .ruleGroup-notToggle {\n    margin-right: 0.5rem;\n}\n\n.ruleGroup-addRule, .ruleGroup-addGroup {\n    background-color: #1d5124 !important;\n}\n\n.ruleGroup-header {\n    display: inline-flex;\n}\n\n.notToggle {\n    margin-top: 30% !important;\n}\n\n.showCombinator {\n    margin-top: 5% !important;\n}\n\n.showCombinator  .bx--select-input {\n    background-color: #d4ebd7;\n}\n.showCombinator .bx--select-input__wrapper .bx--select-input{\n    height: 30px;\n    margin-top: 5px;\n}\n\n.rule-remove {\n    border: none;\n    font-size: large;\n    background-color: white;\n}\n\n.bx--toggle:checked + .bx--toggle__label .bx--toggle__appearance:after {\n    background-color: #fff;\n    transform: translateX(18px) !important;\n}\n\n.bx--toggle:checked + .bx--toggle__label .bx--toggle__appearance:before {\n    background-color: #2d43b0 !important;\n}\n\n.bx--toggle__appearance:after {\n    top: 2px !important;\n}\n\n.remove-rule {\n    cursor: pointer;\n    margin-left: 5px;\n    font-size: large;\n}\n\n.control-panel {\n    width: 100%;\n    text-align: left;\n    margin-top: 10px;\n}\n\n.flex-box {\n    width: 100%;    \n    min-width: 40rem;\n    max-height: 25rem;\n    overflow-y: scroll;\n    text-align: left;\n}\n.bx--date-picker-container .bx--label{\n    display:none;\n}\n.bx--list-box__wrapper .bx--label{\n     display:none;\n} \n.srs-ref-filter{\n    display: inline-flex;\n    position: relative;\n    width: 15%;\n}\n.srs-ref-filter .bx--list-box__wrapper{\n        position: absolute;\n    top: -25px;\n}\n.srs-ref-filter svg{\n    display:none;\n}\n\n.addRuleBtn button{\n    width: 60px;\n    height: 30px;\n    margin-top: 13px;\n    font-size: 12px;\n    font-weight: 600;\n    background: grey;\n    color: white;\n}\n\n.closeBtn{\n    margin-top:12px;\n}\n\n",SrsFile:"/* add css styles to the component */\n.srs-prem-container{\n    width: 98%;\n    padding: 1%;\n }\n\n .bx--label-description {\n     display: none;\n }\n\n",SrsDynamicForm:".MuiAppBar-colorPrimary {\n    color: #161616 !important;\n    background-color: #ffffff !important;\n}\n\n.bx--text-input--light:disabled {\n    border-bottom: 1px solid #bdbaba !important;\n    background-color: #f7f7f7 !important;\n}\n\n.bx--label--disabled, .bx--form__helper-text--disabled {\n    color: #5e5e5e !important;\n}\n\n.bx--text-input:disabled {\n    color: #5e5e5e !important;\n}\n\n.MuiTypography-h6 {    \n    margin-bottom: 15px;\n    padding-bottom: 15px;\n    border-bottom: 1px solid #44584a;\n}\n\n.MuiPaper-elevation1, .MuiPaper-elevation2, .MuiPaper-elevation3, .MuiPaper-elevation4, .MuiPaper-elevation5, .MuiPaper-elevation6 {\n    box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%) !important;\n}\n\n.MuiGrid-root {\n    padding: 5px;\n}\n\n.MuiFormHelperText-root.Mui-error {\n    display: none !important;\n}\n\n.MuiBadge-root {\n    display: none !important;\n}\n\n.loader {\n    border: 16px solid #f3f3f3;\n    border-radius: 50%;\n    border-top: 16px solid #3498db;\n    position: absolute;\n    left: 45%;\n    width: 60px;\n    height: 60px;\n    -webkit-animation: spin 2s linear infinite;\n    animation: spin 2s linear infinite;\n}\n\n/* Safari */\n@-webkit-keyframes spin {\n  0% { -webkit-transform: rotate(0deg); }\n  100% { -webkit-transform: rotate(360deg); }\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n",SrsDynamicChoice:".bx--label{\n    text-align:left;\n}\n\n.bx--select, .bx--select-input__wrapper, .bx--select-input {\n    width: 100% !important;\n}\n\n",SrsDividerY:"/* add css styles to the component */\n\n",SrsDividerX:"/* add css styles to the component */\n\n",SrsDate:"/* add css styles to the component */\n.srs-prem-container{\n    width: 98%;\n    padding: 1%;\n }\n .bx--label {\n     text-align: left;\n }\n\n .bx--date-picker, .bx--date-picker__input, .bx--date-picker-container {\n    width: 100% !important;\n}\n\n",SrsContentRepeater:"/* add css styles to the component */\n\n",SrsCodeEditor:".view-lines {\n    text-align: left;\n}\n\n.resizable-sidebar {\n  overflow: auto;\n  resize: horizontal;\n  max-width: 40%;\n  min-width: 2%;\n}\n\n.sr-editorial-space > .content {\n  overflow: hidden;\n  resize: vertical;\n  max-height: 100%;\n  min-height: 20%;\n  height: 75%;\n}\n\n.editorNormal {\n    background-color: #1e1e1e;\n    width: 100%;\n    height: 100%;\n}\n\n.cancelPreview {\n  position: fixed;\n  z-index: 99999;\n  background-color: white;\n  top: 8%;\n  float: right;\n  border: 1px solid black;\n  border-radius: 50%;\n  right: 9%;\n  color: black;\n}\n\n.cancelPreview:hover {\n  border: 1px solid #4f7955;\n  cursor: pointer;\n}\n\n.editorFullScreen {\n  ackground-color: #1E1E1E;\n  position:fixed;\n  top: 3rem;\n  left: 0px;\n  z-index:5000;\n  width:100%;\n}\n\n.editorToolkit {\n  width: fit-content;\n  position: absolute;\n  z-index: 999;\n  top: 30px;\n  right: 0;\n  background-color: #7CB985;\n  color: black;\n  text-align: center;\n}\n\n.react-monaco-editor-container {\n    padding-top:10px;\n    \n}\n\n.editorViewMode {\n  color: black;\n  background-color: #dadfe8;\n  float: left;\n  padding-left: 5px;\n  padding-right: 5px;\n  text-align: center;\n}\n\n.editorViewMode:hover {\n  color: blue;\n  cursor: pointer;\n}\n\n.saveFile, .deleteFile {\n    color: white;\n    float: left;\n    background-color: #374b98;\n    padding-left: 10px;\n    padding-right: 10px;\n    text-align: center;\n}\n\n\n.saveFile:hover, .showHidePreview:hover, .deleteFile:hover {\n    color: blue;\n    cursor: pointer;\n}\n\n.showCSSorJS {\n  color:black;\n  float: left;\n  background-color: aqua;\n  padding-right: 10px;\n  padding-left: 10px;\n  text-align: center;\n}\n\n.showCSSorJS:hover {\n  cursor: pointer;\n  color: blue;\n}\n\n.editorsLayout {       \n    float: left;\n    display: block;\n}\n\n.editor {\n    position:relative;\n    left:10px;        \n    float: left;\n    margin-left: 20px;\n    display: block;\n}\n.top-level {\n    margin-left: 2px;\n    height: inherit;\n}\n\n.link2Btn {\n   color: white!important;\n   decoration: none;\n   text-decoration: none!important;\n   margin: 0!important;\n   margin-left: 10px!important;\n}\n\n.dependentsPane {\n    width: 18%;\n    position:relative;\n    float: left;\n    left: 3%;\n    top: 100px;\n}\n\n.searchPane {\n    width:19%;\n    position: relative;\n    height: 100%;\n    overflow-y: auto;\n    overflow-x: hidden;\n    float: left;\n    left: 0;\n    top: 0;\n}\n\n.content {\n    position: relative;\n    float: left;\n    padding-left: 2px;\n    width: 100%;    \n}\n\n.searchResults {\n    height: 70vh;\n    overflow-y: auto;\n    overflow-x: hidden;\n    padding: 10px;\n}\n\n.searchItem {\n    width: 75%;\n    height:30px;\n    background-color:white;\n    color: rgb(38,164,156); \n    padding-left:10px;\n    padding-top:4px;\n    border-bottom: 1px solid grey;    \n}\n\n.searchItem:hover {\n    cursor: pointer;\n    background-color: rgb(38,164,156);\n    color: rgb(210, 230, 209);\n    border: 1px solid white;\n    font-weight: 400;\n}\n\n.operationalButtons {\n    margin-right: 10px;\n}\n\n.dependentsHeader {\n    color: #26a69a;\n    text-decoration: underline;\n    font-size: large;\n    margin-bottom: 10px;\n}\n\n.dependentItem {\n    margin-left: 15px;\n    width:50%;\n    text-align:left;\n    font-style: italic;\n    margin-top: 10px;\n    font-size: smaller;\n}\n\n.dependentItem:hover {\n    cursor:pointer;\n    width:50%;\n    text-align:left;\n    margin-left: 15px;    \n    margin-top: 10px;\n    color:white;\n    font-size: small;\n    background-color: #26a69a;\n}\n\n.searchScopeHeader {\n    font-style: italic;\n    color: black;\n}\n\n.editor-toolkit {\n    z-index:99999;\n    position:relative;\n    float: left;\n    left: 0;\n    width: 70px;\n    border: 1px solid green;\n    border-top:  1px solid green;\n    border-right:  1px solid green;\n    border-left: 1px solid green;\n    height: 20px;\n    text-align: center;\n    bottom: 5px;\n    color: #45215f;\n    font-size: small;\n    font-weight: 800;\n    background-color: #fbfbfb;\n}\n\n.editor-toolkit:hover {\n    cursor: pointer;\n    background-color: #eae3e3;\n}\n\n.previewPane {\n    position: fixed;\n    top: 10%;\n    left: 10%;\n    background-color: white;\n    z-index: 9999;\n    margin-top: 5px;\n    border: 1px solid #848484;\n    padding: 5px;\n    width: 80%;\n    height: 80%;\n    overflow: scroll;\n}\n\n.screenOverlay {\n  position: fixed;\n  background-color: #000000;\n  opacity: 0.5;\n  z-index: 9999;\n  top: 0px;\n  left: 0px;\n  height: 2000px;\n  width: 2000px;\n}\n\n.propertiesPane {\n  position:relative;\n  clear:both;\n  float:left;\n  left: 0px;\n  background-color: whitesmoke;\n  width:20%;\n  height: 250px;\n  margin-top: 1px;\n  border: 1px solid lightgray;\n}\n\n.footerPane {\n  position:relative;\n  height: 25%;\n  float:left;\n  margin-left: 2px; \n  padding-left: 2px;\n  width: 100%;\n  min-height: 25%;\n  background-color: whitesmoke;\n  overflow-x: hidden;\n  overflow-y: auto;\n  z-index: 100;\n}\n\n.sr-new-file-menu{\n  padding: 15px;\n}\n.sr-new-file{\n  font-weight: 600;\n    padding-left: 50px;\n    position: absolute;\n    padding-top: 9px;\n}\n\n/* .footerTabs {\n  height: 30px;\n  background-color: #dcdada;\n} */\n\n/* .footerTab {\n  width: max-content;\n  background-color: #f5f5f5;\n  min-width: 10%;\n  margin-left: 3px;\n  float: left;\n  position: relative;\n  top: 7px;\n  border-left: 1px solid gray;\n  text-align: center;\n  border-top: 1px solid gray;\n  border-right: 1px solid gray;\n  height: 22px;\n  } */\n\n.bx--tabs.footerTabs {\n    position: sticky;\n    top: 0;\n    z-index: 100;\n    background-color: #f3f3f3;\n}\n\n.sr-editorial-space{\n    width:81%;\n    float: left;\n    height: 95vh;\n    overflow: hidden;\n}\n\n.footerContents {\n  overflow:visible;\n  scroll-behavior:  initial;\n  margin-top:1%;\n}\n\n.footerTab:hover {\n    cursor: pointer;    \n    color: white;\n}\n\n.contentTabs {\n    -ms-overflow-style: none;  /* Internet Explorer 10+ */\n    scrollbar-width: none;  /* Firefox */\n}\n.contentTabs::-webkit-scrollbar { \n    display: none;  /* Safari and Chrome */\n}\n\n.contentTabs {\n    min-height: 27px;\n    background-color: #c3c3c3;\n    width: 100%;\n    display: inline-flex;\n    margin-bottom: -5px;\n    position: relative;\n    z-index: 9;\n    height: 30px;\n    overflow-x: scroll;\n}\n\n.contentTab {\n  font-size: smaller;\n  color: black;\n  position: relative;\n  float: left;\n  display: inline-block;\n  margin-top: 3px;\n  margin-left: 5px;\n  background-color: #e4e4e4;\n  padding: 3px;\n  width: auto;\n  min-width: 80px;\n  text-align: center;\n  height: auto;\n}\n\n.contentTabActive {\n  font-size: smaller;\n  color: black;\n  cursor: crosshair;\n  position: relative;\n  display: block;\n  float: left;\n  margin-top: 4px;\n  margin-left: 5px;\n  background-color: white;\n  padding: 3px;\n  width: max-content;\n  min-width: 80px;\n  text-align: center;\n  height: 23px;\n  border-bottom: 2px solid #ff4f6b;\n}\n\n.contentTab:hover, .contentTabActive:hover {\n  background-color: white;\n  cursor: default;\n}\n\n.showHidePreview {\n    float: left;\n    color: white;\n    padding-left: 10px;\n    padding-right: 10px;\n    background-color: red;\n}\n\n.closeTab:hover {\n  cursor: pointer;\n  background-color: #dadada;\n}\n\nsvg.closeTab {\n    margin-top: 3px;\n    height: 23px;\n}\n\n.contentTabItems {\n    display: inline-flex;\n}\n.caret{\n    position: absolute;\n    right: 0;\n    top: 20px;\n}\n.sr-carb-sele{\n  height: 42px;\n  margin-bottom: 5px;\n}\n\n.sr-carb-items-search{\n  height: 42px;\n  width: 98%; \n  margin-bottom: 5px;\n}\n.searchPane .bx--text-input__field-wrapper{\n  width: 98%;\n  margin-bottom: 5px;\n}\n.searchPane .bx--form-item{\n  margin-top: 5px\n}\n.searchPane .bx--btn--primary{\n  margin-top: 5px;\n}\n\n.bx--side-nav {\n    position: relative !important;\n}\n.bx--side-nav li {\n    list-style-type: none;\n}\n.bx--side-nav__navigation {\n    z-index: 10 !important;\n}\n\n.monaco-editor, .monaco-editor-background, .monaco-editor .inputarea.ime-input { background-color: #1e1e1e; }\n.monaco-editor, .monaco-editor .inputarea.ime-input { color: #d4d4d4; }\n.monaco-editor .margin { background-color: #1e1e1e; }\n.monaco-editor .rangeHighlight { background-color: rgba(255, 255, 255, 0.04); }\n.vs-whitespace { color: rgba(227, 228, 226, 0.16) !important; }\n.monaco-editor .line-numbers { color: #5a5a5a; }\n.monaco-editor .view-overlays .current-line { border: 2px solid #282828; }\n.monaco-editor .margin-view-overlays .current-line-margin { border: 2px solid #282828; }\n.monaco-editor .lines-content .cigr { background-color: #404040; }\n.monaco-editor .view-ruler { background-color: #5a5a5a; }\n.monaco-editor .cursor { background-color: #aeafad; border-color: #aeafad; color: #515052; }\n.monaco-editor .scroll-decoration { box-shadow: #000000 0 6px 6px -6px inset; }\n.monaco-editor .focused .selected-text { background-color: #264f78; }\n.monaco-editor .selected-text { background-color: #3a3d41; }\n.monaco-editor .minimap-slider, .monaco-editor .minimap-slider .minimap-slider-horizontal { background: rgba(121, 121, 121, 0.2); }\n.monaco-editor .minimap-slider:hover, .monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: rgba(100, 100, 100, 0.35); }\n.monaco-editor .minimap-slider.active, .monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: rgba(191, 191, 191, 0.2); }\n.monaco-editor .minimap-shadow-visible { box-shadow: #000000 -6px 0 6px -6px inset; }\n.monaco-editor .redsquiggly { background: url(\"data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20height%3D'3'%20width%3D'6'%3E%3Cg%20fill%3D'%23ff0000'%3E%3Cpolygon%20points%3D'5.5%2C0%202.5%2C3%201.1%2C3%204.1%2C0'%2F%3E%3Cpolygon%20points%3D'4%2C0%206%2C2%206%2C0.6%205.4%2C0'%2F%3E%3Cpolygon%20points%3D'0%2C2%201%2C3%202.4%2C3%200%2C0.6'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\") repeat-x bottom left; }\n.monaco-editor .greensquiggly { background: url(\"data:image/svg+xml;utf8,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20height%3D'3'%20width%3D'6'%3E%3Cg%20fill%3D'%23008000'%3E%3Cpolygon%20points%3D'5.5%2C0%202.5%2C3%201.1%2C3%204.1%2C0'%2F%3E%3Cpolygon%20points%3D'4%2C0%206%2C2%206%2C0.6%205.4%2C0'%2F%3E%3Cpolygon%20points%3D'0%2C2%201%2C3%202.4%2C3%200%2C0.6'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\") repeat-x bottom left; }\n.monaco-editor .codelens-decoration { color: #999999; }\n.monaco-editor .codelens-decoration > a:hover { color: #4e94ce !important; }\n.monaco-diff-editor .diff-review-line-number { color: #5a5a5a; }\n.monaco-diff-editor .diff-review-shadow { box-shadow: #000000 0 -6px 6px -6px inset; }\n.monaco-editor .line-insert, .monaco-editor .char-insert { background-color: rgba(155, 185, 85, 0.2); }\n.monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: rgba(155, 185, 85, 0.2); }\n.monaco-editor .inline-added-margin-view-zone { background-color: rgba(155, 185, 85, 0.2); }\n.monaco-editor .line-delete, .monaco-editor .char-delete { background-color: rgba(255, 0, 0, 0.2); }\n.monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: rgba(255, 0, 0, 0.2); }\n.monaco-editor .inline-deleted-margin-view-zone { background-color: rgba(255, 0, 0, 0.2); }\n.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px #000000; }\n.monaco-editor .monaco-editor-overlaymessage .anchor { border-top-color: #007acc; }\n.monaco-editor .monaco-editor-overlaymessage .message { border: 1px solid #007acc; }\n.monaco-editor .monaco-editor-overlaymessage .message { background-color: #063b49; }\n.monaco-editor .bracket-match { background-color: rgba(0, 100, 0, 0.1); }\n.monaco-editor .bracket-match { border: 1px solid #888888; }\n.monaco-editor .findOptionsWidget { background-color: #2d2d30; }\n.monaco-editor .findOptionsWidget { box-shadow: 0 2px 8px #000000; }\n.monaco-editor .findMatch { background-color: rgba(234, 92, 0, 0.33); }\n.monaco-editor .currentFindMatch { background-color: #515c6a; }\n.monaco-editor .findScope { background-color: rgba(58, 61, 65, 0.4); }\n.monaco-editor .find-widget { background-color: #2d2d30; }\n.monaco-editor .find-widget { box-shadow: 0 2px 8px #000000; }\n.monaco-editor .find-widget.no-results .matchesCount { color: #f48771; }\n.monaco-editor .reference-zone-widget .ref-tree .referenceMatch { background-color: rgba(234, 92, 0, 0.3); }\n.monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: rgba(255, 143, 0, 0.6); }\n.monaco-editor .reference-zone-widget .ref-tree { background-color: #252526; }\n.monaco-editor .reference-zone-widget .ref-tree { color: #bbbbbb; }\n.monaco-editor .reference-zone-widget .ref-tree .reference-file { color: #ffffff; }\n.monaco-editor .reference-zone-widget .ref-tree .monaco-tree.focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { background-color: rgba(51, 153, 255, 0.2); }\n.monaco-editor .reference-zone-widget .ref-tree .monaco-tree.focused .monaco-tree-rows > .monaco-tree-row.selected:not(.highlighted) { color: #ffffff !important; }\n.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {\tbackground-color: #001f33;}\n.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {\tbackground-color: #001f33;}\n.monaco-editor .goto-definition-link { color: #4e94ce !important; }\n.monaco-editor .hoverHighlight { background-color: rgba(38, 79, 120, 0.25); }\n.monaco-editor .monaco-editor-hover { background-color: #2d2d30; }\n.monaco-editor .monaco-editor-hover { border: 1px solid #454545; }\n.monaco-editor .monaco-editor-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid rgba(69, 69, 69, 0.5); }\n.monaco-editor .monaco-editor-hover a { color: #4080d0; }\n.monaco-editor .monaco-editor-hover code { background-color: rgba(10, 10, 10, 0.4); }\n.monaco-editor.vs .valueSetReplacement { outline: solid 2px #888888; }\n.monaco-editor .detected-link-active { color: #4e94ce !important; }\n.monaco-editor .parameter-hints-widget { border: 1px solid #454545; }\n.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid rgba(69, 69, 69, 0.5); }\n.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid rgba(69, 69, 69, 0.5); }\n.monaco-editor .parameter-hints-widget { background-color: #2d2d30; }\n.monaco-editor .suggest-widget:not(.frozen) .monaco-highlighted-label .highlight { color: #0097fb; }\n.monaco-editor .suggest-widget { color: #d4d4d4; }\n.monaco-editor .accessibilityHelpWidget { background-color: #2d2d30; }\n.monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px #000000; }\n.monaco-editor .focused .selectionHighlight { background-color: rgba(173, 214, 255, 0.15); }\n.monaco-editor .selectionHighlight { background-color: rgba(173, 214, 255, 0.07); }\n.monaco-editor .wordHighlight { background-color: rgba(87, 87, 87, 0.72); }\n.monaco-editor .wordHighlightStrong { background-color: rgba(0, 73, 114, 0.72); }\n.monaco-editor .tokens-inspect-widget { border: 1px solid #454545; }\n.monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: #454545; }\n.monaco-editor .tokens-inspect-widget { background-color: #2d2d30; }\n\n.mtk1 { color: #d4d4d4; }\n.mtk2 { color: #1e1e1e; }\n.mtk3 { color: #cc6666; }\n.mtk4 { color: #9cdcfe; }\n.mtk5 { color: #ce9178; }\n.mtk6 { color: #b5cea8; }\n.mtk7 { color: #608b4e; }\n.mtk8 { color: #569cd6; }\n.mtk9 { color: #dcdcdc; }\n.mtk10 { color: #808080; }\n.mtk11 { color: #f44747; }\n.mtk12 { color: #c586c0; }\n.mtk13 { color: #a79873; }\n.mtk14 { color: #dd6a6f; }\n.mtk15 { color: #5bb498; }\n.mtk16 { color: #909090; }\n.mtk17 { color: #778899; }\n.mtk18 { color: #ff00ff; }\n.mtk19 { color: #b46695; }\n.mtk20 { color: #ff0000; }\n.mtk21 { color: #4f76ac; }\n.mtk22 { color: #3dc9b0; }\n.mtk23 { color: #74b0df; }\n.mtk24 { color: #4864aa; }\n.mtki { font-style: italic; }\n.mtkb { font-weight: bold; }\n.mtku { text-decoration: underline; }\n\n",SrsCheckbox:"/* add css styles to the component */\n.srs-prem-container{\n    width: 98%;\n    padding: 1%;\n }\n\n",SrsChart:".highcharts-figure, .highcharts-data-table table {\n  min-width: 360px; \n  max-width: 800px;\n  margin: 1em auto;\n}\n\n.highcharts-data-table table {\n\tfont-family: Verdana, sans-serif;\n\tborder-collapse: collapse;\n\tborder: 1px solid #EBEBEB;\n\tmargin: 10px auto;\n\ttext-align: center;\n\twidth: 100%;\n\tmax-width: 500px;\n}\n.highcharts-data-table caption {\n  padding: 1em 0;\n  font-size: 1.2em;\n  color: #555;\n}\n.highcharts-data-table th {\n\tfont-weight: 600;\n  padding: 0.5em;\n}\n.highcharts-data-table td, .highcharts-data-table th, .highcharts-data-table caption {\n  padding: 0.5em;\n}\n.highcharts-data-table thead tr, .highcharts-data-table tr:nth-child(even) {\n  background: #f8f8f8;\n}\n.highcharts-data-table tr:hover {\n  background: #f1f7ff;\n}\n.highcharts-credits {\n    display: none;\n}\n\n",SrsCarousel:".image-carousel {\n    position: relative;\n    border-radius: 4px;\n    border: 1px solid #e9e9e9;\n    margin: 0 auto; \n    box-sizing: border-box;\n}\n\n\n.image-carousel .content {\n    position: relative;\n    top: 0;\n    left: 0;\n    width: 100%;\n    background-size: 100% 100%;\n    box-sizing: border-box;\n}\n\n\n.image-carousel .content > a {\n    position: absolute;\n    display: block;\n    padding: 5px;\n    font-size: 28px;\n    line-height: 28px;\n    background-color: #000;\n    border-radius: 100px;\n    text-align: center;\n    color: #ddd;\n    opacity: 0.3;\n    top: calc(50% - 10px);\n    cursor: pointer;\n    border: 1px solid #454545;\n}\n\n.image-carousel .content > a:hover {\n    opacity: 0.8;\n    transition: opacity 0.5s linear;\n}\n\n.image-carousel .content .leftToggleButton {\n    left: 10px;\n}\n\n.image-carousel .content .rightToggleButton {\n    right: 10px;\n}\n\n\n.image-carousel .content .bottomToggleUl {\n    position: absolute;\n    padding: 0;\n    margin: 0;\n    bottom: 10px;\n    color: #fff;\n    margin-left: 50%;\n    transform: translateX(-50%);\n    cursor: pointer;\n    \n}\n\n.image-carousel .content .bottomToggleUl > li {\n    float: left;\n    list-style: none;\n    font-size: 16px;\n    line-height: 16px;\n}\n\n.image-carousel .content .bottomToggleUl > li > a {\n    color: #696969;\n}\n\n.image-carousel .content .bottomToggleUl > li > a:hover {\n    color: #fff;\n}\n\n.image-carousel .content .bottomToggleUl .selected {\n    color: #fff;\n}\n\n\n.image-carousel .menuBar {\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    box-sizing: border-box;\n    overflow-x: auto;\n    overflow-y: hidden;\n    white-space: nowrap;\n}\n\n.image-carousel .menuBar .item {\n    background-size: 100% 100%;\n    background-position: center center;\n    height: 100%;\n    box-sizing: border-box;\n    display: inline-block;\n}\n\n.image-carousel .menuBar .item:hover {\n    background-size: 200% 200%;\n    transition: background-size 1s ease-out 0s;\n}\n\n\n.image-carousel .menuBar .selected {\n    border: 2px solid #716862;\n}\n\n.container, .image-carousel, .content {\n    height: 100% !important;\n    width: 100% !important;\n}\n\n",SrsCardItem:"/* add css styles to the component */\n.card-container {\n    display : flex;\n    flex-wrap: wrap;\n}\n\n",SrsCardContainer:'.cardItem {\n    display : "flex",\n    flex-direction : "row"\n}\n\n',SrsButton:"/* add css styles to the component */\n.srs-prem-container{\n   width: 98%;\n   padding: 1%;\n   text-align: center;\n}\n\n",SrsBoard:'.smooth-dnd-container{\n    position:relative;\n    min-height:30px;\n    min-width:30px;\n}\n.smooth-dnd-container.horizontal{    \n    display: block;    \n}\n\n.smooth-dnd-container.vertical {\n    minHeight: "6rem"\n}\n\n.smooth-dnd-container.horizontal > .smooth-dnd-stretcher-element{\n    display:inline-block;\n}\n.smooth-dnd-container.horizontal > .smooth-dnd-draggable-wrapper{\n    height:100%;\n    display:table-cell;\n    vertical-align:top;\n}\n.smooth-dnd-container.vertical > .smooth-dnd-draggable-wrapper{\n    overflow:hidden;\n    display:block;\n}\n.smooth-dnd-draggable-wrapper{\n    box-sizing:border-box;\n}\n.smooth-dnd-draggable-wrapper.horizontal{\n    height:100%;\n    display:table-cell;\n    vertical-align:top;\n}\n.smooth-dnd-draggable-wrapper.vertical{\n    overflow:hidden;\n    display:block;\n}\n.smooth-dnd-draggable-wrapper.animated{\n    transition:transform ease;\n}\n.smooth-dnd-ghost{\n    box-sizing:border-box;\n}\n.smooth-dnd-ghost.animated{\n    transition:all ease-in-out;\n}\n.smooth-dnd-ghost *{\n    pointer-events:none;\n}\n.smooth-dnd-disable-touch-action *{\n    touch-action:none;\n    -ms-touch-action:none;\n}\n.smooth-dnd-no-user-select{\n    -webkit-touch-callout:none;\n    -webkit-user-select:none;\n    -khtml-user-select:none;\n    -moz-user-select:none;\n    -ms-user-select:none;\n    user-select:none;\n}\n.smooth-dnd-drop-preview-inner-class{\n    flex:1;\n}\n.smooth-dnd-container.horizontal > .smooth-dnd-drop-preview-constant-class{\n    height:100%;\n    overflow:hidden;\n    display:table-cell;\n    vertical-align:top;\n}\n.smooth-dnd-container.vertical > .smooth-dnd-drop-preview-constant-class{\n    overflow:hidden;\n    display:block;\n    width:100%;\n}\n.smooth-dnd-drop-preview-flex-container-class{\n    width:100%;\n    height:100%;\n    display:flex;\n    justify-content:stretch;\n    align-items:stretch;\n}\n.smooth-dnd-drop-preview-default-class{\n    background-color:rgba(150, 150, 150, 0.1);\n    border:1px solid #ccc;\n}\n\n.Backlog .smooth-dnd-container.horizontal > .smooth-dnd-draggable-wrapper {  \n  position: sticky;\n  background-color: #7db886;\n  z-index: 999;\n  left: 0px;\n}\n\n.Backlog .smooth-dnd-container.horizontal > .smooth-dnd-draggable-wrapper ~ .smooth-dnd-draggable-wrapper {\n  position: inherit;\n  background-color: unset;\n  z-index: unset;\n}\n\n.react-trello-board {\n    height: inherit !important;\n    overflow-y: hidden !important;\n}\n\n.react-trello-board > div, .smooth-dnd-container.horizontal {\n    height: inherit;\n}\n\n',SrsArray:"/* add css styles to the component */\n\n",SlideSelectionPanel:".noPagesFound {\n    padding: 10px;\n    margin-top: 10px;\n    float: left;\n    border-radius: 3%;\n    background-color: #286540;\n    color: white;\n}\n\n.bx--side-nav {\n    position: relative !important;\n}\n\n.bx--side-nav__navigation {\n    z-index: 10 !important;\n}\n\n",SideNavLink:'.sideNavLink {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    color: #565656;\n    font-size: 0.875rem;\n    letter-spacing: 0.1px;\n    line-height: 1.25rem;\n    user-select: none;\n    padding: 1px 7px 2px;    \n    padding-top: 4px;\n    padding-bottom: 4px;\n    text-align: left;\n    color: white !important;\n    font-size: small !important;\n    font-family: "IBM Plex Sans" !important;\n}\n\n.sideNavLink:focus {\n    outline-offset: -2px;\n    outline: rgb(0, 98, 255) solid 2px;\n}\n.sideNavLink:hover {\n    background-color: blue;\n    color: white;\n}\n.sideNavLink[aria-haspopup="true"] {\n    box-sizing: border-box;\n    vertical-align: baseline;\n    cursor: pointer;\n    width: 100%;\n    font-size: 0.875rem;\n    line-height: 1.125rem;\n    letter-spacing: 0.16px;\n    outline-offset: -2px;\n    display: flex;\n    align-items: center;\n    color: rgb(86, 86, 86);\n    height: 2rem;\n    user-select: none;\n    margin: 0px;\n    background: none;\n    border-width: 0px;\n    border-style: initial;\n    border-color: initial;\n    border-image: initial;\n    transition: color 110ms ease 0s, background-color 110ms ease 0s, outline 110ms ease 0s;\n}\n\n',ShowTableMappingDialog:"/* add css styles to the component */\n.rel-options{\n    margin: auto;\n    width: 50%;\n    padding: 5%;\n}\n.model-temp{\n    padding: 2% 0 2% 0;\n}\nh4{\n    font-weight:600;\n    padding-bottom:1%;\n}\n.model-create{\n    display: inline-flex;\n    padding-bottom: 5px;\n}\n.bx--text-input__field-wrapper{\n    padding-right:5px;\n}\n\n.currentPage {\n    color: blue;\n}\n.model-update-btns{\n    width: 100%;\n    margin-top: 20px;\n    left: 70%;\n    position: absolute;\n}\n\n.FieldList {\n    max-height: 10rem;\n    overflow: scroll;\n}\n\n.choiceStyle:hover {\n    background-color: #7ebb87;\n    cursor: pointer;\n}\n\n.choiceStyle {    \n    width: 48%;\n    padding: 5px;\n    float: left;\n}\n\n.headerLabel {\n    font-size: x-large;\n    color: black;\n    width: 30rem;\n}\n\n.bx--tooltip__label {\n    font-size: large; \n    color: #161616;\n    border: 1px solid #7cb784;\n    border-radius: 5%;\n    padding: 5px;\n    font-weight: bold;\n}\n\n",ShowTabMappingDialog:"/* add css styles to the component */\n.rel-options{\n    margin: auto;\n    width: 50%;\n    padding: 5%;\n}\n.field-temp{\n    padding: 2% 0 2% 0;\n}\nh4{\n    font-weight:600;\n    padding-bottom:1%;\n}\n.field-create{\n    display: inline-flex;\n    padding-bottom: 5px;\n}\n.bx--text-input__field-wrapper{\n    padding-right:5px;\n}\n\n.currentPage {\n    color: blue;\n}\n.model-update-btns{\n    bottom: 10px;\n    position: absolute;\n    right: 8%;\n}\n\n.bx--tag--filter > svg {\n    fill: white !important;\n}\n\n.bx--tag--filter {\n    color: #ffffff;\n    background-color: #3b5940;\n}\n\n.bx--label {\n    text-align: left;\n}\n\n",ShowFieldMappingDialog:"/* add css styles to the component */\n.rel-options{\n    margin: auto;\n    width: 50%;\n    padding: 5%;\n}\n.field-temp{\n    padding: 2% 0 2% 0;\n}\nh4{\n    font-weight:600;\n    padding-bottom:1%;\n}\n.field-create{\n    display: inline-flex;\n    padding-bottom: 5px;\n}\n.bx--text-input__field-wrapper{\n    padding-right:5px;\n}\n\n.currentPage {\n    color: blue;\n}\n\n.FieldList {\n    max-height: 20rem;\n    overflow: scroll;\n}\n\n",RenderComponent:"/* add css styles to the component */\n\n",PreviewComponent:".cancelPreview:hover {\n  border: 1px solid #4f7955;\n  cursor: pointer;\n}\n\n",PlanningBoardLaneHeader:"/* add css styles to the component */\n\n",PlanningBoard:'.smooth-dnd-container{\n    position:relative;\n    min-height:30px;\n    min-width:30px;\n}\n\n.smooth-dnd-container.vertical {\n    minHeight: "6rem";    \n    overflow-y: scroll;\n    height: inherit;    \n}\n\n.smooth-dnd-container.horizontal > .smooth-dnd-stretcher-element{\n    display:inline-block;\n}\n\n.smooth-dnd-container.vertical > .smooth-dnd-draggable-wrapper{\n    overflow:hidden;\n    display:block;\n}\n\n.smooth-dnd-draggable-wrapper.vertical{\n    overflow:hidden;\n    display:block;\n}\n\n.smooth-dnd-draggable-wrapper.animated{\n    transition:transform ease;\n}\n.smooth-dnd-ghost{\n    box-sizing:border-box;\n}\n.smooth-dnd-ghost.animated{\n    transition:all ease-in-out;\n}\n.smooth-dnd-ghost *{\n    pointer-events:none;\n}\n.smooth-dnd-disable-touch-action *{\n    touch-action:none;\n    -ms-touch-action:none;\n}\n.smooth-dnd-no-user-select{\n    -webkit-touch-callout:none;\n    -webkit-user-select:none;\n    -khtml-user-select:none;\n    -moz-user-select:none;\n    -ms-user-select:none;\n    user-select:none;\n}\n.smooth-dnd-drop-preview-inner-class{\n    flex:1;\n}\n.smooth-dnd-container.horizontal > .smooth-dnd-drop-preview-constant-class{\n    height:100%;\n    overflow:hidden;\n    display:table-cell;\n    vertical-align:top;\n}\n.smooth-dnd-container.vertical > .smooth-dnd-drop-preview-constant-class{\n    overflow:hidden;\n    display:block;\n    width:100%;\n}\n.smooth-dnd-drop-preview-flex-container-class{\n    width:100%;\n    height:100%;\n    display:flex;\n    justify-content:stretch;\n    align-items:stretch;\n}\n.smooth-dnd-drop-preview-default-class{\n    background-color:rgba(150, 150, 150, 0.1);\n    border:1px solid #ccc;\n}\n\n.Planboard .smooth-dnd-container.horizontal {\n    display: block;\n    height: inherit !important;\n    overflow-y: scroll;\n    overflow-x: hidden;\n}\n\n.Planboard .smooth-dnd-container.horizontal > .react-trello-lane {    \n  z-index: 999;\n  position: fixed;  \n  height: fit-content;\n  max-height: inherit;\n  display: flex;\n  width: 18rem !important;\n  min-height: 10rem;\n  background-color: white !important;\n  border: 1px solid grey;\n  overflow-y: hidden;\n}\n\n.Planboard .smooth-dnd-container.horizontal > .react-trello-lane ~ .react-trello-lane {\n  position: inherit;\n  z-index: unset;\n  width: inherit !important;  \n  display: block;\n  margin-left: 20rem;  \n  margin-top: 2px;\n  margin-bottom: 2px;\n  padding-top: 0px;\n  padding-bottom: 0px;\n  height: 3rem !important;\n  min-height: inherit !important;\n  overflow-y: unset;\n}\n\n.Planboard .smooth-dnd-container.horizontal > .react-trello-lane > div:nth-child(2) {     \n    position: relative;\n    height: inherit;\n    margin-top: unset;\n    width: inherit;\n}\n\n.Planboard .smooth-dnd-container.horizontal > .react-trello-lane ~ .react-trello-lane> div:nth-child(2) { \n    position: absolute;\n    height: 3rem;\n    margin-top: -3rem;\n    width: 96%;\n}\n\n.react-trello-lane>div {\n    height: inherit;\n}\n\n.react-trello-board, .react-trello-board>div {    \n    height: inherit !important;\n    overflow: hidden !important;       \n}\n\n.react-trello-board>div {\n    width: 100% !important;\n}\n\n.smooth-dnd-stretcher-element.vertical {\n    display: flex;\n    border: 2px dotted green;\n    height: 3rem;\n}\n\n.react-trello-lane header {\n    height: 80%;\n}\n\n',PageRenderer:".showPinnedNav {\n    width: 86%;\n    height: calc(100vh - 3rem);\n    min-height: calc(100vh - 3rem);\n    position: absolute;\n    overflow: hidden;\n    top: 3rem;\n    left: 14%;\n}\n\n.showNav {\n    width: calc(100% - 30px);\n    height: calc(100vh - 3rem );\n    min-height: calc(100vh - 3rem);\n    overflow: hidden;\n    position: absolute;\n    top: 3rem;\n    left: 30px;\n}\n\n",PageDesignerWidget:".sectionheader {\n    display: block;\n    float: left;\n    text-align: left;\n    /* margin-left: 20px; */\n    margin-top: 10px;\n    margin-bottom: 10px;\n    width: 100%;\n    /* color: white; */\n}\n.sr-widget-pane{\n    display: flex;\n    flex-direction: column;\n}\n.srs-palatte-container{\n    margin-top: 10px;\n    flex-direction: row;\n    flex-wrap: wrap;\n    max-height: 70vh;\n    overflow-y: scroll;\n    max-width: 350px;\n    min-width: 260px;\n}\n.srs-palatte-item{\n    height:50px;\n    display:inline-flex;\n    justify-content: space-around;\n    width: 45%;\n    border: 2px solid #AEAEAE;\n    margin: 2px;\n    text-align: center;\n    line-height: 30px;\n    z-index: 10;\n    background: #EDEDED;\n    cursor: pointer;\n}\n.srs-palatte-item .grid-stack-item{\n   width:70%;\n   overflow: hidden;\n}\n.srs-palatte-item .grid-stack-item .grid-stack-item-content{\n    padding-top:8%;\n    height:50px;\n}\n.srs-palatte-item .palatte-icon{\n   width:30%;\n   border-right:1px solid #00000047;\n   padding:5px;\n   position:relative;\n}\n.palatte-horizontal-bar,.palatte-vertical-bar{\n  border-bottom:1px solid black;\n  margin-top:55%;\n}\n.palatte-vertical-bar{\n  transform: rotate(90deg);\n}\n.palatte-text-icon, .palatte-number-icon{\n    font-size: 18px;\n    font-weight: 600;\n}\n.palatte-button-icon{\n    border: 1px solid black;\n    padding: 10%;\n    font-size: 18px;\n    font-weight: 600;\n}\n.palatte-select-icon{\n    position: absolute;\n    top: 0;\n    margin-left: -16px;\n    margin-top: -3px;\n}\n\n",PageDesignerProps:"/* add css styles to the component */\n.sr-prop-body{\n padding: 1%;\n margin-top: 10px;\n height: fit-content;\n overflow-y: auto; \n overflow-x: hidden;\n text-align: left;\n}\n\n.dataLoading {\n    text-align: center;\n    padding: 20px;\n}\n\n.bx--form-item {\n    clear: both;\n}\n\n.bx--label {\n    text-align: left;\n}\n\n.bx--text-input__field-wrapper{\n    width:99%;\n}\n\n.tab-create{\n    display: inline-flex;\n    padding-bottom: 5px;\n}\n.tabs-panel{\n    display: inline-grid;        \n    width: 100%;\n    text-align: left;\n}\n\n.bx--select {\n    display: contents;\n}\n\n",PageDesignerPreview:".topPreviewContainer {\n    display: block;\n    width: 100%;            \n    background-color: white;\n    height: calc(100% + 80px) !important;\n}\n\n.gridPreviewContent {    \n    display: inline-block;\n    width: 100%;\n    min-height: fit-content;\n    height: inherit;\n    overflow: auto;\n}\n\n.showOverlay {\n    background-color: #171616;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    opacity: 0.2;\n    z-index: 10;\n}\n\n.showOverlay2 {\n    background-color: #171616;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    opacity: 0.2;\n    z-index: 10;\n}\n\n.showOverlay-hide {\n    display: none;\n}\n\n.gridPreviewCanvas {\n    display: block;\n    // min-height: 90vh;\n    max-height: fit-content;\n}\n\n.gridPreviewContent > .grid-stack {\n    height: 100% !important;\n}\n\n.grid-stack-item-content {\n    height: inherit !important;\n}\n\n.noWidgetSpacing > .grid-stack-item > .grid-stack-item-content {\n    left: 0px !important;\n    right: 0px !important;\n}\n\n.grid-stack-item-removing {\n    opacity: 0.5;\n}\n\n.savedata {\n    width: 100vw;\n    height: 100px;\n    display: none;\n}\n\n.sidebar {\n    /* background: #3a3f46; */\n    padding-left: 5px;\n    float: left;\n    height: 100vh;\n    /* margin-top: 4px;\n    border-radius: 5px; */\n    overflow: hidden;\n    text-align: center;\n    width: 20%;\n}\n\n\n.sr-nav-tab li {\n    max-width: 100px;\n}\n\n.page-gen-body.bx--text- input__field-wrapper, .sr-prop-body.bx--text- input__field-wrapper{\n    width: 99%;\n}\n.sidebar.grid-stack-item {\n    width: 45%;\n    border: 2px solid #aeaeae;\n    margin: 2px;\n    text-align: center;\n    line-height: 30px;\n    float: left;\n    z-index: 10;\n    background: #ededed;\n    cursor: pointer;\n    display: inline-block;\n}\n\n.sidebar.grid-stack-item.grid-stack-item-content {\n    background: none;\n}\n\n.sidebar.grid-stack-item.grid-stack-item-content:before {\n    width: 33px;\n    height: 150%;\n    display: block;\n    float: left;\n    margin: -3px 5px 0 0;\n    border-right: 1px solid #a0abb9;\n    background-color: #dddddd;\n    content: \"\";\n}\n.sidebar.grid-stack-item.grid-stack-item-content:after {\n    position: absolute;\n    top: 6px;\n    left: 7px;\n    bottom: auto;\n    right: auto;\n    background-position: 0 - 40px;\n    background-image: url(/web_studio/static / src / img / ui / studio_icons@2x.png);\n    background-size: 20px 440px;\n}\n\n.field-img {\n    display: inline-block;\n    float: left;\n    width: 30%;\n    border: 1px solid #c8bdbd;\n}\n\n.field-title {\n    display: inline-block;\n    float: left;\n    width: 70%;\n    font-size: smaller;\n    padding-left: 5px;\n    text-align: left;\n}\n.sr-page-editorial{\n    width: 80%;\n    float: right;\n}\n.content {\n    padding-left: 2px;\n    /* position: relative;\n    float: left;\n    width: 100%; */\n}\n\n.topContainerWithoutPreview{\n    width: 100%;\n}\n\n.gridContent {\n    display: inline-block;\n    width: 100%;    \n}\n\n.gridContent-full {\n    display: inline-block;\n    /* float: left; */\n    /* height: 100vh; */\n    width: 100%;\n    position: relative;\n    /* overflow: hidden; */\n}\n\n.gridCanvas {\n    display: block;\n    /* float: left; */\n    /*background-color: #f4f2f2;*/\n    border: 1px solid grey;\n    min-height: 100vh;\n    max-height: 100vh;\n    overflow: scroll;\n    /* width: 60%; */\n}\n\n.emulator {\n    width: 100%;\n    height: 100%;\n    border: none;\n    will-change: transform;\n}\n\n.dualmode.emulatorContainer {\n    width: 40%;\n    float: right;\n}\n\n.fullscreen.emulatorContainer {\n    width: 0%;\n}\n\n.selectOptions {\n    display: inline-block;\n    float: right;\n    margin-bottom: 10px;\n    position: relative;\n    width: 100%;\n    height: 30px;\n}\n\n.sr-prev-pange{\n    /* overflow-y: scroll;height: 100vh; */\n    overflow: hidden;\n}\n\n/* The device with borders */\n.emulatorFrameContainer {\n    display: inline-block;\n    width: 100%;\n}\n\n.emulatorFrameContainer.tablet {\n    position: relative;\n    width: 550px;\n    height: 650px;\n    --devicewidth: 550px;\n    --deviceheight: 650;\n    border: 16px black solid;\n    border-top-width: 60px;\n    border-bottom-width: 60px;\n    border-radius: 36px;\n    -webkit-transform-origin: 0 0;\n    transform-origin: 0 0;\n    -webkit-transform: scale(.7) translate(-50%);\n    /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n    transform: scale(.7) translate(-50%);\n    /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n}\n\n/* The horizontal line on the top of the device */\n.emulatorFrameContainer.tablet:before {\n    content: '';\n    display: block;\n    width: 60px;\n    height: 5px;\n    position: absolute;\n    top: -30px;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background: #333;\n    border-radius: 10px;\n}\n\n/* The circle on the bottom of the device */\n.emulatorFrameContainer.tablet:after {\n    content: '';\n    display: block;\n    width: 35px;\n    height: 35px;\n    position: absolute;\n    left: 50%;\n    bottom: -65px;\n    transform: translate(-50%, -50%);\n    background: #333;\n    border-radius: 50%;\n}\n\n/* The screen (or content) of the device */\n.emulatorFrameContainer.tablet {\n    top: 1%;\n    left: 50%;\n    background: white;\n    margin: -1px;\n}\n\n.emulatorFrameContainer.smartphone {\n    position: relative;\n    align-content: center;\n    width: 360px;\n    vertical-align: top;\n    float: left;\n    top: 3%;\n    left: 10%;\n    height: 540px;\n    --devicewidth: 360px;\n    --deviceheight: 420px;\n    margin: auto;\n    border: 16px black solid;\n    border-top-width: 60px;\n    border-bottom-width: 60px;\n    border-radius: 36px;\n}\n\n/* The horizontal line on the top of the device */\n.emulatorFrameContainer.smartphone:before {\n    content: '';\n    display: block;\n    width: 60px;\n    height: 5px;\n    position: absolute;\n    top: -30px;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background: #333;\n    border-radius: 10px;\n}\n\n/* The circle on the bottom of the device */\n.emulatorFrameContainer.smartphone:after {\n    content: '';\n    display: block;\n    width: 35px;\n    height: 35px;\n    position: absolute;\n    left: 50%;\n    bottom: -65px;\n    transform: translate(-50%, -50%);\n    background: #333;\n    border-radius: 50%;\n}\n\n.emulatorFrameContainer.laptop {\n    -webkit-transform-origin: 0 0;\n    transform-origin: 0 0;\n    -webkit-transform: scale(.35) translate(-50%);\n    /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n    transform: scale(.35) translate(-50%);\n    /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n    top: 20%;\n    left: 50%;\n    /* float: left; */\n    position: relative;\n    display: inline-block;\n    width: 900px;\n    height: 629px;\n    --devicewidth: 900;\n    --deviceheight: 585px;\n    border-radius: 6px;\n    border-style: solid;\n    border-color: black;\n    border-width: 24px 24px 80px;\n    background-color: black;\n}\n\n/* The keyboard of the laptop */\n.emulatorFrameContainer.laptop:after {\n    content: '';\n    display: block;\n    position: absolute;\n    bottom: -170px;\n    width: 1040px;\n    height: 60px;\n    margin: 80px 0 0 -90px;\n    background: black;\n    border-radius: 6px;\n}\n\n/* The top of the keyboard */\n.emulatorFrameContainer.laptop:before {\n    content: '';\n    display: block;\n    position: absolute;\n    width: 250px;\n    height: 30px;\n    bottom: -110px;\n    left: 50%;\n    -webkit-transform: translate(-50%);\n    transform: translate(-50%);\n    background: #787777;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    z-index: 1;\n}\n.sidebar.nav-tabs a {\n    font-size: x-small;\n    /* color: white; */\n}\n\n.sidebar.nav-tabs a: hover {\n    color: black;\n}\n\n.tabs-icon {\n    background-color: blue;\n}\n\n.sidebar.grid-stack-item.grid-stack-item-content:hover {\n    background: white;\n}\n\n.sectionheader {\n    display: block;\n    float: left;\n    text-align: left;\n    margin-left: 20px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    width: 80%;\n    /* color: white; */\n}\n.fullscreen.topContainer.gridcanvas-actions{\n    position: absolute;\n    z-index: 999;\n    right: 0%;\n}\n\n.dualmode.topContainer.gridcanvas-actions{\n    position: absolute;\n    z-index: 999;\n    right: 32%;\n}\n.gridcanvas-actions-full{\n    position: absolute;\n    z-index: 999;\n    right: 0%;\n}\n.gridcanvas-actions.bx--btn--primary{\n    margin-top: 1px;\n    margin-right: 5px;\n    /* font-weight: 500; */\n    padding: 5px;\n    height: 30px;\n    min-height: 30px;\n}\n\n.gridcanvas-actions.bx--overflow- menu {\n    float: right;\n    background-color: #7dbb86;\n    color: white;\n}\n\n.gridcanvas-actions-full.bx--overflow- menu {\n    /* float: right; */\n    background-color: #7cb985;\n}\n\n.sidebar.widgetContainer {\n    display: none;\n}\n\n.sidebar.draggingWidget {\n    background: #c10848;\n    font-size: xx-small;\n    font-family: fantasy;\n}\n\n.sidebar.draggingWidget:before {\n    content: \"DRAGGING...\";\n    color: white;\n}\n\n.tab-pane {\n    height: 100vh;\n}\n\n.sidebar.widget:hover {\n    border: none;\n}\n\n.gridCanvas.widget:hover {\n    border: 2px dotted blue;\n    margin: 2px;\n}\n\n.pane-body {\n    margin: 5px;\n    background-color: white;\n    overflow-y: auto;\n    min-height: 40vh;\n    border-radius: 5px;\n    padding-top: 10px;\n}\n\n.formFieldInputText {\n    margin-bottom: 10px;\n}\n\n.sr-des-footerPane{\n    position: relative;\n    float: left;\n    /* margin-left: 2px; */\n    padding-left: 2px;\n    width: 100%;\n    min-height: 250px;\n    height: auto;\n    background-color: whitesmoke;\n    overflow: visible;\n    /* border: 1px solid gray; */\n    overflow-y: visible;\n}\n.contentTabs {\n    min-height: 27px;\n    background-color: #c3c3c3;\n    width: 100%;\n    display: inline-block;\n    margin-bottom: 1px;\n    position: relative;\n    z-index: 9;\n    height: auto;\n}\n\n.contentTab {\n    font-size: smaller;\n    color: black;\n    position: relative;\n    float: left;\n    display: inline-block;\n    margin-top: 3px;\n    margin-left: 5px;\n    background-color: #e4e4e4;\n    padding: 3px;\n    width: auto;\n    min-width: 80px;\n    text-align: center;\n    height: auto;\n}\n\n.contentTabActive {\n    font-size: smaller;\n    color: black;\n    cursor: crosshair;\n    position: relative;\n    display: block;\n    float: left;\n    margin-top: 4px;\n    margin-left: 5px;\n    background-color: white;\n    padding: 3px;\n    width: max-content;\n    min-width: 80px;\n    text-align: center;\n    height: 23px;\n    border-bottom: 2px solid #ff4f6b;\n}\n\n.contentTab: hover, .contentTabActive:hover {\n    background-color: white;\n    cursor: default;\n}\n\n.showHidePreview {\n    float: left;\n    color: white;\n    padding-left: 10px;\n    padding-right: 10px;\n    background-color: red;\n}\n\n.closeTab: hover {\n    cursor: pointer;\n    background-color: #dadada;\n}\n\nsvg.closeTab {\n    margin-top: 3px;\n    height: 23px;\n}\n\n.contentTabItems {\n    display: inline-block;\n}\n\n.sr-new-file-menu{\n    text-align: left;\n    padding-left: 10px;\n    padding-top: 10px;\n}\n.sr-new-file{\n    font-weight: 600;\n    padding-left: 50px;\n    position: absolute;\n    padding-top: 9px;\n}\n\n.eidtor-toggle-minimize{\n    position: absolute;\n    z-index: 999;\n    bottom: 0;\n    padding: 3px;\n    right: 33%;\n    cursor: pointer;\n}\n\n.eidtor-toggle-maximize{\n    position: absolute;\n    z-index: 999;\n    padding: 5px;\n    bottom: 0;\n    right: 5px;\n    cursor: pointer;\n}\n.fullscreen.topContainer {\n    width: 100%;\n}\n\n.dualmode.topContainer {\n    width: 60%;\n    float: left;\n}\n\n.tabLabel {\n    width: 100px !important;\n}\n\n.innerTabs {\n    margin-top: 20px !important;\n    margin-left: 20% !important;\n    background-color: #f3f3f3!important;\n    width: 60% !important;\n    margin-bottom: 20px !important;\n}\n\n.widgetactive {\n    border: 2px dotted green;\n}\n\n.pageloader-show {\n    position: absolute;\n    top: 40%;\n    left:46%;\n}\n\n.pageloader-hide {\n    display: none !important;\n}\n\n.bx--inline-loading__checkmark-container {\n    display: none !important;\n}\n\n.bx--inline-loading__text {\n    background: white;\n    z-index: 11;\n    margin-left: -3px;\n    padding: 2px;\n    padding-right: 5px;\n    padding-left: 5px;\n    border-bottom-right-radius: 10%;\n    border-top-right-radius: 10%;\n}\n\n.bx--inline-loading__animation {\n    background-color: white;\n    border-radius: 50%;\n    z-index: 222;\n}\n\n::-webkit-scrollbar {\n    width: 2px;\n    height: 2px;\n}\n \n/* Track */\n::-webkit-scrollbar-track {\n    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); \n    -webkit-border-radius: 10px;\n    border-radius: 10px;\n}\n \n/* Handle */\n::-webkit-scrollbar-thumb {\n    -webkit-border-radius: 10px;\n    border-radius: 10px;\n    background: rgba(255,0,0,0.8); \n    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); \n}\n::-webkit-scrollbar-thumb:window-inactive {\n\tbackground: rgba(255,0,0,0.4); \n}\n\n",PageDesignerPageActions:"/* add css styles to the component */\n\n",PageDesignerGeneral:".page-gen-body {  \n    display: block;    \n    padding: 20px;\n    background-color: white;\n    height: fit-content;\n    overflow: auto;\n}\n.field-mapper{\n    display: flex;\n    width: 55%;\n}\n.mapper-adv{\n    margin-top: 50px;\n}\n.formFieldInputText {\n    width: 98%;\n    clear: both;\n}\n\n.pageType. {\n    text-align: left;\n}\n\n.pageType > .bx--label {\n    display: flex;    \n}\n\n.bx--select {\n    display: contents;\n}\n\n.bx--form__helper-text {\n    text-align: left;\n}\n\n",PageDesignerActions:".previewPane {\n    position: fixed;\n    top: 10%;\n    left: 10%;\n    background-color: white;\n    z-index: 9999;\n    margin-top: 5px;\n    border: 1px solid #848484;\n    padding: 5px;\n    width: 80%;\n    height: 80%;\n    overflow: scroll;\n}\n\n.screenOverlay {\n  position: fixed;\n  background-color: #000000;\n  opacity: 0.5;\n  z-index: 9999;\n  top: 0px;\n  left: 0px;\n  height: 2000px;\n  width: 2000px;\n}\n\n.cancelPreview {\n  position: fixed;\n  z-index: 99999;\n  background-color: white;\n  top: 8%;\n  float: right;\n  border: 1px solid black;\n  border-radius: 50%;\n  right: 9%;\n  color: black;\n}\n\n.cancelPreview:hover {\n  border: 1px solid #4f7955;\n  cursor: pointer;\n}\n\n",PageDesigner:"[draggable=true] {\n  cursor: move;\n}\n\n.gridCanvas {\n    background-image: linear-gradient(#e9efe8 1px, transparent 1px), linear-gradient(90deg, #def9de 1px, transparent 0px), linear-gradient(rgba(255,255,255,.3) 5px, transparent 100px), linear-gradient(90deg, rgba(255,255,255,.3) 5px, transparent 100px);\n    background-size: 50px 10px, calc(1.041% + 0px) 50px, 10px 10px, 10px 10px;\n}\n\n.sidebar {\n  /* background: #3a3f46; */\n  padding-left: 5px;\n  float: left;\n  height: 93vh;\n  border-right: 1px solid #c3c3c3;\n  /* margin-top: 4px;\n  border-radius: 5px; */\n  overflow-y: hidden;\n  overflow-x: hidden;\n  text-align: center;\n  width: 22%;\n\n  overflow: auto;\n  resize: horizontal;\n  max-width: 35%;\n  min-width: 2%;\n}\n\n.bx--accordion__heading {   \n    top: 0;\n    z-index: 100;\n    background-color: #f3f3f3;\n    border: 1px solid grey;\n}\n\n.grid-stack-item-content {\n    height: inherit !important;\n}\n\n.grid-stack-item-content {\n  color: #2c3e50;\n  text-align: center;\n}\n\n.gridCanvas>.grid-stack-item {\n    background-color: #f8f8f8;\n}\n\n.gridCanvas>.grid-stack-item.ui-draggable-dragging {\n    background-color: #fbfff6;\n}\n\n.gridCanvas>.grid-stack-item>.grid-stack-item-content {\n    border: 1px solid rgb(195, 195, 195);\n}\n\n.grid-stack-item-removing {\n  opacity: 0.5;\n}\n\n.grid-stack-placeholder {\n    background-color: green;\n}\n\n.savedata {\n  width: 100vw;\n  height: 100px;\n  display: none;\n}\n\n.sr-nav-tab li {\n  max-width: 100px;\n}\n\n.page-gen-body .bx--text-input__field-wrapper, .sr-prop-body .bx--text-input__field-wrapper{\n  width: 99%;\n}\n\n.sidebar .grid-stack-item .grid-stack-item-content {\n  background: none;\n}\n\n.sr-page-topCotainer {\n    flex-flow: row;\n    flex: 1 1 auto;\n}\n\n.field-img {\n    display: inline-block;\n    float: left;\n    width: 30%;\n    border: 1px solid #c8bdbd;\n}\n\n.field-title {\n    display: inline-block;\n    float: left;\n    width: 70%;\n    font-size: smaller;\n    padding-left: 5px;\n    text-align: left;\n}\n.sr-page-editorial{\n  width: 82%;\n  float: right;\n}\n.content {\n  padding-left: 2px;\n  /* position: relative;\n  float: left;\n  width: 100%; */ \n}\n\n.topContainerWithoutPreview{\n  width: 100%;\n}\n\n.gridContent {    \n    display: inline-block;\n    width: 100%;\n    min-height: 90vh;\n    max-height: 90vh;\n    height: 90vh;\n    overflow: scroll;\n    background-color: #f8f8f8;\n}\n\n.gridContent-full {\n  display: inline-block;\n  /* float: left; */\n  /* height: 100vh; */\n  width: 100%;\n  position: relative;\n  /* overflow: hidden; */\n}\n\n.gridCanvas {\n  display: block;  \n  border: 1px solid grey;  \n  min-height: 90vh;\n}\n\n.emulator {\n  width: 100%;\n  height: 100%;\n  border: none;\n  will-change: transform;\n}\n\n.dualmode .emulatorContainer {\n  width: 40%;\n  float: right;\n}\n\n.fullscreen .emulatorContainer {\n  width: 0%;\n}\n\n.selectOptions {\n  display: inline-block;\n  float: right;\n  margin-bottom: 10px;\n  position: relative;\n  width: 100%;\n  height: 30px;\n}\n\n.sr-prev-pange{\n   /* overflow-y: scroll;height: 100vh; */\n    overflow: hidden;\n}\n\n/* The device with borders */\n.emulatorFrameContainer {\n  display: inline-block;\n  width:100%;\n}\n\n.emulatorFrameContainer.tablet {\n  position: relative;\n  width: 550px;\n  height: 650px;\n  --devicewidth: 550px;\n  --deviceheight: 650;\n  border: 16px black solid;\n  border-top-width: 60px;\n  border-bottom-width: 60px;\n  border-radius: 36px;\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0;\n  -webkit-transform: scale(.7) translate(-50%);\n  /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n  transform: scale(.7) translate(-50%);\n  /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n}\n\n/* The horizontal line on the top of the device */\n.emulatorFrameContainer.tablet:before {\n  content: '';\n  display: block;\n  width: 60px;\n  height: 5px;\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: #333;\n  border-radius: 10px;\n}\n\n/* The circle on the bottom of the device */\n.emulatorFrameContainer.tablet:after {\n  content: '';\n  display: block;\n  width: 35px;\n  height: 35px;\n  position: absolute;\n  left: 50%;\n  bottom: -65px;\n  transform: translate(-50%, -50%);\n  background: #333;\n  border-radius: 50%;\n}\n\n/* The screen (or content) of the device */\n.emulatorFrameContainer.tablet {\n  top: 1%;\n  left: 50%;\n  background: white;\n  margin: -1px;\n}\n\n.emulatorFrameContainer.smartphone {\n  position: relative;\n  align-content: center;\n  width: 360px;\n  vertical-align: top;\n  float: left;\n  top: 3%;\n  left: 10%;\n  height: 540px;\n  --devicewidth: 360px;\n  --deviceheight: 420px;\n  margin: auto;\n  border: 16px black solid;\n  border-top-width: 60px;\n  border-bottom-width: 60px;\n  border-radius: 36px;\n}\n\n/* The horizontal line on the top of the device */\n.emulatorFrameContainer.smartphone:before {\n  content: '';\n  display: block;\n  width: 60px;\n  height: 5px;\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: #333;\n  border-radius: 10px;\n}\n\n/* The circle on the bottom of the device */\n.emulatorFrameContainer.smartphone:after {\n  content: '';\n  display: block;\n  width: 35px;\n  height: 35px;\n  position: absolute;\n  left: 50%;\n  bottom: -65px;\n  transform: translate(-50%, -50%);\n  background: #333;\n  border-radius: 50%;\n}\n\n.emulatorFrameContainer.laptop {\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0;\n  -webkit-transform: scale(.35) translate(-50%);\n  /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n  transform: scale(.35) translate(-50%);\n  /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n  top: 20%;\n  left: 50%;\n  /* float: left; */\n  position: relative;\n  display: inline-block;\n  width: 900px;\n  height: 629px;\n  --devicewidth: 900;\n  --deviceheight: 585px;\n  border-radius: 6px;\n  border-style: solid;\n  border-color: black;\n  border-width: 24px 24px 80px;\n  background-color: black;\n}\n\n/* The keyboard of the laptop */\n.emulatorFrameContainer.laptop:after {\n  content: '';\n  display: block;\n  position: absolute;\n  bottom: -170px;\n  width: 1040px;\n  height: 60px;\n  margin: 80px 0 0 -90px;\n  background: black;\n  border-radius: 6px;\n}\n\n/* The top of the keyboard */\n.emulatorFrameContainer.laptop:before {\n  content: '';\n  display: block;\n  position: absolute;\n  width: 250px;\n  height: 30px;\n  bottom: -110px;\n  left: 50%;\n  -webkit-transform: translate(-50%);\n  transform: translate(-50%);\n  background: #787777;\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n  z-index: 1;\n}\n.sidebar .nav-tabs a {\n  font-size: x-small;\n  /* color: white; */\n}\n\n.sidebar .nav-tabs a:hover {\n    color: black;\n}\n\n.tabs-icon {\n  background-color: blue;\n}\n\n.sidebar .grid-stack-item .grid-stack-item-content:hover {\n    background: white;\n}\n\n.fullscreen .topContainer .gridcanvas-actions{\n    position: absolute;\n    z-index: 999;\n    right: 0%;\n}\n\n.dualmode .topContainer .gridcanvas-actions{\n    position: absolute;\n    z-index: 999;\n    right: 30%;\n}\n.gridcanvas-actions-full{\n  position: absolute;\n  z-index: 999;\n  right: 0%;\n}\n.gridcanvas-actions .bx--btn--primary{\n    margin-top: 1px;\n    margin-right: 5px;\n    /* font-weight: 500; */\n    padding: 5px;\n    height: 30px;\n    min-height: 30px;\n}\n\n.gridcanvas-actions .bx--overflow-menu {\n    float: right;\n    background-color: #7dbb86;\n    color: white;\n}\n\n.gridcanvas-actions-full .bx--overflow-menu {\n  /* float: right; */\n  background-color: #7cb985;\n}\n\n.sidebar .widgetContainer {\n    display: none;\n}\n\n.sidebar .draggingWidget {\n    background: #c10848;\n    font-size: xx-small;\n    font-family: fantasy;\n}\n\n.sidebar .draggingWidget:before {\n     content: \"DRAGGING...\";\n     color: white;\n}\n\n.tab-pane {\n    height: 100vh;\n}\n\n.sidebar .widget:hover {\n    border: none;\n}\n\n/*.gridCanvas .widget:hover {\n    border: 2px dotted blue;\n    margin: 2px;\n}*/\n\n.pane-body {\n    margin: 5px;\n    background-color: white;\n    overflow-y: auto;\n    min-height: 40vh;\n    border-radius: 5px;\n    padding-top: 10px;\n}\n\n.formFieldInputText {\n    margin-bottom: 10px;\n}\n\n.sr-des-footerPane{\n  position:relative;\n  float:left;\n  /* margin-left: 2px; */\n  padding-left: 2px;\n  width: 100%;\n  min-height: 250px;\n  height: auto;\n  background-color: whitesmoke;\n  overflow: visible;\n  /* border: 1px solid gray; */\n  overflow-y: visible;\n}\n.contentTabs {\n  min-height: 27px;\n  background-color: #c3c3c3;\n  width: 100%;\n  display: inline-block;\n  margin-bottom: 1px;\n  position: relative;\n  z-index: 9;\n  height: auto;\n  text-align: left;\n}\n\n.contentTab {\nfont-size: smaller;\ncolor: black;\nposition: relative;\nfloat: left;\ndisplay: inline-block;\nmargin-top: 3px;\nmargin-left: 5px;\nbackground-color: #e4e4e4;\npadding: 3px;\nwidth: auto;\nmin-width: 80px;\ntext-align: center;\nheight: auto;\n}\n\n.contentTabActive {\nfont-size: smaller;\ncolor: black;\ncursor: crosshair;\nposition: relative;\ndisplay: block;\nfloat: left;\nmargin-top: 4px;\nmargin-left: 5px;\nbackground-color: white;\npadding: 3px;\nwidth: max-content;\nmin-width: 80px;\ntext-align: center;\nheight: 23px;\nborder-bottom: 2px solid #ff4f6b;\n}\n\n.contentTab:hover, .contentTabActive:hover {\nbackground-color: white;\ncursor: default;\n}\n\n.showHidePreview {\n  float: left;\n  color: white;\n  padding-left: 10px;\n  padding-right: 10px;\n  background-color: red;\n}\n\n.closeTab:hover {\ncursor: pointer;\nbackground-color: #dadada;\n}\n\nsvg.closeTab {\n  margin-top: 3px;\n  height: 23px;\n}\n\n.contentTabItems {\n  display: inline-block;\n}\n\n.sr-new-file-menu{\n  text-align: left;\n    padding-left: 10px;\n    padding-top: 2px;\n}\n.sr-new-file{\n  font-weight: 600;\n     padding-left: 50px; \n    position: absolute;\n    padding-top: 9px;\n}\n\n.eidtor-toggle-minimize{\n  position: absolute;\n  z-index: 999;\n  bottom: 0;\n  padding: 3px;\n  right: 33%;\n  cursor: pointer;\n}\n\n.eidtor-toggle-maximize{\n  position: absolute;\n  z-index: 999;\n  padding: 5px;\n  bottom: 0;\n  right: 5px;\n  cursor: pointer;\n}\n.fullscreen .topContainer {\n    width: 100%;\n}\n\n.dualmode .topContainer {\n    width: 60%;\n    float: left;\n}\n\n.tabLabel {\n    width: 100px !important;\n}\n\n.innerTabs {\n    margin-top: 20px !important;\n    margin-left: 10% !important;    \n    width: 70% !important;\n    margin-bottom: 20px !important;\n}\n\n.widgetactive {\n    border: 2px dotted green;\n}\n\n/* The screen (or content) of the device */\n.emulatorFrameContainer.Tablet {\n  top: 1%;\n  left: 50%;\n  background: white;\n  margin: -1px;\n}\n\n.emulatorFrameContainer.Smartphone {\n  position: relative;\n  align-content: center;\n  width: 360px;\n  vertical-align: top;\n  float: left;\n  top: 3%;\n  left: 10%;\n  height: 540px;\n  --devicewidth: 360px;\n  --deviceheight: 420px;\n  margin: auto;\n  border: 16px black solid;\n  border-top-width: 60px;\n  border-bottom-width: 60px;\n  border-radius: 36px;\n}\n\n/* The horizontal line on the top of the device */\n.emulatorFrameContainer.Smartphone:before {\n  content: '';\n  display: block;\n  width: 60px;\n  height: 5px;\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: #333;\n  border-radius: 10px;\n}\n\n/* The circle on the bottom of the device */\n.emulatorFrameContainer.Smartphone:after {\n  content: '';\n  display: block;\n  width: 35px;\n  height: 35px;\n  position: absolute;\n  left: 50%;\n  bottom: -65px;\n  transform: translate(-50%, -50%);\n  background: #333;\n  border-radius: 50%;\n}\n\n.emulatorFrameContainer.Laptop {\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0;\n  -webkit-transform: scale(.35) translate(-50%);\n  /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n  transform: scale(.55) translate(-50%);\n  /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n  top: 30px;\n  left: 50%;\n  /* float: left; */\n  position: relative;\n  display: inline-block;\n  width: 900px;\n  height: 629px;\n  --devicewidth: 900;\n  --deviceheight: 585px;\n  border-radius: 6px;\n  border-style: solid;\n  border-color: black;\n  border-width: 24px 24px 80px;\n  background-color: black;\n}\n\n/* The keyboard of the laptop */\n.emulatorFrameContainer.Laptop:after {\n  content: '';\n  display: block;\n  position: absolute;\n  bottom: -170px;\n  width: 1040px;\n  height: 60px;\n  margin: 80px 0 0 -90px;\n  background: black;\n  border-radius: 6px;\n}\n\n/* The top of the keyboard */\n.emulatorFrameContainer.Laptop:before {\n  content: '';\n  display: block;\n  position: absolute;\n  width: 250px;\n  height: 30px;\n  bottom: -110px;\n  left: 50%;\n  -webkit-transform: translate(-50%);\n  transform: translate(-50%);\n  background: #787777;\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n  z-index: 1;\n}\n\n.welcomePage {\n    display: block;\n    background-color: #b88e4e;\n    width: 100%;\n    height: 100%;\n    min-height: 50vh;\n    background-size: cover;\n    background-image: url(\"/resources/welcomepage.jpg\");\n}\n\n.bx--accordion__content {\n    padding: 0px !important;\n    overflow-y: auto;\n    max-height: 60vh;\n}\n\n.widgetPropHeader {\n    cursor: pointer;\n}\n\n.bx--header__menu-item.bx--header__menu-title {\n    color: black !important;\n    font-size: large !important;\n    padding: 10px !important;\n    text-decoration: underline !important;\n}\n\n.bx--header__menu-item.bx--header__menu-title:hover, .bx--header__menu-item.bx--header__menu-title[aria-expanded=\"true\"] {\n    color: white !important;\n    text-decoration: none !important;\n}\n\n.quickhooks {\n    position: absolute;\n    width: 200px;\n    height: 32px;    \n    left: 0px;\n    bottom: 0px;\n    display: block;\n    opacity: 0.2;   \n    z-index: 10; \n}\n\n.quickhooks:hover {\n    opacity: 1;    \n    cursor: pointer;\n}\n\n.inlinePreview {\n    position: absolute;\n    right: 0;\n    top: 90px;\n    width: fit-content;\n    height: fit-content;\n    min-height: 80vh;\n    z-index: 100;\n    background-color: #77b07e;\n    padding: 10px;\n}\n\n.inlinePreviewHide {\n    width: 0px;\n    height: 0px;\n}\n\n.closePreview {\n    position: absolute;\n    right: 0px;\n    top: 0px;\n    cursor: pointer;\n}\n\n.sectionheader {\n    display: block;\n    float: left;\n    text-align: left;\n    /* margin-left: 20px; */\n    margin-top: 10px;\n    margin-bottom: 10px;\n    width: 100%;\n    /* color: white; */\n}\n.sr-widget-pane{\n    display: flex;\n    flex-direction: column;\n}\n.srs-palatte-container{\n    margin-top: 10px;\n    flex-direction: row;\n    flex-wrap: wrap;\n    max-height: 70vh;\n    overflow-y: scroll;\n    max-width: 350px;\n    min-width: 260px;\n}\n.srs-palatte-item{\n    height:50px;\n    display:inline-flex;\n    justify-content: space-around;\n    width: 45%;\n    border: 2px solid #AEAEAE;\n    margin: 2px;\n    text-align: center;\n    line-height: 30px;\n    z-index: 10;\n    background: #EDEDED;\n    cursor: pointer;\n}\n.srs-palatte-item .grid-stack-item{\n   width:70%;\n   overflow: hidden;\n}\n.srs-palatte-item .grid-stack-item .grid-stack-item-content{\n    padding-top:8%;\n    height:50px;\n}\n.srs-palatte-item .palatte-icon{\n   width:30%;\n   border-right:1px solid #00000047;\n   padding:5px;\n   position:relative;\n}\n.palatte-horizontal-bar,.palatte-vertical-bar{\n  border-bottom:1px solid black;\n  margin-top:55%;\n}\n.palatte-vertical-bar{\n  transform: rotate(90deg);\n}\n.palatte-text-icon, .palatte-number-icon{\n    font-size: 18px;\n    font-weight: 600;\n}\n.palatte-button-icon{\n    border: 1px solid black;\n    padding: 10%;\n    font-size: 18px;\n    font-weight: 600;\n}\n.palatte-select-icon{\n    position: absolute;\n    top: 0;\n    margin-left: -16px;\n    margin-top: -3px;\n}\n\n",OverlayLayout:".grid-stack>.grid-stack-item>.grid-stack-item-content {\n    left: 0px !important;\n    right: 0px !important;\n}\n\n",LayoutCreator:"/* add css styles to the component */\n\n",JsonModelBuilder:'legend {\n    font-size: large;\n    margin-bottom: 20px;\n    text-decoration: underline;\n    cursor: pointer;\n    width: fit-content;\n    max-width: 200px;\n    padding-left: 5px !important;\n    padding-right: 5px !important;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.bx--tab-content>form>.form-group>fieldset, .bx--tab-content>form>.form-group>fieldset>.form-group>fieldset {\n    border-left: 2px solid #1061fe !important;\n    height: unset !important;\n    overflow: auto !important;\n    border-top: 1px solid lightgrey;\n    border-bottom: 1px solid lightgrey;\n    border-right: 0px !important;    \n}\n\n.expand-fieldset {        \n    border-left: 2px solid #1061fe !important;\n    border-top: 1px solid lightgrey !important;\n    border-bottom: 1px solid lightgrey !important;\n    border-right: 0px !important;\n    height: unset !important;\n    overflow: auto !important;\n}\n\nfieldset {    \n    border-top: 1px solid lightgrey !important;\n    border-bottom: 1px solid lightgrey !important;\n    border-left: 1px solid lightgrey !important;\n    border-right: 0px !important !important;\n    padding: 10px !important;\n    height: 60px;\n    overflow: hidden;    \n    cursor: pointer !important;         \n}\n\n.form-group.field.field-string {\n    display: flex;\n    flex-direction: row;\n    margin-bottom: 0px !important;\n}\n\n.control-label {\n    margin-right: 10px;\n    margin-top: 10px;\n    white-space: nowrap;\n}\n\n.col-xs-9 {\n    width: 93% !important;\n}\n.array-item.col-xs-3, .array-item-toolbox.col-xs-3 {\n    width: 5% !important;\n}\n\n.btn-group {\n    flex-direction: column-reverse;\n}\n\n.col-xs-0 {\n    width: 0% !important;\n    display: none !important;\n}\n\nform {\n    border-right: 1px solid lightgrey;\n}\n\n.array-item-move-up, .array-item-move-down, .array-item-remove {\n    background-color: white !important;\n    border: 0px !important;\n    padding: 0px !important;\n    color: black !important;\n}\n\n.switchradio {\n    display: none;\n}\n\n.switchradio:checked {\n    transition: 0.15s ease-out;\n    color: #fff;\n}\n\n.switch {\n    font-family: "Lucida Grande", Tahoma, Verdana, sans-serif;\n    position: relative;\n    height: 26px;\n    width: 135px;    \n    background-color: #00a43a;\n    border-radius: 3px;\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px rgba(255, 255, 255, 0.1);\n}\n\n.switchselection {\n    display: block;\n    position: absolute;\n    z-index: 1;\n    top: 0px;\n    left: 0px;\n    width: 45px;\n    height: 26px;\n    background: #216BA5;\n    border-radius: 3px;\n    transition: left 0.25s ease-out;\n}\n\n.switchlabel {\n    position: relative;\n    z-index: 2;\n    float: left;\n    width: 45px;\n    line-height: 26px;\n    font-size: 11px;\n    color: white;\n    text-align: center;\n    cursor: pointer;\n}\n\n.list-group {\n    padding-left: 0;\n    margin-bottom: 20px;\n    cursor: grab;\n}\n\n.list-group-item {\n    position: relative;\n    display: block;\n    padding: 10px 15px;\n    margin-bottom: -1px;\n    background-color: #fff;\n    border: 1px solid #ddd;\n    cursor: grab;\n}\n\n.list-group-item:first-child {\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n}\n\n',JsonFormGenerator:'legend {\n    font-size: large;\n    margin-bottom: 20px;\n    text-decoration: underline;\n    cursor: pointer;\n    width: fit-content;\n    max-width: 200px;\n    padding-left: 5px !important;\n    padding-right: 5px !important;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.bx--tab-content>form>.form-group>fieldset, .bx--tab-content>form>.form-group>fieldset>.form-group>fieldset {\n    border-left: 2px solid #1061fe !important;\n    height: unset !important;\n    overflow: auto !important;\n    border-top: 1px solid lightgrey;\n    border-bottom: 1px solid lightgrey;\n    border-right: 0px !important;    \n}\n\n.expand-fieldset {        \n    border-left: 2px solid #1061fe !important;\n    border-top: 1px solid lightgrey !important;\n    border-bottom: 1px solid lightgrey !important;\n    border-right: 0px !important;\n    height: unset !important;\n    overflow: auto !important;\n}\n\nfieldset {    \n    border-top: 1px solid lightgrey !important;\n    border-bottom: 1px solid lightgrey !important;\n    border-left: 1px solid lightgrey !important;\n    border-right: 0px !important !important;\n    padding: 10px !important;\n    height: 60px;\n    overflow: hidden;    \n    cursor: pointer !important;         \n}\n\n.form-group.field.field-string {\n    display: flex;\n    flex-direction: row;\n    margin-bottom: 0px !important;\n}\n\n.control-label {\n    margin-right: 10px;\n    margin-top: 10px;\n    white-space: nowrap;\n}\n\n.col-xs-9 {\n    width: 95% !important;\n}\n.array-item.col-xs-3, .array-item-toolbox.col-xs-3 {\n    width: 5% !important;\n}\n\n.btn-group {\n    flex-direction: column-reverse;\n}\n\n.col-xs-0 {\n    width: 0% !important;\n    display: none !important;\n}\n\nform {\n    border-right: 1px solid lightgrey;\n}\n\n.array-item-move-up, .array-item-move-down, .array-item-remove {\n    background-color: white !important;\n    border: 0px !important;\n    padding: 0px !important;\n    color: black !important;\n}\n\n.switchradio {\n    display: none;\n}\n\n.switchradio:checked {\n    transition: 0.15s ease-out;\n    color: #fff;\n}\n\n.switch {\n    font-family: "Lucida Grande", Tahoma, Verdana, sans-serif;\n    position: relative;\n    height: 26px;\n    width: 135px;\n    background-color: #00a43a;\n    border-radius: 3px;\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px rgba(255, 255, 255, 0.1);\n}\n\n.switchselection {\n    display: block;\n    position: absolute;\n    z-index: 1;\n    top: 0px;\n    left: 0px;\n    width: 45px;\n    height: 26px;\n    background: #216BA5;\n    border-radius: 3px;\n    transition: left 0.25s ease-out;\n}\n\n.switchlabel {\n    position: relative;\n    z-index: 2;\n    float: left;\n    width: 45px;\n    line-height: 26px;\n    font-size: 11px;\n    color: white;\n    text-align: center;\n    cursor: pointer;\n}\n\n.list-group {\n    padding-left: 0;\n    margin-bottom: 20px;\n    cursor: grab;\n}\n\n.list-group-item {\n    position: relative;\n    display: block;\n    padding: 10px 15px;\n    margin-bottom: -1px;\n    background-color: #fff;\n    border: 1px solid #ddd;\n    cursor: grab;\n}\n\n.list-group-item:first-child {\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n}\n\n',JSONForm:".bx--text-input:disabled {\n    color: #6b6b6b !important;\n}\n\n.bx--label--disabled, .bx--form__helper-text--disabled {\n    color: #5a5a5a !important;\n}\n\n",InlinePreview:".bx--form-item {    \n    margin-bottom: 5px !important;\n    display: flex !important;\n    flexDirection: column !important;\n}\n\n.deviceType {\n    width: 65%\n}\n\n.deviceType .bx--form-item {\n    align-items: flex-end;\n    margin-left: 10%;\n}\n\n.rotateType {\n    align-items: flex-start;\n    margin-left: 10px;\n}\n\niframe {\n    border: 1px solid #c7c1c1 !important;\n}\n\n",IdeValidation:".ide_comp{\n    \n}\n\n",IdeStateMapper:".ide-state-mapper{\n    \n}\n.rt-tr-group{\n    cursor: pointer;\n}\n.state-btn{\n    position: relative;\n    left: 82%;\n}\n\n.ReactTable .-pagination {\n    height: 50px;\n    width: 20%;\n    float: left;\n    margin-left: 40%;\n}\n\n.ReactTable .-pagination .-pageJump input {\n    height: 25px;\n}\n\n",IdeProps:"/* add css styles to the component */\n\n",IdeNavigator:"/* add css styles to the component */\n\n",IdeFormFields:".ide_comp{\n    display: inline-flex;\n    width:100%;\n}\n\n",IdeDependency:".ide-dependency{\n    \n}\n\n",IdeConsole:".ide-consol{\n    \n}\n\n",IdeActionMapper:".ide-action-mapper{\n    \n}\n\n.rt-tr-group{\n    cursor: pointer;\n}\n\n.action-btn{\n    position: relative;\n    left: 82%;\n}\n\n",IconPicker:"/* add css styles to the component */\n\n",GridCanvas:"/* add css styles to the component */\n\n",GraphiqlView:'.showNav {\n  height: 90%;\n  Width: 30%;\n}\n\n.btn-cls {\n    color: #fff !important;\n    margin-left: 5px;\n}\n\n.hideNav {\n    height: 40px;\n    width: 40px;\n    background-color: #eaeaea;\n    z-index: 999;\n    overflow: hidden;\n}\n\n.graphiql-container {\n    width: 100%;\n    box-shadow: 0 1.6px 3.6px 0 rgba(0, 0, 0, .132), 0 0.3px 0.9px 0 rgba(0, 0, 0, .108);\n}\n\n.graphiql-container,\n.graphiql-container button,\n.graphiql-container input {\n  color: #141823;\n  font-family:\n    system,\n    -apple-system,\n    "San Francisco",\n    ".SFNSDisplay-Regular",\n    "Segoe UI",\n    Segoe,\n    "Segoe WP",\n    "Helvetica Neue",\n    helvetica,\n    "Lucida Grande",\n    arial,\n    sans-serif;\n    font-size: 14px;\n}\n\n.graphiql-container {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: fixed;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n    -ms-flex-direction: row;\n    flex-direction: row;\n    height: 100vh;\n    top: 50px;\n    overflow: scroll;\n}\n\n.graphiql-container .editorWrap {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  overflow-x: hidden;\n}\n\n.graphiql-container .title {\n  font-size: 18px;\n  margin-left: 30px;\n}\n\n.graphiql-container .title em {\n  font-family: georgia;\n  font-size: 19px;\n}\n\n.graphiql-container .topBarWrap {\n  display: -webkit-box;\n  height: 40px;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n}\n\n.graphiql-container .topBar {\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  background: -webkit-gradient(linear, left top, left bottom, from(#f7f7f7), to(#e2e2e2));\n  background: linear-gradient(#f7f7f7, #e2e2e2);\n  border-bottom: 1px solid #d0d0d0;\n  cursor: default;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -webkit-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  height: 34px;\n  overflow-y: visible;\n  padding: 7px 14px 6px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  height: 40px;\n}\n\n.graphiql-container .toolbar {\n  overflow-x: visible;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n\n.graphiql-container .docExplorerShow,\n.graphiql-container .historyShow {\n  background: -webkit-gradient(linear, left top, left bottom, from(#f7f7f7), to(#e2e2e2));\n  background: linear-gradient(#f7f7f7, #e2e2e2);\n  border-radius: 0;\n  border-bottom: 1px solid #d0d0d0;\n  border-right: none;\n  border-top: none;\n  color: #3B5998;\n  cursor: pointer;\n  font-size: 14px;\n  margin: 0;\n  outline: 0;\n  padding: 2px 20px 0 18px;\n}\n\n.graphiql-container .docExplorerShow {\n  border-left: 1px solid rgba(0, 0, 0, 0.2);\n}\n\n.graphiql-container .historyShow {\n  border-right: 1px solid rgba(0, 0, 0, 0.2);\n  border-left: 0;\n}\n\n.graphiql-container .docExplorerShow:before {\n  border-left: 2px solid #3B5998;\n  border-top: 2px solid #3B5998;\n  content: "";\n  display: inline-block;\n  height: 9px;\n  margin: 0 3px -1px 0;\n  position: relative;\n  -webkit-transform: rotate(-45deg);\n          transform: rotate(-45deg);\n  width: 9px;\n}\n\n.graphiql-container .editorBar {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n\n.graphiql-container .queryWrap {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n\n.graphiql-container .resultWrap {\n  border-left: solid 1px #e0e0e0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  position: relative;\n}\n\n.graphiql-container .docExplorerWrap,\n.graphiql-container .historyPaneWrap {\n  background: white;\n  -webkit-box-shadow: 0 0 8px rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 8px rgba(0, 0, 0, 0.15);\n  position: relative;\n  z-index: 3;\n}\n\n.graphiql-container .historyPaneWrap {\n  min-width: 150px;\n  width: 150px !important;\n  display: none !important;\n  z-index: 5;\n}\n\n.graphiql-container .docExplorerResizer {\n  cursor: col-resize;\n  height: 100%;\n  left: -5px;\n  position: absolute;\n  top: 0;\n  width: 10px;\n  z-index: 10;\n}\n\n.graphiql-container .docExplorerHide {\n  cursor: pointer;\n  font-size: 18px;\n  margin: -7px -8px -6px 0;\n  padding: 18px 16px 15px 12px;\n}\n\n.graphiql-container div .query-editor {\n  -webkit-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  height: 80%;\n  position: relative;\n}\n\n.graphiql-container .variable-editor {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  height: 80px;\n  position: relative;\n}\n\n.graphiql-container .variable-editor-title {\n  background: #eeeeee;\n  border-bottom: 1px solid #d6d6d6;\n  border-top: 1px solid #e0e0e0;\n  color: #777;\n  font-variant: small-caps;\n  font-weight: bold;\n  letter-spacing: 1px;\n  line-height: 14px;\n  padding: 6px 0 8px 43px;\n  text-transform: lowercase;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.graphiql-container .codemirrorWrap {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  height: 100%;\n  position: relative;\n}\n\n.graphiql-container .result-window {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  height: 100%;\n  position: relative;\n}\n\n.graphiql-container .footer {\n  background: #f6f7f8;\n  border-left: 1px solid #e0e0e0;\n  border-top: 1px solid #e0e0e0;\n  margin-left: 12px;\n  position: relative;\n}\n\n.graphiql-container .footer:before {\n  background: #eeeeee;\n  bottom: 0;\n  content: " ";\n  left: -13px;\n  position: absolute;\n  top: -1px;\n  width: 12px;\n}\n\n/* No `.graphiql-container` here so themes can overwrite */\n.result-window .CodeMirror {\n  background: #f6f7f8;\n}\n\n.graphiql-container .result-window .CodeMirror-gutters {\n  background-color: #eeeeee;\n  border-color: #e0e0e0;\n  cursor: col-resize;\n}\n\n.graphiql-container .result-window .CodeMirror-foldgutter,\n.graphiql-container .result-window .CodeMirror-foldgutter-open:after,\n.graphiql-container .result-window .CodeMirror-foldgutter-folded:after {\n  padding-left: 3px;\n}\n\n.graphiql-container .toolbar-button {\n  align-self: center;\n  background: #fdfdfd;\n  background: -webkit-gradient(linear, left top, left bottom, from(#f9f9f9), to(#ececec));\n  background: linear-gradient(#f9f9f9, #ececec);\n  border-radius: 3px;\n  -webkit-box-shadow:\n    inset 0 0 0 1px rgba(0,0,0,0.20),\n    0 1px 0 rgba(255,255,255, 0.7),\n    inset 0 1px #fff;\n          box-shadow:\n    inset 0 0 0 1px rgba(0,0,0,0.20),\n    0 1px 0 rgba(255,255,255, 0.7),\n    inset 0 1px #fff;\n  color: #555;\n  cursor: pointer;\n  display: inline-block;\n  margin: 0 5px;\n  padding: 3px 11px 5px;\n  text-decoration: none;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  max-width: 150px;\n}\n\n.graphiql-container .toolbar-button:active {\n  background: -webkit-gradient(linear, left top, left bottom, from(#ececec), to(#d5d5d5));\n  background: linear-gradient(#ececec, #d5d5d5);\n  -webkit-box-shadow:\n    0 1px 0 rgba(255, 255, 255, 0.7),\n    inset 0 0 0 1px rgba(0,0,0,0.10),\n    inset 0 1px 1px 1px rgba(0, 0, 0, 0.12),\n    inset 0 0 5px rgba(0, 0, 0, 0.1);\n          box-shadow:\n    0 1px 0 rgba(255, 255, 255, 0.7),\n    inset 0 0 0 1px rgba(0,0,0,0.10),\n    inset 0 1px 1px 1px rgba(0, 0, 0, 0.12),\n    inset 0 0 5px rgba(0, 0, 0, 0.1);\n}\n\n.graphiql-container .toolbar-button.error {\n  background: -webkit-gradient(linear, left top, left bottom, from(#fdf3f3), to(#e6d6d7));\n  background: linear-gradient(#fdf3f3, #e6d6d7);\n  color: #b00;\n}\n\n.graphiql-container .toolbar-button-group {\n  margin: 0 5px;\n  white-space: nowrap;\n}\n\n.graphiql-container .toolbar-button-group > * {\n  margin: 0;\n}\n\n.graphiql-container .toolbar-button-group > *:not(:last-child) {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n\n.graphiql-container .toolbar-button-group > *:not(:first-child) {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  margin-left: -1px;\n}\n\n// .graphiql-container .execute-button-wrap {\n//   height: 40px;\n//   margin: 0 14px 0 28px;\n//   position: relative;\n// }\n\n.graphiql-container .execute-button {\n  background: -webkit-gradient(linear, left top, left bottom, from(#fdfdfd), to(#d2d3d6));\n  background: linear-gradient(#fdfdfd, #d2d3d6);\n  border-radius: 17px;\n  border: 1px solid rgba(0,0,0,0.25);\n  -webkit-box-shadow: 0 1px 0 #fff;\n          box-shadow: 0 1px 0 #fff;\n  cursor: pointer;\n  fill: #444;\n  height: 34px;\n  margin: 0;\n  padding: 0;\n  width: 34px;\n}\n\n.graphiql-container .execute-button svg {\n  pointer-events: none;\n}\n\n.graphiql-container .execute-button:active {\n  background: -webkit-gradient(linear, left top, left bottom, from(#e6e6e6), to(#c3c3c3));\n  background: linear-gradient(#e6e6e6, #c3c3c3);\n  -webkit-box-shadow:\n    0 1px 0 #fff,\n    inset 0 0 2px rgba(0, 0, 0, 0.2),\n    inset 0 0 6px rgba(0, 0, 0, 0.1);\n          box-shadow:\n    0 1px 0 #fff,\n    inset 0 0 2px rgba(0, 0, 0, 0.2),\n    inset 0 0 6px rgba(0, 0, 0, 0.1);\n}\n\n.graphiql-container .execute-button:focus {\n  outline: 0;\n}\n\n.graphiql-container .toolbar-menu,\n.graphiql-container .toolbar-select {\n  position: relative;\n}\n\n.graphiql-container .execute-options,\n.graphiql-container .toolbar-menu-items,\n.graphiql-container .toolbar-select-options {\n  background: #fff;\n  -webkit-box-shadow:\n    0 0 0 1px rgba(0,0,0,0.1),\n    0 2px 4px rgba(0,0,0,0.25);\n          box-shadow:\n    0 0 0 1px rgba(0,0,0,0.1),\n    0 2px 4px rgba(0,0,0,0.25);\n  margin: 0;\n  padding: 6px 0;\n  position: absolute;\n  z-index: 100;\n}\n\n.graphiql-container .execute-options {\n  min-width: 100px;\n  top: 37px;\n  left: -1px;\n}\n\n.graphiql-container .toolbar-menu-items {\n  left: 1px;\n  margin-top: -1px;\n  min-width: 110%;\n  top: 100%;\n  visibility: hidden;\n}\n\n.graphiql-container .toolbar-menu-items.open {\n  visibility: visible;\n}\n\n.graphiql-container .toolbar-select-options {\n  left: 0;\n  min-width: 100%;\n  top: -5px;\n  visibility: hidden;\n}\n\n.graphiql-container .toolbar-select-options.open {\n  visibility: visible;\n}\n\n.graphiql-container .execute-options > li,\n.graphiql-container .toolbar-menu-items > li,\n.graphiql-container .toolbar-select-options > li {\n  cursor: pointer;\n  display: block;\n  margin: none;\n  max-width: 300px;\n  overflow: hidden;\n  padding: 2px 20px 4px 11px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.graphiql-container .execute-options > li.selected,\n.graphiql-container .toolbar-menu-items > li.hover,\n.graphiql-container .toolbar-menu-items > li:active,\n.graphiql-container .toolbar-menu-items > li:hover,\n.graphiql-container .toolbar-select-options > li.hover,\n.graphiql-container .toolbar-select-options > li:active,\n.graphiql-container .toolbar-select-options > li:hover,\n.graphiql-container .history-contents > p:hover,\n.graphiql-container .history-contents > p:active {\n  background: #e10098;\n  color: #fff;\n}\n\n.graphiql-container .toolbar-select-options > li > svg {\n  display: inline;\n  fill: #666;\n  margin: 0 -6px 0 6px;\n  pointer-events: none;\n  vertical-align: middle;\n}\n\n.graphiql-container .toolbar-select-options > li.hover > svg,\n.graphiql-container .toolbar-select-options > li:active > svg,\n.graphiql-container .toolbar-select-options > li:hover > svg {\n  fill: #fff;\n}\n\n.graphiql-container .CodeMirror-scroll {\n  overflow-scrolling: touch;\n}\n\n.graphiql-container .CodeMirror {\n  color: #141823;\n  font-family:\n    "Consolas",\n    "Inconsolata",\n    "Droid Sans Mono",\n    "Monaco",\n    monospace;\n  font-size: 13px;\n  height: 100%;\n  left: 0;\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n\n.graphiql-container .CodeMirror-lines {\n  padding: 20px 0;\n}\n\n.CodeMirror-hint-information .content {\n  box-orient: vertical;\n  color: #141823;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  font-family: system, -apple-system, "San Francisco", ".SFNSDisplay-Regular", "Segoe UI", Segoe, "Segoe WP", "Helvetica Neue", helvetica, "Lucida Grande", arial, sans-serif;\n  font-size: 13px;\n  line-clamp: 3;\n  line-height: 16px;\n  max-height: 48px;\n  overflow: hidden;\n  text-overflow: -o-ellipsis-lastline;\n}\n\n.CodeMirror-hint-information .content p:first-child {\n  margin-top: 0;\n}\n\n.CodeMirror-hint-information .content p:last-child {\n  margin-bottom: 0;\n}\n\n.CodeMirror-hint-information .infoType {\n  color: #CA9800;\n  cursor: pointer;\n  display: inline;\n  margin-right: 0.5em;\n}\n\n.autoInsertedLeaf.cm-property {\n  -webkit-animation-duration: 6s;\n          animation-duration: 6s;\n  -webkit-animation-name: insertionFade;\n          animation-name: insertionFade;\n  border-bottom: 2px solid rgba(255, 255, 255, 0);\n  border-radius: 2px;\n  margin: -2px -4px -1px;\n  padding: 2px 4px 1px;\n}\n\n@-webkit-keyframes insertionFade {\n  from, to {\n    background: rgba(255, 255, 255, 0);\n    border-color: rgba(255, 255, 255, 0);\n  }\n\n  15%, 85% {\n    background: #fbffc9;\n    border-color: #f0f3c0;\n  }\n}\n\n@keyframes insertionFade {\n  from, to {\n    background: rgba(255, 255, 255, 0);\n    border-color: rgba(255, 255, 255, 0);\n  }\n\n  15%, 85% {\n    background: #fbffc9;\n    border-color: #f0f3c0;\n  }\n}\n\ndiv.CodeMirror-lint-tooltip {\n  background-color: white;\n  border-radius: 2px;\n  border: 0;\n  color: #141823;\n  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.45);\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.45);\n  font-family:\n    system,\n    -apple-system,\n    "San Francisco",\n    ".SFNSDisplay-Regular",\n    "Segoe UI",\n    Segoe,\n    "Segoe WP",\n    "Helvetica Neue",\n    helvetica,\n    "Lucida Grande",\n    arial,\n    sans-serif;\n  font-size: 13px;\n  line-height: 16px;\n  max-width: 430px;\n  opacity: 0;\n  padding: 8px 10px;\n  -webkit-transition: opacity 0.15s;\n  transition: opacity 0.15s;\n  white-space: pre-wrap;\n}\n\ndiv.CodeMirror-lint-tooltip > * {\n  padding-left: 23px;\n}\n\ndiv.CodeMirror-lint-tooltip > * + * {\n  margin-top: 12px;\n}\n\n/* COLORS */\n\n.graphiql-container .CodeMirror-foldmarker {\n  border-radius: 4px;\n  background: #08f;\n  background: -webkit-gradient(linear, left top, left bottom, from(#43A8FF), to(#0F83E8));\n  background: linear-gradient(#43A8FF, #0F83E8);\n  -webkit-box-shadow:\n    0 1px 1px rgba(0, 0, 0, 0.2),\n    inset 0 0 0 1px rgba(0, 0, 0, 0.1);\n          box-shadow:\n    0 1px 1px rgba(0, 0, 0, 0.2),\n    inset 0 0 0 1px rgba(0, 0, 0, 0.1);\n  color: white;\n  font-family: arial;\n  font-size: 12px;\n  line-height: 0;\n  margin: 0 3px;\n  padding: 0px 4px 1px;\n  text-shadow: 0 -1px rgba(0, 0, 0, 0.1);\n}\n\n.graphiql-container div.CodeMirror span.CodeMirror-matchingbracket {\n  color: #555;\n  text-decoration: underline;\n}\n\n.graphiql-container div.CodeMirror span.CodeMirror-nonmatchingbracket {\n  color: #f00;\n}\n\n/* Comment */\n.cm-comment {\n  color: #999;\n}\n\n/* Punctuation */\n.cm-punctuation {\n  color: #555;\n}\n\n/* Keyword */\n.cm-keyword {\n  color: #B11A04;\n}\n\n/* OperationName, FragmentName */\n.cm-def {\n  color: #D2054E;\n}\n\n/* FieldName */\n.cm-property {\n  color: #1F61A0;\n}\n\n/* FieldAlias */\n.cm-qualifier {\n  color: #1C92A9;\n}\n\n/* ArgumentName and ObjectFieldName */\n.cm-attribute {\n  color: #8B2BB9;\n}\n\n/* Number */\n.cm-number {\n  color: #2882F9;\n}\n\n/* String */\n.cm-string {\n  color: #D64292;\n}\n\n/* Boolean */\n.cm-builtin {\n  color: #D47509;\n}\n\n/* EnumValue */\n.cm-string-2 {\n  color: #0B7FC7;\n}\n\n/* Variable */\n.cm-variable {\n  color: #397D13;\n}\n\n/* Directive */\n.cm-meta {\n  color: #B33086;\n}\n\n/* Type */\n.cm-atom {\n  color: #CA9800;\n}\n/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  color: black;\n  font-family: monospace;\n  height: 300px;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: white; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n\n.CodeMirror-linenumber {\n  color: #999;\n  min-width: 20px;\n  padding: 0 3px 0 5px;\n  text-align: right;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror .CodeMirror-cursor {\n  border-left: 1px solid black;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.CodeMirror.cm-fat-cursor div.CodeMirror-cursor {\n  background: #7e7;\n  border: 0;\n  width: auto;\n}\n.CodeMirror.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n\n.cm-animate-fat-cursor {\n  -webkit-animation: blink 1.06s steps(1) infinite;\n          animation: blink 1.06s steps(1) infinite;\n  border: 0;\n  width: auto;\n}\n@-webkit-keyframes blink {\n  0% { background: #7e7; }\n  50% { background: none; }\n  100% { background: #7e7; }\n}\n@keyframes blink {\n  0% { background: #7e7; }\n  50% { background: none; }\n  100% { background: #7e7; }\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\ndiv.CodeMirror-overwrite div.CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3 {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0f0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #f22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn"t touch them. */\n\n.CodeMirror {\n  background: white;\n  overflow: hidden;\n  position: relative;\n}\n\n.CodeMirror-scroll {\n  height: 100%;\n  /* 30px is the magic margin used to hide the element"s real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -30px; margin-right: -30px;\n  outline: none; /* Prevent dragging from highlighting the element */\n  overflow: scroll !important; /* Things will break if this is overridden */\n  padding-bottom: 30px;\n  position: relative;\n}\n\n.CodeMirror-sizer {\n  border-right: 30px solid transparent;\n  position: relative;\n  margin-left: 13px;\n}\n\n.result-window > .CodeMirror > .CodeMirror-scroll > .CodeMirror-sizer {\n    margin-left: 13px !important;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  display: none;\n  position: absolute;\n  z-index: 6;\n}\n.CodeMirror-vscrollbar {\n  overflow-x: hidden;\n  overflow-y: scroll;\n  right: 0; top: 0;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-x: scroll;\n  overflow-y: hidden;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  min-height: 100%;\n  position: absolute; left: 0; top: 0;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  display: inline-block;\n  height: 100%;\n  margin-bottom: -30px;\n  vertical-align: top;\n  white-space: normal;\n  /* Hack to make IE7 behave */\n  *zoom:1;\n  *display:inline;\n}\n.CodeMirror-gutter-wrapper {\n  background: none !important;\n  border: none !important;\n  position: absolute;\n  z-index: 4;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  cursor: default;\n  position: absolute;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre {\n  -webkit-tap-highlight-color: transparent;\n  /* Reset some styles that the rest of the page might have set */\n  background: transparent;\n  border-radius: 0;\n  border-width: 0;\n  padding-left: 30px;\n  color: inherit;\n  font-family: inherit;\n  font-size: inherit;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  line-height: inherit;\n  margin: 0;\n  overflow: visible;\n  position: relative;\n  white-space: pre;\n  word-wrap: normal;\n  z-index: 2;\n}\n.CodeMirror-wrap pre {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  overflow: auto;\n  position: relative;\n  z-index: 2;\n}\n\n.CodeMirror-widget {}\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -webkit-box-sizing: content-box;\n          box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  height: 0;\n  overflow: hidden;\n  position: absolute;\n  visibility: hidden;\n  width: 100%;\n}\n\n.CodeMirror-cursor { position: absolute; }\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  position: relative;\n  visibility: hidden;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: #d9d9d9; }\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n\n.cm-searching {\n  background: #ffa;\n  background: rgba(255, 255, 0, .4);\n}\n\n/* IE7 hack to prevent it from returning funny offsetTops on the spans */\n.CodeMirror span { *vertical-align: text-bottom; }\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: ""; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n\n.CodeMirror-dialog {\n  background: inherit;\n  color: inherit;\n  left: 0; right: 0;\n  overflow: hidden;\n  padding: .1em .8em;\n  position: absolute;\n  z-index: 15;\n}\n\n.CodeMirror-dialog-top {\n  border-bottom: 1px solid #eee;\n  top: 0;\n}\n\n.CodeMirror-dialog-bottom {\n  border-top: 1px solid #eee;\n  bottom: 0;\n}\n\n.CodeMirror-dialog input {\n  background: transparent;\n  border: 1px solid #d3d6db;\n  color: inherit;\n  font-family: monospace;\n  outline: none;\n  width: 20em;\n}\n\n.CodeMirror-dialog button {\n  font-size: 70%;\n}\n.graphiql-container .doc-explorer {\n  background: white;\n}\n\n.graphiql-container .doc-explorer-title-bar,\n.graphiql-container .history-title-bar {\n  cursor: default;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  height: 34px;\n  line-height: 14px;\n  padding: 8px 8px 5px;\n  position: relative;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.graphiql-container .doc-explorer-title,\n.graphiql-container .history-title {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  font-weight: bold;\n  overflow-x: hidden;\n  padding: 10px 0 10px 10px;\n  text-align: center;\n  text-overflow: ellipsis;\n  -webkit-user-select: initial;\n     -moz-user-select: initial;\n      -ms-user-select: initial;\n          user-select: initial;\n  white-space: nowrap;\n}\n\n.graphiql-container .doc-explorer-back {\n  color: #3B5998;\n  cursor: pointer;\n  margin: -7px 0 -6px -8px;\n  overflow-x: hidden;\n  padding: 17px 12px 16px 16px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.doc-explorer-narrow .doc-explorer-back {\n  width: 0;\n}\n\n.graphiql-container .doc-explorer-back:before {\n  border-left: 2px solid #3B5998;\n  border-top: 2px solid #3B5998;\n  content: "";\n  display: inline-block;\n  height: 9px;\n  margin: 0 3px -1px 0;\n  position: relative;\n  -webkit-transform: rotate(-45deg);\n          transform: rotate(-45deg);\n  width: 9px;\n}\n\n.graphiql-container .doc-explorer-rhs {\n  position: relative;\n}\n\n.graphiql-container .doc-explorer-contents,\n.graphiql-container .history-contents {\n  background-color: #ffffff;\n  border-top: 1px solid #d6d6d6;\n  bottom: 0;\n  left: 0;\n  overflow-y: auto;\n  padding: 20px 15px;\n  position: absolute;\n  right: 0;\n  top: 47px;\n}\n\n.graphiql-container .doc-explorer-contents {\n  min-width: 300px;\n}\n\n.graphiql-container .doc-type-description p:first-child ,\n.graphiql-container .doc-type-description blockquote:first-child {\n  margin-top: 0;\n}\n\n.graphiql-container .doc-explorer-contents a {\n  cursor: pointer;\n  text-decoration: none;\n}\n\n.graphiql-container .doc-explorer-contents a:hover {\n  text-decoration: underline;\n}\n\n.graphiql-container .doc-value-description > :first-child {\n  margin-top: 4px;\n}\n\n.graphiql-container .doc-value-description > :last-child {\n  margin-bottom: 4px;\n}\n\n.graphiql-container .doc-category {\n  margin: 20px 0;\n}\n\n.graphiql-container .doc-category-title {\n  border-bottom: 1px solid #e0e0e0;\n  color: #777;\n  cursor: default;\n  font-size: 14px;\n  font-variant: small-caps;\n  font-weight: bold;\n  letter-spacing: 1px;\n  margin: 0 -15px 10px 0;\n  padding: 10px 0;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.graphiql-container .doc-category-item {\n  margin: 12px 0;\n  color: #555;\n}\n\n.graphiql-container .keyword {\n  color: #B11A04;\n}\n\n.graphiql-container .type-name {\n  color: #CA9800;\n}\n\n.graphiql-container .field-name {\n  color: #1F61A0;\n}\n\n.graphiql-container .field-short-description {\n  color: #999;\n  margin-left: 5px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.graphiql-container .enum-value {\n  color: #0B7FC7;\n}\n\n.graphiql-container .arg-name {\n  color: #8B2BB9;\n}\n\n.graphiql-container .arg {\n  display: block;\n  margin-left: 1em;\n}\n\n.graphiql-container .arg:first-child:last-child,\n.graphiql-container .arg:first-child:nth-last-child(2),\n.graphiql-container .arg:first-child:nth-last-child(2) ~ .arg {\n  display: inherit;\n  margin: inherit;\n}\n\n.graphiql-container .arg:first-child:nth-last-child(2):after {\n  content: ", ";\n}\n\n.graphiql-container .arg-default-value {\n  color: #43A047;\n}\n\n.graphiql-container .doc-deprecation {\n  background: #fffae8;\n  -webkit-box-shadow: inset 0 0 1px #bfb063;\n          box-shadow: inset 0 0 1px #bfb063;\n  color: #867F70;\n  line-height: 16px;\n  margin: 8px -8px;\n  max-height: 80px;\n  overflow: hidden;\n  padding: 8px;\n  border-radius: 3px;\n}\n\n.graphiql-container .doc-deprecation:before {\n  content: "Deprecated:";\n  color: #c79b2e;\n  cursor: default;\n  display: block;\n  font-size: 9px;\n  font-weight: bold;\n  letter-spacing: 1px;\n  line-height: 1;\n  padding-bottom: 5px;\n  text-transform: uppercase;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.graphiql-container .doc-deprecation > :first-child {\n  margin-top: 0;\n}\n\n.graphiql-container .doc-deprecation > :last-child {\n  margin-bottom: 0;\n}\n\n.graphiql-container .show-btn {\n  -webkit-appearance: initial;\n  display: block;\n  border-radius: 3px;\n  border: solid 1px #ccc;\n  text-align: center;\n  padding: 8px 12px 10px;\n  width: 100%;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  background: #fbfcfc;\n  color: #555;\n  cursor: pointer;\n}\n\n.graphiql-container .search-box {\n  border-bottom: 1px solid #d3d6db;\n  display: block;\n  font-size: 14px;\n  margin: -15px -15px 12px 0;\n  position: relative;\n}\n\n.graphiql-container .search-box:before {\n  content: "\\26b2";\n  cursor: pointer;\n  display: block;\n  font-size: 24px;\n  position: absolute;\n  top: -2px;\n  -webkit-transform: rotate(-45deg);\n          transform: rotate(-45deg);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.graphiql-container .search-box .search-box-clear {\n  background-color: #d0d0d0;\n  border-radius: 12px;\n  color: #fff;\n  cursor: pointer;\n  font-size: 11px;\n  padding: 1px 5px 2px;\n  position: absolute;\n  right: 3px;\n  top: 8px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.graphiql-container .search-box .search-box-clear:hover {\n  background-color: #b9b9b9;\n}\n\n.graphiql-container .search-box > input {\n  border: none;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  font-size: 14px;\n  outline: none;\n  padding: 6px 24px 8px 20px;\n  width: 100%;\n}\n\n.graphiql-container .error-container {\n  font-weight: bold;\n  left: 0;\n  letter-spacing: 1px;\n  opacity: 0.5;\n  position: absolute;\n  right: 0;\n  text-align: center;\n  text-transform: uppercase;\n  top: 50%;\n  -webkit-transform: translate(0, -50%);\n          transform: translate(0, -50%);\n}\n.CodeMirror-foldmarker {\n  color: blue;\n  cursor: pointer;\n  font-family: arial;\n  line-height: .3;\n  text-shadow: #b9f 1px 1px 2px, #b9f -1px -1px 2px, #b9f 1px -1px 2px, #b9f -1px 1px 2px;\n}\n.CodeMirror-foldgutter {\n  width: .7em;\n}\n.CodeMirror-foldgutter-open,\n.CodeMirror-foldgutter-folded {\n  cursor: pointer;\n}\n.CodeMirror-foldgutter-open:after {\n  content: "\\25BE";\n}\n.CodeMirror-foldgutter-folded:after {\n  content: "\\25B8";\n}\n.graphiql-container .history-contents {\n  font-family: "Consolas", "Inconsolata", "Droid Sans Mono", "Monaco", monospace;\n  padding: 0;\n}\n\n.graphiql-container .history-contents p {\n  font-size: 12px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin: 0;\n  padding: 8px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.graphiql-container .history-contents p:hover {\n  cursor: pointer;\n}\n.CodeMirror-info {\n  background: white;\n  border-radius: 2px;\n  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.45);\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.45);\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #555;\n  font-family:\n    system,\n    -apple-system,\n    "San Francisco",\n    ".SFNSDisplay-Regular",\n    "Segoe UI",\n    Segoe,\n    "Segoe WP",\n    "Helvetica Neue",\n    helvetica,\n    "Lucida Grande",\n    arial,\n    sans-serif;\n  font-size: 13px;\n  line-height: 16px;\n  margin: 8px -8px;\n  max-width: 400px;\n  opacity: 0;\n  overflow: hidden;\n  padding: 8px 8px;\n  position: fixed;\n  -webkit-transition: opacity 0.15s;\n  transition: opacity 0.15s;\n  z-index: 50;\n}\n\n.CodeMirror-info :first-child {\n  margin-top: 0;\n}\n\n.CodeMirror-info :last-child {\n  margin-bottom: 0;\n}\n\n.CodeMirror-info p {\n  margin: 1em 0;\n}\n\n.CodeMirror-info .info-description {\n  color: #777;\n  line-height: 16px;\n  margin-top: 1em;\n  max-height: 80px;\n  overflow: hidden;\n}\n\n.CodeMirror-info .info-deprecation {\n  background: #fffae8;\n  -webkit-box-shadow: inset 0 1px 1px -1px #bfb063;\n          box-shadow: inset 0 1px 1px -1px #bfb063;\n  color: #867F70;\n  line-height: 16px;\n  margin: -8px;\n  margin-top: 8px;\n  max-height: 80px;\n  overflow: hidden;\n  padding: 8px;\n}\n\n.CodeMirror-info .info-deprecation-label {\n  color: #c79b2e;\n  cursor: default;\n  display: block;\n  font-size: 9px;\n  font-weight: bold;\n  letter-spacing: 1px;\n  line-height: 1;\n  padding-bottom: 5px;\n  text-transform: uppercase;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.CodeMirror-info .info-deprecation-label + * {\n  margin-top: 0;\n}\n\n.CodeMirror-info a {\n  text-decoration: none;\n}\n\n.CodeMirror-info a:hover {\n  text-decoration: underline;\n}\n\n.CodeMirror-info .type-name {\n  color: #CA9800;\n}\n\n.CodeMirror-info .field-name {\n  color: #1F61A0;\n}\n\n.CodeMirror-info .enum-value {\n  color: #0B7FC7;\n}\n\n.CodeMirror-info .arg-name {\n  color: #8B2BB9;\n}\n\n.CodeMirror-info .directive-name {\n  color: #B33086;\n}\n.CodeMirror-jump-token {\n  text-decoration: underline;\n  cursor: pointer;\n}\n/* The lint marker gutter */\n.CodeMirror-lint-markers {\n  width: 16px;\n}\n\n.CodeMirror-lint-tooltip {\n  background-color: infobackground;\n  border-radius: 4px 4px 4px 4px;\n  border: 1px solid black;\n  color: infotext;\n  font-family: monospace;\n  font-size: 10pt;\n  max-width: 600px;\n  opacity: 0;\n  overflow: hidden;\n  padding: 2px 5px;\n  position: fixed;\n  -webkit-transition: opacity .4s;\n  transition: opacity .4s;\n  white-space: pre-wrap;\n  z-index: 100;\n}\n\n.CodeMirror-lint-mark-error, .CodeMirror-lint-mark-warning {\n  background-position: left bottom;\n  background-repeat: repeat-x;\n}\n\n.CodeMirror-lint-mark-error {\n  background-image:\n  url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==")\n  ;\n}\n\n.CodeMirror-lint-mark-warning {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=");\n}\n\n.CodeMirror-lint-marker-error, .CodeMirror-lint-marker-warning {\n  background-position: center center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  display: inline-block;\n  height: 16px;\n  position: relative;\n  vertical-align: middle;\n  width: 16px;\n}\n\n.CodeMirror-lint-message-error, .CodeMirror-lint-message-warning {\n  background-position: top left;\n  background-repeat: no-repeat;\n  padding-left: 18px;\n}\n\n.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=");\n}\n\n.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=");\n}\n\n.CodeMirror-lint-marker-multiple {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC");\n  background-position: right bottom;\n  background-repeat: no-repeat;\n  width: 100%; height: 100%;\n}\n.graphiql-container .spinner-container {\n  height: 36px;\n  left: 50%;\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  width: 36px;\n  z-index: 10;\n}\n\n.graphiql-container .spinner {\n  -webkit-animation: rotation .6s infinite linear;\n          animation: rotation .6s infinite linear;\n  border-bottom: 6px solid rgba(150, 150, 150, .15);\n  border-left: 6px solid rgba(150, 150, 150, .15);\n  border-radius: 100%;\n  border-right: 6px solid rgba(150, 150, 150, .15);\n  border-top: 6px solid rgba(150, 150, 150, .8);\n  display: inline-block;\n  height: 24px;\n  position: absolute;\n  vertical-align: middle;\n  width: 24px;\n}\n\n@-webkit-keyframes rotation {\n  from { -webkit-transform: rotate(0deg); transform: rotate(0deg); }\n  to { -webkit-transform: rotate(359deg); transform: rotate(359deg); }\n}\n\n@keyframes rotation {\n  from { -webkit-transform: rotate(0deg); transform: rotate(0deg); }\n  to { -webkit-transform: rotate(359deg); transform: rotate(359deg); }\n}\n.CodeMirror-hints {\n  background: white;\n  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.45);\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.45);\n  font-family: "Consolas", "Inconsolata", "Droid Sans Mono", "Monaco", monospace;\n  font-size: 13px;\n  list-style: none;\n  margin-left: -6px;\n  margin: 0;\n  max-height: 14.5em;\n  overflow-y: auto;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  z-index: 10;\n}\n\n.CodeMirror-hint {\n  border-top: solid 1px #f7f7f7;\n  color: #141823;\n  cursor: pointer;\n  margin: 0;\n  max-width: 300px;\n  overflow: hidden;\n  padding: 2px 6px;\n  white-space: pre;\n}\n\nli.CodeMirror-hint-active {\n  background-color: #08f;\n  border-top-color: white;\n  color: white;\n}\n\n.CodeMirror-hint-information {\n  border-top: solid 1px #c0c0c0;\n  max-width: 300px;\n  padding: 4px 6px;\n  position: relative;\n  z-index: 1;\n}\n\n.CodeMirror-hint-information:first-child {\n  border-bottom: solid 1px #c0c0c0;\n  border-top: none;\n  margin-bottom: -1px;\n}\n\n.CodeMirror-hint-deprecation {\n  background: #fffae8;\n  -webkit-box-shadow: inset 0 1px 1px -1px #bfb063;\n          box-shadow: inset 0 1px 1px -1px #bfb063;\n  color: #867F70;\n  font-family:\n    system,\n    -apple-system,\n    "San Francisco",\n    ".SFNSDisplay-Regular",\n    "Segoe UI",\n    Segoe,\n    "Segoe WP",\n    "Helvetica Neue",\n    helvetica,\n    "Lucida Grande",\n    arial,\n    sans-serif;\n  font-size: 13px;\n  line-height: 16px;\n  margin-top: 4px;\n  max-height: 80px;\n  overflow: hidden;\n  padding: 6px;\n}\n\n.CodeMirror-hint-deprecation .deprecation-label {\n  color: #c79b2e;\n  cursor: default;\n  display: block;\n  font-size: 9px;\n  font-weight: bold;\n  letter-spacing: 1px;\n  line-height: 1;\n  padding-bottom: 5px;\n  text-transform: uppercase;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.CodeMirror-hint-deprecation .deprecation-label + * {\n  margin-top: 0;\n}\n\n.CodeMirror-hint-deprecation :last-child {\n  margin-bottom: 0;\n}\n\n\n.searchPane {    \n    height: 100vh;\n    border-right: 1px solid #c3c3c3;\n    min-height: 600px;\n    overflow-y: auto;\n    float: left;\n    left: 0;\n    top: 0;\n}\n\n.searchItem:hover {\n    cursor: pointer;    \n}\n\n.NoResponse .resultWrap{\n    display:none;\n}\n\n.NoResponse .graphiql-container {\n    width: 50%;\n}\n\n.graphiql-container .execute-button-wrap {\n    position: absolute !important;\n    left: 3rem !important;\n    top: 10px !important;\n    display: none;\n} \n\n.execute-button {\n    border-radius: 0 !important;\n    color: white !important;\n    width: 150px !important;\n    justify-content: center !imporant;\n    text-align: center !important;\n    background: rgb(144, 23, 23) !important;\n    box-shadow: rgba(0, 0, 0, 0.133) 0px 1.6px 3.6px 0px, rgba(0, 0, 0, 0.11) 0px 0.3px 0.9px 0px !important;\n}\n\n.execute-button > svg {\n    display: none !important;\n}\n\n.execute-button:after {\n    content: "Run";\n}\n\n.graphiql-container {\n    width: 80%\n}\n\n.graphiql-container .topBar,\n.graphiql-container .docExplorerShow,\n.graphiql-container .execute-button {\n  background: linear-gradient(#e2e2e2, #f7f7f7);\n}\n.graphiql-container,\n.CodeMirror-hints-wrapper {\n  filter: invert(90%);\n}\n\n.queryWrap {\n    flex: 1 !important;\n}\n\n',ErrorBoundary:".ErrorPane {\n    position: fixed;\n    top: 10%;\n    left: 10%;\n    background-color: white;\n    z-index: 9999;\n    margin-top: 5px;\n    border: 1px solid #848484;\n    padding: 5px;\n    width: 80%;\n    height: 80%;\n    overflow: scroll;\n}\n\n.ErrorPane details {\n    margin-left: 10%;\n    margin-top: 20px;\n}\n\n.ErrorPane h2 {\n    margin-left: 20vw;\n}\n\n",EntityMapper:".toolbarmenu {\n    width: auto !important\n}\n.mapper-adv{\n    padding-top: 3px;\n}\n\n",DynamicWidgetParameter:"/* add css styles to the component */\n\n",DynaForm:".MuiAppBar-colorPrimary {\n    color: #161616 !important;\n    background-color: #ffffff !important;\n}\n\n.bx--text-input--light:disabled {\n    border-bottom: 1px solid #bdbaba !important;\n}\n\n.bx--label--disabled, .bx--form__helper-text--disabled {\n    color: #5e5e5e !important;\n}\n\n.bx--text-input:disabled {\n    color: #5e5e5e !important;\n}\n\n.MuiTypography-root {    \n    margin-bottom: 15px;\n    padding-bottom: 15px;\n    border-bottom: 1px solid #44584a;\n}\n\n.MuiPaper-elevation1, .MuiPaper-elevation2, .MuiPaper-elevation3, .MuiPaper-elevation4, .MuiPaper-elevation5, .MuiPaper-elevation6 {\n    box-shadow: 0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%) !important;\n}\n\n.MuiGrid-root {\n    padding: 5px !important;\n}\n\n",DataLoader:"/* add css styles to the component */\n\n",CustomCellRenderer:"/* add css styles to the component */\n\n",CodeEditor:".resizable-sidebar {\n  overflow: auto;\n  resize: horizontal;\n  max-width: 40%;\n  min-width: 2%;\n}\n\n.sr-editorial-space > .content {\n  overflow: hidden;\n  resize: vertical;\n  max-height: 100%;\n  min-height: 20%;\n  height: 75%;\n}\n\n.editorNormal {\n    background-color: #1e1e1e;\n    width: 100%;\n    height: 100%;\n}\n\n.cancelPreview {\n  position: fixed;\n  z-index: 99999;\n  background-color: white;\n  top: 8%;\n  float: right;\n  border: 1px solid black;\n  border-radius: 50%;\n  right: 9%;\n  color: black;\n}\n\n.cancelPreview:hover {\n  border: 1px solid #4f7955;\n  cursor: pointer;\n}\n\n.editorFullScreen {\n  background-color: #1E1E1E;\n  position:fixed;\n  top: 3rem;\n  left: 0px;\n  z-index:5000;\n  width:100%;\n}\n\n.editorToolkit {\n  width: fit-content;\n  position: absolute;\n  z-index: 999;\n  top: 30px;\n  right: 0;\n  background-color: #7CB985;\n  color: black;\n  text-align: center;\n}\n\n.react-monaco-editor-container {\n    padding-top:10px;\n    \n}\n\n.editorViewMode {\n  color: black;\n  background-color: #dadfe8;\n  float: left;\n  padding-left: 5px;\n  padding-right: 5px;\n  text-align: center;\n}\n\n.editorViewMode:hover {\n  color: blue;\n  cursor: pointer;\n}\n\n.saveFile, .deleteFile {\n    color: white;\n    float: left;\n    background-color: #374b98;\n    padding-left: 10px;\n    padding-right: 10px;\n    text-align: center;\n}\n\n\n.saveFile:hover, .showHidePreview:hover, .deleteFile:hover {\n    color: blue;\n    cursor: pointer;\n}\n\n.showCSSorJS {\n  color:black;\n  float: left;\n  background-color: aqua;\n  padding-right: 10px;\n  padding-left: 10px;\n  text-align: center;\n}\n\n.showCSSorJS:hover {\n  cursor: pointer;\n  color: blue;\n}\n\n.editorsLayout {       \n    float: left;\n    display: block;\n}\n\n.editor {\n    position:relative;\n    left:10px;        \n    float: left;\n    margin-left: 20px;\n    display: block;\n}\n.top-level {\n    margin-left: 2px;\n    height: fit-content;\n}\n\n.link2Btn {\n   color: white!important;\n   decoration: none;\n   text-decoration: none!important;\n   margin: 0!important;\n   margin-left: 10px!important;\n}\n\n.dependentsPane {\n    width: 18%;\n    position:relative;\n    float: left;\n    left: 3%;\n    top: 100px;\n}\n\n.searchPane {\n    width:19%;\n    position: relative;\n    height: 100%;\n    overflow-y: auto;\n    overflow-x: hidden;\n    float: left;\n    left: 0;\n    top: 0;\n}\n\n.content {\n    position: relative;\n    float: left;\n    padding-left: 2px;\n    width: 100%;    \n}\n\n.searchResults {\n    height: 70vh;\n    overflow-y: auto;\n    overflow-x: hidden;\n    padding: 10px;\n}\n\n.searchItem {\n    width: 75%;\n    height:30px;\n    background-color:white;\n    color: rgb(38,164,156); \n    padding-left:10px;\n    padding-top:4px;\n    border-bottom: 1px solid grey;    \n}\n\n.searchItem:hover {\n    cursor: pointer;\n    background-color: rgb(38,164,156);\n    color: rgb(210, 230, 209);\n    border: 1px solid white;\n    font-weight: 400;\n}\n\n.operationalButtons {\n    margin-right: 10px;\n}\n\n.dependentsHeader {\n    color: #26a69a;\n    text-decoration: underline;\n    font-size: large;\n    margin-bottom: 10px;\n}\n\n.dependentItem {\n    margin-left: 15px;\n    width:50%;\n    text-align:left;\n    font-style: italic;\n    margin-top: 10px;\n    font-size: smaller;\n}\n\n.dependentItem:hover {\n    cursor:pointer;\n    width:50%;\n    text-align:left;\n    margin-left: 15px;    \n    margin-top: 10px;\n    color:white;\n    font-size: small;\n    background-color: #26a69a;\n}\n\n.searchScopeHeader {\n    font-style: italic;\n    color: black;\n}\n\n.editor-toolkit {\n    z-index:99999;\n    position:relative;\n    float: left;\n    left: 0;\n    width: 70px;\n    border: 1px solid green;\n    border-top:  1px solid green;\n    border-right:  1px solid green;\n    border-left: 1px solid green;\n    height: 20px;\n    text-align: center;\n    bottom: 5px;\n    color: #45215f;\n    font-size: small;\n    font-weight: 800;\n    background-color: #fbfbfb;\n}\n\n.editor-toolkit:hover {\n    cursor: pointer;\n    background-color: #eae3e3;\n}\n\n.previewPane {\n    position: fixed;\n    top: 10%;\n    left: 10%;\n    background-color: white;\n    z-index: 9999;\n    margin-top: 5px;\n    border: 1px solid #848484;\n    padding: 5px;\n    width: 80%;\n    height: 80%;\n    overflow: scroll;\n}\n\n.screenOverlay {\n  position: fixed;\n  background-color: #000000;\n  opacity: 0.5;\n  z-index: 9999;\n  top: 0px;\n  left: 0px;\n  height: 2000px;\n  width: 2000px;\n}\n\n.propertiesPane {\n  position:relative;\n  clear:both;\n  float:left;\n  left: 0px;\n  background-color: whitesmoke;\n  width:20%;\n  height: 250px;\n  margin-top: 1px;\n  border: 1px solid lightgray;\n}\n\n.footerPane {\n  position:relative;\n  min-height: 25%;\n  height: 100%;\n  float:left;\n  margin-left: 2px; \n  padding-left: 2px;\n  width: 100%;\n  min-height: 25%;\n  background-color: whitesmoke;\n  overflow-x: hidden;\n  overflow-y: auto;\n  z-index: 100;\n}\n\n.sr-new-file-menu{\n  padding: 15px;\n}\n.sr-new-file{\n  font-weight: 600;\n    padding-left: 50px;\n    position: absolute;\n    padding-top: 9px;\n}\n\n/* .footerTabs {\n  height: 30px;\n  background-color: #dcdada;\n} */\n\n/* .footerTab {\n  width: max-content;\n  background-color: #f5f5f5;\n  min-width: 10%;\n  margin-left: 3px;\n  float: left;\n  position: relative;\n  top: 7px;\n  border-left: 1px solid gray;\n  text-align: center;\n  border-top: 1px solid gray;\n  border-right: 1px solid gray;\n  height: 22px;\n  } */\n\n.bx--tabs.footerTabs {\n    position: sticky;\n    top: 0;\n    z-index: 100;\n    background-color: #f3f3f3;\n}\n\n.sr-editorial-space{\n    width:81%;\n    float: left;\n    height: 95vh;\n    overflow: hidden;\n}\n\n.footerContents {\n  overflow:visible;\n  scroll-behavior:  initial;\n  margin-top:1%;\n}\n\n.footerTab:hover {\n    cursor: pointer;    \n    color: white;\n}\n\n.contentTabs {\n    -ms-overflow-style: none;  /* Internet Explorer 10+ */\n    scrollbar-width: none;  /* Firefox */\n}\n.contentTabs::-webkit-scrollbar { \n    display: none;  /* Safari and Chrome */\n}\n\n.contentTabs {\n    min-height: 27px;\n    background-color: #c3c3c3;\n    width: 100%;\n    display: inline-flex;\n    margin-bottom: -5px;\n    position: relative;\n    z-index: 9;\n    height: 30px;\n    overflow-x: scroll;\n}\n\n.contentTab {\n  font-size: smaller;\n  color: black;\n  position: relative;\n  float: left;\n  display: inline-block;\n  margin-top: 3px;\n  margin-left: 5px;\n  background-color: #e4e4e4;\n  padding: 3px;\n  width: auto;\n  min-width: 80px;\n  text-align: center;\n  height: auto;\n}\n\n.contentTabActive {\n  font-size: smaller;\n  color: black;\n  cursor: crosshair;\n  position: relative;\n  display: block;\n  float: left;\n  margin-top: 4px;\n  margin-left: 5px;\n  background-color: white;\n  padding: 3px;\n  width: max-content;\n  min-width: 80px;\n  text-align: center;\n  height: 23px;\n  border-bottom: 2px solid #ff4f6b;\n}\n\n.contentTab:hover, .contentTabActive:hover {\n  background-color: white;\n  cursor: default;\n}\n\n.showHidePreview {\n    float: left;\n    color: white;\n    padding-left: 10px;\n    padding-right: 10px;\n    background-color: red;\n}\n\n.closeTab:hover {\n  cursor: pointer;\n  background-color: #dadada;\n}\n\nsvg.closeTab {\n    margin-top: 3px;\n    height: 23px;\n}\n\n.contentTabItems {\n    display: inline-flex;\n}\n.caret{\n    position: absolute;\n    right: 0;\n    top: 20px;\n}\n.sr-carb-sele{\n  height: 42px;\n  margin-bottom: 5px;\n}\n\n.sr-carb-items-search{\n  height: 42px;\n  width: 98%; \n  margin-bottom: 5px;\n}\n.searchPane .bx--text-input__field-wrapper{\n  width: 98%;\n  margin-bottom: 5px;\n}\n.searchPane .bx--form-item{\n  margin-top: 5px\n}\n.searchPane .bx--btn--primary{\n  margin-top: 5px;\n}\n\n.bx--side-nav {\n    position: relative !important;\n}\n.bx--side-nav li {\n    list-style-type: none;\n}\n.bx--side-nav__navigation {\n    z-index: 10 !important;\n}\n\n"}}),{setters:[],execute:function(){}}}),System.register("component/studio/AGraphiQLView.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","component/studio/GraphiQLView/Definition.js","component/studio/GraphiQLView/Style.css!css","react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,GraphiQLView,React,_AGraphiQLView,AGraphiQLView,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_componentStudioGraphiQLViewDefinitionJs){GraphiQLView=_componentStudioGraphiQLViewDefinitionJs.default},function(_componentStudioGraphiQLViewStyleCssCss){},function(_react){React=_react.default}],execute:function(){_AGraphiQLView=function(_React$Component){function _AGraphiQLView(props){_classCallCheck(this,_AGraphiQLView);var _this=_possibleConstructorReturn(this,(_AGraphiQLView.__proto__||Object.getPrototypeOf(_AGraphiQLView)).call(this,props));return _this.state={fetcher:_this.props.fetcher,query:"",variables:"",response:"",schema:void 0,operationName:null,storage:null,defaultQuery:null,onEditQuery:null,onEditVariables:null,onEditOperationName:null,getDefaultFieldNames:null},_this}return _inherits(_AGraphiQLView,_React$Component),_createClass(_AGraphiQLView,[{key:"handleClickPrettifyButton",value:function(event){var editor=this.graphiql.getQueryEditor(),currentText=editor.getValue(),_require=require("graphql"),parse=_require.parse,prettyText=(0,_require.print)(parse(currentText));editor.setValue(prettyText)}},{key:"render",value:function(){var _this2=this;return React.createElement(GraphiQLView,_extends({ref:function(c){_this2.graphiql=c}},this.state),React.createElement(GraphiQLView.Toolbar,null,"// GraphiQL.Button usage",React.createElement(GraphiQLView.Button,{onClick:this.handleClickPrettifyButton,label:"Prettify",title:"Prettify Query (Shift-Ctrl-P)"}),"// Some other possible toolbar items",React.createElement(GraphiQLView.Menu,{label:"File",title:"File"},React.createElement(GraphiQL.MenuItem,{label:"Save",title:"Save"}))))}}]),_AGraphiQLView}(React.Component),_export("AGraphiQLView",AGraphiQLView=function(props){return _AGraphiQLView}),_export("AGraphiQLView",AGraphiQLView),_export("default",AGraphiQLView),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/AGraphiQLView/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","component/studio/GraphiQLView/Definition.js","component/studio/GraphiQLView/Style.css!css","react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,GraphiQLView,React,_AGraphiQLView,AGraphiQLView;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_componentStudioGraphiQLViewDefinitionJs){GraphiQLView=_componentStudioGraphiQLViewDefinitionJs.default},function(_componentStudioGraphiQLViewStyleCssCss){},function(_react){React=_react.default}],execute:function(){_AGraphiQLView=function(_React$Component){function _AGraphiQLView(props){_classCallCheck(this,_AGraphiQLView);var _this=_possibleConstructorReturn(this,(_AGraphiQLView.__proto__||Object.getPrototypeOf(_AGraphiQLView)).call(this,props));return _this.state={fetcher:_this.props.fetcher,query:"",variables:"",response:"",schema:void 0,operationName:null,storage:null,defaultQuery:null,onEditQuery:null,onEditVariables:null,onEditOperationName:null,getDefaultFieldNames:null},_this}return _inherits(_AGraphiQLView,_React$Component),_createClass(_AGraphiQLView,[{key:"handleClickPrettifyButton",value:function(event){var editor=this.graphiql.getQueryEditor(),currentText=editor.getValue(),_require=require("graphql"),parse=_require.parse,prettyText=(0,_require.print)(parse(currentText));editor.setValue(prettyText)}},{key:"render",value:function(){var _this2=this;return React.createElement(GraphiQLView,_extends({ref:function(c){_this2.graphiql=c}},this.state),React.createElement(GraphiQLView.Toolbar,null,"// GraphiQL.Button usage",React.createElement(GraphiQLView.Button,{onClick:this.handleClickPrettifyButton,label:"Prettify",title:"Prettify Query (Shift-Ctrl-P)"}),"// Some other possible toolbar items",React.createElement(GraphiQLView.Menu,{label:"File",title:"File"},React.createElement(GraphiQL.MenuItem,{label:"Save",title:"Save"}))))}}]),_AGraphiQLView}(React.Component),_export("AGraphiQLView",AGraphiQLView=function(props){return _AGraphiQLView}),_export("AGraphiQLView",AGraphiQLView)}}}),System.register("component/studio/BlankComponent.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_BlankComponent_,BlankComponent,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_BlankComponent_=function(_React$Component){function _BlankComponent_(){return _classCallCheck(this,_BlankComponent_),_possibleConstructorReturn(this,(_BlankComponent_.__proto__||Object.getPrototypeOf(_BlankComponent_)).apply(this,arguments))}return _inherits(_BlankComponent_,_React$Component),_createClass(_BlankComponent_,[{key:"render",value:function(){return React.createElement("div",{style:{height:0}})}}]),_BlankComponent_}(React.Component),_export("BlankComponent",BlankComponent=function(props){return _BlankComponent_}),_export("BlankComponent",BlankComponent),_export("default",BlankComponent),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/BlankComponent/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_BlankComponent_,BlankComponent;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_BlankComponent_=function(_React$Component){function _BlankComponent_(){return _classCallCheck(this,_BlankComponent_),_possibleConstructorReturn(this,(_BlankComponent_.__proto__||Object.getPrototypeOf(_BlankComponent_)).apply(this,arguments))}return _inherits(_BlankComponent_,_React$Component),_createClass(_BlankComponent_,[{key:"render",value:function(){return React.createElement("div",{style:{height:0}})}}]),_BlankComponent_}(React.Component),_export("BlankComponent",BlankComponent=function(props){return _BlankComponent_}),_export("BlankComponent",BlankComponent)}}}),System.register("component/studio/CodeEditor.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/studio/StudioUtil.js","client/script/studio/StudioFormUtil.js","carbon-components-react","@carbon/icons-react/lib/close/20","@carbon/icons-react/lib/add--alt/32","lodash.clonedeep","lodash.debounce"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MonacoEditor,StudioUtil,StudioFormUtil,Select,SelectItem,TextInput,OverflowMenu,OverflowMenuItem,Close20,AddAlt32,cloneDeep,debounce,codeEditorScope,CodeEditor,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_clientScriptStudioStudioUtilJs){StudioUtil=_clientScriptStudioStudioUtilJs.StudioUtil},function(_clientScriptStudioStudioFormUtilJs){StudioFormUtil=_clientScriptStudioStudioFormUtilJs.StudioFormUtil},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput,OverflowMenu=_carbonComponentsReact.OverflowMenu,OverflowMenuItem=_carbonComponentsReact.OverflowMenuItem},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibAddAlt){AddAlt32=_carbonIconsReactLibAddAlt.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){history.pushState(null,null,location.href),window.onpopstate=function(){history.go(1)},codeEditorScope={Container:function(_React$Component){function Container(props){_classCallCheck(this,Container);var _this=_possibleConstructorReturn(this,(Container.__proto__||Object.getPrototypeOf(Container)).call(this,props));return _this.studioUtil=new StudioUtil,_this.studioUtil.bindAllMethods.bind(_this)(),_this.state=_this.studioUtil.getInitialState(),_this.state.editor.height=.8*screen.height,_this.topElement=React.createRef(),_this.studioFormUtil=new StudioFormUtil,_this.editorDidMount=_this.editorDidMount.bind(_this),_this.editor=null,_this.editorModel=null,_this.editorModelViewState=null,_this.activeFileIndex=-1,_this.editorContent=null,_this.restoreEditor=_this.restoreEditor.bind(_this),_this.getModels(_this.refreshModels.bind(_this)),_this.resizeSideBarGrid=_this.resizeSideBarGrid.bind(_this),_this.resizeSideBarGridDebounceFn=debounce(function(){_this.resizeSideBarGrid()}),_this.resizeFooterPaneGrid=_this.resizeFooterPaneGrid.bind(_this),window.addEventListener("resize",self.resizeSideBarGridDebounceFn),_this}return _inherits(Container,_React$Component),_createClass(Container,[{key:"resizeSideBarGrid",value:function(){var self=this,parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".searchPane",this.props.shadow).length>0?$(".searchPane",this.props.shadow):$(".searchPane",parentNode),topLevelEl=$(".top-level",this.props.shadow).length>0?$(".top-level",this.props.shadow):$(".top-level",parentNode),contentAreaEl=$(".sr-editorial-space",this.props.shadow).length>0?$(".sr-editorial-space",this.props.shadow):$(".sr-editorial-space",parentNode);if(searchPane.length>0){var searchPaneRect=searchPane[0].getBoundingClientRect(),contentAreaWidth=topLevelEl[0].getBoundingClientRect().width-searchPaneRect.width-5;setTimeout(function(){contentAreaEl.width(contentAreaWidth),window.removeEventListener("resize",self.resizeSideBarGridDebounceFn),window.addEventListener("resize",self.resizeSideBarGridDebounceFn)})}}},{key:"resizeFooterPaneGrid",value:function(){var parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,contentPane=$(".sr-editorial-space > .content",this.props.shadow).length>0?$(".sr-editorial-space > .content",this.props.shadow):$(".sr-editorial-space > .content",parentNode),topLevelEl=$(".sr-editorial-space",this.props.shadow).length>0?$(".sr-editorial-space",this.props.shadow):$(".sr-editorial-space",parentNode),footerPane=$(".sr-editorial-space > .footerPane",this.props.shadow).length>0?$(".sr-editorial-space > .footerPane",this.props.shadow):$(".sr-editorial-space > .footerPane",parentNode);if(contentPane.length>0){var contentPaneRect=contentPane[0].getBoundingClientRect(),footerPaneHeight=topLevelEl[0].getBoundingClientRect().height-contentPaneRect.height;footerPane.height(footerPaneHeight);var editorState=cloneDeep(this.state.editor);editorState.height=contentPaneRect.height,this.setState({editor:editorState})}}},{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var self,parentNode,searchPane,checkResize,contentPane,_checkResize;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return self=this,this.searchChanged(),parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".searchPane",this.props.shadow).length>0?$(".searchPane",this.props.shadow):$(".searchPane",parentNode),window.addEventListener("focus",self.resizeSideBarGridDebounceFn),window.addEventListener("focus",this.resizeSideBarGridDebounceFn),searchPane&&searchPane.length>0&&(checkResize=function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}},searchPane[0].addEventListener("resize",this.resizeSideBarGridDebounceFn),new MutationObserver(checkResize).observe(searchPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})),(contentPane=$(".sr-editorial-space > .content",this.props.shadow).length>0?$(".sr-editorial-space > .content",this.props.shadow):$(".sr-editorial-space > .content",parentNode))&&contentPane.length>0&&(_checkResize=function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}},contentPane[0].addEventListener("resize",this.resizeFooterPaneGrid),new MutationObserver(_checkResize).observe(contentPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})),_context.next=11,this.fetchRecord(this.props.recordid,this.props.contenttype);case 11:this.setState({reload:this.state.reload});case 12:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUnmount",value:function(){window.removeEventListener("resize",this.resizeSideBarGridDebounceFn)}},{key:"componentDidUpdate",value:function(prevProps){var _this2=this;if(prevProps.ide_reload!=this.props.ide_reload&&this.setState({reload:!this.state.reload}),prevProps.showpreview==this.props.showpreview||prevProps.showpreview_target==this.props.showpreview_target||"ide_state"!=this.props.showpreview_target&&"ide_actions"!=this.props.showpreview_target&&"ide_props"!=this.props.showpreview_target&&"ide_deps"!=this.props.showpreview_target||(this.setState({showWebComponentPreview:this.props.showpreview,showPreviewTarget:this.props.showpreview_target}),0==this.props.showpreview&&this.restoreEditor()),this.activeFileIndex>-1&&this.refs)if(this.refs["file"+this.activeFileIndex])setTimeout(function(){return _this2.refs["file"+_this2.activeFileIndex].scrollIntoView({block:"end",behavior:"smooth"})},100);else{var lastFileIndx=-1;Object.keys(this.refs).map(function(refKey){if(refKey.indexOf("file")>-1){var fileIndx=parseInt(refKey.split("file")[1]);fileIndx>lastFileIndx&&(lastFileIndx=fileIndx)}}),setTimeout(function(){return _this2.refs["file"+lastFileIndx].scrollIntoView({block:"end",behavior:"smooth"})},100)}}},{key:"componentDidCatch",value:function(error,info){console.log("error = "+error)}},{key:"editorDidMount",value:function(editor,monaco){monaco.languages.registerCompletionItemProvider("javascript",{provideCompletionItems:function(model,position){return[{label:'let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',documentation:"Utility to get the records"},{label:'let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',documentation:"Utility to get the record count of the matching filter"},{label:'createRecord = await $qry.createRecord("[model]_[scope]", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - createRecord = await $qry.createRecord("[model]_[scope]", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to create a new record"},{label:'updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to update an existing record"},{label:'deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',documentation:"Utility to delete a record"},{label:'deleteRecords = await $qry.deleteRecords("[model]_[scope]", "{uid: {"inq": ["id1", "id"]}}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "filter")',documentation:"Utility to delete multiple records"},{label:'tableDelete = await $qry._run(`mutation($inputData:[Table]DestroyAllInput!) {\n\t\t[Table]DestroyAll(input:$inputData){\n\t\t\tobj\n\t\t}\t}`, { "inputData": { "where": { "[FieldName]":"${varname}"} } },\n\t\t"data.[Table]DestroyAll.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-delete",documentation:"Delete query to remove the records from the table"},{label:'$qry.run("{queryName}", "{variables}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'await $qry.run("{queryName}", "{variables}")',documentation:"Utility to mutate/fetch data from server using GraphQL"},{label:'tableRead = await $qry._run(`query($input:JSON){\n\t[Table]{\n\t\t[Table]Find(filter: $input) @_(get: "edges"){\n\t\t\tedges @_(keyBy: "node.uid", mapValues:"node"){\n\t\t\t\tnode{\n\t\t\t\t\tuid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}`, { "input": { "where": { "uid": "${varname}" } } },\n"data.[Table].[Table]Find");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-read",documentation:"Open query to get the data from the table"},{label:'tableUpsert = await $qry._run(`mutation($input: [Table]UpsertWithWhereInput!){\n\t[Table]UpsertWithWhere(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "where": { "uid": "${varname}" }, "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]UpsertWithWhere.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-upsert",documentation:"Query to update the data in the table"},{label:'tableCreate = await $qry._run(`mutation($input: [Table]CreateInput!){\n\t[Table]Create(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]Create.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-create",documentation:"Query to create the record with the data"}]}});this.editor=editor,this.monaco=monaco,this.editorModel=editor.getModel(),this.restoreEditor()}},{key:"restoreEditor",value:function(){var self=this,saveEditorValue=this.editor.setValue.bind(this.editor);this.editor.setValue=function(val){saveEditorValue(val),self.state.form.position?(self.editor.setPosition(self.state.form.position),self.editor.revealLine(self.state.form.position.lineNumber),self.editor.revealLineInCenter(self.state.form.position.lineNumber)):(self.editor.setPosition({lineNumber:1,column:1}),self.editor.revealLine(1),self.editor.revealLineInCenter(15)),self.editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:this.editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(this.editor._themeService._styleElement),this.editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"render",value:function(){var editorCode,searchResults=this.studioFormUtil.getSearchPaneDetails.bind(this)(),editorToolkit=this.studioFormUtil.getEditorToolKit.bind(this)(),previewPane=this.studioFormUtil.getPreviewContentPane.bind(this)(),footerTabs=this.studioFormUtil.getFooterTabs.bind(this)(),footerContent=this.studioFormUtil.getFooterContent.bind(this)(!0);if(this.state.form.mode)switch(this.state.form.mode){case"css":editorCode=this.state.form.css;break;case"html":editorCode=this.state.form.html;break;case"js":editorCode=this.state.form.code;break;case"import":editorCode=this.state.form.ImportScript;break;case"export":editorCode=this.state.form.ExportScript}else editorCode=this.state.form.code;var contentTabArry=[];if(this.state.openedForms){var _self=this;this.activeFileIndex=-1,this.state.openedForms.forEach(function(openedFile,indx){"contentTabActive"==openedFile.className&&(_self.activeFileIndex=indx),contentTabArry.push(React.createElement("div",{ref:"file"+indx,className:"contentTabItems"},React.createElement("div",{key:"-1",class:openedFile.className,onClick:function(){return _self.makeFormActive(openedFile)}},openedFile.fileName),React.createElement(Close20,{className:"closeTab",onClick:function(){return _self.removeForm(openedFile)}})))})}var contentTabs=React.createElement("div",{class:"contentTabs"},contentTabArry);this.topElement&&this.topElement.current&&(this.state.resetEditor&&(this.restoreEditor(),this.setState({resetEditor:!1})),this.editorContent=React.createElement(MonacoEditor,{width:this.state.editor.width,height:this.state.editor.height,language:"javascript",theme:"vs-dark",value:editorCode,defaultValue:editorCode,options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1},onChange:this.codeChanged,requireConfig:{url:"/thirdpartylib/require.js",paths:{vs:"/thirdpartylib/monaco/min/vs"}},editorWillMount:this.editorWillMount,editorDidMount:this.editorDidMount}));var notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{style:{position:"absolute",bottom:10,right:20}}):null;return React.createElement("div",{className:"top-level",ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ErrorBoundary/Style.css"); @import url("component/studio/CodeEditor/Style.css"); @import url("/thirdpartylib/monaco/min/vs/editor/editor.main.css")'),notificationBar,React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsMode.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/lib/typescriptServices.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsWorker.js"}),React.createElement("div",{className:"searchPane resizable-sidebar"},React.createElement("div",{className:"sr-new-file-menu"},React.createElement("label",{htmlFor:"button",className:"sr-new-file"},"New File"),React.createElement(OverflowMenu,{renderIcon:function(){return React.createElement(AddAlt32,null)},"data-floating-menu-container":"true"},React.createElement(OverflowMenuItem,{itemText:"Page",onClick:this.addNewFile,value:"page"}),React.createElement(OverflowMenuItem,{itemText:"Component",onClick:this.addNewFile,value:"component"}),React.createElement(OverflowMenuItem,{itemText:"Style",onClick:this.addNewFile,value:"style"}),React.createElement(OverflowMenuItem,{itemText:"Client Scripts",onClick:this.addNewFile,value:"client_script"}),React.createElement(OverflowMenuItem,{itemText:"Common Scripts",onClick:this.addNewFile,value:"common_script"}),React.createElement(OverflowMenuItem,{itemText:"Server Scripts",onClick:this.addNewFile,value:"server_script"}),React.createElement(OverflowMenuItem,{itemText:"Model",onClick:this.addNewFile,value:"model"}),React.createElement(OverflowMenuItem,{itemText:"Opertaion Hook",onClick:this.addNewFile,value:"operation_hook"}),React.createElement(OverflowMenuItem,{itemText:"Resources",onClick:this.addNewFile,value:"resource"}),React.createElement(OverflowMenuItem,{itemText:"Rendering Templates",onClick:this.addNewFile,value:"template"}),React.createElement(OverflowMenuItem,{itemText:"Rest Methods",onClick:this.addNewFile,value:"restmethod"}),React.createElement(OverflowMenuItem,{itemText:"Import Export",onClick:this.addNewFile,value:"import_export"}),React.createElement(OverflowMenuItem,{itemText:"Widget Actions",onClick:this.addNewFile,value:"widget_action"}),React.createElement(OverflowMenuItem,{itemText:"Page Actions",onClick:this.addNewFile,value:"page_action"}))),React.createElement(Select,{labelText:"Category",onChange:this.searchCategoryUpdated,value:this.state.search.ide_type,defaultValue:"component",id:"category",required:"required"},React.createElement(SelectItem,{value:"page",text:"Page"}),React.createElement(SelectItem,{value:"component",text:"Component"}),React.createElement(SelectItem,{value:"client_script",text:"Client Script"}),React.createElement(SelectItem,{value:"common_script",text:"Common Script"}),React.createElement(SelectItem,{value:"server_script",text:"Server Script"}),React.createElement(SelectItem,{value:"operation_hook",text:"Operation Hook"}),React.createElement(SelectItem,{value:"resource",text:"Resources"}),React.createElement(SelectItem,{value:"template",text:"Rendering Templates"}),React.createElement(SelectItem,{value:"restmethod",text:"Rest Methods"}),React.createElement(SelectItem,{value:"import_export",text:"Import Export"}),React.createElement(SelectItem,{value:"widget_action",text:"Widget Actions"}),React.createElement(SelectItem,{value:"page_action",text:"Page Actions"}),React.createElement(SelectItem,{value:"style",text:"Styles"})),React.createElement(TextInput,{placeholder:"Search here...",onChange:this.searchChanged,required:"required",className:"sr-search-bar"}),React.createElement("div",{className:"searchResults"},searchResults)),React.createElement("div",{className:"sr-editorial-space"},React.createElement("div",{className:"content"},React.createElement("div",{className:this.state.editor.className},contentTabs,editorToolkit,this.editorContent)),React.createElement("div",{className:"footerPane"},footerTabs,footerContent),previewPane))}}]),Container}(React.Component)},_export("CodeEditor",CodeEditor=function(deps){return codeEditorScope.Container}),_export("CodeEditor",CodeEditor),_export("default",CodeEditor),_export("states",states=[{KeyName:"notifications",AccessPath:"notifications",DefaultValue:'{"notifications": []}'},{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": ""}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"ideFiles",AccessPath:"ideFiles",DefaultValue:'{"ideFiles": []}'},{KeyName:"ide_reload",AccessPath:"ide_reload",DefaultValue:'{"ide_reload": false}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/CodeEditor/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/studio/StudioUtil.js","client/script/studio/StudioFormUtil.js","carbon-components-react","@carbon/icons-react/lib/close/20","@carbon/icons-react/lib/add--alt/32","lodash.clonedeep","lodash.debounce"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MonacoEditor,StudioUtil,StudioFormUtil,Select,SelectItem,TextInput,OverflowMenu,OverflowMenuItem,Close20,AddAlt32,cloneDeep,debounce,codeEditorScope,CodeEditor;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_clientScriptStudioStudioUtilJs){StudioUtil=_clientScriptStudioStudioUtilJs.StudioUtil},function(_clientScriptStudioStudioFormUtilJs){StudioFormUtil=_clientScriptStudioStudioFormUtilJs.StudioFormUtil},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput,OverflowMenu=_carbonComponentsReact.OverflowMenu,OverflowMenuItem=_carbonComponentsReact.OverflowMenuItem},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibAddAlt){AddAlt32=_carbonIconsReactLibAddAlt.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){history.pushState(null,null,location.href),window.onpopstate=function(){history.go(1)},codeEditorScope={Container:function(_React$Component){function Container(props){_classCallCheck(this,Container);var _this=_possibleConstructorReturn(this,(Container.__proto__||Object.getPrototypeOf(Container)).call(this,props));return _this.studioUtil=new StudioUtil,_this.studioUtil.bindAllMethods.bind(_this)(),_this.state=_this.studioUtil.getInitialState(),_this.state.editor.height=.8*screen.height,_this.topElement=React.createRef(),_this.studioFormUtil=new StudioFormUtil,_this.editorDidMount=_this.editorDidMount.bind(_this),_this.editor=null,_this.editorModel=null,_this.editorModelViewState=null,_this.activeFileIndex=-1,_this.editorContent=null,_this.restoreEditor=_this.restoreEditor.bind(_this),_this.getModels(_this.refreshModels.bind(_this)),_this.resizeSideBarGrid=_this.resizeSideBarGrid.bind(_this),_this.resizeSideBarGridDebounceFn=debounce(function(){_this.resizeSideBarGrid()}),_this.resizeFooterPaneGrid=_this.resizeFooterPaneGrid.bind(_this),window.addEventListener("resize",self.resizeSideBarGridDebounceFn),_this}return _inherits(Container,_React$Component),_createClass(Container,[{key:"resizeSideBarGrid",value:function(){var self=this,parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".searchPane",this.props.shadow).length>0?$(".searchPane",this.props.shadow):$(".searchPane",parentNode),topLevelEl=$(".top-level",this.props.shadow).length>0?$(".top-level",this.props.shadow):$(".top-level",parentNode),contentAreaEl=$(".sr-editorial-space",this.props.shadow).length>0?$(".sr-editorial-space",this.props.shadow):$(".sr-editorial-space",parentNode);if(searchPane.length>0){var searchPaneRect=searchPane[0].getBoundingClientRect(),contentAreaWidth=topLevelEl[0].getBoundingClientRect().width-searchPaneRect.width-5;setTimeout(function(){contentAreaEl.width(contentAreaWidth),window.removeEventListener("resize",self.resizeSideBarGridDebounceFn),window.addEventListener("resize",self.resizeSideBarGridDebounceFn)})}}},{key:"resizeFooterPaneGrid",value:function(){var parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,contentPane=$(".sr-editorial-space > .content",this.props.shadow).length>0?$(".sr-editorial-space > .content",this.props.shadow):$(".sr-editorial-space > .content",parentNode),topLevelEl=$(".sr-editorial-space",this.props.shadow).length>0?$(".sr-editorial-space",this.props.shadow):$(".sr-editorial-space",parentNode),footerPane=$(".sr-editorial-space > .footerPane",this.props.shadow).length>0?$(".sr-editorial-space > .footerPane",this.props.shadow):$(".sr-editorial-space > .footerPane",parentNode);if(contentPane.length>0){var contentPaneRect=contentPane[0].getBoundingClientRect(),footerPaneHeight=topLevelEl[0].getBoundingClientRect().height-contentPaneRect.height;footerPane.height(footerPaneHeight);var editorState=cloneDeep(this.state.editor);editorState.height=contentPaneRect.height,this.setState({editor:editorState})}}},{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var self,parentNode,searchPane,checkResize,contentPane,_checkResize;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return self=this,this.searchChanged(),parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".searchPane",this.props.shadow).length>0?$(".searchPane",this.props.shadow):$(".searchPane",parentNode),window.addEventListener("focus",self.resizeSideBarGridDebounceFn),window.addEventListener("focus",this.resizeSideBarGridDebounceFn),searchPane&&searchPane.length>0&&(checkResize=function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}},searchPane[0].addEventListener("resize",this.resizeSideBarGridDebounceFn),new MutationObserver(checkResize).observe(searchPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})),(contentPane=$(".sr-editorial-space > .content",this.props.shadow).length>0?$(".sr-editorial-space > .content",this.props.shadow):$(".sr-editorial-space > .content",parentNode))&&contentPane.length>0&&(_checkResize=function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}},contentPane[0].addEventListener("resize",this.resizeFooterPaneGrid),new MutationObserver(_checkResize).observe(contentPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})),_context.next=11,this.fetchRecord(this.props.recordid,this.props.contenttype);case 11:this.setState({reload:this.state.reload});case 12:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUnmount",value:function(){window.removeEventListener("resize",this.resizeSideBarGridDebounceFn)}},{key:"componentDidUpdate",value:function(prevProps){var _this2=this;if(prevProps.ide_reload!=this.props.ide_reload&&this.setState({reload:!this.state.reload}),prevProps.showpreview==this.props.showpreview||prevProps.showpreview_target==this.props.showpreview_target||"ide_state"!=this.props.showpreview_target&&"ide_actions"!=this.props.showpreview_target&&"ide_props"!=this.props.showpreview_target&&"ide_deps"!=this.props.showpreview_target||(this.setState({showWebComponentPreview:this.props.showpreview,showPreviewTarget:this.props.showpreview_target}),0==this.props.showpreview&&this.restoreEditor()),this.activeFileIndex>-1&&this.refs)if(this.refs["file"+this.activeFileIndex])setTimeout(function(){return _this2.refs["file"+_this2.activeFileIndex].scrollIntoView({block:"end",behavior:"smooth"})},100);else{var lastFileIndx=-1;Object.keys(this.refs).map(function(refKey){if(refKey.indexOf("file")>-1){var fileIndx=parseInt(refKey.split("file")[1]);fileIndx>lastFileIndx&&(lastFileIndx=fileIndx)}}),setTimeout(function(){return _this2.refs["file"+lastFileIndx].scrollIntoView({block:"end",behavior:"smooth"})},100)}}},{key:"componentDidCatch",value:function(error,info){console.log("error = "+error)}},{key:"editorDidMount",value:function(editor,monaco){monaco.languages.registerCompletionItemProvider("javascript",{provideCompletionItems:function(model,position){return[{label:'let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',documentation:"Utility to get the records"},{label:'let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',documentation:"Utility to get the record count of the matching filter"},{label:'createRecord = await $qry.createRecord("[model]_[scope]", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - createRecord = await $qry.createRecord("[model]_[scope]", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to create a new record"},{label:'updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to update an existing record"},{label:'deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',documentation:"Utility to delete a record"},{label:'deleteRecords = await $qry.deleteRecords("[model]_[scope]", "{uid: {"inq": ["id1", "id"]}}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "filter")',documentation:"Utility to delete multiple records"},{label:'tableDelete = await $qry._run(`mutation($inputData:[Table]DestroyAllInput!) {\n\t\t[Table]DestroyAll(input:$inputData){\n\t\t\tobj\n\t\t}\t}`, { "inputData": { "where": { "[FieldName]":"${varname}"} } },\n\t\t"data.[Table]DestroyAll.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-delete",documentation:"Delete query to remove the records from the table"},{label:'$qry.run("{queryName}", "{variables}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'await $qry.run("{queryName}", "{variables}")',documentation:"Utility to mutate/fetch data from server using GraphQL"},{label:'tableRead = await $qry._run(`query($input:JSON){\n\t[Table]{\n\t\t[Table]Find(filter: $input) @_(get: "edges"){\n\t\t\tedges @_(keyBy: "node.uid", mapValues:"node"){\n\t\t\t\tnode{\n\t\t\t\t\tuid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}`, { "input": { "where": { "uid": "${varname}" } } },\n"data.[Table].[Table]Find");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-read",documentation:"Open query to get the data from the table"},{label:'tableUpsert = await $qry._run(`mutation($input: [Table]UpsertWithWhereInput!){\n\t[Table]UpsertWithWhere(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "where": { "uid": "${varname}" }, "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]UpsertWithWhere.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-upsert",documentation:"Query to update the data in the table"},{label:'tableCreate = await $qry._run(`mutation($input: [Table]CreateInput!){\n\t[Table]Create(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]Create.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-create",documentation:"Query to create the record with the data"}]}});this.editor=editor,this.monaco=monaco,this.editorModel=editor.getModel(),this.restoreEditor()}},{key:"restoreEditor",value:function(){var self=this,saveEditorValue=this.editor.setValue.bind(this.editor);this.editor.setValue=function(val){saveEditorValue(val),self.state.form.position?(self.editor.setPosition(self.state.form.position),self.editor.revealLine(self.state.form.position.lineNumber),self.editor.revealLineInCenter(self.state.form.position.lineNumber)):(self.editor.setPosition({lineNumber:1,column:1}),self.editor.revealLine(1),self.editor.revealLineInCenter(15)),self.editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:this.editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(this.editor._themeService._styleElement),this.editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"render",value:function(){var editorCode,searchResults=this.studioFormUtil.getSearchPaneDetails.bind(this)(),editorToolkit=this.studioFormUtil.getEditorToolKit.bind(this)(),previewPane=this.studioFormUtil.getPreviewContentPane.bind(this)(),footerTabs=this.studioFormUtil.getFooterTabs.bind(this)(),footerContent=this.studioFormUtil.getFooterContent.bind(this)(!0);if(this.state.form.mode)switch(this.state.form.mode){case"css":editorCode=this.state.form.css;break;case"html":editorCode=this.state.form.html;break;case"js":editorCode=this.state.form.code;break;case"import":editorCode=this.state.form.ImportScript;break;case"export":editorCode=this.state.form.ExportScript}else editorCode=this.state.form.code;var contentTabArry=[];if(this.state.openedForms){var _self=this;this.activeFileIndex=-1,this.state.openedForms.forEach(function(openedFile,indx){"contentTabActive"==openedFile.className&&(_self.activeFileIndex=indx),contentTabArry.push(React.createElement("div",{ref:"file"+indx,className:"contentTabItems"},React.createElement("div",{key:"-1",class:openedFile.className,onClick:function(){return _self.makeFormActive(openedFile)}},openedFile.fileName),React.createElement(Close20,{className:"closeTab",onClick:function(){return _self.removeForm(openedFile)}})))})}var contentTabs=React.createElement("div",{class:"contentTabs"},contentTabArry);this.topElement&&this.topElement.current&&(this.state.resetEditor&&(this.restoreEditor(),this.setState({resetEditor:!1})),this.editorContent=React.createElement(MonacoEditor,{width:this.state.editor.width,height:this.state.editor.height,language:"javascript",theme:"vs-dark",value:editorCode,defaultValue:editorCode,options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1},onChange:this.codeChanged,requireConfig:{url:"/thirdpartylib/require.js",paths:{vs:"/thirdpartylib/monaco/min/vs"}},editorWillMount:this.editorWillMount,editorDidMount:this.editorDidMount}));var notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{style:{position:"absolute",bottom:10,right:20}}):null;return React.createElement("div",{className:"top-level",ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ErrorBoundary/Style.css"); @import url("component/studio/CodeEditor/Style.css"); @import url("/thirdpartylib/monaco/min/vs/editor/editor.main.css")'),notificationBar,React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsMode.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/lib/typescriptServices.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsWorker.js"}),React.createElement("div",{className:"searchPane resizable-sidebar"},React.createElement("div",{className:"sr-new-file-menu"},React.createElement("label",{htmlFor:"button",className:"sr-new-file"},"New File"),React.createElement(OverflowMenu,{renderIcon:function(){return React.createElement(AddAlt32,null)},"data-floating-menu-container":"true"},React.createElement(OverflowMenuItem,{itemText:"Page",onClick:this.addNewFile,value:"page"}),React.createElement(OverflowMenuItem,{itemText:"Component",onClick:this.addNewFile,value:"component"}),React.createElement(OverflowMenuItem,{itemText:"Style",onClick:this.addNewFile,value:"style"}),React.createElement(OverflowMenuItem,{itemText:"Client Scripts",onClick:this.addNewFile,value:"client_script"}),React.createElement(OverflowMenuItem,{itemText:"Common Scripts",onClick:this.addNewFile,value:"common_script"}),React.createElement(OverflowMenuItem,{itemText:"Server Scripts",onClick:this.addNewFile,value:"server_script"}),React.createElement(OverflowMenuItem,{itemText:"Model",onClick:this.addNewFile,value:"model"}),React.createElement(OverflowMenuItem,{itemText:"Opertaion Hook",onClick:this.addNewFile,value:"operation_hook"}),React.createElement(OverflowMenuItem,{itemText:"Resources",onClick:this.addNewFile,value:"resource"}),React.createElement(OverflowMenuItem,{itemText:"Rendering Templates",onClick:this.addNewFile,value:"template"}),React.createElement(OverflowMenuItem,{itemText:"Rest Methods",onClick:this.addNewFile,value:"restmethod"}),React.createElement(OverflowMenuItem,{itemText:"Import Export",onClick:this.addNewFile,value:"import_export"}),React.createElement(OverflowMenuItem,{itemText:"Widget Actions",onClick:this.addNewFile,value:"widget_action"}),React.createElement(OverflowMenuItem,{itemText:"Page Actions",onClick:this.addNewFile,value:"page_action"}))),React.createElement(Select,{labelText:"Category",onChange:this.searchCategoryUpdated,value:this.state.search.ide_type,defaultValue:"component",id:"category",required:"required"},React.createElement(SelectItem,{value:"page",text:"Page"}),React.createElement(SelectItem,{value:"component",text:"Component"}),React.createElement(SelectItem,{value:"client_script",text:"Client Script"}),React.createElement(SelectItem,{value:"common_script",text:"Common Script"}),React.createElement(SelectItem,{value:"server_script",text:"Server Script"}),React.createElement(SelectItem,{value:"operation_hook",text:"Operation Hook"}),React.createElement(SelectItem,{value:"resource",text:"Resources"}),React.createElement(SelectItem,{value:"template",text:"Rendering Templates"}),React.createElement(SelectItem,{value:"restmethod",text:"Rest Methods"}),React.createElement(SelectItem,{value:"import_export",text:"Import Export"}),React.createElement(SelectItem,{value:"widget_action",text:"Widget Actions"}),React.createElement(SelectItem,{value:"page_action",text:"Page Actions"}),React.createElement(SelectItem,{value:"style",text:"Styles"})),React.createElement(TextInput,{placeholder:"Search here...",onChange:this.searchChanged,required:"required",className:"sr-search-bar"}),React.createElement("div",{className:"searchResults"},searchResults)),React.createElement("div",{className:"sr-editorial-space"},React.createElement("div",{className:"content"},React.createElement("div",{className:this.state.editor.className},contentTabs,editorToolkit,this.editorContent)),React.createElement("div",{className:"footerPane"},footerTabs,footerContent),previewPane))}}]),Container}(React.Component)},_export("CodeEditor",CodeEditor=function(deps){return codeEditorScope.Container}),_export("CodeEditor",CodeEditor)}}}),System.register("component/studio/CustomCellRenderer.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/RenderComponent/Definition.js"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,RenderComponent,_CustomCellRenderer_,CustomCellRenderer,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentStudioRenderComponentDefinitionJs){RenderComponent=_componentStudioRenderComponentDefinitionJs.RenderComponent}],execute:function(){_CustomCellRenderer_=function(_React$Component){function _CustomCellRenderer_(props){return _classCallCheck(this,_CustomCellRenderer_),_possibleConstructorReturn(this,(_CustomCellRenderer_.__proto__||Object.getPrototypeOf(_CustomCellRenderer_)).call(this,props))}return _inherits(_CustomCellRenderer_,_React$Component),_createClass(_CustomCellRenderer_,[{key:"render",value:function(){var Component2Render=RenderComponent(),_props=this.props,componentname=_props.componentname,componentscope=_props.componentscope,componentprops=_props.componentprops,controlname=_props.controlname,pageid=_props.pageid,pagesuffix=_props.pagesuffix,controlid=_props.controlid,parentwidgetid=_props.parentwidgetid,updatedComponentProps=_extends({},componentprops,{pageid:pageid,pagesuffix:pagesuffix,controlid:controlid,parentwidgetid:parentwidgetid,iscellcontrol:!0,controlname:controlname,shadow:!0});return React.createElement("div",{className:"cellTop cellTop"+this.props.controltype},componentname&&componentscope?React.createElement(Component2Render,{key:controlname,name:componentname,scope:componentscope,params:updatedComponentProps}):React.createElement("div",null))}}]),_CustomCellRenderer_}(React.Component),_export("CustomCellRenderer",CustomCellRenderer=function(props){return _CustomCellRenderer_}),_export("CustomCellRenderer",CustomCellRenderer),_export("default",CustomCellRenderer),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/DataLoader.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_DataLoader_,DataLoader,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_DataLoader_=function(_React$Component){function _DataLoader_(){return _classCallCheck(this,_DataLoader_),_possibleConstructorReturn(this,(_DataLoader_.__proto__||Object.getPrototypeOf(_DataLoader_)).apply(this,arguments))}return _inherits(_DataLoader_,_React$Component),_createClass(_DataLoader_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Hello World!"))}}]),_DataLoader_}(React.Component),_export("DataLoader",DataLoader=function(props){return _DataLoader_}),_export("DataLoader",DataLoader),_export("default",DataLoader),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/DataLoader/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_DataLoader_,DataLoader;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_DataLoader_=function(_React$Component){function _DataLoader_(){return _classCallCheck(this,_DataLoader_),_possibleConstructorReturn(this,(_DataLoader_.__proto__||Object.getPrototypeOf(_DataLoader_)).apply(this,arguments))}return _inherits(_DataLoader_,_React$Component),_createClass(_DataLoader_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Hello World!"))}}]),_DataLoader_}(React.Component),_export("DataLoader",DataLoader=function(props){return _DataLoader_}),_export("DataLoader",DataLoader)}}}),System.register("component/studio/DynaForm.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/JSONForm/Definition.js","client/script/studio/FormWidgets.js","lodash"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,JSONForm,_,_DynaForm_,DynaForm,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentStudioJSONFormDefinitionJs){JSONForm=_componentStudioJSONFormDefinitionJs.JSONForm},function(_clientScriptStudioFormWidgetsJs){_clientScriptStudioFormWidgetsJs.default},function(_lodash){_=_lodash.default}],execute:function(){_DynaForm_=function(_React$Component){function _DynaForm_(props){_classCallCheck(this,_DynaForm_);var _this=_possibleConstructorReturn(this,(_DynaForm_.__proto__||Object.getPrototypeOf(_DynaForm_)).call(this,props));return _this.state={dataSchema:_this.props.dataschema?JSON.parse(_this.props.dataschema):{},uiSchema:_this.props.uischema?JSON.parse(_this.props.uischema):{}},_this.handleChange=_this.handleChange.bind(_this),_this.getThemeData=_this.getThemeData.bind(_this),_this}return _inherits(_DynaForm_,_React$Component),_createClass(_DynaForm_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var themeData;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.getThemeData();case 2:themeData=_context.sent,this.setState({themeData:themeData});case 4:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"getThemeData",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var themeData,themeRecords,themeRecordIndx,themeRecord;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return themeData={},_context2.next=3,$qry.getRecords("ControlTheme_studio",{},["uid","FormTheme","Styles","Control"]);case 3:if((themeRecords=_context2.sent)&&themeRecords.length>0)for(themeRecordIndx in themeRecords)themeRecord=themeRecords[themeRecordIndx],themeData[themeRecord.FormTheme]=themeData[themeRecord.FormTheme]||{},themeData[themeRecord.FormTheme][themeRecord.Control]=themeRecord.Styles;return _context2.abrupt("return",themeData);case 6:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"handleChange",value:function(inputVal){var dynaform=Object.assign({},this.props.dynaform),incomingVal=Object.assign({},inputVal);delete incomingVal.form_list,_.isEqual(dynaform[this.props.formkey],incomingVal)||(dynaform[this.props.formkey]=incomingVal,this.props.updateStore({updates:{dynaform:dynaform}}))}},{key:"componentDidUpdate",value:function(prevProps){prevProps.dataschema!=this.props.dataschema&&this.setState({dataSchema:JSON.parse(this.props.dataschema)}),prevProps.uischema!=this.props.uischema&&this.setState({uiSchema:JSON.parse(this.props.uischema)})}},{key:"render",value:function(){var formProps={};this.state.dataSchema&&Object.keys(this.state.dataSchema).length>0&&(formProps.schema=this.state.dataSchema),this.state.uiSchema&&Object.keys(this.state.uiSchema).length>0&&(formProps.uischema=this.state.uiSchema);var theme=this.state.themeData&&this.props.themeid&&this.state.themeData[this.props.themeid]||{},JsonFormComp=JSONForm(),formContext={pageid:this.props.pageid||this.props.uid,pagesuffix:this.props.pagesuffix,theme:theme},dynamicFormEl=React.createElement(JsonFormComp,{schema:formProps.schema,uischema:formProps.uischema,defaultvalue:this.props.dynaform&&this.props.dynaform[this.props.formkey]?this.props.dynaform[this.props.formkey]:{},shadow:this.props.shadow,handleChange:this.handleChange,context:formContext}),inlinestyles=theme&&theme.Form||"";return React.createElement(React.Fragment,null,React.createElement("style",null,inlinestyles),React.createElement("div",{className:"form_header",ref:"mainpage",style:{height:"fit-content",width:"100%",overflowY:"auto",overflowX:"hidden",textAlign:"left",minHeight:"60%",maxHeight:"100%",paddingRight:"10px",paddingLeft:"10px"}},dynamicFormEl))}}]),_DynaForm_}(React.Component),_export("DynaForm",DynaForm=function(props){return _DynaForm_}),_export("DynaForm",DynaForm),_export("default",DynaForm),_export("states",states=[{KeyName:"dynaform",AccessPath:"dynaform",DefaultValue:'{"dynaform": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/DynaForm/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/JSONForm/Definition.js","client/script/studio/FormWidgets.js","lodash"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,JSONForm,_,_DynaForm_,DynaForm;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentStudioJSONFormDefinitionJs){JSONForm=_componentStudioJSONFormDefinitionJs.JSONForm},function(_clientScriptStudioFormWidgetsJs){_clientScriptStudioFormWidgetsJs.default},function(_lodash){_=_lodash.default}],execute:function(){_DynaForm_=function(_React$Component){function _DynaForm_(props){_classCallCheck(this,_DynaForm_);var _this=_possibleConstructorReturn(this,(_DynaForm_.__proto__||Object.getPrototypeOf(_DynaForm_)).call(this,props));return _this.state={dataSchema:_this.props.dataschema?JSON.parse(_this.props.dataschema):{},uiSchema:_this.props.uischema?JSON.parse(_this.props.uischema):{}},_this.handleChange=_this.handleChange.bind(_this),_this.getThemeData=_this.getThemeData.bind(_this),_this}return _inherits(_DynaForm_,_React$Component),_createClass(_DynaForm_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var themeData;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.getThemeData();case 2:themeData=_context.sent,this.setState({themeData:themeData});case 4:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"getThemeData",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var themeData,themeRecords,themeRecordIndx,themeRecord;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return themeData={},_context2.next=3,$qry.getRecords("ControlTheme_studio",{},["uid","FormTheme","Styles","Control"]);case 3:if((themeRecords=_context2.sent)&&themeRecords.length>0)for(themeRecordIndx in themeRecords)themeRecord=themeRecords[themeRecordIndx],themeData[themeRecord.FormTheme]=themeData[themeRecord.FormTheme]||{},themeData[themeRecord.FormTheme][themeRecord.Control]=themeRecord.Styles;return _context2.abrupt("return",themeData);case 6:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"handleChange",value:function(inputVal){var dynaform=Object.assign({},this.props.dynaform),incomingVal=Object.assign({},inputVal);delete incomingVal.form_list,_.isEqual(dynaform[this.props.formkey],incomingVal)||(dynaform[this.props.formkey]=incomingVal,this.props.updateStore({updates:{dynaform:dynaform}}))}},{key:"componentDidUpdate",value:function(prevProps){prevProps.dataschema!=this.props.dataschema&&this.setState({dataSchema:JSON.parse(this.props.dataschema)}),prevProps.uischema!=this.props.uischema&&this.setState({uiSchema:JSON.parse(this.props.uischema)})}},{key:"render",value:function(){var formProps={};this.state.dataSchema&&Object.keys(this.state.dataSchema).length>0&&(formProps.schema=this.state.dataSchema),this.state.uiSchema&&Object.keys(this.state.uiSchema).length>0&&(formProps.uischema=this.state.uiSchema);var theme=this.state.themeData&&this.props.themeid&&this.state.themeData[this.props.themeid]||{},JsonFormComp=JSONForm(),formContext={pageid:this.props.pageid||this.props.uid,pagesuffix:this.props.pagesuffix,theme:theme},dynamicFormEl=React.createElement(JsonFormComp,{schema:formProps.schema,uischema:formProps.uischema,defaultvalue:this.props.dynaform&&this.props.dynaform[this.props.formkey]?this.props.dynaform[this.props.formkey]:{},shadow:this.props.shadow,handleChange:this.handleChange,context:formContext}),inlinestyles=theme&&theme.Form||"";return React.createElement(React.Fragment,null,React.createElement("style",null,inlinestyles),React.createElement("div",{className:"form_header",ref:"mainpage",style:{height:"fit-content",width:"100%",overflowY:"auto",overflowX:"hidden",textAlign:"left",minHeight:"60%",maxHeight:"100%",paddingRight:"10px",paddingLeft:"10px"}},dynamicFormEl))}}]),_DynaForm_}(React.Component),_export("DynaForm",DynaForm=function(props){return _DynaForm_}),_export("DynaForm",DynaForm)}}}),System.register("component/studio/DynamicForm.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_DynamicForm_,DynamicForm,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_DynamicForm_=function(_React$Component){function _DynamicForm_(props){return _classCallCheck(this,_DynamicForm_),_possibleConstructorReturn(this,(_DynamicForm_.__proto__||Object.getPrototypeOf(_DynamicForm_)).call(this,props))}return _inherits(_DynamicForm_,_React$Component),_createClass(_DynamicForm_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Hello World!"))}}]),_DynamicForm_}(React.Component),_export("DynamicForm",DynamicForm=function(props){return _DynamicForm_}),_export("DynamicForm",DynamicForm),_export("default",DynamicForm),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/DynamicForm/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_DynamicForm_,DynamicForm;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_DynamicForm_=function(_React$Component){function _DynamicForm_(props){return _classCallCheck(this,_DynamicForm_),_possibleConstructorReturn(this,(_DynamicForm_.__proto__||Object.getPrototypeOf(_DynamicForm_)).call(this,props))}return _inherits(_DynamicForm_,_React$Component),_createClass(_DynamicForm_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Hello World!"))}}]),_DynamicForm_}(React.Component),_export("DynamicForm",DynamicForm=function(props){return _DynamicForm_}),_export("DynamicForm",DynamicForm)}}}),System.register("component/studio/DynamicWidgetParameter.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,_DynamicWidgetParameter_,DynamicWidgetParameter,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,_carbonComponentsReact.TextInput},function(_lodashClonedeep){_lodashClonedeep.default}],execute:function(){_DynamicWidgetParameter_=function(_React$Component){function _DynamicWidgetParameter_(props){_classCallCheck(this,_DynamicWidgetParameter_);var _this=_possibleConstructorReturn(this,(_DynamicWidgetParameter_.__proto__||Object.getPrototypeOf(_DynamicWidgetParameter_)).call(this,props)),widgetData={};return _this.props.widgetData&&Object.keys(_this.props.widgetData).map(function(widgetId){var widgetItem=_this.props.widgetData[widgetId],widgetName=widgetItem&&widgetItem.props&&(widgetItem.props.Name||widgetItem.props.Label);widgetData[widgetName=widgetName||widgetId]=widgetItem&&widgetItem.props||{},widgetData[widgetName].id=widgetId}),_this.state={widgetData:widgetData,selectedWidgetName:_this.props.defaultValue},_this.updateProps=_this.updateProps.bind(_this),_this}return _inherits(_DynamicWidgetParameter_,_React$Component),_createClass(_DynamicWidgetParameter_,[{key:"updateProps",value:function(pageParams){this.props.updateProps&&this.props.updateProps(pageParams)}},{key:"render",value:function(){var paramPicker,_this2=this,result=[],widgetsEl=[];return widgetsEl.push(React.createElement(SelectItem,{value:"",text:"None"})),this.state.widgetData&&Object.keys(this.state.widgetData).map(function(widgetName){widgetsEl.push(React.createElement(SelectItem,{value:widgetName,text:widgetName}))}),paramPicker=React.createElement(React.Fragment,null,React.createElement(Select,{onChange:function(e){var selectedWidgetName=e.target.value;_this2.setState({selectedWidgetName:selectedWidgetName}),_this2.updateProps({widgetName:selectedWidgetName})},id:"select_widget",labelText:"Choose the Widget",defaultValue:this.state.selectedWidgetName||""},widgetsEl)),result.push(React.createElement("div",{style:{display:"inline-flex"}},paramPicker)),React.createElement(React.Fragment,null,result)}}]),_DynamicWidgetParameter_}(React.Component),_export("DynamicWidgetParameter",DynamicWidgetParameter=function(props){return _DynamicWidgetParameter_}),_export("DynamicWidgetParameter",DynamicWidgetParameter),_export("default",DynamicWidgetParameter),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/DynamicWidgetParameter/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,_DynamicWidgetParameter_,DynamicWidgetParameter;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,_carbonComponentsReact.TextInput},function(_lodashClonedeep){_lodashClonedeep.default}],execute:function(){_DynamicWidgetParameter_=function(_React$Component){function _DynamicWidgetParameter_(props){_classCallCheck(this,_DynamicWidgetParameter_);var _this=_possibleConstructorReturn(this,(_DynamicWidgetParameter_.__proto__||Object.getPrototypeOf(_DynamicWidgetParameter_)).call(this,props)),widgetData={};return _this.props.widgetData&&Object.keys(_this.props.widgetData).map(function(widgetId){var widgetItem=_this.props.widgetData[widgetId],widgetName=widgetItem&&widgetItem.props&&(widgetItem.props.Name||widgetItem.props.Label);widgetData[widgetName=widgetName||widgetId]=widgetItem&&widgetItem.props||{},widgetData[widgetName].id=widgetId}),_this.state={widgetData:widgetData,selectedWidgetName:_this.props.defaultValue},_this.updateProps=_this.updateProps.bind(_this),_this}return _inherits(_DynamicWidgetParameter_,_React$Component),_createClass(_DynamicWidgetParameter_,[{key:"updateProps",value:function(pageParams){this.props.updateProps&&this.props.updateProps(pageParams)}},{key:"render",value:function(){var paramPicker,_this2=this,result=[],widgetsEl=[];return widgetsEl.push(React.createElement(SelectItem,{value:"",text:"None"})),this.state.widgetData&&Object.keys(this.state.widgetData).map(function(widgetName){widgetsEl.push(React.createElement(SelectItem,{value:widgetName,text:widgetName}))}),paramPicker=React.createElement(React.Fragment,null,React.createElement(Select,{onChange:function(e){var selectedWidgetName=e.target.value;_this2.setState({selectedWidgetName:selectedWidgetName}),_this2.updateProps({widgetName:selectedWidgetName})},id:"select_widget",labelText:"Choose the Widget",defaultValue:this.state.selectedWidgetName||""},widgetsEl)),result.push(React.createElement("div",{style:{display:"inline-flex"}},paramPicker)),React.createElement(React.Fragment,null,result)}}]),_DynamicWidgetParameter_}(React.Component),_export("DynamicWidgetParameter",DynamicWidgetParameter=function(props){return _DynamicWidgetParameter_}),_export("DynamicWidgetParameter",DynamicWidgetParameter)}}}),System.register("component/studio/EntityMapper.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/add/32","@carbon/icons-react/lib/settings/16","@carbon/icons-react/lib/filter/32","@carbon/icons-react/lib/arrow--right/16"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Toolbar,ToolbarItem,Settings32,Connector,_EntityMapper_,EntityMapper,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Tabs,_carbonComponentsReact.Tab,_carbonComponentsReact.TextInput,_carbonComponentsReact.Tag,_carbonComponentsReact.Button,_carbonComponentsReact.FormLabel,_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,_carbonComponentsReact.OverflowMenu,Toolbar=_carbonComponentsReact.Toolbar,ToolbarItem=_carbonComponentsReact.ToolbarItem,_carbonComponentsReact.ToolbarTitle,_carbonComponentsReact.ToolbarOption},function(_carbonIconsReactLibAddAlt){_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibAdd){_carbonIconsReactLibAdd.default},function(_carbonIconsReactLibSettings){Settings32=_carbonIconsReactLibSettings.default},function(_carbonIconsReactLibFilter){_carbonIconsReactLibFilter.default},function(_carbonIconsReactLibArrowRight){Connector=_carbonIconsReactLibArrowRight.default}],execute:function(){_EntityMapper_=function(_React$Component){function _EntityMapper_(props){_classCallCheck(this,_EntityMapper_);var _this=_possibleConstructorReturn(this,(_EntityMapper_.__proto__||Object.getPrototypeOf(_EntityMapper_)).call(this,props));_this.state={addedFields:[],reload:!1},_this.hideNewTab=!1,_this.lastItemType="",_this.currentTable=props.baseTable?props.baseTable:"T1",_this.showFieldMappingDialog=_this.showFieldMappingDialog.bind(_this),_this.sampleCompleteItems=[{id:"field1",text:"field1",selected:!0,parent:"T1",type:"field"},{id:"field3",text:"field3",parent:"T1",type:"one2one",to:"T2"}],_this.tagProps={height:"1rem",fontSize:"small",marginTop:20,display:"inline-block",textAlign:"center",top:-10,paddingBottom:2,paddingLeft:10,paddingRight:10,position:"relative",backgroundColor:"#f3f3f3",borderRadius:"10%",float:"left"},_this.removeTag=_this.removeTag.bind(_this),_this.addField=_this.addField.bind(_this);_this.props.active_widget_field_value;return _this}return _inherits(_EntityMapper_,_React$Component),_createClass(_EntityMapper_,[{key:"showFieldMappingDialog",value:function(){this.props.updateStore({updates:{showpreview:!0}})}},{key:"componentDidUpdate",value:function(prevProps){if(this.props.active_widget_field_value&&!_.isEqual(prevProps.active_widget_field_value,this.props.active_widget_field_value)){var updatedProps=this.props.widgetProps,activeWidgetFieldValue=this.props.active_widget_field_value;updatedProps.FieldName=activeWidgetFieldValue,this.props.updateStore({updates:{widgetProps:updatedProps}})}prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"entity_map"==this.props.showpreview_target&&this.setState({reload:!this.state.reload})}},{key:"addField",value:function(e){console.log(e)}},{key:"removeTag",value:function(e){var fieldValue=e.currentTarget.getAttribute("id"),addedFields=this.state.addedFields;if(addedFields&&addedFields.length>0){var matchedField=addedFields.filter(function(item){return item==fieldValue});matchedField&&1==matchedField.length&&(addedFields=addedFields.splice(0,addedFields.indexOf(matchedField[0])))}var lastAddedFieldValue=addedFields[addedFields.length-1];this.setState({fieldValue:lastAddedFieldValue,addedFields:addedFields})}},{key:"render",value:function(){var _this2=this,connectorStyle={paddingTop:5,top:7,position:"relative"},activeWidgetFieldValue=this.props.active_widget_field_value;if(activeWidgetFieldValue){var propVal=activeWidgetFieldValue;propVal.indexOf("@@[")>-1&&(propVal=(propVal=propVal.split("@@[")[1]).substr(0,propVal.length-1)),activeWidgetFieldValue=propVal.indexOf(".")>-1?propVal.split("."):[propVal]}var previewComponent,tagContainer=activeWidgetFieldValue?activeWidgetFieldValue.map(function(fieldValue,indx){return indx>0?React.createElement(React.Fragment,null,React.createElement(Connector,{style:connectorStyle}),React.createElement("span",{key:fieldValue,id:fieldValue,style:_this2.tagProps},fieldValue)):React.createElement("span",{key:fieldValue,id:fieldValue,style:_this2.tagProps},fieldValue)}):null;return previewComponent=this.props.showpreview?React.createElement("preview-component",{target:"entity_map"},React.createElement("show-field-mapping-dialog",null)):null,React.createElement("div",null,React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/EntityMapper/Style.css");'),previewComponent,React.createElement("label",{class:"bx--label",style:{float:"left",marginLeft:5}},"Field"),React.createElement(Toolbar,{style:{width:"100%"}},React.createElement(ToolbarItem,{style:{width:250}},React.createElement("div",{style:{display:"inline-flex",maxWidth:300,minWidth:300,backgroundColor:"#f3f3f3",borderBottom:"1px solid #8c8c8c",paddingLeft:5,overflow:"auto",maxHeight:40,minHeight:40}},tagContainer)),React.createElement(ToolbarItem,null,React.createElement("div",{className:"mapper-adv"},React.createElement(Settings32,{onClick:this.showFieldMappingDialog})))))}}]),_EntityMapper_}(React.Component),_export("EntityMapper",EntityMapper=function(props){return _EntityMapper_}),_export("EntityMapper",EntityMapper),_export("default",EntityMapper),_export("states",states=[{KeyName:"active_widget_field_value",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}.props.FieldName",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {"${active_widget_id}": {"props": {"FieldName": ""}}}}}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"widgetProps",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}.props",DefaultValue:'{"pages": {"${active_page_id}": {"widgets":{"${active_widget_id}": {"props": {}}}}}}'},{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id":{}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id":{}}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/EntityMapper/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/add/32","@carbon/icons-react/lib/settings/16","@carbon/icons-react/lib/filter/32","@carbon/icons-react/lib/arrow--right/16"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Toolbar,ToolbarItem,Settings32,Connector,_EntityMapper_,EntityMapper;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Tabs,_carbonComponentsReact.Tab,_carbonComponentsReact.TextInput,_carbonComponentsReact.Tag,_carbonComponentsReact.Button,_carbonComponentsReact.FormLabel,_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,_carbonComponentsReact.OverflowMenu,Toolbar=_carbonComponentsReact.Toolbar,ToolbarItem=_carbonComponentsReact.ToolbarItem,_carbonComponentsReact.ToolbarTitle,_carbonComponentsReact.ToolbarOption},function(_carbonIconsReactLibAddAlt){_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibAdd){_carbonIconsReactLibAdd.default},function(_carbonIconsReactLibSettings){Settings32=_carbonIconsReactLibSettings.default},function(_carbonIconsReactLibFilter){_carbonIconsReactLibFilter.default},function(_carbonIconsReactLibArrowRight){Connector=_carbonIconsReactLibArrowRight.default}],execute:function(){_EntityMapper_=function(_React$Component){function _EntityMapper_(props){_classCallCheck(this,_EntityMapper_);var _this=_possibleConstructorReturn(this,(_EntityMapper_.__proto__||Object.getPrototypeOf(_EntityMapper_)).call(this,props));_this.state={addedFields:[],reload:!1},_this.hideNewTab=!1,_this.lastItemType="",_this.currentTable=props.baseTable?props.baseTable:"T1",_this.showFieldMappingDialog=_this.showFieldMappingDialog.bind(_this),_this.sampleCompleteItems=[{id:"field1",text:"field1",selected:!0,parent:"T1",type:"field"},{id:"field3",text:"field3",parent:"T1",type:"one2one",to:"T2"}],_this.tagProps={height:"1rem",fontSize:"small",marginTop:20,display:"inline-block",textAlign:"center",top:-10,paddingBottom:2,paddingLeft:10,paddingRight:10,position:"relative",backgroundColor:"#f3f3f3",borderRadius:"10%",float:"left"},_this.removeTag=_this.removeTag.bind(_this),_this.addField=_this.addField.bind(_this);_this.props.active_widget_field_value;return _this}return _inherits(_EntityMapper_,_React$Component),_createClass(_EntityMapper_,[{key:"showFieldMappingDialog",value:function(){this.props.updateStore({updates:{showpreview:!0}})}},{key:"componentDidUpdate",value:function(prevProps){if(this.props.active_widget_field_value&&!_.isEqual(prevProps.active_widget_field_value,this.props.active_widget_field_value)){var updatedProps=this.props.widgetProps,activeWidgetFieldValue=this.props.active_widget_field_value;updatedProps.FieldName=activeWidgetFieldValue,this.props.updateStore({updates:{widgetProps:updatedProps}})}prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"entity_map"==this.props.showpreview_target&&this.setState({reload:!this.state.reload})}},{key:"addField",value:function(e){console.log(e)}},{key:"removeTag",value:function(e){var fieldValue=e.currentTarget.getAttribute("id"),addedFields=this.state.addedFields;if(addedFields&&addedFields.length>0){var matchedField=addedFields.filter(function(item){return item==fieldValue});matchedField&&1==matchedField.length&&(addedFields=addedFields.splice(0,addedFields.indexOf(matchedField[0])))}var lastAddedFieldValue=addedFields[addedFields.length-1];this.setState({fieldValue:lastAddedFieldValue,addedFields:addedFields})}},{key:"render",value:function(){var _this2=this,connectorStyle={paddingTop:5,top:7,position:"relative"},activeWidgetFieldValue=this.props.active_widget_field_value;if(activeWidgetFieldValue){var propVal=activeWidgetFieldValue;propVal.indexOf("@@[")>-1&&(propVal=(propVal=propVal.split("@@[")[1]).substr(0,propVal.length-1)),activeWidgetFieldValue=propVal.indexOf(".")>-1?propVal.split("."):[propVal]}var previewComponent,tagContainer=activeWidgetFieldValue?activeWidgetFieldValue.map(function(fieldValue,indx){return indx>0?React.createElement(React.Fragment,null,React.createElement(Connector,{style:connectorStyle}),React.createElement("span",{key:fieldValue,id:fieldValue,style:_this2.tagProps},fieldValue)):React.createElement("span",{key:fieldValue,id:fieldValue,style:_this2.tagProps},fieldValue)}):null;return previewComponent=this.props.showpreview?React.createElement("preview-component",{target:"entity_map"},React.createElement("show-field-mapping-dialog",null)):null,React.createElement("div",null,React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/EntityMapper/Style.css");'),previewComponent,React.createElement("label",{class:"bx--label",style:{float:"left",marginLeft:5}},"Field"),React.createElement(Toolbar,{style:{width:"100%"}},React.createElement(ToolbarItem,{style:{width:250}},React.createElement("div",{style:{display:"inline-flex",maxWidth:300,minWidth:300,backgroundColor:"#f3f3f3",borderBottom:"1px solid #8c8c8c",paddingLeft:5,overflow:"auto",maxHeight:40,minHeight:40}},tagContainer)),React.createElement(ToolbarItem,null,React.createElement("div",{className:"mapper-adv"},React.createElement(Settings32,{onClick:this.showFieldMappingDialog})))))}}]),_EntityMapper_}(React.Component),_export("EntityMapper",EntityMapper=function(props){return _EntityMapper_}),_export("EntityMapper",EntityMapper)}}}),System.register("component/studio/ErrorBoundary.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/ErrorBoundary/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ErrorBoundary,catchFunc,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default,_react.Component},function(_componentStudioErrorBoundaryStyleCssCss){}],execute:function(){_export("ErrorBoundary",ErrorBoundary=function(WrappedComponent){return function(_React$Component){function ErrorBoundaryComp(props){_classCallCheck(this,ErrorBoundaryComp);var _this=_possibleConstructorReturn(this,(ErrorBoundaryComp.__proto__||Object.getPrototypeOf(ErrorBoundaryComp)).call(this,props));return _this.state={error:null,errorInfo:null,hasError:null},_this}return _inherits(ErrorBoundaryComp,_React$Component),_createClass(ErrorBoundaryComp,[{key:"componentDidCatch",value:function(error,errorInfo){catchFunc(error,errorInfo,this)}},{key:"render",value:function(){return this.state.errorInfo?React.createElement("div",{className:"ErrorPane"},React.createElement("style",null,'@import url("component/studio/ErrorBoundary/Style.css");'),React.createElement("h2",null,"Oops!! Something went wrong."),React.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),React.createElement("br",null),this.state.errorInfo.componentStack)):WrappedComponent}}],[{key:"getDerivedStateFromError",value:function(error){return{hasError:!0,error:error.name,errorInfo:error.stack}}}]),ErrorBoundaryComp}(React.Component)}),catchFunc=function(error,errorInfo,ctx){ctx.setState({error:error,errorInfo:errorInfo})},_export("ErrorBoundary",ErrorBoundary),_export("default",ErrorBoundary),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/GeoLocation.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-geolocated"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,geolocated,_GeoLocation_,GeoLocation,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactGeolocated){geolocated=_reactGeolocated.geolocated}],execute:function(){_GeoLocation_=function(_React$Component){function _GeoLocation_(){return _classCallCheck(this,_GeoLocation_),_possibleConstructorReturn(this,(_GeoLocation_.__proto__||Object.getPrototypeOf(_GeoLocation_)).apply(this,arguments))}return _inherits(_GeoLocation_,_React$Component),_createClass(_GeoLocation_,[{key:"render",value:function(){return this.props.isGeolocationAvailable?this.props.isGeolocationEnabled?this.props.coords?React.createElement("table",null,React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,"latitude"),React.createElement("td",null,this.props.coords.latitude)),React.createElement("tr",null,React.createElement("td",null,"longitude"),React.createElement("td",null,this.props.coords.longitude)),React.createElement("tr",null,React.createElement("td",null,"altitude"),React.createElement("td",null,this.props.coords.altitude)),React.createElement("tr",null,React.createElement("td",null,"heading"),React.createElement("td",null,this.props.coords.heading)),React.createElement("tr",null,React.createElement("td",null,"speed"),React.createElement("td",null,this.props.coords.speed)))):React.createElement("div",null,"Getting the location data… "):React.createElement("div",null,"Geolocation is not enabled"):React.createElement("div",null,"Your browser does not support Geolocation")}}]),_GeoLocation_}(React.Component),_export("GeoLocation",GeoLocation=function(props){return geolocated({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3,isGeolocationAvailable:!0,isGeolocationEnabled:!0})(_GeoLocation_)}),_export("GeoLocation",GeoLocation),_export("default",GeoLocation),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/GeoLocation/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-geolocated"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,geolocated,_GeoLocation_,GeoLocation;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactGeolocated){geolocated=_reactGeolocated.geolocated}],execute:function(){_GeoLocation_=function(_React$Component){function _GeoLocation_(){return _classCallCheck(this,_GeoLocation_),_possibleConstructorReturn(this,(_GeoLocation_.__proto__||Object.getPrototypeOf(_GeoLocation_)).apply(this,arguments))}return _inherits(_GeoLocation_,_React$Component),_createClass(_GeoLocation_,[{key:"render",value:function(){return this.props.isGeolocationAvailable?this.props.isGeolocationEnabled?this.props.coords?React.createElement("table",null,React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,"latitude"),React.createElement("td",null,this.props.coords.latitude)),React.createElement("tr",null,React.createElement("td",null,"longitude"),React.createElement("td",null,this.props.coords.longitude)),React.createElement("tr",null,React.createElement("td",null,"altitude"),React.createElement("td",null,this.props.coords.altitude)),React.createElement("tr",null,React.createElement("td",null,"heading"),React.createElement("td",null,this.props.coords.heading)),React.createElement("tr",null,React.createElement("td",null,"speed"),React.createElement("td",null,this.props.coords.speed)))):React.createElement("div",null,"Getting the location data… "):React.createElement("div",null,"Geolocation is not enabled"):React.createElement("div",null,"Your browser does not support Geolocation")}}]),_GeoLocation_}(React.Component),_export("GeoLocation",GeoLocation=function(props){return geolocated({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3,isGeolocationAvailable:!0,isGeolocationEnabled:!0})(_GeoLocation_)}),_export("GeoLocation",GeoLocation)}}}),System.register("component/studio/GraphiqlView.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","graphiql","isomorphic-fetch","lodash.clonedeep","react-icons/lib/fa/arrow-circle-left","react-icons/lib/fa/arrow-circle-right","@carbon/icons-react/lib/data--unstructured/32","@carbon/icons-react/lib/close/32","client/script/mmf/$qry.js","carbon-components-react","component/studio/SrsReference/Definition.js","react-copy-to-clipboard"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,GraphiQL,cloneDeep,FieldMapper,Close32,$qry,TextInput,Button,SrsReference,CopyToClipboard,_GraphiQLComp,GraphiqlView,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_graphiql){GraphiQL=_graphiql.default},function(_isomorphicFetch){_isomorphicFetch.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_reactIconsLibFaArrowCircleLeft){_reactIconsLibFaArrowCircleLeft.default},function(_reactIconsLibFaArrowCircleRight){_reactIconsLibFaArrowCircleRight.default},function(_carbonIconsReactLibDataUnstructured){FieldMapper=_carbonIconsReactLibDataUnstructured.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmf$qryJs){$qry=_clientScriptMmf$qryJs.$qry},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,Button=_carbonComponentsReact.Button,_carbonComponentsReact.Link,_carbonComponentsReact.Tabs,_carbonComponentsReact.Tab},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_reactCopyToClipboard){CopyToClipboard=_reactCopyToClipboard.default}],execute:function(){_GraphiQLComp=function(_React$Component){function _GraphiQLComp(props){_classCallCheck(this,_GraphiQLComp);var _this=_possibleConstructorReturn(this,(_GraphiQLComp.__proto__||Object.getPrototypeOf(_GraphiQLComp)).call(this,props));return _this.state={form:{},activeQueryId:"",query:"",variables:"",schema:void 0,operationName:null,theme:"dark",storage:null,defaultQuery:null,onEditOperationName:null,searchResults:[],getDefaultFieldNames:null,hasResponse:!1,fieldMappingValues:{},defaultQueryBuilderObj:{},queryToCopy:""},_this.historyLimit=15,_this.queryNameUpdated=_this.queryNameUpdated.bind(_this),_this.queryScopeUpdated=_this.queryScopeUpdated.bind(_this),_this.queryPathUpdated=_this.queryPathUpdated.bind(_this),_this.onToggle=_this.onToggle.bind(_this),_this.saveQuery=_this.saveQuery.bind(_this),_this.graphiql=React.createRef(),_this.graphQLFetcher=_this.graphQLFetcher.bind(_this),_this.refreshHistory=_this.refreshHistory.bind(_this),_this.loadDetails=_this.loadDetails.bind(_this),_this.queryName="",_this.queryScope="",_this.response="",_this}return _inherits(_GraphiQLComp,_React$Component),_createClass(_GraphiQLComp,[{key:"graphQLFetcher",value:function(graphQLParams){var _this2=this;return new Promise(function(resolve,reject){var updatedVariables=graphQLParams.variables;if(updatedVariables){for(var variables=JSON.stringify(graphQLParams.variables),match=void 0;match=new RegExp("\\${([a-zA-Z0-9_]+)}").exec(variables);)if(match&&2==match.length){var replaceFrom=match[0],replaceTo=_this2.state.fieldMappingValues[match[1]];variables=variables.replace(replaceFrom,replaceTo)}updatedVariables=JSON.parse(variables)}$qry._run(graphQLParams.query,updatedVariables).then(function(response){_this2.graphiql&&_this2.graphiql.current&&_this2.graphiql.current.refresh();var hasResponse=response&&response.data&&!response.data.__schema;_this2.setState({hasResponse:hasResponse}),resolve(response)})})}},{key:"saveQuery",value:function(){var _this3=this,_state$defaultQueryBu=this.state.defaultQueryBuilderObj,defaultQueryName=_state$defaultQueryBu.defaultQueryName,defaultQueryScope=_state$defaultQueryBu.defaultQueryScope,defaultQueryDef=_state$defaultQueryBu.defaultQueryDef,defaultQueryVariables=_state$defaultQueryBu.defaultQueryVariables,defaultQueryPath=_state$defaultQueryBu.defaultQueryPath;defaultQueryName&&$qry.saveQuery(defaultQueryName,defaultQueryScope,defaultQueryDef,defaultQueryVariables,defaultQueryPath).then(function(data){return _this3.props.addFlashMessage({title:"Success - ",subtitle:"Query "+defaultQueryScope+"."+defaultQueryName+" saved!"})})}},{key:"queryNameUpdated",value:function(e){var defaultQueryBuilderObj=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj:{};defaultQueryBuilderObj.defaultQueryName=e.target.value,this.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}},{key:"queryScopeUpdated",value:function(e){var defaultQueryBuilderObj=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj:{};defaultQueryBuilderObj.defaultQueryScope=e.target.value,this.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}},{key:"queryPathUpdated",value:function(e){var defaultQueryBuilderObj=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj:{};defaultQueryBuilderObj.defaultQueryPath=e.target.value,this.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}},{key:"onToggle",value:function(node,toggled){this.state.cursor&&(this.state.cursor.active=!1),node.active=!0,node.children&&(node.toggled=toggled),this.setState({cursor:node})}},{key:"componentDidMount",value:function(){!this.state.activeQueryId&&this.props.activeSearchQueryId&&this.loadDetails(this.props.activeSearchQueryId)}},{key:"loadDetails",value:function(activeQueryId){var _this4=this;this.refreshHistory(activeQueryId).then(function(searchResults){var matchingQuery=searchResults.filter(function(item){return item.uid==activeQueryId}),defaultQueryBuilderObj={};(matchingQuery=1==matchingQuery.length?matchingQuery[0]:null)&&(defaultQueryBuilderObj={defaultQueryName:matchingQuery.Name,defaultQueryScope:matchingQuery.Scope,defaultQueryDef:matchingQuery.Definition,defaultQueryVariables:matchingQuery.Variables,defaultQueryPath:matchingQuery.AccessPath});for(var variables=defaultQueryBuilderObj?defaultQueryBuilderObj.defaultQueryVariables:{},regex=new RegExp("\\${([a-zA-Z0-9_]+)}","g"),match=void 0,fields2Map=[];match=regex.exec(variables);)match&&2==match.length&&fields2Map.push(match[1]);var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this4.state.fieldMappingValues&&_this4.state.fieldMappingValues[inputField]?_this4.state.fieldMappingValues[inputField]:""});var queryStr=_this4.state.showFieldMapper&&defaultQueryBuilderObj&&defaultQueryBuilderObj.defaultQueryName?'$qry.run("'+defaultQueryBuilderObj.defaultQueryScope+"."+defaultQueryBuilderObj.defaultQueryName+'", '+JSON.stringify(inputVariables)+', "'+defaultQueryBuilderObj.defaultQueryPath+'").then((result)=>{ $resolve(result); })':_this4.state.queryToCopy+"";_this4.setState({activeQueryId:activeQueryId,defaultQueryBuilderObj:defaultQueryBuilderObj,searchResults:searchResults,queryToCopy:queryStr})})}},{key:"componentDidUpdate",value:function(prevProps){var _this5=this;_.isEqual(prevProps.recentlySearchedQueries,this.props.recentlySearchedQueries)||this.refreshHistory(this.state.activeQueryId).then(function(searchResults){_this5.setState({searchResults:searchResults})})}},{key:"refreshHistory",value:function(activeQueryId){var _this6=this;return new Promise(function(resolve,reject){if(_this6.props.recentlySearchedQueries){var queryIds=_this6.props.recentlySearchedQueries?_this6.props.recentlySearchedQueries:[];-1==queryIds.indexOf(activeQueryId)&&queryIds.push(activeQueryId),$qry.run("mmf.getQueriesById",{queryIds:queryIds},"data.MetaQuery.MetaQueryFind").then(function(result){if(result&&Object.keys(result)){var searchResults=[];Object.keys(result).map(function(queryId){searchResults.push({uid:queryId,Name:result[queryId].Name,Scope:result[queryId].Scope,Definition:result[queryId].Definition,Variables:result[queryId].Variables,AccessPath:result[queryId].AccessPath})}),resolve(searchResults)}})}})}},{key:"render",value:function(){var _ref,_this7=this,RecordLookup=SrsReference(),searchQueriesProps={title:"Search History",tablename:"MetaQuery",displayfield:"Name",secondarydisplayfield:"Scope",searchfields:"Name,Scope",onChange:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(item){var queries,queriesWithoutCurrentId;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:queries=_this7.props.recentlySearchedQueries,queriesWithoutCurrentId=queries.filter(function(queryId,indx){return queryId!=item.id&&indx<_this7.historyLimit}),queries=[item.id].concat(queriesWithoutCurrentId),_this7.props.updateStore({updates:{recentlySearchedQueries:queries,activeSearchQueryId:item.id}}),_this7.loadDetails(item.id);case 5:case"end":return _context.stop()}},_callee,_this7)})),function(_x){return _ref.apply(this,arguments)})},notificationBar=this.props.embedded+""!="true"&&this.props.notifications&&this.props.notifications.length>0&&!this.props.showpreview?React.createElement("notification-bar",{styles:JSON.stringify({position:"fixed",width:"30%",right:10,minHeight:100,overflow:"auto",display:"block",zIndex:99999,bottom:5})}):null,searchPane=React.createElement("div",{className:"searchPane",style:{width:"20%"}},React.createElement("div",{style:{display:"inline-table",marginLeft:"20%",marginTop:10,marginBottom:10}},React.createElement(Button,_extends({},{kind:"primary",size:"small"},{onClick:function(e){$(".execute-button").click()},style:{justifyContent:"center",backgroundColor:"rgb(144, 23, 23)",boxShadow:"rgba(0, 0, 0, 0.133) 0px 1.6px 3.6px 0px, rgba(0, 0, 0, 0.11) 0px 0.3px 0.9px 0px",paddingLeft:60}}),"Run")),React.createElement("div",{style:{display:"inline-table",marginTop:10,marginLeft:10,marginBottom:20,padding:50,border:"1px solid #d4d3d3",boxShadow:"0 1.6px 3.6px 0 rgba(0, 0, 0, .132), 0 0.3px 0.9px 0 rgba(0, 0, 0, .108)"}},React.createElement(TextInput,{name:"",labelText:"Query Name",style:{float:"left"},className:this.props.className,placeholder:"Enter Name...",onChange:this.queryNameUpdated,required:"required",defaultValue:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryName?this.state.defaultQueryBuilderObj.defaultQueryName:""}),React.createElement(TextInput,{name:"",labelText:"Query Scope",style:{float:"left"},className:this.props.className,placeholder:"Enter Scope...",onChange:this.queryScopeUpdated,required:"required",defaultValue:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryScope?this.state.defaultQueryBuilderObj.defaultQueryScope:""}),React.createElement(TextInput,{name:"",labelText:"Access Path",style:{float:"left"},className:this.props.className,placeholder:"Enter path like data.TableName.TableNameFind.edges...",onChange:this.queryPathUpdated,required:"required",defaultValue:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryPath?this.state.defaultQueryBuilderObj.defaultQueryPath:""}),React.createElement(Button,{className:"btn-cls",style:{justifyContent:"center",marginLeft:"15%",marginTop:"10%"},onClick:this.saveQuery},"Save")),React.createElement("div",null,React.createElement(RecordLookup,searchQueriesProps),React.createElement("div",{className:"searchResults",style:{display:"inline-grid",width:"100%"}},this.state.searchResults.map(function(searchItem){return React.createElement("div",{value:searchItem.uid,className:"searchItem",onClick:function(e){_this7.loadDetails(e.target.getAttribute("value")),_this7.props.updateStore({updates:{activeSearchQueryId:e.target.getAttribute("value")}})},style:{margin:5,padding:5,border:"1px solid grey",borderRadius:"5%",color:_this7.state.activeQueryId==searchItem.uid?"blue":"black"}},searchItem.Name)})))),fieldMapperStyles={left:0,bottom:0,cursor:"pointer",position:"absolute",height:this.state.showFieldMapper?"30%":"2rem",width:this.state.showFieldMapper?"100%":"2rem",zIndex:100};this.state.showFieldMapper?(fieldMapperStyles.borderTop="1px solid #787a80",fieldMapperStyles.backgroundColor="#ececec",fieldMapperStyles.boxShadow="rgba(0, 0, 0, 0.133) 1.6px 0px 0px 3.6px, rgba(0, 0, 0, 0.11) 0.3px 0px 0px 0.9px"):(fieldMapperStyles.border=0,fieldMapperStyles.backgroundColor="#eefef0");for(var variables=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj.defaultQueryVariables:{},regex=new RegExp("\\${([a-zA-Z0-9_]+)}","g"),match=void 0,fields2Map=[];match=regex.exec(variables);)match&&2==match.length&&fields2Map.push(match[1]);var groupParentStyle={display:"block",float:"left",marginBottom:10,marginLeft:30},groupElementStyle={marginRight:30,width:"20vw",display:"inline-block",float:"left"},groupedItems={},fieldResult=[],listOfFields=(this.props.form&&this.props.form.formFields&&this.props.form.formFields,[]);(fields2Map=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[]).map(function(fieldName,indx){listOfFields.push(React.createElement(TextInput,{labelText:fieldName,placeholder:"Enter value...",required:!0,defaultValue:_this7.state.fieldMappingValues?_this7.state.fieldMappingValues[fieldName]:"",onChange:function(e){var fieldValue=e.target.value,fieldMappingValues=cloneDeep(_this7.state.fieldMappingValues);fieldMappingValues[fieldName]=fieldValue;var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this7.state.fieldMappingValues&&_this7.state.fieldMappingValues[inputField]?_this7.state.fieldMappingValues[inputField]:""});var queryStr=_this7.state.defaultQueryBuilderObj&&_this7.state.defaultQueryBuilderObj.defaultQueryName?'$qry.run("'+_this7.state.defaultQueryBuilderObj.defaultQueryScope+"."+_this7.state.defaultQueryBuilderObj.defaultQueryName+'", '+JSON.stringify(inputVariables)+', "'+_this7.state.defaultQueryBuilderObj.defaultQueryPath+'").then((result)=>{ $resolve(result); })':_this7.state.queryToCopy+"";_this7.setState({fieldMappingValues:fieldMappingValues,queryToCopy:queryStr})}}))});var fieldCount=0;return listOfFields.map(function(field,indx){if(field){var group=parseInt(fieldCount/4);groupedItems[group]=groupedItems[group]||[],groupedItems[group].push(React.createElement("div",{style:groupElementStyle},field)),fieldCount++}}),Object.keys(groupedItems).length>0?Object.keys(groupedItems).map(function(groupItemKey,indx){var fieldGroup=React.createElement("div",{style:groupParentStyle},groupedItems[groupItemKey]);fieldResult.push(fieldGroup)}):fieldResult=React.createElement("div",{style:{textAlign:"center",marginTop:"3rem",fontSize:"larger"}},"No fields to mock"),React.createElement("div",{className:this.state.hasResponse?"QueryEditor":"QueryEditor NoResponse",style:{display:"inline-flex",width:"100%"}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/GraphiqlView/Style.css!css");'),React.createElement("div",{style:fieldMapperStyles},this.state.showFieldMapper&&this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryName&&this.state.defaultQueryBuilderObj.defaultQueryScope?React.createElement("div",{style:{float:"right",marginTop:-20,width:"10rem",border:"1px solid blue",backgroundColor:"#76ae7e",color:"white",textAlign:"center",cursor:"copy"}},React.createElement(CopyToClipboard,{text:this.state.queryToCopy,onCopy:function(){return _this7.props.addFlashMessage({title:"Success - ",subtitle:"Query script copied to clipboard!"})}},React.createElement("span",null,"Copy Script"))):null,this.state.showFieldMapper?React.createElement(Close32,{style:{float:"right"},onClick:function(e){return _this7.setState({showFieldMapper:!_this7.state.showFieldMapper})}}):React.createElement(FieldMapper,{style:{float:"left"},onClick:function(e){var queryStr=_this7.state.queryToCopy+"";if(!_this7.state.showFieldMapper){var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this7.state.fieldMappingValues&&_this7.state.fieldMappingValues[inputField]?_this7.state.fieldMappingValues[inputField]:""}),queryStr='$qry.run("'+_this7.state.defaultQueryBuilderObj.defaultQueryScope+"."+_this7.state.defaultQueryBuilderObj.defaultQueryName+'", '+JSON.stringify(inputVariables)+', "'+_this7.state.defaultQueryBuilderObj.defaultQueryPath+'").then((result)=>{ $resolve(result); })'}_this7.setState({showFieldMapper:!_this7.state.showFieldMapper,queryToCopy:queryStr})}}),this.state.showFieldMapper?fieldResult:null),notificationBar,searchPane,React.createElement(GraphiQL,_extends({fetcher:this.graphQLFetcher,ref:this.graphiql},this.state,{query:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryDef?this.state.defaultQueryBuilderObj.defaultQueryDef:"",variables:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryVariables?this.state.defaultQueryBuilderObj.defaultQueryVariables:"",onEditQuery:function(queryVal){var defaultQueryBuilderObj=cloneDeep(_this7.state.defaultQueryBuilderObj);defaultQueryBuilderObj.defaultQueryDef=queryVal,_this7.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})},onEditVariables:function(queryVal){var defaultQueryBuilderObj=cloneDeep(_this7.state.defaultQueryBuilderObj);defaultQueryBuilderObj.defaultQueryVariables=queryVal,_this7.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}}),React.createElement(GraphiQL.Logo,null,"Query Builder"),React.createElement(GraphiQL.Toolbar,null)),this.state.hasResponse?null:React.createElement("div",{className:"noResultPane",style:{width:"30%"}},React.createElement("img",{src:"/resources/NoResults.jpg",style:{width:"20rem",height:"20rem",marginLeft:"15%",marginTop:"15%"}})))}}]),_GraphiQLComp}(React.Component),_export("GraphiqlView",GraphiqlView=function(props){return _GraphiQLComp}),_export("GraphiqlView",GraphiqlView),_export("default",GraphiqlView),_export("states",states=[{KeyName:"activeSearchQueryId",AccessPath:"activeSearchQueryId",DefaultValue:'{"activeSearchQueryId":  ""}'},{KeyName:"recentlySearchedQueries",AccessPath:"recentlySearchedQueries",DefaultValue:'{"recentlySearchedQueries": []}'},{KeyName:"notifications",AccessPath:"notifications",DefaultValue:'{"notifications": []}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/GraphiqlView/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","graphiql","isomorphic-fetch","lodash.clonedeep","react-icons/lib/fa/arrow-circle-left","react-icons/lib/fa/arrow-circle-right","@carbon/icons-react/lib/data--unstructured/32","@carbon/icons-react/lib/close/32","client/script/mmf/$qry.js","carbon-components-react","component/studio/SrsReference/Definition.js","react-copy-to-clipboard"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,GraphiQL,cloneDeep,FieldMapper,Close32,$qry,TextInput,Button,SrsReference,CopyToClipboard,_GraphiQLComp,GraphiqlView;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_graphiql){GraphiQL=_graphiql.default},function(_isomorphicFetch){_isomorphicFetch.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_reactIconsLibFaArrowCircleLeft){_reactIconsLibFaArrowCircleLeft.default},function(_reactIconsLibFaArrowCircleRight){_reactIconsLibFaArrowCircleRight.default},function(_carbonIconsReactLibDataUnstructured){FieldMapper=_carbonIconsReactLibDataUnstructured.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmf$qryJs){$qry=_clientScriptMmf$qryJs.$qry},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,Button=_carbonComponentsReact.Button,_carbonComponentsReact.Link,_carbonComponentsReact.Tabs,_carbonComponentsReact.Tab},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_reactCopyToClipboard){CopyToClipboard=_reactCopyToClipboard.default}],execute:function(){_GraphiQLComp=function(_React$Component){function _GraphiQLComp(props){_classCallCheck(this,_GraphiQLComp);var _this=_possibleConstructorReturn(this,(_GraphiQLComp.__proto__||Object.getPrototypeOf(_GraphiQLComp)).call(this,props));return _this.state={form:{},activeQueryId:"",query:"",variables:"",schema:void 0,operationName:null,theme:"dark",storage:null,defaultQuery:null,onEditOperationName:null,searchResults:[],getDefaultFieldNames:null,hasResponse:!1,fieldMappingValues:{},defaultQueryBuilderObj:{},queryToCopy:""},_this.historyLimit=15,_this.queryNameUpdated=_this.queryNameUpdated.bind(_this),_this.queryScopeUpdated=_this.queryScopeUpdated.bind(_this),_this.queryPathUpdated=_this.queryPathUpdated.bind(_this),_this.onToggle=_this.onToggle.bind(_this),_this.saveQuery=_this.saveQuery.bind(_this),_this.graphiql=React.createRef(),_this.graphQLFetcher=_this.graphQLFetcher.bind(_this),_this.refreshHistory=_this.refreshHistory.bind(_this),_this.loadDetails=_this.loadDetails.bind(_this),_this.queryName="",_this.queryScope="",_this.response="",_this}return _inherits(_GraphiQLComp,_React$Component),_createClass(_GraphiQLComp,[{key:"graphQLFetcher",value:function(graphQLParams){var _this2=this;return new Promise(function(resolve,reject){var updatedVariables=graphQLParams.variables;if(updatedVariables){for(var variables=JSON.stringify(graphQLParams.variables),match=void 0;match=new RegExp("\\${([a-zA-Z0-9_]+)}").exec(variables);)if(match&&2==match.length){var replaceFrom=match[0],replaceTo=_this2.state.fieldMappingValues[match[1]];variables=variables.replace(replaceFrom,replaceTo)}updatedVariables=JSON.parse(variables)}$qry._run(graphQLParams.query,updatedVariables).then(function(response){_this2.graphiql&&_this2.graphiql.current&&_this2.graphiql.current.refresh();var hasResponse=response&&response.data&&!response.data.__schema;_this2.setState({hasResponse:hasResponse}),resolve(response)})})}},{key:"saveQuery",value:function(){var _this3=this,_state$defaultQueryBu=this.state.defaultQueryBuilderObj,defaultQueryName=_state$defaultQueryBu.defaultQueryName,defaultQueryScope=_state$defaultQueryBu.defaultQueryScope,defaultQueryDef=_state$defaultQueryBu.defaultQueryDef,defaultQueryVariables=_state$defaultQueryBu.defaultQueryVariables,defaultQueryPath=_state$defaultQueryBu.defaultQueryPath;defaultQueryName&&$qry.saveQuery(defaultQueryName,defaultQueryScope,defaultQueryDef,defaultQueryVariables,defaultQueryPath).then(function(data){return _this3.props.addFlashMessage({title:"Success - ",subtitle:"Query "+defaultQueryScope+"."+defaultQueryName+" saved!"})})}},{key:"queryNameUpdated",value:function(e){var defaultQueryBuilderObj=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj:{};defaultQueryBuilderObj.defaultQueryName=e.target.value,this.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}},{key:"queryScopeUpdated",value:function(e){var defaultQueryBuilderObj=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj:{};defaultQueryBuilderObj.defaultQueryScope=e.target.value,this.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}},{key:"queryPathUpdated",value:function(e){var defaultQueryBuilderObj=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj:{};defaultQueryBuilderObj.defaultQueryPath=e.target.value,this.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}},{key:"onToggle",value:function(node,toggled){this.state.cursor&&(this.state.cursor.active=!1),node.active=!0,node.children&&(node.toggled=toggled),this.setState({cursor:node})}},{key:"componentDidMount",value:function(){!this.state.activeQueryId&&this.props.activeSearchQueryId&&this.loadDetails(this.props.activeSearchQueryId)}},{key:"loadDetails",value:function(activeQueryId){var _this4=this;this.refreshHistory(activeQueryId).then(function(searchResults){var matchingQuery=searchResults.filter(function(item){return item.uid==activeQueryId}),defaultQueryBuilderObj={};(matchingQuery=1==matchingQuery.length?matchingQuery[0]:null)&&(defaultQueryBuilderObj={defaultQueryName:matchingQuery.Name,defaultQueryScope:matchingQuery.Scope,defaultQueryDef:matchingQuery.Definition,defaultQueryVariables:matchingQuery.Variables,defaultQueryPath:matchingQuery.AccessPath});for(var variables=defaultQueryBuilderObj?defaultQueryBuilderObj.defaultQueryVariables:{},regex=new RegExp("\\${([a-zA-Z0-9_]+)}","g"),match=void 0,fields2Map=[];match=regex.exec(variables);)match&&2==match.length&&fields2Map.push(match[1]);var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this4.state.fieldMappingValues&&_this4.state.fieldMappingValues[inputField]?_this4.state.fieldMappingValues[inputField]:""});var queryStr=_this4.state.showFieldMapper&&defaultQueryBuilderObj&&defaultQueryBuilderObj.defaultQueryName?'$qry.run("'+defaultQueryBuilderObj.defaultQueryScope+"."+defaultQueryBuilderObj.defaultQueryName+'", '+JSON.stringify(inputVariables)+', "'+defaultQueryBuilderObj.defaultQueryPath+'").then((result)=>{ $resolve(result); })':_this4.state.queryToCopy+"";_this4.setState({activeQueryId:activeQueryId,defaultQueryBuilderObj:defaultQueryBuilderObj,searchResults:searchResults,queryToCopy:queryStr})})}},{key:"componentDidUpdate",value:function(prevProps){var _this5=this;_.isEqual(prevProps.recentlySearchedQueries,this.props.recentlySearchedQueries)||this.refreshHistory(this.state.activeQueryId).then(function(searchResults){_this5.setState({searchResults:searchResults})})}},{key:"refreshHistory",value:function(activeQueryId){var _this6=this;return new Promise(function(resolve,reject){if(_this6.props.recentlySearchedQueries){var queryIds=_this6.props.recentlySearchedQueries?_this6.props.recentlySearchedQueries:[];-1==queryIds.indexOf(activeQueryId)&&queryIds.push(activeQueryId),$qry.run("mmf.getQueriesById",{queryIds:queryIds},"data.MetaQuery.MetaQueryFind").then(function(result){if(result&&Object.keys(result)){var searchResults=[];Object.keys(result).map(function(queryId){searchResults.push({uid:queryId,Name:result[queryId].Name,Scope:result[queryId].Scope,Definition:result[queryId].Definition,Variables:result[queryId].Variables,AccessPath:result[queryId].AccessPath})}),resolve(searchResults)}})}})}},{key:"render",value:function(){var _ref,_this7=this,RecordLookup=SrsReference(),searchQueriesProps={title:"Search History",tablename:"MetaQuery",displayfield:"Name",secondarydisplayfield:"Scope",searchfields:"Name,Scope",onChange:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(item){var queries,queriesWithoutCurrentId;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:queries=_this7.props.recentlySearchedQueries,queriesWithoutCurrentId=queries.filter(function(queryId,indx){return queryId!=item.id&&indx<_this7.historyLimit}),queries=[item.id].concat(queriesWithoutCurrentId),_this7.props.updateStore({updates:{recentlySearchedQueries:queries,activeSearchQueryId:item.id}}),_this7.loadDetails(item.id);case 5:case"end":return _context.stop()}},_callee,_this7)})),function(_x){return _ref.apply(this,arguments)})},notificationBar=this.props.embedded+""!="true"&&this.props.notifications&&this.props.notifications.length>0&&!this.props.showpreview?React.createElement("notification-bar",{styles:JSON.stringify({position:"fixed",width:"30%",right:10,minHeight:100,overflow:"auto",display:"block",zIndex:99999,bottom:5})}):null,searchPane=React.createElement("div",{className:"searchPane",style:{width:"20%"}},React.createElement("div",{style:{display:"inline-table",marginLeft:"20%",marginTop:10,marginBottom:10}},React.createElement(Button,_extends({},{kind:"primary",size:"small"},{onClick:function(e){$(".execute-button").click()},style:{justifyContent:"center",backgroundColor:"rgb(144, 23, 23)",boxShadow:"rgba(0, 0, 0, 0.133) 0px 1.6px 3.6px 0px, rgba(0, 0, 0, 0.11) 0px 0.3px 0.9px 0px",paddingLeft:60}}),"Run")),React.createElement("div",{style:{display:"inline-table",marginTop:10,marginLeft:10,marginBottom:20,padding:50,border:"1px solid #d4d3d3",boxShadow:"0 1.6px 3.6px 0 rgba(0, 0, 0, .132), 0 0.3px 0.9px 0 rgba(0, 0, 0, .108)"}},React.createElement(TextInput,{name:"",labelText:"Query Name",style:{float:"left"},className:this.props.className,placeholder:"Enter Name...",onChange:this.queryNameUpdated,required:"required",defaultValue:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryName?this.state.defaultQueryBuilderObj.defaultQueryName:""}),React.createElement(TextInput,{name:"",labelText:"Query Scope",style:{float:"left"},className:this.props.className,placeholder:"Enter Scope...",onChange:this.queryScopeUpdated,required:"required",defaultValue:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryScope?this.state.defaultQueryBuilderObj.defaultQueryScope:""}),React.createElement(TextInput,{name:"",labelText:"Access Path",style:{float:"left"},className:this.props.className,placeholder:"Enter path like data.TableName.TableNameFind.edges...",onChange:this.queryPathUpdated,required:"required",defaultValue:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryPath?this.state.defaultQueryBuilderObj.defaultQueryPath:""}),React.createElement(Button,{className:"btn-cls",style:{justifyContent:"center",marginLeft:"15%",marginTop:"10%"},onClick:this.saveQuery},"Save")),React.createElement("div",null,React.createElement(RecordLookup,searchQueriesProps),React.createElement("div",{className:"searchResults",style:{display:"inline-grid",width:"100%"}},this.state.searchResults.map(function(searchItem){return React.createElement("div",{value:searchItem.uid,className:"searchItem",onClick:function(e){_this7.loadDetails(e.target.getAttribute("value")),_this7.props.updateStore({updates:{activeSearchQueryId:e.target.getAttribute("value")}})},style:{margin:5,padding:5,border:"1px solid grey",borderRadius:"5%",color:_this7.state.activeQueryId==searchItem.uid?"blue":"black"}},searchItem.Name)})))),fieldMapperStyles={left:0,bottom:0,cursor:"pointer",position:"absolute",height:this.state.showFieldMapper?"30%":"2rem",width:this.state.showFieldMapper?"100%":"2rem",zIndex:100};this.state.showFieldMapper?(fieldMapperStyles.borderTop="1px solid #787a80",fieldMapperStyles.backgroundColor="#ececec",fieldMapperStyles.boxShadow="rgba(0, 0, 0, 0.133) 1.6px 0px 0px 3.6px, rgba(0, 0, 0, 0.11) 0.3px 0px 0px 0.9px"):(fieldMapperStyles.border=0,fieldMapperStyles.backgroundColor="#eefef0");for(var variables=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj.defaultQueryVariables:{},regex=new RegExp("\\${([a-zA-Z0-9_]+)}","g"),match=void 0,fields2Map=[];match=regex.exec(variables);)match&&2==match.length&&fields2Map.push(match[1]);var groupParentStyle={display:"block",float:"left",marginBottom:10,marginLeft:30},groupElementStyle={marginRight:30,width:"20vw",display:"inline-block",float:"left"},groupedItems={},fieldResult=[],listOfFields=(this.props.form&&this.props.form.formFields&&this.props.form.formFields,[]);(fields2Map=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[]).map(function(fieldName,indx){listOfFields.push(React.createElement(TextInput,{labelText:fieldName,placeholder:"Enter value...",required:!0,defaultValue:_this7.state.fieldMappingValues?_this7.state.fieldMappingValues[fieldName]:"",onChange:function(e){var fieldValue=e.target.value,fieldMappingValues=cloneDeep(_this7.state.fieldMappingValues);fieldMappingValues[fieldName]=fieldValue;var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this7.state.fieldMappingValues&&_this7.state.fieldMappingValues[inputField]?_this7.state.fieldMappingValues[inputField]:""});var queryStr=_this7.state.defaultQueryBuilderObj&&_this7.state.defaultQueryBuilderObj.defaultQueryName?'$qry.run("'+_this7.state.defaultQueryBuilderObj.defaultQueryScope+"."+_this7.state.defaultQueryBuilderObj.defaultQueryName+'", '+JSON.stringify(inputVariables)+', "'+_this7.state.defaultQueryBuilderObj.defaultQueryPath+'").then((result)=>{ $resolve(result); })':_this7.state.queryToCopy+"";_this7.setState({fieldMappingValues:fieldMappingValues,queryToCopy:queryStr})}}))});var fieldCount=0;return listOfFields.map(function(field,indx){if(field){var group=parseInt(fieldCount/4);groupedItems[group]=groupedItems[group]||[],groupedItems[group].push(React.createElement("div",{style:groupElementStyle},field)),fieldCount++}}),Object.keys(groupedItems).length>0?Object.keys(groupedItems).map(function(groupItemKey,indx){var fieldGroup=React.createElement("div",{style:groupParentStyle},groupedItems[groupItemKey]);fieldResult.push(fieldGroup)}):fieldResult=React.createElement("div",{style:{textAlign:"center",marginTop:"3rem",fontSize:"larger"}},"No fields to mock"),React.createElement("div",{className:this.state.hasResponse?"QueryEditor":"QueryEditor NoResponse",style:{display:"inline-flex",width:"100%"}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/GraphiqlView/Style.css!css");'),React.createElement("div",{style:fieldMapperStyles},this.state.showFieldMapper&&this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryName&&this.state.defaultQueryBuilderObj.defaultQueryScope?React.createElement("div",{style:{float:"right",marginTop:-20,width:"10rem",border:"1px solid blue",backgroundColor:"#76ae7e",color:"white",textAlign:"center",cursor:"copy"}},React.createElement(CopyToClipboard,{text:this.state.queryToCopy,onCopy:function(){return _this7.props.addFlashMessage({title:"Success - ",subtitle:"Query script copied to clipboard!"})}},React.createElement("span",null,"Copy Script"))):null,this.state.showFieldMapper?React.createElement(Close32,{style:{float:"right"},onClick:function(e){return _this7.setState({showFieldMapper:!_this7.state.showFieldMapper})}}):React.createElement(FieldMapper,{style:{float:"left"},onClick:function(e){var queryStr=_this7.state.queryToCopy+"";if(!_this7.state.showFieldMapper){var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this7.state.fieldMappingValues&&_this7.state.fieldMappingValues[inputField]?_this7.state.fieldMappingValues[inputField]:""}),queryStr='$qry.run("'+_this7.state.defaultQueryBuilderObj.defaultQueryScope+"."+_this7.state.defaultQueryBuilderObj.defaultQueryName+'", '+JSON.stringify(inputVariables)+', "'+_this7.state.defaultQueryBuilderObj.defaultQueryPath+'").then((result)=>{ $resolve(result); })'}_this7.setState({showFieldMapper:!_this7.state.showFieldMapper,queryToCopy:queryStr})}}),this.state.showFieldMapper?fieldResult:null),notificationBar,searchPane,React.createElement(GraphiQL,_extends({fetcher:this.graphQLFetcher,ref:this.graphiql},this.state,{query:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryDef?this.state.defaultQueryBuilderObj.defaultQueryDef:"",variables:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryVariables?this.state.defaultQueryBuilderObj.defaultQueryVariables:"",onEditQuery:function(queryVal){var defaultQueryBuilderObj=cloneDeep(_this7.state.defaultQueryBuilderObj);defaultQueryBuilderObj.defaultQueryDef=queryVal,_this7.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})},onEditVariables:function(queryVal){var defaultQueryBuilderObj=cloneDeep(_this7.state.defaultQueryBuilderObj);defaultQueryBuilderObj.defaultQueryVariables=queryVal,_this7.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}}),React.createElement(GraphiQL.Logo,null,"Query Builder"),React.createElement(GraphiQL.Toolbar,null)),this.state.hasResponse?null:React.createElement("div",{className:"noResultPane",style:{width:"30%"}},React.createElement("img",{src:"/resources/NoResults.jpg",style:{width:"20rem",height:"20rem",marginLeft:"15%",marginTop:"15%"}})))}}]),_GraphiQLComp}(React.Component),_export("GraphiqlView",GraphiqlView=function(props){return _GraphiQLComp}),_export("GraphiqlView",GraphiqlView)}}}),System.register("component/studio/GridCanvas.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","thirdpartylib/gridstack/corelib.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,gridStackFn,gridStackUIFn,_GridCanvas_,GridCanvas,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_thirdpartylibGridstackCorelibJs){gridStackFn=_thirdpartylibGridstackCorelibJs.gridStackFn,gridStackUIFn=_thirdpartylibGridstackCorelibJs.gridStackUIFn}],execute:function(){_GridCanvas_=function(_React$Component){function _GridCanvas_(props){_classCallCheck(this,_GridCanvas_);var _this=_possibleConstructorReturn(this,(_GridCanvas_.__proto__||Object.getPrototypeOf(_GridCanvas_)).call(this,props));return $ele&&($ele.registerElement("ListLayout","mmf","React"),$ele.registerElement("GridCanvas","studio","React"),$ele.registerElement("WidgetContainer","studio","React"),$ele.registerElement("QuillEditor","buildingblock","React"),$ele.registerElement("FileUpload","buildingblock","React")),_this.initializeLayout=_this.initializeLayout.bind(_this),_this}return _inherits(_GridCanvas_,_React$Component),_createClass(_GridCanvas_,[{key:"componentDidMount",value:function(){var _this2=this;for(this.rootEl=this.refs.widgetcanvas,this.hostEl=this.rootEl;this.hostEl&&!this.hostEl.shadowRoot;)this.hostEl=this.hostEl.parentElement;this.options={width:12,float:!1,removable:".trash",verticalMargin:10,removable:!0,removeTimeout:100,acceptWidgets:".grid-stack-item",resizable:{handles:"e, se, s, sw, w"},draggable:{handle:".grid-stack-item-content",greedy:!0,drop:function(event,ui){ui.draggable.detach().appendTo($(".gridWidgetCanvas",this.hostEl))}}},gridStackFn($,window,this.rootEl).then(function(gridStackUIObj){gridStackUIFn($,gridStackUIObj,window),$(".gridWidgetCanvas",_this2.hostEl).gridstack(_this2.options),_this2.initializeLayout=_this2.initializeLayout.bind(_this2)})}},{key:"initializeLayout",value:function(hostEl,self){hostEl&&$(".gridWidgetCanvas",hostEl).each(function(){var grid=$(this).data("gridstack");if(grid){grid.removeAll();_.each([{x:1,y:0,width:5,height:2,minHeight:2,maxHeight:4,minWidth:2,maxWidth:12,id:1},{x:6,y:0,width:5,height:2,minWidth:2,maxWidth:12,id:2}],function(node){var eleData={tag:"list-layout"};grid.addWidget($('<div><div class="grid-stack-item-content"><widget-container tag='+eleData.tag+" widgetid="+eleData.widgetid+" widgetprops="+JSON.stringify(eleData)+' class="widgetContainer"></widget-container></div><div/>'),node.x,node.y,node.width,node.height,!1,node.minWidth,node.maxWidth,node.minHeight,node.maxHeight)},this)}})}},{key:"render",value:function(){return React.createElement("div",{className:"grid-stack gridWidgetCanvas",ref:"widgetcanvas"},React.createElement("style",null,"@import url('/thirdpartylib/gridstack/corestyles.css'); @import url('component/studio/PageDesigner/Style.css'); @import url('/thirdpartylib/carbon-components/styles.css'); @import url('/thirdpartylib/carbon-components/styles.css');"))}}]),_GridCanvas_}(React.Component),_export("GridCanvas",GridCanvas=function(props){return _GridCanvas_}),_export("GridCanvas",GridCanvas),_export("default",GridCanvas),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/GridCanvas/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","thirdpartylib/gridstack/corelib.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,gridStackFn,gridStackUIFn,_GridCanvas_,GridCanvas;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_thirdpartylibGridstackCorelibJs){gridStackFn=_thirdpartylibGridstackCorelibJs.gridStackFn,gridStackUIFn=_thirdpartylibGridstackCorelibJs.gridStackUIFn}],execute:function(){_GridCanvas_=function(_React$Component){function _GridCanvas_(props){_classCallCheck(this,_GridCanvas_);var _this=_possibleConstructorReturn(this,(_GridCanvas_.__proto__||Object.getPrototypeOf(_GridCanvas_)).call(this,props));return $ele&&($ele.registerElement("ListLayout","mmf","React"),$ele.registerElement("GridCanvas","studio","React"),$ele.registerElement("WidgetContainer","studio","React"),$ele.registerElement("QuillEditor","buildingblock","React"),$ele.registerElement("FileUpload","buildingblock","React")),_this.initializeLayout=_this.initializeLayout.bind(_this),_this}return _inherits(_GridCanvas_,_React$Component),_createClass(_GridCanvas_,[{key:"componentDidMount",value:function(){var _this2=this;for(this.rootEl=this.refs.widgetcanvas,this.hostEl=this.rootEl;this.hostEl&&!this.hostEl.shadowRoot;)this.hostEl=this.hostEl.parentElement;this.options={width:12,float:!1,removable:".trash",verticalMargin:10,removable:!0,removeTimeout:100,acceptWidgets:".grid-stack-item",resizable:{handles:"e, se, s, sw, w"},draggable:{handle:".grid-stack-item-content",greedy:!0,drop:function(event,ui){ui.draggable.detach().appendTo($(".gridWidgetCanvas",this.hostEl))}}},gridStackFn($,window,this.rootEl).then(function(gridStackUIObj){gridStackUIFn($,gridStackUIObj,window),$(".gridWidgetCanvas",_this2.hostEl).gridstack(_this2.options),_this2.initializeLayout=_this2.initializeLayout.bind(_this2)})}},{key:"initializeLayout",value:function(hostEl,self){hostEl&&$(".gridWidgetCanvas",hostEl).each(function(){var grid=$(this).data("gridstack");if(grid){grid.removeAll();_.each([{x:1,y:0,width:5,height:2,minHeight:2,maxHeight:4,minWidth:2,maxWidth:12,id:1},{x:6,y:0,width:5,height:2,minWidth:2,maxWidth:12,id:2}],function(node){var eleData={tag:"list-layout"};grid.addWidget($('<div><div class="grid-stack-item-content"><widget-container tag='+eleData.tag+" widgetid="+eleData.widgetid+" widgetprops="+JSON.stringify(eleData)+' class="widgetContainer"></widget-container></div><div/>'),node.x,node.y,node.width,node.height,!1,node.minWidth,node.maxWidth,node.minHeight,node.maxHeight)},this)}})}},{key:"render",value:function(){return React.createElement("div",{className:"grid-stack gridWidgetCanvas",ref:"widgetcanvas"},React.createElement("style",null,"@import url('/thirdpartylib/gridstack/corestyles.css'); @import url('component/studio/PageDesigner/Style.css'); @import url('/thirdpartylib/carbon-components/styles.css'); @import url('/thirdpartylib/carbon-components/styles.css');"))}}]),_GridCanvas_}(React.Component),_export("GridCanvas",GridCanvas=function(props){return _GridCanvas_}),_export("GridCanvas",GridCanvas)}}}),System.register("component/studio/IconPicker.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,_IconPicker_,IconPicker,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem}],execute:function(){_IconPicker_=function(_React$Component){function _IconPicker_(props){_classCallCheck(this,_IconPicker_);var _this=_possibleConstructorReturn(this,(_IconPicker_.__proto__||Object.getPrototypeOf(_IconPicker_)).call(this,props));return _this.state={reload:!1,defaultIconURL:"@carbon/icons-react/lib/apps/16.js",iconURL:_this.props.iconURL?_this.props.iconURL:""},_this}return _inherits(_IconPicker_,_React$Component),_createClass(_IconPicker_,[{key:"componentDidMount",value:function(){var _this2=this,iconURL=this.state.iconURL?this.state.iconURL:this.state.defaultIconURL;System.import(iconURL).then(function(iconDef){_this2.cardIcon=iconDef,_this2.setState({reload:!_this2.state.reload})})}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this3=this;if(prevState.iconURL!=this.state.iconURL){var iconURL=this.state.iconURL?this.state.iconURL:this.defaultIconURL;System.import(iconURL).then(function(iconDef){_this3.cardIcon=iconDef,_this3.setState({reload:!_this3.state.reload})})}}},{key:"render",value:function(){var _this4=this;if(!this.cardIcon)return React.createElement("div",null,"Loading...");var CardIcon=this.cardIcon;return React.createElement("div",{style:{display:"inline-flex"}},React.createElement("style",null,'@import url("component/studio/IconPicker/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(Select,{style:{float:"left",marginTop:3,width:"50%"},labelText:"Icon Picker",onChange:function(e){_this4.setState({iconURL:"@carbon/icons-react/lib/"+e.target.value+".js"}),_this4.props.updateStore&&_this4.props.updateStore({updates:{selectedIcon:{iconName:e.target.value}}})},id:"iconpicker"},React.createElement(SelectItem,{value:"archive/32",text:"Archive"}),React.createElement(SelectItem,{value:"restaurant/32",text:"Restaurant"}),React.createElement(SelectItem,{value:"apps/16",text:"Apps"}),React.createElement(SelectItem,{value:"awake/16",text:"Awake"}),React.createElement(SelectItem,{value:"bluetooth/32",text:"Bluetooth"}),React.createElement(SelectItem,{value:"bookmark/32",text:"Bookmark"}),React.createElement(SelectItem,{value:"calculator/32",text:"Calculator"})),React.createElement(CardIcon,{style:{float:"left",width:32,marginTop:32,marginLeft:25,height:32,marginBottom:15}}))}}]),_IconPicker_}(React.Component),_export("IconPicker",IconPicker=function(props){return _IconPicker_}),_export("IconPicker",IconPicker),_export("default",IconPicker),_export("states",states=[{KeyName:"selectedIcon",AccessPath:"selectedIcon",DefaultValue:'{"selectedIcon": {"iconName": "apps/16"}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IconPicker/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,_IconPicker_,IconPicker;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem}],execute:function(){_IconPicker_=function(_React$Component){function _IconPicker_(props){_classCallCheck(this,_IconPicker_);var _this=_possibleConstructorReturn(this,(_IconPicker_.__proto__||Object.getPrototypeOf(_IconPicker_)).call(this,props));return _this.state={reload:!1,defaultIconURL:"@carbon/icons-react/lib/apps/16.js",iconURL:_this.props.iconURL?_this.props.iconURL:""},_this}return _inherits(_IconPicker_,_React$Component),_createClass(_IconPicker_,[{key:"componentDidMount",value:function(){var _this2=this,iconURL=this.state.iconURL?this.state.iconURL:this.state.defaultIconURL;System.import(iconURL).then(function(iconDef){_this2.cardIcon=iconDef,_this2.setState({reload:!_this2.state.reload})})}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this3=this;if(prevState.iconURL!=this.state.iconURL){var iconURL=this.state.iconURL?this.state.iconURL:this.defaultIconURL;System.import(iconURL).then(function(iconDef){_this3.cardIcon=iconDef,_this3.setState({reload:!_this3.state.reload})})}}},{key:"render",value:function(){var _this4=this;if(!this.cardIcon)return React.createElement("div",null,"Loading...");var CardIcon=this.cardIcon;return React.createElement("div",{style:{display:"inline-flex"}},React.createElement("style",null,'@import url("component/studio/IconPicker/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(Select,{style:{float:"left",marginTop:3,width:"50%"},labelText:"Icon Picker",onChange:function(e){_this4.setState({iconURL:"@carbon/icons-react/lib/"+e.target.value+".js"}),_this4.props.updateStore&&_this4.props.updateStore({updates:{selectedIcon:{iconName:e.target.value}}})},id:"iconpicker"},React.createElement(SelectItem,{value:"archive/32",text:"Archive"}),React.createElement(SelectItem,{value:"restaurant/32",text:"Restaurant"}),React.createElement(SelectItem,{value:"apps/16",text:"Apps"}),React.createElement(SelectItem,{value:"awake/16",text:"Awake"}),React.createElement(SelectItem,{value:"bluetooth/32",text:"Bluetooth"}),React.createElement(SelectItem,{value:"bookmark/32",text:"Bookmark"}),React.createElement(SelectItem,{value:"calculator/32",text:"Calculator"})),React.createElement(CardIcon,{style:{float:"left",width:32,marginTop:32,marginLeft:25,height:32,marginBottom:15}}))}}]),_IconPicker_}(React.Component),_export("IconPicker",IconPicker=function(props){return _IconPicker_}),_export("IconPicker",IconPicker)}}}),System.register("component/studio/IdeActionMapper.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewAction/Definition.js","client/script/mmf/DesignerConstants.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Search20,Edit20,GraphQLDataUtil,DESIGNER_CONST,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeActionMapper,IdeActionMapper,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibClose){_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewActionDefinitionJs){_componentMmfNewActionDefinitionJs.NewAction},function(_clientScriptMmfDesignerConstantsJs){DESIGNER_CONST=_clientScriptMmfDesignerConstantsJs.DESIGNER_CONST}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeActionMapper=function(_React$Component){function _IdeActionMapper(props){_classCallCheck(this,_IdeActionMapper);var _this=_possibleConstructorReturn(this,(_IdeActionMapper.__proto__||Object.getPrototypeOf(_IdeActionMapper)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],fileId:_this.props.compDetails?_this.props.compDetails.file_id:"-1",fileName:_this.props.compDetails?_this.props.compDetails.fileName:"",rowInfo:null,showPreview:!1,reload:!1,newActionKey:Date.now()},$ele.registerElement("NewAction","mmf","React"),_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_IdeActionMapper,_React$Component),_createClass(_IdeActionMapper,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"componentDidUpdate",value:function(prevProps,prevState){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_actions"==this.props.previewTarget&&(this.createRows(),this.setState({showPreview:!0,reload:!this.state.reload})),prevProps.compDetails&&prevProps.compDetails.file_id!==this.state.fileId&&this.createRows()}},{key:"createRows",value:function(){var self=this;GraphQLDataUtil().getRecord(DESIGNER_CONST.GET_META_COMPONENT_ACTION_BY_ID,{ActionComponent:this.state.fileId}).then(function(instances){if(instances&&instances.length>0){for(var initHead=instances[0].node,headers=Object.keys(initHead).map(function(key){return{key:key,header:key}}),rows=[],tabIn=0;tabIn<instances.length;tabIn++){var tableRow=instances[tabIn].node;tableRow.id=tabIn,rows.push(tableRow)}self.setState({headers:headers,rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"clearAll",value:function(){var checked=this.state.checked;this.state.rows.forEach(function(row,index){checked[index]=!!checked[index]&&!checked[index]}),this.setState({checked:checked,selectAll:!1})}},{key:"getCheckedItems",value:function(){var checkedItems=0;return this.state.checked.forEach(function(entry){entry&&checkedItems++}),checkedItems}},{key:"searchTable",value:function(evt){var newRows=[];this.state.rows.map(function(obj){Object.keys(obj).forEach(function(key){obj[key].toUpperCase().includes(evt.currentTarget.value.toUpperCase())&&!newRows.includes(obj)&&newRows.push(obj)})}),this.setState({filteredRows:newRows})}},{key:"showPreview",value:function(rowData){var rowInfo={};rowData&&rowData.cells&&rowData.cells.length>0&&rowData.cells.forEach(function(cell){var key=cell&&cell.id&&cell.id.split(":")[1];rowInfo[key]=cell.value}),this.setState({rowInfo:rowInfo,showPreview:!0,newActionKey:Date.now()}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"render",value:function(){var _this3=this,self=this,recordData=this.state.rowInfo?JSON.stringify(this.state.rowInfo):null,preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_actions"},React.createElement("new-action",{key:this.state.newActionKey,inline:this.props.inline,record:recordData,component_id:this.state.fileId,component_name:this.state.fileName,lite:!0})):React.createElement("div",null);return React.createElement("div",{className:"ide-action-mapper"},preview,React.createElement("style",null,'@import url("component/studio/IdeActionMapper/Style.css");'),React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails&&props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeActionMapper}(React.Component),_export("IdeActionMapper",IdeActionMapper=function(props){return _IdeActionMapper}),_export("IdeActionMapper",IdeActionMapper),_export("default",IdeActionMapper),_export("states",states=[{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IdeConsole.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_IdeConsole,IdeConsole,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_IdeConsole=function(_React$Component){function _IdeConsole(){return _classCallCheck(this,_IdeConsole),_possibleConstructorReturn(this,(_IdeConsole.__proto__||Object.getPrototypeOf(_IdeConsole)).apply(this,arguments))}return _inherits(_IdeConsole,_React$Component),_createClass(_IdeConsole,[{key:"render",value:function(){return React.createElement("div",{className:"ide-console"},React.createElement("span",null,"IdeConsole goes here..."))}}]),_IdeConsole}(React.Component),_export("IdeConsole",IdeConsole=function(props){return _IdeConsole}),_export("IdeConsole",IdeConsole),_export("default",IdeConsole),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IdeDependency.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewRouteRequires/Definition.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Edit20,Search20,Close32,GraphQLDataUtil,ErrorBoundary,NewRouteRequires,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeDependency,IdeDependency,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewRouteRequiresDefinitionJs){NewRouteRequires=_componentMmfNewRouteRequiresDefinitionJs.NewRouteRequires}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeDependency=function(_React$Component){function _IdeDependency(props){_classCallCheck(this,_IdeDependency);var _this=_possibleConstructorReturn(this,(_IdeDependency.__proto__||Object.getPrototypeOf(_IdeDependency)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],reload:!1,newStateKey:Date.now()},_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.state.showPreview=!1,_this.state.fileId=_this.props.compDetails.file_id,_this.state.fileName=_this.props.compDetails.fileName,_this.state.rowInfo=null,$ele.registerElement("NewRouteRequires","mmf","React"),_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_IdeDependency,_React$Component),_createClass(_IdeDependency,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_deps"==this.props.previewTarget&&this.setState({showPreview:!0,reload:!this.state.reload}),prevProps.reload==this.props.reload&&prevProps.compDetails.file_id===this.props.compDetails.file_id||this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var self=this;GraphQLDataUtil().getRecord("mmf.getMetaRouteRequiresByRoute",{Router:this.state.fileId}).then(function(instances){if(instances&&instances.length>0){for(var rows=[],tabIn=0;tabIn<instances.length;tabIn++){var instance=instances[tabIn].node,tableRow={};tableRow.id=tabIn,tableRow.RequiredComponent=instance.requiredComponent.Name,tableRow.RequiredComponentId=instance.RequiredComponent,tableRow.Order=instance.Order,tableRow.uid=instance.uid,tableRow.Router=instance.Router,rows.push(tableRow)}self.setState({headers:[{key:"RequiredComponent",header:"RequiredComponent"},{key:"Order",header:"Order"}],rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"getComponentToRender",value:function(){var NewRouteReqComp=NewRouteRequires();return React.createElement("div",{className:"previewPane"},React.createElement(NewRouteReqComp,{routeId:this.state.fileId,routeName:this.state.fileName,isFromStateMapper:!0,rowInfo:this.state.rowInfo}))}},{key:"getPreviewPane",value:function(){var newRouteComp=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(newRouteComp);return React.createElement("div",null,React.createElement("div",{className:"screenOverlay"}),React.createElement(Close32,{className:"cancelPreview",onClick:this.cancelPreview.bind(this)}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.setState({showPreview:!1})}},{key:"showPreview",value:function(rowId){var rowInfo=this.state.rows.filter(function(rowItem){return rowItem.id==rowId});rowInfo=rowInfo&&rowInfo.length>0?rowInfo[0]:null,this.setState({showPreview:!0,rowInfo:rowInfo}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"clearAll",value:function(){var checked=this.state.checked;this.state.rows.forEach(function(row,index){checked[index]=!!checked[index]&&!checked[index]}),this.setState({checked:checked,selectAll:!1})}},{key:"getCheckedItems",value:function(){var checkedItems=0;return this.state.checked.forEach(function(entry){entry&&checkedItems++}),checkedItems}},{key:"searchTable",value:function(evt){var newRows=[];this.state.rows.map(function(obj){Object.keys(obj).forEach(function(key){obj[key].toUpperCase().includes(evt.currentTarget.value.toUpperCase())&&!newRows.includes(obj)&&newRows.push(obj)})}),this.setState({filteredRows:newRows})}},{key:"batchActionClick",value:function(){}},{key:"render",value:function(){var _this3=this,recordData=(this.getCheckedItems(),this.state.rowInfo?JSON.stringify({uid:this.state.rowInfo.uid,component_id:this.state.rowInfo.RequiredComponentId,order:this.state.rowInfo.Order}):null),preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_deps"},React.createElement("new-route-requires",{record:recordData,route_id:this.state.fileId,route_name:this.state.fileName})):React.createElement("div",null),self=this;return React.createElement("div",{className:"ide-state-mapper"},React.createElement("style",null,'@import url("component/studio/IdeDependency/Style.css");'),this.state.showPreview?preview:null,React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row.id)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeDependency}(React.Component),_export("IdeDependency",IdeDependency=function(props){return _IdeDependency}),_export("IdeDependency",IdeDependency),_export("default",IdeDependency),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IdeFormFields.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_IdeFormFields,IdeFormFields,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,_carbonComponentsReact.TextInput}],execute:function(){_IdeFormFields=function(_React$Component){function _IdeFormFields(){return _classCallCheck(this,_IdeFormFields),_possibleConstructorReturn(this,(_IdeFormFields.__proto__||Object.getPrototypeOf(_IdeFormFields)).apply(this,arguments))}return _inherits(_IdeFormFields,_React$Component),_createClass(_IdeFormFields,[{key:"render",value:function(){var groupParentStyle={display:"block",width:"100vw",float:"left",marginBottom:10},groupElementStyle={marginRight:30,width:"20vw",display:"inline-block",float:"left"},groupedItems={},fieldResult=[],formFields=this.props.form&&this.props.form.formFields?this.props.form.formFields:[],fieldCount=0;return[formFields.fileType,formFields.fileName,formFields.scope,formFields.pagePath,formFields.componentType,formFields.styleType,formFields.componentVersion,formFields.hookOnModelField,formFields.content_type,formFields.triggerTypeField,formFields.hookSequenceField,formFields.importFromModel,formFields.importOnModelField,formFields.importExportOrder,formFields.localPathField,formFields.importExportLevel,formFields.importExportActive,formFields.importConditionField,formFields.exportConditionField,formFields.widgetTrigger,formFields.widgetOrder,formFields.widgetActive,formFields.widgetUpdateType,formFields.widgetUpdateTarget,formFields.pageActionActive,formFields.pageActionOrder,formFields.relativePath,formFields.methodType,formFields.methodCollection,formFields.isPublic].map(function(field,indx){if(field){var group=parseInt(fieldCount/4);groupedItems[group]=groupedItems[group]||[],groupedItems[group].push(React.createElement("div",{style:groupElementStyle},field)),fieldCount++}}),Object.keys(groupedItems).length>0&&Object.keys(groupedItems).map(function(groupItemKey,indx){var fieldGroup=React.createElement("div",{style:groupParentStyle},groupedItems[groupItemKey]);fieldResult.push(fieldGroup)}),React.createElement("div",{className:"footerContents"},React.createElement("style",null,'@import url("component/studio/IdeFormFields/Style.css");'),fieldResult)}}]),_IdeFormFields}(React.Component),_export("IdeFormFields",IdeFormFields=function(props){return _IdeFormFields}),_export("IdeFormFields",IdeFormFields),_export("default",IdeFormFields),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IdeNavigator.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react/lib/components/UIShell"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SideNav,SideNavMenu,SideNavMenuItem,_IdeNavigator_,IdeNavigator,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReactLibComponentsUIShell){_carbonComponentsReactLibComponentsUIShell.Content,SideNav=_carbonComponentsReactLibComponentsUIShell.SideNav,_carbonComponentsReactLibComponentsUIShell.SideNavItems,_carbonComponentsReactLibComponentsUIShell.SideNavLink,SideNavMenu=_carbonComponentsReactLibComponentsUIShell.SideNavMenu,SideNavMenuItem=_carbonComponentsReactLibComponentsUIShell.SideNavMenuItem}],execute:function(){_IdeNavigator_=function(_React$Component){function _IdeNavigator_(props){_classCallCheck(this,_IdeNavigator_);var _this=_possibleConstructorReturn(this,(_IdeNavigator_.__proto__||Object.getPrototypeOf(_IdeNavigator_)).call(this,props));return _this.handleClick=_this.handleClick.bind(_this),_this}return _inherits(_IdeNavigator_,_React$Component),_createClass(_IdeNavigator_,[{key:"transformData",value:function(data){var transformedData={};return data&&data.children&&Object.keys(data.children).map(function(itemsPerScope){transformedData[data.children[itemsPerScope].name]=transformedData[data.children[itemsPerScope].name]||[],data.children[itemsPerScope].children&&data.children[itemsPerScope].children.map(function(scopedItem){transformedData[data.children[itemsPerScope].name].push({id:scopedItem.id,name:scopedItem.name})})}),transformedData}},{key:"handleClick",value:function(e){var recordId=e.target.id?e.target.id:e.target.parentNode.id;this.props.postToggle({id:recordId})}},{key:"render",value:function(){var _this2=this,data=this.transformData(this.props.data),slideNavMenus=[];return Object.keys(data).map(function(scopeKey){var navMenuItems=[];data[scopeKey]&&data[scopeKey].map(function(navMenuItem){navMenuItems.push(React.createElement(SideNavMenuItem,{key:navMenuItem.id,id:navMenuItem.id,onClick:_this2.handleClick,href:"javascript:void(0)"},navMenuItem.name))}),slideNavMenus.push(React.createElement(SideNavMenu,{title:scopeKey},navMenuItems))}),React.createElement("div",null,React.createElement(SideNav,{expanded:!0,isChildOfHeader:!1,"aria-label":"Side navigation"},slideNavMenus))}}]),_IdeNavigator_}(React.Component),_export("IdeNavigator",IdeNavigator=function(props){return _IdeNavigator_}),_export("IdeNavigator",IdeNavigator),_export("default",IdeNavigator),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IdeProps.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewComponentProp/Definition.js","client/script/mmf/DesignerConstants.js","component/studio/IdeStateMapper/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Edit20,Search20,Close32,GraphQLDataUtil,ErrorBoundary,NewComponentProp,DESIGNER_CONST,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeProps_,IdeProps,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewComponentPropDefinitionJs){NewComponentProp=_componentMmfNewComponentPropDefinitionJs.NewComponentProp},function(_clientScriptMmfDesignerConstantsJs){DESIGNER_CONST=_clientScriptMmfDesignerConstantsJs.DESIGNER_CONST},function(_componentStudioIdeStateMapperStyleCssCss){}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeProps_=function(_React$Component){function _IdeProps_(props){_classCallCheck(this,_IdeProps_);var _this=_possibleConstructorReturn(this,(_IdeProps_.__proto__||Object.getPrototypeOf(_IdeProps_)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],reload:!1,newPropsKey:Date.now()},_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.state.showPreview=!1,_this.state.fileId=_this.props.compDetails.file_id,_this.state.fileName=_this.props.compDetails.fileName,_this.state.rowInfo=null,$ele.registerElement("NewComponentProp","mmf","React"),_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_IdeProps_,_React$Component),_createClass(_IdeProps_,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_props"==this.props.previewTarget&&(this.createRows(),this.setState({showPreview:!0,reload:!this.state.reload})),prevProps.reload==this.props.reload&&prevProps.compDetails.file_id===this.props.compDetails.file_id||this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var self=this,componentId=this.state.fileId?this.state.fileId:"";GraphQLDataUtil().getRecord(DESIGNER_CONST.GET_META_COMPONENT_PROP_BY_ID,{componentId:componentId}).then(function(instances){if(instances&&instances.length>0){for(var initHead=instances[0].node,headers=Object.keys(initHead).map(function(key){return{key:key,header:key}}),rows=[],tabIn=0;tabIn<instances.length;tabIn++){var tableRow=instances[tabIn].node;tableRow.id=tabIn,rows.push(tableRow)}var rowsWithZeroOrder=(rows=rows.sort(function(a,b){return a.Order?b.Order?a.Order-b.Order:-1:b.Order?1:-1})).filter(function(row){return 0==row.Order});rows=rows.filter(function(row){return 0!=row.Order}),rows=rowsWithZeroOrder.concat(rows),self.setState({headers:headers,rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"getComponentToRender",value:function(){var NewCompProp=NewComponentProp();return React.createElement("div",{className:"previewPane"},React.createElement(NewCompProp,{key:this.state.newPropsKey,inline:this.props.inline,componentId:this.state.fileId,componentName:this.state.fileName,record:this.state.rowInfo}))}},{key:"getPreviewPane",value:function(){var newStateComp=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(newStateComp);return React.createElement("div",null,React.createElement("div",{className:"screenOverlay"}),React.createElement(Close32,{className:"cancelPreview",onClick:this.cancelPreview.bind(this)}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.setState({showPreview:!1})}},{key:"showPreview",value:function(rowData){var rowInfo={};rowData&&rowData.cells&&rowData.cells.length>0&&rowData.cells.forEach(function(cell){var key=cell&&cell.id&&cell.id.split(":")[1];rowInfo[key]=cell.value}),this.setState({showPreview:!0,rowInfo:rowInfo,newPropsKey:Date.now()}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"render",value:function(){var _this3=this,recordData=this.state.rowInfo?JSON.stringify(this.state.rowInfo):null,preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_props"},React.createElement("new-component-prop",{key:this.state.newPropsKey,inline:this.props.inline,record:recordData,component_id:this.state.fileId,component_name:this.state.fileName})):React.createElement("div",null),self=this;return React.createElement("div",{className:"ide-state-mapper"},React.createElement("style",null,'@import url("component/studio/IdeStateMapper/Style.css");'),preview,React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeProps_}(React.Component),_export("IdeProps",IdeProps=function(props){return _IdeProps_}),_export("IdeProps",IdeProps),_export("default",IdeProps),_export("states",states=[{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IdeStateMapper.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewState/Definition.js","client/script/mmf/DesignerConstants.js","component/studio/IdeStateMapper/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Edit20,Search20,Close32,GraphQLDataUtil,ErrorBoundary,NewState,DESIGNER_CONST,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeStateMapper,IdeStateMapper,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewStateDefinitionJs){NewState=_componentMmfNewStateDefinitionJs.NewState},function(_clientScriptMmfDesignerConstantsJs){DESIGNER_CONST=_clientScriptMmfDesignerConstantsJs.DESIGNER_CONST},function(_componentStudioIdeStateMapperStyleCssCss){}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeStateMapper=function(_React$Component){function _IdeStateMapper(props){_classCallCheck(this,_IdeStateMapper);var _this=_possibleConstructorReturn(this,(_IdeStateMapper.__proto__||Object.getPrototypeOf(_IdeStateMapper)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],reload:!1,newStateKey:Date.now()},_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.state.showPreview=!1,_this.state.fileId=_this.props.compDetails.file_id,_this.state.fileName=_this.props.compDetails.fileName,_this.state.rowInfo=null,_this.createRows=_this.createRows.bind(_this),$ele.registerElement("NewState","mmf","React"),_this}return _inherits(_IdeStateMapper,_React$Component),_createClass(_IdeStateMapper,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_state"==this.props.previewTarget&&this.setState({showPreview:!1,reload:!this.state.reload}),prevProps.reload==this.props.reload&&prevProps.compDetails.file_id===this.props.compDetails.file_id||this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var self=this;GraphQLDataUtil().getRecord(DESIGNER_CONST.GET_META_COMPONENT_STATE_BY_ID,{StateComponent:this.state.fileId}).then(function(instances){if(instances&&instances.length>0){for(var initHead=instances[0].node,headers=Object.keys(initHead).map(function(key){return{key:key,header:key}}),rows=[],tabIn=0;tabIn<instances.length;tabIn++){var tableRow=instances[tabIn].node;tableRow.id=tabIn,rows.push(tableRow)}self.setState({headers:headers,rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"getComponentToRender",value:function(){var NewStateComp=NewState();return React.createElement("div",{className:"previewPane"},React.createElement(NewStateComp,{inline:this.props.inline,component_id:this.state.fileId,componentName:this.state.fileName,isFromStateMapper:!0,rowInfo:this.state.rowInfo}))}},{key:"getPreviewPane",value:function(){var newStateComp=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(newStateComp);return previewComponent=React.createElement("preview-component",null,React.createElement("new-state",{key:this.state.newStateKey,inline:this.props.inline,component_id:this.state.fileId,component_name:this.state.fileName,lite:!0})),React.createElement("div",null,React.createElement("div",{className:"screenOverlay"}),React.createElement(Close32,{className:"cancelPreview",onClick:this.cancelPreview.bind(this)}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.setState({showPreview:!1})}},{key:"showPreview",value:function(rowData){var rowInfo={};rowData&&rowData.cells&&rowData.cells.length>0&&rowData.cells.forEach(function(cell){var key=cell&&cell.id&&cell.id.split(":")[1];rowInfo[key]=cell.value}),this.setState({showPreview:!0,rowInfo:rowInfo,newStateKey:Date.now()}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"clearAll",value:function(){var checked=this.state.checked;this.state.rows.forEach(function(row,index){checked[index]=!!checked[index]&&!checked[index]}),this.setState({checked:checked,selectAll:!1})}},{key:"getCheckedItems",value:function(){var checkedItems=0;return this.state.checked.forEach(function(entry){entry&&checkedItems++}),checkedItems}},{key:"searchTable",value:function(evt){var newRows=[];this.state.rows.map(function(obj){Object.keys(obj).forEach(function(key){obj[key].toUpperCase().includes(evt.currentTarget.value.toUpperCase())&&!newRows.includes(obj)&&newRows.push(obj)})}),this.setState({filteredRows:newRows})}},{key:"batchActionClick",value:function(){}},{key:"render",value:function(){var _this3=this,recordData=(this.getCheckedItems(),this.state.rowInfo?JSON.stringify(this.state.rowInfo):null),preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_state"},React.createElement("new-state",{key:this.state.newStateKey,inline:this.props.inline,record:recordData,component_id:this.state.fileId,component_name:this.state.fileName})):React.createElement("div",null),self=this;return React.createElement("div",{className:"ide-state-mapper"},React.createElement("style",null,'@import url("component/studio/IdeStateMapper/Style.css");'),preview,React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeStateMapper}(React.Component),_export("IdeStateMapper",IdeStateMapper=function(props){return _IdeStateMapper}),_export("IdeStateMapper",IdeStateMapper),_export("default",IdeStateMapper),_export("states",states=[{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IdeValidation.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_IdeValidation,IdeValidation,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_IdeValidation=function(_React$Component){function _IdeValidation(){return _classCallCheck(this,_IdeValidation),_possibleConstructorReturn(this,(_IdeValidation.__proto__||Object.getPrototypeOf(_IdeValidation)).apply(this,arguments))}return _inherits(_IdeValidation,_React$Component),_createClass(_IdeValidation,[{key:"render",value:function(){return React.createElement("div",{className:"ide-validator"},React.createElement("span",null,"IdeValidation goes here..."))}}]),_IdeValidation}(React.Component),_export("IdeValidation",IdeValidation=function(props){return _IdeValidation}),_export("IdeValidation",IdeValidation),_export("default",IdeValidation),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/InlinePreview.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/SrsIFrame/Definition.js","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SrsIFrame,Select,SelectItem,Toggle,cloneDeep,_InlinePreview_,InlinePreview,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentStudioSrsIFrameDefinitionJs){SrsIFrame=_componentStudioSrsIFrameDefinitionJs.SrsIFrame},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Toggle=_carbonComponentsReact.Toggle},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_InlinePreview_=function(_React$Component){function _InlinePreview_(props){_classCallCheck(this,_InlinePreview_);var _this=_possibleConstructorReturn(this,(_InlinePreview_.__proto__||Object.getPrototypeOf(_InlinePreview_)).call(this,props));return _this.state={rotate:!1,widgetProps:{URL:_this.props.path,Width:"360px",Height:"640px",Styles:{border:"1px solid lightgreen"}}},_this}return _inherits(_InlinePreview_,_React$Component),_createClass(_InlinePreview_,[{key:"render",value:function(){var _this2=this,PreviewWidget=SrsIFrame(),widgetProps=this.state.widgetProps;return widgetProps.noCache=!0,widgetProps.debugMode=!0,React.createElement("div",{style:{height:"inherit",textAlign:"center"}},React.createElement("div",{style:{textAlign:"center",alignItems:"center",display:"flex"}},React.createElement("div",{className:"deviceType"},React.createElement(Select,{onChange:function(e){var dimensions=e.target.value.split("-"),widgetProps=cloneDeep(_this2.state.widgetProps);_this2.state.rotate?(widgetProps.Width=dimensions[1],widgetProps.Height=dimensions[0]):(widgetProps.Width=dimensions[0],widgetProps.Height=dimensions[1]),_this2.setState({widgetProps:widgetProps})},id:"selectfield",light:"true",defaultValue:"Laptop",hideLabel:"true"},React.createElement(SelectItem,{value:"360-640",text:"Moto G4"}),React.createElement(SelectItem,{value:"360-640",text:"Galaxy S5"}),React.createElement(SelectItem,{value:"411-731",text:"Pixel 2"}),React.createElement(SelectItem,{value:"411-823",text:"Pixel 2 XL"}),React.createElement(SelectItem,{value:"320-568",text:"iPhone 5/SE"}),React.createElement(SelectItem,{value:"375-667",text:"iPhone 6/7/8"}),React.createElement(SelectItem,{value:"414-736",text:"iPhone 6/7/8 Plus"}),React.createElement(SelectItem,{value:"375-812",text:"iPhone X"}),React.createElement(SelectItem,{value:"768-1024",text:"iPad"}),React.createElement(SelectItem,{value:"1024-1366",text:"iPad Pro"}),React.createElement(SelectItem,{value:"540-720",text:"Surface Duo"}),React.createElement(SelectItem,{value:"280-653",text:"Galaxy Fold"}))),React.createElement(Toggle,{className:"rotateType",onChange:function(e){var value=e.target.checked,widgetProps=cloneDeep(_this2.state.widgetProps),width=widgetProps.Width;widgetProps.Width=widgetProps.Height,widgetProps.Height=width,_this2.setState({widgetProps:widgetProps,rotate:value})},defaultToggled:this.state.rotate,labelA:"Rotate",labelB:"Rotate"})),React.createElement(PreviewWidget,{widgetProps:this.state.widgetProps,key:Date.now()}))}}]),_InlinePreview_}(React.Component),_export("InlinePreview",InlinePreview=function(props){return _InlinePreview_}),_export("InlinePreview",InlinePreview),_export("default",InlinePreview),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsIFrame/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-iframe"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Iframe,_SrsIFrame_,SrsIFrame;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactIframe){Iframe=_reactIframe.default}],execute:function(){_SrsIFrame_=function(_React$Component){function _SrsIFrame_(){return _classCallCheck(this,_SrsIFrame_),_possibleConstructorReturn(this,(_SrsIFrame_.__proto__||Object.getPrototypeOf(_SrsIFrame_)).apply(this,arguments))}return _inherits(_SrsIFrame_,_React$Component),_createClass(_SrsIFrame_,[{key:"render",value:function(){var embeddedStyles=null;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles));var URL=this.props.widgetProps&&this.props.widgetProps.URL?this.props.widgetProps.URL:this.props.url?this.props.url:"#";URL=URL.startsWith("/")?location.origin+URL:URL;var queryString="";this.props.widgetProps&&this.props.widgetProps.noCache&&(queryString=queryString?queryString+"&nocache=true":"?nocache=true"),this.props.widgetProps&&this.props.widgetProps.debugMode&&(queryString=queryString?queryString+"&debug=true":"?debug=true"),URL+=queryString;var keyProps=this.props.key?{key:this.props.propkey}:{};return React.createElement("div",{style:{height:"inherit"}},embeddedStyles,React.createElement(Iframe,_extends({url:URL},keyProps,{width:this.props.widgetProps&&this.props.widgetProps.Width?this.props.widgetProps.Width:this.props.width?this.props.width:"0px",height:this.props.widgetProps&&this.props.widgetProps.Height?this.props.widgetProps.Height:this.props.height?this.props.height:"0px",id:this.props.widgetid?this.props.widgetid:this.props.frameid?this.props.frameid:"iframeId",styles:this.props.widgetProps&&this.props.widgetProps.Styles?"string"==typeof this.props.widgetProps.Styles?JSON.parse(this.props.widgetProps.Styles):this.props.widgetProps.Styles:{border:"1px solid lightgreen"},display:"initial",position:"relative"})))}}]),_SrsIFrame_}(React.Component),_export("SrsIFrame",SrsIFrame=function(props){return _SrsIFrame_}),_export("SrsIFrame",SrsIFrame)}}}),System.register("component/studio/InlinePreview/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/SrsIFrame/Definition.js","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SrsIFrame,Select,SelectItem,Toggle,cloneDeep,_InlinePreview_,InlinePreview;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentStudioSrsIFrameDefinitionJs){SrsIFrame=_componentStudioSrsIFrameDefinitionJs.SrsIFrame},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Toggle=_carbonComponentsReact.Toggle},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_InlinePreview_=function(_React$Component){function _InlinePreview_(props){_classCallCheck(this,_InlinePreview_);var _this=_possibleConstructorReturn(this,(_InlinePreview_.__proto__||Object.getPrototypeOf(_InlinePreview_)).call(this,props));return _this.state={rotate:!1,widgetProps:{URL:_this.props.path,Width:"360px",Height:"640px",Styles:{border:"1px solid lightgreen"}}},_this}return _inherits(_InlinePreview_,_React$Component),_createClass(_InlinePreview_,[{key:"render",value:function(){var _this2=this,PreviewWidget=SrsIFrame(),widgetProps=this.state.widgetProps;return widgetProps.noCache=!0,widgetProps.debugMode=!0,React.createElement("div",{style:{height:"inherit",textAlign:"center"}},React.createElement("div",{style:{textAlign:"center",alignItems:"center",display:"flex"}},React.createElement("div",{className:"deviceType"},React.createElement(Select,{onChange:function(e){var dimensions=e.target.value.split("-"),widgetProps=cloneDeep(_this2.state.widgetProps);_this2.state.rotate?(widgetProps.Width=dimensions[1],widgetProps.Height=dimensions[0]):(widgetProps.Width=dimensions[0],widgetProps.Height=dimensions[1]),_this2.setState({widgetProps:widgetProps})},id:"selectfield",light:"true",defaultValue:"Laptop",hideLabel:"true"},React.createElement(SelectItem,{value:"360-640",text:"Moto G4"}),React.createElement(SelectItem,{value:"360-640",text:"Galaxy S5"}),React.createElement(SelectItem,{value:"411-731",text:"Pixel 2"}),React.createElement(SelectItem,{value:"411-823",text:"Pixel 2 XL"}),React.createElement(SelectItem,{value:"320-568",text:"iPhone 5/SE"}),React.createElement(SelectItem,{value:"375-667",text:"iPhone 6/7/8"}),React.createElement(SelectItem,{value:"414-736",text:"iPhone 6/7/8 Plus"}),React.createElement(SelectItem,{value:"375-812",text:"iPhone X"}),React.createElement(SelectItem,{value:"768-1024",text:"iPad"}),React.createElement(SelectItem,{value:"1024-1366",text:"iPad Pro"}),React.createElement(SelectItem,{value:"540-720",text:"Surface Duo"}),React.createElement(SelectItem,{value:"280-653",text:"Galaxy Fold"}))),React.createElement(Toggle,{className:"rotateType",onChange:function(e){var value=e.target.checked,widgetProps=cloneDeep(_this2.state.widgetProps),width=widgetProps.Width;widgetProps.Width=widgetProps.Height,widgetProps.Height=width,_this2.setState({widgetProps:widgetProps,rotate:value})},defaultToggled:this.state.rotate,labelA:"Rotate",labelB:"Rotate"})),React.createElement(PreviewWidget,{widgetProps:this.state.widgetProps,key:Date.now()}))}}]),_InlinePreview_}(React.Component),_export("InlinePreview",InlinePreview=function(props){return _InlinePreview_}),_export("InlinePreview",InlinePreview)}}}),System.register("component/studio/JSONForm.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/toConsumableArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/defineProperty.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@jsonforms/react","@jsonforms/material-renderers","@material-ui/core/styles/withStyles","@material-ui/core/styles/createStyles","jss","@material-ui/core/styles","carbon-components-react","@jsonforms/core","client/script/studio/FormWidgets.js","client/script/studio/CellRenderers.js","lodash.clonedeep","lodash.debounce"],function(_export,_context){"use strict";var _toConsumableArray,_defineProperty,_extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,JsonForms,withJsonFormsCellProps,withJsonFormsControlProps,withJsonFormsLayoutProps,materialRenderers,materialCells,create,StylesProvider,jssPreset,rankWith,isNumberControl,isIntegerControl,isDateControl,isDateTimeControl,isStringControl,schemaTypeIs,optionIs,schemaMatches,uiTypeIs,FormWidgets,CellRenderers,cloneDeep,debounce,_JSONForm_,JSONForm,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs){_toConsumableArray=_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs){_defineProperty=_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_jsonformsReact){JsonForms=_jsonformsReact.JsonForms,withJsonFormsCellProps=_jsonformsReact.withJsonFormsCellProps,withJsonFormsControlProps=_jsonformsReact.withJsonFormsControlProps,withJsonFormsLayoutProps=_jsonformsReact.withJsonFormsLayoutProps},function(_jsonformsMaterialRenderers){materialRenderers=_jsonformsMaterialRenderers.materialRenderers,materialCells=_jsonformsMaterialRenderers.materialCells},function(_materialUiCoreStylesWithStyles){_materialUiCoreStylesWithStyles.default},function(_materialUiCoreStylesCreateStyles){_materialUiCoreStylesCreateStyles.default},function(_jss){create=_jss.create},function(_materialUiCoreStyles){StylesProvider=_materialUiCoreStyles.StylesProvider,jssPreset=_materialUiCoreStyles.jssPreset},function(_carbonComponentsReact){_carbonComponentsReact.TextInput,_carbonComponentsReact.NumberInput,_carbonComponentsReact.DatePicker,_carbonComponentsReact.DatePickerInput},function(_jsonformsCore){rankWith=_jsonformsCore.rankWith,_jsonformsCore.scopeEndsWith,isNumberControl=_jsonformsCore.isNumberControl,isIntegerControl=_jsonformsCore.isIntegerControl,isDateControl=_jsonformsCore.isDateControl,_jsonformsCore.isSingleLevelCategorization,isDateTimeControl=_jsonformsCore.isDateTimeControl,isStringControl=_jsonformsCore.isStringControl,schemaTypeIs=_jsonformsCore.schemaTypeIs,_jsonformsCore.formatIs,_jsonformsCore.categorizationHasCategory,optionIs=_jsonformsCore.optionIs,schemaMatches=_jsonformsCore.schemaMatches,uiTypeIs=_jsonformsCore.uiTypeIs,_jsonformsCore.isCategorization,_jsonformsCore.isCategory},function(_clientScriptStudioFormWidgetsJs){FormWidgets=_clientScriptStudioFormWidgetsJs.default},function(_clientScriptStudioCellRenderersJs){CellRenderers=_clientScriptStudioCellRenderersJs.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){_JSONForm_=function(_React$Component){function _JSONForm_(props){_classCallCheck(this,_JSONForm_);var _this=_possibleConstructorReturn(this,(_JSONForm_.__proto__||Object.getPrototypeOf(_JSONForm_)).call(this,props));$ele&&$ele.registerElement("DynaForm","studio","React"),_this.handleChange=_this.handleChange.bind(_this),_this.removeEmbeddedListItem=_this.removeEmbeddedListItem.bind(_this),_this.addEmbeddedListItem=_this.addEmbeddedListItem.bind(_this),_this.processChange=_this.processChange.bind(_this),_this.addContextToUISchema=_this.addContextToUISchema.bind(_this),_this.getControlElements=_this.getControlElements.bind(_this),_this.isFieldTypeEmbeddedList=_this.isFieldTypeEmbeddedList.bind(_this),_this.formData=defaultValue;var schema={},uischema={},defaultValue={};_this.formKey=Date.now();try{schema=_this.props.schema?"string"==typeof _this.props.schema?JSON.parse(_this.props.schema):_this.props.schema:{},uischema=_this.props.uischema?"string"==typeof _this.props.uischema?JSON.parse(_this.props.uischema):_this.props.uischema:{};var formData=_this.props.defaultvalue?"string"==typeof _this.props.defaultvalue?JSON.parse(_this.props.defaultvalue):_this.props.defaultvalue:{};formData&&Object.keys(formData).length>0&&(formData.form_list&&delete formData.form_list,formData.form_actions&&delete formData.form_actions,defaultValue=_extends({form_list:{parent:formData},form_actions:{parent:formData}},formData))}catch(err){}_this.isListTester=schemaTypeIs("string")&&schemaMatches(function(schema){return!(!schema.hasOwnProperty("subtype")||"list"!=schema.subtype)}),_this.isTextTester=schemaTypeIs("string")&&schemaMatches(function(schema){return!(!schema.hasOwnProperty("subtype")||"Text"!=schema.subtype)}),_this.isReferenceCell=schemaTypeIs("string")&&schemaMatches(function(schema){return!(!schema.hasOwnProperty("subtype")||"Reference"!=schema.subtype)}),_this.isDynamicChoiceCell=schemaTypeIs("string")&&schemaMatches(function(schema){return!(!schema.hasOwnProperty("subtype")||"Dynamic Choice"!=schema.subtype)}),_this.isChoiceCell=schemaTypeIs("string")&&schemaMatches(function(schema){return!(!schema.hasOwnProperty("subtype")||"Choice"!=schema.subtype)}),_this.isTextCell=schemaTypeIs("string")&&schemaMatches(function(schema){return!(!schema.hasOwnProperty("subtype")||"Text"!=schema.subtype)});var uiSchemaSubTypeIs=function(expected){return function(uischema){return uischema&&uischema.subtype===expected}};return _this.isActionsTester=uiTypeIs("Control")&&uiSchemaSubTypeIs("Actions"),_this.isCustomComponentTester=uiTypeIs("Control")&&uiSchemaSubTypeIs("CustomComponent"),_this.isLabelControl=uiTypeIs("Control")&&uiSchemaSubTypeIs("Label"),_this.isSimpleListTester=uiTypeIs("Control")&&uiSchemaSubTypeIs("SimpleList"),_this.isRelatedListTester=uiTypeIs("Control")&&uiSchemaSubTypeIs("RelatedList"),_this.isEmbeddedListTester=uiTypeIs("Control")&&uiSchemaSubTypeIs("EmbeddedList"),_this.isGroupTester=uiTypeIs("Group"),_this.isHorizontalLayoutTester=uiTypeIs("HorizontalLayout"),_this.isVerticalLayoutTester=uiTypeIs("VerticalLayout"),_this.isTabsTester=uiTypeIs("Categorization"),_this.isStepperTester=uiTypeIs("Categorization")&&optionIs("variant","stepper"),_this.updateJSONForms=debounce(function(formProps){_this.setState({jsonFormProps:formProps})},250,{trailing:!0,leading:!1}),_this.state={dataSchema:schema,uiSchema:uischema,defaultValue:defaultValue,jsonFormProps:null},_this}return _inherits(_JSONForm_,_React$Component),_createClass(_JSONForm_,[{key:"getControlElements",value:function(nodeEl,result){var _this2=this;nodeEl&&nodeEl.elements&&nodeEl.elements.length>0&&nodeEl.elements.map(function(ele,indx){ele.elements?_this2.getControlElements(ele,result):"Control"==ele.type&&result.push({subtype:ele.subtype,scope:ele.scope,name:ele.name})})}},{key:"addContextToUISchema",value:function(uiSchemaElements,context){if(uiSchemaElements)for(var uiSchemaElementIndx in uiSchemaElements){var uiSchemaElement=uiSchemaElements[uiSchemaElementIndx];uiSchemaElement.elements?(this.addContextToUISchema(uiSchemaElement.elements,context),uiSchemaElement.context=context):uiSchemaElement.context=context}}},{key:"removeEmbeddedListItem",value:function(embeddedListName,data){this.props.handleChange(_defineProperty({},embeddedListName,data),{type:"embedded_list",id:embeddedListName})}},{key:"addEmbeddedListItem",value:function(embeddedListName,data){this.props.handleChange(_defineProperty({},embeddedListName,data),{type:"embedded_list",id:embeddedListName})}},{key:"handleChange",value:function(inputVal){if(!_.isEqual(inputVal,this.state.defaultValue))if(this.state.defaultValue.onRefAction){var updatedDefaultValue=cloneDeep(this.state.defaultValue);delete updatedDefaultValue.onRefAction,this.setState({defaultValue:updatedDefaultValue})}else this.setState({defaultValue:inputVal})}},{key:"processChange",value:function(){var inputVal=cloneDeep(this.state.defaultValue);inputVal&&inputVal.ref_action&&delete inputVal.ref_action;var newInputValue={};if(inputVal&&inputVal.form_list&&inputVal.form_list.actionClicked){(newInputValue={list_action:{}}).list_action.actionClicked=inputVal.form_list.actionClicked.actionName;var actionPayload=inputVal.form_list.actionClicked||{};return newInputValue.list_action.actionPayload=_extends({listName:"ListAction"},actionPayload),void this.props.handleChange(newInputValue)}if(inputVal&&inputVal.form_actions&&inputVal.form_actions.actionClicked){(newInputValue={form_action:{}}).form_action.actionClicked=inputVal.form_actions.actionClicked;var _actionPayload=inputVal.form_actions.actionPayload?inputVal.form_actions.actionPayload:{};return newInputValue.form_action.actionPayload=_extends({formName:"FormAction"},_actionPayload),void this.props.handleChange(newInputValue)}if(inputVal&&inputVal.list_action&&delete inputVal.list_action,inputVal&&inputVal.form_action&&delete inputVal.form_action,inputVal&&inputVal.form_actions&&inputVal.form_actions.parent&&inputVal.form_actions.parent.form_action&&delete inputVal.form_actions.parent.form_action,inputVal&&inputVal.form_actions&&inputVal.form_actions.parent&&inputVal.form_actions.parent.list_action&&delete inputVal.form_actions.parent.list_action,inputVal&&inputVal.form_actions&&inputVal.form_actions.parent&&inputVal.form_actions.parent.form_actions&&delete inputVal.form_actions.parent.form_actions,inputVal&&inputVal.form_actions&&inputVal.form_actions.parent&&inputVal.form_actions.parent.form_list&&delete inputVal.form_actions.parent.form_list,inputVal&&inputVal.parent&&inputVal.parent.form_list&&delete inputVal.parent.form_list,inputVal&&inputVal.parent&&inputVal.parent.form_actions&&delete inputVal.parent.form_actions,inputVal&&inputVal.parent&&inputVal.parent.list_action&&delete inputVal.parent.list_action,inputVal&&inputVal.parent&&inputVal.parent.form_action&&delete inputVal.parent.form_action,(newInputValue=Object.assign({},inputVal))&&Object.keys(newInputValue).length>0){var fieldNames=Object.keys(newInputValue);if(fieldNames&&fieldNames.length>0){for(var fieldNamesIndx in fieldNames){var fieldName=fieldNames[fieldNamesIndx],schemaProps=this.props.schema?this.props.schema.properties:{};if(schemaProps[fieldName]&&"Reference"==schemaProps[fieldName].widgetType){var fieldPayload=null;try{fieldPayload=JSON.parse(newInputValue[fieldName])}catch(err){fieldPayload=newInputValue[fieldName]}if(fieldPayload&&fieldPayload.openRecord){var updatedDefaultValue=cloneDeep(this.state.defaultValue);return updatedDefaultValue[fieldName]=fieldPayload.value,updatedDefaultValue.onRefAction=!0,(newInputValue={}).ref_action={},newInputValue.ref_action.actionClicked="open_record",newInputValue.ref_action.actionPayload={listName:"Reference",tableName:fieldPayload.openRecord.tableName,recordId:fieldPayload.openRecord.recordId,clickts:Date.now()},this.setState({defaultValue:updatedDefaultValue}),void this.props.handleChange(newInputValue)}newInputValue[fieldName]=fieldPayload}}if(newInputValue&&newInputValue.form_list){var parentObj=newInputValue.form_list.parent;parentObj&&parentObj.form_actions&&delete parentObj.form_actions,parentObj&&parentObj.form_list&&delete parentObj.form_list,parentObj&&parentObj.form_action&&delete parentObj.form_action,parentObj&&parentObj.list_action&&delete parentObj.list_action,delete newInputValue.form_list,newInputValue.form_list={parent:parentObj}}if(newInputValue&&newInputValue.form_actions){var _parentObj=newInputValue.form_actions.parent;_parentObj&&_parentObj.form_actions&&delete _parentObj.form_actions,_parentObj&&_parentObj.form_list&&delete _parentObj.form_list,_parentObj&&_parentObj.form_action&&delete _parentObj.form_action,_parentObj&&_parentObj.list_action&&delete _parentObj.list_action,delete newInputValue.form_actions,newInputValue.form_actions={parent:_parentObj}}this.props.handleChange(newInputValue)}else this.props.handleChange(newInputValue)}else this.props.handleChange({})}},{key:"componentDidUpdate",value:function(prevProps,prevState){var schema=this.state.dataSchema,uischema=this.state.uiSchema,defaultValue=this.state.defaultValue,valueChanged=!1;if(_.isEqual(prevProps.context,this.props.context)||(valueChanged=!0),_.isEqual(prevProps.schema,this.props.schema)||(schema=this.props.schema?"string"==typeof this.props.schema?JSON.parse(this.props.schema):this.props.schema:{},valueChanged=!0),_.isEqual(prevProps.uischema,this.props.uischema)||(uischema=this.props.uischema?"string"==typeof this.props.uischema?JSON.parse(this.props.uischema):this.props.uischema:{},valueChanged=!0),!_.isEqual(prevProps.defaultvalue,this.props.defaultvalue)){var formData=this.props.defaultvalue?"string"==typeof this.props.defaultvalue?JSON.parse(this.props.defaultvalue):this.props.defaultvalue:{};formData.form_list&&delete formData.form_list,formData.form_actions&&delete formData.form_actions,formData&&Object.keys(formData).length>0&&(defaultValue=_extends({form_list:{parent:formData},form_actions:{parent:formData}},formData)),valueChanged=!0}if(!_.isEqual(prevState.defaultValue,this.state.defaultValue)){var isPrevFormActionsClicked=!!prevState.defaultValue.form_actions&&!!prevState.defaultValue.form_actions.actionClicked,isPrevFormListActionClicked=!!prevState.defaultValue.form_list&&!!prevState.defaultValue.form_list.actionClicked,isPrevFormRefActionClicked=!!prevState.defaultValue.ref_action&&!!prevState.defaultValue.ref_action.actionClicked,isPrevFormActionClicked=!!prevState.defaultValue.form_action&&!!prevState.defaultValue.form_action.actionClicked,isCurrentFormActionsClicked=!!this.state.defaultValue.form_actions&&!!this.state.defaultValue.form_actions.actionClicked,isCurrentFormListActionClicked=!!this.state.defaultValue.form_list&&!!this.state.defaultValue.form_list.actionClicked,isCurrentFormRefActionClicked=!!this.state.defaultValue.ref_action&&!!this.state.defaultValue.ref_action.actionClicked,isCurrentFormActionClicked=!!this.state.defaultValue.form_action&&!!this.state.defaultValue.form_action.actionClicked,currentFormData=null,prevFormData=null;if(isPrevFormActionsClicked&&!isCurrentFormActionsClicked||isPrevFormListActionClicked&&!isCurrentFormListActionClicked||isPrevFormRefActionClicked&&!isCurrentFormRefActionClicked||isPrevFormActionClicked&&!isCurrentFormActionClicked)this.processChange();else if(currentFormData=Object.assign({},this.state.defaultValue),prevFormData=Object.assign({},prevState.defaultValue),isPrevFormActionsClicked||isCurrentFormActionsClicked||(delete currentFormData.form_actions,delete prevFormData.form_actions),isPrevFormListActionClicked||isCurrentFormListActionClicked||(delete currentFormData.form_list,delete currentFormData.list_action,delete prevFormData.form_list,delete prevFormData.list_action),isPrevFormRefActionClicked||isCurrentFormRefActionClicked||(delete currentFormData.ref_action,delete prevFormData.ref_action),isPrevFormActionClicked||isCurrentFormActionClicked||(delete currentFormData.form_action,delete prevFormData.form_action),!_.isEqual(prevFormData,currentFormData)&&!currentFormData.onRefAction&&!prevFormData.onRefAction){var changedValues={},currentFormDataNames=Object.keys(currentFormData);for(var currentFormDataIndx in currentFormDataNames){var currentFormDataItemName=currentFormDataNames[currentFormDataIndx],currentFormDataItem=currentFormData[currentFormDataItemName],prevFormDataItem=prevFormData[currentFormDataItemName];_.isEqual(prevFormDataItem,currentFormDataItem)||(changedValues[currentFormDataItemName]=currentFormDataItem)}var changeFieldNames=Object.keys(changedValues);if(changeFieldNames&&changeFieldNames.length>0){var isEmbeddedListChange=!1;for(var changeFieldNamesIndx in changeFieldNames){var changeFieldName=changeFieldNames[changeFieldNamesIndx];if(isEmbeddedListChange=this.isFieldTypeEmbeddedList(changeFieldName,uischema))break}isEmbeddedListChange||this.processChange()}}}valueChanged&&this.setState({dataSchema:schema,uiSchema:uischema,defaultValue:defaultValue,reload:!this.state.reload})}},{key:"isFieldTypeEmbeddedList",value:function(fieldName,uiSchema){var controlElements=[];this.getControlElements(uiSchema,controlElements);var isEmbeddedList=!1;if(controlElements){var filteredControlEle=controlElements.filter(function(controlElement){return"EmbeddedList"==controlElement.subtype&&controlElement.name==fieldName});filteredControlEle&&filteredControlEle.length>0&&(isEmbeddedList=!0)}return isEmbeddedList}},{key:"withComponentDetails",value:function(WrappedComponent,additionalProps){return function(_React$Component2){function HOC(){return _classCallCheck(this,HOC),_possibleConstructorReturn(this,(HOC.__proto__||Object.getPrototypeOf(HOC)).apply(this,arguments))}return _inherits(HOC,_React$Component2),_createClass(HOC,[{key:"render",value:function(){var newProps=_extends({},this.props,additionalProps);return React.createElement(WrappedComponent,newProps)}}]),HOC}(React.Component)}},{key:"render",value:function(){var _this4=this,jss=create(_extends({},jssPreset(),{insertionPoint:$("#head ",this.props.shadow)[0]})),formProps={},formData={};this.state.defaultValue&&((formData=cloneDeep(this.state.defaultValue))&&delete formData.ref_action,formData&&delete formData.list_action,formData&&delete formData.form_action,formData&&delete formData.form_actions,formData&&delete formData.form_list,formData&&delete formData.onRefAction,formData&&(formProps.data=_extends({},formData,{form_list:{parent:formData},form_actions:{parent:formData}})));var context={},config=this.props.context&&this.props.context.config||{},theme=this.props.context&&this.props.context.theme||{},contextKeys=Object.keys(this.props.context);if(this.props.context&&contextKeys.length>0)for(var contextKeyIndx in contextKeys){var contextKey=contextKeys[contextKeyIndx];"config"!=contextKey&&"theme"!=contextKey&&(context[contextKey]=this.props.context[contextKey])}if(this.state.dataSchema&&Object.keys(this.state.dataSchema).length>0){var dSchema=_extends({},this.state.dataSchema);Object.keys(dSchema.properties).map(function(item){return dSchema.properties[item].description=JSON.stringify({data:formData,meta:context||{},config:config,theme:theme})}),formProps.schema=dSchema}if(this.state.uiSchema&&Object.keys(this.state.uiSchema).length>0){var uiSchema=_extends({},this.state.uiSchema),updatedContext={data:formData,meta:context||{},config:config,theme:theme};uiSchema.context=updatedContext,this.addContextToUISchema(uiSchema.elements,updatedContext),formProps.uischema=uiSchema}_.isEqual(formProps,this.formData)||(this.formData=formProps,this.updateJSONForms(formProps));var dynamicFormEl=React.createElement("div",null,React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(StylesProvider,{jss:jss,sheetsManager:new Map},this.state.jsonFormProps?React.createElement(JsonForms,_extends({key:this.formKey},this.state.jsonFormProps,{renderers:[].concat(_toConsumableArray(materialRenderers),[{tester:rankWith(10,isStringControl),renderer:withJsonFormsControlProps(FormWidgets.StringControl)},{tester:rankWith(16,this.isTextTester),renderer:withJsonFormsControlProps(FormWidgets.StringControl)},{tester:rankWith(11,isNumberControl||isIntegerControl),renderer:withJsonFormsControlProps(FormWidgets.NumberControl)},{tester:rankWith(12,isDateControl),renderer:withJsonFormsControlProps(FormWidgets.DateControl)},{tester:rankWith(12,isDateTimeControl),renderer:withJsonFormsControlProps(FormWidgets.DateTimeControl)},{tester:rankWith(13,this.isListTester),renderer:withJsonFormsControlProps(FormWidgets.ListControl)},{tester:rankWith(14,this.isActionsTester),renderer:withJsonFormsControlProps(FormWidgets.ActionsControl)},{tester:rankWith(14,this.isCustomComponentTester),renderer:withJsonFormsControlProps(FormWidgets.CustomControl)},{tester:rankWith(15,this.isSimpleListTester),renderer:withJsonFormsControlProps(FormWidgets.RelatedListControl)},{tester:rankWith(16,this.isRelatedListTester),renderer:withJsonFormsControlProps(FormWidgets.RelatedListControl)},{tester:rankWith(16,this.isEmbeddedListTester),renderer:withJsonFormsLayoutProps(this.withComponentDetails(FormWidgets.EmbeddedListControl,{removeItem:this.removeEmbeddedListItem,addItem:this.addEmbeddedListItem}))},{tester:rankWith(16,this.isLabelControl),renderer:withJsonFormsControlProps(FormWidgets.LabelControl)},{tester:rankWith(17,this.isGroupTester),renderer:withJsonFormsLayoutProps(FormWidgets.GroupRenderer)},{tester:rankWith(17,this.isHorizontalLayoutTester),renderer:FormWidgets.HorizontalLayoutRenderer},{tester:rankWith(17,this.isVerticalLayoutTester),renderer:FormWidgets.VerticalLayoutRenderer},{tester:rankWith(17,this.isTabsTester),renderer:FormWidgets.TabsRenderer},{tester:rankWith(18,this.isStepperTester),renderer:FormWidgets.StepperRenderer}]),cells:[].concat(_toConsumableArray(materialCells),[{tester:rankWith(10,isStringControl),cell:withJsonFormsCellProps(CellRenderers.StringCell)},{tester:rankWith(11,this.isTextTester),cell:withJsonFormsCellProps(CellRenderers.StringCell)},{tester:rankWith(11,isDateControl),cell:withJsonFormsCellProps(CellRenderers.DateCell)},{tester:rankWith(11,isNumberControl),cell:withJsonFormsCellProps(CellRenderers.NumberCell)},{tester:rankWith(12,this.isReferenceCell),cell:withJsonFormsCellProps(CellRenderers.ReferenceCell)},{tester:rankWith(12,this.isDynamicChoiceCell),cell:withJsonFormsCellProps(CellRenderers.DynamicChoiceCell)},{tester:rankWith(12,this.isChoiceCell),cell:withJsonFormsCellProps(CellRenderers.ChoiceCell)},{tester:rankWith(12,this.isTextCell),cell:withJsonFormsCellProps(CellRenderers.TextCell)}]),onChange:function(_ref){_ref.errors;var data=_ref.data;return _this4.handleChange(data)}})):null));return React.createElement("div",{style:{height:"inherit",width:"96%"}},dynamicFormEl)}}]),_JSONForm_}(React.Component),_export("JSONForm",JSONForm=function(props){return _JSONForm_}),_export("JSONForm",JSONForm),_export("default",JSONForm),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/JsonFormGenerator.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-json-view","carbon-components-react","react-jsonschema-form","client/script/studio/FormDataSchema.js","client/script/studio/FormUISchema.js","client/script/studio/Convert2JSONSchema.js","client/script/studio/Convert2UISchema.js","component/studio/SrsReference/Definition.js","component/studio/SrsTreeSortable/Definition.js","https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.6/lumen/bootstrap.min.css!css","https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css!css","component/studio/SrsThreeWaySwitch/Definition.js","lodash.debounce"],function(_export,_context7){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,Tab,Tabs,Button,Form,dataSchema,uiSchema,convert2JSONSchema,convert2UISchema,SrsReference,SrsTreeSortable,SrsThreeWaySwitch,debounce,_JsonFormGenerator_,JsonFormGenerator,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactJsonView){_reactJsonView.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,Tab=_carbonComponentsReact.Tab,Tabs=_carbonComponentsReact.Tabs,Button=_carbonComponentsReact.Button},function(_reactJsonschemaForm){Form=_reactJsonschemaForm.default},function(_clientScriptStudioFormDataSchemaJs){dataSchema=_clientScriptStudioFormDataSchemaJs.default},function(_clientScriptStudioFormUISchemaJs){uiSchema=_clientScriptStudioFormUISchemaJs.default},function(_clientScriptStudioConvert2JSONSchemaJs){convert2JSONSchema=_clientScriptStudioConvert2JSONSchemaJs.default},function(_clientScriptStudioConvert2UISchemaJs){convert2UISchema=_clientScriptStudioConvert2UISchemaJs.default},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_componentStudioSrsTreeSortableDefinitionJs){SrsTreeSortable=_componentStudioSrsTreeSortableDefinitionJs.SrsTreeSortable},function(_httpsCdnjsCloudflareComAjaxLibsBootswatch336LumenBootstrapMinCssCss){},function(_httpsMaxcdnBootstrapcdnComFontAwesome461CssFontAwesomeMinCssCss){},function(_componentStudioSrsThreeWaySwitchDefinitionJs){SrsThreeWaySwitch=_componentStudioSrsThreeWaySwitchDefinitionJs.SrsThreeWaySwitch},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){_JsonFormGenerator_=function(_React$Component){function _JsonFormGenerator_(props){_classCallCheck(this,_JsonFormGenerator_);var _this=_possibleConstructorReturn(this,(_JsonFormGenerator_.__proto__||Object.getPrototypeOf(_JsonFormGenerator_)).call(this,props)),formTemplateId=_this.props.templateid?_this.props.templateid:"";return _this.state={jsonData:JSON.parse('{"type":"object","properties":[{"type":"string","name":"Test1","required":true,"format":"date","description":"Test1 Desc"}]}'),uiRawSchema:{},uiSchema:{},mode:"Both",dynaFormKey:Date.now(),defaultValue:{},formName:"",formScope:_this.props.scope?_this.props.scope:"",formTemplateId:formTemplateId,theme:""},_this.handleJSONSchema=_this.handleJSONSchema.bind(_this),_this.handleUISchema=_this.handleUISchema.bind(_this),_this.handleJSONSchemaChange=_this.handleJSONSchemaChange.bind(_this),_this.handleUISchemaChange=_this.handleUISchemaChange.bind(_this),_this.handleUISchemaChangeDebounce=debounce(function(payload){return _this.handleUISchemaChange(payload)},100),_this.saveData=_this.saveData.bind(_this),$ele.registerElement("DynaForm","studio"),formTemplateId&&formTemplateId+""!="-1"&&$qry.getRecords("FormTemplate_studio",{where:{uid:formTemplateId,Scope:_this.props.scope}},["Name","Scope","default","schema","rawschema","uischema","rawuischema","Theme"]).then(function(data){if(data&&data.length>0){var dataRecord=data[0];_this.setState({formName:dataRecord.Name,formScope:dataRecord.Scope,defaultValue:dataRecord.default?JSON.parse(dataRecord.default):{},jsonRawData:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},uiRawSchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},jsonData:dataRecord.schema?JSON.parse(dataRecord.schema):{},uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},theme:dataRecord.Theme||""})}}),_this}return _inherits(_JsonFormGenerator_,_React$Component),_createClass(_JsonFormGenerator_,[{key:"saveData",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if({},this.state.formName){_context.next=5;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Please provide form name and try again!"}),_context.next=18;break;case 5:if(this.state.formTemplateId&&this.state.formTemplateId+""!="-1"){_context.next=13;break}return _context.next=8,$qry.createRecord("FormTemplate_studio",{Name:this.state.formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),Theme:this.state.theme?this.state.theme:""},["uid"]);case 8:_context.sent,fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" created successfully!"}),_context.next=18;break;case 13:return _context.next=15,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:this.state.formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),Theme:this.state.theme?this.state.theme:""},["uid"]);case 15:_context.sent,fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" is updated!"});case 18:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"handleJSONSchemaChange",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(_ref3){var formData=_ref3.formData;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:this.setState({jsonRawData:formData,jsonData:convert2JSONSchema(formData)});case 1:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"handleUISchemaChange",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(_ref5){var formData=_ref5.formData;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:this.setState({uiRawSchema:formData,uiSchema:convert2UISchema(formData)});case 1:case"end":return _context3.stop()}},_callee3,this)}));return function(_x2){return _ref4.apply(this,arguments)}}()},{key:"handleJSONSchema",value:function(){var _ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(_ref7){var formData=_ref7.formData;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(this.setState({jsonRawData:formData,jsonData:convert2JSONSchema(formData)}),{},this.state.formName){_context4.next=6;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Please provide form name and try again!"}),_context4.next=19;break;case 6:if(this.state.formTemplateId&&this.state.formTemplateId+""!="-1"){_context4.next=14;break}return _context4.next=9,$qry.createRecord("FormTemplate_studio",{Name:this.state.formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(formData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),Theme:this.state.theme?this.state.theme:""},["uid"]);case 9:_context4.sent,fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" created successfully!"}),_context4.next=19;break;case 14:return _context4.next=16,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:this.state.formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(formData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),Theme:this.state.theme?this.state.theme:""},["uid"]);case 16:_context4.sent,fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" is updated!"});case 19:case"end":return _context4.stop()}},_callee4,this)}));return function(_x3){return _ref6.apply(this,arguments)}}()},{key:"handleUISchema",value:function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(_ref9){var formData=_ref9.formData;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(this.setState({uiRawSchema:formData,uiSchema:convert2UISchema(formData)}),{},this.state.formName){_context5.next=6;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Please provide form name and try again!"}),_context5.next=19;break;case 6:if(this.state.formTemplateId&&this.state.formTemplateId+""!="-1"){_context5.next=14;break}return _context5.next=9,$qry.createRecord("FormTemplate_studio",{Name:this.state.formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(formData),Theme:this.state.theme?this.state.theme:""},["uid"]);case 9:_context5.sent,this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" created successfully!"}),fetch("/reload_cache"),_context5.next=19;break;case 14:return _context5.next=16,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:this.state.formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(formData),Theme:this.state.theme?this.state.theme:""},["uid"]);case 16:_context5.sent,fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" is updated!"});case 19:case"end":return _context5.stop()}},_callee5,this)}));return function(_x4){return _ref8.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var _this2=this;this.props.shadow&&this.props.shadow.addEventListener("click",function(ev){if("LEGEND"==ev.composedPath()[0].tagName){var fieldsetEl=$(ev.composedPath()[0]).closest("fieldset");fieldsetEl.hasClass("collapsed")?fieldsetEl.removeClass("collapsed"):fieldsetEl.addClass("collapsed")}else if("FIELDSET"==ev.composedPath()[0].tagName||"LABEL"==ev.composedPath()[0].tagName&&$(ev.composedPath()[0]).hasClass("control-label")||"DIV"==ev.composedPath()[0].tagName&&$(ev.composedPath()[0]).hasClass("array-item-list")||"DIV"==ev.composedPath()[0].tagName&&$(ev.composedPath()[0]).hasClass("form-group")&&$(ev.composedPath()[0]).hasClass("field")&&$(ev.composedPath()[0]).hasClass("field-string")){var _fieldsetEl="LABEL"==ev.composedPath()[0].tagName||"DIV"==ev.composedPath()[0].tagName?$(ev.composedPath()[0]).closest("fieldset"):$(ev.composedPath()[0]);if(_fieldsetEl.hasClass("expand-fieldset"))_fieldsetEl.removeClass("expand-fieldset");else $("fieldset",_this2.props.shadow).removeClass("expand-fieldset"),$("#head",_this2.props.shadow).children("fieldset").addClass("expand-fieldset"),_fieldsetEl.addClass("expand-fieldset"),_fieldsetEl.parents("fieldset").addClass("expand-fieldset"),_fieldsetEl.children("fieldset").addClass("expand-fieldset")}else if("BUTTON"==ev.composedPath()[0].tagName){var btnEl=$(ev.composedPath()[0]);setTimeout(function(){if(btnEl.parent().hasClass("array-item-add")){var childFieldSets=btnEl.closest("fieldset").find("fieldset");if(childFieldSets&&childFieldSets.length>0){childFieldSets.removeClass("expand-fieldset");var lastFieldSet=childFieldSets[childFieldSets.length-1];$(lastFieldSet).addClass("expand-fieldset"),$(lastFieldSet).parents("fieldset").addClass("expand-fieldset")}}},1e3)}var allContentEls=$("#head",_this2.props.shadow).find(".array-item > .col-xs-9"),allActionEls=$("#head",_this2.props.shadow).find(".array-item > .col-xs-3");allContentEls.addClass("col-xs-12").removeClass("col-xs-9"),allActionEls.addClass("col-xs-0").removeClass("col-xs-3");var leafExpandedFieldSetEl=$("#head",_this2.props.shadow).find(".expand-fieldset"),arryItemEl=(leafExpandedFieldSetEl=leafExpandedFieldSetEl&&leafExpandedFieldSetEl.length>0?leafExpandedFieldSetEl[leafExpandedFieldSetEl.length-1]:null)?leafExpandedFieldSetEl.closest(".array-item"):null;arryItemEl&&$(arryItemEl).children(".array-item-toolbox").addClass("col-xs-3").removeClass("col-xs-0"),arryItemEl&&$(arryItemEl).children(".col-xs-12").addClass("col-xs-9").removeClass("col-xs-12")}),$("#head",this.props.shadow).children("fieldset").addClass("expand-fieldset");var allContentEls=$("#head",this.props.shadow).find(".array-item > .col-xs-9"),allActionEls=$("#head",this.props.shadow).find(".array-item > .col-xs-3");allContentEls.addClass("col-xs-12").removeClass("col-xs-9"),allActionEls.addClass("col-xs-0").removeClass("col-xs-3")}},{key:"componentDidUpdate",value:function(){var _ref10=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(prevProps,prevState){var _this3=this;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(prevState.formTemplateId!=this.state.formTemplateId&&this.state.formTemplateId&&"-1"!=this.state.formTemplateId&&$qry.getRecords("FormTemplate_studio",{where:{uid:this.state.formTemplateId}},["Name","Scope","default","schema","rawschema","uischema","rawuischema","Theme"]).then(function(data){if(data&&data.length>0){var dataRecord=data[0];_this3.setState({formName:dataRecord.Name,defaultValue:dataRecord.default?JSON.parse(dataRecord.default):{},formScope:dataRecord.Scope,jsonRawData:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},uiRawSchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},jsonData:dataRecord.schema?JSON.parse(dataRecord.schema):{},uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},theme:dataRecord.Theme||""})}}),prevState.mode!=this.state.mode&&this.setState({dynaFormKey:Date.now()}),!this.props.dynaform[this.state.formTemplateId]||_.isEqual(prevProps.dynaform[this.state.formTemplateId],this.props.dynaform[this.state.formTemplateId])){_context6.next=5;break}return _context6.next=5,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:this.state.formName,Scope:this.state.formScope,default:this.props.dynaform[this.state.formTemplateId]?JSON.stringify(this.props.dynaform[this.state.formTemplateId]):"{}",schema:JSON.stringify(this.state.jsonData),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),Theme:this.state.theme?this.state.theme:""},["uid"]);case 5:case"end":return _context6.stop()}},_callee6,this)}));return function(_x5,_x6){return _ref10.apply(this,arguments)}}()},{key:"render",value:function(){var _this4=this,styles={fontFamily:"sans-serif",padding:20,width:"100%"},FormTemplateReference=SrsReference(),ThemeReference=SrsReference(),formTemplateEl=React.createElement(FormTemplateReference,{style:{display:"flex"},tablename:"FormTemplate_studio",defaultValue:this.state.formTemplateId,displayfield:"Name",secondarydisplayfield:"Scope",filter:JSON.stringify({where:{or:[{Model:null},{Model:""}]}}),searchfields:"Name",title:"Form Template",placeholder:"Search a template...",onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"";_this4.setState({formTemplateId:value})}}),notificationBar=this.props.embedded+""!="true"&&this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{style_top:"40"}):null,ThreeWaySwitch=SrsThreeWaySwitch(),TreeView=SrsTreeSortable(),dynamicForm=React.createElement("dyna-form",{shadow:"true",formkey:this.state.formTemplateId,dataschema:JSON.stringify(this.state.jsonData),uischema:JSON.stringify(this.state.uiSchema)});return React.createElement("div",{style:{height:"inherit",overflow:"hidden"}},React.createElement("style",null,'@import url("/component/studio/JsonFormGenerator/Style.css"); @import url("https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.6/lumen/bootstrap.min.css"); @import url("https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css");'),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"}),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"}),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.2.1/js/bootstrap.min.js"}),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.7.0/js/mdb.min.js"}),notificationBar,React.createElement(ThreeWaySwitch,{selected:this.state.mode,values:["Schema","Both","Preview"],onChange:function(val){_this4.setState({mode:val})}}),React.createElement("div",{className:"row",style:{width:"100%",marginLeft:10,border:"1px solid #f3eeee"}},React.createElement("div",{className:"col-sm-6"},formTemplateEl),React.createElement("div",{className:"col-sm-6"},React.createElement(Button,{size:"small",style:{marginTop:20,marginLeft:100},onClick:this.saveData},"Save"))),React.createElement("div",{className:"row",style:styles},React.createElement("div",{className:"col-sm-4"},React.createElement(TextInput,{light:"true",label:"Name",value:this.state.formName,placeholder:"Enter Name...",style:{width:"100%"},onChange:function(e){_this4.setState({formName:e.target.value})}})),React.createElement("div",{className:"col-sm-3"},React.createElement(TextInput,{light:"true",label:"Scope",value:this.state.formScope,placeholder:"Enter Scope...",style:{width:"100%"},onChange:function(e){_this4.setState({formScope:e.target.value})}})),React.createElement("div",{className:"col-sm-3"},React.createElement(ThemeReference,{style:{display:"flex"},hidelabel:"true",tablename:"FormTheme_studio",defaultValue:this.state.theme,light:"true",displayfield:"Name",filter:JSON.stringify({}),searchfields:"Name",placeholder:"Search a theme...",onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"";_this4.setState({theme:value})}}))),React.createElement("div",{className:"row",style:_extends({},styles,{borderTop:"1px solid #c4ccc4",backgroundColor:"#f3f3f3"})},"Both"==this.state.mode?React.createElement(React.Fragment,null,React.createElement("div",{className:"col-sm-6",style:{height:"70vh",overflow:"auto"}},React.createElement(Tabs,null,React.createElement(Tab,{label:"Data Schema",value:"jsonschema"},React.createElement(Form,{noValidate:!1,noHtml5Validate:"true",children:!0,schema:dataSchema,formData:this.state.jsonRawData,onChange:this.handleJSONSchemaChange,onSubmit:this.handleJSONSchema})),React.createElement(Tab,{label:"Form Editor",value:"uischema"},React.createElement(Form,{noValidate:!1,noHtml5Validate:"true",children:!0,schema:uiSchema,formData:this.state.uiRawSchema,onChange:this.handleUISchemaChange,onSubmit:this.handleUISchema})),React.createElement(Tab,{label:"Form Organiser",value:"uiarrange"},React.createElement(TreeView,{data:this.state.uiRawSchema,onChange:function(data){return _this4.handleUISchemaChangeDebounce({formData:data})}})))),React.createElement("div",{className:"col-sm-6",style:{border:"1px solid #216aa4",padding:20,minHeight:"60vh",maxHeight:"60vh",overflow:"auto",backgroundColor:"white"}},dynamicForm)):"Schema"==this.state.mode?React.createElement("div",{className:"col-sm-12"},React.createElement(Tabs,null,React.createElement(Tab,{label:"Data Schema",value:"jsonschema"},React.createElement(Form,{noValidate:!1,noHtml5Validate:"true",children:!0,schema:dataSchema,formData:this.state.jsonRawData,onChange:this.handleJSONSchemaChange,onSubmit:this.handleJSONSchema})),React.createElement(Tab,{label:"Form Editor",value:"uischema"},React.createElement(Form,{noValidate:!1,noHtml5Validate:"true",children:!0,schema:uiSchema,formData:this.state.uiRawSchema,onChange:this.handleUISchemaChange,onSubmit:this.handleUISchema})),React.createElement(Tab,{label:"Form Organiser",value:"uiarrange"},React.createElement(TreeView,{data:this.state.uiRawSchema,onChange:function(data){return _this4.handleUISchemaChangeDebounce({formData:data})}})))):React.createElement("div",{className:"col-sm-6",style:{border:"1px solid #216aa4",padding:20,minHeight:"60vh",maxHeight:"60vh",overflow:"auto",backgroundColor:"white"}},dynamicForm)))}}]),_JsonFormGenerator_}(React.Component),_export("JsonFormGenerator",JsonFormGenerator=function(props){return _JsonFormGenerator_}),_export("JsonFormGenerator",JsonFormGenerator),_export("default",JsonFormGenerator),_export("states",states=[{KeyName:"dynaform",AccessPath:"dynaform",DefaultValue:'{"dynaform": {}}'},{KeyName:"notifications",AccessPath:"notifications",DefaultValue:'{"notifications": []}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("client/script/studio/FormDataSchema.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){_export("default",{type:"object",properties:{dataType:{type:"string",enum:["object","string","text","number","boolean"]}},dependencies:{dataType:{oneOf:[{properties:{dataType:{enum:["object"]},Properties:{type:"array",items:{$ref:"#/definitions/PropsObject"},title:"Properties"}}},{properties:{dataType:{enum:["string","text"]},name:{type:"string",title:"Name"},format:{type:"string",title:"Format",enum:["date","date-time","time","regex","uri"]},widgetType:{type:"string",enum:["Choice","Reference","URL"],title:"Default Widget Type"},description:{type:"string",title:"Description"},minLength:{type:"number",title:"MinLength"},default:{type:"string",title:"Default"},required:{type:"boolean",title:"Required"},readOnly:{type:"boolean",title:"ReadOnly"},writeOnly:{type:"boolean",title:"WriteOnly"}},dependencies:{widgetType:{oneOf:[{properties:{widgetType:{enum:["Choice"]},multiSelect:{type:"boolean",title:"Is Multiselect"},choiceList:{type:"array",title:"Choice List",items:{$ref:"#/definitions/KeyValuePair"}}}},{properties:{widgetType:{enum:["Reference"]},tableName:{type:"string",title:"Table Name"},displayField:{type:"string",title:"Display Field"},secondaryDisplayField:{type:"string",title:"Secondary Display Field"},filter:{type:"string",title:"Filter"},searchfields:{type:"string",title:'Search Fields (ex: "Name,Title")'},defaultValue:{type:"string",title:"Default Value"}}}]}}},{properties:{dataType:{enum:["list"]},name:{type:"string",title:"Name"},description:{type:"string",title:"Description"},table:{type:"string",title:"Table"},fields:{type:"array",items:{$ref:"#/definitions/FieldInput"},title:"Fields"}}},{properties:{dataType:{enum:["number"]},name:{type:"string",title:"Name"},description:{type:"string",title:"Description"},minimum:{type:"number",title:"Minimum"},maximum:{type:"number",title:"Maximum"},default:{type:"number",title:"Default"},required:{type:"boolean",title:"Required"},readOnly:{type:"boolean",title:"ReadOnly"},writeOnly:{type:"boolean",title:"WriteOnly"}}},{properties:{dataType:{enum:["boolean"]},name:{type:"string",title:"Name"},description:{type:"string",title:"Description"},default:{type:"boolean",title:"Default"},required:{type:"boolean",title:"Required"},readOnly:{type:"boolean",title:"ReadOnly"},writeOnly:{type:"boolean",title:"WriteOnly"}}}]}},definitions:{KeyValuePair:{type:"object",properties:{name:{type:"string",title:"Name"},value:{type:"string",title:"Value"}}},FieldInput:{type:"object",properties:{code:{type:"string",title:"Field Name"},label:{type:"string",title:"Field Label"},type:{type:"string",title:"Type",enum:["string","number","boolen","date","date-time","reference","select"]},attributes:{type:"array",items:{$ref:"#/definitions/KeyValuePair"},title:"More Details(JSON)"}}},PropsObject:{type:"object",properties:{dataType:{type:"string",enum:["object","string","number","boolean","list"]}},dependencies:{dataType:{oneOf:[{properties:{dataType:{enum:["object"]},name:{type:"string",title:"Name"},Properties:{type:"array",items:{$ref:"#/definitions/PropsObject"},title:"Properties"}},required:["name"]},{properties:{name:{type:"string",title:"Name"},dataType:{enum:["string"]},required:{type:"boolean",title:"Required"},format:{type:"string",title:"Format",enum:["date","date-time","time","regex","uri"]},widgetType:{type:"string",enum:["Choice","Reference","URL"],title:"Default Widget Type"}},dependencies:{widgetType:{oneOf:[{properties:{widgetType:{enum:["Choice"]},multiSelect:{type:"boolean",title:"Is Multiselect"},choiceList:{type:"array",title:"Choice List",items:{$ref:"#/definitions/KeyValuePair"}}}},{properties:{widgetType:{enum:["Reference"]},tableName:{type:"string",title:"Table Name"},displayField:{type:"string",title:"Display Field"},secondaryDisplayField:{type:"string",title:"Secondary Display Field"},filter:{type:"string",title:"Filter"},searchfields:{type:"string",title:'Search Fields (ex: "Name,Title")'},defaultValue:{type:"string",title:"Default Value"}}}]}}},{properties:{dataType:{enum:["number"]},name:{type:"string",title:"Name"},description:{type:"string",title:"Description"},minimum:{type:"number",title:"Minimum"},maximum:{type:"number",title:"Maximum"},default:{type:"number",title:"Default"}}},{properties:{dataType:{enum:["list"]},name:{type:"string",title:"Name"},description:{type:"string",title:"Description"},table:{type:"string",title:"Table"},fields:{type:"array",items:{$ref:"#/definitions/FieldInput"},title:"Fields"}}},{properties:{dataType:{enum:["boolean"]},name:{type:"string",title:"Name"},description:{type:"string",title:"Description"},default:{type:"boolean",title:"Default"},required:{type:"boolean",title:"Required"},readOnly:{type:"boolean",title:"ReadOnly"},writeOnly:{type:"boolean",title:"WriteOnly"}}}]}}}}})}}}),System.register("component/studio/JsonFormGenerator/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-json-view","carbon-components-react","react-jsonschema-form","client/script/studio/FormDataSchema.js","client/script/studio/FormUISchema.js","client/script/studio/Convert2JSONSchema.js","client/script/studio/Convert2UISchema.js","component/studio/SrsReference/Definition.js","component/studio/SrsTreeSortable/Definition.js","https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.6/lumen/bootstrap.min.css!css","https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css!css","component/studio/SrsThreeWaySwitch/Definition.js","lodash.debounce"],function(_export,_context7){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,Tab,Tabs,Button,Form,dataSchema,uiSchema,convert2JSONSchema,convert2UISchema,SrsReference,SrsTreeSortable,SrsThreeWaySwitch,debounce,_JsonFormGenerator_,JsonFormGenerator;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactJsonView){_reactJsonView.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,Tab=_carbonComponentsReact.Tab,Tabs=_carbonComponentsReact.Tabs,Button=_carbonComponentsReact.Button},function(_reactJsonschemaForm){Form=_reactJsonschemaForm.default},function(_clientScriptStudioFormDataSchemaJs){dataSchema=_clientScriptStudioFormDataSchemaJs.default},function(_clientScriptStudioFormUISchemaJs){uiSchema=_clientScriptStudioFormUISchemaJs.default},function(_clientScriptStudioConvert2JSONSchemaJs){convert2JSONSchema=_clientScriptStudioConvert2JSONSchemaJs.default},function(_clientScriptStudioConvert2UISchemaJs){convert2UISchema=_clientScriptStudioConvert2UISchemaJs.default},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_componentStudioSrsTreeSortableDefinitionJs){SrsTreeSortable=_componentStudioSrsTreeSortableDefinitionJs.SrsTreeSortable},function(_httpsCdnjsCloudflareComAjaxLibsBootswatch336LumenBootstrapMinCssCss){},function(_httpsMaxcdnBootstrapcdnComFontAwesome461CssFontAwesomeMinCssCss){},function(_componentStudioSrsThreeWaySwitchDefinitionJs){SrsThreeWaySwitch=_componentStudioSrsThreeWaySwitchDefinitionJs.SrsThreeWaySwitch},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){_JsonFormGenerator_=function(_React$Component){function _JsonFormGenerator_(props){_classCallCheck(this,_JsonFormGenerator_);var _this=_possibleConstructorReturn(this,(_JsonFormGenerator_.__proto__||Object.getPrototypeOf(_JsonFormGenerator_)).call(this,props)),formTemplateId=_this.props.templateid?_this.props.templateid:"";return _this.state={jsonData:JSON.parse('{"type":"object","properties":[{"type":"string","name":"Test1","required":true,"format":"date","description":"Test1 Desc"}]}'),uiRawSchema:{},uiSchema:{},mode:"Both",dynaFormKey:Date.now(),defaultValue:{},formName:"",formScope:_this.props.scope?_this.props.scope:"",formTemplateId:formTemplateId,theme:""},_this.handleJSONSchema=_this.handleJSONSchema.bind(_this),_this.handleUISchema=_this.handleUISchema.bind(_this),_this.handleJSONSchemaChange=_this.handleJSONSchemaChange.bind(_this),_this.handleUISchemaChange=_this.handleUISchemaChange.bind(_this),_this.handleUISchemaChangeDebounce=debounce(function(payload){return _this.handleUISchemaChange(payload)},100),_this.saveData=_this.saveData.bind(_this),$ele.registerElement("DynaForm","studio"),formTemplateId&&formTemplateId+""!="-1"&&$qry.getRecords("FormTemplate_studio",{where:{uid:formTemplateId,Scope:_this.props.scope}},["Name","Scope","default","schema","rawschema","uischema","rawuischema","Theme"]).then(function(data){if(data&&data.length>0){var dataRecord=data[0];_this.setState({formName:dataRecord.Name,formScope:dataRecord.Scope,defaultValue:dataRecord.default?JSON.parse(dataRecord.default):{},jsonRawData:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},uiRawSchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},jsonData:dataRecord.schema?JSON.parse(dataRecord.schema):{},uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},theme:dataRecord.Theme||""})}}),_this}return _inherits(_JsonFormGenerator_,_React$Component),_createClass(_JsonFormGenerator_,[{key:"saveData",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if({},this.state.formName){_context.next=5;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Please provide form name and try again!"}),_context.next=18;break;case 5:if(this.state.formTemplateId&&this.state.formTemplateId+""!="-1"){_context.next=13;break}return _context.next=8,$qry.createRecord("FormTemplate_studio",{Name:this.state.formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),Theme:this.state.theme?this.state.theme:""},["uid"]);case 8:_context.sent,fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" created successfully!"}),_context.next=18;break;case 13:return _context.next=15,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:this.state.formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),Theme:this.state.theme?this.state.theme:""},["uid"]);case 15:_context.sent,fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" is updated!"});case 18:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"handleJSONSchemaChange",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(_ref3){var formData=_ref3.formData;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:this.setState({jsonRawData:formData,jsonData:convert2JSONSchema(formData)});case 1:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"handleUISchemaChange",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(_ref5){var formData=_ref5.formData;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:this.setState({uiRawSchema:formData,uiSchema:convert2UISchema(formData)});case 1:case"end":return _context3.stop()}},_callee3,this)}));return function(_x2){return _ref4.apply(this,arguments)}}()},{key:"handleJSONSchema",value:function(){var _ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(_ref7){var formData=_ref7.formData;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(this.setState({jsonRawData:formData,jsonData:convert2JSONSchema(formData)}),{},this.state.formName){_context4.next=6;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Please provide form name and try again!"}),_context4.next=19;break;case 6:if(this.state.formTemplateId&&this.state.formTemplateId+""!="-1"){_context4.next=14;break}return _context4.next=9,$qry.createRecord("FormTemplate_studio",{Name:this.state.formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(formData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),Theme:this.state.theme?this.state.theme:""},["uid"]);case 9:_context4.sent,fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" created successfully!"}),_context4.next=19;break;case 14:return _context4.next=16,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:this.state.formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(formData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),Theme:this.state.theme?this.state.theme:""},["uid"]);case 16:_context4.sent,fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" is updated!"});case 19:case"end":return _context4.stop()}},_callee4,this)}));return function(_x3){return _ref6.apply(this,arguments)}}()},{key:"handleUISchema",value:function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(_ref9){var formData=_ref9.formData;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(this.setState({uiRawSchema:formData,uiSchema:convert2UISchema(formData)}),{},this.state.formName){_context5.next=6;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Please provide form name and try again!"}),_context5.next=19;break;case 6:if(this.state.formTemplateId&&this.state.formTemplateId+""!="-1"){_context5.next=14;break}return _context5.next=9,$qry.createRecord("FormTemplate_studio",{Name:this.state.formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(formData),Theme:this.state.theme?this.state.theme:""},["uid"]);case 9:_context5.sent,this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" created successfully!"}),fetch("/reload_cache"),_context5.next=19;break;case 14:return _context5.next=16,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:this.state.formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(formData),Theme:this.state.theme?this.state.theme:""},["uid"]);case 16:_context5.sent,fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" is updated!"});case 19:case"end":return _context5.stop()}},_callee5,this)}));return function(_x4){return _ref8.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var _this2=this;this.props.shadow&&this.props.shadow.addEventListener("click",function(ev){if("LEGEND"==ev.composedPath()[0].tagName){var fieldsetEl=$(ev.composedPath()[0]).closest("fieldset");fieldsetEl.hasClass("collapsed")?fieldsetEl.removeClass("collapsed"):fieldsetEl.addClass("collapsed")}else if("FIELDSET"==ev.composedPath()[0].tagName||"LABEL"==ev.composedPath()[0].tagName&&$(ev.composedPath()[0]).hasClass("control-label")||"DIV"==ev.composedPath()[0].tagName&&$(ev.composedPath()[0]).hasClass("array-item-list")||"DIV"==ev.composedPath()[0].tagName&&$(ev.composedPath()[0]).hasClass("form-group")&&$(ev.composedPath()[0]).hasClass("field")&&$(ev.composedPath()[0]).hasClass("field-string")){var _fieldsetEl="LABEL"==ev.composedPath()[0].tagName||"DIV"==ev.composedPath()[0].tagName?$(ev.composedPath()[0]).closest("fieldset"):$(ev.composedPath()[0]);if(_fieldsetEl.hasClass("expand-fieldset"))_fieldsetEl.removeClass("expand-fieldset");else $("fieldset",_this2.props.shadow).removeClass("expand-fieldset"),$("#head",_this2.props.shadow).children("fieldset").addClass("expand-fieldset"),_fieldsetEl.addClass("expand-fieldset"),_fieldsetEl.parents("fieldset").addClass("expand-fieldset"),_fieldsetEl.children("fieldset").addClass("expand-fieldset")}else if("BUTTON"==ev.composedPath()[0].tagName){var btnEl=$(ev.composedPath()[0]);setTimeout(function(){if(btnEl.parent().hasClass("array-item-add")){var childFieldSets=btnEl.closest("fieldset").find("fieldset");if(childFieldSets&&childFieldSets.length>0){childFieldSets.removeClass("expand-fieldset");var lastFieldSet=childFieldSets[childFieldSets.length-1];$(lastFieldSet).addClass("expand-fieldset"),$(lastFieldSet).parents("fieldset").addClass("expand-fieldset")}}},1e3)}var allContentEls=$("#head",_this2.props.shadow).find(".array-item > .col-xs-9"),allActionEls=$("#head",_this2.props.shadow).find(".array-item > .col-xs-3");allContentEls.addClass("col-xs-12").removeClass("col-xs-9"),allActionEls.addClass("col-xs-0").removeClass("col-xs-3");var leafExpandedFieldSetEl=$("#head",_this2.props.shadow).find(".expand-fieldset"),arryItemEl=(leafExpandedFieldSetEl=leafExpandedFieldSetEl&&leafExpandedFieldSetEl.length>0?leafExpandedFieldSetEl[leafExpandedFieldSetEl.length-1]:null)?leafExpandedFieldSetEl.closest(".array-item"):null;arryItemEl&&$(arryItemEl).children(".array-item-toolbox").addClass("col-xs-3").removeClass("col-xs-0"),arryItemEl&&$(arryItemEl).children(".col-xs-12").addClass("col-xs-9").removeClass("col-xs-12")}),$("#head",this.props.shadow).children("fieldset").addClass("expand-fieldset");var allContentEls=$("#head",this.props.shadow).find(".array-item > .col-xs-9"),allActionEls=$("#head",this.props.shadow).find(".array-item > .col-xs-3");allContentEls.addClass("col-xs-12").removeClass("col-xs-9"),allActionEls.addClass("col-xs-0").removeClass("col-xs-3")}},{key:"componentDidUpdate",value:function(){var _ref10=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(prevProps,prevState){var _this3=this;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(prevState.formTemplateId!=this.state.formTemplateId&&this.state.formTemplateId&&"-1"!=this.state.formTemplateId&&$qry.getRecords("FormTemplate_studio",{where:{uid:this.state.formTemplateId}},["Name","Scope","default","schema","rawschema","uischema","rawuischema","Theme"]).then(function(data){if(data&&data.length>0){var dataRecord=data[0];_this3.setState({formName:dataRecord.Name,defaultValue:dataRecord.default?JSON.parse(dataRecord.default):{},formScope:dataRecord.Scope,jsonRawData:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},uiRawSchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},jsonData:dataRecord.schema?JSON.parse(dataRecord.schema):{},uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},theme:dataRecord.Theme||""})}}),prevState.mode!=this.state.mode&&this.setState({dynaFormKey:Date.now()}),!this.props.dynaform[this.state.formTemplateId]||_.isEqual(prevProps.dynaform[this.state.formTemplateId],this.props.dynaform[this.state.formTemplateId])){_context6.next=5;break}return _context6.next=5,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:this.state.formName,Scope:this.state.formScope,default:this.props.dynaform[this.state.formTemplateId]?JSON.stringify(this.props.dynaform[this.state.formTemplateId]):"{}",schema:JSON.stringify(this.state.jsonData),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),Theme:this.state.theme?this.state.theme:""},["uid"]);case 5:case"end":return _context6.stop()}},_callee6,this)}));return function(_x5,_x6){return _ref10.apply(this,arguments)}}()},{key:"render",value:function(){var _this4=this,styles={fontFamily:"sans-serif",padding:20,width:"100%"},FormTemplateReference=SrsReference(),ThemeReference=SrsReference(),formTemplateEl=React.createElement(FormTemplateReference,{style:{display:"flex"},tablename:"FormTemplate_studio",defaultValue:this.state.formTemplateId,displayfield:"Name",secondarydisplayfield:"Scope",filter:JSON.stringify({where:{or:[{Model:null},{Model:""}]}}),searchfields:"Name",title:"Form Template",placeholder:"Search a template...",onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"";_this4.setState({formTemplateId:value})}}),notificationBar=this.props.embedded+""!="true"&&this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{style_top:"40"}):null,ThreeWaySwitch=SrsThreeWaySwitch(),TreeView=SrsTreeSortable(),dynamicForm=React.createElement("dyna-form",{shadow:"true",formkey:this.state.formTemplateId,dataschema:JSON.stringify(this.state.jsonData),uischema:JSON.stringify(this.state.uiSchema)});return React.createElement("div",{style:{height:"inherit",overflow:"hidden"}},React.createElement("style",null,'@import url("/component/studio/JsonFormGenerator/Style.css"); @import url("https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.6/lumen/bootstrap.min.css"); @import url("https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css");'),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"}),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"}),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.2.1/js/bootstrap.min.js"}),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.7.0/js/mdb.min.js"}),notificationBar,React.createElement(ThreeWaySwitch,{selected:this.state.mode,values:["Schema","Both","Preview"],onChange:function(val){_this4.setState({mode:val})}}),React.createElement("div",{className:"row",style:{width:"100%",marginLeft:10,border:"1px solid #f3eeee"}},React.createElement("div",{className:"col-sm-6"},formTemplateEl),React.createElement("div",{className:"col-sm-6"},React.createElement(Button,{size:"small",style:{marginTop:20,marginLeft:100},onClick:this.saveData},"Save"))),React.createElement("div",{className:"row",style:styles},React.createElement("div",{className:"col-sm-4"},React.createElement(TextInput,{light:"true",label:"Name",value:this.state.formName,placeholder:"Enter Name...",style:{width:"100%"},onChange:function(e){_this4.setState({formName:e.target.value})}})),React.createElement("div",{className:"col-sm-3"},React.createElement(TextInput,{light:"true",label:"Scope",value:this.state.formScope,placeholder:"Enter Scope...",style:{width:"100%"},onChange:function(e){_this4.setState({formScope:e.target.value})}})),React.createElement("div",{className:"col-sm-3"},React.createElement(ThemeReference,{style:{display:"flex"},hidelabel:"true",tablename:"FormTheme_studio",defaultValue:this.state.theme,light:"true",displayfield:"Name",filter:JSON.stringify({}),searchfields:"Name",placeholder:"Search a theme...",onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"";_this4.setState({theme:value})}}))),React.createElement("div",{className:"row",style:_extends({},styles,{borderTop:"1px solid #c4ccc4",backgroundColor:"#f3f3f3"})},"Both"==this.state.mode?React.createElement(React.Fragment,null,React.createElement("div",{className:"col-sm-6",style:{height:"70vh",overflow:"auto"}},React.createElement(Tabs,null,React.createElement(Tab,{label:"Data Schema",value:"jsonschema"},React.createElement(Form,{noValidate:!1,noHtml5Validate:"true",children:!0,schema:dataSchema,formData:this.state.jsonRawData,onChange:this.handleJSONSchemaChange,onSubmit:this.handleJSONSchema})),React.createElement(Tab,{label:"Form Editor",value:"uischema"},React.createElement(Form,{noValidate:!1,noHtml5Validate:"true",children:!0,schema:uiSchema,formData:this.state.uiRawSchema,onChange:this.handleUISchemaChange,onSubmit:this.handleUISchema})),React.createElement(Tab,{label:"Form Organiser",value:"uiarrange"},React.createElement(TreeView,{data:this.state.uiRawSchema,onChange:function(data){return _this4.handleUISchemaChangeDebounce({formData:data})}})))),React.createElement("div",{className:"col-sm-6",style:{border:"1px solid #216aa4",padding:20,minHeight:"60vh",maxHeight:"60vh",overflow:"auto",backgroundColor:"white"}},dynamicForm)):"Schema"==this.state.mode?React.createElement("div",{className:"col-sm-12"},React.createElement(Tabs,null,React.createElement(Tab,{label:"Data Schema",value:"jsonschema"},React.createElement(Form,{noValidate:!1,noHtml5Validate:"true",children:!0,schema:dataSchema,formData:this.state.jsonRawData,onChange:this.handleJSONSchemaChange,onSubmit:this.handleJSONSchema})),React.createElement(Tab,{label:"Form Editor",value:"uischema"},React.createElement(Form,{noValidate:!1,noHtml5Validate:"true",children:!0,schema:uiSchema,formData:this.state.uiRawSchema,onChange:this.handleUISchemaChange,onSubmit:this.handleUISchema})),React.createElement(Tab,{label:"Form Organiser",value:"uiarrange"},React.createElement(TreeView,{data:this.state.uiRawSchema,onChange:function(data){return _this4.handleUISchemaChangeDebounce({formData:data})}})))):React.createElement("div",{className:"col-sm-6",style:{border:"1px solid #216aa4",padding:20,minHeight:"60vh",maxHeight:"60vh",overflow:"auto",backgroundColor:"white"}},dynamicForm)))}}]),_JsonFormGenerator_}(React.Component),_export("JsonFormGenerator",JsonFormGenerator=function(props){return _JsonFormGenerator_}),_export("JsonFormGenerator",JsonFormGenerator)}}}),System.register("component/studio/JsonModelBuilder.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-json-view","carbon-components-react","react-jsonschema-form","client/script/studio/ModelBuilderMeta.js","client/script/studio/FormUISchema.js","client/script/studio/GenerateDefaultLayout.js","client/script/studio/ConvertModelSchema2JSON.js","client/script/studio/Convert2UISchema.js","component/studio/SrsReference/Definition.js","component/studio/SrsTreeSortable/Definition.js","https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.6/lumen/bootstrap.min.css!css","https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css!css","component/studio/SrsThreeWaySwitch/Definition.js","lodash","lodash.debounce"],function(_export,_context14){"use strict";var _regeneratorRuntime,_asyncToGenerator,_extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,Tab,Tabs,Select,SelectItem,Toggle,FormLabel,Tooltip,Button,Form,dataSchema,uiSchema,generateDefaultLayout,convert2JSONSchema,convert2UISchema,SrsReference,SrsTreeSortable,SrsThreeWaySwitch,_,debounce,_JsonModelBuilder_,JsonModelBuilder,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactJsonView){_reactJsonView.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,Tab=_carbonComponentsReact.Tab,Tabs=_carbonComponentsReact.Tabs,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Toggle=_carbonComponentsReact.Toggle,FormLabel=_carbonComponentsReact.FormLabel,Tooltip=_carbonComponentsReact.Tooltip,Button=_carbonComponentsReact.Button},function(_reactJsonschemaForm){Form=_reactJsonschemaForm.default},function(_clientScriptStudioModelBuilderMetaJs){dataSchema=_clientScriptStudioModelBuilderMetaJs.default},function(_clientScriptStudioFormUISchemaJs){uiSchema=_clientScriptStudioFormUISchemaJs.default},function(_clientScriptStudioGenerateDefaultLayoutJs){generateDefaultLayout=_clientScriptStudioGenerateDefaultLayoutJs.default},function(_clientScriptStudioConvertModelSchema2JSONJs){convert2JSONSchema=_clientScriptStudioConvertModelSchema2JSONJs.default},function(_clientScriptStudioConvert2UISchemaJs){convert2UISchema=_clientScriptStudioConvert2UISchemaJs.default},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_componentStudioSrsTreeSortableDefinitionJs){SrsTreeSortable=_componentStudioSrsTreeSortableDefinitionJs.SrsTreeSortable},function(_httpsCdnjsCloudflareComAjaxLibsBootswatch336LumenBootstrapMinCssCss){},function(_httpsMaxcdnBootstrapcdnComFontAwesome461CssFontAwesomeMinCssCss){},function(_componentStudioSrsThreeWaySwitchDefinitionJs){SrsThreeWaySwitch=_componentStudioSrsThreeWaySwitchDefinitionJs.SrsThreeWaySwitch},function(_lodash){_=_lodash.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){_JsonModelBuilder_=function(_React$Component){function _JsonModelBuilder_(props){_classCallCheck(this,_JsonModelBuilder_);var _this=_possibleConstructorReturn(this,(_JsonModelBuilder_.__proto__||Object.getPrototypeOf(_JsonModelBuilder_)).call(this,props)),formTemplateId=_this.props.templateid?_this.props.templateid:"",modelName=_this.props.model?_this.props.model:"",viewName=_this.props.view?_this.props.view:"Default";_this.state={jsonData:JSON.parse("{}"),uiRawSchema:{},uiSchema:{},listRawSchema:{},listSchema:{},generatedUI:!0,generatedList:!0,mode:"Both",dynaFormKey:Date.now(),defaultValue:{},formName:"",formScope:_this.props.scope?_this.props.scope:"",formView:viewName,formTemplateId:formTemplateId,formModel:modelName,modelId:"",isCreateView:!0,views:[],isCreateModel:!0,listkey:Date.now(),selectedFieldMap:{},isCustomModel:!0},_this.viewData={},_this.handleJSONSchema=_this.handleJSONSchema.bind(_this),_this.handleUISchema=_this.handleUISchema.bind(_this),_this.handleListSchema=_this.handleListSchema.bind(_this),_this.handleJSONSchemaChange=_this.handleJSONSchemaChange.bind(_this),_this.handleUISchemaChange=_this.handleUISchemaChange.bind(_this),_this.handleUISchemaChangeDebounce=debounce(function(payload){return _this.handleUISchemaChange(payload)},100),_this.handleListSchemaChange=_this.handleListSchemaChange.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.saveUISchema=_this.saveUISchema.bind(_this),_this.upsertModel=_this.upsertModel.bind(_this),_this.updateModelFields=_this.updateModelFields.bind(_this),$ele.registerElement("DynaForm","studio");var formTemplateQuery=null;return formTemplateId&&formTemplateId+""!="-1"?formTemplateQuery={where:{uid:formTemplateId}}:modelName&&(formTemplateQuery={where:{modelName:modelName}}),formTemplateQuery&&$qry.getRecords("FormTemplate_studio",formTemplateQuery,["uid","Name","Scope","default","schema","rawschema","uischema","rawuischema","Model","View","ModelName","GeneratedUI","Theme"]).then(function(views){_this.viewData={};var allViews=[],currentView=null,selectedFieldMap=[];if(views&&views.length>0){for(var recordIndx in views){var dataRecord=views[recordIndx];if(_this.viewData[dataRecord.View]=views[recordIndx],allViews.push(dataRecord.View),viewName&&dataRecord.View==viewName||!viewName&&0==recordIndx){var modelFields=(dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{}).dataType;if(modelFields)for(var modelFieldIndx in modelFields){var modelField=modelFields[modelFieldIndx];selectedFieldMap[modelField.code]=modelField}currentView={formTemplateId:dataRecord.uid,formName:dataRecord.Name,formScope:dataRecord.Scope,defaultValue:dataRecord.default?JSON.parse(dataRecord.default):{},jsonRawData:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},uiRawSchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},listRawSchema:dataRecord.rawlistschema?JSON.parse(dataRecord.rawlistschema):{},jsonData:dataRecord.schema?JSON.parse(dataRecord.schema):{},uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},listSchema:dataRecord.listschema?JSON.parse(dataRecord.listschema):{},modelId:dataRecord.Model?dataRecord.Model:_this.state.formModel,formModel:dataRecord.ModelName?dataRecord.ModelName:_this.state.formModel,formView:dataRecord.View?dataRecord.View:_this.state.formView,generatedUI:1==dataRecord.GeneratedUI,isCreateModel:!1,theme:dataRecord.Theme||""}}}currentView?_this.setState(_extends({},currentView,{views:allViews,selectedFieldMap:selectedFieldMap})):_this.setState({views:allViews,isCreateView:!1})}else _this.setState({isCreateView:!0})}),_this}return _inherits(_JsonModelBuilder_,_React$Component),_createClass(_JsonModelBuilder_,[{key:"upsertModel",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(tableName,scope,fieldList){var createModelFn,data,modelId,self;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,$script.getscript("createModel");case 2:if(!(createModelFn=_context.sent)||!createModelFn.default){_context.next=11;break}return _context.next=6,createModelFn.default(tableName,scope,fieldList);case 6:if((data=_context.sent)&&(modelId=data&&data.MetaModelUpsertWithWhere&&data.MetaModelUpsertWithWhere.obj?data.MetaModelUpsertWithWhere.obj.uid:"")){self=this,this.state.isCustomModel&&this.updateModelFields(modelId,fieldList);try{fetch("/reload_model/"+modelId).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+tableName+" saved successfully!"})})}catch(err){this.props.addFlashMessage({title:"Error - ",subtitle:"Something went wrong while updating "+tableName+"... Please try again later!"})}}return _context.abrupt("return",data);case 11:return _context.abrupt("return",null);case 12:case"end":return _context.stop()}},_callee,this)}));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}()},{key:"updateModelFields",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(modelId,fieldList){var records,inputFieldCodes,_loop,recordIndx,inputFieldCodeIndx,inputFieldCode,_inputFieldCodeIndx,_inputFieldCode,_this2=this;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,$qry.getRecords("ModelField_studio",{where:{Model:modelId}},["uid","FieldName","FieldCode","Type","SubType"]);case 2:if(records=_context3.sent,inputFieldCodes=Object.keys(fieldList),!(records&&records.length>0)){_context3.next=24;break}_loop=_regeneratorRuntime.mark(function _loop(recordIndx){var fieldRecord;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!(fieldRecord=records[recordIndx])||!fieldRecord.FieldCode){_context2.next=11;break}if(-1!=inputFieldCodes.indexOf(fieldRecord.FieldCode)){_context2.next=7;break}return _context2.next=5,$qry.deleteRecord("ModelField_studio",fieldRecord.uid);case 5:_context2.next=10;break;case 7:if(!(fieldRecord.Type!=fieldList[fieldRecord.FieldCode].type||fieldRecord.SubType&&fieldRecord.SubType!=fieldList[fieldRecord.FieldCode].dataType||!fieldRecord.SubType&&fieldList[fieldRecord.FieldCode].dataType)){_context2.next=10;break}return _context2.next=10,$qry.updateRecord("ModelField_studio",fieldRecord.uid,{Model:modelId,Type:fieldList[fieldRecord.FieldCode].type,dataType:fieldList[fieldRecord.FieldCode].dataType},["uid"]);case 10:inputFieldCodes=inputFieldCodes.filter(function(item){return item!=fieldRecord.FieldCode});case 11:case"end":return _context2.stop()}},_loop,_this2)}),_context3.t0=_regeneratorRuntime.keys(records);case 7:if((_context3.t1=_context3.t0()).done){_context3.next=12;break}return recordIndx=_context3.t1.value,_context3.delegateYield(_loop(recordIndx),"t2",10);case 10:_context3.next=7;break;case 12:if(!(inputFieldCodes&&inputFieldCodes.length>0)){_context3.next=22;break}_context3.t3=_regeneratorRuntime.keys(inputFieldCodes);case 14:if((_context3.t4=_context3.t3()).done){_context3.next=22;break}return inputFieldCodeIndx=_context3.t4.value,inputFieldCode=inputFieldCodes[inputFieldCodeIndx],_context3.next=19,$qry.createRecord("ModelField_studio",{Model:modelId,FieldName:inputFieldCode,FieldCode:inputFieldCode,Type:fieldList[inputFieldCode].type,SubType:fieldList[inputFieldCode].dataType},["uid"]);case 19:fetch("/reload_cache"),_context3.next=14;break;case 22:_context3.next=34;break;case 24:if(!(inputFieldCodes&&inputFieldCodes.length>0)){_context3.next=34;break}_context3.t5=_regeneratorRuntime.keys(inputFieldCodes);case 26:if((_context3.t6=_context3.t5()).done){_context3.next=34;break}return _inputFieldCodeIndx=_context3.t6.value,_inputFieldCode=inputFieldCodes[_inputFieldCodeIndx],_context3.next=31,$qry.createRecord("ModelField_studio",{Model:modelId,FieldName:_inputFieldCode,FieldCode:_inputFieldCode,Type:fieldList[_inputFieldCode].type,SubType:fieldList[_inputFieldCode].dataType},["uid"]);case 31:fetch("/reload_cache"),_context3.next=26;break;case 34:case"end":return _context3.stop()}},_callee2,this)}));return function(_x4,_x5){return _ref2.apply(this,arguments)}}()},{key:"handleJSONSchemaChange",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(_ref4){var convertedData,uiSchema,uiRawSchema,formData=_ref4.formData;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:(convertedData=convert2JSONSchema(formData)).modelName=this.state.formModel,uiSchema=this.state.uiSchema,uiRawSchema=this.state.uiRawSchema,!this.state.generatedUI&&uiSchema&&0!=Object.keys(uiSchema).length||(uiRawSchema=generateDefaultLayout(convertedData),uiSchema=convert2UISchema(uiRawSchema)),this.setState({jsonRawData:formData,jsonData:convertedData.schema,uiSchema:uiSchema,uiRawSchema:uiRawSchema});case 6:case"end":return _context4.stop()}},_callee3,this)}));return function(_x6){return _ref3.apply(this,arguments)}}()},{key:"handleJSONSchema",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(_ref6){var convertedData,uiSchema,uiRawSchema,listSchema,listRawSchema,record,metaModelFields,fieldIndx,fieldObj,formName,viewName,modelName,createdRecord,modelId,updatedRecord,formData=_ref6.formData;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if((convertedData=convert2JSONSchema(formData)).modelName=this.state.formModel,uiSchema=this.state.uiSchema,uiRawSchema=this.state.uiRawSchema,!this.state.generatedUI&&uiSchema&&0!=Object.keys(uiSchema).length||(uiRawSchema=generateDefaultLayout(convertedData),uiSchema=convert2UISchema(uiRawSchema)),listSchema=this.state.listSchema,listRawSchema=this.state.listRawSchema,!this.state.generatedList&&listSchema&&0!=Object.keys(listSchema).length||(listRawSchema=formData,listSchema=convertedData.schema),this.setState({jsonRawData:formData,jsonData:convertedData.schema,uiSchema:uiSchema,uiRawSchema:uiRawSchema}),record={},metaModelFields={},this.state.formName){_context5.next=15;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Please provide form name and try again!"}),_context5.next=71;break;case 15:if(!(formData&&formData.dataType&&formData.dataType.length>0)){_context5.next=38;break}_context5.t0=_regeneratorRuntime.keys(formData.dataType);case 17:if((_context5.t1=_context5.t0()).done){_context5.next=38;break}if(fieldIndx=_context5.t1.value,"uid"==(fieldObj=formData.dataType[fieldIndx]).code||"srs_created_at"==fieldObj.code||"srs_updated_at"==fieldObj.code||"srs_created_by"==fieldObj.code||"srs_updated_by"==fieldObj.code){_context5.next=36;break}_context5.t2=fieldObj.dataType,_context5.next="text"===_context5.t2?24:"date-time"===_context5.t2?26:"date"===_context5.t2?28:"number"===_context5.t2?30:"string"===_context5.t2?32:"boolean"===_context5.t2?34:36;break;case 24:return metaModelFields[fieldObj.code]={type:"String",dataType:"mediumtext"},_context5.abrupt("break",36);case 26:return metaModelFields[fieldObj.code]={type:"date",dataType:"timestamp"},_context5.abrupt("break",36);case 28:return metaModelFields[fieldObj.code]={type:"date"},_context5.abrupt("break",36);case 30:return metaModelFields[fieldObj.code]={type:"Number",dataType:"float",precision:20,scale:4},_context5.abrupt("break",36);case 32:return metaModelFields[fieldObj.code]={type:"String"},_context5.abrupt("break",36);case 34:return metaModelFields[fieldObj.code]={type:"Boolean"},_context5.abrupt("break",36);case 36:_context5.next=17;break;case 38:if(formName=this.state.formName,viewName=this.state.formView,modelName=this.state.formModel||formName,formName.endsWith("_"+viewName)||(formName=(modelName||formName)+"_"+viewName),this.state.formTemplateId&&this.state.formTemplateId+""!="-1"){_context5.next=60;break}if(_context5.t3=this.state.isCustomModel,!_context5.t3){_context5.next=48;break}return _context5.next=47,this.upsertModel(modelName,this.state.formScope,metaModelFields);case 47:_context5.t3=_context5.sent;case 48:return createdRecord=_context5.t3,modelId="",this.state.isCustomModel&&createdRecord&&createdRecord.MetaModelUpsertWithWhere&&createdRecord.MetaModelUpsertWithWhere.obj&&createdRecord.MetaModelUpsertWithWhere.obj.uid&&(modelId=createdRecord.MetaModelUpsertWithWhere.obj.uid),_context5.next=53,$qry.createRecord("FormTemplate_studio",{Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(formData),uischema:JSON.stringify(uiSchema),rawuischema:JSON.stringify(uiRawSchema),listschema:JSON.stringify(listSchema),rawlistschema:JSON.stringify(listRawSchema),GeneratedList:this.state.generatedList,Model:modelId,ModelName:modelName,View:viewName,GeneratedUI:this.state.generatedUI,Theme:this.state.theme?this.state.theme:""},["uid"]);case 53:record=_context5.sent,this.viewData[this.state.formView]={formTemplateId:record.uid,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(formData),uischema:JSON.stringify(uiSchema),rawuischema:JSON.stringify(uiRawSchema),listschema:JSON.stringify(listSchema),rawlistschema:JSON.stringify(listRawSchema),GeneratedList:this.state.generatedList,Model:modelId,ModelName:modelName,View:viewName,GeneratedUI:this.state.generatedUI,Theme:this.state.theme?this.state.theme:""},this.state.isCustomModel&&createdRecord&&createdRecord.MetaModelUpsertWithWhere&&createdRecord.MetaModelUpsertWithWhere.obj&&createdRecord.MetaModelUpsertWithWhere.obj.uid&&this.setState({modelId:createdRecord.MetaModelUpsertWithWhere.obj.uid}),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+formName+" created successfully!"}),fetch("/reload_cache"),_context5.next=71;break;case 60:return _context5.next=62,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(formData),uischema:JSON.stringify(uiSchema),rawuischema:JSON.stringify(uiRawSchema),listschema:JSON.stringify(listSchema),rawlistschema:JSON.stringify(listRawSchema),GeneratedList:this.state.generatedList,Model:this.state.modelId,ModelName:modelName,View:viewName,GeneratedUI:this.state.generatedUI,Theme:this.state.theme?this.state.theme:""},["uid"]);case 62:if(record=_context5.sent,_context5.t4=this.state.isCustomModel,!_context5.t4){_context5.next=68;break}return _context5.next=67,this.upsertModel(modelName,this.state.formScope,metaModelFields);case 67:_context5.t4=_context5.sent;case 68:updatedRecord=_context5.t4,this.state.isCustomModel&&updatedRecord&&updatedRecord.MetaModelUpsertWithWhere&&updatedRecord.MetaModelUpsertWithWhere.obj&&updatedRecord.MetaModelUpsertWithWhere.obj.uid&&this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" is updated!"}),fetch("/reload_cache");case 71:case"end":return _context5.stop()}},_callee4,this)}));return function(_x7){return _ref5.apply(this,arguments)}}()},{key:"saveData",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(){var record,metaModelFields,fieldIndx,fieldObj,formName,viewName,modelName,createdRecord,modelId,updatedRecord;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(record={},metaModelFields={},this.state.formName){_context6.next=6;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Please provide form name and try again!"}),_context6.next=62;break;case 6:if(!(this.state.jsonRawData&&this.state.jsonRawData.dataType&&this.state.jsonRawData.dataType.length>0)){_context6.next=29;break}_context6.t0=_regeneratorRuntime.keys(this.state.jsonRawData.dataType);case 8:if((_context6.t1=_context6.t0()).done){_context6.next=29;break}if(fieldIndx=_context6.t1.value,"uid"==(fieldObj=this.state.jsonRawData.dataType[fieldIndx]).code||"srs_created_at"==fieldObj.code||"srs_updated_at"==fieldObj.code||"srs_created_by"==fieldObj.code||"srs_updated_by"==fieldObj.code){_context6.next=27;break}_context6.t2=fieldObj.dataType,_context6.next="text"===_context6.t2?15:"date-time"===_context6.t2?17:"date"===_context6.t2?19:"number"===_context6.t2?21:"string"===_context6.t2?23:"boolean"===_context6.t2?25:27;break;case 15:return metaModelFields[fieldObj.code]={type:"String",dataType:"mediumtext"},_context6.abrupt("break",27);case 17:return metaModelFields[fieldObj.code]={type:"date",dataType:"timestamp"},_context6.abrupt("break",27);case 19:return metaModelFields[fieldObj.code]={type:"date"},_context6.abrupt("break",27);case 21:return metaModelFields[fieldObj.code]={type:"Number",dataType:"float",precision:20,scale:4},_context6.abrupt("break",27);case 23:return metaModelFields[fieldObj.code]={type:"String"},_context6.abrupt("break",27);case 25:return metaModelFields[fieldObj.code]={type:"Boolean"},_context6.abrupt("break",27);case 27:_context6.next=8;break;case 29:if(formName=this.state.formName,viewName=this.state.formView,modelName=this.state.formModel||formName,formName.endsWith("_"+viewName)||(formName=(modelName||formName)+"_"+viewName),this.state.formTemplateId&&this.state.formTemplateId+""!="-1"){_context6.next=51;break}if(_context6.t3=this.state.isCustomModel,!_context6.t3){_context6.next=39;break}return _context6.next=38,this.upsertModel(modelName,this.state.formScope,metaModelFields);case 38:_context6.t3=_context6.sent;case 39:return createdRecord=_context6.t3,modelId="",this.state.isCustomModel&&createdRecord&&createdRecord.MetaModelUpsertWithWhere&&createdRecord.MetaModelUpsertWithWhere.obj&&createdRecord.MetaModelUpsertWithWhere.obj.uid&&(modelId=createdRecord.MetaModelUpsertWithWhere.obj.uid),_context6.next=44,$qry.createRecord("FormTemplate_studio",{Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),listschema:JSON.stringify(this.state.listSchema),rawlistschema:JSON.stringify(this.state.listRawSchema),GeneratedList:this.state.generatedList,Model:modelId,ModelName:modelName,View:this.state.formView,GeneratedUI:this.state.generatedUI,Theme:this.state.theme?this.state.theme:""},["uid"]);case 44:record=_context6.sent,this.viewData[this.state.formView]={formTemplateId:record.uid,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),listschema:JSON.stringify(this.state.listSchema),rawlistschema:JSON.stringify(this.state.listRawSchema),GeneratedList:this.state.generatedList,Model:modelId,ModelName:modelName,View:this.state.formView,GeneratedUI:this.state.generatedUI,Theme:this.state.theme?this.state.theme:""},this.state.isCustomModel&&createdRecord&&createdRecord.MetaModelUpsertWithWhere&&createdRecord.MetaModelUpsertWithWhere.obj&&createdRecord.MetaModelUpsertWithWhere.obj.uid&&this.setState({modelId:createdRecord.MetaModelUpsertWithWhere.obj.uid,formModel:modelName}),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" created successfully!"}),fetch("/reload_cache"),_context6.next=62;break;case 51:return _context6.next=53,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),listschema:JSON.stringify(this.state.listSchema),rawlistschema:JSON.stringify(this.state.listRawSchema),GeneratedList:this.state.generatedList,Model:this.state.modelId,ModelName:modelName,View:this.state.formView,GeneratedUI:this.state.generatedUI,Theme:this.state.theme?this.state.theme:""},["uid"]);case 53:if(record=_context6.sent,_context6.t4=this.state.isCustomModel,!_context6.t4){_context6.next=59;break}return _context6.next=58,this.upsertModel(modelName,this.state.formScope,metaModelFields);case 58:_context6.t4=_context6.sent;case 59:updatedRecord=_context6.t4,this.state.isCustomModel&&updatedRecord&&updatedRecord.MetaModelUpsertWithWhere&&updatedRecord.MetaModelUpsertWithWhere.obj&&updatedRecord.MetaModelUpsertWithWhere.obj.uid&&this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" is updated!"}),fetch("/reload_cache");case 62:case"end":return _context6.stop()}},_callee5,this)}));return function(){return _ref7.apply(this,arguments)}}()},{key:"handleUISchemaChange",value:function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(_ref9){var uiSchema,formData=_ref9.formData;return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:uiSchema=convert2UISchema(formData),this.setState({uiRawSchema:formData,uiSchema:uiSchema,generatedUI:!1});case 2:case"end":return _context7.stop()}},_callee6,this)}));return function(_x8){return _ref8.apply(this,arguments)}}()},{key:"handleUISchema",value:function(){var _ref10=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(_ref11){var uiSchema,formData=_ref11.formData;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return uiSchema=convert2UISchema(formData),this.setState({uiRawSchema:formData,uiSchema:uiSchema,generatedUI:!1}),_context8.next=4,this.saveUISchema(uiSchema,formData);case 4:case"end":return _context8.stop()}},_callee7,this)}));return function(_x9){return _ref10.apply(this,arguments)}}()},{key:"saveUISchema",value:function(){var _ref12=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(inputUISchema,inputFormData){var uiSchema,formData,record,formName,viewName,modelName;return _regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(uiSchema=inputUISchema||this.state.uiSchema,formData=inputFormData||this.state.uiRawSchema,record={},formName=this.state.formName,viewName=this.state.formView,modelName=this.state.formModel,formName.endsWith("_"+viewName)||(formName=(modelName||formName)+"_"+viewName),this.state.formName){_context9.next=11;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Please provide form name and try again!"}),_context9.next=25;break;case 11:if(this.state.formTemplateId&&this.state.formTemplateId+""!="-1"){_context9.next=20;break}return _context9.next=14,$qry.createRecord("FormTemplate_studio",{Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(uiSchema),rawuischema:JSON.stringify(formData),listschema:JSON.stringify(this.state.listSchema),rawlistschema:JSON.stringify(this.state.listRawSchema),Model:this.state.modelId,ModelName:this.state.formModel,View:this.state.formView,GeneratedUI:!1,GeneratedList:this.state.generatedList,Theme:this.state.theme?this.state.theme:""},["uid"]);case 14:(record=_context9.sent)&&record.uid&&(this.viewData[this.state.formView]={formTemplateId:record.uid,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(uiSchema),rawuischema:JSON.stringify(formData),listschema:JSON.stringify(this.state.listSchema),rawlistschema:JSON.stringify(this.state.listRawSchema),Model:this.state.modelId,ModelName:this.state.formModel,View:this.state.formView,GeneratedUI:!1,GeneratedList:this.state.generatedList,Theme:this.state.theme||""}),fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" created successfully!"}),_context9.next=25;break;case 20:return _context9.next=22,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(uiSchema),rawuischema:JSON.stringify(formData),listschema:JSON.stringify(this.state.listSchema),rawlistschema:JSON.stringify(this.state.listRawSchema),GeneratedUI:!1,GeneratedList:this.state.generatedList,Theme:this.state.theme?this.state.theme:""},["uid"]);case 22:record=_context9.sent,fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" is updated!"});case 25:case"end":return _context9.stop()}},_callee8,this)}));return function(_x10,_x11){return _ref12.apply(this,arguments)}}()},{key:"handleListSchemaChange",value:function(){var _ref13=_asyncToGenerator(_regeneratorRuntime.mark(function _callee9(_ref14){var listSchema,formData=_ref14.formData;return _regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:listSchema=(listSchema=convert2JSONSchema(formData)).schema,this.setState({listRawSchema:formData,listSchema:listSchema,generatedList:!1});case 3:case"end":return _context10.stop()}},_callee9,this)}));return function(_x12){return _ref13.apply(this,arguments)}}()},{key:"handleListSchema",value:function(){var _ref15=_asyncToGenerator(_regeneratorRuntime.mark(function _callee10(_ref16){var listSchema,record,formName,viewName,modelName,formData=_ref16.formData;return _regeneratorRuntime.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:if(listSchema=(listSchema=convert2JSONSchema(formData)).schema,this.setState({listRawSchema:formData,listSchema:listSchema,generatedList:!1}),record={},formName=this.state.formName,viewName=this.state.formView,modelName=this.state.formModel,formName.endsWith("_"+viewName)||(formName=(modelName||formName)+"_"+viewName),this.state.formName){_context11.next=12;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Please provide form name and try again!"}),_context11.next=26;break;case 12:if(this.state.formTemplateId&&this.state.formTemplateId+""!="-1"){_context11.next=21;break}return _context11.next=15,$qry.createRecord("FormTemplate_studio",{Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),listschema:JSON.stringify(listSchema),rawlistschema:JSON.stringify(formData),Model:this.state.modelId,ModelName:this.state.formModel,View:this.state.formView,GeneratedUI:this.state.generatedUI,GeneratedList:!1,Theme:this.state.theme?this.state.theme:""},["uid"]);case 15:record=_context11.sent,fetch("/reload_cache"),record&&record.uid&&(this.viewData[this.state.formView]={formTemplateId:record.uid,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(formData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),listschema:JSON.stringify(listSchema),rawlistschema:JSON.stringify(formData),Model:this.state.modelId,ModelName:this.state.formModel,View:this.state.formView,GeneratedUI:this.state.generatedUI,GeneratedList:!1,Theme:this.state.theme||""}),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" created successfully!"}),_context11.next=26;break;case 21:return _context11.next=23,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),listschema:JSON.stringify(listSchema),rawlistschema:JSON.stringify(formData),GeneratedUI:this.state.generatedUI,GeneratedList:!1,Theme:this.state.theme?this.state.theme:""},["uid"]);case 23:record=_context11.sent,fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" is updated!"});case 26:case"end":return _context11.stop()}},_callee10,this)}));return function(_x13){return _ref15.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var _this3=this;this.props.shadow&&this.props.shadow.addEventListener("click",function(ev){if("LEGEND"==ev.composedPath()[0].tagName){var fieldsetEl=$(ev.composedPath()[0]).closest("fieldset");fieldsetEl.hasClass("collapsed")?fieldsetEl.removeClass("collapsed"):fieldsetEl.addClass("collapsed")}else if("FIELDSET"==ev.composedPath()[0].tagName||"LABEL"==ev.composedPath()[0].tagName&&$(ev.composedPath()[0]).hasClass("control-label")||"DIV"==ev.composedPath()[0].tagName&&$(ev.composedPath()[0]).hasClass("array-item-list")||"DIV"==ev.composedPath()[0].tagName&&$(ev.composedPath()[0]).hasClass("form-group")&&$(ev.composedPath()[0]).hasClass("field")&&$(ev.composedPath()[0]).hasClass("field-string")){var _fieldsetEl="LABEL"==ev.composedPath()[0].tagName||"DIV"==ev.composedPath()[0].tagName?$(ev.composedPath()[0]).closest("fieldset"):$(ev.composedPath()[0]);if(_fieldsetEl.hasClass("expand-fieldset"))_fieldsetEl.removeClass("expand-fieldset");else $("fieldset",_this3.props.shadow).removeClass("expand-fieldset"),$("#head",_this3.props.shadow).children("fieldset").addClass("expand-fieldset"),_fieldsetEl.addClass("expand-fieldset"),_fieldsetEl.parents("fieldset").addClass("expand-fieldset"),_fieldsetEl.children("fieldset").addClass("expand-fieldset")}else if("BUTTON"==ev.composedPath()[0].tagName){var btnEl=$(ev.composedPath()[0]);setTimeout(function(){if(btnEl.parent().hasClass("array-item-add")){var childFieldSets=btnEl.closest("fieldset").find("fieldset");if(childFieldSets&&childFieldSets.length>0){childFieldSets.removeClass("expand-fieldset");var lastFieldSet=childFieldSets[childFieldSets.length-1];$(lastFieldSet).addClass("expand-fieldset"),$(lastFieldSet).parents("fieldset").addClass("expand-fieldset")}}},20)}var allContentEls=$("#head",_this3.props.shadow).find(".array-item > .col-xs-9"),allActionEls=$("#head",_this3.props.shadow).find(".array-item > .col-xs-3");allContentEls.addClass("col-xs-12").removeClass("col-xs-9"),allActionEls.addClass("col-xs-0").removeClass("col-xs-3");var leafExpandedFieldSetEl=$("#head",_this3.props.shadow).find(".expand-fieldset"),arryItemEl=(leafExpandedFieldSetEl=leafExpandedFieldSetEl&&leafExpandedFieldSetEl.length>0?leafExpandedFieldSetEl[leafExpandedFieldSetEl.length-1]:null)?leafExpandedFieldSetEl.closest(".array-item"):null;arryItemEl&&$(arryItemEl).children(".array-item-toolbox").addClass("col-xs-3").removeClass("col-xs-0"),arryItemEl&&$(arryItemEl).children(".col-xs-12").addClass("col-xs-9").removeClass("col-xs-12")}),$("#head",this.props.shadow).children("fieldset").addClass("expand-fieldset");var allContentEls=$("#head",this.props.shadow).find(".array-item > .col-xs-9"),allActionEls=$("#head",this.props.shadow).find(".array-item > .col-xs-3");allContentEls.addClass("col-xs-12").removeClass("col-xs-9"),allActionEls.addClass("col-xs-0").removeClass("col-xs-3")}},{key:"componentDidUpdate",value:function(){var _ref17=_asyncToGenerator(_regeneratorRuntime.mark(function _callee12(prevProps,prevState){var self,formName,viewName,modelName,sortedlist,formData,sortedlistIndx,sortedlistItem,fieldObj,filterQuery,_this4=this;return _regeneratorRuntime.wrap(function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:if(self=this,prevState.mode!=this.state.mode&&this.setState({dynaFormKey:Date.now()}),formName=this.state.formName,viewName=this.state.formView,modelName=this.state.formModel,formName.endsWith("_"+viewName)||(formName=(modelName||formName)+"_"+viewName),!this.state.formName||this.state.formTemplateId+""=="-1"||!this.props.dynaform[this.state.formTemplateId]||_.isEqual(prevProps.dynaform[this.state.formTemplateId],this.props.dynaform[this.state.formTemplateId])){_context13.next=10;break}return _context13.next=9,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:formName,Scope:this.state.formScope,default:this.props.dynaform[this.state.formTemplateId]?JSON.stringify(this.props.dynaform[this.state.formTemplateId]):"{}",schema:JSON.stringify(this.state.jsonData),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),listschema:JSON.stringify(this.state.listSchema),rawlistschema:JSON.stringify(this.state.listRawSchema),Theme:this.state.theme?this.state.theme:""},["uid"]);case 9:fetch("/reload_cache");case 10:if(!_.isEqual(prevProps.sortedlist,this.props.sortedlist)&&this.props.sortedlist&&this.props.sortedlist[this.state.listkey]&&(!this.props.sortedlist||!_.isEqual(prevProps.sortedlist[this.state.listkey],this.props.sortedlist[this.state.listkey]))){for(sortedlistIndx in sortedlist=this.props.sortedlist[this.state.listkey],formData={dataType:[]},sortedlist)sortedlistItem=sortedlist[sortedlistIndx],fieldObj=this.state.selectedFieldMap[sortedlistItem.id],formData.dataType.push(fieldObj);self.handleJSONSchemaChange({formData:formData})}prevState.modelId==this.state.modelId&&prevState.modelName==this.state.modelName||(filterQuery=null,prevState.modelId!=this.state.modelId&&this.state.modelId?filterQuery={where:{Model:this.state.modelId}}:prevState.modelName!=this.state.modelName&&this.state.modelName&&(filterQuery={where:{ModelName:this.state.modelName}}),filterQuery?$qry.getRecords("FormTemplate_studio",filterQuery,["uid","Name","Scope","default","schema","rawschema","uischema","rawuischema","listschema","rawlistschema","Model","View","ModelName","GeneratedUI","Theme"]).then(function(){var _ref18=_asyncToGenerator(_regeneratorRuntime.mark(function _callee11(views){var allViews,dataRecord,currentView,selectedFieldMap,recordIndx,jsonRawData,modelFields,modelFieldIndx,modelField,record,_jsonRawData,jsonRawDataFields,field2JSONRawDataFields,dbType2JSONFormType,modelDefinition,fieldsMap,fieldNames,_modelName,modelScope,fieldIndx,fieldName,fieldType,fieldSubType,fieldObject,convertedData,uiRawSchema,_uiSchema,formTemplateRecord;return _regeneratorRuntime.wrap(function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:if(allViews=[],dataRecord={},_this4.viewData={},currentView=null,selectedFieldMap={},!(views&&views.length>0)){_context12.next=10;break}for(recordIndx in views){if(dataRecord=views[recordIndx],allViews.push(dataRecord.View),_this4.viewData[dataRecord.View]=dataRecord,jsonRawData=dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},modelFields=jsonRawData.dataType)for(modelFieldIndx in modelFields)modelField=modelFields[modelFieldIndx],selectedFieldMap[modelField.code]=modelField;0==recordIndx&&(currentView={formTemplateId:dataRecord.uid,formName:dataRecord.Name,formScope:dataRecord.Scope,defaultValue:dataRecord.default?JSON.parse(dataRecord.default):{},jsonRawData:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},uiRawSchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},listRawSchema:dataRecord.rawlistschema?JSON.parse(dataRecord.rawlistschema):{},jsonData:dataRecord.schema?JSON.parse(dataRecord.schema):{},uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},listSchema:dataRecord.listschema?JSON.parse(dataRecord.listschema):{},modelId:dataRecord.Model?dataRecord.Model:_this4.state.formModel,formModel:dataRecord.ModelName?dataRecord.ModelName:_this4.state.formModel,formView:dataRecord.View?dataRecord.View:_this4.state.formView,generatedUI:1==dataRecord.GeneratedUI,isCreateModel:!1,isCreateView:!1,theme:dataRecord.Theme||""})}currentView?_this4.setState(_extends({},currentView,{views:allViews,selectedFieldMap:selectedFieldMap})):_this4.setState({views:allViews,isCreateView:!0,selectedFieldMap:selectedFieldMap}),_context12.next=34;break;case 10:return _context12.next=12,$qry.getRecords("MetaModel",{where:{uid:_this4.state.modelId}},["uid","Name","Definition","Scope"]);case 12:if(record=(record=_context12.sent)&&1==record.length?record[0]:null,jsonRawDataFields=(_jsonRawData={dataType:[]}).dataType,field2JSONRawDataFields={},dbType2JSONFormType={String:"string","String.mediumtext":"text",Text:"text",Number:"number",date:"date","date.timestamp":"date-time",Boolean:"boolean"},!record){_context12.next=34;break}for(fieldIndx in modelDefinition=JSON.parse(record.Definition),fieldsMap=modelDefinition.properties,fieldNames=Object.keys(fieldsMap),_modelName=record.Name,modelScope=record.Scope,fieldNames)fieldName=fieldNames[fieldIndx],fieldType=fieldsMap[fieldName].type,fieldSubType=fieldsMap[fieldName].dataType,fieldObject={code:fieldName,label:fieldName,dataType:dbType2JSONFormType[fieldSubType?fieldType+"."+fieldSubType:fieldType]},jsonRawDataFields.push(fieldObject),field2JSONRawDataFields[fieldName]=fieldObject;return(convertedData=convert2JSONSchema(_jsonRawData)).modelName=_modelName,uiRawSchema=generateDefaultLayout(convertedData),_uiSchema=convert2UISchema(uiRawSchema),_context12.next=31,$qry.createRecord("FormTemplate_studio",{Name:_modelName+"_"+_this4.state.formView,Scope:modelScope,schema:JSON.stringify(convertedData.schema),listschema:JSON.stringify(convertedData.schema),default:JSON.stringify({}),rawschema:JSON.stringify(_jsonRawData),rawlistschema:JSON.stringify(_jsonRawData),uischema:JSON.stringify(_uiSchema),rawuischema:JSON.stringify(uiRawSchema),Model:_this4.state.modelId,ModelName:_modelName,View:_this4.state.formView,GeneratedUI:!0,Theme:_this4.state.theme?_this4.state.theme:""},["uid"]);case 31:formTemplateRecord=_context12.sent,fetch("/reload_cache"),formTemplateRecord&&formTemplateRecord.uid&&_this4.setState({formTemplateId:formTemplateRecord.uid,formName:_modelName+"_Default",formScope:modelScope,defaultValue:{},jsonRawData:_jsonRawData,listRawData:_jsonRawData,uiRawSchema:uiRawSchema,jsonData:convertedData.schema,listData:convertedData.schema,uiSchema:_uiSchema,modelId:_this4.state.modelId,formModel:_modelName,formView:"Default",generatedUI:!0,isCreateModel:!1,selectedFieldMap:field2JSONRawDataFields,theme:dataRecord.Theme||""});case 34:case"end":return _context12.stop()}},_callee11,_this4)}));return function(_x16){return _ref18.apply(this,arguments)}}()):this.setState({formTemplateId:"",formName:"",jsonRawData:{},uiRawSchema:{},jsonData:{},uiSchema:{},formModel:"",formView:"",isCreateModel:!0,isCreateView:!0}));case 12:case"end":return _context13.stop()}},_callee12,this)}));return function(_x14,_x15){return _ref17.apply(this,arguments)}}()},{key:"render",value:function(){var _this5=this,styles={fontFamily:"sans-serif",padding:20,width:"100%"},ModelReference=SrsReference(),ThemeReference=SrsReference(),formTemplateEl=React.createElement(ModelReference,{style:{display:"flex"},title:"Model",tablename:"MetaModel",defaultValue:this.state.modelId,displayfield:"Name",secondarydisplayfield:"Scope",light:"true",filter:JSON.stringify({where:{Model:{neq:null}}}),searchfields:"Name",placeholder:"Search a model...",onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"";_this5.setState({modelId:value})}}),internalTables=React.createElement(Select,{labelText:"Views",light:"true",size:"small",name:"viewName",style:{placeSelf:"flex-end"},onChange:function(e){var value=e.target.value;_this5.setState({modelName:value})}},React.createElement(SelectItem,{value:"",text:"None"}),React.createElement(SelectItem,{value:"SrsteeUser",text:"Srstee User"}),React.createElement(SelectItem,{value:"SrsteeRole",text:"Srstee Role"}),React.createElement(SelectItem,{value:"SrsteeGroup",text:"Srstee Group"}),React.createElement(SelectItem,{value:"SrsteeUserRole",text:"Srstee User Role"}),React.createElement(SelectItem,{value:"SrsteeGroupRole",text:"Srstee Group Role"}),React.createElement(SelectItem,{value:"SrsteeUserGroup",text:"Srstee User Group"}),React.createElement(SelectItem,{value:"MetaModel",text:"Tables"}),React.createElement(SelectItem,{value:"MetaQuery",text:"Queries"}),React.createElement(SelectItem,{value:"MetaScope",text:"Application"}),React.createElement(SelectItem,{value:"MetaScopeDownload",text:"Application Version"}),React.createElement(SelectItem,{value:"MetaPalette",text:"Palette"}),React.createElement(SelectItem,{value:"MetaPaletteItem",text:"Palette Item"}),React.createElement(SelectItem,{value:"MetaReusableScript",text:"Reusable Script"}),React.createElement(SelectItem,{value:"MetaSlide",text:"Slide"}),React.createElement(SelectItem,{value:"MetaSlideProps",text:"Slide Properties"}),React.createElement(SelectItem,{value:"MetaSlideAction",text:"Slide Action"}),React.createElement(SelectItem,{value:"MetaWidgetAction",text:"Widget Action"}),React.createElement(SelectItem,{value:"MetaProperty",text:"Properties"}),React.createElement(SelectItem,{value:"MetaOperationHook",text:"Operation Hook"}),React.createElement(SelectItem,{value:"MetaRoute",text:"Page"}),React.createElement(SelectItem,{value:"MetaRouteRequires",text:"Page Dependencies"}),React.createElement(SelectItem,{value:"MetaRelationship",text:"Relationship"}),React.createElement(SelectItem,{value:"MetaRestMethod",text:"Rest Method"}),React.createElement(SelectItem,{value:"MetaLocalSync",text:"Import Export"}),React.createElement(SelectItem,{value:"MetaComponent",text:"Component"}),React.createElement(SelectItem,{value:"MetaComponentState",text:"Component State"}),React.createElement(SelectItem,{value:"MetaComponentProps",text:"Component Props"}),React.createElement(SelectItem,{value:"MetaComponentAction",text:"Component Action"}),React.createElement(SelectItem,{value:"MetaDataSource",text:"External Data Sources"}),React.createElement(SelectItem,{value:"MetaXModel",text:"External Models"}),React.createElement(SelectItem,{value:"SrsteeACL",text:"ACL"}),React.createElement(SelectItem,{value:"SrsteeTableACL",text:"Table ACL"}),React.createElement(SelectItem,{value:"SrsteeTableACLRole",text:"Table ACL Role"}),React.createElement(SelectItem,{value:"SrsteeRecordACL",text:"Record ACL"}),React.createElement(SelectItem,{value:"SrsteeRecordACLRole",text:"Record ACL Role"}),React.createElement(SelectItem,{value:"SrsteeFieldACL",text:"Field ACL"}),React.createElement(SelectItem,{value:"SrsteeFieldACLRole",text:"Field ACL Role"})),notificationBar=this.props.embedded+""!="true"&&this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{style_top:"40"}):null,ThreeWaySwitch=SrsThreeWaySwitch(),dynamicForm=React.createElement("dyna-form",{shadow:"true",formkey:this.state.formTemplateId,themeid:this.state.theme,dataschema:JSON.stringify(this.state.jsonData),uischema:JSON.stringify(this.state.uiSchema)}),viewNames=[];this.state.views&&this.state.views.map(function(viewName){viewNames.push(React.createElement(SelectItem,{value:viewName,text:viewName}))});var selectedFields=Object.keys(this.state.selectedFieldMap),sortedList=[];for(var fieldIndx in selectedFields)sortedList.push({text:selectedFields[fieldIndx],id:selectedFields[fieldIndx]});var modelNameProps={};this.state.modelId&&(modelNameProps.readOnly=!0),this.refs.dschema&&!this.state.isCustomModel&&this.state.modelName?setTimeout(function(){$(".array-item-add",_this5.refs.dschema).css("display","none"),$(".array-item-toolbox",_this5.refs.dschema).css("display","none")},1e3):($(".array-item-add",this.refs.dschema).css("display","unset"),$(".array-item-toolbox",this.refs.dschema).css("display","unset"));var TreeView=SrsTreeSortable();return React.createElement("div",{style:{height:"inherit",overflow:"hidden"}},React.createElement("style",null,'@import url("https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.6/lumen/bootstrap.min.css"); @import url("https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css"); @import url("/component/studio/JsonModelBuilder/Style.css");'),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"}),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"}),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.2.1/js/bootstrap.min.js"}),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.7.0/js/mdb.min.js"}),notificationBar,React.createElement(ThreeWaySwitch,{selected:this.state.mode,values:["Schema","Both","Preview"],onChange:function(val){_this5.setState({mode:val})}}),React.createElement("div",{className:"row",style:_extends({},styles,{border:"1px solid #f3eeee"})},React.createElement("div",{className:"col-sm-3"},this.state.isCustomModel?formTemplateEl:null,this.state.isCustomModel?null:internalTables),React.createElement("div",{className:"col-sm-3"},React.createElement(Toggle,{labelText:"Is Custom Model",toggled:this.state.isCustomModel,labelA:"OFF",labelB:"ON",onChange:function(e){var value=e.target.checked;_this5.setState({isCustomModel:value})}})),React.createElement("div",{className:"col-sm-2"},React.createElement(FormLabel,{style:{marginTop:20}},React.createElement(Tooltip,{triggerText:this.state.isCreateModel?"Model: Creating...":"Model: Editing..."},"Showing the current mode of the model building"))),React.createElement("div",{className:"col-sm-2"},React.createElement(Toggle,{labelText:"Create/Edit - View",toggled:!this.state.isCreateView,defaultToggled:"false",disabled:!this.state.formModel,labelA:"Create",labelB:"Edit",onChange:function(e){var value=e.target.checked;_this5.setState({isCreateView:!value})}})),React.createElement("div",{className:"col-sm-2"},React.createElement(Button,{size:"small",style:{margin:5,border:"none",color:"white",textAlign:"center",textDecoration:"none",display:"inline-block",fontSize:16,margin:"4px 2px",transitionDuration:"0.4s",cursor:"pointer",borderRadius:5},onClick:this.saveData},"Save"))),React.createElement("div",{className:"row",style:_extends({},styles)},React.createElement("div",{className:"col-sm-2"},React.createElement(TextInput,_extends({},modelNameProps,{labelText:"Name",light:"true",value:this.state.formName,placeholder:"Enter Model Name...",style:{width:"100%"},onChange:function(e){_this5.setState({formName:e.target.value})}}))),React.createElement("div",{className:"col-sm-2"},React.createElement(TextInput,{light:"true",labelText:"Scope",value:this.state.formScope,placeholder:"Enter Model Scope...",style:{width:"100%"},onChange:function(e){_this5.setState({formScope:e.target.value})}})),React.createElement("div",{className:"col-sm-1"},this.state.formModel&&!this.state.isCreateView?React.createElement(Select,{labelText:"Views",light:"true",size:"small",name:"viewName",style:{placeSelf:"flex-end"},onChange:function(e){var value=e.target.value,selectedFieldMap={};if(_this5.viewData[value]){var dataRecord=_this5.viewData[value],modelFields=(dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{}).dataType;if(modelFields)for(var modelFieldIndx in modelFields){var modelField=modelFields[modelFieldIndx];selectedFieldMap[modelField.code]=modelField}var currentView={formTemplateId:dataRecord.uid,formName:dataRecord.Name,formScope:dataRecord.Scope,defaultValue:dataRecord.default?JSON.parse(dataRecord.default):{},jsonRawData:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},uiRawSchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},jsonData:dataRecord.schema?JSON.parse(dataRecord.schema):{},uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},modelId:dataRecord.Model?dataRecord.Model:_this5.state.formModel,formModel:dataRecord.ModelName?dataRecord.ModelName:_this5.state.formModel,formView:dataRecord.View?dataRecord.View:_this5.state.formView,generatedUI:1==dataRecord.GeneratedUI,isCreateModel:!1,isCreateView:!1};_this5.setState(_extends({},currentView,{selectedFieldMap:selectedFieldMap}))}}},viewNames):React.createElement(TextInput,{labelText:"View",value:this.state.formView,placeholder:"Enter View Name...",light:"true",defaultValue:"Default",style:{width:"100%"},onChange:function(e){var dataRecord=_this5.viewData&&_this5.viewData[e.target.value]?_this5.viewData[e.target.value]:{};_this5.setState(_extends({formView:e.target.value,formTemplateId:"-1"},dataRecord))}})),React.createElement("div",{className:"col-sm-2"},React.createElement(ThemeReference,{style:{display:"flex"},title:"Theme",tablename:"FormTheme_studio",defaultValue:this.state.theme,light:"true",displayfield:"Name",filter:JSON.stringify({}),searchfields:"Name",placeholder:"Search a theme...",onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"";_this5.setState({theme:value})}}))),React.createElement("div",{className:"row",style:_extends({},styles,{borderTop:"1px solid #c4ccc4",backgroundColor:"#f3f3f3"})},"Both"==this.state.mode?React.createElement(React.Fragment,null,React.createElement("div",{className:"col-sm-6",style:{height:"60vh",overflow:"auto"}},React.createElement(Tabs,null,React.createElement(Tab,{label:"Model",value:"jsonschema"},null,React.createElement("div",{ref:"dschema",className:"dschema",style:{height:"inherit"}},React.createElement(Form,{validate:!1,children:!0,schema:dataSchema,formData:this.state.jsonRawData,onChange:this.handleJSONSchemaChange,onSubmit:this.handleJSONSchema}))),React.createElement(Tab,{label:"Form Editor",value:"uischema"},React.createElement(Form,{validate:!1,children:!0,schema:uiSchema,formData:this.state.uiRawSchema,onChange:this.handleUISchemaChange,onSubmit:this.handleUISchema})),React.createElement(Tab,{label:"Form Organiser",value:"uiarrange"},React.createElement(TreeView,{data:this.state.uiRawSchema,onChange:function(data){return _this5.handleUISchemaChangeDebounce({formData:data})}})),React.createElement(Tab,{label:"List",value:"listschema"},React.createElement(Form,{validate:!1,children:!0,schema:dataSchema,formData:this.state.listRawSchema,onChange:this.handleListSchemaChange,onSubmit:this.handleListSchema})))),React.createElement("div",{className:"col-sm-6",style:{border:"1px solid #216aa4",padding:20,minHeight:"60vh",maxHeight:"60vh",overflow:"auto",backgroundColor:"white"}},dynamicForm)):"Schema"==this.state.mode?React.createElement("div",{className:"col-sm-12"},React.createElement(Tabs,null,React.createElement(Tab,{label:"Model",value:"jsonschema"},React.createElement(Form,{validate:!1,children:!0,schema:dataSchema,formData:this.state.jsonRawData,onChange:this.handleJSONSchemaChange,onSubmit:this.handleJSONSchema})),React.createElement(Tab,{label:"Layout",value:"uischema"},React.createElement(Form,{validate:!1,children:!0,schema:uiSchema,formData:this.state.uiRawSchema,onChange:this.handleUISchemaChange,onSubmit:this.handleUISchema})),React.createElement(Tab,{label:"Form Organiser",value:"uiarrange"},React.createElement(TreeView,{data:this.state.uiRawSchema,onChange:function(data){return _this5.handleUISchemaChangeDebounce({formData:data})}})),React.createElement(Tab,{label:"List",value:"listschema"},React.createElement(Form,{validate:!1,children:!0,schema:dataSchema,formData:this.state.listRawSchema,onChange:this.handleListSchemaChange,onSubmit:this.handleListSchema})))):React.createElement("div",{className:"col-sm-12",style:{border:"1px solid #216aa4",padding:20,minHeight:"60vh",maxHeight:"60vh",overflow:"auto",backgroundColor:"white"}},dynamicForm)))}}]),_JsonModelBuilder_}(React.Component),_export("JsonModelBuilder",JsonModelBuilder=function(props){return _JsonModelBuilder_}),_export("JsonModelBuilder",JsonModelBuilder),_export("default",JsonModelBuilder),_export("states",states=[{KeyName:"sortedlist",AccessPath:"sortedlist",DefaultValue:'{"sortedlist": {}}'},{KeyName:"dynaform",AccessPath:"dynaform",DefaultValue:'{"dynaform": {}}'},{KeyName:"notifications",AccessPath:"notifications",DefaultValue:'{"notifications": []}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("client/script/studio/ModelBuilderMeta.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){_export("default",{type:"object",properties:{dataType:{type:"array",items:{$ref:"#/definitions/FieldObject"},title:"Fields"}},definitions:{KeyValuePair:{type:"object",properties:{name:{type:"string",title:"Name"},value:{type:"string",title:"Value"}}},FieldObject:{type:"object",properties:{code:{type:"string",title:"Code"},label:{type:"string",title:"Label"},dataType:{type:"string",enum:["string","text","number","boolean","date","date-time"],title:"Type"}},dependencies:{dataType:{oneOf:[{properties:{dataType:{enum:["date"]}}},{properties:{dataType:{enum:["date-time"]}}},{properties:{dataType:{enum:["number"]},widgetType:{type:"string",enum:["text","number"],title:"Default Widget Type"}}},{properties:{dataType:{enum:["boolean"]},widgetType:{type:"string",enum:["toggle","checkbox"],title:"Default Widget Type"}}},{properties:{dataType:{enum:["string"]},widgetType:{type:"string",enum:["Choice","Dynamic Choice","Reference","File","Script","Key Value Pair"],title:"Default Widget Type"}},dependencies:{widgetType:{oneOf:[{properties:{widgetType:{enum:["Dynamic Choice"]},tableName:{type:"string",title:"Table Name"},choiceLabelFieldName:{type:"string",title:"Field Name for Choice Label"},choiceValueFieldName:{type:"string",title:"Field Name for Choice Value"},condition:{type:"string",title:"Filter Condition"}}},{properties:{widgetType:{enum:["Key Value Pair"]},keyType:{type:"string",enum:["String","Dynamic"],title:"Key Type"},valueType:{type:"string",enum:["String","Dynamic"],title:"Value Type"},choiceList:{type:"array",title:"Choice List",items:{$ref:"#/definitions/KeyValuePair"}}},dependencies:{keyType:{anyOf:[{properties:{keyType:{enum:["String"]}}},{properties:{keyType:{enum:["Dynamic"]},keyTableName:{type:"string",title:"Key Table Name"},keyFieldName:{type:"string",title:"Key Field Name"},keyCondition:{type:"string",title:"Key Filter Condition"}}},{properties:{valueType:{enum:["String"]}}},{properties:{valueType:{enum:["Dynamic"]},valueTableName:{type:"string",title:"Value Table Name"},valueFieldName:{type:"string",title:"Value Field Name"},valueCondition:{type:"string",title:"Value Filter Condition"}}}]}}},{properties:{widgetType:{enum:["Choice"]},multiSelect:{type:"boolean",title:"Is Multiselect"},choiceList:{type:"array",title:"Choice List",items:{$ref:"#/definitions/KeyValuePair"}}}},{properties:{widgetType:{enum:["Reference"]},tableName:{type:"string",title:"Table Name"},displayField:{type:"string",title:"Display Field"},secondaryDisplayField:{type:"string",title:"Secondary Display Field"},filter:{type:"string",title:"Filter"},searchfields:{type:"string",title:'Search Fields (ex: "Name,Title")'},defaultValue:{type:"string",title:"Default Value"}}},{properties:{widgetType:{enum:["File"]},showImage:{type:"boolean",title:"Show Image"},isMulti:{type:"boolean",title:"Allow Multiple"}}},{properties:{widgetType:{enum:["Script"]},contentType:{type:"string",enum:["JS","CSS"],title:"Content Type"},editorHeight:{type:"string",title:"Editor Height"},language:{type:"string",enum:["javascript","css"],title:"Language"}}}]}}},{properties:{dataType:{enum:["text"]},widgetType:{type:"string",enum:["Choice","Dynamic Choice","Reference","File","Script","Key Value Pair"],title:"Default Widget Type"}},dependencies:{widgetType:{oneOf:[{properties:{widgetType:{enum:["Dynamic Choice"]},tableName:{type:"string",title:"Table Name"},choiceLabelFieldName:{type:"string",title:"Field Name for Choice Label"},choiceValueFieldName:{type:"string",title:"Field Name for Choice Value"},condition:{type:"string",title:"Filter Condition"}}},{properties:{widgetType:{enum:["Key Value Pair"]},keyType:{type:"string",enum:["String","Dynamic"],title:"Key Type"},valueType:{type:"string",enum:["String","Dynamic"],title:"Value Type"},choiceList:{type:"array",title:"Choice List",items:{$ref:"#/definitions/KeyValuePair"}}},dependencies:{keyType:{anyOf:[{properties:{keyType:{enum:["String"]}}},{properties:{keyType:{enum:["Dynamic"]},keyTableName:{type:"string",title:"Key Table Name"},keyFieldName:{type:"string",title:"Key Field Name"},keyCondition:{type:"string",title:"Key Filter Condition"}}},{properties:{valueType:{enum:["String"]}}},{properties:{valueType:{enum:["Dynamic"]},valueTableName:{type:"string",title:"Value Table Name"},valueFieldName:{type:"string",title:"Value Field Name"},valueCondition:{type:"string",title:"Value Filter Condition"}}}]}}},{properties:{widgetType:{enum:["Choice"]},multiSelect:{type:"boolean",title:"Is Multiselect"},choiceList:{type:"array",title:"Choice List",items:{$ref:"#/definitions/KeyValuePair"}}}},{properties:{widgetType:{enum:["Reference"]},tableName:{type:"string",title:"Table Name"},displayField:{type:"string",title:"Display Field"},secondaryDisplayField:{type:"string",title:"Secondary Display Field"},filter:{type:"string",title:"Filter"},searchfields:{type:"string",title:'Search Fields (ex: "Name,Title")'},defaultValue:{type:"string",title:"Default Value"}}},{properties:{widgetType:{enum:["File"]},showImage:{type:"boolean",title:"Show Image"},isMulti:{type:"boolean",title:"Allow Multiple"}}},{properties:{widgetType:{enum:["Script"]},contentType:{type:"string",enum:["JS","CSS"],title:"Content Type"},editorHeight:{type:"string",title:"Editor Height"},language:{type:"string",enum:["javascript","css"],title:"Language"}}}]}}}]}}}}})}}}),System.register("client/script/studio/FormUISchema.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){_export("default",{type:"object",properties:{dataType:{type:"string",enum:["Categorization","VerticalLayout","HorizontalLayout","Group"],title:"Layout Type"}},dependencies:{dataType:{oneOf:[{properties:{dataType:{enum:["Categorization"]},code:{type:"string",title:"Internal Name"},Stepper:{type:"boolean",title:"Show as Stepper?"},StepNavigation:{type:"boolean",title:"Show Step Navigation?"},Properties:{type:"array",items:{$ref:"#/definitions/LayoutPropsWithCategory"}},rule:{$ref:"#/definitions/RuleDef",title:"Rule"}}},{properties:{dataType:{enum:["VerticalLayout","HorizontalLayout"]},code:{type:"string",title:"Internal Name"},Properties:{type:"array",items:{$ref:"#/definitions/LayoutProps"}},rule:{$ref:"#/definitions/RuleDef",title:"Rule"}}},{properties:{dataType:{enum:["Group"]},label:{type:"string",title:"Label"},code:{type:"string",title:"Internal Name"},Properties:{type:"array",items:{$ref:"#/definitions/LayoutProps"},title:"Layout Type"},rule:{$ref:"#/definitions/RuleDef",title:"Rule"}}}]}},definitions:{PropertySelector:{type:"object",properties:{name:{type:"string",title:"Property Name"},expectedValue:{type:"string",title:"Expected Value"},isRequired:{type:"boolean",title:"Required"}}},Schema:{type:"object",properties:{schemaType:{type:"string",enum:["Simple","allOf","anyOf","oneOf"],title:"Schema Type"}},dependencies:{schemaType:{oneOf:[{properties:{schemaType:{enum:["Simple"]},expectedValue:{type:"string",title:"Expected Value"},isRequired:{type:"boolean",title:"Required"}}},{properties:{schemaType:{enum:["allOf"]},Properties:{type:"array",items:{$ref:"#/definitions/PropertySelector"},title:"Properties Selector"}}},{properties:{schemaType:{enum:["anyOf"]},Properties:{type:"array",items:{$ref:"#/definitions/PropertySelector"},title:"Properties Selector"}}},{properties:{schemaType:{enum:["oneOf"]},Properties:{type:"array",items:{$ref:"#/definitions/PropertySelector"},title:"Properties Selector"}}}]}}},SimpleInput:{type:"string",title:"Input Value"},FieldCode:{type:"string",title:"Field Code"},FieldActionDef:{type:"object",properties:{name:{type:"string",title:"Name"},label:{type:"string",title:"Label"},icon:{type:"string",enum:["subtract/20","subtract--alt/20","add/20","add--alt/20","trash-can/20","Custom"],title:"Icon"}},dependencies:{icon:{anyof:[{properties:{icon:{enum:["Custom"]},customicon:{type:"string",title:"Custom Icon"}}}]}}},ActionDef:{type:"object",properties:{name:{type:"string",title:"Name"},label:{type:"string",title:"Label"},mode:{type:"string",enum:["Primary","Secondary","Validation","Informative","Navigation","Custom"],title:"Mode"}},dependencies:{mode:{anyof:[{properties:{mode:{enum:["Primary","Secondary","Validation","Informative","Navigation"]}}},{properties:{mode:{enum:["Custom"]},custommode:{type:"string",title:"Custom Mode"}}}]}}},FieldCodeLabelPair:{type:"object",properties:{name:{type:"string",title:"Field Code"},value:{type:"string",title:"Field Label"},dataType:{enum:["string"]},widgetType:{type:"string",enum:["Choice","Dynamic Choice","Reference","File","Script","Key Value Pair"],title:"Override Widget Type"},format:{type:"string",title:"Format",enum:["date","date-time","time","regex","uri"]},actions:{type:"array",title:"Field Actions",items:{$ref:"#/definitions/FieldActionDef"}}},dependencies:{widgetType:{oneOf:[{properties:{widgetType:{enum:["Dynamic Choice"]},tableName:{type:"string",title:"Table Name"},choiceLabelFieldName:{type:"string",title:"Field Name for Choice Label"},choiceValueFieldName:{type:"string",title:"Field Name for Choice Value"},condition:{type:"string",title:"Filter Condition"}}},{properties:{widgetType:{enum:["Key Value Pair"]},keyType:{type:"string",enum:["String","Dynamic"],title:"Key Type"},valueType:{type:"string",enum:["String","Dynamic"],title:"Value Type"}},dependencies:{keyType:{anyOf:[{properties:{keyType:{enum:["String"]}}},{properties:{keyType:{enum:["Dynamic"]},keyTableName:{type:"string",title:"Key Table Name"},keyFieldName:{type:"string",title:"Key Field Name"},keyCondition:{type:"string",title:"Key Filter Condition"}}},{properties:{valueType:{enum:["String"]}}},{properties:{valueType:{enum:["Dynamic"]},valueTableName:{type:"string",title:"Value Table Name"},valueFieldName:{type:"string",title:"Value Field Name"},valueCondition:{type:"string",title:"Value Filter Condition"}}}]}}},{properties:{widgetType:{enum:["Choice"]},multiSelect:{type:"boolean",title:"Is Multiselect"},choiceList:{type:"array",title:"Choice List",items:{$ref:"#/definitions/SimpleKeyValuePair"}}}},{properties:{widgetType:{enum:["Reference"]},tableName:{type:"string",title:"Table Name"},displayField:{type:"string",title:"Display Field"},secondaryDisplayField:{type:"string",title:"Secondary Display Field"},filter:{type:"string",title:"Filter"},searchfields:{type:"string",title:'Search Fields (ex: "Name,Title")'},defaultValue:{type:"string",title:"Default Value"}}},{properties:{widgetType:{enum:["File"]},showImage:{type:"boolean",title:"Show Image"},fileTypes:{type:"string",title:"File Types"}}},{properties:{widgetType:{enum:["Script"]},contentType:{type:"string",enum:["JS","CSS"],title:"Content Type"},editorHeight:{type:"string",title:"Editor Height"},language:{type:"string",enum:["javascript","css"],title:"Language"}}}]}}},EmbeddedListField:{type:"object",properties:{name:{type:"string",title:"Field Code"},value:{type:"string",title:"Field Label"},dataType:{enum:["string","text","date","number","boolean"]},disabled:{type:"boolean",title:"Read Only"},required:{type:"boolean",title:"Mandatory"}},dependencies:{dataType:{anyOf:[{properties:{dataType:{enum:["date","number","boolean"]}}},{properties:{dataType:{enum:["string","text"]},widgetType:{type:"string",enum:["Choice","Dynamic Choice","Reference"],title:"Widget Type"}},dependencies:{widgetType:{oneOf:[{properties:{widgetType:{enum:["Dynamic Choice"]},tableName:{type:"string",title:"Table Name"},choiceLabelFieldName:{type:"string",title:"Field Name for Choice Label"},choiceValueFieldName:{type:"string",title:"Field Name for Choice Value"},condition:{type:"string",title:"Filter Condition"}}},{properties:{widgetType:{enum:["Choice"]},multiSelect:{type:"boolean",title:"Is Multiselect"},choiceList:{type:"array",title:"Choice List",items:{$ref:"#/definitions/SimpleKeyValuePair"}}}},{properties:{widgetType:{enum:["Reference"]},tableName:{type:"string",title:"Table Name"},displayField:{type:"string",title:"Display Field"},secondaryDisplayField:{type:"string",title:"Secondary Display Field"},filter:{type:"string",title:"Filter"},searchfields:{type:"string",title:'Search Fields (ex: "Name,Title")'},defaultValue:{type:"string",title:"Default Value"}}}]}}}]}}},KeyValuePair:{type:"object",properties:{name:{type:"string",title:"Name",enum:["isSelect","isHidden","isReadOnly","List"]},value:{type:"string",title:"Value"}}},SimpleKeyValuePair:{type:"object",properties:{name:{type:"string",title:"Name"},value:{type:"string",title:"Value"}}},RowSelection:{type:"object",properties:{onClick:{type:"string",enum:["Navigate To","Change State"],title:"Click Action"}},dependencies:{onClick:{oneOf:[{properties:{onClick:{enum:["Navigate To"]},navigateToURL:{type:"string",title:"URL"}}},{properties:{onClick:{enum:["Change State"]}}}]}}},ListActionType:{type:"object",properties:{name:{type:"string",title:"Action Name"},onClick:{type:"string",enum:["Navigate To","Change State"],title:"Click Action"}},dependencies:{onClick:{oneOf:[{properties:{onClick:{enum:["Navigate To"]},navigateToURL:{type:"string",title:"URL"}}},{properties:{onClick:{enum:["Change State"]}}}]}}},ListAction:{type:"object",properties:{actionname:{type:"string",title:"Action Name"},actiontype:{type:"string",title:"Action Type",enum:["Navigate To","HIDE"]}},dependencies:{condition:{oneOf:[{properties:{condition:{enum:["LEAF"]},scope:{type:"string",title:"Field Name"},expectedValue:{type:"string",title:"ExpectedValue"}}},{properties:{condition:{enum:["SCHEMA"]},schemaType:{$ref:"#/definitions/Schema",title:"Schema",enum:["Simple","allOf","anyOf","oneOf"]}}}]}}},RuleDef:{type:"object",properties:{scope:{type:"string",title:"Field Name"},effect:{type:"string",title:"Effect",enum:["ENABLE","DISABLE","SHOW","HIDE"]},condition:{type:"string",title:"Condition",enum:["LEAF","SCHEMA"]}},dependencies:{condition:{oneOf:[{properties:{condition:{enum:["LEAF"]},scope:{type:"string",title:"Field Name"},expectedValue:{type:"string",title:"ExpectedValue"}}},{properties:{condition:{enum:["SCHEMA"]},schemaType:{$ref:"#/definitions/Schema",title:"Schema",enum:["Simple","allOf","anyOf","oneOf"]}}}]}}},LayoutProps:{type:"object",properties:{dataType:{type:"string",enum:["Categorization","VerticalLayout","HorizontalLayout","Group","Label","Control","Actions","List","CustomComponent"],title:"Layout Type"}},dependencies:{dataType:{oneOf:[{properties:{dataType:{enum:["Categorization"]},Stepper:{type:"boolean",title:"Show as Stepper?"},StepNavigation:{type:"boolean",title:"Show Step Navigation?"},Properties:{type:"array",items:{$ref:"#/definitions/LayoutPropsWithCategory"}},rule:{$ref:"#/definitions/RuleDef",title:"Rule"}}},{properties:{dataType:{enum:["VerticalLayout","HorizontalLayout"]},Properties:{type:"array",items:{$ref:"#/definitions/LayoutProps"},title:"Layout Type"},inlinestyles:{type:"string",title:"Inline Styles"},rule:{$ref:"#/definitions/RuleDef",title:"Rule"}}},{properties:{dataType:{enum:["Group"]},label:{type:"string",title:"Label"},code:{type:"string",title:"Internal Name"},Properties:{type:"array",items:{$ref:"#/definitions/LayoutProps"},title:"Layout Type"},rule:{$ref:"#/definitions/RuleDef",title:"Rule"}},rule:{$ref:"#/definitions/RuleDef",title:"Rule"}},{properties:{dataType:{enum:["Label"]},name:{type:"string",title:"Control Name"},text:{type:"string",title:"Text"},showtile:{type:"boolean",title:"Show as Tile"},inlinestyles:{type:"string",title:"Inline Styles"},rule:{$ref:"#/definitions/RuleDef",title:"Rule"},options:{type:"array",items:{$ref:"#/definitions/KeyValuePair"},title:"Options"}}},{properties:{dataType:{enum:["Actions"]},align:{type:"string",enum:["left","right"],title:"Align"},actions:{type:"array",title:"Actions",items:{$ref:"#/definitions/ActionDef"}},rule:{$ref:"#/definitions/RuleDef",title:"Rule"},inlinestyles:{type:"string",title:"Inline Styles"}}},{properties:{dataType:{enum:["CustomComponent"]},name:{type:"string",title:"Control Name"},componentname:{type:"string",title:"Component Name"},componentscope:{type:"string",title:"Component Scope"},componentprops:{type:"array",title:"Component Props",items:{$ref:"#/definitions/SimpleKeyValuePair"}},inlinestyles:{type:"string",title:"Inline Styles"},rule:{$ref:"#/definitions/RuleDef",title:"Rule"}}},{properties:{dataType:{enum:["List"]},listType:{type:"string",enum:["Simple","Related","Embedded"],title:"List Type"},label:{type:"string",title:"Label"},rule:{$ref:"#/definitions/RuleDef",title:"Rule"},inlinestyles:{type:"string",title:"Inline Styles"}},dependencies:{listType:{oneOf:[{properties:{listType:{enum:["Simple"]},name:{type:"string",title:"List Name"},tableName:{type:"string",title:"Table Name"},fields:{type:"array",items:{$ref:"#/definitions/FieldCodeLabelPair"},title:"Fields"},filter:{type:"string",title:"Filter"},groupFields:{type:"array",items:{$ref:"#/definitions/FieldCode"},title:"Group Fields"},title:{type:"string",title:"Title"},noscroll:{type:"boolean",title:"No Scroll"},compact:{type:"boolean",title:"Compact"},hidefilter:{type:"boolean",title:"Hide Filter"},norowclick:{type:"boolean",title:"Hide OpenRecord"},rowSelection:{$ref:"#/definitions/RowSelection",title:"Row Selection"},listActions:{type:"array",items:{$ref:"#/definitions/ListActionType"},title:"List Actions"},rowActions:{type:"array",items:{$ref:"#/definitions/FieldActionDef"},title:"Row Actions"}},required:["name","tableName"]},{properties:{listType:{enum:["Related"]},name:{type:"string",title:"List Name"},tableName:{type:"string",title:"Table Name"},fields:{type:"array",items:{$ref:"#/definitions/FieldCodeLabelPair"},title:"Fields"},filter:{type:"string",title:"Filter"},groupFields:{type:"array",items:{$ref:"#/definitions/FieldCode"},title:"Group Fields"},title:{type:"string",title:"Title"},noscroll:{type:"boolean",title:"No Scroll"},compact:{type:"boolean",title:"Compact"},hidefilter:{type:"boolean",title:"Hide Filter"},norowclick:{type:"boolean",title:"Hide OpenRecord"},relatedField:{type:"string",title:"Related Field"},parentField:{type:"string",title:"Parent Field"},rowSelection:{$ref:"#/definitions/RowSelection",title:"Row Selection"},listActions:{type:"array",items:{$ref:"#/definitions/ListActionType"},title:"List Actions"},rowActions:{type:"array",items:{$ref:"#/definitions/FieldActionDef"},title:"Row Actions"}},required:["name","tableName","relatedField"]},{properties:{listType:{enum:["Embedded"]},name:{type:"string",title:"List Name"},fields:{type:"array",items:{$ref:"#/definitions/EmbeddedListField"},title:"Fields"},title:{type:"string",title:"Title"}}}]}}},{properties:{dataType:{enum:["Control"]},scope:{type:"string",title:"Field Name"},label:{type:"string",title:"Label"},inlinestyles:{type:"string",title:"Inline Styles"},rule:{$ref:"#/definitions/RuleDef",title:"Rule"},widgetType:{type:"string",enum:["Choice","Dynamic Choice","Reference","File","Script","Key Value Pair"],title:"Override Widget Type"},disabled:{type:"boolean",title:"Read Only"},required:{type:"boolean",title:"Mandatory"}},dependencies:{widgetType:{oneOf:[{properties:{widgetType:{enum:["Dynamic Choice"]},tableName:{type:"string",title:"Table Name"},choiceLabelFieldName:{type:"string",title:"Field Name for Choice Label"},choiceValueFieldName:{type:"string",title:"Field Name for Choice Value"},condition:{type:"string",title:"Filter Condition"}}},{properties:{widgetType:{enum:["Key Value Pair"]},keyType:{type:"string",enum:["String","Static","Dynamic"],title:"Key Type"},valueType:{type:"string",enum:["String","Static","Dynamic"],title:"Value Type"}},dependencies:{keyType:{anyOf:[{properties:{keyType:{enum:["String"]}}},{properties:{keyType:{enum:["Static"]},keychoiceList:{type:"array",title:"Key Choice List",items:{$ref:"#/definitions/SimpleKeyValuePair"}}}},{properties:{keyType:{enum:["Dynamic"]},keyTableName:{type:"string",title:"Key Table Name"},keyFieldName:{type:"string",title:"Key Field Name"},keyCondition:{type:"string",title:"Key Filter Condition"}}},{properties:{keyType:{enum:["String"]}}},{properties:{valueType:{enum:["Static"]},valuechoiceList:{type:"array",title:"Value Choice List",items:{$ref:"#/definitions/SimpleKeyValuePair"}}}},{properties:{valueType:{enum:["Dynamic"]},valueTableName:{type:"string",title:"Value Table Name"},valueFieldName:{type:"string",title:"Value Field Name"},valueCondition:{type:"string",title:"Value Filter Condition"}}}]}}},{properties:{widgetType:{enum:["Choice"]},multiSelect:{type:"boolean",title:"Is Multiselect"},choiceList:{type:"array",title:"Choice List",items:{$ref:"#/definitions/SimpleKeyValuePair"}}}},{properties:{widgetType:{enum:["Reference"]},tableName:{type:"string",title:"Table Name"},displayField:{type:"string",title:"Display Field"},secondaryDisplayField:{type:"string",title:"Secondary Display Field"},filter:{type:"string",title:"Filter"},searchfields:{type:"string",title:'Search Fields (ex: "Name,Title")'},defaultValue:{type:"string",title:"Default Value"}}},{properties:{widgetType:{enum:["File"]},showImage:{type:"boolean",title:"Show Image"},fileTypes:{type:"string",title:"File Types"}}},{properties:{widgetType:{enum:["Script"]},contentType:{type:"string",enum:["JS","CSS"],title:"Content Type"},editorHeight:{type:"string",title:"Editor Height"},language:{type:"string",enum:["javascript","css"],title:"Language"}}}]}}}]}}},LayoutPropsWithCategory:{type:"object",properties:{dataType:{type:"string",enum:["Category"],title:"Category"}},dependencies:{dataType:{oneOf:[{properties:{dataType:{enum:["Category"]},label:{type:"string",title:"Category Name"},Properties:{type:"array",items:{$ref:"#/definitions/LayoutProps"},title:"Layout Type"}}},{properties:{dataType:{enum:["Label"]},text:{type:"string",title:"Text"},rule:{$ref:"#/definitions/RuleDef",title:"Rule"},options:{type:"array",items:{$ref:"#/definitions/KeyValuePair"},title:"Options"}}},{properties:{dataType:{enum:["Control"]},scope:{type:"string",title:"Field Name"},label:{type:"string",title:"Label"},rule:{$ref:"#/definitions/RuleDef",title:"Rule"},options:{type:"array",items:{$ref:"#/definitions/KeyValuePair"},title:"Options"}}}]}}}}})}}}),System.register("client/script/studio/GenerateDefaultLayout.js",[],function(_export,_context){"use strict";return _export("default",function(inputObj,mode){inputObj.schema;var models=inputObj.models,result={dataType:"VerticalLayout",Properties:[{dataType:"Label",text:"Form - "+inputObj.modelName}]},singleColumnFieldTypes=["text","list"],layoutColumns={c2:2,c3:3},layoutMode=mode||"c2",itemBuckets=[],control={};try{if(models){for(var modelFieldIndx in models){var modelField=models[modelFieldIndx],fieldName=modelField.name,fieldLabel=modelField.label,fieldType=modelField.type;if(modelField.subtype,fieldName&&!fieldName.startsWith("srs_"))if(singleColumnFieldTypes.indexOf(fieldType)>-1||"uid"==fieldName)control={dataType:"Control",scope:fieldName,label:fieldLabel},"uid"==fieldName&&(control.options=control.options||[],control.options.push({name:"isHidden",value:"true"})),result.Properties.push(control);else if(itemBuckets.push({dataType:"Control",scope:fieldName,label:fieldLabel}),itemBuckets.length==layoutColumns[layoutMode]){for(var itemIndx in control={dataType:"HorizontalLayout",Properties:[]},itemBuckets){var bucketItem=itemBuckets[itemIndx];control.Properties.push({dataType:"Control",scope:bucketItem.scope,label:bucketItem.label})}itemBuckets=[],result.Properties.push(control)}}if(itemBuckets){for(var _itemIndx in control={dataType:"HorizontalLayout",Properties:[]},itemBuckets){var _bucketItem=itemBuckets[_itemIndx];control.Properties.push({dataType:"Control",scope:_bucketItem.scope,label:_bucketItem.label})}itemBuckets=[],result.Properties.push(control)}result.Properties.push({dataType:"Actions",subtype:"Actions",scope:"#/properties/form_actions",actions:[{name:"save",label:"Save"}],align:"left"})}}catch(err){}return result}),{setters:[],execute:function(){}}}),System.register("client/script/studio/ConvertModelSchema2JSON.js",[],function(_export,_context){"use strict";return _export("default",function(inputObj){var result={schema:{},models:{}};try{var newInputObj={dataType:"object",Properties:inputObj.dataType};result.schema=function convertSubObject(inputObj){var result={},requiredFields=[];if("object"==inputObj.dataType){for(var propIndx in result.type="object",result.properties={},inputObj.Properties){var propObj=inputObj.Properties[propIndx];propObj.name=propObj.code,result.properties[propObj.name]=convertSubObject(propObj),propObj.required+""=="true"&&requiredFields.push(propObj.name)}return result.properties.uid=result.properties.uid||{type:"string"},requiredFields.length>0&&(result.required=requiredFields),result}if("list"==inputObj.dataType)return result.type="string",result.subtype="list",inputObj.description&&(result.description=inputObj.description),inputObj.table&&(result.table=inputObj.table),inputObj.fields&&(result.fields=inputObj.fields),result;var inputObjKeys=Object.keys(inputObj);for(var inputObjIndx in inputObjKeys){var inputObjKey=inputObjKeys[inputObjIndx];"dataType"==inputObjKey?"text"==inputObj[inputObjKey]?(result.type="string",result.subtype="Text"):"number"==inputObj[inputObjKey]?result.type="number":"boolean"==inputObj[inputObjKey]?result.type="boolean":"date"==inputObj[inputObjKey]?(result.type="string",result.format="date"):"date-time"==inputObj[inputObjKey]?(result.type="string",result.format="date-time"):result.type=inputObj[inputObjKey]:result[inputObjKey]=inputObj[inputObjKey]}return result}(newInputObj),result.models=function(inputObj){var result=[];if("object"==inputObj.dataType){for(var propIndx in inputObj.Properties){var propObj=inputObj.Properties[propIndx];result.push({name:propObj.code,type:propObj.dataType,details:{required:propObj.required+""=="true"}})}return result}}(newInputObj)}catch(err){}return result}),{setters:[],execute:function(){}}}),System.register("client/script/studio/Convert2UISchema.js",[],function(_export,_context){"use strict";function applyRule(inputObj,result){if(result.rule={},result.rule.condition={},inputObj.rule.effect&&(result.rule.effect=inputObj.rule.effect),inputObj.rule.scope&&(result.rule.condition.scope="#/properties/"+inputObj.rule.scope),"LEAF"==inputObj.rule.condition)result.rule.condition.expectedValue=inputObj.rule.expectedValue;else if("SCHEMA"==inputObj.rule.condition&&(inputObj.rule.schemaType&&"Simple"==inputObj.rule.schemaType.schemaType&&(result.rule.condition.scope="#/properties/"+inputObj.rule.scope,result.rule.condition.schema={enum:[inputObj.rule.schemaType.expectedValue]}),inputObj.rule.schemaType&&("allOf"==inputObj.rule.schemaType.schemaType||"anyOf"==inputObj.rule.schemaType.schemaType||"oneOf"==inputObj.rule.schemaType.schemaType)&&(result.rule.condition.schema={},inputObj.rule.schemaType.Properties))){var expectedValues=[];for(var propIndx in inputObj.rule.schemaType.Properties){var propObj=inputObj.rule.schemaType.Properties[propIndx];expectedValues.push(propObj.expectedValue)}result.rule.condition.schema={enum:expectedValues}}return result}return _export("default",function(inputObj){var result={};try{result=function convertSubObject(inputObj){var result={};if("VerticalLayout"==inputObj.dataType||"HorizontalLayout"==inputObj.dataType||"Group"==inputObj.dataType||"Categorization"==inputObj.dataType||"Category"==inputObj.dataType||"Root"==inputObj.dataType){for(var propIndx in result.type="Root"==inputObj.dataType?"VerticalLayout":inputObj.dataType,inputObj.scope&&(result.scope="#/properties/"+inputObj.scope),inputObj.code&&(result.code=inputObj.code),"Category"!=inputObj.dataType&&"Group"!=inputObj.dataType||(result.label=inputObj.label),"Categorization"==inputObj.dataType&&inputObj.Stepper+""=="true"&&(result.options={variant:"stepper"},inputObj.StepNavigation+""=="true"&&(result.options.showNavButtons=!0)),inputObj.rule&&(result=applyRule(inputObj,result)),inputObj.inlinestyles&&(result.inlinestyles=inputObj.inlinestyles),result.elements=[],inputObj.Properties){var propObj=inputObj.Properties[propIndx];result.elements.push(convertSubObject(propObj))}return result}if("Control"==inputObj.dataType){if(result.type=inputObj.dataType,inputObj.scope&&(result.scope="#/properties/"+inputObj.scope),inputObj.label&&(result.label=inputObj.label),inputObj.fileTypes&&(result.filetypes=inputObj.fileTypes),inputObj.inlinestyles&&(result.inlinestyles=inputObj.inlinestyles),inputObj.disabled&&(result.disabled=inputObj.disabled),inputObj.required&&(result.required=inputObj.required),inputObj.widgetType){inputObj.options=null,result.widget={widgetType:inputObj.widgetType};var inputObjKeys=Object.keys(inputObj);for(var inputObjIndx in Object.keys(inputObjKeys)){var inputObjKey=inputObjKeys[inputObjIndx];"dataType"!=inputObjKey&&"scope"!=inputObjKey&&"label"!=inputObjKey&&"widgetType"!=inputObjKey&&"options"!=inputObjKey&&"suggestion"!=inputObjKey&&"rule"!=inputObjKey&&(result.widget[inputObjKey]=inputObj[inputObjKey])}}if(inputObj.options)for(var optionIndx in result.options={},inputObj.options){var option=inputObj.options[optionIndx];result.options[option.name]=option.value}return inputObj.suggestion&&(result.suggestion=inputObj.suggestion),inputObj.rule&&(result=applyRule(inputObj,result)),result}if("CustomComponent"==inputObj.dataType){if(result.type="Control",result.subtype="CustomComponent",result.scope=inputObj.name?"#/properties/"+inputObj.name:"#/properties/customcomponent",inputObj.name&&(result.controlname=inputObj.name),inputObj.componentname&&(result.componentname=inputObj.componentname),inputObj.componentscope&&(result.componentscope=inputObj.componentscope),inputObj.componentprops&&inputObj.componentprops.length>0){var componentProps={};for(var componentpropsIndx in inputObj.componentprops){var componentprop=inputObj.componentprops[componentpropsIndx];componentProps[componentprop.name]=componentprop.value}result.componentprops=componentProps}return inputObj.inlinestyles&&(result.inlinestyles=inputObj.inlinestyles),inputObj.rule&&(result=applyRule(inputObj,result)),result}if("Actions"==inputObj.dataType)return result.type="Control",result.subtype="Actions",result.scope="#/properties/form_actions",inputObj.actions&&(result.actions=inputObj.actions),inputObj.align&&(result.align=inputObj.align),inputObj.inlinestyles&&(result.inlinestyles=inputObj.inlinestyles),inputObj.rule&&(result=applyRule(inputObj,result)),result;if("List"==inputObj.dataType){if(result.type="Control","Simple"==inputObj.listType?result.subtype="SimpleList":"Related"==inputObj.listType?result.subtype="RelatedList":result.subtype="EmbeddedList",result.scope="#/properties/form_list",inputObj.label&&(result.label=inputObj.label),inputObj.inlinestyles&&(result.inlinestyles=inputObj.inlinestyles),inputObj.name&&(result.name=inputObj.name),inputObj.title&&(result.title=inputObj.title),inputObj.hidefilter&&(result.hidefilter=inputObj.hidefilter),inputObj.tableName&&(result.tableName=inputObj.tableName),inputObj.fields&&(result.fields=inputObj.fields),inputObj.groupFields&&(result.groupFields=inputObj.groupFields),inputObj.filter&&(result.filter=inputObj.filter),inputObj.noscroll&&(result.noscroll=inputObj.noscroll+""=="true"),inputObj.compact&&(result.compact=inputObj.compact+""=="true"),inputObj.norowclick&&(result.norowclick=inputObj.norowclick+""=="true"),inputObj.relatedField&&(result.relatedField=inputObj.relatedField),inputObj.parentField&&(result.parentField=inputObj.parentField),inputObj.actions&&(result.actions=inputObj.actions),inputObj.rule&&(result=applyRule(inputObj,result)),inputObj.rowSelection&&inputObj.rowSelection.onClick&&(result.rowClick=!0,"Navigate To"==inputObj.rowSelection.onClick&&(result.navigateToURL=inputObj.rowSelection.navigateToURL)),result.listActions=[],inputObj.listActions&&inputObj.listActions.length>0)for(var listActionsIndx in inputObj.listActions){var listAction=inputObj.listActions[listActionsIndx];listAction.name&&listAction.onClick&&("Navigate To"==listAction.onClick?result.listActions.push({name:listAction.name,navigateToURL:listAction.navigateToURL}):result.listActions.push({name:listAction.name}))}if(result.rowActions=[],inputObj.rowActions&&inputObj.rowActions.length>0)for(var rowActionsIndx in inputObj.rowActions){var rowAction=inputObj.rowActions[rowActionsIndx];result.rowActions.push(rowAction)}return result}return"Label"==inputObj.dataType?(result.type="Control",result.subtype=inputObj.dataType,inputObj.text&&(result.text=inputObj.text),inputObj.name?(result.scope="#/properties/"+inputObj.name,result.nane=inputObj.name):result.scope="#/properties/labelcomponent",inputObj.inlinestyles&&(result.inlinestyles=inputObj.inlinestyles),inputObj.rule&&(result=applyRule(inputObj,result)),result.showtile=!!inputObj.showtile,result):void 0}(inputObj)}catch(err){}return result}),{setters:[],execute:function(){}}}),System.register("component/studio/SrsTreeSortable/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","sortablejs/modular/sortable.core.esm.js","react-html-parser"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Sortable,AutoScroll,ReactHtmlParser,_SrsTreeSortable_,SrsTreeSortable;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_sortablejsModularSortableCoreEsmJs){Sortable=_sortablejsModularSortableCoreEsmJs.default,AutoScroll=_sortablejsModularSortableCoreEsmJs.AutoScroll},function(_reactHtmlParser){ReactHtmlParser=_reactHtmlParser.default,_reactHtmlParser.processNodes,_reactHtmlParser.convertNodeToElement,_reactHtmlParser.htmlparser2}],execute:function(){_SrsTreeSortable_=function(_React$Component){function _SrsTreeSortable_(props){_classCallCheck(this,_SrsTreeSortable_);var _this=_possibleConstructorReturn(this,(_SrsTreeSortable_.__proto__||Object.getPrototypeOf(_SrsTreeSortable_)).call(this,props));window.sortAutoScroll||(Sortable.mount(new AutoScroll),window.sortAutoScroll=!0),_this.createHTML=_this.createHTML.bind(_this),_this.html2JSON=_this.html2JSON.bind(_this),_this.createDataFromHTML=_this.createDataFromHTML.bind(_this),_this.camelcase2Snakecase=_this.camelcase2Snakecase.bind(_this),_this.snakecase2Camelcase=_this.snakecase2Camelcase.bind(_this);var htmlContent=null;if(_this.props.data){var htmlContentStr=_this.createHTML(_this.props.data);htmlContent=ReactHtmlParser(htmlContentStr)}else htmlContent=React.createElement("div",null,"No data");return _this.state={currentData:_this.props.data,htmlContent:htmlContent},_this}return _inherits(_SrsTreeSortable_,_React$Component),_createClass(_SrsTreeSortable_,[{key:"componentDidMount",value:function(){var i,_this2=this;this.refs.topElement&&function(){var nestedSortables=$(_this2.refs.topElement).find(".nested"),createDataFn=_this2.createDataFromHTML;for(i=0;i<nestedSortables.length;i++)new Sortable(nestedSortables[i],{group:"nested",animation:150,fallbackOnBody:!0,invertSwap:!0,swapThreshold:.05,onEnd:function(evt){createDataFn(evt)}})}()}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this3=this;if(_.isEqual(prevProps.data,this.props.data)||_.isEqual(this.props.data,this.state.currentData)||!this.refs.topElement){if(!_.isEqual(prevState.htmlContent,this.state.htmlContent)){var i;!function(){var nestedSortables=$(_this3.refs.topElement).find(".nested"),createDataFn=_this3.createDataFromHTML;for(i=0;i<nestedSortables.length;i++)new Sortable(nestedSortables[i],{group:"nested",animation:150,fallbackOnBody:!0,swapThreshold:.65,onEnd:function(evt){createDataFn(evt)}})}()}}else{var htmlContentStr=this.createHTML(this.props.data),htmlContent=ReactHtmlParser(htmlContentStr);this.setState({htmlContent:htmlContent})}}},{key:"createDataFromHTML",value:function(evt){if(this.refs.topElement){var el=this.refs.topElement.children[0],result=this.html2JSON(el);this.setState({currentData:result}),this.props.onChange&&this.props.onChange(result)}}},{key:"html2JSON",value:function(e){var _this4=this,output={},isListGroupItem=e.attributes.class&&e.attributes.class&&e.attributes.class.value.indexOf("list-group-item")>-1,isListGroup=!isListGroupItem&&e.attributes.class&&e.attributes.class&&e.attributes.class.value.indexOf("list-group")>-1,isNestedClass=e.attributes.class&&e.attributes.class&&e.attributes.class.value.indexOf("nested")>-1,isNestedAttr=e.attributes.nested&&e.attributes.nested.value+""=="true";return isListGroup&&isNestedClass?(e.attributes.datatype&&(output.dataType=e.attributes.datatype.value),"Group"==output.dataType&&(output.label=e.attributes.label.value),output.Properties=[],Array.from(e.children,function(el){output.Properties.push(_this4.html2JSON(el))}),output):isNestedAttr?this.html2JSON(e.children[0]):(e.attributes.datatype&&(output.dataType=e.attributes.datatype.value),isListGroupItem&&Array.from(e.attributes,function(_ref){var name=_ref.name,value=_ref.value;if("datatype"!=name.toLowerCase()&&"class"!=name.toLowerCase()&&"style"!=name.toLowerCase()){var attrName="align1"==name?"align":name;attrName=_this4.snakecase2Camelcase(attrName),value.indexOf("QUOT")>-1&&(value=value.replaceAll("QUOT",'"')).startsWith("JSON:")&&(value=value.replace("JSON:",""),value=JSON.parse(value)),output[attrName]="true"==value||"false"==value?"true"==value:value}}),output)}},{key:"camelcase2Snakecase",value:function(str){return str.replace(/[A-Z]/g,function(letter){return"_"+letter.toLowerCase()})}},{key:"snakecase2Camelcase",value:function(str){return str.replace(/([-_][a-z])/gi,function($1){return $1.toUpperCase().replace("-","").replace("_","")})}},{key:"createHTML",value:function(tempObj){var output="";if(tempObj&&tempObj.dataType){if("Group"==tempObj.dataType){if(output=output+'<div dataType="Group" code="'+tempObj.code+'" label="'+(tempObj.label||"Empty")+'" class="list-group-item" nested="true">Group: '+(tempObj.label||"Empty")+'\n                                        <div dataType="Group" label="'+(tempObj.label||"Empty")+'" class="list-group nested">',tempObj.Properties)for(var propsIndx in tempObj.Properties){var prop=tempObj.Properties[propsIndx];output+=this.createHTML(prop)}return output+="     </div>\n                                    </div>"}if(tempObj.Properties||"VerticalLayout"==tempObj.dataType||"HorizontalLayout"==tempObj.dataType||"Categorization"==tempObj.dataType){if(output=output+'<div dataType="'+tempObj.dataType+'" code="'+tempObj.code+'" class="list-group-item" nested="true">'+tempObj.dataType+'\n                                        <div dataType="'+tempObj.dataType+'" class="list-group nested">',tempObj.Properties)for(var _propsIndx in tempObj.Properties){var _prop=tempObj.Properties[_propsIndx];output+=this.createHTML(_prop)}return output+="     </div>\n                                    </div>"}var attrNames=Object.keys(tempObj),attrs="",name="";for(var attrIndx in attrNames){var attrName=attrNames[attrIndx],changedAttrName="align"==attrName?"align1":this.camelcase2Snakecase(attrName);if("string"!=typeof tempObj[attrName]&&tempObj[attrName])JSON.stringify(tempObj[attrName]).indexOf('"')>-1?attrs+=changedAttrName+'="JSON:'+JSON.stringify(tempObj[attrName]).replaceAll('"',"QUOT")+'"':attrs+=changedAttrName+'="'+JSON.stringify(tempObj[attrName])+'"';else attrs+=changedAttrName+'="'+(tempObj[attrName]?tempObj[attrName]:"").replaceAll('"',"QUOT")+'" '}return"Control"==tempObj.dataType?name="Control: "+tempObj.scope:"Label"==tempObj.dataType?name="Label: "+tempObj.text:"Actions"==tempObj.dataType?name="Actions":"Group"==tempObj.dataType?name="Group: "+(tempObj.label||"Empty"):"List"==tempObj.dataType?name="List: "+(tempObj.name||"Empty"):"CustomComponent"==tempObj.dataType&&(name="Custom Component: "+(tempObj.name||"Empty")),"<div "+attrs+' class="list-group-item">'+name+"</div>"}}},{key:"render",value:function(){return React.createElement("div",{ref:"topElement"},this.state.htmlContent)}}]),_SrsTreeSortable_}(React.Component),_export("SrsTreeSortable",SrsTreeSortable=function(props){return _SrsTreeSortable_}),_export("SrsTreeSortable",SrsTreeSortable)}}}),System.register("component/studio/SrsThreeWaySwitch/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsThreeWaySwitch_,SrsThreeWaySwitch;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SrsThreeWaySwitch_=function(_React$Component){function _SrsThreeWaySwitch_(props){_classCallCheck(this,_SrsThreeWaySwitch_);var _this=_possibleConstructorReturn(this,(_SrsThreeWaySwitch_.__proto__||Object.getPrototypeOf(_SrsThreeWaySwitch_)).call(this,props));return _this.state={selected:_this.props.selected},_this.handleChange=_this.handleChange.bind(_this),_this.selectionStyle=_this.selectionStyle.bind(_this),_this}return _inherits(_SrsThreeWaySwitch_,_React$Component),_createClass(_SrsThreeWaySwitch_,[{key:"handleChange",value:function(val){this.setState({selected:val}),this.props.onChange(val)}},{key:"selectionStyle",value:function(){return{left:this.props.values.indexOf(this.state.selected)/this.props.values.length*100+"%"}}},{key:"render",value:function(){var _this2=this,ClickableLabel=function(_ref){var title=_ref.title,onChange=_ref.onChange,id=_ref.id;return React.createElement("label",{onClick:function(){return onChange(title)},className:"switchlabel "+id},title.split(/\s+/).map(function(w){return w[0].toUpperCase()+w.slice(1)}).join(" "))},ConcealedRadio=function(_ref2){var value=_ref2.value,selected=_ref2.selected;return React.createElement("input",{className:"switchradio",type:"radio",name:"switch",checked:selected===value})},selected=this.state.selected;return React.createElement("div",{style:{marginLeft:"40%"}},React.createElement("style",null,'@import url("component/studio/SrsThreeWaySwitch/Style.css");'),React.createElement("div",{className:"switch",style:{width:45*this.props.values.length}},this.props.values.map(function(val){return React.createElement("span",null,React.createElement(ConcealedRadio,{value:val,selected:selected}),React.createElement(ClickableLabel,{title:val,onChange:_this2.handleChange}))}),React.createElement("span",{className:"switchselection",style:this.selectionStyle()})))}}]),_SrsThreeWaySwitch_}(React.Component),_export("SrsThreeWaySwitch",SrsThreeWaySwitch=function(props){return _SrsThreeWaySwitch_}),_export("SrsThreeWaySwitch",SrsThreeWaySwitch)}}}),System.register("component/studio/JsonModelBuilder/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-json-view","carbon-components-react","react-jsonschema-form","client/script/studio/ModelBuilderMeta.js","client/script/studio/FormUISchema.js","client/script/studio/GenerateDefaultLayout.js","client/script/studio/ConvertModelSchema2JSON.js","client/script/studio/Convert2UISchema.js","component/studio/SrsReference/Definition.js","component/studio/SrsTreeSortable/Definition.js","https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.6/lumen/bootstrap.min.css!css","https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css!css","component/studio/SrsThreeWaySwitch/Definition.js","lodash","lodash.debounce"],function(_export,_context14){"use strict";var _regeneratorRuntime,_asyncToGenerator,_extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,Tab,Tabs,Select,SelectItem,Toggle,FormLabel,Tooltip,Button,Form,dataSchema,uiSchema,generateDefaultLayout,convert2JSONSchema,convert2UISchema,SrsReference,SrsTreeSortable,SrsThreeWaySwitch,_,debounce,_JsonModelBuilder_,JsonModelBuilder;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactJsonView){_reactJsonView.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,Tab=_carbonComponentsReact.Tab,Tabs=_carbonComponentsReact.Tabs,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Toggle=_carbonComponentsReact.Toggle,FormLabel=_carbonComponentsReact.FormLabel,Tooltip=_carbonComponentsReact.Tooltip,Button=_carbonComponentsReact.Button},function(_reactJsonschemaForm){Form=_reactJsonschemaForm.default},function(_clientScriptStudioModelBuilderMetaJs){dataSchema=_clientScriptStudioModelBuilderMetaJs.default},function(_clientScriptStudioFormUISchemaJs){uiSchema=_clientScriptStudioFormUISchemaJs.default},function(_clientScriptStudioGenerateDefaultLayoutJs){generateDefaultLayout=_clientScriptStudioGenerateDefaultLayoutJs.default},function(_clientScriptStudioConvertModelSchema2JSONJs){convert2JSONSchema=_clientScriptStudioConvertModelSchema2JSONJs.default},function(_clientScriptStudioConvert2UISchemaJs){convert2UISchema=_clientScriptStudioConvert2UISchemaJs.default},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_componentStudioSrsTreeSortableDefinitionJs){SrsTreeSortable=_componentStudioSrsTreeSortableDefinitionJs.SrsTreeSortable},function(_httpsCdnjsCloudflareComAjaxLibsBootswatch336LumenBootstrapMinCssCss){},function(_httpsMaxcdnBootstrapcdnComFontAwesome461CssFontAwesomeMinCssCss){},function(_componentStudioSrsThreeWaySwitchDefinitionJs){SrsThreeWaySwitch=_componentStudioSrsThreeWaySwitchDefinitionJs.SrsThreeWaySwitch},function(_lodash){_=_lodash.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){_JsonModelBuilder_=function(_React$Component){function _JsonModelBuilder_(props){_classCallCheck(this,_JsonModelBuilder_);var _this=_possibleConstructorReturn(this,(_JsonModelBuilder_.__proto__||Object.getPrototypeOf(_JsonModelBuilder_)).call(this,props)),formTemplateId=_this.props.templateid?_this.props.templateid:"",modelName=_this.props.model?_this.props.model:"",viewName=_this.props.view?_this.props.view:"Default";_this.state={jsonData:JSON.parse("{}"),uiRawSchema:{},uiSchema:{},listRawSchema:{},listSchema:{},generatedUI:!0,generatedList:!0,mode:"Both",dynaFormKey:Date.now(),defaultValue:{},formName:"",formScope:_this.props.scope?_this.props.scope:"",formView:viewName,formTemplateId:formTemplateId,formModel:modelName,modelId:"",isCreateView:!0,views:[],isCreateModel:!0,listkey:Date.now(),selectedFieldMap:{},isCustomModel:!0},_this.viewData={},_this.handleJSONSchema=_this.handleJSONSchema.bind(_this),_this.handleUISchema=_this.handleUISchema.bind(_this),_this.handleListSchema=_this.handleListSchema.bind(_this),_this.handleJSONSchemaChange=_this.handleJSONSchemaChange.bind(_this),_this.handleUISchemaChange=_this.handleUISchemaChange.bind(_this),_this.handleUISchemaChangeDebounce=debounce(function(payload){return _this.handleUISchemaChange(payload)},100),_this.handleListSchemaChange=_this.handleListSchemaChange.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.saveUISchema=_this.saveUISchema.bind(_this),_this.upsertModel=_this.upsertModel.bind(_this),_this.updateModelFields=_this.updateModelFields.bind(_this),$ele.registerElement("DynaForm","studio");var formTemplateQuery=null;return formTemplateId&&formTemplateId+""!="-1"?formTemplateQuery={where:{uid:formTemplateId}}:modelName&&(formTemplateQuery={where:{modelName:modelName}}),formTemplateQuery&&$qry.getRecords("FormTemplate_studio",formTemplateQuery,["uid","Name","Scope","default","schema","rawschema","uischema","rawuischema","Model","View","ModelName","GeneratedUI","Theme"]).then(function(views){_this.viewData={};var allViews=[],currentView=null,selectedFieldMap=[];if(views&&views.length>0){for(var recordIndx in views){var dataRecord=views[recordIndx];if(_this.viewData[dataRecord.View]=views[recordIndx],allViews.push(dataRecord.View),viewName&&dataRecord.View==viewName||!viewName&&0==recordIndx){var modelFields=(dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{}).dataType;if(modelFields)for(var modelFieldIndx in modelFields){var modelField=modelFields[modelFieldIndx];selectedFieldMap[modelField.code]=modelField}currentView={formTemplateId:dataRecord.uid,formName:dataRecord.Name,formScope:dataRecord.Scope,defaultValue:dataRecord.default?JSON.parse(dataRecord.default):{},jsonRawData:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},uiRawSchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},listRawSchema:dataRecord.rawlistschema?JSON.parse(dataRecord.rawlistschema):{},jsonData:dataRecord.schema?JSON.parse(dataRecord.schema):{},uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},listSchema:dataRecord.listschema?JSON.parse(dataRecord.listschema):{},modelId:dataRecord.Model?dataRecord.Model:_this.state.formModel,formModel:dataRecord.ModelName?dataRecord.ModelName:_this.state.formModel,formView:dataRecord.View?dataRecord.View:_this.state.formView,generatedUI:1==dataRecord.GeneratedUI,isCreateModel:!1,theme:dataRecord.Theme||""}}}currentView?_this.setState(_extends({},currentView,{views:allViews,selectedFieldMap:selectedFieldMap})):_this.setState({views:allViews,isCreateView:!1})}else _this.setState({isCreateView:!0})}),_this}return _inherits(_JsonModelBuilder_,_React$Component),_createClass(_JsonModelBuilder_,[{key:"upsertModel",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(tableName,scope,fieldList){var createModelFn,data,modelId,self;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,$script.getscript("createModel");case 2:if(!(createModelFn=_context.sent)||!createModelFn.default){_context.next=11;break}return _context.next=6,createModelFn.default(tableName,scope,fieldList);case 6:if((data=_context.sent)&&(modelId=data&&data.MetaModelUpsertWithWhere&&data.MetaModelUpsertWithWhere.obj?data.MetaModelUpsertWithWhere.obj.uid:"")){self=this,this.state.isCustomModel&&this.updateModelFields(modelId,fieldList);try{fetch("/reload_model/"+modelId).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+tableName+" saved successfully!"})})}catch(err){this.props.addFlashMessage({title:"Error - ",subtitle:"Something went wrong while updating "+tableName+"... Please try again later!"})}}return _context.abrupt("return",data);case 11:return _context.abrupt("return",null);case 12:case"end":return _context.stop()}},_callee,this)}));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}()},{key:"updateModelFields",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(modelId,fieldList){var records,inputFieldCodes,_loop,recordIndx,inputFieldCodeIndx,inputFieldCode,_inputFieldCodeIndx,_inputFieldCode,_this2=this;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,$qry.getRecords("ModelField_studio",{where:{Model:modelId}},["uid","FieldName","FieldCode","Type","SubType"]);case 2:if(records=_context3.sent,inputFieldCodes=Object.keys(fieldList),!(records&&records.length>0)){_context3.next=24;break}_loop=_regeneratorRuntime.mark(function _loop(recordIndx){var fieldRecord;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!(fieldRecord=records[recordIndx])||!fieldRecord.FieldCode){_context2.next=11;break}if(-1!=inputFieldCodes.indexOf(fieldRecord.FieldCode)){_context2.next=7;break}return _context2.next=5,$qry.deleteRecord("ModelField_studio",fieldRecord.uid);case 5:_context2.next=10;break;case 7:if(!(fieldRecord.Type!=fieldList[fieldRecord.FieldCode].type||fieldRecord.SubType&&fieldRecord.SubType!=fieldList[fieldRecord.FieldCode].dataType||!fieldRecord.SubType&&fieldList[fieldRecord.FieldCode].dataType)){_context2.next=10;break}return _context2.next=10,$qry.updateRecord("ModelField_studio",fieldRecord.uid,{Model:modelId,Type:fieldList[fieldRecord.FieldCode].type,dataType:fieldList[fieldRecord.FieldCode].dataType},["uid"]);case 10:inputFieldCodes=inputFieldCodes.filter(function(item){return item!=fieldRecord.FieldCode});case 11:case"end":return _context2.stop()}},_loop,_this2)}),_context3.t0=_regeneratorRuntime.keys(records);case 7:if((_context3.t1=_context3.t0()).done){_context3.next=12;break}return recordIndx=_context3.t1.value,_context3.delegateYield(_loop(recordIndx),"t2",10);case 10:_context3.next=7;break;case 12:if(!(inputFieldCodes&&inputFieldCodes.length>0)){_context3.next=22;break}_context3.t3=_regeneratorRuntime.keys(inputFieldCodes);case 14:if((_context3.t4=_context3.t3()).done){_context3.next=22;break}return inputFieldCodeIndx=_context3.t4.value,inputFieldCode=inputFieldCodes[inputFieldCodeIndx],_context3.next=19,$qry.createRecord("ModelField_studio",{Model:modelId,FieldName:inputFieldCode,FieldCode:inputFieldCode,Type:fieldList[inputFieldCode].type,SubType:fieldList[inputFieldCode].dataType},["uid"]);case 19:fetch("/reload_cache"),_context3.next=14;break;case 22:_context3.next=34;break;case 24:if(!(inputFieldCodes&&inputFieldCodes.length>0)){_context3.next=34;break}_context3.t5=_regeneratorRuntime.keys(inputFieldCodes);case 26:if((_context3.t6=_context3.t5()).done){_context3.next=34;break}return _inputFieldCodeIndx=_context3.t6.value,_inputFieldCode=inputFieldCodes[_inputFieldCodeIndx],_context3.next=31,$qry.createRecord("ModelField_studio",{Model:modelId,FieldName:_inputFieldCode,FieldCode:_inputFieldCode,Type:fieldList[_inputFieldCode].type,SubType:fieldList[_inputFieldCode].dataType},["uid"]);case 31:fetch("/reload_cache"),_context3.next=26;break;case 34:case"end":return _context3.stop()}},_callee2,this)}));return function(_x4,_x5){return _ref2.apply(this,arguments)}}()},{key:"handleJSONSchemaChange",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(_ref4){var convertedData,uiSchema,uiRawSchema,formData=_ref4.formData;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:(convertedData=convert2JSONSchema(formData)).modelName=this.state.formModel,uiSchema=this.state.uiSchema,uiRawSchema=this.state.uiRawSchema,!this.state.generatedUI&&uiSchema&&0!=Object.keys(uiSchema).length||(uiRawSchema=generateDefaultLayout(convertedData),uiSchema=convert2UISchema(uiRawSchema)),this.setState({jsonRawData:formData,jsonData:convertedData.schema,uiSchema:uiSchema,uiRawSchema:uiRawSchema});case 6:case"end":return _context4.stop()}},_callee3,this)}));return function(_x6){return _ref3.apply(this,arguments)}}()},{key:"handleJSONSchema",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(_ref6){var convertedData,uiSchema,uiRawSchema,listSchema,listRawSchema,record,metaModelFields,fieldIndx,fieldObj,formName,viewName,modelName,createdRecord,modelId,updatedRecord,formData=_ref6.formData;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if((convertedData=convert2JSONSchema(formData)).modelName=this.state.formModel,uiSchema=this.state.uiSchema,uiRawSchema=this.state.uiRawSchema,!this.state.generatedUI&&uiSchema&&0!=Object.keys(uiSchema).length||(uiRawSchema=generateDefaultLayout(convertedData),uiSchema=convert2UISchema(uiRawSchema)),listSchema=this.state.listSchema,listRawSchema=this.state.listRawSchema,!this.state.generatedList&&listSchema&&0!=Object.keys(listSchema).length||(listRawSchema=formData,listSchema=convertedData.schema),this.setState({jsonRawData:formData,jsonData:convertedData.schema,uiSchema:uiSchema,uiRawSchema:uiRawSchema}),record={},metaModelFields={},this.state.formName){_context5.next=15;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Please provide form name and try again!"}),_context5.next=71;break;case 15:if(!(formData&&formData.dataType&&formData.dataType.length>0)){_context5.next=38;break}_context5.t0=_regeneratorRuntime.keys(formData.dataType);case 17:if((_context5.t1=_context5.t0()).done){_context5.next=38;break}if(fieldIndx=_context5.t1.value,"uid"==(fieldObj=formData.dataType[fieldIndx]).code||"srs_created_at"==fieldObj.code||"srs_updated_at"==fieldObj.code||"srs_created_by"==fieldObj.code||"srs_updated_by"==fieldObj.code){_context5.next=36;break}_context5.t2=fieldObj.dataType,_context5.next="text"===_context5.t2?24:"date-time"===_context5.t2?26:"date"===_context5.t2?28:"number"===_context5.t2?30:"string"===_context5.t2?32:"boolean"===_context5.t2?34:36;break;case 24:return metaModelFields[fieldObj.code]={type:"String",dataType:"mediumtext"},_context5.abrupt("break",36);case 26:return metaModelFields[fieldObj.code]={type:"date",dataType:"timestamp"},_context5.abrupt("break",36);case 28:return metaModelFields[fieldObj.code]={type:"date"},_context5.abrupt("break",36);case 30:return metaModelFields[fieldObj.code]={type:"Number",dataType:"float",precision:20,scale:4},_context5.abrupt("break",36);case 32:return metaModelFields[fieldObj.code]={type:"String"},_context5.abrupt("break",36);case 34:return metaModelFields[fieldObj.code]={type:"Boolean"},_context5.abrupt("break",36);case 36:_context5.next=17;break;case 38:if(formName=this.state.formName,viewName=this.state.formView,modelName=this.state.formModel||formName,formName.endsWith("_"+viewName)||(formName=(modelName||formName)+"_"+viewName),this.state.formTemplateId&&this.state.formTemplateId+""!="-1"){_context5.next=60;break}if(_context5.t3=this.state.isCustomModel,!_context5.t3){_context5.next=48;break}return _context5.next=47,this.upsertModel(modelName,this.state.formScope,metaModelFields);case 47:_context5.t3=_context5.sent;case 48:return createdRecord=_context5.t3,modelId="",this.state.isCustomModel&&createdRecord&&createdRecord.MetaModelUpsertWithWhere&&createdRecord.MetaModelUpsertWithWhere.obj&&createdRecord.MetaModelUpsertWithWhere.obj.uid&&(modelId=createdRecord.MetaModelUpsertWithWhere.obj.uid),_context5.next=53,$qry.createRecord("FormTemplate_studio",{Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(formData),uischema:JSON.stringify(uiSchema),rawuischema:JSON.stringify(uiRawSchema),listschema:JSON.stringify(listSchema),rawlistschema:JSON.stringify(listRawSchema),GeneratedList:this.state.generatedList,Model:modelId,ModelName:modelName,View:viewName,GeneratedUI:this.state.generatedUI,Theme:this.state.theme?this.state.theme:""},["uid"]);case 53:record=_context5.sent,this.viewData[this.state.formView]={formTemplateId:record.uid,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(formData),uischema:JSON.stringify(uiSchema),rawuischema:JSON.stringify(uiRawSchema),listschema:JSON.stringify(listSchema),rawlistschema:JSON.stringify(listRawSchema),GeneratedList:this.state.generatedList,Model:modelId,ModelName:modelName,View:viewName,GeneratedUI:this.state.generatedUI,Theme:this.state.theme?this.state.theme:""},this.state.isCustomModel&&createdRecord&&createdRecord.MetaModelUpsertWithWhere&&createdRecord.MetaModelUpsertWithWhere.obj&&createdRecord.MetaModelUpsertWithWhere.obj.uid&&this.setState({modelId:createdRecord.MetaModelUpsertWithWhere.obj.uid}),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+formName+" created successfully!"}),fetch("/reload_cache"),_context5.next=71;break;case 60:return _context5.next=62,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(formData),uischema:JSON.stringify(uiSchema),rawuischema:JSON.stringify(uiRawSchema),listschema:JSON.stringify(listSchema),rawlistschema:JSON.stringify(listRawSchema),GeneratedList:this.state.generatedList,Model:this.state.modelId,ModelName:modelName,View:viewName,GeneratedUI:this.state.generatedUI,Theme:this.state.theme?this.state.theme:""},["uid"]);case 62:if(record=_context5.sent,_context5.t4=this.state.isCustomModel,!_context5.t4){_context5.next=68;break}return _context5.next=67,this.upsertModel(modelName,this.state.formScope,metaModelFields);case 67:_context5.t4=_context5.sent;case 68:updatedRecord=_context5.t4,this.state.isCustomModel&&updatedRecord&&updatedRecord.MetaModelUpsertWithWhere&&updatedRecord.MetaModelUpsertWithWhere.obj&&updatedRecord.MetaModelUpsertWithWhere.obj.uid&&this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" is updated!"}),fetch("/reload_cache");case 71:case"end":return _context5.stop()}},_callee4,this)}));return function(_x7){return _ref5.apply(this,arguments)}}()},{key:"saveData",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(){var record,metaModelFields,fieldIndx,fieldObj,formName,viewName,modelName,createdRecord,modelId,updatedRecord;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(record={},metaModelFields={},this.state.formName){_context6.next=6;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Please provide form name and try again!"}),_context6.next=62;break;case 6:if(!(this.state.jsonRawData&&this.state.jsonRawData.dataType&&this.state.jsonRawData.dataType.length>0)){_context6.next=29;break}_context6.t0=_regeneratorRuntime.keys(this.state.jsonRawData.dataType);case 8:if((_context6.t1=_context6.t0()).done){_context6.next=29;break}if(fieldIndx=_context6.t1.value,"uid"==(fieldObj=this.state.jsonRawData.dataType[fieldIndx]).code||"srs_created_at"==fieldObj.code||"srs_updated_at"==fieldObj.code||"srs_created_by"==fieldObj.code||"srs_updated_by"==fieldObj.code){_context6.next=27;break}_context6.t2=fieldObj.dataType,_context6.next="text"===_context6.t2?15:"date-time"===_context6.t2?17:"date"===_context6.t2?19:"number"===_context6.t2?21:"string"===_context6.t2?23:"boolean"===_context6.t2?25:27;break;case 15:return metaModelFields[fieldObj.code]={type:"String",dataType:"mediumtext"},_context6.abrupt("break",27);case 17:return metaModelFields[fieldObj.code]={type:"date",dataType:"timestamp"},_context6.abrupt("break",27);case 19:return metaModelFields[fieldObj.code]={type:"date"},_context6.abrupt("break",27);case 21:return metaModelFields[fieldObj.code]={type:"Number",dataType:"float",precision:20,scale:4},_context6.abrupt("break",27);case 23:return metaModelFields[fieldObj.code]={type:"String"},_context6.abrupt("break",27);case 25:return metaModelFields[fieldObj.code]={type:"Boolean"},_context6.abrupt("break",27);case 27:_context6.next=8;break;case 29:if(formName=this.state.formName,viewName=this.state.formView,modelName=this.state.formModel||formName,formName.endsWith("_"+viewName)||(formName=(modelName||formName)+"_"+viewName),this.state.formTemplateId&&this.state.formTemplateId+""!="-1"){_context6.next=51;break}if(_context6.t3=this.state.isCustomModel,!_context6.t3){_context6.next=39;break}return _context6.next=38,this.upsertModel(modelName,this.state.formScope,metaModelFields);case 38:_context6.t3=_context6.sent;case 39:return createdRecord=_context6.t3,modelId="",this.state.isCustomModel&&createdRecord&&createdRecord.MetaModelUpsertWithWhere&&createdRecord.MetaModelUpsertWithWhere.obj&&createdRecord.MetaModelUpsertWithWhere.obj.uid&&(modelId=createdRecord.MetaModelUpsertWithWhere.obj.uid),_context6.next=44,$qry.createRecord("FormTemplate_studio",{Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),listschema:JSON.stringify(this.state.listSchema),rawlistschema:JSON.stringify(this.state.listRawSchema),GeneratedList:this.state.generatedList,Model:modelId,ModelName:modelName,View:this.state.formView,GeneratedUI:this.state.generatedUI,Theme:this.state.theme?this.state.theme:""},["uid"]);case 44:record=_context6.sent,this.viewData[this.state.formView]={formTemplateId:record.uid,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),listschema:JSON.stringify(this.state.listSchema),rawlistschema:JSON.stringify(this.state.listRawSchema),GeneratedList:this.state.generatedList,Model:modelId,ModelName:modelName,View:this.state.formView,GeneratedUI:this.state.generatedUI,Theme:this.state.theme?this.state.theme:""},this.state.isCustomModel&&createdRecord&&createdRecord.MetaModelUpsertWithWhere&&createdRecord.MetaModelUpsertWithWhere.obj&&createdRecord.MetaModelUpsertWithWhere.obj.uid&&this.setState({modelId:createdRecord.MetaModelUpsertWithWhere.obj.uid,formModel:modelName}),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" created successfully!"}),fetch("/reload_cache"),_context6.next=62;break;case 51:return _context6.next=53,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),listschema:JSON.stringify(this.state.listSchema),rawlistschema:JSON.stringify(this.state.listRawSchema),GeneratedList:this.state.generatedList,Model:this.state.modelId,ModelName:modelName,View:this.state.formView,GeneratedUI:this.state.generatedUI,Theme:this.state.theme?this.state.theme:""},["uid"]);case 53:if(record=_context6.sent,_context6.t4=this.state.isCustomModel,!_context6.t4){_context6.next=59;break}return _context6.next=58,this.upsertModel(modelName,this.state.formScope,metaModelFields);case 58:_context6.t4=_context6.sent;case 59:updatedRecord=_context6.t4,this.state.isCustomModel&&updatedRecord&&updatedRecord.MetaModelUpsertWithWhere&&updatedRecord.MetaModelUpsertWithWhere.obj&&updatedRecord.MetaModelUpsertWithWhere.obj.uid&&this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" is updated!"}),fetch("/reload_cache");case 62:case"end":return _context6.stop()}},_callee5,this)}));return function(){return _ref7.apply(this,arguments)}}()},{key:"handleUISchemaChange",value:function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(_ref9){var uiSchema,formData=_ref9.formData;return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:uiSchema=convert2UISchema(formData),this.setState({uiRawSchema:formData,uiSchema:uiSchema,generatedUI:!1});case 2:case"end":return _context7.stop()}},_callee6,this)}));return function(_x8){return _ref8.apply(this,arguments)}}()},{key:"handleUISchema",value:function(){var _ref10=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(_ref11){var uiSchema,formData=_ref11.formData;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return uiSchema=convert2UISchema(formData),this.setState({uiRawSchema:formData,uiSchema:uiSchema,generatedUI:!1}),_context8.next=4,this.saveUISchema(uiSchema,formData);case 4:case"end":return _context8.stop()}},_callee7,this)}));return function(_x9){return _ref10.apply(this,arguments)}}()},{key:"saveUISchema",value:function(){var _ref12=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(inputUISchema,inputFormData){var uiSchema,formData,record,formName,viewName,modelName;return _regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(uiSchema=inputUISchema||this.state.uiSchema,formData=inputFormData||this.state.uiRawSchema,record={},formName=this.state.formName,viewName=this.state.formView,modelName=this.state.formModel,formName.endsWith("_"+viewName)||(formName=(modelName||formName)+"_"+viewName),this.state.formName){_context9.next=11;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Please provide form name and try again!"}),_context9.next=25;break;case 11:if(this.state.formTemplateId&&this.state.formTemplateId+""!="-1"){_context9.next=20;break}return _context9.next=14,$qry.createRecord("FormTemplate_studio",{Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(uiSchema),rawuischema:JSON.stringify(formData),listschema:JSON.stringify(this.state.listSchema),rawlistschema:JSON.stringify(this.state.listRawSchema),Model:this.state.modelId,ModelName:this.state.formModel,View:this.state.formView,GeneratedUI:!1,GeneratedList:this.state.generatedList,Theme:this.state.theme?this.state.theme:""},["uid"]);case 14:(record=_context9.sent)&&record.uid&&(this.viewData[this.state.formView]={formTemplateId:record.uid,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(uiSchema),rawuischema:JSON.stringify(formData),listschema:JSON.stringify(this.state.listSchema),rawlistschema:JSON.stringify(this.state.listRawSchema),Model:this.state.modelId,ModelName:this.state.formModel,View:this.state.formView,GeneratedUI:!1,GeneratedList:this.state.generatedList,Theme:this.state.theme||""}),fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" created successfully!"}),_context9.next=25;break;case 20:return _context9.next=22,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(uiSchema),rawuischema:JSON.stringify(formData),listschema:JSON.stringify(this.state.listSchema),rawlistschema:JSON.stringify(this.state.listRawSchema),GeneratedUI:!1,GeneratedList:this.state.generatedList,Theme:this.state.theme?this.state.theme:""},["uid"]);case 22:record=_context9.sent,fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" is updated!"});case 25:case"end":return _context9.stop()}},_callee8,this)}));return function(_x10,_x11){return _ref12.apply(this,arguments)}}()},{key:"handleListSchemaChange",value:function(){var _ref13=_asyncToGenerator(_regeneratorRuntime.mark(function _callee9(_ref14){var listSchema,formData=_ref14.formData;return _regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:listSchema=(listSchema=convert2JSONSchema(formData)).schema,this.setState({listRawSchema:formData,listSchema:listSchema,generatedList:!1});case 3:case"end":return _context10.stop()}},_callee9,this)}));return function(_x12){return _ref13.apply(this,arguments)}}()},{key:"handleListSchema",value:function(){var _ref15=_asyncToGenerator(_regeneratorRuntime.mark(function _callee10(_ref16){var listSchema,record,formName,viewName,modelName,formData=_ref16.formData;return _regeneratorRuntime.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:if(listSchema=(listSchema=convert2JSONSchema(formData)).schema,this.setState({listRawSchema:formData,listSchema:listSchema,generatedList:!1}),record={},formName=this.state.formName,viewName=this.state.formView,modelName=this.state.formModel,formName.endsWith("_"+viewName)||(formName=(modelName||formName)+"_"+viewName),this.state.formName){_context11.next=12;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Please provide form name and try again!"}),_context11.next=26;break;case 12:if(this.state.formTemplateId&&this.state.formTemplateId+""!="-1"){_context11.next=21;break}return _context11.next=15,$qry.createRecord("FormTemplate_studio",{Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),listschema:JSON.stringify(listSchema),rawlistschema:JSON.stringify(formData),Model:this.state.modelId,ModelName:this.state.formModel,View:this.state.formView,GeneratedUI:this.state.generatedUI,GeneratedList:!1,Theme:this.state.theme?this.state.theme:""},["uid"]);case 15:record=_context11.sent,fetch("/reload_cache"),record&&record.uid&&(this.viewData[this.state.formView]={formTemplateId:record.uid,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(formData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),listschema:JSON.stringify(listSchema),rawlistschema:JSON.stringify(formData),Model:this.state.modelId,ModelName:this.state.formModel,View:this.state.formView,GeneratedUI:this.state.generatedUI,GeneratedList:!1,Theme:this.state.theme||""}),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" created successfully!"}),_context11.next=26;break;case 21:return _context11.next=23,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:formName,Scope:this.state.formScope,schema:JSON.stringify(this.state.jsonData),default:JSON.stringify(this.state.defaultValue),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),listschema:JSON.stringify(listSchema),rawlistschema:JSON.stringify(formData),GeneratedUI:this.state.generatedUI,GeneratedList:!1,Theme:this.state.theme?this.state.theme:""},["uid"]);case 23:record=_context11.sent,fetch("/reload_cache"),this.props.addFlashMessage({title:"Success - ",subtitle:"Form template "+this.state.formName+" is updated!"});case 26:case"end":return _context11.stop()}},_callee10,this)}));return function(_x13){return _ref15.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var _this3=this;this.props.shadow&&this.props.shadow.addEventListener("click",function(ev){if("LEGEND"==ev.composedPath()[0].tagName){var fieldsetEl=$(ev.composedPath()[0]).closest("fieldset");fieldsetEl.hasClass("collapsed")?fieldsetEl.removeClass("collapsed"):fieldsetEl.addClass("collapsed")}else if("FIELDSET"==ev.composedPath()[0].tagName||"LABEL"==ev.composedPath()[0].tagName&&$(ev.composedPath()[0]).hasClass("control-label")||"DIV"==ev.composedPath()[0].tagName&&$(ev.composedPath()[0]).hasClass("array-item-list")||"DIV"==ev.composedPath()[0].tagName&&$(ev.composedPath()[0]).hasClass("form-group")&&$(ev.composedPath()[0]).hasClass("field")&&$(ev.composedPath()[0]).hasClass("field-string")){var _fieldsetEl="LABEL"==ev.composedPath()[0].tagName||"DIV"==ev.composedPath()[0].tagName?$(ev.composedPath()[0]).closest("fieldset"):$(ev.composedPath()[0]);if(_fieldsetEl.hasClass("expand-fieldset"))_fieldsetEl.removeClass("expand-fieldset");else $("fieldset",_this3.props.shadow).removeClass("expand-fieldset"),$("#head",_this3.props.shadow).children("fieldset").addClass("expand-fieldset"),_fieldsetEl.addClass("expand-fieldset"),_fieldsetEl.parents("fieldset").addClass("expand-fieldset"),_fieldsetEl.children("fieldset").addClass("expand-fieldset")}else if("BUTTON"==ev.composedPath()[0].tagName){var btnEl=$(ev.composedPath()[0]);setTimeout(function(){if(btnEl.parent().hasClass("array-item-add")){var childFieldSets=btnEl.closest("fieldset").find("fieldset");if(childFieldSets&&childFieldSets.length>0){childFieldSets.removeClass("expand-fieldset");var lastFieldSet=childFieldSets[childFieldSets.length-1];$(lastFieldSet).addClass("expand-fieldset"),$(lastFieldSet).parents("fieldset").addClass("expand-fieldset")}}},20)}var allContentEls=$("#head",_this3.props.shadow).find(".array-item > .col-xs-9"),allActionEls=$("#head",_this3.props.shadow).find(".array-item > .col-xs-3");allContentEls.addClass("col-xs-12").removeClass("col-xs-9"),allActionEls.addClass("col-xs-0").removeClass("col-xs-3");var leafExpandedFieldSetEl=$("#head",_this3.props.shadow).find(".expand-fieldset"),arryItemEl=(leafExpandedFieldSetEl=leafExpandedFieldSetEl&&leafExpandedFieldSetEl.length>0?leafExpandedFieldSetEl[leafExpandedFieldSetEl.length-1]:null)?leafExpandedFieldSetEl.closest(".array-item"):null;arryItemEl&&$(arryItemEl).children(".array-item-toolbox").addClass("col-xs-3").removeClass("col-xs-0"),arryItemEl&&$(arryItemEl).children(".col-xs-12").addClass("col-xs-9").removeClass("col-xs-12")}),$("#head",this.props.shadow).children("fieldset").addClass("expand-fieldset");var allContentEls=$("#head",this.props.shadow).find(".array-item > .col-xs-9"),allActionEls=$("#head",this.props.shadow).find(".array-item > .col-xs-3");allContentEls.addClass("col-xs-12").removeClass("col-xs-9"),allActionEls.addClass("col-xs-0").removeClass("col-xs-3")}},{key:"componentDidUpdate",value:function(){var _ref17=_asyncToGenerator(_regeneratorRuntime.mark(function _callee12(prevProps,prevState){var self,formName,viewName,modelName,sortedlist,formData,sortedlistIndx,sortedlistItem,fieldObj,filterQuery,_this4=this;return _regeneratorRuntime.wrap(function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:if(self=this,prevState.mode!=this.state.mode&&this.setState({dynaFormKey:Date.now()}),formName=this.state.formName,viewName=this.state.formView,modelName=this.state.formModel,formName.endsWith("_"+viewName)||(formName=(modelName||formName)+"_"+viewName),!this.state.formName||this.state.formTemplateId+""=="-1"||!this.props.dynaform[this.state.formTemplateId]||_.isEqual(prevProps.dynaform[this.state.formTemplateId],this.props.dynaform[this.state.formTemplateId])){_context13.next=10;break}return _context13.next=9,$qry.updateRecord("FormTemplate_studio",this.state.formTemplateId,{uid:this.state.formTemplateId,Name:formName,Scope:this.state.formScope,default:this.props.dynaform[this.state.formTemplateId]?JSON.stringify(this.props.dynaform[this.state.formTemplateId]):"{}",schema:JSON.stringify(this.state.jsonData),rawschema:JSON.stringify(this.state.jsonRawData),uischema:JSON.stringify(this.state.uiSchema),rawuischema:JSON.stringify(this.state.uiRawSchema),listschema:JSON.stringify(this.state.listSchema),rawlistschema:JSON.stringify(this.state.listRawSchema),Theme:this.state.theme?this.state.theme:""},["uid"]);case 9:fetch("/reload_cache");case 10:if(!_.isEqual(prevProps.sortedlist,this.props.sortedlist)&&this.props.sortedlist&&this.props.sortedlist[this.state.listkey]&&(!this.props.sortedlist||!_.isEqual(prevProps.sortedlist[this.state.listkey],this.props.sortedlist[this.state.listkey]))){for(sortedlistIndx in sortedlist=this.props.sortedlist[this.state.listkey],formData={dataType:[]},sortedlist)sortedlistItem=sortedlist[sortedlistIndx],fieldObj=this.state.selectedFieldMap[sortedlistItem.id],formData.dataType.push(fieldObj);self.handleJSONSchemaChange({formData:formData})}prevState.modelId==this.state.modelId&&prevState.modelName==this.state.modelName||(filterQuery=null,prevState.modelId!=this.state.modelId&&this.state.modelId?filterQuery={where:{Model:this.state.modelId}}:prevState.modelName!=this.state.modelName&&this.state.modelName&&(filterQuery={where:{ModelName:this.state.modelName}}),filterQuery?$qry.getRecords("FormTemplate_studio",filterQuery,["uid","Name","Scope","default","schema","rawschema","uischema","rawuischema","listschema","rawlistschema","Model","View","ModelName","GeneratedUI","Theme"]).then(function(){var _ref18=_asyncToGenerator(_regeneratorRuntime.mark(function _callee11(views){var allViews,dataRecord,currentView,selectedFieldMap,recordIndx,jsonRawData,modelFields,modelFieldIndx,modelField,record,_jsonRawData,jsonRawDataFields,field2JSONRawDataFields,dbType2JSONFormType,modelDefinition,fieldsMap,fieldNames,_modelName,modelScope,fieldIndx,fieldName,fieldType,fieldSubType,fieldObject,convertedData,uiRawSchema,_uiSchema,formTemplateRecord;return _regeneratorRuntime.wrap(function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:if(allViews=[],dataRecord={},_this4.viewData={},currentView=null,selectedFieldMap={},!(views&&views.length>0)){_context12.next=10;break}for(recordIndx in views){if(dataRecord=views[recordIndx],allViews.push(dataRecord.View),_this4.viewData[dataRecord.View]=dataRecord,jsonRawData=dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},modelFields=jsonRawData.dataType)for(modelFieldIndx in modelFields)modelField=modelFields[modelFieldIndx],selectedFieldMap[modelField.code]=modelField;0==recordIndx&&(currentView={formTemplateId:dataRecord.uid,formName:dataRecord.Name,formScope:dataRecord.Scope,defaultValue:dataRecord.default?JSON.parse(dataRecord.default):{},jsonRawData:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},uiRawSchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},listRawSchema:dataRecord.rawlistschema?JSON.parse(dataRecord.rawlistschema):{},jsonData:dataRecord.schema?JSON.parse(dataRecord.schema):{},uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},listSchema:dataRecord.listschema?JSON.parse(dataRecord.listschema):{},modelId:dataRecord.Model?dataRecord.Model:_this4.state.formModel,formModel:dataRecord.ModelName?dataRecord.ModelName:_this4.state.formModel,formView:dataRecord.View?dataRecord.View:_this4.state.formView,generatedUI:1==dataRecord.GeneratedUI,isCreateModel:!1,isCreateView:!1,theme:dataRecord.Theme||""})}currentView?_this4.setState(_extends({},currentView,{views:allViews,selectedFieldMap:selectedFieldMap})):_this4.setState({views:allViews,isCreateView:!0,selectedFieldMap:selectedFieldMap}),_context12.next=34;break;case 10:return _context12.next=12,$qry.getRecords("MetaModel",{where:{uid:_this4.state.modelId}},["uid","Name","Definition","Scope"]);case 12:if(record=(record=_context12.sent)&&1==record.length?record[0]:null,jsonRawDataFields=(_jsonRawData={dataType:[]}).dataType,field2JSONRawDataFields={},dbType2JSONFormType={String:"string","String.mediumtext":"text",Text:"text",Number:"number",date:"date","date.timestamp":"date-time",Boolean:"boolean"},!record){_context12.next=34;break}for(fieldIndx in modelDefinition=JSON.parse(record.Definition),fieldsMap=modelDefinition.properties,fieldNames=Object.keys(fieldsMap),_modelName=record.Name,modelScope=record.Scope,fieldNames)fieldName=fieldNames[fieldIndx],fieldType=fieldsMap[fieldName].type,fieldSubType=fieldsMap[fieldName].dataType,fieldObject={code:fieldName,label:fieldName,dataType:dbType2JSONFormType[fieldSubType?fieldType+"."+fieldSubType:fieldType]},jsonRawDataFields.push(fieldObject),field2JSONRawDataFields[fieldName]=fieldObject;return(convertedData=convert2JSONSchema(_jsonRawData)).modelName=_modelName,uiRawSchema=generateDefaultLayout(convertedData),_uiSchema=convert2UISchema(uiRawSchema),_context12.next=31,$qry.createRecord("FormTemplate_studio",{Name:_modelName+"_"+_this4.state.formView,Scope:modelScope,schema:JSON.stringify(convertedData.schema),listschema:JSON.stringify(convertedData.schema),default:JSON.stringify({}),rawschema:JSON.stringify(_jsonRawData),rawlistschema:JSON.stringify(_jsonRawData),uischema:JSON.stringify(_uiSchema),rawuischema:JSON.stringify(uiRawSchema),Model:_this4.state.modelId,ModelName:_modelName,View:_this4.state.formView,GeneratedUI:!0,Theme:_this4.state.theme?_this4.state.theme:""},["uid"]);case 31:formTemplateRecord=_context12.sent,fetch("/reload_cache"),formTemplateRecord&&formTemplateRecord.uid&&_this4.setState({formTemplateId:formTemplateRecord.uid,formName:_modelName+"_Default",formScope:modelScope,defaultValue:{},jsonRawData:_jsonRawData,listRawData:_jsonRawData,uiRawSchema:uiRawSchema,jsonData:convertedData.schema,listData:convertedData.schema,uiSchema:_uiSchema,modelId:_this4.state.modelId,formModel:_modelName,formView:"Default",generatedUI:!0,isCreateModel:!1,selectedFieldMap:field2JSONRawDataFields,theme:dataRecord.Theme||""});case 34:case"end":return _context12.stop()}},_callee11,_this4)}));return function(_x16){return _ref18.apply(this,arguments)}}()):this.setState({formTemplateId:"",formName:"",jsonRawData:{},uiRawSchema:{},jsonData:{},uiSchema:{},formModel:"",formView:"",isCreateModel:!0,isCreateView:!0}));case 12:case"end":return _context13.stop()}},_callee12,this)}));return function(_x14,_x15){return _ref17.apply(this,arguments)}}()},{key:"render",value:function(){var _this5=this,styles={fontFamily:"sans-serif",padding:20,width:"100%"},ModelReference=SrsReference(),ThemeReference=SrsReference(),formTemplateEl=React.createElement(ModelReference,{style:{display:"flex"},title:"Model",tablename:"MetaModel",defaultValue:this.state.modelId,displayfield:"Name",secondarydisplayfield:"Scope",light:"true",filter:JSON.stringify({where:{Model:{neq:null}}}),searchfields:"Name",placeholder:"Search a model...",onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"";_this5.setState({modelId:value})}}),internalTables=React.createElement(Select,{labelText:"Views",light:"true",size:"small",name:"viewName",style:{placeSelf:"flex-end"},onChange:function(e){var value=e.target.value;_this5.setState({modelName:value})}},React.createElement(SelectItem,{value:"",text:"None"}),React.createElement(SelectItem,{value:"SrsteeUser",text:"Srstee User"}),React.createElement(SelectItem,{value:"SrsteeRole",text:"Srstee Role"}),React.createElement(SelectItem,{value:"SrsteeGroup",text:"Srstee Group"}),React.createElement(SelectItem,{value:"SrsteeUserRole",text:"Srstee User Role"}),React.createElement(SelectItem,{value:"SrsteeGroupRole",text:"Srstee Group Role"}),React.createElement(SelectItem,{value:"SrsteeUserGroup",text:"Srstee User Group"}),React.createElement(SelectItem,{value:"MetaModel",text:"Tables"}),React.createElement(SelectItem,{value:"MetaQuery",text:"Queries"}),React.createElement(SelectItem,{value:"MetaScope",text:"Application"}),React.createElement(SelectItem,{value:"MetaScopeDownload",text:"Application Version"}),React.createElement(SelectItem,{value:"MetaPalette",text:"Palette"}),React.createElement(SelectItem,{value:"MetaPaletteItem",text:"Palette Item"}),React.createElement(SelectItem,{value:"MetaReusableScript",text:"Reusable Script"}),React.createElement(SelectItem,{value:"MetaSlide",text:"Slide"}),React.createElement(SelectItem,{value:"MetaSlideProps",text:"Slide Properties"}),React.createElement(SelectItem,{value:"MetaSlideAction",text:"Slide Action"}),React.createElement(SelectItem,{value:"MetaWidgetAction",text:"Widget Action"}),React.createElement(SelectItem,{value:"MetaProperty",text:"Properties"}),React.createElement(SelectItem,{value:"MetaOperationHook",text:"Operation Hook"}),React.createElement(SelectItem,{value:"MetaRoute",text:"Page"}),React.createElement(SelectItem,{value:"MetaRouteRequires",text:"Page Dependencies"}),React.createElement(SelectItem,{value:"MetaRelationship",text:"Relationship"}),React.createElement(SelectItem,{value:"MetaRestMethod",text:"Rest Method"}),React.createElement(SelectItem,{value:"MetaLocalSync",text:"Import Export"}),React.createElement(SelectItem,{value:"MetaComponent",text:"Component"}),React.createElement(SelectItem,{value:"MetaComponentState",text:"Component State"}),React.createElement(SelectItem,{value:"MetaComponentProps",text:"Component Props"}),React.createElement(SelectItem,{value:"MetaComponentAction",text:"Component Action"}),React.createElement(SelectItem,{value:"MetaDataSource",text:"External Data Sources"}),React.createElement(SelectItem,{value:"MetaXModel",text:"External Models"}),React.createElement(SelectItem,{value:"SrsteeACL",text:"ACL"}),React.createElement(SelectItem,{value:"SrsteeTableACL",text:"Table ACL"}),React.createElement(SelectItem,{value:"SrsteeTableACLRole",text:"Table ACL Role"}),React.createElement(SelectItem,{value:"SrsteeRecordACL",text:"Record ACL"}),React.createElement(SelectItem,{value:"SrsteeRecordACLRole",text:"Record ACL Role"}),React.createElement(SelectItem,{value:"SrsteeFieldACL",text:"Field ACL"}),React.createElement(SelectItem,{value:"SrsteeFieldACLRole",text:"Field ACL Role"})),notificationBar=this.props.embedded+""!="true"&&this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{style_top:"40"}):null,ThreeWaySwitch=SrsThreeWaySwitch(),dynamicForm=React.createElement("dyna-form",{shadow:"true",formkey:this.state.formTemplateId,themeid:this.state.theme,dataschema:JSON.stringify(this.state.jsonData),uischema:JSON.stringify(this.state.uiSchema)}),viewNames=[];this.state.views&&this.state.views.map(function(viewName){viewNames.push(React.createElement(SelectItem,{value:viewName,text:viewName}))});var selectedFields=Object.keys(this.state.selectedFieldMap),sortedList=[];for(var fieldIndx in selectedFields)sortedList.push({text:selectedFields[fieldIndx],id:selectedFields[fieldIndx]});var modelNameProps={};this.state.modelId&&(modelNameProps.readOnly=!0),this.refs.dschema&&!this.state.isCustomModel&&this.state.modelName?setTimeout(function(){$(".array-item-add",_this5.refs.dschema).css("display","none"),$(".array-item-toolbox",_this5.refs.dschema).css("display","none")},1e3):($(".array-item-add",this.refs.dschema).css("display","unset"),$(".array-item-toolbox",this.refs.dschema).css("display","unset"));var TreeView=SrsTreeSortable();return React.createElement("div",{style:{height:"inherit",overflow:"hidden"}},React.createElement("style",null,'@import url("https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.6/lumen/bootstrap.min.css"); @import url("https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css"); @import url("/component/studio/JsonModelBuilder/Style.css");'),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"}),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"}),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.2.1/js/bootstrap.min.js"}),React.createElement("script",{type:"text/javascript",src:"https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.7.0/js/mdb.min.js"}),notificationBar,React.createElement(ThreeWaySwitch,{selected:this.state.mode,values:["Schema","Both","Preview"],onChange:function(val){_this5.setState({mode:val})}}),React.createElement("div",{className:"row",style:_extends({},styles,{border:"1px solid #f3eeee"})},React.createElement("div",{className:"col-sm-3"},this.state.isCustomModel?formTemplateEl:null,this.state.isCustomModel?null:internalTables),React.createElement("div",{className:"col-sm-3"},React.createElement(Toggle,{labelText:"Is Custom Model",toggled:this.state.isCustomModel,labelA:"OFF",labelB:"ON",onChange:function(e){var value=e.target.checked;_this5.setState({isCustomModel:value})}})),React.createElement("div",{className:"col-sm-2"},React.createElement(FormLabel,{style:{marginTop:20}},React.createElement(Tooltip,{triggerText:this.state.isCreateModel?"Model: Creating...":"Model: Editing..."},"Showing the current mode of the model building"))),React.createElement("div",{className:"col-sm-2"},React.createElement(Toggle,{labelText:"Create/Edit - View",toggled:!this.state.isCreateView,defaultToggled:"false",disabled:!this.state.formModel,labelA:"Create",labelB:"Edit",onChange:function(e){var value=e.target.checked;_this5.setState({isCreateView:!value})}})),React.createElement("div",{className:"col-sm-2"},React.createElement(Button,{size:"small",style:{margin:5,border:"none",color:"white",textAlign:"center",textDecoration:"none",display:"inline-block",fontSize:16,margin:"4px 2px",transitionDuration:"0.4s",cursor:"pointer",borderRadius:5},onClick:this.saveData},"Save"))),React.createElement("div",{className:"row",style:_extends({},styles)},React.createElement("div",{className:"col-sm-2"},React.createElement(TextInput,_extends({},modelNameProps,{labelText:"Name",light:"true",value:this.state.formName,placeholder:"Enter Model Name...",style:{width:"100%"},onChange:function(e){_this5.setState({formName:e.target.value})}}))),React.createElement("div",{className:"col-sm-2"},React.createElement(TextInput,{light:"true",labelText:"Scope",value:this.state.formScope,placeholder:"Enter Model Scope...",style:{width:"100%"},onChange:function(e){_this5.setState({formScope:e.target.value})}})),React.createElement("div",{className:"col-sm-1"},this.state.formModel&&!this.state.isCreateView?React.createElement(Select,{labelText:"Views",light:"true",size:"small",name:"viewName",style:{placeSelf:"flex-end"},onChange:function(e){var value=e.target.value,selectedFieldMap={};if(_this5.viewData[value]){var dataRecord=_this5.viewData[value],modelFields=(dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{}).dataType;if(modelFields)for(var modelFieldIndx in modelFields){var modelField=modelFields[modelFieldIndx];selectedFieldMap[modelField.code]=modelField}var currentView={formTemplateId:dataRecord.uid,formName:dataRecord.Name,formScope:dataRecord.Scope,defaultValue:dataRecord.default?JSON.parse(dataRecord.default):{},jsonRawData:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},uiRawSchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},jsonData:dataRecord.schema?JSON.parse(dataRecord.schema):{},uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},modelId:dataRecord.Model?dataRecord.Model:_this5.state.formModel,formModel:dataRecord.ModelName?dataRecord.ModelName:_this5.state.formModel,formView:dataRecord.View?dataRecord.View:_this5.state.formView,generatedUI:1==dataRecord.GeneratedUI,isCreateModel:!1,isCreateView:!1};_this5.setState(_extends({},currentView,{selectedFieldMap:selectedFieldMap}))}}},viewNames):React.createElement(TextInput,{labelText:"View",value:this.state.formView,placeholder:"Enter View Name...",light:"true",defaultValue:"Default",style:{width:"100%"},onChange:function(e){var dataRecord=_this5.viewData&&_this5.viewData[e.target.value]?_this5.viewData[e.target.value]:{};_this5.setState(_extends({formView:e.target.value,formTemplateId:"-1"},dataRecord))}})),React.createElement("div",{className:"col-sm-2"},React.createElement(ThemeReference,{style:{display:"flex"},title:"Theme",tablename:"FormTheme_studio",defaultValue:this.state.theme,light:"true",displayfield:"Name",filter:JSON.stringify({}),searchfields:"Name",placeholder:"Search a theme...",onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"";_this5.setState({theme:value})}}))),React.createElement("div",{className:"row",style:_extends({},styles,{borderTop:"1px solid #c4ccc4",backgroundColor:"#f3f3f3"})},"Both"==this.state.mode?React.createElement(React.Fragment,null,React.createElement("div",{className:"col-sm-6",style:{height:"60vh",overflow:"auto"}},React.createElement(Tabs,null,React.createElement(Tab,{label:"Model",value:"jsonschema"},null,React.createElement("div",{ref:"dschema",className:"dschema",style:{height:"inherit"}},React.createElement(Form,{validate:!1,children:!0,schema:dataSchema,formData:this.state.jsonRawData,onChange:this.handleJSONSchemaChange,onSubmit:this.handleJSONSchema}))),React.createElement(Tab,{label:"Form Editor",value:"uischema"},React.createElement(Form,{validate:!1,children:!0,schema:uiSchema,formData:this.state.uiRawSchema,onChange:this.handleUISchemaChange,onSubmit:this.handleUISchema})),React.createElement(Tab,{label:"Form Organiser",value:"uiarrange"},React.createElement(TreeView,{data:this.state.uiRawSchema,onChange:function(data){return _this5.handleUISchemaChangeDebounce({formData:data})}})),React.createElement(Tab,{label:"List",value:"listschema"},React.createElement(Form,{validate:!1,children:!0,schema:dataSchema,formData:this.state.listRawSchema,onChange:this.handleListSchemaChange,onSubmit:this.handleListSchema})))),React.createElement("div",{className:"col-sm-6",style:{border:"1px solid #216aa4",padding:20,minHeight:"60vh",maxHeight:"60vh",overflow:"auto",backgroundColor:"white"}},dynamicForm)):"Schema"==this.state.mode?React.createElement("div",{className:"col-sm-12"},React.createElement(Tabs,null,React.createElement(Tab,{label:"Model",value:"jsonschema"},React.createElement(Form,{validate:!1,children:!0,schema:dataSchema,formData:this.state.jsonRawData,onChange:this.handleJSONSchemaChange,onSubmit:this.handleJSONSchema})),React.createElement(Tab,{label:"Layout",value:"uischema"},React.createElement(Form,{validate:!1,children:!0,schema:uiSchema,formData:this.state.uiRawSchema,onChange:this.handleUISchemaChange,onSubmit:this.handleUISchema})),React.createElement(Tab,{label:"Form Organiser",value:"uiarrange"},React.createElement(TreeView,{data:this.state.uiRawSchema,onChange:function(data){return _this5.handleUISchemaChangeDebounce({formData:data})}})),React.createElement(Tab,{label:"List",value:"listschema"},React.createElement(Form,{validate:!1,children:!0,schema:dataSchema,formData:this.state.listRawSchema,onChange:this.handleListSchemaChange,onSubmit:this.handleListSchema})))):React.createElement("div",{className:"col-sm-12",style:{border:"1px solid #216aa4",padding:20,minHeight:"60vh",maxHeight:"60vh",overflow:"auto",backgroundColor:"white"}},dynamicForm)))}}]),_JsonModelBuilder_}(React.Component),_export("JsonModelBuilder",JsonModelBuilder=function(props){return _JsonModelBuilder_}),_export("JsonModelBuilder",JsonModelBuilder)}}}),System.register("component/studio/LayoutCreator.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash","lodash.clonedeep"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,TextInput,Checkbox,cloneDeep,_LayoutCreator_,LayoutCreator,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput,Checkbox=_carbonComponentsReact.Checkbox},function(_lodash){_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_LayoutCreator_=function(_React$Component){function _LayoutCreator_(props){_classCallCheck(this,_LayoutCreator_);var _this=_possibleConstructorReturn(this,(_LayoutCreator_.__proto__||Object.getPrototypeOf(_LayoutCreator_)).call(this,props));return _this.state={Name:"",Code:"",Needs2Clone:!0},_this.saveLayout=_this.saveLayout.bind(_this),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%",width:"100%",textAlign:"left"},_this.modalButtonGroup={marginLeft:"80%",position:"absolute",clear:"both",bottom:"10%"},_this}return _inherits(_LayoutCreator_,_React$Component),_createClass(_LayoutCreator_,[{key:"saveLayout",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var currentLayoutCode,result,activePage,_activePage;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(currentLayoutCode=this.props.activePage.currentLayout||"default",!this.state.Needs2Clone){_context.next=9;break}return _context.next=4,$script.runAtServer("studio.createLayout",{pageId:this.props.active_page_id,Name:this.state.Name,NeedsClone:this.state.Needs2Clone,SourceLayout:currentLayoutCode});case 4:result=_context.sent,activePage=cloneDeep(this.props.activePage),result.slots&&result.widgets?(activePage.layouts=activePage.layouts||{},activePage.layouts.slots=activePage.layouts.slots||{},activePage.layouts.slots[this.state.Name]=result.slots,activePage.layouts.widgets=activePage.layouts.widgets||{},activePage.layouts.widgets[this.state.Name]=result.widgets,activePage.currentLayout=this.state.Name,this.props.updateStore({updates:{activePage:activePage}}),this.props.addFlashMessage({title:"Success - ",subtitle:"Layout saved successfully."})):this.props.addErrorMessage({title:"Error - ",subtitle:"Layout did not save."}),_context.next=13;break;case 9:(_activePage=cloneDeep(this.props.activePage)).currentLayout=this.state.Name,this.props.updateStore({updates:{activePage:_activePage}}),this.props.addFlashMessage({title:"Success - ",subtitle:"Layout saved successfully."});case 13:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this;return React.createElement("div",{ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/codemirror.css");'),React.createElement("h4",{style:this.headerStyle},"Create Layout"),React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Layout Name...",onChange:function(e){return _this2.setState({Name:e.target.value})},labelText:"Layout Name",required:"required",value:this.state.Name}),React.createElement(Checkbox,{labelText:"Clone From current layout?",id:"sr-check-bx",onChange:function(value){_this2.setState({Needs2Clone:value})},checked:this.state.Needs2Clone})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this2.saveLayout()}},"Save")))}}]),_LayoutCreator_}(React.Component),_export("LayoutCreator",LayoutCreator=function(props){return _LayoutCreator_}),_export("LayoutCreator",LayoutCreator),_export("default",LayoutCreator),_export("states",states=[{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/LayoutCreator/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash","lodash.clonedeep"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,TextInput,Checkbox,cloneDeep,_LayoutCreator_,LayoutCreator;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput,Checkbox=_carbonComponentsReact.Checkbox},function(_lodash){_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_LayoutCreator_=function(_React$Component){function _LayoutCreator_(props){_classCallCheck(this,_LayoutCreator_);var _this=_possibleConstructorReturn(this,(_LayoutCreator_.__proto__||Object.getPrototypeOf(_LayoutCreator_)).call(this,props));return _this.state={Name:"",Code:"",Needs2Clone:!0},_this.saveLayout=_this.saveLayout.bind(_this),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%",width:"100%",textAlign:"left"},_this.modalButtonGroup={marginLeft:"80%",position:"absolute",clear:"both",bottom:"10%"},_this}return _inherits(_LayoutCreator_,_React$Component),_createClass(_LayoutCreator_,[{key:"saveLayout",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var currentLayoutCode,result,activePage,_activePage;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(currentLayoutCode=this.props.activePage.currentLayout||"default",!this.state.Needs2Clone){_context.next=9;break}return _context.next=4,$script.runAtServer("studio.createLayout",{pageId:this.props.active_page_id,Name:this.state.Name,NeedsClone:this.state.Needs2Clone,SourceLayout:currentLayoutCode});case 4:result=_context.sent,activePage=cloneDeep(this.props.activePage),result.slots&&result.widgets?(activePage.layouts=activePage.layouts||{},activePage.layouts.slots=activePage.layouts.slots||{},activePage.layouts.slots[this.state.Name]=result.slots,activePage.layouts.widgets=activePage.layouts.widgets||{},activePage.layouts.widgets[this.state.Name]=result.widgets,activePage.currentLayout=this.state.Name,this.props.updateStore({updates:{activePage:activePage}}),this.props.addFlashMessage({title:"Success - ",subtitle:"Layout saved successfully."})):this.props.addErrorMessage({title:"Error - ",subtitle:"Layout did not save."}),_context.next=13;break;case 9:(_activePage=cloneDeep(this.props.activePage)).currentLayout=this.state.Name,this.props.updateStore({updates:{activePage:_activePage}}),this.props.addFlashMessage({title:"Success - ",subtitle:"Layout saved successfully."});case 13:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this;return React.createElement("div",{ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/codemirror.css");'),React.createElement("h4",{style:this.headerStyle},"Create Layout"),React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Layout Name...",onChange:function(e){return _this2.setState({Name:e.target.value})},labelText:"Layout Name",required:"required",value:this.state.Name}),React.createElement(Checkbox,{labelText:"Clone From current layout?",id:"sr-check-bx",onChange:function(value){_this2.setState({Needs2Clone:value})},checked:this.state.Needs2Clone})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this2.saveLayout()}},"Save")))}}]),_LayoutCreator_}(React.Component),_export("LayoutCreator",LayoutCreator=function(props){return _LayoutCreator_}),_export("LayoutCreator",LayoutCreator)}}}),System.register("component/studio/NewPageProp.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/persist/MMFAPI.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Button,TextInput,_NewPageProp_,NewPageProp,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){_reactMonacoEditor.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewPageProp_=function(_React$Component){function _NewPageProp_(props){_classCallCheck(this,_NewPageProp_);var _this=_possibleConstructorReturn(this,(_NewPageProp_.__proto__||Object.getPrototypeOf(_NewPageProp_)).call(this,props));return _this.state={ComponentId:_this.props.componentId,ComponentName:"Unnamed"==_this.props.componentName?"":_this.props.componentName,Components:{},ComponentNames:[],Name:_this.props.rowInfo&&_this.props.rowInfo.Name,Value:_this.props.rowInfo&&_this.props.rowInfo.Value,file_id:_this.props.rowInfo&&_this.props.rowInfo.uid,componentData:_this.props.rowInfo?_this.props.rowInfo:null},_this.loadComponents=_this.loadComponents.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.componentUpdated=_this.componentUpdated.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this}return _inherits(_NewPageProp_,_React$Component),_createClass(_NewPageProp_,[{key:"componentDidMount",value:function(){-1==this.props.componentId&&this.loadComponents()}},{key:"codeChanged",value:function(newValue,e){var editor=this.state.editor;editor.code=newValue,this.setState({editor:editor})}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponents","{}",function(results){var components={},componentNames=[];results&&(results.forEach(function(componentObj){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;components[componentLabel]=componentId;var component={};component.id=componentId,component.text=componentObj.Name,componentNames.push(component)}),components&&self.setState({Components:components,ComponentNames:componentNames}))})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",Value:"",ComponentId:"",ComponentName:""})}},{key:"saveAsNewData",value:function(){console.log(this.state);var data={Name:this.state.Name,Value:this.state.DefaultValue,PropsComponent:this.state.ComponentId},self=this;fetch("/api/t1/MetaComponentProps",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"saveData",value:function(){var endPoint="/api/t1/MetaComponentProps",method="POST";this.state.file_id&&(endPoint=endPoint+"/"+this.state.file_id,method="PUT");var data={Name:this.state.Name,Value:this.state.DefaultValue,PropsComponent:this.state.ComponentId},self=this;fetch(endPoint,{method:method,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"componentUpdated",value:function(componentValue){this.setState({ComponentName:componentValue,ComponentId:this.state.Components[componentValue]})}},{key:"render",value:function(){var _this2=this,file_id=this.state.file_id||this.state.componentData&&this.state.componentData.uid,uidField=file_id?React.createElement("div",{className:"sr-field-id"},React.createElement(TextInput,{labelText:"uid",required:"required",value:file_id,disabled:"true"})):uidField,componentName=null;return componentName="object"==typeof this.state.ComponentName?this.state.ComponentName.text:this.state.ComponentName,React.createElement("div",null,React.createElement("style",null,"@import url('component/mmf/NewAction/Style.css');"),React.createElement("h4",{className:"sr-action-header"},"Page Props - Form"),React.createElement("div",{className:"sr-action-alias"},React.createElement(TextInput,{labelText:"Component",value:componentName,disabled:!0}),React.createElement(TextInput,{placeholder:"Enter name...",onChange:function(e){return _this2.onChange(e,"Name")},labelText:"Name",required:"required",value:this.state.Name}),React.createElement(TextInput,{placeholder:"Enter value...",onChange:function(e){return _this2.onChange(e,"Value")},labelText:"Value",required:"required",value:this.state.DefaultValue})),React.createElement("div",{className:"sr-action-btns"},React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveAsNewData()}},"Save As"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.resetData()}},"Reset")))}}]),_NewPageProp_}(React.Component),_export("NewPageProp",NewPageProp=function(props){return _NewPageProp_}),_export("NewPageProp",NewPageProp),_export("default",NewPageProp),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/NewPageProp/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/persist/MMFAPI.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Button,TextInput,_NewPageProp_,NewPageProp;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){_reactMonacoEditor.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewPageProp_=function(_React$Component){function _NewPageProp_(props){_classCallCheck(this,_NewPageProp_);var _this=_possibleConstructorReturn(this,(_NewPageProp_.__proto__||Object.getPrototypeOf(_NewPageProp_)).call(this,props));return _this.state={ComponentId:_this.props.componentId,ComponentName:"Unnamed"==_this.props.componentName?"":_this.props.componentName,Components:{},ComponentNames:[],Name:_this.props.rowInfo&&_this.props.rowInfo.Name,Value:_this.props.rowInfo&&_this.props.rowInfo.Value,file_id:_this.props.rowInfo&&_this.props.rowInfo.uid,componentData:_this.props.rowInfo?_this.props.rowInfo:null},_this.loadComponents=_this.loadComponents.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.componentUpdated=_this.componentUpdated.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this}return _inherits(_NewPageProp_,_React$Component),_createClass(_NewPageProp_,[{key:"componentDidMount",value:function(){-1==this.props.componentId&&this.loadComponents()}},{key:"codeChanged",value:function(newValue,e){var editor=this.state.editor;editor.code=newValue,this.setState({editor:editor})}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponents","{}",function(results){var components={},componentNames=[];results&&(results.forEach(function(componentObj){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;components[componentLabel]=componentId;var component={};component.id=componentId,component.text=componentObj.Name,componentNames.push(component)}),components&&self.setState({Components:components,ComponentNames:componentNames}))})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",Value:"",ComponentId:"",ComponentName:""})}},{key:"saveAsNewData",value:function(){console.log(this.state);var data={Name:this.state.Name,Value:this.state.DefaultValue,PropsComponent:this.state.ComponentId},self=this;fetch("/api/t1/MetaComponentProps",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"saveData",value:function(){var endPoint="/api/t1/MetaComponentProps",method="POST";this.state.file_id&&(endPoint=endPoint+"/"+this.state.file_id,method="PUT");var data={Name:this.state.Name,Value:this.state.DefaultValue,PropsComponent:this.state.ComponentId},self=this;fetch(endPoint,{method:method,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"componentUpdated",value:function(componentValue){this.setState({ComponentName:componentValue,ComponentId:this.state.Components[componentValue]})}},{key:"render",value:function(){var _this2=this,file_id=this.state.file_id||this.state.componentData&&this.state.componentData.uid,uidField=file_id?React.createElement("div",{className:"sr-field-id"},React.createElement(TextInput,{labelText:"uid",required:"required",value:file_id,disabled:"true"})):uidField,componentName=null;return componentName="object"==typeof this.state.ComponentName?this.state.ComponentName.text:this.state.ComponentName,React.createElement("div",null,React.createElement("style",null,"@import url('component/mmf/NewAction/Style.css');"),React.createElement("h4",{className:"sr-action-header"},"Page Props - Form"),React.createElement("div",{className:"sr-action-alias"},React.createElement(TextInput,{labelText:"Component",value:componentName,disabled:!0}),React.createElement(TextInput,{placeholder:"Enter name...",onChange:function(e){return _this2.onChange(e,"Name")},labelText:"Name",required:"required",value:this.state.Name}),React.createElement(TextInput,{placeholder:"Enter value...",onChange:function(e){return _this2.onChange(e,"Value")},labelText:"Value",required:"required",value:this.state.DefaultValue})),React.createElement("div",{className:"sr-action-btns"},React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveAsNewData()}},"Save As"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.resetData()}},"Reset")))}}]),_NewPageProp_}(React.Component),_export("NewPageProp",NewPageProp=function(props){return _NewPageProp_}),_export("NewPageProp",NewPageProp)}}}),System.register("component/studio/OverlayLayout.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_OverlayLayout_,OverlayLayout,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashClonedeep){_lodashClonedeep.default}],execute:function(){_OverlayLayout_=function(_React$Component){function _OverlayLayout_(props){_classCallCheck(this,_OverlayLayout_);var _this=_possibleConstructorReturn(this,(_OverlayLayout_.__proto__||Object.getPrototypeOf(_OverlayLayout_)).call(this,props));return _this.state={sideBarWidth:"20%",navBarWidth:"2%"},_this}return _inherits(_OverlayLayout_,_React$Component),_createClass(_OverlayLayout_,[{key:"render",value:function(){var _this2=this,navPage=this.props.widgetProps?this.props.widgetProps.NavPage:"",contentPage=this.props.widgetProps?this.props.widgetProps.ContentPage:"",sideBarPage=this.props.widgetProps?this.props.widgetProps.SideBarPage:"";return React.createElement("div",{style:{width:"100%",height:"inherit",display:"inline-flex"}},React.createElement("page-designer-preview",{uid:"1",onClick:function(e){_this2.setState({navBarWidth:"2%"==_this2.state.navBarWidth?"20%":"2%"})},style:{zIndex:2,position:"absolute",left:0,width:this.state.navBarWidth},widgetid:this.props.widgetid,pageid:this.props.pageid,previewpageid:navPage,pagename:"NavPage",responsive:"true"}),React.createElement("page-designer-preview",{uid:"2",style:{position:"absolute",left:20,width:"100vw"},widgetid:this.props.widgetid,pageid:this.props.pageid,previewpageid:contentPage,pagename:"ContentPage",responsive:"true"}),React.createElement("page-designer-preview",{uid:"3",onClick:function(e){_this2.setState({sideBarWidth:"20%"==_this2.state.sideBarWidth?"10%":"20%"})},style:{zIndex:3,position:"absolute",right:0,width:this.state.sideBarWidth},widgetid:this.props.widgetid,pageid:this.props.pageid,previewpageid:sideBarPage,pagename:"SideBarPage",responsive:"true"}))}}]),_OverlayLayout_}(React.Component),_export("OverlayLayout",OverlayLayout=function(props){return _OverlayLayout_}),_export("OverlayLayout",OverlayLayout),_export("default",OverlayLayout),_export("states",states=[{KeyName:"widgets2Resize",AccessPath:"widgets2Resize",DefaultValue:'{"widgets2Resize": {}}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/OverlayLayout/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_OverlayLayout_,OverlayLayout;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashClonedeep){_lodashClonedeep.default}],execute:function(){_OverlayLayout_=function(_React$Component){function _OverlayLayout_(props){_classCallCheck(this,_OverlayLayout_);var _this=_possibleConstructorReturn(this,(_OverlayLayout_.__proto__||Object.getPrototypeOf(_OverlayLayout_)).call(this,props));return _this.state={sideBarWidth:"20%",navBarWidth:"2%"},_this}return _inherits(_OverlayLayout_,_React$Component),_createClass(_OverlayLayout_,[{key:"render",value:function(){var _this2=this,navPage=this.props.widgetProps?this.props.widgetProps.NavPage:"",contentPage=this.props.widgetProps?this.props.widgetProps.ContentPage:"",sideBarPage=this.props.widgetProps?this.props.widgetProps.SideBarPage:"";return React.createElement("div",{style:{width:"100%",height:"inherit",display:"inline-flex"}},React.createElement("page-designer-preview",{uid:"1",onClick:function(e){_this2.setState({navBarWidth:"2%"==_this2.state.navBarWidth?"20%":"2%"})},style:{zIndex:2,position:"absolute",left:0,width:this.state.navBarWidth},widgetid:this.props.widgetid,pageid:this.props.pageid,previewpageid:navPage,pagename:"NavPage",responsive:"true"}),React.createElement("page-designer-preview",{uid:"2",style:{position:"absolute",left:20,width:"100vw"},widgetid:this.props.widgetid,pageid:this.props.pageid,previewpageid:contentPage,pagename:"ContentPage",responsive:"true"}),React.createElement("page-designer-preview",{uid:"3",onClick:function(e){_this2.setState({sideBarWidth:"20%"==_this2.state.sideBarWidth?"10%":"20%"})},style:{zIndex:3,position:"absolute",right:0,width:this.state.sideBarWidth},widgetid:this.props.widgetid,pageid:this.props.pageid,previewpageid:sideBarPage,pagename:"SideBarPage",responsive:"true"}))}}]),_OverlayLayout_}(React.Component),_export("OverlayLayout",OverlayLayout=function(props){return _OverlayLayout_}),_export("OverlayLayout",OverlayLayout)}}}),System.register("component/studio/PageDesigner.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","jquery","jquery-ui/ui/data","jquery-ui/ui/disable-selection","jquery-ui/ui/focusable","jquery-ui/ui/form","jquery-ui/ui/ie","jquery-ui/ui/keycode","jquery-ui/ui/labels","jquery-ui/ui/jquery-1-7","jquery-ui/ui/plugin","jquery-ui/ui/safe-active-element","jquery-ui/ui/safe-blur","jquery-ui/ui/scroll-parent","jquery-ui/ui/tabbable","jquery-ui/ui/unique-id","jquery-ui/ui/version","jquery-ui/ui/widget","jquery-ui/ui/widgets/mouse","jquery-ui/ui/widgets/draggable","jquery-ui/ui/widgets/droppable","jquery-ui/ui/widgets/resizable","lodash","lodash.clonedeep","lodash.debounce","lodash.get","@carbon/icons-react/lib/menu/16","@carbon/icons-react/lib/close/20","@carbon/icons-react/lib/close/32","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/maximize/16","@carbon/icons-react/lib/minimize/16","@carbon/icons-react/lib/caret--left/32","@carbon/icons-react/lib/caret--right/32","@carbon/icons-react/lib/caret--left/20","@carbon/icons-react/lib/terminal/32","@carbon/icons-react/lib/data--base/32","@carbon/icons-react/lib/run/32","@carbon/icons-react/lib/account/32","thirdpartylib/gridstack/corelib.js","client/script/studio/PageDesignerUtil.js","component/studio/PageDesignerWidget/Definition.js","client/script/mmf/GraphQLDataUtil.js","carbon-components-react","carbon-components-react/lib/components/UIShell"],function(_export,_context14){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,$,_,cloneDeep,debounce,Close20,Close32,Minimize16,ChevronLeft,ChevronRight,ArrowLeft,Editor32,Database32,ScriptRunner32,Account32,Preview32,gridStackFn,gridStackUIFn,PageDesignerUtil,PageDesignerWidget,GraphQLDataUtil,Tab,Tabs,Tile,Accordion,AccordionItem,HeaderMenu,HeaderMenuItem,_PageDesigner_,PageDesigner,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_jquery){$=_jquery.default},function(_jqueryUiUiData){},function(_jqueryUiUiDisableSelection){},function(_jqueryUiUiFocusable){},function(_jqueryUiUiForm){},function(_jqueryUiUiIe){},function(_jqueryUiUiKeycode){},function(_jqueryUiUiLabels){},function(_jqueryUiUiJquery){},function(_jqueryUiUiPlugin){},function(_jqueryUiUiSafeActiveElement){},function(_jqueryUiUiSafeBlur){},function(_jqueryUiUiScrollParent){},function(_jqueryUiUiTabbable){},function(_jqueryUiUiUniqueId){},function(_jqueryUiUiVersion){},function(_jqueryUiUiWidget){},function(_jqueryUiUiWidgetsMouse){},function(_jqueryUiUiWidgetsDraggable){},function(_jqueryUiUiWidgetsDroppable){},function(_jqueryUiUiWidgetsResizable){},function(_lodash){_=_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_lodashGet){_lodashGet.default},function(_carbonIconsReactLibMenu){_carbonIconsReactLibMenu.default},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibClose2){Close32=_carbonIconsReactLibClose2.default},function(_carbonIconsReactLibAddAlt){_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibMaximize){_carbonIconsReactLibMaximize.default},function(_carbonIconsReactLibMinimize){Minimize16=_carbonIconsReactLibMinimize.default},function(_carbonIconsReactLibCaretLeft){ChevronLeft=_carbonIconsReactLibCaretLeft.default},function(_carbonIconsReactLibCaretRight){ChevronRight=_carbonIconsReactLibCaretRight.default,Preview32=_carbonIconsReactLibCaretRight.default},function(_carbonIconsReactLibCaretLeft2){ArrowLeft=_carbonIconsReactLibCaretLeft2.default},function(_carbonIconsReactLibTerminal){Editor32=_carbonIconsReactLibTerminal.default},function(_carbonIconsReactLibDataBase){Database32=_carbonIconsReactLibDataBase.default},function(_carbonIconsReactLibRun){ScriptRunner32=_carbonIconsReactLibRun.default},function(_carbonIconsReactLibAccount){Account32=_carbonIconsReactLibAccount.default},function(_thirdpartylibGridstackCorelibJs){gridStackFn=_thirdpartylibGridstackCorelibJs.gridStackFn,gridStackUIFn=_thirdpartylibGridstackCorelibJs.gridStackUIFn},function(_clientScriptStudioPageDesignerUtilJs){PageDesignerUtil=_clientScriptStudioPageDesignerUtilJs.PageDesignerUtil},function(_componentStudioPageDesignerWidgetDefinitionJs){PageDesignerWidget=_componentStudioPageDesignerWidgetDefinitionJs.PageDesignerWidget},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_carbonComponentsReact){_carbonComponentsReact.Button,_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Tab=_carbonComponentsReact.Tab,Tabs=_carbonComponentsReact.Tabs,_carbonComponentsReact.OverflowMenu,_carbonComponentsReact.OverflowMenuItem,Tile=_carbonComponentsReact.Tile,Accordion=_carbonComponentsReact.Accordion,AccordionItem=_carbonComponentsReact.AccordionItem},function(_carbonComponentsReactLibComponentsUIShell){HeaderMenu=_carbonComponentsReactLibComponentsUIShell.HeaderMenu,HeaderMenuItem=_carbonComponentsReactLibComponentsUIShell.HeaderMenuItem}],execute:function(){_PageDesigner_=function(_React$Component){function _PageDesigner_(props){_classCallCheck(this,_PageDesigner_);var _this=_possibleConstructorReturn(this,(_PageDesigner_.__proto__||Object.getPrototypeOf(_PageDesigner_)).call(this,props));return _this.designerUtil=new PageDesignerUtil,_this.device={smartphone:{width:"360",height:"510"},tablet:{width:"700",height:"900"},laptop:{width:"1366",height:"750"}},_this.state={widgetChanged:0,activeAccordion:0,paletteLoaded:_this.props.palettes&&Object.keys(_this.props.palettes).length>0,isSideBarOpen:!0,accordionLevel:"page",active_widget_id:"",showCreateLayout:!1,reload:!1,inlinePreviewKey:"inlinePreview"+Date.now(),bundlesLoaded:!1},_this.initializing=!1,_this.getGridData=_this.getGridData.bind(_this),_this.refreshView=_this.refreshView.bind(_this),_this.updateEmulator=_this.updateEmulator.bind(_this),_this.isSlotUpdated=_this.isSlotUpdated.bind(_this),_this.updateDevice=_this.updateDevice.bind(_this),_this.saveSlides=_this.saveSlides.bind(_this),_this.autoPopulate=_this.autoPopulate.bind(_this),_this.saveWidget=_this.saveWidget.bind(_this),_this.saveWidgetRenderType=_this.saveWidgetRenderType.bind(_this),_this.initializeLayout=_this.initializeLayout.bind(_this),_this.initializeEvents=_this.initializeEvents.bind(_this),_this.handleNewFile=_this.handleNewFile.bind(_this),_this.makePageActive=_this.makePageActive.bind(_this),_this.removePage=_this.removePage.bind(_this),_this.clonePage=_this.clonePage.bind(_this),_this.createLayout=_this.createLayout.bind(_this),_this.inlinePreview=_this.inlinePreview.bind(_this),_this.deleteLayout=_this.deleteLayout.bind(_this),_this.deletePage=_this.deletePage.bind(_this),_this.hostEl=_this.rootEl=void 0,_this.toggleMode=_this.toggleMode.bind(_this),_this.activePage=Object.assign({},_this.props.activePage),_this.resizeSideBarGrid=_this.resizeSideBarGrid.bind(_this),_this.isSideBarResizable=!1,_this.resizeSideBarGridDebounceFn=debounce(function(){_this.resizeSideBarGrid()}),_this.saveWidgetDebounced=debounce(function(){_this.saveWidget(_this.props.active_widget_id,!0)},3e3,{trailing:!0,leading:!0}),_this.saveWidgetRenderTypeDebounce=debounce(function(){_this.saveWidgetRenderType(_this.props.active_widget_id,!0)},3e3,{trailing:!0,leading:!1}),_this.addFlashMessageDebounce=debounce(function(content){_this.props.addFlashMessage(content)},3e3,{trailing:!0,leading:!1}),_this.loadNecessaryBundles=_this.loadNecessaryBundles.bind(_this),_this.pageSaveDebounced=debounce(function(){_this.props.updateStore({updates:{activePage:_this.activePage}})},20,{trailing:!0,leading:!0}),_this.palettes&&0!=Object.keys(_this.palettes).length||$script.runscript("mmf.getPalettes",{}).then(function(palettesData){_this.palettes=palettesData,_this.setState({paletteLoaded:!0})}),$ele.registerElement("NewWidgetAction","mmf","React"),$ele.registerElement("LayoutCreator","studio","React"),$ele.registerElement("InlinePreview","studio","React"),$ele.registerElement("CodeEditor","studio","React"),$ele.registerElement("GraphiqlView","studio","React"),$ele.registerElement("ScriptRunner","studio","React"),window.addEventListener("resize",self.resizeSideBarGridDebounceFn),$script.runAtServer("mmf.getSchemaData",{}).then(function(schemaData){return _this.props.updateStore({updates:{schema:schemaData}})}),_this.props.updateStore({updates:{is_design_time:!0}}),_this}return _inherits(_PageDesigner_,_React$Component),_createClass(_PageDesigner_,[{key:"loadNecessaryBundles",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var bundleFilter,bundleMaps,bundleMapIndx,bundleMap;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return[],bundleFilter={where:{Application:this.props.activePage.scope}},_context.next=4,$qry.getRecords("MetaBundleMap",bundleFilter,["uid","Type","Name","Resource"]);case 4:if(!((bundleMaps=_context.sent)&&bundleMaps.length>0)){_context.next=28;break}_context.t0=_regeneratorRuntime.keys(bundleMaps);case 7:if((_context.t1=_context.t0()).done){_context.next=28;break}bundleMapIndx=_context.t1.value,bundleMap=bundleMaps[bundleMapIndx],void 0,_context.t2=bundleMap.Type,_context.next="internal"===_context.t2?14:"external"===_context.t2?17:26;break;case 14:return _context.next=16,System.import("/load/bundle/"+bundleMap.Name+".js");case 16:return _context.abrupt("break",26);case 17:return _context.prev=17,_context.next=20,System.import(bundleMap.Resource);case 20:_context.next=25;break;case 22:_context.prev=22,_context.t3=_context.catch(17),console.error("Unable to import bundle "+bundleMap.Name);case 25:return _context.abrupt("break",26);case 26:_context.next=7;break;case 28:this.setState({bundlesLoaded:!0});case 29:case"end":return _context.stop()}},_callee,this,[[17,22]])}));return function(){return _ref.apply(this,arguments)}}()},{key:"refreshView",value:function(){var _this2=this,self=this;this.rootEl=this.refs.gridarea,$(".gridContent",this.props.shadow)&&$(".gridContent",this.props.shadow).scroll(function(){return _this2.props.updateStore({updates:{scrollfired:!_this2.props.scrollfired}})}),$(".gridCanvas",this.props.shadow)&&$(".gridCanvas",this.props.shadow).each(function(){$(this).data("gridstack");$(this).data("gridstack",null)}),$(".gridPalette",this.props.shadow)&&$(".gridPalette",this.props.shadow).each(function(){$(this).data("gridstack");$(this).data("gridstack",null)}),gridStackFn($,window,this.refs.gridarea).then(function(gridStackUIObj){if(gridStackUIFn($,gridStackUIObj,window),$(".gridCanvas",_this2.props.shadow).gridstack(_this2.options,!0),$(".gridPalette",_this2.props.shadow).gridstack(_this2.options,!0),_this2.initializeLayout(_this2.props.shadow),_this2.initializeEvents(_this2.rootEl,_this2.props.shadow,self),_this2.props.as_widget&&_this2.props.preview||!_this2.props.pages||0==Object.keys(_this2.props.pages).length){var defaultPage=_this2.designerUtil.getDefaultPage(),pages={};pages[defaultPage.page_id]=defaultPage,_this2.props.updateStore({updates:{active_page_id:defaultPage.page_id,pages:pages}})}})}},{key:"componentDidMount",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var cellHeight,_this3=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:cellHeight=this.refs.canvas&&this.refs.canvas.getBoundingClientRect?this.refs.canvas.getBoundingClientRect().height/80:10,this.options={width:96,column:96,float:!0,removable:".trash",verticalMargin:0,cellHeight:cellHeight,animate:!0,removable:!1,acceptWidgets:".grid-stack-item",resizable:{handles:"e, se, s, sw, w"},draggable:{handle:".grid-stack-item-content",appendTo:$(this.refs.canvas)}},this.state.paletteLoaded&&this.refreshView(),setTimeout(function(){return _this3.resizeSideBarGrid()},2e3);case 4:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"resizeSideBarGrid",value:function(){var self=this,parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".sidebar",this.props.shadow).length>0?$(".sidebar",this.props.shadow):$(".sidebar",parentNode),topLevelEl=$(".sr-page-topCotainer",this.props.shadow).length>0?$(".sr-page-topCotainer",this.props.shadow):$(".sr-page-topCotainer",parentNode),contentAreaEl=$(".sr-page-editorial",this.props.shadow).length>0?$(".sr-page-editorial",this.props.shadow):$(".sr-page-editorial",parentNode);if(searchPane.length>0){var searchPaneRect=searchPane[0].getBoundingClientRect(),contentAreaWidth=topLevelEl[0].getBoundingClientRect().width-searchPaneRect.width-5;setTimeout(function(){contentAreaEl.width(contentAreaWidth),window.removeEventListener("resize",self.resizeSideBarGridDebounceFn),window.addEventListener("resize",self.resizeSideBarGridDebounceFn)})}}},{key:"initializeEvents",value:function(rootEl,hostEl,self){var _ref4,_ref5;$(".gridCanvas",hostEl).off("change",function(){}),$(".gridCanvas",hostEl).on("change",function(event,items){var _ref3,_this4=this,isPreviewItem=!!(items&&items.length>0&&items[0]&&items[0].el)&&!!$(items[0].el).find("widget-container").attr("preview");if(!self.initializing&&!isPreviewItem){var currentItemsBySlotId=self.getGridData(),activePage=self.props.activePage,previousItemsBySlotId=self.props.activePage.slots;activePage.is_open?(Object.keys(currentItemsBySlotId).map((_ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(currentItemSlotId){var curSlot,prevSlot,slotData;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(curSlot=currentItemsBySlotId[currentItemSlotId],prevSlot=previousItemsBySlotId?previousItemsBySlotId[currentItemSlotId]:null,!curSlot||curSlot.isPreview||!prevSlot||!self.isSlotUpdated(curSlot,prevSlot)){_context3.next=8;break}return(slotData=_extends({},currentItemsBySlotId[currentItemSlotId])).uid=currentItemSlotId,slotData.Layout=self.props.activePage.currentLayout?self.props.activePage.currentLayout:"default",_context3.next=8,$qry.run("pd.saveMetaSlideSlot",slotData);case 8:case"end":return _context3.stop()}},_callee3,_this4)})),function(_x){return _ref3.apply(this,arguments)})),activePage.slots=currentItemsBySlotId,self.activePage=activePage,self.pageSaveDebounced()):console.log("activePage not opened!")}}),$(".sidebar .grid-stack-item",hostEl).draggable({helper:"clone",revert:"invalid",handle:$(".grid-stack-item-content",hostEl),scroll:!0,appendTo:$(rootEl),start:function(event,ui){var eleData=$(this).data().element;($(this).addClass("draggingWidget"),eleData&&eleData.tag)&&$(this).find(".grid-stack-item-content").html('<widget-container style="height: 100%;" shadow="true" pageid='+self.props.active_page_id+" componentid="+eleData.componentid+" tag="+eleData.tag+'\n                            class="widgetContainer" pagesuffix=""></widget-container>')},stop:function(event,ui){$(this).removeClass("draggingWidget");var title=$(this).find(".grid-stack-item-content").data().title;$(this).attr("widgetid",""),$(this).find(".grid-stack-item-content").html(title)}}),$(".gridCanvas",hostEl).off("added",function(){}),$(".gridCanvas",hostEl).on("added",(_ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(event,items){var activePage,activePageWidgets,activePageSlots,activePageLayouts,i,eleData,el,grid,defaultWidth,defaultHeight,maxWidth,maxHeight,componentId,slotData,_slideRes,slotId,widgetPropsRes,widgetId,widgetContainerEl,currentLayout;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(activePage=Object.assign({},self.props.activePage),activePageWidgets=activePage.widgets||{},activePageSlots=activePage.slots||{},activePageLayouts=activePage.layouts||{},self.grid_added&&0!=self.grid_added){_context4.next=61;break}i=0;case 6:if(!(i<items.length)){_context4.next=59;break}if(!(eleData=items[i].el.data("element"))||!eleData.preview){_context4.next=10;break}return _context4.abrupt("continue",56);case 10:if(!eleData||!eleData.tag){_context4.next=53;break}return el=items[i].el,grid=$(this).data("gridstack"),defaultWidth=items[i].el.data("element").defaultWidth,defaultHeight=items[i].el.data("element").defaultHeight,maxWidth=items[i].el.data("element").maxWidth,maxHeight=items[i].el.data("element").maxHeight,componentId=items[i].el.data("element").componentid,(slotData={}).xposition=el.data("gsX")||0,slotData.yposition=el.data("gsY")||0,slotData.height=el.data("gsHeight")||0,slotData.width=el.data("gsWidth")?el.data("gsWidth"):0,slotData.minwidth=0,slotData.maxwidth=96,slotData.minheight=0,slotData.maxheight=80,slotData.resize=0,slotData.move=0,slotData.Layout=self.props.activePage.currentLayout?self.props.activePage.currentLayout:"default",slotData.Slide=self.props.active_page_id,_context4.next=33,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideSlot",slotData);case 33:return _slideRes=_context4.sent,slotId=_slideRes.uid,activePageSlots[_slideRes.uid]=slotData,_context4.next=38,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideSlotWidget",{Slot:slotId,Component:componentId});case 38:return widgetPropsRes=_context4.sent,widgetId=widgetPropsRes.uid,activePageWidgets[widgetId]={id:widgetId,props:items[i].el.data("element").props,Component:componentId,name:items[i].el.data("element").name},slotData.uid=slotId,slotData.Widget=widgetId,_context4.next=45,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideSlot",slotData);case 45:el.attr("slotid",slotId),el.attr("widgetid",widgetId),el.data("widgetprops",eleData.props),(widgetContainerEl=el.find("widget-container"))&&(widgetContainerEl.attr("slotid",slotId),widgetContainerEl.attr("widgetid",widgetId),widgetContainerEl.data("widgetprops",eleData.props)),grid.update(el,slotData.xposition,slotData.yposition,defaultWidth,defaultHeight),maxWidth&&grid.maxWidth(el,maxWidth),maxHeight&&grid.maxHeight(el,maxHeight);case 53:currentLayout=self.props.currentLayout?self.props.currentLayout:"default",activePageLayouts[currentLayout]={slots:activePageSlots,widgets:activePageWidgets},self.props.updateStore({updates:{activePage:activePage}});case 56:i++,_context4.next=6;break;case 59:_context4.next=62;break;case 61:self.grid_added=self.grid_added-items.length;case 62:case"end":return _context4.stop()}},_callee4,this)})),function(_x2,_x3){return _ref4.apply(this,arguments)})),$(".grid-stack",hostEl).off("removed",function(){}),$(".grid-stack",hostEl).on("removed",(_ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(event,items){var widgetContainerEl,slotId;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(self.grid_removed&&0!=self.grid_removed){_context5.next=14;break}if($(this).data("gridstack"),widgetContainerEl=items&&items[0]&&items[0].el.find("widget-container"),slotId=widgetContainerEl?widgetContainerEl.attr("slotid"):$(event.currentTarget).attr("slotid"),widgetContainerEl?widgetContainerEl.attr("widgetid"):$(event.currentTarget).attr("widgetid"),!slotId){_context5.next=11;break}return _context5.next=8,self.deleteSlideSlot(slotId);case 8:self.props.addFlashMessage({title:"Success - ",subtitle:"Widget removed successfully!"}),_context5.next=12;break;case 11:!self.initializing&&self.props.addErrorMessage({title:"Error - ",subtitle:"Invalid operation. Please contact system administrator."});case 12:_context5.next=16;break;case 14:items&&items.map(function(item){$(item.el).remove()}),self.grid_removed=self.grid_removed-items.length;case 16:case"end":return _context5.stop()}},_callee5,this)})),function(_x4,_x5){return _ref5.apply(this,arguments)}))}},{key:"isSlotUpdated",value:function(currentSlot,previousSlot){return currentSlot.xposition!=previousSlot.xposition||currentSlot.yposition!=previousSlot.yposition||currentSlot.height!=previousSlot.height||currentSlot.width!=previousSlot.width||currentSlot.minwidth!=previousSlot.minwidth||currentSlot.minheight!=previousSlot.minheight||currentSlot.maxwidth!=previousSlot.maxwidth||currentSlot.maxheight!=previousSlot.maxheight}},{key:"initializeLayout",value:function(hostEl,pageData){var _this5=this,self=this,grid=void 0;if(hostEl){$(".gridCanvas",hostEl).each(_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(grid=$(this).data("gridstack")){_context6.next=3;break}return _context6.abrupt("return");case 3:self.initializing=!0,grid.batchUpdate(),self.grid_removed=grid.container&&grid.container.length>0?grid.container.find(".grid-stack-item").length:0;case 6:case"end":return _context6.stop()}},_callee6,this)}))),self.grid_removed>0&&grid.removeAll();var activePage=pageData||(self.props.activePage||{});activePage.slots&&_.each(Object.keys(activePage.slots),function(slotId){var slot=activePage.slots[slotId],widgetId=slot.Widget?slot.Widget:slot.widget&&slot.widget.widgetid?slot.widget.widgetid:slot.widgetId?slot.widgetId:"",widgetProps=activePage.widgets[widgetId];if(widgetProps&&widgetProps.name){var name=widgetProps.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),eleData=Object.assign({tag:name,widgetid:widgetId,componentid:widgetProps.Component},widgetProps);$(_this5).attr("slotid",slotId);var activeItemContentEl=grid&&grid.$el&&grid.$el.find("#"+widgetId+".grid-stack-item-content");if(!activeItemContentEl&&grid&&grid.container&&grid.container.length>0&&(activeItemContentEl=$(grid.container[0]).find("#"+widgetId+".grid-stack-item-content")),activeItemContentEl&&0!=activeItemContentEl.length){var gridStackItemEl=activeItemContentEl.parent();grid.update(gridStackItemEl,slot.xposition,slot.yposition,slot.width,slot.height)}else{var widgetContainerEl=$("<div>\n                                <div id="+widgetId+' class="grid-stack-item-content">\n                                    <widget-container style="height: 100%;" shadow="true" pageid='+self.props.active_page_id+" tag="+eleData.tag+" \n                                                widgetid="+eleData.widgetid+" componentid="+eleData.componentid+" \n                                                slotid="+slotId+' class="widgetContainer" pagesuffix="">\n                                    </widget-container>\n                                </div>\n                            <div/>');widgetContainerEl.find("widget-container").data("widgetprops",eleData),self.grid_added=self.grid_added?self.grid_added+1:1,grid.addWidget(widgetContainerEl,slot.xposition,slot.yposition,slot.width,slot.height,!1,0,96,0,80)}}},this),grid&&grid.commit(),setTimeout(function(){if(self.initializing=!1,!self.isSideBarResizable){var parentNode=self.props.shadow&&self.props.shadow.host&&self.props.shadow.host.parentElement?self.props.shadow.host.parentElement:null,sidebarPane=$(".sidebar",self.props.shadow).length>0?$(".sidebar",self.props.shadow):$(".sidebar",parentNode);if(sidebarPane&&sidebarPane.length>0){sidebarPane[0].addEventListener("resize",self.resizeSideBarGridDebounceFn),new MutationObserver(function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}}).observe(sidebarPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]}),self.isSideBarResizable=!0,self.resizeSideBarGrid()}}},1e3)}}},{key:"updateEmulator",value:function(deviceValue){this.previewDevice=deviceValue,$(".emulator",this.props.shadow).data("device",deviceValue),$(".emulatorFrameContainer",this.props.shadow).removeClass().addClass("emulatorFrameContainer "+deviceValue),this.props.updateStore({updates:{selectedDevice:deviceValue}})}},{key:"updateDevice",value:function(e){var value=e.target.value;this.updateEmulator(value)}},{key:"clonePage",value:function(){var _this6=this,self=this;$script.runAtServer("studio.clonePage",{pageId:this.props.active_page_id}).then(function(data){self.props.addFlashMessage({title:"Success - ",subtitle:"Page clone is successful. Newly cloned page name is "+data.slideName}),setTimeout(function(){return self.props.updateStore({updates:{reload_slides:!_this6.props.reload_slides}})},1e3)})}},{key:"createLayout",value:function(){this.props.updateStore({updates:{showpreview:!0}}),this.setState({showCreateLayout:!0,reload:!this.state.reload})}},{key:"inlinePreview",value:function(){this.props.updateStore({updates:{showpreview:!0}}),this.setState({showInlinePreview:!0,reload:!this.state.reload})}},{key:"getGridData",value:function(){var data={},self=this;return _.map($(".grid-stack > .grid-stack-item:visible",this.props.shadow),function(el){(el=$(el)).find(".grid-stack-item-content .widgetContainer")&&el.find(".grid-stack-item-content .widgetContainer").data("widgetprops")&&el.find(".grid-stack-item-content .widgetContainer").data("widgetprops");var node=el.data("_gridstack_node"),slotId=el.find(".grid-stack-item-content .widgetContainer").attr("slotid"),storedSlot=self.props.activePageSlots[slotId];if(storedSlot&&node&&(node.x!=storedSlot.xposition||node.y!=storedSlot.yposition||node.width!=storedSlot.width||node.height!=storedSlot.height)){var activePageWidgets=Object.assign({},self.props.activePageWidgets),changedWidget=activePageWidgets[storedSlot.Widget]||{};changedWidget.reload=!changedWidget.reload,activePageWidgets[storedSlot.Widget]=changedWidget,self.props.updateStore({updates:{activePageWidgets:activePageWidgets}})}data[slotId]={Widget:el.find(".grid-stack-item-content .widgetContainer").attr("widgetid"),Slide:self.props.active_page_id,isPreview:!!el.find(".grid-stack-item-content .widgetContainer").attr("preview")};var defaultCoordinates={xposition:0,yposition:0,width:4,height:4,minwidth:0,minheight:0,maxwidth:96,maxheight:80};data[slotId]=_extends({},data[slotId],defaultCoordinates),isNaN(node.x)||(data[slotId].xposition=parseInt(node.x)),isNaN(node.y)||(data[slotId].yposition=parseInt(node.y)),isNaN(node.width)||(data[slotId].width=isNaN(node.width)?defaultCoordinates.width:parseInt(node.width)),isNaN(node.height)||(data[slotId].height=parseInt(node.height)),isNaN(node.minWidth)||(data[slotId].minwidth=parseInt(node.minWidth)),isNaN(node.minHeight)||(data[slotId].minheight=parseInt(node.minHeight)),isNaN(node.maxWidth)||(data[slotId].maxwidth=parseInt(node.maxWidth)),isNaN(node.maxHeight)||(data[slotId].maxheight=parseInt(node.maxHeight))},this),data}},{key:"toggleMode",value:function(){var gridArea=$(this.refs.gridarea);gridArea&&(gridArea.hasClass("dualmode")?(gridArea.removeClass("dualmode"),gridArea.addClass("fullscreen")):(gridArea.removeClass("fullscreen"),gridArea.addClass("dualmode")))}},{key:"componentDidUpdate",value:function(prevProps,prevState){if(prevProps.sideNavOpen!=this.props.sideNavOpen&&this.resizeSideBarGridDebounceFn(),prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&("designer"==this.props.showpreview_target?this.setState({showCreateLayout:!1}):"inline-preview"==this.props.showpreview_target?this.setState({showInlinePreview:!1}):"code-editor"==this.props.showpreview_target?this.setState({showIDE:!1}):"graphiql-view"==this.props.showpreview_target?this.setState({showQueryEditor:!1}):"script-runner"==this.props.showpreview_target?this.setState({showScriptRunner:!1}):"form-list"==this.props.showpreview_target?this.setState({showFormList:!1}):"create-layout"==this.props.showpreview_target&&this.setState({showCreateLayout:!1}),this.props.updateStore({updates:{showpreview_target:""}})),prevState.showInlineEmbeddedPreview!=this.props.showInlineEmbeddedPreview&&this.props.showInlineEmbeddedPreview&&this.setState({inlinePreviewKey:"inlinePreview"+Date.now()}),prevProps.active_page_id!==this.props.active_page_id)this.initializeLayout(this.rootEl),this.props.activePage.isNew?this.setState({widgetChanged:0,activeAccordion:0,accordionLevel:"page"}):this.setState({widgetChanged:1,activeAccordion:0,accordionLevel:"page"});else if(prevProps.activePage.currentLayout!=this.props.activePage.currentLayout){var prevLayout=prevProps.activePage.currentLayout,currentLayout=this.props.activePage.currentLayout;if(prevLayout&&"default"!=prevLayout||currentLayout&&"default"!=currentLayout){var activePage=Object.assign({},this.props.activePage);activePage.layouts&&activePage.layouts.slots&&(activePage.layouts.slots[prevProps.activePage.currentLayout]=prevProps.activePage.slots,activePage.layouts.widgets[prevProps.activePage.currentLayout]=prevProps.activePage.widgets,activePage.slots=activePage.layouts.slots[this.props.activePage.currentLayout],activePage.widgets=activePage.layouts.widgets[this.props.activePage.currentLayout],this.initializeLayout(this.props.shadow,activePage),this.props.updateStore({updates:{activePage:activePage}}))}else;}if(prevProps.active_list_item!=this.props.active_list_item){var widgetId=this.props.active_list_item.split("@@")[0];this.props.updateStore({updates:{active_widget_id:widgetId}}),this.setState({accordionLevel:"widget",activeAccordion:2})}else prevState.paletteLoaded!=this.state.paletteLoaded&&this.state.paletteLoaded?this.refreshView():prevState.bundlesLoaded!=this.state.bundlesLoaded&&this.state.bundlesLoaded&&this.refreshView();prevProps.activePageWidgets&&this.props.activePageWidgets&&Object.keys(prevProps.activePageWidgets).length!=Object.keys(this.props.activePageWidgets).length&&this.setState({reload:!this.state.reload}),prevProps.active_widget_id!=this.props.active_widget_id?prevProps.show_widget_props!=this.props.show_widget_props?this.setState({accordionLevel:"widget",activeAccordion:2}):prevProps.show_widget_actions!=this.props.show_widget_actions?this.setState({accordionLevel:"widget",activeAccordion:3}):this.props.active_widget_id&&-1!=this.props.active_widget_id?this.setState({widgetChanged:1,activeAccordion:1}):this.setState({widgetChanged:0}):prevProps.show_widget_props!=this.props.show_widget_props?this.setState({accordionLevel:"widget",activeAccordion:2}):prevProps.show_widget_actions!=this.props.show_widget_actions&&this.setState({accordionLevel:"widget",activeAccordion:3});var widgets2Delete=cloneDeep(this.props.widgets2Delete);if(widgets2Delete&&widgets2Delete.length>0){var gridCanvasEl=$(".gridCanvas",this.props.shadow);try{widgets2Delete.map(function(widgetId){gridCanvasEl&&gridCanvasEl.each(function(){var grid=$(this).data("gridstack");if(grid){var widgetContainerEl=gridCanvasEl.find(".grid-stack-item-content>widget-container[widgetid="+widgetId+"]");widgetContainerEl&&1==widgetContainerEl.length&&widgetContainerEl.parent()&&1==widgetContainerEl.parent().length&&widgetContainerEl.parent().parent()&&1==widgetContainerEl.parent().parent().length&&grid.removeWidget(widgetContainerEl.parent().parent())}})})}catch(err){this.props.addErrorMessage({title:"Error - ",subtitle:"Something went wrong, please contact your administrator."})}this.props.updateStore({updates:{widgets2Delete:[]}})}this.props.active_widget_id&&prevProps.active_widget_id==this.props.active_widget_id&&prevProps.activeWidget&&this.props.activeWidget&&(_.isEqual(prevProps.activeWidget.props,this.props.activeWidget.props)||this.saveWidgetDebounced(),prevProps.activeWidget.Component,this.props.activeWidget.Component)}},{key:"makePageActive",value:function(inputPage){if(inputPage&&(inputPage.id||inputPage.page_id)){var pageId=inputPage.id||inputPage.page_id;this.props.updateStore({updates:{active_page_id:pageId,active_widget_id:""}})}}},{key:"removePage",value:function(page){var pages=this.props.pages,pageId=(Object.keys(pages).length,page.page_id||page.id),tobeActiveId=null;if(pageId)if(delete pages[pageId],pageId==this.props.active_page_id&&pages&&Object.keys(pages).length>0)tobeActiveId=Object.keys(pages)[0];else{var newPage=this.designerUtil.getDefaultPage();newPage.pageType="",pages[newPage.page_id]=newPage,tobeActiveId=newPage.page_id}this.initializeLayout(this.rootEl),this.props.updateStore({updates:{active_page_id:tobeActiveId,pages:pages,active_widget_id:""}})}},{key:"handleNewFile",value:function(e){var pageType=e.target.value||e.currentTarget&&e.currentTarget.attributes&&e.currentTarget.attributes.value&&e.currentTarget.attributes.value.value||"",newPage=this.designerUtil.getDefaultPage();newPage.pageType=pageType;var pages=this.props.pages||{};pages[newPage.page_id]=newPage,this.initializeLayout(this.rootEl),this.props.updateStore({updates:{active_page_id:newPage.page_id,pages:pages}})}},{key:"autoPopulate",value:function(){}},{key:"saveSlides",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(){var activePage,pagesInStore,_self,_slideRes2,activePageInStore,widgets,_this7=this;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(activePage=this.props.pages&&this.props.pages[this.props.active_page_id],pagesInStore=this.props.pages,activePage.name&&activePage.scope&&activePage.path&&activePage.model&&activePage.modelscope){_context8.next=8;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Enter mandatory fields in general tab"}),alert("Enter mandatory fields in general tab"),_context8.next=23;break;case 8:if(_self=this,!activePage.isNew){_context8.next=14;break}return _context8.next=12,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlide",{Name:activePage.name,Scope:activePage.scope,Path:activePage.path,Type:activePage.pageType});case 12:(_slideRes2=_context8.sent)&&_slideRes2.uid&&(_self.props.addFlashMessage({title:"Success - ",subtitle:"Page updated!"}),(activePageInStore=(activePageInStore=pagesInStore[this.props.active_page_id])||{}).isNew&&(activePageInStore.isNew=!1,pagesInStore[_slideRes2.uid]=activePageInStore,delete pagesInStore[this.props.active_page_id]),_self.props.updateStore({updates:{active_page_id:_slideRes2.uid,pages:pagesInStore,reload_slides:!0}}));case 14:return _context8.next=16,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelName",Value:activePage.model,PropsSlide:slideRes.uid});case 16:return _context8.sent,_context8.next=19,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelScope",Value:activePage.modelscope,PropsSlide:slideRes.uid});case 19:_context8.sent,slideRes.uid,widgets=activePage.widgets||{},Object.keys(widgets).forEach(function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(widKey){return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:_this7.saveWidget(widKey,!1);case 1:case"end":return _context7.stop()}},_callee7,_this7)}));return function(_x6){return _ref8.apply(this,arguments)}}());case 23:case"end":return _context8.stop()}},_callee8,this)}));return function(){return _ref7.apply(this,arguments)}}()},{key:"saveWidgetRenderType",value:function(){var _ref9=_asyncToGenerator(_regeneratorRuntime.mark(function _callee9(widgetId,showNotification){return _regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(!widgetId||!this.props.activeWidget){_context9.next=4;break}return _context9.next=3,$qry.run("pd.replaceWidgetComponent",{widgetId:widgetId,componentId:this.props.activeWidget.Component});case 3:_context9.sent;case 4:case"end":return _context9.stop()}},_callee9,this)}));return function(_x7,_x8){return _ref9.apply(this,arguments)}}()},{key:"saveWidget",value:function(){var _ref10=_asyncToGenerator(_regeneratorRuntime.mark(function _callee10(widgetId,showNotification){var widget,props,widgetProps,currentWidgetProps,widgetPropsInDB,orderedWidgetPropsInDB,widgetPropIds2Remove,curWidgetPropName,deltaWidgetProps2Update,activePage,_this8=this;return _regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(!(widgetId&&this.props.activePage&&this.props.activePage.widgets)){_context10.next=21;break}if(!(widget=this.props.activePage.widgets[widgetId])){_context10.next=21;break}return props=widget.props,widgetProps=[],[],_context10.next=8,$qry._run('query($input:JSON){\n                        MetaWidgetProps{\n                            MetaWidgetPropsFind(filter: $input) @_(get: "edges"){\n                                edges @_(keyBy: "node.name", mapValues:"node"){\n                                    node{\n                                        uid\n                                        name\n                                        value\n                                    }\n                                }\n                            }\n                        }\n                    }',{input:{where:{Widget:widgetId}}},"data.MetaWidgetProps.MetaWidgetPropsFind");case 8:if(currentWidgetProps=_context10.sent,widgetPropsInDB=Object.assign({},currentWidgetProps),orderedWidgetPropsInDB=[],props&&Object.keys(props).forEach(function(key){var widgetProp={},widgetPropInDB={};currentWidgetProps&&Object.keys(currentWidgetProps).indexOf(key)>-1&&delete currentWidgetProps[key],widgetProp.name=key,(props[key]||0==props[key])&&(widgetProp.value="tabs"==key?props[key]:"FieldName"==key?props[key].startsWith("@@[")?props[key]:"@@["+props[key]+"]":props[key],widgetProp.Widget=widgetId,widgetProps.push(widgetProp)),widgetPropInDB.name=key,widgetPropsInDB&&widgetPropsInDB[key]&&(widgetPropsInDB[key].value||0==widgetPropsInDB[key].value)&&(widgetPropInDB.value="tabs"==key?widgetPropsInDB[key].value:"FieldName"==key?widgetPropsInDB[key].value.startsWith("@@[")?widgetPropsInDB[key]:"@@["+widgetPropsInDB[key]+"]":widgetPropsInDB[key].value,widgetPropInDB.Widget=widgetId,orderedWidgetPropsInDB.push(widgetPropInDB))}),!(widgetProps&&widgetProps.length>0)){_context10.next=21;break}if(!(currentWidgetProps&&Object.keys(currentWidgetProps).length>0)){_context10.next=18;break}for(curWidgetPropName in widgetPropIds2Remove=[],currentWidgetProps)currentWidgetProps[curWidgetPropName].uid&&widgetPropIds2Remove.push(currentWidgetProps[curWidgetPropName].uid);return _context10.next=18,$qry._run("mutation($inputData:MetaWidgetPropsDestroyAllInput!) {\n                                MetaWidgetPropsDestroyAll(input:$inputData){\n                                    obj\n                                }\t}",{inputData:{where:{uid:{inq:widgetPropIds2Remove}}}},"data.MetaWidgetPropsDestroyAll.obj");case 18:deltaWidgetProps2Update=[],_.isEqual(widgetProps,orderedWidgetPropsInDB)||widgetProps.map(function(widgetProp){if(widgetPropsInDB&&widgetPropsInDB[widgetProp.name]){var persistedWidgetProp={name:widgetProp.name,value:widgetPropsInDB[widgetProp.name].value,Widget:widgetId};_.isEqual(widgetProp,persistedWidgetProp)||"boolean"==typeof widgetProp.value&&widgetProp.value==("true"==persistedWidgetProp.value)||deltaWidgetProps2Update.push(widgetProp)}else deltaWidgetProps2Update.push(widgetProp)}),deltaWidgetProps2Update&&deltaWidgetProps2Update.length>0&&GraphQLDataUtil().saveMultiple("pd.saveMetaWidgetProperty",deltaWidgetProps2Update).then(function(data){showNotification&&_this8.addFlashMessageDebounce({title:"Success - ",subtitle:"Updated widget!",timeout:500})});case 21:(activePage=Object.assign({},this.props.activePage)).layouts=activePage.layouts||{},activePage.layouts.widgets=activePage.layouts.widgets||{},activePage.layouts.widgets[activePage.currentLayout||"default"]=activePage.widgets,this.props.updateStore({updates:{activePage:activePage}});case 26:case"end":return _context10.stop()}},_callee10,this)}));return function(_x9,_x10){return _ref10.apply(this,arguments)}}()},{key:"deleteSlideSlot",value:function(){var _ref11=_asyncToGenerator(_regeneratorRuntime.mark(function _callee11(slotId){var activePage,widgetId,currentLayout,active_widget_id;return _regeneratorRuntime.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:if(this,!((activePage=this.props.pages&&this.props.pages[this.props.active_page_id])&&activePage.slots&&activePage.slots[slotId])){_context11.next=13;break}return _context11.next=5,this.designerUtil.deleteSlot(slotId,activePage.name);case 5:widgetId=activePage.slots[slotId].Widget,delete(activePage=Object.assign({},this.props.activePage)).slots[slotId],delete activePage.widgets[widgetId],currentLayout=this.props.activePage&&this.props.activePage.currentLayout?this.props.activePage.currentLayout:"default",activePage.layouts&&activePage.layouts&&(activePage.layouts.slots=activePage.layouts.slots||{},activePage.layouts.slots[currentLayout]=activePage.slots,activePage.layouts.widgets=activePage.layouts.widgets||{},activePage.layouts.widgets[currentLayout]=activePage.widgets),active_widget_id=this.props.active_widget_id==widgetId?-1:this.props.active_widget_id,this.props.updateStore({updates:{activePage:activePage,active_widget_id:active_widget_id}});case 13:case"end":return _context11.stop()}},_callee11,this)}));return function(_x11){return _ref11.apply(this,arguments)}}()},{key:"deletePage",value:function(){var _ref12=_asyncToGenerator(_regeneratorRuntime.mark(function _callee12(){var allPages,activePage,newActivePageId;return _regeneratorRuntime.wrap(function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:allPages=this.props.pages,activePage=allPages[this.props.active_page_id],this.designerUtil.deletePage(activePage,this.props.active_page_id),delete allPages[this.props.active_page_id],newActivePageId=allPages&&Object.keys(allPages).length>0?Object.keys(allPages)[0]:"",this.props.updateStore({updates:{pages:allPages,active_page_id:newActivePageId}});case 6:case"end":return _context12.stop()}},_callee12,this)}));return function(){return _ref12.apply(this,arguments)}}()},{key:"deleteLayout",value:function(){var _ref13=_asyncToGenerator(_regeneratorRuntime.mark(function _callee13(){var self,_this9=this;return _regeneratorRuntime.wrap(function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:self=this,this.props.activePage.currentLayout&&"default"!=this.props.activePage.currentLayout?$script.runAtServer("studio.deleteLayout",{pageId:this.props.active_page_id,layout:this.props.activePage.currentLayout}).then(function(data){var deletedLayout=self.props.activePage.currentLayout,activePage=Object.assign({},self.props.activePage),updatedSlots={};Object.keys(activePage.layouts.slots).map(function(layoutName){layoutName!=deletedLayout&&(updatedSlots[layoutName]=activePage.layouts.slots[layoutName])}),activePage.layouts.slots=updatedSlots;var updatedWidgets={};Object.keys(activePage.layouts.widgets).map(function(layoutName){layoutName!=deletedLayout&&(updatedWidgets[layoutName]=activePage.layouts.widgets[layoutName])}),activePage.layouts.widgets=updatedWidgets,activePage.slots=activePage.layouts.slots.default,activePage.widgets=activePage.layouts.widgets.default,activePage.currentLayout="default",self.props.addFlashMessage({title:"Success - ",subtitle:"Layout "+_this9.props.activePage.currentLayout+" is deleted."}),self.props.updateStore({updates:{activePage:activePage}})}):self.props.addFlashMessage({title:"Warning - ",subtitle:"Default layout cannot be deleted"});case 2:case"end":return _context13.stop()}},_callee13,this)}));return function(){return _ref13.apply(this,arguments)}}()},{key:"render",value:function(){var _this10=this;if(this.props.as_widget&&!this.props.preview)return React.createElement("div",null,"Page designer will load at runtime...");if(!this.state.paletteLoaded)return React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});if(!this.state.bundlesLoaded)return this.loadNecessaryBundles(),React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});var activePage=this.props.pages&&this.props.active_page_id&&this.props.pages[this.props.active_page_id]?this.props.pages[this.props.active_page_id]:{},WidgetPalette=(JSON.stringify(activePage.items||[]),activePage.page_id,JSON.stringify(this.device[this.props.selectedDevice]),PageDesignerWidget()),contentTabArry=[];this.props.pages&&Object.keys(this.props.pages).forEach(function(pageKey){if(-1==pageKey.indexOf("$")&&_this10.props.pages[pageKey]&&(_this10.props.pages[pageKey].is_open||_this10.props.pages[pageKey].isNew)){var page=_this10.props.pages[pageKey];contentTabArry.push(React.createElement("div",{className:"contentTabItems"},React.createElement("div",{key:"-1",className:pageKey==_this10.props.active_page_id?"contentTabActive":"contentTab",onClick:function(){return _this10.makePageActive(page)}},page.name),React.createElement(Close20,{className:"closeTab",onClick:function(){return _this10.removePage(page)}})))}});var contentTabs=React.createElement("div",{class:"contentTabs"},contentTabArry),previewContent=null,pagewidgets=[];this.props.activePageWidgets&&Object.keys(this.props.activePageWidgets).map(function(widgetId){var widgetName=widgetId;_this10.props.activePageWidgets[widgetId]&&_this10.props.activePageWidgets[widgetId].props&&_this10.props.activePageWidgets[widgetId].props.Name&&(widgetName=_this10.props.activePageWidgets[widgetId].props.Name),pagewidgets.push({name:widgetName,id:widgetId})});this.state.activeAccordion;"page"==this.state.accordionLevel&&0!=this.state.activeAccordion&&1!=this.state.activeAccordion&&4!=this.state.activeAccordion&&5!=this.state.activeAccordion?this.setState({activeAccordion:1}):"widget"==this.state.accordionLevel&&2!=this.state.activeAccordion&&3!=this.state.activeAccordion&&this.setState({activeAccordion:2});var pageConfigurations=activePage.isNew?null:React.createElement(Tab,{label:"Settings",onClick:function(){_this10.setState({widgetChanged:1})}},React.createElement(Accordion,{align:"end",style:{overflowY:"auto"}},"page"==this.state.accordionLevel?React.createElement(React.Fragment,null,React.createElement(AccordionItem,{open:0==this.state.activeAccordion,style:{marginTop:10,overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this10.setState({activeAccordion:0})},onHeadingClick:function(){},title:"Page Properties"},React.createElement("page-designer-general",null)),React.createElement(AccordionItem,{open:4==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this10.setState({activeAccordion:4})},onHeadingClick:function(){},title:"Page Actions"},React.createElement("page-designer-page-actions",null)),React.createElement(AccordionItem,{open:1==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this10.setState({activeAccordion:1})},onHeadingClick:function(){},title:"Page Widgets"},React.createElement("srs-simple-list",{items:JSON.stringify(pagewidgets),varname:"widgets",enableitemselect:"true",unique:"true",singlecolumn:"true",alignment:"left"})),React.createElement(AccordionItem,{open:5==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this10.setState({activeAccordion:5})},onHeadingClick:function(){},title:"Modal Actions"},React.createElement("page-designer-actions",{modal:!0,lite:!0}))):React.createElement(React.Fragment,null,React.createElement("div",{className:"widgetPropHeader",onClick:function(e){_this10.setState({accordionLevel:"page",activeAccordion:1,active_widget_id:""})},style:{cursor:"pointer",display:"inline-block",clear:"both",float:"left",textAlign:"left",padding:10,border:"1px solid grey",backgroundColor:"#eff2f4",width:"100%"}},React.createElement(ArrowLeft,{style:{cursor:"pointer"}}),React.createElement("span",{style:{marginLeft:"30%",cursor:"pointer"}},"Widget Details")),React.createElement(AccordionItem,{open:2==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem",clear:"both"},onClick:function(){_this10.setState({activeAccordion:2})},onHeadingClick:function(){},title:"Widget Properties"},React.createElement("page-designer-props",null)),React.createElement(AccordionItem,{open:3==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this10.setState({activeAccordion:3})},onHeadingClick:function(){},title:"Widget Actions"},React.createElement("page-designer-actions",{lite:!0})))));React.createElement("div",{className:"eidtor-toggle-maximize"},React.createElement(Minimize16,{onClick:function(){_this10.props.updateStore({updates:{showRightPane:!0}})}}));var slideSearch=React.createElement("slide-selection-panel",null),notificationBar=this.props.embedded+""!="true"&&this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{styles:JSON.stringify({position:"fixed",width:"30%",right:10,minHeight:100,overflow:"auto",display:"block",zIndex:99999,bottom:5})}):null,previewItem=null,randomNumber=Date.now();1==this.state.showPreview?previewItem=React.createElement("new-widget-action",{key:"waction"+randomNumber}):1==this.state.showCreateLayout?previewItem=React.createElement("layout-creator",{key:"layout"+randomNumber}):1==this.state.showInlinePreview?previewItem=React.createElement("inline-preview",{path:this.props.activePage.path}):1==this.state.showIDE?(this.showIDEEl=this.showIDEEl?this.showIDEEl:React.createElement("srs-iframe",{key:"codeeditor"+randomNumber,propkey:"codeeditor"+randomNumber,url:"/code-editor",width:"100%",height:.8*screen.height}),previewItem=this.showIDEEl):1==this.state.showQueryEditor?(this.showQueryEditorEl=this.showQueryEditorEl?this.showQueryEditorEl:React.createElement("srs-iframe",{key:"querybuilder"+randomNumber,propkey:"codeeditor"+randomNumber,url:"/query-builder",width:"100%",height:.8*screen.height}),previewItem=this.showQueryEditorEl):1==this.state.showScriptRunner?(this.showScriptRunnerEl=this.showScriptRunnerEl?this.showScriptRunnerEl:React.createElement("srs-iframe",{key:"scriptrunner"+randomNumber,propkey:"codeeditor"+randomNumber,url:"/script-runner",width:"100%",height:.8*screen.height}),previewItem=this.showScriptRunnerEl):1==this.state.showFormList&&(this.showFormListEl=this.showFormListEl?this.showFormListEl:React.createElement("srs-iframe",{key:"form-list"+randomNumber,propkey:"codeeditor"+randomNumber,url:"/formbuilder/scope/"+this.props.currentscope+"?debug=true&noheader=true",width:"100%",height:.8*screen.height}),previewItem=this.showFormListEl);var previewTarget="designer";previewTarget=1==this.state.showInlinePreview?"inline-preview":previewTarget,previewTarget=1==this.state.showIDE?"code-editor":previewTarget,previewTarget=1==this.state.showQueryEditor?"graphiql-view":previewTarget,previewTarget=1==this.state.showScriptRunner?"script-runner":previewTarget,previewTarget=1==this.state.showFormList?"form-list":previewTarget,previewTarget=1==this.state.showCreateLayout?"create-layout":previewTarget;var previewKey=1==this.state.showPreview||1==this.state.showCreateLayout?"designer":1==this.state.showInlinePreview?"inline-preview":"designer";previewKey=1==this.state.showCreateLayout?"create-layout":previewKey,previewKey=this.state.showInlineEmbeddedPreview?this.state.inlinePreviewKey:previewKey+randomNumber;var inlinePreviewProps={};switch(previewTarget){case"inline-preview":inlinePreviewProps={size:"xl",quickpreview:"true"};break;case"new-page-action":case"new-widget-action":case"code-editor":case"graphiql-view":case"script-runner":case"form-list":case"create-layout":inlinePreviewProps={size:"xl"}}var showPreview=1==this.state.showPreview||1==this.state.showCreateLayout||1==this.state.showInlinePreview||this.state.showIDE||this.state.showQueryEditor||this.state.showScriptRunner||this.state.showFormList;this.previewComponentEls=this.previewComponentEls?this.previewComponentEls:{};var previewComponentEl=this.previewComponentEls[previewTarget]?this.previewComponentEls[previewTarget]:React.createElement("preview-component",_extends({key:previewKey,target:previewTarget},inlinePreviewProps),previewItem);this.previewComponentEls[previewTarget]=previewComponentEl;var previewComponent4IDE=React.createElement("div",{style:{display:showPreview&&"code-editor"==previewTarget?"block":"none"}},this.previewComponentEls["code-editor"]),previewComponent4QueryBuilder=React.createElement("div",{style:{display:showPreview&&"graphiql-view"==previewTarget?"block":"none"}},this.previewComponentEls["graphiql-view"]),previewComponent4ScriptRunner=React.createElement("div",{style:{display:showPreview&&"script-runner"==previewTarget?"block":"none"}},this.previewComponentEls["script-runner"]),previewComponent4FormList=React.createElement("div",{style:{display:showPreview&&"form-list"==previewTarget?"block":"none"}},this.previewComponentEls["form-list"]),previewComponent=showPreview&&"code-editor"!=previewTarget&&"graphiql-view"!=previewTarget&&"script-runner"!=previewTarget?this.previewComponentEls[previewTarget]:null,widgetPalette=React.createElement(Tab,{label:"Palette",style:{display:activePage.isNew?"none":"flex"},onClick:function(){_this10.setState({widgetChanged:2})}},React.createElement(WidgetPalette,{palettes:JSON.stringify(this.palettes)})),inlinePreviewClassName=this.state.showInlineEmbeddedPreview?"inlinePreview":"inlinePreviewHide",inlineEmbeddedPreview=this.state.showInlineEmbeddedPreview?React.createElement("inline-preview",{path:this.props.activePage.path,key:previewKey}):null;return React.createElement("div",{className:"sr-page-topCotainer"},React.createElement("style",null,'@import url("/thirdpartylib/gridstack/corestyles.css");'),React.createElement("div",{className:"quickhooks"},React.createElement(Editor32,{onClick:function(){_this10.setState({showFormList:!1,showScriptRunner:!1,showIDE:!0,showQueryEditor:!1,showInlineEmbeddedPreview:!1,showCreateLayout:!1,showPreview:!1}),_this10.props.updateStore({updates:{showpreview:!0}})}}),React.createElement(Database32,{onClick:function(){_this10.setState({showFormList:!1,showScriptRunner:!1,showIDE:!1,showQueryEditor:!0,showInlineEmbeddedPreview:!1,showCreateLayout:!1,showPreview:!1}),_this10.props.updateStore({updates:{showpreview:!0}})}}),React.createElement(ScriptRunner32,{onClick:function(){_this10.setState({showFormList:!1,showScriptRunner:!0,showIDE:!1,showQueryEditor:!1,showInlineEmbeddedPreview:!1,showCreateLayout:!1,showPreview:!1}),_this10.props.updateStore({updates:{showpreview:!0}})}}),React.createElement(Account32,{onClick:function(){_this10.setState({showFormList:!0,showScriptRunner:!1,showIDE:!1,showQueryEditor:!1,showInlineEmbeddedPreview:!1,showCreateLayout:!1,showPreview:!1}),_this10.props.updateStore({updates:{showpreview:!0}})}}),React.createElement(Preview32,{onClick:function(){_this10.setState({showInlineEmbeddedPreview:!_this10.state.showInlineEmbeddedPreview})}})),notificationBar,previewComponent,previewComponent4IDE,previewComponent4QueryBuilder,previewComponent4ScriptRunner,previewComponent4FormList,React.createElement("div",{className:"sidebar"},React.createElement("div",{style:{position:"absolute",backgroundColor:"#77b07f",zIndex:2e4,top:80,left:0,height:"100vh",width:"2%",display:this.state.isSideBarOpen?"none":"block"}}),React.createElement("div",{style:{position:"relative",float:"right",width:32,height:32,cursor:"pointer",zIndex:100},onClick:function(e){if($(e.target)){var sideBarEl=$(e.target).closest(".sidebar");if(_this10.state.isSideBarOpen)sideBarEl.css("width","2%"),sideBarEl.css("min-width","2%"),sideBarEl.css("background-color","rgb(119, 174, 127)"),sideBarEl.parent().find(".sr-page-editorial").css("width","98%");else sideBarEl.css("width","18%"),sideBarEl.css("min-width","10%"),sideBarEl.css("background-color","white"),sideBarEl.parent().find(".sr-page-editorial").css("width","82%");_this10.setState({isSideBarOpen:!_this10.state.isSideBarOpen})}}},this.state.isSideBarOpen?React.createElement(ChevronLeft,{style:{cursor:"pointer"}}):React.createElement(ChevronRight,{style:{cursor:"pointer"}})),React.createElement("div",{className:"sr-new-file-menu"},React.createElement(HeaderMenu,{"aria-label":"File",menuLinkName:"File",style:{backgroundColor:"#181618"}},React.createElement(HeaderMenuItem,{onClick:this.handleNewFile},"New Page"),React.createElement(HeaderMenuItem,{onClick:this.deletePage},"Delete Page"),React.createElement(HeaderMenuItem,{onClick:this.clonePage},"Duplicate Page"),React.createElement(HeaderMenuItem,{onClick:this.createLayout},"New Layout"),React.createElement(HeaderMenuItem,{onClick:this.deleteLayout},"Delete Layout"),React.createElement(HeaderMenuItem,{onClick:this.autoPopulate},"Auto-Layout"),React.createElement(HeaderMenuItem,{onClick:this.inlinePreview},"Quick Preview"),React.createElement(HeaderMenuItem,{onClick:function(){return window.open(_this10.props.activePage.path+"?nocache=true&debug=true")}},"Runtime"))),React.createElement(Tabs,{className:"sr-nav-tab",selected:this.state.widgetChanged,style:{width:"100%"}},React.createElement(Tab,{label:"Page List",onClick:function(){_this10.setState({widgetChanged:0})}},slideSearch),pageConfigurations,widgetPalette)),React.createElement("div",{className:"sr-page-editorial"},React.createElement("div",{className:"content dualmode",ref:"gridarea"},React.createElement("div",{className:"topContainerWithoutPreview"},contentTabs,React.createElement("div",{className:"trash"}),activePage.pagestyles?React.createElement("style",null,activePage.pagestyles):null,React.createElement("div",{className:"gridContent"},React.createElement("div",{className:"grid-stack grid-stack-96 gridCanvas",ref:"canvas",style:{display:activePage.isNew?"none":"block"}}),React.createElement("div",{className:"welcomePage",style:{display:activePage.isNew?"block":"none"}},React.createElement(Tile,{style:{backgroundColor:"rgb(127, 86, 33)",color:"white",textAlign:"center",fontSize:"xx-large",fontStyle:"italic"}},"Hello! Welcome to the new page creation form. "),React.createElement("page-designer-general",{style:{position:"absolute",width:"50%",marginLeft:"10%",marginTop:50}})))),previewContent)),React.createElement("div",{className:inlinePreviewClassName},React.createElement(Close32,{className:"closePreview",onClick:function(e){return _this10.setState({showInlineEmbeddedPreview:!1})}}),inlineEmbeddedPreview))}}]),_PageDesigner_}(React.Component),_export("PageDesigner",PageDesigner=function(props){return _PageDesigner_}),_export("PageDesigner",PageDesigner),_export("default",PageDesigner),_export("states",states=[{KeyName:"widgets2Delete",AccessPath:"widgets2Delete",DefaultValue:'{"widgets2Delete": []}'},{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": ""}'},{KeyName:"notifications",AccessPath:"notifications",DefaultValue:'{"notifications": []}'},{KeyName:"reload_slides",AccessPath:"reload_slides",DefaultValue:'{"reload_slides": false}'},{KeyName:"activePageSlots",AccessPath:"pages.${active_page_id}.slots",DefaultValue:'{"pages":{"${active_page_id}":{"slots":{}}}}'},{KeyName:"activeWidget",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {"${active_widget_id}":{}}}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'},{KeyName:"sideNavOpen",AccessPath:"sideNavOpen",DefaultValue:'{"sideNavOpen": "close"}'},{KeyName:"activePageLayouts",AccessPath:"pages.${active_page_id}.layouts",DefaultValue:'{"pages": {"${active_page_id}": {"layouts": {}}}}'},{KeyName:"widgets2Resize",AccessPath:"widgets2Resize",DefaultValue:'{"widgets2Resize": {}}'},{KeyName:"activePageWidgets",AccessPath:"pages.${active_page_id}.widgets",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {}}}}'},{KeyName:"is_design_time",AccessPath:"is_design_time",DefaultValue:'{"is_design_time": false}'},{KeyName:"showNav",AccessPath:"showNav",DefaultValue:'{"showNav":true}'},{KeyName:"slideslot",AccessPath:"pages.${active_page_id}.slots.${slotid}",DefaultValue:'{"pages": {"${active_page_id}": {"slots": {"${slotid}": {}}}}}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"activeTabName",AccessPath:"activeTabName",DefaultValue:'{"activeTabName":"--Unnamed--"}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema": {}}'},{KeyName:"pages",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"show_widget_props",AccessPath:"show_widget_props",DefaultValue:'{"show_widget_props": false}'},{KeyName:"active_list_item",AccessPath:"active_list_item.widgets",DefaultValue:'{"active_list_item": {"widgets": ""}}'},{KeyName:"show_widget_actions",AccessPath:"show_widget_actions",DefaultValue:'{"show_widget_actions": false}'},{KeyName:"selectedDevice",AccessPath:"selectedDevice",DefaultValue:'{"selectedDevice":"laptop"}'},{KeyName:"activeslideid",AccessPath:"activeslideid",DefaultValue:'{"activeslideid": ""}'},{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview":false}'},{KeyName:"scrollfired",AccessPath:"scrollfired",DefaultValue:'{"scrollfired": false}'},{KeyName:"showRightPane",AccessPath:"showRightPane",DefaultValue:'{"showRightPane": true}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PageDesignerWidget/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/studio/PageDesignerUtil.js","carbon-components-react","@carbon/icons-react/lib/text--align--justify/32","@carbon/icons-react/lib/caret--sort--down/32","@carbon/icons-react/lib/calendar/32","@carbon/icons-react/lib/time/32","@carbon/icons-react/lib/radio-button--checked/32","@carbon/icons-react/lib/checkbox--checked--filled/32","@carbon/icons-react/lib/document--blank/32","@carbon/icons-react/lib/link/32","@carbon/icons-react/lib/page--first/32","@carbon/icons-react/lib/list/32","@carbon/icons-react/lib/image/32","@carbon/icons-react/lib/dashboard/32","@carbon/icons-react/lib/recording/32","@carbon/icons-react/lib/panel-expansion/32","@carbon/icons-react/lib/search/32","@carbon/icons-react/lib/open-panel--filled--left/32","@carbon/icons-react/lib/new-tab/32","@carbon/icons-react/lib/carousel--horizontal/32","@carbon/icons-react/lib/idea/32","@carbon/icons-react/lib/chart--line/32","@carbon/icons-react/lib/code/32"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,PageDesignerUtil,Select,SelectItem,TextArea,SelectIcon,Date,Time,Radio,Checkbox,Toggle,File,Link,Page,List,Image,Board,Loading,NavigateButtons,RecordLookup,SideNav,Tabs,Carousel,Idea,Chart,HTMLCode,_PageDesignerWidget_,PageDesignerWidget;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptStudioPageDesignerUtilJs){PageDesignerUtil=_clientScriptStudioPageDesignerUtilJs.PageDesignerUtil},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_carbonIconsReactLibTextAlignJustify){TextArea=_carbonIconsReactLibTextAlignJustify.default},function(_carbonIconsReactLibCaretSortDown){SelectIcon=_carbonIconsReactLibCaretSortDown.default},function(_carbonIconsReactLibCalendar){Date=_carbonIconsReactLibCalendar.default},function(_carbonIconsReactLibTime){Time=_carbonIconsReactLibTime.default},function(_carbonIconsReactLibRadioButtonChecked){Radio=_carbonIconsReactLibRadioButtonChecked.default},function(_carbonIconsReactLibCheckboxCheckedFilled){Checkbox=_carbonIconsReactLibCheckboxCheckedFilled.default,Toggle=_carbonIconsReactLibCheckboxCheckedFilled.default},function(_carbonIconsReactLibDocumentBlank){File=_carbonIconsReactLibDocumentBlank.default},function(_carbonIconsReactLibLink){Link=_carbonIconsReactLibLink.default},function(_carbonIconsReactLibPageFirst){Page=_carbonIconsReactLibPageFirst.default},function(_carbonIconsReactLibList){List=_carbonIconsReactLibList.default},function(_carbonIconsReactLibImage){Image=_carbonIconsReactLibImage.default},function(_carbonIconsReactLibDashboard){Board=_carbonIconsReactLibDashboard.default},function(_carbonIconsReactLibRecording){Loading=_carbonIconsReactLibRecording.default},function(_carbonIconsReactLibPanelExpansion){NavigateButtons=_carbonIconsReactLibPanelExpansion.default},function(_carbonIconsReactLibSearch){RecordLookup=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibOpenPanelFilledLeft){SideNav=_carbonIconsReactLibOpenPanelFilledLeft.default},function(_carbonIconsReactLibNewTab){Tabs=_carbonIconsReactLibNewTab.default},function(_carbonIconsReactLibCarouselHorizontal){Carousel=_carbonIconsReactLibCarouselHorizontal.default},function(_carbonIconsReactLibIdea){Idea=_carbonIconsReactLibIdea.default},function(_carbonIconsReactLibChartLine){Chart=_carbonIconsReactLibChartLine.default},function(_carbonIconsReactLibCode){HTMLCode=_carbonIconsReactLibCode.default}],execute:function(){_PageDesignerWidget_=function(_React$Component){function _PageDesignerWidget_(props){_classCallCheck(this,_PageDesignerWidget_);var _this=_possibleConstructorReturn(this,(_PageDesignerWidget_.__proto__||Object.getPrototypeOf(_PageDesignerWidget_)).call(this,props));return _this.palettes=props.palettes?JSON.parse(props.palettes):{},_this.orderedPaletteKeys=Object.keys(_this.palettes).sort(function(a,b){return _this.palettes[a].Name==_this.palettes[b].Name?0:_this.palettes[a].Name>_this.palettes[b].Name?1:-1}),_this.state={currentpalette:_this.orderedPaletteKeys.length>0?_this.orderedPaletteKeys[0]:"",reload:!1},_this}return _inherits(_PageDesignerWidget_,_React$Component),_createClass(_PageDesignerWidget_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.palettes,this.props.palettes)||(this.palettes=this.props.palettes?JSON.parse(this.props.palettes):{},this.setState({reload:!this.state.reload}))}},{key:"getPalatteIcon",value:function(key){var palatteIcon=null;switch(key){case"DividerX":palatteIcon=React.createElement("div",{className:"palatte-horizontal-bar"});break;case"DividerY":palatteIcon=React.createElement("div",{className:"palatte-vertical-bar"});break;case"Title":case"Text":palatteIcon=React.createElement("span",{className:"palatte-text-icon"},"Ab");break;case"TextArea":palatteIcon=React.createElement(TextArea,null);break;case"Select":palatteIcon=React.createElement(SelectIcon,{className:"palatte-select-icon"});break;case"Time":palatteIcon=React.createElement(Time,null);break;case"Date":palatteIcon=React.createElement(Date,null);break;case"Radio":palatteIcon=React.createElement(Radio,null);break;case"Number":palatteIcon=React.createElement("span",{className:"palatte-number-icon"},"3.4");break;case"Checkbox":palatteIcon=React.createElement(Checkbox,null);break;case"Toggle":palatteIcon=React.createElement(Toggle,null);break;case"File":palatteIcon=React.createElement(File,null);break;case"Link":palatteIcon=React.createElement(Link,null);break;case"Page":palatteIcon=React.createElement(Page,null);break;case"List":palatteIcon=React.createElement(List,null);break;case"Image":palatteIcon=React.createElement(Image,null);break;case"Board":palatteIcon=React.createElement(Board,null);break;case"Button":palatteIcon=React.createElement("span",{className:"palatte-button-icon"},"B");break;case"Loading":palatteIcon=React.createElement(Loading,null);break;case"NavigateButton":palatteIcon=React.createElement(NavigateButtons,null);break;case"RecordLookup":palatteIcon=React.createElement(RecordLookup,null);break;case"SideNav":palatteIcon=React.createElement(SideNav,null);break;case"Tabs":case"SimpleTabs":palatteIcon=React.createElement(Tabs,null);break;case"Carousel":palatteIcon=React.createElement(Carousel,null);break;case"Chart":palatteIcon=React.createElement(Chart,null);break;case"HtmlCode":palatteIcon=React.createElement(HTMLCode,null);break;default:palatteIcon=React.createElement(Idea,null)}return palatteIcon}},{key:"render",value:function(){var _this2=this,eleDefinitionsPerPalette=new PageDesignerUtil(this.palettes).getElementDefintions(),paletteItemSelect=[];this.orderedPaletteKeys.length>0&&this.orderedPaletteKeys.map(function(paletteKey){_this2.palettes[paletteKey]&&paletteItemSelect.push(React.createElement(SelectItem,{value:_this2.palettes[paletteKey].uid,text:_this2.palettes[paletteKey].Name}))});var paletteItemContents=[],self=this;return Object.keys(eleDefinitionsPerPalette).map(function(paletteId){var eleDefinitions=eleDefinitionsPerPalette[paletteId],paletteItemContent=[];eleDefinitions&&Object.keys(eleDefinitions).length>0&&Object.keys(eleDefinitions).map(function(key){var palatteIcon=self.getPalatteIcon(key);paletteItemContent.push(React.createElement("div",{className:"srs-palatte-item"},React.createElement("div",{className:"palatte-icon"},palatteIcon),React.createElement("div",{className:"grid-stack-item","data-gs-width":eleDefinitions[key].defaultWidget,"data-gs-height":eleDefinitions[key].defaultHeight,"data-element":eleDefinitions[key],"data-gs-min-width":eleDefinitions[key].minWidth,"data-gs-min-height":eleDefinitions[key].minHeight,"data-gs-max-width":eleDefinitions[key].maxWidth,"data-gs-max-height":eleDefinitions[key].maxHeight},React.createElement("div",{className:"grid-stack-item-content widget","data-title":key},key))))}),paletteItemContents.push(React.createElement("div",{style:{display:_this2.state.currentpalette==paletteId?"flex":"none"},className:"srs-palatte-container"},paletteItemContent))}),React.createElement("div",{className:"sr-widget-pane"},React.createElement("style",null,'@import url("component/studio/PageDesignerWidget/Style.css");'),React.createElement(Select,{style:{marginTop:20,marginLeft:50},hideLabel:"true",id:"current_palette",defaultValue:"Form",onChange:function(e){_this2.setState({currentpalette:e.target.value})}},paletteItemSelect),React.createElement("div",{className:"sectionheader gridPalette",style:{marginBottom:30,fontFamily:"cursive",fontSize:"larger",color:"#3C0B0B"}},"Palette"),paletteItemContents&&paletteItemContents.length>0?paletteItemContents:React.createElement("div",null,"Palette is empty!"))}}]),_PageDesignerWidget_}(React.Component),_export("PageDesignerWidget",PageDesignerWidget=function(props){return _PageDesignerWidget_}),_export("PageDesignerWidget",PageDesignerWidget)}}}),System.register("component/studio/PageDesigner/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","jquery","jquery-ui/ui/data","jquery-ui/ui/disable-selection","jquery-ui/ui/focusable","jquery-ui/ui/form","jquery-ui/ui/ie","jquery-ui/ui/keycode","jquery-ui/ui/labels","jquery-ui/ui/jquery-1-7","jquery-ui/ui/plugin","jquery-ui/ui/safe-active-element","jquery-ui/ui/safe-blur","jquery-ui/ui/scroll-parent","jquery-ui/ui/tabbable","jquery-ui/ui/unique-id","jquery-ui/ui/version","jquery-ui/ui/widget","jquery-ui/ui/widgets/mouse","jquery-ui/ui/widgets/draggable","jquery-ui/ui/widgets/droppable","jquery-ui/ui/widgets/resizable","lodash","lodash.clonedeep","lodash.debounce","lodash.get","@carbon/icons-react/lib/menu/16","@carbon/icons-react/lib/close/20","@carbon/icons-react/lib/close/32","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/maximize/16","@carbon/icons-react/lib/minimize/16","@carbon/icons-react/lib/caret--left/32","@carbon/icons-react/lib/caret--right/32","@carbon/icons-react/lib/caret--left/20","@carbon/icons-react/lib/terminal/32","@carbon/icons-react/lib/data--base/32","@carbon/icons-react/lib/run/32","@carbon/icons-react/lib/account/32","thirdpartylib/gridstack/corelib.js","client/script/studio/PageDesignerUtil.js","component/studio/PageDesignerWidget/Definition.js","client/script/mmf/GraphQLDataUtil.js","carbon-components-react","carbon-components-react/lib/components/UIShell"],function(_export,_context14){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,$,_,cloneDeep,debounce,Close20,Close32,Minimize16,ChevronLeft,ChevronRight,ArrowLeft,Editor32,Database32,ScriptRunner32,Account32,Preview32,gridStackFn,gridStackUIFn,PageDesignerUtil,PageDesignerWidget,GraphQLDataUtil,Tab,Tabs,Tile,Accordion,AccordionItem,HeaderMenu,HeaderMenuItem,_PageDesigner_,PageDesigner;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_jquery){$=_jquery.default},function(_jqueryUiUiData){},function(_jqueryUiUiDisableSelection){},function(_jqueryUiUiFocusable){},function(_jqueryUiUiForm){},function(_jqueryUiUiIe){},function(_jqueryUiUiKeycode){},function(_jqueryUiUiLabels){},function(_jqueryUiUiJquery){},function(_jqueryUiUiPlugin){},function(_jqueryUiUiSafeActiveElement){},function(_jqueryUiUiSafeBlur){},function(_jqueryUiUiScrollParent){},function(_jqueryUiUiTabbable){},function(_jqueryUiUiUniqueId){},function(_jqueryUiUiVersion){},function(_jqueryUiUiWidget){},function(_jqueryUiUiWidgetsMouse){},function(_jqueryUiUiWidgetsDraggable){},function(_jqueryUiUiWidgetsDroppable){},function(_jqueryUiUiWidgetsResizable){},function(_lodash){_=_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_lodashGet){_lodashGet.default},function(_carbonIconsReactLibMenu){_carbonIconsReactLibMenu.default},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibClose2){Close32=_carbonIconsReactLibClose2.default},function(_carbonIconsReactLibAddAlt){_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibMaximize){_carbonIconsReactLibMaximize.default},function(_carbonIconsReactLibMinimize){Minimize16=_carbonIconsReactLibMinimize.default},function(_carbonIconsReactLibCaretLeft){ChevronLeft=_carbonIconsReactLibCaretLeft.default},function(_carbonIconsReactLibCaretRight){ChevronRight=_carbonIconsReactLibCaretRight.default,Preview32=_carbonIconsReactLibCaretRight.default},function(_carbonIconsReactLibCaretLeft2){ArrowLeft=_carbonIconsReactLibCaretLeft2.default},function(_carbonIconsReactLibTerminal){Editor32=_carbonIconsReactLibTerminal.default},function(_carbonIconsReactLibDataBase){Database32=_carbonIconsReactLibDataBase.default},function(_carbonIconsReactLibRun){ScriptRunner32=_carbonIconsReactLibRun.default},function(_carbonIconsReactLibAccount){Account32=_carbonIconsReactLibAccount.default},function(_thirdpartylibGridstackCorelibJs){gridStackFn=_thirdpartylibGridstackCorelibJs.gridStackFn,gridStackUIFn=_thirdpartylibGridstackCorelibJs.gridStackUIFn},function(_clientScriptStudioPageDesignerUtilJs){PageDesignerUtil=_clientScriptStudioPageDesignerUtilJs.PageDesignerUtil},function(_componentStudioPageDesignerWidgetDefinitionJs){PageDesignerWidget=_componentStudioPageDesignerWidgetDefinitionJs.PageDesignerWidget},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_carbonComponentsReact){_carbonComponentsReact.Button,_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Tab=_carbonComponentsReact.Tab,Tabs=_carbonComponentsReact.Tabs,_carbonComponentsReact.OverflowMenu,_carbonComponentsReact.OverflowMenuItem,Tile=_carbonComponentsReact.Tile,Accordion=_carbonComponentsReact.Accordion,AccordionItem=_carbonComponentsReact.AccordionItem},function(_carbonComponentsReactLibComponentsUIShell){HeaderMenu=_carbonComponentsReactLibComponentsUIShell.HeaderMenu,HeaderMenuItem=_carbonComponentsReactLibComponentsUIShell.HeaderMenuItem}],execute:function(){_PageDesigner_=function(_React$Component){function _PageDesigner_(props){_classCallCheck(this,_PageDesigner_);var _this=_possibleConstructorReturn(this,(_PageDesigner_.__proto__||Object.getPrototypeOf(_PageDesigner_)).call(this,props));return _this.designerUtil=new PageDesignerUtil,_this.device={smartphone:{width:"360",height:"510"},tablet:{width:"700",height:"900"},laptop:{width:"1366",height:"750"}},_this.state={widgetChanged:0,activeAccordion:0,paletteLoaded:_this.props.palettes&&Object.keys(_this.props.palettes).length>0,isSideBarOpen:!0,accordionLevel:"page",active_widget_id:"",showCreateLayout:!1,reload:!1,inlinePreviewKey:"inlinePreview"+Date.now(),bundlesLoaded:!1},_this.initializing=!1,_this.getGridData=_this.getGridData.bind(_this),_this.refreshView=_this.refreshView.bind(_this),_this.updateEmulator=_this.updateEmulator.bind(_this),_this.isSlotUpdated=_this.isSlotUpdated.bind(_this),_this.updateDevice=_this.updateDevice.bind(_this),_this.saveSlides=_this.saveSlides.bind(_this),_this.autoPopulate=_this.autoPopulate.bind(_this),_this.saveWidget=_this.saveWidget.bind(_this),_this.saveWidgetRenderType=_this.saveWidgetRenderType.bind(_this),_this.initializeLayout=_this.initializeLayout.bind(_this),_this.initializeEvents=_this.initializeEvents.bind(_this),_this.handleNewFile=_this.handleNewFile.bind(_this),_this.makePageActive=_this.makePageActive.bind(_this),_this.removePage=_this.removePage.bind(_this),_this.clonePage=_this.clonePage.bind(_this),_this.createLayout=_this.createLayout.bind(_this),_this.inlinePreview=_this.inlinePreview.bind(_this),_this.deleteLayout=_this.deleteLayout.bind(_this),_this.deletePage=_this.deletePage.bind(_this),_this.hostEl=_this.rootEl=void 0,_this.toggleMode=_this.toggleMode.bind(_this),_this.activePage=Object.assign({},_this.props.activePage),_this.resizeSideBarGrid=_this.resizeSideBarGrid.bind(_this),_this.isSideBarResizable=!1,_this.resizeSideBarGridDebounceFn=debounce(function(){_this.resizeSideBarGrid()}),_this.saveWidgetDebounced=debounce(function(){_this.saveWidget(_this.props.active_widget_id,!0)},3e3,{trailing:!0,leading:!0}),_this.saveWidgetRenderTypeDebounce=debounce(function(){_this.saveWidgetRenderType(_this.props.active_widget_id,!0)},3e3,{trailing:!0,leading:!1}),_this.addFlashMessageDebounce=debounce(function(content){_this.props.addFlashMessage(content)},3e3,{trailing:!0,leading:!1}),_this.loadNecessaryBundles=_this.loadNecessaryBundles.bind(_this),_this.pageSaveDebounced=debounce(function(){_this.props.updateStore({updates:{activePage:_this.activePage}})},20,{trailing:!0,leading:!0}),_this.palettes&&0!=Object.keys(_this.palettes).length||$script.runscript("mmf.getPalettes",{}).then(function(palettesData){_this.palettes=palettesData,_this.setState({paletteLoaded:!0})}),$ele.registerElement("NewWidgetAction","mmf","React"),$ele.registerElement("LayoutCreator","studio","React"),$ele.registerElement("InlinePreview","studio","React"),$ele.registerElement("CodeEditor","studio","React"),$ele.registerElement("GraphiqlView","studio","React"),$ele.registerElement("ScriptRunner","studio","React"),window.addEventListener("resize",self.resizeSideBarGridDebounceFn),$script.runAtServer("mmf.getSchemaData",{}).then(function(schemaData){return _this.props.updateStore({updates:{schema:schemaData}})}),_this.props.updateStore({updates:{is_design_time:!0}}),_this}return _inherits(_PageDesigner_,_React$Component),_createClass(_PageDesigner_,[{key:"loadNecessaryBundles",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var bundleFilter,bundleMaps,bundleMapIndx,bundleMap;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return[],bundleFilter={where:{Application:this.props.activePage.scope}},_context.next=4,$qry.getRecords("MetaBundleMap",bundleFilter,["uid","Type","Name","Resource"]);case 4:if(!((bundleMaps=_context.sent)&&bundleMaps.length>0)){_context.next=28;break}_context.t0=_regeneratorRuntime.keys(bundleMaps);case 7:if((_context.t1=_context.t0()).done){_context.next=28;break}bundleMapIndx=_context.t1.value,bundleMap=bundleMaps[bundleMapIndx],void 0,_context.t2=bundleMap.Type,_context.next="internal"===_context.t2?14:"external"===_context.t2?17:26;break;case 14:return _context.next=16,System.import("/load/bundle/"+bundleMap.Name+".js");case 16:return _context.abrupt("break",26);case 17:return _context.prev=17,_context.next=20,System.import(bundleMap.Resource);case 20:_context.next=25;break;case 22:_context.prev=22,_context.t3=_context.catch(17),console.error("Unable to import bundle "+bundleMap.Name);case 25:return _context.abrupt("break",26);case 26:_context.next=7;break;case 28:this.setState({bundlesLoaded:!0});case 29:case"end":return _context.stop()}},_callee,this,[[17,22]])}));return function(){return _ref.apply(this,arguments)}}()},{key:"refreshView",value:function(){var _this2=this,self=this;this.rootEl=this.refs.gridarea,$(".gridContent",this.props.shadow)&&$(".gridContent",this.props.shadow).scroll(function(){return _this2.props.updateStore({updates:{scrollfired:!_this2.props.scrollfired}})}),$(".gridCanvas",this.props.shadow)&&$(".gridCanvas",this.props.shadow).each(function(){$(this).data("gridstack");$(this).data("gridstack",null)}),$(".gridPalette",this.props.shadow)&&$(".gridPalette",this.props.shadow).each(function(){$(this).data("gridstack");$(this).data("gridstack",null)}),gridStackFn($,window,this.refs.gridarea).then(function(gridStackUIObj){if(gridStackUIFn($,gridStackUIObj,window),$(".gridCanvas",_this2.props.shadow).gridstack(_this2.options,!0),$(".gridPalette",_this2.props.shadow).gridstack(_this2.options,!0),_this2.initializeLayout(_this2.props.shadow),_this2.initializeEvents(_this2.rootEl,_this2.props.shadow,self),_this2.props.as_widget&&_this2.props.preview||!_this2.props.pages||0==Object.keys(_this2.props.pages).length){var defaultPage=_this2.designerUtil.getDefaultPage(),pages={};pages[defaultPage.page_id]=defaultPage,_this2.props.updateStore({updates:{active_page_id:defaultPage.page_id,pages:pages}})}})}},{key:"componentDidMount",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var cellHeight,_this3=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:cellHeight=this.refs.canvas&&this.refs.canvas.getBoundingClientRect?this.refs.canvas.getBoundingClientRect().height/80:10,this.options={width:96,column:96,float:!0,removable:".trash",verticalMargin:0,cellHeight:cellHeight,animate:!0,removable:!1,acceptWidgets:".grid-stack-item",resizable:{handles:"e, se, s, sw, w"},draggable:{handle:".grid-stack-item-content",appendTo:$(this.refs.canvas)}},this.state.paletteLoaded&&this.refreshView(),setTimeout(function(){return _this3.resizeSideBarGrid()},2e3);case 4:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"resizeSideBarGrid",value:function(){var self=this,parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".sidebar",this.props.shadow).length>0?$(".sidebar",this.props.shadow):$(".sidebar",parentNode),topLevelEl=$(".sr-page-topCotainer",this.props.shadow).length>0?$(".sr-page-topCotainer",this.props.shadow):$(".sr-page-topCotainer",parentNode),contentAreaEl=$(".sr-page-editorial",this.props.shadow).length>0?$(".sr-page-editorial",this.props.shadow):$(".sr-page-editorial",parentNode);if(searchPane.length>0){var searchPaneRect=searchPane[0].getBoundingClientRect(),contentAreaWidth=topLevelEl[0].getBoundingClientRect().width-searchPaneRect.width-5;setTimeout(function(){contentAreaEl.width(contentAreaWidth),window.removeEventListener("resize",self.resizeSideBarGridDebounceFn),window.addEventListener("resize",self.resizeSideBarGridDebounceFn)})}}},{key:"initializeEvents",value:function(rootEl,hostEl,self){var _ref4,_ref5;$(".gridCanvas",hostEl).off("change",function(){}),$(".gridCanvas",hostEl).on("change",function(event,items){var _ref3,_this4=this,isPreviewItem=!!(items&&items.length>0&&items[0]&&items[0].el)&&!!$(items[0].el).find("widget-container").attr("preview");if(!self.initializing&&!isPreviewItem){var currentItemsBySlotId=self.getGridData(),activePage=self.props.activePage,previousItemsBySlotId=self.props.activePage.slots;activePage.is_open?(Object.keys(currentItemsBySlotId).map((_ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(currentItemSlotId){var curSlot,prevSlot,slotData;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(curSlot=currentItemsBySlotId[currentItemSlotId],prevSlot=previousItemsBySlotId?previousItemsBySlotId[currentItemSlotId]:null,!curSlot||curSlot.isPreview||!prevSlot||!self.isSlotUpdated(curSlot,prevSlot)){_context3.next=8;break}return(slotData=_extends({},currentItemsBySlotId[currentItemSlotId])).uid=currentItemSlotId,slotData.Layout=self.props.activePage.currentLayout?self.props.activePage.currentLayout:"default",_context3.next=8,$qry.run("pd.saveMetaSlideSlot",slotData);case 8:case"end":return _context3.stop()}},_callee3,_this4)})),function(_x){return _ref3.apply(this,arguments)})),activePage.slots=currentItemsBySlotId,self.activePage=activePage,self.pageSaveDebounced()):console.log("activePage not opened!")}}),$(".sidebar .grid-stack-item",hostEl).draggable({helper:"clone",revert:"invalid",handle:$(".grid-stack-item-content",hostEl),scroll:!0,appendTo:$(rootEl),start:function(event,ui){var eleData=$(this).data().element;($(this).addClass("draggingWidget"),eleData&&eleData.tag)&&$(this).find(".grid-stack-item-content").html('<widget-container style="height: 100%;" shadow="true" pageid='+self.props.active_page_id+" componentid="+eleData.componentid+" tag="+eleData.tag+'\n                            class="widgetContainer" pagesuffix=""></widget-container>')},stop:function(event,ui){$(this).removeClass("draggingWidget");var title=$(this).find(".grid-stack-item-content").data().title;$(this).attr("widgetid",""),$(this).find(".grid-stack-item-content").html(title)}}),$(".gridCanvas",hostEl).off("added",function(){}),$(".gridCanvas",hostEl).on("added",(_ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(event,items){var activePage,activePageWidgets,activePageSlots,activePageLayouts,i,eleData,el,grid,defaultWidth,defaultHeight,maxWidth,maxHeight,componentId,slotData,_slideRes,slotId,widgetPropsRes,widgetId,widgetContainerEl,currentLayout;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(activePage=Object.assign({},self.props.activePage),activePageWidgets=activePage.widgets||{},activePageSlots=activePage.slots||{},activePageLayouts=activePage.layouts||{},self.grid_added&&0!=self.grid_added){_context4.next=61;break}i=0;case 6:if(!(i<items.length)){_context4.next=59;break}if(!(eleData=items[i].el.data("element"))||!eleData.preview){_context4.next=10;break}return _context4.abrupt("continue",56);case 10:if(!eleData||!eleData.tag){_context4.next=53;break}return el=items[i].el,grid=$(this).data("gridstack"),defaultWidth=items[i].el.data("element").defaultWidth,defaultHeight=items[i].el.data("element").defaultHeight,maxWidth=items[i].el.data("element").maxWidth,maxHeight=items[i].el.data("element").maxHeight,componentId=items[i].el.data("element").componentid,(slotData={}).xposition=el.data("gsX")||0,slotData.yposition=el.data("gsY")||0,slotData.height=el.data("gsHeight")||0,slotData.width=el.data("gsWidth")?el.data("gsWidth"):0,slotData.minwidth=0,slotData.maxwidth=96,slotData.minheight=0,slotData.maxheight=80,slotData.resize=0,slotData.move=0,slotData.Layout=self.props.activePage.currentLayout?self.props.activePage.currentLayout:"default",slotData.Slide=self.props.active_page_id,_context4.next=33,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideSlot",slotData);case 33:return _slideRes=_context4.sent,slotId=_slideRes.uid,activePageSlots[_slideRes.uid]=slotData,_context4.next=38,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideSlotWidget",{Slot:slotId,Component:componentId});case 38:return widgetPropsRes=_context4.sent,widgetId=widgetPropsRes.uid,activePageWidgets[widgetId]={id:widgetId,props:items[i].el.data("element").props,Component:componentId,name:items[i].el.data("element").name},slotData.uid=slotId,slotData.Widget=widgetId,_context4.next=45,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideSlot",slotData);case 45:el.attr("slotid",slotId),el.attr("widgetid",widgetId),el.data("widgetprops",eleData.props),(widgetContainerEl=el.find("widget-container"))&&(widgetContainerEl.attr("slotid",slotId),widgetContainerEl.attr("widgetid",widgetId),widgetContainerEl.data("widgetprops",eleData.props)),grid.update(el,slotData.xposition,slotData.yposition,defaultWidth,defaultHeight),maxWidth&&grid.maxWidth(el,maxWidth),maxHeight&&grid.maxHeight(el,maxHeight);case 53:currentLayout=self.props.currentLayout?self.props.currentLayout:"default",activePageLayouts[currentLayout]={slots:activePageSlots,widgets:activePageWidgets},self.props.updateStore({updates:{activePage:activePage}});case 56:i++,_context4.next=6;break;case 59:_context4.next=62;break;case 61:self.grid_added=self.grid_added-items.length;case 62:case"end":return _context4.stop()}},_callee4,this)})),function(_x2,_x3){return _ref4.apply(this,arguments)})),$(".grid-stack",hostEl).off("removed",function(){}),$(".grid-stack",hostEl).on("removed",(_ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(event,items){var widgetContainerEl,slotId;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(self.grid_removed&&0!=self.grid_removed){_context5.next=14;break}if($(this).data("gridstack"),widgetContainerEl=items&&items[0]&&items[0].el.find("widget-container"),slotId=widgetContainerEl?widgetContainerEl.attr("slotid"):$(event.currentTarget).attr("slotid"),widgetContainerEl?widgetContainerEl.attr("widgetid"):$(event.currentTarget).attr("widgetid"),!slotId){_context5.next=11;break}return _context5.next=8,self.deleteSlideSlot(slotId);case 8:self.props.addFlashMessage({title:"Success - ",subtitle:"Widget removed successfully!"}),_context5.next=12;break;case 11:!self.initializing&&self.props.addErrorMessage({title:"Error - ",subtitle:"Invalid operation. Please contact system administrator."});case 12:_context5.next=16;break;case 14:items&&items.map(function(item){$(item.el).remove()}),self.grid_removed=self.grid_removed-items.length;case 16:case"end":return _context5.stop()}},_callee5,this)})),function(_x4,_x5){return _ref5.apply(this,arguments)}))}},{key:"isSlotUpdated",value:function(currentSlot,previousSlot){return currentSlot.xposition!=previousSlot.xposition||currentSlot.yposition!=previousSlot.yposition||currentSlot.height!=previousSlot.height||currentSlot.width!=previousSlot.width||currentSlot.minwidth!=previousSlot.minwidth||currentSlot.minheight!=previousSlot.minheight||currentSlot.maxwidth!=previousSlot.maxwidth||currentSlot.maxheight!=previousSlot.maxheight}},{key:"initializeLayout",value:function(hostEl,pageData){var _this5=this,self=this,grid=void 0;if(hostEl){$(".gridCanvas",hostEl).each(_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(grid=$(this).data("gridstack")){_context6.next=3;break}return _context6.abrupt("return");case 3:self.initializing=!0,grid.batchUpdate(),self.grid_removed=grid.container&&grid.container.length>0?grid.container.find(".grid-stack-item").length:0;case 6:case"end":return _context6.stop()}},_callee6,this)}))),self.grid_removed>0&&grid.removeAll();var activePage=pageData||(self.props.activePage||{});activePage.slots&&_.each(Object.keys(activePage.slots),function(slotId){var slot=activePage.slots[slotId],widgetId=slot.Widget?slot.Widget:slot.widget&&slot.widget.widgetid?slot.widget.widgetid:slot.widgetId?slot.widgetId:"",widgetProps=activePage.widgets[widgetId];if(widgetProps&&widgetProps.name){var name=widgetProps.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),eleData=Object.assign({tag:name,widgetid:widgetId,componentid:widgetProps.Component},widgetProps);$(_this5).attr("slotid",slotId);var activeItemContentEl=grid&&grid.$el&&grid.$el.find("#"+widgetId+".grid-stack-item-content");if(!activeItemContentEl&&grid&&grid.container&&grid.container.length>0&&(activeItemContentEl=$(grid.container[0]).find("#"+widgetId+".grid-stack-item-content")),activeItemContentEl&&0!=activeItemContentEl.length){var gridStackItemEl=activeItemContentEl.parent();grid.update(gridStackItemEl,slot.xposition,slot.yposition,slot.width,slot.height)}else{var widgetContainerEl=$("<div>\n                                <div id="+widgetId+' class="grid-stack-item-content">\n                                    <widget-container style="height: 100%;" shadow="true" pageid='+self.props.active_page_id+" tag="+eleData.tag+" \n                                                widgetid="+eleData.widgetid+" componentid="+eleData.componentid+" \n                                                slotid="+slotId+' class="widgetContainer" pagesuffix="">\n                                    </widget-container>\n                                </div>\n                            <div/>');widgetContainerEl.find("widget-container").data("widgetprops",eleData),self.grid_added=self.grid_added?self.grid_added+1:1,grid.addWidget(widgetContainerEl,slot.xposition,slot.yposition,slot.width,slot.height,!1,0,96,0,80)}}},this),grid&&grid.commit(),setTimeout(function(){if(self.initializing=!1,!self.isSideBarResizable){var parentNode=self.props.shadow&&self.props.shadow.host&&self.props.shadow.host.parentElement?self.props.shadow.host.parentElement:null,sidebarPane=$(".sidebar",self.props.shadow).length>0?$(".sidebar",self.props.shadow):$(".sidebar",parentNode);if(sidebarPane&&sidebarPane.length>0){sidebarPane[0].addEventListener("resize",self.resizeSideBarGridDebounceFn),new MutationObserver(function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}}).observe(sidebarPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]}),self.isSideBarResizable=!0,self.resizeSideBarGrid()}}},1e3)}}},{key:"updateEmulator",value:function(deviceValue){this.previewDevice=deviceValue,$(".emulator",this.props.shadow).data("device",deviceValue),$(".emulatorFrameContainer",this.props.shadow).removeClass().addClass("emulatorFrameContainer "+deviceValue),this.props.updateStore({updates:{selectedDevice:deviceValue}})}},{key:"updateDevice",value:function(e){var value=e.target.value;this.updateEmulator(value)}},{key:"clonePage",value:function(){var _this6=this,self=this;$script.runAtServer("studio.clonePage",{pageId:this.props.active_page_id}).then(function(data){self.props.addFlashMessage({title:"Success - ",subtitle:"Page clone is successful. Newly cloned page name is "+data.slideName}),setTimeout(function(){return self.props.updateStore({updates:{reload_slides:!_this6.props.reload_slides}})},1e3)})}},{key:"createLayout",value:function(){this.props.updateStore({updates:{showpreview:!0}}),this.setState({showCreateLayout:!0,reload:!this.state.reload})}},{key:"inlinePreview",value:function(){this.props.updateStore({updates:{showpreview:!0}}),this.setState({showInlinePreview:!0,reload:!this.state.reload})}},{key:"getGridData",value:function(){var data={},self=this;return _.map($(".grid-stack > .grid-stack-item:visible",this.props.shadow),function(el){(el=$(el)).find(".grid-stack-item-content .widgetContainer")&&el.find(".grid-stack-item-content .widgetContainer").data("widgetprops")&&el.find(".grid-stack-item-content .widgetContainer").data("widgetprops");var node=el.data("_gridstack_node"),slotId=el.find(".grid-stack-item-content .widgetContainer").attr("slotid"),storedSlot=self.props.activePageSlots[slotId];if(storedSlot&&node&&(node.x!=storedSlot.xposition||node.y!=storedSlot.yposition||node.width!=storedSlot.width||node.height!=storedSlot.height)){var activePageWidgets=Object.assign({},self.props.activePageWidgets),changedWidget=activePageWidgets[storedSlot.Widget]||{};changedWidget.reload=!changedWidget.reload,activePageWidgets[storedSlot.Widget]=changedWidget,self.props.updateStore({updates:{activePageWidgets:activePageWidgets}})}data[slotId]={Widget:el.find(".grid-stack-item-content .widgetContainer").attr("widgetid"),Slide:self.props.active_page_id,isPreview:!!el.find(".grid-stack-item-content .widgetContainer").attr("preview")};var defaultCoordinates={xposition:0,yposition:0,width:4,height:4,minwidth:0,minheight:0,maxwidth:96,maxheight:80};data[slotId]=_extends({},data[slotId],defaultCoordinates),isNaN(node.x)||(data[slotId].xposition=parseInt(node.x)),isNaN(node.y)||(data[slotId].yposition=parseInt(node.y)),isNaN(node.width)||(data[slotId].width=isNaN(node.width)?defaultCoordinates.width:parseInt(node.width)),isNaN(node.height)||(data[slotId].height=parseInt(node.height)),isNaN(node.minWidth)||(data[slotId].minwidth=parseInt(node.minWidth)),isNaN(node.minHeight)||(data[slotId].minheight=parseInt(node.minHeight)),isNaN(node.maxWidth)||(data[slotId].maxwidth=parseInt(node.maxWidth)),isNaN(node.maxHeight)||(data[slotId].maxheight=parseInt(node.maxHeight))},this),data}},{key:"toggleMode",value:function(){var gridArea=$(this.refs.gridarea);gridArea&&(gridArea.hasClass("dualmode")?(gridArea.removeClass("dualmode"),gridArea.addClass("fullscreen")):(gridArea.removeClass("fullscreen"),gridArea.addClass("dualmode")))}},{key:"componentDidUpdate",value:function(prevProps,prevState){if(prevProps.sideNavOpen!=this.props.sideNavOpen&&this.resizeSideBarGridDebounceFn(),prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&("designer"==this.props.showpreview_target?this.setState({showCreateLayout:!1}):"inline-preview"==this.props.showpreview_target?this.setState({showInlinePreview:!1}):"code-editor"==this.props.showpreview_target?this.setState({showIDE:!1}):"graphiql-view"==this.props.showpreview_target?this.setState({showQueryEditor:!1}):"script-runner"==this.props.showpreview_target?this.setState({showScriptRunner:!1}):"form-list"==this.props.showpreview_target?this.setState({showFormList:!1}):"create-layout"==this.props.showpreview_target&&this.setState({showCreateLayout:!1}),this.props.updateStore({updates:{showpreview_target:""}})),prevState.showInlineEmbeddedPreview!=this.props.showInlineEmbeddedPreview&&this.props.showInlineEmbeddedPreview&&this.setState({inlinePreviewKey:"inlinePreview"+Date.now()}),prevProps.active_page_id!==this.props.active_page_id)this.initializeLayout(this.rootEl),this.props.activePage.isNew?this.setState({widgetChanged:0,activeAccordion:0,accordionLevel:"page"}):this.setState({widgetChanged:1,activeAccordion:0,accordionLevel:"page"});else if(prevProps.activePage.currentLayout!=this.props.activePage.currentLayout){var prevLayout=prevProps.activePage.currentLayout,currentLayout=this.props.activePage.currentLayout;if(prevLayout&&"default"!=prevLayout||currentLayout&&"default"!=currentLayout){var activePage=Object.assign({},this.props.activePage);activePage.layouts&&activePage.layouts.slots&&(activePage.layouts.slots[prevProps.activePage.currentLayout]=prevProps.activePage.slots,activePage.layouts.widgets[prevProps.activePage.currentLayout]=prevProps.activePage.widgets,activePage.slots=activePage.layouts.slots[this.props.activePage.currentLayout],activePage.widgets=activePage.layouts.widgets[this.props.activePage.currentLayout],this.initializeLayout(this.props.shadow,activePage),this.props.updateStore({updates:{activePage:activePage}}))}else;}if(prevProps.active_list_item!=this.props.active_list_item){var widgetId=this.props.active_list_item.split("@@")[0];this.props.updateStore({updates:{active_widget_id:widgetId}}),this.setState({accordionLevel:"widget",activeAccordion:2})}else prevState.paletteLoaded!=this.state.paletteLoaded&&this.state.paletteLoaded?this.refreshView():prevState.bundlesLoaded!=this.state.bundlesLoaded&&this.state.bundlesLoaded&&this.refreshView();prevProps.activePageWidgets&&this.props.activePageWidgets&&Object.keys(prevProps.activePageWidgets).length!=Object.keys(this.props.activePageWidgets).length&&this.setState({reload:!this.state.reload}),prevProps.active_widget_id!=this.props.active_widget_id?prevProps.show_widget_props!=this.props.show_widget_props?this.setState({accordionLevel:"widget",activeAccordion:2}):prevProps.show_widget_actions!=this.props.show_widget_actions?this.setState({accordionLevel:"widget",activeAccordion:3}):this.props.active_widget_id&&-1!=this.props.active_widget_id?this.setState({widgetChanged:1,activeAccordion:1}):this.setState({widgetChanged:0}):prevProps.show_widget_props!=this.props.show_widget_props?this.setState({accordionLevel:"widget",activeAccordion:2}):prevProps.show_widget_actions!=this.props.show_widget_actions&&this.setState({accordionLevel:"widget",activeAccordion:3});var widgets2Delete=cloneDeep(this.props.widgets2Delete);if(widgets2Delete&&widgets2Delete.length>0){var gridCanvasEl=$(".gridCanvas",this.props.shadow);try{widgets2Delete.map(function(widgetId){gridCanvasEl&&gridCanvasEl.each(function(){var grid=$(this).data("gridstack");if(grid){var widgetContainerEl=gridCanvasEl.find(".grid-stack-item-content>widget-container[widgetid="+widgetId+"]");widgetContainerEl&&1==widgetContainerEl.length&&widgetContainerEl.parent()&&1==widgetContainerEl.parent().length&&widgetContainerEl.parent().parent()&&1==widgetContainerEl.parent().parent().length&&grid.removeWidget(widgetContainerEl.parent().parent())}})})}catch(err){this.props.addErrorMessage({title:"Error - ",subtitle:"Something went wrong, please contact your administrator."})}this.props.updateStore({updates:{widgets2Delete:[]}})}this.props.active_widget_id&&prevProps.active_widget_id==this.props.active_widget_id&&prevProps.activeWidget&&this.props.activeWidget&&(_.isEqual(prevProps.activeWidget.props,this.props.activeWidget.props)||this.saveWidgetDebounced(),prevProps.activeWidget.Component,this.props.activeWidget.Component)}},{key:"makePageActive",value:function(inputPage){if(inputPage&&(inputPage.id||inputPage.page_id)){var pageId=inputPage.id||inputPage.page_id;this.props.updateStore({updates:{active_page_id:pageId,active_widget_id:""}})}}},{key:"removePage",value:function(page){var pages=this.props.pages,pageId=(Object.keys(pages).length,page.page_id||page.id),tobeActiveId=null;if(pageId)if(delete pages[pageId],pageId==this.props.active_page_id&&pages&&Object.keys(pages).length>0)tobeActiveId=Object.keys(pages)[0];else{var newPage=this.designerUtil.getDefaultPage();newPage.pageType="",pages[newPage.page_id]=newPage,tobeActiveId=newPage.page_id}this.initializeLayout(this.rootEl),this.props.updateStore({updates:{active_page_id:tobeActiveId,pages:pages,active_widget_id:""}})}},{key:"handleNewFile",value:function(e){var pageType=e.target.value||e.currentTarget&&e.currentTarget.attributes&&e.currentTarget.attributes.value&&e.currentTarget.attributes.value.value||"",newPage=this.designerUtil.getDefaultPage();newPage.pageType=pageType;var pages=this.props.pages||{};pages[newPage.page_id]=newPage,this.initializeLayout(this.rootEl),this.props.updateStore({updates:{active_page_id:newPage.page_id,pages:pages}})}},{key:"autoPopulate",value:function(){}},{key:"saveSlides",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(){var activePage,pagesInStore,_self,_slideRes2,activePageInStore,widgets,_this7=this;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(activePage=this.props.pages&&this.props.pages[this.props.active_page_id],pagesInStore=this.props.pages,activePage.name&&activePage.scope&&activePage.path&&activePage.model&&activePage.modelscope){_context8.next=8;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Enter mandatory fields in general tab"}),alert("Enter mandatory fields in general tab"),_context8.next=23;break;case 8:if(_self=this,!activePage.isNew){_context8.next=14;break}return _context8.next=12,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlide",{Name:activePage.name,Scope:activePage.scope,Path:activePage.path,Type:activePage.pageType});case 12:(_slideRes2=_context8.sent)&&_slideRes2.uid&&(_self.props.addFlashMessage({title:"Success - ",subtitle:"Page updated!"}),(activePageInStore=(activePageInStore=pagesInStore[this.props.active_page_id])||{}).isNew&&(activePageInStore.isNew=!1,pagesInStore[_slideRes2.uid]=activePageInStore,delete pagesInStore[this.props.active_page_id]),_self.props.updateStore({updates:{active_page_id:_slideRes2.uid,pages:pagesInStore,reload_slides:!0}}));case 14:return _context8.next=16,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelName",Value:activePage.model,PropsSlide:slideRes.uid});case 16:return _context8.sent,_context8.next=19,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelScope",Value:activePage.modelscope,PropsSlide:slideRes.uid});case 19:_context8.sent,slideRes.uid,widgets=activePage.widgets||{},Object.keys(widgets).forEach(function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(widKey){return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:_this7.saveWidget(widKey,!1);case 1:case"end":return _context7.stop()}},_callee7,_this7)}));return function(_x6){return _ref8.apply(this,arguments)}}());case 23:case"end":return _context8.stop()}},_callee8,this)}));return function(){return _ref7.apply(this,arguments)}}()},{key:"saveWidgetRenderType",value:function(){var _ref9=_asyncToGenerator(_regeneratorRuntime.mark(function _callee9(widgetId,showNotification){return _regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(!widgetId||!this.props.activeWidget){_context9.next=4;break}return _context9.next=3,$qry.run("pd.replaceWidgetComponent",{widgetId:widgetId,componentId:this.props.activeWidget.Component});case 3:_context9.sent;case 4:case"end":return _context9.stop()}},_callee9,this)}));return function(_x7,_x8){return _ref9.apply(this,arguments)}}()},{key:"saveWidget",value:function(){var _ref10=_asyncToGenerator(_regeneratorRuntime.mark(function _callee10(widgetId,showNotification){var widget,props,widgetProps,currentWidgetProps,widgetPropsInDB,orderedWidgetPropsInDB,widgetPropIds2Remove,curWidgetPropName,deltaWidgetProps2Update,activePage,_this8=this;return _regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(!(widgetId&&this.props.activePage&&this.props.activePage.widgets)){_context10.next=21;break}if(!(widget=this.props.activePage.widgets[widgetId])){_context10.next=21;break}return props=widget.props,widgetProps=[],[],_context10.next=8,$qry._run('query($input:JSON){\n                        MetaWidgetProps{\n                            MetaWidgetPropsFind(filter: $input) @_(get: "edges"){\n                                edges @_(keyBy: "node.name", mapValues:"node"){\n                                    node{\n                                        uid\n                                        name\n                                        value\n                                    }\n                                }\n                            }\n                        }\n                    }',{input:{where:{Widget:widgetId}}},"data.MetaWidgetProps.MetaWidgetPropsFind");case 8:if(currentWidgetProps=_context10.sent,widgetPropsInDB=Object.assign({},currentWidgetProps),orderedWidgetPropsInDB=[],props&&Object.keys(props).forEach(function(key){var widgetProp={},widgetPropInDB={};currentWidgetProps&&Object.keys(currentWidgetProps).indexOf(key)>-1&&delete currentWidgetProps[key],widgetProp.name=key,(props[key]||0==props[key])&&(widgetProp.value="tabs"==key?props[key]:"FieldName"==key?props[key].startsWith("@@[")?props[key]:"@@["+props[key]+"]":props[key],widgetProp.Widget=widgetId,widgetProps.push(widgetProp)),widgetPropInDB.name=key,widgetPropsInDB&&widgetPropsInDB[key]&&(widgetPropsInDB[key].value||0==widgetPropsInDB[key].value)&&(widgetPropInDB.value="tabs"==key?widgetPropsInDB[key].value:"FieldName"==key?widgetPropsInDB[key].value.startsWith("@@[")?widgetPropsInDB[key]:"@@["+widgetPropsInDB[key]+"]":widgetPropsInDB[key].value,widgetPropInDB.Widget=widgetId,orderedWidgetPropsInDB.push(widgetPropInDB))}),!(widgetProps&&widgetProps.length>0)){_context10.next=21;break}if(!(currentWidgetProps&&Object.keys(currentWidgetProps).length>0)){_context10.next=18;break}for(curWidgetPropName in widgetPropIds2Remove=[],currentWidgetProps)currentWidgetProps[curWidgetPropName].uid&&widgetPropIds2Remove.push(currentWidgetProps[curWidgetPropName].uid);return _context10.next=18,$qry._run("mutation($inputData:MetaWidgetPropsDestroyAllInput!) {\n                                MetaWidgetPropsDestroyAll(input:$inputData){\n                                    obj\n                                }\t}",{inputData:{where:{uid:{inq:widgetPropIds2Remove}}}},"data.MetaWidgetPropsDestroyAll.obj");case 18:deltaWidgetProps2Update=[],_.isEqual(widgetProps,orderedWidgetPropsInDB)||widgetProps.map(function(widgetProp){if(widgetPropsInDB&&widgetPropsInDB[widgetProp.name]){var persistedWidgetProp={name:widgetProp.name,value:widgetPropsInDB[widgetProp.name].value,Widget:widgetId};_.isEqual(widgetProp,persistedWidgetProp)||"boolean"==typeof widgetProp.value&&widgetProp.value==("true"==persistedWidgetProp.value)||deltaWidgetProps2Update.push(widgetProp)}else deltaWidgetProps2Update.push(widgetProp)}),deltaWidgetProps2Update&&deltaWidgetProps2Update.length>0&&GraphQLDataUtil().saveMultiple("pd.saveMetaWidgetProperty",deltaWidgetProps2Update).then(function(data){showNotification&&_this8.addFlashMessageDebounce({title:"Success - ",subtitle:"Updated widget!",timeout:500})});case 21:(activePage=Object.assign({},this.props.activePage)).layouts=activePage.layouts||{},activePage.layouts.widgets=activePage.layouts.widgets||{},activePage.layouts.widgets[activePage.currentLayout||"default"]=activePage.widgets,this.props.updateStore({updates:{activePage:activePage}});case 26:case"end":return _context10.stop()}},_callee10,this)}));return function(_x9,_x10){return _ref10.apply(this,arguments)}}()},{key:"deleteSlideSlot",value:function(){var _ref11=_asyncToGenerator(_regeneratorRuntime.mark(function _callee11(slotId){var activePage,widgetId,currentLayout,active_widget_id;return _regeneratorRuntime.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:if(this,!((activePage=this.props.pages&&this.props.pages[this.props.active_page_id])&&activePage.slots&&activePage.slots[slotId])){_context11.next=13;break}return _context11.next=5,this.designerUtil.deleteSlot(slotId,activePage.name);case 5:widgetId=activePage.slots[slotId].Widget,delete(activePage=Object.assign({},this.props.activePage)).slots[slotId],delete activePage.widgets[widgetId],currentLayout=this.props.activePage&&this.props.activePage.currentLayout?this.props.activePage.currentLayout:"default",activePage.layouts&&activePage.layouts&&(activePage.layouts.slots=activePage.layouts.slots||{},activePage.layouts.slots[currentLayout]=activePage.slots,activePage.layouts.widgets=activePage.layouts.widgets||{},activePage.layouts.widgets[currentLayout]=activePage.widgets),active_widget_id=this.props.active_widget_id==widgetId?-1:this.props.active_widget_id,this.props.updateStore({updates:{activePage:activePage,active_widget_id:active_widget_id}});case 13:case"end":return _context11.stop()}},_callee11,this)}));return function(_x11){return _ref11.apply(this,arguments)}}()},{key:"deletePage",value:function(){var _ref12=_asyncToGenerator(_regeneratorRuntime.mark(function _callee12(){var allPages,activePage,newActivePageId;return _regeneratorRuntime.wrap(function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:allPages=this.props.pages,activePage=allPages[this.props.active_page_id],this.designerUtil.deletePage(activePage,this.props.active_page_id),delete allPages[this.props.active_page_id],newActivePageId=allPages&&Object.keys(allPages).length>0?Object.keys(allPages)[0]:"",this.props.updateStore({updates:{pages:allPages,active_page_id:newActivePageId}});case 6:case"end":return _context12.stop()}},_callee12,this)}));return function(){return _ref12.apply(this,arguments)}}()},{key:"deleteLayout",value:function(){var _ref13=_asyncToGenerator(_regeneratorRuntime.mark(function _callee13(){var self,_this9=this;return _regeneratorRuntime.wrap(function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:self=this,this.props.activePage.currentLayout&&"default"!=this.props.activePage.currentLayout?$script.runAtServer("studio.deleteLayout",{pageId:this.props.active_page_id,layout:this.props.activePage.currentLayout}).then(function(data){var deletedLayout=self.props.activePage.currentLayout,activePage=Object.assign({},self.props.activePage),updatedSlots={};Object.keys(activePage.layouts.slots).map(function(layoutName){layoutName!=deletedLayout&&(updatedSlots[layoutName]=activePage.layouts.slots[layoutName])}),activePage.layouts.slots=updatedSlots;var updatedWidgets={};Object.keys(activePage.layouts.widgets).map(function(layoutName){layoutName!=deletedLayout&&(updatedWidgets[layoutName]=activePage.layouts.widgets[layoutName])}),activePage.layouts.widgets=updatedWidgets,activePage.slots=activePage.layouts.slots.default,activePage.widgets=activePage.layouts.widgets.default,activePage.currentLayout="default",self.props.addFlashMessage({title:"Success - ",subtitle:"Layout "+_this9.props.activePage.currentLayout+" is deleted."}),self.props.updateStore({updates:{activePage:activePage}})}):self.props.addFlashMessage({title:"Warning - ",subtitle:"Default layout cannot be deleted"});case 2:case"end":return _context13.stop()}},_callee13,this)}));return function(){return _ref13.apply(this,arguments)}}()},{key:"render",value:function(){var _this10=this;if(this.props.as_widget&&!this.props.preview)return React.createElement("div",null,"Page designer will load at runtime...");if(!this.state.paletteLoaded)return React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});if(!this.state.bundlesLoaded)return this.loadNecessaryBundles(),React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});var activePage=this.props.pages&&this.props.active_page_id&&this.props.pages[this.props.active_page_id]?this.props.pages[this.props.active_page_id]:{},WidgetPalette=(JSON.stringify(activePage.items||[]),activePage.page_id,JSON.stringify(this.device[this.props.selectedDevice]),PageDesignerWidget()),contentTabArry=[];this.props.pages&&Object.keys(this.props.pages).forEach(function(pageKey){if(-1==pageKey.indexOf("$")&&_this10.props.pages[pageKey]&&(_this10.props.pages[pageKey].is_open||_this10.props.pages[pageKey].isNew)){var page=_this10.props.pages[pageKey];contentTabArry.push(React.createElement("div",{className:"contentTabItems"},React.createElement("div",{key:"-1",className:pageKey==_this10.props.active_page_id?"contentTabActive":"contentTab",onClick:function(){return _this10.makePageActive(page)}},page.name),React.createElement(Close20,{className:"closeTab",onClick:function(){return _this10.removePage(page)}})))}});var contentTabs=React.createElement("div",{class:"contentTabs"},contentTabArry),previewContent=null,pagewidgets=[];this.props.activePageWidgets&&Object.keys(this.props.activePageWidgets).map(function(widgetId){var widgetName=widgetId;_this10.props.activePageWidgets[widgetId]&&_this10.props.activePageWidgets[widgetId].props&&_this10.props.activePageWidgets[widgetId].props.Name&&(widgetName=_this10.props.activePageWidgets[widgetId].props.Name),pagewidgets.push({name:widgetName,id:widgetId})});this.state.activeAccordion;"page"==this.state.accordionLevel&&0!=this.state.activeAccordion&&1!=this.state.activeAccordion&&4!=this.state.activeAccordion&&5!=this.state.activeAccordion?this.setState({activeAccordion:1}):"widget"==this.state.accordionLevel&&2!=this.state.activeAccordion&&3!=this.state.activeAccordion&&this.setState({activeAccordion:2});var pageConfigurations=activePage.isNew?null:React.createElement(Tab,{label:"Settings",onClick:function(){_this10.setState({widgetChanged:1})}},React.createElement(Accordion,{align:"end",style:{overflowY:"auto"}},"page"==this.state.accordionLevel?React.createElement(React.Fragment,null,React.createElement(AccordionItem,{open:0==this.state.activeAccordion,style:{marginTop:10,overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this10.setState({activeAccordion:0})},onHeadingClick:function(){},title:"Page Properties"},React.createElement("page-designer-general",null)),React.createElement(AccordionItem,{open:4==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this10.setState({activeAccordion:4})},onHeadingClick:function(){},title:"Page Actions"},React.createElement("page-designer-page-actions",null)),React.createElement(AccordionItem,{open:1==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this10.setState({activeAccordion:1})},onHeadingClick:function(){},title:"Page Widgets"},React.createElement("srs-simple-list",{items:JSON.stringify(pagewidgets),varname:"widgets",enableitemselect:"true",unique:"true",singlecolumn:"true",alignment:"left"})),React.createElement(AccordionItem,{open:5==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this10.setState({activeAccordion:5})},onHeadingClick:function(){},title:"Modal Actions"},React.createElement("page-designer-actions",{modal:!0,lite:!0}))):React.createElement(React.Fragment,null,React.createElement("div",{className:"widgetPropHeader",onClick:function(e){_this10.setState({accordionLevel:"page",activeAccordion:1,active_widget_id:""})},style:{cursor:"pointer",display:"inline-block",clear:"both",float:"left",textAlign:"left",padding:10,border:"1px solid grey",backgroundColor:"#eff2f4",width:"100%"}},React.createElement(ArrowLeft,{style:{cursor:"pointer"}}),React.createElement("span",{style:{marginLeft:"30%",cursor:"pointer"}},"Widget Details")),React.createElement(AccordionItem,{open:2==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem",clear:"both"},onClick:function(){_this10.setState({activeAccordion:2})},onHeadingClick:function(){},title:"Widget Properties"},React.createElement("page-designer-props",null)),React.createElement(AccordionItem,{open:3==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this10.setState({activeAccordion:3})},onHeadingClick:function(){},title:"Widget Actions"},React.createElement("page-designer-actions",{lite:!0})))));React.createElement("div",{className:"eidtor-toggle-maximize"},React.createElement(Minimize16,{onClick:function(){_this10.props.updateStore({updates:{showRightPane:!0}})}}));var slideSearch=React.createElement("slide-selection-panel",null),notificationBar=this.props.embedded+""!="true"&&this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{styles:JSON.stringify({position:"fixed",width:"30%",right:10,minHeight:100,overflow:"auto",display:"block",zIndex:99999,bottom:5})}):null,previewItem=null,randomNumber=Date.now();1==this.state.showPreview?previewItem=React.createElement("new-widget-action",{key:"waction"+randomNumber}):1==this.state.showCreateLayout?previewItem=React.createElement("layout-creator",{key:"layout"+randomNumber}):1==this.state.showInlinePreview?previewItem=React.createElement("inline-preview",{path:this.props.activePage.path}):1==this.state.showIDE?(this.showIDEEl=this.showIDEEl?this.showIDEEl:React.createElement("srs-iframe",{key:"codeeditor"+randomNumber,propkey:"codeeditor"+randomNumber,url:"/code-editor",width:"100%",height:.8*screen.height}),previewItem=this.showIDEEl):1==this.state.showQueryEditor?(this.showQueryEditorEl=this.showQueryEditorEl?this.showQueryEditorEl:React.createElement("srs-iframe",{key:"querybuilder"+randomNumber,propkey:"codeeditor"+randomNumber,url:"/query-builder",width:"100%",height:.8*screen.height}),previewItem=this.showQueryEditorEl):1==this.state.showScriptRunner?(this.showScriptRunnerEl=this.showScriptRunnerEl?this.showScriptRunnerEl:React.createElement("srs-iframe",{key:"scriptrunner"+randomNumber,propkey:"codeeditor"+randomNumber,url:"/script-runner",width:"100%",height:.8*screen.height}),previewItem=this.showScriptRunnerEl):1==this.state.showFormList&&(this.showFormListEl=this.showFormListEl?this.showFormListEl:React.createElement("srs-iframe",{key:"form-list"+randomNumber,propkey:"codeeditor"+randomNumber,url:"/formbuilder/scope/"+this.props.currentscope+"?debug=true&noheader=true",width:"100%",height:.8*screen.height}),previewItem=this.showFormListEl);var previewTarget="designer";previewTarget=1==this.state.showInlinePreview?"inline-preview":previewTarget,previewTarget=1==this.state.showIDE?"code-editor":previewTarget,previewTarget=1==this.state.showQueryEditor?"graphiql-view":previewTarget,previewTarget=1==this.state.showScriptRunner?"script-runner":previewTarget,previewTarget=1==this.state.showFormList?"form-list":previewTarget,previewTarget=1==this.state.showCreateLayout?"create-layout":previewTarget;var previewKey=1==this.state.showPreview||1==this.state.showCreateLayout?"designer":1==this.state.showInlinePreview?"inline-preview":"designer";previewKey=1==this.state.showCreateLayout?"create-layout":previewKey,previewKey=this.state.showInlineEmbeddedPreview?this.state.inlinePreviewKey:previewKey+randomNumber;var inlinePreviewProps={};switch(previewTarget){case"inline-preview":inlinePreviewProps={size:"xl",quickpreview:"true"};break;case"new-page-action":case"new-widget-action":case"code-editor":case"graphiql-view":case"script-runner":case"form-list":case"create-layout":inlinePreviewProps={size:"xl"}}var showPreview=1==this.state.showPreview||1==this.state.showCreateLayout||1==this.state.showInlinePreview||this.state.showIDE||this.state.showQueryEditor||this.state.showScriptRunner||this.state.showFormList;this.previewComponentEls=this.previewComponentEls?this.previewComponentEls:{};var previewComponentEl=this.previewComponentEls[previewTarget]?this.previewComponentEls[previewTarget]:React.createElement("preview-component",_extends({key:previewKey,target:previewTarget},inlinePreviewProps),previewItem);this.previewComponentEls[previewTarget]=previewComponentEl;var previewComponent4IDE=React.createElement("div",{style:{display:showPreview&&"code-editor"==previewTarget?"block":"none"}},this.previewComponentEls["code-editor"]),previewComponent4QueryBuilder=React.createElement("div",{style:{display:showPreview&&"graphiql-view"==previewTarget?"block":"none"}},this.previewComponentEls["graphiql-view"]),previewComponent4ScriptRunner=React.createElement("div",{style:{display:showPreview&&"script-runner"==previewTarget?"block":"none"}},this.previewComponentEls["script-runner"]),previewComponent4FormList=React.createElement("div",{style:{display:showPreview&&"form-list"==previewTarget?"block":"none"}},this.previewComponentEls["form-list"]),previewComponent=showPreview&&"code-editor"!=previewTarget&&"graphiql-view"!=previewTarget&&"script-runner"!=previewTarget?this.previewComponentEls[previewTarget]:null,widgetPalette=React.createElement(Tab,{label:"Palette",style:{display:activePage.isNew?"none":"flex"},onClick:function(){_this10.setState({widgetChanged:2})}},React.createElement(WidgetPalette,{palettes:JSON.stringify(this.palettes)})),inlinePreviewClassName=this.state.showInlineEmbeddedPreview?"inlinePreview":"inlinePreviewHide",inlineEmbeddedPreview=this.state.showInlineEmbeddedPreview?React.createElement("inline-preview",{path:this.props.activePage.path,key:previewKey}):null;return React.createElement("div",{className:"sr-page-topCotainer"},React.createElement("style",null,'@import url("/thirdpartylib/gridstack/corestyles.css");'),React.createElement("div",{className:"quickhooks"},React.createElement(Editor32,{onClick:function(){_this10.setState({showFormList:!1,showScriptRunner:!1,showIDE:!0,showQueryEditor:!1,showInlineEmbeddedPreview:!1,showCreateLayout:!1,showPreview:!1}),_this10.props.updateStore({updates:{showpreview:!0}})}}),React.createElement(Database32,{onClick:function(){_this10.setState({showFormList:!1,showScriptRunner:!1,showIDE:!1,showQueryEditor:!0,showInlineEmbeddedPreview:!1,showCreateLayout:!1,showPreview:!1}),_this10.props.updateStore({updates:{showpreview:!0}})}}),React.createElement(ScriptRunner32,{onClick:function(){_this10.setState({showFormList:!1,showScriptRunner:!0,showIDE:!1,showQueryEditor:!1,showInlineEmbeddedPreview:!1,showCreateLayout:!1,showPreview:!1}),_this10.props.updateStore({updates:{showpreview:!0}})}}),React.createElement(Account32,{onClick:function(){_this10.setState({showFormList:!0,showScriptRunner:!1,showIDE:!1,showQueryEditor:!1,showInlineEmbeddedPreview:!1,showCreateLayout:!1,showPreview:!1}),_this10.props.updateStore({updates:{showpreview:!0}})}}),React.createElement(Preview32,{onClick:function(){_this10.setState({showInlineEmbeddedPreview:!_this10.state.showInlineEmbeddedPreview})}})),notificationBar,previewComponent,previewComponent4IDE,previewComponent4QueryBuilder,previewComponent4ScriptRunner,previewComponent4FormList,React.createElement("div",{className:"sidebar"},React.createElement("div",{style:{position:"absolute",backgroundColor:"#77b07f",zIndex:2e4,top:80,left:0,height:"100vh",width:"2%",display:this.state.isSideBarOpen?"none":"block"}}),React.createElement("div",{style:{position:"relative",float:"right",width:32,height:32,cursor:"pointer",zIndex:100},onClick:function(e){if($(e.target)){var sideBarEl=$(e.target).closest(".sidebar");if(_this10.state.isSideBarOpen)sideBarEl.css("width","2%"),sideBarEl.css("min-width","2%"),sideBarEl.css("background-color","rgb(119, 174, 127)"),sideBarEl.parent().find(".sr-page-editorial").css("width","98%");else sideBarEl.css("width","18%"),sideBarEl.css("min-width","10%"),sideBarEl.css("background-color","white"),sideBarEl.parent().find(".sr-page-editorial").css("width","82%");_this10.setState({isSideBarOpen:!_this10.state.isSideBarOpen})}}},this.state.isSideBarOpen?React.createElement(ChevronLeft,{style:{cursor:"pointer"}}):React.createElement(ChevronRight,{style:{cursor:"pointer"}})),React.createElement("div",{className:"sr-new-file-menu"},React.createElement(HeaderMenu,{"aria-label":"File",menuLinkName:"File",style:{backgroundColor:"#181618"}},React.createElement(HeaderMenuItem,{onClick:this.handleNewFile},"New Page"),React.createElement(HeaderMenuItem,{onClick:this.deletePage},"Delete Page"),React.createElement(HeaderMenuItem,{onClick:this.clonePage},"Duplicate Page"),React.createElement(HeaderMenuItem,{onClick:this.createLayout},"New Layout"),React.createElement(HeaderMenuItem,{onClick:this.deleteLayout},"Delete Layout"),React.createElement(HeaderMenuItem,{onClick:this.autoPopulate},"Auto-Layout"),React.createElement(HeaderMenuItem,{onClick:this.inlinePreview},"Quick Preview"),React.createElement(HeaderMenuItem,{onClick:function(){return window.open(_this10.props.activePage.path+"?nocache=true&debug=true")}},"Runtime"))),React.createElement(Tabs,{className:"sr-nav-tab",selected:this.state.widgetChanged,style:{width:"100%"}},React.createElement(Tab,{label:"Page List",onClick:function(){_this10.setState({widgetChanged:0})}},slideSearch),pageConfigurations,widgetPalette)),React.createElement("div",{className:"sr-page-editorial"},React.createElement("div",{className:"content dualmode",ref:"gridarea"},React.createElement("div",{className:"topContainerWithoutPreview"},contentTabs,React.createElement("div",{className:"trash"}),activePage.pagestyles?React.createElement("style",null,activePage.pagestyles):null,React.createElement("div",{className:"gridContent"},React.createElement("div",{className:"grid-stack grid-stack-96 gridCanvas",ref:"canvas",style:{display:activePage.isNew?"none":"block"}}),React.createElement("div",{className:"welcomePage",style:{display:activePage.isNew?"block":"none"}},React.createElement(Tile,{style:{backgroundColor:"rgb(127, 86, 33)",color:"white",textAlign:"center",fontSize:"xx-large",fontStyle:"italic"}},"Hello! Welcome to the new page creation form. "),React.createElement("page-designer-general",{style:{position:"absolute",width:"50%",marginLeft:"10%",marginTop:50}})))),previewContent)),React.createElement("div",{className:inlinePreviewClassName},React.createElement(Close32,{className:"closePreview",onClick:function(e){return _this10.setState({showInlineEmbeddedPreview:!1})}}),inlineEmbeddedPreview))}}]),_PageDesigner_}(React.Component),_export("PageDesigner",PageDesigner=function(props){return _PageDesigner_}),_export("PageDesigner",PageDesigner)}}}),System.register("component/studio/PageDesignerActions.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context4){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,_PageDesignerActions_,PageDesignerActions,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button}],execute:function(){_PageDesignerActions_=function(_React$Component){function _PageDesignerActions_(props){_classCallCheck(this,_PageDesignerActions_);var _this=_possibleConstructorReturn(this,(_PageDesignerActions_.__proto__||Object.getPrototypeOf(_PageDesignerActions_)).call(this,props));return _this.state={showPreview:!1,activeActionId:"",items:[],reload:!1},_this.getData=_this.getData.bind(_this),$ele.registerElement("NewWidgetAction","mmf","React"),_this}return _inherits(_PageDesignerActions_,_React$Component),_createClass(_PageDesignerActions_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var items;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.getData();case 2:items=_context.sent,this.setState({items:items});case 4:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"getData",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var widgetActionNames,widgetId,filter,items;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return widgetActionNames=[],widgetId=this.props.modal+""=="true"?"pagemodal_"+this.props.active_page_id:this.props.active_widget_id,filter={where:{Widget:widgetId}},_context2.next=5,$qry.getRecords("MetaWidgetAction",filter,["uid","Name"]);case 5:return(items=_context2.sent)&&items.length>0&&items.map(function(item){item.Name&&widgetActionNames.push({name:item.Name,id:item.uid})}),_context2.abrupt("return",widgetActionNames);case 8:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(prevProps){var items,activeActionId,_items;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(prevProps.showpreview==this.props.showpreview||prevProps.showpreview_target==this.props.showpreview_target||"widget_actions"!=this.props.showpreview_target){_context3.next=8;break}return _context3.next=3,this.getData();case 3:items=_context3.sent,this.setState({items:items,activeActionId:"",showPreview:!1,reload:!this.state.reload}),this.props.updateStore({updates:{showpreview_target:""}}),_context3.next=9;break;case 8:prevProps.active_list_item!=this.props.active_list_item&&(activeActionId=this.props.active_list_item.split("@@")[0],this.setState({activeActionId:activeActionId,showPreview:!0,reload:!this.state.reload}),this.props.updateStore({updates:{showpreview:!0}}));case 9:if(prevProps.active_widget_id==this.props.active_widget_id){_context3.next=14;break}return _context3.next=12,this.getData();case 12:_items=_context3.sent,this.setState({items:_items});case 14:case"end":return _context3.stop()}},_callee3,this)}));return function(_x){return _ref3.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this,actionProps={active_page_id:this.props.active_page_id};this.state.activeActionId&&(actionProps.rowinfo=JSON.stringify({uid:this.state.activeActionId})),this.props.modal&&(actionProps.modal=!0);var previewItem=React.createElement("new-widget-action",actionProps),previewComponent=1==this.state.showPreview?React.createElement("preview-component",_extends({key:"actionform",target:"widget_actions"},{size:"xl"}),previewItem):null;return React.createElement(React.Fragment,null,previewComponent,React.createElement(Button,{waves:"light",style:{marginLeft:20,position:"absolute"},size:"small",onClick:function(e){_this2.setState({activeActionId:"",showPreview:!0,reload:!_this2.state.reload}),_this2.props.updateStore({updates:{showpreview:!0}})}},"New"),this.state.items&&this.state.items.length>0?React.createElement("srs-simple-list",{items:JSON.stringify(this.state.items),varname:"widgetactions",unique:"true",singlecolumn:"true",alignment:"left",enableitemselect:"true"}):React.createElement("div",{style:{textAlign:"center",height:80,paddingTop:50,fontSize:"medium",color:"#457efd"}},"No actions to show!"))}}]),_PageDesignerActions_}(React.Component),_export("PageDesignerActions",PageDesignerActions=function(props){return _PageDesignerActions_}),_export("PageDesignerActions",PageDesignerActions),_export("default",PageDesignerActions),_export("states",states=[{KeyName:"active_list_item",AccessPath:"active_list_item.widgetactions",DefaultValue:'{"active_list_item": {"widgetactions": ""}}'},{KeyName:"widgetActions",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}.actions",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {"${active_widget_id}": {"actions":{}}}}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id": ""}'},{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PageDesignerActions/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context4){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,_PageDesignerActions_,PageDesignerActions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button}],execute:function(){_PageDesignerActions_=function(_React$Component){function _PageDesignerActions_(props){_classCallCheck(this,_PageDesignerActions_);var _this=_possibleConstructorReturn(this,(_PageDesignerActions_.__proto__||Object.getPrototypeOf(_PageDesignerActions_)).call(this,props));return _this.state={showPreview:!1,activeActionId:"",items:[],reload:!1},_this.getData=_this.getData.bind(_this),$ele.registerElement("NewWidgetAction","mmf","React"),_this}return _inherits(_PageDesignerActions_,_React$Component),_createClass(_PageDesignerActions_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var items;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.getData();case 2:items=_context.sent,this.setState({items:items});case 4:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"getData",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var widgetActionNames,widgetId,filter,items;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return widgetActionNames=[],widgetId=this.props.modal+""=="true"?"pagemodal_"+this.props.active_page_id:this.props.active_widget_id,filter={where:{Widget:widgetId}},_context2.next=5,$qry.getRecords("MetaWidgetAction",filter,["uid","Name"]);case 5:return(items=_context2.sent)&&items.length>0&&items.map(function(item){item.Name&&widgetActionNames.push({name:item.Name,id:item.uid})}),_context2.abrupt("return",widgetActionNames);case 8:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(prevProps){var items,activeActionId,_items;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(prevProps.showpreview==this.props.showpreview||prevProps.showpreview_target==this.props.showpreview_target||"widget_actions"!=this.props.showpreview_target){_context3.next=8;break}return _context3.next=3,this.getData();case 3:items=_context3.sent,this.setState({items:items,activeActionId:"",showPreview:!1,reload:!this.state.reload}),this.props.updateStore({updates:{showpreview_target:""}}),_context3.next=9;break;case 8:prevProps.active_list_item!=this.props.active_list_item&&(activeActionId=this.props.active_list_item.split("@@")[0],this.setState({activeActionId:activeActionId,showPreview:!0,reload:!this.state.reload}),this.props.updateStore({updates:{showpreview:!0}}));case 9:if(prevProps.active_widget_id==this.props.active_widget_id){_context3.next=14;break}return _context3.next=12,this.getData();case 12:_items=_context3.sent,this.setState({items:_items});case 14:case"end":return _context3.stop()}},_callee3,this)}));return function(_x){return _ref3.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this,actionProps={active_page_id:this.props.active_page_id};this.state.activeActionId&&(actionProps.rowinfo=JSON.stringify({uid:this.state.activeActionId})),this.props.modal&&(actionProps.modal=!0);var previewItem=React.createElement("new-widget-action",actionProps),previewComponent=1==this.state.showPreview?React.createElement("preview-component",_extends({key:"actionform",target:"widget_actions"},{size:"xl"}),previewItem):null;return React.createElement(React.Fragment,null,previewComponent,React.createElement(Button,{waves:"light",style:{marginLeft:20,position:"absolute"},size:"small",onClick:function(e){_this2.setState({activeActionId:"",showPreview:!0,reload:!_this2.state.reload}),_this2.props.updateStore({updates:{showpreview:!0}})}},"New"),this.state.items&&this.state.items.length>0?React.createElement("srs-simple-list",{items:JSON.stringify(this.state.items),varname:"widgetactions",unique:"true",singlecolumn:"true",alignment:"left",enableitemselect:"true"}):React.createElement("div",{style:{textAlign:"center",height:80,paddingTop:50,fontSize:"medium",color:"#457efd"}},"No actions to show!"))}}]),_PageDesignerActions_}(React.Component),_export("PageDesignerActions",PageDesignerActions=function(props){return _PageDesignerActions_}),_export("PageDesignerActions",PageDesignerActions)}}}),System.register("component/studio/PageDesignerGeneral.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/settings/16","@carbon/icons-react/lib/launch/16","client/script/mmf/GraphQLDataUtil.js","lodash.clonedeep","component/studio/PreviewComponent/Definition.js","component/studio/ShowTableMappingDialog/Definition.js?now=126"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,TextArea,Button,Select,SelectItem,Settings32,Launch16,GraphQLDataUtil,cloneDeep,_PageDesignerGeneral_,PageDesignerGeneral,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,TextArea=_carbonComponentsReact.TextArea,Button=_carbonComponentsReact.Button,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_carbonIconsReactLibSettings){Settings32=_carbonIconsReactLibSettings.default},function(_carbonIconsReactLibLaunch){Launch16=_carbonIconsReactLibLaunch.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_componentStudioPreviewComponentDefinitionJs){_componentStudioPreviewComponentDefinitionJs.default},function(_componentStudioShowTableMappingDialogDefinitionJsNow){_componentStudioShowTableMappingDialogDefinitionJsNow.default}],execute:function(){_PageDesignerGeneral_=function(_React$Component){function _PageDesignerGeneral_(props){_classCallCheck(this,_PageDesignerGeneral_);var _this=_possibleConstructorReturn(this,(_PageDesignerGeneral_.__proto__||Object.getPrototypeOf(_PageDesignerGeneral_)).call(this,props));return _this.state={addedFields:[],pagename_invalid:!1,pagescope_invalid:!1,pagepath_invalid:!1,pagemodel_invalid:!1,pageNameUpdated:!1,keyValueLists:{},reload:!1,activepage:_this.props.activepage?_this.props.activepage:{}},_this.updateSlideName=_this.updateSlideName.bind(_this),_this.updateSlideScope=_this.updateSlideScope.bind(_this),_this.updateSlidePath=_this.updateSlidePath.bind(_this),_this.removeSpecialCharacters=_this.removeSpecialCharacters.bind(_this),_this}return _inherits(_PageDesignerGeneral_,_React$Component),_createClass(_PageDesignerGeneral_,[{key:"removeSpecialCharacters",value:function(val){return val.replace(/[^a-zA-Z0-9]/g,"_")}},{key:"updateSlideName",value:function(event){var activepage=Object.assign({},this.state.activepage);activepage.name=this.removeSpecialCharacters(event.target.value),this.setState({pageNameUpdated:!0,activepage:activepage})}},{key:"updateSlideScope",value:function(event){var activepage=Object.assign({},this.state.activepage);activepage.scope=this.removeSpecialCharacters(event.target.value),this.setState({activepage:activepage})}},{key:"updateSlidePath",value:function(event){var activepage=Object.assign({},this.state.activepage);activepage.path=event.target.value,this.setState({activepage:activepage})}},{key:"showTableMappingDialog",value:function(){this.props.updateStore({updates:{showpreview:!0}}),this.setState({showPreview:!0,reload:!this.state.reload})}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this2=this;if(prevProps.active_page_id!=this.props.active_page_id||prevProps.activepage.isNew!=this.props.activepage.isNew)this.setState({activepage:Object.assign({},this.props.activepage)});else if(prevProps.activepage.currentLayout!=this.props.activepage.currentLayout)this.setState({activepage:Object.assign({},this.props.activepage)});else if(prevProps.activepage.model!=this.props.activepage.model){var activePage=Object.assign({},this.state.activepage);activePage.isNew=this.props.activepage.isNew,activePage.model=this.props.activepage.model,activePage.modelscope=this.props.activepage.modelscope,this.setState({activepage:activePage})}prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"general"==this.props.showpreview_target&&(this.setState({showPreview:!1,reload:!this.state.reload,showBundles:!1}),this.props.updateStore({updates:{showpreview_target:""}})),_.isEqual(prevProps.keyvaluepair,this.props.keyvaluepair)||this.props.keyvaluepair&&Object.keys(this.props.keyvaluepair).length>0&&Object.keys(this.props.keyvaluepair).map(function(varName){if(!_.isEqual(prevProps.keyvaluepair[varName],_this2.props.keyvaluepair[varName])){var newKeyValueLists=cloneDeep(_this2.state.keyValueLists);newKeyValueLists[varName]=cloneDeep(_this2.props.keyvaluepair[varName]),_this2.setState({keyValueLists:newKeyValueLists})}})}},{key:"closePreviewWindow",value:function(){this.setState({reload:!this.state.reload})}},{key:"render",value:function(){var previewComponent,_this3=this,showBundlesPage=React.createElement("srs-iframe",{key:"pagebundles",url:"/pagebundles/pageid/"+this.props.active_page_id+"?noheader=true",width:"100%",height:.8*screen.height});previewComponent=1==this.state.showPreview?this.state.showBundles?React.createElement("preview-component",{target:"general",size:"xl"},showBundlesPage):React.createElement("preview-component",{target:"general"},React.createElement("show-table-mapping-dialog",null)):null;var extraProps={},pageParameterItems=[];this.state.keyValueLists&&this.state.keyValueLists[this.props.active_page_id+"_params"]?pageParameterItems=this.state.keyValueLists[this.props.active_page_id+"_params"]:this.state.activepage.props&&Object.keys(this.state.activepage.props).map(function(paramKey){pageParameterItems.push({name:paramKey,value:_this3.state.activepage.props[paramKey]})});var layoutList=[];this.state.activepage&&this.state.activepage.layouts&&this.state.activepage.layouts.slots?Object.keys(this.state.activepage.layouts.slots).map(function(layoutName){return layoutList.push(React.createElement(SelectItem,{value:layoutName,text:layoutName}))}):layoutList.push(React.createElement(SelectItem,{value:"default",text:"default"}));var _ref2,_ref,containerStyles=this.state.activepage&&this.state.activepage.isNew?{padding:20,backgroundColor:"white",maxHeight:"60vh",overflowY:"auto"}:{};return React.createElement("div",{className:"page-gen-body",style:containerStyles},previewComponent,React.createElement(TextInput,_extends({name:"slideName",className:"formFieldInputText"},extraProps,{labelText:"Name",helperText:"*Required",placeholder:"Enter Page Name...",invalid:this.state.pagename_invalid,invalidText:"Value Required",value:this.state.activepage&&this.state.activepage.name||"",onChange:this.updateSlideName})),React.createElement(TextInput,{name:"slideScope",className:"formFieldInputText",helperText:"*Required",readOnly:"true",labelText:"Scope",placeholder:"Enter Page Scope...",invalid:this.state.pagescope_invalid,invalidText:"Value Required",value:this.state.activepage&&this.state.activepage.scope||this.props.currentscope||"",onChange:this.updateSlideScope}),React.createElement("div",{style:{display:"flex",width:"90%"}},React.createElement(TextInput,_extends({name:"slidePath",className:"formFieldInputText",helperText:"*Required"},extraProps,{labelText:"Path",invalid:this.state.pagepath_invalid,invalidText:"Value Required",placeholder:"Enter Page Path...",value:this.state.activepage&&this.state.activepage.path||"",onChange:this.updateSlidePath})),this.state.activepage&&1!=this.state.activepage.isNew?React.createElement("div",{style:{marginTop:35,cursor:"pointer"}},React.createElement(Launch16,{onClick:function(){return window.open(_this3.state.activepage.path+"?nocache=true&debug=true")}})):null),React.createElement("div",{className:"pageType",style:{textAlign:"left"}},React.createElement(Select,{labelText:"Type",defaultValue:this.state.activepage?this.state.activepage.pageType:"",value:this.state.activepage?this.state.activepage.pageType:"",onChange:function(e){var activepage=Object.assign({},_this3.state.activepage);activepage.pageType=e.target.value,_this3.setState({activepage:activepage})}},React.createElement(SelectItem,{value:"",text:"Choose page type"}),React.createElement(SelectItem,{value:"CreateView",text:"CreateView"}),React.createElement(SelectItem,{value:"EditView",text:"EditView"}),React.createElement(SelectItem,{value:"FreeForm",text:"Free Form"}))),React.createElement("div",{className:"pageType",style:{textAlign:"left"}},React.createElement(Select,{labelText:"Layout",defaultValue:this.state.activepage&&this.state.activepage.currentLayout?this.state.activepage.currentLayout:"default",value:this.state.activepage?this.state.activepage.currentLayout:"default",onChange:function(e){var activepage=Object.assign({},_this3.props.activepage);activepage.currentLayout=e.target.value,_this3.setState({activepage:activepage}),_this3.props.updateStore({updates:{activepage:activepage}})}},layoutList)),React.createElement("div",{className:"pageType",style:{textAlign:"left"}},React.createElement(TextArea,{labelText:"Page Styles",value:this.state.activepage&&this.state.activepage.pagestyles?this.state.activepage.pagestyles:"",onChange:function(e){var activepage=Object.assign({},_this3.props.activepage);activepage.pagestyles=e.target.value,_this3.setState({activepage:activepage})}},layoutList)),React.createElement("div",{className:"pageType",style:{textAlign:"left"}},React.createElement(Button,{style:{backgroundColor:"white",color:"black",textDecoration:"underline"},size:"small",onClick:function(e){_this3.props.updateStore({updates:{showpreview:!0}}),_this3.setState({showPreview:!0,showBundles:!0})}},"Bundle Configuration")),React.createElement("srs-key-value-pair",{varname:this.props.active_page_id+"_params",items:JSON.stringify(pageParameterItems),label:"Page Parameters",placeholder_name:"Enter Param Name...",placeholder_value:"Enter Default Value..."}),!this.state.activepage||"CreateView"!=this.state.activepage.pageType&&"EditView"!=this.state.activepage.pageType?null:React.createElement("div",{className:"field-mapper"},React.createElement(TextInput,{name:"slideModel",className:"formFieldInputText",labelText:"Model",placeholder:"Click gear icon to set the model",helperText:!this.state.activepage||"CreateView"!=this.state.activepage.pageType&&"EditView"!=this.state.activepage.pageType?"":"*Required",invalid:this.state.pagemodel_invalid,invalidText:"Value Required",value:this.state.activepage&&this.state.activepage.model||"",readOnly:!0}),this.state.activepage?React.createElement("div",{className:"mapper-adv"},React.createElement(Settings32,{onClick:function(){_this3.showTableMappingDialog()}})):null),React.createElement(Button,{waves:"light",size:"small",style:{marginTop:10,display:this.state.activepage&&this.state.activepage.isNew?"none":"block"},onClick:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(e){var payload,kvparams,queryParams,slideProps,_activePage,widgetRecords,visitedWidgetIds,widgetId,widgetActions,widgetActionIds,widgetActionId,widgetActionPayload,nameParts,newWidgetActionName,activePage;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return payload={slideId:_this3.props.active_page_id,Name:_this3.state.activepage.name,Scope:_this3.state.activepage.scope?_this3.state.activepage.scope:_this3.props.currentscope,Path:_this3.state.activepage.path,Type:_this3.state.activepage.pageType?_this3.state.activepage.pageType:"CreateView",Styles:_this3.state.activepage.pagestyles?_this3.state.activepage.pagestyles:""},_context.next=3,$qry._run("mutation($input: MetaSlideUpsertWithWhereInput!){\n                                        MetaSlideUpsertWithWhere(input: $input){\n                                            obj{\n                                                uid\n                                            }\n                                        }\n                                    }",{input:{where:{uid:_this3.props.active_page_id},data:payload}},"data.MetaSlideUpsertWithWhere.obj");case 3:if(!_this3.props.keyvaluepairs||!_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"]){_context.next=15;break}if(kvparams=_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"],queryParams=[],slideProps={},kvparams.map(function(paramKeyValue){paramKeyValue.name&&(queryParams.push({Name:paramKeyValue.name,Value:paramKeyValue.value,PropsSlide:_this3.props.active_page_id}),slideProps[paramKeyValue.name]=paramKeyValue.value)}),_context.t0=queryParams&&queryParams.length>0,!_context.t0){_context.next=12;break}return _context.next=12,GraphQLDataUtil().saveMultiple("pd.saveMetaSlideProps",queryParams);case 12:(_activePage=Object.assign({},_this3.state.activepage)).props=slideProps,_this3.setState({activepage:_activePage});case 15:if(!_this3.state.pageNameUpdated){_context.next=45;break}return _context.next=18,$qry._run('query($input:JSON){\n                                        MetaSlideSlot{\n                                            MetaSlideSlotFind(filter: $input) @_(get: "edges"){\n                                                edges @_(keyBy: "node.Widget", mapValues:"node"){\n                                                    node{\n                                                        uid\n                                                        Widget\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }',{input:{where:{Slide:_this3.props.active_page_id}}},"data.MetaSlideSlot.MetaSlideSlotFind");case 18:if(!((widgetRecords=_context.sent)&&Object.keys(widgetRecords).length>0)){_context.next=44;break}visitedWidgetIds=[],_context.t1=_regeneratorRuntime.keys(widgetRecords);case 22:if((_context.t2=_context.t1()).done){_context.next=44;break}if(widgetId=_context.t2.value,-1!=visitedWidgetIds.indexOf(widgetId)){_context.next=42;break}return visitedWidgetIds.push(widgetId),_context.next=28,$qry._run('query($input:JSON){\n                                                    MetaWidgetAction{\n                                                        MetaWidgetActionFind(filter: $input) @_(get: "edges"){\n                                                            edges @_(keyBy: "node.uid", mapValues:"node"){\n                                                                node{\n                                                                    uid\n                                                                    Name\n                                                                    Scope\n                                                                    Order\n                                                                    Widget\n                                                                    Definition\n                                                                    Active\n                                                                    Trigger\n                                                                }\n                                                            }\n                                                        }\n                                                    }\n                                                }',{input:{where:{Widget:widgetId}}},"data.MetaWidgetAction.MetaWidgetActionFind");case 28:if(widgetActions=_context.sent,!((widgetActionIds=Object.keys(widgetActions))&&widgetActionIds.length>0)){_context.next=42;break}_context.t3=_regeneratorRuntime.keys(widgetActions);case 32:if((_context.t4=_context.t3()).done){_context.next=42;break}return widgetActionId=_context.t4.value,widgetActionPayload=cloneDeep(widgetActions[widgetActionId]),nameParts=widgetActionPayload.Name.split("@@"),newWidgetActionName=nameParts[0]+"@@"+_this3.state.activepage.name+"_"+_this3.state.activepage.scope,widgetActionPayload.Name=newWidgetActionName,_context.next=40,$qry._run("mutation($input: MetaWidgetActionUpsertWithWhereInput!){\n                                                                MetaWidgetActionUpsertWithWhere(input: $input){\n                                                                    obj{\n                                                                        uid\n                                                                    }\n                                                                }\n                                                            }",{input:{where:{uid:widgetActionId},data:widgetActionPayload}},"data.MetaWidgetActionUpsertWithWhere.obj");case 40:_context.next=32;break;case 42:_context.next=22;break;case 44:_this3.setState({pageNameUpdated:!1});case 45:(activePage=Object.assign({},_this3.props.activepage)).name=_this3.state.activepage.name,activePage.scope=_this3.state.activepage.scope,activePage.path=_this3.state.activepage.path,activePage.pageType=_this3.state.activepage.pageType,activePage.pagestyles=_this3.state.activepage.pagestyles,_this3.props.updateStore({updates:{activepage:activePage,reload_slides:!0}}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page updated successfully!"});case 53:case"end":return _context.stop()}},_callee,_this3)})),function(_x){return _ref.apply(this,arguments)})},"Update"),React.createElement(Button,{waves:"light",size:"small",style:{clear:"both",marginTop:10,display:this.state.activepage&&this.state.activepage.isNew?"block":"none"},onClick:(_ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(e){var payload,isValid,pagesInStore,slideRes,activePageInStore,kvparams,queryParams,slots,widgets,slideProps,slotsAndWidgets,tobeActivePage;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(payload={Name:_this3.state.activepage.name,Scope:_this3.state.activepage.scope?_this3.state.activepage.scope:_this3.props.currentscope,Path:_this3.state.activepage.path,Type:_this3.state.activepage.pageType?_this3.state.activepage.pageType:"CreateView",Styles:_this3.state.activepage.pagestyles?_this3.state.activepage.pagestyles:""},isValid=!0,payload.Name&&"Unnamed"!=payload.Name||(isValid=!1,_this3.setState({pagename_invalid:!0})),payload.Scope||(isValid=!1,_this3.setState({pagescope_invalid:!0})),payload.Path||(isValid=!1,_this3.setState({pagepath_invalid:!0})),_this3.state.activepage.model||"CreateView"!=payload.Type&&"EditView"!=payload.Type||(isValid=!1,_this3.setState({pagemodel_invalid:!0})),isValid){_context2.next=10;break}_this3.props.addErrorMessage({title:"Error - ",subtitle:"Please fill the mandatory fields and try again...!"}),_context2.next=48;break;case 10:return pagesInStore=_this3.props.pages,_context2.next=13,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlide",payload);case 13:if(!(slideRes=_context2.sent)||!slideRes.uid){_context2.next=48;break}if(activePageInStore=pagesInStore[_this3.props.active_page_id],(activePageInStore=_extends({},activePageInStore,_this3.state.activepage)).isNew&&(activePageInStore.isNew=!1,activePageInStore.is_open=!0,pagesInStore[slideRes.uid]=activePageInStore,delete pagesInStore[_this3.props.active_page_id]),!_this3.props.keyvaluepairs||!_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"]){_context2.next=26;break}if(kvparams=_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"],queryParams=[],kvparams.map(function(paramKeyValue){paramKeyValue.name&&queryParams.push({Name:paramKeyValue.name,Value:paramKeyValue.value,PropsSlide:slideRes.uid})}),_context2.t0=queryParams&&queryParams.length>0,!_context2.t0){_context2.next=26;break}return _context2.next=26,GraphQLDataUtil().saveMultiple("pd.saveMetaSlideProps",queryParams);case 26:if("CreateView"!=payload.Type&&"EditView"!=payload.Type){_context2.next=31;break}return _context2.next=29,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelName",Value:activePageInStore.model,PropsSlide:slideRes.uid});case 29:return _context2.next=31,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelScope",Value:activePageInStore.modelscope,PropsSlide:slideRes.uid});case 31:return _context2.next=33,$script.runAtServer("pd.addDefaultWidget",{slideId:slideRes.uid});case 33:return slots={},widgets={},_context2.next=37,$qry.run("mmf.getSlideProps",{pageId:slideRes.uid});case 37:return slideProps=_context2.sent,_context2.next=40,$qry.run("pd.getExistingSlotsbySlideId",{Slide:slideRes.uid});case 40:(slotsAndWidgets=_context2.sent)&&slotsAndWidgets.length>0&&slotsAndWidgets.forEach(function(slotWidget){var slot=slotWidget.node;if(slot&&slot.uid){var slotData={};slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.width=slot.width||0,slotData.height=slot.height,slotData.minwidth=slot.minwidth,slotData.minheight=slot.minheight,slotData.maxwidth=slot.maxwidth,slotData.maxheight=slot.maxheight,slotData.resize=slot.resize,slotData.move=slot.move,slotData.Slide=slot.Slide,slotData.Widget=slot.Widget,slots[slot.uid]=slotData;var widgetData=slot.slotWidget;if(widgetData&&widgetData.uid){var widget={};widget.id=widgetData.uid,widget.Component=widgetData.Component,widget.name=widgetData.component.Name;var widgetProps=widgetData.widgetproperties;if(widgetProps&&widgetProps.edges&&widgetProps.edges.length>0){var props={};widgetProps.edges.forEach(function(propNode){var prop=propNode.node;props[prop.name]=prop.value}),widget.props=props}widget.props=widget.props||{};var componentProps=widgetData.component.Props,widgetPropNames=Object.keys(widget.props);componentProps&&Object.keys(componentProps).length>0&&Object.keys(componentProps).map(function(componentPropName){widgetPropNames&&-1==widgetPropNames.indexOf(componentPropName)&&(widget.props[componentPropName]=componentProps[componentPropName])}),widgets[widgetData.uid]=widget}}}),(tobeActivePage=pagesInStore[slideRes.uid]).slots=slots,tobeActivePage.props=slideProps,tobeActivePage.widgets=widgets,_this3.props.updateStore({updates:{active_page_id:slideRes.uid,pages:pagesInStore,reload_slides:!0}}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page created!"});case 48:case"end":return _context2.stop()}},_callee2,_this3)})),function(_x2){return _ref2.apply(this,arguments)})},"Save"))}}]),_PageDesignerGeneral_}(React.Component),_export("PageDesignerGeneral",PageDesignerGeneral=function(props){return _PageDesignerGeneral_}),_export("PageDesignerGeneral",PageDesignerGeneral),_export("default",PageDesignerGeneral),_export("states",states=[{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": ""}'},{KeyName:"reload_slides",AccessPath:"reload_slides",DefaultValue:'{"reload_slides": false}'},{KeyName:"keyvaluepairs",AccessPath:"keyvaluepair",DefaultValue:'{"keyvaluepair": {}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"pages",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'},{KeyName:"activepage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PreviewComponent/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/close/32","component/studio/ErrorBoundary/Definition.js"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Close32,ErrorBoundary,_PreviewComponent_,PreviewComponent;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary}],execute:function(){_PreviewComponent_=function(_React$Component){function _PreviewComponent_(props){_classCallCheck(this,_PreviewComponent_);var _this=_possibleConstructorReturn(this,(_PreviewComponent_.__proto__||Object.getPrototypeOf(_PreviewComponent_)).call(this,props));return _this.getPreviewPane=_this.getPreviewPane.bind(_this),_this.getComponentToRender=_this.getComponentToRender.bind(_this),_this.cancelPreview=_this.cancelPreview.bind(_this),_this.showPreview=_this.showPreview.bind(_this),_this.hidePreview=_this.hidePreview.bind(_this),_this.state={reload:!1},_this.previewPaneStyle={position:"fixed",top:"16%",left:"20%",backgroundColor:"white",zIndex:9999,marginTop:5,border:"1px solid #848484",padding:5,width:"60%",height:"60%",overflow:"scroll"},_this.screenOverlayStyle={position:"fixed",backgroundColor:"#000000",opacity:.5,zIndex:9999,top:0,left:0,height:2e3,width:2e3},_this.cancelPreviewStyle={position:"fixed",zIndex:99999,backgroundColor:"white",top:"15%",float:"right",border:"1px solid black",borderRadius:"50%",right:"19%",color:"black"},_this}return _inherits(_PreviewComponent_,_React$Component),_createClass(_PreviewComponent_,[{key:"componentDidMount",value:function(){this.showPreview()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showpreview!=this.props.showpreview&&this.setState({reload:!this.state.reload}),this.props.cancelpreview+""=="true"&&this.cancelPreview()}},{key:"showPreview",value:function(){this.props.updateStore&&!this.props.showpreview&&this.props.updateStore({updates:{showpreview:!0,cancelpreview:!1}})}},{key:"hidePreview",value:function(){this.props.updateStore&&this.props.updateStore({updates:{showpreview:"false",showpreview_target:this.props.target,ide_reload:!this.props.ide_reload,cancelpreview:!1}})}},{key:"getComponentToRender",value:function(){return React.createElement("div",{key:this.props.key,style:this.previewPaneStyle},React.createElement("slot",null))}},{key:"getPreviewPane",value:function(){var content2Preview=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(content2Preview);return React.createElement("div",null,React.createElement("div",{style:this.screenOverlayStyle}),React.createElement(Close32,{className:"cancelPreview",style:this.cancelPreviewStyle,onClick:this.cancelPreview}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.hidePreview()}},{key:"render",value:function(){var size=this.props.layout||this.props.size;"large"!=size&&"center-large"!=size||(this.cancelPreviewStyle=_extends({},this.cancelPreviewStyle,{top:"9%",right:"9%"}),this.previewPaneStyle=_extends({},this.previewPaneStyle,{top:"10%",left:"10%",width:"80%",height:"80%"})),"xl"!=size&&"center-xl"!=size||(this.cancelPreviewStyle=_extends({},this.cancelPreviewStyle,{top:"3rem",right:"1%"}),this.previewPaneStyle=_extends({},this.previewPaneStyle,{top:"3.5rem",left:"2%",width:"96%",height:"95%"})),"right-large"==size&&(this.cancelPreviewStyle=_extends({},this.cancelPreviewStyle,{top:"3rem",right:"29%"}),this.previewPaneStyle=_extends({},this.previewPaneStyle,{left:"unset",top:"3rem",right:"0%",width:"30%",height:"96%"})),"right-xl"==size&&(this.cancelPreviewStyle=_extends({},this.cancelPreviewStyle,{top:"3rem",right:"59%"}),this.previewPaneStyle=_extends({},this.previewPaneStyle,{left:"unset",top:"3rem",right:"0%",width:"60%",height:"96%"})),"left-large"==size&&(this.cancelPreviewStyle=_extends({},this.cancelPreviewStyle,{top:"3rem",left:"29%"}),this.previewPaneStyle=_extends({},this.previewPaneStyle,{right:"unset",top:"3rem",left:"0%",width:"30%",height:"96%"})),"left-xl"==size&&(this.cancelPreviewStyle=_extends({},this.cancelPreviewStyle,{top:"3rem",left:"59%"}),this.previewPaneStyle=_extends({},this.previewPaneStyle,{right:"unset",top:"3rem",left:"0%",width:"60%",height:"96%"})),1!=this.props.quickpreview&&"true"!=this.props.quickpreview||(this.previewPaneStyle=_extends({},this.previewPaneStyle,{backgroundColor:"#916194"}));var previewContent=this.getPreviewPane(),notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",null):null;return 1==this.props.showpreview||"true"==this.props.showpreview?React.createElement("div",null,notificationBar,previewContent):null}}]),_PreviewComponent_}(React.Component),_export("PreviewComponent",PreviewComponent=function(props){return _PreviewComponent_}),_export("PreviewComponent",PreviewComponent)}}}),System.register("component/studio/PageDesignerGeneral/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/settings/16","@carbon/icons-react/lib/launch/16","client/script/mmf/GraphQLDataUtil.js","lodash.clonedeep","component/studio/PreviewComponent/Definition.js","component/studio/ShowTableMappingDialog/Definition.js?now=126"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,TextArea,Button,Select,SelectItem,Settings32,Launch16,GraphQLDataUtil,cloneDeep,_PageDesignerGeneral_,PageDesignerGeneral;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,TextArea=_carbonComponentsReact.TextArea,Button=_carbonComponentsReact.Button,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_carbonIconsReactLibSettings){Settings32=_carbonIconsReactLibSettings.default},function(_carbonIconsReactLibLaunch){Launch16=_carbonIconsReactLibLaunch.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_componentStudioPreviewComponentDefinitionJs){_componentStudioPreviewComponentDefinitionJs.default},function(_componentStudioShowTableMappingDialogDefinitionJsNow){_componentStudioShowTableMappingDialogDefinitionJsNow.default}],execute:function(){_PageDesignerGeneral_=function(_React$Component){function _PageDesignerGeneral_(props){_classCallCheck(this,_PageDesignerGeneral_);var _this=_possibleConstructorReturn(this,(_PageDesignerGeneral_.__proto__||Object.getPrototypeOf(_PageDesignerGeneral_)).call(this,props));return _this.state={addedFields:[],pagename_invalid:!1,pagescope_invalid:!1,pagepath_invalid:!1,pagemodel_invalid:!1,pageNameUpdated:!1,keyValueLists:{},reload:!1,activepage:_this.props.activepage?_this.props.activepage:{}},_this.updateSlideName=_this.updateSlideName.bind(_this),_this.updateSlideScope=_this.updateSlideScope.bind(_this),_this.updateSlidePath=_this.updateSlidePath.bind(_this),_this.removeSpecialCharacters=_this.removeSpecialCharacters.bind(_this),_this}return _inherits(_PageDesignerGeneral_,_React$Component),_createClass(_PageDesignerGeneral_,[{key:"removeSpecialCharacters",value:function(val){return val.replace(/[^a-zA-Z0-9]/g,"_")}},{key:"updateSlideName",value:function(event){var activepage=Object.assign({},this.state.activepage);activepage.name=this.removeSpecialCharacters(event.target.value),this.setState({pageNameUpdated:!0,activepage:activepage})}},{key:"updateSlideScope",value:function(event){var activepage=Object.assign({},this.state.activepage);activepage.scope=this.removeSpecialCharacters(event.target.value),this.setState({activepage:activepage})}},{key:"updateSlidePath",value:function(event){var activepage=Object.assign({},this.state.activepage);activepage.path=event.target.value,this.setState({activepage:activepage})}},{key:"showTableMappingDialog",value:function(){this.props.updateStore({updates:{showpreview:!0}}),this.setState({showPreview:!0,reload:!this.state.reload})}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this2=this;if(prevProps.active_page_id!=this.props.active_page_id||prevProps.activepage.isNew!=this.props.activepage.isNew)this.setState({activepage:Object.assign({},this.props.activepage)});else if(prevProps.activepage.currentLayout!=this.props.activepage.currentLayout)this.setState({activepage:Object.assign({},this.props.activepage)});else if(prevProps.activepage.model!=this.props.activepage.model){var activePage=Object.assign({},this.state.activepage);activePage.isNew=this.props.activepage.isNew,activePage.model=this.props.activepage.model,activePage.modelscope=this.props.activepage.modelscope,this.setState({activepage:activePage})}prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"general"==this.props.showpreview_target&&(this.setState({showPreview:!1,reload:!this.state.reload,showBundles:!1}),this.props.updateStore({updates:{showpreview_target:""}})),_.isEqual(prevProps.keyvaluepair,this.props.keyvaluepair)||this.props.keyvaluepair&&Object.keys(this.props.keyvaluepair).length>0&&Object.keys(this.props.keyvaluepair).map(function(varName){if(!_.isEqual(prevProps.keyvaluepair[varName],_this2.props.keyvaluepair[varName])){var newKeyValueLists=cloneDeep(_this2.state.keyValueLists);newKeyValueLists[varName]=cloneDeep(_this2.props.keyvaluepair[varName]),_this2.setState({keyValueLists:newKeyValueLists})}})}},{key:"closePreviewWindow",value:function(){this.setState({reload:!this.state.reload})}},{key:"render",value:function(){var previewComponent,_this3=this,showBundlesPage=React.createElement("srs-iframe",{key:"pagebundles",url:"/pagebundles/pageid/"+this.props.active_page_id+"?noheader=true",width:"100%",height:.8*screen.height});previewComponent=1==this.state.showPreview?this.state.showBundles?React.createElement("preview-component",{target:"general",size:"xl"},showBundlesPage):React.createElement("preview-component",{target:"general"},React.createElement("show-table-mapping-dialog",null)):null;var extraProps={},pageParameterItems=[];this.state.keyValueLists&&this.state.keyValueLists[this.props.active_page_id+"_params"]?pageParameterItems=this.state.keyValueLists[this.props.active_page_id+"_params"]:this.state.activepage.props&&Object.keys(this.state.activepage.props).map(function(paramKey){pageParameterItems.push({name:paramKey,value:_this3.state.activepage.props[paramKey]})});var layoutList=[];this.state.activepage&&this.state.activepage.layouts&&this.state.activepage.layouts.slots?Object.keys(this.state.activepage.layouts.slots).map(function(layoutName){return layoutList.push(React.createElement(SelectItem,{value:layoutName,text:layoutName}))}):layoutList.push(React.createElement(SelectItem,{value:"default",text:"default"}));var _ref2,_ref,containerStyles=this.state.activepage&&this.state.activepage.isNew?{padding:20,backgroundColor:"white",maxHeight:"60vh",overflowY:"auto"}:{};return React.createElement("div",{className:"page-gen-body",style:containerStyles},previewComponent,React.createElement(TextInput,_extends({name:"slideName",className:"formFieldInputText"},extraProps,{labelText:"Name",helperText:"*Required",placeholder:"Enter Page Name...",invalid:this.state.pagename_invalid,invalidText:"Value Required",value:this.state.activepage&&this.state.activepage.name||"",onChange:this.updateSlideName})),React.createElement(TextInput,{name:"slideScope",className:"formFieldInputText",helperText:"*Required",readOnly:"true",labelText:"Scope",placeholder:"Enter Page Scope...",invalid:this.state.pagescope_invalid,invalidText:"Value Required",value:this.state.activepage&&this.state.activepage.scope||this.props.currentscope||"",onChange:this.updateSlideScope}),React.createElement("div",{style:{display:"flex",width:"90%"}},React.createElement(TextInput,_extends({name:"slidePath",className:"formFieldInputText",helperText:"*Required"},extraProps,{labelText:"Path",invalid:this.state.pagepath_invalid,invalidText:"Value Required",placeholder:"Enter Page Path...",value:this.state.activepage&&this.state.activepage.path||"",onChange:this.updateSlidePath})),this.state.activepage&&1!=this.state.activepage.isNew?React.createElement("div",{style:{marginTop:35,cursor:"pointer"}},React.createElement(Launch16,{onClick:function(){return window.open(_this3.state.activepage.path+"?nocache=true&debug=true")}})):null),React.createElement("div",{className:"pageType",style:{textAlign:"left"}},React.createElement(Select,{labelText:"Type",defaultValue:this.state.activepage?this.state.activepage.pageType:"",value:this.state.activepage?this.state.activepage.pageType:"",onChange:function(e){var activepage=Object.assign({},_this3.state.activepage);activepage.pageType=e.target.value,_this3.setState({activepage:activepage})}},React.createElement(SelectItem,{value:"",text:"Choose page type"}),React.createElement(SelectItem,{value:"CreateView",text:"CreateView"}),React.createElement(SelectItem,{value:"EditView",text:"EditView"}),React.createElement(SelectItem,{value:"FreeForm",text:"Free Form"}))),React.createElement("div",{className:"pageType",style:{textAlign:"left"}},React.createElement(Select,{labelText:"Layout",defaultValue:this.state.activepage&&this.state.activepage.currentLayout?this.state.activepage.currentLayout:"default",value:this.state.activepage?this.state.activepage.currentLayout:"default",onChange:function(e){var activepage=Object.assign({},_this3.props.activepage);activepage.currentLayout=e.target.value,_this3.setState({activepage:activepage}),_this3.props.updateStore({updates:{activepage:activepage}})}},layoutList)),React.createElement("div",{className:"pageType",style:{textAlign:"left"}},React.createElement(TextArea,{labelText:"Page Styles",value:this.state.activepage&&this.state.activepage.pagestyles?this.state.activepage.pagestyles:"",onChange:function(e){var activepage=Object.assign({},_this3.props.activepage);activepage.pagestyles=e.target.value,_this3.setState({activepage:activepage})}},layoutList)),React.createElement("div",{className:"pageType",style:{textAlign:"left"}},React.createElement(Button,{style:{backgroundColor:"white",color:"black",textDecoration:"underline"},size:"small",onClick:function(e){_this3.props.updateStore({updates:{showpreview:!0}}),_this3.setState({showPreview:!0,showBundles:!0})}},"Bundle Configuration")),React.createElement("srs-key-value-pair",{varname:this.props.active_page_id+"_params",items:JSON.stringify(pageParameterItems),label:"Page Parameters",placeholder_name:"Enter Param Name...",placeholder_value:"Enter Default Value..."}),!this.state.activepage||"CreateView"!=this.state.activepage.pageType&&"EditView"!=this.state.activepage.pageType?null:React.createElement("div",{className:"field-mapper"},React.createElement(TextInput,{name:"slideModel",className:"formFieldInputText",labelText:"Model",placeholder:"Click gear icon to set the model",helperText:!this.state.activepage||"CreateView"!=this.state.activepage.pageType&&"EditView"!=this.state.activepage.pageType?"":"*Required",invalid:this.state.pagemodel_invalid,invalidText:"Value Required",value:this.state.activepage&&this.state.activepage.model||"",readOnly:!0}),this.state.activepage?React.createElement("div",{className:"mapper-adv"},React.createElement(Settings32,{onClick:function(){_this3.showTableMappingDialog()}})):null),React.createElement(Button,{waves:"light",size:"small",style:{marginTop:10,display:this.state.activepage&&this.state.activepage.isNew?"none":"block"},onClick:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(e){var payload,kvparams,queryParams,slideProps,_activePage,widgetRecords,visitedWidgetIds,widgetId,widgetActions,widgetActionIds,widgetActionId,widgetActionPayload,nameParts,newWidgetActionName,activePage;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return payload={slideId:_this3.props.active_page_id,Name:_this3.state.activepage.name,Scope:_this3.state.activepage.scope?_this3.state.activepage.scope:_this3.props.currentscope,Path:_this3.state.activepage.path,Type:_this3.state.activepage.pageType?_this3.state.activepage.pageType:"CreateView",Styles:_this3.state.activepage.pagestyles?_this3.state.activepage.pagestyles:""},_context.next=3,$qry._run("mutation($input: MetaSlideUpsertWithWhereInput!){\n                                        MetaSlideUpsertWithWhere(input: $input){\n                                            obj{\n                                                uid\n                                            }\n                                        }\n                                    }",{input:{where:{uid:_this3.props.active_page_id},data:payload}},"data.MetaSlideUpsertWithWhere.obj");case 3:if(!_this3.props.keyvaluepairs||!_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"]){_context.next=15;break}if(kvparams=_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"],queryParams=[],slideProps={},kvparams.map(function(paramKeyValue){paramKeyValue.name&&(queryParams.push({Name:paramKeyValue.name,Value:paramKeyValue.value,PropsSlide:_this3.props.active_page_id}),slideProps[paramKeyValue.name]=paramKeyValue.value)}),_context.t0=queryParams&&queryParams.length>0,!_context.t0){_context.next=12;break}return _context.next=12,GraphQLDataUtil().saveMultiple("pd.saveMetaSlideProps",queryParams);case 12:(_activePage=Object.assign({},_this3.state.activepage)).props=slideProps,_this3.setState({activepage:_activePage});case 15:if(!_this3.state.pageNameUpdated){_context.next=45;break}return _context.next=18,$qry._run('query($input:JSON){\n                                        MetaSlideSlot{\n                                            MetaSlideSlotFind(filter: $input) @_(get: "edges"){\n                                                edges @_(keyBy: "node.Widget", mapValues:"node"){\n                                                    node{\n                                                        uid\n                                                        Widget\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }',{input:{where:{Slide:_this3.props.active_page_id}}},"data.MetaSlideSlot.MetaSlideSlotFind");case 18:if(!((widgetRecords=_context.sent)&&Object.keys(widgetRecords).length>0)){_context.next=44;break}visitedWidgetIds=[],_context.t1=_regeneratorRuntime.keys(widgetRecords);case 22:if((_context.t2=_context.t1()).done){_context.next=44;break}if(widgetId=_context.t2.value,-1!=visitedWidgetIds.indexOf(widgetId)){_context.next=42;break}return visitedWidgetIds.push(widgetId),_context.next=28,$qry._run('query($input:JSON){\n                                                    MetaWidgetAction{\n                                                        MetaWidgetActionFind(filter: $input) @_(get: "edges"){\n                                                            edges @_(keyBy: "node.uid", mapValues:"node"){\n                                                                node{\n                                                                    uid\n                                                                    Name\n                                                                    Scope\n                                                                    Order\n                                                                    Widget\n                                                                    Definition\n                                                                    Active\n                                                                    Trigger\n                                                                }\n                                                            }\n                                                        }\n                                                    }\n                                                }',{input:{where:{Widget:widgetId}}},"data.MetaWidgetAction.MetaWidgetActionFind");case 28:if(widgetActions=_context.sent,!((widgetActionIds=Object.keys(widgetActions))&&widgetActionIds.length>0)){_context.next=42;break}_context.t3=_regeneratorRuntime.keys(widgetActions);case 32:if((_context.t4=_context.t3()).done){_context.next=42;break}return widgetActionId=_context.t4.value,widgetActionPayload=cloneDeep(widgetActions[widgetActionId]),nameParts=widgetActionPayload.Name.split("@@"),newWidgetActionName=nameParts[0]+"@@"+_this3.state.activepage.name+"_"+_this3.state.activepage.scope,widgetActionPayload.Name=newWidgetActionName,_context.next=40,$qry._run("mutation($input: MetaWidgetActionUpsertWithWhereInput!){\n                                                                MetaWidgetActionUpsertWithWhere(input: $input){\n                                                                    obj{\n                                                                        uid\n                                                                    }\n                                                                }\n                                                            }",{input:{where:{uid:widgetActionId},data:widgetActionPayload}},"data.MetaWidgetActionUpsertWithWhere.obj");case 40:_context.next=32;break;case 42:_context.next=22;break;case 44:_this3.setState({pageNameUpdated:!1});case 45:(activePage=Object.assign({},_this3.props.activepage)).name=_this3.state.activepage.name,activePage.scope=_this3.state.activepage.scope,activePage.path=_this3.state.activepage.path,activePage.pageType=_this3.state.activepage.pageType,activePage.pagestyles=_this3.state.activepage.pagestyles,_this3.props.updateStore({updates:{activepage:activePage,reload_slides:!0}}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page updated successfully!"});case 53:case"end":return _context.stop()}},_callee,_this3)})),function(_x){return _ref.apply(this,arguments)})},"Update"),React.createElement(Button,{waves:"light",size:"small",style:{clear:"both",marginTop:10,display:this.state.activepage&&this.state.activepage.isNew?"block":"none"},onClick:(_ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(e){var payload,isValid,pagesInStore,slideRes,activePageInStore,kvparams,queryParams,slots,widgets,slideProps,slotsAndWidgets,tobeActivePage;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(payload={Name:_this3.state.activepage.name,Scope:_this3.state.activepage.scope?_this3.state.activepage.scope:_this3.props.currentscope,Path:_this3.state.activepage.path,Type:_this3.state.activepage.pageType?_this3.state.activepage.pageType:"CreateView",Styles:_this3.state.activepage.pagestyles?_this3.state.activepage.pagestyles:""},isValid=!0,payload.Name&&"Unnamed"!=payload.Name||(isValid=!1,_this3.setState({pagename_invalid:!0})),payload.Scope||(isValid=!1,_this3.setState({pagescope_invalid:!0})),payload.Path||(isValid=!1,_this3.setState({pagepath_invalid:!0})),_this3.state.activepage.model||"CreateView"!=payload.Type&&"EditView"!=payload.Type||(isValid=!1,_this3.setState({pagemodel_invalid:!0})),isValid){_context2.next=10;break}_this3.props.addErrorMessage({title:"Error - ",subtitle:"Please fill the mandatory fields and try again...!"}),_context2.next=48;break;case 10:return pagesInStore=_this3.props.pages,_context2.next=13,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlide",payload);case 13:if(!(slideRes=_context2.sent)||!slideRes.uid){_context2.next=48;break}if(activePageInStore=pagesInStore[_this3.props.active_page_id],(activePageInStore=_extends({},activePageInStore,_this3.state.activepage)).isNew&&(activePageInStore.isNew=!1,activePageInStore.is_open=!0,pagesInStore[slideRes.uid]=activePageInStore,delete pagesInStore[_this3.props.active_page_id]),!_this3.props.keyvaluepairs||!_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"]){_context2.next=26;break}if(kvparams=_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"],queryParams=[],kvparams.map(function(paramKeyValue){paramKeyValue.name&&queryParams.push({Name:paramKeyValue.name,Value:paramKeyValue.value,PropsSlide:slideRes.uid})}),_context2.t0=queryParams&&queryParams.length>0,!_context2.t0){_context2.next=26;break}return _context2.next=26,GraphQLDataUtil().saveMultiple("pd.saveMetaSlideProps",queryParams);case 26:if("CreateView"!=payload.Type&&"EditView"!=payload.Type){_context2.next=31;break}return _context2.next=29,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelName",Value:activePageInStore.model,PropsSlide:slideRes.uid});case 29:return _context2.next=31,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelScope",Value:activePageInStore.modelscope,PropsSlide:slideRes.uid});case 31:return _context2.next=33,$script.runAtServer("pd.addDefaultWidget",{slideId:slideRes.uid});case 33:return slots={},widgets={},_context2.next=37,$qry.run("mmf.getSlideProps",{pageId:slideRes.uid});case 37:return slideProps=_context2.sent,_context2.next=40,$qry.run("pd.getExistingSlotsbySlideId",{Slide:slideRes.uid});case 40:(slotsAndWidgets=_context2.sent)&&slotsAndWidgets.length>0&&slotsAndWidgets.forEach(function(slotWidget){var slot=slotWidget.node;if(slot&&slot.uid){var slotData={};slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.width=slot.width||0,slotData.height=slot.height,slotData.minwidth=slot.minwidth,slotData.minheight=slot.minheight,slotData.maxwidth=slot.maxwidth,slotData.maxheight=slot.maxheight,slotData.resize=slot.resize,slotData.move=slot.move,slotData.Slide=slot.Slide,slotData.Widget=slot.Widget,slots[slot.uid]=slotData;var widgetData=slot.slotWidget;if(widgetData&&widgetData.uid){var widget={};widget.id=widgetData.uid,widget.Component=widgetData.Component,widget.name=widgetData.component.Name;var widgetProps=widgetData.widgetproperties;if(widgetProps&&widgetProps.edges&&widgetProps.edges.length>0){var props={};widgetProps.edges.forEach(function(propNode){var prop=propNode.node;props[prop.name]=prop.value}),widget.props=props}widget.props=widget.props||{};var componentProps=widgetData.component.Props,widgetPropNames=Object.keys(widget.props);componentProps&&Object.keys(componentProps).length>0&&Object.keys(componentProps).map(function(componentPropName){widgetPropNames&&-1==widgetPropNames.indexOf(componentPropName)&&(widget.props[componentPropName]=componentProps[componentPropName])}),widgets[widgetData.uid]=widget}}}),(tobeActivePage=pagesInStore[slideRes.uid]).slots=slots,tobeActivePage.props=slideProps,tobeActivePage.widgets=widgets,_this3.props.updateStore({updates:{active_page_id:slideRes.uid,pages:pagesInStore,reload_slides:!0}}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page created!"});case 48:case"end":return _context2.stop()}},_callee2,_this3)})),function(_x2){return _ref2.apply(this,arguments)})},"Save"))}}]),_PageDesignerGeneral_}(React.Component),_export("PageDesignerGeneral",PageDesignerGeneral=function(props){return _PageDesignerGeneral_}),_export("PageDesignerGeneral",PageDesignerGeneral)}}}),System.register("component/studio/PageDesignerPageActions.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context4){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,_PageDesignerPageActions_,PageDesignerPageActions,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button}],execute:function(){_PageDesignerPageActions_=function(_React$Component){function _PageDesignerPageActions_(props){_classCallCheck(this,_PageDesignerPageActions_);var _this=_possibleConstructorReturn(this,(_PageDesignerPageActions_.__proto__||Object.getPrototypeOf(_PageDesignerPageActions_)).call(this,props));return _this.state={showPreview:!1,activeActionId:"",items:[],reload:!1},_this.getData=_this.getData.bind(_this),$ele.registerElement("NewPageAction","mmf","React"),_this}return _inherits(_PageDesignerPageActions_,_React$Component),_createClass(_PageDesignerPageActions_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var items;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.getData();case 2:items=_context.sent,this.setState({items:items});case 4:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"getData",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var pageActionNames,items;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return pageActionNames=[],_context2.next=3,$qry.getRecords("MetaSlideAction",{where:{Slide:this.props.active_page_id}},["uid","Name"]);case 3:return(items=_context2.sent)&&items.length>0&&items.map(function(item){item.Name&&pageActionNames.push({name:item.Name,id:item.uid})}),_context2.abrupt("return",pageActionNames);case 6:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(prevProps){var items,_items,activeActionId;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(prevProps.active_page_id==this.props.active_page_id){_context3.next=5;break}return _context3.next=3,this.getData();case 3:items=_context3.sent,this.setState({items:items});case 5:if(prevProps.showpreview==this.props.showpreview||prevProps.showpreview_target==this.props.showpreview_target||"page_actions"!=this.props.showpreview_target){_context3.next=13;break}return _context3.next=8,this.getData();case 8:_items=_context3.sent,this.setState({items:_items,activeActionId:"",showPreview:!1,reload:!this.state.reload}),this.props.updateStore({updates:{showpreview_target:""}}),_context3.next=14;break;case 13:prevProps.active_list_item!=this.props.active_list_item&&(this.props.updateStore({updates:{showpreview:!0}}),this.setState({showPreview:!0,reload:!this.state.reload}));case 14:prevProps.active_list_item!=this.props.active_list_item&&(activeActionId=this.props.active_list_item.split("@@")[0],this.setState({activeActionId:activeActionId,showPreview:!0}));case 15:case"end":return _context3.stop()}},_callee3,this)}));return function(_x){return _ref3.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this,actionProps={active_page_id:this.props.active_page_id};this.state.activeActionId&&(actionProps.rowinfo=JSON.stringify({uid:this.state.activeActionId}));var previewItem=React.createElement("new-page-action",actionProps),previewComponent=1==this.state.showPreview?React.createElement("preview-component",_extends({key:"pageactionform",target:"page_actions"},{size:"xl"}),previewItem):null;return React.createElement(React.Fragment,null,previewComponent,React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:20,position:"absolute"},onClick:function(e){_this2.setState({activeActionId:"",showPreview:!0,reload:!_this2.state.reload}),_this2.props.updateStore({updates:{showpreview:!0}})}},"New"),this.state.items&&this.state.items.length>0?React.createElement("srs-simple-list",{items:JSON.stringify(this.state.items),varname:"pageactions",unique:"true",singlecolumn:"true",alignment:"left",enableitemselect:"true"}):React.createElement("div",{style:{textAlign:"left",padding:20,color:"blue"}},"No actions to show!"))}}]),_PageDesignerPageActions_}(React.Component),_export("PageDesignerPageActions",PageDesignerPageActions=function(props){return _PageDesignerPageActions_}),_export("PageDesignerPageActions",PageDesignerPageActions),_export("default",PageDesignerPageActions),_export("states",states=[{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"active_list_item",AccessPath:"active_list_item.pageactions",DefaultValue:'{"active_list_item": {"pageactions": ""}}'},{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": ""}'},{KeyName:"pageActions",AccessPath:"pages.${active_page_id}.actions",DefaultValue:'{"pages": {"${active_page_id}": {"actions": {}}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PageDesignerPageActions/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context4){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,_PageDesignerPageActions_,PageDesignerPageActions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button}],execute:function(){_PageDesignerPageActions_=function(_React$Component){function _PageDesignerPageActions_(props){_classCallCheck(this,_PageDesignerPageActions_);var _this=_possibleConstructorReturn(this,(_PageDesignerPageActions_.__proto__||Object.getPrototypeOf(_PageDesignerPageActions_)).call(this,props));return _this.state={showPreview:!1,activeActionId:"",items:[],reload:!1},_this.getData=_this.getData.bind(_this),$ele.registerElement("NewPageAction","mmf","React"),_this}return _inherits(_PageDesignerPageActions_,_React$Component),_createClass(_PageDesignerPageActions_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var items;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.getData();case 2:items=_context.sent,this.setState({items:items});case 4:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"getData",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var pageActionNames,items;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return pageActionNames=[],_context2.next=3,$qry.getRecords("MetaSlideAction",{where:{Slide:this.props.active_page_id}},["uid","Name"]);case 3:return(items=_context2.sent)&&items.length>0&&items.map(function(item){item.Name&&pageActionNames.push({name:item.Name,id:item.uid})}),_context2.abrupt("return",pageActionNames);case 6:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(prevProps){var items,_items,activeActionId;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(prevProps.active_page_id==this.props.active_page_id){_context3.next=5;break}return _context3.next=3,this.getData();case 3:items=_context3.sent,this.setState({items:items});case 5:if(prevProps.showpreview==this.props.showpreview||prevProps.showpreview_target==this.props.showpreview_target||"page_actions"!=this.props.showpreview_target){_context3.next=13;break}return _context3.next=8,this.getData();case 8:_items=_context3.sent,this.setState({items:_items,activeActionId:"",showPreview:!1,reload:!this.state.reload}),this.props.updateStore({updates:{showpreview_target:""}}),_context3.next=14;break;case 13:prevProps.active_list_item!=this.props.active_list_item&&(this.props.updateStore({updates:{showpreview:!0}}),this.setState({showPreview:!0,reload:!this.state.reload}));case 14:prevProps.active_list_item!=this.props.active_list_item&&(activeActionId=this.props.active_list_item.split("@@")[0],this.setState({activeActionId:activeActionId,showPreview:!0}));case 15:case"end":return _context3.stop()}},_callee3,this)}));return function(_x){return _ref3.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this,actionProps={active_page_id:this.props.active_page_id};this.state.activeActionId&&(actionProps.rowinfo=JSON.stringify({uid:this.state.activeActionId}));var previewItem=React.createElement("new-page-action",actionProps),previewComponent=1==this.state.showPreview?React.createElement("preview-component",_extends({key:"pageactionform",target:"page_actions"},{size:"xl"}),previewItem):null;return React.createElement(React.Fragment,null,previewComponent,React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:20,position:"absolute"},onClick:function(e){_this2.setState({activeActionId:"",showPreview:!0,reload:!_this2.state.reload}),_this2.props.updateStore({updates:{showpreview:!0}})}},"New"),this.state.items&&this.state.items.length>0?React.createElement("srs-simple-list",{items:JSON.stringify(this.state.items),varname:"pageactions",unique:"true",singlecolumn:"true",alignment:"left",enableitemselect:"true"}):React.createElement("div",{style:{textAlign:"left",padding:20,color:"blue"}},"No actions to show!"))}}]),_PageDesignerPageActions_}(React.Component),_export("PageDesignerPageActions",PageDesignerPageActions=function(props){return _PageDesignerPageActions_}),_export("PageDesignerPageActions",PageDesignerPageActions)}}}),System.register("component/studio/PageDesignerPreview.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","jquery","jquery-ui/ui/data","jquery-ui/ui/disable-selection","jquery-ui/ui/focusable","jquery-ui/ui/form","jquery-ui/ui/ie","jquery-ui/ui/keycode","jquery-ui/ui/labels","jquery-ui/ui/jquery-1-7","jquery-ui/ui/plugin","jquery-ui/ui/safe-active-element","jquery-ui/ui/safe-blur","jquery-ui/ui/scroll-parent","jquery-ui/ui/tabbable","jquery-ui/ui/unique-id","jquery-ui/ui/version","jquery-ui/ui/widget","jquery-ui/ui/widgets/mouse","jquery-ui/ui/widgets/draggable","jquery-ui/ui/widgets/droppable","jquery-ui/ui/widgets/resizable","lodash.debounce","deepmerge","lodash.clonedeep","lodash.get","deep-equal","lodash","thirdpartylib/gridstack/gridstack.min.js"],function(_export,_context16){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,$,debounce,deepmerge,cloneDeep,lodashget,deepEqual,_,_PageDesignerPreview_,PageDesignerPreview,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_jquery){$=_jquery.default},function(_jqueryUiUiData){},function(_jqueryUiUiDisableSelection){},function(_jqueryUiUiFocusable){},function(_jqueryUiUiForm){},function(_jqueryUiUiIe){},function(_jqueryUiUiKeycode){},function(_jqueryUiUiLabels){},function(_jqueryUiUiJquery){},function(_jqueryUiUiPlugin){},function(_jqueryUiUiSafeActiveElement){},function(_jqueryUiUiSafeBlur){},function(_jqueryUiUiScrollParent){},function(_jqueryUiUiTabbable){},function(_jqueryUiUiUniqueId){},function(_jqueryUiUiVersion){},function(_jqueryUiUiWidget){},function(_jqueryUiUiWidgetsMouse){},function(_jqueryUiUiWidgetsDraggable){},function(_jqueryUiUiWidgetsDroppable){},function(_jqueryUiUiWidgetsResizable){},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_deepmerge){deepmerge=_deepmerge.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashGet){lodashget=_lodashGet.default},function(_deepEqual){deepEqual=_deepEqual.default},function(_lodash){_=_lodash.default},function(_thirdpartylibGridstackGridstackMinJs){}],execute:function(){_PageDesignerPreview_=function(_React$Component){function _PageDesignerPreview_(props){_classCallCheck(this,_PageDesignerPreview_);var _this=_possibleConstructorReturn(this,(_PageDesignerPreview_.__proto__||Object.getPrototypeOf(_PageDesignerPreview_)).call(this,props));_this.state={pageloading:!1,showloader:!1,showModal:!1,modalPageId:"",widgetsInitialised:!1,pageIdSeed:Date.now()},_this.updatePage=_this.updatePage.bind(_this),_this.changePage=_this.changePage.bind(_this),_this.updatePageDebounce=debounce(function(prevProps){_this.updatePage(prevProps)}),_this._updateProps=_this._updateProps.bind(_this),_this.registerElements=_this.registerElements.bind(_this),_this.getPreviewItems=_this.getPreviewItems.bind(_this),_this.evaluateQuery=_this.evaluateQuery.bind(_this),_this.parseGraphQLParam=_this.parseGraphQLParam.bind(_this),_this.getPageParams=_this.getPageParams.bind(_this),_this.resizeGrid=_this.resizeGrid.bind(_this),_this.refreshGrid=_this.refreshGrid.bind(_this),_this.runPageActions=_this.runPageActions.bind(_this),_this.initializeLayout=_this.initializeLayout.bind(_this),_this.setPageState=_this.setPageState.bind(_this),_this.getPageState=_this.getPageState.bind(_this),_this.setPageStateWithPreload=_this.setPageStateWithPreload.bind(_this),_this.updateWidgetsWithStateChanges=_this.updateWidgetsWithStateChanges.bind(_this),_this.reconcileWidgetProps=_this.reconcileWidgetProps.bind(_this),_this.setMenuItems=_this.setMenuItems.bind(_this),_this.loadNecessaryBundles=_this.loadNecessaryBundles.bind(_this),_this.waitUntilPageInitialized=_this.waitUntilPageInitialized.bind(_this),_this.openModal=_this.openModal.bind(_this),_this.viewModelName="",_this.viewData={},_this.transientPageState=null,_this.grids={},_this.slidesData={},_this.grid=null,_this.canvasEls={},_this.prevProps=null,_this.currentProps=null,_this.prevState=null,_this.currentState=null,_this.rootEl=_this.props.shadow&&$("#head",_this.props.shadow)&&$("#head",_this.props.shadow).length>0?$("#head",_this.props.shadow)[0]:_this.refs.previewarea;var contentEl=_this.props.shadow&&_this.props.shadow.host?_this.props.shadow&&_this.props.shadow.host:null;if(_this.props.pagesuffix&&"_pagemodel"==_this.props.pagesuffix){var mainContentEl=$(_this.props.shadow.host).closest("#head");mainContentEl&&mainContentEl.length>0&&(contentEl=mainContentEl[0])}return _this.cellHeight=contentEl&&contentEl.getBoundingClientRect?contentEl.getBoundingClientRect().height/80:10,_this.options={float:!0,width:96,column:96,staticGrid:!0,verticalMargin:0,cellHeight:_this.cellHeight,removable:!1,removeTimeout:100,disableResize:!0,disableDrag:!0,disableOneColumnMode:!0},_this}return _inherits(_PageDesignerPreview_,_React$Component),_createClass(_PageDesignerPreview_,[{key:"openModal",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(payload){var result,templateId,templateFilter,templateRecord;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(payload.modalname&&payload.name){_context.next=3;break}return this.props.addErrorMessage({title:"Error - ",subtitle:"Modal Name cannot be empty while opening the modal."}),_context.abrupt("return");case 3:if(result={},!payload.type){_context.next=32;break}result.modalname=payload.modalname||payload.name,_context.t0=payload.type,_context.next="form"===_context.t0?9:29;break;case 9:if(templateId="",!payload.template){_context.next=14;break}templateId=payload.template,_context.next=26;break;case 14:if(!payload.table&&!payload.formname){_context.next=26;break}return templateFilter=payload.formname?{where:{Name:payload.formname}}:{where:{ModelName:payload.table,View:payload.view||"Defalut"}},_context.next=18,$qry.getRecords("FormTemplate_studio",templateFilter,["uid"]);case 18:if(!((templateRecord=_context.sent)&&templateRecord.length>0)){_context.next=24;break}templateRecord=templateRecord[0],templateId=templateRecord.uid,_context.next=26;break;case 24:return this.props.addErrorMessage({title:"Error - ",subtitle:"Form not found!"}),_context.abrupt("return");case 26:return result.modalcomponent={name:"SrsDynamicForm",scope:"studio",componentprops:{FormTemplate:templateId,defaultdata:payload.formdata}},result.modalparams={},_context.abrupt("break",29);case 29:result.layout=payload.layout,_context.next=33;break;case 32:result=payload;case 33:this.props.openModal(result);case 34:case"end":return _context.stop()}},_callee,this)}));return function(_x){return _ref.apply(this,arguments)}}()},{key:"reconcileWidgetProps",value:function(widgetProps,pageState){var $widgetProps=Object.assign({},widgetProps);if($widgetProps)for(var widgetPropName in $widgetProps)if(widgetPropName&&widgetPropName.indexOf("__State__")>-1){var widgetPropPathValue=$widgetProps[widgetPropName],wpropName=widgetPropName.split("__State__")[1];if(widgetPropPathValue&&pageState&&Object.keys(pageState).length>0){var newPropVal=lodashget(pageState,widgetPropPathValue);void 0!=newPropVal&&null!=newPropVal&&($widgetProps[wpropName]="string"==typeof newPropVal||"boolean"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}return $widgetProps}},{key:"loadNecessaryBundles",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var pageId,targetPageRecord,targetPageScope,bundleFilter,bundleMaps,bundleMapIndx,bundleMap;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return pageId=this.props.previewpageid,[],_context2.next=4,$qry.getRecords("MetaSlide",{where:{uid:pageId}},["uid","Name","Scope"]);case 4:if(!((targetPageRecord=_context2.sent)&&targetPageRecord.length>0)){_context2.next=34;break}return targetPageScope=targetPageRecord[0].Scope,bundleFilter={where:{or:[{and:[{Application:targetPageScope},{Page:""}]},{and:[{Application:targetPageScope},{Page:pageId}]}]}},_context2.next=10,$qry.getRecords("MetaBundleMap",bundleFilter,["uid","Type","Name","Resource"]);case 10:if(!((bundleMaps=_context2.sent)&&bundleMaps.length>0)){_context2.next=34;break}_context2.t0=_regeneratorRuntime.keys(bundleMaps);case 13:if((_context2.t1=_context2.t0()).done){_context2.next=34;break}bundleMapIndx=_context2.t1.value,bundleMap=bundleMaps[bundleMapIndx],void 0,_context2.t2=bundleMap.Type,_context2.next="internal"===_context2.t2?20:"external"===_context2.t2?23:32;break;case 20:return _context2.next=22,System.import("/load/bundle/"+bundleMap.Name+".js");case 22:return _context2.abrupt("break",32);case 23:return _context2.prev=23,_context2.next=26,System.import(bundleMap.Resource);case 26:_context2.next=31;break;case 28:_context2.prev=28,_context2.t3=_context2.catch(23),console.error("Unable to import bundle "+bundleMap.Name);case 31:return _context2.abrupt("break",32);case 32:_context2.next=13;break;case 34:case"end":return _context2.stop()}},_callee2,this,[[23,28]])}));return function(){return _ref2.apply(this,arguments)}}()},{key:"setMenuItems",value:function(menuItems){this.props.updateStore({updates:{headerMenuItems:menuItems,menuScope:this.props.currentscope}})}},{key:"setPageState",value:function(recentUpdates){var origPageState=this.transientPageState?this.transientPageState:this.props.pageState,pageState=cloneDeep(origPageState),pageStateLayout=void 0,parentState=void 0;recentUpdates.layout&&(pageStateLayout=deepmerge.all([pageState.layout,recentUpdates.layout])),recentUpdates.parentstate&&(parentState=deepmerge.all([pageState.parentstate,recentUpdates.parentstate])),pageState=_extends({},pageState,recentUpdates),pageStateLayout&&(pageState.layout=pageStateLayout),parentState&&(pageState.parentstate=parentState),_.isEqual(origPageState,pageState)||(this.transientPageState=pageState)}},{key:"getPageState",value:function(){return cloneDeep(this.props.pageState)}},{key:"setPageStateWithPreload",value:function(recentUpdates,$widgets,noStateUpdate){var pageState=cloneDeep(this.props.pageState?this.props.pageState:{}),pageStateLayout=void 0;recentUpdates.layout&&(pageStateLayout=deepmerge.all([pageState.layout,recentUpdates.layout])),pageState=_extends({},pageState,recentUpdates),pageStateLayout&&(pageState.layout=pageStateLayout);try{if($widgets)for(var widgetIndx in $widgets){var widget=$widgets[widgetIndx];if(widget){var widgetProps=widget.props;if(widgetProps&&Object.keys(widgetProps).length>0){var widgetPropNames=Object.keys(widgetProps);for(var widgetPropIndx in widgetPropNames){var widgetPropName=widgetPropNames[widgetPropIndx];if(widgetPropName.indexOf("__State__")>-1){var widgetPropPathValue=widgetProps[widgetPropName],wpropName=widgetPropName.split("__State__")[1];if(widgetPropPathValue&&pageState&&Object.keys(pageState).length>0){var newPropVal=lodashget(pageState,widgetPropPathValue);newPropVal&&(widgetProps[wpropName]="string"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}}}}}}catch(err){this.props.addErrorMessage({title:"SRS0002 - ",subtitle:"Something went wrong, please contact your system administrator."}),console.error(err.message)}return pageState.clickts=Date.now(),!noStateUpdate&&this.props.updateStore({updates:{pageState:pageState}}),$widgets}},{key:"updateWidgetsWithStateChanges",value:function(pageState,inputWidgets){var $widgets=null;try{if(inputWidgets&&pageState)for(var widgetIndx in $widgets=cloneDeep(inputWidgets)){var widget=$widgets[widgetIndx];if(widget){var widgetProps=widget.props;if(widgetProps&&Object.keys(widgetProps).length>0){var widgetPropNames=Object.keys(widgetProps);for(var widgetPropIndx in widgetPropNames){var widgetPropName=widgetPropNames[widgetPropIndx];if(widgetPropName.indexOf("__State__")>-1){var widgetPropPathValue=widgetProps[widgetPropName],wpropName=widgetPropName.split("__State__")[1];if(widgetPropPathValue&&pageState&&Object.keys(pageState).length>0){var newPropVal=lodashget(pageState,widgetPropPathValue);newPropVal&&(widgetProps[wpropName]="string"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}}}}}}catch(err){console.error(err.message)}return $widgets}},{key:"initializeLayout",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(hostEl,activePage){var self,pageId,uniquePageId;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(hostEl){_context4.next=2;break}return _context4.abrupt("return");case 2:return pageId=(self=this).props.widgetProps&&self.props.widgetProps.PageId?self.props.widgetProps.PageId:self.props.previewpageid,uniquePageId=pageId+this.props.pagesuffix,_context4.next=7,$(".gridPreviewCanvas",hostEl).each(_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var activePageSlotIds,activePageSlotIdIndx,slotId,slot,widgetId,widgetData,name,eleData,activeItemContentEl,widgetContainerEl;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(self.grid=self.grids[uniquePageId],self.grid||(self.grid=GridStack.init(self.options,this),self.grids=self.grids||{},self.grids[uniquePageId]=self.grid),self.grid){_context3.next=4;break}return _context3.abrupt("return");case 4:if(self.grid.batchUpdate(),self.grid.removeAll(!0),self.grid&&self.grid.engine&&self.grid.engine._removedNodes&&self.grid.engine._removedNodes.map(function(node){$(node.el).remove()}),self.grid.commit(),self.grid.batchUpdate(),!activePage.slots){_context3.next=34;break}activePageSlotIds=Object.keys(activePage.slots),_context3.t0=_regeneratorRuntime.keys(activePageSlotIds);case 12:if((_context3.t1=_context3.t0()).done){_context3.next=32;break}if(activePageSlotIdIndx=_context3.t1.value,slotId=activePageSlotIds[activePageSlotIdIndx],slot=activePage.slots[slotId],widgetId=slot.Widget?slot.Widget:slot.widget&&slot.widget.widgetid?slot.widget.widgetid:"",!(widgetData=activePage.widgets[widgetId])||!widgetData.name){_context3.next=30;break}if(name=widgetData.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),eleData=Object.assign({tag:name,widgetid:widgetId,componentid:widgetData.Component},widgetData),$(this).attr("slotid",slotId),!(activeItemContentEl=self.grid.$el.find("#"+widgetId+".grid-stack-item-content"))&&self.grid.container&&self.grid.container.length>0&&(activeItemContentEl=$(self.grid.container[0]).find("#"+widgetId+".grid-stack-item-content")),activeItemContentEl&&0!=activeItemContentEl.length){_context3.next=30;break}if(Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5),widgetContainerEl=$("<div><div id="+widgetId+' class="grid-stack-item-content">\n                                                <widget-container key='+widgetId+" \n                                                    nocache="+self.props.nocache+"\n                                                    slotid="+slotId+"\n                                                    componentid="+eleData.componentid+'\n                                                    preview="true" pageid='+self.pageId+"                                                    \n                                                    tag="+eleData.tag+"                                                                                             \n                                                    widgetid="+widgetId+' class="widgetContainer"                                             \n                                                    style="height: 100%;" shadow="true"\n                                                    pagesuffix='+self.props.pagesuffix+" ></widget-container></div><div/>"),0==slot.width&&0==slot.height){_context3.next=30;break}return _context3.next=30,self.grid.addWidget(widgetContainerEl,slot.xposition,slot.yposition,slot.width,slot.height,!1,0,96,0,80);case 30:_context3.next=12;break;case 32:self.grid.commit(),self.grid.cellHeight(this.cellHeight,!0);case 34:case"end":return _context3.stop()}},_callee3,this)})));case 7:case"end":return _context4.stop()}},_callee4,this)}));return function(_x2,_x3){return _ref3.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var self=this;this.loadNecessaryBundles().then(function(){self.updatePage(),$(self.rootEl).find(".gridPreviewContent")&&(self.props.watchScrolling||self.props.widgetProps&&self.props.widgetProps.WatchScroll)&&$(self.rootEl).find(".gridPreviewContent").scroll(function(){return self.props.updateStore({updates:{scrollfired:!self.props.scrollfired}})}),(-1==Object.keys(self.props).indexOf("responsive")&&(!self.props.widgetProps||-1==Object.keys(self.props.widgetProps).indexOf("Responsive"))||"true"==self.props.responsive||self.props.widgetProps&&self.props.widgetProps.Responsive&&("true"==self.props.widgetProps.Responsive||1==self.props.widgetProps.Responsive))&&window.addEventListener("resize",self.resizeGrid),self.refreshGrid()})}},{key:"componentDidUnmount",value:function(){window.removeEventListener("resize",this.resizeGrid)}},{key:"waitUntilPageInitialized",value:function(){var self=this;return new Promise(function(resolve,reject){var interval=setInterval(function(){self.state.widgetsInitialised&&(clearInterval(interval),resolve())})})}},{key:"componentDidUpdate",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(prevProps,prevState){var self,widgetsByName,layoutCode,prevPageState,currentPageState,prevPageData,currentPageData,pageData,widgetIds,widgetIdInx,widgetId,widgetObj,widgetObjProps,widgetName,parentPageState,widgets,widgetNames,pageState,prevLayout,currentLayout,newWidgets,newWidgetsTransformed,newWidgetIds,newWidgetIdIndx,newWidgetId,newWidgetObj,_widgetNames,widgetNameIndx,_widgetName,updatedWidgetProps,updatedWidgetsPostStateChanges,_prevLayout,_currentLayout,_pageData,_newWidgets,_newWidgetsTransformed,_newWidgetIds,_newWidgetIdIndx,_newWidgetId,_newWidgetObj,_widgetNames2,_widgetNameIndx,_widgetName2,_updatedWidgetProps,_pageState,parentstate,widgetNamesInState,widgetNameInStateIndx,_widgetName3,_widgetObj,node,pageId,pageParamMapping,pageParams,parentPage,parentPageParams,subPageName,inputParams,_this2=this;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(self=this,widgetsByName={},layoutCode="default",prevPageState=prevProps.pageState,currentPageState=this.props.pageState,prevPageData=prevProps.pageData,currentPageData=this.props.pageData,pageData=Object.assign({},currentPageData)||{},!0,!(this.prevProps&&_.isEqual(prevProps,this.prevProps)&&this.currentProps&&_.isEqual(this.currentProps,this.props)&&this.prevState&&_.isEqual(prevState,this.prevState)&&this.currentState&&_.isEqual(this.currentState,this.state))){_context6.next=13;break}return _context6.abrupt("return");case 13:this.prevProps=prevProps,this.currentProps=this.props,this.prevState=prevState,this.currentState=this.state;case 17:if(!prevProps.widgetProps||!this.props.widgetProps||prevProps.widgetProps.PageId==this.props.widgetProps.PageId){_context6.next=21;break}return _context6.next=20,this.changePage(prevProps);case 20:return _context6.abrupt("return");case 21:if(currentPageData&&currentPageData.widgets)for(widgetIdInx in widgetIds=Object.keys(currentPageData.widgets))widgetId=widgetIds[widgetIdInx],widgetObj=currentPageData.widgets[widgetId],widgetObjProps=widgetObj.props,widgetName=widgetObjProps.Name?widgetObjProps.Name:widgetId,widgetsByName[widgetName]=widgetObj;if(_.isEqual(prevPageState,currentPageState)){_context6.next=73;break}if(!prevPageState||!currentPageState){_context6.next=72;break}if(prevPageData&&currentPageData&&prevPageData.id==currentPageData.id&&currentPageState.parentstate&&currentPageState.clickts!=currentPageState.parentstate.clickts&&!_.isEqual(prevPageState.parentstate,currentPageState.parentstate)&&(parentPageState=cloneDeep(currentPageState.parentstate),this.props.updateStore({updates:{parentPageState:parentPageState}})),!prevPageState||!currentPageState||_.isEqual(prevPageState.layout,currentPageState.layout)&&prevPageState.currentLayout==currentPageState.currentLayout){_context6.next=28;break}return _context6.next=28,self.waitUntilPageInitialized();case 28:if(prevPageState.showloader!=currentPageState.showloader&&this.setState({showloader:currentPageState.showloader}),_.isEqual(prevPageState.layout,currentPageState.layout)){_context6.next=43;break}if($(self.rootEl).find(".gridPreviewCanvas"),!self.grid){_context6.next=41;break}if(self.grid.batchUpdate(),currentPageState.layout&&currentPageState.layout.options&&self.grid.float(currentPageState.layout.options.float),!currentPageState.layout||!currentPageState.layout.widgets){_context6.next=41;break}return widgets=currentPageState.layout.widgets,widgetNames=Object.keys(widgets),_context6.next=39,widgetNames.map(function(){var _ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(widgetName){var widgetObj,widgetId,gridStackItemContentEl,gridStackItemEl,widgetEl;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(widgetObj=widgetsByName[widgetName],(widgetObj=deepmerge.all([widgets[widgetName],widgetObj])).tag=widgetObj.tag?widgetObj.tag:widgetObj.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),widgetId=widgetObj.id,1!=(gridStackItemContentEl=self.grid.$el.find("#"+widgetId+".grid-stack-item-content")).length){_context5.next=10;break}gridStackItemEl=gridStackItemContentEl.parent(),widgetObj.slot&&(0==widgetObj.slot.width&&0==widgetObj.slot.height?self.grid.removeWidget(gridStackItemEl):self.grid.update(gridStackItemEl,widgetObj.slot.x,widgetObj.slot.y,widgetObj.slot.width,widgetObj.slot.height)),_context5.next=16;break;case 10:if(!widgetObj.slot){_context5.next=16;break}if(Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5),widgetEl=$("<div><div id="+widgetId+' class="grid-stack-item-content">\n                                                    <widget-container key='+widgetId+" \n                                                        nocache="+self.props.nocache+'\n                                                        preview="true" pageid='+self.pageId+"\n                                                        tag="+widgetObj.tag+"                                                                                             \n                                                        widgetid="+widgetId+' class="widgetContainer"                                             \n                                                        style="height: 100%;" shadow="true"\n                                                        pagesuffix='+self.props.pagesuffix+" ></widget-container></div><div/>"),0==widgetObj.slot.width&&0==widgetObj.slot.height){_context5.next=16;break}return _context5.next=16,self.grid.addWidget(widgetEl,widgetObj.slot.x,widgetObj.slot.y,widgetObj.slot.width,widgetObj.slot.height,!1,0,96,0,80);case 16:case"end":return _context5.stop()}},_callee5,_this2)}));return function(_x6){return _ref6.apply(this,arguments)}}());case 39:self.grid.commit(),this.refreshGrid(prevProps);case 41:_context6.next=72;break;case 43:if(prevPageState.oneColumn==currentPageState.oneColumn){_context6.next=51;break}if(!currentPageData){_context6.next=49;break}return _context6.next=47,this.runPageActions(currentPageData,currentPageData.pageParams||{});case 47:_context6.sent,this.transientPageState&&(pageState=this.transientPageState?this.transientPageState:this.props.pageState,_.isEqual(pageState,this.props.pageState)||(pageState.clickts=Date.now(),this.props.updateStore({updates:{pageState:pageState}})),this.transientPageState=null);case 49:_context6.next=72;break;case 51:if(prevPageState.currentLayout==currentPageState.currentLayout){_context6.next=72;break}if(prevLayout=prevPageState.currentLayout,currentLayout=currentPageState.currentLayout,prevLayout&&"default"!=prevLayout||currentLayout&&"default"!=currentLayout){_context6.next=57;break}_context6.next=72;break;case 57:if(pageData.currentLayout=currentPageState?currentPageState.currentLayout:pageData.currentLayout,!pageData.layouts||!pageData.layouts.slots){_context6.next=72;break}for(newWidgetIdIndx in layoutCode="mobile"==currentPageState.currentLayout?pageData.layouts.slots.mobile?"mobile":"default":currentPageState.currentLayout,pageData.slots=pageData.layouts.slots[layoutCode],newWidgets=pageData.layouts.widgets[layoutCode],newWidgetsTransformed={},newWidgetIds=newWidgets?Object.keys(newWidgets):[])newWidgetId=newWidgetIds[newWidgetIdIndx],(newWidgetObj=newWidgets[newWidgetId]).props&&newWidgetObj.props.Name&&(newWidgetsTransformed[newWidgetObj.props.Name]=newWidgetObj);for(widgetNameIndx in[],_widgetNames=Object.keys(newWidgetsTransformed))_widgetName=_widgetNames[widgetNameIndx],updatedWidgetProps=deepmerge.all([newWidgetsTransformed[_widgetName].props,widgetsByName[_widgetName]?widgetsByName[_widgetName].props:{}]),updatedWidgetProps=this.reconcileWidgetProps(updatedWidgetProps,this.props.pageState),newWidgets[newWidgetsTransformed[_widgetName].id].props=updatedWidgetProps;return pageData.widgets=newWidgets,_context6.next=71,this.initializeLayout(self.props.shadow,pageData);case 71:this.props.updateStore({updates:{pageData:pageData}});case 72:currentPageData&&currentPageData.widgets&&Object.keys(currentPageData.widgets).length>0&&(updatedWidgetsPostStateChanges=this.updateWidgetsWithStateChanges(currentPageState,currentPageData.widgets),_.isEqual(currentPageData.widgets,updatedWidgetsPostStateChanges)||((pageData=Object.assign({},currentPageData)).widgets=updatedWidgetsPostStateChanges,currentPageState&&prevPageState&&currentPageState.currentLayout!=prevPageState.currentLayout&&(pageData.currentLayout=currentPageState.currentLayout),this.props.updateStore({updates:{pageData:pageData}})));case 73:if(!prevPageData||!currentPageData||prevPageData.id!=currentPageData.id||prevPageData.currentLayout==currentPageData.currentLayout){_context6.next=94;break}if(currentPageData.currentLayout==currentPageState.currentLayout){_context6.next=94;break}if(_prevLayout=prevPageData.currentLayout,_currentLayout=currentPageData.currentLayout,_prevLayout&&"default"!=_prevLayout||_currentLayout&&"default"!=_currentLayout){_context6.next=80;break}_context6.next=94;break;case 80:if(!(_pageData=Object.assign({},currentPageData)).layouts||!_pageData.layouts.slots){_context6.next=94;break}for(_newWidgetIdIndx in _pageData.slots=_pageData.layouts.slots[currentPageData.currentLayout],_newWidgets=_pageData.layouts.widgets[layoutCode],_newWidgetsTransformed={},_newWidgetIds=Object.keys(_newWidgets))_newWidgetId=_newWidgetIds[_newWidgetIdIndx],(_newWidgetObj=_newWidgets[_newWidgetId]).props&&_newWidgetObj.props.Name&&(_newWidgetsTransformed[_newWidgetObj.props.Name]=_newWidgetObj);for(_widgetNameIndx in[],_widgetNames2=Object.keys(_newWidgetsTransformed))_widgetName2=_widgetNames2[_widgetNameIndx],_updatedWidgetProps=deepmerge.all([_newWidgetsTransformed[_widgetName2].props,widgetsByName[_widgetName2]?widgetsByName[_widgetName2].props:{}]),_newWidgets[_newWidgetsTransformed[_widgetName2].id].props=_updatedWidgetProps;return _pageData.widgets=_newWidgets,_context6.next=93,this.initializeLayout(self.props.shadow,_pageData);case 93:this.props.updateStore({updates:{pageData:_pageData}});case 94:if(_.isEqual(prevProps.parentstate,this.props.parentstate)||(_pageState=Object.assign({},currentPageState)||{},parentstate=this.props.parentstate?"string"==typeof this.props.parentstate?JSON.parse(this.props.parentstate):this.props.parentstate:{},_pageState.clickts!=parentstate.clickts&&(_pageState.parentstate=parentstate,this.props.updateStore({updates:{pageState:_pageState}}))),prevState.pageloading==this.state.pageloading){_context6.next=123;break}if(1!=this.state.pageloading){_context6.next=100;break}this.updatePage(prevProps),_context6.next=121;break;case 100:if(_.isEqual(prevState.widgets,this.state.widgets)||!this.state.widgets||this.state.widgetsInitialised){_context6.next=121;break}$(self.rootEl).find(".gridPreviewCanvas"),self.grid.batchUpdate(),self.grid.removeAll(),self.grid&&self.grid.engine&&self.grid.engine._removedNodes&&self.grid.engine._removedNodes.map(function(node){$(node.el).remove()}),widgetNamesInState=Object.keys(this.state.widgets),_context6.t0=_regeneratorRuntime.keys(widgetNamesInState);case 107:if((_context6.t1=_context6.t0()).done){_context6.next=118;break}if(widgetNameInStateIndx=_context6.t1.value,_widgetName3=widgetNamesInState[widgetNameInStateIndx],_widgetObj=this.state.widgets[_widgetName3],node=_widgetObj.node,!self.grid){_context6.next=116;break}if(0==node.width&&0==node.height){_context6.next=116;break}return _context6.next=116,self.grid.addWidget(_widgetObj.ele,node.xposition,node.yposition,node.width,node.height,!1,node.minwidth,node.maxwidth,node.minheight,node.maxheight);case 116:_context6.next=107;break;case 118:self.grid.commit(),self.grid.cellHeight(this.cellHeight,!0),self.setState({widgetsInitialised:!0});case 121:_context6.next=153;break;case 123:if(this.props.reload==prevProps.reload&&this.props.pagereload==prevProps.pagereload&&_.isEqual(this.props.items,prevProps.items)){_context6.next=127;break}this.updatePage(prevProps),_context6.next=153;break;case 127:if(!this.props.widgetProps||!prevProps.widgetProps||_.isEqual(this.props.widgetProps,prevProps.widgetProps)){_context6.next=131;break}this.props.parentPage&&this.props.parentPage.widgets&&this.props.parentPage.widgets[this.props.widgetid]&&"SrsTabs"==this.props.parentPage.widgets[this.props.widgetid].name?prevProps.widgetProps.Reload==this.props.widgetProps.Reload&&prevProps.widgetProps.ActiveTab==this.props.widgetProps.ActiveTab&&(_.isEqual(this.pageParams,currentPageData.pageParams)||(this.pageParams=currentPageData.pageParams,this.updatePage(prevProps))):this.updatePage(prevProps),_context6.next=153;break;case 131:if(!prevPageData||!currentPageData||_.isEqual(currentPageData,prevPageData)||prevPageData.id!=currentPageData.id){_context6.next=153;break}if(pageId="true"==this.props.widgetProps.is_container?this.props.previewpageid:this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,pageParamMapping=null,pageParams={},!this.props.pagesuffix||!this.props.pageid){_context6.next=139;break}pageParams=this.props.pages[pageId+this.props.pagesuffix]?this.props.pages[pageId+this.props.pagesuffix].pageParams:pageParams,_context6.next=152;break;case 139:if(!prevPageData||!currentPageData||_.isEqual(prevPageData.pageParams,currentPageData.pageParams)){_context6.next=143;break}pageParams=currentPageData.pageParams,_context6.next=152;break;case 143:return pageParamMapping="string"==typeof(pageParamMapping=pageParamMapping||(this.props&&this.props.widgetProps&&this.props.widgetProps.PageParams?this.props.widgetProps.PageParams:{}))?JSON.parse(pageParamMapping):pageParamMapping,parentPage=this.props.pagesuffix&&"_pagemodel"==this.props.pagesuffix?this.props.pageparam?null:this.props.pages[this.props.pageid+this.props.pagesuffix]:this.props.parentPage,parentPageParams="_pagemodel"==this.props.pagesuffix?parentPage.pageParams:this.props.pageparams?"string"==typeof this.props.pageparams?JSON.parse(this.props.pageparams):this.props.pageparams:{},subPageName=this.props.pagesuffix&&"_pagemodel"==this.props.pagesuffix?"pagemodel":this.props.pagename,inputParams={pageId:pageId,pageParamMapping:pageParamMapping,parentPageParams:parentPageParams,parentPage:parentPage,isContainer:!!this.props.widgetProps&&this.props.widgetProps.is_container,containerSubPageName:subPageName,pageState:this.props.pageState},_context6.next=151,$script.runscript("mmf.getPageParameters",inputParams);case 151:pageParams=_context6.sent;case 152:_.isEqual(pageParams,this.pageParams)||(this.pageParams=pageParams,this.updatePage(prevProps));case 153:case"end":return _context6.stop()}},_callee6,this)}));return function(_x4,_x5){return _ref5.apply(this,arguments)}}()},{key:"resizeGrid",value:function(prevProps){var pageStateChanged=!1,pageState=Object.assign({},this.props.pageState)||{};if(this.props.parentstate&&(!prevProps||!_.isEqual(prevProps.parentstate,this.props.parentstate))){var parentstate=this.props.parentstate?"string"==typeof this.props.parentstate?JSON.parse(this.props.parentstate):this.props.parentstate:{};parentstate.clickts!=pageState.clickts&&(pageState.parentstate=parentstate),pageStateChanged=!0}("true"==this.props.responsive||this.props.widgetProps&&this.props.widgetProps.Responsive&&("true"==this.props.widgetProps.Responsive||1==this.props.widgetProps.Responsive))&&(this.props.preview&&this.rootEl&&this.grid&&this.rootEl.clientWidth>0&&(this.rootEl.clientWidth<700?(this.grid.column(1),pageState.currentLayout&&"default"!=pageState.currentLayout||(pageState.oneColumn=!0,pageState.currentLayout="mobile",pageState.layout=pageState.layout||{},pageState.layout.options=pageState.layout.options||{},pageState.layout.options.float=!1,pageStateChanged=!0)):(this.grid.column(96),pageState.currentLayout&&"default"!=pageState.currentLayout||(pageState.oneColumn=!1,pageState.currentLayout=pageState.currentLayout||"default",pageState.layout=pageState.layout||{},pageState.layout.options=pageState.layout.options||{},pageState.layout.options.float=!0,pageStateChanged=!0))));pageStateChanged&&this.props.updateStore({updates:{pageState:pageState}}),this.grid&&this.grid._updateContainerHeight()}},{key:"refreshGrid",value:function(prevProps){var pageStateChanged=!1,pageState=Object.assign({},this.props.pageState)||{};if(this.props.parentstate&&(!prevProps||!_.isEqual(prevProps.parentstate,this.props.parentstate))){var parentstate=this.props.parentstate?"string"==typeof this.props.parentstate?JSON.parse(this.props.parentstate):this.props.parentstate:{};pageState.parentstate=parentstate,pageStateChanged=!0}pageStateChanged&&this.props.updateStore({updates:{pageState:pageState}})}},{key:"parseGraphQLParam",value:function(paramValue){var paramFields=paramValue.split(".");if(paramFields&&paramFields.length>1){var tempObj={};paramFields.slice(1).reduce(function(o,s){return o[s]={}},tempObj);var convertedStr=JSON.stringify(tempObj).replace(":{}","").replace(/"/g,"").replace(/:{/g,"{\n\t\t").replace(/^{/,"{\n\t").replace(/([}]+)/,"\n$1");return paramFields[0]+" "+convertedStr}return paramValue}},{key:"evaluateQuery",value:function(graphQLParams,recordId){var _this3=this;return new Promise(function(resolve,reject){var fields=[];graphQLParams.map(function(graphQLParam){fields.push(_this3.parseGraphQLParam(graphQLParam))});var query="query($inputData:JSON) {\n                    "+_this3.viewModelName+" {\n                        "+_this3.viewModelName+"FindOne(filter: $inputData) {\n                            uid\n                            "+fields.join("\n")+"\n                        }\n                    }\n            }",variables='{\n                    "inputData": {\n                        "where": {\n                        "uid": "'+recordId+'"\n                        }\n                    }\n                }';$qry._run(query,variables).then(function(viewData){var result=("data."+_this3.viewModelName+"."+_this3.viewModelName+"FindOne").split(".").reduce(function(xs,s){return xs&&xs[s]?xs[s]:null},viewData);resolve(result)}).catch(function(err){return resolve({})})})}},{key:"getPageParams",value:function(pageId){var _ref7,_this4=this;return new Promise((_ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(resolve,reject){var parentPageParams,parentPage,pageParamMapping,pageParams,pageProps,allowedPagePropNames,_allowedPagePropNames,pageParamMappingKey;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(parentPageParams=_this4.props.pageparams?"string"==typeof _this4.props.pageparams?JSON.parse(_this4.props.pageparams):_this4.props.pageparams:{},parentPage=_this4.props.parentPage,_context8.t0=_this4.queriedPage,_context8.t0){_context8.next=7;break}return _context8.next=6,$qry.run("mmf.getSlidePropsById",{uid:pageId},"data.slide",!1,!!_this4.props.preview);case 6:_context8.t0=_context8.sent;case 7:_this4.queriedPage=_context8.t0,pageParamMapping="string"==typeof(pageParamMapping=_this4.props&&_this4.props.widgetProps&&_this4.props.widgetProps.PageParams?_this4.props.widgetProps.PageParams:{})?JSON.parse(pageParamMapping):pageParamMapping,pageParams={},pageProps={},"CreateView"==_this4.queriedPage.Type||"EditView"==_this4.queriedPage.Type?((allowedPagePropNames=Object.keys(_this4.queriedPage.props).filter(function(pagePropName){return"ModelName"!=pagePropName&&"ModelScope"!=pagePropName}))&&allowedPagePropNames.map(function(allowedPropName){return pageProps[allowedPropName]=_this4.queriedPage.props[allowedPropName]}),pageProps.recordid="recordid"):(_allowedPagePropNames=Object.keys(_this4.queriedPage.props).filter(function(pagePropName){return"ModelName"!=pagePropName&&"ModelScope"!=pagePropName}))&&_allowedPagePropNames.map(function(allowedPropName){return pageProps[allowedPropName]=_this4.queriedPage.props[allowedPropName]}),pageParamMappingKey="true"==_this4.props.widgetProps.is_container?pageId+"_"+_this4.props.pagename:pageId,pageProps&&Object.keys(pageProps).map(function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(propName){var widgetName2Map,childWidgetPageId,childWidgetName,widgetPropName2Map,childWidgetPage,pages,fieldName2Map,parentStatePath,value;return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(!(pageParamMapping&&pageParamMapping[pageParamMappingKey]&&pageParamMapping[pageParamMappingKey][propName])){_context7.next=34;break}_context7.t0=pageParamMapping[pageParamMappingKey][propName].type,_context7.next="widget_props"===_context7.t0?4:"page_field"===_context7.t0?23:"page_param"===_context7.t0?26:"parent_state"===_context7.t0?28:30;break;case 4:if(widgetName2Map=pageParamMapping[pageParamMappingKey][propName].widgetName,childWidgetPageId=pageParamMapping[pageParamMappingKey][propName].childWidgetPageId,childWidgetName=pageParamMapping[pageParamMappingKey][propName].childWidgetName,widgetPropName2Map="",!childWidgetPageId||!childWidgetName){_context7.next=20;break}if(childWidgetPage=_this4.props.pages[childWidgetPageId]){_context7.next=17;break}return _context7.next=13,$script.runscript("studio.getPageDetails",{pageId:childWidgetPageId},!1,!!_this4.props.preview);case 13:childWidgetPage=_context7.sent,(pages=Object.assign({},_this4.props.pages))[childWidgetPageId]=childWidgetPage,_this4.props.updateStore({updates:{pages:pages}});case 17:childWidgetPage.widgets&&(widgetPropName2Map=pageParamMapping[pageParamMappingKey][propName].widgetPropName?pageParamMapping[pageParamMappingKey][propName].widgetPropName:"value",Object.keys(childWidgetPage.widgets).map(function(targetWidgetId){if(childWidgetPage.widgets[targetWidgetId].props){var targetWidgetName=childWidgetPage.widgets[targetWidgetId].props.Name||childWidgetPage.widgets[targetWidgetId].props.id;childWidgetName==targetWidgetName&&(pageParams[propName]=childWidgetPage.widgets[targetWidgetId].props[widgetPropName2Map])}})),_context7.next=22;break;case 20:widgetPropName2Map=pageParamMapping[pageParamMappingKey][propName].widgetPropName?pageParamMapping[pageParamMappingKey][propName].widgetPropName:"value",widgetName2Map&&parentPage&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){(parentPageWidgetId==widgetName2Map||parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.Name==widgetName2Map)&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props[widgetPropName2Map])});case 22:return _context7.abrupt("break",32);case 23:return(fieldName2Map=pageParamMapping[pageParamMappingKey][propName].pageFieldId)&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.FieldName=="@@["+fieldName2Map+"]"&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.value)}),_context7.abrupt("break",32);case 26:return parentPage&&parentPage.pageParams&&(pageParamMapping[pageParamMappingKey][propName].pageParamId?pageParams[propName]=parentPage.pageParams[pageParamMapping[pageParamMappingKey][propName].pageParamId]:pageParams[propName]=parentPage.pageParams[propName]),_context7.abrupt("break",32);case 28:return parentPage&&parentPage.pageParams&&(pageParamMapping[pageParamMappingKey][propName].parentStatePath?(parentStatePath=pageParamMapping[pageParamMappingKey][propName].parentStatePath,value=lodashget(_this4.props.pageState,"parentstate."+parentStatePath),pageParams[propName]=value):pageParams[propName]=parentPage.pageParams[propName]),_context7.abrupt("break",32);case 30:return parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(pageParams[propName]=parentPage.pageParams[propName]),_context7.abrupt("break",32);case 32:_context7.next=35;break;case 34:parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]?pageParams[propName]=parentPage.pageParams[propName]:parentPageParams&&parentPageParams[propName]&&(pageParams[propName]=parentPageParams[propName]);case 35:case"end":return _context7.stop()}},_callee7,_this4)}));return function(_x9){return _ref8.apply(this,arguments)}}()),resolve(pageParams);case 16:case"end":return _context8.stop()}},_callee8,_this4)})),function(_x7,_x8){return _ref7.apply(this,arguments)}))}},{key:"runPageActions",value:function(){var _ref9=_asyncToGenerator(_regeneratorRuntime.mark(function _callee9(pageData,pageParams){var updatedPageData,self,pageId,pageActions,pageActionURL,pageActionKeys,pageActionsPromises,_loop,pageActionKeyIndx,dataArry,dataArryIndx,widgetData,widgetNames,updatedWidgetIndx,widgetName,updatedWidgetProps,updatedWidgetId,_this5=this;return _regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return{},updatedPageData=void 0,self=this,pageId=this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,pageActions=null,_context9.prev=5,pageActionURL="/page/"+pageId+"/Action.js",this.props.nocache&&"true"==this.props.nocache&&(pageActionURL=pageActionURL+"?key="+Date.now()),_context9.next=10,System.import(pageActionURL);case 10:pageActions=_context9.sent,_context9.next=17;break;case 13:_context9.prev=13,_context9.t0=_context9.catch(5),console.error(_context9.t0.message),pageActions=null;case 17:if(!pageActions||!pageActions.default){_context9.next=31;break}if(!((pageActions=pageActions.default)&&Object.keys(pageActions).length>0)){_context9.next=31;break}for(pageActionKeyIndx in{},pageActionKeys=Object.keys(pageActions),pageActionsPromises=[],_loop=function(){var pageActionKey=pageActionKeys[pageActionKeyIndx],notifier={setMenuItems:_this5.setMenuItems,getState:_this5.getPageState,setState:_this5.setPageState,openModal:_this5.openModal,closeModal:_this5.props.closeModal,setStateWithPreload:_this5.setPageStateWithPreload,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},ctx={currentscope:self.props.currentscope,menuscope:self.props.menuScope,cloneDeep:cloneDeep,nocache:"true"==_this5.props.nocache},result=pageActions[pageActionKey](pageData,notifier,ctx);result.then?pageActionsPromises.push(result):pageActionsPromises.push(new Promise(function(resolve,reject){return resolve(result)}))},pageActionKeys)_loop();if(updatedPageData=Object.assign({},pageData),!(pageActionsPromises.length>0)){_context9.next=31;break}return _context9.next=29,Promise.all(pageActionsPromises);case 29:if((dataArry=_context9.sent)&&dataArry.length>0)for(dataArryIndx in dataArry)if((widgetData=dataArry[dataArryIndx])&&Object.keys(widgetData).length>0&&(widgetNames=Object.keys(widgetData),widgetData&&widgetNames.length>0))for(updatedWidgetIndx in widgetNames)widgetName=widgetNames[updatedWidgetIndx],updatedWidgetProps=widgetData[widgetName].props,updatedWidgetId=updatedWidgetProps.id,_.isEqual(updatedWidgetProps,pageData.widgets[updatedWidgetId].props)||(updatedPageData.widgets[updatedWidgetId].props=_extends({},updatedPageData.widgets[updatedWidgetId].props,updatedWidgetProps));case 31:return _context9.abrupt("return",updatedPageData||pageData);case 32:case"end":return _context9.stop()}},_callee9,this,[[5,13]])}));return function(_x10,_x11){return _ref9.apply(this,arguments)}}()},{key:"getPreviewItems",value:function(previewPage,previousPageParams){var _ref10,_this6=this;return new Promise((_ref10=_asyncToGenerator(_regeneratorRuntime.mark(function _callee10(resolve,reject){var pageId,previewItems,accessPaths,slideData,slots,slideProps,viewType,graphQLParams,recordid,previousRecordId;return _regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(_context10.prev=0,pageId=_this6.props.widgetProps&&_this6.props.widgetProps.PageId?_this6.props.widgetProps.PageId:_this6.props.previewpageid,previewItems=[],accessPaths=["data.slide"].join(),_context10.t0=_this6.slidesData[pageId],_context10.t0){_context10.next=9;break}return _context10.next=8,$qry.run("mmf.getSlideDetailsById",{uid:pageId},accessPaths,!1,!!_this6.props.preview);case 8:_context10.t0=_context10.sent;case 9:return _this6.slideData=_context10.t0,_this6.slidesData[pageId]=_this6.slideData,slideData=_this6.slideData,slots={},_context10.next=15,$qry.run("mmf.getSlideProps",{pageId:pageId},"data.MetaSlideProps.MetaSlidePropsFind",!1,!!_this6.props.preview);case 15:if(slideProps=_context10.sent,slideData.Scope,slideData.Name,viewType=slideData.Type,graphQLParams=[],Object.keys(slideData.slots).map(function(slotKey){var slot=slideData.slots[slotKey];slot&&slot.widget&&slot.widget.widgetproperties&&Object.keys(slot.widget.widgetproperties).map(function(widgetPropKey){var widgetProp=slot.widget.widgetproperties[widgetPropKey];if(widgetProp&&widgetProp.value&&widgetProp.value.startsWith("@@[")){var paramValue=widgetProp.value.split("@@[")[1];paramValue=paramValue.substr(0,paramValue.length-1),graphQLParams.push(paramValue)}})}),recordid=previewPage&&previewPage.pageParams&&previewPage.pageParams.recordid?previewPage.pageParams.recordid:"",previousRecordId=previousPageParams&&previousPageParams.recordid?previousPageParams.recordid:"",!("CreateView"==viewType||"EditView"==viewType&&recordid&&"-1"!=recordid&&recordid!=previousRecordId)){_context10.next=29;break}return _context10.next=26,_this6.evaluateQuery(graphQLParams,recordid);case 26:_context10.t1=_context10.sent,_context10.next=30;break;case 29:_context10.t1=_this6.viewData;case 30:_this6.viewData=_context10.t1,Object.keys(slideData.slots).map(function(slotKey){var slot=slideData.slots[slotKey],slotData={},widgetPropsPair={};slot&&(slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.height=slot.height,slotData.width=slot.width,slotData.minwidth=slot.minwidth,slotData.maxwidth=slot.maxwidth,slotData.minheight=slot.minheight,slotData.maxheight=slot.maxheight,slotData.resize=0,slotData.move=0,slotData.uid=slot.uid,slotData.Layout=slot.Layout,slotData.Slide=pageId,slots[slot.uid]=slotData),slot&&slot.widget&&slot.widget.widgetproperties&&(Object.keys(slot.widget.widgetproperties).map(function(widgetPropKey){if(!widgetPropKey.startsWith("__Pageparam__")){var widgetProp=slot.widget.widgetproperties[widgetPropKey],paramValue=widgetProp.value;widgetPropsPair[widgetProp.name]=paramValue;var fieldNameWithoutCover=widgetProp.value&&widgetProp.value.indexOf("@@[")>-1?widgetProp.value.split("@@[")[1]:widgetProp.value;fieldNameWithoutCover=fieldNameWithoutCover.endsWith("]")?fieldNameWithoutCover.substr(0,fieldNameWithoutCover.length-1):fieldNameWithoutCover,"FieldName"==widgetPropKey&&_this6.viewData&&(widgetPropsPair.value=lodashget(_this6.viewData,fieldNameWithoutCover))}}),Object.keys(slot.widget.widgetproperties).map(function(widgetPropKey){if(widgetPropKey.startsWith("__Pageparam__")){var widgetPropPageParamKey=widgetPropKey.split("__Pageparam__")[1],referredPageParameter=slot.widget.widgetproperties[widgetPropKey].value;previewPage.pageParams&&(previewPage.pageParams.hasOwnProperty(referredPageParameter)?widgetPropsPair[widgetPropPageParamKey]=previewPage.pageParams[referredPageParameter]:widgetPropsPair[widgetPropPageParamKey]=previewPage.props&&previewPage.props[referredPageParameter])}})),slot&&slot.widget&&(widgetPropsPair.id=slot.widget.uid,slotData.widget={tag:slot.widget.component.Name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),widgetid:slot.widget.uid,component:{name:slot.widget.component?slot.widget.component.Name:"",scope:slot.widget.component?slot.widget.component.Scope:"",type:slot.widget.component?slot.widget.component.Type:"",uid:slot.widget.component?slot.widget.component.uid:""},widgetprops:widgetPropsPair},slotData.widget=slotData.widget||{},slotData.widget.widgetprops=slotData.widget.widgetprops||{},slot.widget.component&&slot.widget.component.Props&&Object.keys(slot.widget.component.Props).map(function(componentPropName){-1==Object.keys(widgetPropsPair).indexOf(componentPropName)&&(slotData.widget.widgetprops[componentPropName]=slot.widget.component.Props[componentPropName])})),previewItems.push(slotData)}),resolve({previewItems:previewItems,slots:slots,props:slideProps}),_context10.next=38;break;case 35:_context10.prev=35,_context10.t2=_context10.catch(0),resolve({});case 38:case"end":return _context10.stop()}},_callee10,_this6,[[0,35]])})),function(_x12,_x13){return _ref10.apply(this,arguments)}))}},{key:"registerElements",value:function(uniqueComponentsToRegister){return new Promise(function(resolve,reject){var promises=[];uniqueComponentsToRegister&&Object.keys(uniqueComponentsToRegister).length>0&&Object.keys(uniqueComponentsToRegister).map(function(componentId){var elePromise=$ele&&$ele.registerElement(uniqueComponentsToRegister[componentId].name,uniqueComponentsToRegister[componentId].scope,uniqueComponentsToRegister[componentId].type);"PageDesigner"==uniqueComponentsToRegister[componentId].name&&"studio"==uniqueComponentsToRegister[componentId].scope&&(promises.push($ele&&$ele.registerElement("PageDesignerGeneral","studio","React")),promises.push($ele&&$ele.registerElement("PageDesignerWidget","studio","React")),promises.push($ele&&$ele.registerElement("PageDesignerProps","studio","React")),promises.push($ele&&$ele.registerElement("PageDesignerActions","studio","React")),promises.push($ele&&$ele.registerElement("SlideSelectionPanel","studio","React"))),promises.push(elePromise)});var listElPromise=$ele&&$ele.registerElement("ListLayout","mmf","React");promises.push(listElPromise),Promise.all(promises).then(function(results){return resolve()})})}},{key:"updatePage",value:function(){var _ref11=_asyncToGenerator(_regeneratorRuntime.mark(function _callee11(prevProps){return _regeneratorRuntime.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:if(this,!this.state.pageloading){_context11.next=5;break}return _context11.abrupt("return");case 5:return this.setState({pageloading:!0,widgetsInitialised:!1,pageParams:prevProps&&prevProps.pageData&&prevProps.pageData.pageParams?prevProps.pageData.pageParams:this.state.pageParams}),_context11.next=8,this._updateProps(prevProps);case 8:case"end":return _context11.stop()}},_callee11,this)}));return function(_x14){return _ref11.apply(this,arguments)}}()},{key:"changePage",value:function(){var _ref12=_asyncToGenerator(_regeneratorRuntime.mark(function _callee12(prevProps){return _regeneratorRuntime.wrap(function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:if(this,!this.state.pageloading){_context12.next=5;break}return _context12.abrupt("return");case 5:return this.setState({pageloading:!0,widgetsInitialised:!1,pageParams:prevProps&&prevProps.pageData&&prevProps.pageData.pageParams?prevProps.pageData.pageParams:this.state.pageParams}),_context12.next=8,this._updateProps(prevProps,!0);case 8:case"end":return _context12.stop()}},_callee12,this)}));return function(_x15){return _ref12.apply(this,arguments)}}()},{key:"_updateProps",value:function(){var _ref13=_asyncToGenerator(_regeneratorRuntime.mark(function _callee15(prevProps,changePage){var uniquePageId,self,gridCanvasEl,accessPaths,slideData,scope,name,viewType,previewPage,modelNamePropKey,modelName,modelScopePropKey,modelScope,pageParamMapping,parentPageParams,parentPage,subPageName,inputParams,_ref14,previewItems,slots,props,widgets,gridElPromises,currentLayoutInState,_this8=this;return _regeneratorRuntime.wrap(function(_context15){for(;;)switch(_context15.prev=_context15.next){case 0:if(this.pageId=this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,uniquePageId=this.props.pagesuffix?this.pageId+this.props.pagesuffix:this.pageId,this.pageId){_context15.next=4;break}return _context15.abrupt("return");case 4:return this.props.dimensions?JSON.parse(this.props.dimensions):null,gridCanvasEl=$((self=this).rootEl).find(".gridPreviewCanvas"),this.grid=this.grids[uniquePageId],this.grid&&!changePage||(this.grid=GridStack.init(self.options,gridCanvasEl),this.grid.on("removed",function(event,items){items&&items.map(function(item){$(item.el).remove()})}),this.grid.on("added",function(event,items){}),this.grid.on("change",function(event,items){}),this.grids=this.grids||{},this.grids[uniquePageId]=this.grid),accessPaths=["data.slide"].join(),_context15.next=12,$qry.run("mmf.getSlideDetailsById",{uid:this.pageId},accessPaths,!1,!1);case 12:return slideData=_context15.sent,_context15.next=15,$qry.run("mmf.getSlideDetailsById",{uid:this.pageId},accessPaths,!1,!1);case 15:return slideData=_context15.sent,scope=slideData.Scope,name=slideData.Name,viewType=slideData.Type,previewPage=this.props.pages&&this.props.pages[uniquePageId]?Object.assign({},this.props.pages[uniquePageId]):{},"CreateView"!=viewType&&"EditView"!=viewType||(modelNamePropKey=Object.keys(slideData.props).filter(function(dataKey){return"ModelName"===slideData.props[dataKey].Name}),modelName=modelNamePropKey&&1==modelNamePropKey.length?slideData.props[modelNamePropKey[0]].Value:"Unknown",modelScopePropKey=Object.keys(slideData.props).filter(function(dataKey){return"ModelScope"===slideData.props[dataKey].Name}),modelScope=modelScopePropKey&&1==modelScopePropKey.length?slideData.props[modelScopePropKey[0]].Value:"Unknown",this.viewModelName="mmf"==modelScope&&modelName.startsWith("Meta")?modelName:modelName+"_"+modelScope,previewPage.model=modelName,previewPage.modelscope=modelScope),previewPage.id=this.pageId,previewPage.pagesuffix=this.props.pagesuffix,previewPage.name=name,previewPage.scope=scope,previewPage.path=slideData.Path,previewPage.pageType=viewType,pageParamMapping="string"==typeof(pageParamMapping=this.props&&this.props.widgetProps&&this.props.widgetProps.PageParams?this.props.widgetProps.PageParams:{})?JSON.parse(pageParamMapping):pageParamMapping,parentPageParams=this.props.pageparams?"string"==typeof this.props.pageparams?JSON.parse(this.props.pageparams):this.props.pageparams:{},parentPage=this.props.pagesuffix&&"_pagemodel"==this.props.pagesuffix?this.props.pageparam?null:this.props.pages[this.props.pageid+this.props.pagesuffix]:this.props.parentPage,subPageName=this.props.pagesuffix&&"_pagemodel"==this.props.pagesuffix?"pagemodel":this.props.pagename,inputParams={pageId:this.pageId,pageParamMapping:pageParamMapping,parentPageParams:parentPageParams,parentPage:parentPage,isContainer:!!this.props.widgetProps&&this.props.widgetProps.is_container,containerSubPageName:subPageName,pageState:this.props.pageState},_context15.next=35,$script.runscript("mmf.getPageParameters",inputParams);case 35:if(this.pageParams=_context15.sent,previewPage.pageParams=this.pageParams,!this.props.items){_context15.next=41;break}_context15.t0=JSON.parse(this.props.items),_context15.next=44;break;case 41:return _context15.next=43,this.getPreviewItems(previewPage,this.state.pageParams);case 43:_context15.t0=_context15.sent;case 44:return _ref14=_context15.t0,previewItems=_ref14.previewItems,slots=_ref14.slots,props=_ref14.props,this.pageParams=previewPage.pageParams,previewPage.widgets=previewPage.widgets||{},previewPage.slots=slots,previewPage.props=props,widgets=[],gridElPromises=[],this.props.pageState,currentLayoutInState=this.props.pages[uniquePageId]&&this.props.pages[uniquePageId].currentLayout?this.props.pages[uniquePageId].currentLayout:"default",_context15.next=58,$(this.rootEl).find(".gridPreviewCanvas").each(function(){var _ref15,_this7=this,gridElPromise=new Promise((_ref15=_asyncToGenerator(_regeneratorRuntime.mark(function _callee13(resolve,reject){var uniqueComponentsToRegister,isMobileViewAvailable,itemIndx;return _regeneratorRuntime.wrap(function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return uniqueComponentsToRegister={},previewItems&&previewItems.length>0&&_.each(previewItems,function(node){node.widget&&node.widget.component&&-1==Object.keys(uniqueComponentsToRegister).indexOf(node.widget.component)&&(uniqueComponentsToRegister[node.widget.component.uid]={name:node.widget.component.name,scope:node.widget.component.scope,type:node.widget.component.type})}),_context13.next=4,self.registerElements(uniqueComponentsToRegister);case 4:if(!self.props.preview){_context13.next=16;break}isMobileViewAvailable=!1,_context13.t0=_regeneratorRuntime.keys(previewItems);case 7:if((_context13.t1=_context13.t0()).done){_context13.next=15;break}if(itemIndx=_context13.t1.value,"mobile"!=previewItems[itemIndx].Layout){_context13.next=13;break}return isMobileViewAvailable=!0,_context13.abrupt("break",15);case 13:_context13.next=7;break;case 15:currentLayoutInState="mobile"==currentLayoutInState?isMobileViewAvailable?currentLayoutInState:"default":currentLayoutInState;case 16:previewItems&&previewItems.length>0&&_.each(previewItems,function(node){if(node.widget&&node.widget.tag){var slot={x:node.xposition,y:node.yposition,width:node.width,height:node.height,minwidth:node.minwidth,maxwidth:node.maxwidth,minheight:node.minheight,maxheight:node.maxheight};if("default"==currentLayoutInState&&(!node.Layout||"default"==node.Layout)||"default"!=currentLayoutInState&&currentLayoutInState==node.Layout){Math.random().toString(36).substring(2,5),Math.random().toString(36).substring(2,5);widgets.push({ele:$("<div><div id="+node.widget.widgetid+' class="grid-stack-item-content">\n                                                <widget-container key='+node.widget.widgetid+"                                                      \n                                                    nocache="+self.props.nocache+'\n                                                    preview="true" pageid='+self.pageId+"\n                                                    tag="+node.widget.tag+"                                                                                             \n                                                    widgetid="+node.widget.widgetid+' class="widgetContainer"                                             \n                                                    style="height: 100%;" shadow="true"\n                                                    pagesuffix='+self.props.pagesuffix+" ></widget-container></div><div/>"),node:node})}else slot={x:0,y:0,width:0,height:0,minwidth:0,maxwidth:96,minheight:0,maxheight:80};var _name=node.widget.component?node.widget.component.name:"",componentId=node.widget.component?node.widget.component.uid:"";previewPage.widgets[node.widget.widgetid]=_extends({},previewPage.widgets[node.widget.widgetid],{name:_name,Component:componentId,id:node.widget.widgetid,widgettree:self.props.widgettree,props:node.widget.widgetprops,slotid:node.uid,Layout:node.Layout,slot:slot})}},_this7),resolve();case 18:case"end":return _context13.stop()}},_callee13,_this7)})),function(_x18,_x19){return _ref15.apply(this,arguments)}));gridElPromises.push(gridElPromise)});case 58:Promise.all(gridElPromises).then(_asyncToGenerator(_regeneratorRuntime.mark(function _callee14(){var pageState,didCurrentLayoutChangeFromPageActions,nodeIndx,node,slot,_name2,componentId,updatedWidgetProps,layouts,_pageParamMapping,_parentPageParams,_parentPage,_subPageName,_inputParams,pages,pageId,_uniquePageId,gridCanvasEl,updatedWidgets,updatedWidgetIndx,updatedWidget,updatedWidgetNode,_pages,pageData;return _regeneratorRuntime.wrap(function(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:return _context14.next=2,_this8.runPageActions(previewPage,previewPage.pageParams);case 2:return previewPage=_context14.sent,_context14.next=5,_this8.setPageStateWithPreload({},previewPage.widgets,!0);case 5:if(previewPage.widgets=_context14.sent,pageState=_this8.transientPageState?_this8.transientPageState:_this8.props.pageState,didCurrentLayoutChangeFromPageActions=!1,_this8.transientPageState?(didCurrentLayoutChangeFromPageActions=pageState&&_this8.props.pageState&&(_this8.props.pageState.currentLayout!=pageState.currentLayout||_this8.props.pageData&&_this8.props.pageData.currentLayout!=pageState.currentLayout||prevProps&&prevProps.previewpageid!=_this8.props.previewpageid),currentLayoutInState=didCurrentLayoutChangeFromPageActions||changePage?pageState.currentLayout:currentLayoutInState,_.isEqual(pageState,_this8.props.pageState)||(pageState.clickts=Date.now(),_this8.props.updateStore({updates:{pageState:pageState}})),_this8.transientPageState=null):(didCurrentLayoutChangeFromPageActions=prevProps&&prevProps.pageState&&_this8.props.pageState&&(_this8.props.pageState.currentLayout!=prevProps.pageState.currentLayout||_this8.props.pageData&&_this8.props.pageData.currentLayout!=_this8.props.pageState.currentLayout||prevProps&&prevProps.previewpageid!=_this8.props.previewpageid),_this8.props.pageData?currentLayoutInState=didCurrentLayoutChangeFromPageActions&&_this8.props.pageData.currentLayout?_this8.props.pageData.currentLayout:currentLayoutInState:(didCurrentLayoutChangeFromPageActions=!0,currentLayoutInState=_this8.props.pageState&&_this8.props.pageState.currentLayout?_this8.props.pageState.currentLayout:currentLayoutInState)),(didCurrentLayoutChangeFromPageActions||changePage)&&(widgets=[],previewPage.currentLayout=currentLayoutInState,previewItems&&previewItems.length>0))for(nodeIndx in previewItems)(node=previewItems[nodeIndx]).widget&&node.widget.tag&&(slot={x:node.xposition,y:node.yposition,width:node.width,height:node.height,minwidth:node.minwidth,maxwidth:node.maxwidth,minheight:node.minheight,maxheight:node.maxheight},"default"==currentLayoutInState&&(!node.Layout||"default"==node.Layout)||"default"!=currentLayoutInState&&currentLayoutInState==node.Layout?(Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5),widgets.push({ele:$("<div><div id="+node.widget.widgetid+' class="grid-stack-item-content">\n                                                    <widget-container key='+node.widget.widgetid+"                                                     \n                                                        nocache="+self.props.nocache+'\n                                                        preview="true" pageid='+self.pageId+"\n                                                        tag="+node.widget.tag+"                                                                                             \n                                                        widgetid="+node.widget.widgetid+' class="widgetContainer"                                             \n                                                        style="height: 100%;" shadow="true"\n                                                        pagesuffix='+self.props.pagesuffix+" ></widget-container></div><div/>"),node:node})):slot={x:0,y:0,width:0,height:0,minwidth:0,maxwidth:96,minheight:0,maxheight:80},_name2=node.widget.component?node.widget.component.name:"",componentId=node.widget.component?node.widget.component.uid:"",updatedWidgetProps=_this8.reconcileWidgetProps(node.widget.widgetprops,pageState),previewPage.widgets[node.widget.widgetid]=_extends({},previewPage.widgets[node.widget.widgetid],{name:_name2,Component:componentId,id:node.widget.widgetid,widgettree:self.props.widgettree,props:updatedWidgetProps,slotid:node.uid,Layout:node.Layout,slot:slot}));if(layouts={slots:{},widgets:{}},previewPage.slots&&previewPage.widgets&&(Object.keys(previewPage.slots).map(function(slotId){var pageSlot=previewPage.slots[slotId];layouts.slots[pageSlot.Layout||"default"]=layouts.slots[pageSlot.Layout||"default"]||{},layouts.slots[pageSlot.Layout||"default"][slotId]=pageSlot}),Object.keys(previewPage.widgets).map(function(widgetId){var pageWidget=previewPage.widgets[widgetId];layouts.widgets[pageWidget.Layout||"default"]=layouts.widgets[pageWidget.Layout||"default"]||{},layouts.widgets[pageWidget.Layout||"default"][widgetId]=pageWidget})),previewPage.layouts=layouts,previewPage.slots=layouts.slots?layouts.slots[currentLayoutInState]?layouts.slots[currentLayoutInState]:layouts.slots.default:{},previewPage.widgets=layouts.widgets?layouts.widgets[currentLayoutInState]?layouts.widgets[currentLayoutInState]:layouts.widgets.default:{},!changePage){_context14.next=27;break}return _pageParamMapping="string"==typeof(_pageParamMapping=_this8.props&&_this8.props.widgetProps&&_this8.props.widgetProps.PageParams?_this8.props.widgetProps.PageParams:null)?JSON.parse(_pageParamMapping):_pageParamMapping,_parentPageParams=_this8.props.pageparams?"string"==typeof _this8.props.pageparams?JSON.parse(_this8.props.pageparams):_this8.props.pageparams:{},_parentPage=_this8.props.pagesuffix&&"_pagemodel"==_this8.props.pagesuffix?_this8.props.pageparam?null:_this8.props.pages[_this8.props.pageid+_this8.props.pagesuffix]:_this8.props.parentPage,_subPageName=_this8.props.pagesuffix&&"_pagemodel"==_this8.props.pagesuffix?"pagemodel":_this8.props.pagename,_inputParams={pageId:_this8.pageId,pageParamMapping:_pageParamMapping,parentPageParams:_parentPageParams,parentPage:_parentPage,isContainer:!!_this8.props.widgetProps&&_this8.props.widgetProps.is_container,containerSubPageName:_subPageName,pageState:_this8.props.pageState},_context14.next=25,$script.runscript("mmf.getPageParameters",_inputParams);case 25:_this8.pageParams=_context14.sent,previewPage.pageParams=_this8.pageParams;case 27:if(!(widgets.length>0)||self.grid&&self.grid.engine.nodes.length==widgets.length&&!didCurrentLayoutChangeFromPageActions&&!changePage){_context14.next=73;break}if(deepEqual(self.props.pages[uniquePageId],previewPage)||didCurrentLayoutChangeFromPageActions||changePage){_context14.next=36;break}pages=Object.assign({},_this8.props.pages)||{},"_pagemodel"==_this8.props.pagesuffix&&(previewPage.pageParams=_this8.props.pages[uniquePageId]&&_this8.props.pages[uniquePageId].pageParams?_this8.props.pages[uniquePageId].pageParams:previewPage.pageParams),pages[uniquePageId]=previewPage,_this8.props.updateStore({updates:{pages:pages}}),self.setState({pageloading:!1,widgets:widgets}),_context14.next=71;break;case 36:if(pageId=self.props.widgetProps&&self.props.widgetProps.PageId?self.props.widgetProps.PageId:self.props.previewpageid,_uniquePageId=pageId+_this8.props.pagesuffix,gridCanvasEl=$(self.rootEl).find(".gridPreviewCanvas"),self.grid=self.grids[_uniquePageId],self.grid){_context14.next=48;break}if(self.grid=GridStack.init(self.options,gridCanvasEl),self.grid.on("removed",function(event,items){items&&items.map(function(item){$(item.el).remove()})}),self.grid.on("added",function(event,items){}),self.grid.on("change",function(event,items){}),self.grid){_context14.next=47;break}return _context14.abrupt("return");case 47:self.grids[_uniquePageId]=self.grid;case 48:self.grid.batchUpdate(),self.grid.removeAll(!0),self.grid&&self.grid.engine&&self.grid.engine._removedNodes&&self.grid.engine._removedNodes.map(function(node){$(node.el).remove()}),self.grid.commit(),self.grid.batchUpdate(),updatedWidgets=widgets,_context14.t0=_regeneratorRuntime.keys(updatedWidgets);case 55:if((_context14.t1=_context14.t0()).done){_context14.next=65;break}if(updatedWidgetIndx=_context14.t1.value,updatedWidget=updatedWidgets[updatedWidgetIndx],updatedWidgetNode=updatedWidget.node,!self.grid){_context14.next=63;break}if(0==updatedWidgetNode.width&&0==updatedWidgetNode.height){_context14.next=63;break}return _context14.next=63,self.grid.addWidget(updatedWidget.ele,updatedWidgetNode.xposition,updatedWidgetNode.yposition,updatedWidgetNode.width,updatedWidgetNode.height,!1,updatedWidgetNode.minwidth,updatedWidgetNode.maxwidth,updatedWidgetNode.minheight,updatedWidgetNode.maxheight);case 63:_context14.next=55;break;case 65:self.grid.commit(),self.grid.cellHeight(_this8.cellHeight,!0),self.setState({pageloading:!1,widgetsInitialised:!0}),(_pages=Object.assign({},_this8.props.pages)||{})[pageId]=previewPage,self.props.updateStore({updates:{pages:_pages}});case 71:_context14.next=74;break;case 73:self.props.pageData&&self.props.pageData.widgets?deepEqual(self.props.pageData.widgets,previewPage.widgets)?self.setState({pageloading:!1,widgetsInitialised:!0}):((pageData=Object.assign({},self.props.pageData)).pageParams=previewPage.pageParams,pageData.currentLayout=previewPage.currentLayout,Object.keys(pageData.widgets).map(function(pageWidgetId){var updatedPageWidgetProps=_extends({},previewPage.widgets[pageWidgetId].props,pageData.widgets[pageWidgetId].props);previewPage.widgets&&previewPage.widgets[pageWidgetId]&&previewPage.widgets[pageWidgetId].props&&Object.keys(previewPage.widgets[pageWidgetId].props).map(function(widgetProp2Update){if("value"==widgetProp2Update&&(updatedPageWidgetProps.value=previewPage.widgets[pageWidgetId].props.value),widgetProp2Update.startsWith("__Pageparam__")){var tempWidgetPropName=widgetProp2Update.split("__Pageparam__")[1];updatedPageWidgetProps[tempWidgetPropName]=previewPage.widgets[pageWidgetId].props[tempWidgetPropName]}});var updatedPageWidget=_extends({},previewPage.widgets[pageWidgetId],pageData.widgets[pageWidgetId]);updatedPageWidget.props=updatedPageWidgetProps,_.isEqual(updatedPageWidget,pageData.widgets[pageWidgetId])||(pageData.widgets[pageWidgetId]=updatedPageWidget,pageData.widgets[pageWidgetId].reload=!pageData.widgets[pageWidgetId].reload)}),self.props.updateStore({updates:{pageData:pageData}}),self.setState({pageloading:!1,widgetsInitialised:!0})):self.setState({pageloading:!1,widgetsInitialised:!0});case 74:case"end":return _context14.stop()}},_callee14,_this8)}))).catch(function(err){self.setState({pageloading:!1,widgetsInitialised:!0})});case 59:case"end":return _context15.stop()}},_callee15,this)}));return function(_x16,_x17){return _ref13.apply(this,arguments)}}()},{key:"render",value:function(){var pageId=this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,showOverlayClassName=(this.props.widgetspacing?this.props.widgetspacing:!this.props.widgetProps||("true"==this.props.widgetProps.WidgetSpacing||this.props.widgetProps.WidgetSpacing),this.state.pageloading||this.props.pageState&&1==this.props.pageState.showloader||this.props.showoverlay+""=="true"?"showOverlay":"showOverlay showOverlay-hide");showOverlayClassName="showOverlay"==showOverlayClassName&&(this.props.overlayfitcontent||this.props.widgetProps&&this.props.widgetProps.OverlayFitContent+""=="true")?"showOverlay2":showOverlayClassName;var pageStyles=this.slideData&&this.slideData.Styles?this.slideData.Styles:this.props.pageState&&this.props.pageState.Styles?this.props.pageState.Styles:"";return this.canvasEls,pageId?React.createElement("div",{className:"topPreviewContainer",ref:"previewarea"},React.createElement("style",null,'@import url("/thirdpartylib/gridstack/gridstack.min.css"); @import url("/thirdpartylib/gridstack/corestyles.css");'),pageStyles?React.createElement("style",null,pageStyles):null,React.createElement("div",{className:showOverlayClassName}),React.createElement("div",{className:"gridPreviewContent",ref:"previewContent"},React.createElement("div",{className:"grid-stack grid-stack-96 gridPreviewCanvas noWidgetSpacing",style:{height:"fit-content"}})),React.createElement("div",{"data-inline-loading":!0,className:this.state.pageloading||this.props.pageState&&1==this.props.pageState.showloader?"bx--inline-loading pageloader-show":"bx--inline-loading pageloader-hide",role:"alert","aria-live":"assertive"},React.createElement("div",{className:"bx--inline-loading__animation"},React.createElement("div",{"data-inline-loading-spinner":!0,className:"bx--loading bx--loading--small"},React.createElement("svg",{className:"bx--loading__svg",viewBox:"-75 -75 150 150"},React.createElement("circle",{className:"bx--loading__background",cx:"0",cy:"0",r:"26.8125"}),React.createElement("circle",{className:"bx--loading__stroke",cx:"0",cy:"0",r:"26.8125"}))),React.createElement("svg",{focusable:"false",preserveAspectRatio:"xMidYMid meet",style:{willChange:"transform"},xmlns:"http://www.w3.org/2000/svg",className:"bx--inline-loading__checkmark-container",hidden:"","data-inline-loading-finished":"",width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true"},React.createElement("path",{d:"M8,1C4.1,1,1,4.1,1,8c0,3.9,3.1,7,7,7s7-3.1,7-7C15,4.1,11.9,1,8,1z M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z"}),React.createElement("path",{d:"M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z","data-icon-path":"inner-path",opacity:"0"}))),React.createElement("p",{"data-inline-loading-text-active":!0,className:"bx--inline-loading__text"},"Preparing..."),React.createElement("p",{"data-inline-loading-text-finished":!0,hidden:!0,className:"bx--inline-loading__text"},"Data loaded."))):React.createElement("div",{style:{color:"blue"}},"No page found!")}}]),_PageDesignerPreview_}(React.Component),_export("PageDesignerPreview",PageDesignerPreview=function(props){return _PageDesignerPreview_}),_export("PageDesignerPreview",PageDesignerPreview),_export("default",PageDesignerPreview),_export("states",states=[{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id": ""}'},{KeyName:"pages",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"headerMenuItems",AccessPath:"header.menuitems",DefaultValue:'{"header": {"menuitems": {}}}'},{KeyName:"scrollfired",AccessPath:"scrollfired",DefaultValue:'{"scrollfired": false}'},{KeyName:"menuScope",AccessPath:"header.menu.scope",DefaultValue:'{"header": {"menu": {"scope": ""}}}'},{KeyName:"parentPage",AccessPath:"pages.${pageid}",DefaultValue:'{"pages": {"${pageid}": {}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id":""}'},{KeyName:"pagereload",AccessPath:"pagereload.${pageid}",DefaultValue:'{"pagereload": {"${pageid}": false}}'},{KeyName:"is_design_time",AccessPath:"is_design_time",DefaultValue:'{"is_design_time": false}'},{KeyName:"previewpageid",AccessPath:"previewpageid",DefaultValue:'{"previewpageid": ""}'},{KeyName:"pageData",AccessPath:"pages.${previewpageid}${pagesuffix}",DefaultValue:'{"pages": {"${previewpageid}${pagesuffix}": {}}}'},{KeyName:"pageState",AccessPath:"pagestate.${previewpageid}${pagesuffix}",DefaultValue:'{"pagestate": {"${previewpageid}${pagesuffix}": {}}}'},{KeyName:"pageid",AccessPath:"pageid",DefaultValue:'{"pageid": ""}'},{KeyName:"parentPageState",AccessPath:"pagestate.${pageid}",DefaultValue:'{"pagestate": {"${pageid}": {}}}'},{KeyName:"pagesuffix",AccessPath:"pagesuffix",DefaultValue:'{"pagesuffix":  ""}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PageDesignerPreview/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","jquery","jquery-ui/ui/data","jquery-ui/ui/disable-selection","jquery-ui/ui/focusable","jquery-ui/ui/form","jquery-ui/ui/ie","jquery-ui/ui/keycode","jquery-ui/ui/labels","jquery-ui/ui/jquery-1-7","jquery-ui/ui/plugin","jquery-ui/ui/safe-active-element","jquery-ui/ui/safe-blur","jquery-ui/ui/scroll-parent","jquery-ui/ui/tabbable","jquery-ui/ui/unique-id","jquery-ui/ui/version","jquery-ui/ui/widget","jquery-ui/ui/widgets/mouse","jquery-ui/ui/widgets/draggable","jquery-ui/ui/widgets/droppable","jquery-ui/ui/widgets/resizable","lodash.debounce","deepmerge","lodash.clonedeep","lodash.get","deep-equal","lodash","thirdpartylib/gridstack/gridstack.min.js"],function(_export,_context16){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,$,debounce,deepmerge,cloneDeep,lodashget,deepEqual,_,_PageDesignerPreview_,PageDesignerPreview;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_jquery){$=_jquery.default},function(_jqueryUiUiData){},function(_jqueryUiUiDisableSelection){},function(_jqueryUiUiFocusable){},function(_jqueryUiUiForm){},function(_jqueryUiUiIe){},function(_jqueryUiUiKeycode){},function(_jqueryUiUiLabels){},function(_jqueryUiUiJquery){},function(_jqueryUiUiPlugin){},function(_jqueryUiUiSafeActiveElement){},function(_jqueryUiUiSafeBlur){},function(_jqueryUiUiScrollParent){},function(_jqueryUiUiTabbable){},function(_jqueryUiUiUniqueId){},function(_jqueryUiUiVersion){},function(_jqueryUiUiWidget){},function(_jqueryUiUiWidgetsMouse){},function(_jqueryUiUiWidgetsDraggable){},function(_jqueryUiUiWidgetsDroppable){},function(_jqueryUiUiWidgetsResizable){},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_deepmerge){deepmerge=_deepmerge.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashGet){lodashget=_lodashGet.default},function(_deepEqual){deepEqual=_deepEqual.default},function(_lodash){_=_lodash.default},function(_thirdpartylibGridstackGridstackMinJs){}],execute:function(){_PageDesignerPreview_=function(_React$Component){function _PageDesignerPreview_(props){_classCallCheck(this,_PageDesignerPreview_);var _this=_possibleConstructorReturn(this,(_PageDesignerPreview_.__proto__||Object.getPrototypeOf(_PageDesignerPreview_)).call(this,props));_this.state={pageloading:!1,showloader:!1,showModal:!1,modalPageId:"",widgetsInitialised:!1,pageIdSeed:Date.now()},_this.updatePage=_this.updatePage.bind(_this),_this.changePage=_this.changePage.bind(_this),_this.updatePageDebounce=debounce(function(prevProps){_this.updatePage(prevProps)}),_this._updateProps=_this._updateProps.bind(_this),_this.registerElements=_this.registerElements.bind(_this),_this.getPreviewItems=_this.getPreviewItems.bind(_this),_this.evaluateQuery=_this.evaluateQuery.bind(_this),_this.parseGraphQLParam=_this.parseGraphQLParam.bind(_this),_this.getPageParams=_this.getPageParams.bind(_this),_this.resizeGrid=_this.resizeGrid.bind(_this),_this.refreshGrid=_this.refreshGrid.bind(_this),_this.runPageActions=_this.runPageActions.bind(_this),_this.initializeLayout=_this.initializeLayout.bind(_this),_this.setPageState=_this.setPageState.bind(_this),_this.getPageState=_this.getPageState.bind(_this),_this.setPageStateWithPreload=_this.setPageStateWithPreload.bind(_this),_this.updateWidgetsWithStateChanges=_this.updateWidgetsWithStateChanges.bind(_this),_this.reconcileWidgetProps=_this.reconcileWidgetProps.bind(_this),_this.setMenuItems=_this.setMenuItems.bind(_this),_this.loadNecessaryBundles=_this.loadNecessaryBundles.bind(_this),_this.waitUntilPageInitialized=_this.waitUntilPageInitialized.bind(_this),_this.openModal=_this.openModal.bind(_this),_this.viewModelName="",_this.viewData={},_this.transientPageState=null,_this.grids={},_this.slidesData={},_this.grid=null,_this.canvasEls={},_this.prevProps=null,_this.currentProps=null,_this.prevState=null,_this.currentState=null,_this.rootEl=_this.props.shadow&&$("#head",_this.props.shadow)&&$("#head",_this.props.shadow).length>0?$("#head",_this.props.shadow)[0]:_this.refs.previewarea;var contentEl=_this.props.shadow&&_this.props.shadow.host?_this.props.shadow&&_this.props.shadow.host:null;if(_this.props.pagesuffix&&"_pagemodel"==_this.props.pagesuffix){var mainContentEl=$(_this.props.shadow.host).closest("#head");mainContentEl&&mainContentEl.length>0&&(contentEl=mainContentEl[0])}return _this.cellHeight=contentEl&&contentEl.getBoundingClientRect?contentEl.getBoundingClientRect().height/80:10,_this.options={float:!0,width:96,column:96,staticGrid:!0,verticalMargin:0,cellHeight:_this.cellHeight,removable:!1,removeTimeout:100,disableResize:!0,disableDrag:!0,disableOneColumnMode:!0},_this}return _inherits(_PageDesignerPreview_,_React$Component),_createClass(_PageDesignerPreview_,[{key:"openModal",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(payload){var result,templateId,templateFilter,templateRecord;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(payload.modalname&&payload.name){_context.next=3;break}return this.props.addErrorMessage({title:"Error - ",subtitle:"Modal Name cannot be empty while opening the modal."}),_context.abrupt("return");case 3:if(result={},!payload.type){_context.next=32;break}result.modalname=payload.modalname||payload.name,_context.t0=payload.type,_context.next="form"===_context.t0?9:29;break;case 9:if(templateId="",!payload.template){_context.next=14;break}templateId=payload.template,_context.next=26;break;case 14:if(!payload.table&&!payload.formname){_context.next=26;break}return templateFilter=payload.formname?{where:{Name:payload.formname}}:{where:{ModelName:payload.table,View:payload.view||"Defalut"}},_context.next=18,$qry.getRecords("FormTemplate_studio",templateFilter,["uid"]);case 18:if(!((templateRecord=_context.sent)&&templateRecord.length>0)){_context.next=24;break}templateRecord=templateRecord[0],templateId=templateRecord.uid,_context.next=26;break;case 24:return this.props.addErrorMessage({title:"Error - ",subtitle:"Form not found!"}),_context.abrupt("return");case 26:return result.modalcomponent={name:"SrsDynamicForm",scope:"studio",componentprops:{FormTemplate:templateId,defaultdata:payload.formdata}},result.modalparams={},_context.abrupt("break",29);case 29:result.layout=payload.layout,_context.next=33;break;case 32:result=payload;case 33:this.props.openModal(result);case 34:case"end":return _context.stop()}},_callee,this)}));return function(_x){return _ref.apply(this,arguments)}}()},{key:"reconcileWidgetProps",value:function(widgetProps,pageState){var $widgetProps=Object.assign({},widgetProps);if($widgetProps)for(var widgetPropName in $widgetProps)if(widgetPropName&&widgetPropName.indexOf("__State__")>-1){var widgetPropPathValue=$widgetProps[widgetPropName],wpropName=widgetPropName.split("__State__")[1];if(widgetPropPathValue&&pageState&&Object.keys(pageState).length>0){var newPropVal=lodashget(pageState,widgetPropPathValue);void 0!=newPropVal&&null!=newPropVal&&($widgetProps[wpropName]="string"==typeof newPropVal||"boolean"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}return $widgetProps}},{key:"loadNecessaryBundles",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var pageId,targetPageRecord,targetPageScope,bundleFilter,bundleMaps,bundleMapIndx,bundleMap;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return pageId=this.props.previewpageid,[],_context2.next=4,$qry.getRecords("MetaSlide",{where:{uid:pageId}},["uid","Name","Scope"]);case 4:if(!((targetPageRecord=_context2.sent)&&targetPageRecord.length>0)){_context2.next=34;break}return targetPageScope=targetPageRecord[0].Scope,bundleFilter={where:{or:[{and:[{Application:targetPageScope},{Page:""}]},{and:[{Application:targetPageScope},{Page:pageId}]}]}},_context2.next=10,$qry.getRecords("MetaBundleMap",bundleFilter,["uid","Type","Name","Resource"]);case 10:if(!((bundleMaps=_context2.sent)&&bundleMaps.length>0)){_context2.next=34;break}_context2.t0=_regeneratorRuntime.keys(bundleMaps);case 13:if((_context2.t1=_context2.t0()).done){_context2.next=34;break}bundleMapIndx=_context2.t1.value,bundleMap=bundleMaps[bundleMapIndx],void 0,_context2.t2=bundleMap.Type,_context2.next="internal"===_context2.t2?20:"external"===_context2.t2?23:32;break;case 20:return _context2.next=22,System.import("/load/bundle/"+bundleMap.Name+".js");case 22:return _context2.abrupt("break",32);case 23:return _context2.prev=23,_context2.next=26,System.import(bundleMap.Resource);case 26:_context2.next=31;break;case 28:_context2.prev=28,_context2.t3=_context2.catch(23),console.error("Unable to import bundle "+bundleMap.Name);case 31:return _context2.abrupt("break",32);case 32:_context2.next=13;break;case 34:case"end":return _context2.stop()}},_callee2,this,[[23,28]])}));return function(){return _ref2.apply(this,arguments)}}()},{key:"setMenuItems",value:function(menuItems){this.props.updateStore({updates:{headerMenuItems:menuItems,menuScope:this.props.currentscope}})}},{key:"setPageState",value:function(recentUpdates){var origPageState=this.transientPageState?this.transientPageState:this.props.pageState,pageState=cloneDeep(origPageState),pageStateLayout=void 0,parentState=void 0;recentUpdates.layout&&(pageStateLayout=deepmerge.all([pageState.layout,recentUpdates.layout])),recentUpdates.parentstate&&(parentState=deepmerge.all([pageState.parentstate,recentUpdates.parentstate])),pageState=_extends({},pageState,recentUpdates),pageStateLayout&&(pageState.layout=pageStateLayout),parentState&&(pageState.parentstate=parentState),_.isEqual(origPageState,pageState)||(this.transientPageState=pageState)}},{key:"getPageState",value:function(){return cloneDeep(this.props.pageState)}},{key:"setPageStateWithPreload",value:function(recentUpdates,$widgets,noStateUpdate){var pageState=cloneDeep(this.props.pageState?this.props.pageState:{}),pageStateLayout=void 0;recentUpdates.layout&&(pageStateLayout=deepmerge.all([pageState.layout,recentUpdates.layout])),pageState=_extends({},pageState,recentUpdates),pageStateLayout&&(pageState.layout=pageStateLayout);try{if($widgets)for(var widgetIndx in $widgets){var widget=$widgets[widgetIndx];if(widget){var widgetProps=widget.props;if(widgetProps&&Object.keys(widgetProps).length>0){var widgetPropNames=Object.keys(widgetProps);for(var widgetPropIndx in widgetPropNames){var widgetPropName=widgetPropNames[widgetPropIndx];if(widgetPropName.indexOf("__State__")>-1){var widgetPropPathValue=widgetProps[widgetPropName],wpropName=widgetPropName.split("__State__")[1];if(widgetPropPathValue&&pageState&&Object.keys(pageState).length>0){var newPropVal=lodashget(pageState,widgetPropPathValue);newPropVal&&(widgetProps[wpropName]="string"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}}}}}}catch(err){this.props.addErrorMessage({title:"SRS0002 - ",subtitle:"Something went wrong, please contact your system administrator."}),console.error(err.message)}return pageState.clickts=Date.now(),!noStateUpdate&&this.props.updateStore({updates:{pageState:pageState}}),$widgets}},{key:"updateWidgetsWithStateChanges",value:function(pageState,inputWidgets){var $widgets=null;try{if(inputWidgets&&pageState)for(var widgetIndx in $widgets=cloneDeep(inputWidgets)){var widget=$widgets[widgetIndx];if(widget){var widgetProps=widget.props;if(widgetProps&&Object.keys(widgetProps).length>0){var widgetPropNames=Object.keys(widgetProps);for(var widgetPropIndx in widgetPropNames){var widgetPropName=widgetPropNames[widgetPropIndx];if(widgetPropName.indexOf("__State__")>-1){var widgetPropPathValue=widgetProps[widgetPropName],wpropName=widgetPropName.split("__State__")[1];if(widgetPropPathValue&&pageState&&Object.keys(pageState).length>0){var newPropVal=lodashget(pageState,widgetPropPathValue);newPropVal&&(widgetProps[wpropName]="string"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}}}}}}catch(err){console.error(err.message)}return $widgets}},{key:"initializeLayout",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(hostEl,activePage){var self,pageId,uniquePageId;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(hostEl){_context4.next=2;break}return _context4.abrupt("return");case 2:return pageId=(self=this).props.widgetProps&&self.props.widgetProps.PageId?self.props.widgetProps.PageId:self.props.previewpageid,uniquePageId=pageId+this.props.pagesuffix,_context4.next=7,$(".gridPreviewCanvas",hostEl).each(_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var activePageSlotIds,activePageSlotIdIndx,slotId,slot,widgetId,widgetData,name,eleData,activeItemContentEl,widgetContainerEl;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(self.grid=self.grids[uniquePageId],self.grid||(self.grid=GridStack.init(self.options,this),self.grids=self.grids||{},self.grids[uniquePageId]=self.grid),self.grid){_context3.next=4;break}return _context3.abrupt("return");case 4:if(self.grid.batchUpdate(),self.grid.removeAll(!0),self.grid&&self.grid.engine&&self.grid.engine._removedNodes&&self.grid.engine._removedNodes.map(function(node){$(node.el).remove()}),self.grid.commit(),self.grid.batchUpdate(),!activePage.slots){_context3.next=34;break}activePageSlotIds=Object.keys(activePage.slots),_context3.t0=_regeneratorRuntime.keys(activePageSlotIds);case 12:if((_context3.t1=_context3.t0()).done){_context3.next=32;break}if(activePageSlotIdIndx=_context3.t1.value,slotId=activePageSlotIds[activePageSlotIdIndx],slot=activePage.slots[slotId],widgetId=slot.Widget?slot.Widget:slot.widget&&slot.widget.widgetid?slot.widget.widgetid:"",!(widgetData=activePage.widgets[widgetId])||!widgetData.name){_context3.next=30;break}if(name=widgetData.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),eleData=Object.assign({tag:name,widgetid:widgetId,componentid:widgetData.Component},widgetData),$(this).attr("slotid",slotId),!(activeItemContentEl=self.grid.$el.find("#"+widgetId+".grid-stack-item-content"))&&self.grid.container&&self.grid.container.length>0&&(activeItemContentEl=$(self.grid.container[0]).find("#"+widgetId+".grid-stack-item-content")),activeItemContentEl&&0!=activeItemContentEl.length){_context3.next=30;break}if(Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5),widgetContainerEl=$("<div><div id="+widgetId+' class="grid-stack-item-content">\n                                                <widget-container key='+widgetId+" \n                                                    nocache="+self.props.nocache+"\n                                                    slotid="+slotId+"\n                                                    componentid="+eleData.componentid+'\n                                                    preview="true" pageid='+self.pageId+"                                                    \n                                                    tag="+eleData.tag+"                                                                                             \n                                                    widgetid="+widgetId+' class="widgetContainer"                                             \n                                                    style="height: 100%;" shadow="true"\n                                                    pagesuffix='+self.props.pagesuffix+" ></widget-container></div><div/>"),0==slot.width&&0==slot.height){_context3.next=30;break}return _context3.next=30,self.grid.addWidget(widgetContainerEl,slot.xposition,slot.yposition,slot.width,slot.height,!1,0,96,0,80);case 30:_context3.next=12;break;case 32:self.grid.commit(),self.grid.cellHeight(this.cellHeight,!0);case 34:case"end":return _context3.stop()}},_callee3,this)})));case 7:case"end":return _context4.stop()}},_callee4,this)}));return function(_x2,_x3){return _ref3.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var self=this;this.loadNecessaryBundles().then(function(){self.updatePage(),$(self.rootEl).find(".gridPreviewContent")&&(self.props.watchScrolling||self.props.widgetProps&&self.props.widgetProps.WatchScroll)&&$(self.rootEl).find(".gridPreviewContent").scroll(function(){return self.props.updateStore({updates:{scrollfired:!self.props.scrollfired}})}),(-1==Object.keys(self.props).indexOf("responsive")&&(!self.props.widgetProps||-1==Object.keys(self.props.widgetProps).indexOf("Responsive"))||"true"==self.props.responsive||self.props.widgetProps&&self.props.widgetProps.Responsive&&("true"==self.props.widgetProps.Responsive||1==self.props.widgetProps.Responsive))&&window.addEventListener("resize",self.resizeGrid),self.refreshGrid()})}},{key:"componentDidUnmount",value:function(){window.removeEventListener("resize",this.resizeGrid)}},{key:"waitUntilPageInitialized",value:function(){var self=this;return new Promise(function(resolve,reject){var interval=setInterval(function(){self.state.widgetsInitialised&&(clearInterval(interval),resolve())})})}},{key:"componentDidUpdate",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(prevProps,prevState){var self,widgetsByName,layoutCode,prevPageState,currentPageState,prevPageData,currentPageData,pageData,widgetIds,widgetIdInx,widgetId,widgetObj,widgetObjProps,widgetName,parentPageState,widgets,widgetNames,pageState,prevLayout,currentLayout,newWidgets,newWidgetsTransformed,newWidgetIds,newWidgetIdIndx,newWidgetId,newWidgetObj,_widgetNames,widgetNameIndx,_widgetName,updatedWidgetProps,updatedWidgetsPostStateChanges,_prevLayout,_currentLayout,_pageData,_newWidgets,_newWidgetsTransformed,_newWidgetIds,_newWidgetIdIndx,_newWidgetId,_newWidgetObj,_widgetNames2,_widgetNameIndx,_widgetName2,_updatedWidgetProps,_pageState,parentstate,widgetNamesInState,widgetNameInStateIndx,_widgetName3,_widgetObj,node,pageId,pageParamMapping,pageParams,parentPage,parentPageParams,subPageName,inputParams,_this2=this;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(self=this,widgetsByName={},layoutCode="default",prevPageState=prevProps.pageState,currentPageState=this.props.pageState,prevPageData=prevProps.pageData,currentPageData=this.props.pageData,pageData=Object.assign({},currentPageData)||{},!0,!(this.prevProps&&_.isEqual(prevProps,this.prevProps)&&this.currentProps&&_.isEqual(this.currentProps,this.props)&&this.prevState&&_.isEqual(prevState,this.prevState)&&this.currentState&&_.isEqual(this.currentState,this.state))){_context6.next=13;break}return _context6.abrupt("return");case 13:this.prevProps=prevProps,this.currentProps=this.props,this.prevState=prevState,this.currentState=this.state;case 17:if(!prevProps.widgetProps||!this.props.widgetProps||prevProps.widgetProps.PageId==this.props.widgetProps.PageId){_context6.next=21;break}return _context6.next=20,this.changePage(prevProps);case 20:return _context6.abrupt("return");case 21:if(currentPageData&&currentPageData.widgets)for(widgetIdInx in widgetIds=Object.keys(currentPageData.widgets))widgetId=widgetIds[widgetIdInx],widgetObj=currentPageData.widgets[widgetId],widgetObjProps=widgetObj.props,widgetName=widgetObjProps.Name?widgetObjProps.Name:widgetId,widgetsByName[widgetName]=widgetObj;if(_.isEqual(prevPageState,currentPageState)){_context6.next=73;break}if(!prevPageState||!currentPageState){_context6.next=72;break}if(prevPageData&&currentPageData&&prevPageData.id==currentPageData.id&&currentPageState.parentstate&&currentPageState.clickts!=currentPageState.parentstate.clickts&&!_.isEqual(prevPageState.parentstate,currentPageState.parentstate)&&(parentPageState=cloneDeep(currentPageState.parentstate),this.props.updateStore({updates:{parentPageState:parentPageState}})),!prevPageState||!currentPageState||_.isEqual(prevPageState.layout,currentPageState.layout)&&prevPageState.currentLayout==currentPageState.currentLayout){_context6.next=28;break}return _context6.next=28,self.waitUntilPageInitialized();case 28:if(prevPageState.showloader!=currentPageState.showloader&&this.setState({showloader:currentPageState.showloader}),_.isEqual(prevPageState.layout,currentPageState.layout)){_context6.next=43;break}if($(self.rootEl).find(".gridPreviewCanvas"),!self.grid){_context6.next=41;break}if(self.grid.batchUpdate(),currentPageState.layout&&currentPageState.layout.options&&self.grid.float(currentPageState.layout.options.float),!currentPageState.layout||!currentPageState.layout.widgets){_context6.next=41;break}return widgets=currentPageState.layout.widgets,widgetNames=Object.keys(widgets),_context6.next=39,widgetNames.map(function(){var _ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(widgetName){var widgetObj,widgetId,gridStackItemContentEl,gridStackItemEl,widgetEl;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(widgetObj=widgetsByName[widgetName],(widgetObj=deepmerge.all([widgets[widgetName],widgetObj])).tag=widgetObj.tag?widgetObj.tag:widgetObj.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),widgetId=widgetObj.id,1!=(gridStackItemContentEl=self.grid.$el.find("#"+widgetId+".grid-stack-item-content")).length){_context5.next=10;break}gridStackItemEl=gridStackItemContentEl.parent(),widgetObj.slot&&(0==widgetObj.slot.width&&0==widgetObj.slot.height?self.grid.removeWidget(gridStackItemEl):self.grid.update(gridStackItemEl,widgetObj.slot.x,widgetObj.slot.y,widgetObj.slot.width,widgetObj.slot.height)),_context5.next=16;break;case 10:if(!widgetObj.slot){_context5.next=16;break}if(Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5),widgetEl=$("<div><div id="+widgetId+' class="grid-stack-item-content">\n                                                    <widget-container key='+widgetId+" \n                                                        nocache="+self.props.nocache+'\n                                                        preview="true" pageid='+self.pageId+"\n                                                        tag="+widgetObj.tag+"                                                                                             \n                                                        widgetid="+widgetId+' class="widgetContainer"                                             \n                                                        style="height: 100%;" shadow="true"\n                                                        pagesuffix='+self.props.pagesuffix+" ></widget-container></div><div/>"),0==widgetObj.slot.width&&0==widgetObj.slot.height){_context5.next=16;break}return _context5.next=16,self.grid.addWidget(widgetEl,widgetObj.slot.x,widgetObj.slot.y,widgetObj.slot.width,widgetObj.slot.height,!1,0,96,0,80);case 16:case"end":return _context5.stop()}},_callee5,_this2)}));return function(_x6){return _ref6.apply(this,arguments)}}());case 39:self.grid.commit(),this.refreshGrid(prevProps);case 41:_context6.next=72;break;case 43:if(prevPageState.oneColumn==currentPageState.oneColumn){_context6.next=51;break}if(!currentPageData){_context6.next=49;break}return _context6.next=47,this.runPageActions(currentPageData,currentPageData.pageParams||{});case 47:_context6.sent,this.transientPageState&&(pageState=this.transientPageState?this.transientPageState:this.props.pageState,_.isEqual(pageState,this.props.pageState)||(pageState.clickts=Date.now(),this.props.updateStore({updates:{pageState:pageState}})),this.transientPageState=null);case 49:_context6.next=72;break;case 51:if(prevPageState.currentLayout==currentPageState.currentLayout){_context6.next=72;break}if(prevLayout=prevPageState.currentLayout,currentLayout=currentPageState.currentLayout,prevLayout&&"default"!=prevLayout||currentLayout&&"default"!=currentLayout){_context6.next=57;break}_context6.next=72;break;case 57:if(pageData.currentLayout=currentPageState?currentPageState.currentLayout:pageData.currentLayout,!pageData.layouts||!pageData.layouts.slots){_context6.next=72;break}for(newWidgetIdIndx in layoutCode="mobile"==currentPageState.currentLayout?pageData.layouts.slots.mobile?"mobile":"default":currentPageState.currentLayout,pageData.slots=pageData.layouts.slots[layoutCode],newWidgets=pageData.layouts.widgets[layoutCode],newWidgetsTransformed={},newWidgetIds=newWidgets?Object.keys(newWidgets):[])newWidgetId=newWidgetIds[newWidgetIdIndx],(newWidgetObj=newWidgets[newWidgetId]).props&&newWidgetObj.props.Name&&(newWidgetsTransformed[newWidgetObj.props.Name]=newWidgetObj);for(widgetNameIndx in[],_widgetNames=Object.keys(newWidgetsTransformed))_widgetName=_widgetNames[widgetNameIndx],updatedWidgetProps=deepmerge.all([newWidgetsTransformed[_widgetName].props,widgetsByName[_widgetName]?widgetsByName[_widgetName].props:{}]),updatedWidgetProps=this.reconcileWidgetProps(updatedWidgetProps,this.props.pageState),newWidgets[newWidgetsTransformed[_widgetName].id].props=updatedWidgetProps;return pageData.widgets=newWidgets,_context6.next=71,this.initializeLayout(self.props.shadow,pageData);case 71:this.props.updateStore({updates:{pageData:pageData}});case 72:currentPageData&&currentPageData.widgets&&Object.keys(currentPageData.widgets).length>0&&(updatedWidgetsPostStateChanges=this.updateWidgetsWithStateChanges(currentPageState,currentPageData.widgets),_.isEqual(currentPageData.widgets,updatedWidgetsPostStateChanges)||((pageData=Object.assign({},currentPageData)).widgets=updatedWidgetsPostStateChanges,currentPageState&&prevPageState&&currentPageState.currentLayout!=prevPageState.currentLayout&&(pageData.currentLayout=currentPageState.currentLayout),this.props.updateStore({updates:{pageData:pageData}})));case 73:if(!prevPageData||!currentPageData||prevPageData.id!=currentPageData.id||prevPageData.currentLayout==currentPageData.currentLayout){_context6.next=94;break}if(currentPageData.currentLayout==currentPageState.currentLayout){_context6.next=94;break}if(_prevLayout=prevPageData.currentLayout,_currentLayout=currentPageData.currentLayout,_prevLayout&&"default"!=_prevLayout||_currentLayout&&"default"!=_currentLayout){_context6.next=80;break}_context6.next=94;break;case 80:if(!(_pageData=Object.assign({},currentPageData)).layouts||!_pageData.layouts.slots){_context6.next=94;break}for(_newWidgetIdIndx in _pageData.slots=_pageData.layouts.slots[currentPageData.currentLayout],_newWidgets=_pageData.layouts.widgets[layoutCode],_newWidgetsTransformed={},_newWidgetIds=Object.keys(_newWidgets))_newWidgetId=_newWidgetIds[_newWidgetIdIndx],(_newWidgetObj=_newWidgets[_newWidgetId]).props&&_newWidgetObj.props.Name&&(_newWidgetsTransformed[_newWidgetObj.props.Name]=_newWidgetObj);for(_widgetNameIndx in[],_widgetNames2=Object.keys(_newWidgetsTransformed))_widgetName2=_widgetNames2[_widgetNameIndx],_updatedWidgetProps=deepmerge.all([_newWidgetsTransformed[_widgetName2].props,widgetsByName[_widgetName2]?widgetsByName[_widgetName2].props:{}]),_newWidgets[_newWidgetsTransformed[_widgetName2].id].props=_updatedWidgetProps;return _pageData.widgets=_newWidgets,_context6.next=93,this.initializeLayout(self.props.shadow,_pageData);case 93:this.props.updateStore({updates:{pageData:_pageData}});case 94:if(_.isEqual(prevProps.parentstate,this.props.parentstate)||(_pageState=Object.assign({},currentPageState)||{},parentstate=this.props.parentstate?"string"==typeof this.props.parentstate?JSON.parse(this.props.parentstate):this.props.parentstate:{},_pageState.clickts!=parentstate.clickts&&(_pageState.parentstate=parentstate,this.props.updateStore({updates:{pageState:_pageState}}))),prevState.pageloading==this.state.pageloading){_context6.next=123;break}if(1!=this.state.pageloading){_context6.next=100;break}this.updatePage(prevProps),_context6.next=121;break;case 100:if(_.isEqual(prevState.widgets,this.state.widgets)||!this.state.widgets||this.state.widgetsInitialised){_context6.next=121;break}$(self.rootEl).find(".gridPreviewCanvas"),self.grid.batchUpdate(),self.grid.removeAll(),self.grid&&self.grid.engine&&self.grid.engine._removedNodes&&self.grid.engine._removedNodes.map(function(node){$(node.el).remove()}),widgetNamesInState=Object.keys(this.state.widgets),_context6.t0=_regeneratorRuntime.keys(widgetNamesInState);case 107:if((_context6.t1=_context6.t0()).done){_context6.next=118;break}if(widgetNameInStateIndx=_context6.t1.value,_widgetName3=widgetNamesInState[widgetNameInStateIndx],_widgetObj=this.state.widgets[_widgetName3],node=_widgetObj.node,!self.grid){_context6.next=116;break}if(0==node.width&&0==node.height){_context6.next=116;break}return _context6.next=116,self.grid.addWidget(_widgetObj.ele,node.xposition,node.yposition,node.width,node.height,!1,node.minwidth,node.maxwidth,node.minheight,node.maxheight);case 116:_context6.next=107;break;case 118:self.grid.commit(),self.grid.cellHeight(this.cellHeight,!0),self.setState({widgetsInitialised:!0});case 121:_context6.next=153;break;case 123:if(this.props.reload==prevProps.reload&&this.props.pagereload==prevProps.pagereload&&_.isEqual(this.props.items,prevProps.items)){_context6.next=127;break}this.updatePage(prevProps),_context6.next=153;break;case 127:if(!this.props.widgetProps||!prevProps.widgetProps||_.isEqual(this.props.widgetProps,prevProps.widgetProps)){_context6.next=131;break}this.props.parentPage&&this.props.parentPage.widgets&&this.props.parentPage.widgets[this.props.widgetid]&&"SrsTabs"==this.props.parentPage.widgets[this.props.widgetid].name?prevProps.widgetProps.Reload==this.props.widgetProps.Reload&&prevProps.widgetProps.ActiveTab==this.props.widgetProps.ActiveTab&&(_.isEqual(this.pageParams,currentPageData.pageParams)||(this.pageParams=currentPageData.pageParams,this.updatePage(prevProps))):this.updatePage(prevProps),_context6.next=153;break;case 131:if(!prevPageData||!currentPageData||_.isEqual(currentPageData,prevPageData)||prevPageData.id!=currentPageData.id){_context6.next=153;break}if(pageId="true"==this.props.widgetProps.is_container?this.props.previewpageid:this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,pageParamMapping=null,pageParams={},!this.props.pagesuffix||!this.props.pageid){_context6.next=139;break}pageParams=this.props.pages[pageId+this.props.pagesuffix]?this.props.pages[pageId+this.props.pagesuffix].pageParams:pageParams,_context6.next=152;break;case 139:if(!prevPageData||!currentPageData||_.isEqual(prevPageData.pageParams,currentPageData.pageParams)){_context6.next=143;break}pageParams=currentPageData.pageParams,_context6.next=152;break;case 143:return pageParamMapping="string"==typeof(pageParamMapping=pageParamMapping||(this.props&&this.props.widgetProps&&this.props.widgetProps.PageParams?this.props.widgetProps.PageParams:{}))?JSON.parse(pageParamMapping):pageParamMapping,parentPage=this.props.pagesuffix&&"_pagemodel"==this.props.pagesuffix?this.props.pageparam?null:this.props.pages[this.props.pageid+this.props.pagesuffix]:this.props.parentPage,parentPageParams="_pagemodel"==this.props.pagesuffix?parentPage.pageParams:this.props.pageparams?"string"==typeof this.props.pageparams?JSON.parse(this.props.pageparams):this.props.pageparams:{},subPageName=this.props.pagesuffix&&"_pagemodel"==this.props.pagesuffix?"pagemodel":this.props.pagename,inputParams={pageId:pageId,pageParamMapping:pageParamMapping,parentPageParams:parentPageParams,parentPage:parentPage,isContainer:!!this.props.widgetProps&&this.props.widgetProps.is_container,containerSubPageName:subPageName,pageState:this.props.pageState},_context6.next=151,$script.runscript("mmf.getPageParameters",inputParams);case 151:pageParams=_context6.sent;case 152:_.isEqual(pageParams,this.pageParams)||(this.pageParams=pageParams,this.updatePage(prevProps));case 153:case"end":return _context6.stop()}},_callee6,this)}));return function(_x4,_x5){return _ref5.apply(this,arguments)}}()},{key:"resizeGrid",value:function(prevProps){var pageStateChanged=!1,pageState=Object.assign({},this.props.pageState)||{};if(this.props.parentstate&&(!prevProps||!_.isEqual(prevProps.parentstate,this.props.parentstate))){var parentstate=this.props.parentstate?"string"==typeof this.props.parentstate?JSON.parse(this.props.parentstate):this.props.parentstate:{};parentstate.clickts!=pageState.clickts&&(pageState.parentstate=parentstate),pageStateChanged=!0}("true"==this.props.responsive||this.props.widgetProps&&this.props.widgetProps.Responsive&&("true"==this.props.widgetProps.Responsive||1==this.props.widgetProps.Responsive))&&(this.props.preview&&this.rootEl&&this.grid&&this.rootEl.clientWidth>0&&(this.rootEl.clientWidth<700?(this.grid.column(1),pageState.currentLayout&&"default"!=pageState.currentLayout||(pageState.oneColumn=!0,pageState.currentLayout="mobile",pageState.layout=pageState.layout||{},pageState.layout.options=pageState.layout.options||{},pageState.layout.options.float=!1,pageStateChanged=!0)):(this.grid.column(96),pageState.currentLayout&&"default"!=pageState.currentLayout||(pageState.oneColumn=!1,pageState.currentLayout=pageState.currentLayout||"default",pageState.layout=pageState.layout||{},pageState.layout.options=pageState.layout.options||{},pageState.layout.options.float=!0,pageStateChanged=!0))));pageStateChanged&&this.props.updateStore({updates:{pageState:pageState}}),this.grid&&this.grid._updateContainerHeight()}},{key:"refreshGrid",value:function(prevProps){var pageStateChanged=!1,pageState=Object.assign({},this.props.pageState)||{};if(this.props.parentstate&&(!prevProps||!_.isEqual(prevProps.parentstate,this.props.parentstate))){var parentstate=this.props.parentstate?"string"==typeof this.props.parentstate?JSON.parse(this.props.parentstate):this.props.parentstate:{};pageState.parentstate=parentstate,pageStateChanged=!0}pageStateChanged&&this.props.updateStore({updates:{pageState:pageState}})}},{key:"parseGraphQLParam",value:function(paramValue){var paramFields=paramValue.split(".");if(paramFields&&paramFields.length>1){var tempObj={};paramFields.slice(1).reduce(function(o,s){return o[s]={}},tempObj);var convertedStr=JSON.stringify(tempObj).replace(":{}","").replace(/"/g,"").replace(/:{/g,"{\n\t\t").replace(/^{/,"{\n\t").replace(/([}]+)/,"\n$1");return paramFields[0]+" "+convertedStr}return paramValue}},{key:"evaluateQuery",value:function(graphQLParams,recordId){var _this3=this;return new Promise(function(resolve,reject){var fields=[];graphQLParams.map(function(graphQLParam){fields.push(_this3.parseGraphQLParam(graphQLParam))});var query="query($inputData:JSON) {\n                    "+_this3.viewModelName+" {\n                        "+_this3.viewModelName+"FindOne(filter: $inputData) {\n                            uid\n                            "+fields.join("\n")+"\n                        }\n                    }\n            }",variables='{\n                    "inputData": {\n                        "where": {\n                        "uid": "'+recordId+'"\n                        }\n                    }\n                }';$qry._run(query,variables).then(function(viewData){var result=("data."+_this3.viewModelName+"."+_this3.viewModelName+"FindOne").split(".").reduce(function(xs,s){return xs&&xs[s]?xs[s]:null},viewData);resolve(result)}).catch(function(err){return resolve({})})})}},{key:"getPageParams",value:function(pageId){var _ref7,_this4=this;return new Promise((_ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(resolve,reject){var parentPageParams,parentPage,pageParamMapping,pageParams,pageProps,allowedPagePropNames,_allowedPagePropNames,pageParamMappingKey;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(parentPageParams=_this4.props.pageparams?"string"==typeof _this4.props.pageparams?JSON.parse(_this4.props.pageparams):_this4.props.pageparams:{},parentPage=_this4.props.parentPage,_context8.t0=_this4.queriedPage,_context8.t0){_context8.next=7;break}return _context8.next=6,$qry.run("mmf.getSlidePropsById",{uid:pageId},"data.slide",!1,!!_this4.props.preview);case 6:_context8.t0=_context8.sent;case 7:_this4.queriedPage=_context8.t0,pageParamMapping="string"==typeof(pageParamMapping=_this4.props&&_this4.props.widgetProps&&_this4.props.widgetProps.PageParams?_this4.props.widgetProps.PageParams:{})?JSON.parse(pageParamMapping):pageParamMapping,pageParams={},pageProps={},"CreateView"==_this4.queriedPage.Type||"EditView"==_this4.queriedPage.Type?((allowedPagePropNames=Object.keys(_this4.queriedPage.props).filter(function(pagePropName){return"ModelName"!=pagePropName&&"ModelScope"!=pagePropName}))&&allowedPagePropNames.map(function(allowedPropName){return pageProps[allowedPropName]=_this4.queriedPage.props[allowedPropName]}),pageProps.recordid="recordid"):(_allowedPagePropNames=Object.keys(_this4.queriedPage.props).filter(function(pagePropName){return"ModelName"!=pagePropName&&"ModelScope"!=pagePropName}))&&_allowedPagePropNames.map(function(allowedPropName){return pageProps[allowedPropName]=_this4.queriedPage.props[allowedPropName]}),pageParamMappingKey="true"==_this4.props.widgetProps.is_container?pageId+"_"+_this4.props.pagename:pageId,pageProps&&Object.keys(pageProps).map(function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(propName){var widgetName2Map,childWidgetPageId,childWidgetName,widgetPropName2Map,childWidgetPage,pages,fieldName2Map,parentStatePath,value;return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(!(pageParamMapping&&pageParamMapping[pageParamMappingKey]&&pageParamMapping[pageParamMappingKey][propName])){_context7.next=34;break}_context7.t0=pageParamMapping[pageParamMappingKey][propName].type,_context7.next="widget_props"===_context7.t0?4:"page_field"===_context7.t0?23:"page_param"===_context7.t0?26:"parent_state"===_context7.t0?28:30;break;case 4:if(widgetName2Map=pageParamMapping[pageParamMappingKey][propName].widgetName,childWidgetPageId=pageParamMapping[pageParamMappingKey][propName].childWidgetPageId,childWidgetName=pageParamMapping[pageParamMappingKey][propName].childWidgetName,widgetPropName2Map="",!childWidgetPageId||!childWidgetName){_context7.next=20;break}if(childWidgetPage=_this4.props.pages[childWidgetPageId]){_context7.next=17;break}return _context7.next=13,$script.runscript("studio.getPageDetails",{pageId:childWidgetPageId},!1,!!_this4.props.preview);case 13:childWidgetPage=_context7.sent,(pages=Object.assign({},_this4.props.pages))[childWidgetPageId]=childWidgetPage,_this4.props.updateStore({updates:{pages:pages}});case 17:childWidgetPage.widgets&&(widgetPropName2Map=pageParamMapping[pageParamMappingKey][propName].widgetPropName?pageParamMapping[pageParamMappingKey][propName].widgetPropName:"value",Object.keys(childWidgetPage.widgets).map(function(targetWidgetId){if(childWidgetPage.widgets[targetWidgetId].props){var targetWidgetName=childWidgetPage.widgets[targetWidgetId].props.Name||childWidgetPage.widgets[targetWidgetId].props.id;childWidgetName==targetWidgetName&&(pageParams[propName]=childWidgetPage.widgets[targetWidgetId].props[widgetPropName2Map])}})),_context7.next=22;break;case 20:widgetPropName2Map=pageParamMapping[pageParamMappingKey][propName].widgetPropName?pageParamMapping[pageParamMappingKey][propName].widgetPropName:"value",widgetName2Map&&parentPage&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){(parentPageWidgetId==widgetName2Map||parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.Name==widgetName2Map)&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props[widgetPropName2Map])});case 22:return _context7.abrupt("break",32);case 23:return(fieldName2Map=pageParamMapping[pageParamMappingKey][propName].pageFieldId)&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.FieldName=="@@["+fieldName2Map+"]"&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.value)}),_context7.abrupt("break",32);case 26:return parentPage&&parentPage.pageParams&&(pageParamMapping[pageParamMappingKey][propName].pageParamId?pageParams[propName]=parentPage.pageParams[pageParamMapping[pageParamMappingKey][propName].pageParamId]:pageParams[propName]=parentPage.pageParams[propName]),_context7.abrupt("break",32);case 28:return parentPage&&parentPage.pageParams&&(pageParamMapping[pageParamMappingKey][propName].parentStatePath?(parentStatePath=pageParamMapping[pageParamMappingKey][propName].parentStatePath,value=lodashget(_this4.props.pageState,"parentstate."+parentStatePath),pageParams[propName]=value):pageParams[propName]=parentPage.pageParams[propName]),_context7.abrupt("break",32);case 30:return parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(pageParams[propName]=parentPage.pageParams[propName]),_context7.abrupt("break",32);case 32:_context7.next=35;break;case 34:parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]?pageParams[propName]=parentPage.pageParams[propName]:parentPageParams&&parentPageParams[propName]&&(pageParams[propName]=parentPageParams[propName]);case 35:case"end":return _context7.stop()}},_callee7,_this4)}));return function(_x9){return _ref8.apply(this,arguments)}}()),resolve(pageParams);case 16:case"end":return _context8.stop()}},_callee8,_this4)})),function(_x7,_x8){return _ref7.apply(this,arguments)}))}},{key:"runPageActions",value:function(){var _ref9=_asyncToGenerator(_regeneratorRuntime.mark(function _callee9(pageData,pageParams){var updatedPageData,self,pageId,pageActions,pageActionURL,pageActionKeys,pageActionsPromises,_loop,pageActionKeyIndx,dataArry,dataArryIndx,widgetData,widgetNames,updatedWidgetIndx,widgetName,updatedWidgetProps,updatedWidgetId,_this5=this;return _regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return{},updatedPageData=void 0,self=this,pageId=this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,pageActions=null,_context9.prev=5,pageActionURL="/page/"+pageId+"/Action.js",this.props.nocache&&"true"==this.props.nocache&&(pageActionURL=pageActionURL+"?key="+Date.now()),_context9.next=10,System.import(pageActionURL);case 10:pageActions=_context9.sent,_context9.next=17;break;case 13:_context9.prev=13,_context9.t0=_context9.catch(5),console.error(_context9.t0.message),pageActions=null;case 17:if(!pageActions||!pageActions.default){_context9.next=31;break}if(!((pageActions=pageActions.default)&&Object.keys(pageActions).length>0)){_context9.next=31;break}for(pageActionKeyIndx in{},pageActionKeys=Object.keys(pageActions),pageActionsPromises=[],_loop=function(){var pageActionKey=pageActionKeys[pageActionKeyIndx],notifier={setMenuItems:_this5.setMenuItems,getState:_this5.getPageState,setState:_this5.setPageState,openModal:_this5.openModal,closeModal:_this5.props.closeModal,setStateWithPreload:_this5.setPageStateWithPreload,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},ctx={currentscope:self.props.currentscope,menuscope:self.props.menuScope,cloneDeep:cloneDeep,nocache:"true"==_this5.props.nocache},result=pageActions[pageActionKey](pageData,notifier,ctx);result.then?pageActionsPromises.push(result):pageActionsPromises.push(new Promise(function(resolve,reject){return resolve(result)}))},pageActionKeys)_loop();if(updatedPageData=Object.assign({},pageData),!(pageActionsPromises.length>0)){_context9.next=31;break}return _context9.next=29,Promise.all(pageActionsPromises);case 29:if((dataArry=_context9.sent)&&dataArry.length>0)for(dataArryIndx in dataArry)if((widgetData=dataArry[dataArryIndx])&&Object.keys(widgetData).length>0&&(widgetNames=Object.keys(widgetData),widgetData&&widgetNames.length>0))for(updatedWidgetIndx in widgetNames)widgetName=widgetNames[updatedWidgetIndx],updatedWidgetProps=widgetData[widgetName].props,updatedWidgetId=updatedWidgetProps.id,_.isEqual(updatedWidgetProps,pageData.widgets[updatedWidgetId].props)||(updatedPageData.widgets[updatedWidgetId].props=_extends({},updatedPageData.widgets[updatedWidgetId].props,updatedWidgetProps));case 31:return _context9.abrupt("return",updatedPageData||pageData);case 32:case"end":return _context9.stop()}},_callee9,this,[[5,13]])}));return function(_x10,_x11){return _ref9.apply(this,arguments)}}()},{key:"getPreviewItems",value:function(previewPage,previousPageParams){var _ref10,_this6=this;return new Promise((_ref10=_asyncToGenerator(_regeneratorRuntime.mark(function _callee10(resolve,reject){var pageId,previewItems,accessPaths,slideData,slots,slideProps,viewType,graphQLParams,recordid,previousRecordId;return _regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(_context10.prev=0,pageId=_this6.props.widgetProps&&_this6.props.widgetProps.PageId?_this6.props.widgetProps.PageId:_this6.props.previewpageid,previewItems=[],accessPaths=["data.slide"].join(),_context10.t0=_this6.slidesData[pageId],_context10.t0){_context10.next=9;break}return _context10.next=8,$qry.run("mmf.getSlideDetailsById",{uid:pageId},accessPaths,!1,!!_this6.props.preview);case 8:_context10.t0=_context10.sent;case 9:return _this6.slideData=_context10.t0,_this6.slidesData[pageId]=_this6.slideData,slideData=_this6.slideData,slots={},_context10.next=15,$qry.run("mmf.getSlideProps",{pageId:pageId},"data.MetaSlideProps.MetaSlidePropsFind",!1,!!_this6.props.preview);case 15:if(slideProps=_context10.sent,slideData.Scope,slideData.Name,viewType=slideData.Type,graphQLParams=[],Object.keys(slideData.slots).map(function(slotKey){var slot=slideData.slots[slotKey];slot&&slot.widget&&slot.widget.widgetproperties&&Object.keys(slot.widget.widgetproperties).map(function(widgetPropKey){var widgetProp=slot.widget.widgetproperties[widgetPropKey];if(widgetProp&&widgetProp.value&&widgetProp.value.startsWith("@@[")){var paramValue=widgetProp.value.split("@@[")[1];paramValue=paramValue.substr(0,paramValue.length-1),graphQLParams.push(paramValue)}})}),recordid=previewPage&&previewPage.pageParams&&previewPage.pageParams.recordid?previewPage.pageParams.recordid:"",previousRecordId=previousPageParams&&previousPageParams.recordid?previousPageParams.recordid:"",!("CreateView"==viewType||"EditView"==viewType&&recordid&&"-1"!=recordid&&recordid!=previousRecordId)){_context10.next=29;break}return _context10.next=26,_this6.evaluateQuery(graphQLParams,recordid);case 26:_context10.t1=_context10.sent,_context10.next=30;break;case 29:_context10.t1=_this6.viewData;case 30:_this6.viewData=_context10.t1,Object.keys(slideData.slots).map(function(slotKey){var slot=slideData.slots[slotKey],slotData={},widgetPropsPair={};slot&&(slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.height=slot.height,slotData.width=slot.width,slotData.minwidth=slot.minwidth,slotData.maxwidth=slot.maxwidth,slotData.minheight=slot.minheight,slotData.maxheight=slot.maxheight,slotData.resize=0,slotData.move=0,slotData.uid=slot.uid,slotData.Layout=slot.Layout,slotData.Slide=pageId,slots[slot.uid]=slotData),slot&&slot.widget&&slot.widget.widgetproperties&&(Object.keys(slot.widget.widgetproperties).map(function(widgetPropKey){if(!widgetPropKey.startsWith("__Pageparam__")){var widgetProp=slot.widget.widgetproperties[widgetPropKey],paramValue=widgetProp.value;widgetPropsPair[widgetProp.name]=paramValue;var fieldNameWithoutCover=widgetProp.value&&widgetProp.value.indexOf("@@[")>-1?widgetProp.value.split("@@[")[1]:widgetProp.value;fieldNameWithoutCover=fieldNameWithoutCover.endsWith("]")?fieldNameWithoutCover.substr(0,fieldNameWithoutCover.length-1):fieldNameWithoutCover,"FieldName"==widgetPropKey&&_this6.viewData&&(widgetPropsPair.value=lodashget(_this6.viewData,fieldNameWithoutCover))}}),Object.keys(slot.widget.widgetproperties).map(function(widgetPropKey){if(widgetPropKey.startsWith("__Pageparam__")){var widgetPropPageParamKey=widgetPropKey.split("__Pageparam__")[1],referredPageParameter=slot.widget.widgetproperties[widgetPropKey].value;previewPage.pageParams&&(previewPage.pageParams.hasOwnProperty(referredPageParameter)?widgetPropsPair[widgetPropPageParamKey]=previewPage.pageParams[referredPageParameter]:widgetPropsPair[widgetPropPageParamKey]=previewPage.props&&previewPage.props[referredPageParameter])}})),slot&&slot.widget&&(widgetPropsPair.id=slot.widget.uid,slotData.widget={tag:slot.widget.component.Name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),widgetid:slot.widget.uid,component:{name:slot.widget.component?slot.widget.component.Name:"",scope:slot.widget.component?slot.widget.component.Scope:"",type:slot.widget.component?slot.widget.component.Type:"",uid:slot.widget.component?slot.widget.component.uid:""},widgetprops:widgetPropsPair},slotData.widget=slotData.widget||{},slotData.widget.widgetprops=slotData.widget.widgetprops||{},slot.widget.component&&slot.widget.component.Props&&Object.keys(slot.widget.component.Props).map(function(componentPropName){-1==Object.keys(widgetPropsPair).indexOf(componentPropName)&&(slotData.widget.widgetprops[componentPropName]=slot.widget.component.Props[componentPropName])})),previewItems.push(slotData)}),resolve({previewItems:previewItems,slots:slots,props:slideProps}),_context10.next=38;break;case 35:_context10.prev=35,_context10.t2=_context10.catch(0),resolve({});case 38:case"end":return _context10.stop()}},_callee10,_this6,[[0,35]])})),function(_x12,_x13){return _ref10.apply(this,arguments)}))}},{key:"registerElements",value:function(uniqueComponentsToRegister){return new Promise(function(resolve,reject){var promises=[];uniqueComponentsToRegister&&Object.keys(uniqueComponentsToRegister).length>0&&Object.keys(uniqueComponentsToRegister).map(function(componentId){var elePromise=$ele&&$ele.registerElement(uniqueComponentsToRegister[componentId].name,uniqueComponentsToRegister[componentId].scope,uniqueComponentsToRegister[componentId].type);"PageDesigner"==uniqueComponentsToRegister[componentId].name&&"studio"==uniqueComponentsToRegister[componentId].scope&&(promises.push($ele&&$ele.registerElement("PageDesignerGeneral","studio","React")),promises.push($ele&&$ele.registerElement("PageDesignerWidget","studio","React")),promises.push($ele&&$ele.registerElement("PageDesignerProps","studio","React")),promises.push($ele&&$ele.registerElement("PageDesignerActions","studio","React")),promises.push($ele&&$ele.registerElement("SlideSelectionPanel","studio","React"))),promises.push(elePromise)});var listElPromise=$ele&&$ele.registerElement("ListLayout","mmf","React");promises.push(listElPromise),Promise.all(promises).then(function(results){return resolve()})})}},{key:"updatePage",value:function(){var _ref11=_asyncToGenerator(_regeneratorRuntime.mark(function _callee11(prevProps){return _regeneratorRuntime.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:if(this,!this.state.pageloading){_context11.next=5;break}return _context11.abrupt("return");case 5:return this.setState({pageloading:!0,widgetsInitialised:!1,pageParams:prevProps&&prevProps.pageData&&prevProps.pageData.pageParams?prevProps.pageData.pageParams:this.state.pageParams}),_context11.next=8,this._updateProps(prevProps);case 8:case"end":return _context11.stop()}},_callee11,this)}));return function(_x14){return _ref11.apply(this,arguments)}}()},{key:"changePage",value:function(){var _ref12=_asyncToGenerator(_regeneratorRuntime.mark(function _callee12(prevProps){return _regeneratorRuntime.wrap(function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:if(this,!this.state.pageloading){_context12.next=5;break}return _context12.abrupt("return");case 5:return this.setState({pageloading:!0,widgetsInitialised:!1,pageParams:prevProps&&prevProps.pageData&&prevProps.pageData.pageParams?prevProps.pageData.pageParams:this.state.pageParams}),_context12.next=8,this._updateProps(prevProps,!0);case 8:case"end":return _context12.stop()}},_callee12,this)}));return function(_x15){return _ref12.apply(this,arguments)}}()},{key:"_updateProps",value:function(){var _ref13=_asyncToGenerator(_regeneratorRuntime.mark(function _callee15(prevProps,changePage){var uniquePageId,self,gridCanvasEl,accessPaths,slideData,scope,name,viewType,previewPage,modelNamePropKey,modelName,modelScopePropKey,modelScope,pageParamMapping,parentPageParams,parentPage,subPageName,inputParams,_ref14,previewItems,slots,props,widgets,gridElPromises,currentLayoutInState,_this8=this;return _regeneratorRuntime.wrap(function(_context15){for(;;)switch(_context15.prev=_context15.next){case 0:if(this.pageId=this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,uniquePageId=this.props.pagesuffix?this.pageId+this.props.pagesuffix:this.pageId,this.pageId){_context15.next=4;break}return _context15.abrupt("return");case 4:return this.props.dimensions?JSON.parse(this.props.dimensions):null,gridCanvasEl=$((self=this).rootEl).find(".gridPreviewCanvas"),this.grid=this.grids[uniquePageId],this.grid&&!changePage||(this.grid=GridStack.init(self.options,gridCanvasEl),this.grid.on("removed",function(event,items){items&&items.map(function(item){$(item.el).remove()})}),this.grid.on("added",function(event,items){}),this.grid.on("change",function(event,items){}),this.grids=this.grids||{},this.grids[uniquePageId]=this.grid),accessPaths=["data.slide"].join(),_context15.next=12,$qry.run("mmf.getSlideDetailsById",{uid:this.pageId},accessPaths,!1,!1);case 12:return slideData=_context15.sent,_context15.next=15,$qry.run("mmf.getSlideDetailsById",{uid:this.pageId},accessPaths,!1,!1);case 15:return slideData=_context15.sent,scope=slideData.Scope,name=slideData.Name,viewType=slideData.Type,previewPage=this.props.pages&&this.props.pages[uniquePageId]?Object.assign({},this.props.pages[uniquePageId]):{},"CreateView"!=viewType&&"EditView"!=viewType||(modelNamePropKey=Object.keys(slideData.props).filter(function(dataKey){return"ModelName"===slideData.props[dataKey].Name}),modelName=modelNamePropKey&&1==modelNamePropKey.length?slideData.props[modelNamePropKey[0]].Value:"Unknown",modelScopePropKey=Object.keys(slideData.props).filter(function(dataKey){return"ModelScope"===slideData.props[dataKey].Name}),modelScope=modelScopePropKey&&1==modelScopePropKey.length?slideData.props[modelScopePropKey[0]].Value:"Unknown",this.viewModelName="mmf"==modelScope&&modelName.startsWith("Meta")?modelName:modelName+"_"+modelScope,previewPage.model=modelName,previewPage.modelscope=modelScope),previewPage.id=this.pageId,previewPage.pagesuffix=this.props.pagesuffix,previewPage.name=name,previewPage.scope=scope,previewPage.path=slideData.Path,previewPage.pageType=viewType,pageParamMapping="string"==typeof(pageParamMapping=this.props&&this.props.widgetProps&&this.props.widgetProps.PageParams?this.props.widgetProps.PageParams:{})?JSON.parse(pageParamMapping):pageParamMapping,parentPageParams=this.props.pageparams?"string"==typeof this.props.pageparams?JSON.parse(this.props.pageparams):this.props.pageparams:{},parentPage=this.props.pagesuffix&&"_pagemodel"==this.props.pagesuffix?this.props.pageparam?null:this.props.pages[this.props.pageid+this.props.pagesuffix]:this.props.parentPage,subPageName=this.props.pagesuffix&&"_pagemodel"==this.props.pagesuffix?"pagemodel":this.props.pagename,inputParams={pageId:this.pageId,pageParamMapping:pageParamMapping,parentPageParams:parentPageParams,parentPage:parentPage,isContainer:!!this.props.widgetProps&&this.props.widgetProps.is_container,containerSubPageName:subPageName,pageState:this.props.pageState},_context15.next=35,$script.runscript("mmf.getPageParameters",inputParams);case 35:if(this.pageParams=_context15.sent,previewPage.pageParams=this.pageParams,!this.props.items){_context15.next=41;break}_context15.t0=JSON.parse(this.props.items),_context15.next=44;break;case 41:return _context15.next=43,this.getPreviewItems(previewPage,this.state.pageParams);case 43:_context15.t0=_context15.sent;case 44:return _ref14=_context15.t0,previewItems=_ref14.previewItems,slots=_ref14.slots,props=_ref14.props,this.pageParams=previewPage.pageParams,previewPage.widgets=previewPage.widgets||{},previewPage.slots=slots,previewPage.props=props,widgets=[],gridElPromises=[],this.props.pageState,currentLayoutInState=this.props.pages[uniquePageId]&&this.props.pages[uniquePageId].currentLayout?this.props.pages[uniquePageId].currentLayout:"default",_context15.next=58,$(this.rootEl).find(".gridPreviewCanvas").each(function(){var _ref15,_this7=this,gridElPromise=new Promise((_ref15=_asyncToGenerator(_regeneratorRuntime.mark(function _callee13(resolve,reject){var uniqueComponentsToRegister,isMobileViewAvailable,itemIndx;return _regeneratorRuntime.wrap(function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return uniqueComponentsToRegister={},previewItems&&previewItems.length>0&&_.each(previewItems,function(node){node.widget&&node.widget.component&&-1==Object.keys(uniqueComponentsToRegister).indexOf(node.widget.component)&&(uniqueComponentsToRegister[node.widget.component.uid]={name:node.widget.component.name,scope:node.widget.component.scope,type:node.widget.component.type})}),_context13.next=4,self.registerElements(uniqueComponentsToRegister);case 4:if(!self.props.preview){_context13.next=16;break}isMobileViewAvailable=!1,_context13.t0=_regeneratorRuntime.keys(previewItems);case 7:if((_context13.t1=_context13.t0()).done){_context13.next=15;break}if(itemIndx=_context13.t1.value,"mobile"!=previewItems[itemIndx].Layout){_context13.next=13;break}return isMobileViewAvailable=!0,_context13.abrupt("break",15);case 13:_context13.next=7;break;case 15:currentLayoutInState="mobile"==currentLayoutInState?isMobileViewAvailable?currentLayoutInState:"default":currentLayoutInState;case 16:previewItems&&previewItems.length>0&&_.each(previewItems,function(node){if(node.widget&&node.widget.tag){var slot={x:node.xposition,y:node.yposition,width:node.width,height:node.height,minwidth:node.minwidth,maxwidth:node.maxwidth,minheight:node.minheight,maxheight:node.maxheight};if("default"==currentLayoutInState&&(!node.Layout||"default"==node.Layout)||"default"!=currentLayoutInState&&currentLayoutInState==node.Layout){Math.random().toString(36).substring(2,5),Math.random().toString(36).substring(2,5);widgets.push({ele:$("<div><div id="+node.widget.widgetid+' class="grid-stack-item-content">\n                                                <widget-container key='+node.widget.widgetid+"                                                      \n                                                    nocache="+self.props.nocache+'\n                                                    preview="true" pageid='+self.pageId+"\n                                                    tag="+node.widget.tag+"                                                                                             \n                                                    widgetid="+node.widget.widgetid+' class="widgetContainer"                                             \n                                                    style="height: 100%;" shadow="true"\n                                                    pagesuffix='+self.props.pagesuffix+" ></widget-container></div><div/>"),node:node})}else slot={x:0,y:0,width:0,height:0,minwidth:0,maxwidth:96,minheight:0,maxheight:80};var _name=node.widget.component?node.widget.component.name:"",componentId=node.widget.component?node.widget.component.uid:"";previewPage.widgets[node.widget.widgetid]=_extends({},previewPage.widgets[node.widget.widgetid],{name:_name,Component:componentId,id:node.widget.widgetid,widgettree:self.props.widgettree,props:node.widget.widgetprops,slotid:node.uid,Layout:node.Layout,slot:slot})}},_this7),resolve();case 18:case"end":return _context13.stop()}},_callee13,_this7)})),function(_x18,_x19){return _ref15.apply(this,arguments)}));gridElPromises.push(gridElPromise)});case 58:Promise.all(gridElPromises).then(_asyncToGenerator(_regeneratorRuntime.mark(function _callee14(){var pageState,didCurrentLayoutChangeFromPageActions,nodeIndx,node,slot,_name2,componentId,updatedWidgetProps,layouts,_pageParamMapping,_parentPageParams,_parentPage,_subPageName,_inputParams,pages,pageId,_uniquePageId,gridCanvasEl,updatedWidgets,updatedWidgetIndx,updatedWidget,updatedWidgetNode,_pages,pageData;return _regeneratorRuntime.wrap(function(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:return _context14.next=2,_this8.runPageActions(previewPage,previewPage.pageParams);case 2:return previewPage=_context14.sent,_context14.next=5,_this8.setPageStateWithPreload({},previewPage.widgets,!0);case 5:if(previewPage.widgets=_context14.sent,pageState=_this8.transientPageState?_this8.transientPageState:_this8.props.pageState,didCurrentLayoutChangeFromPageActions=!1,_this8.transientPageState?(didCurrentLayoutChangeFromPageActions=pageState&&_this8.props.pageState&&(_this8.props.pageState.currentLayout!=pageState.currentLayout||_this8.props.pageData&&_this8.props.pageData.currentLayout!=pageState.currentLayout||prevProps&&prevProps.previewpageid!=_this8.props.previewpageid),currentLayoutInState=didCurrentLayoutChangeFromPageActions||changePage?pageState.currentLayout:currentLayoutInState,_.isEqual(pageState,_this8.props.pageState)||(pageState.clickts=Date.now(),_this8.props.updateStore({updates:{pageState:pageState}})),_this8.transientPageState=null):(didCurrentLayoutChangeFromPageActions=prevProps&&prevProps.pageState&&_this8.props.pageState&&(_this8.props.pageState.currentLayout!=prevProps.pageState.currentLayout||_this8.props.pageData&&_this8.props.pageData.currentLayout!=_this8.props.pageState.currentLayout||prevProps&&prevProps.previewpageid!=_this8.props.previewpageid),_this8.props.pageData?currentLayoutInState=didCurrentLayoutChangeFromPageActions&&_this8.props.pageData.currentLayout?_this8.props.pageData.currentLayout:currentLayoutInState:(didCurrentLayoutChangeFromPageActions=!0,currentLayoutInState=_this8.props.pageState&&_this8.props.pageState.currentLayout?_this8.props.pageState.currentLayout:currentLayoutInState)),(didCurrentLayoutChangeFromPageActions||changePage)&&(widgets=[],previewPage.currentLayout=currentLayoutInState,previewItems&&previewItems.length>0))for(nodeIndx in previewItems)(node=previewItems[nodeIndx]).widget&&node.widget.tag&&(slot={x:node.xposition,y:node.yposition,width:node.width,height:node.height,minwidth:node.minwidth,maxwidth:node.maxwidth,minheight:node.minheight,maxheight:node.maxheight},"default"==currentLayoutInState&&(!node.Layout||"default"==node.Layout)||"default"!=currentLayoutInState&&currentLayoutInState==node.Layout?(Math.random().toString(36).substring(2,5)+Math.random().toString(36).substring(2,5),widgets.push({ele:$("<div><div id="+node.widget.widgetid+' class="grid-stack-item-content">\n                                                    <widget-container key='+node.widget.widgetid+"                                                     \n                                                        nocache="+self.props.nocache+'\n                                                        preview="true" pageid='+self.pageId+"\n                                                        tag="+node.widget.tag+"                                                                                             \n                                                        widgetid="+node.widget.widgetid+' class="widgetContainer"                                             \n                                                        style="height: 100%;" shadow="true"\n                                                        pagesuffix='+self.props.pagesuffix+" ></widget-container></div><div/>"),node:node})):slot={x:0,y:0,width:0,height:0,minwidth:0,maxwidth:96,minheight:0,maxheight:80},_name2=node.widget.component?node.widget.component.name:"",componentId=node.widget.component?node.widget.component.uid:"",updatedWidgetProps=_this8.reconcileWidgetProps(node.widget.widgetprops,pageState),previewPage.widgets[node.widget.widgetid]=_extends({},previewPage.widgets[node.widget.widgetid],{name:_name2,Component:componentId,id:node.widget.widgetid,widgettree:self.props.widgettree,props:updatedWidgetProps,slotid:node.uid,Layout:node.Layout,slot:slot}));if(layouts={slots:{},widgets:{}},previewPage.slots&&previewPage.widgets&&(Object.keys(previewPage.slots).map(function(slotId){var pageSlot=previewPage.slots[slotId];layouts.slots[pageSlot.Layout||"default"]=layouts.slots[pageSlot.Layout||"default"]||{},layouts.slots[pageSlot.Layout||"default"][slotId]=pageSlot}),Object.keys(previewPage.widgets).map(function(widgetId){var pageWidget=previewPage.widgets[widgetId];layouts.widgets[pageWidget.Layout||"default"]=layouts.widgets[pageWidget.Layout||"default"]||{},layouts.widgets[pageWidget.Layout||"default"][widgetId]=pageWidget})),previewPage.layouts=layouts,previewPage.slots=layouts.slots?layouts.slots[currentLayoutInState]?layouts.slots[currentLayoutInState]:layouts.slots.default:{},previewPage.widgets=layouts.widgets?layouts.widgets[currentLayoutInState]?layouts.widgets[currentLayoutInState]:layouts.widgets.default:{},!changePage){_context14.next=27;break}return _pageParamMapping="string"==typeof(_pageParamMapping=_this8.props&&_this8.props.widgetProps&&_this8.props.widgetProps.PageParams?_this8.props.widgetProps.PageParams:null)?JSON.parse(_pageParamMapping):_pageParamMapping,_parentPageParams=_this8.props.pageparams?"string"==typeof _this8.props.pageparams?JSON.parse(_this8.props.pageparams):_this8.props.pageparams:{},_parentPage=_this8.props.pagesuffix&&"_pagemodel"==_this8.props.pagesuffix?_this8.props.pageparam?null:_this8.props.pages[_this8.props.pageid+_this8.props.pagesuffix]:_this8.props.parentPage,_subPageName=_this8.props.pagesuffix&&"_pagemodel"==_this8.props.pagesuffix?"pagemodel":_this8.props.pagename,_inputParams={pageId:_this8.pageId,pageParamMapping:_pageParamMapping,parentPageParams:_parentPageParams,parentPage:_parentPage,isContainer:!!_this8.props.widgetProps&&_this8.props.widgetProps.is_container,containerSubPageName:_subPageName,pageState:_this8.props.pageState},_context14.next=25,$script.runscript("mmf.getPageParameters",_inputParams);case 25:_this8.pageParams=_context14.sent,previewPage.pageParams=_this8.pageParams;case 27:if(!(widgets.length>0)||self.grid&&self.grid.engine.nodes.length==widgets.length&&!didCurrentLayoutChangeFromPageActions&&!changePage){_context14.next=73;break}if(deepEqual(self.props.pages[uniquePageId],previewPage)||didCurrentLayoutChangeFromPageActions||changePage){_context14.next=36;break}pages=Object.assign({},_this8.props.pages)||{},"_pagemodel"==_this8.props.pagesuffix&&(previewPage.pageParams=_this8.props.pages[uniquePageId]&&_this8.props.pages[uniquePageId].pageParams?_this8.props.pages[uniquePageId].pageParams:previewPage.pageParams),pages[uniquePageId]=previewPage,_this8.props.updateStore({updates:{pages:pages}}),self.setState({pageloading:!1,widgets:widgets}),_context14.next=71;break;case 36:if(pageId=self.props.widgetProps&&self.props.widgetProps.PageId?self.props.widgetProps.PageId:self.props.previewpageid,_uniquePageId=pageId+_this8.props.pagesuffix,gridCanvasEl=$(self.rootEl).find(".gridPreviewCanvas"),self.grid=self.grids[_uniquePageId],self.grid){_context14.next=48;break}if(self.grid=GridStack.init(self.options,gridCanvasEl),self.grid.on("removed",function(event,items){items&&items.map(function(item){$(item.el).remove()})}),self.grid.on("added",function(event,items){}),self.grid.on("change",function(event,items){}),self.grid){_context14.next=47;break}return _context14.abrupt("return");case 47:self.grids[_uniquePageId]=self.grid;case 48:self.grid.batchUpdate(),self.grid.removeAll(!0),self.grid&&self.grid.engine&&self.grid.engine._removedNodes&&self.grid.engine._removedNodes.map(function(node){$(node.el).remove()}),self.grid.commit(),self.grid.batchUpdate(),updatedWidgets=widgets,_context14.t0=_regeneratorRuntime.keys(updatedWidgets);case 55:if((_context14.t1=_context14.t0()).done){_context14.next=65;break}if(updatedWidgetIndx=_context14.t1.value,updatedWidget=updatedWidgets[updatedWidgetIndx],updatedWidgetNode=updatedWidget.node,!self.grid){_context14.next=63;break}if(0==updatedWidgetNode.width&&0==updatedWidgetNode.height){_context14.next=63;break}return _context14.next=63,self.grid.addWidget(updatedWidget.ele,updatedWidgetNode.xposition,updatedWidgetNode.yposition,updatedWidgetNode.width,updatedWidgetNode.height,!1,updatedWidgetNode.minwidth,updatedWidgetNode.maxwidth,updatedWidgetNode.minheight,updatedWidgetNode.maxheight);case 63:_context14.next=55;break;case 65:self.grid.commit(),self.grid.cellHeight(_this8.cellHeight,!0),self.setState({pageloading:!1,widgetsInitialised:!0}),(_pages=Object.assign({},_this8.props.pages)||{})[pageId]=previewPage,self.props.updateStore({updates:{pages:_pages}});case 71:_context14.next=74;break;case 73:self.props.pageData&&self.props.pageData.widgets?deepEqual(self.props.pageData.widgets,previewPage.widgets)?self.setState({pageloading:!1,widgetsInitialised:!0}):((pageData=Object.assign({},self.props.pageData)).pageParams=previewPage.pageParams,pageData.currentLayout=previewPage.currentLayout,Object.keys(pageData.widgets).map(function(pageWidgetId){var updatedPageWidgetProps=_extends({},previewPage.widgets[pageWidgetId].props,pageData.widgets[pageWidgetId].props);previewPage.widgets&&previewPage.widgets[pageWidgetId]&&previewPage.widgets[pageWidgetId].props&&Object.keys(previewPage.widgets[pageWidgetId].props).map(function(widgetProp2Update){if("value"==widgetProp2Update&&(updatedPageWidgetProps.value=previewPage.widgets[pageWidgetId].props.value),widgetProp2Update.startsWith("__Pageparam__")){var tempWidgetPropName=widgetProp2Update.split("__Pageparam__")[1];updatedPageWidgetProps[tempWidgetPropName]=previewPage.widgets[pageWidgetId].props[tempWidgetPropName]}});var updatedPageWidget=_extends({},previewPage.widgets[pageWidgetId],pageData.widgets[pageWidgetId]);updatedPageWidget.props=updatedPageWidgetProps,_.isEqual(updatedPageWidget,pageData.widgets[pageWidgetId])||(pageData.widgets[pageWidgetId]=updatedPageWidget,pageData.widgets[pageWidgetId].reload=!pageData.widgets[pageWidgetId].reload)}),self.props.updateStore({updates:{pageData:pageData}}),self.setState({pageloading:!1,widgetsInitialised:!0})):self.setState({pageloading:!1,widgetsInitialised:!0});case 74:case"end":return _context14.stop()}},_callee14,_this8)}))).catch(function(err){self.setState({pageloading:!1,widgetsInitialised:!0})});case 59:case"end":return _context15.stop()}},_callee15,this)}));return function(_x16,_x17){return _ref13.apply(this,arguments)}}()},{key:"render",value:function(){var pageId=this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,showOverlayClassName=(this.props.widgetspacing?this.props.widgetspacing:!this.props.widgetProps||("true"==this.props.widgetProps.WidgetSpacing||this.props.widgetProps.WidgetSpacing),this.state.pageloading||this.props.pageState&&1==this.props.pageState.showloader||this.props.showoverlay+""=="true"?"showOverlay":"showOverlay showOverlay-hide");showOverlayClassName="showOverlay"==showOverlayClassName&&(this.props.overlayfitcontent||this.props.widgetProps&&this.props.widgetProps.OverlayFitContent+""=="true")?"showOverlay2":showOverlayClassName;var pageStyles=this.slideData&&this.slideData.Styles?this.slideData.Styles:this.props.pageState&&this.props.pageState.Styles?this.props.pageState.Styles:"";return this.canvasEls,pageId?React.createElement("div",{className:"topPreviewContainer",ref:"previewarea"},React.createElement("style",null,'@import url("/thirdpartylib/gridstack/gridstack.min.css"); @import url("/thirdpartylib/gridstack/corestyles.css");'),pageStyles?React.createElement("style",null,pageStyles):null,React.createElement("div",{className:showOverlayClassName}),React.createElement("div",{className:"gridPreviewContent",ref:"previewContent"},React.createElement("div",{className:"grid-stack grid-stack-96 gridPreviewCanvas noWidgetSpacing",style:{height:"fit-content"}})),React.createElement("div",{"data-inline-loading":!0,className:this.state.pageloading||this.props.pageState&&1==this.props.pageState.showloader?"bx--inline-loading pageloader-show":"bx--inline-loading pageloader-hide",role:"alert","aria-live":"assertive"},React.createElement("div",{className:"bx--inline-loading__animation"},React.createElement("div",{"data-inline-loading-spinner":!0,className:"bx--loading bx--loading--small"},React.createElement("svg",{className:"bx--loading__svg",viewBox:"-75 -75 150 150"},React.createElement("circle",{className:"bx--loading__background",cx:"0",cy:"0",r:"26.8125"}),React.createElement("circle",{className:"bx--loading__stroke",cx:"0",cy:"0",r:"26.8125"}))),React.createElement("svg",{focusable:"false",preserveAspectRatio:"xMidYMid meet",style:{willChange:"transform"},xmlns:"http://www.w3.org/2000/svg",className:"bx--inline-loading__checkmark-container",hidden:"","data-inline-loading-finished":"",width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true"},React.createElement("path",{d:"M8,1C4.1,1,1,4.1,1,8c0,3.9,3.1,7,7,7s7-3.1,7-7C15,4.1,11.9,1,8,1z M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z"}),React.createElement("path",{d:"M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z","data-icon-path":"inner-path",opacity:"0"}))),React.createElement("p",{"data-inline-loading-text-active":!0,className:"bx--inline-loading__text"},"Preparing..."),React.createElement("p",{"data-inline-loading-text-finished":!0,hidden:!0,className:"bx--inline-loading__text"},"Data loaded."))):React.createElement("div",{style:{color:"blue"}},"No page found!")}}]),_PageDesignerPreview_}(React.Component),_export("PageDesignerPreview",PageDesignerPreview=function(props){return _PageDesignerPreview_}),_export("PageDesignerPreview",PageDesignerPreview)}}}),System.register("component/studio/PageDesignerProps.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","component/studio/SrsReference/Definition.js","component/mmf/PageParameter/Definition.js","client/script/mmf/GraphQLDataUtil.js","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","@carbon/icons-react/lib/settings/16","lodash.debounce","deepmerge","lodash.clonedeep","lodash.get"],function(_export,_context4){"use strict";var _regeneratorRuntime,_extends,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,TextArea,Checkbox,Select,SelectItem,SrsReference,PageParameter,GraphQLDataUtil,AddAlt20,SubAlt20,Settings32,deepmerge,cloneDeep,DEFAULT_PROPS,_PageDesignerProps_,PageDesignerProps,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,TextArea=_carbonComponentsReact.TextArea,Checkbox=_carbonComponentsReact.Checkbox,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_componentMmfPageParameterDefinitionJs){PageParameter=_componentMmfPageParameterDefinitionJs.PageParameter},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonIconsReactLibSettings){Settings32=_carbonIconsReactLibSettings.default},function(_lodashDebounce){_lodashDebounce.default},function(_deepmerge){deepmerge=_deepmerge.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashGet){_lodashGet.default}],execute:function(){DEFAULT_PROPS=[{Name:"Invisible",DefaultValue:!1},{Name:"Required",DefaultValue:!1},{Name:"ReadOnly",DefaultValue:!1},{Name:"TriggerActionOnChange",DefaultValue:!1}],_PageDesignerProps_=function(_React$Component){function _PageDesignerProps_(props){_classCallCheck(this,_PageDesignerProps_);var _this=_possibleConstructorReturn(this,(_PageDesignerProps_.__proto__||Object.getPrototypeOf(_PageDesignerProps_)).call(this,props));_this.state={keyValueLists:{},widgetProps:[],widgetChanged:!0,propChanges:{},dataLoaded:!1,widgetProps:_this.props.widgetProps||{},showPreview:!1,reload:!1},_this.isTabComponent=!1,_this.handleTextChange=_this.handleTextChange.bind(_this),_this.loadWidgetProps=_this.loadWidgetProps.bind(_this),_this.keyValueOnChange=_this.keyValueOnChange.bind(_this);return _this.updateWidgetProps=function(updatedProps){_this.setState({widgetProps:updatedProps}),_this.props.updateStore({updates:{widgetProps:updatedProps}})},_this.updateWidgetPropsDebounce=function(key,value){var updateProps=cloneDeep(_this.props.widgetProps)||{};updateProps[key]=value,_this.setState({widgetProps:updateProps}),_this.props.updateStore({updates:{widgetProps:updateProps}})},_this.getChildWidgetProps=_this.getChildWidgetProps.bind(_this),_this}return _inherits(_PageDesignerProps_,_React$Component),_createClass(_PageDesignerProps_,[{key:"keyValueOnChange",value:function(keyValueList,changedIndx,propName,value,storeKeyName){var newKeyValueLists=cloneDeep(this.state.keyValueLists);newKeyValueLists[storeKeyName]=newKeyValueLists[storeKeyName]||keyValueList,newKeyValueLists[storeKeyName].map(function(keyValueItem,indx){indx==changedIndx&&(keyValueItem[propName]=value)}),this.setState({keyValueLists:newKeyValueLists}),this.updateWidgetPropsDebounce(storeKeyName,newKeyValueLists[storeKeyName])}},{key:"handleTextChange",value:function(e){var propChanges=cloneDeep(this.state.propChanges)||{};propChanges[e.target.name]=e.target.value,this.setState({propChanges:propChanges})}},{key:"componentDidMount",value:function(){this.loadWidgetProps()}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this2=this;if(prevProps.active_widget_id!==this.props.active_widget_id||prevProps.active_page_id!==this.props.active_page_id){var tobeActiveWidgetProps=this.props.pageData&&this.props.pageData[this.props.active_page_id]&&this.props.pageData[this.props.active_page_id].widgets&&this.props.pageData[this.props.active_page_id].widgets[this.props.active_widget_id]&&this.props.pageData[this.props.active_page_id].widgets[this.props.active_widget_id].props?this.props.pageData[this.props.active_page_id].widgets[this.props.active_widget_id].props:{},keyValueLists={};tobeActiveWidgetProps&&Object.keys(tobeActiveWidgetProps).map(function(tobeActiveWidgetPropName){tobeActiveWidgetPropName.startsWith("__Child__")?(keyValueLists[_this2.props.active_widget_id+"_childparams"]=keyValueLists[_this2.props.active_widget_id+"_childparams"]||[],keyValueLists[_this2.props.active_widget_id+"_childparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__Dynamic__")?(keyValueLists[_this2.props.active_widget_id+"_dynamicparams"]=keyValueLists[_this2.props.active_widget_id+"_dynamicparams"]||[],keyValueLists[_this2.props.active_widget_id+"_dynamicparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__Sibling__")?(keyValueLists[_this2.props.active_widget_id+"_siblingparams"]=keyValueLists[_this2.props.active_widget_id+"_siblingparams"]||[],keyValueLists[_this2.props.active_widget_id+"_siblingparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__Pageparam__")?(keyValueLists[_this2.props.active_widget_id+"_pageparams"]=keyValueLists[_this2.props.active_widget_id+"_pageparams"]||[],keyValueLists[_this2.props.active_widget_id+"_pageparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__State__")&&(keyValueLists[_this2.props.active_widget_id+"_stateparams"]=keyValueLists[_this2.props.active_widget_id+"_stateparams"]||[],keyValueLists[_this2.props.active_widget_id+"_stateparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]}))}),this.setState({widgetChanged:!0,keyValueLists:keyValueLists,widgetProps:cloneDeep(this.props.widgetProps)})}if(!_.isEqual(prevState.widgetProps,this.state.widgetProps)||prevState.widgetChanged!=this.state.widgetChanged&&1==this.state.widgetChanged||prevState.dataLoaded!=this.state.dataLoaded&&!this.state.dataLoaded||!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)){if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_dynamicparams"],this.state.keyValueLists[this.props.active_widget_id+"_dynamicparams"])){var dynamicWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_dynamicparams"];if(dynamicWidgetProps&&dynamicWidgetProps.length>0){var updatedProps=cloneDeep(this.props.widgetProps)||{};for(var propName in updatedProps)propName.startsWith("__Dynamic__")&&delete updatedProps[propName];dynamicWidgetProps.map(function(dynamicWidgetProp){dynamicWidgetProp.name&&(updatedProps["__Dynamic__"+dynamicWidgetProp.name]=dynamicWidgetProp.value?dynamicWidgetProp.value:"")}),!_.isEqual(this.props.widgetProps,updatedProps)&&this.updateWidgetProps(updatedProps)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_pageparams"],this.state.keyValueLists[this.props.active_widget_id+"_pageparams"])){var pageParamWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_pageparams"];if(pageParamWidgetProps&&pageParamWidgetProps.length>0){var _updatedProps=cloneDeep(this.props.widgetProps)||{};for(var _propName in _updatedProps)_propName.startsWith("__Pageparam__")&&delete _updatedProps[_propName];pageParamWidgetProps.map(function(pageParamWidgetProp){pageParamWidgetProp.name&&pageParamWidgetProp.value&&(_updatedProps["__Pageparam__"+pageParamWidgetProp.name]=pageParamWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps)&&this.updateWidgetProps(_updatedProps)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_siblingparams"],this.state.keyValueLists[this.props.active_widget_id+"_siblingparams"])){var siblingWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_siblingparams"];if(siblingWidgetProps&&siblingWidgetProps.length>0){var _updatedProps2=cloneDeep(this.props.widgetProps)||{};for(var _propName2 in _updatedProps2)_propName2.startsWith("__Sibling__")&&delete _updatedProps2[_propName2];siblingWidgetProps.map(function(siblingWidgetProp){siblingWidgetProp.name&&siblingWidgetProp.value&&(_updatedProps2["__Sibling__"+siblingWidgetProp.name]=siblingWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps2)&&this.updateWidgetProps(_updatedProps2)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_childparams"],this.state.keyValueLists[this.props.active_widget_id+"_childparams"])){var childWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_childparams"];if(childWidgetProps&&childWidgetProps.length>0){var _updatedProps3=cloneDeep(this.props.widgetProps)||{};for(var _propName3 in _updatedProps3)_propName3.startsWith("__Child__")&&delete _updatedProps3[_propName3];childWidgetProps.map(function(childWidgetProp){childWidgetProp.name&&childWidgetProp.value&&(_updatedProps3["__Child__"+childWidgetProp.name]=childWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps3)&&this.updateWidgetProps(_updatedProps3)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_stateparams"],this.state.keyValueLists[this.props.active_widget_id+"_stateparams"])){var stateWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_stateparams"];if(stateWidgetProps&&stateWidgetProps.length>0){var _updatedProps4=cloneDeep(this.props.widgetProps)||{};for(var _propName4 in _updatedProps4)_propName4.startsWith("__State__")&&delete _updatedProps4[_propName4];stateWidgetProps.map(function(stateWidgetProp){stateWidgetProp.name&&stateWidgetProp.value&&(_updatedProps4["__State__"+stateWidgetProp.name]=stateWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps4)&&this.updateWidgetProps(_updatedProps4)}}this.loadWidgetProps(prevProps.active_widget_id!==this.props.active_widget_id||prevProps.active_page_id!==this.props.active_page_id)}prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"designer_props"==this.props.showpreview_target&&this.setState({showPreview:!1,reload:!this.state.reload}),_.isEqual(prevProps.keyvaluepair,this.props.keyvaluepair)||this.props.keyvaluepair&&Object.keys(this.props.keyvaluepair).length>0&&Object.keys(this.props.keyvaluepair).map(function(varName){if(!_.isEqual(prevProps.keyvaluepair[varName],_this2.props.keyvaluepair[varName])){!varName.endsWith("_dynamicparams")&&!varName.endsWith("_siblingparams")&&!varName.endsWith("_childparams")&&!varName.endsWith("_stateparams")&&!varName.endsWith("_pageparams")&&_this2.updateWidgetPropsDebounce(varName,_this2.props.keyvaluepair[varName]);var newKeyValueLists=cloneDeep(_this2.state.keyValueLists);newKeyValueLists[varName]=cloneDeep(_this2.props.keyvaluepair[varName]),_this2.setState({keyValueLists:newKeyValueLists})}})}},{key:"getChildWidgetProps",value:function(currentWidget,pageId,widgetType,result){var _this3=this;if("Page"==widgetType){var childPage=this.props.pageData[pageId],pageWidgets=childPage&&childPage.widgets?childPage.widgets:[];return pageWidgets&&Object.keys(pageWidgets).map(function(pageWidgetId){var pageWidget=pageWidgets[pageWidgetId],childWidgetType="";if("PageDesignerPreview"==pageWidget.name?childWidgetType="Page":"SrsTabs"==pageWidget.name?childWidgetType="Tabs":pageWidget&&pageWidget.props&&1==pageWidget.props.is_container&&(childWidgetType="Container"),childWidgetType)result=deepmerge(result,_this3.getChildWidgetProps(pageWidget,pageWidget.props.PageId,childWidgetType,result));else{var childPageName=childPage.name||pageId;result[childPageName]=result[childPageName]||{};var pageWidgetName=pageWidget.props&&pageWidget.props.Name?pageWidget.props.Name:pageWidget.id,childWidgetProps={};pageWidget.props&&Object.keys(pageWidget.props).map(function(pageWidgetPropName){(pageWidgetPropName=pageWidgetPropName.replace("__Child__","").replace("__Sibling__","").replace("__Dynamic__","").replace("__State__","")).endsWith("__params")||pageWidgetPropName.endsWith("__siblingparams")||pageWidgetPropName.endsWith("_pageparams")||pageWidgetPropName.endsWith("_dynamicparams")||pageWidgetPropName.endsWith("_stateparams")||(childWidgetProps[pageWidgetPropName]=pageWidget.props[pageWidgetPropName])}),result[childPageName][pageWidgetName]=childWidgetProps||{}}}),result}if("Tabs"==widgetType){var tabRelations=JSON.parse(currentWidget.props.tabs);return tabRelations&&tabRelations.map(function(tabRelation,indx){if(tabRelation.tabInfo&&tabRelation.tabInfo.page){var _pageId=tabRelation.tabInfo.page.page_id,pagesuffix=currentWidget.id+indx;result=deepmerge(result,_this3.getChildWidgetProps(currentWidget,_pageId+pagesuffix,"Page",result))}}),result}if("Container"!=widgetType)return result}},{key:"loadWidgetProps",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(forceLoad){var propsMap,elementsToRender,widgetProps,dynamicWidgetProps,pageParamWidgetProps,siblingWidgetProps,childWidgetProps,stateWidgetProps,_loop,i,activeWidget,data,widgetDetails,widgetPropsData,_loop2,currentDynamicParams,currentStateParams,currentWidgetPageParamsProps,choiceList,currentSiblingWidgetParams,nestedChoiceList,nestedLabels,widgetType,currentChildWidgetParams,nestedChildChoiceList,tabRelations,nestedChildLabels,_this4=this;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:for(propsMap={},elementsToRender=[],this.isTabComponent=!1,widgetProps=this.state.widgetProps,dynamicWidgetProps=[],pageParamWidgetProps=[],siblingWidgetProps=[],childWidgetProps=[],stateWidgetProps=[],widgetProps&&Object.keys(widgetProps).length>0&&Object.keys(widgetProps).map(function(widgetPropKey,indx){var nodeName=widgetPropKey,nodeValue=widgetProps[widgetPropKey];if("FieldName"==nodeName){if(propsMap[nodeName]="",nodeValue&&nodeValue.indexOf("@@[")>-1){var propVal=nodeValue.split("@@[")[1];propsMap[nodeName]=propVal.substr(0,propVal.length-1)}}else if(nodeName.startsWith("__Dynamic__")){var dynamicWidgetPropName=nodeName.split("__Dynamic__")[1];dynamicWidgetProps.push({name:dynamicWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__Pageparam__")){var pageParamWidgetPropName=nodeName.split("__Pageparam__")[1];pageParamWidgetProps.push({name:pageParamWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__Sibling__")){var siblingWidgetPropName=nodeName.split("__Sibling__")[1];siblingWidgetProps.push({name:siblingWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__Child__")){var childWidgetPropName=nodeName.split("__Child__")[1];childWidgetProps.push({name:childWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__State__")){var stateWidgetPropName=nodeName.split("__State__")[1];stateWidgetProps.push({name:stateWidgetPropName,value:nodeValue})}else propsMap[nodeName]=nodeValue}),this.props.activeWidget.Component,SrsReference(),_loop=function(i){var node=DEFAULT_PROPS[i],element=React.createElement(Checkbox,{labelText:node.Name,name:node.Name,id:"check-box-"+i,defaultChecked:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(value){var updatedProps=cloneDeep(_this4.props.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}});elementsToRender.push(element)},i=0;i<DEFAULT_PROPS.length;i++)_loop(i);if((activeWidget=this.props.activeWidget)&&0!=Object.keys(activeWidget).length&&activeWidget.Component){_context3.next=22;break}return _context3.next=18,GraphQLDataUtil().getRecord("pd.getSlideSlotWidgetById",{widgetId:this.props.active_widget_id});case 18:data=_context3.sent,widgetDetails={Component:data.Component,Slot:data.Slot},activeWidget=_extends({},widgetDetails,activeWidget),this.updateWidgetProps(activeWidget);case 22:if(!this.state.widgetChanged&&!forceLoad){_context3.next=27;break}return _context3.next=25,GraphQLDataUtil().getRecord("pd.GetComponentProps",{PropsComponent:activeWidget.Component});case 25:widgetPropsData=_context3.sent,this.setState({widgetChanged:!1,widgetPropsData:widgetPropsData,keyValueLists:{}});case 27:if(!(this.state.widgetPropsData&&this.state.widgetPropsData.length>0)){_context3.next=47;break}_loop2=_regeneratorRuntime.mark(function _loop2(i){var node,nodeType,updatePropsWithDefaults,element,currentList,selectItems,schemaTables,_selectItems,attributes,tableName,displayFieldName,secondaryDisplayFieldName,filterStr,RecordReference,recordFilter,NavReference,navFilter,_ComponentReference,_selectItems4,_schemaTables,PageReference,_selectItems5,_tableName,_attributes,widgetName,schemaFields,relatedTableFieldsSelectList,relatedTableName,parentField,allFields,matchingField,relatedFields,relatedTableDisplayField,targetPageIds,_attributes2,_widgetName,pageIdValue,ParamPicker,_loop3,targetPageIdKey,_selectItems6,selectKeyValues,tabWidgetProps,tabs,tabId,_tableName3,_attributes3,_widgetName2,_schemaFields,fieldNames,currentKeyValueList,currentKVList;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(node=_this4.state.widgetPropsData[i].node,nodeType=node.Type,updatePropsWithDefaults=cloneDeep(_this4.state.widgetProps),element=React.createElement(TextInput,{key:node.Name+"_"+_this4.props.active_widget_id,id:node.Name+"_"+_this4.props.active_widget_id,labelText:node.Name,name:node.Name,defaultValue:_this4.state.widgetProps[node.Name]?_this4.state.widgetProps[node.Name]:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,placeholder:node.DefaultValue,onChange:_this4.handleTextChange,onBlur:function(e){var updatedProps=cloneDeep(_this4.state.widgetProps);updatedProps[e.target.name]="Name"==node.Name&&_this4.state.propChanges&&_this4.state.propChanges[e.target.name]?_this4.state.propChanges[e.target.name].replace(/[^a-zA-Z0-9]/g,"_"):_this4.state.propChanges[e.target.name],_this4.updateWidgetProps(updatedProps)}}),"TextArea"==nodeType&&(element=React.createElement(TextArea,{key:node.Name+"_"+_this4.props.active_widget_id,id:node.Name+"_"+_this4.props.active_widget_id,labelText:node.Name,name:node.Name,defaultValue:_this4.state.widgetProps[node.Name]?_this4.state.widgetProps[node.Name]:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,placeholder:node.DefaultValue,onChange:_this4.handleTextChange,onBlur:function(e){var updatedProps=cloneDeep(_this4.state.widgetProps);updatedProps[node.Name]=e.target.value,_this4.updateWidgetProps(updatedProps)}})),"Hidden"==nodeType&&(element=null),"Checkbox"==nodeType&&(element=React.createElement(Checkbox,{key:node.Name+"_"+_this4.props.active_widget_id,labelText:node.Name,name:node.Name,id:node.Name+"_"+_this4.props.active_widget_id,defaultChecked:propsMap.hasOwnProperty(node.Name)?"true"==propsMap[node.Name]||1==propsMap[node.Name]:"true"==node.DefaultValue,onChange:function(value){var wprops=cloneDeep(_this4.state.widgetProps)||{};wprops[node.Name]=value,_this4.updateWidgetProps(wprops)}})),"NestedList"==nodeType&&([],currentList=(currentList=_this4.state.keyValueLists&&_this4.state.keyValueLists[node.Name]?_this4.state.keyValueLists[node.Name]:propsMap[node.Name]?propsMap[node.Name]:[])&&"object"==typeof currentList?JSON.stringify(currentList):currentList||"[]",element=React.createElement("srs-key-value-pair",{varname:node.Name,items:currentList,label:node.Name,placeholder_name:"Name..",placeholder_value:"Value.."})),"TableSelector"==nodeType&&((selectItems=[]).push(React.createElement(SelectItem,{value:"",text:"None"})),(schemaTables=_this4.props.schemaTables||[]).sort(function(a,b){return a==b?0:a>b?1:-1}),schemaTables.map(function(tableName){selectItems.push(React.createElement(SelectItem,{value:tableName,text:tableName}))}),!updatePropsWithDefaults[node.Name]&&forceLoad&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),element=React.createElement(Select,{style:{display:"flex"},labelText:node.Name,onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue},selectItems)),"RecordSelector"==nodeType&&node.Attributes){_selectItems=[],attributes=JSON.parse(node.Attributes),tableName=attributes.tableName,displayFieldName=attributes.displayFieldName,secondaryDisplayFieldName=attributes.secondaryDisplayFieldName,filterStr=attributes.filter,_selectItems.push(React.createElement(SelectItem,{value:"",text:"None"})),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&forceLoad&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),RecordReference=SrsReference(),recordFilter={};try{recordFilter=JSON.parse(filterStr)}catch(err){}element=React.createElement(RecordReference,{style:{display:"flex"},tablename:tableName,displayfield:displayFieldName,secondarydisplayfield:secondaryDisplayFieldName,filter:JSON.stringify(recordFilter),searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})}if("NavSelector"==nodeType&&([].push(React.createElement(SelectItem,{value:"",text:"None"})),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&forceLoad&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),NavReference=SrsReference(),navFilter={where:{and:[{Scope:_this4.props.currentscope},{Parent:null}]}},element=React.createElement(NavReference,{style:{display:"flex"},tablename:"MetaNavigation",displayfield:"Name",secondarydisplayfield:"Scope",filter:JSON.stringify(navFilter),searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})),"ComponentSelector"==nodeType&&([].push(React.createElement(SelectItem,{value:"",text:"None"})),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&forceLoad&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),_ComponentReference=SrsReference(),element=React.createElement(_ComponentReference,{style:{display:"flex"},tablename:"MetaComponent",displayfield:"Name",secondarydisplayfield:"Scope",filter:"",searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})),"PageSelector"==nodeType&&((_selectItems4=[]).push(React.createElement(SelectItem,{value:"",text:"None"})),(_schemaTables=_this4.props.schemaTables||[]).sort(function(a,b){return a==b?0:a>b?1:-1}),_schemaTables.map(function(tableName){_selectItems4.push(React.createElement(SelectItem,{value:tableName,text:tableName}))}),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&forceLoad&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),PageReference=SrsReference(),element=React.createElement(PageReference,{style:{display:"flex"},tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:"",searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})),"FieldSelector"==nodeType&&(_selectItems5=[],_tableName="",node.Attributes&&("Static"==(_attributes=JSON.parse(node.Attributes)).tableType?_tableName=_attributes.value:(widgetName=_attributes.value&&_attributes.value.widgetName,_tableName=_this4.state.widgetProps[widgetName])),_selectItems5.push(React.createElement(SelectItem,{value:"",text:"None"})),(schemaFields=(schemaFields=_this4.props.schemaFields||[])&&schemaFields.filter(function(field,indx){return field.parent==_tableName&&"id"!==field.id}))&&schemaFields.map(function(fieldObj){"field"==fieldObj.type?_selectItems5.push(React.createElement(SelectItem,{value:fieldObj.id,text:fieldObj.text})):"one2one"==fieldObj.type&&_selectItems5.push(React.createElement(SelectItem,{value:fieldObj.id+"@@"+fieldObj.to,text:fieldObj.text}))}),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&forceLoad&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),relatedTableFieldsSelectList=[],relatedTableName="",parentField="",propsMap[node.Name]&&propsMap[node.Name].indexOf(".")>-1&&(parentField=propsMap[node.Name].split(".")[0],propsMap[node.Name].split(".")[1],allFields=_this4.props.schemaFields||[],(matchingField=allFields.filter(function(field,indx){return field.id==parentField&&field.parent==_tableName&&"one2one"==field.type}))&&1==matchingField.length&&(relatedTableName=matchingField[0].to),relatedTableFieldsSelectList.push(React.createElement(SelectItem,{value:"",text:"None"})),(relatedFields=(relatedFields=_this4.props.schemaFields||[])&&relatedFields.filter(function(field,indx){return field.parent==relatedTableName&&"field"==field.type&&"id"!==field.id}))&&relatedFields.map(function(fieldObj){relatedTableFieldsSelectList.push(React.createElement(SelectItem,{value:fieldObj.id,text:fieldObj.text}))})),relatedTableDisplayField=relatedTableName?React.createElement(Select,{style:{display:"flex"},labelText:"Related Field",onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=parentField+"."+value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]&&propsMap[node.Name].indexOf(".")>-1?propsMap[node.Name].split(".")[1]:""},relatedTableFieldsSelectList):null,element=React.createElement(React.Fragment,null,React.createElement(Select,{style:{display:"flex"},labelText:node.Name,onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};value.indexOf("@@")>-1?(value=value.split("@@")[0],updatedProps[node.Name]=value+".uid"):updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]?propsMap[node.Name].indexOf(".")>-1?propsMap[node.Name].split(".")[0]+"@@"+relatedTableName:propsMap[node.Name]:node.DefaultValue?node.DefaultValue:""},_selectItems5),relatedTableDisplayField)),"PageParameter"!=nodeType){_context2.next=27;break}if(targetPageIds={},node.Attributes&&("Static"==(_attributes2=JSON.parse(node.Attributes)).pageType?targetPageIds[_attributes2.value]="Page Parameters":(_widgetName=_attributes2.value&&_attributes2.value.widgetName,(pageIdValue=_this4.state.widgetProps[_widgetName])&&(pageIdValue.indexOf(",")>0?pageIdValue.split(",").map(function(pageIdWidgetName){var currentPageId=_this4.state.widgetProps[pageIdWidgetName.trim()];currentPageId&&(targetPageIds[currentPageId+"_"+pageIdWidgetName.trim()]=pageIdWidgetName.trim())}):targetPageIds[pageIdValue]="Page Parameters"))),ParamPicker=null,!(targetPageIds&&Object.keys(targetPageIds).length>0)){_context2.next=26;break}_loop3=_regeneratorRuntime.mark(function _loop3(targetPageIdKey){var targetPageId,matchingPage,isPageModelDriven,isParentPageModelDriven,currentPageParams,parentPageParams,additionalProps,activePageProps;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return targetPageId=targetPageIdKey.indexOf("_")>-1?targetPageIdKey.split("_")[0]:targetPageIdKey,_context.next=3,$qry.run("mmf.getSlideDetailsById",{uid:targetPageId},"data.slide");case 3:if(!(matchingPage=_context.sent)||!matchingPage.uid){_context.next=21;break}isPageModelDriven="FreeForm"!=matchingPage.Type,isParentPageModelDriven=_this4.props.activePage&&_this4.props.activePage.pageType&&"FreeForm"!=_this4.props.activePage.pageType,currentPageParams=[],isPageModelDriven&&_this4.props.activePage&&_this4.props.activePage.pageType&&"CreateView"!=_this4.props.activePage.pageType&&(currentPageParams=["recordid"]),matchingPage.props&&Object.keys(matchingPage.props).map(function(propId){"ModelName"!=matchingPage.props[propId].Name&&"ModelScope"!=matchingPage.props[propId].Name&&currentPageParams.push(matchingPage.props[propId].Name)}),parentPageParams={},isParentPageModelDriven&&(parentPageParams.recordid="Parent Record"),_this4.props.activePage&&_this4.props.activePage.props&&(additionalProps={},activePageProps=_this4.props.activePage&&_this4.props.activePage.props?_this4.props.activePage.props:{},Object.keys(activePageProps).map(function(activePageProp){"ModelName"!=activePageProp&&"ModelScope"!=activePageProp&&(additionalProps[activePageProp]=activePageProps[activePageProp])}),parentPageParams=Object.assign(parentPageParams,additionalProps)),_context.t0=matchingPage.Type,_context.next="CreateView"===_context.t0?16:"EditView"===_context.t0?16:"FreeForm"===_context.t0?18:20;break;case 16:return currentPageParams&&currentPageParams.length>0&&(ParamPicker=PageParameter(),element=React.createElement(React.Fragment,null,React.createElement("div",{className:"bx--label",style:{display:"flex",marginTop:10,marginLeft:2}},targetPageIds[targetPageIdKey]+" Params"),React.createElement(ParamPicker,{updateProps:function(data){var updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=updatedProps[node.Name]||{},updatedProps[node.Name]="string"==typeof updatedProps[node.Name]?JSON.parse(updatedProps[node.Name]):updatedProps[node.Name],updatedProps[node.Name][targetPageIdKey]=data,_this4.updateWidgetProps(updatedProps)},parentPageParams:parentPageParams,pageId:targetPageId,pageData:_this4.props.pageData,widgetData:_this4.props.widgetData,defaultValue:propsMap[node.Name]&&propsMap[node.Name][targetPageIdKey]?propsMap[node.Name][targetPageIdKey]:node.DefaultValue?node.DefaultValue:"",params:currentPageParams}))),_context.abrupt("break",21);case 18:return currentPageParams&&currentPageParams.length>0&&(ParamPicker=PageParameter(),element=React.createElement(ParamPicker,{updateProps:function(data){var updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=updatedProps[node.Name]||{},updatedProps[node.Name][targetPageIdKey]=data,_this4.updateWidgetProps(updatedProps)},parentPageParams:parentPageParams,pageData:_this4.props.pageData,widgetData:_this4.props.widgetData,defaultValue:propsMap[node.Name]&&propsMap[node.Name][targetPageIdKey]?propsMap[node.Name][targetPageIdKey]:node.DefaultValue?node.DefaultValue:"",params:currentPageParams})),_context.abrupt("break",21);case 20:return _context.abrupt("break",21);case 21:elementsToRender.push(element);case 22:case"end":return _context.stop()}},_loop3,_this4)}),_context2.t0=_regeneratorRuntime.keys(targetPageIds);case 21:if((_context2.t1=_context2.t0()).done){_context2.next=26;break}return targetPageIdKey=_context2.t1.value,_context2.delegateYield(_loop3(targetPageIdKey),"t2",24);case 24:_context2.next=21;break;case 26:element=null;case 27:if("Select"==nodeType&&((_selectItems6=[]).push(React.createElement(SelectItem,{value:"",text:"None"})),"",node.Attributes&&(selectKeyValues=JSON.parse(node.Attributes))&&selectKeyValues.length>0&&selectKeyValues.map(function(selectKeyValue){return _selectItems6.push(React.createElement(SelectItem,{value:selectKeyValue.value,text:selectKeyValue.name}))}),element=React.createElement(Select,{style:{display:"flex"},labelText:node.Name,onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue?node.DefaultValue:""},_selectItems6)),"FieldMap"==nodeType&&(element=React.createElement("entity-mapper",{lite:"true",key:"text-element-"+i,id:"text-element-"+i})),"TabMap"!=nodeType){_context2.next=35;break}return _this4.isTabComponent=!0,tabWidgetProps=cloneDeep(_this4.state.widgetProps)||{},0==(tabs=tabWidgetProps.tabs||[]).length&&(tabId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),tabs.push({tab_id:tabId,tabInfo:{name:"",type:""}}),tabWidgetProps.tabs=JSON.stringify(tabs),_this4.updateWidgetProps(tabWidgetProps)),_context2.abrupt("return","continue");case 35:"KeyFieldList"==nodeType&&([],_tableName3="",node.Attributes&&("Static"==(_attributes3=JSON.parse(node.Attributes)).tableType?_tableName3=_attributes3.value:(_widgetName2=_attributes3.value&&_attributes3.value.widgetName,_tableName3=_this4.state.widgetProps[_widgetName2])),_schemaFields=(_schemaFields=_this4.props.schemaFields||[])&&_schemaFields.filter(function(field,indx){return field.parent==_tableName3&&"id"!==field.id}),fieldNames=[],_schemaFields&&_schemaFields.map(function(schemaField){fieldNames.push({name:schemaField.text,value:schemaField.id})}),currentKeyValueList=(currentKeyValueList=_this4.state.keyValueLists&&_this4.state.keyValueLists[node.Name]?_this4.state.keyValueLists[node.Name]:propsMap[node.Name]?propsMap[node.Name]:[])&&"object"==typeof currentKeyValueList?JSON.stringify(currentKeyValueList):currentKeyValueList||"[]",element=React.createElement("srs-key-value-pair",{varname:node.Name,choices:JSON.stringify({valueList:fieldNames}),items:currentKeyValueList,label:node.Name,placeholder_name:"Prop Name..",placeholder_value:"Field Name"})),"KeyValueList"==nodeType&&([],currentKVList=(currentKVList=_this4.state.keyValueLists&&_this4.state.keyValueLists[node.Name]?_this4.state.keyValueLists[node.Name]:propsMap[node.Name]?propsMap[node.Name]:[])&&"object"==typeof currentKVList?JSON.stringify(currentKVList):currentKVList||"[]",element=React.createElement("srs-key-value-pair",{varname:node.Name,items:currentKVList,label:node.Name,placeholder_name:"Name..",placeholder_value:"Value.."})),element&&elementsToRender.push(element);case 38:case"end":return _context2.stop()}},_loop2,_this4)}),i=0;case 30:if(!(i<this.state.widgetPropsData.length)){_context3.next=38;break}return _context3.delegateYield(_loop2(i),"t0",32);case 32:if("continue"!==_context3.t0){_context3.next=35;break}return _context3.abrupt("continue",35);case 35:i++,_context3.next=30;break;case 38:currentDynamicParams=(currentDynamicParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_dynamicparams"]?this.state.keyValueLists[this.props.active_widget_id+"_dynamicparams"]:dynamicWidgetProps||[])&&"object"==typeof currentDynamicParams?JSON.stringify(currentDynamicParams):currentDynamicParams||"[]",elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_dynamicparams",trim_name:"true",label:"Dynamic Parameters",placeholder_name:"Enter Param Name...",items:currentDynamicParams,placeholder_value:"Enter Default Value..."})),currentStateParams=(currentStateParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_stateparams"]?this.state.keyValueLists[this.props.active_widget_id+"_stateparams"]:stateWidgetProps||[])&&"object"==typeof currentStateParams?JSON.stringify(currentStateParams):currentStateParams||"[]",elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_stateparams",label:"State Parameters",placeholder_name:"Enter Param Name...",trim_name:"true",items:currentStateParams,placeholder_value:"Enter value path..."})),this.props.activePage.props&&Object.keys(this.props.activePage.props).length>0&&(currentWidgetPageParamsProps=(currentWidgetPageParamsProps=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_pageparams"]?this.state.keyValueLists[this.props.active_widget_id+"_pageparams"]:pageParamWidgetProps||[])&&"object"==typeof currentWidgetPageParamsProps?JSON.stringify(currentWidgetPageParamsProps):currentWidgetPageParamsProps||"[]",choiceList=[],Object.keys(this.props.activePage.props).map(function(pageParamName){choiceList.push({name:pageParamName,value:pageParamName})}),elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_pageparams",choices:JSON.stringify({valueList:choiceList}),trim_name:"true",items:currentWidgetPageParamsProps,label:"Page Parameter Subscription",placeholder_name:"Enter Name...",placeholder_value:"Enter Default Value..."}))),this.props.activePage.widgets&&Object.keys(this.props.activePage.widgets).length>1&&(currentSiblingWidgetParams=(currentSiblingWidgetParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_siblingparams"]?this.state.keyValueLists[this.props.active_widget_id+"_siblingparams"]:siblingWidgetProps||[])&&"object"==typeof currentSiblingWidgetParams?JSON.stringify(currentSiblingWidgetParams):currentSiblingWidgetParams||"[]",nestedChoiceList={},nestedLabels={"Widget Name":{"Prop Name":""}},this.props.active_widget_id&&this.props.activePage.widgets&&Object.keys(this.props.activePage.widgets).map(function(widgetId){if(widgetId!=_this4.props.active_widget_id){var siblingWidget=_this4.props.activePage.widgets[widgetId],siblingWidgetName=siblingWidget.props&&siblingWidget.props.Name?siblingWidget.props.Name:widgetId,_siblingWidgetProps={};siblingWidget.props&&Object.keys(siblingWidget.props).map(function(siblingWidgetPropName){(siblingWidgetPropName=siblingWidgetPropName.replace("__Child__","").replace("__Sibling__","").replace("__Dynamic__","")).endsWith("_params")||siblingWidgetPropName.endsWith("_siblingparams")||siblingWidgetPropName.endsWith("_pageparams")||siblingWidgetPropName.endsWith("_dynamicparams")||(_siblingWidgetProps[siblingWidgetPropName]=siblingWidget.props[siblingWidgetPropName]||"")}),nestedChoiceList[siblingWidgetName]=_siblingWidgetProps}}),elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_siblingparams",choices:JSON.stringify({valueList:nestedChoiceList}),trim_name:"true",valuelabels:JSON.stringify(nestedLabels),items:currentSiblingWidgetParams,label:"Sibling Widget Subscription",placeholder_name:"Enter Name...",placeholder_value:"Enter Default Value..."}))),!this.props.activeWidget||"PageDesignerPreview"!=this.props.activeWidget.name&&"SrsTabs"!=this.props.activeWidget.name&&1!=this.props.widgetProps.is_container||(widgetType="","PageDesignerPreview"==this.props.activeWidget.name?widgetType="Page":"SrsTabs"==this.props.activeWidget.name?widgetType="Tabs":1==this.state.widgetProps.is_container&&(widgetType="Container"),widgetType&&(currentChildWidgetParams=(currentChildWidgetParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_childparams"]?this.state.keyValueLists[this.props.active_widget_id+"_childparams"]:childWidgetProps||[])&&"object"==typeof currentChildWidgetParams?JSON.stringify(currentChildWidgetParams):currentChildWidgetParams||"[]",nestedChildChoiceList={},"Page"==widgetType?nestedChildChoiceList=this.getChildWidgetProps(this.props.activeWidget,this.state.widgetProps.PageId,widgetType,nestedChildChoiceList):"Tabs"==widgetType&&(tabRelations=JSON.parse(this.props.activeWidget.props.tabs))&&tabRelations.map(function(tabRelation,indx){if(tabRelation.tabInfo&&tabRelation.tabInfo.page){var pageId=tabRelation.tabInfo.page.page_id,pagesuffix=_this4.props.activeWidget.id+indx;nestedChildChoiceList=_extends({},nestedChildChoiceList,_this4.getChildWidgetProps(_this4.props.activeWidget,pageId+pagesuffix,"Page",nestedChildChoiceList))}}),nestedChildLabels={"Page Name":{"Widget Name":{"Prop Name":""}}},elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_childparams",choices:JSON.stringify({valueList:nestedChildChoiceList}),valuelabels:JSON.stringify(nestedChildLabels),items:currentChildWidgetParams,label:"Child Widget Subscription",placeholder_name:"Enter Name...",placeholder_value:"Enter Default Value..."}))));case 47:this.setState({elementsToRender:elementsToRender,dataLoaded:!0});case 48:case"end":return _context3.stop()}},_callee,this)}));return function(_x){return _ref.apply(this,arguments)}}()},{key:"showTabMappingDialog",value:function(tab){this.props.updateStore({updates:{showpreview:!0,active_tab_id:tab.tab_id}}),this.setState({showPreview:!0,reload:!this.state.reload})}},{key:"closePreviewWindow",value:function(){this.setState({reload:!this.state.reload})}},{key:"handleTabNameChange",value:function(e,tab){var value=e.target.value,tabId=tab.tab_id,updatedProps=this.state.widgetProps||{},tabs=[];tabs="string"==typeof updatedProps.tabs?updatedProps.tabs?JSON.parse(updatedProps.tabs):[]:updatedProps.tabs||[];for(var i=0;i<tabs.length;i++){var _tab=tabs[i];_tab.tab_id==tabId&&(_tab.tabInfo.name=encodeURIComponent(value))}updatedProps.tabs=JSON.stringify(tabs),this.updateWidgetProps(updatedProps)}},{key:"addTab",value:function(){var updatedProps=this.state.widgetProps||{},tabs=[];tabs="string"==typeof updatedProps.tabs?updatedProps.tabs?JSON.parse(updatedProps.tabs):[]:updatedProps.tabs||[];var tabId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)});tabs.push({tab_id:tabId,tabInfo:{name:"",type:"",page_id:"",list:{table:"",fields:[],pagesize:10}}}),updatedProps.tabs=JSON.stringify(tabs),this.updateWidgetProps(updatedProps)}},{key:"removeTab",value:function(tab){var tabId=tab.tab_id,updatedProps=this.state.widgetProps||{},tabs=[];tabs="string"==typeof updatedProps.tabs?updatedProps.tabs?JSON.parse(updatedProps.tabs):[]:updatedProps.tabs||[];for(var tabIndex=0,i=0;i<tabs.length;i++){if(tabs[i].tab_id==tabId){tabIndex=i;break}}tabs.splice(tabIndex,1),updatedProps.tabs=JSON.stringify(tabs),this.updateWidgetProps(updatedProps)}},{key:"getTabs",value:function(){var _this5=this,widgetProps=this.state.widgetProps||{},tabs=[],length=(tabs="string"==typeof widgetProps.tabs?widgetProps.tabs?JSON.parse(widgetProps.tabs):[]:widgetProps.tabs||[]).length,tabsToRender=[],result=null;return tabs.forEach(function(tab,i){var element=React.createElement("div",{className:"tab-create"},React.createElement(TextInput,{placeholder:"Tab Name",value:decodeURIComponent(tab.tabInfo.name),onChange:function(e){_this5.handleTabNameChange(e,tab)}}),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){_this5.removeTab(tab)}}):null,React.createElement(AddAlt20,{onClick:function(){_this5.addTab()}}),React.createElement(Settings32,{style:{marginTop:8,marginLeft:5},onClick:function(){_this5.showTabMappingDialog(tab)}}));tabsToRender.push(element)}),tabsToRender.length>0&&(result=React.createElement(React.Fragment,null," ",React.createElement("label",{class:"bx--label"},"Tabs")," ",tabsToRender)),result}},{key:"render",value:function(){var previewComponent,widgetPropsElements=this.state.elementsToRender;previewComponent=1==this.state.showPreview?React.createElement("preview-component",{target:"designer_props"},React.createElement("show-tab-mapping-dialog",null)):null;var tabs=this.isTabComponent?this.getTabs():null;return this.state.dataLoaded?React.createElement("div",{className:"sr-prop-body"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/PageDesignerProps/Style.css");'),previewComponent,React.createElement("div",{className:"tabs-panel"}," ",tabs," "),widgetPropsElements):React.createElement("div",{className:"dataLoading"},"Loading...")}}]),_PageDesignerProps_}(React.Component),_export("PageDesignerProps",PageDesignerProps=function(props){return _PageDesignerProps_}),_export("PageDesignerProps",PageDesignerProps),_export("default",PageDesignerProps),_export("states",states=[{KeyName:"activeWidget",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}",DefaultValue:'{"pages": {"${active_page_id}": {"widgets":{"${active_widget_id}": {}}}}}'},{KeyName:"keyvaluepair",AccessPath:"keyvaluepair",DefaultValue:'{"keyvaluepair": {}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview":false}'},{KeyName:"pageProps",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"widgetProps",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}.props",DefaultValue:'{"pages": {"${active_page_id}": {"widgets":{"${active_widget_id}": {"props": {}}}}}}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id":{}}'},{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": "false"}'},{KeyName:"widgetData",AccessPath:"pages.${active_page_id}.widgets",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {}}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id":""}'},{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"active_tab_id",AccessPath:"active_tab_id",DefaultValue:'{"active_tab_id":""}'},{KeyName:"pageData",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"component_id",AccessPath:"component_id",DefaultValue:'{"component_id":""}'},{KeyName:"schemaFields",AccessPath:"schema.fields",DefaultValue:'{"schema": {"fields": []}}'},{KeyName:"schemaTables",AccessPath:"schema.tables",DefaultValue:'{"schema": {"tables": []}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PageDesignerProps/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","component/studio/SrsReference/Definition.js","component/mmf/PageParameter/Definition.js","client/script/mmf/GraphQLDataUtil.js","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","@carbon/icons-react/lib/settings/16","lodash.debounce","deepmerge","lodash.clonedeep","lodash.get"],function(_export,_context4){"use strict";var _regeneratorRuntime,_extends,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,TextArea,Checkbox,Select,SelectItem,SrsReference,PageParameter,GraphQLDataUtil,AddAlt20,SubAlt20,Settings32,deepmerge,cloneDeep,DEFAULT_PROPS,_PageDesignerProps_,PageDesignerProps;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,TextArea=_carbonComponentsReact.TextArea,Checkbox=_carbonComponentsReact.Checkbox,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_componentMmfPageParameterDefinitionJs){PageParameter=_componentMmfPageParameterDefinitionJs.PageParameter},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonIconsReactLibSettings){Settings32=_carbonIconsReactLibSettings.default},function(_lodashDebounce){_lodashDebounce.default},function(_deepmerge){deepmerge=_deepmerge.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashGet){_lodashGet.default}],execute:function(){DEFAULT_PROPS=[{Name:"Invisible",DefaultValue:!1},{Name:"Required",DefaultValue:!1},{Name:"ReadOnly",DefaultValue:!1},{Name:"TriggerActionOnChange",DefaultValue:!1}],_PageDesignerProps_=function(_React$Component){function _PageDesignerProps_(props){_classCallCheck(this,_PageDesignerProps_);var _this=_possibleConstructorReturn(this,(_PageDesignerProps_.__proto__||Object.getPrototypeOf(_PageDesignerProps_)).call(this,props));_this.state={keyValueLists:{},widgetProps:[],widgetChanged:!0,propChanges:{},dataLoaded:!1,widgetProps:_this.props.widgetProps||{},showPreview:!1,reload:!1},_this.isTabComponent=!1,_this.handleTextChange=_this.handleTextChange.bind(_this),_this.loadWidgetProps=_this.loadWidgetProps.bind(_this),_this.keyValueOnChange=_this.keyValueOnChange.bind(_this);return _this.updateWidgetProps=function(updatedProps){_this.setState({widgetProps:updatedProps}),_this.props.updateStore({updates:{widgetProps:updatedProps}})},_this.updateWidgetPropsDebounce=function(key,value){var updateProps=cloneDeep(_this.props.widgetProps)||{};updateProps[key]=value,_this.setState({widgetProps:updateProps}),_this.props.updateStore({updates:{widgetProps:updateProps}})},_this.getChildWidgetProps=_this.getChildWidgetProps.bind(_this),_this}return _inherits(_PageDesignerProps_,_React$Component),_createClass(_PageDesignerProps_,[{key:"keyValueOnChange",value:function(keyValueList,changedIndx,propName,value,storeKeyName){var newKeyValueLists=cloneDeep(this.state.keyValueLists);newKeyValueLists[storeKeyName]=newKeyValueLists[storeKeyName]||keyValueList,newKeyValueLists[storeKeyName].map(function(keyValueItem,indx){indx==changedIndx&&(keyValueItem[propName]=value)}),this.setState({keyValueLists:newKeyValueLists}),this.updateWidgetPropsDebounce(storeKeyName,newKeyValueLists[storeKeyName])}},{key:"handleTextChange",value:function(e){var propChanges=cloneDeep(this.state.propChanges)||{};propChanges[e.target.name]=e.target.value,this.setState({propChanges:propChanges})}},{key:"componentDidMount",value:function(){this.loadWidgetProps()}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this2=this;if(prevProps.active_widget_id!==this.props.active_widget_id||prevProps.active_page_id!==this.props.active_page_id){var tobeActiveWidgetProps=this.props.pageData&&this.props.pageData[this.props.active_page_id]&&this.props.pageData[this.props.active_page_id].widgets&&this.props.pageData[this.props.active_page_id].widgets[this.props.active_widget_id]&&this.props.pageData[this.props.active_page_id].widgets[this.props.active_widget_id].props?this.props.pageData[this.props.active_page_id].widgets[this.props.active_widget_id].props:{},keyValueLists={};tobeActiveWidgetProps&&Object.keys(tobeActiveWidgetProps).map(function(tobeActiveWidgetPropName){tobeActiveWidgetPropName.startsWith("__Child__")?(keyValueLists[_this2.props.active_widget_id+"_childparams"]=keyValueLists[_this2.props.active_widget_id+"_childparams"]||[],keyValueLists[_this2.props.active_widget_id+"_childparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__Dynamic__")?(keyValueLists[_this2.props.active_widget_id+"_dynamicparams"]=keyValueLists[_this2.props.active_widget_id+"_dynamicparams"]||[],keyValueLists[_this2.props.active_widget_id+"_dynamicparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__Sibling__")?(keyValueLists[_this2.props.active_widget_id+"_siblingparams"]=keyValueLists[_this2.props.active_widget_id+"_siblingparams"]||[],keyValueLists[_this2.props.active_widget_id+"_siblingparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__Pageparam__")?(keyValueLists[_this2.props.active_widget_id+"_pageparams"]=keyValueLists[_this2.props.active_widget_id+"_pageparams"]||[],keyValueLists[_this2.props.active_widget_id+"_pageparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__State__")&&(keyValueLists[_this2.props.active_widget_id+"_stateparams"]=keyValueLists[_this2.props.active_widget_id+"_stateparams"]||[],keyValueLists[_this2.props.active_widget_id+"_stateparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]}))}),this.setState({widgetChanged:!0,keyValueLists:keyValueLists,widgetProps:cloneDeep(this.props.widgetProps)})}if(!_.isEqual(prevState.widgetProps,this.state.widgetProps)||prevState.widgetChanged!=this.state.widgetChanged&&1==this.state.widgetChanged||prevState.dataLoaded!=this.state.dataLoaded&&!this.state.dataLoaded||!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)){if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_dynamicparams"],this.state.keyValueLists[this.props.active_widget_id+"_dynamicparams"])){var dynamicWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_dynamicparams"];if(dynamicWidgetProps&&dynamicWidgetProps.length>0){var updatedProps=cloneDeep(this.props.widgetProps)||{};for(var propName in updatedProps)propName.startsWith("__Dynamic__")&&delete updatedProps[propName];dynamicWidgetProps.map(function(dynamicWidgetProp){dynamicWidgetProp.name&&(updatedProps["__Dynamic__"+dynamicWidgetProp.name]=dynamicWidgetProp.value?dynamicWidgetProp.value:"")}),!_.isEqual(this.props.widgetProps,updatedProps)&&this.updateWidgetProps(updatedProps)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_pageparams"],this.state.keyValueLists[this.props.active_widget_id+"_pageparams"])){var pageParamWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_pageparams"];if(pageParamWidgetProps&&pageParamWidgetProps.length>0){var _updatedProps=cloneDeep(this.props.widgetProps)||{};for(var _propName in _updatedProps)_propName.startsWith("__Pageparam__")&&delete _updatedProps[_propName];pageParamWidgetProps.map(function(pageParamWidgetProp){pageParamWidgetProp.name&&pageParamWidgetProp.value&&(_updatedProps["__Pageparam__"+pageParamWidgetProp.name]=pageParamWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps)&&this.updateWidgetProps(_updatedProps)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_siblingparams"],this.state.keyValueLists[this.props.active_widget_id+"_siblingparams"])){var siblingWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_siblingparams"];if(siblingWidgetProps&&siblingWidgetProps.length>0){var _updatedProps2=cloneDeep(this.props.widgetProps)||{};for(var _propName2 in _updatedProps2)_propName2.startsWith("__Sibling__")&&delete _updatedProps2[_propName2];siblingWidgetProps.map(function(siblingWidgetProp){siblingWidgetProp.name&&siblingWidgetProp.value&&(_updatedProps2["__Sibling__"+siblingWidgetProp.name]=siblingWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps2)&&this.updateWidgetProps(_updatedProps2)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_childparams"],this.state.keyValueLists[this.props.active_widget_id+"_childparams"])){var childWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_childparams"];if(childWidgetProps&&childWidgetProps.length>0){var _updatedProps3=cloneDeep(this.props.widgetProps)||{};for(var _propName3 in _updatedProps3)_propName3.startsWith("__Child__")&&delete _updatedProps3[_propName3];childWidgetProps.map(function(childWidgetProp){childWidgetProp.name&&childWidgetProp.value&&(_updatedProps3["__Child__"+childWidgetProp.name]=childWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps3)&&this.updateWidgetProps(_updatedProps3)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_stateparams"],this.state.keyValueLists[this.props.active_widget_id+"_stateparams"])){var stateWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_stateparams"];if(stateWidgetProps&&stateWidgetProps.length>0){var _updatedProps4=cloneDeep(this.props.widgetProps)||{};for(var _propName4 in _updatedProps4)_propName4.startsWith("__State__")&&delete _updatedProps4[_propName4];stateWidgetProps.map(function(stateWidgetProp){stateWidgetProp.name&&stateWidgetProp.value&&(_updatedProps4["__State__"+stateWidgetProp.name]=stateWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps4)&&this.updateWidgetProps(_updatedProps4)}}this.loadWidgetProps(prevProps.active_widget_id!==this.props.active_widget_id||prevProps.active_page_id!==this.props.active_page_id)}prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"designer_props"==this.props.showpreview_target&&this.setState({showPreview:!1,reload:!this.state.reload}),_.isEqual(prevProps.keyvaluepair,this.props.keyvaluepair)||this.props.keyvaluepair&&Object.keys(this.props.keyvaluepair).length>0&&Object.keys(this.props.keyvaluepair).map(function(varName){if(!_.isEqual(prevProps.keyvaluepair[varName],_this2.props.keyvaluepair[varName])){!varName.endsWith("_dynamicparams")&&!varName.endsWith("_siblingparams")&&!varName.endsWith("_childparams")&&!varName.endsWith("_stateparams")&&!varName.endsWith("_pageparams")&&_this2.updateWidgetPropsDebounce(varName,_this2.props.keyvaluepair[varName]);var newKeyValueLists=cloneDeep(_this2.state.keyValueLists);newKeyValueLists[varName]=cloneDeep(_this2.props.keyvaluepair[varName]),_this2.setState({keyValueLists:newKeyValueLists})}})}},{key:"getChildWidgetProps",value:function(currentWidget,pageId,widgetType,result){var _this3=this;if("Page"==widgetType){var childPage=this.props.pageData[pageId],pageWidgets=childPage&&childPage.widgets?childPage.widgets:[];return pageWidgets&&Object.keys(pageWidgets).map(function(pageWidgetId){var pageWidget=pageWidgets[pageWidgetId],childWidgetType="";if("PageDesignerPreview"==pageWidget.name?childWidgetType="Page":"SrsTabs"==pageWidget.name?childWidgetType="Tabs":pageWidget&&pageWidget.props&&1==pageWidget.props.is_container&&(childWidgetType="Container"),childWidgetType)result=deepmerge(result,_this3.getChildWidgetProps(pageWidget,pageWidget.props.PageId,childWidgetType,result));else{var childPageName=childPage.name||pageId;result[childPageName]=result[childPageName]||{};var pageWidgetName=pageWidget.props&&pageWidget.props.Name?pageWidget.props.Name:pageWidget.id,childWidgetProps={};pageWidget.props&&Object.keys(pageWidget.props).map(function(pageWidgetPropName){(pageWidgetPropName=pageWidgetPropName.replace("__Child__","").replace("__Sibling__","").replace("__Dynamic__","").replace("__State__","")).endsWith("__params")||pageWidgetPropName.endsWith("__siblingparams")||pageWidgetPropName.endsWith("_pageparams")||pageWidgetPropName.endsWith("_dynamicparams")||pageWidgetPropName.endsWith("_stateparams")||(childWidgetProps[pageWidgetPropName]=pageWidget.props[pageWidgetPropName])}),result[childPageName][pageWidgetName]=childWidgetProps||{}}}),result}if("Tabs"==widgetType){var tabRelations=JSON.parse(currentWidget.props.tabs);return tabRelations&&tabRelations.map(function(tabRelation,indx){if(tabRelation.tabInfo&&tabRelation.tabInfo.page){var _pageId=tabRelation.tabInfo.page.page_id,pagesuffix=currentWidget.id+indx;result=deepmerge(result,_this3.getChildWidgetProps(currentWidget,_pageId+pagesuffix,"Page",result))}}),result}if("Container"!=widgetType)return result}},{key:"loadWidgetProps",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(forceLoad){var propsMap,elementsToRender,widgetProps,dynamicWidgetProps,pageParamWidgetProps,siblingWidgetProps,childWidgetProps,stateWidgetProps,_loop,i,activeWidget,data,widgetDetails,widgetPropsData,_loop2,currentDynamicParams,currentStateParams,currentWidgetPageParamsProps,choiceList,currentSiblingWidgetParams,nestedChoiceList,nestedLabels,widgetType,currentChildWidgetParams,nestedChildChoiceList,tabRelations,nestedChildLabels,_this4=this;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:for(propsMap={},elementsToRender=[],this.isTabComponent=!1,widgetProps=this.state.widgetProps,dynamicWidgetProps=[],pageParamWidgetProps=[],siblingWidgetProps=[],childWidgetProps=[],stateWidgetProps=[],widgetProps&&Object.keys(widgetProps).length>0&&Object.keys(widgetProps).map(function(widgetPropKey,indx){var nodeName=widgetPropKey,nodeValue=widgetProps[widgetPropKey];if("FieldName"==nodeName){if(propsMap[nodeName]="",nodeValue&&nodeValue.indexOf("@@[")>-1){var propVal=nodeValue.split("@@[")[1];propsMap[nodeName]=propVal.substr(0,propVal.length-1)}}else if(nodeName.startsWith("__Dynamic__")){var dynamicWidgetPropName=nodeName.split("__Dynamic__")[1];dynamicWidgetProps.push({name:dynamicWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__Pageparam__")){var pageParamWidgetPropName=nodeName.split("__Pageparam__")[1];pageParamWidgetProps.push({name:pageParamWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__Sibling__")){var siblingWidgetPropName=nodeName.split("__Sibling__")[1];siblingWidgetProps.push({name:siblingWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__Child__")){var childWidgetPropName=nodeName.split("__Child__")[1];childWidgetProps.push({name:childWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__State__")){var stateWidgetPropName=nodeName.split("__State__")[1];stateWidgetProps.push({name:stateWidgetPropName,value:nodeValue})}else propsMap[nodeName]=nodeValue}),this.props.activeWidget.Component,SrsReference(),_loop=function(i){var node=DEFAULT_PROPS[i],element=React.createElement(Checkbox,{labelText:node.Name,name:node.Name,id:"check-box-"+i,defaultChecked:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(value){var updatedProps=cloneDeep(_this4.props.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}});elementsToRender.push(element)},i=0;i<DEFAULT_PROPS.length;i++)_loop(i);if((activeWidget=this.props.activeWidget)&&0!=Object.keys(activeWidget).length&&activeWidget.Component){_context3.next=22;break}return _context3.next=18,GraphQLDataUtil().getRecord("pd.getSlideSlotWidgetById",{widgetId:this.props.active_widget_id});case 18:data=_context3.sent,widgetDetails={Component:data.Component,Slot:data.Slot},activeWidget=_extends({},widgetDetails,activeWidget),this.updateWidgetProps(activeWidget);case 22:if(!this.state.widgetChanged&&!forceLoad){_context3.next=27;break}return _context3.next=25,GraphQLDataUtil().getRecord("pd.GetComponentProps",{PropsComponent:activeWidget.Component});case 25:widgetPropsData=_context3.sent,this.setState({widgetChanged:!1,widgetPropsData:widgetPropsData,keyValueLists:{}});case 27:if(!(this.state.widgetPropsData&&this.state.widgetPropsData.length>0)){_context3.next=47;break}_loop2=_regeneratorRuntime.mark(function _loop2(i){var node,nodeType,updatePropsWithDefaults,element,currentList,selectItems,schemaTables,_selectItems,attributes,tableName,displayFieldName,secondaryDisplayFieldName,filterStr,RecordReference,recordFilter,NavReference,navFilter,_ComponentReference,_selectItems4,_schemaTables,PageReference,_selectItems5,_tableName,_attributes,widgetName,schemaFields,relatedTableFieldsSelectList,relatedTableName,parentField,allFields,matchingField,relatedFields,relatedTableDisplayField,targetPageIds,_attributes2,_widgetName,pageIdValue,ParamPicker,_loop3,targetPageIdKey,_selectItems6,selectKeyValues,tabWidgetProps,tabs,tabId,_tableName3,_attributes3,_widgetName2,_schemaFields,fieldNames,currentKeyValueList,currentKVList;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(node=_this4.state.widgetPropsData[i].node,nodeType=node.Type,updatePropsWithDefaults=cloneDeep(_this4.state.widgetProps),element=React.createElement(TextInput,{key:node.Name+"_"+_this4.props.active_widget_id,id:node.Name+"_"+_this4.props.active_widget_id,labelText:node.Name,name:node.Name,defaultValue:_this4.state.widgetProps[node.Name]?_this4.state.widgetProps[node.Name]:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,placeholder:node.DefaultValue,onChange:_this4.handleTextChange,onBlur:function(e){var updatedProps=cloneDeep(_this4.state.widgetProps);updatedProps[e.target.name]="Name"==node.Name&&_this4.state.propChanges&&_this4.state.propChanges[e.target.name]?_this4.state.propChanges[e.target.name].replace(/[^a-zA-Z0-9]/g,"_"):_this4.state.propChanges[e.target.name],_this4.updateWidgetProps(updatedProps)}}),"TextArea"==nodeType&&(element=React.createElement(TextArea,{key:node.Name+"_"+_this4.props.active_widget_id,id:node.Name+"_"+_this4.props.active_widget_id,labelText:node.Name,name:node.Name,defaultValue:_this4.state.widgetProps[node.Name]?_this4.state.widgetProps[node.Name]:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,placeholder:node.DefaultValue,onChange:_this4.handleTextChange,onBlur:function(e){var updatedProps=cloneDeep(_this4.state.widgetProps);updatedProps[node.Name]=e.target.value,_this4.updateWidgetProps(updatedProps)}})),"Hidden"==nodeType&&(element=null),"Checkbox"==nodeType&&(element=React.createElement(Checkbox,{key:node.Name+"_"+_this4.props.active_widget_id,labelText:node.Name,name:node.Name,id:node.Name+"_"+_this4.props.active_widget_id,defaultChecked:propsMap.hasOwnProperty(node.Name)?"true"==propsMap[node.Name]||1==propsMap[node.Name]:"true"==node.DefaultValue,onChange:function(value){var wprops=cloneDeep(_this4.state.widgetProps)||{};wprops[node.Name]=value,_this4.updateWidgetProps(wprops)}})),"NestedList"==nodeType&&([],currentList=(currentList=_this4.state.keyValueLists&&_this4.state.keyValueLists[node.Name]?_this4.state.keyValueLists[node.Name]:propsMap[node.Name]?propsMap[node.Name]:[])&&"object"==typeof currentList?JSON.stringify(currentList):currentList||"[]",element=React.createElement("srs-key-value-pair",{varname:node.Name,items:currentList,label:node.Name,placeholder_name:"Name..",placeholder_value:"Value.."})),"TableSelector"==nodeType&&((selectItems=[]).push(React.createElement(SelectItem,{value:"",text:"None"})),(schemaTables=_this4.props.schemaTables||[]).sort(function(a,b){return a==b?0:a>b?1:-1}),schemaTables.map(function(tableName){selectItems.push(React.createElement(SelectItem,{value:tableName,text:tableName}))}),!updatePropsWithDefaults[node.Name]&&forceLoad&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),element=React.createElement(Select,{style:{display:"flex"},labelText:node.Name,onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue},selectItems)),"RecordSelector"==nodeType&&node.Attributes){_selectItems=[],attributes=JSON.parse(node.Attributes),tableName=attributes.tableName,displayFieldName=attributes.displayFieldName,secondaryDisplayFieldName=attributes.secondaryDisplayFieldName,filterStr=attributes.filter,_selectItems.push(React.createElement(SelectItem,{value:"",text:"None"})),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&forceLoad&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),RecordReference=SrsReference(),recordFilter={};try{recordFilter=JSON.parse(filterStr)}catch(err){}element=React.createElement(RecordReference,{style:{display:"flex"},tablename:tableName,displayfield:displayFieldName,secondarydisplayfield:secondaryDisplayFieldName,filter:JSON.stringify(recordFilter),searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})}if("NavSelector"==nodeType&&([].push(React.createElement(SelectItem,{value:"",text:"None"})),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&forceLoad&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),NavReference=SrsReference(),navFilter={where:{and:[{Scope:_this4.props.currentscope},{Parent:null}]}},element=React.createElement(NavReference,{style:{display:"flex"},tablename:"MetaNavigation",displayfield:"Name",secondarydisplayfield:"Scope",filter:JSON.stringify(navFilter),searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})),"ComponentSelector"==nodeType&&([].push(React.createElement(SelectItem,{value:"",text:"None"})),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&forceLoad&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),_ComponentReference=SrsReference(),element=React.createElement(_ComponentReference,{style:{display:"flex"},tablename:"MetaComponent",displayfield:"Name",secondarydisplayfield:"Scope",filter:"",searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})),"PageSelector"==nodeType&&((_selectItems4=[]).push(React.createElement(SelectItem,{value:"",text:"None"})),(_schemaTables=_this4.props.schemaTables||[]).sort(function(a,b){return a==b?0:a>b?1:-1}),_schemaTables.map(function(tableName){_selectItems4.push(React.createElement(SelectItem,{value:tableName,text:tableName}))}),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&forceLoad&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),PageReference=SrsReference(),element=React.createElement(PageReference,{style:{display:"flex"},tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:"",searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})),"FieldSelector"==nodeType&&(_selectItems5=[],_tableName="",node.Attributes&&("Static"==(_attributes=JSON.parse(node.Attributes)).tableType?_tableName=_attributes.value:(widgetName=_attributes.value&&_attributes.value.widgetName,_tableName=_this4.state.widgetProps[widgetName])),_selectItems5.push(React.createElement(SelectItem,{value:"",text:"None"})),(schemaFields=(schemaFields=_this4.props.schemaFields||[])&&schemaFields.filter(function(field,indx){return field.parent==_tableName&&"id"!==field.id}))&&schemaFields.map(function(fieldObj){"field"==fieldObj.type?_selectItems5.push(React.createElement(SelectItem,{value:fieldObj.id,text:fieldObj.text})):"one2one"==fieldObj.type&&_selectItems5.push(React.createElement(SelectItem,{value:fieldObj.id+"@@"+fieldObj.to,text:fieldObj.text}))}),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&forceLoad&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),relatedTableFieldsSelectList=[],relatedTableName="",parentField="",propsMap[node.Name]&&propsMap[node.Name].indexOf(".")>-1&&(parentField=propsMap[node.Name].split(".")[0],propsMap[node.Name].split(".")[1],allFields=_this4.props.schemaFields||[],(matchingField=allFields.filter(function(field,indx){return field.id==parentField&&field.parent==_tableName&&"one2one"==field.type}))&&1==matchingField.length&&(relatedTableName=matchingField[0].to),relatedTableFieldsSelectList.push(React.createElement(SelectItem,{value:"",text:"None"})),(relatedFields=(relatedFields=_this4.props.schemaFields||[])&&relatedFields.filter(function(field,indx){return field.parent==relatedTableName&&"field"==field.type&&"id"!==field.id}))&&relatedFields.map(function(fieldObj){relatedTableFieldsSelectList.push(React.createElement(SelectItem,{value:fieldObj.id,text:fieldObj.text}))})),relatedTableDisplayField=relatedTableName?React.createElement(Select,{style:{display:"flex"},labelText:"Related Field",onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=parentField+"."+value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]&&propsMap[node.Name].indexOf(".")>-1?propsMap[node.Name].split(".")[1]:""},relatedTableFieldsSelectList):null,element=React.createElement(React.Fragment,null,React.createElement(Select,{style:{display:"flex"},labelText:node.Name,onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};value.indexOf("@@")>-1?(value=value.split("@@")[0],updatedProps[node.Name]=value+".uid"):updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]?propsMap[node.Name].indexOf(".")>-1?propsMap[node.Name].split(".")[0]+"@@"+relatedTableName:propsMap[node.Name]:node.DefaultValue?node.DefaultValue:""},_selectItems5),relatedTableDisplayField)),"PageParameter"!=nodeType){_context2.next=27;break}if(targetPageIds={},node.Attributes&&("Static"==(_attributes2=JSON.parse(node.Attributes)).pageType?targetPageIds[_attributes2.value]="Page Parameters":(_widgetName=_attributes2.value&&_attributes2.value.widgetName,(pageIdValue=_this4.state.widgetProps[_widgetName])&&(pageIdValue.indexOf(",")>0?pageIdValue.split(",").map(function(pageIdWidgetName){var currentPageId=_this4.state.widgetProps[pageIdWidgetName.trim()];currentPageId&&(targetPageIds[currentPageId+"_"+pageIdWidgetName.trim()]=pageIdWidgetName.trim())}):targetPageIds[pageIdValue]="Page Parameters"))),ParamPicker=null,!(targetPageIds&&Object.keys(targetPageIds).length>0)){_context2.next=26;break}_loop3=_regeneratorRuntime.mark(function _loop3(targetPageIdKey){var targetPageId,matchingPage,isPageModelDriven,isParentPageModelDriven,currentPageParams,parentPageParams,additionalProps,activePageProps;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return targetPageId=targetPageIdKey.indexOf("_")>-1?targetPageIdKey.split("_")[0]:targetPageIdKey,_context.next=3,$qry.run("mmf.getSlideDetailsById",{uid:targetPageId},"data.slide");case 3:if(!(matchingPage=_context.sent)||!matchingPage.uid){_context.next=21;break}isPageModelDriven="FreeForm"!=matchingPage.Type,isParentPageModelDriven=_this4.props.activePage&&_this4.props.activePage.pageType&&"FreeForm"!=_this4.props.activePage.pageType,currentPageParams=[],isPageModelDriven&&_this4.props.activePage&&_this4.props.activePage.pageType&&"CreateView"!=_this4.props.activePage.pageType&&(currentPageParams=["recordid"]),matchingPage.props&&Object.keys(matchingPage.props).map(function(propId){"ModelName"!=matchingPage.props[propId].Name&&"ModelScope"!=matchingPage.props[propId].Name&&currentPageParams.push(matchingPage.props[propId].Name)}),parentPageParams={},isParentPageModelDriven&&(parentPageParams.recordid="Parent Record"),_this4.props.activePage&&_this4.props.activePage.props&&(additionalProps={},activePageProps=_this4.props.activePage&&_this4.props.activePage.props?_this4.props.activePage.props:{},Object.keys(activePageProps).map(function(activePageProp){"ModelName"!=activePageProp&&"ModelScope"!=activePageProp&&(additionalProps[activePageProp]=activePageProps[activePageProp])}),parentPageParams=Object.assign(parentPageParams,additionalProps)),_context.t0=matchingPage.Type,_context.next="CreateView"===_context.t0?16:"EditView"===_context.t0?16:"FreeForm"===_context.t0?18:20;break;case 16:return currentPageParams&&currentPageParams.length>0&&(ParamPicker=PageParameter(),element=React.createElement(React.Fragment,null,React.createElement("div",{className:"bx--label",style:{display:"flex",marginTop:10,marginLeft:2}},targetPageIds[targetPageIdKey]+" Params"),React.createElement(ParamPicker,{updateProps:function(data){var updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=updatedProps[node.Name]||{},updatedProps[node.Name]="string"==typeof updatedProps[node.Name]?JSON.parse(updatedProps[node.Name]):updatedProps[node.Name],updatedProps[node.Name][targetPageIdKey]=data,_this4.updateWidgetProps(updatedProps)},parentPageParams:parentPageParams,pageId:targetPageId,pageData:_this4.props.pageData,widgetData:_this4.props.widgetData,defaultValue:propsMap[node.Name]&&propsMap[node.Name][targetPageIdKey]?propsMap[node.Name][targetPageIdKey]:node.DefaultValue?node.DefaultValue:"",params:currentPageParams}))),_context.abrupt("break",21);case 18:return currentPageParams&&currentPageParams.length>0&&(ParamPicker=PageParameter(),element=React.createElement(ParamPicker,{updateProps:function(data){var updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=updatedProps[node.Name]||{},updatedProps[node.Name][targetPageIdKey]=data,_this4.updateWidgetProps(updatedProps)},parentPageParams:parentPageParams,pageData:_this4.props.pageData,widgetData:_this4.props.widgetData,defaultValue:propsMap[node.Name]&&propsMap[node.Name][targetPageIdKey]?propsMap[node.Name][targetPageIdKey]:node.DefaultValue?node.DefaultValue:"",params:currentPageParams})),_context.abrupt("break",21);case 20:return _context.abrupt("break",21);case 21:elementsToRender.push(element);case 22:case"end":return _context.stop()}},_loop3,_this4)}),_context2.t0=_regeneratorRuntime.keys(targetPageIds);case 21:if((_context2.t1=_context2.t0()).done){_context2.next=26;break}return targetPageIdKey=_context2.t1.value,_context2.delegateYield(_loop3(targetPageIdKey),"t2",24);case 24:_context2.next=21;break;case 26:element=null;case 27:if("Select"==nodeType&&((_selectItems6=[]).push(React.createElement(SelectItem,{value:"",text:"None"})),"",node.Attributes&&(selectKeyValues=JSON.parse(node.Attributes))&&selectKeyValues.length>0&&selectKeyValues.map(function(selectKeyValue){return _selectItems6.push(React.createElement(SelectItem,{value:selectKeyValue.value,text:selectKeyValue.name}))}),element=React.createElement(Select,{style:{display:"flex"},labelText:node.Name,onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue?node.DefaultValue:""},_selectItems6)),"FieldMap"==nodeType&&(element=React.createElement("entity-mapper",{lite:"true",key:"text-element-"+i,id:"text-element-"+i})),"TabMap"!=nodeType){_context2.next=35;break}return _this4.isTabComponent=!0,tabWidgetProps=cloneDeep(_this4.state.widgetProps)||{},0==(tabs=tabWidgetProps.tabs||[]).length&&(tabId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),tabs.push({tab_id:tabId,tabInfo:{name:"",type:""}}),tabWidgetProps.tabs=JSON.stringify(tabs),_this4.updateWidgetProps(tabWidgetProps)),_context2.abrupt("return","continue");case 35:"KeyFieldList"==nodeType&&([],_tableName3="",node.Attributes&&("Static"==(_attributes3=JSON.parse(node.Attributes)).tableType?_tableName3=_attributes3.value:(_widgetName2=_attributes3.value&&_attributes3.value.widgetName,_tableName3=_this4.state.widgetProps[_widgetName2])),_schemaFields=(_schemaFields=_this4.props.schemaFields||[])&&_schemaFields.filter(function(field,indx){return field.parent==_tableName3&&"id"!==field.id}),fieldNames=[],_schemaFields&&_schemaFields.map(function(schemaField){fieldNames.push({name:schemaField.text,value:schemaField.id})}),currentKeyValueList=(currentKeyValueList=_this4.state.keyValueLists&&_this4.state.keyValueLists[node.Name]?_this4.state.keyValueLists[node.Name]:propsMap[node.Name]?propsMap[node.Name]:[])&&"object"==typeof currentKeyValueList?JSON.stringify(currentKeyValueList):currentKeyValueList||"[]",element=React.createElement("srs-key-value-pair",{varname:node.Name,choices:JSON.stringify({valueList:fieldNames}),items:currentKeyValueList,label:node.Name,placeholder_name:"Prop Name..",placeholder_value:"Field Name"})),"KeyValueList"==nodeType&&([],currentKVList=(currentKVList=_this4.state.keyValueLists&&_this4.state.keyValueLists[node.Name]?_this4.state.keyValueLists[node.Name]:propsMap[node.Name]?propsMap[node.Name]:[])&&"object"==typeof currentKVList?JSON.stringify(currentKVList):currentKVList||"[]",element=React.createElement("srs-key-value-pair",{varname:node.Name,items:currentKVList,label:node.Name,placeholder_name:"Name..",placeholder_value:"Value.."})),element&&elementsToRender.push(element);case 38:case"end":return _context2.stop()}},_loop2,_this4)}),i=0;case 30:if(!(i<this.state.widgetPropsData.length)){_context3.next=38;break}return _context3.delegateYield(_loop2(i),"t0",32);case 32:if("continue"!==_context3.t0){_context3.next=35;break}return _context3.abrupt("continue",35);case 35:i++,_context3.next=30;break;case 38:currentDynamicParams=(currentDynamicParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_dynamicparams"]?this.state.keyValueLists[this.props.active_widget_id+"_dynamicparams"]:dynamicWidgetProps||[])&&"object"==typeof currentDynamicParams?JSON.stringify(currentDynamicParams):currentDynamicParams||"[]",elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_dynamicparams",trim_name:"true",label:"Dynamic Parameters",placeholder_name:"Enter Param Name...",items:currentDynamicParams,placeholder_value:"Enter Default Value..."})),currentStateParams=(currentStateParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_stateparams"]?this.state.keyValueLists[this.props.active_widget_id+"_stateparams"]:stateWidgetProps||[])&&"object"==typeof currentStateParams?JSON.stringify(currentStateParams):currentStateParams||"[]",elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_stateparams",label:"State Parameters",placeholder_name:"Enter Param Name...",trim_name:"true",items:currentStateParams,placeholder_value:"Enter value path..."})),this.props.activePage.props&&Object.keys(this.props.activePage.props).length>0&&(currentWidgetPageParamsProps=(currentWidgetPageParamsProps=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_pageparams"]?this.state.keyValueLists[this.props.active_widget_id+"_pageparams"]:pageParamWidgetProps||[])&&"object"==typeof currentWidgetPageParamsProps?JSON.stringify(currentWidgetPageParamsProps):currentWidgetPageParamsProps||"[]",choiceList=[],Object.keys(this.props.activePage.props).map(function(pageParamName){choiceList.push({name:pageParamName,value:pageParamName})}),elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_pageparams",choices:JSON.stringify({valueList:choiceList}),trim_name:"true",items:currentWidgetPageParamsProps,label:"Page Parameter Subscription",placeholder_name:"Enter Name...",placeholder_value:"Enter Default Value..."}))),this.props.activePage.widgets&&Object.keys(this.props.activePage.widgets).length>1&&(currentSiblingWidgetParams=(currentSiblingWidgetParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_siblingparams"]?this.state.keyValueLists[this.props.active_widget_id+"_siblingparams"]:siblingWidgetProps||[])&&"object"==typeof currentSiblingWidgetParams?JSON.stringify(currentSiblingWidgetParams):currentSiblingWidgetParams||"[]",nestedChoiceList={},nestedLabels={"Widget Name":{"Prop Name":""}},this.props.active_widget_id&&this.props.activePage.widgets&&Object.keys(this.props.activePage.widgets).map(function(widgetId){if(widgetId!=_this4.props.active_widget_id){var siblingWidget=_this4.props.activePage.widgets[widgetId],siblingWidgetName=siblingWidget.props&&siblingWidget.props.Name?siblingWidget.props.Name:widgetId,_siblingWidgetProps={};siblingWidget.props&&Object.keys(siblingWidget.props).map(function(siblingWidgetPropName){(siblingWidgetPropName=siblingWidgetPropName.replace("__Child__","").replace("__Sibling__","").replace("__Dynamic__","")).endsWith("_params")||siblingWidgetPropName.endsWith("_siblingparams")||siblingWidgetPropName.endsWith("_pageparams")||siblingWidgetPropName.endsWith("_dynamicparams")||(_siblingWidgetProps[siblingWidgetPropName]=siblingWidget.props[siblingWidgetPropName]||"")}),nestedChoiceList[siblingWidgetName]=_siblingWidgetProps}}),elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_siblingparams",choices:JSON.stringify({valueList:nestedChoiceList}),trim_name:"true",valuelabels:JSON.stringify(nestedLabels),items:currentSiblingWidgetParams,label:"Sibling Widget Subscription",placeholder_name:"Enter Name...",placeholder_value:"Enter Default Value..."}))),!this.props.activeWidget||"PageDesignerPreview"!=this.props.activeWidget.name&&"SrsTabs"!=this.props.activeWidget.name&&1!=this.props.widgetProps.is_container||(widgetType="","PageDesignerPreview"==this.props.activeWidget.name?widgetType="Page":"SrsTabs"==this.props.activeWidget.name?widgetType="Tabs":1==this.state.widgetProps.is_container&&(widgetType="Container"),widgetType&&(currentChildWidgetParams=(currentChildWidgetParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_childparams"]?this.state.keyValueLists[this.props.active_widget_id+"_childparams"]:childWidgetProps||[])&&"object"==typeof currentChildWidgetParams?JSON.stringify(currentChildWidgetParams):currentChildWidgetParams||"[]",nestedChildChoiceList={},"Page"==widgetType?nestedChildChoiceList=this.getChildWidgetProps(this.props.activeWidget,this.state.widgetProps.PageId,widgetType,nestedChildChoiceList):"Tabs"==widgetType&&(tabRelations=JSON.parse(this.props.activeWidget.props.tabs))&&tabRelations.map(function(tabRelation,indx){if(tabRelation.tabInfo&&tabRelation.tabInfo.page){var pageId=tabRelation.tabInfo.page.page_id,pagesuffix=_this4.props.activeWidget.id+indx;nestedChildChoiceList=_extends({},nestedChildChoiceList,_this4.getChildWidgetProps(_this4.props.activeWidget,pageId+pagesuffix,"Page",nestedChildChoiceList))}}),nestedChildLabels={"Page Name":{"Widget Name":{"Prop Name":""}}},elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_childparams",choices:JSON.stringify({valueList:nestedChildChoiceList}),valuelabels:JSON.stringify(nestedChildLabels),items:currentChildWidgetParams,label:"Child Widget Subscription",placeholder_name:"Enter Name...",placeholder_value:"Enter Default Value..."}))));case 47:this.setState({elementsToRender:elementsToRender,dataLoaded:!0});case 48:case"end":return _context3.stop()}},_callee,this)}));return function(_x){return _ref.apply(this,arguments)}}()},{key:"showTabMappingDialog",value:function(tab){this.props.updateStore({updates:{showpreview:!0,active_tab_id:tab.tab_id}}),this.setState({showPreview:!0,reload:!this.state.reload})}},{key:"closePreviewWindow",value:function(){this.setState({reload:!this.state.reload})}},{key:"handleTabNameChange",value:function(e,tab){var value=e.target.value,tabId=tab.tab_id,updatedProps=this.state.widgetProps||{},tabs=[];tabs="string"==typeof updatedProps.tabs?updatedProps.tabs?JSON.parse(updatedProps.tabs):[]:updatedProps.tabs||[];for(var i=0;i<tabs.length;i++){var _tab=tabs[i];_tab.tab_id==tabId&&(_tab.tabInfo.name=encodeURIComponent(value))}updatedProps.tabs=JSON.stringify(tabs),this.updateWidgetProps(updatedProps)}},{key:"addTab",value:function(){var updatedProps=this.state.widgetProps||{},tabs=[];tabs="string"==typeof updatedProps.tabs?updatedProps.tabs?JSON.parse(updatedProps.tabs):[]:updatedProps.tabs||[];var tabId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)});tabs.push({tab_id:tabId,tabInfo:{name:"",type:"",page_id:"",list:{table:"",fields:[],pagesize:10}}}),updatedProps.tabs=JSON.stringify(tabs),this.updateWidgetProps(updatedProps)}},{key:"removeTab",value:function(tab){var tabId=tab.tab_id,updatedProps=this.state.widgetProps||{},tabs=[];tabs="string"==typeof updatedProps.tabs?updatedProps.tabs?JSON.parse(updatedProps.tabs):[]:updatedProps.tabs||[];for(var tabIndex=0,i=0;i<tabs.length;i++){if(tabs[i].tab_id==tabId){tabIndex=i;break}}tabs.splice(tabIndex,1),updatedProps.tabs=JSON.stringify(tabs),this.updateWidgetProps(updatedProps)}},{key:"getTabs",value:function(){var _this5=this,widgetProps=this.state.widgetProps||{},tabs=[],length=(tabs="string"==typeof widgetProps.tabs?widgetProps.tabs?JSON.parse(widgetProps.tabs):[]:widgetProps.tabs||[]).length,tabsToRender=[],result=null;return tabs.forEach(function(tab,i){var element=React.createElement("div",{className:"tab-create"},React.createElement(TextInput,{placeholder:"Tab Name",value:decodeURIComponent(tab.tabInfo.name),onChange:function(e){_this5.handleTabNameChange(e,tab)}}),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){_this5.removeTab(tab)}}):null,React.createElement(AddAlt20,{onClick:function(){_this5.addTab()}}),React.createElement(Settings32,{style:{marginTop:8,marginLeft:5},onClick:function(){_this5.showTabMappingDialog(tab)}}));tabsToRender.push(element)}),tabsToRender.length>0&&(result=React.createElement(React.Fragment,null," ",React.createElement("label",{class:"bx--label"},"Tabs")," ",tabsToRender)),result}},{key:"render",value:function(){var previewComponent,widgetPropsElements=this.state.elementsToRender;previewComponent=1==this.state.showPreview?React.createElement("preview-component",{target:"designer_props"},React.createElement("show-tab-mapping-dialog",null)):null;var tabs=this.isTabComponent?this.getTabs():null;return this.state.dataLoaded?React.createElement("div",{className:"sr-prop-body"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/PageDesignerProps/Style.css");'),previewComponent,React.createElement("div",{className:"tabs-panel"}," ",tabs," "),widgetPropsElements):React.createElement("div",{className:"dataLoading"},"Loading...")}}]),_PageDesignerProps_}(React.Component),_export("PageDesignerProps",PageDesignerProps=function(props){return _PageDesignerProps_}),_export("PageDesignerProps",PageDesignerProps)}}}),System.register("client/script/studio/PageDesignerUtil.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","client/script/mmf/GraphQLDataUtil.js"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_possibleConstructorReturn,_inherits,_classCallCheck,GraphQLDataUtil,Element,DefaultWidget,PageDesignerUtil;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil}],execute:function(){_export("Element",Element=function Element(widgetid,props,attributes){_classCallCheck(this,Element),this.componentid=widgetid,this.props=props,this.tag=attributes.tagName,this.name=attributes.componentName,this.defaultWidth=attributes.defaultWidth,this.defaultHeight=attributes.defaultHeight,this.minHeight=attributes.minHeight,this.minWidth=attributes.minWidth,this.maxHeight=attributes.maxHeight,this.maxWidth=attributes.maxWidth,this.order=attributes.order}),_export("Element",Element),_export("DefaultWidget",DefaultWidget=function(_Element){function DefaultWidget(widgetid,props,attrs){_classCallCheck(this,DefaultWidget);var _this=_possibleConstructorReturn(this,(DefaultWidget.__proto__||Object.getPrototypeOf(DefaultWidget)).call(this,widgetid,props,attrs));return _this.tag="srs-title",_this.defaultWidth=12,_this.defaultHeight=3,_this.minHeight=0,_this.minWidth=0,_this.maxHeight=80,_this.maxWidth=96,_this}return _inherits(DefaultWidget,Element),DefaultWidget}()),_export("DefaultWidget",DefaultWidget),_export("PageDesignerUtil",PageDesignerUtil={PageDesignerUtil:function(palettesData){var _ref,_ref2;this.palettesData=palettesData,this.bindAllMethods=function(){},this.getSlotsData=function(items,slide){var slotsData=[];return items.forEach(function(item){var slotData={};slotData.xposition=item.x||0,slotData.yposition=item.y||0,slotData.height=item.height||0,slotData.minwidth=item.minWidth||0,slotData.maxwidth=item.maxWidth||0,slotData.minheight=item.minHeight||0,slotData.maxheight=item.maxHeight||0,slotData.resize=0,slotData.move=0,slotData.Slide=slide,slotData.componentId=item.component||"comp-uid-placeholder",slotData.slotId=item.id||0,slotsData.push(slotData)}),slotsData},this.getSlotWidgetData=function(slotRes){var slotWidgetsData=[];return slotRes.forEach(function(slot){var slotWidgetData={};slotWidgetData.Slot=slot.uid,slotWidgetData.Component=slot.componentId,slotWidgetsData.push(slotWidgetData)}),slotWidgetsData},this.getWidgetProsData=function(widgetPropsRes){var widgetPropsData=[];return widgetPropsRes.forEach(function(widget){var widgetProps={};widgetProps.Widget=widget.uid,widgetProps.name="Widget Name",widgetProps.value="Widget Value",widgetPropsData.push(widgetProps)}),widgetPropsData},this.getWidgetData=function(widgetRes){var widgetIds=[];return widgetRes.forEach(function(widget){var idData={};idData.Widget=widget.node&&widget.node.uid,widgetIds.push(idData)}),widgetIds},this.getElementDefintions=function(){var _this2=this,result={};return this.palettesData&&0!=Object.keys(this.palettesData).length?(Object.keys(this.palettesData).map(function(paletteKey,indx){result[paletteKey]={};var paletteItems=_this2.palettesData[paletteKey]?_this2.palettesData[paletteKey].items:[];(paletteItems=paletteItems.sort(function(a,b){return a.Order-b.Order}))&&paletteItems.length>0&&paletteItems.map(function(paletteItem,indx){$ele&&$ele.registerElement(paletteItem.component.Name,paletteItem.component.Scope,paletteItem.component.Type);var attrs={tagName:paletteItem.component.Name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),componentName:paletteItem.component.Name,defaultWidth:paletteItem.DefaultWidth,defaultHeight:paletteItem.DefaultHeight,minHeight:paletteItem.MinHeight,minWidth:paletteItem.MinWidth,maxHeight:paletteItem.MaxHeight,maxWidth:paletteItem.MaxWidth};result[paletteKey][paletteItem.Name]=JSON.stringify(new Element(paletteItem.component.uid,{},attrs))})}),result):{}},this.getDefaultPage=function(){return{name:"Unnamed",page_id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),isNew:!0}},this.deleteSlot=(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(slotId,pageName){var res,slotRes,slotDelRes,widgetRes,widgetId;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,GraphQLDataUtil().getRecord("pd.getMetaSlideByName",{Name:pageName});case 2:if(!(res=_context.sent)||!res.uid){_context.next=24;break}return _context.next=6,GraphQLDataUtil().getRecord("pd.getMetaSlideSlotById",{Slide:res.uid,slotId:slotId});case 6:if(!(slotRes=_context.sent)||!slotRes.uid){_context.next=24;break}return _context.next=10,GraphQLDataUtil().deleteRecord("pd.deleteMetaSlideSlotById",{id:slotRes.uid});case 10:if(!((slotDelRes=_context.sent)&&slotDelRes.count>0)){_context.next=24;break}return _context.next=14,GraphQLDataUtil().getRecord("pd.getSlideSlotWidgetBySlot",{Slot:slotRes.uid});case 14:if(!((widgetRes=_context.sent)&&Object.keys(widgetRes).length>0)){_context.next=24;break}return widgetId=widgetRes.uid,_context.next=19,GraphQLDataUtil().deleteRecord("pd.deleteWidgetsBySlotId",{Slot:slotRes.uid});case 19:if(_context.sent,!widgetId){_context.next=24;break}return _context.next=23,GraphQLDataUtil().deleteRecord("pd.deleteWidgetPropertyByWidgetId",{Widget:widgetId});case 23:_context.sent;case 24:case"end":return _context.stop()}},_callee,this)})),function(_x,_x2){return _ref.apply(this,arguments)}),this.deletePage=(_ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(activePage,pageId){var pageRes,slotIds,widgetIds;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!(activePage&&pageId.length>10)){_context2.next=24;break}return _context2.next=3,GraphQLDataUtil().deleteRecord("pd.deleteMetaSlideById",{id:pageId});case 3:if(!((pageRes=_context2.sent)&&pageRes.count>0)){_context2.next=24;break}return _context2.next=7,GraphQLDataUtil().deleteRecord("pd.deleteMetaSlideProps",{PropsSlide:pageId});case 7:return _context2.sent,slotIds=[],widgetIds=[],Object.keys(activePage.slots).forEach(function(slotId){slotIds.push({id:slotId})}),_context2.next=13,GraphQLDataUtil().deleteMultiple("pd.deleteMetaSlideSlotById",slotIds);case 13:return _context2.sent,Object.keys(activePage.widgets).forEach(function(widetId){widgetIds.push({id:widetId})}),_context2.next=17,GraphQLDataUtil().deleteMultiple("pd.deleteMetaSlideSlotWidgetById",widgetIds);case 17:return _context2.sent,_context2.next=20,GraphQLDataUtil().deleteMultiple("pd.deleteWidgetPropertyByWidgetId",widgetIds);case 20:return _context2.sent,_context2.next=23,GraphQLDataUtil().deleteMultiple("pd.deleteWidgetActionByWidgetId",widgetIds);case 23:_context2.sent;case 24:case"end":return _context2.stop()}},_callee2,this)})),function(_x3,_x4){return _ref2.apply(this,arguments)})}}.PageDesignerUtil),_export("PageDesignerUtil",PageDesignerUtil),_export("default",PageDesignerUtil)}}}),System.register("component/studio/PageDesignerWidget.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/studio/PageDesignerUtil.js","carbon-components-react","@carbon/icons-react/lib/text--align--justify/32","@carbon/icons-react/lib/caret--sort--down/32","@carbon/icons-react/lib/calendar/32","@carbon/icons-react/lib/time/32","@carbon/icons-react/lib/radio-button--checked/32","@carbon/icons-react/lib/checkbox--checked--filled/32","@carbon/icons-react/lib/document--blank/32","@carbon/icons-react/lib/link/32","@carbon/icons-react/lib/page--first/32","@carbon/icons-react/lib/list/32","@carbon/icons-react/lib/image/32","@carbon/icons-react/lib/dashboard/32","@carbon/icons-react/lib/recording/32","@carbon/icons-react/lib/panel-expansion/32","@carbon/icons-react/lib/search/32","@carbon/icons-react/lib/open-panel--filled--left/32","@carbon/icons-react/lib/new-tab/32","@carbon/icons-react/lib/carousel--horizontal/32","@carbon/icons-react/lib/idea/32","@carbon/icons-react/lib/chart--line/32","@carbon/icons-react/lib/code/32"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,PageDesignerUtil,Select,SelectItem,TextArea,SelectIcon,Date,Time,Radio,Checkbox,Toggle,File,Link,Page,List,Image,Board,Loading,NavigateButtons,RecordLookup,SideNav,Tabs,Carousel,Idea,Chart,HTMLCode,_PageDesignerWidget_,PageDesignerWidget,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptStudioPageDesignerUtilJs){PageDesignerUtil=_clientScriptStudioPageDesignerUtilJs.PageDesignerUtil},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_carbonIconsReactLibTextAlignJustify){TextArea=_carbonIconsReactLibTextAlignJustify.default},function(_carbonIconsReactLibCaretSortDown){SelectIcon=_carbonIconsReactLibCaretSortDown.default},function(_carbonIconsReactLibCalendar){Date=_carbonIconsReactLibCalendar.default},function(_carbonIconsReactLibTime){Time=_carbonIconsReactLibTime.default},function(_carbonIconsReactLibRadioButtonChecked){Radio=_carbonIconsReactLibRadioButtonChecked.default},function(_carbonIconsReactLibCheckboxCheckedFilled){Checkbox=_carbonIconsReactLibCheckboxCheckedFilled.default,Toggle=_carbonIconsReactLibCheckboxCheckedFilled.default},function(_carbonIconsReactLibDocumentBlank){File=_carbonIconsReactLibDocumentBlank.default},function(_carbonIconsReactLibLink){Link=_carbonIconsReactLibLink.default},function(_carbonIconsReactLibPageFirst){Page=_carbonIconsReactLibPageFirst.default},function(_carbonIconsReactLibList){List=_carbonIconsReactLibList.default},function(_carbonIconsReactLibImage){Image=_carbonIconsReactLibImage.default},function(_carbonIconsReactLibDashboard){Board=_carbonIconsReactLibDashboard.default},function(_carbonIconsReactLibRecording){Loading=_carbonIconsReactLibRecording.default},function(_carbonIconsReactLibPanelExpansion){NavigateButtons=_carbonIconsReactLibPanelExpansion.default},function(_carbonIconsReactLibSearch){RecordLookup=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibOpenPanelFilledLeft){SideNav=_carbonIconsReactLibOpenPanelFilledLeft.default},function(_carbonIconsReactLibNewTab){Tabs=_carbonIconsReactLibNewTab.default},function(_carbonIconsReactLibCarouselHorizontal){Carousel=_carbonIconsReactLibCarouselHorizontal.default},function(_carbonIconsReactLibIdea){Idea=_carbonIconsReactLibIdea.default},function(_carbonIconsReactLibChartLine){Chart=_carbonIconsReactLibChartLine.default},function(_carbonIconsReactLibCode){HTMLCode=_carbonIconsReactLibCode.default}],execute:function(){_PageDesignerWidget_=function(_React$Component){function _PageDesignerWidget_(props){_classCallCheck(this,_PageDesignerWidget_);var _this=_possibleConstructorReturn(this,(_PageDesignerWidget_.__proto__||Object.getPrototypeOf(_PageDesignerWidget_)).call(this,props));return _this.palettes=props.palettes?JSON.parse(props.palettes):{},_this.orderedPaletteKeys=Object.keys(_this.palettes).sort(function(a,b){return _this.palettes[a].Name==_this.palettes[b].Name?0:_this.palettes[a].Name>_this.palettes[b].Name?1:-1}),_this.state={currentpalette:_this.orderedPaletteKeys.length>0?_this.orderedPaletteKeys[0]:"",reload:!1},_this}return _inherits(_PageDesignerWidget_,_React$Component),_createClass(_PageDesignerWidget_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.palettes,this.props.palettes)||(this.palettes=this.props.palettes?JSON.parse(this.props.palettes):{},this.setState({reload:!this.state.reload}))}},{key:"getPalatteIcon",value:function(key){var palatteIcon=null;switch(key){case"DividerX":palatteIcon=React.createElement("div",{className:"palatte-horizontal-bar"});break;case"DividerY":palatteIcon=React.createElement("div",{className:"palatte-vertical-bar"});break;case"Title":case"Text":palatteIcon=React.createElement("span",{className:"palatte-text-icon"},"Ab");break;case"TextArea":palatteIcon=React.createElement(TextArea,null);break;case"Select":palatteIcon=React.createElement(SelectIcon,{className:"palatte-select-icon"});break;case"Time":palatteIcon=React.createElement(Time,null);break;case"Date":palatteIcon=React.createElement(Date,null);break;case"Radio":palatteIcon=React.createElement(Radio,null);break;case"Number":palatteIcon=React.createElement("span",{className:"palatte-number-icon"},"3.4");break;case"Checkbox":palatteIcon=React.createElement(Checkbox,null);break;case"Toggle":palatteIcon=React.createElement(Toggle,null);break;case"File":palatteIcon=React.createElement(File,null);break;case"Link":palatteIcon=React.createElement(Link,null);break;case"Page":palatteIcon=React.createElement(Page,null);break;case"List":palatteIcon=React.createElement(List,null);break;case"Image":palatteIcon=React.createElement(Image,null);break;case"Board":palatteIcon=React.createElement(Board,null);break;case"Button":palatteIcon=React.createElement("span",{className:"palatte-button-icon"},"B");break;case"Loading":palatteIcon=React.createElement(Loading,null);break;case"NavigateButton":palatteIcon=React.createElement(NavigateButtons,null);break;case"RecordLookup":palatteIcon=React.createElement(RecordLookup,null);break;case"SideNav":palatteIcon=React.createElement(SideNav,null);break;case"Tabs":case"SimpleTabs":palatteIcon=React.createElement(Tabs,null);break;case"Carousel":palatteIcon=React.createElement(Carousel,null);break;case"Chart":palatteIcon=React.createElement(Chart,null);break;case"HtmlCode":palatteIcon=React.createElement(HTMLCode,null);break;default:palatteIcon=React.createElement(Idea,null)}return palatteIcon}},{key:"render",value:function(){var _this2=this,eleDefinitionsPerPalette=new PageDesignerUtil(this.palettes).getElementDefintions(),paletteItemSelect=[];this.orderedPaletteKeys.length>0&&this.orderedPaletteKeys.map(function(paletteKey){_this2.palettes[paletteKey]&&paletteItemSelect.push(React.createElement(SelectItem,{value:_this2.palettes[paletteKey].uid,text:_this2.palettes[paletteKey].Name}))});var paletteItemContents=[],self=this;return Object.keys(eleDefinitionsPerPalette).map(function(paletteId){var eleDefinitions=eleDefinitionsPerPalette[paletteId],paletteItemContent=[];eleDefinitions&&Object.keys(eleDefinitions).length>0&&Object.keys(eleDefinitions).map(function(key){var palatteIcon=self.getPalatteIcon(key);paletteItemContent.push(React.createElement("div",{className:"srs-palatte-item"},React.createElement("div",{className:"palatte-icon"},palatteIcon),React.createElement("div",{className:"grid-stack-item","data-gs-width":eleDefinitions[key].defaultWidget,"data-gs-height":eleDefinitions[key].defaultHeight,"data-element":eleDefinitions[key],"data-gs-min-width":eleDefinitions[key].minWidth,"data-gs-min-height":eleDefinitions[key].minHeight,"data-gs-max-width":eleDefinitions[key].maxWidth,"data-gs-max-height":eleDefinitions[key].maxHeight},React.createElement("div",{className:"grid-stack-item-content widget","data-title":key},key))))}),paletteItemContents.push(React.createElement("div",{style:{display:_this2.state.currentpalette==paletteId?"flex":"none"},className:"srs-palatte-container"},paletteItemContent))}),React.createElement("div",{className:"sr-widget-pane"},React.createElement("style",null,'@import url("component/studio/PageDesignerWidget/Style.css");'),React.createElement(Select,{style:{marginTop:20,marginLeft:50},hideLabel:"true",id:"current_palette",defaultValue:"Form",onChange:function(e){_this2.setState({currentpalette:e.target.value})}},paletteItemSelect),React.createElement("div",{className:"sectionheader gridPalette",style:{marginBottom:30,fontFamily:"cursive",fontSize:"larger",color:"#3C0B0B"}},"Palette"),paletteItemContents&&paletteItemContents.length>0?paletteItemContents:React.createElement("div",null,"Palette is empty!"))}}]),_PageDesignerWidget_}(React.Component),_export("PageDesignerWidget",PageDesignerWidget=function(props){return _PageDesignerWidget_}),_export("PageDesignerWidget",PageDesignerWidget),_export("default",PageDesignerWidget),_export("states",states=[{KeyName:"palettes",AccessPath:"palettes",DefaultValue:'{"palettes": []}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PageRenderer.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.get","lodash.clonedeep","lodash","carbon-components-react","@carbon/icons-react/lib/menu/16"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,_,_PageRenderer_,PageRenderer,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashGet){_lodashGet.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default},function(_carbonComponentsReact){_carbonComponentsReact.Tab,_carbonComponentsReact.Tabs,_carbonComponentsReact.OverflowMenu,_carbonComponentsReact.OverflowMenuItem,_carbonComponentsReact.Tag,_carbonComponentsReact.ComboBox},function(_carbonIconsReactLibMenu){_carbonIconsReactLibMenu.default}],execute:function(){_PageRenderer_=function(_React$Component){function _PageRenderer_(props){_classCallCheck(this,_PageRenderer_);var _this=_possibleConstructorReturn(this,(_PageRenderer_.__proto__||Object.getPrototypeOf(_PageRenderer_)).call(this,props));_this.state={showModal:!1,sideNavOpen:!1,sideNavPin:!1},_this.getUrlQueryParams=_this.getUrlQueryParams.bind(_this);var tables2Cache=["MetaModel","FormTemplate_studio","MetaSlide","MetaBundleMap","FormTheme_studio","ControlTheme_studio"];return location.pathname.startsWith("/coreform")||location.pathname.startsWith("/corelist")||tables2Cache.push("FormActions_studio"),window.$qry&&window.$qry.setCachableScripts([].concat(tables2Cache).concat(["mmf.getSlidesWithPath","mmf.getMatchingRoutes","mmf.getScopes","mmf.getSlideDetailsById","mmf.getSlidePropsById","mmf.getSlideProps"])),_this}return _inherits(_PageRenderer_,_React$Component),_createClass(_PageRenderer_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var pageState,url,urlHistory;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:(pageState=Object.assign({},this.props.pageState)).oneColumn=!1,window.location.pathname.startsWith("/login")||(url=window.location.pathname+(window.location.search?"?"+window.location.search:""),(urlHistory=this.props.urlhistory||[]).push(url),this.props.updateStore({updates:{urlhistory:urlHistory,pageState:pageState,sideNavOpen:this.props.sideNavOpen?this.props.sideNavOpen:"close",sideNavPinned:!!this.props.sideNavPinned}}));case 3:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(prevProps,prevState){if(_.isEqual(prevProps.headerMenuItems,this.props.headerMenuItems)||(this.props.headerMenuItems&&this.props.headerMenuItems.length>0?this.props.updateStore({updates:{sideNavOpen:"open",sideNavPinned:!0}}):this.props.updateStore({updates:{sideNavOpen:"close",sideNavPinned:!1}})),prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"modal_actions"==this.props.showpreview_target&&(this.props.updateStore({updates:{pagemodal:{},showpreview_target:""}}),this.setState({showModal:!1})),prevState.isReady!=this.state.isReady&&1==this.state.isReady){var pageState=cloneDeep(this.props.pageState)||{};pageState.oneColumn=!1,this.props.updateStore({updates:{pageState:pageState}})}if(prevProps.showpreview==this.props.showpreview||this.props.showpreview&&"false"!=this.props.showpreview||"modal_actions"!=this.props.showpreview_target||(this.props.updateStore({updates:{pagemodal:{},showpreview_target:""}}),this.setState({showModal:!1})),!_.isEqual(prevProps.pagemodal,this.props.pagemodal)&&this.props.pagemodal&&Object.keys(this.props.pagemodal).length>0){var modalComponent=this.props.pagemodal.modalcomponent?this.props.pagemodal.modalcomponent:null,modalPageId=this.props.pagemodal.modalpage?this.props.pagemodal.modalpage:null;this.props.pagemodal.modalparams&&this.props.pagemodal.modalparams;if(modalComponent){var modalComponentTag=modalComponent.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),modalComponentProps=modalComponent.componentprops?modalComponent.componentprops:{},pages=this.props.pages;pages[this.props.pageid].widgets=pages[this.props.pageid].widgets||{},pages[this.props.pageid].widgets["pagemodal_"+this.props.pageid]={props:_extends({},modalComponentProps,{TriggerActionOnChange:!0,preview:!0,key:this.props.pagemodal.key,Tag:modalComponentTag,ModalName:this.props.pagemodal.modalname,Output:""})},this.setState({showModal:!0}),this.props.updateStore({updates:{pages:pages,showpreview:!0}})}else modalPageId&&(this.setState({showModal:!0}),this.props.updateStore({updates:{showpreview:!0}}))}}},{key:"getUrlQueryParams",value:function(){for(var urlParams={},match=void 0,pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl," "))},query=window.location.search.substring(1);match=search.exec(query);)decode(match[1])in urlParams?(Array.isArray(urlParams[decode(match[1])])||(urlParams[decode(match[1])]=[urlParams[decode(match[1])]]),urlParams[decode(match[1])].push(decode(match[2]))):urlParams[decode(match[1])]=decode(match[2]);return urlParams}},{key:"render",value:function(){var pageParams=this.props.params?JSON.parse(atob(this.props.params)):{},notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{style_top:"40"}):null,modalPageId=this.props.pagemodal?this.props.pagemodal.modalpage:"",modalParams=this.props.pagemodal?this.props.pagemodal.modalparams:{},modalComponent=this.props.pagemodal.modalcomponent?this.props.pagemodal.modalcomponent:null;if(modalComponent)$ele&&$ele.registerElement(modalComponent.name,modalComponent.scope,modalComponent.type?modalComponent.type:"React");else if(modalPageId)_extends({},this.props.pageState),this.props.pageid,JSON.stringify(modalParams);var modalLayout=this.props.pagemodal?this.props.pagemodal.layout:"",urlQueryParams=this.getUrlQueryParams(),pagemodalWidgetId="pagemodal_"+this.props.pageid,modalComponentTag=modalComponent?modalComponent.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase():"",modalWidgethEl=modalComponent?React.createElement("widget-container",{key:pagemodalWidgetId,nocache:this.props.nocache,preview:"true",tag:modalComponentTag,pageid:this.props.pageid,pagesuffix:"",widgetid:pagemodalWidgetId,className:"widgetContainer",style:{height:"100vh"},shadow:"true"}):null,modalItem=modalComponent?modalWidgethEl:React.createElement("page-designer-preview",{shadow:!0,style:{height:"inherit"},previewpageid:modalPageId,pagesuffix:"_pagemodel",pageid:this.props.pageid,pageparams:JSON.stringify(modalParams),preview:!0,responsive:!0,widgetspacing:!1}),pageModalEl=1==this.state.showModal?React.createElement("preview-component",{layout:modalLayout,target:"modal_actions"},modalItem):null,mainPage=React.createElement("page-designer-preview",{nocache:urlQueryParams.nocache,key:this.props.pageid,shadow:!0,style:{height:"inherit"},previewpageid:this.props.pageid,pagesuffix:"",pageparams:JSON.stringify(pageParams),preview:!0,responsive:!0,widgetspacing:!1,showoverlay:"open"==this.props.sideNavOpen&&!this.props.sideNavPinned});return React.createElement("div",{className:this.props.sideNavPinned&&!window.location.pathname.startsWith("/login")?"showPinnedNav":"showNav"},[pageModalEl,notificationBar,mainPage])}}]),_PageRenderer_}(React.Component),_export("PageRenderer",PageRenderer=function(props){return _PageRenderer_}),_export("PageRenderer",PageRenderer),_export("default",PageRenderer),_export("states",states=[{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": ""}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": ""}'},{KeyName:"headerMenuItems",AccessPath:"header.menuitems",DefaultValue:'{"header": {"menuitems": {}}}'},{KeyName:"pageState",AccessPath:"pagestate.${pageid}",DefaultValue:'{"pagestate": {"${pageid}": {}}}'},{KeyName:"cancelpreview",AccessPath:"cancelpreview",DefaultValue:'{"cancelpreview": "false"}'},{KeyName:"pagemodal",AccessPath:"pagemodal",DefaultValue:'{"pagemodal": {}}'},{KeyName:"sideNavOpen",AccessPath:"sideNavOpen",DefaultValue:'{"sideNavOpen": "open"}'},{KeyName:"notifications",AccessPath:"notifications",DefaultValue:'{"notifications": []}'},{KeyName:"pages",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"pageData",AccessPath:"pages.${pageid}",DefaultValue:'{"pages": {"${pageid}": {}}}'},{KeyName:"urlforward",AccessPath:"urlforward",DefaultValue:'{"urlforward": []}'},{KeyName:"sideNavPinned",AccessPath:"sideNavPinned",DefaultValue:'{"sideNavPinned": true}'},{KeyName:"urlhistory",AccessPath:"urlhistory",DefaultValue:'{"urlhistory": []}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope":  ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PageRenderer/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.get","lodash.clonedeep","lodash","carbon-components-react","@carbon/icons-react/lib/menu/16"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,_,_PageRenderer_,PageRenderer;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashGet){_lodashGet.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default},function(_carbonComponentsReact){_carbonComponentsReact.Tab,_carbonComponentsReact.Tabs,_carbonComponentsReact.OverflowMenu,_carbonComponentsReact.OverflowMenuItem,_carbonComponentsReact.Tag,_carbonComponentsReact.ComboBox},function(_carbonIconsReactLibMenu){_carbonIconsReactLibMenu.default}],execute:function(){_PageRenderer_=function(_React$Component){function _PageRenderer_(props){_classCallCheck(this,_PageRenderer_);var _this=_possibleConstructorReturn(this,(_PageRenderer_.__proto__||Object.getPrototypeOf(_PageRenderer_)).call(this,props));_this.state={showModal:!1,sideNavOpen:!1,sideNavPin:!1},_this.getUrlQueryParams=_this.getUrlQueryParams.bind(_this);var tables2Cache=["MetaModel","FormTemplate_studio","MetaSlide","MetaBundleMap","FormTheme_studio","ControlTheme_studio"];return location.pathname.startsWith("/coreform")||location.pathname.startsWith("/corelist")||tables2Cache.push("FormActions_studio"),window.$qry&&window.$qry.setCachableScripts([].concat(tables2Cache).concat(["mmf.getSlidesWithPath","mmf.getMatchingRoutes","mmf.getScopes","mmf.getSlideDetailsById","mmf.getSlidePropsById","mmf.getSlideProps"])),_this}return _inherits(_PageRenderer_,_React$Component),_createClass(_PageRenderer_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var pageState,url,urlHistory;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:(pageState=Object.assign({},this.props.pageState)).oneColumn=!1,window.location.pathname.startsWith("/login")||(url=window.location.pathname+(window.location.search?"?"+window.location.search:""),(urlHistory=this.props.urlhistory||[]).push(url),this.props.updateStore({updates:{urlhistory:urlHistory,pageState:pageState,sideNavOpen:this.props.sideNavOpen?this.props.sideNavOpen:"close",sideNavPinned:!!this.props.sideNavPinned}}));case 3:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(prevProps,prevState){if(_.isEqual(prevProps.headerMenuItems,this.props.headerMenuItems)||(this.props.headerMenuItems&&this.props.headerMenuItems.length>0?this.props.updateStore({updates:{sideNavOpen:"open",sideNavPinned:!0}}):this.props.updateStore({updates:{sideNavOpen:"close",sideNavPinned:!1}})),prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"modal_actions"==this.props.showpreview_target&&(this.props.updateStore({updates:{pagemodal:{},showpreview_target:""}}),this.setState({showModal:!1})),prevState.isReady!=this.state.isReady&&1==this.state.isReady){var pageState=cloneDeep(this.props.pageState)||{};pageState.oneColumn=!1,this.props.updateStore({updates:{pageState:pageState}})}if(prevProps.showpreview==this.props.showpreview||this.props.showpreview&&"false"!=this.props.showpreview||"modal_actions"!=this.props.showpreview_target||(this.props.updateStore({updates:{pagemodal:{},showpreview_target:""}}),this.setState({showModal:!1})),!_.isEqual(prevProps.pagemodal,this.props.pagemodal)&&this.props.pagemodal&&Object.keys(this.props.pagemodal).length>0){var modalComponent=this.props.pagemodal.modalcomponent?this.props.pagemodal.modalcomponent:null,modalPageId=this.props.pagemodal.modalpage?this.props.pagemodal.modalpage:null;this.props.pagemodal.modalparams&&this.props.pagemodal.modalparams;if(modalComponent){var modalComponentTag=modalComponent.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),modalComponentProps=modalComponent.componentprops?modalComponent.componentprops:{},pages=this.props.pages;pages[this.props.pageid].widgets=pages[this.props.pageid].widgets||{},pages[this.props.pageid].widgets["pagemodal_"+this.props.pageid]={props:_extends({},modalComponentProps,{TriggerActionOnChange:!0,preview:!0,key:this.props.pagemodal.key,Tag:modalComponentTag,ModalName:this.props.pagemodal.modalname,Output:""})},this.setState({showModal:!0}),this.props.updateStore({updates:{pages:pages,showpreview:!0}})}else modalPageId&&(this.setState({showModal:!0}),this.props.updateStore({updates:{showpreview:!0}}))}}},{key:"getUrlQueryParams",value:function(){for(var urlParams={},match=void 0,pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl," "))},query=window.location.search.substring(1);match=search.exec(query);)decode(match[1])in urlParams?(Array.isArray(urlParams[decode(match[1])])||(urlParams[decode(match[1])]=[urlParams[decode(match[1])]]),urlParams[decode(match[1])].push(decode(match[2]))):urlParams[decode(match[1])]=decode(match[2]);return urlParams}},{key:"render",value:function(){var pageParams=this.props.params?JSON.parse(atob(this.props.params)):{},notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{style_top:"40"}):null,modalPageId=this.props.pagemodal?this.props.pagemodal.modalpage:"",modalParams=this.props.pagemodal?this.props.pagemodal.modalparams:{},modalComponent=this.props.pagemodal.modalcomponent?this.props.pagemodal.modalcomponent:null;if(modalComponent)$ele&&$ele.registerElement(modalComponent.name,modalComponent.scope,modalComponent.type?modalComponent.type:"React");else if(modalPageId)_extends({},this.props.pageState),this.props.pageid,JSON.stringify(modalParams);var modalLayout=this.props.pagemodal?this.props.pagemodal.layout:"",urlQueryParams=this.getUrlQueryParams(),pagemodalWidgetId="pagemodal_"+this.props.pageid,modalComponentTag=modalComponent?modalComponent.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase():"",modalWidgethEl=modalComponent?React.createElement("widget-container",{key:pagemodalWidgetId,nocache:this.props.nocache,preview:"true",tag:modalComponentTag,pageid:this.props.pageid,pagesuffix:"",widgetid:pagemodalWidgetId,className:"widgetContainer",style:{height:"100vh"},shadow:"true"}):null,modalItem=modalComponent?modalWidgethEl:React.createElement("page-designer-preview",{shadow:!0,style:{height:"inherit"},previewpageid:modalPageId,pagesuffix:"_pagemodel",pageid:this.props.pageid,pageparams:JSON.stringify(modalParams),preview:!0,responsive:!0,widgetspacing:!1}),pageModalEl=1==this.state.showModal?React.createElement("preview-component",{layout:modalLayout,target:"modal_actions"},modalItem):null,mainPage=React.createElement("page-designer-preview",{nocache:urlQueryParams.nocache,key:this.props.pageid,shadow:!0,style:{height:"inherit"},previewpageid:this.props.pageid,pagesuffix:"",pageparams:JSON.stringify(pageParams),preview:!0,responsive:!0,widgetspacing:!1,showoverlay:"open"==this.props.sideNavOpen&&!this.props.sideNavPinned});return React.createElement("div",{className:this.props.sideNavPinned&&!window.location.pathname.startsWith("/login")?"showPinnedNav":"showNav"},[pageModalEl,notificationBar,mainPage])}}]),_PageRenderer_}(React.Component),_export("PageRenderer",PageRenderer=function(props){return _PageRenderer_}),_export("PageRenderer",PageRenderer)}}}),System.register("component/studio/PlanningBoard.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.get","component/mmf/ComponentWrapper/Definition.js","lodash.clonedeep","lodash.debounce"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,lodashget,ComponentWrapper,debounce,_PlanningBoard_,PlanningBoard,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashGet){lodashget=_lodashGet.default},function(_componentMmfComponentWrapperDefinitionJs){ComponentWrapper=_componentMmfComponentWrapperDefinitionJs.ComponentWrapper},function(_lodashClonedeep){_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){_PlanningBoard_=function(_React$Component){function _PlanningBoard_(props){_classCallCheck(this,_PlanningBoard_);var _this=_possibleConstructorReturn(this,(_PlanningBoard_.__proto__||Object.getPrototypeOf(_PlanningBoard_)).call(this,props));props.shadow&&(window.sd=window.sd||{},window.sd[props.uid]={doc:props.shadow});var data=_this.props.widgetProps&&_this.props.widgetProps.boardData?JSON.parse(_this.props.widgetProps.boardData):null;data=data||(_this.props.boarddata?JSON.parse(_this.props.boarddata):data),_this.state={reload:!1,boardData:data},_this.loadBoardData=_this.loadBoardData.bind(_this),_this.getBoardOperations=_this.getBoardOperations.bind(_this),_this.refreshBoard=_this.refreshBoard.bind(_this),_this.reactTrello=null,_this.updateLanePosition=debounce(function(){$(".smooth-dnd-container.horizontal>.react-trello-lane:first-child",_this.props.shadow).offset().top;var containerOffsetTop=$(".smooth-dnd-container.horizontal",_this.props.shadow).offset().top;$(".smooth-dnd-container.horizontal>.react-trello-lane:first-child",_this.props.shadow).css("top",containerOffsetTop+5)},50),_this.config={};try{_this.config=_this.props.config?JSON.parse(_this.props.config):_this.props.widgetProps&&_this.props.widgetProps.config?JSON.parse(_this.props.widgetProps.config):{}}catch(err){}return _this.defaultValue={lanes:[{id:"todo",title:"Todo",label:"0/0",style:{width:280},cards:[{id:"card1",title:"Do something...",label:"15 mins",description:"Card details"},{id:"card2",title:"Do nothing...",label:"15 mins",description:"Card details"}]},{id:"doing",title:"Doing",label:"0/0",style:{width:280},cards:[{id:"card3",title:"Do everything...",label:"15 mins",description:"Card details"},{id:"card4",title:"Do anything...",label:"15 mins",description:"Card details"}]},{id:"done",title:"Done",label:"0/0",style:{width:280},cards:[]}]},System.import("react-trello").then(function(defaultFn){_this.reactTrello=defaultFn,_this.setState({reload:!_this.state.reload})}),_this}return _inherits(_PlanningBoard_,_React$Component),_createClass(_PlanningBoard_,[{key:"shouldComponentUpdate",value:function(nextProps,nextState){return this.refs.styles&&!this.styles&&(this.styles=this.refs.styles),!(nextProps.scrollfired==this.props.scrollfired&&this.reactTrello&&nextState.reload==this.state.reload&&(!this.props.widgetProps||_.isEqual(this.props.widgetProps,nextProps.widgetProps)))}},{key:"componentDidMount",value:function(){this.refreshBoard({data:!0,laneHeader:!0,laneFooter:!0,addCardLink:!0,card:!0,newCard:!0,newLane:!0})}},{key:"refreshBoard",value:function(reloads){var _this2=this,laneHeaderComponentId=this.props.widgetProps&&this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;(laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null))&&reloads.laneHeader&&$script.getscript("mmf.loadComponent").then(function(_ref){(0,_ref.default)({componentId:laneHeaderComponentId}).then(function(componentData){componentData&&(_this2.laneHeaderComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,keyPropName:"id",config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var laneFooterComponentId=this.props.widgetProps&&this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;(laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null))&&reloads.laneFooter&&$script.getscript("mmf.loadComponent").then(function(_ref2){(0,_ref2.default)({componentId:laneFooterComponentId}).then(function(componentData){componentData&&(_this2.laneFooterComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var cardComponentId=this.props.widgetProps&&this.props.widgetProps.Card?this.props.widgetProps.Card:null;(cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null))&&reloads.card&&$script.getscript("mmf.loadComponent").then(function(_ref3){(0,_ref3.default)({componentId:cardComponentId}).then(function(componentData){componentData&&(_this2.cardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newLaneComponentId=this.props.widgetProps&&this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;(newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null))&&reloads.newLane&&$script.getscript("mmf.loadComponent").then(function(_ref4){(0,_ref4.default)({componentId:newLaneComponentId}).then(function(componentData){componentData&&(_this2.newLaneComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newCardComponentId=this.props.widgetProps&&this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;(newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null))&&reloads.newCard&&$script.getscript("mmf.loadComponent").then(function(_ref5){(0,_ref5.default)({componentId:newCardComponentId}).then(function(componentData){componentData&&(_this2.newCardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var addCardLinkComponentId=this.props.widgetProps&&this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;(addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null))&&reloads.addCardLink&&$script.getscript("mmf.loadComponent").then(function(_ref6){(0,_ref6.default)({componentId:addCardLinkComponentId}).then(function(componentData){componentData&&(_this2.addCardLinkComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config),add_events_on_host:!0},_this2.setState({reload:!_this2.state.reload}))})}),reloads.data&&this.loadBoardData()}},{key:"componentDidUpdate",value:function(prevProps){if(prevProps.scrollfired!=this.props.scrollfired&&this.updateLanePosition(),prevProps.widgetProps&&this.props.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)){var reloads={data:!1,addCardLink:!1,newCard:!1,card:!1,newLane:!1};prevProps.widgetProps.TableName==this.props.widgetProps.TableName&&prevProps.widgetProps.LaneField==this.props.widgetProps.LaneField&&prevProps.widgetProps.BoardFilter==this.props.widgetProps.BoardFilter&&prevProps.widgetProps.FieldMapping==this.props.widgetProps.FieldMapping||(reloads.data=!0),reloads.laneHeader=prevProps.widgetProps.LaneHeader!=this.props.widgetProps.LaneHeader,reloads.laneFooter=prevProps.widgetProps.LaneFooter!=this.props.widgetProps.LaneFooter,reloads.card=prevProps.widgetProps.Card!=this.props.widgetProps.Card,reloads.newCard=prevProps.widgetProps.NewCard!=this.props.widgetProps.NewCard,reloads.addCardLink=prevProps.widgetProps.AddCardLink!=this.props.widgetProps.AddCardLink,reloads.newLane=prevProps.widgetProps.NewLane!=this.props.widgetProps.NewLane,this.refreshBoard(reloads)}}},{key:"loadBoardData",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var _config,tableName,laneField,boardFilter,fieldMapping,reverseFieldMapping,boardData,cardsPerLane,fields,inputParams,self,_this3=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_config=this.config,tableName=_config.tableName,laneField=_config.laneField,boardFilter=_config.boardFilter,fieldMapping=_config.fieldMapping,reverseFieldMapping={},fieldMapping=fieldMapping||[{name:"id",value:"uid"}],tableName&&laneField&&fieldMapping){_context.next=6;break}return this.setState({boardData:this.defaultValue}),_context.abrupt("return");case 6:boardData={lanes:[]},cardsPerLane={},fields=[],fieldMapping.length>0&&fieldMapping.map(function(fieldMapItem,indx){fieldMapItem.name&&fieldMapItem.value&&(-1==fields.indexOf(fieldMapItem.value)&&fields.push(fieldMapItem.value),reverseFieldMapping[fieldMapItem.value]=reverseFieldMapping[fieldMapItem.value]||[],reverseFieldMapping[fieldMapItem.value].push(fieldMapItem.name))}),-1==fields.indexOf("uid")&&fields.push("uid"),-1==fields.indexOf(laneField)&&fields.push(laneField),inputParams={tableName:tableName,fields:fields,filter:boardFilter||{},fieldAliases:null,schema:this.props.schema},self=this,$script.runscript("mmf.getRecords",inputParams).then(function(records){records&&records.map&&records.map(function(recordNode,indx){var record=recordNode.node,card={};record&&Object.keys(record).map(function(recordField,indx){var cardPropNames=reverseFieldMapping[recordField];cardPropNames&&cardPropNames.map(function(cardPropName){card[cardPropName]=record[recordField]}),record.uid&&(card.uid=record.uid,card.id=record.uid)});var laneValue=lodashget(record,laneField);if(laneField.indexOf(".")>-1){var relationName=laneField.split(".")[0];laneValue=laneValue+"@@@@"+lodashget(record,relationName+".uid")}cardsPerLane[laneValue]=cardsPerLane[laneValue]||[],cardsPerLane[laneValue].push(card)}),cardsPerLane&&Object.keys(cardsPerLane).length>0&&Object.keys(cardsPerLane).map(function(laneName,indx){var cards=cardsPerLane[laneName],height=self.props.shadow&&self.props.shadow.host?$(self.props.shadow.host).parent().css("height"):"",style={width:"100rem"};(height=height?parseInt(height.replace("px","")):-1)>-1&&(style.maxHeight=height-20),0==boardData.lanes.length?style.height="3rem":style.height="inherit";var laneId=laneName,laneTitle=laneName;laneName.indexOf("@@@@")>-1&&(laneTitle=laneName.split("@@@@")[0],laneId=laneName.split("@@@@")[1]);var laneObj={id:laneId,title:laneTitle,label:"",style:style,isvertical:0==boardData.lanes.length,laneDropClass:"laneDropping",cards:0==boardData.lanes.length?cards:[]};boardData.lanes.push(laneObj)}),_this3.setState({boardData:boardData})});case 15:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref7.apply(this,arguments)}}()},{key:"getBoardOperations",value:function(){var _this4=this,boardOperations={onCardMoveAcrossLanes:function(srcLaneId,targetLaneId,cardId,addedIndex){_this4.config},onDataChange:function(newData){},onCardClick:function(cardId,metadata,laneId){},onCardAdd:function(card,laneId){},onCardDelete:function(cardId,laneId){},onLaneAdd:function(params){},onLaneDelete:function(laneId){},onLaneUpdate:function(laneId,data){},onLaneClick:function(laneId){}};return boardOperations}},{key:"componentDidUnmount",value:function(){}},{key:"render",value:function(){var cardComponentId=this.props.widgetProps.Card?this.props.widgetProps.Card:null;cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null);var newLaneComponentId=this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null);var newCardComponentId=this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null);var addCardLinkComponentId=this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null);var laneHeaderComponentId=this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null);var laneFooterComponentId=this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null);try{this.config=this.props.config?JSON.parse(this.props.config):this.props.widgetProps&&this.props.widgetProps.config?JSON.parse(this.props.widgetProps.config):{}}catch(err){this.config={}}if(this.config.tableName=this.props.tablename?this.props.tablename:this.props.widgetProps.TableName?this.props.widgetProps.TableName:this.config.tableName,this.config.laneField=this.props.lanefield?this.props.lanefield:this.props.widgetProps.LaneField?this.props.widgetProps.LaneField:this.config.lanefield,this.config.boardFilter=this.props.boardfilter?JSON.parse(this.props.boardfilter):this.props.widgetProps.BoardFilter?this.props.widgetProps.BoardFilter:this.config.boardFilter,this.config.boardFilter=this.config.boardFilter&&"string"==typeof this.config.boardFilter?JSON.parse(this.config.boardFilter):this.config.boardFilter,this.config.fieldMapping=this.props.fieldmapping?JSON.parse(this.props.fieldmapping):this.props.widgetProps.FieldMapping?this.props.widgetProps.FieldMapping:this.config.fieldMapping,this.config.fieldMapping=this.config.fieldMapping&&"string"==typeof this.config.fieldMapping?JSON.parse(this.config.fieldMapping):this.config.fieldMapping,this.config.boardType=this.props.boardtype?this.props.boardtype:this.props.widgetProps.BoardType?this.props.widgetProps.BoardType:this.config.boardType,!this.reactTrello||!this.state.boardData||laneHeaderComponentId&&!this.laneHeaderComponent||laneFooterComponentId&&!this.laneFooterComponent||cardComponentId&&!this.cardComponent||newLaneComponentId&&!this.newLaneComponent||newCardComponentId&&!this.newCardComponent||addCardLinkComponentId&&!this.addCardLinkComponent)return React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});var theme=this.props.widgetProps&&this.props.widgetProps.Theme?this.props.widgetProps.Theme:[{name:"backgroundColor",value:"#6a9f7194"}],styles={};(theme=(theme=theme||this.props.themeprops)&&"string"==typeof theme?JSON.parse(theme):theme)&&theme.length>0&&theme.map(function(themeItem){styles[themeItem.name]=themeItem.value});var laneDraggable="true"==this.props.widgetProps.laneDraggable;laneDraggable=laneDraggable||!this.props.lanedraggable||"true"==this.props.lanedraggable;var cardDraggable="true"==this.props.widgetProps.cardDraggable;cardDraggable=cardDraggable||!this.props.carddraggable||"true"==this.props.carddraggable;var canAddLanes="true"==this.props.widgetProps.cardDraggable;canAddLanes=canAddLanes||!this.props.canaddlanes||"true"==this.props.canaddlanes;var boardProps={laneDraggable:!1,draggable:!1,style:styles,canAddLanes:!1,editable:!1,dropClass:"dropping",dragClass:"dragging",laneDragClass:"laneDragging",laneDropClass:"laneDropping",cardDragClass:"cardDragging",cardDropClass:"cardDropping"};if(cardComponentId){var Card=ComponentWrapper(this.cardComponent);boardProps.components=boardProps.components||{},boardProps.components.Card=Card}if(newLaneComponentId){var NewLane=ComponentWrapper(this.newLaneComponent);boardProps.components=boardProps.components||{},boardProps.components.NewLaneSection=NewLane}if(newCardComponentId){var NewCard=ComponentWrapper(this.newCardComponent);boardProps.components=boardProps.components||{},boardProps.components.NewCardForm=NewCard}if(addCardLinkComponentId){var AddCardLink=ComponentWrapper(this.addCardLinkComponent);boardProps.components=boardProps.components||{},boardProps.components.AddCardLink=AddCardLink}if(laneFooterComponentId){var LaneFooter=ComponentWrapper(this.laneFooterComponent);boardProps.components=boardProps.components||{},boardProps.components.LaneFooter=LaneFooter}if(laneHeaderComponentId){var LaneHeader=ComponentWrapper(this.laneHeaderComponent);boardProps.components=boardProps.components||{},boardProps.components.LaneHeader=LaneHeader}var boardOperations=this.getBoardOperations(),Board=this.reactTrello?this.reactTrello.default:React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});return this.reactTrello?React.createElement("div",{ref:function(e){setTimeout(function(){if($(e).find(".smooth-dnd-container.horizontal")&&1==$(e).find(".smooth-dnd-container.horizontal").length){var height=$(e).find(".smooth-dnd-container.horizontal")[0].getBoundingClientRect().height;$(e).find(".smooth-dnd-container.horizontal>.react-trello-lane:first-child").css("height",height),$(e).find(".smooth-dnd-container.horizontal>.react-trello-lane:first-child>div:first-child").css("height","3rem")}})},className:"Planboard",style:{height:"inherit",overflowY:"hidden"}},React.createElement("style",null,this.styles),React.createElement(Board,_extends({data:this.state.boardData,style:{height:"inherit"},className:"uid_"+this.props.uid+"_uid"},boardProps,boardOperations))):React.createElement("div",null)}}]),_PlanningBoard_}(React.Component),_export("PlanningBoard",PlanningBoard=function(props){return _PlanningBoard_}),_export("PlanningBoard",PlanningBoard),_export("default",PlanningBoard),_export("states",states=[{KeyName:"scrollfired",AccessPath:"scrollfired",DefaultValue:'{"scrollfired": false}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema" : {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PlanningBoard/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.get","component/mmf/ComponentWrapper/Definition.js","lodash.clonedeep","lodash.debounce"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,lodashget,ComponentWrapper,debounce,_PlanningBoard_,PlanningBoard;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashGet){lodashget=_lodashGet.default},function(_componentMmfComponentWrapperDefinitionJs){ComponentWrapper=_componentMmfComponentWrapperDefinitionJs.ComponentWrapper},function(_lodashClonedeep){_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){_PlanningBoard_=function(_React$Component){function _PlanningBoard_(props){_classCallCheck(this,_PlanningBoard_);var _this=_possibleConstructorReturn(this,(_PlanningBoard_.__proto__||Object.getPrototypeOf(_PlanningBoard_)).call(this,props));props.shadow&&(window.sd=window.sd||{},window.sd[props.uid]={doc:props.shadow});var data=_this.props.widgetProps&&_this.props.widgetProps.boardData?JSON.parse(_this.props.widgetProps.boardData):null;data=data||(_this.props.boarddata?JSON.parse(_this.props.boarddata):data),_this.state={reload:!1,boardData:data},_this.loadBoardData=_this.loadBoardData.bind(_this),_this.getBoardOperations=_this.getBoardOperations.bind(_this),_this.refreshBoard=_this.refreshBoard.bind(_this),_this.reactTrello=null,_this.updateLanePosition=debounce(function(){$(".smooth-dnd-container.horizontal>.react-trello-lane:first-child",_this.props.shadow).offset().top;var containerOffsetTop=$(".smooth-dnd-container.horizontal",_this.props.shadow).offset().top;$(".smooth-dnd-container.horizontal>.react-trello-lane:first-child",_this.props.shadow).css("top",containerOffsetTop+5)},50),_this.config={};try{_this.config=_this.props.config?JSON.parse(_this.props.config):_this.props.widgetProps&&_this.props.widgetProps.config?JSON.parse(_this.props.widgetProps.config):{}}catch(err){}return _this.defaultValue={lanes:[{id:"todo",title:"Todo",label:"0/0",style:{width:280},cards:[{id:"card1",title:"Do something...",label:"15 mins",description:"Card details"},{id:"card2",title:"Do nothing...",label:"15 mins",description:"Card details"}]},{id:"doing",title:"Doing",label:"0/0",style:{width:280},cards:[{id:"card3",title:"Do everything...",label:"15 mins",description:"Card details"},{id:"card4",title:"Do anything...",label:"15 mins",description:"Card details"}]},{id:"done",title:"Done",label:"0/0",style:{width:280},cards:[]}]},System.import("react-trello").then(function(defaultFn){_this.reactTrello=defaultFn,_this.setState({reload:!_this.state.reload})}),_this}return _inherits(_PlanningBoard_,_React$Component),_createClass(_PlanningBoard_,[{key:"shouldComponentUpdate",value:function(nextProps,nextState){return this.refs.styles&&!this.styles&&(this.styles=this.refs.styles),!(nextProps.scrollfired==this.props.scrollfired&&this.reactTrello&&nextState.reload==this.state.reload&&(!this.props.widgetProps||_.isEqual(this.props.widgetProps,nextProps.widgetProps)))}},{key:"componentDidMount",value:function(){this.refreshBoard({data:!0,laneHeader:!0,laneFooter:!0,addCardLink:!0,card:!0,newCard:!0,newLane:!0})}},{key:"refreshBoard",value:function(reloads){var _this2=this,laneHeaderComponentId=this.props.widgetProps&&this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;(laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null))&&reloads.laneHeader&&$script.getscript("mmf.loadComponent").then(function(_ref){(0,_ref.default)({componentId:laneHeaderComponentId}).then(function(componentData){componentData&&(_this2.laneHeaderComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,keyPropName:"id",config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var laneFooterComponentId=this.props.widgetProps&&this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;(laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null))&&reloads.laneFooter&&$script.getscript("mmf.loadComponent").then(function(_ref2){(0,_ref2.default)({componentId:laneFooterComponentId}).then(function(componentData){componentData&&(_this2.laneFooterComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var cardComponentId=this.props.widgetProps&&this.props.widgetProps.Card?this.props.widgetProps.Card:null;(cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null))&&reloads.card&&$script.getscript("mmf.loadComponent").then(function(_ref3){(0,_ref3.default)({componentId:cardComponentId}).then(function(componentData){componentData&&(_this2.cardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newLaneComponentId=this.props.widgetProps&&this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;(newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null))&&reloads.newLane&&$script.getscript("mmf.loadComponent").then(function(_ref4){(0,_ref4.default)({componentId:newLaneComponentId}).then(function(componentData){componentData&&(_this2.newLaneComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newCardComponentId=this.props.widgetProps&&this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;(newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null))&&reloads.newCard&&$script.getscript("mmf.loadComponent").then(function(_ref5){(0,_ref5.default)({componentId:newCardComponentId}).then(function(componentData){componentData&&(_this2.newCardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var addCardLinkComponentId=this.props.widgetProps&&this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;(addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null))&&reloads.addCardLink&&$script.getscript("mmf.loadComponent").then(function(_ref6){(0,_ref6.default)({componentId:addCardLinkComponentId}).then(function(componentData){componentData&&(_this2.addCardLinkComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config),add_events_on_host:!0},_this2.setState({reload:!_this2.state.reload}))})}),reloads.data&&this.loadBoardData()}},{key:"componentDidUpdate",value:function(prevProps){if(prevProps.scrollfired!=this.props.scrollfired&&this.updateLanePosition(),prevProps.widgetProps&&this.props.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)){var reloads={data:!1,addCardLink:!1,newCard:!1,card:!1,newLane:!1};prevProps.widgetProps.TableName==this.props.widgetProps.TableName&&prevProps.widgetProps.LaneField==this.props.widgetProps.LaneField&&prevProps.widgetProps.BoardFilter==this.props.widgetProps.BoardFilter&&prevProps.widgetProps.FieldMapping==this.props.widgetProps.FieldMapping||(reloads.data=!0),reloads.laneHeader=prevProps.widgetProps.LaneHeader!=this.props.widgetProps.LaneHeader,reloads.laneFooter=prevProps.widgetProps.LaneFooter!=this.props.widgetProps.LaneFooter,reloads.card=prevProps.widgetProps.Card!=this.props.widgetProps.Card,reloads.newCard=prevProps.widgetProps.NewCard!=this.props.widgetProps.NewCard,reloads.addCardLink=prevProps.widgetProps.AddCardLink!=this.props.widgetProps.AddCardLink,reloads.newLane=prevProps.widgetProps.NewLane!=this.props.widgetProps.NewLane,this.refreshBoard(reloads)}}},{key:"loadBoardData",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var _config,tableName,laneField,boardFilter,fieldMapping,reverseFieldMapping,boardData,cardsPerLane,fields,inputParams,self,_this3=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_config=this.config,tableName=_config.tableName,laneField=_config.laneField,boardFilter=_config.boardFilter,fieldMapping=_config.fieldMapping,reverseFieldMapping={},fieldMapping=fieldMapping||[{name:"id",value:"uid"}],tableName&&laneField&&fieldMapping){_context.next=6;break}return this.setState({boardData:this.defaultValue}),_context.abrupt("return");case 6:boardData={lanes:[]},cardsPerLane={},fields=[],fieldMapping.length>0&&fieldMapping.map(function(fieldMapItem,indx){fieldMapItem.name&&fieldMapItem.value&&(-1==fields.indexOf(fieldMapItem.value)&&fields.push(fieldMapItem.value),reverseFieldMapping[fieldMapItem.value]=reverseFieldMapping[fieldMapItem.value]||[],reverseFieldMapping[fieldMapItem.value].push(fieldMapItem.name))}),-1==fields.indexOf("uid")&&fields.push("uid"),-1==fields.indexOf(laneField)&&fields.push(laneField),inputParams={tableName:tableName,fields:fields,filter:boardFilter||{},fieldAliases:null,schema:this.props.schema},self=this,$script.runscript("mmf.getRecords",inputParams).then(function(records){records&&records.map&&records.map(function(recordNode,indx){var record=recordNode.node,card={};record&&Object.keys(record).map(function(recordField,indx){var cardPropNames=reverseFieldMapping[recordField];cardPropNames&&cardPropNames.map(function(cardPropName){card[cardPropName]=record[recordField]}),record.uid&&(card.uid=record.uid,card.id=record.uid)});var laneValue=lodashget(record,laneField);if(laneField.indexOf(".")>-1){var relationName=laneField.split(".")[0];laneValue=laneValue+"@@@@"+lodashget(record,relationName+".uid")}cardsPerLane[laneValue]=cardsPerLane[laneValue]||[],cardsPerLane[laneValue].push(card)}),cardsPerLane&&Object.keys(cardsPerLane).length>0&&Object.keys(cardsPerLane).map(function(laneName,indx){var cards=cardsPerLane[laneName],height=self.props.shadow&&self.props.shadow.host?$(self.props.shadow.host).parent().css("height"):"",style={width:"100rem"};(height=height?parseInt(height.replace("px","")):-1)>-1&&(style.maxHeight=height-20),0==boardData.lanes.length?style.height="3rem":style.height="inherit";var laneId=laneName,laneTitle=laneName;laneName.indexOf("@@@@")>-1&&(laneTitle=laneName.split("@@@@")[0],laneId=laneName.split("@@@@")[1]);var laneObj={id:laneId,title:laneTitle,label:"",style:style,isvertical:0==boardData.lanes.length,laneDropClass:"laneDropping",cards:0==boardData.lanes.length?cards:[]};boardData.lanes.push(laneObj)}),_this3.setState({boardData:boardData})});case 15:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref7.apply(this,arguments)}}()},{key:"getBoardOperations",value:function(){var _this4=this,boardOperations={onCardMoveAcrossLanes:function(srcLaneId,targetLaneId,cardId,addedIndex){_this4.config},onDataChange:function(newData){},onCardClick:function(cardId,metadata,laneId){},onCardAdd:function(card,laneId){},onCardDelete:function(cardId,laneId){},onLaneAdd:function(params){},onLaneDelete:function(laneId){},onLaneUpdate:function(laneId,data){},onLaneClick:function(laneId){}};return boardOperations}},{key:"componentDidUnmount",value:function(){}},{key:"render",value:function(){var cardComponentId=this.props.widgetProps.Card?this.props.widgetProps.Card:null;cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null);var newLaneComponentId=this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null);var newCardComponentId=this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null);var addCardLinkComponentId=this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null);var laneHeaderComponentId=this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null);var laneFooterComponentId=this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null);try{this.config=this.props.config?JSON.parse(this.props.config):this.props.widgetProps&&this.props.widgetProps.config?JSON.parse(this.props.widgetProps.config):{}}catch(err){this.config={}}if(this.config.tableName=this.props.tablename?this.props.tablename:this.props.widgetProps.TableName?this.props.widgetProps.TableName:this.config.tableName,this.config.laneField=this.props.lanefield?this.props.lanefield:this.props.widgetProps.LaneField?this.props.widgetProps.LaneField:this.config.lanefield,this.config.boardFilter=this.props.boardfilter?JSON.parse(this.props.boardfilter):this.props.widgetProps.BoardFilter?this.props.widgetProps.BoardFilter:this.config.boardFilter,this.config.boardFilter=this.config.boardFilter&&"string"==typeof this.config.boardFilter?JSON.parse(this.config.boardFilter):this.config.boardFilter,this.config.fieldMapping=this.props.fieldmapping?JSON.parse(this.props.fieldmapping):this.props.widgetProps.FieldMapping?this.props.widgetProps.FieldMapping:this.config.fieldMapping,this.config.fieldMapping=this.config.fieldMapping&&"string"==typeof this.config.fieldMapping?JSON.parse(this.config.fieldMapping):this.config.fieldMapping,this.config.boardType=this.props.boardtype?this.props.boardtype:this.props.widgetProps.BoardType?this.props.widgetProps.BoardType:this.config.boardType,!this.reactTrello||!this.state.boardData||laneHeaderComponentId&&!this.laneHeaderComponent||laneFooterComponentId&&!this.laneFooterComponent||cardComponentId&&!this.cardComponent||newLaneComponentId&&!this.newLaneComponent||newCardComponentId&&!this.newCardComponent||addCardLinkComponentId&&!this.addCardLinkComponent)return React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});var theme=this.props.widgetProps&&this.props.widgetProps.Theme?this.props.widgetProps.Theme:[{name:"backgroundColor",value:"#6a9f7194"}],styles={};(theme=(theme=theme||this.props.themeprops)&&"string"==typeof theme?JSON.parse(theme):theme)&&theme.length>0&&theme.map(function(themeItem){styles[themeItem.name]=themeItem.value});var laneDraggable="true"==this.props.widgetProps.laneDraggable;laneDraggable=laneDraggable||!this.props.lanedraggable||"true"==this.props.lanedraggable;var cardDraggable="true"==this.props.widgetProps.cardDraggable;cardDraggable=cardDraggable||!this.props.carddraggable||"true"==this.props.carddraggable;var canAddLanes="true"==this.props.widgetProps.cardDraggable;canAddLanes=canAddLanes||!this.props.canaddlanes||"true"==this.props.canaddlanes;var boardProps={laneDraggable:!1,draggable:!1,style:styles,canAddLanes:!1,editable:!1,dropClass:"dropping",dragClass:"dragging",laneDragClass:"laneDragging",laneDropClass:"laneDropping",cardDragClass:"cardDragging",cardDropClass:"cardDropping"};if(cardComponentId){var Card=ComponentWrapper(this.cardComponent);boardProps.components=boardProps.components||{},boardProps.components.Card=Card}if(newLaneComponentId){var NewLane=ComponentWrapper(this.newLaneComponent);boardProps.components=boardProps.components||{},boardProps.components.NewLaneSection=NewLane}if(newCardComponentId){var NewCard=ComponentWrapper(this.newCardComponent);boardProps.components=boardProps.components||{},boardProps.components.NewCardForm=NewCard}if(addCardLinkComponentId){var AddCardLink=ComponentWrapper(this.addCardLinkComponent);boardProps.components=boardProps.components||{},boardProps.components.AddCardLink=AddCardLink}if(laneFooterComponentId){var LaneFooter=ComponentWrapper(this.laneFooterComponent);boardProps.components=boardProps.components||{},boardProps.components.LaneFooter=LaneFooter}if(laneHeaderComponentId){var LaneHeader=ComponentWrapper(this.laneHeaderComponent);boardProps.components=boardProps.components||{},boardProps.components.LaneHeader=LaneHeader}var boardOperations=this.getBoardOperations(),Board=this.reactTrello?this.reactTrello.default:React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});return this.reactTrello?React.createElement("div",{ref:function(e){setTimeout(function(){if($(e).find(".smooth-dnd-container.horizontal")&&1==$(e).find(".smooth-dnd-container.horizontal").length){var height=$(e).find(".smooth-dnd-container.horizontal")[0].getBoundingClientRect().height;$(e).find(".smooth-dnd-container.horizontal>.react-trello-lane:first-child").css("height",height),$(e).find(".smooth-dnd-container.horizontal>.react-trello-lane:first-child>div:first-child").css("height","3rem")}})},className:"Planboard",style:{height:"inherit",overflowY:"hidden"}},React.createElement("style",null,this.styles),React.createElement(Board,_extends({data:this.state.boardData,style:{height:"inherit"},className:"uid_"+this.props.uid+"_uid"},boardProps,boardOperations))):React.createElement("div",null)}}]),_PlanningBoard_}(React.Component),_export("PlanningBoard",PlanningBoard=function(props){return _PlanningBoard_}),_export("PlanningBoard",PlanningBoard)}}}),System.register("component/studio/PlanningBoardLaneHeader.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_PlanningBoardLaneHeader_,PlanningBoardLaneHeader,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_PlanningBoardLaneHeader_=function(_React$Component){function _PlanningBoardLaneHeader_(props){return _classCallCheck(this,_PlanningBoardLaneHeader_),_possibleConstructorReturn(this,(_PlanningBoardLaneHeader_.__proto__||Object.getPrototypeOf(_PlanningBoardLaneHeader_)).call(this,props))}return _inherits(_PlanningBoardLaneHeader_,_React$Component),_createClass(_PlanningBoardLaneHeader_,[{key:"render",value:function(){return!!this.props.isvertical&&("string"==typeof this.props.isvertical?Boolean("true"==this.props.isvertical):!!this.props.isvertical)?React.createElement("div",{style:{height:"3rem",display:"flex"}},React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Name"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Category"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Estimates")):React.createElement("div",{style:{height:"inherit",display:"flex",alignItems:"center"}},React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"20%"}},"Team1"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Capacity: 34"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"40%",display:"inline-flex",height:"inherit",alignItems:"center"}},React.createElement("div",{style:{width:"60%",height:"30%",backgroundColor:"darkblue"}}),React.createElement("div",{style:{width:"60%",height:"30%",backgroundColor:"pink"}})))}}]),_PlanningBoardLaneHeader_}(React.Component),_export("PlanningBoardLaneHeader",PlanningBoardLaneHeader=function(props){return _PlanningBoardLaneHeader_}),_export("PlanningBoardLaneHeader",PlanningBoardLaneHeader),_export("default",PlanningBoardLaneHeader),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PlanningBoardLaneHeader/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_PlanningBoardLaneHeader_,PlanningBoardLaneHeader;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_PlanningBoardLaneHeader_=function(_React$Component){function _PlanningBoardLaneHeader_(props){return _classCallCheck(this,_PlanningBoardLaneHeader_),_possibleConstructorReturn(this,(_PlanningBoardLaneHeader_.__proto__||Object.getPrototypeOf(_PlanningBoardLaneHeader_)).call(this,props))}return _inherits(_PlanningBoardLaneHeader_,_React$Component),_createClass(_PlanningBoardLaneHeader_,[{key:"render",value:function(){return!!this.props.isvertical&&("string"==typeof this.props.isvertical?Boolean("true"==this.props.isvertical):!!this.props.isvertical)?React.createElement("div",{style:{height:"3rem",display:"flex"}},React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Name"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Category"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Estimates")):React.createElement("div",{style:{height:"inherit",display:"flex",alignItems:"center"}},React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"20%"}},"Team1"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Capacity: 34"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"40%",display:"inline-flex",height:"inherit",alignItems:"center"}},React.createElement("div",{style:{width:"60%",height:"30%",backgroundColor:"darkblue"}}),React.createElement("div",{style:{width:"60%",height:"30%",backgroundColor:"pink"}})))}}]),_PlanningBoardLaneHeader_}(React.Component),_export("PlanningBoardLaneHeader",PlanningBoardLaneHeader=function(props){return _PlanningBoardLaneHeader_}),_export("PlanningBoardLaneHeader",PlanningBoardLaneHeader)}}}),System.register("component/studio/PreviewComponent.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/close/32","component/studio/ErrorBoundary/Definition.js"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Close32,ErrorBoundary,_PreviewComponent_,PreviewComponent,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary}],execute:function(){_PreviewComponent_=function(_React$Component){function _PreviewComponent_(props){_classCallCheck(this,_PreviewComponent_);var _this=_possibleConstructorReturn(this,(_PreviewComponent_.__proto__||Object.getPrototypeOf(_PreviewComponent_)).call(this,props));return _this.getPreviewPane=_this.getPreviewPane.bind(_this),_this.getComponentToRender=_this.getComponentToRender.bind(_this),_this.cancelPreview=_this.cancelPreview.bind(_this),_this.showPreview=_this.showPreview.bind(_this),_this.hidePreview=_this.hidePreview.bind(_this),_this.state={reload:!1},_this.previewPaneStyle={position:"fixed",top:"16%",left:"20%",backgroundColor:"white",zIndex:9999,marginTop:5,border:"1px solid #848484",padding:5,width:"60%",height:"60%",overflow:"scroll"},_this.screenOverlayStyle={position:"fixed",backgroundColor:"#000000",opacity:.5,zIndex:9999,top:0,left:0,height:2e3,width:2e3},_this.cancelPreviewStyle={position:"fixed",zIndex:99999,backgroundColor:"white",top:"15%",float:"right",border:"1px solid black",borderRadius:"50%",right:"19%",color:"black"},_this}return _inherits(_PreviewComponent_,_React$Component),_createClass(_PreviewComponent_,[{key:"componentDidMount",value:function(){this.showPreview()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showpreview!=this.props.showpreview&&this.setState({reload:!this.state.reload}),this.props.cancelpreview+""=="true"&&this.cancelPreview()}},{key:"showPreview",value:function(){this.props.updateStore&&!this.props.showpreview&&this.props.updateStore({updates:{showpreview:!0,cancelpreview:!1}})}},{key:"hidePreview",value:function(){this.props.updateStore&&this.props.updateStore({updates:{showpreview:"false",showpreview_target:this.props.target,ide_reload:!this.props.ide_reload,cancelpreview:!1}})}},{key:"getComponentToRender",value:function(){return React.createElement("div",{key:this.props.key,style:this.previewPaneStyle},React.createElement("slot",null))}},{key:"getPreviewPane",value:function(){var content2Preview=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(content2Preview);return React.createElement("div",null,React.createElement("div",{style:this.screenOverlayStyle}),React.createElement(Close32,{className:"cancelPreview",style:this.cancelPreviewStyle,onClick:this.cancelPreview}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.hidePreview()}},{key:"render",value:function(){var size=this.props.layout||this.props.size;"large"!=size&&"center-large"!=size||(this.cancelPreviewStyle=_extends({},this.cancelPreviewStyle,{top:"9%",right:"9%"}),this.previewPaneStyle=_extends({},this.previewPaneStyle,{top:"10%",left:"10%",width:"80%",height:"80%"})),"xl"!=size&&"center-xl"!=size||(this.cancelPreviewStyle=_extends({},this.cancelPreviewStyle,{top:"3rem",right:"1%"}),this.previewPaneStyle=_extends({},this.previewPaneStyle,{top:"3.5rem",left:"2%",width:"96%",height:"95%"})),"right-large"==size&&(this.cancelPreviewStyle=_extends({},this.cancelPreviewStyle,{top:"3rem",right:"29%"}),this.previewPaneStyle=_extends({},this.previewPaneStyle,{left:"unset",top:"3rem",right:"0%",width:"30%",height:"96%"})),"right-xl"==size&&(this.cancelPreviewStyle=_extends({},this.cancelPreviewStyle,{top:"3rem",right:"59%"}),this.previewPaneStyle=_extends({},this.previewPaneStyle,{left:"unset",top:"3rem",right:"0%",width:"60%",height:"96%"})),"left-large"==size&&(this.cancelPreviewStyle=_extends({},this.cancelPreviewStyle,{top:"3rem",left:"29%"}),this.previewPaneStyle=_extends({},this.previewPaneStyle,{right:"unset",top:"3rem",left:"0%",width:"30%",height:"96%"})),"left-xl"==size&&(this.cancelPreviewStyle=_extends({},this.cancelPreviewStyle,{top:"3rem",left:"59%"}),this.previewPaneStyle=_extends({},this.previewPaneStyle,{right:"unset",top:"3rem",left:"0%",width:"60%",height:"96%"})),1!=this.props.quickpreview&&"true"!=this.props.quickpreview||(this.previewPaneStyle=_extends({},this.previewPaneStyle,{backgroundColor:"#916194"}));var previewContent=this.getPreviewPane(),notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",null):null;return 1==this.props.showpreview||"true"==this.props.showpreview?React.createElement("div",null,notificationBar,previewContent):null}}]),_PreviewComponent_}(React.Component),_export("PreviewComponent",PreviewComponent=function(props){return _PreviewComponent_}),_export("PreviewComponent",PreviewComponent),_export("default",PreviewComponent),_export("states",states=[{KeyName:"ide_reload",AccessPath:"ide_reload",DefaultValue:'{"ide_reload": false}'},{KeyName:"cancelpreview",AccessPath:"cancelpreview",DefaultValue:'{"cancelpreview": "false"}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": "false"}'},{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PreviewErrorPage.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_PreviewErrorPage,PreviewErrorPage,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_PreviewErrorPage=function(_React$Component){function _PreviewErrorPage(props,context){_classCallCheck(this,_PreviewErrorPage);var _this=_possibleConstructorReturn(this,(_PreviewErrorPage.__proto__||Object.getPrototypeOf(_PreviewErrorPage)).call(this,props));return _this.state={hasError:!1,error:""},_this}return _inherits(_PreviewErrorPage,_React$Component),_createClass(_PreviewErrorPage,[{key:"componentDidCatch",value:function(error,info){console.log("Error occurred - "+error),this.setState({hasError:!0,error:error})}},{key:"render",value:function(){return this.state.hasError?React.createElement("div",null,React.createElement("h2",null,"Something went wrong!"),this.state.error):this.props.children}}]),_PreviewErrorPage}(React.Component),_export("PreviewErrorPage",PreviewErrorPage=function(props){return _PreviewErrorPage}),_export("PreviewErrorPage",PreviewErrorPage),_export("default",PreviewErrorPage),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PreviewErrorPage/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_PreviewErrorPage,PreviewErrorPage;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_PreviewErrorPage=function(_React$Component){function _PreviewErrorPage(props,context){_classCallCheck(this,_PreviewErrorPage);var _this=_possibleConstructorReturn(this,(_PreviewErrorPage.__proto__||Object.getPrototypeOf(_PreviewErrorPage)).call(this,props));return _this.state={hasError:!1,error:""},_this}return _inherits(_PreviewErrorPage,_React$Component),_createClass(_PreviewErrorPage,[{key:"componentDidCatch",value:function(error,info){console.log("Error occurred - "+error),this.setState({hasError:!0,error:error})}},{key:"render",value:function(){return this.state.hasError?React.createElement("div",null,React.createElement("h2",null,"Something went wrong!"),this.state.error):this.props.children}}]),_PreviewErrorPage}(React.Component),_export("PreviewErrorPage",PreviewErrorPage=function(props){return _PreviewErrorPage}),_export("PreviewErrorPage",PreviewErrorPage)}}}),System.register("component/studio/RenderComponent.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_RenderComponent_,RenderComponent,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_RenderComponent_=function(_React$Component){function _RenderComponent_(props){_classCallCheck(this,_RenderComponent_);var _this=_possibleConstructorReturn(this,(_RenderComponent_.__proto__||Object.getPrototypeOf(_RenderComponent_)).call(this,props)),componentName=_this.props.widgetProps&&_this.props.widgetProps.ComponentName?_this.props.widgetProps.ComponentName:_this.props.name?_this.props.name:"",componentTag=componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),componentScope=_this.props.widgetProps&&_this.props.widgetProps.ComponentScope?_this.props.widgetProps.ComponentScope:_this.props.scope?_this.props.scope:"",params=_this.props.widgetProps&&_this.props.widgetProps.ComponentParameters?_this.props.widgetProps.ComponentParameters:_this.props.params?_this.props.params:{};try{params=params&&"string"==typeof params?JSON.parse(params):params}catch(err){}return _this.state={componentTag:componentTag,componentName:componentName,componentScope:componentScope,params:params,isReady:!1},_this}return _inherits(_RenderComponent_,_React$Component),_createClass(_RenderComponent_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if("WorkflowModeler"!=this.state.componentName){_context.next=3;break}return _context.next=3,System.import("https://unpkg.com/srstecdn@latest/bpmn/bpmn.js");case 3:return _context.next=5,$ele.registerElement(this.state.componentName,this.state.componentScope);case 5:if("PageDesigner"!=this.state.componentName){_context.next=20;break}return _context.next=8,$ele.registerElement("PageDesignerGeneral","studio");case 8:return _context.next=10,$ele.registerElement("PageDesignerProps","studio");case 10:return _context.next=12,$ele.registerElement("PageDesignerWidget","studio");case 12:return _context.next=14,$ele.registerElement("PageDesignerPreview","studio");case 14:return _context.next=16,$ele.registerElement("PageDesignerActions","studio");case 16:return _context.next=18,$ele.registerElement("SlideSelectionPanel","studio");case 18:return _context.next=20,$ele.registerElement("EntityMapper","studio");case 20:this.setState({isReady:!0});case 21:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(prevProps){var params=this.props.widgetProps&&this.props.widgetProps.ComponentParameters?this.props.widgetProps.ComponentParameters:this.props.params?this.props.params:{},prevParams=prevProps.widgetProps&&prevProps.widgetProps.ComponentParameters?prevProps.widgetProps.ComponentParameters:prevProps.params?prevProps.params:{};try{params=params&&"string"==typeof params?JSON.parse(params):params,prevParams=prevParams&&"string"==typeof prevParams?JSON.parse(prevParams):prevParams}catch(err){}if(this.props.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)||prevProps.name+""!=this.props.name+""||prevProps.scope+""!=this.props.scope+""||!_.isEqual(prevParams,params)){var componentName=this.props.widgetProps&&this.props.widgetProps.ComponentName?this.props.widgetProps.ComponentName:this.props.name?this.props.name:"",componentTag=componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),componentScope=this.props.widgetProps&&this.props.widgetProps.ComponentScope?this.props.widgetProps.ComponentScope:this.props.scope?this.props.scope:"";this.setState({componentTag:componentTag,componentName:componentName,componentScope:componentScope,params:params})}}},{key:"render",value:function(){_extends({},this.state.params,{shadow:!0});var elementToRender=this.state.isReady&&this.state.componentTag?React.createElement(this.state.componentTag,_extends({},this.state.params,{shadow:!0,key:this.props.keyname})):null;return React.createElement("div",{style:{height:"inherit",textAlign:"left"}},elementToRender)}}]),_RenderComponent_}(React.Component),_export("RenderComponent",RenderComponent=function(props){return _RenderComponent_}),_export("RenderComponent",RenderComponent),_export("default",RenderComponent),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/RenderIcon.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_RenderIcon_,RenderIcon,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_RenderIcon_=function(_React$Component){function _RenderIcon_(props){_classCallCheck(this,_RenderIcon_);var _this=_possibleConstructorReturn(this,(_RenderIcon_.__proto__||Object.getPrototypeOf(_RenderIcon_)).call(this,props));return _this.state={reload:!1,defaultIconURL:"@carbon/icons-react/lib/apps/16.js",iconURL:_this.props.iconName?"@carbon/icons-react/lib/"+_this.props.iconName+".js":""},_this}return _inherits(_RenderIcon_,_React$Component),_createClass(_RenderIcon_,[{key:"componentDidMount",value:function(){var _this2=this,iconURL=this.state.iconURL?this.state.iconURL:this.state.defaultIconURL;System.import(iconURL).then(function(iconDef){_this2.cardIcon=iconDef,_this2.setState({reload:!_this2.state.reload})})}},{key:"render",value:function(){if(!this.cardIcon)return null;var CardIcon=this.cardIcon;return React.createElement(CardIcon,{style:{width:20,height:"100%",cursor:"pointer"},onClick:this.props.onClick})}}]),_RenderIcon_}(React.Component),_export("RenderIcon",RenderIcon=function(props){return _RenderIcon_}),_export("RenderIcon",RenderIcon),_export("default",RenderIcon),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/ShowFieldMappingDialog.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32"],function(_export,_context4){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,FormGroup,RadioButtonGroup,RadioButton,Select,SelectItem,TextInput,AddAlt20,SubAlt20,_ShowFieldMappingDialog_,ShowFieldMappingDialog,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Breadcrumb,_carbonComponentsReact.BreadcrumbItem,Button=_carbonComponentsReact.Button,FormGroup=_carbonComponentsReact.FormGroup,RadioButtonGroup=_carbonComponentsReact.RadioButtonGroup,RadioButton=_carbonComponentsReact.RadioButton,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default}],execute:function(){_ShowFieldMappingDialog_=function(_React$Component){function _ShowFieldMappingDialog_(props){_classCallCheck(this,_ShowFieldMappingDialog_);var _this=_possibleConstructorReturn(this,(_ShowFieldMappingDialog_.__proto__||Object.getPrototypeOf(_ShowFieldMappingDialog_)).call(this,props));return _this.state={templateChanged:!1,selectedField:null,selectedRelationShip:null,targetModel:null,foreignKey:null,relationShipcreated:!1,modelCreated:!1,fieldList:[{id:"",type:""}],currentBreadCrumbPath:{}},_this.handleConfigurationChange=_this.handleConfigurationChange.bind(_this),_this.handleCancel=_this.handleCancel.bind(_this),_this.getBreadCrumb=_this.getBreadCrumb.bind(_this),_this.updateSchema=_this.updateSchema.bind(_this),_this.getModelName=_this.getModelName.bind(_this),_this.breadCrumbPaths={home:[{name:"",value:""}],existing_field:[{name:"field_selection",value:"Field Selection"}],new_field:[{name:"new_field",value:"Create and select Field"}],existing_relation:[{name:"existing_relation",value:"Field Selection from relationship"}],new_relation_existing_model:[{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],new_relation_new_model:[{name:"create_model",value:"Create Model"},{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}]},_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this}return _inherits(_ShowFieldMappingDialog_,_React$Component),_createClass(_ShowFieldMappingDialog_,[{key:"handleConfigurationChange",value:function(e){this.optionSelected=e.target.value}},{key:"handleNext",value:function(){this.optionSelected?this.setState({templateChanged:!0,currentBreadCrumbPath:{key:this.optionSelected,stage:this.breadCrumbPaths[this.optionSelected][0].name}}):this.props.addErrorMessage({title:"Error - ",subtitle:"Please select one of the available choices"})}},{key:"handleSelect",value:function(){}},{key:"handleCancel",value:function(){this.props.updateStore({updates:{showpreview:!1}})}},{key:"removeField",value:function(index){var fields=this.state.fieldList;fields.splice(index,1),this.setState({fieldList:fields})}},{key:"addField",value:function(){var fieldList=this.state.fieldList;fieldList.push({id:"",datatype:""}),this.setState({fieldList:fieldList})}},{key:"getModelName",value:function(name,scope){return"mmf"==scope&&name.startsWith("Meta")?name:name+"_"+scope}},{key:"getNewRelationShipWithNewModel",value:function(){var _this2=this,template=null;if(this.state.modelCreated)template=this.getNewRelationShipWithExistingModel(this.getModelName(this.state.modelName,this.state.modelScope));else{var fieldList=[],length=this.state.fieldList.length;this.state.fieldList.forEach(function(field,indx){var element=React.createElement("div",{className:"field-create"},React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){(fieldList=_this2.state.fieldList)[indx].id=e.target.value,_this2.setState({fieldList:fieldList})}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){(fieldList=_this2.state.fieldList)[indx].datatype=e.target.value,_this2.setState({fieldList:fieldList})}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(indx){_this2.removeField(indx)}}):null," ",React.createElement(AddAlt20,{onClick:function(e){_this2.addField()}}));fieldList.push(element)}),template=React.createElement("div",null,React.createElement(TextInput,{placeholder:"Model Name",onChange:function(e){_this2.setState({modelName:e.target.value})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",onChange:function(e){_this2.setState({modelScope:e.target.value})}})," ",React.createElement("br",null),fieldList.map(function(element){return element}),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this2.optionSelected="home",_this2.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){_this2.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){var _ref,self=_this2;$qry.waituntil("model.upsert",_this2.getModelName(_this2.state.modelName,_this2.state.modelScope)).then((_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(result){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,self.updateSchema();case 2:_this2.setState({modelCreated:!0});case 3:case"end":return _context.stop()}},_callee,_this2)})),function(_x){return _ref.apply(this,arguments)})),$script.getscript("createModel").then(function(_ref2){(0,_ref2.default)(_this2.state.modelName,_this2.state.modelScope,_this2.state.fieldList).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+_this2.state.modelName+"_"+_this2.state.modelScope+" updated."})})})}},"Create")))}return template}},{key:"updateSchema",value:function(){var _this3=this;return new Promise(function(resolve,reject){var self=_this3;$script.runAtServer("mmf.getSchemaData").then(function(schemaData){self.props.updateStore({updates:{schema:schemaData}}),resolve()})})}},{key:"getNewRelationShipWithExistingModel",value:function(modelNameValue){var _this4=this,tableItems=[];tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables&&this.props.schemaTables.map(function(schemaTable,indx){tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTable}))});var targetModelFields=this.props.schemaFields?this.props.schemaFields:[],targetModel=modelNameValue||this.state.targetModel;targetModelFields=targetModelFields.filter(function(item){return item.parent==targetModel&&"field"==item.type});var targetModelFieldItems=[];targetModelFieldItems.push(React.createElement(SelectItem,{value:"none",text:"Select Field"})),targetModelFields.map(function(item){targetModelFieldItems.push(React.createElement(SelectItem,{value:item.id,text:item.text}))});var targetModelWidget=null;return targetModelWidget=modelNameValue?React.createElement(TextInput,{placeholder:"Target Model",value:modelNameValue}):React.createElement(Select,{labelText:"Target Model",onChange:function(e){_this4.setState({targetModel:e.target.value})}},tableItems),React.createElement("div",null,this.state.relationShipcreated?this.getExistingFieldsTemplate(!0,targetModel):React.createElement(React.Fragment,null,React.createElement(TextInput,{placeholder:"Source Model",value:this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),disabled:!0})," ",React.createElement("br",null),targetModelWidget,React.createElement("br",null),React.createElement(TextInput,{placeholder:"Relatinship Name",onChange:function(e){_this4.setState({relationshipName:e.target.value})}})," ",React.createElement("br",null),React.createElement(Select,{labelText:"Foreign Key",onChange:function(e){_this4.setState({foreignKey:e.target.value})}},targetModelFieldItems),React.createElement("br",null),React.createElement(TextInput,{placeholder:"Alias",onChange:function(e){_this4.setState({relationship_alias:e.target.value})}})," ",React.createElement("br",null),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this4.optionSelected="home",_this4.handleNext()}},"Home"),React.createElement(Button,{onClick:function(){_this4.handleCancel()}},"Cancel"),React.createElement(Button,{onClick:function(){var _ref3,self=_this4;$qry.waituntil("relationship.upsert",_this4.state.relationshipName).then((_ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(result){var active_widget_temp_field_value;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,self.updateSchema();case 2:self.setState({relationShipcreated:!0}),(active_widget_temp_field_value=self.props.active_widget_temp_field_value&&self.props.active_widget_temp_field_value.length>0?self.props.active_widget_temp_field_value:[]).push(self.state.relationship_alias),self.props.updateStore({updates:{active_widget_temp_field_value:active_widget_temp_field_value}});case 6:case"end":return _context2.stop()}},_callee2,_this4)})),function(_x2){return _ref3.apply(this,arguments)})),$script.getscript("mmf.createRelationship").then(function(_ref4){var createRelationshipFn=_ref4.default,sourceModelNameValue=self.getModelName(self.props.activePage.model,self.props.activePage.modelscope);createRelationshipFn(self.state.relationshipName,sourceModelNameValue,targetModel,"belongsTo",self.state.foreignKey,self.state.relationship_alias).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Relationship "+self.state.relationshipName+" created."})})})}},"Create"))))}},{key:"getExistingRelationShipTemplate",value:function(){var _this5=this,relationships=this.props.schemaFields?this.props.schemaFields:[],modelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);relationships=relationships.filter(function(item){return item.parent==modelNameValue&&"one2one"==item.type});var selectedRelationships=[],selectedField=null,selectedFieldInfo=null;if(selectedRelationships.push(React.createElement(SelectItem,{value:"none",text:"Select Relationship"})),relationships.map(function(item){selectedRelationships.push(React.createElement(SelectItem,{value:item.to+"@@"+item.text,text:item.text}))}),this.state.selectedRelationShip){var fieldsInRelatedModel=this.props.schemaFields?this.props.schemaFields:[];fieldsInRelatedModel=fieldsInRelatedModel.filter(function(item){return item.parent==_this5.state.selectedRelationShip.table&&"field"==item.type});var selectFieldsInRelatedModel=[];selectFieldsInRelatedModel.push(React.createElement(SelectItem,{value:"none",text:"Select Fields"})),fieldsInRelatedModel.map(function(item){selectFieldsInRelatedModel.push(React.createElement(SelectItem,{value:item.text+"@@"+item.datatype,text:item.text}))}),selectedField=React.createElement(Select,{labelText:"Select Fields",onChange:function(e){e.target.value&&e.target.value.indexOf("@@")>-1&&_this5.setState({selectedField:{name:e.target.value.split("@@")[0],datatype:e.target.value.split("@@")[1]}})}},selectFieldsInRelatedModel)}return this.state.selectedField&&(selectedFieldInfo=React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected RelationShip"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedRelationShip.table)),React.createElement("br",null),React.createElement("h4",null,"Selected Field"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedField.name),React.createElement("li",null,"Type : ",this.state.selectedField.datatype)))),React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Select Relationship",onChange:function(e){e.target.value&&e.target.value.indexOf("@@")>-1&&_this5.setState({selectedRelationShip:{table:e.target.value.split("@@")[0],name:e.target.value.split("@@")[1]}})}},selectedRelationships),selectedField,selectedFieldInfo,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this5.optionSelected="home",_this5.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this5.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this5.props.updateStore({updates:{active_widget_temp_field_value:[],active_widget_field_value:"@@["+[_this5.state.selectedRelationShip.name,_this5.state.selectedField.name].join(".")+"]",showpreview:!1}})}},"Select")))}},{key:"getNewFieldTemplate",value:function(){var _this6=this;return React.createElement(React.Fragment,null,React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){_this6.setState({fieldName:e.target.value})}})," ",React.createElement("br",null),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){_this6.setState({fieldType:e.target.value})}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"}))," ",React.createElement("br",null),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this6.optionSelected="home",_this6.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var _ref5,self=_this6;$qry.waituntil("model.upsert",_this6.getModelName(_this6.props.activePage.model,_this6.props.activePage.modelscope)).then((_ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(result){return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,self.updateSchema();case 2:_this6.props.updateStore({updates:{active_widget_field_value:"@@["+_this6.state.fieldName+"]",active_widget_temp_field_value:[],showpreview:!1}});case 3:case"end":return _context3.stop()}},_callee3,_this6)})),function(_x3){return _ref5.apply(this,arguments)})),$script.getscript("addFields2Model").then(function(_ref6){(0,_ref6.default)(_this6.props.activePage.model,_this6.props.activePage.modelscope,[{name:_this6.state.fieldName,type:_this6.state.fieldType}]).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+_this6.props.activePage.model+" updated."})})})}},"Create & Select")))}},{key:"getExistingFieldsTemplate",value:function(fromRelationShip,relationshipModelName){var _this7=this,items=this.props.schemaFields?this.props.schemaFields:[],targetModelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);fromRelationShip&&(targetModelNameValue=relationshipModelName),items=items.filter(function(item){return item.parent==targetModelNameValue&&"field"==item.type});var selectItems=[];return selectItems.push(React.createElement(SelectItem,{value:"none",text:"Select Field"})),items.map(function(item){selectItems.push(React.createElement(SelectItem,{value:item.id,text:item.text}))}),React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Select Fields",onChange:function(e){_this7.setState({selectedField:e.target.value})},id:"selectfield"},selectItems),this.state.selectedField?React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected Field"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedField),React.createElement("li",null,"Type : String"))):null,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this7.optionSelected="home",_this7.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this7.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var active_widget_field_value="";if(_this7.props.active_widget_temp_field_value&&_this7.props.active_widget_temp_field_value.length>0)_this7.props.active_widget_temp_field_value.push(_this7.state.selectedField),active_widget_field_value="@@["+_this7.props.active_widget_temp_field_value.join(".")+"]";else if(active_widget_field_value&&active_widget_field_value.indexOf("@@[")>-1){var propVal=active_widget_field_value.split("@@[")[1];(propVal=(propVal=propVal.substr(0,propVal.length-1)).split(".")).push(_this7.state.selectedField),active_widget_field_value="@@["+propVal.join(".")+"]"}else active_widget_field_value="@@["+_this7.state.selectedField+"]";_this7.props.updateStore({updates:{active_widget_field_value:active_widget_field_value,active_widget_temp_field_value:[],showpreview:!1}})}},"Select")))}},{key:"getDefaultTemplate",value:function(){var _this8=this;return React.createElement(React.Fragment,null,React.createElement(FormGroup,{legendText:"Choose a configuration from below options to select the field - "},React.createElement(RadioButtonGroup,{defaultSelected:"item1",legend:"Select from - ",orientation:"vertical"},React.createElement(RadioButton,{value:"existing_field",labelText:"Existing field",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"new_field",labelText:"New field",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"existing_relation",labelText:"Existing relationship",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"new_relation_existing_model",labelText:"New relationship with Existing model",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"new_relation_new_model",labelText:"New relationship with New model",onClick:this.handleConfigurationChange}))),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this8.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this8.handleNext()}},"Next")))}},{key:"getTemplate",value:function(){var template=null;switch(this.optionSelected){case"existing_field":template=this.getExistingFieldsTemplate();break;case"new_field":template=this.getNewFieldTemplate();break;case"existing_relation":template=this.getExistingRelationShipTemplate();break;case"new_relation_existing_model":template=this.getNewRelationShipWithExistingModel();break;case"new_relation_new_model":template=this.getNewRelationShipWithNewModel();break;case"home":default:template=this.getDefaultTemplate()}return template}},{key:"getBreadCrumb",value:function(){var breadCrumbKey=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.key:"",breadCrumbStage=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.stage:"",breadCrumbElements=[];return breadCrumbKey&&"home"!=breadCrumbKey?(breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,"Choose a configuration"))),this.breadCrumbPaths[breadCrumbKey].map(function(breadCrumbItem,indx){breadCrumbItem.name==breadCrumbStage?breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,breadCrumbItem.value))):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,breadCrumbItem.value)))})):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,"Choose a configuration"))),breadCrumbElements}},{key:"render",value:function(){var template=this.getTemplate(),breadCrumb=this.getBreadCrumb();return React.createElement("div",{style:{padding:20}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ShowFieldMappingDialog/Style.css");'),React.createElement("nav",{class:"bx--breadcrumb bx--breadcrumb--no-trailing-slash","aria-label":"breadcrumb"},breadCrumb),React.createElement("div",{className:"rel-options"},template))}}]),_ShowFieldMappingDialog_}(React.Component),_export("ShowFieldMappingDialog",ShowFieldMappingDialog=function(props){return _ShowFieldMappingDialog_}),_export("ShowFieldMappingDialog",ShowFieldMappingDialog),_export("default",ShowFieldMappingDialog),_export("states",states=[{KeyName:"active_widget_temp_field_value",AccessPath:"active_widget_temp_field_value",DefaultValue:'{"active_widget_temp_field_value":[]}'},{KeyName:"active_widget_field_value",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}.props.FieldName",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {"${active_widget_id}": {"props": {"FieldName": ""}}}}}}'},{KeyName:"schemaTables",AccessPath:"schema.tables",DefaultValue:'{"schema": {"tables": []}}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id": ""}'},{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"schemaFields",AccessPath:"schema.fields",DefaultValue:'{"schema": {"fields": []}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema": {}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/ShowFieldMappingDialog/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32"],function(_export,_context4){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,FormGroup,RadioButtonGroup,RadioButton,Select,SelectItem,TextInput,AddAlt20,SubAlt20,_ShowFieldMappingDialog_,ShowFieldMappingDialog;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Breadcrumb,_carbonComponentsReact.BreadcrumbItem,Button=_carbonComponentsReact.Button,FormGroup=_carbonComponentsReact.FormGroup,RadioButtonGroup=_carbonComponentsReact.RadioButtonGroup,RadioButton=_carbonComponentsReact.RadioButton,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default}],execute:function(){_ShowFieldMappingDialog_=function(_React$Component){function _ShowFieldMappingDialog_(props){_classCallCheck(this,_ShowFieldMappingDialog_);var _this=_possibleConstructorReturn(this,(_ShowFieldMappingDialog_.__proto__||Object.getPrototypeOf(_ShowFieldMappingDialog_)).call(this,props));return _this.state={templateChanged:!1,selectedField:null,selectedRelationShip:null,targetModel:null,foreignKey:null,relationShipcreated:!1,modelCreated:!1,fieldList:[{id:"",type:""}],currentBreadCrumbPath:{}},_this.handleConfigurationChange=_this.handleConfigurationChange.bind(_this),_this.handleCancel=_this.handleCancel.bind(_this),_this.getBreadCrumb=_this.getBreadCrumb.bind(_this),_this.updateSchema=_this.updateSchema.bind(_this),_this.getModelName=_this.getModelName.bind(_this),_this.breadCrumbPaths={home:[{name:"",value:""}],existing_field:[{name:"field_selection",value:"Field Selection"}],new_field:[{name:"new_field",value:"Create and select Field"}],existing_relation:[{name:"existing_relation",value:"Field Selection from relationship"}],new_relation_existing_model:[{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],new_relation_new_model:[{name:"create_model",value:"Create Model"},{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}]},_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this}return _inherits(_ShowFieldMappingDialog_,_React$Component),_createClass(_ShowFieldMappingDialog_,[{key:"handleConfigurationChange",value:function(e){this.optionSelected=e.target.value}},{key:"handleNext",value:function(){this.optionSelected?this.setState({templateChanged:!0,currentBreadCrumbPath:{key:this.optionSelected,stage:this.breadCrumbPaths[this.optionSelected][0].name}}):this.props.addErrorMessage({title:"Error - ",subtitle:"Please select one of the available choices"})}},{key:"handleSelect",value:function(){}},{key:"handleCancel",value:function(){this.props.updateStore({updates:{showpreview:!1}})}},{key:"removeField",value:function(index){var fields=this.state.fieldList;fields.splice(index,1),this.setState({fieldList:fields})}},{key:"addField",value:function(){var fieldList=this.state.fieldList;fieldList.push({id:"",datatype:""}),this.setState({fieldList:fieldList})}},{key:"getModelName",value:function(name,scope){return"mmf"==scope&&name.startsWith("Meta")?name:name+"_"+scope}},{key:"getNewRelationShipWithNewModel",value:function(){var _this2=this,template=null;if(this.state.modelCreated)template=this.getNewRelationShipWithExistingModel(this.getModelName(this.state.modelName,this.state.modelScope));else{var fieldList=[],length=this.state.fieldList.length;this.state.fieldList.forEach(function(field,indx){var element=React.createElement("div",{className:"field-create"},React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){(fieldList=_this2.state.fieldList)[indx].id=e.target.value,_this2.setState({fieldList:fieldList})}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){(fieldList=_this2.state.fieldList)[indx].datatype=e.target.value,_this2.setState({fieldList:fieldList})}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(indx){_this2.removeField(indx)}}):null," ",React.createElement(AddAlt20,{onClick:function(e){_this2.addField()}}));fieldList.push(element)}),template=React.createElement("div",null,React.createElement(TextInput,{placeholder:"Model Name",onChange:function(e){_this2.setState({modelName:e.target.value})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",onChange:function(e){_this2.setState({modelScope:e.target.value})}})," ",React.createElement("br",null),fieldList.map(function(element){return element}),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this2.optionSelected="home",_this2.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){_this2.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){var _ref,self=_this2;$qry.waituntil("model.upsert",_this2.getModelName(_this2.state.modelName,_this2.state.modelScope)).then((_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(result){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,self.updateSchema();case 2:_this2.setState({modelCreated:!0});case 3:case"end":return _context.stop()}},_callee,_this2)})),function(_x){return _ref.apply(this,arguments)})),$script.getscript("createModel").then(function(_ref2){(0,_ref2.default)(_this2.state.modelName,_this2.state.modelScope,_this2.state.fieldList).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+_this2.state.modelName+"_"+_this2.state.modelScope+" updated."})})})}},"Create")))}return template}},{key:"updateSchema",value:function(){var _this3=this;return new Promise(function(resolve,reject){var self=_this3;$script.runAtServer("mmf.getSchemaData").then(function(schemaData){self.props.updateStore({updates:{schema:schemaData}}),resolve()})})}},{key:"getNewRelationShipWithExistingModel",value:function(modelNameValue){var _this4=this,tableItems=[];tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables&&this.props.schemaTables.map(function(schemaTable,indx){tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTable}))});var targetModelFields=this.props.schemaFields?this.props.schemaFields:[],targetModel=modelNameValue||this.state.targetModel;targetModelFields=targetModelFields.filter(function(item){return item.parent==targetModel&&"field"==item.type});var targetModelFieldItems=[];targetModelFieldItems.push(React.createElement(SelectItem,{value:"none",text:"Select Field"})),targetModelFields.map(function(item){targetModelFieldItems.push(React.createElement(SelectItem,{value:item.id,text:item.text}))});var targetModelWidget=null;return targetModelWidget=modelNameValue?React.createElement(TextInput,{placeholder:"Target Model",value:modelNameValue}):React.createElement(Select,{labelText:"Target Model",onChange:function(e){_this4.setState({targetModel:e.target.value})}},tableItems),React.createElement("div",null,this.state.relationShipcreated?this.getExistingFieldsTemplate(!0,targetModel):React.createElement(React.Fragment,null,React.createElement(TextInput,{placeholder:"Source Model",value:this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),disabled:!0})," ",React.createElement("br",null),targetModelWidget,React.createElement("br",null),React.createElement(TextInput,{placeholder:"Relatinship Name",onChange:function(e){_this4.setState({relationshipName:e.target.value})}})," ",React.createElement("br",null),React.createElement(Select,{labelText:"Foreign Key",onChange:function(e){_this4.setState({foreignKey:e.target.value})}},targetModelFieldItems),React.createElement("br",null),React.createElement(TextInput,{placeholder:"Alias",onChange:function(e){_this4.setState({relationship_alias:e.target.value})}})," ",React.createElement("br",null),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this4.optionSelected="home",_this4.handleNext()}},"Home"),React.createElement(Button,{onClick:function(){_this4.handleCancel()}},"Cancel"),React.createElement(Button,{onClick:function(){var _ref3,self=_this4;$qry.waituntil("relationship.upsert",_this4.state.relationshipName).then((_ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(result){var active_widget_temp_field_value;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,self.updateSchema();case 2:self.setState({relationShipcreated:!0}),(active_widget_temp_field_value=self.props.active_widget_temp_field_value&&self.props.active_widget_temp_field_value.length>0?self.props.active_widget_temp_field_value:[]).push(self.state.relationship_alias),self.props.updateStore({updates:{active_widget_temp_field_value:active_widget_temp_field_value}});case 6:case"end":return _context2.stop()}},_callee2,_this4)})),function(_x2){return _ref3.apply(this,arguments)})),$script.getscript("mmf.createRelationship").then(function(_ref4){var createRelationshipFn=_ref4.default,sourceModelNameValue=self.getModelName(self.props.activePage.model,self.props.activePage.modelscope);createRelationshipFn(self.state.relationshipName,sourceModelNameValue,targetModel,"belongsTo",self.state.foreignKey,self.state.relationship_alias).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Relationship "+self.state.relationshipName+" created."})})})}},"Create"))))}},{key:"getExistingRelationShipTemplate",value:function(){var _this5=this,relationships=this.props.schemaFields?this.props.schemaFields:[],modelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);relationships=relationships.filter(function(item){return item.parent==modelNameValue&&"one2one"==item.type});var selectedRelationships=[],selectedField=null,selectedFieldInfo=null;if(selectedRelationships.push(React.createElement(SelectItem,{value:"none",text:"Select Relationship"})),relationships.map(function(item){selectedRelationships.push(React.createElement(SelectItem,{value:item.to+"@@"+item.text,text:item.text}))}),this.state.selectedRelationShip){var fieldsInRelatedModel=this.props.schemaFields?this.props.schemaFields:[];fieldsInRelatedModel=fieldsInRelatedModel.filter(function(item){return item.parent==_this5.state.selectedRelationShip.table&&"field"==item.type});var selectFieldsInRelatedModel=[];selectFieldsInRelatedModel.push(React.createElement(SelectItem,{value:"none",text:"Select Fields"})),fieldsInRelatedModel.map(function(item){selectFieldsInRelatedModel.push(React.createElement(SelectItem,{value:item.text+"@@"+item.datatype,text:item.text}))}),selectedField=React.createElement(Select,{labelText:"Select Fields",onChange:function(e){e.target.value&&e.target.value.indexOf("@@")>-1&&_this5.setState({selectedField:{name:e.target.value.split("@@")[0],datatype:e.target.value.split("@@")[1]}})}},selectFieldsInRelatedModel)}return this.state.selectedField&&(selectedFieldInfo=React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected RelationShip"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedRelationShip.table)),React.createElement("br",null),React.createElement("h4",null,"Selected Field"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedField.name),React.createElement("li",null,"Type : ",this.state.selectedField.datatype)))),React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Select Relationship",onChange:function(e){e.target.value&&e.target.value.indexOf("@@")>-1&&_this5.setState({selectedRelationShip:{table:e.target.value.split("@@")[0],name:e.target.value.split("@@")[1]}})}},selectedRelationships),selectedField,selectedFieldInfo,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this5.optionSelected="home",_this5.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this5.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this5.props.updateStore({updates:{active_widget_temp_field_value:[],active_widget_field_value:"@@["+[_this5.state.selectedRelationShip.name,_this5.state.selectedField.name].join(".")+"]",showpreview:!1}})}},"Select")))}},{key:"getNewFieldTemplate",value:function(){var _this6=this;return React.createElement(React.Fragment,null,React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){_this6.setState({fieldName:e.target.value})}})," ",React.createElement("br",null),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){_this6.setState({fieldType:e.target.value})}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"}))," ",React.createElement("br",null),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this6.optionSelected="home",_this6.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var _ref5,self=_this6;$qry.waituntil("model.upsert",_this6.getModelName(_this6.props.activePage.model,_this6.props.activePage.modelscope)).then((_ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(result){return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,self.updateSchema();case 2:_this6.props.updateStore({updates:{active_widget_field_value:"@@["+_this6.state.fieldName+"]",active_widget_temp_field_value:[],showpreview:!1}});case 3:case"end":return _context3.stop()}},_callee3,_this6)})),function(_x3){return _ref5.apply(this,arguments)})),$script.getscript("addFields2Model").then(function(_ref6){(0,_ref6.default)(_this6.props.activePage.model,_this6.props.activePage.modelscope,[{name:_this6.state.fieldName,type:_this6.state.fieldType}]).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+_this6.props.activePage.model+" updated."})})})}},"Create & Select")))}},{key:"getExistingFieldsTemplate",value:function(fromRelationShip,relationshipModelName){var _this7=this,items=this.props.schemaFields?this.props.schemaFields:[],targetModelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);fromRelationShip&&(targetModelNameValue=relationshipModelName),items=items.filter(function(item){return item.parent==targetModelNameValue&&"field"==item.type});var selectItems=[];return selectItems.push(React.createElement(SelectItem,{value:"none",text:"Select Field"})),items.map(function(item){selectItems.push(React.createElement(SelectItem,{value:item.id,text:item.text}))}),React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Select Fields",onChange:function(e){_this7.setState({selectedField:e.target.value})},id:"selectfield"},selectItems),this.state.selectedField?React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected Field"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedField),React.createElement("li",null,"Type : String"))):null,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this7.optionSelected="home",_this7.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this7.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var active_widget_field_value="";if(_this7.props.active_widget_temp_field_value&&_this7.props.active_widget_temp_field_value.length>0)_this7.props.active_widget_temp_field_value.push(_this7.state.selectedField),active_widget_field_value="@@["+_this7.props.active_widget_temp_field_value.join(".")+"]";else if(active_widget_field_value&&active_widget_field_value.indexOf("@@[")>-1){var propVal=active_widget_field_value.split("@@[")[1];(propVal=(propVal=propVal.substr(0,propVal.length-1)).split(".")).push(_this7.state.selectedField),active_widget_field_value="@@["+propVal.join(".")+"]"}else active_widget_field_value="@@["+_this7.state.selectedField+"]";_this7.props.updateStore({updates:{active_widget_field_value:active_widget_field_value,active_widget_temp_field_value:[],showpreview:!1}})}},"Select")))}},{key:"getDefaultTemplate",value:function(){var _this8=this;return React.createElement(React.Fragment,null,React.createElement(FormGroup,{legendText:"Choose a configuration from below options to select the field - "},React.createElement(RadioButtonGroup,{defaultSelected:"item1",legend:"Select from - ",orientation:"vertical"},React.createElement(RadioButton,{value:"existing_field",labelText:"Existing field",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"new_field",labelText:"New field",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"existing_relation",labelText:"Existing relationship",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"new_relation_existing_model",labelText:"New relationship with Existing model",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"new_relation_new_model",labelText:"New relationship with New model",onClick:this.handleConfigurationChange}))),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this8.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this8.handleNext()}},"Next")))}},{key:"getTemplate",value:function(){var template=null;switch(this.optionSelected){case"existing_field":template=this.getExistingFieldsTemplate();break;case"new_field":template=this.getNewFieldTemplate();break;case"existing_relation":template=this.getExistingRelationShipTemplate();break;case"new_relation_existing_model":template=this.getNewRelationShipWithExistingModel();break;case"new_relation_new_model":template=this.getNewRelationShipWithNewModel();break;case"home":default:template=this.getDefaultTemplate()}return template}},{key:"getBreadCrumb",value:function(){var breadCrumbKey=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.key:"",breadCrumbStage=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.stage:"",breadCrumbElements=[];return breadCrumbKey&&"home"!=breadCrumbKey?(breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,"Choose a configuration"))),this.breadCrumbPaths[breadCrumbKey].map(function(breadCrumbItem,indx){breadCrumbItem.name==breadCrumbStage?breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,breadCrumbItem.value))):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,breadCrumbItem.value)))})):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,"Choose a configuration"))),breadCrumbElements}},{key:"render",value:function(){var template=this.getTemplate(),breadCrumb=this.getBreadCrumb();return React.createElement("div",{style:{padding:20}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ShowFieldMappingDialog/Style.css");'),React.createElement("nav",{class:"bx--breadcrumb bx--breadcrumb--no-trailing-slash","aria-label":"breadcrumb"},breadCrumb),React.createElement("div",{className:"rel-options"},template))}}]),_ShowFieldMappingDialog_}(React.Component),_export("ShowFieldMappingDialog",ShowFieldMappingDialog=function(props){return _ShowFieldMappingDialog_}),_export("ShowFieldMappingDialog",ShowFieldMappingDialog)}}}),System.register("component/studio/ShowTabMappingDialog.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","carbon-addons-cloud-react","@carbon/icons-react/lib/blog/32","@carbon/icons-react/lib/list--bulleted/32","component/mmf/PageParameter/Definition.js","component/mmf/OrderedList/Definition.js","component/studio/SrsReference/Definition.js"],function(_export,_context9){"use strict";var _regeneratorRuntime,_extends,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,NumberInput,Button,MultiSelect,Tabs,Tab,Select,SelectItem,TextInput,OverflowMenu,OverflowMenuItem,AddAlt20,SubAlt20,Card,Icon1,Icon2,PageParameter,OrderedList,SrsReference,_ShowTabMappingDialog_,ShowTabMappingDialog,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){NumberInput=_carbonComponentsReact.NumberInput,_carbonComponentsReact.Breadcrumb,_carbonComponentsReact.BreadcrumbItem,Button=_carbonComponentsReact.Button,_carbonComponentsReact.FormGroup,_carbonComponentsReact.RadioButtonGroup,_carbonComponentsReact.RadioButton,MultiSelect=_carbonComponentsReact.MultiSelect,Tabs=_carbonComponentsReact.Tabs,Tab=_carbonComponentsReact.Tab,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput,OverflowMenu=_carbonComponentsReact.OverflowMenu,OverflowMenuItem=_carbonComponentsReact.OverflowMenuItem},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card},function(_carbonIconsReactLibBlog){Icon1=_carbonIconsReactLibBlog.default},function(_carbonIconsReactLibListBulleted){Icon2=_carbonIconsReactLibListBulleted.default},function(_componentMmfPageParameterDefinitionJs){PageParameter=_componentMmfPageParameterDefinitionJs.PageParameter},function(_componentMmfOrderedListDefinitionJs){OrderedList=_componentMmfOrderedListDefinitionJs.OrderedList},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference}],execute:function(){_ShowTabMappingDialog_=function(_React$Component){function _ShowTabMappingDialog_(props){_classCallCheck(this,_ShowTabMappingDialog_);var _this=_possibleConstructorReturn(this,(_ShowTabMappingDialog_.__proto__||Object.getPrototypeOf(_ShowTabMappingDialog_)).call(this,props));return _this.state={templateChanged:!1,selectedFields:[],selectedRelationShip:null,realtionshipSelected:!1,targetModel:null,foreignKey:null,relationShipcreated:!1,selectedFilter:"",foreignKeyType:"existing",selectedPage:null,fieldList:[{name:"",type:""}],currentBreadCrumbPath:{},pages:[],pageParameters:null,selectedPageSize:10,selectedCreatePageId:"",selectedEditPageId:"",listTitle:""},_this.breadCrumbPaths={home:[{name:"",value:""}],existing_relationship:[{name:"select_relation",value:"Select Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],new_relationship_with_existing_model:[{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],new_relationship_with_new_model:[{name:"create_model",value:"Create Model"},{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],existing_page:[{name:"select_page",value:"Select Page"}]},_this.loadSlides=_this.loadSlides.bind(_this),_this.handleConfigurationChange=_this.handleConfigurationChange.bind(_this),_this.handleSelect=_this.handleSelect.bind(_this),_this.handleNext=_this.handleNext.bind(_this),_this.removeField=_this.removeField.bind(_this),_this.addField=_this.addField.bind(_this),_this.handleSelectPage=_this.handleSelectPage.bind(_this),_this.handleSelectedRelationship=_this.handleSelectedRelationship.bind(_this),_this.handleSimpleList=_this.handleSimpleList.bind(_this),_this.createRelationship=_this.createRelationship.bind(_this),_this.updateSchema=_this.updateSchema.bind(_this),_this.getFieldSelectionTemplate=_this.getFieldSelectionTemplate.bind(_this),_this.getFieldList=_this.getFieldList.bind(_this),_this.getModelName=_this.getModelName.bind(_this),_this.getExistingRelationShipTemplate=_this.getExistingRelationShipTemplate.bind(_this),_this.getNewRelationShipWithNewModel=_this.getNewRelationShipWithNewModel.bind(_this),_this.getNewRelationShipWithExistingModel=_this.getNewRelationShipWithExistingModel.bind(_this),_this.getExistingFieldsTemplate=_this.getExistingFieldsTemplate.bind(_this),_this.getExistingPageTemplate=_this.getExistingPageTemplate.bind(_this),_this.getSimpleListTemplate=_this.getSimpleListTemplate.bind(_this),_this.getDefaultTemplate=_this.getDefaultTemplate.bind(_this),_this.getTemplate=_this.getTemplate.bind(_this),_this.getBreadCrumb=_this.getBreadCrumb.bind(_this),_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this}return _inherits(_ShowTabMappingDialog_,_React$Component),_createClass(_ShowTabMappingDialog_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.current_filter,this.props.current_filter)||this.setState({selectedFilter:this.props.current_filter})}},{key:"handleConfigurationChange",value:function(e){this.optionSelected=e.target.value?e.target.value:e.currentTarget.value?e.currentTarget.value:"",this.handleNext()}},{key:"handleSelect",value:function(){this.setState({realtionshipSelected:!0})}},{key:"handleNext",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var newStateObj;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:newStateObj={},this.optionSelected?("home"==this.optionSelected&&(newStateObj={realtionshipSelected:!1,selectedRelationShip:null,selectedFields:null,selectedFilter:null,selectedPageSize:null,fieldList:null,modelCreated:!1,targetModel:null,foreignKey:"",relationshipName:"",foreignKeyType:null,relationship_alias:"",pages2Show:null,pageParameters:null,selectedPage:null,templateChanged:!0,currentBreadCrumbPath:{key:this.optionSelected,stage:this.breadCrumbPaths[this.optionSelected][0].name}}),this.setState(_extends({},newStateObj))):this.props.addErrorMessage({title:"Error - ",subtitle:"Please select one of the available choices"});case 2:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"removeField",value:function(index){var fields=this.state.fieldList;fields.splice(index,1),this.setState({fieldList:fields})}},{key:"addField",value:function(){var fields=this.state.fieldList;fields.push({name:"",type:""}),this.setState({fieldList:fields})}},{key:"handleDone",value:function(){}},{key:"handleCancel",value:function(){}},{key:"handleSelectPage",value:function(){var _this2=this,selectedPage=this.state.selectedPage,updatedProps=this.props.widgetProps||{},tabs=JSON.parse(updatedProps.tabs)||[],matchingTab=tabs.slice().filter(function(tabToUpdate){return tabToUpdate.tab_id==_this2.props.active_tab_id});(matchingTab=matchingTab&&matchingTab.length>0?matchingTab[0]:null)&&(matchingTab.tabInfo.type="page",matchingTab.tabInfo.page={page_id:selectedPage,params:this.state.pageParameters},updatedProps.tabs=JSON.stringify(tabs),this.props.updateStore({updates:{widgetProps:updatedProps,showpreview:!1}}))}},{key:"handleSimpleList",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var selectedTable,selectedFields,selectedFilter,selectedPageSize,title,selectedCreatePathId,selectedEditPathId,updatedProps,tabs,tabsToUpdate,matchingTab,_this3=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:selectedTable=this.state.selectedTable?this.state.selectedTable:"",selectedFields=this.state.selectedFields?this.state.selectedFields:[],selectedFilter=this.state.selectedFilter?this.state.selectedFilter:{},selectedPageSize=this.state.selectedPageSize?this.state.selectedPageSize:10,title=this.state.listTitle?this.state.listTitle:selectedTable+" List",selectedCreatePathId=this.state.selectedCreatePageId?this.state.selectedCreatePageId.id:"",selectedEditPathId=this.state.selectedEditPathId?this.state.selectedEditPathId.id:"",updatedProps=this.props.widgetProps||{},tabs=JSON.parse(updatedProps.tabs)||[],tabsToUpdate=tabs.slice(),(matchingTab=(matchingTab=tabsToUpdate.filter(function(tabToUpdate){return tabToUpdate.tab_id==_this3.props.active_tab_id}))&&matchingTab.length>0?matchingTab[0]:null)&&(matchingTab.tabInfo.type="simple_list",matchingTab.tabInfo.list={table:selectedTable,fields:selectedFields,filter:selectedFilter,pagesize:selectedPageSize},title&&(matchingTab.tabInfo.list.title=title),selectedCreatePathId&&(matchingTab.tabInfo.list.createview=selectedCreatePathId),selectedEditPathId&&(matchingTab.tabInfo.list.editview=selectedEditPathId),updatedProps.tabs=JSON.stringify(tabs),this.props.updateStore({updates:{widgetProps:updatedProps,showpreview:!1}}));case 13:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"handleSelectedRelationship",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var relationshipName,selectedTable,selectedFields,selectedFilter,selectedPageSize,parentTable,title,selectedCreatePathId,selectedEditPathId,updatedProps,tabs,tabsToUpdate,matchingTab,_this4=this;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:relationshipName=this.state.selectedRelationShip?this.state.selectedRelationShip.name:"",selectedTable=this.state.selectedRelationShip?this.state.selectedRelationShip.table:"",selectedFields=this.state.selectedFields?this.state.selectedFields:[],selectedFilter=this.state.selectedFilter?this.state.selectedFilter:{},selectedPageSize=this.state.selectedPageSize?this.state.selectedPageSize:10,parentTable=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),title=this.state.listTitle?this.state.listTitle:selectedTable+" List",selectedCreatePathId=this.state.selectedCreatePageId?this.state.selectedCreatePageId.id:"",selectedEditPathId=this.state.selectedEditPageId?this.state.selectedEditPageId.id:"",updatedProps=this.props.widgetProps||{},tabs=JSON.parse(updatedProps.tabs)||[],tabsToUpdate=tabs.slice(),(matchingTab=(matchingTab=tabsToUpdate.filter(function(tabToUpdate){return tabToUpdate.tab_id==_this4.props.active_tab_id}))&&matchingTab.length>0?matchingTab[0]:null)&&(matchingTab.tabInfo.type="related_list",matchingTab.tabInfo.list={table:parentTable,fields:selectedFields,filter:selectedFilter,pagesize:selectedPageSize,relation:relationshipName,relatedtable:selectedTable,params:this.state.pageParameters},title&&(matchingTab.tabInfo.list.title=title),selectedCreatePathId&&(matchingTab.tabInfo.list.createview=selectedCreatePathId),selectedEditPathId&&(matchingTab.tabInfo.list.editview=selectedEditPathId),updatedProps.tabs=JSON.stringify(tabs),this.props.updateStore({updates:{widgetProps:updatedProps,showpreview:!1}}));case 15:case"end":return _context3.stop()}},_callee3,this)}));return function(){return _ref3.apply(this,arguments)}}()},{key:"updateSchema",value:function(){var _this5=this;return new Promise(function(resolve,reject){var self=_this5;$script.runAtServer("mmf.getSchemaData").then(function(schemaData){self.props.updateStore({updates:{schema:schemaData}}),resolve()})})}},{key:"createRelationship",value:function(){this.setState({realtionshipSelected:!0})}},{key:"getModelName",value:function(name,scope){return"mmf"==scope&&name.startsWith("Meta")?name:name+"_"+scope}},{key:"getFieldSelectionTemplate",value:function(){var _this6=this,fieldList=this.getFieldList();return React.createElement(React.Fragment,null,React.createElement("h4",null,"Select Fields"),React.createElement("br",null),fieldList.map(function(element){return element}),React.createElement(Button,{style:this.buttonStyle,onClick:function(){_this6.handleDone()}},"Done"))}},{key:"getFieldList",value:function(){var _this7=this,fieldList=[],length=this.state.fieldList.length;return this.state.fieldList.forEach(function(field,i){var element=React.createElement("div",{className:"field-create"},React.createElement(TextInput,{placeholder:"Field Name"}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(){}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(i){_this7.removeField(i)}}):null," ",React.createElement(AddAlt20,{onClick:function(){_this7.addField()}}));fieldList.push(element)}),fieldList}},{key:"getExistingRelationShipTemplate",value:function(){var _this8=this,OrderedListComp=OrderedList(),relationships=this.props.schemaFields?this.props.schemaFields:[],modelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);relationships=relationships.filter(function(item){return item.parent==modelNameValue&&"one2many"==item.type});var selectedRelationships=[],selectedField=null,selectedFieldInfo=null;selectedRelationships.push(React.createElement(SelectItem,{value:"none",text:"Select Relationship"})),relationships.map(function(item){selectedRelationships.push(React.createElement(SelectItem,{value:item.to+"@@"+item.text,text:item.text}))});var selectRelationShipField=null;if(this.state.selectedRelationShip){var fieldsInRelatedModel=this.props.schemaFields?this.props.schemaFields:[],selectFieldsInRelatedModel=[];(fieldsInRelatedModel=fieldsInRelatedModel.filter(function(item){return item.parent==_this8.state.selectedRelationShip.table&&"field"==item.type})).map(function(item){"id"!=item.text&&"uid"!=item.text&&selectFieldsInRelatedModel.push({id:item.text+"@@"+item.datatype,text:item.text})}),selectedField=React.createElement(MultiSelect,{label:"Select Fields",invalid:!1,invalidText:"Invalid Selection",onChange:function(evt){return _this8.setState({selectedFields:evt.selectedItems})},items:selectFieldsInRelatedModel,itemToString:function(item){return item.text}})}else selectRelationShipField=React.createElement("div",{style:{position:"absolute",left:"40%",top:"40%"}},React.createElement(Select,{labelText:"Select Relationship",onChange:function(e){e.target.value&&e.target.value.indexOf("@@")>-1&&_this8.setState({selectedRelationShip:{table:e.target.value.split("@@")[0],name:e.target.value.split("@@")[1]}})}},selectedRelationships));this.state.selectedFields&&this.state.selectedFields.length>0&&(selectedFieldInfo=React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected RelationShip"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedRelationShip.table)),React.createElement("br",null),React.createElement("h4",null,"Selected Fields"),React.createElement(OrderedListComp,{data:this.state.selectedFields,labelAttr:"text",updatedList:function(data){return _this8.setState({selectedFields:data})}})));var pageParametersEl=null,ParamPicker=PageParameter();if(this.state.selectedRelationShip){pageParametersEl=React.createElement(ParamPicker,{updateProps:function(data){return _this8.setState({pageParameters:data})},parentPageParams:{recordid:"Parent Record ID"},widgetData:this.props.widgetData,params:["recordid"]})}var RecordLookup=SrsReference(),editPageProps={title:"Choose Edit Page",tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:JSON.stringify({where:{Type:"EditView"}}),searchfields:"Name",onChange:function(id){_this8.setState({selectedEditPageId:id})}},createPageProps={title:"Choose Create Page",tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:JSON.stringify({where:{Type:"CreateView"}}),searchfields:"Name",onChange:function(id){_this8.setState({selectedCreatePageId:id})}},fieldsAndFilter=this.state.selectedRelationShip?React.createElement(Tabs,{selected:0},React.createElement(Tab,{label:"General"},React.createElement("div",{style:{marginTop:10}},React.createElement(TextInput,{labelText:"List Title",placeholder:"Enter title...",onChange:function(e){_this8.setState({listTitle:e.target.value})}}),React.createElement(NumberInput,{label:"Page Size",value:10,onChange:function(e){_this8.setState({selectedPageSize:e.target.value})}}),React.createElement(RecordLookup,editPageProps),React.createElement(RecordLookup,createPageProps))),React.createElement(Tab,{label:"Field Selection"},React.createElement("div",{style:{marginTop:10}},selectedField,selectedFieldInfo)),React.createElement(Tab,{label:"Apply Filter"},this.state.selectedRelationShip?React.createElement("srs-filter",{maxheight:"15rem",style:{position:"absolute",left:"20%"},tableName:this.state.selectedRelationShip.table}):null),React.createElement(Tab,{label:"Related Record"},React.createElement("div",{style:{display:"inline-flex",position:"absolute",left:"30%",marginTop:20}},pageParametersEl))):null;return React.createElement(React.Fragment,null,selectRelationShipField,fieldsAndFilter,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this8.optionSelected="home",_this8.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this8.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this8.handleSelectedRelationship()}},"Select")))}},{key:"getSimpleListTemplate",value:function(){var _this9=this,OrderedListComp=OrderedList(),tableItems=(this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),[]);tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables&&this.props.schemaTables.sort().map(function(schemaTable,indx){tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTable}))});var selectedField=null,selectedFieldInfo=null,selectedTableEl=null;if(this.state.selectedTable){var fieldItems=[],fields=this.props.schemaFields?this.props.schemaFields:[];(fields=fields.filter(function(item){return item.parent==_this9.state.selectedTable&&"field"==item.type})).map(function(item){"id"!=item.text&&"uid"!=item.text&&fieldItems.push({id:item.text+"@@"+item.datatype,text:item.text})}),selectedField=React.createElement(MultiSelect,{label:"Select Fields",invalid:!1,invalidText:"Invalid Selection",onChange:function(evt){return _this9.setState({selectedFields:evt.selectedItems})},items:fieldItems,itemToString:function(item){return item.text}})}else selectedTableEl=React.createElement("div",{style:{position:"absolute",left:"40%",top:"40%"}},React.createElement(Select,{labelText:"Choose a table",onChange:function(e){_this9.setState({selectedTable:e.target.value})}},tableItems));this.state.selectedFields&&this.state.selectedFields.length>0&&(selectedFieldInfo=React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected Fields"),React.createElement(OrderedListComp,{data:this.state.selectedFields,labelAttr:"text",updatedList:function(data){return _this9.setState({selectedFields:data})}})));var RecordLookup=SrsReference(),editPageProps={tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:{where:{Type:"EditView"}},searchfields:"Name",onChange:function(id){_this9.setState({selectedEditPageId:id})}},createPageProps={tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:{where:{Type:"CreateView"}},searchfields:"Name",onChange:function(id){_this9.setState({selectedCreatePageId:id})}},fieldsAndFilter=this.state.selectedTable?React.createElement(Tabs,{selected:0},React.createElement(Tab,{label:"General"},React.createElement("div",{style:{marginTop:10}},React.createElement(TextInput,{labelText:"List Title",placeholder:"Enter title...",onChange:function(e){_this9.setState({listTitle:e.target.value})}}),React.createElement(NumberInput,{label:"Page Size",value:10,onChange:function(e){_this9.setState({selectedPageSize:e.target.value})}}),React.createElement(RecordLookup,editPageProps),React.createElement(RecordLookup,createPageProps))),React.createElement(Tab,{label:"Field Selection"},React.createElement("div",{style:{marginTop:10}},selectedField,selectedFieldInfo)),React.createElement(Tab,{label:"Apply Filter"},this.state.selectedTable?React.createElement("srs-filter",{maxheight:"15rem",style:{position:"absolute",left:"20%"},tableName:this.state.selectedTable}):null)):null;return React.createElement(React.Fragment,null,selectedTableEl,fieldsAndFilter,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this9.optionSelected="home",_this9.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this9.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this9.handleSimpleList()}},"Select")))}},{key:"getNewRelationShipWithNewModel",value:function(){var _this10=this,template=null;if(this.state.modelCreated)template=this.getNewRelationShipWithExistingModel(this.getModelName(this.state.modelName,this.state.modelScope));else{var fieldList=[],length=this.state.fieldList.length;this.state.fieldList.forEach(function(field,indx){var element=React.createElement("div",{className:"field-create"},React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){(fieldList=_this10.state.fieldList)[indx].id=e.target.value,_this10.setState({fieldList:fieldList})}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){(fieldList=_this10.state.fieldList)[indx].datatype=e.target.value,_this10.setState({fieldList:fieldList})}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(indx){_this10.removeField(indx)}}):null," ",React.createElement(AddAlt20,{onClick:function(e){_this10.addField()}}));fieldList.push(element)}),template=React.createElement("div",null,React.createElement(TextInput,{placeholder:"Model Name",onChange:function(e){_this10.setState({modelName:e.target.value})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",onChange:function(e){_this10.setState({modelScope:e.target.value})}})," ",React.createElement("br",null),fieldList.map(function(element){return element}),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this10.optionSelected="home",_this10.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){_this10.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){var _ref4,self=_this10;$qry.waituntil("model.upsert",_this10.getModelName(_this10.state.modelName,_this10.state.modelScope)).then((_ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(result){return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,self.updateSchema();case 2:_this10.setState({modelCreated:!0,targetModel:_this10.getModelName(_this10.state.modelName,_this10.state.modelScope)});case 3:case"end":return _context4.stop()}},_callee4,_this10)})),function(_x){return _ref4.apply(this,arguments)})),$script.getscript("createModel").then(function(_ref5){(0,_ref5.default)(_this10.state.modelName,_this10.state.modelScope,_this10.state.fieldList).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+_this10.state.modelName+"_"+_this10.state.modelScope+" updated."})})})}},"Create")))}return template}},{key:"getNewRelationShipWithExistingModel",value:function(modelNameValue){var _this11=this,tableItems=[];tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables&&this.props.schemaTables.sort().map(function(schemaTable,indx){tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTable}))});var targetModelFields=this.props.schemaFields?this.props.schemaFields:[],targetModel=modelNameValue||this.state.targetModel;targetModelFields=targetModelFields.filter(function(item){return item.parent==targetModel&&"field"==item.type});var targetModelFieldItems=[];targetModelFieldItems.push(React.createElement(SelectItem,{value:"none",text:"Select Field"})),targetModelFields.map(function(item){"id"!=item.text&&targetModelFieldItems.push(React.createElement(SelectItem,{value:item.id,text:item.text}))});var targetModelWidget=null;targetModelWidget=modelNameValue?React.createElement(TextInput,{placeholder:"Target Model",value:modelNameValue}):React.createElement(Select,{labelText:"Target Model",onChange:function(e){_this11.setState({targetModel:e.target.value})}},tableItems);var formContent=null,foreignKeyField=null;switch(this.state.foreignKeyType){case"existing":foreignKeyField=React.createElement(Select,{labelText:"Foreign Key",onChange:function(e){_this11.setState({foreignKey:e.target.value})}},targetModelFieldItems);break;case"new":foreignKeyField=React.createElement(TextInput,{labelText:"Foreign Key",value:this.state.foreignKey,onChange:function(e){_this11.setState({foreignKey:e.target.value})}})}return formContent=this.state.relationShipcreated?this.getExistingRelationShipTemplate(!0):React.createElement(React.Fragment,null,React.createElement(TextInput,{labelText:"Relationship Name",placeholder:"Relatinship Name",onChange:function(e){_this11.setState({relationshipName:e.target.value})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Source Model",value:this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),disabled:!0})," ",React.createElement("br",null),targetModelWidget,React.createElement("br",null),React.createElement(Select,{labelText:"Choose Foreign Key from",defaultValue:this.state.foreignKeyType,onChange:function(e){_this11.setState({foreignKeyType:e.target.value})}},React.createElement(SelectItem,{value:"existing",text:"Existing Field"}),React.createElement(SelectItem,{value:"new",text:"New Field"})),React.createElement("br",null),foreignKeyField,React.createElement(TextInput,{labelText:"Foreign key Alias",placeholder:"Alias",onChange:function(e){_this11.setState({relationship_alias:e.target.value})}})," ",React.createElement("br",null),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this11.optionSelected="home",_this11.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this11.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var self=_this11,targetModel=self.state.targetModel,targetModelName=targetModel,targetModelScope="mmf";if(!self.state.foreignKey||self.state.foreignKey.indexOf(" ")>-1)_this11.props.addErrorMessage({title:"Error - ",subtitle:"Foreign Key field name contains special characters. Please remove and try again. "});else{if(targetModel.indexOf("_")>-1){var targetModelParts=targetModel.split("_");targetModelName=targetModelParts.slice(0,targetModelParts.length-1).join("_"),targetModelScope=targetModelParts.slice(targetModelParts.length-1).join()}var _ref8,_ref6;"existing"==self.state.foreignKeyType?($qry.waituntil("relationship.upsert",_this11.state.relationshipName).then((_ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(result){return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,self.updateSchema();case 2:self.setState({relationShipcreated:!0,selectedRelationShip:{table:targetModel,name:_this11.state.relationshipName}});case 3:case"end":return _context5.stop()}},_callee5,_this11)})),function(_x2){return _ref6.apply(this,arguments)})),$script.getscript("mmf.createRelationship").then(function(_ref7){var createRelationshipFn=_ref7.default,targetModel=self.state.modelName?self.getModelName(self.state.modelName,self.state.modelScope):self.state.targetModel,sourceModelNameValue=self.getModelName(self.props.activePage.model,self.props.activePage.modelscope);createRelationshipFn(self.state.relationshipName,sourceModelNameValue,targetModel,"hasMany",self.state.foreignKey,self.state.relationship_alias).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Relationship "+self.state.relationshipName+" created."})})})):($qry.waituntil("model.upsert",targetModel).then((_ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(result){return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,self.updateSchema();case 2:$qry.waituntil("relationship.upsert",_this11.state.relationshipName).then(function(){var _ref9=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(result){return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,self.updateSchema();case 2:self.setState({relationShipcreated:!0,selectedRelationShip:{table:targetModel,name:_this11.state.relationshipName}});case 3:case"end":return _context6.stop()}},_callee6,_this11)}));return function(_x4){return _ref9.apply(this,arguments)}}()),$script.getscript("mmf.createRelationship").then(function(_ref10){var createRelationshipFn=_ref10.default,targetModel=self.state.modelName?self.getModelName(self.state.modelName,self.state.modelScope):self.state.targetModel,sourceModelNameValue=self.getModelName(self.props.activePage.model,self.props.activePage.modelscope);createRelationshipFn(self.state.relationshipName,sourceModelNameValue,targetModel,"hasMany",self.state.foreignKey,self.state.relationship_alias).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Relationship "+self.state.relationshipName+" created."})})});case 4:case"end":return _context7.stop()}},_callee7,_this11)})),function(_x3){return _ref8.apply(this,arguments)})),$script.getscript("addFields2Model").then(function(_ref11){(0,_ref11.default)(targetModelName,targetModelScope,[{name:self.state.foreignKey,type:"String"}]).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+ttargetModelName+"_"+targetModelScope+" updated."})})}))}}},"Create"))),React.createElement("div",null,formContent)}},{key:"loadSlides",value:function(){var _ref12=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(){var pages,pageDetails,pageData,_this12=this;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return pages=[],_context8.next=3,$qry.run("mmf.getAllSlides",{Scope:this.props.currentscope});case 3:pageDetails=_context8.sent,pageData=pageDetails&&pageDetails.slides?pageDetails.slides:{},Object.keys(pageData).map(function(pageName){var pageObj=pageData[pageName];pageObj.props&&(Object.keys(pageObj.props).map(function(propKey){switch(pageObj.props[propKey].Name){case"ModelName":pageObj.props[propKey].Value;break;case"ModelScope":pageObj.props[propKey].Value}}),pageObj.uid!=_this12.props.activePage.id&&pages.push(pageObj))}),this.setState({pages2Show:pages});case 7:case"end":return _context8.stop()}},_callee8,this)}));return function(){return _ref12.apply(this,arguments)}}()},{key:"getExistingFieldsTemplate",value:function(fromRelationShip,relationshipModelName){var _this13=this,OrderedListComp=OrderedList(),items=this.props.schemaFields?this.props.schemaFields:[],targetModelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);fromRelationShip&&(targetModelNameValue=relationshipModelName);var selectItems=[];(items=items.filter(function(item){return item.parent==targetModelNameValue&&"field"==item.type})).map(function(item){"id"!=item.text&&"uid"!=item.text&&selectItems.push({id:item.text+"@@"+item.datatype,text:item.text})});var multiSelectItems=React.createElement(MultiSelect,{label:"Select Fields",invalid:!1,invalidText:"Invalid Selection",onChange:function(evt){return _this13.setState({selectedFields:evt.selectedItems})},items:selectItems,itemToString:function(item){return item.text}});return React.createElement(React.Fragment,null,multiSelectItems,this.state.selectedField?React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected Fields"),React.createElement(OrderedListComp,{data:this.state.selectedFields,labelAttr:"text",updatedList:function(data){return _this13.setState({selectedFields:data})}})):null,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this13.optionSelected="home",_this13.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this13.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var active_widget_field_value="";if(_this13.props.active_widget_temp_field_value&&_this13.props.active_widget_temp_field_value.length>0)_this13.props.active_widget_temp_field_value.push(_this13.state.selectedField),active_widget_field_value="@@["+_this13.props.active_widget_temp_field_value.join(".")+"]";else if(active_widget_field_value&&active_widget_field_value.indexOf("@@[")>-1){var propVal=active_widget_field_value.split("@@[")[1];(propVal=(propVal=propVal.substr(0,propVal.length-1)).split(".")).push(_this13.state.selectedField),active_widget_field_value="@@["+propVal.join(".")+"]"}else active_widget_field_value="@@["+_this13.state.selectedField+"]";_this13.props.updateStore({updates:{active_widget_field_value:active_widget_field_value,active_widget_temp_field_value:[],showpreview:!1}})}},"Select")))}},{key:"getExistingPageTemplate",value:function(){var _this14=this,pageToRender=[];pageToRender.push(React.createElement(SelectItem,{labelText:"Choose the page to insert",value:"none",text:"Select Page"})),this.state.pages2Show?this.state.pages2Show.map(function(page){pageToRender.push(React.createElement(SelectItem,{value:page.uid,text:page.Name}))}):this.loadSlides();var pageParametersEl=null,ParamPicker=PageParameter();if(this.state.selectedPage){var matchingPage=this.state.pages2Show.filter(function(page2check){return page2check.uid==_this14.state.selectedPage});if(matchingPage&&1==matchingPage.length){var isParentPageModelDriven=this.props.activePage&&this.props.activePage.pageType&&"FreeForm"!=this.props.activePage.pageType,currentPageParams=[];"CreateView"!=matchingPage[0].Type&&"EditView"!=matchingPage[0].Type||currentPageParams.push("recordid"),matchingPage[0].props&&Object.keys(matchingPage[0].props).map(function(propId){"ModelName"!=matchingPage[0].props[propId].Name&&"ModelScope"!=matchingPage[0].props[propId].Name&&currentPageParams.push(matchingPage[0].props[propId].Name)}),pageParametersEl=React.createElement(ParamPicker,{updateProps:function(data){return _this14.setState({pageParameters:data})},parentPageParams:isParentPageModelDriven?{recordid:"Parent Record"}:this.props.activePage&&this.props.activePage.props||{},widgetData:this.props.widgetData,params:currentPageParams})}}return React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Choose the page",onChange:function(e){_this14.setState({selectedPage:e.target.value})}},pageToRender),React.createElement("br",null),React.createElement("div",{style:{position:"absolute",left:"20%",display:"inline-grid"}},pageParametersEl?React.createElement("label",{className:"bx--label",style:{fontSize:"medium"}},"Page Parameters"):null,pageParametersEl),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this14.optionSelected="home",_this14.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this14.handleSelectPage()}},"Select")))}},{key:"getDefaultTemplate",value:function(){var simpleListStyle={width:"45%",justifyContent:"center",padding:2};return this.props.activePage.model&&this.props.activePage.modelscope||(simpleListStyle.width="100%",simpleListStyle.left="50%"),React.createElement("div",{style:{display:"inline-flex",position:"absolute",left:"20%"}},React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(Icon1,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Insert a Page?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"Got your page ready? If not, create a page first and then insert it here. BTW, you may be asked to wire the params with environment for interactive rendering."),React.createElement(Button,{style:{position:"absolute",bottom:"1rem",left:"5rem"},onClick:this.handleConfigurationChange,value:"existing_page"},"Choose the page")),React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(Icon2,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Insert a List?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"You can insert a related list using an existing relationship or create one from here. Also, you are free to build a non-related simple list by choosing the model and applying the filter."),React.createElement("div",{style:{display:"inline-flex",position:"absolute",bottom:"1rem"}},React.createElement(Button,{style:simpleListStyle,onClick:this.handleConfigurationChange,value:"simple_list"},"Simple List"),this.props.activePage.model&&this.props.activePage.modelscope?React.createElement(OverflowMenu,{style:{backgroundColor:"rgb(0, 98, 255)",color:"rgb(255, 255, 255)",fontSize:"medium",borderWidth:3,borderStyle:"solid",borderColor:"transparent",width:"55%",height:"3rem",padding:3,marginLeft:"1rem"},renderIcon:function(){return React.createElement("div",{style:{padding:"0 1rem"}},"Related List")},"data-floating-menu-container":"true"},React.createElement(OverflowMenuItem,{itemText:"Existing Relationship",onClick:this.handleConfigurationChange,value:"existing_relationship"}),React.createElement(OverflowMenuItem,{itemText:"New Relationship",onClick:this.handleConfigurationChange,value:"new_relationship_with_existing_model"}),React.createElement(OverflowMenuItem,{itemText:"New Model",onClick:this.handleConfigurationChange,value:"new_relationship_with_new_model"})):null)))}},{key:"getTemplate",value:function(){var template=null;switch(this.optionSelected){case"existing_relationship":template=this.getExistingRelationShipTemplate();break;case"new_relationship_with_existing_model":template=this.getNewRelationShipWithExistingModel();break;case"new_relationship_with_new_model":template=this.getNewRelationShipWithNewModel();break;case"existing_page":template=this.getExistingPageTemplate();break;case"simple_list":template=this.getSimpleListTemplate();break;default:template=this.getDefaultTemplate()}return template}},{key:"getBreadCrumb",value:function(){var breadCrumbKey=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.key:"",breadCrumbStage=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.stage:"",breadCrumbElements=[];return breadCrumbKey?(breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,"Choose a configuration"))),this.breadCrumbPaths[breadCrumbKey].map(function(breadCrumbItem,indx){breadCrumbItem.name==breadCrumbStage?breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,breadCrumbItem.value))):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,breadCrumbItem.value)))})):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,"Choose a configuration"))),breadCrumbElements}},{key:"render",value:function(){var template=this.getTemplate(),breadCrumb=this.getBreadCrumb();return React.createElement("div",{style:{overflow:"hidden"}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ShowTabMappingDialog/Style.css"); @import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement("nav",{class:"bx--breadcrumb bx--breadcrumb--no-trailing-slash","aria-label":"breadcrumb",style:{position:"sticky",top:0}},breadCrumb),React.createElement("div",{className:"rel-options",style:{padding:10,height:"25rem",overflow:"scroll",marginLeft:"20%",width:"70%"}},template))}}]),_ShowTabMappingDialog_}(React.Component),_export("ShowTabMappingDialog",ShowTabMappingDialog=function(props){return _ShowTabMappingDialog_}),_export("ShowTabMappingDialog",ShowTabMappingDialog),_export("default",ShowTabMappingDialog),_export("states",states=[{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"current_filter",AccessPath:"current_filter",DefaultValue:'{"current_filter": {}}'},{KeyName:"widgetData",AccessPath:"pages.${active_page_id}.widgets",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {}}}}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"schemaFields",AccessPath:"schema.fields",DefaultValue:'{"schema": {"fields": []}}'},{KeyName:"widgetProps",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}.props",DefaultValue:'{"pages": {"${active_page_id}": {"widgets":{"${active_widget_id}": {"props": {}}}}}}'},{KeyName:"schemaTables",AccessPath:"schema.tables",DefaultValue:'{"schema": {"tables": []}}'},{KeyName:"active_tab_id",AccessPath:"active_tab_id",DefaultValue:'{"active_tab_id":""}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/ShowTabMappingDialog/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","carbon-addons-cloud-react","@carbon/icons-react/lib/blog/32","@carbon/icons-react/lib/list--bulleted/32","component/mmf/PageParameter/Definition.js","component/mmf/OrderedList/Definition.js","component/studio/SrsReference/Definition.js"],function(_export,_context9){"use strict";var _regeneratorRuntime,_extends,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,NumberInput,Button,MultiSelect,Tabs,Tab,Select,SelectItem,TextInput,OverflowMenu,OverflowMenuItem,AddAlt20,SubAlt20,Card,Icon1,Icon2,PageParameter,OrderedList,SrsReference,_ShowTabMappingDialog_,ShowTabMappingDialog;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){NumberInput=_carbonComponentsReact.NumberInput,_carbonComponentsReact.Breadcrumb,_carbonComponentsReact.BreadcrumbItem,Button=_carbonComponentsReact.Button,_carbonComponentsReact.FormGroup,_carbonComponentsReact.RadioButtonGroup,_carbonComponentsReact.RadioButton,MultiSelect=_carbonComponentsReact.MultiSelect,Tabs=_carbonComponentsReact.Tabs,Tab=_carbonComponentsReact.Tab,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput,OverflowMenu=_carbonComponentsReact.OverflowMenu,OverflowMenuItem=_carbonComponentsReact.OverflowMenuItem},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card},function(_carbonIconsReactLibBlog){Icon1=_carbonIconsReactLibBlog.default},function(_carbonIconsReactLibListBulleted){Icon2=_carbonIconsReactLibListBulleted.default},function(_componentMmfPageParameterDefinitionJs){PageParameter=_componentMmfPageParameterDefinitionJs.PageParameter},function(_componentMmfOrderedListDefinitionJs){OrderedList=_componentMmfOrderedListDefinitionJs.OrderedList},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference}],execute:function(){_ShowTabMappingDialog_=function(_React$Component){function _ShowTabMappingDialog_(props){_classCallCheck(this,_ShowTabMappingDialog_);var _this=_possibleConstructorReturn(this,(_ShowTabMappingDialog_.__proto__||Object.getPrototypeOf(_ShowTabMappingDialog_)).call(this,props));return _this.state={templateChanged:!1,selectedFields:[],selectedRelationShip:null,realtionshipSelected:!1,targetModel:null,foreignKey:null,relationShipcreated:!1,selectedFilter:"",foreignKeyType:"existing",selectedPage:null,fieldList:[{name:"",type:""}],currentBreadCrumbPath:{},pages:[],pageParameters:null,selectedPageSize:10,selectedCreatePageId:"",selectedEditPageId:"",listTitle:""},_this.breadCrumbPaths={home:[{name:"",value:""}],existing_relationship:[{name:"select_relation",value:"Select Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],new_relationship_with_existing_model:[{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],new_relationship_with_new_model:[{name:"create_model",value:"Create Model"},{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],existing_page:[{name:"select_page",value:"Select Page"}]},_this.loadSlides=_this.loadSlides.bind(_this),_this.handleConfigurationChange=_this.handleConfigurationChange.bind(_this),_this.handleSelect=_this.handleSelect.bind(_this),_this.handleNext=_this.handleNext.bind(_this),_this.removeField=_this.removeField.bind(_this),_this.addField=_this.addField.bind(_this),_this.handleSelectPage=_this.handleSelectPage.bind(_this),_this.handleSelectedRelationship=_this.handleSelectedRelationship.bind(_this),_this.handleSimpleList=_this.handleSimpleList.bind(_this),_this.createRelationship=_this.createRelationship.bind(_this),_this.updateSchema=_this.updateSchema.bind(_this),_this.getFieldSelectionTemplate=_this.getFieldSelectionTemplate.bind(_this),_this.getFieldList=_this.getFieldList.bind(_this),_this.getModelName=_this.getModelName.bind(_this),_this.getExistingRelationShipTemplate=_this.getExistingRelationShipTemplate.bind(_this),_this.getNewRelationShipWithNewModel=_this.getNewRelationShipWithNewModel.bind(_this),_this.getNewRelationShipWithExistingModel=_this.getNewRelationShipWithExistingModel.bind(_this),_this.getExistingFieldsTemplate=_this.getExistingFieldsTemplate.bind(_this),_this.getExistingPageTemplate=_this.getExistingPageTemplate.bind(_this),_this.getSimpleListTemplate=_this.getSimpleListTemplate.bind(_this),_this.getDefaultTemplate=_this.getDefaultTemplate.bind(_this),_this.getTemplate=_this.getTemplate.bind(_this),_this.getBreadCrumb=_this.getBreadCrumb.bind(_this),_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this}return _inherits(_ShowTabMappingDialog_,_React$Component),_createClass(_ShowTabMappingDialog_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.current_filter,this.props.current_filter)||this.setState({selectedFilter:this.props.current_filter})}},{key:"handleConfigurationChange",value:function(e){this.optionSelected=e.target.value?e.target.value:e.currentTarget.value?e.currentTarget.value:"",this.handleNext()}},{key:"handleSelect",value:function(){this.setState({realtionshipSelected:!0})}},{key:"handleNext",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var newStateObj;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:newStateObj={},this.optionSelected?("home"==this.optionSelected&&(newStateObj={realtionshipSelected:!1,selectedRelationShip:null,selectedFields:null,selectedFilter:null,selectedPageSize:null,fieldList:null,modelCreated:!1,targetModel:null,foreignKey:"",relationshipName:"",foreignKeyType:null,relationship_alias:"",pages2Show:null,pageParameters:null,selectedPage:null,templateChanged:!0,currentBreadCrumbPath:{key:this.optionSelected,stage:this.breadCrumbPaths[this.optionSelected][0].name}}),this.setState(_extends({},newStateObj))):this.props.addErrorMessage({title:"Error - ",subtitle:"Please select one of the available choices"});case 2:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"removeField",value:function(index){var fields=this.state.fieldList;fields.splice(index,1),this.setState({fieldList:fields})}},{key:"addField",value:function(){var fields=this.state.fieldList;fields.push({name:"",type:""}),this.setState({fieldList:fields})}},{key:"handleDone",value:function(){}},{key:"handleCancel",value:function(){}},{key:"handleSelectPage",value:function(){var _this2=this,selectedPage=this.state.selectedPage,updatedProps=this.props.widgetProps||{},tabs=JSON.parse(updatedProps.tabs)||[],matchingTab=tabs.slice().filter(function(tabToUpdate){return tabToUpdate.tab_id==_this2.props.active_tab_id});(matchingTab=matchingTab&&matchingTab.length>0?matchingTab[0]:null)&&(matchingTab.tabInfo.type="page",matchingTab.tabInfo.page={page_id:selectedPage,params:this.state.pageParameters},updatedProps.tabs=JSON.stringify(tabs),this.props.updateStore({updates:{widgetProps:updatedProps,showpreview:!1}}))}},{key:"handleSimpleList",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var selectedTable,selectedFields,selectedFilter,selectedPageSize,title,selectedCreatePathId,selectedEditPathId,updatedProps,tabs,tabsToUpdate,matchingTab,_this3=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:selectedTable=this.state.selectedTable?this.state.selectedTable:"",selectedFields=this.state.selectedFields?this.state.selectedFields:[],selectedFilter=this.state.selectedFilter?this.state.selectedFilter:{},selectedPageSize=this.state.selectedPageSize?this.state.selectedPageSize:10,title=this.state.listTitle?this.state.listTitle:selectedTable+" List",selectedCreatePathId=this.state.selectedCreatePageId?this.state.selectedCreatePageId.id:"",selectedEditPathId=this.state.selectedEditPathId?this.state.selectedEditPathId.id:"",updatedProps=this.props.widgetProps||{},tabs=JSON.parse(updatedProps.tabs)||[],tabsToUpdate=tabs.slice(),(matchingTab=(matchingTab=tabsToUpdate.filter(function(tabToUpdate){return tabToUpdate.tab_id==_this3.props.active_tab_id}))&&matchingTab.length>0?matchingTab[0]:null)&&(matchingTab.tabInfo.type="simple_list",matchingTab.tabInfo.list={table:selectedTable,fields:selectedFields,filter:selectedFilter,pagesize:selectedPageSize},title&&(matchingTab.tabInfo.list.title=title),selectedCreatePathId&&(matchingTab.tabInfo.list.createview=selectedCreatePathId),selectedEditPathId&&(matchingTab.tabInfo.list.editview=selectedEditPathId),updatedProps.tabs=JSON.stringify(tabs),this.props.updateStore({updates:{widgetProps:updatedProps,showpreview:!1}}));case 13:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"handleSelectedRelationship",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var relationshipName,selectedTable,selectedFields,selectedFilter,selectedPageSize,parentTable,title,selectedCreatePathId,selectedEditPathId,updatedProps,tabs,tabsToUpdate,matchingTab,_this4=this;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:relationshipName=this.state.selectedRelationShip?this.state.selectedRelationShip.name:"",selectedTable=this.state.selectedRelationShip?this.state.selectedRelationShip.table:"",selectedFields=this.state.selectedFields?this.state.selectedFields:[],selectedFilter=this.state.selectedFilter?this.state.selectedFilter:{},selectedPageSize=this.state.selectedPageSize?this.state.selectedPageSize:10,parentTable=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),title=this.state.listTitle?this.state.listTitle:selectedTable+" List",selectedCreatePathId=this.state.selectedCreatePageId?this.state.selectedCreatePageId.id:"",selectedEditPathId=this.state.selectedEditPageId?this.state.selectedEditPageId.id:"",updatedProps=this.props.widgetProps||{},tabs=JSON.parse(updatedProps.tabs)||[],tabsToUpdate=tabs.slice(),(matchingTab=(matchingTab=tabsToUpdate.filter(function(tabToUpdate){return tabToUpdate.tab_id==_this4.props.active_tab_id}))&&matchingTab.length>0?matchingTab[0]:null)&&(matchingTab.tabInfo.type="related_list",matchingTab.tabInfo.list={table:parentTable,fields:selectedFields,filter:selectedFilter,pagesize:selectedPageSize,relation:relationshipName,relatedtable:selectedTable,params:this.state.pageParameters},title&&(matchingTab.tabInfo.list.title=title),selectedCreatePathId&&(matchingTab.tabInfo.list.createview=selectedCreatePathId),selectedEditPathId&&(matchingTab.tabInfo.list.editview=selectedEditPathId),updatedProps.tabs=JSON.stringify(tabs),this.props.updateStore({updates:{widgetProps:updatedProps,showpreview:!1}}));case 15:case"end":return _context3.stop()}},_callee3,this)}));return function(){return _ref3.apply(this,arguments)}}()},{key:"updateSchema",value:function(){var _this5=this;return new Promise(function(resolve,reject){var self=_this5;$script.runAtServer("mmf.getSchemaData").then(function(schemaData){self.props.updateStore({updates:{schema:schemaData}}),resolve()})})}},{key:"createRelationship",value:function(){this.setState({realtionshipSelected:!0})}},{key:"getModelName",value:function(name,scope){return"mmf"==scope&&name.startsWith("Meta")?name:name+"_"+scope}},{key:"getFieldSelectionTemplate",value:function(){var _this6=this,fieldList=this.getFieldList();return React.createElement(React.Fragment,null,React.createElement("h4",null,"Select Fields"),React.createElement("br",null),fieldList.map(function(element){return element}),React.createElement(Button,{style:this.buttonStyle,onClick:function(){_this6.handleDone()}},"Done"))}},{key:"getFieldList",value:function(){var _this7=this,fieldList=[],length=this.state.fieldList.length;return this.state.fieldList.forEach(function(field,i){var element=React.createElement("div",{className:"field-create"},React.createElement(TextInput,{placeholder:"Field Name"}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(){}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(i){_this7.removeField(i)}}):null," ",React.createElement(AddAlt20,{onClick:function(){_this7.addField()}}));fieldList.push(element)}),fieldList}},{key:"getExistingRelationShipTemplate",value:function(){var _this8=this,OrderedListComp=OrderedList(),relationships=this.props.schemaFields?this.props.schemaFields:[],modelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);relationships=relationships.filter(function(item){return item.parent==modelNameValue&&"one2many"==item.type});var selectedRelationships=[],selectedField=null,selectedFieldInfo=null;selectedRelationships.push(React.createElement(SelectItem,{value:"none",text:"Select Relationship"})),relationships.map(function(item){selectedRelationships.push(React.createElement(SelectItem,{value:item.to+"@@"+item.text,text:item.text}))});var selectRelationShipField=null;if(this.state.selectedRelationShip){var fieldsInRelatedModel=this.props.schemaFields?this.props.schemaFields:[],selectFieldsInRelatedModel=[];(fieldsInRelatedModel=fieldsInRelatedModel.filter(function(item){return item.parent==_this8.state.selectedRelationShip.table&&"field"==item.type})).map(function(item){"id"!=item.text&&"uid"!=item.text&&selectFieldsInRelatedModel.push({id:item.text+"@@"+item.datatype,text:item.text})}),selectedField=React.createElement(MultiSelect,{label:"Select Fields",invalid:!1,invalidText:"Invalid Selection",onChange:function(evt){return _this8.setState({selectedFields:evt.selectedItems})},items:selectFieldsInRelatedModel,itemToString:function(item){return item.text}})}else selectRelationShipField=React.createElement("div",{style:{position:"absolute",left:"40%",top:"40%"}},React.createElement(Select,{labelText:"Select Relationship",onChange:function(e){e.target.value&&e.target.value.indexOf("@@")>-1&&_this8.setState({selectedRelationShip:{table:e.target.value.split("@@")[0],name:e.target.value.split("@@")[1]}})}},selectedRelationships));this.state.selectedFields&&this.state.selectedFields.length>0&&(selectedFieldInfo=React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected RelationShip"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedRelationShip.table)),React.createElement("br",null),React.createElement("h4",null,"Selected Fields"),React.createElement(OrderedListComp,{data:this.state.selectedFields,labelAttr:"text",updatedList:function(data){return _this8.setState({selectedFields:data})}})));var pageParametersEl=null,ParamPicker=PageParameter();if(this.state.selectedRelationShip){pageParametersEl=React.createElement(ParamPicker,{updateProps:function(data){return _this8.setState({pageParameters:data})},parentPageParams:{recordid:"Parent Record ID"},widgetData:this.props.widgetData,params:["recordid"]})}var RecordLookup=SrsReference(),editPageProps={title:"Choose Edit Page",tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:JSON.stringify({where:{Type:"EditView"}}),searchfields:"Name",onChange:function(id){_this8.setState({selectedEditPageId:id})}},createPageProps={title:"Choose Create Page",tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:JSON.stringify({where:{Type:"CreateView"}}),searchfields:"Name",onChange:function(id){_this8.setState({selectedCreatePageId:id})}},fieldsAndFilter=this.state.selectedRelationShip?React.createElement(Tabs,{selected:0},React.createElement(Tab,{label:"General"},React.createElement("div",{style:{marginTop:10}},React.createElement(TextInput,{labelText:"List Title",placeholder:"Enter title...",onChange:function(e){_this8.setState({listTitle:e.target.value})}}),React.createElement(NumberInput,{label:"Page Size",value:10,onChange:function(e){_this8.setState({selectedPageSize:e.target.value})}}),React.createElement(RecordLookup,editPageProps),React.createElement(RecordLookup,createPageProps))),React.createElement(Tab,{label:"Field Selection"},React.createElement("div",{style:{marginTop:10}},selectedField,selectedFieldInfo)),React.createElement(Tab,{label:"Apply Filter"},this.state.selectedRelationShip?React.createElement("srs-filter",{maxheight:"15rem",style:{position:"absolute",left:"20%"},tableName:this.state.selectedRelationShip.table}):null),React.createElement(Tab,{label:"Related Record"},React.createElement("div",{style:{display:"inline-flex",position:"absolute",left:"30%",marginTop:20}},pageParametersEl))):null;return React.createElement(React.Fragment,null,selectRelationShipField,fieldsAndFilter,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this8.optionSelected="home",_this8.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this8.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this8.handleSelectedRelationship()}},"Select")))}},{key:"getSimpleListTemplate",value:function(){var _this9=this,OrderedListComp=OrderedList(),tableItems=(this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),[]);tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables&&this.props.schemaTables.sort().map(function(schemaTable,indx){tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTable}))});var selectedField=null,selectedFieldInfo=null,selectedTableEl=null;if(this.state.selectedTable){var fieldItems=[],fields=this.props.schemaFields?this.props.schemaFields:[];(fields=fields.filter(function(item){return item.parent==_this9.state.selectedTable&&"field"==item.type})).map(function(item){"id"!=item.text&&"uid"!=item.text&&fieldItems.push({id:item.text+"@@"+item.datatype,text:item.text})}),selectedField=React.createElement(MultiSelect,{label:"Select Fields",invalid:!1,invalidText:"Invalid Selection",onChange:function(evt){return _this9.setState({selectedFields:evt.selectedItems})},items:fieldItems,itemToString:function(item){return item.text}})}else selectedTableEl=React.createElement("div",{style:{position:"absolute",left:"40%",top:"40%"}},React.createElement(Select,{labelText:"Choose a table",onChange:function(e){_this9.setState({selectedTable:e.target.value})}},tableItems));this.state.selectedFields&&this.state.selectedFields.length>0&&(selectedFieldInfo=React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected Fields"),React.createElement(OrderedListComp,{data:this.state.selectedFields,labelAttr:"text",updatedList:function(data){return _this9.setState({selectedFields:data})}})));var RecordLookup=SrsReference(),editPageProps={tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:{where:{Type:"EditView"}},searchfields:"Name",onChange:function(id){_this9.setState({selectedEditPageId:id})}},createPageProps={tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:{where:{Type:"CreateView"}},searchfields:"Name",onChange:function(id){_this9.setState({selectedCreatePageId:id})}},fieldsAndFilter=this.state.selectedTable?React.createElement(Tabs,{selected:0},React.createElement(Tab,{label:"General"},React.createElement("div",{style:{marginTop:10}},React.createElement(TextInput,{labelText:"List Title",placeholder:"Enter title...",onChange:function(e){_this9.setState({listTitle:e.target.value})}}),React.createElement(NumberInput,{label:"Page Size",value:10,onChange:function(e){_this9.setState({selectedPageSize:e.target.value})}}),React.createElement(RecordLookup,editPageProps),React.createElement(RecordLookup,createPageProps))),React.createElement(Tab,{label:"Field Selection"},React.createElement("div",{style:{marginTop:10}},selectedField,selectedFieldInfo)),React.createElement(Tab,{label:"Apply Filter"},this.state.selectedTable?React.createElement("srs-filter",{maxheight:"15rem",style:{position:"absolute",left:"20%"},tableName:this.state.selectedTable}):null)):null;return React.createElement(React.Fragment,null,selectedTableEl,fieldsAndFilter,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this9.optionSelected="home",_this9.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this9.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this9.handleSimpleList()}},"Select")))}},{key:"getNewRelationShipWithNewModel",value:function(){var _this10=this,template=null;if(this.state.modelCreated)template=this.getNewRelationShipWithExistingModel(this.getModelName(this.state.modelName,this.state.modelScope));else{var fieldList=[],length=this.state.fieldList.length;this.state.fieldList.forEach(function(field,indx){var element=React.createElement("div",{className:"field-create"},React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){(fieldList=_this10.state.fieldList)[indx].id=e.target.value,_this10.setState({fieldList:fieldList})}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){(fieldList=_this10.state.fieldList)[indx].datatype=e.target.value,_this10.setState({fieldList:fieldList})}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(indx){_this10.removeField(indx)}}):null," ",React.createElement(AddAlt20,{onClick:function(e){_this10.addField()}}));fieldList.push(element)}),template=React.createElement("div",null,React.createElement(TextInput,{placeholder:"Model Name",onChange:function(e){_this10.setState({modelName:e.target.value})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",onChange:function(e){_this10.setState({modelScope:e.target.value})}})," ",React.createElement("br",null),fieldList.map(function(element){return element}),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this10.optionSelected="home",_this10.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){_this10.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){var _ref4,self=_this10;$qry.waituntil("model.upsert",_this10.getModelName(_this10.state.modelName,_this10.state.modelScope)).then((_ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(result){return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,self.updateSchema();case 2:_this10.setState({modelCreated:!0,targetModel:_this10.getModelName(_this10.state.modelName,_this10.state.modelScope)});case 3:case"end":return _context4.stop()}},_callee4,_this10)})),function(_x){return _ref4.apply(this,arguments)})),$script.getscript("createModel").then(function(_ref5){(0,_ref5.default)(_this10.state.modelName,_this10.state.modelScope,_this10.state.fieldList).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+_this10.state.modelName+"_"+_this10.state.modelScope+" updated."})})})}},"Create")))}return template}},{key:"getNewRelationShipWithExistingModel",value:function(modelNameValue){var _this11=this,tableItems=[];tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables&&this.props.schemaTables.sort().map(function(schemaTable,indx){tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTable}))});var targetModelFields=this.props.schemaFields?this.props.schemaFields:[],targetModel=modelNameValue||this.state.targetModel;targetModelFields=targetModelFields.filter(function(item){return item.parent==targetModel&&"field"==item.type});var targetModelFieldItems=[];targetModelFieldItems.push(React.createElement(SelectItem,{value:"none",text:"Select Field"})),targetModelFields.map(function(item){"id"!=item.text&&targetModelFieldItems.push(React.createElement(SelectItem,{value:item.id,text:item.text}))});var targetModelWidget=null;targetModelWidget=modelNameValue?React.createElement(TextInput,{placeholder:"Target Model",value:modelNameValue}):React.createElement(Select,{labelText:"Target Model",onChange:function(e){_this11.setState({targetModel:e.target.value})}},tableItems);var formContent=null,foreignKeyField=null;switch(this.state.foreignKeyType){case"existing":foreignKeyField=React.createElement(Select,{labelText:"Foreign Key",onChange:function(e){_this11.setState({foreignKey:e.target.value})}},targetModelFieldItems);break;case"new":foreignKeyField=React.createElement(TextInput,{labelText:"Foreign Key",value:this.state.foreignKey,onChange:function(e){_this11.setState({foreignKey:e.target.value})}})}return formContent=this.state.relationShipcreated?this.getExistingRelationShipTemplate(!0):React.createElement(React.Fragment,null,React.createElement(TextInput,{labelText:"Relationship Name",placeholder:"Relatinship Name",onChange:function(e){_this11.setState({relationshipName:e.target.value})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Source Model",value:this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),disabled:!0})," ",React.createElement("br",null),targetModelWidget,React.createElement("br",null),React.createElement(Select,{labelText:"Choose Foreign Key from",defaultValue:this.state.foreignKeyType,onChange:function(e){_this11.setState({foreignKeyType:e.target.value})}},React.createElement(SelectItem,{value:"existing",text:"Existing Field"}),React.createElement(SelectItem,{value:"new",text:"New Field"})),React.createElement("br",null),foreignKeyField,React.createElement(TextInput,{labelText:"Foreign key Alias",placeholder:"Alias",onChange:function(e){_this11.setState({relationship_alias:e.target.value})}})," ",React.createElement("br",null),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this11.optionSelected="home",_this11.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this11.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var self=_this11,targetModel=self.state.targetModel,targetModelName=targetModel,targetModelScope="mmf";if(!self.state.foreignKey||self.state.foreignKey.indexOf(" ")>-1)_this11.props.addErrorMessage({title:"Error - ",subtitle:"Foreign Key field name contains special characters. Please remove and try again. "});else{if(targetModel.indexOf("_")>-1){var targetModelParts=targetModel.split("_");targetModelName=targetModelParts.slice(0,targetModelParts.length-1).join("_"),targetModelScope=targetModelParts.slice(targetModelParts.length-1).join()}var _ref8,_ref6;"existing"==self.state.foreignKeyType?($qry.waituntil("relationship.upsert",_this11.state.relationshipName).then((_ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(result){return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,self.updateSchema();case 2:self.setState({relationShipcreated:!0,selectedRelationShip:{table:targetModel,name:_this11.state.relationshipName}});case 3:case"end":return _context5.stop()}},_callee5,_this11)})),function(_x2){return _ref6.apply(this,arguments)})),$script.getscript("mmf.createRelationship").then(function(_ref7){var createRelationshipFn=_ref7.default,targetModel=self.state.modelName?self.getModelName(self.state.modelName,self.state.modelScope):self.state.targetModel,sourceModelNameValue=self.getModelName(self.props.activePage.model,self.props.activePage.modelscope);createRelationshipFn(self.state.relationshipName,sourceModelNameValue,targetModel,"hasMany",self.state.foreignKey,self.state.relationship_alias).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Relationship "+self.state.relationshipName+" created."})})})):($qry.waituntil("model.upsert",targetModel).then((_ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(result){return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,self.updateSchema();case 2:$qry.waituntil("relationship.upsert",_this11.state.relationshipName).then(function(){var _ref9=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(result){return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,self.updateSchema();case 2:self.setState({relationShipcreated:!0,selectedRelationShip:{table:targetModel,name:_this11.state.relationshipName}});case 3:case"end":return _context6.stop()}},_callee6,_this11)}));return function(_x4){return _ref9.apply(this,arguments)}}()),$script.getscript("mmf.createRelationship").then(function(_ref10){var createRelationshipFn=_ref10.default,targetModel=self.state.modelName?self.getModelName(self.state.modelName,self.state.modelScope):self.state.targetModel,sourceModelNameValue=self.getModelName(self.props.activePage.model,self.props.activePage.modelscope);createRelationshipFn(self.state.relationshipName,sourceModelNameValue,targetModel,"hasMany",self.state.foreignKey,self.state.relationship_alias).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Relationship "+self.state.relationshipName+" created."})})});case 4:case"end":return _context7.stop()}},_callee7,_this11)})),function(_x3){return _ref8.apply(this,arguments)})),$script.getscript("addFields2Model").then(function(_ref11){(0,_ref11.default)(targetModelName,targetModelScope,[{name:self.state.foreignKey,type:"String"}]).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+ttargetModelName+"_"+targetModelScope+" updated."})})}))}}},"Create"))),React.createElement("div",null,formContent)}},{key:"loadSlides",value:function(){var _ref12=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(){var pages,pageDetails,pageData,_this12=this;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return pages=[],_context8.next=3,$qry.run("mmf.getAllSlides",{Scope:this.props.currentscope});case 3:pageDetails=_context8.sent,pageData=pageDetails&&pageDetails.slides?pageDetails.slides:{},Object.keys(pageData).map(function(pageName){var pageObj=pageData[pageName];pageObj.props&&(Object.keys(pageObj.props).map(function(propKey){switch(pageObj.props[propKey].Name){case"ModelName":pageObj.props[propKey].Value;break;case"ModelScope":pageObj.props[propKey].Value}}),pageObj.uid!=_this12.props.activePage.id&&pages.push(pageObj))}),this.setState({pages2Show:pages});case 7:case"end":return _context8.stop()}},_callee8,this)}));return function(){return _ref12.apply(this,arguments)}}()},{key:"getExistingFieldsTemplate",value:function(fromRelationShip,relationshipModelName){var _this13=this,OrderedListComp=OrderedList(),items=this.props.schemaFields?this.props.schemaFields:[],targetModelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);fromRelationShip&&(targetModelNameValue=relationshipModelName);var selectItems=[];(items=items.filter(function(item){return item.parent==targetModelNameValue&&"field"==item.type})).map(function(item){"id"!=item.text&&"uid"!=item.text&&selectItems.push({id:item.text+"@@"+item.datatype,text:item.text})});var multiSelectItems=React.createElement(MultiSelect,{label:"Select Fields",invalid:!1,invalidText:"Invalid Selection",onChange:function(evt){return _this13.setState({selectedFields:evt.selectedItems})},items:selectItems,itemToString:function(item){return item.text}});return React.createElement(React.Fragment,null,multiSelectItems,this.state.selectedField?React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected Fields"),React.createElement(OrderedListComp,{data:this.state.selectedFields,labelAttr:"text",updatedList:function(data){return _this13.setState({selectedFields:data})}})):null,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this13.optionSelected="home",_this13.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this13.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var active_widget_field_value="";if(_this13.props.active_widget_temp_field_value&&_this13.props.active_widget_temp_field_value.length>0)_this13.props.active_widget_temp_field_value.push(_this13.state.selectedField),active_widget_field_value="@@["+_this13.props.active_widget_temp_field_value.join(".")+"]";else if(active_widget_field_value&&active_widget_field_value.indexOf("@@[")>-1){var propVal=active_widget_field_value.split("@@[")[1];(propVal=(propVal=propVal.substr(0,propVal.length-1)).split(".")).push(_this13.state.selectedField),active_widget_field_value="@@["+propVal.join(".")+"]"}else active_widget_field_value="@@["+_this13.state.selectedField+"]";_this13.props.updateStore({updates:{active_widget_field_value:active_widget_field_value,active_widget_temp_field_value:[],showpreview:!1}})}},"Select")))}},{key:"getExistingPageTemplate",value:function(){var _this14=this,pageToRender=[];pageToRender.push(React.createElement(SelectItem,{labelText:"Choose the page to insert",value:"none",text:"Select Page"})),this.state.pages2Show?this.state.pages2Show.map(function(page){pageToRender.push(React.createElement(SelectItem,{value:page.uid,text:page.Name}))}):this.loadSlides();var pageParametersEl=null,ParamPicker=PageParameter();if(this.state.selectedPage){var matchingPage=this.state.pages2Show.filter(function(page2check){return page2check.uid==_this14.state.selectedPage});if(matchingPage&&1==matchingPage.length){var isParentPageModelDriven=this.props.activePage&&this.props.activePage.pageType&&"FreeForm"!=this.props.activePage.pageType,currentPageParams=[];"CreateView"!=matchingPage[0].Type&&"EditView"!=matchingPage[0].Type||currentPageParams.push("recordid"),matchingPage[0].props&&Object.keys(matchingPage[0].props).map(function(propId){"ModelName"!=matchingPage[0].props[propId].Name&&"ModelScope"!=matchingPage[0].props[propId].Name&&currentPageParams.push(matchingPage[0].props[propId].Name)}),pageParametersEl=React.createElement(ParamPicker,{updateProps:function(data){return _this14.setState({pageParameters:data})},parentPageParams:isParentPageModelDriven?{recordid:"Parent Record"}:this.props.activePage&&this.props.activePage.props||{},widgetData:this.props.widgetData,params:currentPageParams})}}return React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Choose the page",onChange:function(e){_this14.setState({selectedPage:e.target.value})}},pageToRender),React.createElement("br",null),React.createElement("div",{style:{position:"absolute",left:"20%",display:"inline-grid"}},pageParametersEl?React.createElement("label",{className:"bx--label",style:{fontSize:"medium"}},"Page Parameters"):null,pageParametersEl),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this14.optionSelected="home",_this14.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this14.handleSelectPage()}},"Select")))}},{key:"getDefaultTemplate",value:function(){var simpleListStyle={width:"45%",justifyContent:"center",padding:2};return this.props.activePage.model&&this.props.activePage.modelscope||(simpleListStyle.width="100%",simpleListStyle.left="50%"),React.createElement("div",{style:{display:"inline-flex",position:"absolute",left:"20%"}},React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(Icon1,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Insert a Page?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"Got your page ready? If not, create a page first and then insert it here. BTW, you may be asked to wire the params with environment for interactive rendering."),React.createElement(Button,{style:{position:"absolute",bottom:"1rem",left:"5rem"},onClick:this.handleConfigurationChange,value:"existing_page"},"Choose the page")),React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(Icon2,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Insert a List?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"You can insert a related list using an existing relationship or create one from here. Also, you are free to build a non-related simple list by choosing the model and applying the filter."),React.createElement("div",{style:{display:"inline-flex",position:"absolute",bottom:"1rem"}},React.createElement(Button,{style:simpleListStyle,onClick:this.handleConfigurationChange,value:"simple_list"},"Simple List"),this.props.activePage.model&&this.props.activePage.modelscope?React.createElement(OverflowMenu,{style:{backgroundColor:"rgb(0, 98, 255)",color:"rgb(255, 255, 255)",fontSize:"medium",borderWidth:3,borderStyle:"solid",borderColor:"transparent",width:"55%",height:"3rem",padding:3,marginLeft:"1rem"},renderIcon:function(){return React.createElement("div",{style:{padding:"0 1rem"}},"Related List")},"data-floating-menu-container":"true"},React.createElement(OverflowMenuItem,{itemText:"Existing Relationship",onClick:this.handleConfigurationChange,value:"existing_relationship"}),React.createElement(OverflowMenuItem,{itemText:"New Relationship",onClick:this.handleConfigurationChange,value:"new_relationship_with_existing_model"}),React.createElement(OverflowMenuItem,{itemText:"New Model",onClick:this.handleConfigurationChange,value:"new_relationship_with_new_model"})):null)))}},{key:"getTemplate",value:function(){var template=null;switch(this.optionSelected){case"existing_relationship":template=this.getExistingRelationShipTemplate();break;case"new_relationship_with_existing_model":template=this.getNewRelationShipWithExistingModel();break;case"new_relationship_with_new_model":template=this.getNewRelationShipWithNewModel();break;case"existing_page":template=this.getExistingPageTemplate();break;case"simple_list":template=this.getSimpleListTemplate();break;default:template=this.getDefaultTemplate()}return template}},{key:"getBreadCrumb",value:function(){var breadCrumbKey=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.key:"",breadCrumbStage=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.stage:"",breadCrumbElements=[];return breadCrumbKey?(breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,"Choose a configuration"))),this.breadCrumbPaths[breadCrumbKey].map(function(breadCrumbItem,indx){breadCrumbItem.name==breadCrumbStage?breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,breadCrumbItem.value))):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,breadCrumbItem.value)))})):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,"Choose a configuration"))),breadCrumbElements}},{key:"render",value:function(){var template=this.getTemplate(),breadCrumb=this.getBreadCrumb();return React.createElement("div",{style:{overflow:"hidden"}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ShowTabMappingDialog/Style.css"); @import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement("nav",{class:"bx--breadcrumb bx--breadcrumb--no-trailing-slash","aria-label":"breadcrumb",style:{position:"sticky",top:0}},breadCrumb),React.createElement("div",{className:"rel-options",style:{padding:10,height:"25rem",overflow:"scroll",marginLeft:"20%",width:"70%"}},template))}}]),_ShowTabMappingDialog_}(React.Component),_export("ShowTabMappingDialog",ShowTabMappingDialog=function(props){return _ShowTabMappingDialog_}),_export("ShowTabMappingDialog",ShowTabMappingDialog)}}}),System.register("component/studio/ShowTableMappingDialog.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","carbon-addons-cloud-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","@carbon/icons-react/lib/new-tab/32","@carbon/icons-react/lib/renew/32"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,Select,SelectItem,TextInput,Card,AddAlt20,SubAlt20,NewTab32,Renew32,_ShowTableMappingDialog_,ShowTableMappingDialog,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Breadcrumb,_carbonComponentsReact.BreadcrumbItem,Button=_carbonComponentsReact.Button,_carbonComponentsReact.FormGroup,_carbonComponentsReact.RadioButtonGroup,_carbonComponentsReact.RadioButton,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.FormLabel,_carbonComponentsReact.Tooltip},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonIconsReactLibNewTab){NewTab32=_carbonIconsReactLibNewTab.default},function(_carbonIconsReactLibRenew){Renew32=_carbonIconsReactLibRenew.default}],execute:function(){_ShowTableMappingDialog_=function(_React$Component){function _ShowTableMappingDialog_(props){_classCallCheck(this,_ShowTableMappingDialog_);var _this=_possibleConstructorReturn(this,(_ShowTableMappingDialog_.__proto__||Object.getPrototypeOf(_ShowTableMappingDialog_)).call(this,props));return _this.state={templateChanged:!1,selectedModel:null,modelName:null,scope:_this.props.currentscope?_this.props.currentscope:"",fieldList:[{datatype:"",id:"",parent:"",text:"",type:"field"}],currentBreadCrumbPath:{}},_this.getModelName=_this.getModelName.bind(_this),_this.breadCrumbPaths={home:[{name:"",value:""}],existing_model:[{name:"model_selection",value:"Model Selection"}],new_model:[{name:"model_field",value:"Create and select Model"}]},_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this.handleConfigurationChange=_this.handleConfigurationChange.bind(_this),_this.removeSpecialCharacters=_this.removeSpecialCharacters.bind(_this),_this}return _inherits(_ShowTableMappingDialog_,_React$Component),_createClass(_ShowTableMappingDialog_,[{key:"handleConfigurationChange",value:function(e){this.optionSelected=e.target.value?e.target.value:e.currentTarget.value?e.currentTarget.value:"",this.handleNext()}},{key:"handleNext",value:function(){this.setState({templateChanged:!0,currentBreadCrumbPath:{key:this.optionSelected,stage:this.breadCrumbPaths[this.optionSelected][0].name}})}},{key:"getDefaultTemplate",value:function(){return React.createElement("div",{style:{display:"inline-flex",position:"absolute",left:"20%"}},React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(Renew32,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Already have the model?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"Got your model ready? Do you know that you can edit the model like adding new fields or removing stale ones before selecting it?"),React.createElement(Button,{style:{position:"absolute",bottom:"1rem",left:"10%"},onClick:this.handleConfigurationChange,value:"existing_model"},"Select Model")),React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(NewTab32,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Build a model?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"Do not have the model yet? Do not worry, just create it right here and select the same to proceed further to build your page that uses the fields of the model."),React.createElement(Button,{style:{position:"absolute",bottom:"1rem",right:"10%"},onClick:this.handleConfigurationChange,value:"new_model"},"Create Model")))}},{key:"removeField",value:function(index){var fields=this.state.fieldList;fields.splice(index,1),this.setState({fieldList:fields})}},{key:"addField",value:function(){var fields=this.state.fieldList;fields.push({datatype:"",id:"",parent:"",text:"",type:"field"}),this.setState({fieldList:fields})}},{key:"getModelName",value:function(name,scope){return"mmf"==scope&&name.startsWith("Meta")?name:name+"_"+scope}},{key:"updateFieldListName",value:function(e,findex){var value=this.removeSpecialCharacters(e.target.value),fields=this.state.fieldList.slice(),field=fields[findex];field.text=value,field.id=value,this.setState({fieldName:value,fieldList:fields})}},{key:"updateFieldListType",value:function(e,findex){var value=e.target.value,fields=this.state.fieldList;fields[findex].datatype=value,this.setState({fieldList:fields})}},{key:"getFieldList",value:function(){var _this2=this,length=this.state.fieldList.length,fieldList=[];return this.state.fieldList.forEach(function(field,i){if(field.text||field.datatype){if("id"!=field.text&&"uid"!=field.text&&!field.text.startsWith("srs_")){var element=React.createElement("div",{className:"model-create"},React.createElement(TextInput,{placeholder:"Field Name",value:field.text,onChange:function(e){_this2.updateFieldListName(e,i)}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",defaultValue:field.datatype,onChange:function(e){_this2.updateFieldListType(e,i)}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){_this2.removeField(i)}}):null," ",React.createElement(AddAlt20,{onClick:function(){_this2.addField()}}));fieldList.push(element)}}else{var _element=React.createElement("div",{className:"model-create"},React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){_this2.updateFieldListName(e,i)}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){_this2.updateFieldListType(e,i)}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){_this2.removeField(i)}}):null," ",React.createElement(AddAlt20,{onClick:function(){_this2.addField()}}));fieldList.push(_element)}}),fieldList}},{key:"handleUpdate",value:function(){this.upsertModel()}},{key:"handleSelect",value:function(){var activepage=this.props.activePage;activepage.model=this.state.selectedModel,activepage.modelscope=this.state.selectedModelScope?this.state.selectedModelScope:this.props.currentscope,this.props.updateStore({updates:{activePage:activepage,showpreview:!1}})}},{key:"updateSchema",value:function(){var _this3=this;return new Promise(function(resolve,reject){var self=_this3;$script.runAtServer("mmf.getSchemaData").then(function(schemaData){self.props.updateStore({updates:{schema:schemaData}}),resolve()})})}},{key:"createModel",value:function(){this.upsertModel()}},{key:"createAndSelectModel",value:function(){var _this4=this;this.upsertModel(function(model,scope){var activepage=_this4.props.activePage;activepage.model=model,activepage.modelscope=scope,_this4.props.updateStore({updates:{activePage:activepage,showpreview:!1}})})}},{key:"upsertModel",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(cb){var self,modelName,scope,fieldList,fieldIndx,_this5=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(self=this,modelName=this.state.selectedModel,scope=this.state.selectedModelScope||this.props.currentscope,!(fieldList=this.state.fieldList)){_context2.next=14;break}_context2.t0=_regeneratorRuntime.keys(fieldList);case 6:if((_context2.t1=_context2.t0()).done){_context2.next=14;break}if(fieldIndx=_context2.t1.value,fieldList[fieldIndx].type){_context2.next=11;break}return self.props.addErrorMessage({title:"Error - ",subtitle:"Type is mandatory for field "+fieldList[fieldIndx].text}),_context2.abrupt("return");case 11:fieldList[fieldIndx].type&&"datatime"==fieldList[fieldIndx].type.toLowerCase()&&(fieldList[fieldIndx].type="date"),_context2.next=6;break;case 14:$qry.waituntil("model.upsert",this.getModelName(modelName,scope)).then(function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(result){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,self.updateSchema();case 2:cb&&cb(modelName,scope);case 3:case"end":return _context.stop()}},_callee,_this5)}));return function(_x2){return _ref2.apply(this,arguments)}}()),$script.getscript("createModel").then(function(_ref3){(0,_ref3.default)(modelName,scope,fieldList).then(function(data){cb?self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+modelName+" created and selected."}):self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+modelName+" updated."})})});case 16:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref.apply(this,arguments)}}()},{key:"handleCancel",value:function(){this.props.updateStore({updates:{showpreview:!1}})}},{key:"getExistingModelTemplate",value:function(){var _this6=this,fieldList=this.getFieldList(),tableItems=[];(tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables)&&this.props.schemaTables.sort(function(a,b){return a==b?0:a>b?1:-1}).map(function(schemaTable,indx){var schemaNameArry=schemaTable.indexOf("_")>-1?schemaTable.split("_"):[schemaTable],schemaTableLabel=(schemaNameArry.length>1?schemaNameArry.slice(0,schemaNameArry.length-1):schemaNameArry[0])+"["+(schemaNameArry.length>1?schemaNameArry[schemaNameArry.length-1]:"mmf")+"]";tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTableLabel}))});return React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Model",onChange:function(e){var modelName=e.target.value,updatedList=[],schemaTableName="",schemaTableScope="";if("none"==modelName)updatedList=[{datatype:"",id:"",parent:"",text:"",type:""}],schemaTableName=modelName;else{var targetModelFields=_this6.props.schemaFields?_this6.props.schemaFields:[];updatedList=0==(targetModelFields=targetModelFields.filter(function(item){return item.parent==modelName&&"field"==item.type})).length?_this6.state.fieldList:targetModelFields;var schemaNameArry=modelName.indexOf("_")>-1?modelName.split("_"):[modelName];schemaTableName=schemaNameArry.length>1?schemaNameArry.slice(0,schemaNameArry.length-1).join("_"):schemaNameArry[0],schemaTableScope=schemaNameArry.length>1?schemaNameArry[schemaNameArry.length-1]:"mmf"}_this6.setState({selectedModel:schemaTableName,selectedModelScope:schemaTableScope,fieldList:updatedList})}},tableItems),React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",disabled:!0,value:this.state.selectedModelScope})," ",React.createElement("br",null),React.createElement("div",{className:"FieldList"},fieldList.map(function(element){return element})),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this6.optionSelected="home",_this6.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleUpdate()}},"Update"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleSelect()}},"Select")))}},{key:"removeSpecialCharacters",value:function(val){return val.replace(/[^a-zA-Z0-9]/g,"_")}},{key:"getNewModelTemplate",value:function(){var _this7=this,fieldList=this.getFieldList();return React.createElement(React.Fragment,null,React.createElement(TextInput,{value:this.state.selectedModel,placeholder:"Model Name",onChange:function(e){_this7.setState({selectedModel:_this7.removeSpecialCharacters(e.target.value)})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",value:this.props.currentscope,disabled:!0,onChange:function(e){_this7.setState({selectedModelScope:e.target.value})}})," ",React.createElement("br",null),React.createElement("div",{className:"FieldList"},fieldList.map(function(element){return element})),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this7.optionSelected="home",_this7.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this7.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this7.createAndSelectModel()}},"Create & Select")))}},{key:"getTemplate",value:function(){var template=null;switch(this.optionSelected){case"existing_model":template=this.getExistingModelTemplate();break;case"new_model":template=this.getNewModelTemplate();break;default:template=this.getDefaultTemplate()}return template}},{key:"getBreadCrumb",value:function(){var breadCrumbKey=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.key:"",breadCrumbStage=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.stage:"",breadCrumbElements=[];return breadCrumbKey?(breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,"Choose a configuration"))),this.breadCrumbPaths[breadCrumbKey].map(function(breadCrumbItem,indx){breadCrumbItem.name==breadCrumbStage?breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,breadCrumbItem.value))):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,breadCrumbItem.value)))})):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,"Choose a configuration"))),breadCrumbElements}},{key:"render",value:function(){var template=this.getTemplate(),breadCrumb=this.getBreadCrumb();return React.createElement("div",{style:{padding:10}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ShowTableMappingDialog/Style.css"); @import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement("nav",{class:"bx--breadcrumb bx--breadcrumb--no-trailing-slash","aria-label":"breadcrumb"},breadCrumb),React.createElement("div",{className:"rel-options"},template))}}]),_ShowTableMappingDialog_}(React.Component),_export("ShowTableMappingDialog",ShowTableMappingDialog=function(props){return _ShowTableMappingDialog_}),_export("ShowTableMappingDialog",ShowTableMappingDialog),_export("default",ShowTableMappingDialog),_export("states",states=[{KeyName:"active_widget_field_value",AccessPath:"active_widget_field_value",DefaultValue:'{"active_widget_field_value": []}'},{KeyName:"schemaTables",AccessPath:"schema.tables",DefaultValue:'{"schema": {"tables": []}}'},{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema": {}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"schemaFields",AccessPath:"schema.fields",DefaultValue:'{"schema": {"fields": []}}'},{KeyName:"scopes",AccessPath:"scopes",DefaultValue:'{"scopes": {}}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/ShowTableMappingDialog/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","carbon-addons-cloud-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","@carbon/icons-react/lib/new-tab/32","@carbon/icons-react/lib/renew/32"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,Select,SelectItem,TextInput,Card,AddAlt20,SubAlt20,NewTab32,Renew32,_ShowTableMappingDialog_,ShowTableMappingDialog;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Breadcrumb,_carbonComponentsReact.BreadcrumbItem,Button=_carbonComponentsReact.Button,_carbonComponentsReact.FormGroup,_carbonComponentsReact.RadioButtonGroup,_carbonComponentsReact.RadioButton,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.FormLabel,_carbonComponentsReact.Tooltip},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonIconsReactLibNewTab){NewTab32=_carbonIconsReactLibNewTab.default},function(_carbonIconsReactLibRenew){Renew32=_carbonIconsReactLibRenew.default}],execute:function(){_ShowTableMappingDialog_=function(_React$Component){function _ShowTableMappingDialog_(props){_classCallCheck(this,_ShowTableMappingDialog_);var _this=_possibleConstructorReturn(this,(_ShowTableMappingDialog_.__proto__||Object.getPrototypeOf(_ShowTableMappingDialog_)).call(this,props));return _this.state={templateChanged:!1,selectedModel:null,modelName:null,scope:_this.props.currentscope?_this.props.currentscope:"",fieldList:[{datatype:"",id:"",parent:"",text:"",type:"field"}],currentBreadCrumbPath:{}},_this.getModelName=_this.getModelName.bind(_this),_this.breadCrumbPaths={home:[{name:"",value:""}],existing_model:[{name:"model_selection",value:"Model Selection"}],new_model:[{name:"model_field",value:"Create and select Model"}]},_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this.handleConfigurationChange=_this.handleConfigurationChange.bind(_this),_this.removeSpecialCharacters=_this.removeSpecialCharacters.bind(_this),_this}return _inherits(_ShowTableMappingDialog_,_React$Component),_createClass(_ShowTableMappingDialog_,[{key:"handleConfigurationChange",value:function(e){this.optionSelected=e.target.value?e.target.value:e.currentTarget.value?e.currentTarget.value:"",this.handleNext()}},{key:"handleNext",value:function(){this.setState({templateChanged:!0,currentBreadCrumbPath:{key:this.optionSelected,stage:this.breadCrumbPaths[this.optionSelected][0].name}})}},{key:"getDefaultTemplate",value:function(){return React.createElement("div",{style:{display:"inline-flex",position:"absolute",left:"20%"}},React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(Renew32,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Already have the model?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"Got your model ready? Do you know that you can edit the model like adding new fields or removing stale ones before selecting it?"),React.createElement(Button,{style:{position:"absolute",bottom:"1rem",left:"10%"},onClick:this.handleConfigurationChange,value:"existing_model"},"Select Model")),React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(NewTab32,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Build a model?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"Do not have the model yet? Do not worry, just create it right here and select the same to proceed further to build your page that uses the fields of the model."),React.createElement(Button,{style:{position:"absolute",bottom:"1rem",right:"10%"},onClick:this.handleConfigurationChange,value:"new_model"},"Create Model")))}},{key:"removeField",value:function(index){var fields=this.state.fieldList;fields.splice(index,1),this.setState({fieldList:fields})}},{key:"addField",value:function(){var fields=this.state.fieldList;fields.push({datatype:"",id:"",parent:"",text:"",type:"field"}),this.setState({fieldList:fields})}},{key:"getModelName",value:function(name,scope){return"mmf"==scope&&name.startsWith("Meta")?name:name+"_"+scope}},{key:"updateFieldListName",value:function(e,findex){var value=this.removeSpecialCharacters(e.target.value),fields=this.state.fieldList.slice(),field=fields[findex];field.text=value,field.id=value,this.setState({fieldName:value,fieldList:fields})}},{key:"updateFieldListType",value:function(e,findex){var value=e.target.value,fields=this.state.fieldList;fields[findex].datatype=value,this.setState({fieldList:fields})}},{key:"getFieldList",value:function(){var _this2=this,length=this.state.fieldList.length,fieldList=[];return this.state.fieldList.forEach(function(field,i){if(field.text||field.datatype){if("id"!=field.text&&"uid"!=field.text&&!field.text.startsWith("srs_")){var element=React.createElement("div",{className:"model-create"},React.createElement(TextInput,{placeholder:"Field Name",value:field.text,onChange:function(e){_this2.updateFieldListName(e,i)}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",defaultValue:field.datatype,onChange:function(e){_this2.updateFieldListType(e,i)}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){_this2.removeField(i)}}):null," ",React.createElement(AddAlt20,{onClick:function(){_this2.addField()}}));fieldList.push(element)}}else{var _element=React.createElement("div",{className:"model-create"},React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){_this2.updateFieldListName(e,i)}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){_this2.updateFieldListType(e,i)}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){_this2.removeField(i)}}):null," ",React.createElement(AddAlt20,{onClick:function(){_this2.addField()}}));fieldList.push(_element)}}),fieldList}},{key:"handleUpdate",value:function(){this.upsertModel()}},{key:"handleSelect",value:function(){var activepage=this.props.activePage;activepage.model=this.state.selectedModel,activepage.modelscope=this.state.selectedModelScope?this.state.selectedModelScope:this.props.currentscope,this.props.updateStore({updates:{activePage:activepage,showpreview:!1}})}},{key:"updateSchema",value:function(){var _this3=this;return new Promise(function(resolve,reject){var self=_this3;$script.runAtServer("mmf.getSchemaData").then(function(schemaData){self.props.updateStore({updates:{schema:schemaData}}),resolve()})})}},{key:"createModel",value:function(){this.upsertModel()}},{key:"createAndSelectModel",value:function(){var _this4=this;this.upsertModel(function(model,scope){var activepage=_this4.props.activePage;activepage.model=model,activepage.modelscope=scope,_this4.props.updateStore({updates:{activePage:activepage,showpreview:!1}})})}},{key:"upsertModel",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(cb){var self,modelName,scope,fieldList,fieldIndx,_this5=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(self=this,modelName=this.state.selectedModel,scope=this.state.selectedModelScope||this.props.currentscope,!(fieldList=this.state.fieldList)){_context2.next=14;break}_context2.t0=_regeneratorRuntime.keys(fieldList);case 6:if((_context2.t1=_context2.t0()).done){_context2.next=14;break}if(fieldIndx=_context2.t1.value,fieldList[fieldIndx].type){_context2.next=11;break}return self.props.addErrorMessage({title:"Error - ",subtitle:"Type is mandatory for field "+fieldList[fieldIndx].text}),_context2.abrupt("return");case 11:fieldList[fieldIndx].type&&"datatime"==fieldList[fieldIndx].type.toLowerCase()&&(fieldList[fieldIndx].type="date"),_context2.next=6;break;case 14:$qry.waituntil("model.upsert",this.getModelName(modelName,scope)).then(function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(result){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,self.updateSchema();case 2:cb&&cb(modelName,scope);case 3:case"end":return _context.stop()}},_callee,_this5)}));return function(_x2){return _ref2.apply(this,arguments)}}()),$script.getscript("createModel").then(function(_ref3){(0,_ref3.default)(modelName,scope,fieldList).then(function(data){cb?self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+modelName+" created and selected."}):self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+modelName+" updated."})})});case 16:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref.apply(this,arguments)}}()},{key:"handleCancel",value:function(){this.props.updateStore({updates:{showpreview:!1}})}},{key:"getExistingModelTemplate",value:function(){var _this6=this,fieldList=this.getFieldList(),tableItems=[];(tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables)&&this.props.schemaTables.sort(function(a,b){return a==b?0:a>b?1:-1}).map(function(schemaTable,indx){var schemaNameArry=schemaTable.indexOf("_")>-1?schemaTable.split("_"):[schemaTable],schemaTableLabel=(schemaNameArry.length>1?schemaNameArry.slice(0,schemaNameArry.length-1):schemaNameArry[0])+"["+(schemaNameArry.length>1?schemaNameArry[schemaNameArry.length-1]:"mmf")+"]";tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTableLabel}))});return React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Model",onChange:function(e){var modelName=e.target.value,updatedList=[],schemaTableName="",schemaTableScope="";if("none"==modelName)updatedList=[{datatype:"",id:"",parent:"",text:"",type:""}],schemaTableName=modelName;else{var targetModelFields=_this6.props.schemaFields?_this6.props.schemaFields:[];updatedList=0==(targetModelFields=targetModelFields.filter(function(item){return item.parent==modelName&&"field"==item.type})).length?_this6.state.fieldList:targetModelFields;var schemaNameArry=modelName.indexOf("_")>-1?modelName.split("_"):[modelName];schemaTableName=schemaNameArry.length>1?schemaNameArry.slice(0,schemaNameArry.length-1).join("_"):schemaNameArry[0],schemaTableScope=schemaNameArry.length>1?schemaNameArry[schemaNameArry.length-1]:"mmf"}_this6.setState({selectedModel:schemaTableName,selectedModelScope:schemaTableScope,fieldList:updatedList})}},tableItems),React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",disabled:!0,value:this.state.selectedModelScope})," ",React.createElement("br",null),React.createElement("div",{className:"FieldList"},fieldList.map(function(element){return element})),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this6.optionSelected="home",_this6.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleUpdate()}},"Update"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleSelect()}},"Select")))}},{key:"removeSpecialCharacters",value:function(val){return val.replace(/[^a-zA-Z0-9]/g,"_")}},{key:"getNewModelTemplate",value:function(){var _this7=this,fieldList=this.getFieldList();return React.createElement(React.Fragment,null,React.createElement(TextInput,{value:this.state.selectedModel,placeholder:"Model Name",onChange:function(e){_this7.setState({selectedModel:_this7.removeSpecialCharacters(e.target.value)})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",value:this.props.currentscope,disabled:!0,onChange:function(e){_this7.setState({selectedModelScope:e.target.value})}})," ",React.createElement("br",null),React.createElement("div",{className:"FieldList"},fieldList.map(function(element){return element})),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this7.optionSelected="home",_this7.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this7.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this7.createAndSelectModel()}},"Create & Select")))}},{key:"getTemplate",value:function(){var template=null;switch(this.optionSelected){case"existing_model":template=this.getExistingModelTemplate();break;case"new_model":template=this.getNewModelTemplate();break;default:template=this.getDefaultTemplate()}return template}},{key:"getBreadCrumb",value:function(){var breadCrumbKey=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.key:"",breadCrumbStage=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.stage:"",breadCrumbElements=[];return breadCrumbKey?(breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,"Choose a configuration"))),this.breadCrumbPaths[breadCrumbKey].map(function(breadCrumbItem,indx){breadCrumbItem.name==breadCrumbStage?breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,breadCrumbItem.value))):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,breadCrumbItem.value)))})):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,"Choose a configuration"))),breadCrumbElements}},{key:"render",value:function(){var template=this.getTemplate(),breadCrumb=this.getBreadCrumb();return React.createElement("div",{style:{padding:10}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ShowTableMappingDialog/Style.css"); @import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement("nav",{class:"bx--breadcrumb bx--breadcrumb--no-trailing-slash","aria-label":"breadcrumb"},breadCrumb),React.createElement("div",{className:"rel-options"},template))}}]),_ShowTableMappingDialog_}(React.Component),_export("ShowTableMappingDialog",ShowTableMappingDialog=function(props){return _ShowTableMappingDialog_}),_export("ShowTableMappingDialog",ShowTableMappingDialog)}}}),System.register("component/studio/SideNavLink.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SideNavLink_,SideNavLink,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodash){_lodash.default}],execute:function(){_SideNavLink_=function(_React$Component){function _SideNavLink_(){return _classCallCheck(this,_SideNavLink_),_possibleConstructorReturn(this,(_SideNavLink_.__proto__||Object.getPrototypeOf(_SideNavLink_)).apply(this,arguments))}return _inherits(_SideNavLink_,_React$Component),_createClass(_SideNavLink_,[{key:"render",value:function(){var _this2=this;return React.createElement("div",{className:"sideNavLink",onClick:function(e){if("setter"!=_this2.props.mode||_this2.props.href)navigateTo(_this2.props.href);else{var activeLink={};_this2.props.name&&(activeLink.name=_this2.props.name),_this2.props.href&&(activeLink.url=_this2.props.href),activeLink.clickts=Date.now(),_this2.props.updateStore({updates:{activeLink:activeLink}})}}},this.props.name)}}]),_SideNavLink_}(React.Component),_export("SideNavLink",SideNavLink=function(props){return _SideNavLink_}),_export("SideNavLink",SideNavLink),_export("default",SideNavLink),_export("states",states=[{KeyName:"activeLink",AccessPath:"navigation.${widgetid}",DefaultValue:'{"navigation": {"${widgetid}": {}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SideNavLink/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SideNavLink_,SideNavLink;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodash){_lodash.default}],execute:function(){_SideNavLink_=function(_React$Component){function _SideNavLink_(){return _classCallCheck(this,_SideNavLink_),_possibleConstructorReturn(this,(_SideNavLink_.__proto__||Object.getPrototypeOf(_SideNavLink_)).apply(this,arguments))}return _inherits(_SideNavLink_,_React$Component),_createClass(_SideNavLink_,[{key:"render",value:function(){var _this2=this;return React.createElement("div",{className:"sideNavLink",onClick:function(e){if("setter"!=_this2.props.mode||_this2.props.href)navigateTo(_this2.props.href);else{var activeLink={};_this2.props.name&&(activeLink.name=_this2.props.name),_this2.props.href&&(activeLink.url=_this2.props.href),activeLink.clickts=Date.now(),_this2.props.updateStore({updates:{activeLink:activeLink}})}}},this.props.name)}}]),_SideNavLink_}(React.Component),_export("SideNavLink",SideNavLink=function(props){return _SideNavLink_}),_export("SideNavLink",SideNavLink)}}}),System.register("component/studio/SlideSelectionPanel.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.clonedeep","carbon-components-react/lib/components/UIShell","carbon-components-react"],function(_export,_context5){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,SideNav,SideNavMenu,SideNavMenuItem,SelectSkeleton,_SlideSelectionPanel_,SlideSelectionPanel,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonComponentsReactLibComponentsUIShell){_carbonComponentsReactLibComponentsUIShell.Content,SideNav=_carbonComponentsReactLibComponentsUIShell.SideNav,_carbonComponentsReactLibComponentsUIShell.SideNavItems,_carbonComponentsReactLibComponentsUIShell.SideNavLink,SideNavMenu=_carbonComponentsReactLibComponentsUIShell.SideNavMenu,SideNavMenuItem=_carbonComponentsReactLibComponentsUIShell.SideNavMenuItem},function(_carbonComponentsReact){SelectSkeleton=_carbonComponentsReact.SelectSkeleton}],execute:function(){_SlideSelectionPanel_=function(_React$Component){function _SlideSelectionPanel_(props){_classCallCheck(this,_SlideSelectionPanel_);var _this=_possibleConstructorReturn(this,(_SlideSelectionPanel_.__proto__||Object.getPrototypeOf(_SlideSelectionPanel_)).call(this,props));return _this.state={slidelist:{}},_this.handleClick=_this.handleClick.bind(_this),_this.loadSlides=_this.loadSlides.bind(_this),_this}return _inherits(_SlideSelectionPanel_,_React$Component),_createClass(_SlideSelectionPanel_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var slides;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.props.currentscope){_context.next=5;break}return _context.next=3,this.loadSlides(this.props.currentscope);case 3:slides=_context.sent,this.setState({slidelist:slides,loaded:!0});case 5:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps){var slides;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!(!_.isEqual(prevProps.pages,this.props.pages)&&Object.keys(prevProps.pages).length!=Object.keys(this.props.pages).length||prevProps.reload_slides!=this.props.reload_slides&&1==this.props.reload_slides||prevProps.currentscope!=this.props.currentscope&&this.props.currentscope)){_context2.next=6;break}return _context2.next=3,this.loadSlides(this.props.currentscope);case 3:slides=_context2.sent,this.setState({slidelist:slides,loaded:!0}),this.props.updateStore({updates:{reload_slides:!1}});case 6:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"loadSlides",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(currentScope){var slideDetails,slidesData,slides,slideNames,_loop,slideIndx;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,$qry.run("mmf.getAllSlides",{Scope:currentScope});case 2:for(slideIndx in slideDetails=_context3.sent,slidesData=slideDetails&&slideDetails.slides?slideDetails.slides:{},slides={},slideNames=Object.keys(slidesData),_loop=function(slideIndx){var slideName=slideNames[slideIndx],slideObj=slidesData[slideName];switch(slideObj.Type){case"FreeForm":slides.FreeForm||(slides.FreeForm=[]),slides.FreeForm.push({id:slideObj.uid,name:slideObj.Name,scope:slideObj.Scope,path:slideObj.Path,pageType:slideObj.Type,pagestyles:slideObj.Styles,props:slideObj.props});break;default:var modelName="",modelScope="";Object.keys(slideObj.props).map(function(propKey){"ModelName"===slideObj.props[propKey].Name&&(modelName=slideObj.props[propKey].Value),"ModelScope"===slideObj.props[propKey].Name&&(modelScope=slideObj.props[propKey].Value)}),slides[modelName]||(slides[modelName]=[]),slides[modelName].push({id:slideObj.uid,name:slideObj.Name,scope:slideObj.Scope,pageType:slideObj.Type,pagestyles:slideObj.Styles,path:slideObj.Path,model:modelName,modelScope:modelScope})}},slideNames)_loop(slideIndx);return _context3.abrupt("return",slides);case 10:case"end":return _context3.stop()}},_callee3,this)}));return function(_x2){return _ref3.apply(this,arguments)}}()},{key:"handleClick",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(e){var slideId,payload,activeSlide,activePage,itemsNotExists,tobeActivePage,slots,widgets,slideProps,slotsAndWidgets,component2WidgetMap,layoutCodes,defaultLayout,_this2=this;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(slideId=e.target.id?e.target.id:e.target.parentNode.id,payload={active_page_id:slideId},activeSlide={},Object.keys(this.state.slidelist).map(function(model){var matchingSlide=_this2.state.slidelist[model].filter(function(slide){return slide.id==slideId});matchingSlide&&1==matchingSlide.length&&(Object.assign(activeSlide,matchingSlide[0]),activeSlide.model=model)}),activePage=cloneDeep(this.props.pages[slideId])||{},itemsNotExists=!(activePage.slots&&0!=Object.keys(activePage.slots).length&&activePage.widgets&&0!=Object.keys(activePage.widgets).length),tobeActivePage={id:slideId,name:activeSlide?activeSlide.name:"",scope:activeSlide?activeSlide.scope:"",path:activeSlide?activeSlide.path:"",pageType:activeSlide?activeSlide.pageType:"",pagestyles:activeSlide?activeSlide.pagestyles:"",model:activeSlide?activeSlide.model:"",modelscope:activeSlide?activeSlide.modelScope:""},!itemsNotExists){_context4.next=30;break}return slots={},widgets={},_context4.next=12,$qry.run("mmf.getSlideProps",{pageId:slideId});case 12:return slideProps=_context4.sent,_context4.next=15,$qry.run("pd.getExistingSlotsbySlideId",{Slide:slideId});case 15:slotsAndWidgets=_context4.sent,component2WidgetMap={},slotsAndWidgets&&slotsAndWidgets.length>0&&slotsAndWidgets.forEach(function(slotWidget){var slot=slotWidget.node;if(slot&&slot.uid){var slotData={};slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.width=slot.width||0,slotData.height=slot.height,slotData.minwidth=slot.minwidth,slotData.minheight=slot.minheight,slotData.maxwidth=slot.maxwidth,slotData.maxheight=slot.maxheight,slotData.resize=slot.resize,slotData.move=slot.move,slotData.Slide=slot.Slide,slotData.Widget=slot.Widget,slotData.Layout=slot.Layout,slots[slot.Layout||"default"]=slots[slot.Layout||"default"]||{},slots[slot.Layout||"default"][slot.uid]=slotData;var widgetData=slot.slotWidget;if(widgetData&&widgetData.uid){var widget={};widget.id=widgetData.uid,widget.Component=widgetData.Component,widget.name=widgetData.component.Name,component2WidgetMap[widgetData.Component]=widgetData.uid;var widgetProps=widgetData.widgetproperties;if(widgetProps&&widgetProps.edges&&widgetProps.edges.length>0){var props={};widgetProps.edges.forEach(function(propNode){var prop=propNode.node;"PageParams"==prop.name?props[prop.name]=prop.value?JSON.parse(prop.value):prop.value:props[prop.name]=prop.value}),widget.props=props}widget.props=widget.props||{};var componentProps=widgetData.component.Props,widgetPropNames=Object.keys(widget.props);componentProps&&Object.keys(componentProps).length>0&&Object.keys(componentProps).map(function(componentPropName){widgetPropNames&&-1==widgetPropNames.indexOf(componentPropName)&&(widget.props[componentPropName]=componentProps[componentPropName])}),widgets[slot.Layout||"default"]=widgets[slot.Layout||"default"]||{},widgets[slot.Layout||"default"][widgetData.uid]=widget}}}),layoutCodes=Object.keys(slots),defaultLayout=layoutCodes?layoutCodes.default?"default":layoutCodes[0]:"default",tobeActivePage.layouts={slots:slots,widgets:widgets},tobeActivePage.slots=slots[defaultLayout],tobeActivePage.props=slideProps,tobeActivePage.widgets=widgets[defaultLayout],tobeActivePage.is_open=!0,tobeActivePage.currentLayout=defaultLayout,payload.activePageSlots=slots[defaultLayout],payload.activePageWidgets=widgets[defaultLayout],_context4.next=38;break;case 30:tobeActivePage.slots=activePage.slots,tobeActivePage.props=activePage.props,tobeActivePage.widgets=activePage.widgets,tobeActivePage.layouts=activePage.layouts,tobeActivePage.currentLayout=activePage.currentLayout,tobeActivePage.is_open=!0,payload.activePageSlots=activePage.slots,payload.activePageWidgets=activePage.widgets;case 38:payload.activepage=tobeActivePage,payload.pages=this.props.pages?this.props.pages:{},payload.pages[slideId]=tobeActivePage,payload.active_widget_id="",this.props.updateStore({updates:payload});case 43:case"end":return _context4.stop()}},_callee4,this)}));return function(_x3){return _ref4.apply(this,arguments)}}()},{key:"render",value:function(){var _this3=this,slideNav=null;if(this.state.loaded){var slideNavMenus=[];this.state.slidelist&&0!=Object.keys(this.state.slidelist).length?(Object.keys(this.state.slidelist).map(function(modelName){var slideNavMenuItems=[];_this3.state.slidelist[modelName].map(function(navMenuItem){slideNavMenuItems.push(React.createElement(SideNavMenuItem,{key:navMenuItem.id,id:navMenuItem.id,onClick:_this3.handleClick,href:"javascript:void(0)"},navMenuItem.scope,".",navMenuItem.name))}),slideNavMenus.push(React.createElement(SideNavMenu,{title:modelName},slideNavMenuItems))}),slideNav=React.createElement("div",{style:{marginTop:20}},React.createElement(SideNav,{isFixedNav:!0,expanded:!0,isChildOfHeader:!1,"aria-label":"Side navigation"},slideNavMenus))):slideNav=React.createElement("div",{className:"noPagesFound"},"No Pages Found!")}else slideNav=React.createElement("div",{style:{width:"300px",marginTop:"20px"}},React.createElement(SelectSkeleton,{hideLabel:"true",size:"small"}));return React.createElement("div",{style:{height:"80vh",overflowY:"auto"}},slideNav)}}]),_SlideSelectionPanel_}(React.Component),_export("SlideSelectionPanel",SlideSelectionPanel=function(props){return _SlideSelectionPanel_}),_export("SlideSelectionPanel",SlideSelectionPanel),_export("default",SlideSelectionPanel),_export("states",states=[{KeyName:"pages",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id": ""}'},{KeyName:"reload_slides",AccessPath:"reload_slides",DefaultValue:'{"reload_slides": false}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'},{KeyName:"activepage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SlideSelectionPanel/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.clonedeep","carbon-components-react/lib/components/UIShell","carbon-components-react"],function(_export,_context5){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,SideNav,SideNavMenu,SideNavMenuItem,SelectSkeleton,_SlideSelectionPanel_,SlideSelectionPanel;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonComponentsReactLibComponentsUIShell){_carbonComponentsReactLibComponentsUIShell.Content,SideNav=_carbonComponentsReactLibComponentsUIShell.SideNav,_carbonComponentsReactLibComponentsUIShell.SideNavItems,_carbonComponentsReactLibComponentsUIShell.SideNavLink,SideNavMenu=_carbonComponentsReactLibComponentsUIShell.SideNavMenu,SideNavMenuItem=_carbonComponentsReactLibComponentsUIShell.SideNavMenuItem},function(_carbonComponentsReact){SelectSkeleton=_carbonComponentsReact.SelectSkeleton}],execute:function(){_SlideSelectionPanel_=function(_React$Component){function _SlideSelectionPanel_(props){_classCallCheck(this,_SlideSelectionPanel_);var _this=_possibleConstructorReturn(this,(_SlideSelectionPanel_.__proto__||Object.getPrototypeOf(_SlideSelectionPanel_)).call(this,props));return _this.state={slidelist:{}},_this.handleClick=_this.handleClick.bind(_this),_this.loadSlides=_this.loadSlides.bind(_this),_this}return _inherits(_SlideSelectionPanel_,_React$Component),_createClass(_SlideSelectionPanel_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var slides;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.props.currentscope){_context.next=5;break}return _context.next=3,this.loadSlides(this.props.currentscope);case 3:slides=_context.sent,this.setState({slidelist:slides,loaded:!0});case 5:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps){var slides;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!(!_.isEqual(prevProps.pages,this.props.pages)&&Object.keys(prevProps.pages).length!=Object.keys(this.props.pages).length||prevProps.reload_slides!=this.props.reload_slides&&1==this.props.reload_slides||prevProps.currentscope!=this.props.currentscope&&this.props.currentscope)){_context2.next=6;break}return _context2.next=3,this.loadSlides(this.props.currentscope);case 3:slides=_context2.sent,this.setState({slidelist:slides,loaded:!0}),this.props.updateStore({updates:{reload_slides:!1}});case 6:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"loadSlides",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(currentScope){var slideDetails,slidesData,slides,slideNames,_loop,slideIndx;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,$qry.run("mmf.getAllSlides",{Scope:currentScope});case 2:for(slideIndx in slideDetails=_context3.sent,slidesData=slideDetails&&slideDetails.slides?slideDetails.slides:{},slides={},slideNames=Object.keys(slidesData),_loop=function(slideIndx){var slideName=slideNames[slideIndx],slideObj=slidesData[slideName];switch(slideObj.Type){case"FreeForm":slides.FreeForm||(slides.FreeForm=[]),slides.FreeForm.push({id:slideObj.uid,name:slideObj.Name,scope:slideObj.Scope,path:slideObj.Path,pageType:slideObj.Type,pagestyles:slideObj.Styles,props:slideObj.props});break;default:var modelName="",modelScope="";Object.keys(slideObj.props).map(function(propKey){"ModelName"===slideObj.props[propKey].Name&&(modelName=slideObj.props[propKey].Value),"ModelScope"===slideObj.props[propKey].Name&&(modelScope=slideObj.props[propKey].Value)}),slides[modelName]||(slides[modelName]=[]),slides[modelName].push({id:slideObj.uid,name:slideObj.Name,scope:slideObj.Scope,pageType:slideObj.Type,pagestyles:slideObj.Styles,path:slideObj.Path,model:modelName,modelScope:modelScope})}},slideNames)_loop(slideIndx);return _context3.abrupt("return",slides);case 10:case"end":return _context3.stop()}},_callee3,this)}));return function(_x2){return _ref3.apply(this,arguments)}}()},{key:"handleClick",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(e){var slideId,payload,activeSlide,activePage,itemsNotExists,tobeActivePage,slots,widgets,slideProps,slotsAndWidgets,component2WidgetMap,layoutCodes,defaultLayout,_this2=this;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(slideId=e.target.id?e.target.id:e.target.parentNode.id,payload={active_page_id:slideId},activeSlide={},Object.keys(this.state.slidelist).map(function(model){var matchingSlide=_this2.state.slidelist[model].filter(function(slide){return slide.id==slideId});matchingSlide&&1==matchingSlide.length&&(Object.assign(activeSlide,matchingSlide[0]),activeSlide.model=model)}),activePage=cloneDeep(this.props.pages[slideId])||{},itemsNotExists=!(activePage.slots&&0!=Object.keys(activePage.slots).length&&activePage.widgets&&0!=Object.keys(activePage.widgets).length),tobeActivePage={id:slideId,name:activeSlide?activeSlide.name:"",scope:activeSlide?activeSlide.scope:"",path:activeSlide?activeSlide.path:"",pageType:activeSlide?activeSlide.pageType:"",pagestyles:activeSlide?activeSlide.pagestyles:"",model:activeSlide?activeSlide.model:"",modelscope:activeSlide?activeSlide.modelScope:""},!itemsNotExists){_context4.next=30;break}return slots={},widgets={},_context4.next=12,$qry.run("mmf.getSlideProps",{pageId:slideId});case 12:return slideProps=_context4.sent,_context4.next=15,$qry.run("pd.getExistingSlotsbySlideId",{Slide:slideId});case 15:slotsAndWidgets=_context4.sent,component2WidgetMap={},slotsAndWidgets&&slotsAndWidgets.length>0&&slotsAndWidgets.forEach(function(slotWidget){var slot=slotWidget.node;if(slot&&slot.uid){var slotData={};slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.width=slot.width||0,slotData.height=slot.height,slotData.minwidth=slot.minwidth,slotData.minheight=slot.minheight,slotData.maxwidth=slot.maxwidth,slotData.maxheight=slot.maxheight,slotData.resize=slot.resize,slotData.move=slot.move,slotData.Slide=slot.Slide,slotData.Widget=slot.Widget,slotData.Layout=slot.Layout,slots[slot.Layout||"default"]=slots[slot.Layout||"default"]||{},slots[slot.Layout||"default"][slot.uid]=slotData;var widgetData=slot.slotWidget;if(widgetData&&widgetData.uid){var widget={};widget.id=widgetData.uid,widget.Component=widgetData.Component,widget.name=widgetData.component.Name,component2WidgetMap[widgetData.Component]=widgetData.uid;var widgetProps=widgetData.widgetproperties;if(widgetProps&&widgetProps.edges&&widgetProps.edges.length>0){var props={};widgetProps.edges.forEach(function(propNode){var prop=propNode.node;"PageParams"==prop.name?props[prop.name]=prop.value?JSON.parse(prop.value):prop.value:props[prop.name]=prop.value}),widget.props=props}widget.props=widget.props||{};var componentProps=widgetData.component.Props,widgetPropNames=Object.keys(widget.props);componentProps&&Object.keys(componentProps).length>0&&Object.keys(componentProps).map(function(componentPropName){widgetPropNames&&-1==widgetPropNames.indexOf(componentPropName)&&(widget.props[componentPropName]=componentProps[componentPropName])}),widgets[slot.Layout||"default"]=widgets[slot.Layout||"default"]||{},widgets[slot.Layout||"default"][widgetData.uid]=widget}}}),layoutCodes=Object.keys(slots),defaultLayout=layoutCodes?layoutCodes.default?"default":layoutCodes[0]:"default",tobeActivePage.layouts={slots:slots,widgets:widgets},tobeActivePage.slots=slots[defaultLayout],tobeActivePage.props=slideProps,tobeActivePage.widgets=widgets[defaultLayout],tobeActivePage.is_open=!0,tobeActivePage.currentLayout=defaultLayout,payload.activePageSlots=slots[defaultLayout],payload.activePageWidgets=widgets[defaultLayout],_context4.next=38;break;case 30:tobeActivePage.slots=activePage.slots,tobeActivePage.props=activePage.props,tobeActivePage.widgets=activePage.widgets,tobeActivePage.layouts=activePage.layouts,tobeActivePage.currentLayout=activePage.currentLayout,tobeActivePage.is_open=!0,payload.activePageSlots=activePage.slots,payload.activePageWidgets=activePage.widgets;case 38:payload.activepage=tobeActivePage,payload.pages=this.props.pages?this.props.pages:{},payload.pages[slideId]=tobeActivePage,payload.active_widget_id="",this.props.updateStore({updates:payload});case 43:case"end":return _context4.stop()}},_callee4,this)}));return function(_x3){return _ref4.apply(this,arguments)}}()},{key:"render",value:function(){var _this3=this,slideNav=null;if(this.state.loaded){var slideNavMenus=[];this.state.slidelist&&0!=Object.keys(this.state.slidelist).length?(Object.keys(this.state.slidelist).map(function(modelName){var slideNavMenuItems=[];_this3.state.slidelist[modelName].map(function(navMenuItem){slideNavMenuItems.push(React.createElement(SideNavMenuItem,{key:navMenuItem.id,id:navMenuItem.id,onClick:_this3.handleClick,href:"javascript:void(0)"},navMenuItem.scope,".",navMenuItem.name))}),slideNavMenus.push(React.createElement(SideNavMenu,{title:modelName},slideNavMenuItems))}),slideNav=React.createElement("div",{style:{marginTop:20}},React.createElement(SideNav,{isFixedNav:!0,expanded:!0,isChildOfHeader:!1,"aria-label":"Side navigation"},slideNavMenus))):slideNav=React.createElement("div",{className:"noPagesFound"},"No Pages Found!")}else slideNav=React.createElement("div",{style:{width:"300px",marginTop:"20px"}},React.createElement(SelectSkeleton,{hideLabel:"true",size:"small"}));return React.createElement("div",{style:{height:"80vh",overflowY:"auto"}},slideNav)}}]),_SlideSelectionPanel_}(React.Component),_export("SlideSelectionPanel",SlideSelectionPanel=function(props){return _SlideSelectionPanel_}),_export("SlideSelectionPanel",SlideSelectionPanel)}}}),System.register("component/studio/SlideViewer.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SlideViewer_,SlideViewer,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SlideViewer_=function(_React$Component){function _SlideViewer_(){return _classCallCheck(this,_SlideViewer_),_possibleConstructorReturn(this,(_SlideViewer_.__proto__||Object.getPrototypeOf(_SlideViewer_)).apply(this,arguments))}return _inherits(_SlideViewer_,_React$Component),_createClass(_SlideViewer_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Hello World!"))}}]),_SlideViewer_}(React.Component),_export("SlideViewer",SlideViewer=function(props){return _SlideViewer_}),_export("SlideViewer",SlideViewer),_export("default",SlideViewer),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SlideViewer/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SlideViewer_,SlideViewer;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SlideViewer_=function(_React$Component){function _SlideViewer_(){return _classCallCheck(this,_SlideViewer_),_possibleConstructorReturn(this,(_SlideViewer_.__proto__||Object.getPrototypeOf(_SlideViewer_)).apply(this,arguments))}return _inherits(_SlideViewer_,_React$Component),_createClass(_SlideViewer_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Hello World!"))}}]),_SlideViewer_}(React.Component),_export("SlideViewer",SlideViewer=function(props){return _SlideViewer_}),_export("SlideViewer",SlideViewer)}}}),System.register("component/studio/SrsArray.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@jsonforms/material-renderers"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MaterialArrayControlRenderer,_SrsArray_,SrsArray,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_jsonformsMaterialRenderers){MaterialArrayControlRenderer=_jsonformsMaterialRenderers.MaterialArrayControlRenderer}],execute:function(){_SrsArray_=function(_React$Component){function _SrsArray_(props){return _classCallCheck(this,_SrsArray_),_possibleConstructorReturn(this,(_SrsArray_.__proto__||Object.getPrototypeOf(_SrsArray_)).call(this,props))}return _inherits(_SrsArray_,_React$Component),_createClass(_SrsArray_,[{key:"render",value:function(){console.log(this.props);return React.createElement("div",null,React.createElement("h2",null,"Hello World!"),React.createElement(MaterialArrayControlRenderer,{uischema:{type:"VerticalLayout",elements:[{type:"Control",scope:"#/properties/comments"}]},schema:{type:"object",properties:{comments:{type:"array",items:{type:"object",properties:{date:{type:"string",format:"date"},message:{type:"string",maxLength:5},enum:{type:"string",enum:["foo","bar"]}}}}}},data:{comments:[{date:"2001-09-10",message:"This is an example message",enum:"foo"},{}]},path:"/properties/form_list"}))}}]),_SrsArray_}(React.Component),_export("SrsArray",SrsArray=function(props){return _SrsArray_}),_export("SrsArray",SrsArray),_export("default",SrsArray),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsBoard.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.get","component/mmf/ComponentWrapper/Definition.js","lodash.clonedeep"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,lodashget,ComponentWrapper,_SrsBoard_,SrsBoard,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashGet){lodashget=_lodashGet.default},function(_componentMmfComponentWrapperDefinitionJs){ComponentWrapper=_componentMmfComponentWrapperDefinitionJs.ComponentWrapper},function(_lodashClonedeep){_lodashClonedeep.default}],execute:function(){_SrsBoard_=function(_React$Component){function _SrsBoard_(props){_classCallCheck(this,_SrsBoard_);var _this=_possibleConstructorReturn(this,(_SrsBoard_.__proto__||Object.getPrototypeOf(_SrsBoard_)).call(this,props));props.shadow&&(window.sd=window.sd||{},window.sd[props.uid]={doc:props.shadow});var data=_this.props.widgetProps&&_this.props.widgetProps.boardData?JSON.parse(_this.props.widgetProps.boardData):null;data=data||(_this.props.boarddata?JSON.parse(_this.props.boarddata):data),_this.state={reload:!1,boardData:data},_this.loadBoardData=_this.loadBoardData.bind(_this),_this.getBoardOperations=_this.getBoardOperations.bind(_this),_this.refreshBoard=_this.refreshBoard.bind(_this),_this.reactTrello=null,_this.config={};try{_this.config=_this.props.config?JSON.parse(_this.props.config):_this.props.widgetProps&&_this.props.widgetProps.config?JSON.parse(_this.props.widgetProps.config):{}}catch(err){}return _this.defaultValue={lanes:[{id:"todo",title:"Todo",label:"0/0",style:{width:280},cards:[{id:"card1",title:"Do something...",label:"15 mins",description:"Card details"},{id:"card2",title:"Do nothing...",label:"15 mins",description:"Card details"}]},{id:"doing",title:"Doing",label:"0/0",style:{width:280},cards:[{id:"card3",title:"Do everything...",label:"15 mins",description:"Card details"},{id:"card4",title:"Do anything...",label:"15 mins",description:"Card details"}]},{id:"done",title:"Done",label:"0/0",style:{width:280},cards:[]}]},System.import("react-trello").then(function(defaultFn){_this.reactTrello=defaultFn,_this.setState({reload:!_this.state.reload})}),_this}return _inherits(_SrsBoard_,_React$Component),_createClass(_SrsBoard_,[{key:"shouldComponentUpdate",value:function(nextProps,nextState){return this.refs.styles&&!this.styles&&(this.styles=this.refs.styles),!(this.reactTrello&&nextState.reload==this.props.reload&&(!this.props.widgetProps||_.isEqual(this.props.widgetProps,nextProps.widgetProps)))}},{key:"componentDidMount",value:function(){this.refreshBoard({data:!0,laneHeader:!0,laneFooter:!0,addCardLink:!0,card:!0,newCard:!0,newLane:!0})}},{key:"refreshBoard",value:function(reloads){var _this2=this,laneHeaderComponentId=this.props.widgetProps&&this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;(laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null))&&reloads.laneHeader&&$script.getscript("mmf.loadComponent").then(function(_ref){(0,_ref.default)({componentId:laneHeaderComponentId}).then(function(componentData){componentData&&(_this2.laneHeaderComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var laneFooterComponentId=this.props.widgetProps&&this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;(laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null))&&reloads.laneFooter&&$script.getscript("mmf.loadComponent").then(function(_ref2){(0,_ref2.default)({componentId:laneFooterComponentId}).then(function(componentData){componentData&&(_this2.laneFooterComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var cardComponentId=this.props.widgetProps&&this.props.widgetProps.Card?this.props.widgetProps.Card:null;(cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null))&&reloads.card&&$script.getscript("mmf.loadComponent").then(function(_ref3){(0,_ref3.default)({componentId:cardComponentId}).then(function(componentData){componentData&&(_this2.cardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newLaneComponentId=this.props.widgetProps&&this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;(newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null))&&reloads.newLane&&$script.getscript("mmf.loadComponent").then(function(_ref4){(0,_ref4.default)({componentId:newLaneComponentId}).then(function(componentData){componentData&&(_this2.newLaneComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newCardComponentId=this.props.widgetProps&&this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;(newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null))&&reloads.newCard&&$script.getscript("mmf.loadComponent").then(function(_ref5){(0,_ref5.default)({componentId:newCardComponentId}).then(function(componentData){componentData&&(_this2.newCardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var addCardLinkComponentId=this.props.widgetProps&&this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;(addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null))&&reloads.addCardLink&&$script.getscript("mmf.loadComponent").then(function(_ref6){(0,_ref6.default)({componentId:addCardLinkComponentId}).then(function(componentData){componentData&&(_this2.addCardLinkComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config),add_events_on_host:!0},_this2.setState({reload:!_this2.state.reload}))})}),reloads.data&&this.loadBoardData()}},{key:"componentDidUpdate",value:function(prevProps){if(prevProps.widgetProps&&this.props.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)){var reloads={data:!1,addCardLink:!1,newCard:!1,card:!1,newLane:!1};prevProps.widgetProps.TableName==this.props.widgetProps.TableName&&prevProps.widgetProps.LaneField==this.props.widgetProps.LaneField&&prevProps.widgetProps.BoardFilter==this.props.widgetProps.BoardFilter&&prevProps.widgetProps.FieldMapping==this.props.widgetProps.FieldMapping||(reloads.data=!0),reloads.laneHeader=prevProps.widgetProps.LaneHeader!=this.props.widgetProps.LaneHeader,reloads.laneFooter=prevProps.widgetProps.LaneFooter!=this.props.widgetProps.LaneFooter,reloads.card=prevProps.widgetProps.Card!=this.props.widgetProps.Card,reloads.newCard=prevProps.widgetProps.NewCard!=this.props.widgetProps.NewCard,reloads.addCardLink=prevProps.widgetProps.AddCardLink!=this.props.widgetProps.AddCardLink,reloads.newLane=prevProps.widgetProps.NewLane!=this.props.widgetProps.NewLane,this.refreshBoard(reloads)}this.refs.board&&$(this.refs.board).find(".smooth-dnd-container.vertical").css("height","10rem")}},{key:"loadBoardData",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var _config,tableName,laneField,boardFilter,fieldMapping,reverseFieldMapping,boardData,cardsPerLane,fields,inputParams,self,_this3=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_config=this.config,tableName=_config.tableName,laneField=_config.laneField,boardFilter=_config.boardFilter,fieldMapping=_config.fieldMapping,reverseFieldMapping={},fieldMapping=fieldMapping||[{name:"id",value:"uid"}],tableName&&laneField&&fieldMapping){_context.next=6;break}return this.setState({boardData:this.defaultValue}),_context.abrupt("return");case 6:boardData={lanes:[]},cardsPerLane={},fields=[],fieldMapping.length>0&&fieldMapping.map(function(fieldMapItem,indx){fieldMapItem.name&&fieldMapItem.value&&(-1==fields.indexOf(fieldMapItem.value)&&fields.push(fieldMapItem.value),reverseFieldMapping[fieldMapItem.value]=reverseFieldMapping[fieldMapItem.value]||[],reverseFieldMapping[fieldMapItem.value].push(fieldMapItem.name))}),-1==fields.indexOf("uid")&&fields.push("uid"),-1==fields.indexOf(laneField)&&fields.push(laneField),inputParams={tableName:tableName,fields:fields,filter:boardFilter||{},fieldAliases:null,schema:this.props.schema},self=this,$script.runscript("mmf.getRecords",inputParams).then(function(records){records&&records.map&&records.map(function(recordNode,indx){var record=recordNode.node,card={};record&&Object.keys(record).map(function(recordField,indx){var cardPropNames=reverseFieldMapping[recordField];cardPropNames&&cardPropNames.map(function(cardPropName){card[cardPropName]=record[recordField]}),record.uid&&(card.uid=record.uid,card.id=record.uid)});var laneValue=lodashget(record,laneField);if(laneField.indexOf(".")>-1){var relationName=laneField.split(".")[0];laneValue=laneValue+"@@@@"+lodashget(record,relationName+".uid")}cardsPerLane[laneValue]=cardsPerLane[laneValue]||[],cardsPerLane[laneValue].push(card)}),cardsPerLane&&Object.keys(cardsPerLane).length>0&&Object.keys(cardsPerLane).map(function(laneName,indx){var cards=cardsPerLane[laneName],height=self.props.shadow&&self.props.shadow.host?$(self.props.shadow.host).parent().css("height"):"",style={width:280};(height=height?parseInt(height.replace("px","")):-1)>-1&&(style.maxHeight=height-20);var laneId=laneName,laneTitle=laneName;laneName.indexOf("@@@@")>-1&&(laneTitle=laneName.split("@@@@")[0],laneId=laneName.split("@@@@")[1]);var laneObj={id:laneId,title:laneTitle,label:"Total - "+cards.length,style:style,cards:cards};boardData.lanes.push(laneObj)}),_this3.setState({boardData:boardData})});case 15:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref7.apply(this,arguments)}}()},{key:"getBoardOperations",value:function(){var _this4=this,boardOperations={onCardMoveAcrossLanes:function(srcLaneId,targetLaneId,cardId,addedIndex){_this4.config},onDataChange:function(newData){},onCardClick:function(cardId,metadata,laneId){},onCardAdd:function(card,laneId){},onCardDelete:function(cardId,laneId){},onLaneAdd:function(params){},onLaneDelete:function(laneId){},onLaneUpdate:function(laneId,data){},onLaneClick:function(laneId){}};return boardOperations}},{key:"render",value:function(){var cardComponentId=this.props.widgetProps.Card?this.props.widgetProps.Card:null;cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null);var newLaneComponentId=this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null);var newCardComponentId=this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null);var addCardLinkComponentId=this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null);var laneHeaderComponentId=this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null);var laneFooterComponentId=this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null);try{this.config=this.props.config?JSON.parse(this.props.config):this.props.widgetProps&&this.props.widgetProps.config?JSON.parse(this.props.widgetProps.config):{}}catch(err){this.config={}}if(this.config.tableName=this.props.tablename?this.props.tablename:this.props.widgetProps.TableName?this.props.widgetProps.TableName:this.config.tableName,this.config.laneField=this.props.lanefield?this.props.lanefield:this.props.widgetProps.LaneField?this.props.widgetProps.LaneField:this.config.lanefield,this.config.boardFilter=this.props.boardfilter?JSON.parse(this.props.boardfilter):this.props.widgetProps.BoardFilter?this.props.widgetProps.BoardFilter:this.config.boardFilter,this.config.boardFilter=this.config.boardFilter&&"string"==typeof this.config.boardFilter?JSON.parse(this.config.boardFilter):this.config.boardFilter,this.config.fieldMapping=this.props.fieldmapping?JSON.parse(this.props.fieldmapping):this.props.widgetProps.FieldMapping?this.props.widgetProps.FieldMapping:this.config.fieldMapping,this.config.fieldMapping=this.config.fieldMapping&&"string"==typeof this.config.fieldMapping?JSON.parse(this.config.fieldMapping):this.config.fieldMapping,this.config.boardType=this.props.boardtype?this.props.boardtype:this.props.widgetProps.BoardType?this.props.widgetProps.BoardType:this.config.boardType,!this.reactTrello||!this.state.boardData||laneHeaderComponentId&&!this.laneHeaderComponent||laneFooterComponentId&&!this.laneFooterComponent||cardComponentId&&!this.cardComponent||newLaneComponentId&&!this.newLaneComponent||newCardComponentId&&!this.newCardComponent||addCardLinkComponentId&&!this.addCardLinkComponent)return React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});var theme=this.props.widgetProps&&this.props.widgetProps.Theme?this.props.widgetProps.Theme:[{name:"backgroundColor",value:"#6a9f7194"}],styles={};(theme=(theme=theme||this.props.themeprops)&&"string"==typeof theme?JSON.parse(theme):theme)&&theme.length>0&&theme.map(function(themeItem){styles[themeItem.name]=themeItem.value});var laneDraggable="true"==this.props.widgetProps.laneDraggable;laneDraggable=laneDraggable||!this.props.lanedraggable||"true"==this.props.lanedraggable;var cardDraggable="true"==this.props.widgetProps.cardDraggable;cardDraggable=cardDraggable||!this.props.carddraggable||"true"==this.props.carddraggable;var canAddLanes="true"==this.props.widgetProps.cardDraggable;canAddLanes=canAddLanes||!this.props.canaddlanes||"true"==this.props.canaddlanes;var boardProps={laneDraggable:laneDraggable,draggable:"false",style:styles,canAddLanes:canAddLanes,editable:canAddLanes};if(cardComponentId){var Card=ComponentWrapper(this.cardComponent);boardProps.components=boardProps.components||{},boardProps.components.Card=Card}if(newLaneComponentId){var NewLane=ComponentWrapper(this.newLaneComponent);boardProps.components=boardProps.components||{},boardProps.components.NewLaneSection=NewLane}if(newCardComponentId){var NewCard=ComponentWrapper(this.newCardComponent);boardProps.components=boardProps.components||{},boardProps.components.NewCardForm=NewCard}if(addCardLinkComponentId){var AddCardLink=ComponentWrapper(this.addCardLinkComponent);boardProps.components=boardProps.components||{},boardProps.components.AddCardLink=AddCardLink}var boardOperations=this.getBoardOperations(),Board=this.reactTrello?this.reactTrello.default:React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});return this.reactTrello?React.createElement("div",{ref:"board",className:"backlog"==this.config.boardType?"Backlog":"",style:{height:"inherit",overflowY:"hidden"}},React.createElement("style",null,this.styles),React.createElement(Board,_extends({data:this.state.boardData,style:{height:"inherit"},className:"uid_"+this.props.uid+"_uid"},boardProps,boardOperations))):React.createElement("div",null)}}]),_SrsBoard_}(React.Component),_export("SrsBoard",SrsBoard=function(props){return _SrsBoard_}),_export("SrsBoard",SrsBoard),_export("default",SrsBoard),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema" : {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsBoard/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.get","component/mmf/ComponentWrapper/Definition.js","lodash.clonedeep"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,lodashget,ComponentWrapper,_SrsBoard_,SrsBoard;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashGet){lodashget=_lodashGet.default},function(_componentMmfComponentWrapperDefinitionJs){ComponentWrapper=_componentMmfComponentWrapperDefinitionJs.ComponentWrapper},function(_lodashClonedeep){_lodashClonedeep.default}],execute:function(){_SrsBoard_=function(_React$Component){function _SrsBoard_(props){_classCallCheck(this,_SrsBoard_);var _this=_possibleConstructorReturn(this,(_SrsBoard_.__proto__||Object.getPrototypeOf(_SrsBoard_)).call(this,props));props.shadow&&(window.sd=window.sd||{},window.sd[props.uid]={doc:props.shadow});var data=_this.props.widgetProps&&_this.props.widgetProps.boardData?JSON.parse(_this.props.widgetProps.boardData):null;data=data||(_this.props.boarddata?JSON.parse(_this.props.boarddata):data),_this.state={reload:!1,boardData:data},_this.loadBoardData=_this.loadBoardData.bind(_this),_this.getBoardOperations=_this.getBoardOperations.bind(_this),_this.refreshBoard=_this.refreshBoard.bind(_this),_this.reactTrello=null,_this.config={};try{_this.config=_this.props.config?JSON.parse(_this.props.config):_this.props.widgetProps&&_this.props.widgetProps.config?JSON.parse(_this.props.widgetProps.config):{}}catch(err){}return _this.defaultValue={lanes:[{id:"todo",title:"Todo",label:"0/0",style:{width:280},cards:[{id:"card1",title:"Do something...",label:"15 mins",description:"Card details"},{id:"card2",title:"Do nothing...",label:"15 mins",description:"Card details"}]},{id:"doing",title:"Doing",label:"0/0",style:{width:280},cards:[{id:"card3",title:"Do everything...",label:"15 mins",description:"Card details"},{id:"card4",title:"Do anything...",label:"15 mins",description:"Card details"}]},{id:"done",title:"Done",label:"0/0",style:{width:280},cards:[]}]},System.import("react-trello").then(function(defaultFn){_this.reactTrello=defaultFn,_this.setState({reload:!_this.state.reload})}),_this}return _inherits(_SrsBoard_,_React$Component),_createClass(_SrsBoard_,[{key:"shouldComponentUpdate",value:function(nextProps,nextState){return this.refs.styles&&!this.styles&&(this.styles=this.refs.styles),!(this.reactTrello&&nextState.reload==this.props.reload&&(!this.props.widgetProps||_.isEqual(this.props.widgetProps,nextProps.widgetProps)))}},{key:"componentDidMount",value:function(){this.refreshBoard({data:!0,laneHeader:!0,laneFooter:!0,addCardLink:!0,card:!0,newCard:!0,newLane:!0})}},{key:"refreshBoard",value:function(reloads){var _this2=this,laneHeaderComponentId=this.props.widgetProps&&this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;(laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null))&&reloads.laneHeader&&$script.getscript("mmf.loadComponent").then(function(_ref){(0,_ref.default)({componentId:laneHeaderComponentId}).then(function(componentData){componentData&&(_this2.laneHeaderComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var laneFooterComponentId=this.props.widgetProps&&this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;(laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null))&&reloads.laneFooter&&$script.getscript("mmf.loadComponent").then(function(_ref2){(0,_ref2.default)({componentId:laneFooterComponentId}).then(function(componentData){componentData&&(_this2.laneFooterComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var cardComponentId=this.props.widgetProps&&this.props.widgetProps.Card?this.props.widgetProps.Card:null;(cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null))&&reloads.card&&$script.getscript("mmf.loadComponent").then(function(_ref3){(0,_ref3.default)({componentId:cardComponentId}).then(function(componentData){componentData&&(_this2.cardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newLaneComponentId=this.props.widgetProps&&this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;(newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null))&&reloads.newLane&&$script.getscript("mmf.loadComponent").then(function(_ref4){(0,_ref4.default)({componentId:newLaneComponentId}).then(function(componentData){componentData&&(_this2.newLaneComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newCardComponentId=this.props.widgetProps&&this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;(newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null))&&reloads.newCard&&$script.getscript("mmf.loadComponent").then(function(_ref5){(0,_ref5.default)({componentId:newCardComponentId}).then(function(componentData){componentData&&(_this2.newCardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var addCardLinkComponentId=this.props.widgetProps&&this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;(addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null))&&reloads.addCardLink&&$script.getscript("mmf.loadComponent").then(function(_ref6){(0,_ref6.default)({componentId:addCardLinkComponentId}).then(function(componentData){componentData&&(_this2.addCardLinkComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config),add_events_on_host:!0},_this2.setState({reload:!_this2.state.reload}))})}),reloads.data&&this.loadBoardData()}},{key:"componentDidUpdate",value:function(prevProps){if(prevProps.widgetProps&&this.props.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)){var reloads={data:!1,addCardLink:!1,newCard:!1,card:!1,newLane:!1};prevProps.widgetProps.TableName==this.props.widgetProps.TableName&&prevProps.widgetProps.LaneField==this.props.widgetProps.LaneField&&prevProps.widgetProps.BoardFilter==this.props.widgetProps.BoardFilter&&prevProps.widgetProps.FieldMapping==this.props.widgetProps.FieldMapping||(reloads.data=!0),reloads.laneHeader=prevProps.widgetProps.LaneHeader!=this.props.widgetProps.LaneHeader,reloads.laneFooter=prevProps.widgetProps.LaneFooter!=this.props.widgetProps.LaneFooter,reloads.card=prevProps.widgetProps.Card!=this.props.widgetProps.Card,reloads.newCard=prevProps.widgetProps.NewCard!=this.props.widgetProps.NewCard,reloads.addCardLink=prevProps.widgetProps.AddCardLink!=this.props.widgetProps.AddCardLink,reloads.newLane=prevProps.widgetProps.NewLane!=this.props.widgetProps.NewLane,this.refreshBoard(reloads)}this.refs.board&&$(this.refs.board).find(".smooth-dnd-container.vertical").css("height","10rem")}},{key:"loadBoardData",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var _config,tableName,laneField,boardFilter,fieldMapping,reverseFieldMapping,boardData,cardsPerLane,fields,inputParams,self,_this3=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_config=this.config,tableName=_config.tableName,laneField=_config.laneField,boardFilter=_config.boardFilter,fieldMapping=_config.fieldMapping,reverseFieldMapping={},fieldMapping=fieldMapping||[{name:"id",value:"uid"}],tableName&&laneField&&fieldMapping){_context.next=6;break}return this.setState({boardData:this.defaultValue}),_context.abrupt("return");case 6:boardData={lanes:[]},cardsPerLane={},fields=[],fieldMapping.length>0&&fieldMapping.map(function(fieldMapItem,indx){fieldMapItem.name&&fieldMapItem.value&&(-1==fields.indexOf(fieldMapItem.value)&&fields.push(fieldMapItem.value),reverseFieldMapping[fieldMapItem.value]=reverseFieldMapping[fieldMapItem.value]||[],reverseFieldMapping[fieldMapItem.value].push(fieldMapItem.name))}),-1==fields.indexOf("uid")&&fields.push("uid"),-1==fields.indexOf(laneField)&&fields.push(laneField),inputParams={tableName:tableName,fields:fields,filter:boardFilter||{},fieldAliases:null,schema:this.props.schema},self=this,$script.runscript("mmf.getRecords",inputParams).then(function(records){records&&records.map&&records.map(function(recordNode,indx){var record=recordNode.node,card={};record&&Object.keys(record).map(function(recordField,indx){var cardPropNames=reverseFieldMapping[recordField];cardPropNames&&cardPropNames.map(function(cardPropName){card[cardPropName]=record[recordField]}),record.uid&&(card.uid=record.uid,card.id=record.uid)});var laneValue=lodashget(record,laneField);if(laneField.indexOf(".")>-1){var relationName=laneField.split(".")[0];laneValue=laneValue+"@@@@"+lodashget(record,relationName+".uid")}cardsPerLane[laneValue]=cardsPerLane[laneValue]||[],cardsPerLane[laneValue].push(card)}),cardsPerLane&&Object.keys(cardsPerLane).length>0&&Object.keys(cardsPerLane).map(function(laneName,indx){var cards=cardsPerLane[laneName],height=self.props.shadow&&self.props.shadow.host?$(self.props.shadow.host).parent().css("height"):"",style={width:280};(height=height?parseInt(height.replace("px","")):-1)>-1&&(style.maxHeight=height-20);var laneId=laneName,laneTitle=laneName;laneName.indexOf("@@@@")>-1&&(laneTitle=laneName.split("@@@@")[0],laneId=laneName.split("@@@@")[1]);var laneObj={id:laneId,title:laneTitle,label:"Total - "+cards.length,style:style,cards:cards};boardData.lanes.push(laneObj)}),_this3.setState({boardData:boardData})});case 15:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref7.apply(this,arguments)}}()},{key:"getBoardOperations",value:function(){var _this4=this,boardOperations={onCardMoveAcrossLanes:function(srcLaneId,targetLaneId,cardId,addedIndex){_this4.config},onDataChange:function(newData){},onCardClick:function(cardId,metadata,laneId){},onCardAdd:function(card,laneId){},onCardDelete:function(cardId,laneId){},onLaneAdd:function(params){},onLaneDelete:function(laneId){},onLaneUpdate:function(laneId,data){},onLaneClick:function(laneId){}};return boardOperations}},{key:"render",value:function(){var cardComponentId=this.props.widgetProps.Card?this.props.widgetProps.Card:null;cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null);var newLaneComponentId=this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null);var newCardComponentId=this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null);var addCardLinkComponentId=this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null);var laneHeaderComponentId=this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null);var laneFooterComponentId=this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null);try{this.config=this.props.config?JSON.parse(this.props.config):this.props.widgetProps&&this.props.widgetProps.config?JSON.parse(this.props.widgetProps.config):{}}catch(err){this.config={}}if(this.config.tableName=this.props.tablename?this.props.tablename:this.props.widgetProps.TableName?this.props.widgetProps.TableName:this.config.tableName,this.config.laneField=this.props.lanefield?this.props.lanefield:this.props.widgetProps.LaneField?this.props.widgetProps.LaneField:this.config.lanefield,this.config.boardFilter=this.props.boardfilter?JSON.parse(this.props.boardfilter):this.props.widgetProps.BoardFilter?this.props.widgetProps.BoardFilter:this.config.boardFilter,this.config.boardFilter=this.config.boardFilter&&"string"==typeof this.config.boardFilter?JSON.parse(this.config.boardFilter):this.config.boardFilter,this.config.fieldMapping=this.props.fieldmapping?JSON.parse(this.props.fieldmapping):this.props.widgetProps.FieldMapping?this.props.widgetProps.FieldMapping:this.config.fieldMapping,this.config.fieldMapping=this.config.fieldMapping&&"string"==typeof this.config.fieldMapping?JSON.parse(this.config.fieldMapping):this.config.fieldMapping,this.config.boardType=this.props.boardtype?this.props.boardtype:this.props.widgetProps.BoardType?this.props.widgetProps.BoardType:this.config.boardType,!this.reactTrello||!this.state.boardData||laneHeaderComponentId&&!this.laneHeaderComponent||laneFooterComponentId&&!this.laneFooterComponent||cardComponentId&&!this.cardComponent||newLaneComponentId&&!this.newLaneComponent||newCardComponentId&&!this.newCardComponent||addCardLinkComponentId&&!this.addCardLinkComponent)return React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});var theme=this.props.widgetProps&&this.props.widgetProps.Theme?this.props.widgetProps.Theme:[{name:"backgroundColor",value:"#6a9f7194"}],styles={};(theme=(theme=theme||this.props.themeprops)&&"string"==typeof theme?JSON.parse(theme):theme)&&theme.length>0&&theme.map(function(themeItem){styles[themeItem.name]=themeItem.value});var laneDraggable="true"==this.props.widgetProps.laneDraggable;laneDraggable=laneDraggable||!this.props.lanedraggable||"true"==this.props.lanedraggable;var cardDraggable="true"==this.props.widgetProps.cardDraggable;cardDraggable=cardDraggable||!this.props.carddraggable||"true"==this.props.carddraggable;var canAddLanes="true"==this.props.widgetProps.cardDraggable;canAddLanes=canAddLanes||!this.props.canaddlanes||"true"==this.props.canaddlanes;var boardProps={laneDraggable:laneDraggable,draggable:"false",style:styles,canAddLanes:canAddLanes,editable:canAddLanes};if(cardComponentId){var Card=ComponentWrapper(this.cardComponent);boardProps.components=boardProps.components||{},boardProps.components.Card=Card}if(newLaneComponentId){var NewLane=ComponentWrapper(this.newLaneComponent);boardProps.components=boardProps.components||{},boardProps.components.NewLaneSection=NewLane}if(newCardComponentId){var NewCard=ComponentWrapper(this.newCardComponent);boardProps.components=boardProps.components||{},boardProps.components.NewCardForm=NewCard}if(addCardLinkComponentId){var AddCardLink=ComponentWrapper(this.addCardLinkComponent);boardProps.components=boardProps.components||{},boardProps.components.AddCardLink=AddCardLink}var boardOperations=this.getBoardOperations(),Board=this.reactTrello?this.reactTrello.default:React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});return this.reactTrello?React.createElement("div",{ref:"board",className:"backlog"==this.config.boardType?"Backlog":"",style:{height:"inherit",overflowY:"hidden"}},React.createElement("style",null,this.styles),React.createElement(Board,_extends({data:this.state.boardData,style:{height:"inherit"},className:"uid_"+this.props.uid+"_uid"},boardProps,boardOperations))):React.createElement("div",null)}}]),_SrsBoard_}(React.Component),_export("SrsBoard",SrsBoard=function(props){return _SrsBoard_}),_export("SrsBoard",SrsBoard)}}}),System.register("component/studio/SrsButton.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/link/32"],function(_export,_context3){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,Link,_SrsButton_,SrsButton,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button},function(_carbonIconsReactLibLink){Link=_carbonIconsReactLibLink.default}],execute:function(){_SrsButton_=function(_React$Component){function _SrsButton_(props){_classCallCheck(this,_SrsButton_);var _this=_possibleConstructorReturn(this,(_SrsButton_.__proto__||Object.getPrototypeOf(_SrsButton_)).call(this,props));return _this.state={icon:Link},_this}return _inherits(_SrsButton_,_React$Component),_createClass(_SrsButton_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var icon;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.props.widgetProps||!this.props.widgetProps.IconPath){_context.next=10;break}return _context.prev=1,_context.next=4,System.import("@carbon/icons-react/lib/"+this.props.widgetProps.IconPath);case 4:icon=_context.sent,this.setState({icon:icon}),_context.next=10;break;case 8:_context.prev=8,_context.t0=_context.catch(1);case 10:case"end":return _context.stop()}},_callee,this,[[1,8]])}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){var icon;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.props.widgetProps||!prevProps.widgetProps||prevProps.widgetProps.IconPath==this.props.widgetProps.IconPath){_context2.next=10;break}return _context2.prev=1,_context2.next=4,System.import("@carbon/icons-react/lib/"+this.props.widgetProps.IconPath);case 4:icon=_context2.sent,this.setState({icon:icon}),_context2.next=10;break;case 8:_context2.prev=8,_context2.t0=_context2.catch(1);case 10:case"end":return _context2.stop()}},_callee2,this,[[1,8]])}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"render",value:function(){var _props=this.props,label=_props.label,handleOnClick=(_props.className,_props.handleOnClick),size=(_props.rules,_props.level,_props.size),props=(_props.style,{size:this.props.widgetProps&&this.props.widgetProps.Size?this.props.widgetProps.Size:size||"large"});handleOnClick&&(props.onClick=handleOnClick),this.props.widgetProps&&("true"==this.props.widgetProps.IconOnly||1==this.props.widgetProps.IconOnly)&&this.props.widgetProps.IconPath&&(props.hasIconOnly=!0,props.iconDescription=this.props.widgetProps.Label,props.renderIcon=this.state.icon,props.tabIndex=0,props.tooltipAlignment="center",props.tooltipPosition="top");this.props.widgetProps&&this.props.widgetProps.ButtonAction&&this.props.widgetProps.ButtonAction;var styles=this.props.widgetProps&&this.props.widgetProps.Styles&&"string"==typeof this.props.widgetProps.Styles?JSON.parse(this.props.widgetProps.Styles):{},containerStyles=this.props.containerStyles?this.props.containerStyles:{};containerStyles=_extends({backgroundColor:"#0095ff"},containerStyles,styles),props.hasIconOnly&&(containerStyles=_extends({},containerStyles,{backgroundColor:"rgb(0, 149, 255)",minWidth:"inherit",width:"inherit",paddingLeft:"2rem",paddingRight:"1rem"}));var embeddedStyles=null;return this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles)),React.createElement("div",{className:containerStyles&&0!=Object.keys(containerStyles).length?"":"srs-prem-container"},embeddedStyles,props.hasIconOnly?React.createElement(Button,_extends({style:containerStyles},props)):React.createElement(Button,_extends({style:containerStyles},props),label||(this.props.widgetProps&&this.props.widgetProps.Label||"Save")))}}]),_SrsButton_}(React.Component),_export("SrsButton",SrsButton=function(props){return WrappedComponent=_SrsButton_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsButton",SrsButton),_export("default",SrsButton),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsCardContainer.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/SrsCardItem/Definition.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SrsCardItem,_SrsCardContainer_,SrsCardContainer,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentStudioSrsCardItemDefinitionJs){SrsCardItem=_componentStudioSrsCardItemDefinitionJs.SrsCardItem}],execute:function(){_SrsCardContainer_=function(_React$Component){function _SrsCardContainer_(){return _classCallCheck(this,_SrsCardContainer_),_possibleConstructorReturn(this,(_SrsCardContainer_.__proto__||Object.getPrototypeOf(_SrsCardContainer_)).apply(this,arguments))}return _inherits(_SrsCardContainer_,_React$Component),_createClass(_SrsCardContainer_,[{key:"render",value:function(){var CardItem=new SrsCardItem;return React.createElement("div",{className:"cardItem"},[{title:"Product First",cardDetails:{Available:"100",Price:"90"}},{title:"Product Second",cardDetails:{Available:"100",Total:"90"}}].map(function(item,indx){return React.createElement(CardItem,{title:item.title,cardDetails:item.cardDetails})}))}}]),_SrsCardContainer_}(React.Component),_export("SrsCardContainer",SrsCardContainer=function(props){return _SrsCardContainer_}),_export("SrsCardContainer",SrsCardContainer),_export("default",SrsCardContainer),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsCardItem/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ClickableTile,_SrsCardItem_,SrsCardItem;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){ClickableTile=_carbonComponentsReact.ClickableTile,_carbonComponentsReact.OverflowMenu,_carbonComponentsReact.OverflowMenuItem}],execute:function(){_SrsCardItem_=function(_React$Component){function _SrsCardItem_(){return _classCallCheck(this,_SrsCardItem_),_possibleConstructorReturn(this,(_SrsCardItem_.__proto__||Object.getPrototypeOf(_SrsCardItem_)).apply(this,arguments))}return _inherits(_SrsCardItem_,_React$Component),_createClass(_SrsCardItem_,[{key:"render",value:function(){for(var cardDetails=this.props.cardDetails?this.props.cardDetails:{Available:"100",Price:"80"},imageUrl=this.props.imgUrl?this.props.imgUrl:"/resources/NoResults.jpg",title=this.props.title?this.props.title:"Product 1",cardElements=[],keys=Object.keys(cardDetails),i=0;i<keys.length;i++)cardElements.push(React.createElement("div",{style:{paddingTop:"5px",fontSize:"small"}}," ",keys[i],"  ",cardDetails[keys[i]]));return React.createElement("div",{style:{fontFamily:"Arial, sans-serif"}},React.createElement("style",null,'@import url("component/mmf/SrsCardItem/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(ClickableTile,{style:{width:"225px",height:"225px",marginTop:"10px",marginLeft:"10px",border:"1px solid #e0e0e0"},light:"true"},React.createElement("div",{style:{display:"flex",flexDirection:"column",flexWrap:"wrap"}},React.createElement("div",{style:{display:"flex",flexDirection:"column",flexWrap:"wrap",alignItems:"center"}},React.createElement("img",{src:imageUrl,style:{width:"80%",height:"80%"}})),React.createElement("div",{style:{paddingTop:"10px",fontSize:"medium",fontWeight:"bold"}},title),cardElements.map(function(cardElement){return cardElement}))))}}]),_SrsCardItem_}(React.Component),_export("SrsCardItem",SrsCardItem=function(props){return _SrsCardItem_}),_export("SrsCardItem",SrsCardItem)}}}),System.register("component/studio/SrsCardContainer/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/SrsCardItem/Definition.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SrsCardItem,_SrsCardContainer_,SrsCardContainer;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentStudioSrsCardItemDefinitionJs){SrsCardItem=_componentStudioSrsCardItemDefinitionJs.SrsCardItem}],execute:function(){_SrsCardContainer_=function(_React$Component){function _SrsCardContainer_(){return _classCallCheck(this,_SrsCardContainer_),_possibleConstructorReturn(this,(_SrsCardContainer_.__proto__||Object.getPrototypeOf(_SrsCardContainer_)).apply(this,arguments))}return _inherits(_SrsCardContainer_,_React$Component),_createClass(_SrsCardContainer_,[{key:"render",value:function(){var CardItem=new SrsCardItem;return React.createElement("div",{className:"cardItem"},[{title:"Product First",cardDetails:{Available:"100",Price:"90"}},{title:"Product Second",cardDetails:{Available:"100",Total:"90"}}].map(function(item,indx){return React.createElement(CardItem,{title:item.title,cardDetails:item.cardDetails})}))}}]),_SrsCardContainer_}(React.Component),_export("SrsCardContainer",SrsCardContainer=function(props){return _SrsCardContainer_}),_export("SrsCardContainer",SrsCardContainer)}}}),System.register("component/studio/SrsCardItem.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ClickableTile,_SrsCardItem_,SrsCardItem,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){ClickableTile=_carbonComponentsReact.ClickableTile,_carbonComponentsReact.OverflowMenu,_carbonComponentsReact.OverflowMenuItem}],execute:function(){_SrsCardItem_=function(_React$Component){function _SrsCardItem_(){return _classCallCheck(this,_SrsCardItem_),_possibleConstructorReturn(this,(_SrsCardItem_.__proto__||Object.getPrototypeOf(_SrsCardItem_)).apply(this,arguments))}return _inherits(_SrsCardItem_,_React$Component),_createClass(_SrsCardItem_,[{key:"render",value:function(){for(var cardDetails=this.props.cardDetails?this.props.cardDetails:{Available:"100",Price:"80"},imageUrl=this.props.imgUrl?this.props.imgUrl:"/resources/NoResults.jpg",title=this.props.title?this.props.title:"Product 1",cardElements=[],keys=Object.keys(cardDetails),i=0;i<keys.length;i++)cardElements.push(React.createElement("div",{style:{paddingTop:"5px",fontSize:"small"}}," ",keys[i],"  ",cardDetails[keys[i]]));return React.createElement("div",{style:{fontFamily:"Arial, sans-serif"}},React.createElement("style",null,'@import url("component/mmf/SrsCardItem/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(ClickableTile,{style:{width:"225px",height:"225px",marginTop:"10px",marginLeft:"10px",border:"1px solid #e0e0e0"},light:"true"},React.createElement("div",{style:{display:"flex",flexDirection:"column",flexWrap:"wrap"}},React.createElement("div",{style:{display:"flex",flexDirection:"column",flexWrap:"wrap",alignItems:"center"}},React.createElement("img",{src:imageUrl,style:{width:"80%",height:"80%"}})),React.createElement("div",{style:{paddingTop:"10px",fontSize:"medium",fontWeight:"bold"}},title),cardElements.map(function(cardElement){return cardElement}))))}}]),_SrsCardItem_}(React.Component),_export("SrsCardItem",SrsCardItem=function(props){return _SrsCardItem_}),_export("SrsCardItem",SrsCardItem),_export("default",SrsCardItem),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsCarousel.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","image-carousel"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsCarousel_,SrsCarousel,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_imageCarousel){_imageCarousel.default}],execute:function(){_SrsCarousel_=function(_React$Component){function _SrsCarousel_(){return _classCallCheck(this,_SrsCarousel_),_possibleConstructorReturn(this,(_SrsCarousel_.__proto__||Object.getPrototypeOf(_SrsCarousel_)).apply(this,arguments))}return _inherits(_SrsCarousel_,_React$Component),_createClass(_SrsCarousel_,[{key:"componentDidMount",value:function(){var images=this.props.widgetProps&&this.props.widgetProps.Images?this.props.widgetProps.Images:this.props.images?"string"==typeof this.props.images?JSON.parse(this.props.images):this.props.images:["/resources/fresh.jpg","/resources/flowery.jpg"];images=images&&"string"==typeof images?JSON.parse(images):images;var options={target:$(".container",this.props.shadow)[0],showBottomMenu:!1,showSlidesToggle:!0,showBottomToggle:!0};1==$(".container",this.props.shadow).length&&new ImageCarousel(images,options).init()}},{key:"render",value:function(){var embeddedStyles=null;return this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles)),React.createElement("div",null,embeddedStyles,React.createElement("div",{className:"container"}))}}]),_SrsCarousel_}(React.Component),_export("SrsCarousel",SrsCarousel=function(props){return _SrsCarousel_}),_export("SrsCarousel",SrsCarousel),_export("default",SrsCarousel),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsCarousel/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","image-carousel"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsCarousel_,SrsCarousel;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_imageCarousel){_imageCarousel.default}],execute:function(){_SrsCarousel_=function(_React$Component){function _SrsCarousel_(){return _classCallCheck(this,_SrsCarousel_),_possibleConstructorReturn(this,(_SrsCarousel_.__proto__||Object.getPrototypeOf(_SrsCarousel_)).apply(this,arguments))}return _inherits(_SrsCarousel_,_React$Component),_createClass(_SrsCarousel_,[{key:"componentDidMount",value:function(){var images=this.props.widgetProps&&this.props.widgetProps.Images?this.props.widgetProps.Images:this.props.images?"string"==typeof this.props.images?JSON.parse(this.props.images):this.props.images:["/resources/fresh.jpg","/resources/flowery.jpg"];images=images&&"string"==typeof images?JSON.parse(images):images;var options={target:$(".container",this.props.shadow)[0],showBottomMenu:!1,showSlidesToggle:!0,showBottomToggle:!0};1==$(".container",this.props.shadow).length&&new ImageCarousel(images,options).init()}},{key:"render",value:function(){var embeddedStyles=null;return this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles)),React.createElement("div",null,embeddedStyles,React.createElement("div",{className:"container"}))}}]),_SrsCarousel_}(React.Component),_export("SrsCarousel",SrsCarousel=function(props){return _SrsCarousel_}),_export("SrsCarousel",SrsCarousel)}}}),System.register("component/studio/SrsChart.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-highcharts"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ReactHighcharts,_SrsChart_,SrsChart,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactHighcharts){ReactHighcharts=_reactHighcharts.default}],execute:function(){_SrsChart_=function(_React$Component){function _SrsChart_(props){_classCallCheck(this,_SrsChart_);var _this=_possibleConstructorReturn(this,(_SrsChart_.__proto__||Object.getPrototypeOf(_SrsChart_)).call(this,props)),title=_this.props.title?_this.props.title:_this.props.widgetProps&&_this.props.widgetProps.Title?_this.props.widgetProps.Title:"",subtitle=_this.props.subtitle?_this.props.subtitle:_this.props.widgetProps&&_this.props.widgetProps.SubTitle?_this.props.widgetProps.SubTitle:"",type=_this.props.type?_this.props.type:_this.props.widgetProps&&_this.props.widgetProps.Type?_this.props.widgetProps.Type:"",yAxisLabel=_this.props.ylabel?_this.props.yAxisLabel:_this.props.widgetProps&&_this.props.widgetProps.YAxisLabel?_this.props.widgetProps.YAxisLabel:"",data=_this.props.data?_this.props.data:_this.props.widgetProps&&_this.props.widgetProps.Data?_this.props.widgetProps.Data:{};try{data="string"==typeof data?JSON.parse(data):data}catch(err){}_this.getConfiguration=_this.getConfiguration.bind(_this),_this.getPieChartData=_this.getPieChartData.bind(_this),_this.getLieChartData=_this.getLieChartData.bind(_this);var config=_this.getConfiguration(title,subtitle,type,data,yAxisLabel);return _this.state={title:title,subtitle:subtitle,type:type,config:config,data:data},_this}return _inherits(_SrsChart_,_React$Component),_createClass(_SrsChart_,[{key:"componentDidUpdate",value:function(prevProps){if(!_.isEqual(prevProps.widgetProps,this.props.widgetProps)){var title=this.props.title?this.props.title:this.props.widgetProps&&this.props.widgetProps.Title?this.props.widgetProps.Title:"",subtitle=this.props.subtitle?this.props.subtitle:this.props.widgetProps&&this.props.widgetProps.SubTitle?this.props.widgetProps.SubTitle:"",type=this.props.type?this.props.type:this.props.widgetProps&&this.props.widgetProps.Type?this.props.widgetProps.Type:"",data=this.props.data?this.props.data:this.props.widgetProps&&this.props.widgetProps.Data?this.props.widgetProps.Data:{},yAxisLabel=this.props.ylabel?this.props.yAxisLabel:this.props.widgetProps&&this.props.widgetProps.YAxisLabel?this.props.widgetProps.YAxisLabel:"",config=this.getConfiguration(title,subtitle,type,data,yAxisLabel);this.setState({config:config,data:data,type:type,title:title,subtitle:subtitle})}}},{key:"getLieChartData",value:function(data){var outputData={series:[],xAxis:{categories:[]}},xAxisComputed=!1;if(data){Object.keys(data);for(var _seriesName in data){var seriesData=[],innerData=data[_seriesName];for(var innerDataIndx in innerData){var inputSeriesData=innerData[innerDataIndx],dataPointName=inputSeriesData.name,dataPointValue=inputSeriesData.value;!xAxisComputed&&outputData.xAxis.categories.push(dataPointName),seriesData.push(dataPointValue)}xAxisComputed=!0,outputData.series.push({name:_seriesName,data:seriesData})}}return outputData}},{key:"getPieChartData",value:function(data){var outputData={series:[],drilldown:{}};if(data){var seriesName=Object.keys(data),seriesData=[],innerData=data[seriesName=seriesName[0]];for(var innerDataIndx in innerData){var inputSeriesData=innerData[innerDataIndx],dataPointName=inputSeriesData.name,dataPointValue=inputSeriesData.value,dataPointDrilldown=inputSeriesData.drilldown,seriesDataItem={name:dataPointName,y:dataPointValue};if(dataPointDrilldown&&(seriesDataItem.drilldown=dataPointName),seriesData.push(seriesDataItem),dataPointDrilldown){outputData.drilldown=outputData.drilldown||{},outputData.drilldown.series=outputData.drilldown.series||[];var drilldownData=[];for(var dataPointDrilldownIdx in dataPointDrilldown){var dataPointDrilldownItem=dataPointDrilldown[dataPointDrilldownIdx],item1=dataPointDrilldownItem&&dataPointDrilldownItem.length>1?dataPointDrilldownItem[0]:"",item2=dataPointDrilldownItem&&dataPointDrilldownItem.length>1?dataPointDrilldownItem[1]:"";drilldownData.push([item1,item2])}outputData.drilldown.series.push({name:dataPointName,id:dataPointName,data:drilldownData})}}outputData.series.push({name:seriesName,colorByPoint:!0,data:seriesData})}return outputData}},{key:"getConfiguration",value:function(title,subtitle,chartType,data,yAxisLabel){var _this2=this,config={};if(title&&(config.title={text:title}),subtitle&&(config.subtitle={text:subtitle}),chartType&&(config.chart={type:chartType}),yAxisLabel&&(config.yAxis={title:{text:yAxisLabel}}),config.accessibility={announceNewData:{enabled:!0},point:{valueSuffix:"%"}},config.plotOptions={series:{cursor:"pointer",point:{events:{click:function(e){console.log(_this2),console.log(e.point.category),console.log(e.point.y),e.stopPropagation()}}},dataLabels:{enabled:!0,format:"{point.name}: {point.y:.1f}%"}}},config.tooltip={headerFormat:"<span style={{fontSize:11}}>{series.name}</span><br>",pointFormat:"<span style={{color:{point.color}}>{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/"},data){var chartData=void 0;switch(chartType){case"column":case"bar":case"pie":chartData=this.getPieChartData(data),config.series=chartData.series,config.drilldown=chartData.drilldown;break;case"line":case"spline":chartData=this.getLieChartData(data),config.series=chartData.series,config.xAxis=chartData.xAxis,delete config.plotOptions.series.dataLabels.format,delete config.tooltip}}return config}},{key:"render",value:function(){return React.createElement("div",null,React.createElement(ReactHighcharts,{config:this.state.config,domProps:{id:"chartId"}}))}}]),_SrsChart_}(React.Component),_export("SrsChart",SrsChart=function(props){return _SrsChart_}),_export("SrsChart",SrsChart),_export("default",SrsChart),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsChart/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-highcharts"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ReactHighcharts,_SrsChart_,SrsChart;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactHighcharts){ReactHighcharts=_reactHighcharts.default}],execute:function(){_SrsChart_=function(_React$Component){function _SrsChart_(props){_classCallCheck(this,_SrsChart_);var _this=_possibleConstructorReturn(this,(_SrsChart_.__proto__||Object.getPrototypeOf(_SrsChart_)).call(this,props)),title=_this.props.title?_this.props.title:_this.props.widgetProps&&_this.props.widgetProps.Title?_this.props.widgetProps.Title:"",subtitle=_this.props.subtitle?_this.props.subtitle:_this.props.widgetProps&&_this.props.widgetProps.SubTitle?_this.props.widgetProps.SubTitle:"",type=_this.props.type?_this.props.type:_this.props.widgetProps&&_this.props.widgetProps.Type?_this.props.widgetProps.Type:"",yAxisLabel=_this.props.ylabel?_this.props.yAxisLabel:_this.props.widgetProps&&_this.props.widgetProps.YAxisLabel?_this.props.widgetProps.YAxisLabel:"",data=_this.props.data?_this.props.data:_this.props.widgetProps&&_this.props.widgetProps.Data?_this.props.widgetProps.Data:{};try{data="string"==typeof data?JSON.parse(data):data}catch(err){}_this.getConfiguration=_this.getConfiguration.bind(_this),_this.getPieChartData=_this.getPieChartData.bind(_this),_this.getLieChartData=_this.getLieChartData.bind(_this);var config=_this.getConfiguration(title,subtitle,type,data,yAxisLabel);return _this.state={title:title,subtitle:subtitle,type:type,config:config,data:data},_this}return _inherits(_SrsChart_,_React$Component),_createClass(_SrsChart_,[{key:"componentDidUpdate",value:function(prevProps){if(!_.isEqual(prevProps.widgetProps,this.props.widgetProps)){var title=this.props.title?this.props.title:this.props.widgetProps&&this.props.widgetProps.Title?this.props.widgetProps.Title:"",subtitle=this.props.subtitle?this.props.subtitle:this.props.widgetProps&&this.props.widgetProps.SubTitle?this.props.widgetProps.SubTitle:"",type=this.props.type?this.props.type:this.props.widgetProps&&this.props.widgetProps.Type?this.props.widgetProps.Type:"",data=this.props.data?this.props.data:this.props.widgetProps&&this.props.widgetProps.Data?this.props.widgetProps.Data:{},yAxisLabel=this.props.ylabel?this.props.yAxisLabel:this.props.widgetProps&&this.props.widgetProps.YAxisLabel?this.props.widgetProps.YAxisLabel:"",config=this.getConfiguration(title,subtitle,type,data,yAxisLabel);this.setState({config:config,data:data,type:type,title:title,subtitle:subtitle})}}},{key:"getLieChartData",value:function(data){var outputData={series:[],xAxis:{categories:[]}},xAxisComputed=!1;if(data){Object.keys(data);for(var _seriesName in data){var seriesData=[],innerData=data[_seriesName];for(var innerDataIndx in innerData){var inputSeriesData=innerData[innerDataIndx],dataPointName=inputSeriesData.name,dataPointValue=inputSeriesData.value;!xAxisComputed&&outputData.xAxis.categories.push(dataPointName),seriesData.push(dataPointValue)}xAxisComputed=!0,outputData.series.push({name:_seriesName,data:seriesData})}}return outputData}},{key:"getPieChartData",value:function(data){var outputData={series:[],drilldown:{}};if(data){var seriesName=Object.keys(data),seriesData=[],innerData=data[seriesName=seriesName[0]];for(var innerDataIndx in innerData){var inputSeriesData=innerData[innerDataIndx],dataPointName=inputSeriesData.name,dataPointValue=inputSeriesData.value,dataPointDrilldown=inputSeriesData.drilldown,seriesDataItem={name:dataPointName,y:dataPointValue};if(dataPointDrilldown&&(seriesDataItem.drilldown=dataPointName),seriesData.push(seriesDataItem),dataPointDrilldown){outputData.drilldown=outputData.drilldown||{},outputData.drilldown.series=outputData.drilldown.series||[];var drilldownData=[];for(var dataPointDrilldownIdx in dataPointDrilldown){var dataPointDrilldownItem=dataPointDrilldown[dataPointDrilldownIdx],item1=dataPointDrilldownItem&&dataPointDrilldownItem.length>1?dataPointDrilldownItem[0]:"",item2=dataPointDrilldownItem&&dataPointDrilldownItem.length>1?dataPointDrilldownItem[1]:"";drilldownData.push([item1,item2])}outputData.drilldown.series.push({name:dataPointName,id:dataPointName,data:drilldownData})}}outputData.series.push({name:seriesName,colorByPoint:!0,data:seriesData})}return outputData}},{key:"getConfiguration",value:function(title,subtitle,chartType,data,yAxisLabel){var _this2=this,config={};if(title&&(config.title={text:title}),subtitle&&(config.subtitle={text:subtitle}),chartType&&(config.chart={type:chartType}),yAxisLabel&&(config.yAxis={title:{text:yAxisLabel}}),config.accessibility={announceNewData:{enabled:!0},point:{valueSuffix:"%"}},config.plotOptions={series:{cursor:"pointer",point:{events:{click:function(e){console.log(_this2),console.log(e.point.category),console.log(e.point.y),e.stopPropagation()}}},dataLabels:{enabled:!0,format:"{point.name}: {point.y:.1f}%"}}},config.tooltip={headerFormat:"<span style={{fontSize:11}}>{series.name}</span><br>",pointFormat:"<span style={{color:{point.color}}>{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/"},data){var chartData=void 0;switch(chartType){case"column":case"bar":case"pie":chartData=this.getPieChartData(data),config.series=chartData.series,config.drilldown=chartData.drilldown;break;case"line":case"spline":chartData=this.getLieChartData(data),config.series=chartData.series,config.xAxis=chartData.xAxis,delete config.plotOptions.series.dataLabels.format,delete config.tooltip}}return config}},{key:"render",value:function(){return React.createElement("div",null,React.createElement(ReactHighcharts,{config:this.state.config,domProps:{id:"chartId"}}))}}]),_SrsChart_}(React.Component),_export("SrsChart",SrsChart=function(props){return _SrsChart_}),_export("SrsChart",SrsChart)}}}),System.register("component/studio/SrsCheckbox.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Checkbox,cloneDeep,_SrsCheckbox_,SrsCheckbox,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Checkbox=_carbonComponentsReact.Checkbox},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsCheckbox_=function(_React$Component){function _SrsCheckbox_(props){_classCallCheck(this,_SrsCheckbox_);var _this=_possibleConstructorReturn(this,(_SrsCheckbox_.__proto__||Object.getPrototypeOf(_SrsCheckbox_)).call(this,props));return _this.onChange=_this.onChange.bind(_this),_this}return _inherits(_SrsCheckbox_,_React$Component),_createClass(_SrsCheckbox_,[{key:"onChange",value:function(val){if(this.props.updateStore){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=val,this.props.updateStore({updates:{widgetProps:updatedProps}})}this.props.handleOnChange?this.props.handleOnChange(val):this.props.onChange&&this.props.onChange(val)}},{key:"render",value:function(){var title=this.props.title?this.props.title:this.props.widgetProps&&this.props.widgetProps.Label?this.props.widgetProps.Label:"Checkbox",isChecked=this.props.checked?this.props.checked:!this.props.widgetProps||!this.props.widgetProps.DefaultValue||this.props.widgetProps.DefaultValue,uid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),props={className:this.props.className?this.props.className:"checkbox",id:this.props.id?this.props.id:uid,onChange:this.onChange,value:isChecked};this.props.hideLabel?props.hideLabel=!0:props.labelText=this.props.required+""=="true"?title+" *":title,isChecked&&(props.defaultChecked=!0);var containerStyles=this.props.containerStyles?this.props.containerStyles:null;return React.createElement("div",{className:containerStyles?"":"srs-prem-container",style:containerStyles},React.createElement("fieldset",null,React.createElement(Checkbox,props)))}}]),_SrsCheckbox_}(React.Component),_export("SrsCheckbox",SrsCheckbox=function(props){return WrappedComponent=_SrsCheckbox_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsCheckbox",SrsCheckbox),_export("default",SrsCheckbox),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsCodeEditor.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","lodash.debounce","lodash"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MonacoEditor,debounce,_,_SrsCodeEditor_,SrsCodeEditor,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsCodeEditor_=function(_React$Component){function _SrsCodeEditor_(props){_classCallCheck(this,_SrsCodeEditor_);var _this=_possibleConstructorReturn(this,(_SrsCodeEditor_.__proto__||Object.getPrototypeOf(_SrsCodeEditor_)).call(this,props));_this.topElement=React.createRef(),_this.editorDidMount=_this.editorDidMount.bind(_this),_this.restoreEditor=_this.restoreEditor.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.codeChangedDebounce=debounce(function(newVal,e){_this.codeChanged(newVal,e)},10),_this.editor=null,_this.editorModel=null,_this.editorModelViewState=null,_this.editorContent=null;var editorCode=_this.props.editorCode||_this.props.editorcode;return editorCode=editorCode||(_this.props.widgetProps&&_this.props.widgetProps.value?_this.props.widgetProps.value:_this.props.widgetProps&&_this.props.widgetProps.DefaultValue?_this.props.widgetProps.DefaultValue:""),_this.state={code:editorCode,position:{lineNumber:1,column:1},editorKey:Date.now()},_this.editorCode=editorCode,_this}return _inherits(_SrsCodeEditor_,_React$Component),_createClass(_SrsCodeEditor_,[{key:"componentDidMount",value:function(){}},{key:"shouldComponentUpdate",value:function(nextProps,nextState){return this.editorCode!=nextProps.editorcode}},{key:"componentDidUpdate",value:function(prevProps,prevState){if(prevProps.hide!=this.props.hide&&this.setState({editorKey:Date.now()}),prevProps.editorCode!=this.props.editorCode||prevProps.editorcode!=this.props.editorcode||this.props.isformcontrol+""=="true"&&prevProps.controlProps&&this.props.controlProps&&!_.isEqual(prevProps.controlProps,this.props.controlProps)||this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)){var incomingCode=this.props.editorCode||this.props.editorcode;(incomingCode=this.props.isformcontrol+""=="true"?this.props.controlProps[this.props.controlname]:incomingCode||(this.props.widgetProps&&this.props.widgetProps.value?this.props.widgetProps.value:this.props.widgetProps&&this.props.widgetProps.DefaultValue?this.props.widgetProps.DefaultValue:""))!=this.editorCode&&(this.editorCode=incomingCode,this.setState({code:incomingCode}))}}},{key:"codeChanged",value:function(newValue,e){if(this.editorCode=newValue,this.props.isformcontrol+""=="true"&&this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);controlProps[this.props.controlname]=newValue,this.props.updateStore({updates:{controlProps:controlProps}})}if((1==this.props.preview||"true"==this.props.preview)&&this.props.widgetProps){var widgetProps=Object.assign({},this.props.widgetProps);widgetProps.value=newValue,this.props.updateStore({updates:{widgetProps:widgetProps}})}if(this.props.codeChanged&&this.props.codeChanged(newValue),this.props.varname){var editorCodes=Object.assign({},this.props.editorCodes);editorCodes[this.props.varname]=newValue,this.props.updateStore({updates:{editorCodes:editorCodes}})}var position=this.editor.getPosition();this.setState({code:newValue,position:position})}},{key:"editorDidMount",value:function(editor,monaco){monaco.languages.registerCompletionItemProvider("javascript",{provideCompletionItems:function(model,position){return[{label:'let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',documentation:"Utility to get the records"},{label:'let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',documentation:"Utility to get the record count of the matching filter"},{label:'createRecord = await $qry.createRecord("[model]_[scope]", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - createRecord = await $qry.createRecord("[model]_[scope]", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to create a new record"},{label:'updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to update an existing record"},{label:'deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',documentation:"Utility to delete a record"},{label:'deleteRecords = await $qry.deleteRecords("[model]_[scope]", "{uid: {"inq": ["id1", "id"]}}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "filter")',documentation:"Utility to delete multiple records"},{label:'tableDelete = await $qry._run(`mutation($inputData:[Table]DestroyAllInput!) {\n\t\t[Table]DestroyAll(input:$inputData){\n\t\t\tobj\n\t\t}\t}`, { "inputData": { "where": { "[FieldName]":"${varname}"} } },\n\t\t"data.[Table]DestroyAll.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-delete",documentation:"Delete query to remove the records from the table"},{label:'$qry.run("{queryName}", "{variables}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'await $qry.run("{queryName}", "{variables}")',documentation:"Utility to mutate/fetch data from server using GraphQL"},{label:'tableRead = await $qry._run(`query($input:JSON){\n\t[Table]{\n\t\t[Table]Find(filter: $input) @_(get: "edges"){\n\t\t\tedges @_(keyBy: "node.uid", mapValues:"node"){\n\t\t\t\tnode{\n\t\t\t\t\tuid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}`, { "input": { "where": { "uid": "${varname}" } } },\n"data.[Table].[Table]Find");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-read",documentation:"Open query to get the data from the table"},{label:'tableUpsert = await $qry._run(`mutation($input: [Table]UpsertWithWhereInput!){\n\t[Table]UpsertWithWhere(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "where": { "uid": "${varname}" }, "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]UpsertWithWhere.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-upsert",documentation:"Query to update the data in the table"},{label:'tableCreate = await $qry._run(`mutation($input: [Table]CreateInput!){\n\t[Table]Create(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]Create.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-create",documentation:"Query to create the record with the data"}]}});this.editor=editor,this.monaco=monaco,this.editorModel=editor.getModel(),this.restoreEditor()}},{key:"restoreEditor",value:function(){var self=this,saveEditorValue=this.editor.setValue.bind(this.editor);this.editor.setValue=function(val){saveEditorValue(val),self.state.position?(self.editor.setPosition(self.state.position),self.editor.revealLine(self.state.position.lineNumber),self.editor.focus()):(self.editor.setPosition({lineNumber:1,column:1}),self.editor.revealLine(1),self.editor.revealLineInCenter(15),self.editor.focus())};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:this.editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(this.editor._themeService._styleElement),this.editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"render",value:function(){var requireConfig={url:"/thirdpartylib/require.js",paths:{vs:window.noCDN?"/thirdpartylib/monaco/min/vs":"https://unpkg.com/srstecdn@latest/monaco/min/vs"},waitSeconds:200},editor=this.props.hide+""=="true"?null:React.createElement(MonacoEditor,{key:this.state.editorKey,width:"100%",height:"100%",language:this.props.lanugage?this.props.language:"javascript",theme:"vs-dark",value:this.editorCode,defaultValue:this.editorCode,options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1},onChange:this.codeChanged,requireConfig:requireConfig,editorWillMount:this.editorWillMount,editorDidMount:this.editorDidMount});return React.createElement("div",{className:"top-level",style:{height:this.props.hide+""=="true"?0:this.props.editorheight||this.props.editorHeight||"inherit"},ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ErrorBoundary/Style.css"); @import url("component/studio/SrsteeIDE/Style.css"); @import url("/thirdpartylib/monaco/min/vs/editor/editor.main.css")'),React.createElement("style",null,this.props.inlinestyles||""),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsMode.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/lib/typescriptServices.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsWorker.js"}),this.props.showtitle?React.createElement("label",{className:"bx--label",style:{display:this.props.visible+""=="true"?"block":"none"}},this.props.label):null,editor)}}]),_SrsCodeEditor_}(React.Component),_export("SrsCodeEditor",SrsCodeEditor=function(props){return _SrsCodeEditor_}),_export("SrsCodeEditor",SrsCodeEditor),_export("default",SrsCodeEditor),_export("states",states=[{KeyName:"editorCodes",AccessPath:"editor.codes",DefaultValue:'{"editor": {"codes": {}}}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"controlProps",AccessPath:"controls.${pageid}${pagesuffix}_${controlid}",DefaultValue:'{"controls": {"${pageid}${pagesuffix}_${controlid}": {}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsContentRepeater.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsContentRepeater_,SrsContentRepeater,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SrsContentRepeater_=function(_React$Component){function _SrsContentRepeater_(props){_classCallCheck(this,_SrsContentRepeater_);var _this=_possibleConstructorReturn(this,(_SrsContentRepeater_.__proto__||Object.getPrototypeOf(_SrsContentRepeater_)).call(this,props));return $ele&&$ele.registerElement("PageDesignerPreview","studio","React"),_this}return _inherits(_SrsContentRepeater_,_React$Component),_createClass(_SrsContentRepeater_,[{key:"componentDidUpdate",value:function(prevProps){}},{key:"render",value:function(){var _this2=this,data=this.props.widgetProps&&this.props.widgetProps.Data?"string"==typeof this.props.widgetProps.Data?JSON.parse(this.props.widgetProps.Data):this.props.widgetProps.Data:[];return React.createElement("div",null,data.map(function(dataItem){return React.createElement("page-designer-preview",{shadow:!0,style:{height:"inherit"},previewpageid:_this2.props.pageid,pagesuffix:"",pageparams:_extends({},dataItem),preview:"true",responsive:"true",widgetspacing:"false",showoverlay:!0})}))}}]),_SrsContentRepeater_}(React.Component),_export("SrsContentRepeater",SrsContentRepeater=function(props){return _SrsContentRepeater_}),_export("SrsContentRepeater",SrsContentRepeater),_export("default",SrsContentRepeater),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsContentRepeater/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsContentRepeater_,SrsContentRepeater;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SrsContentRepeater_=function(_React$Component){function _SrsContentRepeater_(props){_classCallCheck(this,_SrsContentRepeater_);var _this=_possibleConstructorReturn(this,(_SrsContentRepeater_.__proto__||Object.getPrototypeOf(_SrsContentRepeater_)).call(this,props));return $ele&&$ele.registerElement("PageDesignerPreview","studio","React"),_this}return _inherits(_SrsContentRepeater_,_React$Component),_createClass(_SrsContentRepeater_,[{key:"componentDidUpdate",value:function(prevProps){}},{key:"render",value:function(){var _this2=this,data=this.props.widgetProps&&this.props.widgetProps.Data?"string"==typeof this.props.widgetProps.Data?JSON.parse(this.props.widgetProps.Data):this.props.widgetProps.Data:[];return React.createElement("div",null,data.map(function(dataItem){return React.createElement("page-designer-preview",{shadow:!0,style:{height:"inherit"},previewpageid:_this2.props.pageid,pagesuffix:"",pageparams:_extends({},dataItem),preview:"true",responsive:"true",widgetspacing:"false",showoverlay:!0})}))}}]),_SrsContentRepeater_}(React.Component),_export("SrsContentRepeater",SrsContentRepeater=function(props){return _SrsContentRepeater_}),_export("SrsContentRepeater",SrsContentRepeater)}}}),System.register("component/studio/SrsDate.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DatePicker,DatePickerInput,cloneDeep,_SrsDate_,SrsDate,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DatePicker=_carbonComponentsReact.DatePicker,DatePickerInput=_carbonComponentsReact.DatePickerInput},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsDate_=function(_React$Component){function _SrsDate_(props){_classCallCheck(this,_SrsDate_);var _this=_possibleConstructorReturn(this,(_SrsDate_.__proto__||Object.getPrototypeOf(_SrsDate_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsDate_,_React$Component),_createClass(_SrsDate_,[{key:"handleChange",value:function(val){if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps),value=val&&Array.isArray(val)&&val.length>0?val[0]:"";controlProps[this.props.controlname]=value,this.props.updateStore({updates:{controlProps:controlProps}})}}else if(this.props.iscellcontrol+""=="true"){var controlId=this.props.controlid.replaceAll("_dot_","."),_value=val&&Array.isArray(val)&&val.length>0?val[0]:"",controlIdParts=(controlId=controlId.replace("cell_","")).split("."),formControlName=controlIdParts[0],rowIndx=controlIdParts[1],columnName=controlIdParts[2],cellName=columnName.split("_")[0],parentWidgetId=columnName.split("_")[1],controls=this.props.controls,formControlKey=this.props.pageid+this.props.pagesuffix+"_"+parentWidgetId;controls[formControlKey]=controls[formControlKey]||{},controls[formControlKey][formControlName]=controls[formControlKey][formControlName]||[],controls[formControlKey][formControlName][rowIndx]=controls[formControlKey][formControlName][rowIndx]||{},controls[formControlKey][formControlName][rowIndx][cellName]=_value,controls[formControlKey][formControlName][rowIndx].__isCellEdited__=Date.now(),this.props.updateStore({updates:{controls:controls}})}else{var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=val&&Array.isArray(val)&&val.length>0?val[0]:"",this.props.updateStore({updates:{widgetProps:updatedProps}})}}},{key:"render",value:function(){var styles={};try{styles=this.props.widgetProps&&this.props.widgetProps.styles?JSON.parse(this.props.widgetProps.styles):{}}catch(err){}var additionalProps={light:!0};return this.props.widgetProps&&(additionalProps.value=this.props.widgetProps.value),additionalProps.disabled=this.props.disabled+""=="true"||this.props.widgetProps&&this.props.widgetProps.ReadOnly+""=="true",React.createElement("div",{className:"srs-prem-container"},React.createElement(DatePicker,_extends({styles:styles},additionalProps,{id:"date-picker",onChange:this.handleChange,onClose:function(){},datePickerType:"single"}),React.createElement(DatePickerInput,{id:"date-picker-input-id",className:this.props.widgetProps&&this.props.widgetProps.ClassName||this.props.className||"date-class",labelText:this.props.widgetProps&&this.props.widgetProps.Label||(this.props.iscellcontrol+""=="true"?"":"Date"),pattern:"d{1,2}/d{4}",placeholder:"mm/dd/yyyy",invalid:this.props.widgetProps&&this.props.widgetProps.invalid||"",invalidText:this.props.widgetProps&&this.props.widgetProps.InvalidText||"",iconDescription:"Icon description",onClick:function(){}})))}}]),_SrsDate_}(React.Component),_export("SrsDate",SrsDate=function(props){return _SrsDate_}),_export("SrsDate",SrsDate),_export("default",SrsDate),_export("states",states=[{KeyName:"controls",AccessPath:"controls",DefaultValue:'{"controls": {}}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsDividerX.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_,_SrsDividerX_,SrsDividerX,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsDividerX_=function(_React$Component){function _SrsDividerX_(props){_classCallCheck(this,_SrsDividerX_);var _this=_possibleConstructorReturn(this,(_SrsDividerX_.__proto__||Object.getPrototypeOf(_SrsDividerX_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_SrsDividerX_,_React$Component),_createClass(_SrsDividerX_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps,this.props)||this.setState({reload:!this.state.reload})}},{key:"render",value:function(){var styles={position:"absolute",height:1,top:"50%",width:"100%",borderBottom:"1px solid black"},widgetStyles={};if(this.props.widgetProps)if("string"==typeof this.props.widgetProps.Styles)try{widgetStyles=JSON.parse(this.props.widgetProps.Styles)}catch(err){}else widgetStyles=this.props.widgetProps.Styles;return styles=_extends({},styles,{widgetStyles:widgetStyles}),React.createElement("div",{style:{height:"inherit"}},React.createElement("div",{style:styles}))}}]),_SrsDividerX_}(React.Component),_export("SrsDividerX",SrsDividerX=function(props){return _SrsDividerX_}),_export("SrsDividerX",SrsDividerX),_export("default",SrsDividerX),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgets}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsDividerX/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_,_SrsDividerX_,SrsDividerX;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsDividerX_=function(_React$Component){function _SrsDividerX_(props){_classCallCheck(this,_SrsDividerX_);var _this=_possibleConstructorReturn(this,(_SrsDividerX_.__proto__||Object.getPrototypeOf(_SrsDividerX_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_SrsDividerX_,_React$Component),_createClass(_SrsDividerX_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps,this.props)||this.setState({reload:!this.state.reload})}},{key:"render",value:function(){var styles={position:"absolute",height:1,top:"50%",width:"100%",borderBottom:"1px solid black"},widgetStyles={};if(this.props.widgetProps)if("string"==typeof this.props.widgetProps.Styles)try{widgetStyles=JSON.parse(this.props.widgetProps.Styles)}catch(err){}else widgetStyles=this.props.widgetProps.Styles;return styles=_extends({},styles,{widgetStyles:widgetStyles}),React.createElement("div",{style:{height:"inherit"}},React.createElement("div",{style:styles}))}}]),_SrsDividerX_}(React.Component),_export("SrsDividerX",SrsDividerX=function(props){return _SrsDividerX_}),_export("SrsDividerX",SrsDividerX)}}}),System.register("component/studio/SrsDividerY.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsDividerY_,SrsDividerY,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SrsDividerY_=function(_React$Component){function _SrsDividerY_(){return _classCallCheck(this,_SrsDividerY_),_possibleConstructorReturn(this,(_SrsDividerY_.__proto__||Object.getPrototypeOf(_SrsDividerY_)).apply(this,arguments))}return _inherits(_SrsDividerY_,_React$Component),_createClass(_SrsDividerY_,[{key:"render",value:function(){return React.createElement("div",{style:{height:"inherit"}},React.createElement("div",{style:{textAlign:"center",width:1,paddingLeft:"50%",height:"inherit",borderRight:"1px solid black"}}))}}]),_SrsDividerY_}(React.Component),_export("SrsDividerY",SrsDividerY=function(props){return _SrsDividerY_}),_export("SrsDividerY",SrsDividerY),_export("default",SrsDividerY),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsDividerY/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsDividerY_,SrsDividerY;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SrsDividerY_=function(_React$Component){function _SrsDividerY_(){return _classCallCheck(this,_SrsDividerY_),_possibleConstructorReturn(this,(_SrsDividerY_.__proto__||Object.getPrototypeOf(_SrsDividerY_)).apply(this,arguments))}return _inherits(_SrsDividerY_,_React$Component),_createClass(_SrsDividerY_,[{key:"render",value:function(){return React.createElement("div",{style:{height:"inherit"}},React.createElement("div",{style:{textAlign:"center",width:1,paddingLeft:"50%",height:"inherit",borderRight:"1px solid black"}}))}}]),_SrsDividerY_}(React.Component),_export("SrsDividerY",SrsDividerY=function(props){return _SrsDividerY_}),_export("SrsDividerY",SrsDividerY)}}}),System.register("component/studio/SrsDynamicChoice.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context3){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,_SrsDynamicChoice_,SrsDynamicChoice,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem}],execute:function(){_SrsDynamicChoice_=function(_React$Component){function _SrsDynamicChoice_(props){_classCallCheck(this,_SrsDynamicChoice_);var _this=_possibleConstructorReturn(this,(_SrsDynamicChoice_.__proto__||Object.getPrototypeOf(_SrsDynamicChoice_)).call(this,props));return _this.state={tableName:_this.props.table,labelFieldName:_this.props.labelfield,valueFieldName:_this.props.valuefield,choiceList:[],key:Date.now()},_this}return _inherits(_SrsDynamicChoice_,_React$Component),_createClass(_SrsDynamicChoice_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var labelFieldName,valueFieldName,choiceList,filter,records,recordsIndx,record;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(labelFieldName=this.state.labelFieldName,valueFieldName=this.state.valueFieldName?this.state.valueFieldName:this.state.labelFieldName,choiceList=[],filter={},this.props.filter)try{filter=(filter="string"==typeof this.props.filter?JSON.parse(this.props.filter):this.props.filter).where?filter:{where:filter}}catch(err){}return _context.next=7,$qry.getRecords(this.state.tableName,filter,[labelFieldName,valueFieldName]);case 7:if((records=_context.sent)&&records.length>0){for(recordsIndx in records)record=records[recordsIndx],choiceList.push({name:record[labelFieldName],value:record[valueFieldName]});this.setState({choiceList:choiceList,key:Date.now()})}case 9:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps){var choiceList,labelFieldName,valueFieldName,filter,records,recordsIndx,record;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(choiceList=[],labelFieldName=this.state.labelFieldName,valueFieldName=this.state.valueFieldName?this.state.valueFieldName:this.state.labelFieldName,prevProps.filter==this.props.filter){_context2.next=10;break}if(filter={},this.props.filter)try{filter=(filter="string"==typeof this.props.filter?JSON.parse(this.props.filter):this.props.filter).where?filter:{where:filter}}catch(err){}return _context2.next=8,$qry.getRecords(this.state.tableName,filter,[labelFieldName,valueFieldName]);case 8:if((records=_context2.sent)&&records.length>0){for(recordsIndx in records)record=records[recordsIndx],choiceList.push({name:record[labelFieldName],value:record[valueFieldName]});this.setState({choiceList:choiceList,key:Date.now()})}case 10:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this,choices=[React.createElement(SelectItem,{value:"",text:"Choose an item"})];this.state.choiceList.map(function(choiceItem){choices.push(React.createElement(SelectItem,{value:choiceItem.value,text:choiceItem.name}))});var additionalProps={};this.props.iscellcontrol+""=="true"&&(additionalProps.hideLabel=!0);var labelText=this.props.label;return labelText=this.props.required+""=="true"?labelText+" *":labelText,React.createElement(React.Fragment,null,React.createElement("style",null,this.props.inlinestyles||""),React.createElement(Select,_extends({key:this.state.key,defaultValue:this.props.defaultValue||this.props.defaultvalue,light:"true",labelText:labelText},additionalProps,{onChange:function(ev){if(_this2.props.isformcontrol+""=="true"){if(_this2.props.controlname){var controlProps=Object.assign({},_this2.props.controlProps);controlProps[_this2.props.controlname]=ev.target.value,_this2.props.updateStore({updates:{controlProps:controlProps}})}}else if(_this2.props.iscellcontrol+""=="true"){var controlId=_this2.props.controlid.replaceAll("_dot_","."),controlIdParts=(controlId=controlId.replace("cell_","")).split("."),formControlName=controlIdParts[0],rowIndx=controlIdParts[1],columnName=controlIdParts[2],cellName=columnName.split("_")[0],parentWidgetId=columnName.split("_")[1],controls=_this2.props.controls,formControlKey=_this2.props.pageid+_this2.props.pagesuffix+"_"+parentWidgetId;controls[formControlKey]=controls[formControlKey]||{},controls[formControlKey][formControlName]=controls[formControlKey][formControlName]||[],controls[formControlKey][formControlName][rowIndx]=controls[formControlKey][formControlName][rowIndx]||{},controls[formControlKey][formControlName][rowIndx][cellName]=ev.target.value,controls[formControlKey][formControlName][rowIndx].__isCellEdited__=Date.now(),_this2.props.updateStore({updates:{controls:controls}})}else _this2.props.onChange&&_this2.props.onChange(ev)}}),choices))}}]),_SrsDynamicChoice_}(React.Component),_export("SrsDynamicChoice",SrsDynamicChoice=function(props){return _SrsDynamicChoice_}),_export("SrsDynamicChoice",SrsDynamicChoice),_export("default",SrsDynamicChoice),_export("states",states=[{KeyName:"controlProps",AccessPath:"controls.${pageid}${pagesuffix}_${controlid}",DefaultValue:'{"controls": {"${pageid}${pagesuffix}_${controlid}": {}}}'},{KeyName:"controls",AccessPath:"controls",DefaultValue:'{"controls": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsDynamicForm.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/JSONForm/Definition.js","lodash.debounce"],function(_export,_context13){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,JSONForm,debounce,_SrsDynamicForm_,SrsDynamicForm,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentStudioJSONFormDefinitionJs){JSONForm=_componentStudioJSONFormDefinitionJs.JSONForm},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){_SrsDynamicForm_=function(_React$Component){function _SrsDynamicForm_(props){_classCallCheck(this,_SrsDynamicForm_);var _this=_possibleConstructorReturn(this,(_SrsDynamicForm_.__proto__||Object.getPrototypeOf(_SrsDynamicForm_)).call(this,props)),isFormControl=_this.props.isformcontrol+""=="true",formTemplateId=_this.props.templateid?_this.props.templateid:!isFormControl&&_this.props.widgetProps?_this.props.widgetProps.FormTemplate:"",formTemplateName=_this.props.templatename?_this.props.templatename:!isFormControl&&_this.props.widgetProps?_this.props.widgetProps.Template:"",tableName=formTemplateId||formTemplateName?"":_this.props.tablename?_this.props.tablename:!isFormControl&&_this.props.widgetProps?_this.props.widgetProps.TableName:"";tableName=tableName&&tableName.endsWith("_mmf")?tableName.split("_mmf")[0]:tableName;var viewName=_this.props.view?_this.props.view:!isFormControl&&_this.props.widgetProps?_this.props.widgetProps.View:"",recordId=_this.props.recordid?_this.props.recordid:!isFormControl&&_this.props.widgetProps?_this.props.widgetProps.RecordId:"",defaultValue={};if(_this.updateWidgetProps=_this.updateWidgetProps.bind(_this),_this.evaluateFormActions=_this.evaluateFormActions.bind(_this),_this.evaluateOnLoadActions=_this.evaluateOnLoadActions.bind(_this),_this.evaluateOnModalChangeActions=_this.evaluateOnModalChangeActions.bind(_this),_this.getFormActions=_this.getFormActions.bind(_this),_this.getFunctionFromString=_this.getFunctionFromString.bind(_this),_this.needsPreventDefaultSave=_this.needsPreventDefaultSave.bind(_this),_this.needsPreventDefaultShowList=_this.needsPreventDefaultShowList.bind(_this),_this.getThemeData=_this.getThemeData.bind(_this),_this.openModal=_this.openModal.bind(_this),_this.getRecordData=_this.getRecordData.bind(_this),_this.getControlElements=_this.getControlElements.bind(_this),!isFormControl&&_this.props.widgetProps&&_this.props.widgetProps.DefaultData)if("string"==typeof _this.props.widgetProps.DefaultData)try{defaultValue=JSON.parse(_this.props.widgetProps.DefaultData)}catch(err){}else defaultValue=_this.props.widgetProps.DefaultData;else if(_this.props.defaultdata)if("string"==typeof _this.props.defaultdata)try{defaultValue=JSON.parse(_this.props.defaultdata)}catch(err){}else defaultValue=_this.props.defaultdata;return _this.state={dataSchema:{},uiSchema:{},defaultValue:defaultValue,formTemplateId:formTemplateId,modelId:"",modelName:tableName,view:viewName,isReady:!1,formTemplateName:formTemplateName,recordId:recordId,formContext:{},preventDefaultSave:_this.props.isformcontrol+""=="true",preventDefaultShowList:_this.props.isformcontrol+""=="true"},$ele&&$ele.registerElement("DynaForm","studio","React"),_this.handleChange=_this.handleChange.bind(_this),_this.handleChangeFn=_this.handleChangeFn.bind(_this),_this.handleChangeDebounced=debounce(_this.handleChangeFn,100),!isFormControl&&_this.props.updateStore({updates:{widgetControlProps:{}}}),_this}return _inherits(_SrsDynamicForm_,_React$Component),_createClass(_SrsDynamicForm_,[{key:"getControlElements",value:function(nodeEl,result){var _this2=this;nodeEl&&nodeEl.elements&&nodeEl.elements.length>0&&nodeEl.elements.map(function(ele,indx){ele.elements?_this2.getControlElements(ele,result):"Control"==ele.type&&result.push({subtype:ele.subtype,scope:ele.scope,name:ele.name})})}},{key:"getThemeData",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var themeData,themeRecords,themeRecordIndx,themeRecord;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return themeData={},_context.next=3,$qry.getCachableRecords("ControlTheme_studio",{},["uid","FormTheme","Styles","Control"]);case 3:if((themeRecords=_context.sent)&&themeRecords.length>0)for(themeRecordIndx in themeRecords)themeRecord=themeRecords[themeRecordIndx],themeData[themeRecord.FormTheme]=themeData[themeRecord.FormTheme]||{},themeData[themeRecord.FormTheme][themeRecord.Control]=themeRecord.Styles;return _context.abrupt("return",themeData);case 6:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"openModal",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(payload){var result,templateId,templateFilter,templateRecord,pageId,pageScope,pageFilter,pageRecord;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(payload.modalname||payload.name){_context2.next=3;break}return this.props.addErrorMessage({title:"Error - ",subtitle:"Modal Name cannot be empty while opening the modal."}),_context2.abrupt("return");case 3:if(result={},!payload.type){_context2.next=53;break}result.modalname=payload.modalname||payload.name,_context2.t0=payload.type,_context2.next="form"===_context2.t0?9:"page"===_context2.t0?29:50;break;case 9:if(templateId="",!payload.template){_context2.next=14;break}templateId=payload.template,_context2.next=26;break;case 14:if(!payload.table&&!payload.formname){_context2.next=26;break}return templateFilter=payload.formname?{where:{Name:payload.formname}}:{where:{ModelName:payload.table,View:payload.view||"Defalut"}},_context2.next=18,$qry.getCachableRecords("FormTemplate_studio",templateFilter,["uid"]);case 18:if(!((templateRecord=_context2.sent)&&templateRecord.length>0)){_context2.next=24;break}templateRecord=templateRecord[0],templateId=templateRecord.uid,_context2.next=26;break;case 24:return this.props.addErrorMessage({title:"Error - ",subtitle:"Form not found!"}),_context2.abrupt("return");case 26:return result.modalcomponent={name:"SrsDynamicForm",scope:"studio",componentprops:{FormTemplate:templateId,DefaultData:payload.formdata}},result.modalparams={},_context2.abrupt("break",50);case 29:if(pageId="",!payload.modalpage&&!payload.pageId){_context2.next=34;break}pageId=payload.pageId,_context2.next=47;break;case 34:if(!payload.pageName){_context2.next=47;break}return pageScope=payload.pageScope?payload.pageScope:"studio",pageFilter={where:{and:[{Name:payload.pageName},{Scope:pageScope}]}},_context2.next=39,$qry.getCachableRecords("MetaSlide",pageFilter,["uid"]);case 39:if(!((pageRecord=_context2.sent)&&pageRecord.length>0)){_context2.next=45;break}pageRecord=pageRecord[0],pageId=pageRecord.uid,_context2.next=47;break;case 45:return this.props.addErrorMessage({title:"Error - ",subtitle:"Page not found!"}),_context2.abrupt("return");case 47:return result.modalpage=pageId,result.modalparams=payload.pageparams,_context2.abrupt("break",50);case 50:result.layout=payload.layout,_context2.next=57;break;case 53:if(!payload.modalcomponent||"PageDesignerPreview"!=payload.modalcomponent.name){_context2.next=56;break}return this.props.addErrorMessage({title:"Error - ",subtitle:"Invalid usage of openModal API."}),_context2.abrupt("return");case 56:result=payload;case 57:this.props.openModal(result);case 58:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"needsPreventDefaultSave",value:function(formActions){if(this.props.isformcontrol+""=="true")return!0;this.state.preventDefaultSave;if(formActions&&formActions.action_save&&formActions.action_save.onClick&&formActions.action_save.onClick.length>0){var onClickActions=formActions.action_save.onClick;for(var onClickActionIndx in onClickActions){if(onClickActions[onClickActionIndx].PreventDefaultSave+""=="true")return!0}}}},{key:"needsPreventDefaultShowList",value:function(formActions){if(this.props.isformcontrol+""=="true")return!0;var actionName="action_show_list";this.state.preventDefaultShowList;if(formActions&&formActions[actionName]&&formActions[actionName].onClick&&formActions[actionName].onClick.length>0){var onClickActions=formActions[actionName].onClick;for(var onClickActionIndx in onClickActions){if(onClickActions[onClickActionIndx].PreventDefaultShowList+""=="true")return!0}}}},{key:"getFormActions",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(modelId,modelName,formTemplateId){var result,formActionQuery,records,recordIndx,formActionRecord,formActionKey,havingMultipleKeys,actionKeys,actionKeyIndx,actionName;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(result={},formActionQuery={},!formTemplateId){_context3.next=6;break}formActionQuery={where:{or:[{Form:formTemplateId},{Form:""}]}},_context3.next=11;break;case 6:if(!modelId&&!modelName){_context3.next=10;break}formActionQuery={where:{or:[{Model:modelId},{Model:modelName}]}},_context3.next=11;break;case 10:return _context3.abrupt("return",result);case 11:return _context3.next=13,$qry.getCachableRecords("FormActions_studio",formActionQuery,["uid","Name","Form","SourceActionType","SourceField","CustomSource","SourceAction","TargetActionType","TargetActionField","Order","TargetActionScript","Condition","PreventDefaultSave","PreventDefaultShowList"]);case 13:if(!((records=_context3.sent)&&records.length>0)){_context3.next=36;break}_context3.t0=_regeneratorRuntime.keys(records);case 16:if((_context3.t1=_context3.t0()).done){_context3.next=36;break}recordIndx=_context3.t1.value,formActionRecord=records[recordIndx],formActionKey="",havingMultipleKeys=!1,_context3.t2=formActionRecord.SourceActionType,_context3.next="onChange"===_context3.t2?24:"onClick"===_context3.t2?27:"onLoad"===_context3.t2?29:"onModalChange"===_context3.t2?31:33;break;case 24:return(formActionKey=formActionRecord.SourceField||formActionRecord.CustomSource).indexOf(",")>-1&&(havingMultipleKeys=!0),_context3.abrupt("break",33);case 27:return formActionKey="action_"+formActionRecord.SourceAction,_context3.abrupt("break",33);case 29:return formActionKey="form",_context3.abrupt("break",33);case 31:return formActionKey="modal",_context3.abrupt("break",33);case 33:if(formActionKey)if(havingMultipleKeys)for(actionKeyIndx in actionKeys=formActionKey.split(","))actionName=actionKeys[actionKeyIndx].trim(),result[actionName]=result[actionName]||{},result[actionName][formActionRecord.SourceActionType]=result[actionName][formActionRecord.SourceActionType]||[],result[actionName][formActionRecord.SourceActionType].push(formActionRecord);else result[formActionKey]=result[formActionKey]||{},result[formActionKey][formActionRecord.SourceActionType]=result[formActionKey][formActionRecord.SourceActionType]||[],result[formActionKey][formActionRecord.SourceActionType].push(formActionRecord);_context3.next=16;break;case 36:return _context3.abrupt("return",result);case 37:case"end":return _context3.stop()}},_callee3,this)}));return function(_x2,_x3,_x4){return _ref3.apply(this,arguments)}}()},{key:"handleChangeFn",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(inputVal,meta){var wControlProps,widgetProps,formOutput,updatedFormOutput,propName,_ref5,data,metadata,actionFound,updatedDefaultValue,filteredDefaultValue,defaultValueKeys,defaultValueKeyIndx,defaultValueKey,currentDefaultValue,currentDefaultValueKeys,currentDefaultValueKeyIndx,currentDefaultValueKey,stateChanges,formContext;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(inputVal){_context4.next=2;break}return _context4.abrupt("return");case 2:if(!meta||"embedded_list"!=meta.type){_context4.next=6;break}return wControlProps=Object.assign({},_extends({},this.props.widgetControlProps,inputVal)),this.props.updateStore({updates:{widgetControlProps:wControlProps}}),_context4.abrupt("return");case 6:for(propName in widgetProps=Object.assign({},this.props.widgetProps),formOutput="string"==typeof(formOutput=widgetProps.FormOutput||{})?JSON.parse(formOutput):formOutput,updatedFormOutput={},formOutput)"form_action"!=propName&&"form_actions"!=propName&&"form_list"!=propName&&"ref_action"!=propName&&"list_action"!=propName&&(updatedFormOutput[propName]=formOutput[propName]);return _context4.next=13,this.evaluateFormActions(inputVal);case 13:for(defaultValueKeyIndx in _ref5=_context4.sent,data=_ref5.data,metadata=_ref5.metadata,actionFound=_ref5.actionFound,inputVal.form_action&&(inputVal.form_action.preventDefaultSave=actionFound,inputVal.form_action.preventDefaultShowList=actionFound),actionFound?(delete data.ref_action,delete data.form_action,delete data.list_action,delete inputVal.ref_action,delete inputVal.form_action,delete inputVal.list_action,widgetProps.FormOutput=_extends({},updatedFormOutput,inputVal,data)):widgetProps.FormOutput=_extends({},updatedFormOutput,inputVal),this.updateWidgetProps(widgetProps,null,!0),updatedDefaultValue=_extends({},this.state.defaultValue,updatedFormOutput),filteredDefaultValue={},defaultValueKeys=Object.keys(updatedDefaultValue))"ref_action"!=(defaultValueKey=defaultValueKeys[defaultValueKeyIndx])&&"form_action"!=defaultValueKey&&"list_action"!=defaultValueKey&&"form_actions"!=defaultValueKey&&"form_list"!=defaultValueKey&&(filteredDefaultValue[defaultValueKey]=updatedDefaultValue[defaultValueKey]);for(currentDefaultValueKeyIndx in currentDefaultValue={},currentDefaultValueKeys=Object.keys(this.state.defaultValue))"ref_action"!=(currentDefaultValueKey=currentDefaultValueKeys[currentDefaultValueKeyIndx])&&"form_action"!=currentDefaultValueKey&&"list_action"!=currentDefaultValueKey&&"form_actions"!=currentDefaultValueKey&&"form_list"!=currentDefaultValueKey&&(currentDefaultValue[currentDefaultValueKey]=this.state.defaultValue[currentDefaultValueKey]);stateChanges={},formContext=_extends({},this.state.formContext,metadata),stateChanges.formContext=formContext,!_.isEqual(formContext,this.state.formContext)&&this.setState(stateChanges);case 31:case"end":return _context4.stop()}},_callee4,this)}));return function(_x5,_x6){return _ref4.apply(this,arguments)}}()},{key:"evaluateFormActions",value:function(){var _ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(changedValues){var actionFound,currentFormData,scriptOutputData,scriptOutputMetadata,scriptOutputKeys,scriptOutput,currentStateKeys,currentStateKeyIndx,currentStateKey,updatedFormData,fieldMetaData,self,changedFields,changedFieldMap,formActions,actionName,actionPayload,onClickActions,onClickActionIndx,onClickAction,sourceMatched,notifier,conditionFn,_notifier,scriptFn,scriptOutputKeyIndx,scriptOutputKey,scriptOutputMetaKeys,scriptOutputMetaKeyIndx,scriptOutputMetaKey,metaMap,changedValueKeys,changedValueIndx,changedValueKey,changedFieldKeySuffix,_changedValueKeys,changedFieldsIndx,changedField,onChangeActions,onChangeActionIndx,onChangeAction,_sourceMatched,_notifier2,_conditionFn,_notifier3,_scriptFn,_metaMap,filteredFormData,updatedFormDataKeys,updatedFormDataKeyIndx,updatedFormDataKey;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:for(currentStateKeyIndx in actionFound=!1,currentFormData={},scriptOutputData=void 0,scriptOutputMetadata=void 0,scriptOutputKeys=void 0,scriptOutput=void 0,currentStateKeys=Object.keys(this.state.defaultValue))"form_action"!=(currentStateKey=currentStateKeys[currentStateKeyIndx])&&"ref_action"!=currentStateKey&&"list_action"!=currentStateKey&&(currentFormData[currentStateKey]=this.state.defaultValue[currentStateKey]);if((updatedFormData=JSON.parse(JSON.stringify(_extends({},currentFormData,changedValues))))&&updatedFormData.form_action&&delete updatedFormData.form_action,fieldMetaData=_extends({},this.state.formContext),self=this,changedFields=[],changedFieldMap={},formActions=this.state.formActions,!(changedValues.form_action&&changedValues.form_action.actionClicked||changedValues.list_action&&changedValues.list_action.actionClicked||changedValues.ref_action&&changedValues.ref_action.actionClicked)){_context5.next=66;break}if(actionName="",actionPayload={},changedValues.form_action&&changedValues.form_action.actionClicked?actionName="action_"+changedValues.form_action.actionClicked:changedValues.list_action&&changedValues.list_action.actionClicked?actionName="action_"+changedValues.list_action.actionClicked:changedValues.ref_action&&changedValues.ref_action.actionClicked&&(actionName="action_"+changedValues.ref_action.actionClicked),actionPayload=changedValues.form_action.actionPayload,!(formActions&&formActions[actionName]&&formActions[actionName].onClick&&formActions[actionName].onClick.length>0)){_context5.next=64;break}actionFound=!0,onClickActions=formActions[actionName].onClick,_context5.t0=_regeneratorRuntime.keys(onClickActions);case 21:if((_context5.t1=_context5.t0()).done){_context5.next=64;break}if(onClickActionIndx=_context5.t1.value,onClickAction=onClickActions[onClickActionIndx],sourceMatched=!1,!onClickAction.Condition){_context5.next=40;break}return _context5.prev=26,notifier={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context5.next=30,self.getFunctionFromString(onClickAction.Condition,{data:updatedFormData,changes:changedFieldMap,actionPayload:actionPayload,$notifier:notifier});case 30:return conditionFn=_context5.sent,_context5.next=33,conditionFn();case 33:sourceMatched=_context5.sent,_context5.next=38;break;case 36:_context5.prev=36,_context5.t2=_context5.catch(26);case 38:_context5.next=41;break;case 40:sourceMatched=!0;case 41:if("Scripted"!=onClickAction.TargetActionType){_context5.next=60;break}return _notifier={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context5.next=45,self.getFunctionFromString(onClickAction.TargetActionScript,{data:updatedFormData,changes:changedFieldMap,actionPayload:actionPayload,$matched:sourceMatched,$notifier:_notifier,$rootel:this.refs.mainpage});case 45:return scriptFn=_context5.sent,_context5.prev=46,_context5.next=49,scriptFn();case 49:if(scriptOutput=_context5.sent,scriptOutputData=scriptOutput.data,scriptOutputMetadata=scriptOutput.meta,scriptOutputData&&Object.keys(scriptOutputData).length>0)for(scriptOutputKeyIndx in scriptOutputKeys=Object.keys(scriptOutputData))scriptOutputKey=scriptOutputKeys[scriptOutputKeyIndx],scriptOutputData[scriptOutputKey]&&(updatedFormData[scriptOutputKey]=scriptOutputData[scriptOutputKey]);if(scriptOutputMetadata&&Object.keys(scriptOutputMetadata).length>0)for(scriptOutputMetaKeyIndx in scriptOutputMetaKeys=Object.keys(scriptOutputMetadata))scriptOutputMetaKey=scriptOutputMetaKeys[scriptOutputMetaKeyIndx],scriptOutputMetadata[scriptOutputMetaKey]&&(fieldMetaData[scriptOutputMetaKey]=_extends({},fieldMetaData[scriptOutputMetaKey],scriptOutputMetadata[scriptOutputMetaKey]));_context5.next=58;break;case 56:_context5.prev=56,_context5.t3=_context5.catch(46);case 58:_context5.next=62;break;case 60:metaMap={Hide:{visible:!sourceMatched},Show:{visible:!!sourceMatched},ReadOnly:{enabled:!sourceMatched},ReadWrite:{enabled:!!sourceMatched},"Not Required":{required:!sourceMatched},Required:{required:!!sourceMatched}},fieldMetaData[onClickAction.TargetActionField]=metaMap[onClickAction.TargetActionType];case 62:_context5.next=21;break;case 64:_context5.next=122;break;case 66:for(changedValueIndx in changedValueKeys=(changedValueKeys=Object.keys(changedValues)).filter(function(changedValueKey){return"form_actions"!=changedValueKey&&"form_list"!=changedValueKey}))changedValueKey=changedValueKeys[changedValueIndx],_.isEqual(currentFormData[changedValueKey],changedValues[changedValueKey])||(changedFields.push(changedValueKey),changedValueKey.indexOf(".")>-1?(changedFieldKeySuffix=changedValueKey.split(".")[1],changedFields.push(changedFieldKeySuffix),_changedValueKeys=[changedValueKey,changedValueKey.split(".")[1]],changedFieldMap[_changedValueKeys[0]]={current:changedValues[changedValueKey],past:currentFormData[changedValueKey]},changedFieldMap[_changedValueKeys[1]]={current:changedValues[changedValueKey],past:currentFormData[changedValueKey]}):changedFieldMap[changedValueKey]={current:changedValues[changedValueKey],past:currentFormData[changedValueKey]});_context5.t4=_regeneratorRuntime.keys(changedFields);case 70:if((_context5.t5=_context5.t4()).done){_context5.next=122;break}if(changedFieldsIndx=_context5.t5.value,changedField=changedFields[changedFieldsIndx],!(formActions&&formActions[changedField]&&formActions[changedField].onChange&&formActions[changedField].onChange.length>0)){_context5.next=120;break}actionFound=!0,onChangeActions=formActions[changedField].onChange,_context5.t6=_regeneratorRuntime.keys(onChangeActions);case 77:if((_context5.t7=_context5.t6()).done){_context5.next=120;break}if(onChangeActionIndx=_context5.t7.value,onChangeAction=onChangeActions[onChangeActionIndx],_sourceMatched=!1,!onChangeAction.Condition){_context5.next=96;break}return _context5.prev=82,_notifier2={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context5.next=86,self.getFunctionFromString(onChangeAction.Condition,{data:updatedFormData,changes:changedFieldMap,$notifier:_notifier2});case 86:return _conditionFn=_context5.sent,_context5.next=89,_conditionFn();case 89:_sourceMatched=_context5.sent,_context5.next=94;break;case 92:_context5.prev=92,_context5.t8=_context5.catch(82);case 94:_context5.next=97;break;case 96:_sourceMatched=!0;case 97:if("Scripted"!=onChangeAction.TargetActionType){_context5.next=116;break}return _notifier3={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context5.next=101,self.getFunctionFromString(onChangeAction.TargetActionScript,{data:updatedFormData,changes:changedFieldMap,$matched:_sourceMatched,$notifier:_notifier3,$rootel:this.refs.mainpage});case 101:return _scriptFn=_context5.sent,_context5.prev=102,_context5.next=105,_scriptFn();case 105:scriptOutput=_context5.sent,scriptOutputData=scriptOutput.data,scriptOutputMetadata=scriptOutput.meta,scriptOutputData&&Object.keys(scriptOutputData).length>0&&(updatedFormData=_extends({},updatedFormData,scriptOutputData)),scriptOutputMetadata&&Object.keys(scriptOutputMetadata).length>0&&(fieldMetaData=_extends({},fieldMetaData,scriptOutputMetadata)),_context5.next=114;break;case 112:_context5.prev=112,_context5.t9=_context5.catch(102);case 114:_context5.next=118;break;case 116:_metaMap={Hide:{visible:!_sourceMatched},Show:{visible:!!_sourceMatched},ReadOnly:{enabled:!_sourceMatched},ReadWrite:{enabled:!!_sourceMatched},"Not Required":{required:!_sourceMatched},Required:{required:!!_sourceMatched}},onChangeAction.TargetActionField&&(fieldMetaData[onChangeAction.TargetActionField]=_metaMap[onChangeAction.TargetActionType]);case 118:_context5.next=77;break;case 120:_context5.next=70;break;case 122:for(updatedFormDataKeyIndx in filteredFormData={},updatedFormDataKeys=Object.keys(updatedFormData))"form_action"!=(updatedFormDataKey=updatedFormDataKeys[updatedFormDataKeyIndx])&&"ref_action"!=updatedFormDataKey&&"list_action"!=updatedFormDataKey&&(filteredFormData[updatedFormDataKey]=updatedFormData[updatedFormDataKey]);return _context5.abrupt("return",{data:filteredFormData,metadata:fieldMetaData,actionFound:actionFound});case 126:case"end":return _context5.stop()}},_callee5,this,[[26,36],[46,56],[82,92],[102,112]])}));return function(_x7){return _ref6.apply(this,arguments)}}()},{key:"evaluateOnLoadActions",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(initialValues,formActions){var updatedFormData,fieldMetaData,self,actionFound,onLoadActions,loadActionIndx,loadAction,sourceMatched,notifier,conditionFn,_notifier4,scriptFn,scriptOutput,scriptOutputData,scriptOutputMetadata,scriptOutputKeys,scriptOutputKeyIndx,scriptOutputKey,scriptOutputMetaKeys,scriptOutputMetaKeyIndx,scriptOutputMetaKey;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(_extends({},initialValues),updatedFormData=_extends({},initialValues),fieldMetaData={},self=this,actionFound=!1,!((onLoadActions=formActions&&formActions.form?formActions.form.onLoad:null)&&onLoadActions.length>0)){_context6.next=48;break}_context6.t0=_regeneratorRuntime.keys(onLoadActions);case 8:if((_context6.t1=_context6.t0()).done){_context6.next=48;break}if(loadActionIndx=_context6.t1.value,loadAction=onLoadActions[loadActionIndx],sourceMatched=!1,!loadAction.Condition){_context6.next=27;break}return _context6.prev=13,notifier={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context6.next=17,self.getFunctionFromString(loadAction.Condition,{data:updatedFormData,changes:{},$notifier:notifier});case 17:return conditionFn=_context6.sent,_context6.next=20,conditionFn();case 20:sourceMatched=_context6.sent,_context6.next=25;break;case 23:_context6.prev=23,_context6.t2=_context6.catch(13);case 25:_context6.next=29;break;case 27:sourceMatched=!0,actionFound=!0;case 29:if("Scripted"!=loadAction.TargetActionType){_context6.next=46;break}return _notifier4={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context6.next=33,self.getFunctionFromString(loadAction.TargetActionScript,{data:updatedFormData,changes:{},$matched:sourceMatched,$notifier:_notifier4,$rootel:this.refs.mainpage});case 33:return scriptFn=_context6.sent,_context6.prev=34,_context6.next=37,scriptFn();case 37:if(scriptOutput=_context6.sent,scriptOutputData=scriptOutput.data,scriptOutputMetadata=scriptOutput.meta,scriptOutputData&&Object.keys(scriptOutputData).length>0)for(scriptOutputKeyIndx in scriptOutputKeys=Object.keys(scriptOutputData))scriptOutputKey=scriptOutputKeys[scriptOutputKeyIndx],scriptOutputData[scriptOutputKey]&&(updatedFormData[scriptOutputKey]=scriptOutputData[scriptOutputKey]);if(scriptOutputMetadata&&Object.keys(scriptOutputMetadata).length>0)for(scriptOutputMetaKeyIndx in scriptOutputMetaKeys=Object.keys(scriptOutputMetadata))scriptOutputMetaKey=scriptOutputMetaKeys[scriptOutputMetaKeyIndx],scriptOutputMetadata[scriptOutputMetaKey]&&(fieldMetaData[scriptOutputMetaKey]=_extends({},fieldMetaData[scriptOutputMetaKey],scriptOutputMetadata[scriptOutputMetaKey]));_context6.next=46;break;case 44:_context6.prev=44,_context6.t3=_context6.catch(34);case 46:_context6.next=8;break;case 48:return _context6.abrupt("return",{data:updatedFormData,metadata:fieldMetaData,actionFound:actionFound});case 49:case"end":return _context6.stop()}},_callee6,this,[[13,23],[34,44]])}));return function(_x8,_x9){return _ref7.apply(this,arguments)}}()},{key:"evaluateOnModalChangeActions",value:function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(initialValues,modalProps){var updatedFormData,fieldMetaData,self,actionFound,onModalChangeActions,onModalChangeActionIndx,modalChangeAction,sourceMatched,notifier,conditionFn,_notifier5,scriptFn,scriptOutput,scriptOutputData,scriptOutputMetadata,scriptOutputKeys,scriptOutputKeyIndx,scriptOutputKey,scriptOutputMetaKeys,scriptOutputMetaKeyIndx,scriptOutputMetaKey;return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(_extends({},initialValues),updatedFormData=_extends({},initialValues),fieldMetaData={},self=this,actionFound=!1,!((onModalChangeActions=this.state.formActions&&this.state.formActions.modal?this.state.formActions.modal.onModalChange:null)&&onModalChangeActions.length>0)){_context7.next=48;break}_context7.t0=_regeneratorRuntime.keys(onModalChangeActions);case 8:if((_context7.t1=_context7.t0()).done){_context7.next=48;break}if(onModalChangeActionIndx=_context7.t1.value,modalChangeAction=onModalChangeActions[onModalChangeActionIndx],sourceMatched=!1,!modalChangeAction.Condition){_context7.next=27;break}return _context7.prev=13,notifier={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context7.next=17,self.getFunctionFromString(modalChangeAction.Condition,{data:updatedFormData,changes:{},$notifier:notifier,$modal:modalProps});case 17:return conditionFn=_context7.sent,_context7.next=20,conditionFn();case 20:sourceMatched=_context7.sent,_context7.next=25;break;case 23:_context7.prev=23,_context7.t2=_context7.catch(13);case 25:_context7.next=29;break;case 27:sourceMatched=!0,actionFound=!0;case 29:if("Scripted"!=modalChangeAction.TargetActionType){_context7.next=46;break}return _notifier5={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context7.next=33,self.getFunctionFromString(modalChangeAction.TargetActionScript,{data:updatedFormData,changes:{},$matched:sourceMatched,$notifier:_notifier5,$modal:modalProps});case 33:return scriptFn=_context7.sent,_context7.prev=34,_context7.next=37,scriptFn();case 37:if(scriptOutput=_context7.sent,scriptOutputData=scriptOutput.data,scriptOutputMetadata=scriptOutput.meta,scriptOutputData&&Object.keys(scriptOutputData).length>0)for(scriptOutputKeyIndx in scriptOutputKeys=Object.keys(scriptOutputData))scriptOutputKey=scriptOutputKeys[scriptOutputKeyIndx],scriptOutputData[scriptOutputKey]&&(updatedFormData[scriptOutputKey]=scriptOutputData[scriptOutputKey]);if(scriptOutputMetadata&&Object.keys(scriptOutputMetadata).length>0)for(scriptOutputMetaKeyIndx in scriptOutputMetaKeys=Object.keys(scriptOutputMetadata))scriptOutputMetaKey=scriptOutputMetaKeys[scriptOutputMetaKeyIndx],scriptOutputMetadata[scriptOutputMetaKey]&&(fieldMetaData[scriptOutputMetaKey]=_extends({},fieldMetaData[scriptOutputMetaKey],scriptOutputMetadata[scriptOutputMetaKey]));_context7.next=46;break;case 44:_context7.prev=44,_context7.t3=_context7.catch(34);case 46:_context7.next=8;break;case 48:return _context7.abrupt("return",{data:updatedFormData,metadata:fieldMetaData,actionFound:actionFound});case 49:case"end":return _context7.stop()}},_callee7,this,[[13,23],[34,44]])}));return function(_x10,_x11){return _ref8.apply(this,arguments)}}()},{key:"getFunctionFromString",value:function(functionStr,inputParams){return new Function(" var inputParams = arguments && arguments.length > 0?arguments[0]: {};                \n                                var $form = inputParams.data;\n                                var $changes = inputParams.changes;\n                                var $matched = !!inputParams.$matched;\n                                var $notifier = inputParams.$notifier;\n                                var $action = inputParams.actionPayload;\n                                var $modal = inputParams.$modal;\n                                var $rootel = inputParams.$rootel;\n                                return ("+functionStr+")")(inputParams)}},{key:"updateWidgetProps",value:function(widgetProps,inputVal,noUpdates){if(noUpdates||(inputVal&&inputVal.form_action||widgetProps.FormOutput&&widgetProps.FormOutput.form_action&&delete widgetProps.FormOutput.form_action,inputVal&&inputVal.ref_action||widgetProps.FormOutput&&widgetProps.FormOutput.ref_action&&delete widgetProps.FormOutput.ref_action,inputVal&&inputVal.list_action||widgetProps.FormOutput&&widgetProps.FormOutput.list_action&&delete widgetProps.FormOutput.list_action,inputVal&&inputVal.form_actions||widgetProps.FormOutput&&widgetProps.FormOutput.form_actions&&delete widgetProps.FormOutput.form_actions),this.props.isformcontrol+""=="true"){if(this.props.controlname&&(!widgetProps.FormOutput||!widgetProps.FormOutput.form_action||!widgetProps.FormOutput.form_action.actionClicked)&&(!widgetProps.FormOutput||!widgetProps.FormOutput.ref_action||!widgetProps.FormOutput.ref_action.actionClicked)&&(!widgetProps.FormOutput||!widgetProps.FormOutput.list_action||!widgetProps.FormOutput.list_action.actionClicked)){var controlProps=Object.assign({},this.props.controlProps),FormOutput=widgetProps.FormOutput?"string"==typeof widgetProps.FormOutput?JSON.parse(widgetProps.FormOutput):widgetProps.FormOutput:_extends({},widgetProps);FormOutput.form_actions&&delete FormOutput.form_actions,FormOutput.form_list&&delete FormOutput.form_list,FormOutput.form_action&&delete FormOutput.form_action,FormOutput.list_action&&delete FormOutput.list_action;var updatedData={controlProps:_extends({},controlProps,FormOutput)};if(this.props.parentwidgetid&&this.props.controlid!=this.props.parentwidgetid){var parentWidgetProps=Object.assign({},this.props.parentWidgetProps);parentWidgetProps.FormOutput=parentWidgetProps.FormOutput||{};try{parentWidgetProps.FormOutput="string"==typeof parentWidgetProps.FormOutput?JSON.parse(parentWidgetProps.FormOutput):parentWidgetProps.FormOutput}catch(err){}parentWidgetProps.FormOutput[this.props.controlid]=_extends({},parentWidgetProps.FormOutput[this.props.controlid],controlProps),updatedData.parentWidgetProps=parentWidgetProps}this.props.updateStore({updates:updatedData})}}else this.props.updateStore({updates:{widgetProps:widgetProps}})}},{key:"handleChange",value:function(inputVal,meta){this.state.isReady&&inputVal&&Object.keys(inputVal).length>0&&this.handleChangeFn(inputVal,meta)}},{key:"getRecordData",value:function(){var _ref9=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(recordId){var rawSchema,fieldCodes,rawSchemaFields,rawSchemaFieldIndx,rawSchemaField,tableName,recordsData,recordData,_ref10,data;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(rawSchema=this.state.rawSchema,fieldCodes=["uid"],rawSchema&&rawSchema.dataType)for(rawSchemaFieldIndx in rawSchemaFields=rawSchema.dataType)"uid"!=(rawSchemaField=rawSchemaFields[rawSchemaFieldIndx]).code&&fieldCodes.push(rawSchemaField.code);return tableName="mmf"!=this.state.scope&&this.state.scope?this.state.modelName+"_"+this.state.scope:this.state.modelName,_context8.next=6,$qry.getRecords(tableName,{where:{uid:recordId}},fieldCodes);case 6:if(!((recordsData=_context8.sent)&&recordsData.length>0)){_context8.next=19;break}return(recordData=recordsData[0]).form_list&&delete recordData.form_list,recordData.form_actions&&delete recordData.form_actions,recordData=_extends({},recordData,{form_list:{parent:recordData},form_actions:{parent:recordData}}),_context8.next=14,this.evaluateOnLoadActions(recordData,this.state.formActions);case 14:_ref10=_context8.sent,data=_ref10.data,_ref10.metadata,recordData=_extends({},recordData,data),this.setState({defaultValue:recordData});case 19:case"end":return _context8.stop()}},_callee8,this)}));return function(_x12){return _ref9.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var _ref11=_asyncToGenerator(_regeneratorRuntime.mark(function _callee11(){var modelName,viewName,modelScope,formTemplateFilter,self,schemaNameArry,themeData,dataSchema,_this3=this;return _regeneratorRuntime.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return null,modelName=this.state.modelName,viewName=this.state.view?this.state.view:"Default",modelScope="",formTemplateFilter=null,self=this,modelName?(schemaNameArry=modelName.indexOf("_")>-1?modelName.split("_"):[modelName],modelName=schemaNameArry.length>1?schemaNameArry.slice(0,schemaNameArry.length-1).join("_"):schemaNameArry[0],modelScope=schemaNameArry.length>1?schemaNameArry[schemaNameArry.length-1]:"mmf",(formTemplateFilter={}).where={and:[{ModelName:modelName},{Scope:modelScope}]},viewName?formTemplateFilter.where.and.push({or:[{View:viewName},{View:"Default"}]}):formTemplateFilter.where.and.push({View:"Default"})):this.state.formTemplateId?(formTemplateFilter={}).where={uid:this.state.formTemplateId}:this.state.formTemplateName&&((formTemplateFilter={}).where={Name:this.state.formTemplateName}),_context11.next=9,this.getThemeData();case 9:themeData=_context11.sent,dataSchema={},formTemplateFilter?$qry.getCachableRecords("FormTemplate_studio",formTemplateFilter,["uid","Name","Scope","Model","View","ModelName","schema","rawschema","uischema","rawuischema","default","Theme"]).then(function(){var _ref12=_asyncToGenerator(_regeneratorRuntime.mark(function _callee10(data){var dataRecord,filteredData,formActions,preventDefaultSave,preventDefaultShowList,rawSchema,fieldCodes,rawSchemaFields,rawSchemaFieldIndx,rawSchemaField,tableName,defaultFormData,_ref16,_data3,metadata,dataRecordDefaultValue,defaultData,widgetProps;return _regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(!(data&&data.length>0)){_context10.next=29;break}return dataRecord=data[0],data.length>1&&(filteredData=data.filter(function(dataItem){return dataItem.View==viewName}))&&1==filteredData.length&&(dataRecord=filteredData[0]),_context10.next=5,self.getFormActions(dataRecord.Model,dataRecord.ModelName,dataRecord.uid);case 5:if(formActions=_context10.sent,preventDefaultSave=_this3.needsPreventDefaultSave(formActions),preventDefaultShowList=_this3.needsPreventDefaultShowList(formActions),!_this3.state.recordId){_context10.next=16;break}if(rawSchema=dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},fieldCodes=["uid"],rawSchema&&rawSchema.dataType)for(rawSchemaFieldIndx in rawSchemaFields=rawSchema.dataType)"uid"!=(rawSchemaField=rawSchemaFields[rawSchemaFieldIndx]).code&&fieldCodes.push(rawSchemaField.code);tableName="mmf"!=dataRecord.Scope&&dataRecord.Scope?dataRecord.ModelName+"_"+dataRecord.Scope:dataRecord.ModelName,$qry.getRecords(tableName,{where:{uid:_this3.state.recordId}},fieldCodes).then(function(){var _ref13=_asyncToGenerator(_regeneratorRuntime.mark(function _callee9(recordsData){var recordData,_ref14,_data,metadata,schemaObj,defaultFormData,_ref15,_data2,_metadata,dataRecordDefaultValue,defaultData,_themeData;return _regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(!(recordsData&&recordsData.length>0)){_context9.next=15;break}return(recordData=recordsData[0]).form_list&&delete recordData.form_list,recordData.form_actions&&delete recordData.form_actions,recordData=_extends({},recordData,{form_list:{parent:recordData},form_actions:{parent:recordData}}),dataSchema=dataRecord.schema?JSON.parse(dataRecord.schema):{},_context9.next=8,self.evaluateOnLoadActions(recordData,formActions);case 8:_ref14=_context9.sent,_data=_ref14.data,metadata=_ref14.metadata,recordData=_extends({},_this3.state.defaultValue,recordData,_data),_this3.setState({formTemplateId:dataRecord.uid,templateName:dataRecord.Name,scope:dataRecord.Scope,modelId:dataRecord.Model,modelName:dataRecord.ModelName,viewName:dataRecord.View,defaultValue:recordData,dataSchema:dataSchema,uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},rawSchema:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},rawUISchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},isReady:!0,formActions:formActions,formContext:metadata||{},preventDefaultSave:preventDefaultSave,preventDefaultShowList:preventDefaultShowList,formThemeId:dataRecord.Theme,themeData:themeData}),_context9.next=30;break;case 15:schemaObj=dataRecord.schema?JSON.parse(dataRecord.schema):{},defaultFormData={};try{defaultFormData=dataRecord&&dataRecord.default?"string"==typeof dataRecord.default?JSON.parse(dataRecord.default):dataRecord.default:{}}catch(err){}return _context9.next=20,self.evaluateOnLoadActions(defaultFormData,formActions);case 20:_ref15=_context9.sent,_data2=_ref15.data,_metadata=_ref15.metadata,dataRecordDefaultValue={};try{dataRecordDefaultValue=dataRecord&&dataRecord.default?"string"==typeof dataRecord.default?JSON.parse(dataRecord.default):dataRecord.default:{}}catch(err){}return defaultData=_extends({},dataRecordDefaultValue,_this3.state.defaultValue,_data2),_context9.next=28,_this3.getThemeData();case 28:_themeData=_context9.sent,_this3.setState({formTemplateId:dataRecord.uid,templateName:dataRecord.Name,scope:dataRecord.Scope,modelId:dataRecord.Model,modelName:dataRecord.ModelName,viewName:dataRecord.View,defaultValue:defaultData,dataSchema:schemaObj,uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},rawSchema:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},rawUISchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},isReady:!0,formActions:formActions,formContext:_metadata,preventDefaultSave:preventDefaultSave,preventDefaultShowList:preventDefaultShowList,formThemeId:dataRecord.Theme,themeData:_themeData});case 30:case"end":return _context9.stop()}},_callee9,_this3)}));return function(_x14){return _ref13.apply(this,arguments)}}()),_context10.next=28;break;case 16:dataSchema=dataRecord.schema?JSON.parse(dataRecord.schema):{},defaultFormData={};try{defaultFormData=dataRecord&&dataRecord.default?"string"==typeof dataRecord.default?JSON.parse(dataRecord.default):dataRecord.default:{}}catch(err){}return _context10.next=21,self.evaluateOnLoadActions(defaultFormData,formActions);case 21:_ref16=_context10.sent,_data3=_ref16.data,metadata=_ref16.metadata,dataRecordDefaultValue={};try{dataRecordDefaultValue=dataRecord&&dataRecord.default?"string"==typeof dataRecord.default?JSON.parse(dataRecord.default):dataRecord.default:{}}catch(err){}defaultData=_extends({},dataRecordDefaultValue,_this3.state.defaultValue,_data3),_this3.setState({formTemplateId:dataRecord.uid,templateName:dataRecord.Name,scope:dataRecord.Scope,modelId:dataRecord.Model,modelName:dataRecord.ModelName,viewName:dataRecord.View,defaultValue:defaultData,dataSchema:dataRecord.schema?JSON.parse(dataRecord.schema):{},uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},rawSchema:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},rawUISchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},isReady:!0,formActions:formActions,formContext:metadata,preventDefaultSave:preventDefaultSave,preventDefaultShowList:preventDefaultShowList,formThemeId:dataRecord.Theme,themeData:themeData});case 28:(_this3.props.isformcontrol+""=="true"||_this3.props.widgetProps)&&((widgetProps=Object.assign({},_this3.props.widgetProps)).TableName="mmf"!=dataRecord.Scope&&dataRecord.Scope?dataRecord.ModelName+"_"+dataRecord.Scope:dataRecord.ModelName,widgetProps.View=dataRecord.View,widgetProps.RecordId=_this3.state.recordId,_this3.updateWidgetProps(widgetProps));case 29:case"end":return _context10.stop()}},_callee10,_this3)}));return function(_x13){return _ref12.apply(this,arguments)}}()):this.setState({isReady:!0});case 12:case"end":return _context11.stop()}},_callee11,this)}));return function(){return _ref11.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref17=_asyncToGenerator(_regeneratorRuntime.mark(function _callee12(prevProps){var self,controlPropNames,controlPropName,changes,_props$controlProps$c,actionClicked,actionPayload,controlPropNameIndx,prevPropName,controlActionFound,_props$widgetControlP,_actionClicked,_actionPayload,_controlPropNameIndx,defaultValue,controlElements,isEmbeddedList,filteredControlEle,formOutput,prevPropValue,currentPropValue,prevPropValueIndx,currentPropValueIndx,currentValue,prevValue,isCellEditOperation,itemIndx,currentValueItem,maxLength,_itemIndx,mergedValue,_prevPropValue,dataRecord,newFormState,modelName,viewName,modelScope,formTemplateFilter,schemaNameArry,records,formActions,preventDefaultSave,preventDefaultShowList,dataRecordDefault,_defaultValue,rawSchema,fieldCodes,rawSchemaFields,rawSchemaFieldIndx,rawSchemaField,tableName,recordsData,recordData,prevUpdatedData,currentUpdatedData,_formOutput,_recordData,formOutputKeys,formOutputIndx,formOutputKey,_tableName,updatedRecord,widgetProps,_tableName2,createdRecord,updatedFormData,_widgetProps,widgettree,rootPage,widgetTreeKey,modalProps,_widgetProps2,currentRecordData,_ref18,data,metadata,FormOutput,stateChanges;return _regeneratorRuntime.wrap(function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:if(self=this,controlPropNames=void 0,controlPropName=void 0,changes=void 0,(!this.state.isReady||_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&prevProps.templatename==this.props.templatename&&prevProps.templateid==this.props.templateid&&prevProps.tablename==this.props.tablename&&prevProps.recordid==this.props.recordid)&&_.isEqual(prevProps.controlProps,this.props.controlProps)&&_.isEqual(prevProps.widgetControlProps,this.props.widgetControlProps)){_context12.next=83;break}if(!_.isEqual(prevProps.controlProps,this.props.controlProps)&&!(this.props.controlid&&this.props.controlid.startsWith("cell_")))if(this.props.controlProps.control_action)_props$controlProps$c=this.props.controlProps.control_action,actionClicked=_props$controlProps$c.actionClicked,actionPayload=_props$controlProps$c.actionPayload,prevProps.controlProps&&prevProps.controlProps.control_action&&prevProps.controlProps.control_action.actionPayload&&prevProps.controlProps.control_action.actionPayload.clickts==actionPayload.clickts||this.handleChange({form_action:{actionClicked:actionClicked,actionPayload:actionPayload}});else if((controlPropNames=Object.keys(this.props.controlProps))&&controlPropNames.length>0){for(controlPropNameIndx in changes={},controlPropNames)controlPropName=controlPropNames[controlPropNameIndx],prevPropName=prevProps.controlProps?prevProps.controlProps[controlPropName]:null,_.isEqual(prevPropName,this.props.controlProps[controlPropName])||(changes[controlPropName]=this.props.controlProps[controlPropName]);this.handleChange(Object.assign({},changes))}if(!_.isEqual(prevProps.widgetControlProps,this.props.widgetControlProps)&&(controlActionFound=!1,this.props.widgetControlProps.control_action&&(_props$widgetControlP=this.props.widgetControlProps.control_action,_actionClicked=_props$widgetControlP.actionClicked,_actionPayload=_props$widgetControlP.actionPayload,prevProps.widgetControlProps&&prevProps.widgetControlProps.control_action&&prevProps.widgetControlProps.control_action.actionPayload&&prevProps.widgetControlProps.control_action.actionPayload.clickts==_actionPayload.clickts||(controlActionFound=!0,this.handleChange({form_action:{actionClicked:_actionClicked,actionPayload:_actionPayload}}))),!controlActionFound&&(controlPropNames=(controlPropNames=Object.keys(this.props.widgetControlProps)).filter(function(controlPropName){return"control_action"!=controlPropName}))&&controlPropNames.length>0)){for(_controlPropNameIndx in changes={},controlPropNames){if(controlPropName=controlPropNames[_controlPropNameIndx],defaultValue=this.state.defaultValue[controlPropName],controlElements=[],this.getControlElements(this.state.uiSchema,controlElements),isEmbeddedList=!1,controlElements&&(filteredControlEle=controlElements.filter(function(controlElement){return"EmbeddedList"==controlElement.subtype&&controlElement.name==controlPropName}))&&filteredControlEle.length>0){formOutput=this.props.widgetProps?this.props.widgetProps.FormOutput:{};try{"string"==typeof formOutput&&(formOutput=JSON.parse(formOutput))}catch(err){}if(prevPropValue=prevProps.widgetControlProps&&prevProps.widgetControlProps[controlPropName]?[].concat(prevProps.widgetControlProps[controlPropName]):null,currentPropValue=[].concat(this.props.widgetControlProps[controlPropName]),prevPropValue)for(prevPropValueIndx=0;prevPropValueIndx<prevPropValue.length;prevPropValueIndx++)prevPropValue[prevPropValueIndx]=prevPropValue[prevPropValueIndx]||null;if(currentPropValue)for(currentPropValueIndx=0;currentPropValueIndx<currentPropValue.length;currentPropValueIndx++)currentPropValue[currentPropValueIndx]=currentPropValue[currentPropValueIndx]||null;if(!_.isEqual(prevPropValue,currentPropValue)){if(prevValue=prevPropValue,isCellEditOperation=!1,(currentValue=currentPropValue).length>0)for(itemIndx in currentValue)currentValueItem=currentValue[itemIndx],(!prevValue||prevValue.length<=itemIndx)&&currentValueItem&&currentValueItem.__isCellEdited__?isCellEditOperation=!0:prevValue&&prevValue.length>itemIndx&&prevValue[itemIndx]&&currentValue[itemIndx]&&prevValue[itemIndx].__isCellEdited__!=currentValue[itemIndx].__isCellEdited__&&(isCellEditOperation=!0);if(currentValue&&isCellEditOperation)for(maxLength=isCellEditOperation?defaultValue?defaultValue.length:prevValue?prevValue.length:currentValue.length:currentValue.length,changes[controlPropName]=[],_itemIndx=0;_itemIndx<maxLength;_itemIndx++)mergedValue={},defaultValue&&defaultValue.length>_itemIndx&&(mergedValue=_extends({},mergedValue,defaultValue[_itemIndx])),prevPropValue&&prevPropValue.length>_itemIndx&&(mergedValue=_extends({},mergedValue,prevPropValue[_itemIndx])),currentValue&&currentValue.length>_itemIndx&&(mergedValue=_extends({},mergedValue,currentValue[_itemIndx])),changes[controlPropName].push(mergedValue);else changes[controlPropName]=currentValue}isEmbeddedList=!0}isEmbeddedList||(_prevPropValue=prevProps.widgetControlProps?prevProps.widgetControlProps[controlPropName]:null,_.isEqual(_prevPropValue,this.props.widgetControlProps[controlPropName])||(changes[controlPropName]=this.props.widgetControlProps[controlPropName]))}this.handleChange(Object.assign({},changes))}if((this.props.isformcontrol+""=="true"||!prevProps.widgetProps||!this.props.widgetProps||prevProps.widgetProps.RecordId==this.props.widgetProps.RecordId&&prevProps.widgetProps.FormTemplate==this.props.widgetProps.FormTemplate&&prevProps.widgetProps.TableName==this.props.widgetProps.TableName&&prevProps.widgetProps.View==this.props.widgetProps.View)&&prevProps.templatename==this.props.templatename&&prevProps.templateid==this.props.templateid&&prevProps.tablename==this.props.tablename&&prevProps.recordid==this.props.recordid){_context12.next=64;break}if(newFormState={},(dataRecord=null)&&prevProps.widgetProps.FormTemplate==this.props.widgetProps.FormTemplate&&prevProps.widgetProps.TableName==this.props.widgetProps.TableName&&prevProps.tablename==this.props.tablename&&prevProps.templatename==this.props.templatename&&prevProps.templateid==this.props.templateid){_context12.next=52;break}if(modelName=this.props.widgetProps?this.props.widgetProps.TableName:this.props.tablename,viewName=this.props.widgetProps&&this.props.widgetProps.View?this.props.widgetProps.View:this.props.view?this.props.view:this.state.view?this.state.view:"Default",modelScope="",formTemplateFilter=null,!modelName){_context12.next=22;break}schemaNameArry=modelName.indexOf("_")>-1?modelName.split("_"):[modelName],modelName=schemaNameArry.length>1?schemaNameArry.slice(0,schemaNameArry.length-1).join("_"):schemaNameArry[0],modelScope=schemaNameArry.length>1?schemaNameArry[schemaNameArry.length-1]:"mmf",(formTemplateFilter={}).where={and:[{ModelName:modelName},{Scope:modelScope}]},viewName?formTemplateFilter.where.and.push({View:viewName}):formTemplateFilter.where.and.push({View:"Default"}),_context12.next=38;break;case 22:if(prevProps.templatename==this.props.templatename){_context12.next=27;break}(formTemplateFilter={}).where={Name:this.props.templatename},_context12.next=38;break;case 27:if(prevProps.templateid==this.props.templateid){_context12.next=32;break}(formTemplateFilter={}).where={uid:this.props.templateid},_context12.next=38;break;case 32:if(prevProps.recordid==this.props.recordid){_context12.next=37;break}return _context12.next=35,this.getRecordData(this.props.recordid);case 35:_context12.next=38;break;case 37:this.state.formTemplateId?(formTemplateFilter={}).where={uid:this.state.formTemplateId}:this.state.formTemplateName&&((formTemplateFilter={}).where={Name:this.state.formTemplateName});case 38:if(!formTemplateFilter){_context12.next=52;break}return _context12.next=41,$qry.getCachableRecords("FormTemplate_studio",formTemplateFilter,["uid","Name","Scope","Model","ModelName","View","schema","rawschema","uischema","rawuischema","default","Theme"]);case 41:if(!((records=_context12.sent)&&records.length>0)){_context12.next=52;break}return dataRecord=records[0],_context12.next=46,self.getFormActions(dataRecord.Model,dataRecord.ModelName,dataRecord.uid);case 46:formActions=_context12.sent,preventDefaultSave=this.needsPreventDefaultSave(formActions),preventDefaultShowList=this.needsPreventDefaultShowList(formActions),dataRecordDefault=dataRecord.default?JSON.parse(dataRecord.default):{},_defaultValue=_extends({},this.state.defaultValue,dataRecordDefault),newFormState={formTemplateId:dataRecord.uid,templateName:dataRecord.Name,scope:dataRecord.Scope,modelId:dataRecord.Model,modelName:dataRecord.ModelName,viewName:dataRecord.View,defaultValue:_defaultValue,dataSchema:dataRecord.schema?JSON.parse(dataRecord.schema):{},uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},rawSchema:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},rawUISchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},formTemplateId:this.props.widgetProps?this.props.widgetProps.FormTemplate:this.props.templatename,formActions:formActions,preventDefaultSave:preventDefaultSave,preventDefaultShowList:preventDefaultShowList,formThemeId:dataRecord.Theme};case 52:if(this.props.isformcontrol+""=="true"||prevProps.widgetProps.RecordId==this.props.widgetProps.RecordId||!dataRecord){_context12.next=61;break}if(rawSchema=dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},fieldCodes=["uid"],rawSchema&&rawSchema.dataType)for(rawSchemaFieldIndx in rawSchemaFields=rawSchema.dataType)"uid"!=(rawSchemaField=rawSchemaFields[rawSchemaFieldIndx]).code&&fieldCodes.push(rawSchemaField.code);return tableName="mmf"!=dataRecord.Scope&&dataRecord.Scope?dataRecord.ModelName+"_"+dataRecord.Scope:dataRecord.ModelName,_context12.next=59,$qry.getRecords(tableName,{where:{uid:this.props.widgetProps.RecordId}},fieldCodes);case 59:(recordsData=_context12.sent)&&recordsData.length>0&&(recordData=recordsData[0],newFormState.defaultValue=_extends({},this.state.defaultValue,recordData));case 61:this.setState(_extends({},newFormState)),_context12.next=65;break;case 64:this.props.isformcontrol+""!="true"&&prevProps.widgetProps&&this.props.widgetProps&&!_.isEqual(prevProps.widgetProps.FormOutput,this.props.widgetProps.FormOutput)&&(prevUpdatedData="string"==typeof prevProps.widgetProps.FormOutput?JSON.parse(prevProps.widgetProps.FormOutput):Object.assign({},prevProps.widgetProps.FormOutput),(currentUpdatedData="string"==typeof this.props.widgetProps.FormOutput?JSON.parse(this.props.widgetProps.FormOutput):Object.assign({},this.props.widgetProps.FormOutput))&&delete currentUpdatedData.form_action,currentUpdatedData&&delete currentUpdatedData.ref_action,currentUpdatedData&&delete currentUpdatedData.list_action,_.isEqual(currentUpdatedData,prevUpdatedData)||this.setState({defaultValue:_extends({},this.state.defaultValue,currentUpdatedData)}));case 65:if(!(!this.state.preventDefaultSave&&this.state.modelName&&this.state.modelId&&this.props.widgetProps.PreventDefaultSave+""!="true"&&this.props.widgetProps.FormOutput&&this.props.widgetProps.FormOutput.form_actions&&this.props.widgetProps.FormOutput.form_actions.actionClicked&&"save"==this.props.widgetProps.FormOutput.form_actions.actionClicked&&this.props.widgetProps.FormOutput.form_actions.actionPayload&&this.props.widgetProps.FormOutput.form_actions.actionPayload.clickts)||prevProps.widgetProps.FormOutput&&prevProps.widgetProps.FormOutput.form_actions&&prevProps.widgetProps.FormOutput.form_actions.actionPayload&&prevProps.widgetProps.FormOutput.form_actions.actionClicked==this.props.widgetProps.FormOutput.form_actions.actionClicked&&(_.isEqual(prevProps.widgetProps.FormOutput.form_actions.actionPayload,this.props.widgetProps.FormOutput.form_actions.actionPayload)||prevProps.widgetProps.FormOutput.form_actions.actionPayload.clickts==this.props.widgetProps.FormOutput.form_actions.actionPayload.clickts)){_context12.next=83;break}if(_formOutput=this.props.widgetProps.FormOutput,_recordData={},_formOutput)for(formOutputIndx in formOutputKeys=Object.keys(_formOutput))formOutputKey=formOutputKeys[formOutputIndx],_recordData[formOutputKey]=_formOutput[formOutputKey];if(!(Object.keys(_recordData).length>0)){_context12.next=83;break}if(!_recordData.uid){_context12.next=78;break}return _tableName="mmf"!=this.state.scope&&this.state.scope?this.state.modelName+"_"+this.state.scope:this.state.modelName,_context12.next=74,$qry.updateRecord(_tableName,_recordData.uid,_recordData,["uid"]);case 74:(updatedRecord=_context12.sent)&&updatedRecord.uid&&(this.props.widgetProps&&((widgetProps=Object.assign({},this.props.widgetProps)).RecordId=updatedRecord.uid,this.updateWidgetProps(widgetProps)),this.props.addFlashMessage({title:"Success - ",subtitle:"Updated the record successfully."})),_context12.next=83;break;case 78:return _tableName2="mmf"!=this.state.scope&&this.state.scope?this.state.modelName+"_"+this.state.scope:this.state.modelName,_context12.next=81,$qry.createRecord(_tableName2,_recordData,["uid"]);case 81:(createdRecord=_context12.sent)&&createdRecord.uid&&((updatedFormData=Object.assign({},_recordData)).uid=createdRecord.uid,this.props.widgetProps&&((_widgetProps=Object.assign({},this.props.widgetProps)).RecordId=createdRecord.uid,this.updateWidgetProps(_widgetProps)),_extends({},this.state.defaultValue,updatedFormData),this.setState({defaultValue:_extends({},this.state.defaultValue,updatedFormData)}),this.props.addFlashMessage({title:"Success - ",subtitle:"Created the record successfully."}));case 83:if(prevProps.cancelpreview==this.props.cancelpreview||this.props.cancelpreview+""!="true"){_context12.next=105;break}widgettree=null,rootPage=null;try{if(widgettree){if((widgettree=this.props.widgettree&&"string"==typeof this.props.widgettree?JSON.parse(this.props.widgettree):this.props.widgettree)&&Object.keys(widgettree).length>0)for(widgetTreeKey=Object.keys(widgettree)[0];widgetTreeKey;)rootPage=widgetTreeKey.indexOf("@@")>-1?widgetTreeKey.split("@@")[1]:rootPage,widgettree=widgettree[widgetTreeKey],widgetTreeKey=widgettree&&Object.keys(widgettree).length>0?Object.keys(widgettree)[0]:null}else rootPage=this.props.pageid}catch(err){}if(modalProps=null,rootPage&&(!widgettree||widgettree&&rootPage!=this.props.pageid)&&this.props.pages[rootPage]&&this.props.pages[rootPage].widgets&&this.props.pages[rootPage].widgets["pagemodal_"+rootPage]&&(modalProps=this.props.pages[rootPage].widgets["pagemodal_"+rootPage].props),!modalProps||this.props.widgetid=="pagemodal_"+rootPage){_context12.next=105;break}_widgetProps2=Object.assign({},this.props.widgetProps),currentRecordData=_widgetProps2.FormOutput;try{currentRecordData="string"==typeof currentRecordData?JSON.parse(currentRecordData):currentRecordData,currentRecordData=_extends({},this.state.defaultValue,currentRecordData)}catch(err){}return _context12.next=95,self.evaluateOnModalChangeActions(currentRecordData,_extends({},modalProps));case 95:_ref18=_context12.sent,data=_ref18.data,metadata=_ref18.metadata,FormOutput=_extends({},currentRecordData,data),_widgetProps2.FormOutput=FormOutput,this.updateWidgetProps(_widgetProps2,null,!0),(stateChanges={}).formContext=_extends({},this.state.formContext,metadata),stateChanges.defaultValue=_widgetProps2.FormOutput,this.setState(stateChanges);case 105:case"end":return _context12.stop()}},_callee12,this)}));return function(_x15){return _ref17.apply(this,arguments)}}()},{key:"render",value:function(){if(0==Object.keys(this.state.dataSchema).length&&0==Object.keys(this.state.uiSchema).length)return null;var spinner=React.createElement("div",{className:"loader"}),JsonFormComp=JSONForm(),theme=this.state.themeData&&this.state.themeData[this.state.formThemeId]||{},config={pageid:this.props.pageid||this.props.uid,pagesuffix:this.props.pagesuffix||"",widgetid:this.props.widgetid,ismodal:this.props.widgetid&&this.props.widgetid.startsWith("pagemodal_")},dynamicFormEl=this.state.isReady?React.createElement(JsonFormComp,{schema:this.state.dataSchema,uischema:this.state.uiSchema,defaultvalue:this.state.defaultValue,shadow:this.props.shadow,context:_extends({},this.state.formContext,{config:config,theme:theme}),handleChange:this.handleChange}):{spinner:spinner},inlinestyles=this.props.isformcontrol+""=="true"?this.props.inlinestyles?this.props.inlinestyles:this.props.widgetProps?this.props.widgetProps.InlineStyles:"":theme&&theme.Form||"";return React.createElement(React.Fragment,null,React.createElement("style",null,inlinestyles),React.createElement("div",{className:"form_header",ref:"mainpage",style:{height:"fit-content",width:"100%",overflowY:"auto",overflowX:"hidden",textAlign:"left",minHeight:"60%",maxHeight:"100%",paddingRight:"10px",paddingLeft:"10px"}},dynamicFormEl))}}]),_SrsDynamicForm_}(React.Component),_export("SrsDynamicForm",SrsDynamicForm=function(props){return _SrsDynamicForm_}),_export("SrsDynamicForm",SrsDynamicForm),_export("default",SrsDynamicForm),_export("states",states=[{KeyName:"cancelpreview",AccessPath:"cancelpreview",DefaultValue:'{"cancelpreview": "false"}'},{KeyName:"widgettree",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.widgettree",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"widgettree": ""}}}}}'},{KeyName:"widgetControlProps",AccessPath:"controls.${pageid}${pagesuffix}_${widgetid}",DefaultValue:'{"controls": {"${pageid}${pagesuffix}_${widgetid}": {}}}'},{KeyName:"parentWidgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${parentwidgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${parentwidgetid}": {"props": {}}}}}}'},{KeyName:"ModalProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.pagemodal_${pageid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"pagemodal_${pageid}": {"props": {}}}}}}'},{KeyName:"controlProps",AccessPath:"controls.${pageid}${pagesuffix}_${controlid}",DefaultValue:'{"controls": {"${pageid}${pagesuffix}_${controlid}": {}}}'},{KeyName:"pages",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsGrid/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/defineProperty.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/toConsumableArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/studio/DataGrid.js","@carbon/icons-react/lib/filter/20","@carbon/icons-react/lib/subtract--alt/20","@carbon/icons-react/lib/view--mode-2/20","client/script/studio/DataGridFilters.js","carbon-components-react","component/studio/RenderIcon/Definition.js","lodash.debounce","lodash","lodash.clonedeep","@fortawesome/fontawesome-svg-core","@fortawesome/react-fontawesome","@fortawesome/free-solid-svg-icons"],function(_export,_context7){"use strict";var _defineProperty,_toConsumableArray,_extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ReactDataGrid,TextEditor,NumberEditor,SelectColumn,Filter20,FilterRemove20,FilterRenderers,Button,MultiSelect,Tile,RenderIcon,debounce,_,cloneDeep,library,FontAwesomeIcon,faBookOpen,_SrsGrid_,SrsGrid;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs){_defineProperty=_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs){_toConsumableArray=_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptStudioDataGridJs){ReactDataGrid=_clientScriptStudioDataGridJs.default,TextEditor=_clientScriptStudioDataGridJs.TextEditor,NumberEditor=_clientScriptStudioDataGridJs.NumberEditor,SelectColumn=_clientScriptStudioDataGridJs.SelectColumn},function(_carbonIconsReactLibFilter){Filter20=_carbonIconsReactLibFilter.default},function(_carbonIconsReactLibSubtractAlt){FilterRemove20=_carbonIconsReactLibSubtractAlt.default},function(_carbonIconsReactLibViewMode){_carbonIconsReactLibViewMode.default},function(_clientScriptStudioDataGridFiltersJs){FilterRenderers=_clientScriptStudioDataGridFiltersJs.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button,MultiSelect=_carbonComponentsReact.MultiSelect,_carbonComponentsReact.Dropdown,Tile=_carbonComponentsReact.Tile},function(_componentStudioRenderIconDefinitionJs){RenderIcon=_componentStudioRenderIconDefinitionJs.RenderIcon},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_lodash){_=_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_fortawesomeFontawesomeSvgCore){library=_fortawesomeFontawesomeSvgCore.library},function(_fortawesomeReactFontawesome){FontAwesomeIcon=_fortawesomeReactFontawesome.FontAwesomeIcon},function(_fortawesomeFreeSolidSvgIcons){faBookOpen=_fortawesomeFreeSolidSvgIcons.faBookOpen}],execute:function(){_SrsGrid_=function(_React$Component){function _SrsGrid_(props){var _this2=this;_classCallCheck(this,_SrsGrid_);var _this=_possibleConstructorReturn(this,(_SrsGrid_.__proto__||Object.getPrototypeOf(_SrsGrid_)).call(this,props));_this.fieldTypes={string:{resizable:!0,sortable:!0,editable:!0,editor:TextEditor,filter:FilterRenderers.TextFilter,inlinefilter:!1},number:{resizable:!0,sortable:!0,editable:!0,editor:NumberEditor,filter:FilterRenderers.NumberFilter,inlinefilter:!1},reference:{resizable:!0,editable:!1,editor:TextEditor,filter:FilterRenderers.ReferenceFilterFn,inlinefilter:!1}};var tableName=_this.props.tableName?_this.props.tableName:_this.props.tablename||(_this.props.widgetProps&&_this.props.widgetProps.TableName?_this.props.widgetProps.TableName:""),scope="mmf";if(tableName&&tableName.indexOf("_")>-1){var tableNameParts=tableName.split("_");tableName=tableNameParts.splice(0,tableNameParts.length-1).join("_"),scope=tableNameParts.splice(tableNameParts.length-1).join("_")}var widgetProps=_this.props.widgetProps,groupFields=[];if(widgetProps&&widgetProps.GroupFields&&widgetProps.GroupFields.length>0)for(var groupFieldIndx in!0,widgetProps.GroupFields){var groupField=widgetProps.GroupFields[groupFieldIndx];groupFields.push({id:groupField.name,text:groupField.value})}else if(_this.props.groupfields){var inputGroupFields=_this.props.groupfields?"string"==typeof _this.props.groupfields?JSON.parse(_this.props.groupfields):_this.props.groupfields:[];if(inputGroupFields&&inputGroupFields.length>0)for(var _groupFieldIndx in!0,inputGroupFields){var _groupField=inputGroupFields[_groupFieldIndx];groupFields.push({id:_groupField.name,text:_groupField.value})}}_this.references={};var dataFilter=_this.props.filter?_this.props.filter:_this.props.widgetProps&&_this.props.widgetProps.Filter?_this.props.widgetProps.Filter:{};try{dataFilter="string"==typeof dataFilter?JSON.parse(dataFilter):dataFilter}catch(err){dataFilter={}}dataFilter&&Object.keys(dataFilter).length>0&&!dataFilter.where&&(dataFilter={where:dataFilter});var treeField=_this.props.treefield?_this.props.treefield:_this.props.widgetProps&&_this.props.widgetProps.TreeFilter?_this.props.widgetProps.TreeFilter:"",fields=_this.props.fields?_this.props.fields:_this.props.widgetProps&&_this.props.widgetProps.Fields?_this.props.widgetProps.Fields:[];try{fields="string"==typeof fields?JSON.parse(fields):fields}catch(err){}var viewName=_this.props.view?_this.props.view:_this.props.widgetProps&&_this.props.widgetProps.View?_this.props.widgetProps.View:"",compactMode=_this.props.compact+""!="false",headerRowHeight=_this.props.headerheight||35,headerFiltersHeight=compactMode?45:_this.props.headerfilterheight||45,rowHeight=compactMode?_this.props.rowheight||35:70;return _this.state={enableGroupFields:!0,availableGroupColumns:groupFields,selectedGroupColumns:[],listkey:Date.now(),fields:fields,groupByFields:[],expandedGroupIds:new Set,enableFilterRow:!0,filters:{},selectedRows:new Set,sortColumn:"",sortDirection:"",rows:[],dataFilter:dataFilter,tableName:tableName,scope:scope,viewName:viewName,isReady:!1,expandedRows:{},treeField:treeField,headerRowHeight:headerRowHeight,headerFiltersHeight:headerFiltersHeight,rowHeight:rowHeight},_this.onGridRowsUpdated=_this.onGridRowsUpdated.bind(_this),_this.onSortEnd=_this.onSortEnd.bind(_this),_this.getRowsWithReferenceDisplayNames=_this.getRowsWithReferenceDisplayNames.bind(_this),_this.onCellExpand=_this.onCellExpand.bind(_this),_this.getSubRowDetails=_this.getSubRowDetails.bind(_this),_this.updateSubRowDetails=_this.updateSubRowDetails.bind(_this),_this.updateWidgetProps=_this.updateWidgetProps.bind(_this),_this.filterData=debounce(function(){var _ref;$qry.getRecords(_this.state.scope&&"mmf"!=_this.state.scope?_this.state.tableName+"_"+_this.state.scope:_this.state.tableName,_this.state.dataFilter,_this.state.fieldCodes).then((_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(dataRecords){var rows,updateRows;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return rows=dataRecords&&dataRecords.length>0?dataRecords:[],_context.next=3,_this.getRowsWithReferenceDisplayNames(rows,_this.state.referenceColumns);case 3:updateRows=_context.sent,_this.setState({origRows:rows,rows:updateRows});case 5:case"end":return _context.stop()}},_callee,_this2)})),function(_x){return _ref.apply(this,arguments)}))},500),library.add(faBookOpen),$ele&&$ele.registerElement("SrsSortableList","studio","React"),_this}return _inherits(_SrsGrid_,_React$Component),_createClass(_SrsGrid_,[{key:"updateWidgetProps",value:function(widgetProps){if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);if(widgetProps.ActionClicked){var tableName="mmf"!=this.state.scope?this.state.tableName+"_"+this.state.scope:this.state.tableName;controlProps.control_action={actionClicked:widgetProps.ActionClicked.name,actionPayload:_extends({actionName:widgetProps.ActionClicked.name,clickts:widgetProps.ActionClicked.clickts,listName:this.props.controlname},widgetProps.ActionClicked.actionPayload,{record:widgetProps.ActionClicked.actionPayload?widgetProps.ActionClicked.actionPayload.row:{},tableName:widgetProps.ActionClicked.actionPayload.tableName||tableName,view:this.state.viewName})}}this.props.updateStore({updates:{controlProps:controlProps}})}}else this.props.widgetProps&&this.props.updateStore({updates:{widgetProps:widgetProps}})}},{key:"onGridRowsUpdated",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(_ref3){var rows,i,updateRows,fromRow=_ref3.fromRow,toRow=_ref3.toRow,updated=_ref3.updated;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:for(rows=this.state.rows.slice(),i=fromRow;i<=toRow;i++)rows[i]=_extends({},rows[i],updated);return _context2.next=4,this.getRowsWithReferenceDisplayNames(rows,this.state.referenceColumns);case 4:updateRows=_context2.sent,this.setState({rows:updateRows,origRows:rows}),this.props.onChange&&this.props.onChange(rows);case 7:case"end":return _context2.stop()}},_callee2,this)}));return function(_x2){return _ref2.apply(this,arguments)}}()},{key:"onCellExpand",value:function(args){return function(_ref4){var rows=_ref4.rows,expandedRows=_ref4.expandedRows,rowKey=args.rowData.uid,rowIndex=rows.indexOf(args.rowData),subRows=args.expandArgs.children;return expandedRows&&!expandedRows[rowKey]?(expandedRows[rowKey]=!0,updateSubRowDetails(subRows,args.rowData.treeDepth),rows.splice.apply(rows,[rowIndex+1,0].concat(_toConsumableArray(subRows)))):expandedRows[rowKey]&&(expandedRows[rowKey]=!1,rows.splice(rowIndex+1,subRows.length)),{expandedRows:expandedRows,rows:rows}}}},{key:"getSubRowDetails",value:function(expandedRows){var _this3=this;return function(rowItem){var isExpanded=!!expandedRows[rowItem.uid]&&expandedRows[rowItem.uid];return{group:rowItem.teamMembers&&rowItem.teamMembers.length>0,expanded:isExpanded,children:rowItem.children,field:_this3.props.treepivotfield,treeDepth:rowItem.treeDepth||0,siblingIndex:rowItem.siblingIndex,numberSiblings:rowItem.numberSiblings}}}},{key:"updateSubRowDetails",value:function(subRows,parentTreeDepth){var treeDepth=parentTreeDepth||0;subRows.forEach(function(sr,i){sr.treeDepth=treeDepth+1,sr.siblingIndex=i,sr.numberSiblings=subRows.length})}},{key:"componentDidMount",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var _ref6,fieldCodes,columns,availableGroupColumns,referenceColumns,dataRecords,rows,updateRows,shadowRoot;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!this.state.tableName){_context3.next=16;break}return _context3.next=3,this.getColumnsAndFieldCodes(this.state.tableName,this.state.scope,this.state.viewName,this.state.fields);case 3:return _ref6=_context3.sent,fieldCodes=_ref6.fieldCodes,columns=_ref6.columns,availableGroupColumns=_ref6.availableGroupColumns,referenceColumns=_ref6.referenceColumns,_context3.next=10,$qry.getRecords(this.state.scope&&"mmf"!=this.state.scope?this.state.tableName+"_"+this.state.scope:this.state.tableName,this.state.dataFilter,fieldCodes);case 10:return dataRecords=_context3.sent,rows=dataRecords&&dataRecords.length>0?dataRecords:[],_context3.next=14,this.getRowsWithReferenceDisplayNames(rows,referenceColumns);case 14:updateRows=_context3.sent,this.setState({origRows:rows,rows:updateRows,columns:columns,fieldCodes:fieldCodes,isReady:!0,availableGroupColumns:availableGroupColumns,referenceColumns:referenceColumns});case 16:(shadowRoot=this.props.shadow)&&1==$(".rdg-filter-row",shadowRoot).length&&$(".rdg-filter-row",shadowRoot)[0].addEventListener("click",function(e){setTimeout(function(){0==$(".bx--list-box__menu",shadowRoot).length&&$(".rdg-filter-row",shadowRoot).css("height",45)},30)});case 18:case"end":return _context3.stop()}},_callee3,this)}));return function(){return _ref5.apply(this,arguments)}}()},{key:"getRowsWithReferenceDisplayNames",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(inputRows,referenceColumns){var referenceData,inputRowsIndx,inputRow,referenceFieldNames,referenceFieldNameIndx,referenceFieldName,refColumnNames,refColumnNamesIndx,refColumnName,tableName,displayField,recordIds,recordData,recordDataIndx,recItem,outputRows,rowIndx,rowItem,_referenceFieldNames,_referenceFieldNameIndx,_referenceFieldName;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(referenceData={},!(inputRows&&inputRows.length>0&&referenceColumns&&Object.keys(referenceColumns).length>0)){_context4.next=27;break}for(inputRowsIndx in inputRows)for(referenceFieldNameIndx in inputRow=inputRows[inputRowsIndx],referenceFieldNames=Object.keys(referenceColumns))referenceFieldName=referenceFieldNames[referenceFieldNameIndx],referenceColumns[referenceFieldName]=referenceColumns[referenceFieldName]||{},referenceColumns[referenceFieldName].recordIds=referenceColumns[referenceFieldName].recordIds||[],referenceColumns[referenceFieldName].recordIds.push(inputRow[referenceFieldName]);refColumnNames=Object.keys(referenceColumns),_context4.t0=_regeneratorRuntime.keys(refColumnNames);case 5:if((_context4.t1=_context4.t0()).done){_context4.next=22;break}if(refColumnNamesIndx=_context4.t1.value,refColumnName=refColumnNames[refColumnNamesIndx],tableName=referenceColumns[refColumnName].table,displayField=referenceColumns[refColumnName].displayField,recordIds=referenceColumns[refColumnName].recordIds,!(tableName&&displayField&&recordIds&&recordIds.length>0)){_context4.next=17;break}return _context4.next=14,$qry.getRecords(tableName,{where:{uid:{inq:recordIds}}},["uid",displayField]);case 14:_context4.t2=_context4.sent,_context4.next=18;break;case 17:_context4.t2=null;case 18:if((recordData=_context4.t2)&&recordData.length>0)for(recordDataIndx in recordData)recItem=recordData[recordDataIndx],referenceData[refColumnName]=referenceData[refColumnName]||{},referenceData[refColumnName][recItem.uid]=referenceData[refColumnName][recItem.uid]||{},referenceData[refColumnName][recItem.uid]=recItem[displayField];_context4.next=5;break;case 22:for(rowIndx in outputRows=cloneDeep(inputRows))for(_referenceFieldNameIndx in rowItem=outputRows[rowIndx],_referenceFieldNames=Object.keys(referenceColumns))_referenceFieldName=_referenceFieldNames[_referenceFieldNameIndx],referenceData&&referenceData[_referenceFieldName]&&referenceData[_referenceFieldName][rowItem[_referenceFieldName]]&&(rowItem[_referenceFieldName]=referenceData[_referenceFieldName][rowItem[_referenceFieldName]]);return _context4.abrupt("return",outputRows);case 27:return _context4.abrupt("return",inputRows);case 28:case"end":return _context4.stop()}},_callee4,this)}));return function(_x3,_x4){return _ref7.apply(this,arguments)}}()},{key:"getColumnsAndFieldCodes",value:function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(tableName,scope,viewName,fields){var hideRowClick,selectRow,fieldCodes,columns,availableGroupColumns,referenceColumns,columnsInit,rowActions,recordDetailColumn,templateRecord,dataRecord,filteredData,fieldConfiguration,fieldNames,_loop,fieldNamesIndx,ActionItem,rowActionsColumn,allColumns,_this4=this;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(hideRowClick=this.props.norowclick?this.props.norowclick+""=="true":!(!this.props.widgetProps||!this.props.widgetProps.HideRowClickAction)&&this.props.widgetProps.HideRowClickAction+""=="true",selectRow=this.props.widgetProps?this.props.widgetProps.EnableRowSelect+""=="true":!(!this.props.rowselect||this.props.rowselect+""!="true"),fieldCodes=["uid"],columns=[],availableGroupColumns=[],referenceColumns={},columnsInit=selectRow?[SelectColumn]:[],rowActions=this.props.rowactions?this.props.rowactions:null)try{rowActions=JSON.parse(rowActions)}catch(err){}if(fields&&"string"==typeof fields)try{fields=JSON.parse(fields)}catch(err){fields=[{name:"uid",value:"uid",type:"string"}]}if(hideRowClick||((recordDetailColumn={key:"recordid",width:50,name:"",editable:!1,resizable:!1}).formatter=function(_ref9){var row=_ref9.row;return React.createElement(React.Fragment,null,React.createElement(FontAwesomeIcon,{style:{cursor:"pointer",height:20,width:20},icon:"book-open",onClick:function(e){if(_this4.props.onRowClick)_this4.props.onRowClick(row);else{var widgetProps=Object.assign({},_this4.props.widgetProps);widgetProps.ActionClicked={name:"open_record",actionPayload:{row:row,tableName:_this4.state.scope&&"mmf"!=_this4.state.scope?_this4.state.tableName+"_"+_this4.state.scope:_this4.state.tableName},clickts:Date.now()},_this4.updateWidgetProps(widgetProps)}}}))},columns.push(recordDetailColumn)),!(fields&&fields.length>0)){_context5.next=15;break}fields.map(function(fieldItem){var fieldActions=fieldItem.actions;if("uid"!=fieldItem.value&&fieldItem.value){var columnObj={key:fieldItem.value,name:fieldItem.name,editable:!0,resizable:!0};if(fieldItem.value&&fieldCodes.push(fieldItem.value),"Reference"==fieldItem.widgetType&&fieldItem.tableName&&fieldItem.displayField&&(referenceColumns[fieldItem.value]={table:fieldItem.tableName,displayField:fieldItem.displayField}),fieldItem.type||fieldItem.dataType){var fieldType=fieldItem.type||fieldItem.dataType,columnEditor=_this4.fieldTypes[fieldType]&&_this4.fieldTypes[fieldType].editor?_this4.fieldTypes[fieldType].editor:null,columnFilter=null;columnFilter="Reference"==fieldItem.widgetType&&fieldItem.tableName&&fieldItem.displayField?_this4.fieldTypes.reference.filter({tableName:fieldItem.tableName,displayField:fieldItem.displayField,secondaryDisplayField:fieldItem.secondaryDisplayField,filter:fieldItem.filter,searchfields:fieldItem.searchfields},_this4.props.shadow):_this4.fieldTypes[fieldType]&&_this4.fieldTypes[fieldType].filter?_this4.fieldTypes[fieldType].filter:columnFilter;var columnInlineFilter=_this4.fieldTypes[fieldType]&&_this4.fieldTypes[fieldType].inlinefilter;columnEditor&&(columnObj.editor=columnEditor),columnObj.sortable=_this4.fieldTypes[fieldType].sortable,columnFilter?(columnObj.filterRenderer=columnFilter,columnObj.formatter=function(_ref10){var row=_ref10.row,cellValue=row[fieldItem.value];"Reference"==fieldItem.widgetType&&fieldItem.tableName&&fieldItem.displayField&&(cellValue=React.createElement(React.Fragment,null,React.createElement("a",{style:{cursor:"pointer",color:"#009c9f",fontWeight:"bold"},onClick:function(e){var referenceRecordId="";if(_this4.state.origRows&&_this4.state.origRows){var rowItem=_this4.state.origRows.filter(function(item){return item.uid==row.uid});rowItem&&1==rowItem.length&&(referenceRecordId=(rowItem=rowItem[0])[fieldItem.value])}var referedRecord={uid:referenceRecordId,tableName:fieldItem.tableName,view:_this4.state.viewName};if(_this4.props.onRowClick)_this4.props.onRowClick(referedRecord);else{var widgetProps=Object.assign({},_this4.props.widgetProps);widgetProps.ActionClicked={name:"open_record",actionPayload:{row:referedRecord,tableName:fieldItem.tableName},clickts:Date.now()},_this4.updateWidgetProps(widgetProps)}}},row[fieldItem.value])));var cellActions=[];return fieldActions&&fieldActions.map(function(fieldAction){cellActions.push(React.createElement(ActionItem,{iconName:fieldAction.icon,onClick:function(e){if(_this4.props.onActionClick)_this4.props.onActionClick(row,fieldAction.name);else{var widgetProps=Object.assign({},_this4.props.widgetProps);widgetProps.ActionClicked={name:fieldAction.name,actionPayload:{row:row,tableName:_this4.state.scope&&"mmf"!=_this4.state.scope?_this4.state.tableName+"_"+_this4.state.scope:_this4.state.tableName},clickts:Date.now()},_this4.updateWidgetProps(widgetProps)}}}))}),React.createElement(React.Fragment,null,cellValue,React.createElement("div",{className:"cellactions",style:{float:"right"}},cellActions),columnInlineFilter&&columnInlineFilter+""=="true"?React.createElement(React.Fragment,null,React.createElement(Filter20,{className:"cellActions showFilter",onClick:function(e){return console.log("Match filter")}}),React.createElement(FilterRemove20,{className:"cellActions removeFilter",onClick:function(e){return console.log("Unmatch filter")}})):null)}):columnObj.formatter=function(_ref11){var row=_ref11.row,cellValue=row[fieldItem.value];return"Reference"==fieldItem.widgetType&&fieldItem.tableName&&fieldItem.displayField&&(cellValue=React.createElement(React.Fragment,null,React.createElement("a",{style:{cursor:"pointer",color:"#009c9f",fontWeight:"bold"},onClick:function(e){var referenceRecordId="";if(_this4.state.origRows&&_this4.state.origRows){var rowItem=_this4.state.origRows.filter(function(item){return item.uid==row.uid});rowItem&&1==rowItem.length&&(referenceRecordId=(rowItem=rowItem[0])[fieldItem.value])}var referedRecord={uid:referenceRecordId,tableName:fieldItem.tableName,view:_this4.state.viewName};if(_this4.props.onRowClick)_this4.props.onRowClick(referedRecord);else{var widgetProps=Object.assign({},_this4.props.widgetProps);widgetProps.ActionClicked={name:"open_record",actionPayload:{row:referedRecord,tableName:fieldItem.tableName},clickts:Date.now()},_this4.updateWidgetProps(widgetProps)}}},row[fieldItem.value]))),React.createElement(React.Fragment,null,cellValue)}}columns.push(columnObj)}}),_context5.next=22;break;case 15:return _context5.next=17,$qry.getRecords("FormTemplate_studio",{where:{and:[{ModelName:tableName,View:viewName||"Default",Scope:scope},{}]}},["uid","View","schema","listschema"]);case 17:(templateRecord=_context5.sent)&&templateRecord.length>0&&(dataRecord=templateRecord[0],templateRecord.length>1&&(filteredData=templateRecord.filter(function(dataItem){return dataItem.View==viewName}))&&1==filteredData.length&&(dataRecord=filteredData[0]),templateRecord=dataRecord),fieldConfiguration=templateRecord.listschema?templateRecord.listschema:templateRecord.schema?templateRecord.schema:{};try{fieldConfiguration=(fieldConfiguration="string"==typeof fieldConfiguration?JSON.parse(fieldConfiguration):fieldConfiguration).properties?fieldConfiguration.properties:""}catch(err){fieldConfiguration=""}if(fieldConfiguration)for(fieldNamesIndx in fieldNames=Object.keys(fieldConfiguration),_loop=function(fieldNamesIndx){var fieldName=fieldNames[fieldNamesIndx],fieldData=fieldConfiguration[fieldName];if(fieldData&&"uid"!=fieldData.code&&fieldData.code){var columnObj={key:fieldData.code,name:fieldData.label,editable:!0,resizable:!0};if(availableGroupColumns.push({text:fieldData.code,id:fieldData.code}),fieldData.code&&fieldCodes.push(fieldData.code),"Reference"==fieldData.widgetType&&fieldData.tableName&&fieldData.displayField&&(referenceColumns[fieldData.code]={table:fieldData.tableName,displayField:fieldData.displayField,uid:fieldData.uid}),fieldData.type||fieldData.dataType){var fieldType=fieldData.type||fieldData.dataType,columnEditor=_this4.fieldTypes[fieldType]&&_this4.fieldTypes[fieldType].editor?_this4.fieldTypes[fieldType].editor:null,columnFilter=null;columnFilter="Reference"==fieldData.widgetType&&fieldData.tableName&&fieldData.displayField?_this4.fieldTypes.reference.filter({tableName:fieldData.tableName,displayField:fieldData.displayField,secondaryDisplayField:fieldData.secondaryDisplayField,filter:fieldData.filter,searchfields:fieldData.searchfields},_this4.props.shadow):_this4.fieldTypes[fieldType]&&_this4.fieldTypes[fieldType].filter?_this4.fieldTypes[fieldType].filter:columnFilter,columnEditor&&(columnObj.editor=columnEditor),columnFilter?(columnObj.sortable=_this4.fieldTypes[fieldType].sortable,columnObj.filterRenderer=columnFilter,columnObj.formatter=function(_ref12){var row=_ref12.row,cellValue=row[fieldData.code];return"Reference"==fieldData.widgetType&&fieldData.tableName&&fieldData.displayField&&(cellValue=React.createElement(React.Fragment,null,React.createElement("a",{style:{cursor:"pointer",color:"#009c9f",fontWeight:"bold"},onClick:function(e){var referenceRecordId="";if(_this4.state.origRows&&_this4.state.origRows){var rowItem=_this4.state.origRows.filter(function(item){return item.uid==row.uid});rowItem&&1==rowItem.length&&(referenceRecordId=(rowItem=rowItem[0])[fieldData.code])}var referedRecord={uid:referenceRecordId,tableName:fieldData.tableName,view:_this4.state.viewName};if(_this4.props.onRowClick)_this4.props.onRowClick(referedRecord);else{var widgetProps=Object.assign({},_this4.props.widgetProps);widgetProps.ActionClicked={name:"open_record",actionPayload:{row:referedRecord,tableName:fieldData.tableName},clickts:Date.now()},_this4.updateWidgetProps(widgetProps)}}},row[fieldData.code]))),React.createElement(React.Fragment,null,cellValue,_this4.fieldTypes[fieldType].inlinefilter?React.createElement(React.Fragment,null,React.createElement(Filter20,{className:"cellActions showFilter",onClick:function(e){return console.log("Match filter")}}),React.createElement(FilterRemove20,{className:"cellActions removeFilter",onClick:function(e){return console.log("Unmatch filter")}})):null)}):columnObj.formatter=function(_ref13){var row=_ref13.row;return React.createElement(React.Fragment,null,row[fieldData.code])}}columns.push(columnObj)}},fieldNames)_loop(fieldNamesIndx);case 22:return ActionItem=RenderIcon(),rowActions&&rowActions.length>0&&((rowActionsColumn={key:"record_actions",width:50,name:"Action(s)",editable:!1,resizable:!1}).formatter=function(_ref14){var row=_ref14.row,actionItems=[];return rowActions.map(function(rowAction){actionItems.push(React.createElement(ActionItem,{iconName:rowAction.icon,onClick:function(e){if(_this4.props.onActionClick)_this4.props.onActionClick(row,rowAction.name);else{var widgetProps=Object.assign({},_this4.props.widgetProps);widgetProps.ActionClicked={name:rowAction.name,actionPayload:{row:row,tableName:_this4.state.scope&&"mmf"!=_this4.state.scope?_this4.state.tableName+"_"+_this4.state.scope:_this4.state.tableName},clickts:Date.now()},_this4.updateWidgetProps(widgetProps)}}}))}),React.createElement(React.Fragment,null,actionItems)},columns.push(rowActionsColumn)),allColumns=columnsInit.concat(columns),_context5.abrupt("return",{fieldCodes:fieldCodes,columns:allColumns,availableGroupColumns:availableGroupColumns,referenceColumns:referenceColumns});case 26:case"end":return _context5.stop()}},_callee5,this)}));return function(_x5,_x6,_x7,_x8){return _ref8.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref15=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(prevProps,prevState){var self,tableName,prevTableName,scope,viewName,prevViewName,_ref16,fieldCodes,columns,availableGroupColumns,dataRecords,rows,rowIds,rowIndx,row,treeDataFilter,childRecords,childRecordIndx,childRecord,dataRowId,treeFieldUID,updateRows,tableNameParts,dataFilter,treeField,sortedList,groupByFields,selectedItemIndx,selectedItem,currentFilter,newFilter,filterKeys,filterKeyIndx,filterKey,filterValue,_dataRecords,_rows,_rowIds,_rowIndx,_row,_treeDataFilter,_childRecords,_childRecordIndx,_childRecord,_dataRowId,_treeFieldUID;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(self=this,this.state.isReady){_context6.next=3;break}return _context6.abrupt("return");case 3:if(tableName=this.props.tableName?this.props.tableName:this.props.tablename||(this.props.widgetProps&&this.props.widgetProps.TableName?this.props.widgetProps.TableName:""),prevTableName=prevProps.tableName?prevProps.tableName:prevProps.tablename||(prevProps.widgetProps&&prevProps.widgetProps.TableName?prevProps.widgetProps.TableName:""),scope="mmf",viewName=this.props.view?this.props.view:this.props.widgetProps&&this.props.widgetProps.View?this.props.widgetProps.View:"",prevViewName=prevProps.view?prevProps.view:prevProps.widgetProps&&prevProps.widgetProps.View?prevProps.widgetProps.View:"",!tableName){_context6.next=43;break}if(prevState.tableName==this.state.tableName&&prevState.viewName==this.state.viewName){_context6.next=20;break}return _context6.next=12,this.getColumnsAndFieldCodes(this.state.tableName,this.state.scope,this.state.viewName,this.state.fields);case 12:_ref16=_context6.sent,fieldCodes=_ref16.fieldCodes,columns=_ref16.columns,availableGroupColumns=_ref16.availableGroupColumns,_ref16.referenceColumns,this.setState({fieldCodes:fieldCodes,columns:columns,availableGroupColumns:availableGroupColumns}),_context6.next=37;break;case 20:if(!(prevState.fieldCodes&&!_.isEqual(prevState.fieldCodes,this.state.fieldCodes)||prevState.columns&&!_.isEqual(prevState.columns,this.state.columns))){_context6.next=37;break}return _context6.next=23,$qry.getRecords(this.state.scope&&"mmf"!=this.state.scope?this.state.tableName+"_"+this.state.scope:this.state.tableName,this.state.dataFilter,this.state.fieldCodes);case 23:if(dataRecords=_context6.sent,rows=dataRecords&&dataRecords.length>0?dataRecords:[],!(this.props.treepivotfield&&this.state.treeField&&rows&&rows.length>0)){_context6.next=33;break}for(rowIndx in rowIds=[],rows)row=rows[rowIndx],rowIds.push(row.uid);return treeDataFilter={where:_defineProperty({},this.state.treeField,{inq:rowIds})},_context6.next=31,$qry.getRecords(this.state.scope&&"mmf"!=this.state.scope?this.state.tableName+"_"+this.state.scope:this.state.tableName,treeDataFilter,this.state.fieldCodes);case 31:if((childRecords=_context6.sent)&&childRecords.length>0)for(childRecordIndx in childRecords)childRecord=childRecords[childRecordIndx],dataRowId=childRecord.uid,treeFieldUID=childRecord[this.state.treeField],rows[treeFieldUID].children=rows[dataRowId].children||[],rows[treeFieldUID].children.push(childRecord);case 33:return _context6.next=35,this.getRowsWithReferenceDisplayNames(rows,this.state.referenceColumns);case 35:updateRows=_context6.sent,self.setState({origRows:rows,rows:updateRows});case 37:if(tableName==prevTableName&&viewName==prevViewName||(tableName&&tableName.indexOf("_")>-1&&(tableNameParts=tableName.split("_"),tableName=tableNameParts.splice(0,tableNameParts.length-1).join("_"),scope=tableNameParts.splice(tableNameParts.length-1).join("_")),this.setState({tableName:tableName,scope:scope,viewName:viewName,isReady:!0})),!_.isEqual(prevProps.filter,this.props.filter)||prevProps.widgetProps&&this.props.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&!_.isEqual(prevProps.widgetProps.Filter,this.props.widgetProps.Filter)){dataFilter=this.props.filter?this.props.filter:this.props.widgetProps&&this.props.widgetProps.Filter?this.props.widgetProps.Filter:{};try{dataFilter=dataFilter?"string"==typeof dataFilter?JSON.parse(dataFilter):dataFilter:{}}catch(err){}this.setState({dataFilter:dataFilter})}if((!_.isEqual(prevProps.treefield,this.props.treefield)||prevProps.widgetProps&&this.props.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&!_.isEqual(prevProps.widgetProps.TreeField,this.props.widgetProps.TreeField))&&(treeField=this.props.treefield?this.props.treefield:this.props.widgetProps&&this.props.widgetProps.TreeFilter?this.props.widgetProps.TreeFilter:"",this.setState({treeField:treeField})),_.isEqual(prevState.dataFilter,this.state.dataFilter)||this.filterData(),this.props.sortedlist&&this.props.sortedlist[this.state.listkey]&&(!prevProps.sortedlist||!prevProps.sortedlist[this.state.listkey]||!_.isEqual(prevProps.sortedlist,this.props.sortedlist)&&!_.isEqual(prevProps.sortedlist[this.state.listkey],this.props.sortedlist[this.state.listkey]))){if(sortedList=this.props.sortedlist[this.state.listkey],groupByFields=[],sortedList&&sortedList.length>0)for(selectedItemIndx in sortedList)selectedItem=sortedList[selectedItemIndx],groupByFields.push(selectedItem.id);this.setState({selectedGroupColumns:sortedList,groupByFields:groupByFields})}if(!_.isEqual(prevState.filters,this.state.filters)&&this.state.filters){if(currentFilter=(currentFilter=this.props.filter?"string"==typeof this.props.filter?JSON.parse(this.props.filter):this.props.filter:{}).where?currentFilter.where:currentFilter,newFilter={where:{}},filterKeys=Object.keys(this.state.filters),newFilter.where.and=[currentFilter],filterKeys)for(filterKeyIndx in filterKeys)filterKey=filterKeys[filterKeyIndx],(filterValue=this.state.filters[filterKey])&&("string"==typeof filterValue?newFilter.where.and.push(_defineProperty({},filterKey,{like:filterValue})):newFilter.where.and.push(_defineProperty({},filterKey,filterValue)));this.setState({dataFilter:newFilter})}case 43:if(prevProps.reload==this.props.reload){_context6.next=60;break}return _context6.next=46,$qry.getRecords(this.state.scope&&"mmf"!=this.state.scope?this.state.tableName+"_"+this.state.scope:this.state.tableName,this.state.dataFilter,this.state.fieldCodes);case 46:if(_dataRecords=_context6.sent,_rows=_dataRecords&&_dataRecords.length>0?_dataRecords:[],!(this.props.treepivotfield&&this.state.treeField&&_rows&&_rows.length>0)){_context6.next=56;break}for(_rowIndx in _rowIds=[],_rows)_row=_rows[_rowIndx],_rowIds.push(_row.uid);return _treeDataFilter={where:_defineProperty({},this.state.treeField,{inq:_rowIds})},_context6.next=54,$qry.getRecords(this.state.scope&&"mmf"!=this.state.scope?this.state.tableName+"_"+this.state.scope:this.state.tableName,_treeDataFilter,this.state.fieldCodes);case 54:if((_childRecords=_context6.sent)&&_childRecords.length>0)for(_childRecordIndx in _childRecords)_childRecord=_childRecords[_childRecordIndx],_dataRowId=_childRecord.uid,_treeFieldUID=_childRecord[this.state.treeField],_rows[_treeFieldUID].children=_rows[_dataRowId].children||[],_rows[_treeFieldUID].children.push(_childRecord);case 56:return _context6.next=58,this.getRowsWithReferenceDisplayNames(_rows,this.state.referenceColumns);case 58:_context6.sent,self.setState({reload:!this.state.reload});case 60:_.isEqual(prevState.rows,this.state.rows)||this.setState({reload:!this.state.reload});case 61:case"end":return _context6.stop()}},_callee6,this)}));return function(_x9,_x10){return _ref15.apply(this,arguments)}}()},{key:"onSortEnd",value:function(_ref17){var oldIndex=_ref17.oldIndex,newIndex=_ref17.newIndex;if(Array.isArray(this.state.selectedOptions)){var newOptions=[].concat(_toConsumableArray(this.state.selectedOptions));newOptions.splice(newIndex<0?newOptions.length+newIndex:newIndex,0,newOptions.splice(oldIndex,1)[0]),this.setState({selectedOptions:newOptions,expandedGroupIds:new Set})}}},{key:"render",value:function(){var _this5=this,options=[{id:"Filter",text:"Filter"}];this.state.enableGroupFields&&options.push({id:"Group",text:"Group"});var actionNames=this.props.actionNames?this.props.actionNames:this.props.actionnames||(this.props.widgetProps?this.props.widgetProps.ActionNames:[]);if(actionNames&&"string"==typeof actionNames)try{actionNames=JSON.parse(actionNames)}catch(err){actionNames=[]}var titlestyles=this.props.titlestyles,title=this.props.title?this.props.title:this.state.tableName+" List";try{titlestyles=(titlestyles=titlestyles&&"string"==typeof titlestyles?JSON.parse(titlestyles):titlestyles)||{textAlign:"left",fontWeight:"bold",fontSize:"large",fontFamily:"serif",letterSpacing:1.5,marginRight:20,paddingTop:10}}catch(err){}var gridTopStyles={height:"inherit",textAlign:"left"},gridStyles={minHeight:"100%"};return this.props.noscroll+""!="false"&&(gridStyles.height=this.state.rows.length*this.state.rowHeight+this.state.headerRowHeight+5+(this.state.enableFilterRow?this.state.headerFiltersHeight:0)+"px",gridTopStyles.overflow="auto"),this.state.isReady?React.createElement("div",{className:this.props.hideborder?"gridTopNoBorder":"gridTop",style:gridTopStyles},React.createElement("style",null,this.props.inlinestyles||""),this.props.label?React.createElement("label",{className:"bx--label",style:{display:this.props.visible+""=="true"?"block":"none"}},this.props.label):null,React.createElement("div",{style:{display:"flex",flexDirection:"row",placeContent:"flex-end",right:0,paddingLeft:5,paddingRight:5,position:"sticky",top:0,zIndex:100}},React.createElement(Tile,{style:{width:"100%",display:"flex",backgroundColor:"#e8edf5"}},this.props.showtitle+""!="false"||this.props.widgetProps&&this.props.widgetProps.ShowTitle+""=="true"?React.createElement("div",{style:titlestyles},title):null,actionNames&&actionNames.map(function(actionObj){var actionName=actionObj,actionPayload=null;return"object"==typeof actionObj&&(actionName=actionObj.name,actionPayload={value:actionObj.value,selectedRows:_this5.state.selectedRows}),React.createElement(Button,{style:{marginRight:10,float:"right",backgroundColor:"white",border:"1px solid #b610e0",color:"#3400ff"},size:"small",light:"true",onClick:function(){if(_this5.props.onActionPerformed)_this5.props.onActionPerformed(actionName,actionPayload);else{var widgetProps=Object.assign({},_this5.props.widgetProps);widgetProps.ActionClicked={name:actionName,actionPayload:actionPayload,clickts:Date.now()},_this5.updateWidgetProps(widgetProps)}}},actionName)}),this.state.showGroup?React.createElement("div",{style:{display:this.state.enableGroupFields?"contents":"none",flexDirection:"row",border:"1px solid #0f61fe",padding:1,overflow:"auto"}},React.createElement(MultiSelect.Filterable,{placeholder:"Filter Fields...",type:"inline",size:"sm",light:"true",label:"Fields",titleText:"Group",items:this.state.availableGroupColumns,itemToString:function(item){return item?item.text:""},initialSelectedItems:this.state.selectedGroupColumns,onChange:function(e){var groupByFields=[];if(e.selectedItems&&e.selectedItems.length>0)for(var selectedItemIndx in e.selectedItems){var selectedItem=e.selectedItems[selectedItemIndx];groupByFields.push(selectedItem.id)}_this5.setState({selectedGroupColumns:e.selectedItems,groupByFields:groupByFields})}}),this.state.selectedGroupColumns&&this.state.selectedGroupColumns.length>1?React.createElement("srs-sortable-list",{listkey:this.state.listkey,axis:"x",lockaxis:"x",inputdata:JSON.stringify(this.state.selectedGroupColumns)}):null):null,this.state.showFilter?React.createElement(Button,{style:{marginRight:10},size:"small",light:"true",onClick:function(){return _this5.setState({enableFilterRow:!_this5.state.enableFilterRow})}},this.state.enableFilterRow?"Hide":"Show"," Filter"):null,this.props.hidefilter+""!="true"?React.createElement(MultiSelect.Filterable,{placeholder:"Show/Hide",light:"true",items:options,itemToString:function(item){return item?item.text:""},onChange:function(e){var selectedItems=e.selectedItems,showGroup=!1,showFilter=!1;for(var selectedItemIndx in selectedItems){var selectedItem=selectedItems[selectedItemIndx];"Filter"==selectedItem.id&&(showFilter=!0),"Group"==selectedItem.id&&(showGroup=!0)}_this5.setState({showFilter:showFilter,showGroup:showGroup})}}):null)),this.state.columns?React.createElement(ReactDataGrid,{columns:this.state.columns,rows:this.state.rows,enableDragAndDrop:!0,headerRowHeight:this.state.headerRowHeight,rowHeight:this.state.rowHeight,rowGetter:function(i){return _this5.state.rows[i]},rowsCount:this.state.rows.length,onGridRowsUpdated:this.onGridRowsUpdated,enableCellSelect:!0,onRowsChange:function(updatedRows){_this5.setState({rows:updatedRows}),_this5.props.onChange&&_this5.props.onChange(updatedRows)},handleEditorRowChange:function(row,selected){return console.log(row)},onColumnResize:function(idx,width){},defaultColumnOptions:{resizable:!0},sortColumn:this.state.sortColumn,sortDirection:this.state.sortDirection,onSort:function(columnKey,direction){var rows=_this5.state.rows,nosortRows=_this5.state.nosortRows?_this5.state.nosortRows:_this5.state.rows,sortColumn=columnKey,sortDirection=direction;rows="NONE"!=sortDirection?(rows=cloneDeep(_this5.state.rows)).sort(function(a,b){return a[sortColumn]<b[sortColumn]?"ASC"==sortDirection?-1:1:a[sortColumn]>b[sortColumn]?"ASC"==sortDirection?1:-1:0}):_this5.state.nosortRows?_this5.state.nosortRows:_this5.state.rows,_this5.setState({rows:rows,nosortRows:nosortRows,sortColumn:columnKey,sortDirection:direction})},rowKeyGetter:function(row){return row.uid},selectedRows:this.state.selectedRows,onSelectedRowsChange:function(rows){_this5.setState({selectedRows:rows})},enableFilterRow:this.state.enableFilterRow,filters:this.state.filters,onFiltersChange:function(filters){_this5.setState({filters:filters})},groupBy:this.state.groupByFields,rowGrouper:_.groupBy,expandedGroupIds:this.state.expandedGroupIds,onExpandedGroupIdsChange:function(groupIds){return _this5.setState({expandedGroupIds:groupIds})},style:gridStyles}):null):null}}]),_SrsGrid_}(React.Component),_export("SrsGrid",SrsGrid=function(props){return _SrsGrid_}),_export("SrsGrid",SrsGrid)}}}),System.register("component/studio/SrsFile/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/slicedToArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/taggedTemplateLiteral.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","graphql-tag","react-apollo","apollo-client","apollo-upload-client","apollo-cache-inmemory","carbon-components-react","lodash.clonedeep","@carbon/icons-react/lib/close/20"],function(_export,_context3){"use strict";var _slicedToArray,_taggedTemplateLiteral,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,gql,Mutation,ApolloProvider,ApolloClient,apolloUploadClient,InMemoryCache,FileUploader,Close20,_templateObject,createUploadLink,apolloClient,_SrsFile_,SrsFile;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs){_slicedToArray=_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs){_taggedTemplateLiteral=_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_graphqlTag){gql=_graphqlTag.default},function(_reactApollo){Mutation=_reactApollo.Mutation,ApolloProvider=_reactApollo.ApolloProvider},function(_apolloClient){ApolloClient=_apolloClient.ApolloClient},function(_apolloUploadClient){apolloUploadClient=_apolloUploadClient.default},function(_apolloCacheInmemory){InMemoryCache=_apolloCacheInmemory.InMemoryCache},function(_carbonComponentsReact){FileUploader=_carbonComponentsReact.FileUploader},function(_lodashClonedeep){_lodashClonedeep.default},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default}],execute:function(){_templateObject=_taggedTemplateLiteral(["\n                    mutation($file: Upload!) {\n                        singleUpload(file: $file) {\n                        id\n                        filename\n                        mimetype\n                        path\n                        }\n                    }\n                    "],["\n                    mutation($file: Upload!) {\n                        singleUpload(file: $file) {\n                        id\n                        filename\n                        mimetype\n                        path\n                        }\n                    }\n                    "]),createUploadLink=apolloUploadClient.createUploadLink,apolloClient=function(){var cache=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ApolloClient({ssrMode:"undefined"!=typeof window,cache:(new InMemoryCache).restore(cache),link:createUploadLink({uri:"/graphql"})})}(),_SrsFile_=function(_React$Component){function _SrsFile_(props){_classCallCheck(this,_SrsFile_);var _this=_possibleConstructorReturn(this,(_SrsFile_.__proto__||Object.getPrototypeOf(_SrsFile_)).call(this,props)),label=_this.props.label?_this.props.label:_this.props.widgetProps?_this.props.widgetProps.Label:"Add files",uploadedFileId=_this.props.uploadedfileid?_this.props.uploadedfileid:_this.props.widgetProps?_this.props.widgetProps.UploadedFileId:"",defaultFileId=_this.props.defaultfileid?_this.props.defaultfileid:_this.props.widgetProps?_this.props.widgetProps.DefaultFileId:"",showImagePreview=_this.props.showimage+""=="true"||!!_this.props.widgetProps&&_this.props.widgetProps.ShowImagePreview+""=="true";return _this.state={label:label,uploadedFileId:uploadedFileId,defaultFileId:defaultFileId,showImagePreview:showImagePreview,reload:!1},_this}return _inherits(_SrsFile_,_React$Component),_createClass(_SrsFile_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var documentRecord,fileName;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,$qry.getRecords("MetaDocument",{where:{uid:this.state.defaultFileId}},["Name"]);case 2:(documentRecord=_context.sent)&&documentRecord.length>0&&(fileName=documentRecord[0].Name,this.setState({defaultFileName:fileName}));case 4:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this;return React.createElement(React.Fragment,null,React.createElement("style",null,this.props.inlinestyles||""),React.createElement(ApolloProvider,{client:apolloClient},React.createElement(Mutation,{mutation:gql(_templateObject)},function(mutate){return React.createElement("div",null,React.createElement(FileUploader,{buttonLabel:_this2.state.label,filenameStatus:"edit",accept:_this2.props.filetypes?_this2.props.filetypes.split(","):[".jpg",".png",".pdf",".doc",".docx"],name:"",size:"small",onChange:(_ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(_ref3){var result,controlProps,widgetProps,_ref3$target=_ref3.target,validity=_ref3$target.validity,file=_slicedToArray(_ref3$target.files,1)[0];return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!validity.valid){_context2.next=5;break}return _context2.next=3,mutate({variables:{file:file}});case 3:(result=_context2.sent)&&result.data&&result.data.singleUpload&&result.data.singleUpload.id&&(_this2.props.isformcontrol+""=="true"?_this2.props.controlname&&((controlProps=Object.assign({},_this2.props.controlProps))[_this2.props.controlname]=result.data.singleUpload.id,_this2.props.updateStore({updates:{controlProps:controlProps}})):_this2.props.widgetProps&&((widgetProps=Object.assign({},_this2.props.widgetProps)).UploadedFileId=result.data.singleUpload.id,_this2.props.updateStore({updates:{widgetProps:widgetProps}})),_this2.setState({uploadedFileId:result.data.singleUpload.id}),_this2.props.onChange&&_this2.state.defaultFileId!=result.data.singleUpload.id&&(result.data.singleUpload.id?_this2.props.onChange(result.data.singleUpload.id):_this2.props.onChange("")));case 5:case"end":return _context2.stop()}},_callee2,_this2)})),function(_x2){return _ref2.apply(this,arguments)})}),_this2.state.showImagePreview?React.createElement("img",{style:{height:200,width:200},src:_this2.state.uploadedFileId?"/file/"+_this2.state.uploadedFileId:"/file/"+_this2.state.defaultFileId}):React.createElement("div",null,React.createElement("div",{class:"bx--file-container"},React.createElement("span",{class:"bx--file__selected-file bx--file__selected-file--sm"},React.createElement("a",{class:"bx--file-filename",href:_this2.state.uploadedFileId?"/file/"+_this2.state.uploadedFileId:"/file/"+_this2.state.defaultFileId},_this2.state.defaultFileName),React.createElement("span",{class:"bx--file__state-container"},React.createElement(Close20,{onClick:function(e){console.log("clicked on close btn!")}}))))));var _ref2})))}}]),_SrsFile_}(React.Component),_export("SrsFile",SrsFile=function(props){return _SrsFile_}),_export("SrsFile",SrsFile)}}}),System.register("component/studio/SrsDynamicChoice/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context3){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,_SrsDynamicChoice_,SrsDynamicChoice;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem}],execute:function(){_SrsDynamicChoice_=function(_React$Component){function _SrsDynamicChoice_(props){_classCallCheck(this,_SrsDynamicChoice_);var _this=_possibleConstructorReturn(this,(_SrsDynamicChoice_.__proto__||Object.getPrototypeOf(_SrsDynamicChoice_)).call(this,props));return _this.state={tableName:_this.props.table,labelFieldName:_this.props.labelfield,valueFieldName:_this.props.valuefield,choiceList:[],key:Date.now()},_this}return _inherits(_SrsDynamicChoice_,_React$Component),_createClass(_SrsDynamicChoice_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var labelFieldName,valueFieldName,choiceList,filter,records,recordsIndx,record;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(labelFieldName=this.state.labelFieldName,valueFieldName=this.state.valueFieldName?this.state.valueFieldName:this.state.labelFieldName,choiceList=[],filter={},this.props.filter)try{filter=(filter="string"==typeof this.props.filter?JSON.parse(this.props.filter):this.props.filter).where?filter:{where:filter}}catch(err){}return _context.next=7,$qry.getRecords(this.state.tableName,filter,[labelFieldName,valueFieldName]);case 7:if((records=_context.sent)&&records.length>0){for(recordsIndx in records)record=records[recordsIndx],choiceList.push({name:record[labelFieldName],value:record[valueFieldName]});this.setState({choiceList:choiceList,key:Date.now()})}case 9:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps){var choiceList,labelFieldName,valueFieldName,filter,records,recordsIndx,record;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(choiceList=[],labelFieldName=this.state.labelFieldName,valueFieldName=this.state.valueFieldName?this.state.valueFieldName:this.state.labelFieldName,prevProps.filter==this.props.filter){_context2.next=10;break}if(filter={},this.props.filter)try{filter=(filter="string"==typeof this.props.filter?JSON.parse(this.props.filter):this.props.filter).where?filter:{where:filter}}catch(err){}return _context2.next=8,$qry.getRecords(this.state.tableName,filter,[labelFieldName,valueFieldName]);case 8:if((records=_context2.sent)&&records.length>0){for(recordsIndx in records)record=records[recordsIndx],choiceList.push({name:record[labelFieldName],value:record[valueFieldName]});this.setState({choiceList:choiceList,key:Date.now()})}case 10:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this,choices=[React.createElement(SelectItem,{value:"",text:"Choose an item"})];this.state.choiceList.map(function(choiceItem){choices.push(React.createElement(SelectItem,{value:choiceItem.value,text:choiceItem.name}))});var additionalProps={};this.props.iscellcontrol+""=="true"&&(additionalProps.hideLabel=!0);var labelText=this.props.label;return labelText=this.props.required+""=="true"?labelText+" *":labelText,React.createElement(React.Fragment,null,React.createElement("style",null,this.props.inlinestyles||""),React.createElement(Select,_extends({key:this.state.key,defaultValue:this.props.defaultValue||this.props.defaultvalue,light:"true",labelText:labelText},additionalProps,{onChange:function(ev){if(_this2.props.isformcontrol+""=="true"){if(_this2.props.controlname){var controlProps=Object.assign({},_this2.props.controlProps);controlProps[_this2.props.controlname]=ev.target.value,_this2.props.updateStore({updates:{controlProps:controlProps}})}}else if(_this2.props.iscellcontrol+""=="true"){var controlId=_this2.props.controlid.replaceAll("_dot_","."),controlIdParts=(controlId=controlId.replace("cell_","")).split("."),formControlName=controlIdParts[0],rowIndx=controlIdParts[1],columnName=controlIdParts[2],cellName=columnName.split("_")[0],parentWidgetId=columnName.split("_")[1],controls=_this2.props.controls,formControlKey=_this2.props.pageid+_this2.props.pagesuffix+"_"+parentWidgetId;controls[formControlKey]=controls[formControlKey]||{},controls[formControlKey][formControlName]=controls[formControlKey][formControlName]||[],controls[formControlKey][formControlName][rowIndx]=controls[formControlKey][formControlName][rowIndx]||{},controls[formControlKey][formControlName][rowIndx][cellName]=ev.target.value,controls[formControlKey][formControlName][rowIndx].__isCellEdited__=Date.now(),_this2.props.updateStore({updates:{controls:controls}})}else _this2.props.onChange&&_this2.props.onChange(ev)}}),choices))}}]),_SrsDynamicChoice_}(React.Component),_export("SrsDynamicChoice",SrsDynamicChoice=function(props){return _SrsDynamicChoice_}),_export("SrsDynamicChoice",SrsDynamicChoice)}}}),System.register("component/studio/SrsArray/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@jsonforms/material-renderers"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MaterialArrayControlRenderer,_SrsArray_,SrsArray;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_jsonformsMaterialRenderers){MaterialArrayControlRenderer=_jsonformsMaterialRenderers.MaterialArrayControlRenderer}],execute:function(){_SrsArray_=function(_React$Component){function _SrsArray_(props){return _classCallCheck(this,_SrsArray_),_possibleConstructorReturn(this,(_SrsArray_.__proto__||Object.getPrototypeOf(_SrsArray_)).call(this,props))}return _inherits(_SrsArray_,_React$Component),_createClass(_SrsArray_,[{key:"render",value:function(){console.log(this.props);return React.createElement("div",null,React.createElement("h2",null,"Hello World!"),React.createElement(MaterialArrayControlRenderer,{uischema:{type:"VerticalLayout",elements:[{type:"Control",scope:"#/properties/comments"}]},schema:{type:"object",properties:{comments:{type:"array",items:{type:"object",properties:{date:{type:"string",format:"date"},message:{type:"string",maxLength:5},enum:{type:"string",enum:["foo","bar"]}}}}}},data:{comments:[{date:"2001-09-10",message:"This is an example message",enum:"foo"},{}]},path:"/properties/form_list"}))}}]),_SrsArray_}(React.Component),_export("SrsArray",SrsArray=function(props){return _SrsArray_}),_export("SrsArray",SrsArray)}}}),System.register("component/studio/SrsCodeEditor/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","lodash.debounce","lodash"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MonacoEditor,debounce,_,_SrsCodeEditor_,SrsCodeEditor;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsCodeEditor_=function(_React$Component){function _SrsCodeEditor_(props){_classCallCheck(this,_SrsCodeEditor_);var _this=_possibleConstructorReturn(this,(_SrsCodeEditor_.__proto__||Object.getPrototypeOf(_SrsCodeEditor_)).call(this,props));_this.topElement=React.createRef(),_this.editorDidMount=_this.editorDidMount.bind(_this),_this.restoreEditor=_this.restoreEditor.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.codeChangedDebounce=debounce(function(newVal,e){_this.codeChanged(newVal,e)},10),_this.editor=null,_this.editorModel=null,_this.editorModelViewState=null,_this.editorContent=null;var editorCode=_this.props.editorCode||_this.props.editorcode;return editorCode=editorCode||(_this.props.widgetProps&&_this.props.widgetProps.value?_this.props.widgetProps.value:_this.props.widgetProps&&_this.props.widgetProps.DefaultValue?_this.props.widgetProps.DefaultValue:""),_this.state={code:editorCode,position:{lineNumber:1,column:1},editorKey:Date.now()},_this.editorCode=editorCode,_this}return _inherits(_SrsCodeEditor_,_React$Component),_createClass(_SrsCodeEditor_,[{key:"componentDidMount",value:function(){}},{key:"shouldComponentUpdate",value:function(nextProps,nextState){return this.editorCode!=nextProps.editorcode}},{key:"componentDidUpdate",value:function(prevProps,prevState){if(prevProps.hide!=this.props.hide&&this.setState({editorKey:Date.now()}),prevProps.editorCode!=this.props.editorCode||prevProps.editorcode!=this.props.editorcode||this.props.isformcontrol+""=="true"&&prevProps.controlProps&&this.props.controlProps&&!_.isEqual(prevProps.controlProps,this.props.controlProps)||this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)){var incomingCode=this.props.editorCode||this.props.editorcode;(incomingCode=this.props.isformcontrol+""=="true"?this.props.controlProps[this.props.controlname]:incomingCode||(this.props.widgetProps&&this.props.widgetProps.value?this.props.widgetProps.value:this.props.widgetProps&&this.props.widgetProps.DefaultValue?this.props.widgetProps.DefaultValue:""))!=this.editorCode&&(this.editorCode=incomingCode,this.setState({code:incomingCode}))}}},{key:"codeChanged",value:function(newValue,e){if(this.editorCode=newValue,this.props.isformcontrol+""=="true"&&this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);controlProps[this.props.controlname]=newValue,this.props.updateStore({updates:{controlProps:controlProps}})}if((1==this.props.preview||"true"==this.props.preview)&&this.props.widgetProps){var widgetProps=Object.assign({},this.props.widgetProps);widgetProps.value=newValue,this.props.updateStore({updates:{widgetProps:widgetProps}})}if(this.props.codeChanged&&this.props.codeChanged(newValue),this.props.varname){var editorCodes=Object.assign({},this.props.editorCodes);editorCodes[this.props.varname]=newValue,this.props.updateStore({updates:{editorCodes:editorCodes}})}var position=this.editor.getPosition();this.setState({code:newValue,position:position})}},{key:"editorDidMount",value:function(editor,monaco){monaco.languages.registerCompletionItemProvider("javascript",{provideCompletionItems:function(model,position){return[{label:'let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',documentation:"Utility to get the records"},{label:'let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',documentation:"Utility to get the record count of the matching filter"},{label:'createRecord = await $qry.createRecord("[model]_[scope]", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - createRecord = await $qry.createRecord("[model]_[scope]", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to create a new record"},{label:'updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to update an existing record"},{label:'deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',documentation:"Utility to delete a record"},{label:'deleteRecords = await $qry.deleteRecords("[model]_[scope]", "{uid: {"inq": ["id1", "id"]}}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "filter")',documentation:"Utility to delete multiple records"},{label:'tableDelete = await $qry._run(`mutation($inputData:[Table]DestroyAllInput!) {\n\t\t[Table]DestroyAll(input:$inputData){\n\t\t\tobj\n\t\t}\t}`, { "inputData": { "where": { "[FieldName]":"${varname}"} } },\n\t\t"data.[Table]DestroyAll.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-delete",documentation:"Delete query to remove the records from the table"},{label:'$qry.run("{queryName}", "{variables}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'await $qry.run("{queryName}", "{variables}")',documentation:"Utility to mutate/fetch data from server using GraphQL"},{label:'tableRead = await $qry._run(`query($input:JSON){\n\t[Table]{\n\t\t[Table]Find(filter: $input) @_(get: "edges"){\n\t\t\tedges @_(keyBy: "node.uid", mapValues:"node"){\n\t\t\t\tnode{\n\t\t\t\t\tuid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}`, { "input": { "where": { "uid": "${varname}" } } },\n"data.[Table].[Table]Find");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-read",documentation:"Open query to get the data from the table"},{label:'tableUpsert = await $qry._run(`mutation($input: [Table]UpsertWithWhereInput!){\n\t[Table]UpsertWithWhere(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "where": { "uid": "${varname}" }, "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]UpsertWithWhere.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-upsert",documentation:"Query to update the data in the table"},{label:'tableCreate = await $qry._run(`mutation($input: [Table]CreateInput!){\n\t[Table]Create(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]Create.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-create",documentation:"Query to create the record with the data"}]}});this.editor=editor,this.monaco=monaco,this.editorModel=editor.getModel(),this.restoreEditor()}},{key:"restoreEditor",value:function(){var self=this,saveEditorValue=this.editor.setValue.bind(this.editor);this.editor.setValue=function(val){saveEditorValue(val),self.state.position?(self.editor.setPosition(self.state.position),self.editor.revealLine(self.state.position.lineNumber),self.editor.focus()):(self.editor.setPosition({lineNumber:1,column:1}),self.editor.revealLine(1),self.editor.revealLineInCenter(15),self.editor.focus())};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:this.editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(this.editor._themeService._styleElement),this.editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"render",value:function(){var requireConfig={url:"/thirdpartylib/require.js",paths:{vs:window.noCDN?"/thirdpartylib/monaco/min/vs":"https://unpkg.com/srstecdn@latest/monaco/min/vs"},waitSeconds:200},editor=this.props.hide+""=="true"?null:React.createElement(MonacoEditor,{key:this.state.editorKey,width:"100%",height:"100%",language:this.props.lanugage?this.props.language:"javascript",theme:"vs-dark",value:this.editorCode,defaultValue:this.editorCode,options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1},onChange:this.codeChanged,requireConfig:requireConfig,editorWillMount:this.editorWillMount,editorDidMount:this.editorDidMount});return React.createElement("div",{className:"top-level",style:{height:this.props.hide+""=="true"?0:this.props.editorheight||this.props.editorHeight||"inherit"},ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ErrorBoundary/Style.css"); @import url("component/studio/SrsteeIDE/Style.css"); @import url("/thirdpartylib/monaco/min/vs/editor/editor.main.css")'),React.createElement("style",null,this.props.inlinestyles||""),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsMode.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/lib/typescriptServices.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsWorker.js"}),this.props.showtitle?React.createElement("label",{className:"bx--label",style:{display:this.props.visible+""=="true"?"block":"none"}},this.props.label):null,editor)}}]),_SrsCodeEditor_}(React.Component),_export("SrsCodeEditor",SrsCodeEditor=function(props){return _SrsCodeEditor_}),_export("SrsCodeEditor",SrsCodeEditor)}}}),System.register("client/script/studio/FormWidgets.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/defineProperty.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","react","carbon-components-react","component/studio/SrsGrid/Definition.js","component/studio/SrsFile/Definition.js","component/studio/SrsReference/Definition.js","component/studio/RenderComponent/Definition.js","component/studio/SrsDynamicChoice/Definition.js","component/studio/SrsArray/Definition.js","component/studio/SrsCodeEditor/Definition.js","@jsonforms/react","@jsonforms/material-renderers","@jsonforms/material-renderers/lib/layouts/MaterialCategorizationStepperLayout.js","@material-ui/core","@carbon/icons-react/lib/renew/16","@material-ui/icons/ExpandMore"],function(_export,_context3){"use strict";var _defineProperty,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,_extends,React,TextInput,Button,DatePicker,DatePickerInput,SelectItem,TimePicker,TimePickerSelect,SrsGrid,RenderComponent,JsonFormsStateProvider,MaterialLayoutRenderer,MaterialArrayControlRenderer,MaterialVerticalLayout,MaterialHorizontalLayout,MaterialCategorizationLayout,MaterialCategorizationStepperLayout,Accordion,AccordionDetails,AccordionSummary,Typography,Reload16,ExpandMoreIcon,GroupRenderer,HorizontalLayoutRenderer,VerticalLayoutRenderer,TabsRenderer,StepperRenderer,StringControl,NumberControl,ListControl,EmbeddedListControl,RelatedListControl,DateControl,DateTimeControl,ActionsControl,LabelControl,CustomControl,CustomComponentControl;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs){_defineProperty=_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,Button=_carbonComponentsReact.Button,_carbonComponentsReact.Tile,_carbonComponentsReact.NumberInput,DatePicker=_carbonComponentsReact.DatePicker,DatePickerInput=_carbonComponentsReact.DatePickerInput,_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TimePicker=_carbonComponentsReact.TimePicker,TimePickerSelect=_carbonComponentsReact.TimePickerSelect},function(_componentStudioSrsGridDefinitionJs){SrsGrid=_componentStudioSrsGridDefinitionJs.SrsGrid},function(_componentStudioSrsFileDefinitionJs){_componentStudioSrsFileDefinitionJs.SrsFile},function(_componentStudioSrsReferenceDefinitionJs){_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_componentStudioRenderComponentDefinitionJs){RenderComponent=_componentStudioRenderComponentDefinitionJs.RenderComponent},function(_componentStudioSrsDynamicChoiceDefinitionJs){_componentStudioSrsDynamicChoiceDefinitionJs.SrsDynamicChoice},function(_componentStudioSrsArrayDefinitionJs){_componentStudioSrsArrayDefinitionJs.SrsArray},function(_componentStudioSrsCodeEditorDefinitionJs){_componentStudioSrsCodeEditorDefinitionJs.SrsCodeEditor},function(_jsonformsReact){JsonFormsStateProvider=_jsonformsReact.JsonFormsStateProvider,_jsonformsReact.useJsonForms,_jsonformsReact.ctxDispatchToControlProps,_jsonformsReact.withJsonFormsLayoutProps},function(_jsonformsMaterialRenderers){MaterialLayoutRenderer=_jsonformsMaterialRenderers.MaterialLayoutRenderer,MaterialArrayControlRenderer=_jsonformsMaterialRenderers.MaterialArrayControlRenderer,_jsonformsMaterialRenderers.MaterialArrayLayoutRenderer,_jsonformsMaterialRenderers.MaterialArrayLayout,MaterialVerticalLayout=_jsonformsMaterialRenderers.MaterialVerticalLayout,MaterialHorizontalLayout=_jsonformsMaterialRenderers.MaterialHorizontalLayout,MaterialCategorizationLayout=_jsonformsMaterialRenderers.MaterialCategorizationLayout},function(_jsonformsMaterialRenderersLibLayoutsMaterialCategorizationStepperLayoutJs){MaterialCategorizationStepperLayout=_jsonformsMaterialRenderersLibLayoutsMaterialCategorizationStepperLayoutJs.default},function(_materialUiCore){Accordion=_materialUiCore.Accordion,AccordionDetails=_materialUiCore.AccordionDetails,AccordionSummary=_materialUiCore.AccordionSummary,_materialUiCore.Hidden,Typography=_materialUiCore.Typography},function(_carbonIconsReactLibRenew){Reload16=_carbonIconsReactLibRenew.default},function(_materialUiIconsExpandMore){ExpandMoreIcon=_materialUiIconsExpandMore.default}],execute:function(){GroupRenderer=function(props){var uischema=props.uischema,schema=props.schema,path=props.path,visible=props.visible,renderers=props.renderers,description=props.description,layoutProps={elements:uischema.elements,schema:schema,path:path,direction:"column",visible:visible,uischema:uischema,renderers:renderers},formContext=uischema.context?uischema.context:{data:{},meta:{}},dynamicFormContext=description?JSON.parse(description):{data:{},meta:{}};formContext.data=_extends({},formContext.data,dynamicFormContext.data),formContext.meta=_extends({},formContext.meta,dynamicFormContext.meta);var inlinestyles=uischema&&uischema.inlinestyles;inlinestyles=inlinestyles||formContext&&formContext.theme&&formContext.theme.Group||"";var metaData=formContext.meta,fieldName=uischema.code,styles={};return(fieldName&&metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":!props||!props.hasOwnProperty("visible")||props.visible+""=="true")||(styles.display="none"),React.createElement("div",{className:"groupTop",style:styles},React.createElement("style",null,inlinestyles),React.createElement(Accordion,{defaultExpanded:!0},React.createElement(AccordionSummary,{expandIcon:React.createElement(ExpandMoreIcon,null)},React.createElement(Typography,null,uischema.label)),React.createElement(AccordionDetails,null,React.createElement(MaterialLayoutRenderer,layoutProps))))},HorizontalLayoutRenderer=function(props){var uischema=props.uischema,schema=props.schema,path=props.path,visible=props.visible,renderers=props.renderers,description=props.description,layoutProps={elements:uischema.elements,schema:schema,path:path,direction:"column",visible:visible,uischema:uischema,renderers:renderers},formContext=uischema.context?uischema.context:{data:{},meta:{}},dynamicFormContext=description?JSON.parse(description):{data:{},meta:{}};formContext.data=_extends({},formContext.data,dynamicFormContext.data),formContext.meta=_extends({},formContext.meta,dynamicFormContext.meta);var inlinestyles=uischema&&uischema.inlinestyles;inlinestyles=inlinestyles||formContext&&formContext.theme&&formContext.theme.HorizontalLayout||"";var metaData=formContext.meta,fieldName=uischema.code,styles={};return(fieldName&&metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":!props||!props.hasOwnProperty("visible")||props.visible+""=="true")||(styles.display="none"),React.createElement("div",{className:"horizontalTop",style:styles},React.createElement("style",null,inlinestyles),React.createElement(MaterialHorizontalLayout,layoutProps))},VerticalLayoutRenderer=function(props){var uischema=props.uischema,schema=props.schema,path=props.path,visible=props.visible,renderers=props.renderers,description=props.description,layoutProps={elements:uischema.elements,schema:schema,path:path,direction:"column",visible:visible,uischema:uischema,renderers:renderers},formContext=uischema.context?uischema.context:{data:{},meta:{}},dynamicFormContext=description?JSON.parse(description):{data:{},meta:{}};formContext.data=_extends({},formContext.data,dynamicFormContext.data),formContext.meta=_extends({},formContext.meta,dynamicFormContext.meta);var inlinestyles=uischema&&uischema.inlinestyles;inlinestyles=inlinestyles||formContext&&formContext.theme&&formContext.theme.VerticalLayout||"";var metaData=formContext.meta,fieldName=uischema.code,styles={};return(fieldName&&metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":!props||!props.hasOwnProperty("visible")||props.visible+""=="true")||(styles.display="none"),React.createElement("div",{className:"verticalTop",style:styles},React.createElement("style",null,inlinestyles),React.createElement(MaterialVerticalLayout,layoutProps))},TabsRenderer=function(props){var uischema=props.uischema,schema=props.schema,path=props.path,visible=props.visible,renderers=props.renderers,description=props.description,layoutProps={elements:uischema.elements,schema:schema,path:path,direction:"column",visible:visible,uischema:uischema,renderers:renderers},formContext=uischema.context?uischema.context:{data:{},meta:{}},dynamicFormContext=description?JSON.parse(description):{data:{},meta:{}};formContext.data=_extends({},formContext.data,dynamicFormContext.data),formContext.meta=_extends({},formContext.meta,dynamicFormContext.meta);var inlinestyles=uischema&&uischema.inlinestyles;inlinestyles=inlinestyles||formContext&&formContext.theme&&formContext.theme.TabsLayout||"";var metaData=formContext.meta,fieldName=uischema.code,styles={};return(fieldName&&metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":!props||!props.hasOwnProperty("visible")||props.visible+""=="true")||(styles.display="none"),React.createElement("div",{className:"tapsTop",style:styles},React.createElement("style",null,inlinestyles),React.createElement(MaterialCategorizationLayout,layoutProps))},StepperRenderer=function(props){var uischema=props.uischema,schema=props.schema,path=props.path,visible=props.visible,renderers=props.renderers,description=props.description,layoutProps={elements:uischema.elements,schema:schema,path:path,direction:"column",visible:visible,uischema:uischema,renderers:renderers},formContext=uischema.context?uischema.context:{data:{},meta:{}},dynamicFormContext=description?JSON.parse(description):{data:{},meta:{}};formContext.data=_extends({},formContext.data,dynamicFormContext.data),formContext.meta=_extends({},formContext.meta,dynamicFormContext.meta);var inlinestyles=uischema&&uischema.inlinestyles;inlinestyles=inlinestyles||formContext&&formContext.theme&&formContext.theme.StepperLayout||"";var metaData=formContext.meta,fieldName=uischema.code,styles={};return(fieldName&&metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":!props||!props.hasOwnProperty("visible")||props.visible+""=="true")||(styles.display="none"),React.createElement("div",{className:"stepperTop",style:styles},React.createElement("style",null,inlinestyles),React.createElement(MaterialCategorizationStepperLayout,layoutProps))},StringControl=function(_React$Component){function StringControl(props){_classCallCheck(this,StringControl);var _this=_possibleConstructorReturn(this,(StringControl.__proto__||Object.getPrototypeOf(StringControl)).call(this,props));return _this.replaceDynamicParams=_this.replaceDynamicParams.bind(_this),_this.state={inputValue:_this.props.data?_this.props.data:""},_this}return _inherits(StringControl,_React$Component),_createClass(StringControl,[{key:"componentDidMount",value:function(){var isVisible=this.props.visible+""=="true";if(this.refs.control){var parentEl=$(this.refs.control).parent();parentEl&&parentEl.css("display",isVisible?"block":"none")}}},{key:"componentDidUpdate",value:function(prevProps,prevState){prevProps.data!=this.props.data&&this.setState({inputValue:this.props.data});var isVisible=this.props.visible+""=="true";if(this.refs.control){var parentEl=$(this.refs.control).parent();parentEl&&parentEl.css("display",isVisible?"block":"none")}}},{key:"replaceDynamicParams",value:function(currentValue,lookupProps){var newValueStr="string"==typeof currentValue?currentValue:JSON.stringify(currentValue);if(newValueStr){var matchingParams=newValueStr.match(/\${\w+}/g);matchingParams&&matchingParams.forEach(function(matchingParam){if(matchingParam){var paramName=matchingParam.slice(2,matchingParam.length-1),isPropNameExist=lookupProps&&Object.keys(lookupProps).indexOf(paramName)>-1,paramValue=isPropNameExist?lookupProps[paramName]:"",stringifiedParamValue=JSON.stringify(paramValue);paramValue=stringifiedParamValue.substring(1,stringifiedParamValue.length-1),newValueStr=paramValue||isPropNameExist?newValueStr.replace(matchingParam,paramValue||""):newValueStr.replace(matchingParam,"")}})}return JSON.parse(newValueStr)}},{key:"render",value:function(){var formContext=this.props.uischema.context?this.props.uischema.context:{data:{},meta:{}},dynamicFormContext=this.props.description?JSON.parse(this.props.description):{data:{},meta:{}};formContext.data=_extends({},formContext.data,dynamicFormContext.data),formContext.meta=_extends({},formContext.meta,dynamicFormContext.meta);var isDefaultEnabled=this.props.uischema.disabled+""!="true"&&this.props.enabled+""=="true",isDefaultRequired=this.props.uischema.required+""=="true"||this.props.required+""=="true",parentObj=formContext.data,metaData=formContext.meta,fieldName=this.props.path,isEnabled=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("enabled")?metaData[fieldName].enabled+""=="true":isDefaultEnabled,isRequired=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("required")?metaData[fieldName].required+""=="true":isDefaultRequired,isVisible=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":this.props.visible+""=="true",reload=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("reload")?metaData[fieldName].hasOwnProperty("reload"):"",controlValue=parentObj[fieldName],choices=[],options=Object.assign({},this.props.uischema.options),suggestions=this.props.uischema.suggestion;suggestions&&suggestions.length>0&&suggestions.map(function(suggestion){choices.push(React.createElement(SelectItem,{value:suggestion,text:suggestion}))});var schemaObj=this.props.uischema.widget?this.props.uischema.widget:this.props.schema,customControlProps={componentname:"",componentscope:"studio",componentprops:{},controlname:this.props.path,context:formContext,key:this.props.path},widgetType=schemaObj.widgetType||("uid"==this.props.path?"":schemaObj.subtype||schemaObj.format||"String"),inlinestyles=formContext&&formContext.meta&&formContext.meta[this.props.path]?formContext.meta[this.props.path].inlinestyles:"";if(inlinestyles=(inlinestyles=inlinestyles||this.props.uischema&&this.props.uischema.inlinestyles)||formContext&&formContext.theme&&formContext.theme[widgetType]||"",!widgetType)return null;switch(widgetType){case"Dynamic Choice":return options.choiceTableName=schemaObj.tableName,options.choiceLabelFieldName=schemaObj.choiceLabelFieldName,options.choiceValueFieldName=schemaObj.choiceValueFieldName,options.choiceFilterCondition=schemaObj.condition?this.replaceDynamicParams(schemaObj.condition,parentObj):{},options.isDynamicChoice=!0,customControlProps.componentname="SrsDynamicChoice",customControlProps.componentprops={defaultvalue:controlValue,label:this.props.label,table:options.choiceTableName,labelfield:options.choiceLabelFieldName,valuefield:options.choiceValueFieldName,filter:options.choiceFilterCondition,inlinestyles:inlinestyles},React.createElement(CustomComponentControl,{key:this.props.path,uischema:customControlProps,enabled:isEnabled,required:isRequired,visible:isVisible,reload:reload});case"Key Value Pair":return options.keyType=schemaObj.keyType,options.keyTableName=schemaObj.keyTableName,options.keyFieldName=schemaObj.keyFieldName,options.keyCondition=schemaObj.keyCondition?this.replaceDynamicParams(schemaObj.keyCondition,parentObj):{},options.valueType=schemaObj.valueType,options.valueTableName=schemaObj.valueTableName,options.valueFieldName=schemaObj.valueFieldName,options.valueCondition=schemaObj.valueCondition?this.replaceDynamicParams(schemaObj.valueCondition,parentObj):{},void(options.isKeyValuePair=!0);case"Choice":var isMultiSelect=schemaObj.multiSelect;options.isSelect=!0,options.isMultiSelect=isMultiSelect,options.suggestions;var optionPairs=[],choiceList=schemaObj.choiceList;return choiceList&&choiceList.map(function(choiceItem){choices.push(React.createElement(SelectItem,{value:choiceItem.value,text:choiceItem.name})),optionPairs.push({name:choiceItem.value,label:choiceItem.name})}),customControlProps.componentname="SrsSelect",customControlProps.componentprops={options:optionPairs,title:this.props.label,light:!0,value:controlValue,inlinestyles:inlinestyles},React.createElement(CustomComponentControl,{key:this.props.path,uischema:customControlProps,enabled:isEnabled,required:isRequired,visible:isVisible,reload:reload});case"Reference":options.isReference=!0,options.title=this.props.label,options.tableName=schemaObj.tableName,options.displayField=schemaObj.displayField,options.secondaryDisplayField=schemaObj.secondaryDisplayField,options.filter=schemaObj.filter?this.replaceDynamicParams(schemaObj.filter,parentObj):{},options.filter=options.filter.where?options.filter:{where:_extends({},options.filter)},options.defaultValue=schemaObj.defaultValue,options.searchfields=schemaObj.searchfields;var defaultValue="";if(controlValue){if("string"==typeof controlValue)try{defaultValue=(defaultValue=JSON.parse(controlValue))?defaultValue.value:""}catch(err){defaultValue=controlValue}}else defaultValue=defaultValue||(options&&options.defaultValue?options.defaultValue:"");return customControlProps.componentname="SrsReference",customControlProps.componentprops={tableName:schemaObj.tableName,title:this.props.label,light:!0,defaultvalue:defaultValue,displayfield:schemaObj.displayField,secondarydisplayfield:schemaObj.secondaryDisplayField,filter:options.filter,searchfields:schemaObj.searchfields,showopenrecord:schemaObj.hideOpenRecord+""!="true",inlinestyles:inlinestyles},React.createElement(CustomComponentControl,{key:this.props.path,uischema:customControlProps,enabled:isEnabled,required:isRequired,visible:isVisible,reload:reload});case"File":options.isFile=!0,options.showImage=schemaObj.showImage+""=="true";var _props={};return isRequired&&(_props.helperText="*Required",controlValue||(_props.invalid=!0,_props.invalidText="Value is required")),customControlProps.componentname="SrsFile",customControlProps.componentprops={helpertext:_props.helperText,invalid:_props.invalid,invalidtext:_props.invalidText,defaultfileid:controlValue,label:this.props.label,light:!0,value:controlValue,key:this.props.path,showimage:options.showImage,disabled:isEnabled&&isEnabled+""=="false",inlinestyles:inlinestyles},schemaObj.fileTypes&&(customControlProps.componentprops.filetypes=schemaObj.fileTypes),React.createElement(CustomComponentControl,{key:this.props.path,uischema:customControlProps,enabled:isEnabled,required:isRequired,visible:isVisible,reload:reload});case"Script":return options.isScript=!0,options.title=this.props.label,options.contentType=schemaObj.contentType,options.editorHeight=schemaObj.editorHeight,options.language=schemaObj.language,customControlProps.componentname="SrsCodeEditor",customControlProps.componentprops={contenttype:options.contentType,editorheight:options.editorHeight,language:options.language,showtitle:!0,visible:!!isVisible,hide:!isVisible,editorCode:controlValue,disabled:isEnabled&&isEnabled+""=="false",key:this.props.path,light:"true",label:this.props.label,inlinestyles:inlinestyles},React.createElement(CustomComponentControl,{key:this.props.path,uischema:customControlProps,enabled:isEnabled,required:isRequired,visible:isVisible,reload:reload});case"Text":var defaultFieldProps={};return isRequired&&(defaultFieldProps.helperText="*Required",controlValue||(defaultFieldProps.invalid=!0,defaultFieldProps.invalidText="Value is required")),isEnabled=(!options||options.isReadOnly+""!="true")&&isEnabled,customControlProps.componentname="SrsTextArea",customControlProps.componentprops=_extends({},defaultFieldProps,{value:controlValue,visible:!!isVisible,hide:!isVisible,disabled:!isEnabled,key:this.props.path,light:"true",label:this.props.label,inlinestyles:inlinestyles}),React.createElement(CustomComponentControl,{key:this.props.path,uischema:customControlProps,enabled:isEnabled,required:isRequired,visible:isVisible,reload:reload});default:var defaultProps={};return isRequired&&(defaultProps.helperText="*Required",controlValue||(defaultProps.invalid=!0,defaultProps.invalidText="Value is required")),isEnabled=(!options||options.isReadOnly+""!="true")&&isEnabled,customControlProps.componentname="SrsTextField",customControlProps.componentprops=_extends({},defaultProps,{value:controlValue,visible:!!isVisible,hide:!isVisible,disabled:!isEnabled,key:this.props.path,light:"true",label:this.props.label,inlinestyles:inlinestyles}),React.createElement(CustomComponentControl,{key:this.props.path,uischema:customControlProps,enabled:isEnabled,required:isRequired,visible:isVisible,reload:reload})}}}]),StringControl}(React.Component),function(_React$Component2){function HiddenControl(){return _classCallCheck(this,HiddenControl),_possibleConstructorReturn(this,(HiddenControl.__proto__||Object.getPrototypeOf(HiddenControl)).apply(this,arguments))}return _inherits(HiddenControl,_React$Component2),_createClass(HiddenControl,[{key:"render",value:function(){return React.createElement("div",{style:{display:"none"},ref:"control"},React.createElement(TextInput,_extends({light:"true"},props,{key:this.props.path,value:this.props.data,labelText:this.props.label})))}}]),HiddenControl}(React.Component),NumberControl=function(_React$Component3){function NumberControl(){return _classCallCheck(this,NumberControl),_possibleConstructorReturn(this,(NumberControl.__proto__||Object.getPrototypeOf(NumberControl)).apply(this,arguments))}return _inherits(NumberControl,_React$Component3),_createClass(NumberControl,[{key:"render",value:function(){var formContext=this.props.uischema.context?this.props.uischema.context:{data:{},meta:{}},dynamicFormContext=this.props.description?JSON.parse(this.props.description):{data:{},meta:{}};formContext.data=_extends({},formContext.data,dynamicFormContext.data),formContext.meta=_extends({},formContext.meta,dynamicFormContext.meta);var isDefaultEnabled=this.props.uischema.disabled+""!="true"&&this.props.enabled+""=="true",isDefaultRequired=this.props.uischema.required+""=="true"||this.props.required+""=="true",parentObj=formContext.data,metaData=formContext.meta,fieldName=this.props.path,isEnabled=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("enabled")?metaData[fieldName].enabled+""=="true":isDefaultEnabled,isRequired=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("required")?metaData[fieldName].required+""=="true":isDefaultRequired,isVisible=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":this.props.visible+""=="true",props={invalidText:"Value is required"};isRequired+""==1?(props.helperText="*Required",parentObj[fieldName]||(props.invalid=!0)):props.value=parentObj[fieldName]?parentObj[fieldName]:0;var inlinestyles=formContext&&formContext.meta&&formContext.meta[this.props.path]?formContext.meta[this.props.path].inlinestyles:"";inlinestyles=(inlinestyles=inlinestyles||this.props.uischema&&this.props.uischema.inlinestyles)||formContext&&formContext.theme&&formContext.theme.Number||"";var customControlProps={componentname:"SrsNumber",componentscope:"studio",componentprops:_extends({},props,{visible:!!isVisible,hide:!isVisible,disabled:!isEnabled,key:this.props.path,light:"true",label:this.props.label,inlinestyles:inlinestyles}),controlname:this.props.path,context:formContext,key:this.props.path};return React.createElement(CustomComponentControl,{key:this.props.path,uischema:customControlProps,enabled:isEnabled,required:isRequired,visible:isVisible})}}]),NumberControl}(React.Component),ListControl=function(_React$Component4){function ListControl(props){_classCallCheck(this,ListControl);var _this4=_possibleConstructorReturn(this,(ListControl.__proto__||Object.getPrototypeOf(ListControl)).call(this,props));return _this4.onRowClick=_this4.onRowClick.bind(_this4),_this4.onActionClick=_this4.onActionClick.bind(_this4),_this4.replaceDynamicParams=_this4.replaceDynamicParams.bind(_this4),_this4}return _inherits(ListControl,_React$Component4),_createClass(ListControl,[{key:"replaceDynamicParams",value:function(currentValue,lookupProps){var newValueStr="string"==typeof currentValue?currentValue:JSON.stringify(currentValue);if(newValueStr){var matchingParams=newValueStr.match(/\${\w+}/g);matchingParams&&matchingParams.forEach(function(matchingParam){if(matchingParam){var paramName=matchingParam.slice(2,matchingParam.length-1),isPropNameExist=lookupProps&&Object.keys(lookupProps).indexOf(paramName)>-1,paramValue=isPropNameExist?lookupProps[paramName]:"";newValueStr=paramValue||isPropNameExist?newValueStr.replace(matchingParam,paramValue||""):newValueStr.replace(matchingParam,"")}})}return JSON.parse(newValueStr)}},{key:"onRowClick",value:function(row){var parentObj=(this.props.description?JSON.parse(this.props.description):{data:{},meta:{}}).data,rowURL=this.props.uischema.navigateToURL;if(rowURL){var urlValue=rowURL.replace("${uid}",row.uid);navigateTo(urlValue)}else{var listName=this.props.uischema&&this.props.uischema.Name?this.props.uischema.Name:"";if(listName){var formList=Object.assign({},parentObj[this.props.path]);formList.rowClicked=formList.rowClicked||{},formList.rowClicked[listName]=row.uid,this.props.handleChange(this.props.path,formList)}}}},{key:"onActionClick",value:function(row,actionName){var parentObj=(this.props.description?JSON.parse(this.props.description):{data:{},meta:{}}).data,listName=this.props.uischema&&this.props.uischema.Name?this.props.uischema.Name:"";if(listName){var formList=Object.assign({},parentObj[this.props.path]);formList.actionClicked=formList.rowClicked||{},formList.actionClicked[listName]={actionName:actionName,row:row},this.props.handleChange(this.props.path,formList)}}},{key:"render",value:function(){var formContext=this.props.description?JSON.parse(this.props.description):{data:{},meta:{}},parentObj=formContext.data,metaData=formContext.meta,fieldName=this.props.path,isRequired=(metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("enabled")?metaData[fieldName].enabled:this.props.enabled,metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("required")?metaData[fieldName].required+""=="true":this.props.required+""=="true"),isVisible=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":this.props.visible+""=="true",props={};isRequired&&(props.helperText="*Required",parentObj[fieldName]||(props.invalid=!0,props.invalidText="Value is required"));this.props.schema.table,this.props.schema.fields;var gridProps={key:this.props.uischema?this.props.uischema.Name?this.props.uischema.Name:this.props.uischema.name||Date.now():Date.now(),shadow:!0,groupfields:[{name:"complete",value:"complete"}],onRowClick:this.onRowClick},Grid=SrsGrid();return React.createElement("div",{className:"controlTop",style:{paddingTop:"1em",paddingBottom:"1em",display:isVisible?"block":"none"},ref:"control"},React.createElement("style",null,"\n            .bx--text-input {\n                height: 2rem !important;\n            }\n        "),React.createElement(Grid,gridProps))}}]),ListControl}(React.Component),EmbeddedListControl=function(_React$Component5){function EmbeddedListControl(props){_classCallCheck(this,EmbeddedListControl);var _this5=_possibleConstructorReturn(this,(EmbeddedListControl.__proto__||Object.getPrototypeOf(EmbeddedListControl)).call(this,props));return _this5.convert2Schema=_this5.convert2Schema.bind(_this5),_this5.addItem=_this5.addItem.bind(_this5),_this5.removeItems=_this5.removeItems.bind(_this5),_this5.state={isReady:!1,controlProps:{path:_this5.props.path,renderers:_this5.props.renderers,cells:_this5.props.cells,data:_this5.props.data,addItem:_this5.addItem,removeItems:_this5.removeItems}},_this5}return _inherits(EmbeddedListControl,_React$Component5),_createClass(EmbeddedListControl,[{key:"addItem",value:function(path,value){var self=this;return function(p,v){var embeddedListFieldName=self.props.uischema.name,embeddedListFieldData=self.props.data[embeddedListFieldName]||[];embeddedListFieldData.push({}),self.props.addItem(embeddedListFieldName,embeddedListFieldData)}}},{key:"removeItems",value:function(path,deletedItemIndexes){var self=this;return function(p,v){var embeddedListFieldName=self.props.uischema.name,embeddedListFieldData=self.props.data[embeddedListFieldName]||[];embeddedListFieldData=embeddedListFieldData.filter(function(embeddedListFieldDataItem,indx){return!deletedItemIndexes.includes(indx)}),self.props.removeItem(embeddedListFieldName,embeddedListFieldData)}}},{key:"convert2Schema",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(inputObj){var result,inputObjKeys,inputObjIndx,inputObjKey,filter,queryResults,choiceList,queryResultsIndx,queryResult;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:result={},inputObjKeys=Object.keys(inputObj),_context.t0=_regeneratorRuntime.keys(inputObjKeys);case 3:if((_context.t1=_context.t0()).done){_context.next=30;break}if(inputObjIndx=_context.t1.value,"dataType"!=(inputObjKey=inputObjKeys[inputObjIndx])){_context.next=10;break}"text"==inputObj[inputObjKey]?(result.type="string",result.subtype="Text"):"date"==inputObj[inputObjKey]?(result.type="string",result.format="date"):"date-time"==inputObj[inputObjKey]?(result.type="string",result.format="date-time"):result.type=inputObj[inputObjKey],_context.next=28;break;case 10:if("widgetType"!=inputObjKey){_context.next=27;break}if("Dynamic Choice"!=inputObj[inputObjKey]){_context.next=24;break}result.subtype="Choice",filter={};try{filter="string"==typeof inputObj.condition?JSON.parse(inputObj.condition):inputObj.condition}catch(err){}return _context.next=17,$qry.getRecords(inputObj.tableName,filter,[inputObj.choiceLabelFieldName,inputObj.choiceValueFieldName]);case 17:if(queryResults=_context.sent,choiceList=[],result.multiSelect=!!inputObj.multiSelect,queryResults&&queryResults.length>0)for(queryResultsIndx in queryResults)queryResult=queryResults[queryResultsIndx],choiceList.push({name:queryResult[inputObj.choiceLabelFieldName],value:queryResult[inputObj.choiceValueFieldName]});result.choiceList=choiceList,_context.next=25;break;case 24:"Choice"==inputObj[inputObjKey]?(result.subtype="Choice",result.choiceList=inputObj.choiceList,result.multiSelect=!!inputObj.multiSelect):"Reference"==inputObj[inputObjKey]&&(result.subtype="Reference",result.tableName=inputObj.tableName,result.displayField=inputObj.displayField,result.secondaryDisplayField=inputObj.secondaryDisplayField,result.filter=inputObj.filter,result.searchfields=inputObj.searchfields,result.defaultValue=inputObj.defaultValue);case 25:_context.next=28;break;case 27:result[inputObjKey]=inputObj[inputObjKey];case 28:_context.next=3;break;case 30:return _context.abrupt("return",result);case 31:case"end":return _context.stop()}},_callee,this)}));return function(_x){return _ref.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var _props$uischema,name,fields,formContext,dynamicFormContext,metaData,configData,pageId,pageSuffix,parentWidgetId,fieldName,isVisible,themeObj,cellDescription,fieldsMap,fieldsIndx,fieldObj,updatedFieldObj,schema,uischema,controlProps;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_props$uischema=this.props.uischema,name=_props$uischema.name,fields=_props$uischema.fields,_props$uischema.title,formContext=this.props.uischema.context?this.props.uischema.context:{data:{},meta:{}},dynamicFormContext=this.props.description?JSON.parse(this.props.description):{data:{},meta:{}},formContext.data=_extends({},formContext.data,dynamicFormContext.data),formContext.meta=_extends({},formContext.meta,dynamicFormContext.meta),formContext.data,metaData=formContext.meta,configData=formContext.config,pageId=configData?configData.pageid:"",pageSuffix=configData?configData.pagesuffix:"",parentWidgetId=configData?configData.widgetid:"",fieldName=this.props.path||name,metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("enabled")?metaData[fieldName].enabled+""=="true":this.props.enabled+""=="true",metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("required")?metaData[fieldName].required+""=="true":this.props.required+""=="true",isVisible=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":this.props.visible+""=="true",(formContext&&formContext.meta&&formContext.meta[this.props.path]?formContext.meta[this.props.path].inlinestyles:"")||this.props.uischema&&this.props.uischema.inlinestyles,themeObj=formContext&&formContext.theme||{},cellDescription={pageId:pageId,pageSuffix:pageSuffix,parentwidgetid:parentWidgetId,theme:themeObj},fieldsMap={},!(fields&&fields.length>0)){_context2.next=31;break}_context2.t0=_regeneratorRuntime.keys(fields);case 22:if((_context2.t1=_context2.t0()).done){_context2.next=31;break}return fieldsIndx=_context2.t1.value,fieldObj=fields[fieldsIndx],_context2.next=27,this.convert2Schema(fieldObj);case 27:updatedFieldObj=_context2.sent,fieldsMap[fieldObj.name]=_extends({},updatedFieldObj,{description:JSON.stringify(cellDescription)}),_context2.next=22;break;case 31:schema={type:"object",properties:_defineProperty({},name,{type:"array",items:{type:"object",properties:fieldsMap}})},uischema={type:"Control",scope:"#/properties/"+name},[{ListField1:"chaitu",ListField2:"123"},{ListField1:"yummy",ListField2:"213"}],controlProps={schema:schema,path:this.props.path,visible:isVisible,uischema:uischema,renderers:this.props.renderers,cells:this.props.cells,data:this.props.data,addItem:this.addItem,removeItems:this.removeItems},this.setState({controlProps:controlProps,isReady:!0});case 36:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(prevProps,prevState){}},{key:"render",value:function(){return this.state.isReady?React.createElement("div",{className:"arrayTop",ref:"control",style:{paddingRight:20,display:this.state.controlProps.visible?"block":"none"}},React.createElement(JsonFormsStateProvider,{initState:{renderers:this.props.renderers,cells:this.props.cells,core:{data:this.props.data,uischema:this.state.controlProps.uischema,schema:this.state.controlProps.schema,removeItems:this.state.controlProps.removeItems}}},React.createElement(MaterialArrayControlRenderer,this.state.controlProps))):React.createElement("div",null,"Loading...")}}]),EmbeddedListControl}(React.Component),RelatedListControl=function(_React$Component6){function RelatedListControl(props){_classCallCheck(this,RelatedListControl);var _this6=_possibleConstructorReturn(this,(RelatedListControl.__proto__||Object.getPrototypeOf(RelatedListControl)).call(this,props));return _this6.replaceDynamicParams=_this6.replaceDynamicParams.bind(_this6),_this6}return _inherits(RelatedListControl,_React$Component6),_createClass(RelatedListControl,[{key:"replaceDynamicParams",value:function(currentValue,lookupProps){var newValueStr="string"==typeof currentValue?currentValue:JSON.stringify(currentValue);if(newValueStr){var matchingParams=newValueStr.match(/\${\w+}/g);matchingParams&&matchingParams.forEach(function(matchingParam){if(matchingParam){var paramName=matchingParam.slice(2,matchingParam.length-1),isPropNameExist=lookupProps&&Object.keys(lookupProps).indexOf(paramName)>-1,paramValue=isPropNameExist?lookupProps[paramName]:"";newValueStr=paramValue||isPropNameExist?newValueStr.replace(matchingParam,paramValue||""):newValueStr.replace(matchingParam,"")}})}return JSON.parse(newValueStr)}},{key:"render",value:function(){var formContext=this.props.uischema.context?this.props.uischema.context:{data:{},meta:{}},dynamicFormContext=this.props.description?JSON.parse(this.props.description):{data:{},meta:{}};formContext.data=_extends({},formContext.data,dynamicFormContext.data),formContext.meta=_extends({},formContext.meta,dynamicFormContext.meta);var parentObj=formContext.data,metaData=formContext.meta,fieldName=this.props.path,_props$uischema2=(metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("enabled")?metaData[fieldName].enabled:this.props.enabled,metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("required")?metaData[fieldName].required:this.props.required,metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible:this.props.visible,this.props.uischema),name=_props$uischema2.name,tableName=_props$uischema2.tableName,viewName=_props$uischema2.viewName,fields=_props$uischema2.fields,groupFields=_props$uischema2.groupFields,filter=_props$uischema2.filter,relatedField=_props$uischema2.relatedField,parentField=_props$uischema2.parentField,noscroll=_props$uischema2.noscroll,norowclick=_props$uischema2.norowclick,hidefilter=_props$uischema2.hidefilter,compact=_props$uischema2.compact,title=_props$uischema2.title;filter=filter?this.replaceDynamicParams(filter,parentObj):{};var newFilter={};parentField=parentField||"uid";var fieldsMap={};if(fields&&fields.length>0)for(var fieldsIndx in fields){var fieldObj=fields[fieldsIndx];fieldsMap[fieldObj.name]=fieldObj.value}var groupFieldPairs=[];if(groupFields&&groupFields.length>0)for(var groupFieldsIndx in groupFields){var groupField=groupFields[groupFieldsIndx];groupFieldPairs.push({name:fieldsMap[groupField],value:groupField})}try{newFilter=(newFilter=filter?"string"==typeof filter?JSON.parse(filter):filter:null)&&newFilter.where?newFilter.where:newFilter}catch(err){}var updatedFilter=newFilter?{where:{and:[newFilter]}}:newFilter;if(relatedField){var parentFieldValue=parentObj[parentField]||"";updatedFilter&&updatedFilter.where&&updatedFilter.where.and?updatedFilter.where.and.push(_defineProperty({},relatedField,parentFieldValue)):updatedFilter={where:_defineProperty({},relatedField,parentFieldValue)}}var listActions=this.props.uischema&&this.props.uischema.listActions?this.props.uischema.listActions:[],rowActions=this.props.uischema&&this.props.uischema.rowActions?this.props.uischema.rowActions:[],inlinestyles=formContext&&formContext.meta&&formContext.meta[this.props.path]?formContext.meta[this.props.path].inlinestyles:"";inlinestyles=(inlinestyles=inlinestyles||this.props.uischema&&this.props.uischema.inlinestyles)||formContext&&formContext.theme&&formContext.theme.List||"";var listName=name||tableName,gridProps={componentname:"SrsGrid",componentscope:"studio",componentprops:{controlname:name||this.props.path,tablename:tableName,fields:fields,noscroll:noscroll,norowclick:norowclick,hidefilter:hidefilter,compact:compact,title:title,view:viewName||"Default",actionnames:listActions,rowactions:rowActions,filter:updatedFilter||{uid:"-1"},inlinestyles:"\n            .bx--text-input {\n                height: 2rem !important;\n            }\n        "+(inlinestyles||"")},controlname:name||this.props.path,context:formContext,key:listName};return React.createElement(CustomComponentControl,{key:listName,uischema:gridProps,enabled:this.props.enabled,required:this.props.required,visible:this.props.visible})}}]),RelatedListControl}(React.Component),DateControl=function(_React$Component7){function DateControl(props){_classCallCheck(this,DateControl);var _this7=_possibleConstructorReturn(this,(DateControl.__proto__||Object.getPrototypeOf(DateControl)).call(this,props));_this7.GMT2timeZoneMap={"GMT+1:00":"ECT","GMT+2:00":"EET","GMT+2:00":"ART","GMT+3:00":"EAT","GMT+3:30":"MET","GMT+4:00":"NET","GMT+5:00":"PLT","GMT+5:30":"IST","GMT+6:00":"BST","GMT+7:00":"VST","GMT+8:00":"CTT","GMT+9:00":"JST","GMT+9:30":"ACT","GMT+10:00":"AET","GMT+11:00":"SST","GMT+12:00":"NST","GMT-11:00":"MIT","GMT-10:00":"HST","GMT-9:00":"AST","GMT-8:00":"PST","GMT-7:00":"PNT","GMT-7:00":"MST","GMT-6:00":"CST","GMT-5:00":"EST","GMT-5:00":"IET","GMT-4:00":"PRT","GMT-3:30":"CNT","GMT-3:00":"AGT","GMT-3:00":"BET","GMT-1:00":"CAT"};var currentTimeZone=(new Date).toLocaleString("en",{timeZoneName:"short"}).split(" ").pop(),tzCode=_this7.GMT2timeZoneMap[currentTimeZone]?_this7.GMT2timeZoneMap[currentTimeZone]:"PST",dateValue="",year=2020,month=11,day=26,timeValue="00:00:00",hrs=0,minutes=0,amORpm="AM";return _this7.props.data&&((dateValue=new Date(_this7.props.data).toLocaleDateString("en-US",{timeZone:tzCode}))&&dateValue.split("/").length>=2&&(month=dateValue.split("/")[0],day=dateValue.split("/")[1],year=dateValue.split("/")[2]),hrs=(timeValue=new Date(_this7.props.data).toLocaleTimeString("en-US",{timeZone:tzCode}))&&timeValue.split(":").length>=2?timeValue.split(":")[0]:0,minutes=timeValue&&timeValue.split(":").length>=2?timeValue.split(":")[1]:0,timeValue&&timeValue.split(":").length>=2?timeValue.split(":")[2]:0,amORpm=hrs>12?"PM":"AM",hrs=hrs>12?hrs-12:hrs),_this7.state={invalidTime:!1,year:year,month:month,day:day,hrs:hrs,minutes:minutes,tzCode:tzCode,amORpm:amORpm,inputValue:dateValue},_this7.timeZoneMap={ECT:1,EET:2,ART:2,EAT:3,MET:3.5,NET:4,PLT:5,IST:5.5,BST:6,VST:7,CTT:8,JST:9,ACT:9.5,AET:10,SST:11,NST:12,MIT:-11,HST:-10,AST:-9,PST:-8,PNT:-7,MST:-7,CST:-6,EST:-5,IET:-5,PRT:-4,CNT:-3.5,AGT:-3,BET:-3,CAT:-1},_this7.setTimeStamp=_this7.setTimeStamp.bind(_this7),_this7}return _inherits(DateControl,_React$Component7),_createClass(DateControl,[{key:"componentDidMount",value:function(){""===this.props.data&&this.props.handleChange(this.props.path,null)}},{key:"componentDidUpdate",value:function(prevProps,prevState){if(prevState.year!=this.state.year||prevState.month!=this.state.month||prevState.day!=this.state.day||prevState.hrs!=this.state.hrs||prevState.minutes!=this.state.minutes||prevState.tzCode!=this.state.tzCode||prevState.amORpm!=this.state.amORpm?this.setTimeStamp():prevState.outputValue!=this.state.outputValue&&this.props.handleChange(this.props.path,this.state.outputValue?this.state.outputValue:null),prevProps.data!=this.props.data&&null!=this.props.data&&this.props.data!=this.state.outputValue){if(""==this.props.data)return void this.props.handleChange(this.props.path,null);var dateValue=new Date(this.props.data).toLocaleDateString("en-US",{timeZone:this.state.tzCode}),month=this.state.month,day=this.state.day,year=this.state.year;dateValue&&dateValue.split("/").length>=2&&(month=dateValue.split("/")[0],day=dateValue.split("/")[1],year=dateValue.split("/")[2]);var timeValue=new Date(this.props.data).toLocaleTimeString("en-US",{timeZone:this.state.tzCode}),hrs=timeValue&&timeValue.indexOf(":")>=2?timeValue.split(":")[0]:0,minutes=timeValue&&timeValue.indexOf(":")>=2?timeValue.split(":")[1]:0,seconds=timeValue&&timeValue.indexOf(":")>=2?timeValue.split(":")[2]:0,amORpm=hrs>12?"PM":"AM";hrs=hrs>12?hrs-12:hrs,this.setState({year:year,month:month,day:day,hrs:hrs,minutes:minutes,seconds:seconds,amORpm:amORpm})}}},{key:"setTimeStamp",value:function(){var hrs=this.state.hrs?this.state.hrs:0,minutes=this.state.minutes?this.state.minutes:0;if(hrs<0||minutes<0||hrs>12||minutes>60)this.setState({invalidTime:!0});else{var hrsIn24Mode=hrs,currentDay=this.state.day;"PM"==this.state.amORpm&&(hrsIn24Mode+=12);var totalMinutes=60*hrsIn24Mode+minutes-60*this.timeZoneMap[this.state.tzCode];totalMinutes<0?(currentDay-=1,totalMinutes=1440+totalMinutes):totalMinutes>1440&&(currentDay+=1,totalMinutes-=1440),hrsIn24Mode=Math.floor(totalMinutes/60);var updateMinutes=totalMinutes%60,value=Date.UTC(this.state.year,this.state.month,currentDay,hrsIn24Mode,updateMinutes,0,0);this.setState({invalidTime:!1,outputValue:value})}}},{key:"render",value:function(){var _this8=this,formContext=this.props.description?JSON.parse(this.props.description):{data:{},meta:{}},metaData=(formContext.data,formContext.meta),fieldName=this.props.path,isDefaultEnabled=this.props.uischema.disabled+""!="true"&&this.props.enabled+""=="true",isDefaultRequired=this.props.uischema.required+""=="true"||this.props.required+""=="true",isEnabled=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("enabled")?metaData[fieldName].enabled+""=="true":isDefaultEnabled,isRequired=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("required")?metaData[fieldName].required+""=="true":isDefaultRequired,isVisible=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":this.props.visible+""=="true",props={};props.value=this.state.inputValue,isRequired&&(props.helperText="*Required",this.props.data||(props.invalid=!0,props.invalidText="Value is required"));return React.createElement("div",{className:"dateTop",style:{textAlign:"left",flexDirection:"row",paddingTop:"1em",paddingBottom:"1em",display:isVisible?"flex":"none"},ref:"control"},React.createElement(DatePicker,_extends({id:"date-picker",light:"true"},props,{key:this.props.path,disabled:isEnabled&&isEnabled+""=="false",onChange:function(val){if(!val||Array.isArray(val)&&0==val.length)_this8.setState({outputValue:""});else{var date=new Date(val),year=date.getFullYear(),month=date.getMonth(),day=date.getDate();_this8.setState({year:year,month:month,day:day})}},onClose:function(){},datePickerType:"single"}),React.createElement(DatePickerInput,{id:"date-picker-input-id",className:"date-class",labelText:this.props.label,pattern:"d{1,2}/d{4}",placeholder:"mm/dd/yyyy",invalid:"",invalidText:"",iconDescription:"Icon description",onClick:function(){}})))}}]),DateControl}(React.Component),DateTimeControl=function(_React$Component8){function DateTimeControl(props){_classCallCheck(this,DateTimeControl);var _this9=_possibleConstructorReturn(this,(DateTimeControl.__proto__||Object.getPrototypeOf(DateTimeControl)).call(this,props));_this9.GMT2timeZoneMap={"GMT+1:00":"ECT","GMT+2:00":"EET","GMT+2:00":"ART","GMT+3:00":"EAT","GMT+3:30":"MET","GMT+4:00":"NET","GMT+5:00":"PLT","GMT+5:30":"IST","GMT+6:00":"BST","GMT+7:00":"VST","GMT+8:00":"CTT","GMT+9:00":"JST","GMT+9:30":"ACT","GMT+10:00":"AET","GMT+11:00":"SST","GMT+12:00":"NST","GMT-11:00":"MIT","GMT-10:00":"HST","GMT-9:00":"AST","GMT-8:00":"PST","GMT-7:00":"PNT","GMT-7:00":"MST","GMT-6:00":"CST","GMT-5:00":"EST","GMT-5:00":"IET","GMT-4:00":"PRT","GMT-3:30":"CNT","GMT-3:00":"AGT","GMT-3:00":"BET","GMT-1:00":"CAT"};var currentTimeZone=(new Date).toLocaleString("en",{timeZoneName:"short"}).split(" ").pop(),tzCode=_this9.GMT2timeZoneMap[currentTimeZone]?_this9.GMT2timeZoneMap[currentTimeZone]:"PST",dateValue="11/26/2020",year=2020,month=11,day=26,timeValue="00:00:00",hrs=0,minutes=0,amORpm="AM";return _this9.props.data&&((dateValue=new Date(_this9.props.data).toLocaleDateString("en-US",{timeZone:tzCode}))&&dateValue.split("/").length>=2&&(month=dateValue.split("/")[0],day=dateValue.split("/")[1],year=dateValue.split("/")[2]),hrs=(timeValue=new Date(_this9.props.data).toLocaleTimeString("en-US",{timeZone:tzCode}))&&timeValue.split(":").length>=2?timeValue.split(":")[0]:0,minutes=timeValue&&timeValue.split(":").length>=2?timeValue.split(":")[1]:0,timeValue&&timeValue.split(":").length>=2?timeValue.split(":")[2]:0,amORpm=hrs>12?"PM":"AM",hrs=hrs>12?hrs-12:hrs),_this9.state={invalidTime:!1,year:year,month:month,day:day,hrs:hrs,minutes:minutes,tzCode:tzCode,amORpm:amORpm,inputValue:dateValue},_this9.timeZoneMap={ECT:1,EET:2,ART:2,EAT:3,MET:3.5,NET:4,PLT:5,IST:5.5,BST:6,VST:7,CTT:8,JST:9,ACT:9.5,AET:10,SST:11,NST:12,MIT:-11,HST:-10,AST:-9,PST:-8,PNT:-7,MST:-7,CST:-6,EST:-5,IET:-5,PRT:-4,CNT:-3.5,AGT:-3,BET:-3,CAT:-1},_this9.setTimeStamp=_this9.setTimeStamp.bind(_this9),_this9}return _inherits(DateTimeControl,_React$Component8),_createClass(DateTimeControl,[{key:"componentDidUpdate",value:function(prevProps,prevState){if((prevState.year!=this.state.year&&this.state.year||prevState.month!=this.state.month&&this.state.month||prevState.day!=this.state.day&&this.state.day||prevState.hrs!=this.state.hrs&&this.state.hrs||prevState.minutes!=this.state.minutes&&!this.state.minutes||prevState.tzCode!=this.state.tzCode&&this.state.tzCode||prevState.amORpm!=this.state.amORpm&&!this.state.amORpm)&&this.setTimeStamp(),prevState.outputValue!=this.state.outputValue&&this.props.handleChange(this.props.path,this.state.outputValue?this.state.outputValue:null),prevProps.data!=this.props.data&&this.props.data!=this.state.outputValue){var dateValue=new Date(this.props.data).toLocaleDateString("en-US",{timeZone:this.state.tzCode}),month=this.state.month,day=this.state.day,year=this.state.year;dateValue&&dateValue.split("/").length>=2&&(month=dateValue.split("/")[0],day=dateValue.split("/")[1],year=dateValue.split("/")[2]);var timeValue=new Date(this.props.data).toLocaleTimeString("en-US",{timeZone:this.state.tzCode}),hrs=timeValue&&timeValue.indexOf(":")>=2?timeValue.split(":")[0]:0,minutes=timeValue&&timeValue.indexOf(":")>=2?timeValue.split(":")[1]:0,seconds=timeValue&&timeValue.indexOf(":")>=2?timeValue.split(":")[2]:0,amORpm=hrs>12?"PM":"AM";hrs=hrs>12?hrs-12:hrs,this.setState({year:year,month:month,day:day,hrs:hrs,minutes:minutes,seconds:seconds,amORpm:amORpm})}}},{key:"setTimeStamp",value:function(){var hrs=this.state.hrs?this.state.hrs:0,minutes=this.state.minutes?this.state.minutes:0;if(hrs<0||minutes<0||hrs>12||minutes>60)this.setState({invalidTime:!0});else{var hrsIn24Mode=hrs,currentDay=this.state.day;"PM"==this.state.amORpm&&(hrsIn24Mode+=12);var totalMinutes=60*hrsIn24Mode+minutes-60*this.timeZoneMap[this.state.tzCode];totalMinutes<0?(currentDay-=1,totalMinutes=1440+totalMinutes):totalMinutes>1440&&(currentDay+=1,totalMinutes-=1440),hrsIn24Mode=Math.floor(totalMinutes/60);var updateMinutes=totalMinutes%60,value=Date.UTC(this.state.year,this.state.month,currentDay,hrsIn24Mode,updateMinutes,0,0);this.setState({invalidTime:!1,hrs:hrs,minutes:minutes,outputValue:value})}}},{key:"render",value:function(){var _this10=this,formContext=this.props.description?JSON.parse(this.props.description):{data:{},meta:{}},context=this.props.uischema.context?this.props.uischema.context:{data:{},meta:{}};formContext.data=_extends({},context.data,formContext.data),formContext.meta=_extends({},context.meta,formContext.meta);var parentObj=formContext.data,metaData=formContext.meta,fieldName=this.props.path,isDefaultEnabled=this.props.uischema.disabled+""!="true"&&this.props.enabled+""=="true",isDefaultRequired=this.props.uischema.required+""=="true"||this.props.required+""=="true",isEnabled=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("enabled")?metaData[fieldName].enabled+""=="true":isDefaultEnabled,isRequired=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("required")?metaData[fieldName].required+""=="true":isDefaultRequired,isVisible=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":this.props.visible+""=="true",props={};isRequired&&(props.helperText="*Required",props.value=this.state.inputValue,parentObj[fieldName]||(props.invalid=!0,props.invalidText="Value is required"));var self=this;return React.createElement("div",{style:{textAlign:"left",flexDirection:"row",paddingBottom:"1em",paddingBottom:"1em",display:isVisible?"flex":"none"},ref:"control"},React.createElement(DatePicker,_extends({id:"date-picker",light:"true"},props,{disabled:isEnabled&&isEnabled+""=="false",key:this.props.path,onChange:function(val){var date=new Date(val),year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),value=Date.UTC(year,month,day,self.state.hrs,self.state.minutes,0,0);_this10.setState({year:year,month:month,day:day,outputValue:value})},onClose:function(){},datePickerType:"single"}),React.createElement(DatePickerInput,{id:"date-picker-input-id",className:"date-class",labelText:this.props.label,pattern:"d{1,2}/d{4}",placeholder:"mm/dd/yyyy",invalid:"",invalidText:"",iconDescription:"Icon description",onClick:function(){}}),React.createElement(TimePicker,{id:"time-picker",light:"true",labelText:"Time",value:("0"+this.state.hrs).slice(-2)+":"+("0"+this.state.minutes).slice(-2),invalidtext:"Invalid Time",invalid:this.state.invalidTime,onChange:function(ev){var value=ev.target.value,hrs=0,minutes=0;value&&(value.indexOf(":")>-1?(hrs=parseInt(value.split(":")[0])||0,minutes=parseInt(value.split(":")[1])||0):hrs=parseInt(value)||0),hrs<0||minutes<0||hrs>12||minutes>60?_this10.setState({invalidTime:!0}):_this10.setState({invalidTime:!1,hrs:hrs,minutes:minutes})}},React.createElement(TimePickerSelect,{id:"time-picker-select-1",labelText:"Please select",value:this.state.amORpm,onChange:function(e){_this10.setState({amORpm:e.target.value})}},React.createElement(SelectItem,{value:"AM",text:"AM"}),React.createElement(SelectItem,{value:"PM",text:"PM"})),React.createElement(TimePickerSelect,{id:"time-picker-select-2",labelText:"Please select",value:this.state.tzCode,onChange:function(e){_this10.setState({tzCode:e.target.value})},pattern:"(1[012]|[1-9]):[0-5][0-9](\\\\s)?",placeholder:"hh:mm",light:"true"},React.createElement(SelectItem,{value:"ECT",text:"ECT"}),React.createElement(SelectItem,{value:"EET",text:"EET"}),React.createElement(SelectItem,{value:"ART",text:"ART"}),React.createElement(SelectItem,{value:"EAT",text:"EAT"}),React.createElement(SelectItem,{value:"MET",text:"MET"}),React.createElement(SelectItem,{value:"NET",text:"NET"}),React.createElement(SelectItem,{value:"PLT",text:"PLT"}),React.createElement(SelectItem,{value:"IST",text:"IST"}),React.createElement(SelectItem,{value:"BST",text:"BST"}),React.createElement(SelectItem,{value:"VST",text:"VST"}),React.createElement(SelectItem,{value:"CTT",text:"CTT"}),React.createElement(SelectItem,{value:"JST",text:"JST"}),React.createElement(SelectItem,{value:"ACT",text:"ACT"}),React.createElement(SelectItem,{value:"AET",text:"AET"}),React.createElement(SelectItem,{value:"SST",text:"SST"}),React.createElement(SelectItem,{value:"NST",text:"NST"}),React.createElement(SelectItem,{value:"MIT",text:"MIT"}),React.createElement(SelectItem,{value:"HST",text:"HST"}),React.createElement(SelectItem,{value:"AST",text:"AST"}),React.createElement(SelectItem,{value:"PST",text:"PST"}),React.createElement(SelectItem,{value:"PNT",text:"PNT"}),React.createElement(SelectItem,{value:"MST",text:"MST"}),React.createElement(SelectItem,{value:"CST",text:"CST"}),React.createElement(SelectItem,{value:"EST",text:"EST"}),React.createElement(SelectItem,{value:"IET",text:"IET"}),React.createElement(SelectItem,{value:"PRT",text:"PRT"}),React.createElement(SelectItem,{value:"CNT",text:"CNT"}),React.createElement(SelectItem,{value:"AGT",text:"AGT"}),React.createElement(SelectItem,{value:"BET",text:"BET"}),React.createElement(SelectItem,{value:"CAT",text:"CAT"})))))}}]),DateTimeControl}(React.Component),ActionsControl=function(_React$Component9){function ActionsControl(){return _classCallCheck(this,ActionsControl),_possibleConstructorReturn(this,(ActionsControl.__proto__||Object.getPrototypeOf(ActionsControl)).apply(this,arguments))}return _inherits(ActionsControl,_React$Component9),_createClass(ActionsControl,[{key:"render",value:function(){var _this12=this,_props$uischema3=this.props.uischema,actions=_props$uischema3.actions,align=_props$uischema3.align,formContext=this.props.description?JSON.parse(this.props.description):{data:{},meta:{}},context=this.props.uischema.context?this.props.uischema.context:{data:{},meta:{}};formContext.data=_extends({},context.data,formContext.data),formContext.meta=_extends({},context.meta,formContext.meta),formContext.theme=_extends({},context.theme,formContext.theme);var parentObj=formContext.data,metaData=formContext.meta,fieldName=this.props.path,isDefaultEnabled=this.props.uischema.disabled+""!="true"&&this.props.enabled+""=="true",isDefaultRequired=this.props.uischema.required+""=="true"||this.props.required+""=="true",isVisible=(metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("enabled")&&metaData[fieldName].enabled,metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("required")&&metaData[fieldName].required,metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":this.props.visible+""=="true"),inlinestyles=formContext&&formContext.meta&&formContext.meta[this.props.path]?formContext.meta[this.props.path].inlinestyles:"";return inlinestyles=(inlinestyles=inlinestyles||this.props.uischema&&this.props.uischema.inlinestyles)||formContext&&formContext.theme&&formContext.theme.Actions||"",React.createElement("div",{key:this.props.path,className:"actionsTop",style:{paddingTop:"1em",paddingBottom:"1em",display:isVisible?"flex":"none",flexFlow:"left"==align?"row":"row-reverse"},ref:"control"},React.createElement("style",null,inlinestyles||""),actions&&actions.map(function(action){return React.createElement(Button,{size:"small",style:{marginLeft:5,marginRight:5},className:"Custom"==action.mode?action.custommode:action.mode,onClick:function(e){_this12.props.handleChange(_this12.props.path,{actionClicked:action.name,actionPayload:_extends({},action,{data:parentObj,clickts:Date.now()})})}},action.label)}))}}]),ActionsControl}(React.Component),LabelControl=function(_React$Component10){function LabelControl(){return _classCallCheck(this,LabelControl),_possibleConstructorReturn(this,(LabelControl.__proto__||Object.getPrototypeOf(LabelControl)).apply(this,arguments))}return _inherits(LabelControl,_React$Component10),_createClass(LabelControl,[{key:"render",value:function(){var Component2Render=RenderComponent(),_props$uischema4=this.props.uischema,text=_props$uischema4.text,name=_props$uischema4.name,showtile=_props$uischema4.showtile,context=_props$uischema4.context,formContext=this.props.description?JSON.parse(this.props.description):{data:{},meta:{}};formContext.data=_extends({},context.data,formContext.data),formContext.meta=_extends({},context.meta,formContext.meta),formContext.theme=_extends({},context.theme,formContext.theme);var fieldName=name,metaData=context.meta,isVisible=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":this.props.visible+""=="true",inlinestyles=formContext&&formContext.meta&&formContext.meta[this.props.path]?formContext.meta[this.props.path].inlinestyles:"";return inlinestyles=(inlinestyles=inlinestyles||this.props.uischema&&this.props.uischema.inlinestyles)||formContext&&formContext.theme&&formContext.theme.Label||"",React.createElement("div",{key:this.props.path,className:"labelTop",style:{paddingTop:"1em",paddingBottom:"1em",display:isVisible?"block":"none"},ref:"control"},React.createElement(Component2Render,{name:"SrsTitle",scope:"studio",params:{title:text,showtile:!!showtile,inlinestyles:inlinestyles}}),React.createElement(Reload16,{style:{position:"absolute",top:5,right:10},onClick:function(e){var pathParts=location.pathname.split("/"),newLocationPathname="";pathParts.indexOf("ts")>-1?(pathParts[pathParts.indexOf("ts")+1]=Date.now(),newLocationPathname=pathParts.join("/")):newLocationPathname=location.pathname+"/ts/"+Date.now(),navigateTo(newLocationPathname+location.search)}}))}}]),LabelControl}(React.Component),CustomControl=function(_React$Component11){function CustomControl(){return _classCallCheck(this,CustomControl),_possibleConstructorReturn(this,(CustomControl.__proto__||Object.getPrototypeOf(CustomControl)).apply(this,arguments))}return _inherits(CustomControl,_React$Component11),_createClass(CustomControl,[{key:"render",value:function(){var formContext=this.props.description?JSON.parse(this.props.description):{data:{},meta:{}},_props$uischema5=this.props.uischema,componentname=_props$uischema5.componentname,componentscope=_props$uischema5.componentscope,componentprops=_props$uischema5.componentprops,context=(_props$uischema5.controlname,_props$uischema5.key,_props$uischema5.context),name=_props$uischema5.name;formContext.data=_extends({},context.data,formContext.data),formContext.meta=_extends({},context.meta,formContext.meta),formContext.config=_extends({},context.config,formContext.config),formContext.theme=_extends({},context.theme,formContext.theme);var customControlProps={componentname:componentname,componentscope:componentscope,controlname:name||this.props.path,context:formContext,key:this.props.path},inlinestyles=formContext&&formContext.meta&&formContext.meta[this.props.path]?formContext.meta[this.props.path].inlinestyles:"";return inlinestyles=(inlinestyles=inlinestyles||this.props.uischema&&this.props.uischema.inlinestyles)||formContext&&formContext.theme&&formContext.theme.Custom||"",customControlProps.componentprops=_extends({defaultvalue:formContext.data[this.props.path],label:this.props.label},componentprops,{inlinestyles:inlinestyles}),React.createElement(CustomComponentControl,{key:this.props.path,uischema:customControlProps,enabled:this.props.enabled,required:this.props.required,visible:this.props.visible})}}]),CustomControl}(React.Component),CustomComponentControl=function(_React$Component12){function CustomComponentControl(props){_classCallCheck(this,CustomComponentControl);var _this15=_possibleConstructorReturn(this,(CustomComponentControl.__proto__||Object.getPrototypeOf(CustomComponentControl)).call(this,props));return _this15.replaceDynamicParams=_this15.replaceDynamicParams.bind(_this15),_this15}return _inherits(CustomComponentControl,_React$Component12),_createClass(CustomComponentControl,[{key:"componentDidMount",value:function(){var metaData=(this.props.description?JSON.parse(this.props.description):this.props.uischema?this.props.uischema.context:{data:{},meta:{},config:{}}).meta,fieldName=this.props.uischema.controlname||this.props.path,isVisible=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":this.props.visible+""=="true";if(this.refs.control){var parentEl=$(this.refs.control).parent();parentEl&&parentEl.css("display",isVisible?"block":"none")}}},{key:"componentDidUpdate",value:function(){var context=this.props.description?JSON.parse(this.props.description):this.props.uischema?this.props.uischema.context:{data:{},meta:{},config:{}},controlname=this.props.uischema.controlname,metaData=context.meta,fieldName=controlname||this.props.path,isVisible=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":this.props.visible+""=="true";if(this.refs.control){var parentEl=$(this.refs.control).parent();parentEl&&parentEl.css("display",isVisible?"block":"none")}}},{key:"replaceDynamicParams",value:function(currentValue,lookupProps){var newValueStr="string"==typeof currentValue?currentValue:JSON.stringify(currentValue);if(newValueStr){var matchingParams=newValueStr.match(/\${\w+}/g);matchingParams&&matchingParams.forEach(function(matchingParam){if(matchingParam){var paramName=matchingParam.slice(2,matchingParam.length-1),isPropNameExist=lookupProps&&Object.keys(lookupProps).indexOf(paramName)>-1,paramValue=isPropNameExist?lookupProps[paramName]:"";if("string"==typeof(paramValue="object"==typeof paramValue?JSON.stringify(paramValue):paramValue)){var stringifiedParamValue=JSON.stringify(paramValue);paramValue=stringifiedParamValue.substring(1,stringifiedParamValue.length-1)}newValueStr=paramValue||isPropNameExist?newValueStr.replace(matchingParam,paramValue||""):newValueStr.replace(matchingParam,"")}})}return JSON.parse(newValueStr)}},{key:"render",value:function(){var context=this.props.description?JSON.parse(this.props.description):this.props.uischema?this.props.uischema.context:{data:{},meta:{},config:{}},_props$uischema6=this.props.uischema,componentname=_props$uischema6.componentname,componentscope=_props$uischema6.componentscope,componentprops=_props$uischema6.componentprops,controlname=_props$uischema6.controlname,Component2Render=(_props$uischema6.key,RenderComponent()),parentObj=context.data,metaData=context.meta,configData=context.config,fieldName=controlname||this.props.path,pageId=configData?configData.pageid:"",pageSuffix=configData?configData.pagesuffix:"",isEnabled=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("enabled")?metaData[fieldName].enabled+""=="true":this.props.enabled+""=="true",isRequired=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("required")?metaData[fieldName].required+""=="true":this.props.required+""=="true",isVisible=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("visible")?metaData[fieldName].visible+""=="true":this.props.visible+""=="true",reload=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("reload")?metaData[fieldName].reload:this.props.reload||"";componentname=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("componentname")?metaData[fieldName].componentname:componentname,componentscope=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("componentscope")?metaData[fieldName].componentscope:componentscope;var overridecomponentprops=metaData&&metaData[fieldName]&&metaData[fieldName].hasOwnProperty("componentprops")?metaData[fieldName].componentprops:null;try{overridecomponentprops=overridecomponentprops&&"string"==typeof overridecomponentprops?JSON.parse(overridecomponentprops):overridecomponentprops,componentprops=componentprops&&"string"==typeof componentprops?JSON.parse(componentprops):componentprops,componentprops=_extends({},componentprops,overridecomponentprops,{isformcontrol:!0,controlname:controlname})}catch(err){}var updatedComponentProps={};for(var componentpropIndx in Object.keys(componentprops)){var componentpropName=Object.keys(componentprops)[componentpropIndx];componentprops[componentpropName]&&("string"==typeof componentprops[componentpropName]?updatedComponentProps[componentpropName]=componentprops[componentpropName]:updatedComponentProps[componentpropName]=JSON.stringify(componentprops[componentpropName]))}var widgetId="SrsDynamicForm"==componentname?controlname:configData?configData.widgetid:"",parentWidgetId=configData?configData.widgetid:"";"SrsDynamicForm"==componentname&&(updatedComponentProps.widgetid=widgetId),"SrsReference"==componentname&&(updatedComponentProps.defaultvalue=parentObj[controlname],parentObj[controlname]||(updatedComponentProps.reload=Date.now())),updatedComponentProps=_extends({},updatedComponentProps,{pageid:pageId,pagesuffix:pageSuffix,ismodal:metaData.ismodal,controlid:widgetId,parentwidgetid:parentWidgetId,shadow:!0});try{updatedComponentProps=updatedComponentProps?this.replaceDynamicParams(updatedComponentProps,parentObj):{}}catch(err){console.error(err)}return isEnabled||(updatedComponentProps.disabled=!0),isRequired&&(updatedComponentProps.required=!0),reload&&(updatedComponentProps.reload=reload),React.createElement("div",{className:"controlTop",style:{paddingTop:"1em",paddingBottom:"1em",display:isVisible?"block":"none"},ref:"control"},componentname&&componentscope?React.createElement(Component2Render,{key:reload?controlname+"_"+reload:controlname,keyname:controlname,name:componentname,scope:componentscope,params:updatedComponentProps}):React.createElement("div",null))}}]),CustomComponentControl}(React.Component),_export("default",{GroupRenderer:GroupRenderer,HorizontalLayoutRenderer:HorizontalLayoutRenderer,VerticalLayoutRenderer:VerticalLayoutRenderer,TabsRenderer:TabsRenderer,StepperRenderer:StepperRenderer,DateControl:DateControl,DateTimeControl:DateTimeControl,NumberControl:NumberControl,StringControl:StringControl,ListControl:ListControl,ActionsControl:ActionsControl,LabelControl:LabelControl,CustomControl:CustomControl,RelatedListControl:RelatedListControl,EmbeddedListControl:EmbeddedListControl})}}}),System.register("component/studio/RenderComponent/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_RenderComponent_,RenderComponent;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_RenderComponent_=function(_React$Component){function _RenderComponent_(props){_classCallCheck(this,_RenderComponent_);var _this=_possibleConstructorReturn(this,(_RenderComponent_.__proto__||Object.getPrototypeOf(_RenderComponent_)).call(this,props)),componentName=_this.props.widgetProps&&_this.props.widgetProps.ComponentName?_this.props.widgetProps.ComponentName:_this.props.name?_this.props.name:"",componentTag=componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),componentScope=_this.props.widgetProps&&_this.props.widgetProps.ComponentScope?_this.props.widgetProps.ComponentScope:_this.props.scope?_this.props.scope:"",params=_this.props.widgetProps&&_this.props.widgetProps.ComponentParameters?_this.props.widgetProps.ComponentParameters:_this.props.params?_this.props.params:{};try{params=params&&"string"==typeof params?JSON.parse(params):params}catch(err){}return _this.state={componentTag:componentTag,componentName:componentName,componentScope:componentScope,params:params,isReady:!1},_this}return _inherits(_RenderComponent_,_React$Component),_createClass(_RenderComponent_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if("WorkflowModeler"!=this.state.componentName){_context.next=3;break}return _context.next=3,System.import("https://unpkg.com/srstecdn@latest/bpmn/bpmn.js");case 3:return _context.next=5,$ele.registerElement(this.state.componentName,this.state.componentScope);case 5:if("PageDesigner"!=this.state.componentName){_context.next=20;break}return _context.next=8,$ele.registerElement("PageDesignerGeneral","studio");case 8:return _context.next=10,$ele.registerElement("PageDesignerProps","studio");case 10:return _context.next=12,$ele.registerElement("PageDesignerWidget","studio");case 12:return _context.next=14,$ele.registerElement("PageDesignerPreview","studio");case 14:return _context.next=16,$ele.registerElement("PageDesignerActions","studio");case 16:return _context.next=18,$ele.registerElement("SlideSelectionPanel","studio");case 18:return _context.next=20,$ele.registerElement("EntityMapper","studio");case 20:this.setState({isReady:!0});case 21:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(prevProps){var params=this.props.widgetProps&&this.props.widgetProps.ComponentParameters?this.props.widgetProps.ComponentParameters:this.props.params?this.props.params:{},prevParams=prevProps.widgetProps&&prevProps.widgetProps.ComponentParameters?prevProps.widgetProps.ComponentParameters:prevProps.params?prevProps.params:{};try{params=params&&"string"==typeof params?JSON.parse(params):params,prevParams=prevParams&&"string"==typeof prevParams?JSON.parse(prevParams):prevParams}catch(err){}if(this.props.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)||prevProps.name+""!=this.props.name+""||prevProps.scope+""!=this.props.scope+""||!_.isEqual(prevParams,params)){var componentName=this.props.widgetProps&&this.props.widgetProps.ComponentName?this.props.widgetProps.ComponentName:this.props.name?this.props.name:"",componentTag=componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),componentScope=this.props.widgetProps&&this.props.widgetProps.ComponentScope?this.props.widgetProps.ComponentScope:this.props.scope?this.props.scope:"";this.setState({componentTag:componentTag,componentName:componentName,componentScope:componentScope,params:params})}}},{key:"render",value:function(){_extends({},this.state.params,{shadow:!0});var elementToRender=this.state.isReady&&this.state.componentTag?React.createElement(this.state.componentTag,_extends({},this.state.params,{shadow:!0,key:this.props.keyname})):null;return React.createElement("div",{style:{height:"inherit",textAlign:"left"}},elementToRender)}}]),_RenderComponent_}(React.Component),_export("RenderComponent",RenderComponent=function(props){return _RenderComponent_}),_export("RenderComponent",RenderComponent)}}}),System.register("component/studio/CustomCellRenderer/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/RenderComponent/Definition.js"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,RenderComponent,_CustomCellRenderer_,CustomCellRenderer;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentStudioRenderComponentDefinitionJs){RenderComponent=_componentStudioRenderComponentDefinitionJs.RenderComponent}],execute:function(){_CustomCellRenderer_=function(_React$Component){function _CustomCellRenderer_(props){return _classCallCheck(this,_CustomCellRenderer_),_possibleConstructorReturn(this,(_CustomCellRenderer_.__proto__||Object.getPrototypeOf(_CustomCellRenderer_)).call(this,props))}return _inherits(_CustomCellRenderer_,_React$Component),_createClass(_CustomCellRenderer_,[{key:"render",value:function(){var Component2Render=RenderComponent(),_props=this.props,componentname=_props.componentname,componentscope=_props.componentscope,componentprops=_props.componentprops,controlname=_props.controlname,pageid=_props.pageid,pagesuffix=_props.pagesuffix,controlid=_props.controlid,parentwidgetid=_props.parentwidgetid,updatedComponentProps=_extends({},componentprops,{pageid:pageid,pagesuffix:pagesuffix,controlid:controlid,parentwidgetid:parentwidgetid,iscellcontrol:!0,controlname:controlname,shadow:!0});return React.createElement("div",{className:"cellTop cellTop"+this.props.controltype},componentname&&componentscope?React.createElement(Component2Render,{key:controlname,name:componentname,scope:componentscope,params:updatedComponentProps}):React.createElement("div",null))}}]),_CustomCellRenderer_}(React.Component),_export("CustomCellRenderer",CustomCellRenderer=function(props){return _CustomCellRenderer_}),_export("CustomCellRenderer",CustomCellRenderer)}}}),System.register("client/script/studio/CellRenderers.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","react","component/studio/CustomCellRenderer/Definition.js"],function(_export,_context){"use strict";var _extends,React,CustomCellRenderer;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_react){React=_react.default},function(_componentStudioCustomCellRendererDefinitionJs){CustomCellRenderer=_componentStudioCustomCellRendererDefinitionJs.CustomCellRenderer}],execute:function(){_export("default",{StringCell:function(props){var data=props.data,path=props.path,required=(props.handleChange,props.required),description=props.schema?props.schema.description:"{}",disabled=!!props.schema&&props.schema.disabled,context={};try{context=JSON.parse(description)}catch(err){}var theme=context.theme,cellPath="cell_"+path.replaceAll(".","_dot_"),defaultProps={};required&&(defaultProps.helperText="*Required",data||(defaultProps.invalid=!0,defaultProps.invalidText="Value is required"));var customControlProps={componentname:"SrsTextField",componentscope:"studio",componentprops:_extends({},defaultProps,{value:data,light:"true",inlinestyles:theme.StringCell||theme.String,disabled:disabled+""=="true"}),controlname:cellPath,key:cellPath},cellProps={controltype:"String",pageid:context.pageId,pagesuffix:context.pageSuffix,componentname:customControlProps.componentname,componentscope:customControlProps.componentscope,componentprops:customControlProps.componentprops,controlid:cellPath+"_"+context.parentwidgetid,controlname:cellPath+"_"+context.parentwidgetid,parentwidgetid:context.parentwidgetid},CustomRenderer=CustomCellRenderer();return React.createElement(CustomRenderer,_extends({key:cellPath},cellProps))},TextCell:function(props){var data=props.data,path=props.path,required=(props.handleChange,props.required),description=props.schema?props.schema.description:"{}",disabled=!!props.schema&&props.schema.disabled,context={};try{context=JSON.parse(description)}catch(err){}var theme=context.theme,cellPath="cell_"+path.replaceAll(".","_dot_"),defaultProps={};required&&(defaultProps.helperText="*Required",data||(defaultProps.invalid=!0,defaultProps.invalidText="Value is required"));var customControlProps={componentname:"SrsTextArea",componentscope:"studio",componentprops:_extends({},defaultProps,{value:data,light:"true",inlinestyles:theme.TextCell||theme.Text||theme.String,disabled:disabled+""=="true"}),controlname:cellPath,key:cellPath},cellProps={controltype:"TextArea",pageid:context.pageId,pagesuffix:context.pageSuffix,componentname:customControlProps.componentname,componentscope:customControlProps.componentscope,componentprops:customControlProps.componentprops,controlid:cellPath+"_"+context.parentwidgetid,controlname:cellPath+"_"+context.parentwidgetid,parentwidgetid:context.parentwidgetid},CustomRenderer=CustomCellRenderer();return React.createElement(CustomRenderer,_extends({key:cellPath},cellProps))},NumberCell:function(props){var data=props.data,path=props.path,required=(props.handleChange,props.required),description=props.schema?props.schema.description:"{}",disabled=!!props.schema&&props.schema.disabled,context={};try{context=JSON.parse(description)}catch(err){}var theme=context.theme,cellPath="cell_"+path.replaceAll(".","_dot_"),defaultProps={};required&&(defaultProps.helperText="*Required",data||(defaultProps.invalid=!0,defaultProps.invalidText="Value is required"));var customControlProps={componentname:"SrsNumber",componentscope:"studio",componentprops:_extends({},defaultProps,{value:data,light:"true",inlinestyles:theme.NumberCell||theme.Number,disabled:disabled+""=="true"}),controlname:cellPath,key:cellPath},cellProps={controltype:"Number",pageid:context.pageId,pagesuffix:context.pageSuffix,componentname:customControlProps.componentname,componentscope:customControlProps.componentscope,componentprops:customControlProps.componentprops,controlid:cellPath+"_"+context.parentwidgetid,controlname:cellPath+"_"+context.parentwidgetid,parentwidgetid:context.parentwidgetid},CustomRenderer=CustomCellRenderer();return React.createElement(CustomRenderer,_extends({key:cellPath},cellProps))},DateCell:function(props){var data=props.data,path=props.path,required=(props.handleChange,props.required),description=props.schema?props.schema.description:"{}",disabled=!!props.schema&&props.schema.disabled,context={};try{context=JSON.parse(description)}catch(err){}var theme=context.theme,cellPath="cell_"+path.replaceAll(".","_dot_"),defaultProps={};required&&(defaultProps.helperText="*Required",data||(defaultProps.invalid=!0,defaultProps.invalidText="Value is required"));var customControlProps={componentname:"SrsDate",componentscope:"studio",componentprops:_extends({},defaultProps,{value:data,light:"true",inlinestyles:theme.DateCell||theme.Date,disabled:disabled+""=="true"}),controlname:cellPath,key:cellPath},cellProps={controltype:"Date",pageid:context.pageId,pagesuffix:context.pageSuffix,componentname:customControlProps.componentname,componentscope:customControlProps.componentscope,componentprops:customControlProps.componentprops,controlid:cellPath+"_"+context.parentwidgetid,controlname:cellPath+"_"+context.parentwidgetid,parentwidgetid:context.parentwidgetid},CustomRenderer=CustomCellRenderer();return React.createElement(CustomRenderer,_extends({key:cellPath},cellProps))},ReferenceCell:function(props){var data=props.data,path=props.path,required=(props.handleChange,props.required),description=props.schema?props.schema.description:"{}",disabled=!!props.schema&&props.schema.disabled,context={};try{context=JSON.parse(description)}catch(err){}var theme=context.theme,cellPath="cell_"+path.replaceAll(".","_dot_"),defaultProps={};required&&(defaultProps.helperText="*Required",data||(defaultProps.invalid=!0,defaultProps.invalidText="Value is required"));var customControlProps={componentname:"SrsReference",componentscope:"studio",componentprops:_extends({},defaultProps,{light:"true",tableName:props.schema.tableName,displayField:props.schema.displayField,secondaryDisplayField:props.schema.secondaryDisplayField,filter:props.schema.filter,searchfields:props.schema.searchfields,defaultvalue:data,showclearbutton:!1,inlinestyles:theme.ReferenceCell||theme.Reference,disabled:disabled+""=="true"}),controlname:cellPath,key:cellPath},cellProps={controltype:"",pageid:context.pageId,pagesuffix:context.pageSuffix,componentname:customControlProps.componentname,componentscope:customControlProps.componentscope,componentprops:customControlProps.componentprops,controlid:cellPath+"_"+context.parentwidgetid,controlname:cellPath+"_"+context.parentwidgetid,parentwidgetid:context.parentwidgetid},CustomRenderer=CustomCellRenderer();return React.createElement(CustomRenderer,_extends({key:cellPath},cellProps))},DynamicChoiceCell:function(props){var data=props.data,path=props.path,required=(props.handleChange,props.required),description=props.schema?props.schema.description:"{}",disabled=!!props.schema&&props.schema.disabled,context={};try{context=JSON.parse(description)}catch(err){}var theme=context.theme,cellPath="cell_"+path.replaceAll(".","_dot_"),defaultProps={};required&&(defaultProps.helperText="*Required",data||(defaultProps.invalid=!0,defaultProps.invalidText="Value is required"));var customControlProps={componentname:"SrsDynamicChoice",componentscope:"studio",componentprops:_extends({},defaultProps,{light:"true",defaultvalue:data,table:props.schema.tableName,labelfield:props.schema.choiceLabelFieldName,valuefield:props.schema.choiceValueFieldName,filter:props.schema.condition,inlinestyles:theme.ChoiceCell||theme.Choice,disabled:disabled+""=="true"}),controlname:cellPath,key:cellPath},cellProps={controltype:"",pageid:context.pageId,pagesuffix:context.pageSuffix,componentname:customControlProps.componentname,componentscope:customControlProps.componentscope,componentprops:customControlProps.componentprops,controlid:cellPath+"_"+context.parentwidgetid,controlname:cellPath+"_"+context.parentwidgetid,parentwidgetid:context.parentwidgetid},CustomRenderer=CustomCellRenderer();return React.createElement(CustomRenderer,_extends({key:cellPath},cellProps))},ChoiceCell:function(props){var data=props.data,path=props.path,required=(props.handleChange,props.required),description=props.schema?props.schema.description:"{}",disabled=!!props.schema&&props.schema.disabled,context={};try{context=JSON.parse(description)}catch(err){}var theme=context.theme,cellPath="cell_"+path.replaceAll(".","_dot_"),defaultProps={};required&&(defaultProps.helperText="*Required",data||(defaultProps.invalid=!0,defaultProps.invalidText="Value is required"));var inputChoiceList=props.schema.choiceList,updatedChoiceList=[];for(var inputChoiceListIndx in inputChoiceList)updatedChoiceList.push({label:inputChoiceList[inputChoiceListIndx].name,name:inputChoiceList[inputChoiceListIndx].value});var customControlProps={componentname:"SrsSelect",componentscope:"studio",componentprops:_extends({},defaultProps,{light:"true",value:data,options:JSON.stringify(updatedChoiceList),inlinestyles:theme.ChoiceCell||theme.Choice,disabled:disabled+""=="true"}),controlname:cellPath,key:cellPath},cellProps={controltype:"",pageid:context.pageId,pagesuffix:context.pageSuffix,componentname:customControlProps.componentname,componentscope:customControlProps.componentscope,componentprops:customControlProps.componentprops,controlid:cellPath+"_"+context.parentwidgetid,controlname:cellPath+"_"+context.parentwidgetid,parentwidgetid:context.parentwidgetid},CustomRenderer=CustomCellRenderer();return React.createElement(CustomRenderer,_extends({key:cellPath},cellProps))}})}}}),System.register("component/studio/JSONForm/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/toConsumableArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/defineProperty.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@jsonforms/react","@jsonforms/material-renderers","@material-ui/core/styles/withStyles","@material-ui/core/styles/createStyles","jss","@material-ui/core/styles","carbon-components-react","@jsonforms/core","client/script/studio/FormWidgets.js","client/script/studio/CellRenderers.js","lodash.clonedeep","lodash.debounce"],function(_export,_context){"use strict";var _toConsumableArray,_defineProperty,_extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,JsonForms,withJsonFormsCellProps,withJsonFormsControlProps,withJsonFormsLayoutProps,materialRenderers,materialCells,create,StylesProvider,jssPreset,rankWith,isNumberControl,isIntegerControl,isDateControl,isDateTimeControl,isStringControl,schemaTypeIs,optionIs,schemaMatches,uiTypeIs,FormWidgets,CellRenderers,cloneDeep,debounce,_JSONForm_,JSONForm;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs){_toConsumableArray=_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs){_defineProperty=_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_jsonformsReact){JsonForms=_jsonformsReact.JsonForms,withJsonFormsCellProps=_jsonformsReact.withJsonFormsCellProps,withJsonFormsControlProps=_jsonformsReact.withJsonFormsControlProps,withJsonFormsLayoutProps=_jsonformsReact.withJsonFormsLayoutProps},function(_jsonformsMaterialRenderers){materialRenderers=_jsonformsMaterialRenderers.materialRenderers,materialCells=_jsonformsMaterialRenderers.materialCells},function(_materialUiCoreStylesWithStyles){_materialUiCoreStylesWithStyles.default},function(_materialUiCoreStylesCreateStyles){_materialUiCoreStylesCreateStyles.default},function(_jss){create=_jss.create},function(_materialUiCoreStyles){StylesProvider=_materialUiCoreStyles.StylesProvider,jssPreset=_materialUiCoreStyles.jssPreset},function(_carbonComponentsReact){_carbonComponentsReact.TextInput,_carbonComponentsReact.NumberInput,_carbonComponentsReact.DatePicker,_carbonComponentsReact.DatePickerInput},function(_jsonformsCore){rankWith=_jsonformsCore.rankWith,_jsonformsCore.scopeEndsWith,isNumberControl=_jsonformsCore.isNumberControl,isIntegerControl=_jsonformsCore.isIntegerControl,isDateControl=_jsonformsCore.isDateControl,_jsonformsCore.isSingleLevelCategorization,isDateTimeControl=_jsonformsCore.isDateTimeControl,isStringControl=_jsonformsCore.isStringControl,schemaTypeIs=_jsonformsCore.schemaTypeIs,_jsonformsCore.formatIs,_jsonformsCore.categorizationHasCategory,optionIs=_jsonformsCore.optionIs,schemaMatches=_jsonformsCore.schemaMatches,uiTypeIs=_jsonformsCore.uiTypeIs,_jsonformsCore.isCategorization,_jsonformsCore.isCategory},function(_clientScriptStudioFormWidgetsJs){FormWidgets=_clientScriptStudioFormWidgetsJs.default},function(_clientScriptStudioCellRenderersJs){CellRenderers=_clientScriptStudioCellRenderersJs.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){_JSONForm_=function(_React$Component){function _JSONForm_(props){_classCallCheck(this,_JSONForm_);var _this=_possibleConstructorReturn(this,(_JSONForm_.__proto__||Object.getPrototypeOf(_JSONForm_)).call(this,props));$ele&&$ele.registerElement("DynaForm","studio","React"),_this.handleChange=_this.handleChange.bind(_this),_this.removeEmbeddedListItem=_this.removeEmbeddedListItem.bind(_this),_this.addEmbeddedListItem=_this.addEmbeddedListItem.bind(_this),_this.processChange=_this.processChange.bind(_this),_this.addContextToUISchema=_this.addContextToUISchema.bind(_this),_this.getControlElements=_this.getControlElements.bind(_this),_this.isFieldTypeEmbeddedList=_this.isFieldTypeEmbeddedList.bind(_this),_this.formData=defaultValue;var schema={},uischema={},defaultValue={};_this.formKey=Date.now();try{schema=_this.props.schema?"string"==typeof _this.props.schema?JSON.parse(_this.props.schema):_this.props.schema:{},uischema=_this.props.uischema?"string"==typeof _this.props.uischema?JSON.parse(_this.props.uischema):_this.props.uischema:{};var formData=_this.props.defaultvalue?"string"==typeof _this.props.defaultvalue?JSON.parse(_this.props.defaultvalue):_this.props.defaultvalue:{};formData&&Object.keys(formData).length>0&&(formData.form_list&&delete formData.form_list,formData.form_actions&&delete formData.form_actions,defaultValue=_extends({form_list:{parent:formData},form_actions:{parent:formData}},formData))}catch(err){}_this.isListTester=schemaTypeIs("string")&&schemaMatches(function(schema){return!(!schema.hasOwnProperty("subtype")||"list"!=schema.subtype)}),_this.isTextTester=schemaTypeIs("string")&&schemaMatches(function(schema){return!(!schema.hasOwnProperty("subtype")||"Text"!=schema.subtype)}),_this.isReferenceCell=schemaTypeIs("string")&&schemaMatches(function(schema){return!(!schema.hasOwnProperty("subtype")||"Reference"!=schema.subtype)}),_this.isDynamicChoiceCell=schemaTypeIs("string")&&schemaMatches(function(schema){return!(!schema.hasOwnProperty("subtype")||"Dynamic Choice"!=schema.subtype)}),_this.isChoiceCell=schemaTypeIs("string")&&schemaMatches(function(schema){return!(!schema.hasOwnProperty("subtype")||"Choice"!=schema.subtype)}),_this.isTextCell=schemaTypeIs("string")&&schemaMatches(function(schema){return!(!schema.hasOwnProperty("subtype")||"Text"!=schema.subtype)});var uiSchemaSubTypeIs=function(expected){return function(uischema){return uischema&&uischema.subtype===expected}};return _this.isActionsTester=uiTypeIs("Control")&&uiSchemaSubTypeIs("Actions"),_this.isCustomComponentTester=uiTypeIs("Control")&&uiSchemaSubTypeIs("CustomComponent"),_this.isLabelControl=uiTypeIs("Control")&&uiSchemaSubTypeIs("Label"),_this.isSimpleListTester=uiTypeIs("Control")&&uiSchemaSubTypeIs("SimpleList"),_this.isRelatedListTester=uiTypeIs("Control")&&uiSchemaSubTypeIs("RelatedList"),_this.isEmbeddedListTester=uiTypeIs("Control")&&uiSchemaSubTypeIs("EmbeddedList"),_this.isGroupTester=uiTypeIs("Group"),_this.isHorizontalLayoutTester=uiTypeIs("HorizontalLayout"),_this.isVerticalLayoutTester=uiTypeIs("VerticalLayout"),_this.isTabsTester=uiTypeIs("Categorization"),_this.isStepperTester=uiTypeIs("Categorization")&&optionIs("variant","stepper"),_this.updateJSONForms=debounce(function(formProps){_this.setState({jsonFormProps:formProps})},250,{trailing:!0,leading:!1}),_this.state={dataSchema:schema,uiSchema:uischema,defaultValue:defaultValue,jsonFormProps:null},_this}return _inherits(_JSONForm_,_React$Component),_createClass(_JSONForm_,[{key:"getControlElements",value:function(nodeEl,result){var _this2=this;nodeEl&&nodeEl.elements&&nodeEl.elements.length>0&&nodeEl.elements.map(function(ele,indx){ele.elements?_this2.getControlElements(ele,result):"Control"==ele.type&&result.push({subtype:ele.subtype,scope:ele.scope,name:ele.name})})}},{key:"addContextToUISchema",value:function(uiSchemaElements,context){if(uiSchemaElements)for(var uiSchemaElementIndx in uiSchemaElements){var uiSchemaElement=uiSchemaElements[uiSchemaElementIndx];uiSchemaElement.elements?(this.addContextToUISchema(uiSchemaElement.elements,context),uiSchemaElement.context=context):uiSchemaElement.context=context}}},{key:"removeEmbeddedListItem",value:function(embeddedListName,data){this.props.handleChange(_defineProperty({},embeddedListName,data),{type:"embedded_list",id:embeddedListName})}},{key:"addEmbeddedListItem",value:function(embeddedListName,data){this.props.handleChange(_defineProperty({},embeddedListName,data),{type:"embedded_list",id:embeddedListName})}},{key:"handleChange",value:function(inputVal){if(!_.isEqual(inputVal,this.state.defaultValue))if(this.state.defaultValue.onRefAction){var updatedDefaultValue=cloneDeep(this.state.defaultValue);delete updatedDefaultValue.onRefAction,this.setState({defaultValue:updatedDefaultValue})}else this.setState({defaultValue:inputVal})}},{key:"processChange",value:function(){var inputVal=cloneDeep(this.state.defaultValue);inputVal&&inputVal.ref_action&&delete inputVal.ref_action;var newInputValue={};if(inputVal&&inputVal.form_list&&inputVal.form_list.actionClicked){(newInputValue={list_action:{}}).list_action.actionClicked=inputVal.form_list.actionClicked.actionName;var actionPayload=inputVal.form_list.actionClicked||{};return newInputValue.list_action.actionPayload=_extends({listName:"ListAction"},actionPayload),void this.props.handleChange(newInputValue)}if(inputVal&&inputVal.form_actions&&inputVal.form_actions.actionClicked){(newInputValue={form_action:{}}).form_action.actionClicked=inputVal.form_actions.actionClicked;var _actionPayload=inputVal.form_actions.actionPayload?inputVal.form_actions.actionPayload:{};return newInputValue.form_action.actionPayload=_extends({formName:"FormAction"},_actionPayload),void this.props.handleChange(newInputValue)}if(inputVal&&inputVal.list_action&&delete inputVal.list_action,inputVal&&inputVal.form_action&&delete inputVal.form_action,inputVal&&inputVal.form_actions&&inputVal.form_actions.parent&&inputVal.form_actions.parent.form_action&&delete inputVal.form_actions.parent.form_action,inputVal&&inputVal.form_actions&&inputVal.form_actions.parent&&inputVal.form_actions.parent.list_action&&delete inputVal.form_actions.parent.list_action,inputVal&&inputVal.form_actions&&inputVal.form_actions.parent&&inputVal.form_actions.parent.form_actions&&delete inputVal.form_actions.parent.form_actions,inputVal&&inputVal.form_actions&&inputVal.form_actions.parent&&inputVal.form_actions.parent.form_list&&delete inputVal.form_actions.parent.form_list,inputVal&&inputVal.parent&&inputVal.parent.form_list&&delete inputVal.parent.form_list,inputVal&&inputVal.parent&&inputVal.parent.form_actions&&delete inputVal.parent.form_actions,inputVal&&inputVal.parent&&inputVal.parent.list_action&&delete inputVal.parent.list_action,inputVal&&inputVal.parent&&inputVal.parent.form_action&&delete inputVal.parent.form_action,(newInputValue=Object.assign({},inputVal))&&Object.keys(newInputValue).length>0){var fieldNames=Object.keys(newInputValue);if(fieldNames&&fieldNames.length>0){for(var fieldNamesIndx in fieldNames){var fieldName=fieldNames[fieldNamesIndx],schemaProps=this.props.schema?this.props.schema.properties:{};if(schemaProps[fieldName]&&"Reference"==schemaProps[fieldName].widgetType){var fieldPayload=null;try{fieldPayload=JSON.parse(newInputValue[fieldName])}catch(err){fieldPayload=newInputValue[fieldName]}if(fieldPayload&&fieldPayload.openRecord){var updatedDefaultValue=cloneDeep(this.state.defaultValue);return updatedDefaultValue[fieldName]=fieldPayload.value,updatedDefaultValue.onRefAction=!0,(newInputValue={}).ref_action={},newInputValue.ref_action.actionClicked="open_record",newInputValue.ref_action.actionPayload={listName:"Reference",tableName:fieldPayload.openRecord.tableName,recordId:fieldPayload.openRecord.recordId,clickts:Date.now()},this.setState({defaultValue:updatedDefaultValue}),void this.props.handleChange(newInputValue)}newInputValue[fieldName]=fieldPayload}}if(newInputValue&&newInputValue.form_list){var parentObj=newInputValue.form_list.parent;parentObj&&parentObj.form_actions&&delete parentObj.form_actions,parentObj&&parentObj.form_list&&delete parentObj.form_list,parentObj&&parentObj.form_action&&delete parentObj.form_action,parentObj&&parentObj.list_action&&delete parentObj.list_action,delete newInputValue.form_list,newInputValue.form_list={parent:parentObj}}if(newInputValue&&newInputValue.form_actions){var _parentObj=newInputValue.form_actions.parent;_parentObj&&_parentObj.form_actions&&delete _parentObj.form_actions,_parentObj&&_parentObj.form_list&&delete _parentObj.form_list,_parentObj&&_parentObj.form_action&&delete _parentObj.form_action,_parentObj&&_parentObj.list_action&&delete _parentObj.list_action,delete newInputValue.form_actions,newInputValue.form_actions={parent:_parentObj}}this.props.handleChange(newInputValue)}else this.props.handleChange(newInputValue)}else this.props.handleChange({})}},{key:"componentDidUpdate",value:function(prevProps,prevState){var schema=this.state.dataSchema,uischema=this.state.uiSchema,defaultValue=this.state.defaultValue,valueChanged=!1;if(_.isEqual(prevProps.context,this.props.context)||(valueChanged=!0),_.isEqual(prevProps.schema,this.props.schema)||(schema=this.props.schema?"string"==typeof this.props.schema?JSON.parse(this.props.schema):this.props.schema:{},valueChanged=!0),_.isEqual(prevProps.uischema,this.props.uischema)||(uischema=this.props.uischema?"string"==typeof this.props.uischema?JSON.parse(this.props.uischema):this.props.uischema:{},valueChanged=!0),!_.isEqual(prevProps.defaultvalue,this.props.defaultvalue)){var formData=this.props.defaultvalue?"string"==typeof this.props.defaultvalue?JSON.parse(this.props.defaultvalue):this.props.defaultvalue:{};formData.form_list&&delete formData.form_list,formData.form_actions&&delete formData.form_actions,formData&&Object.keys(formData).length>0&&(defaultValue=_extends({form_list:{parent:formData},form_actions:{parent:formData}},formData)),valueChanged=!0}if(!_.isEqual(prevState.defaultValue,this.state.defaultValue)){var isPrevFormActionsClicked=!!prevState.defaultValue.form_actions&&!!prevState.defaultValue.form_actions.actionClicked,isPrevFormListActionClicked=!!prevState.defaultValue.form_list&&!!prevState.defaultValue.form_list.actionClicked,isPrevFormRefActionClicked=!!prevState.defaultValue.ref_action&&!!prevState.defaultValue.ref_action.actionClicked,isPrevFormActionClicked=!!prevState.defaultValue.form_action&&!!prevState.defaultValue.form_action.actionClicked,isCurrentFormActionsClicked=!!this.state.defaultValue.form_actions&&!!this.state.defaultValue.form_actions.actionClicked,isCurrentFormListActionClicked=!!this.state.defaultValue.form_list&&!!this.state.defaultValue.form_list.actionClicked,isCurrentFormRefActionClicked=!!this.state.defaultValue.ref_action&&!!this.state.defaultValue.ref_action.actionClicked,isCurrentFormActionClicked=!!this.state.defaultValue.form_action&&!!this.state.defaultValue.form_action.actionClicked,currentFormData=null,prevFormData=null;if(isPrevFormActionsClicked&&!isCurrentFormActionsClicked||isPrevFormListActionClicked&&!isCurrentFormListActionClicked||isPrevFormRefActionClicked&&!isCurrentFormRefActionClicked||isPrevFormActionClicked&&!isCurrentFormActionClicked)this.processChange();else if(currentFormData=Object.assign({},this.state.defaultValue),prevFormData=Object.assign({},prevState.defaultValue),isPrevFormActionsClicked||isCurrentFormActionsClicked||(delete currentFormData.form_actions,delete prevFormData.form_actions),isPrevFormListActionClicked||isCurrentFormListActionClicked||(delete currentFormData.form_list,delete currentFormData.list_action,delete prevFormData.form_list,delete prevFormData.list_action),isPrevFormRefActionClicked||isCurrentFormRefActionClicked||(delete currentFormData.ref_action,delete prevFormData.ref_action),isPrevFormActionClicked||isCurrentFormActionClicked||(delete currentFormData.form_action,delete prevFormData.form_action),!_.isEqual(prevFormData,currentFormData)&&!currentFormData.onRefAction&&!prevFormData.onRefAction){var changedValues={},currentFormDataNames=Object.keys(currentFormData);for(var currentFormDataIndx in currentFormDataNames){var currentFormDataItemName=currentFormDataNames[currentFormDataIndx],currentFormDataItem=currentFormData[currentFormDataItemName],prevFormDataItem=prevFormData[currentFormDataItemName];_.isEqual(prevFormDataItem,currentFormDataItem)||(changedValues[currentFormDataItemName]=currentFormDataItem)}var changeFieldNames=Object.keys(changedValues);if(changeFieldNames&&changeFieldNames.length>0){var isEmbeddedListChange=!1;for(var changeFieldNamesIndx in changeFieldNames){var changeFieldName=changeFieldNames[changeFieldNamesIndx];if(isEmbeddedListChange=this.isFieldTypeEmbeddedList(changeFieldName,uischema))break}isEmbeddedListChange||this.processChange()}}}valueChanged&&this.setState({dataSchema:schema,uiSchema:uischema,defaultValue:defaultValue,reload:!this.state.reload})}},{key:"isFieldTypeEmbeddedList",value:function(fieldName,uiSchema){var controlElements=[];this.getControlElements(uiSchema,controlElements);var isEmbeddedList=!1;if(controlElements){var filteredControlEle=controlElements.filter(function(controlElement){return"EmbeddedList"==controlElement.subtype&&controlElement.name==fieldName});filteredControlEle&&filteredControlEle.length>0&&(isEmbeddedList=!0)}return isEmbeddedList}},{key:"withComponentDetails",value:function(WrappedComponent,additionalProps){return function(_React$Component2){function HOC(){return _classCallCheck(this,HOC),_possibleConstructorReturn(this,(HOC.__proto__||Object.getPrototypeOf(HOC)).apply(this,arguments))}return _inherits(HOC,_React$Component2),_createClass(HOC,[{key:"render",value:function(){var newProps=_extends({},this.props,additionalProps);return React.createElement(WrappedComponent,newProps)}}]),HOC}(React.Component)}},{key:"render",value:function(){var _this4=this,jss=create(_extends({},jssPreset(),{insertionPoint:$("#head ",this.props.shadow)[0]})),formProps={},formData={};this.state.defaultValue&&((formData=cloneDeep(this.state.defaultValue))&&delete formData.ref_action,formData&&delete formData.list_action,formData&&delete formData.form_action,formData&&delete formData.form_actions,formData&&delete formData.form_list,formData&&delete formData.onRefAction,formData&&(formProps.data=_extends({},formData,{form_list:{parent:formData},form_actions:{parent:formData}})));var context={},config=this.props.context&&this.props.context.config||{},theme=this.props.context&&this.props.context.theme||{},contextKeys=Object.keys(this.props.context);if(this.props.context&&contextKeys.length>0)for(var contextKeyIndx in contextKeys){var contextKey=contextKeys[contextKeyIndx];"config"!=contextKey&&"theme"!=contextKey&&(context[contextKey]=this.props.context[contextKey])}if(this.state.dataSchema&&Object.keys(this.state.dataSchema).length>0){var dSchema=_extends({},this.state.dataSchema);Object.keys(dSchema.properties).map(function(item){return dSchema.properties[item].description=JSON.stringify({data:formData,meta:context||{},config:config,theme:theme})}),formProps.schema=dSchema}if(this.state.uiSchema&&Object.keys(this.state.uiSchema).length>0){var uiSchema=_extends({},this.state.uiSchema),updatedContext={data:formData,meta:context||{},config:config,theme:theme};uiSchema.context=updatedContext,this.addContextToUISchema(uiSchema.elements,updatedContext),formProps.uischema=uiSchema}_.isEqual(formProps,this.formData)||(this.formData=formProps,this.updateJSONForms(formProps));var dynamicFormEl=React.createElement("div",null,React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(StylesProvider,{jss:jss,sheetsManager:new Map},this.state.jsonFormProps?React.createElement(JsonForms,_extends({key:this.formKey},this.state.jsonFormProps,{renderers:[].concat(_toConsumableArray(materialRenderers),[{tester:rankWith(10,isStringControl),renderer:withJsonFormsControlProps(FormWidgets.StringControl)},{tester:rankWith(16,this.isTextTester),renderer:withJsonFormsControlProps(FormWidgets.StringControl)},{tester:rankWith(11,isNumberControl||isIntegerControl),renderer:withJsonFormsControlProps(FormWidgets.NumberControl)},{tester:rankWith(12,isDateControl),renderer:withJsonFormsControlProps(FormWidgets.DateControl)},{tester:rankWith(12,isDateTimeControl),renderer:withJsonFormsControlProps(FormWidgets.DateTimeControl)},{tester:rankWith(13,this.isListTester),renderer:withJsonFormsControlProps(FormWidgets.ListControl)},{tester:rankWith(14,this.isActionsTester),renderer:withJsonFormsControlProps(FormWidgets.ActionsControl)},{tester:rankWith(14,this.isCustomComponentTester),renderer:withJsonFormsControlProps(FormWidgets.CustomControl)},{tester:rankWith(15,this.isSimpleListTester),renderer:withJsonFormsControlProps(FormWidgets.RelatedListControl)},{tester:rankWith(16,this.isRelatedListTester),renderer:withJsonFormsControlProps(FormWidgets.RelatedListControl)},{tester:rankWith(16,this.isEmbeddedListTester),renderer:withJsonFormsLayoutProps(this.withComponentDetails(FormWidgets.EmbeddedListControl,{removeItem:this.removeEmbeddedListItem,addItem:this.addEmbeddedListItem}))},{tester:rankWith(16,this.isLabelControl),renderer:withJsonFormsControlProps(FormWidgets.LabelControl)},{tester:rankWith(17,this.isGroupTester),renderer:withJsonFormsLayoutProps(FormWidgets.GroupRenderer)},{tester:rankWith(17,this.isHorizontalLayoutTester),renderer:FormWidgets.HorizontalLayoutRenderer},{tester:rankWith(17,this.isVerticalLayoutTester),renderer:FormWidgets.VerticalLayoutRenderer},{tester:rankWith(17,this.isTabsTester),renderer:FormWidgets.TabsRenderer},{tester:rankWith(18,this.isStepperTester),renderer:FormWidgets.StepperRenderer}]),cells:[].concat(_toConsumableArray(materialCells),[{tester:rankWith(10,isStringControl),cell:withJsonFormsCellProps(CellRenderers.StringCell)},{tester:rankWith(11,this.isTextTester),cell:withJsonFormsCellProps(CellRenderers.StringCell)},{tester:rankWith(11,isDateControl),cell:withJsonFormsCellProps(CellRenderers.DateCell)},{tester:rankWith(11,isNumberControl),cell:withJsonFormsCellProps(CellRenderers.NumberCell)},{tester:rankWith(12,this.isReferenceCell),cell:withJsonFormsCellProps(CellRenderers.ReferenceCell)},{tester:rankWith(12,this.isDynamicChoiceCell),cell:withJsonFormsCellProps(CellRenderers.DynamicChoiceCell)},{tester:rankWith(12,this.isChoiceCell),cell:withJsonFormsCellProps(CellRenderers.ChoiceCell)},{tester:rankWith(12,this.isTextCell),cell:withJsonFormsCellProps(CellRenderers.TextCell)}]),onChange:function(_ref){_ref.errors;var data=_ref.data;return _this4.handleChange(data)}})):null));return React.createElement("div",{style:{height:"inherit",width:"96%"}},dynamicFormEl)}}]),_JSONForm_}(React.Component),_export("JSONForm",JSONForm=function(props){return _JSONForm_}),_export("JSONForm",JSONForm)}}}),System.register("component/studio/SrsDynamicForm/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/JSONForm/Definition.js","lodash.debounce"],function(_export,_context13){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,JSONForm,debounce,_SrsDynamicForm_,SrsDynamicForm;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentStudioJSONFormDefinitionJs){JSONForm=_componentStudioJSONFormDefinitionJs.JSONForm},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){_SrsDynamicForm_=function(_React$Component){function _SrsDynamicForm_(props){_classCallCheck(this,_SrsDynamicForm_);var _this=_possibleConstructorReturn(this,(_SrsDynamicForm_.__proto__||Object.getPrototypeOf(_SrsDynamicForm_)).call(this,props)),isFormControl=_this.props.isformcontrol+""=="true",formTemplateId=_this.props.templateid?_this.props.templateid:!isFormControl&&_this.props.widgetProps?_this.props.widgetProps.FormTemplate:"",formTemplateName=_this.props.templatename?_this.props.templatename:!isFormControl&&_this.props.widgetProps?_this.props.widgetProps.Template:"",tableName=formTemplateId||formTemplateName?"":_this.props.tablename?_this.props.tablename:!isFormControl&&_this.props.widgetProps?_this.props.widgetProps.TableName:"";tableName=tableName&&tableName.endsWith("_mmf")?tableName.split("_mmf")[0]:tableName;var viewName=_this.props.view?_this.props.view:!isFormControl&&_this.props.widgetProps?_this.props.widgetProps.View:"",recordId=_this.props.recordid?_this.props.recordid:!isFormControl&&_this.props.widgetProps?_this.props.widgetProps.RecordId:"",defaultValue={};if(_this.updateWidgetProps=_this.updateWidgetProps.bind(_this),_this.evaluateFormActions=_this.evaluateFormActions.bind(_this),_this.evaluateOnLoadActions=_this.evaluateOnLoadActions.bind(_this),_this.evaluateOnModalChangeActions=_this.evaluateOnModalChangeActions.bind(_this),_this.getFormActions=_this.getFormActions.bind(_this),_this.getFunctionFromString=_this.getFunctionFromString.bind(_this),_this.needsPreventDefaultSave=_this.needsPreventDefaultSave.bind(_this),_this.needsPreventDefaultShowList=_this.needsPreventDefaultShowList.bind(_this),_this.getThemeData=_this.getThemeData.bind(_this),_this.openModal=_this.openModal.bind(_this),_this.getRecordData=_this.getRecordData.bind(_this),_this.getControlElements=_this.getControlElements.bind(_this),!isFormControl&&_this.props.widgetProps&&_this.props.widgetProps.DefaultData)if("string"==typeof _this.props.widgetProps.DefaultData)try{defaultValue=JSON.parse(_this.props.widgetProps.DefaultData)}catch(err){}else defaultValue=_this.props.widgetProps.DefaultData;else if(_this.props.defaultdata)if("string"==typeof _this.props.defaultdata)try{defaultValue=JSON.parse(_this.props.defaultdata)}catch(err){}else defaultValue=_this.props.defaultdata;return _this.state={dataSchema:{},uiSchema:{},defaultValue:defaultValue,formTemplateId:formTemplateId,modelId:"",modelName:tableName,view:viewName,isReady:!1,formTemplateName:formTemplateName,recordId:recordId,formContext:{},preventDefaultSave:_this.props.isformcontrol+""=="true",preventDefaultShowList:_this.props.isformcontrol+""=="true"},$ele&&$ele.registerElement("DynaForm","studio","React"),_this.handleChange=_this.handleChange.bind(_this),_this.handleChangeFn=_this.handleChangeFn.bind(_this),_this.handleChangeDebounced=debounce(_this.handleChangeFn,100),!isFormControl&&_this.props.updateStore({updates:{widgetControlProps:{}}}),_this}return _inherits(_SrsDynamicForm_,_React$Component),_createClass(_SrsDynamicForm_,[{key:"getControlElements",value:function(nodeEl,result){var _this2=this;nodeEl&&nodeEl.elements&&nodeEl.elements.length>0&&nodeEl.elements.map(function(ele,indx){ele.elements?_this2.getControlElements(ele,result):"Control"==ele.type&&result.push({subtype:ele.subtype,scope:ele.scope,name:ele.name})})}},{key:"getThemeData",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var themeData,themeRecords,themeRecordIndx,themeRecord;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return themeData={},_context.next=3,$qry.getCachableRecords("ControlTheme_studio",{},["uid","FormTheme","Styles","Control"]);case 3:if((themeRecords=_context.sent)&&themeRecords.length>0)for(themeRecordIndx in themeRecords)themeRecord=themeRecords[themeRecordIndx],themeData[themeRecord.FormTheme]=themeData[themeRecord.FormTheme]||{},themeData[themeRecord.FormTheme][themeRecord.Control]=themeRecord.Styles;return _context.abrupt("return",themeData);case 6:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"openModal",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(payload){var result,templateId,templateFilter,templateRecord,pageId,pageScope,pageFilter,pageRecord;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(payload.modalname||payload.name){_context2.next=3;break}return this.props.addErrorMessage({title:"Error - ",subtitle:"Modal Name cannot be empty while opening the modal."}),_context2.abrupt("return");case 3:if(result={},!payload.type){_context2.next=53;break}result.modalname=payload.modalname||payload.name,_context2.t0=payload.type,_context2.next="form"===_context2.t0?9:"page"===_context2.t0?29:50;break;case 9:if(templateId="",!payload.template){_context2.next=14;break}templateId=payload.template,_context2.next=26;break;case 14:if(!payload.table&&!payload.formname){_context2.next=26;break}return templateFilter=payload.formname?{where:{Name:payload.formname}}:{where:{ModelName:payload.table,View:payload.view||"Defalut"}},_context2.next=18,$qry.getCachableRecords("FormTemplate_studio",templateFilter,["uid"]);case 18:if(!((templateRecord=_context2.sent)&&templateRecord.length>0)){_context2.next=24;break}templateRecord=templateRecord[0],templateId=templateRecord.uid,_context2.next=26;break;case 24:return this.props.addErrorMessage({title:"Error - ",subtitle:"Form not found!"}),_context2.abrupt("return");case 26:return result.modalcomponent={name:"SrsDynamicForm",scope:"studio",componentprops:{FormTemplate:templateId,DefaultData:payload.formdata}},result.modalparams={},_context2.abrupt("break",50);case 29:if(pageId="",!payload.modalpage&&!payload.pageId){_context2.next=34;break}pageId=payload.pageId,_context2.next=47;break;case 34:if(!payload.pageName){_context2.next=47;break}return pageScope=payload.pageScope?payload.pageScope:"studio",pageFilter={where:{and:[{Name:payload.pageName},{Scope:pageScope}]}},_context2.next=39,$qry.getCachableRecords("MetaSlide",pageFilter,["uid"]);case 39:if(!((pageRecord=_context2.sent)&&pageRecord.length>0)){_context2.next=45;break}pageRecord=pageRecord[0],pageId=pageRecord.uid,_context2.next=47;break;case 45:return this.props.addErrorMessage({title:"Error - ",subtitle:"Page not found!"}),_context2.abrupt("return");case 47:return result.modalpage=pageId,result.modalparams=payload.pageparams,_context2.abrupt("break",50);case 50:result.layout=payload.layout,_context2.next=57;break;case 53:if(!payload.modalcomponent||"PageDesignerPreview"!=payload.modalcomponent.name){_context2.next=56;break}return this.props.addErrorMessage({title:"Error - ",subtitle:"Invalid usage of openModal API."}),_context2.abrupt("return");case 56:result=payload;case 57:this.props.openModal(result);case 58:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"needsPreventDefaultSave",value:function(formActions){if(this.props.isformcontrol+""=="true")return!0;this.state.preventDefaultSave;if(formActions&&formActions.action_save&&formActions.action_save.onClick&&formActions.action_save.onClick.length>0){var onClickActions=formActions.action_save.onClick;for(var onClickActionIndx in onClickActions){if(onClickActions[onClickActionIndx].PreventDefaultSave+""=="true")return!0}}}},{key:"needsPreventDefaultShowList",value:function(formActions){if(this.props.isformcontrol+""=="true")return!0;var actionName="action_show_list";this.state.preventDefaultShowList;if(formActions&&formActions[actionName]&&formActions[actionName].onClick&&formActions[actionName].onClick.length>0){var onClickActions=formActions[actionName].onClick;for(var onClickActionIndx in onClickActions){if(onClickActions[onClickActionIndx].PreventDefaultShowList+""=="true")return!0}}}},{key:"getFormActions",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(modelId,modelName,formTemplateId){var result,formActionQuery,records,recordIndx,formActionRecord,formActionKey,havingMultipleKeys,actionKeys,actionKeyIndx,actionName;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(result={},formActionQuery={},!formTemplateId){_context3.next=6;break}formActionQuery={where:{or:[{Form:formTemplateId},{Form:""}]}},_context3.next=11;break;case 6:if(!modelId&&!modelName){_context3.next=10;break}formActionQuery={where:{or:[{Model:modelId},{Model:modelName}]}},_context3.next=11;break;case 10:return _context3.abrupt("return",result);case 11:return _context3.next=13,$qry.getCachableRecords("FormActions_studio",formActionQuery,["uid","Name","Form","SourceActionType","SourceField","CustomSource","SourceAction","TargetActionType","TargetActionField","Order","TargetActionScript","Condition","PreventDefaultSave","PreventDefaultShowList"]);case 13:if(!((records=_context3.sent)&&records.length>0)){_context3.next=36;break}_context3.t0=_regeneratorRuntime.keys(records);case 16:if((_context3.t1=_context3.t0()).done){_context3.next=36;break}recordIndx=_context3.t1.value,formActionRecord=records[recordIndx],formActionKey="",havingMultipleKeys=!1,_context3.t2=formActionRecord.SourceActionType,_context3.next="onChange"===_context3.t2?24:"onClick"===_context3.t2?27:"onLoad"===_context3.t2?29:"onModalChange"===_context3.t2?31:33;break;case 24:return(formActionKey=formActionRecord.SourceField||formActionRecord.CustomSource).indexOf(",")>-1&&(havingMultipleKeys=!0),_context3.abrupt("break",33);case 27:return formActionKey="action_"+formActionRecord.SourceAction,_context3.abrupt("break",33);case 29:return formActionKey="form",_context3.abrupt("break",33);case 31:return formActionKey="modal",_context3.abrupt("break",33);case 33:if(formActionKey)if(havingMultipleKeys)for(actionKeyIndx in actionKeys=formActionKey.split(","))actionName=actionKeys[actionKeyIndx].trim(),result[actionName]=result[actionName]||{},result[actionName][formActionRecord.SourceActionType]=result[actionName][formActionRecord.SourceActionType]||[],result[actionName][formActionRecord.SourceActionType].push(formActionRecord);else result[formActionKey]=result[formActionKey]||{},result[formActionKey][formActionRecord.SourceActionType]=result[formActionKey][formActionRecord.SourceActionType]||[],result[formActionKey][formActionRecord.SourceActionType].push(formActionRecord);_context3.next=16;break;case 36:return _context3.abrupt("return",result);case 37:case"end":return _context3.stop()}},_callee3,this)}));return function(_x2,_x3,_x4){return _ref3.apply(this,arguments)}}()},{key:"handleChangeFn",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(inputVal,meta){var wControlProps,widgetProps,formOutput,updatedFormOutput,propName,_ref5,data,metadata,actionFound,updatedDefaultValue,filteredDefaultValue,defaultValueKeys,defaultValueKeyIndx,defaultValueKey,currentDefaultValue,currentDefaultValueKeys,currentDefaultValueKeyIndx,currentDefaultValueKey,stateChanges,formContext;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(inputVal){_context4.next=2;break}return _context4.abrupt("return");case 2:if(!meta||"embedded_list"!=meta.type){_context4.next=6;break}return wControlProps=Object.assign({},_extends({},this.props.widgetControlProps,inputVal)),this.props.updateStore({updates:{widgetControlProps:wControlProps}}),_context4.abrupt("return");case 6:for(propName in widgetProps=Object.assign({},this.props.widgetProps),formOutput="string"==typeof(formOutput=widgetProps.FormOutput||{})?JSON.parse(formOutput):formOutput,updatedFormOutput={},formOutput)"form_action"!=propName&&"form_actions"!=propName&&"form_list"!=propName&&"ref_action"!=propName&&"list_action"!=propName&&(updatedFormOutput[propName]=formOutput[propName]);return _context4.next=13,this.evaluateFormActions(inputVal);case 13:for(defaultValueKeyIndx in _ref5=_context4.sent,data=_ref5.data,metadata=_ref5.metadata,actionFound=_ref5.actionFound,inputVal.form_action&&(inputVal.form_action.preventDefaultSave=actionFound,inputVal.form_action.preventDefaultShowList=actionFound),actionFound?(delete data.ref_action,delete data.form_action,delete data.list_action,delete inputVal.ref_action,delete inputVal.form_action,delete inputVal.list_action,widgetProps.FormOutput=_extends({},updatedFormOutput,inputVal,data)):widgetProps.FormOutput=_extends({},updatedFormOutput,inputVal),this.updateWidgetProps(widgetProps,null,!0),updatedDefaultValue=_extends({},this.state.defaultValue,updatedFormOutput),filteredDefaultValue={},defaultValueKeys=Object.keys(updatedDefaultValue))"ref_action"!=(defaultValueKey=defaultValueKeys[defaultValueKeyIndx])&&"form_action"!=defaultValueKey&&"list_action"!=defaultValueKey&&"form_actions"!=defaultValueKey&&"form_list"!=defaultValueKey&&(filteredDefaultValue[defaultValueKey]=updatedDefaultValue[defaultValueKey]);for(currentDefaultValueKeyIndx in currentDefaultValue={},currentDefaultValueKeys=Object.keys(this.state.defaultValue))"ref_action"!=(currentDefaultValueKey=currentDefaultValueKeys[currentDefaultValueKeyIndx])&&"form_action"!=currentDefaultValueKey&&"list_action"!=currentDefaultValueKey&&"form_actions"!=currentDefaultValueKey&&"form_list"!=currentDefaultValueKey&&(currentDefaultValue[currentDefaultValueKey]=this.state.defaultValue[currentDefaultValueKey]);stateChanges={},formContext=_extends({},this.state.formContext,metadata),stateChanges.formContext=formContext,!_.isEqual(formContext,this.state.formContext)&&this.setState(stateChanges);case 31:case"end":return _context4.stop()}},_callee4,this)}));return function(_x5,_x6){return _ref4.apply(this,arguments)}}()},{key:"evaluateFormActions",value:function(){var _ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(changedValues){var actionFound,currentFormData,scriptOutputData,scriptOutputMetadata,scriptOutputKeys,scriptOutput,currentStateKeys,currentStateKeyIndx,currentStateKey,updatedFormData,fieldMetaData,self,changedFields,changedFieldMap,formActions,actionName,actionPayload,onClickActions,onClickActionIndx,onClickAction,sourceMatched,notifier,conditionFn,_notifier,scriptFn,scriptOutputKeyIndx,scriptOutputKey,scriptOutputMetaKeys,scriptOutputMetaKeyIndx,scriptOutputMetaKey,metaMap,changedValueKeys,changedValueIndx,changedValueKey,changedFieldKeySuffix,_changedValueKeys,changedFieldsIndx,changedField,onChangeActions,onChangeActionIndx,onChangeAction,_sourceMatched,_notifier2,_conditionFn,_notifier3,_scriptFn,_metaMap,filteredFormData,updatedFormDataKeys,updatedFormDataKeyIndx,updatedFormDataKey;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:for(currentStateKeyIndx in actionFound=!1,currentFormData={},scriptOutputData=void 0,scriptOutputMetadata=void 0,scriptOutputKeys=void 0,scriptOutput=void 0,currentStateKeys=Object.keys(this.state.defaultValue))"form_action"!=(currentStateKey=currentStateKeys[currentStateKeyIndx])&&"ref_action"!=currentStateKey&&"list_action"!=currentStateKey&&(currentFormData[currentStateKey]=this.state.defaultValue[currentStateKey]);if((updatedFormData=JSON.parse(JSON.stringify(_extends({},currentFormData,changedValues))))&&updatedFormData.form_action&&delete updatedFormData.form_action,fieldMetaData=_extends({},this.state.formContext),self=this,changedFields=[],changedFieldMap={},formActions=this.state.formActions,!(changedValues.form_action&&changedValues.form_action.actionClicked||changedValues.list_action&&changedValues.list_action.actionClicked||changedValues.ref_action&&changedValues.ref_action.actionClicked)){_context5.next=66;break}if(actionName="",actionPayload={},changedValues.form_action&&changedValues.form_action.actionClicked?actionName="action_"+changedValues.form_action.actionClicked:changedValues.list_action&&changedValues.list_action.actionClicked?actionName="action_"+changedValues.list_action.actionClicked:changedValues.ref_action&&changedValues.ref_action.actionClicked&&(actionName="action_"+changedValues.ref_action.actionClicked),actionPayload=changedValues.form_action.actionPayload,!(formActions&&formActions[actionName]&&formActions[actionName].onClick&&formActions[actionName].onClick.length>0)){_context5.next=64;break}actionFound=!0,onClickActions=formActions[actionName].onClick,_context5.t0=_regeneratorRuntime.keys(onClickActions);case 21:if((_context5.t1=_context5.t0()).done){_context5.next=64;break}if(onClickActionIndx=_context5.t1.value,onClickAction=onClickActions[onClickActionIndx],sourceMatched=!1,!onClickAction.Condition){_context5.next=40;break}return _context5.prev=26,notifier={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context5.next=30,self.getFunctionFromString(onClickAction.Condition,{data:updatedFormData,changes:changedFieldMap,actionPayload:actionPayload,$notifier:notifier});case 30:return conditionFn=_context5.sent,_context5.next=33,conditionFn();case 33:sourceMatched=_context5.sent,_context5.next=38;break;case 36:_context5.prev=36,_context5.t2=_context5.catch(26);case 38:_context5.next=41;break;case 40:sourceMatched=!0;case 41:if("Scripted"!=onClickAction.TargetActionType){_context5.next=60;break}return _notifier={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context5.next=45,self.getFunctionFromString(onClickAction.TargetActionScript,{data:updatedFormData,changes:changedFieldMap,actionPayload:actionPayload,$matched:sourceMatched,$notifier:_notifier,$rootel:this.refs.mainpage});case 45:return scriptFn=_context5.sent,_context5.prev=46,_context5.next=49,scriptFn();case 49:if(scriptOutput=_context5.sent,scriptOutputData=scriptOutput.data,scriptOutputMetadata=scriptOutput.meta,scriptOutputData&&Object.keys(scriptOutputData).length>0)for(scriptOutputKeyIndx in scriptOutputKeys=Object.keys(scriptOutputData))scriptOutputKey=scriptOutputKeys[scriptOutputKeyIndx],scriptOutputData[scriptOutputKey]&&(updatedFormData[scriptOutputKey]=scriptOutputData[scriptOutputKey]);if(scriptOutputMetadata&&Object.keys(scriptOutputMetadata).length>0)for(scriptOutputMetaKeyIndx in scriptOutputMetaKeys=Object.keys(scriptOutputMetadata))scriptOutputMetaKey=scriptOutputMetaKeys[scriptOutputMetaKeyIndx],scriptOutputMetadata[scriptOutputMetaKey]&&(fieldMetaData[scriptOutputMetaKey]=_extends({},fieldMetaData[scriptOutputMetaKey],scriptOutputMetadata[scriptOutputMetaKey]));_context5.next=58;break;case 56:_context5.prev=56,_context5.t3=_context5.catch(46);case 58:_context5.next=62;break;case 60:metaMap={Hide:{visible:!sourceMatched},Show:{visible:!!sourceMatched},ReadOnly:{enabled:!sourceMatched},ReadWrite:{enabled:!!sourceMatched},"Not Required":{required:!sourceMatched},Required:{required:!!sourceMatched}},fieldMetaData[onClickAction.TargetActionField]=metaMap[onClickAction.TargetActionType];case 62:_context5.next=21;break;case 64:_context5.next=122;break;case 66:for(changedValueIndx in changedValueKeys=(changedValueKeys=Object.keys(changedValues)).filter(function(changedValueKey){return"form_actions"!=changedValueKey&&"form_list"!=changedValueKey}))changedValueKey=changedValueKeys[changedValueIndx],_.isEqual(currentFormData[changedValueKey],changedValues[changedValueKey])||(changedFields.push(changedValueKey),changedValueKey.indexOf(".")>-1?(changedFieldKeySuffix=changedValueKey.split(".")[1],changedFields.push(changedFieldKeySuffix),_changedValueKeys=[changedValueKey,changedValueKey.split(".")[1]],changedFieldMap[_changedValueKeys[0]]={current:changedValues[changedValueKey],past:currentFormData[changedValueKey]},changedFieldMap[_changedValueKeys[1]]={current:changedValues[changedValueKey],past:currentFormData[changedValueKey]}):changedFieldMap[changedValueKey]={current:changedValues[changedValueKey],past:currentFormData[changedValueKey]});_context5.t4=_regeneratorRuntime.keys(changedFields);case 70:if((_context5.t5=_context5.t4()).done){_context5.next=122;break}if(changedFieldsIndx=_context5.t5.value,changedField=changedFields[changedFieldsIndx],!(formActions&&formActions[changedField]&&formActions[changedField].onChange&&formActions[changedField].onChange.length>0)){_context5.next=120;break}actionFound=!0,onChangeActions=formActions[changedField].onChange,_context5.t6=_regeneratorRuntime.keys(onChangeActions);case 77:if((_context5.t7=_context5.t6()).done){_context5.next=120;break}if(onChangeActionIndx=_context5.t7.value,onChangeAction=onChangeActions[onChangeActionIndx],_sourceMatched=!1,!onChangeAction.Condition){_context5.next=96;break}return _context5.prev=82,_notifier2={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context5.next=86,self.getFunctionFromString(onChangeAction.Condition,{data:updatedFormData,changes:changedFieldMap,$notifier:_notifier2});case 86:return _conditionFn=_context5.sent,_context5.next=89,_conditionFn();case 89:_sourceMatched=_context5.sent,_context5.next=94;break;case 92:_context5.prev=92,_context5.t8=_context5.catch(82);case 94:_context5.next=97;break;case 96:_sourceMatched=!0;case 97:if("Scripted"!=onChangeAction.TargetActionType){_context5.next=116;break}return _notifier3={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context5.next=101,self.getFunctionFromString(onChangeAction.TargetActionScript,{data:updatedFormData,changes:changedFieldMap,$matched:_sourceMatched,$notifier:_notifier3,$rootel:this.refs.mainpage});case 101:return _scriptFn=_context5.sent,_context5.prev=102,_context5.next=105,_scriptFn();case 105:scriptOutput=_context5.sent,scriptOutputData=scriptOutput.data,scriptOutputMetadata=scriptOutput.meta,scriptOutputData&&Object.keys(scriptOutputData).length>0&&(updatedFormData=_extends({},updatedFormData,scriptOutputData)),scriptOutputMetadata&&Object.keys(scriptOutputMetadata).length>0&&(fieldMetaData=_extends({},fieldMetaData,scriptOutputMetadata)),_context5.next=114;break;case 112:_context5.prev=112,_context5.t9=_context5.catch(102);case 114:_context5.next=118;break;case 116:_metaMap={Hide:{visible:!_sourceMatched},Show:{visible:!!_sourceMatched},ReadOnly:{enabled:!_sourceMatched},ReadWrite:{enabled:!!_sourceMatched},"Not Required":{required:!_sourceMatched},Required:{required:!!_sourceMatched}},onChangeAction.TargetActionField&&(fieldMetaData[onChangeAction.TargetActionField]=_metaMap[onChangeAction.TargetActionType]);case 118:_context5.next=77;break;case 120:_context5.next=70;break;case 122:for(updatedFormDataKeyIndx in filteredFormData={},updatedFormDataKeys=Object.keys(updatedFormData))"form_action"!=(updatedFormDataKey=updatedFormDataKeys[updatedFormDataKeyIndx])&&"ref_action"!=updatedFormDataKey&&"list_action"!=updatedFormDataKey&&(filteredFormData[updatedFormDataKey]=updatedFormData[updatedFormDataKey]);return _context5.abrupt("return",{data:filteredFormData,metadata:fieldMetaData,actionFound:actionFound});case 126:case"end":return _context5.stop()}},_callee5,this,[[26,36],[46,56],[82,92],[102,112]])}));return function(_x7){return _ref6.apply(this,arguments)}}()},{key:"evaluateOnLoadActions",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(initialValues,formActions){var updatedFormData,fieldMetaData,self,actionFound,onLoadActions,loadActionIndx,loadAction,sourceMatched,notifier,conditionFn,_notifier4,scriptFn,scriptOutput,scriptOutputData,scriptOutputMetadata,scriptOutputKeys,scriptOutputKeyIndx,scriptOutputKey,scriptOutputMetaKeys,scriptOutputMetaKeyIndx,scriptOutputMetaKey;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(_extends({},initialValues),updatedFormData=_extends({},initialValues),fieldMetaData={},self=this,actionFound=!1,!((onLoadActions=formActions&&formActions.form?formActions.form.onLoad:null)&&onLoadActions.length>0)){_context6.next=48;break}_context6.t0=_regeneratorRuntime.keys(onLoadActions);case 8:if((_context6.t1=_context6.t0()).done){_context6.next=48;break}if(loadActionIndx=_context6.t1.value,loadAction=onLoadActions[loadActionIndx],sourceMatched=!1,!loadAction.Condition){_context6.next=27;break}return _context6.prev=13,notifier={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context6.next=17,self.getFunctionFromString(loadAction.Condition,{data:updatedFormData,changes:{},$notifier:notifier});case 17:return conditionFn=_context6.sent,_context6.next=20,conditionFn();case 20:sourceMatched=_context6.sent,_context6.next=25;break;case 23:_context6.prev=23,_context6.t2=_context6.catch(13);case 25:_context6.next=29;break;case 27:sourceMatched=!0,actionFound=!0;case 29:if("Scripted"!=loadAction.TargetActionType){_context6.next=46;break}return _notifier4={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context6.next=33,self.getFunctionFromString(loadAction.TargetActionScript,{data:updatedFormData,changes:{},$matched:sourceMatched,$notifier:_notifier4,$rootel:this.refs.mainpage});case 33:return scriptFn=_context6.sent,_context6.prev=34,_context6.next=37,scriptFn();case 37:if(scriptOutput=_context6.sent,scriptOutputData=scriptOutput.data,scriptOutputMetadata=scriptOutput.meta,scriptOutputData&&Object.keys(scriptOutputData).length>0)for(scriptOutputKeyIndx in scriptOutputKeys=Object.keys(scriptOutputData))scriptOutputKey=scriptOutputKeys[scriptOutputKeyIndx],scriptOutputData[scriptOutputKey]&&(updatedFormData[scriptOutputKey]=scriptOutputData[scriptOutputKey]);if(scriptOutputMetadata&&Object.keys(scriptOutputMetadata).length>0)for(scriptOutputMetaKeyIndx in scriptOutputMetaKeys=Object.keys(scriptOutputMetadata))scriptOutputMetaKey=scriptOutputMetaKeys[scriptOutputMetaKeyIndx],scriptOutputMetadata[scriptOutputMetaKey]&&(fieldMetaData[scriptOutputMetaKey]=_extends({},fieldMetaData[scriptOutputMetaKey],scriptOutputMetadata[scriptOutputMetaKey]));_context6.next=46;break;case 44:_context6.prev=44,_context6.t3=_context6.catch(34);case 46:_context6.next=8;break;case 48:return _context6.abrupt("return",{data:updatedFormData,metadata:fieldMetaData,actionFound:actionFound});case 49:case"end":return _context6.stop()}},_callee6,this,[[13,23],[34,44]])}));return function(_x8,_x9){return _ref7.apply(this,arguments)}}()},{key:"evaluateOnModalChangeActions",value:function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(initialValues,modalProps){var updatedFormData,fieldMetaData,self,actionFound,onModalChangeActions,onModalChangeActionIndx,modalChangeAction,sourceMatched,notifier,conditionFn,_notifier5,scriptFn,scriptOutput,scriptOutputData,scriptOutputMetadata,scriptOutputKeys,scriptOutputKeyIndx,scriptOutputKey,scriptOutputMetaKeys,scriptOutputMetaKeyIndx,scriptOutputMetaKey;return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(_extends({},initialValues),updatedFormData=_extends({},initialValues),fieldMetaData={},self=this,actionFound=!1,!((onModalChangeActions=this.state.formActions&&this.state.formActions.modal?this.state.formActions.modal.onModalChange:null)&&onModalChangeActions.length>0)){_context7.next=48;break}_context7.t0=_regeneratorRuntime.keys(onModalChangeActions);case 8:if((_context7.t1=_context7.t0()).done){_context7.next=48;break}if(onModalChangeActionIndx=_context7.t1.value,modalChangeAction=onModalChangeActions[onModalChangeActionIndx],sourceMatched=!1,!modalChangeAction.Condition){_context7.next=27;break}return _context7.prev=13,notifier={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context7.next=17,self.getFunctionFromString(modalChangeAction.Condition,{data:updatedFormData,changes:{},$notifier:notifier,$modal:modalProps});case 17:return conditionFn=_context7.sent,_context7.next=20,conditionFn();case 20:sourceMatched=_context7.sent,_context7.next=25;break;case 23:_context7.prev=23,_context7.t2=_context7.catch(13);case 25:_context7.next=29;break;case 27:sourceMatched=!0,actionFound=!0;case 29:if("Scripted"!=modalChangeAction.TargetActionType){_context7.next=46;break}return _notifier5={openModal:self.openModal,closeModal:function(){return self.props.updateStore({updates:{cancelpreview:!0}})},addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_context7.next=33,self.getFunctionFromString(modalChangeAction.TargetActionScript,{data:updatedFormData,changes:{},$matched:sourceMatched,$notifier:_notifier5,$modal:modalProps});case 33:return scriptFn=_context7.sent,_context7.prev=34,_context7.next=37,scriptFn();case 37:if(scriptOutput=_context7.sent,scriptOutputData=scriptOutput.data,scriptOutputMetadata=scriptOutput.meta,scriptOutputData&&Object.keys(scriptOutputData).length>0)for(scriptOutputKeyIndx in scriptOutputKeys=Object.keys(scriptOutputData))scriptOutputKey=scriptOutputKeys[scriptOutputKeyIndx],scriptOutputData[scriptOutputKey]&&(updatedFormData[scriptOutputKey]=scriptOutputData[scriptOutputKey]);if(scriptOutputMetadata&&Object.keys(scriptOutputMetadata).length>0)for(scriptOutputMetaKeyIndx in scriptOutputMetaKeys=Object.keys(scriptOutputMetadata))scriptOutputMetaKey=scriptOutputMetaKeys[scriptOutputMetaKeyIndx],scriptOutputMetadata[scriptOutputMetaKey]&&(fieldMetaData[scriptOutputMetaKey]=_extends({},fieldMetaData[scriptOutputMetaKey],scriptOutputMetadata[scriptOutputMetaKey]));_context7.next=46;break;case 44:_context7.prev=44,_context7.t3=_context7.catch(34);case 46:_context7.next=8;break;case 48:return _context7.abrupt("return",{data:updatedFormData,metadata:fieldMetaData,actionFound:actionFound});case 49:case"end":return _context7.stop()}},_callee7,this,[[13,23],[34,44]])}));return function(_x10,_x11){return _ref8.apply(this,arguments)}}()},{key:"getFunctionFromString",value:function(functionStr,inputParams){return new Function(" var inputParams = arguments && arguments.length > 0?arguments[0]: {};                \n                                var $form = inputParams.data;\n                                var $changes = inputParams.changes;\n                                var $matched = !!inputParams.$matched;\n                                var $notifier = inputParams.$notifier;\n                                var $action = inputParams.actionPayload;\n                                var $modal = inputParams.$modal;\n                                var $rootel = inputParams.$rootel;\n                                return ("+functionStr+")")(inputParams)}},{key:"updateWidgetProps",value:function(widgetProps,inputVal,noUpdates){if(noUpdates||(inputVal&&inputVal.form_action||widgetProps.FormOutput&&widgetProps.FormOutput.form_action&&delete widgetProps.FormOutput.form_action,inputVal&&inputVal.ref_action||widgetProps.FormOutput&&widgetProps.FormOutput.ref_action&&delete widgetProps.FormOutput.ref_action,inputVal&&inputVal.list_action||widgetProps.FormOutput&&widgetProps.FormOutput.list_action&&delete widgetProps.FormOutput.list_action,inputVal&&inputVal.form_actions||widgetProps.FormOutput&&widgetProps.FormOutput.form_actions&&delete widgetProps.FormOutput.form_actions),this.props.isformcontrol+""=="true"){if(this.props.controlname&&(!widgetProps.FormOutput||!widgetProps.FormOutput.form_action||!widgetProps.FormOutput.form_action.actionClicked)&&(!widgetProps.FormOutput||!widgetProps.FormOutput.ref_action||!widgetProps.FormOutput.ref_action.actionClicked)&&(!widgetProps.FormOutput||!widgetProps.FormOutput.list_action||!widgetProps.FormOutput.list_action.actionClicked)){var controlProps=Object.assign({},this.props.controlProps),FormOutput=widgetProps.FormOutput?"string"==typeof widgetProps.FormOutput?JSON.parse(widgetProps.FormOutput):widgetProps.FormOutput:_extends({},widgetProps);FormOutput.form_actions&&delete FormOutput.form_actions,FormOutput.form_list&&delete FormOutput.form_list,FormOutput.form_action&&delete FormOutput.form_action,FormOutput.list_action&&delete FormOutput.list_action;var updatedData={controlProps:_extends({},controlProps,FormOutput)};if(this.props.parentwidgetid&&this.props.controlid!=this.props.parentwidgetid){var parentWidgetProps=Object.assign({},this.props.parentWidgetProps);parentWidgetProps.FormOutput=parentWidgetProps.FormOutput||{};try{parentWidgetProps.FormOutput="string"==typeof parentWidgetProps.FormOutput?JSON.parse(parentWidgetProps.FormOutput):parentWidgetProps.FormOutput}catch(err){}parentWidgetProps.FormOutput[this.props.controlid]=_extends({},parentWidgetProps.FormOutput[this.props.controlid],controlProps),updatedData.parentWidgetProps=parentWidgetProps}this.props.updateStore({updates:updatedData})}}else this.props.updateStore({updates:{widgetProps:widgetProps}})}},{key:"handleChange",value:function(inputVal,meta){this.state.isReady&&inputVal&&Object.keys(inputVal).length>0&&this.handleChangeFn(inputVal,meta)}},{key:"getRecordData",value:function(){var _ref9=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(recordId){var rawSchema,fieldCodes,rawSchemaFields,rawSchemaFieldIndx,rawSchemaField,tableName,recordsData,recordData,_ref10,data;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(rawSchema=this.state.rawSchema,fieldCodes=["uid"],rawSchema&&rawSchema.dataType)for(rawSchemaFieldIndx in rawSchemaFields=rawSchema.dataType)"uid"!=(rawSchemaField=rawSchemaFields[rawSchemaFieldIndx]).code&&fieldCodes.push(rawSchemaField.code);return tableName="mmf"!=this.state.scope&&this.state.scope?this.state.modelName+"_"+this.state.scope:this.state.modelName,_context8.next=6,$qry.getRecords(tableName,{where:{uid:recordId}},fieldCodes);case 6:if(!((recordsData=_context8.sent)&&recordsData.length>0)){_context8.next=19;break}return(recordData=recordsData[0]).form_list&&delete recordData.form_list,recordData.form_actions&&delete recordData.form_actions,recordData=_extends({},recordData,{form_list:{parent:recordData},form_actions:{parent:recordData}}),_context8.next=14,this.evaluateOnLoadActions(recordData,this.state.formActions);case 14:_ref10=_context8.sent,data=_ref10.data,_ref10.metadata,recordData=_extends({},recordData,data),this.setState({defaultValue:recordData});case 19:case"end":return _context8.stop()}},_callee8,this)}));return function(_x12){return _ref9.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var _ref11=_asyncToGenerator(_regeneratorRuntime.mark(function _callee11(){var modelName,viewName,modelScope,formTemplateFilter,self,schemaNameArry,themeData,dataSchema,_this3=this;return _regeneratorRuntime.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return null,modelName=this.state.modelName,viewName=this.state.view?this.state.view:"Default",modelScope="",formTemplateFilter=null,self=this,modelName?(schemaNameArry=modelName.indexOf("_")>-1?modelName.split("_"):[modelName],modelName=schemaNameArry.length>1?schemaNameArry.slice(0,schemaNameArry.length-1).join("_"):schemaNameArry[0],modelScope=schemaNameArry.length>1?schemaNameArry[schemaNameArry.length-1]:"mmf",(formTemplateFilter={}).where={and:[{ModelName:modelName},{Scope:modelScope}]},viewName?formTemplateFilter.where.and.push({or:[{View:viewName},{View:"Default"}]}):formTemplateFilter.where.and.push({View:"Default"})):this.state.formTemplateId?(formTemplateFilter={}).where={uid:this.state.formTemplateId}:this.state.formTemplateName&&((formTemplateFilter={}).where={Name:this.state.formTemplateName}),_context11.next=9,this.getThemeData();case 9:themeData=_context11.sent,dataSchema={},formTemplateFilter?$qry.getCachableRecords("FormTemplate_studio",formTemplateFilter,["uid","Name","Scope","Model","View","ModelName","schema","rawschema","uischema","rawuischema","default","Theme"]).then(function(){var _ref12=_asyncToGenerator(_regeneratorRuntime.mark(function _callee10(data){var dataRecord,filteredData,formActions,preventDefaultSave,preventDefaultShowList,rawSchema,fieldCodes,rawSchemaFields,rawSchemaFieldIndx,rawSchemaField,tableName,defaultFormData,_ref16,_data3,metadata,dataRecordDefaultValue,defaultData,widgetProps;return _regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(!(data&&data.length>0)){_context10.next=29;break}return dataRecord=data[0],data.length>1&&(filteredData=data.filter(function(dataItem){return dataItem.View==viewName}))&&1==filteredData.length&&(dataRecord=filteredData[0]),_context10.next=5,self.getFormActions(dataRecord.Model,dataRecord.ModelName,dataRecord.uid);case 5:if(formActions=_context10.sent,preventDefaultSave=_this3.needsPreventDefaultSave(formActions),preventDefaultShowList=_this3.needsPreventDefaultShowList(formActions),!_this3.state.recordId){_context10.next=16;break}if(rawSchema=dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},fieldCodes=["uid"],rawSchema&&rawSchema.dataType)for(rawSchemaFieldIndx in rawSchemaFields=rawSchema.dataType)"uid"!=(rawSchemaField=rawSchemaFields[rawSchemaFieldIndx]).code&&fieldCodes.push(rawSchemaField.code);tableName="mmf"!=dataRecord.Scope&&dataRecord.Scope?dataRecord.ModelName+"_"+dataRecord.Scope:dataRecord.ModelName,$qry.getRecords(tableName,{where:{uid:_this3.state.recordId}},fieldCodes).then(function(){var _ref13=_asyncToGenerator(_regeneratorRuntime.mark(function _callee9(recordsData){var recordData,_ref14,_data,metadata,schemaObj,defaultFormData,_ref15,_data2,_metadata,dataRecordDefaultValue,defaultData,_themeData;return _regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(!(recordsData&&recordsData.length>0)){_context9.next=15;break}return(recordData=recordsData[0]).form_list&&delete recordData.form_list,recordData.form_actions&&delete recordData.form_actions,recordData=_extends({},recordData,{form_list:{parent:recordData},form_actions:{parent:recordData}}),dataSchema=dataRecord.schema?JSON.parse(dataRecord.schema):{},_context9.next=8,self.evaluateOnLoadActions(recordData,formActions);case 8:_ref14=_context9.sent,_data=_ref14.data,metadata=_ref14.metadata,recordData=_extends({},_this3.state.defaultValue,recordData,_data),_this3.setState({formTemplateId:dataRecord.uid,templateName:dataRecord.Name,scope:dataRecord.Scope,modelId:dataRecord.Model,modelName:dataRecord.ModelName,viewName:dataRecord.View,defaultValue:recordData,dataSchema:dataSchema,uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},rawSchema:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},rawUISchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},isReady:!0,formActions:formActions,formContext:metadata||{},preventDefaultSave:preventDefaultSave,preventDefaultShowList:preventDefaultShowList,formThemeId:dataRecord.Theme,themeData:themeData}),_context9.next=30;break;case 15:schemaObj=dataRecord.schema?JSON.parse(dataRecord.schema):{},defaultFormData={};try{defaultFormData=dataRecord&&dataRecord.default?"string"==typeof dataRecord.default?JSON.parse(dataRecord.default):dataRecord.default:{}}catch(err){}return _context9.next=20,self.evaluateOnLoadActions(defaultFormData,formActions);case 20:_ref15=_context9.sent,_data2=_ref15.data,_metadata=_ref15.metadata,dataRecordDefaultValue={};try{dataRecordDefaultValue=dataRecord&&dataRecord.default?"string"==typeof dataRecord.default?JSON.parse(dataRecord.default):dataRecord.default:{}}catch(err){}return defaultData=_extends({},dataRecordDefaultValue,_this3.state.defaultValue,_data2),_context9.next=28,_this3.getThemeData();case 28:_themeData=_context9.sent,_this3.setState({formTemplateId:dataRecord.uid,templateName:dataRecord.Name,scope:dataRecord.Scope,modelId:dataRecord.Model,modelName:dataRecord.ModelName,viewName:dataRecord.View,defaultValue:defaultData,dataSchema:schemaObj,uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},rawSchema:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},rawUISchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},isReady:!0,formActions:formActions,formContext:_metadata,preventDefaultSave:preventDefaultSave,preventDefaultShowList:preventDefaultShowList,formThemeId:dataRecord.Theme,themeData:_themeData});case 30:case"end":return _context9.stop()}},_callee9,_this3)}));return function(_x14){return _ref13.apply(this,arguments)}}()),_context10.next=28;break;case 16:dataSchema=dataRecord.schema?JSON.parse(dataRecord.schema):{},defaultFormData={};try{defaultFormData=dataRecord&&dataRecord.default?"string"==typeof dataRecord.default?JSON.parse(dataRecord.default):dataRecord.default:{}}catch(err){}return _context10.next=21,self.evaluateOnLoadActions(defaultFormData,formActions);case 21:_ref16=_context10.sent,_data3=_ref16.data,metadata=_ref16.metadata,dataRecordDefaultValue={};try{dataRecordDefaultValue=dataRecord&&dataRecord.default?"string"==typeof dataRecord.default?JSON.parse(dataRecord.default):dataRecord.default:{}}catch(err){}defaultData=_extends({},dataRecordDefaultValue,_this3.state.defaultValue,_data3),_this3.setState({formTemplateId:dataRecord.uid,templateName:dataRecord.Name,scope:dataRecord.Scope,modelId:dataRecord.Model,modelName:dataRecord.ModelName,viewName:dataRecord.View,defaultValue:defaultData,dataSchema:dataRecord.schema?JSON.parse(dataRecord.schema):{},uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},rawSchema:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},rawUISchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},isReady:!0,formActions:formActions,formContext:metadata,preventDefaultSave:preventDefaultSave,preventDefaultShowList:preventDefaultShowList,formThemeId:dataRecord.Theme,themeData:themeData});case 28:(_this3.props.isformcontrol+""=="true"||_this3.props.widgetProps)&&((widgetProps=Object.assign({},_this3.props.widgetProps)).TableName="mmf"!=dataRecord.Scope&&dataRecord.Scope?dataRecord.ModelName+"_"+dataRecord.Scope:dataRecord.ModelName,widgetProps.View=dataRecord.View,widgetProps.RecordId=_this3.state.recordId,_this3.updateWidgetProps(widgetProps));case 29:case"end":return _context10.stop()}},_callee10,_this3)}));return function(_x13){return _ref12.apply(this,arguments)}}()):this.setState({isReady:!0});case 12:case"end":return _context11.stop()}},_callee11,this)}));return function(){return _ref11.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref17=_asyncToGenerator(_regeneratorRuntime.mark(function _callee12(prevProps){var self,controlPropNames,controlPropName,changes,_props$controlProps$c,actionClicked,actionPayload,controlPropNameIndx,prevPropName,controlActionFound,_props$widgetControlP,_actionClicked,_actionPayload,_controlPropNameIndx,defaultValue,controlElements,isEmbeddedList,filteredControlEle,formOutput,prevPropValue,currentPropValue,prevPropValueIndx,currentPropValueIndx,currentValue,prevValue,isCellEditOperation,itemIndx,currentValueItem,maxLength,_itemIndx,mergedValue,_prevPropValue,dataRecord,newFormState,modelName,viewName,modelScope,formTemplateFilter,schemaNameArry,records,formActions,preventDefaultSave,preventDefaultShowList,dataRecordDefault,_defaultValue,rawSchema,fieldCodes,rawSchemaFields,rawSchemaFieldIndx,rawSchemaField,tableName,recordsData,recordData,prevUpdatedData,currentUpdatedData,_formOutput,_recordData,formOutputKeys,formOutputIndx,formOutputKey,_tableName,updatedRecord,widgetProps,_tableName2,createdRecord,updatedFormData,_widgetProps,widgettree,rootPage,widgetTreeKey,modalProps,_widgetProps2,currentRecordData,_ref18,data,metadata,FormOutput,stateChanges;return _regeneratorRuntime.wrap(function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:if(self=this,controlPropNames=void 0,controlPropName=void 0,changes=void 0,(!this.state.isReady||_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&prevProps.templatename==this.props.templatename&&prevProps.templateid==this.props.templateid&&prevProps.tablename==this.props.tablename&&prevProps.recordid==this.props.recordid)&&_.isEqual(prevProps.controlProps,this.props.controlProps)&&_.isEqual(prevProps.widgetControlProps,this.props.widgetControlProps)){_context12.next=83;break}if(!_.isEqual(prevProps.controlProps,this.props.controlProps)&&!(this.props.controlid&&this.props.controlid.startsWith("cell_")))if(this.props.controlProps.control_action)_props$controlProps$c=this.props.controlProps.control_action,actionClicked=_props$controlProps$c.actionClicked,actionPayload=_props$controlProps$c.actionPayload,prevProps.controlProps&&prevProps.controlProps.control_action&&prevProps.controlProps.control_action.actionPayload&&prevProps.controlProps.control_action.actionPayload.clickts==actionPayload.clickts||this.handleChange({form_action:{actionClicked:actionClicked,actionPayload:actionPayload}});else if((controlPropNames=Object.keys(this.props.controlProps))&&controlPropNames.length>0){for(controlPropNameIndx in changes={},controlPropNames)controlPropName=controlPropNames[controlPropNameIndx],prevPropName=prevProps.controlProps?prevProps.controlProps[controlPropName]:null,_.isEqual(prevPropName,this.props.controlProps[controlPropName])||(changes[controlPropName]=this.props.controlProps[controlPropName]);this.handleChange(Object.assign({},changes))}if(!_.isEqual(prevProps.widgetControlProps,this.props.widgetControlProps)&&(controlActionFound=!1,this.props.widgetControlProps.control_action&&(_props$widgetControlP=this.props.widgetControlProps.control_action,_actionClicked=_props$widgetControlP.actionClicked,_actionPayload=_props$widgetControlP.actionPayload,prevProps.widgetControlProps&&prevProps.widgetControlProps.control_action&&prevProps.widgetControlProps.control_action.actionPayload&&prevProps.widgetControlProps.control_action.actionPayload.clickts==_actionPayload.clickts||(controlActionFound=!0,this.handleChange({form_action:{actionClicked:_actionClicked,actionPayload:_actionPayload}}))),!controlActionFound&&(controlPropNames=(controlPropNames=Object.keys(this.props.widgetControlProps)).filter(function(controlPropName){return"control_action"!=controlPropName}))&&controlPropNames.length>0)){for(_controlPropNameIndx in changes={},controlPropNames){if(controlPropName=controlPropNames[_controlPropNameIndx],defaultValue=this.state.defaultValue[controlPropName],controlElements=[],this.getControlElements(this.state.uiSchema,controlElements),isEmbeddedList=!1,controlElements&&(filteredControlEle=controlElements.filter(function(controlElement){return"EmbeddedList"==controlElement.subtype&&controlElement.name==controlPropName}))&&filteredControlEle.length>0){formOutput=this.props.widgetProps?this.props.widgetProps.FormOutput:{};try{"string"==typeof formOutput&&(formOutput=JSON.parse(formOutput))}catch(err){}if(prevPropValue=prevProps.widgetControlProps&&prevProps.widgetControlProps[controlPropName]?[].concat(prevProps.widgetControlProps[controlPropName]):null,currentPropValue=[].concat(this.props.widgetControlProps[controlPropName]),prevPropValue)for(prevPropValueIndx=0;prevPropValueIndx<prevPropValue.length;prevPropValueIndx++)prevPropValue[prevPropValueIndx]=prevPropValue[prevPropValueIndx]||null;if(currentPropValue)for(currentPropValueIndx=0;currentPropValueIndx<currentPropValue.length;currentPropValueIndx++)currentPropValue[currentPropValueIndx]=currentPropValue[currentPropValueIndx]||null;if(!_.isEqual(prevPropValue,currentPropValue)){if(prevValue=prevPropValue,isCellEditOperation=!1,(currentValue=currentPropValue).length>0)for(itemIndx in currentValue)currentValueItem=currentValue[itemIndx],(!prevValue||prevValue.length<=itemIndx)&&currentValueItem&&currentValueItem.__isCellEdited__?isCellEditOperation=!0:prevValue&&prevValue.length>itemIndx&&prevValue[itemIndx]&&currentValue[itemIndx]&&prevValue[itemIndx].__isCellEdited__!=currentValue[itemIndx].__isCellEdited__&&(isCellEditOperation=!0);if(currentValue&&isCellEditOperation)for(maxLength=isCellEditOperation?defaultValue?defaultValue.length:prevValue?prevValue.length:currentValue.length:currentValue.length,changes[controlPropName]=[],_itemIndx=0;_itemIndx<maxLength;_itemIndx++)mergedValue={},defaultValue&&defaultValue.length>_itemIndx&&(mergedValue=_extends({},mergedValue,defaultValue[_itemIndx])),prevPropValue&&prevPropValue.length>_itemIndx&&(mergedValue=_extends({},mergedValue,prevPropValue[_itemIndx])),currentValue&&currentValue.length>_itemIndx&&(mergedValue=_extends({},mergedValue,currentValue[_itemIndx])),changes[controlPropName].push(mergedValue);else changes[controlPropName]=currentValue}isEmbeddedList=!0}isEmbeddedList||(_prevPropValue=prevProps.widgetControlProps?prevProps.widgetControlProps[controlPropName]:null,_.isEqual(_prevPropValue,this.props.widgetControlProps[controlPropName])||(changes[controlPropName]=this.props.widgetControlProps[controlPropName]))}this.handleChange(Object.assign({},changes))}if((this.props.isformcontrol+""=="true"||!prevProps.widgetProps||!this.props.widgetProps||prevProps.widgetProps.RecordId==this.props.widgetProps.RecordId&&prevProps.widgetProps.FormTemplate==this.props.widgetProps.FormTemplate&&prevProps.widgetProps.TableName==this.props.widgetProps.TableName&&prevProps.widgetProps.View==this.props.widgetProps.View)&&prevProps.templatename==this.props.templatename&&prevProps.templateid==this.props.templateid&&prevProps.tablename==this.props.tablename&&prevProps.recordid==this.props.recordid){_context12.next=64;break}if(newFormState={},(dataRecord=null)&&prevProps.widgetProps.FormTemplate==this.props.widgetProps.FormTemplate&&prevProps.widgetProps.TableName==this.props.widgetProps.TableName&&prevProps.tablename==this.props.tablename&&prevProps.templatename==this.props.templatename&&prevProps.templateid==this.props.templateid){_context12.next=52;break}if(modelName=this.props.widgetProps?this.props.widgetProps.TableName:this.props.tablename,viewName=this.props.widgetProps&&this.props.widgetProps.View?this.props.widgetProps.View:this.props.view?this.props.view:this.state.view?this.state.view:"Default",modelScope="",formTemplateFilter=null,!modelName){_context12.next=22;break}schemaNameArry=modelName.indexOf("_")>-1?modelName.split("_"):[modelName],modelName=schemaNameArry.length>1?schemaNameArry.slice(0,schemaNameArry.length-1).join("_"):schemaNameArry[0],modelScope=schemaNameArry.length>1?schemaNameArry[schemaNameArry.length-1]:"mmf",(formTemplateFilter={}).where={and:[{ModelName:modelName},{Scope:modelScope}]},viewName?formTemplateFilter.where.and.push({View:viewName}):formTemplateFilter.where.and.push({View:"Default"}),_context12.next=38;break;case 22:if(prevProps.templatename==this.props.templatename){_context12.next=27;break}(formTemplateFilter={}).where={Name:this.props.templatename},_context12.next=38;break;case 27:if(prevProps.templateid==this.props.templateid){_context12.next=32;break}(formTemplateFilter={}).where={uid:this.props.templateid},_context12.next=38;break;case 32:if(prevProps.recordid==this.props.recordid){_context12.next=37;break}return _context12.next=35,this.getRecordData(this.props.recordid);case 35:_context12.next=38;break;case 37:this.state.formTemplateId?(formTemplateFilter={}).where={uid:this.state.formTemplateId}:this.state.formTemplateName&&((formTemplateFilter={}).where={Name:this.state.formTemplateName});case 38:if(!formTemplateFilter){_context12.next=52;break}return _context12.next=41,$qry.getCachableRecords("FormTemplate_studio",formTemplateFilter,["uid","Name","Scope","Model","ModelName","View","schema","rawschema","uischema","rawuischema","default","Theme"]);case 41:if(!((records=_context12.sent)&&records.length>0)){_context12.next=52;break}return dataRecord=records[0],_context12.next=46,self.getFormActions(dataRecord.Model,dataRecord.ModelName,dataRecord.uid);case 46:formActions=_context12.sent,preventDefaultSave=this.needsPreventDefaultSave(formActions),preventDefaultShowList=this.needsPreventDefaultShowList(formActions),dataRecordDefault=dataRecord.default?JSON.parse(dataRecord.default):{},_defaultValue=_extends({},this.state.defaultValue,dataRecordDefault),newFormState={formTemplateId:dataRecord.uid,templateName:dataRecord.Name,scope:dataRecord.Scope,modelId:dataRecord.Model,modelName:dataRecord.ModelName,viewName:dataRecord.View,defaultValue:_defaultValue,dataSchema:dataRecord.schema?JSON.parse(dataRecord.schema):{},uiSchema:dataRecord.uischema?JSON.parse(dataRecord.uischema):{},rawSchema:dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},rawUISchema:dataRecord.rawuischema?JSON.parse(dataRecord.rawuischema):{},formTemplateId:this.props.widgetProps?this.props.widgetProps.FormTemplate:this.props.templatename,formActions:formActions,preventDefaultSave:preventDefaultSave,preventDefaultShowList:preventDefaultShowList,formThemeId:dataRecord.Theme};case 52:if(this.props.isformcontrol+""=="true"||prevProps.widgetProps.RecordId==this.props.widgetProps.RecordId||!dataRecord){_context12.next=61;break}if(rawSchema=dataRecord.rawschema?JSON.parse(dataRecord.rawschema):{},fieldCodes=["uid"],rawSchema&&rawSchema.dataType)for(rawSchemaFieldIndx in rawSchemaFields=rawSchema.dataType)"uid"!=(rawSchemaField=rawSchemaFields[rawSchemaFieldIndx]).code&&fieldCodes.push(rawSchemaField.code);return tableName="mmf"!=dataRecord.Scope&&dataRecord.Scope?dataRecord.ModelName+"_"+dataRecord.Scope:dataRecord.ModelName,_context12.next=59,$qry.getRecords(tableName,{where:{uid:this.props.widgetProps.RecordId}},fieldCodes);case 59:(recordsData=_context12.sent)&&recordsData.length>0&&(recordData=recordsData[0],newFormState.defaultValue=_extends({},this.state.defaultValue,recordData));case 61:this.setState(_extends({},newFormState)),_context12.next=65;break;case 64:this.props.isformcontrol+""!="true"&&prevProps.widgetProps&&this.props.widgetProps&&!_.isEqual(prevProps.widgetProps.FormOutput,this.props.widgetProps.FormOutput)&&(prevUpdatedData="string"==typeof prevProps.widgetProps.FormOutput?JSON.parse(prevProps.widgetProps.FormOutput):Object.assign({},prevProps.widgetProps.FormOutput),(currentUpdatedData="string"==typeof this.props.widgetProps.FormOutput?JSON.parse(this.props.widgetProps.FormOutput):Object.assign({},this.props.widgetProps.FormOutput))&&delete currentUpdatedData.form_action,currentUpdatedData&&delete currentUpdatedData.ref_action,currentUpdatedData&&delete currentUpdatedData.list_action,_.isEqual(currentUpdatedData,prevUpdatedData)||this.setState({defaultValue:_extends({},this.state.defaultValue,currentUpdatedData)}));case 65:if(!(!this.state.preventDefaultSave&&this.state.modelName&&this.state.modelId&&this.props.widgetProps.PreventDefaultSave+""!="true"&&this.props.widgetProps.FormOutput&&this.props.widgetProps.FormOutput.form_actions&&this.props.widgetProps.FormOutput.form_actions.actionClicked&&"save"==this.props.widgetProps.FormOutput.form_actions.actionClicked&&this.props.widgetProps.FormOutput.form_actions.actionPayload&&this.props.widgetProps.FormOutput.form_actions.actionPayload.clickts)||prevProps.widgetProps.FormOutput&&prevProps.widgetProps.FormOutput.form_actions&&prevProps.widgetProps.FormOutput.form_actions.actionPayload&&prevProps.widgetProps.FormOutput.form_actions.actionClicked==this.props.widgetProps.FormOutput.form_actions.actionClicked&&(_.isEqual(prevProps.widgetProps.FormOutput.form_actions.actionPayload,this.props.widgetProps.FormOutput.form_actions.actionPayload)||prevProps.widgetProps.FormOutput.form_actions.actionPayload.clickts==this.props.widgetProps.FormOutput.form_actions.actionPayload.clickts)){_context12.next=83;break}if(_formOutput=this.props.widgetProps.FormOutput,_recordData={},_formOutput)for(formOutputIndx in formOutputKeys=Object.keys(_formOutput))formOutputKey=formOutputKeys[formOutputIndx],_recordData[formOutputKey]=_formOutput[formOutputKey];if(!(Object.keys(_recordData).length>0)){_context12.next=83;break}if(!_recordData.uid){_context12.next=78;break}return _tableName="mmf"!=this.state.scope&&this.state.scope?this.state.modelName+"_"+this.state.scope:this.state.modelName,_context12.next=74,$qry.updateRecord(_tableName,_recordData.uid,_recordData,["uid"]);case 74:(updatedRecord=_context12.sent)&&updatedRecord.uid&&(this.props.widgetProps&&((widgetProps=Object.assign({},this.props.widgetProps)).RecordId=updatedRecord.uid,this.updateWidgetProps(widgetProps)),this.props.addFlashMessage({title:"Success - ",subtitle:"Updated the record successfully."})),_context12.next=83;break;case 78:return _tableName2="mmf"!=this.state.scope&&this.state.scope?this.state.modelName+"_"+this.state.scope:this.state.modelName,_context12.next=81,$qry.createRecord(_tableName2,_recordData,["uid"]);case 81:(createdRecord=_context12.sent)&&createdRecord.uid&&((updatedFormData=Object.assign({},_recordData)).uid=createdRecord.uid,this.props.widgetProps&&((_widgetProps=Object.assign({},this.props.widgetProps)).RecordId=createdRecord.uid,this.updateWidgetProps(_widgetProps)),_extends({},this.state.defaultValue,updatedFormData),this.setState({defaultValue:_extends({},this.state.defaultValue,updatedFormData)}),this.props.addFlashMessage({title:"Success - ",subtitle:"Created the record successfully."}));case 83:if(prevProps.cancelpreview==this.props.cancelpreview||this.props.cancelpreview+""!="true"){_context12.next=105;break}widgettree=null,rootPage=null;try{if(widgettree){if((widgettree=this.props.widgettree&&"string"==typeof this.props.widgettree?JSON.parse(this.props.widgettree):this.props.widgettree)&&Object.keys(widgettree).length>0)for(widgetTreeKey=Object.keys(widgettree)[0];widgetTreeKey;)rootPage=widgetTreeKey.indexOf("@@")>-1?widgetTreeKey.split("@@")[1]:rootPage,widgettree=widgettree[widgetTreeKey],widgetTreeKey=widgettree&&Object.keys(widgettree).length>0?Object.keys(widgettree)[0]:null}else rootPage=this.props.pageid}catch(err){}if(modalProps=null,rootPage&&(!widgettree||widgettree&&rootPage!=this.props.pageid)&&this.props.pages[rootPage]&&this.props.pages[rootPage].widgets&&this.props.pages[rootPage].widgets["pagemodal_"+rootPage]&&(modalProps=this.props.pages[rootPage].widgets["pagemodal_"+rootPage].props),!modalProps||this.props.widgetid=="pagemodal_"+rootPage){_context12.next=105;break}_widgetProps2=Object.assign({},this.props.widgetProps),currentRecordData=_widgetProps2.FormOutput;try{currentRecordData="string"==typeof currentRecordData?JSON.parse(currentRecordData):currentRecordData,currentRecordData=_extends({},this.state.defaultValue,currentRecordData)}catch(err){}return _context12.next=95,self.evaluateOnModalChangeActions(currentRecordData,_extends({},modalProps));case 95:_ref18=_context12.sent,data=_ref18.data,metadata=_ref18.metadata,FormOutput=_extends({},currentRecordData,data),_widgetProps2.FormOutput=FormOutput,this.updateWidgetProps(_widgetProps2,null,!0),(stateChanges={}).formContext=_extends({},this.state.formContext,metadata),stateChanges.defaultValue=_widgetProps2.FormOutput,this.setState(stateChanges);case 105:case"end":return _context12.stop()}},_callee12,this)}));return function(_x15){return _ref17.apply(this,arguments)}}()},{key:"render",value:function(){if(0==Object.keys(this.state.dataSchema).length&&0==Object.keys(this.state.uiSchema).length)return null;var spinner=React.createElement("div",{className:"loader"}),JsonFormComp=JSONForm(),theme=this.state.themeData&&this.state.themeData[this.state.formThemeId]||{},config={pageid:this.props.pageid||this.props.uid,pagesuffix:this.props.pagesuffix||"",widgetid:this.props.widgetid,ismodal:this.props.widgetid&&this.props.widgetid.startsWith("pagemodal_")},dynamicFormEl=this.state.isReady?React.createElement(JsonFormComp,{schema:this.state.dataSchema,uischema:this.state.uiSchema,defaultvalue:this.state.defaultValue,shadow:this.props.shadow,context:_extends({},this.state.formContext,{config:config,theme:theme}),handleChange:this.handleChange}):{spinner:spinner},inlinestyles=this.props.isformcontrol+""=="true"?this.props.inlinestyles?this.props.inlinestyles:this.props.widgetProps?this.props.widgetProps.InlineStyles:"":theme&&theme.Form||"";return React.createElement(React.Fragment,null,React.createElement("style",null,inlinestyles),React.createElement("div",{className:"form_header",ref:"mainpage",style:{height:"fit-content",width:"100%",overflowY:"auto",overflowX:"hidden",textAlign:"left",minHeight:"60%",maxHeight:"100%",paddingRight:"10px",paddingLeft:"10px"}},dynamicFormEl))}}]),_SrsDynamicForm_}(React.Component),_export("SrsDynamicForm",SrsDynamicForm=function(props){return _SrsDynamicForm_}),_export("SrsDynamicForm",SrsDynamicForm)}}}),System.register("component/studio/SrsFile.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/slicedToArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/taggedTemplateLiteral.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","graphql-tag","react-apollo","apollo-client","apollo-upload-client","apollo-cache-inmemory","carbon-components-react","lodash.clonedeep","@carbon/icons-react/lib/close/20"],function(_export,_context3){"use strict";var _slicedToArray,_taggedTemplateLiteral,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,gql,Mutation,ApolloProvider,ApolloClient,apolloUploadClient,InMemoryCache,FileUploader,Close20,_templateObject,createUploadLink,apolloClient,_SrsFile_,SrsFile,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs){_slicedToArray=_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs){_taggedTemplateLiteral=_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_graphqlTag){gql=_graphqlTag.default},function(_reactApollo){Mutation=_reactApollo.Mutation,ApolloProvider=_reactApollo.ApolloProvider},function(_apolloClient){ApolloClient=_apolloClient.ApolloClient},function(_apolloUploadClient){apolloUploadClient=_apolloUploadClient.default},function(_apolloCacheInmemory){InMemoryCache=_apolloCacheInmemory.InMemoryCache},function(_carbonComponentsReact){FileUploader=_carbonComponentsReact.FileUploader},function(_lodashClonedeep){_lodashClonedeep.default},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default}],execute:function(){_templateObject=_taggedTemplateLiteral(["\n                    mutation($file: Upload!) {\n                        singleUpload(file: $file) {\n                        id\n                        filename\n                        mimetype\n                        path\n                        }\n                    }\n                    "],["\n                    mutation($file: Upload!) {\n                        singleUpload(file: $file) {\n                        id\n                        filename\n                        mimetype\n                        path\n                        }\n                    }\n                    "]),createUploadLink=apolloUploadClient.createUploadLink,apolloClient=function(){var cache=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ApolloClient({ssrMode:"undefined"!=typeof window,cache:(new InMemoryCache).restore(cache),link:createUploadLink({uri:"/graphql"})})}(),_SrsFile_=function(_React$Component){function _SrsFile_(props){_classCallCheck(this,_SrsFile_);var _this=_possibleConstructorReturn(this,(_SrsFile_.__proto__||Object.getPrototypeOf(_SrsFile_)).call(this,props)),label=_this.props.label?_this.props.label:_this.props.widgetProps?_this.props.widgetProps.Label:"Add files",uploadedFileId=_this.props.uploadedfileid?_this.props.uploadedfileid:_this.props.widgetProps?_this.props.widgetProps.UploadedFileId:"",defaultFileId=_this.props.defaultfileid?_this.props.defaultfileid:_this.props.widgetProps?_this.props.widgetProps.DefaultFileId:"",showImagePreview=_this.props.showimage+""=="true"||!!_this.props.widgetProps&&_this.props.widgetProps.ShowImagePreview+""=="true";return _this.state={label:label,uploadedFileId:uploadedFileId,defaultFileId:defaultFileId,showImagePreview:showImagePreview,reload:!1},_this}return _inherits(_SrsFile_,_React$Component),_createClass(_SrsFile_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var documentRecord,fileName;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,$qry.getRecords("MetaDocument",{where:{uid:this.state.defaultFileId}},["Name"]);case 2:(documentRecord=_context.sent)&&documentRecord.length>0&&(fileName=documentRecord[0].Name,this.setState({defaultFileName:fileName}));case 4:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this;return React.createElement(React.Fragment,null,React.createElement("style",null,this.props.inlinestyles||""),React.createElement(ApolloProvider,{client:apolloClient},React.createElement(Mutation,{mutation:gql(_templateObject)},function(mutate){return React.createElement("div",null,React.createElement(FileUploader,{buttonLabel:_this2.state.label,filenameStatus:"edit",accept:_this2.props.filetypes?_this2.props.filetypes.split(","):[".jpg",".png",".pdf",".doc",".docx"],name:"",size:"small",onChange:(_ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(_ref3){var result,controlProps,widgetProps,_ref3$target=_ref3.target,validity=_ref3$target.validity,file=_slicedToArray(_ref3$target.files,1)[0];return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!validity.valid){_context2.next=5;break}return _context2.next=3,mutate({variables:{file:file}});case 3:(result=_context2.sent)&&result.data&&result.data.singleUpload&&result.data.singleUpload.id&&(_this2.props.isformcontrol+""=="true"?_this2.props.controlname&&((controlProps=Object.assign({},_this2.props.controlProps))[_this2.props.controlname]=result.data.singleUpload.id,_this2.props.updateStore({updates:{controlProps:controlProps}})):_this2.props.widgetProps&&((widgetProps=Object.assign({},_this2.props.widgetProps)).UploadedFileId=result.data.singleUpload.id,_this2.props.updateStore({updates:{widgetProps:widgetProps}})),_this2.setState({uploadedFileId:result.data.singleUpload.id}),_this2.props.onChange&&_this2.state.defaultFileId!=result.data.singleUpload.id&&(result.data.singleUpload.id?_this2.props.onChange(result.data.singleUpload.id):_this2.props.onChange("")));case 5:case"end":return _context2.stop()}},_callee2,_this2)})),function(_x2){return _ref2.apply(this,arguments)})}),_this2.state.showImagePreview?React.createElement("img",{style:{height:200,width:200},src:_this2.state.uploadedFileId?"/file/"+_this2.state.uploadedFileId:"/file/"+_this2.state.defaultFileId}):React.createElement("div",null,React.createElement("div",{class:"bx--file-container"},React.createElement("span",{class:"bx--file__selected-file bx--file__selected-file--sm"},React.createElement("a",{class:"bx--file-filename",href:_this2.state.uploadedFileId?"/file/"+_this2.state.uploadedFileId:"/file/"+_this2.state.defaultFileId},_this2.state.defaultFileName),React.createElement("span",{class:"bx--file__state-container"},React.createElement(Close20,{onClick:function(e){console.log("clicked on close btn!")}}))))));var _ref2})))}}]),_SrsFile_}(React.Component),_export("SrsFile",SrsFile=function(props){return _SrsFile_}),_export("SrsFile",SrsFile),_export("default",SrsFile),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"controlProps",AccessPath:"controls.${pageid}${pagesuffix}_${controlid}",DefaultValue:'{"controls": {"${pageid}${pagesuffix}_${controlid}": {}}}'},{KeyName:"controls",AccessPath:"controls",DefaultValue:'{"controls": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsFilter.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-querybuilder","nanoid","carbon-components-react","component/studio/SrsSelect/Definition.js","component/studio/SrsButton/Definition.js","component/studio/SrsCheckbox/Definition.js","component/studio/SrsDate/Definition.js","component/studio/SrsReference/Definition.js","lodash.clonedeep","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/split-screen/32","@carbon/icons-react/lib/trash-can/32"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,QueryBuilder,nanoid,Button,TextInput,Toggle,SrsSelect,SrsCheckbox,SrsDate,SrsReference,cloneDeep,Close20,_SrsFilter_,SrsFilter,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactQuerybuilder){QueryBuilder=_reactQuerybuilder.default},function(_nanoid){nanoid=_nanoid.default},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput,Toggle=_carbonComponentsReact.Toggle},function(_componentStudioSrsSelectDefinitionJs){SrsSelect=_componentStudioSrsSelectDefinitionJs.SrsSelect},function(_componentStudioSrsButtonDefinitionJs){_componentStudioSrsButtonDefinitionJs.SrsButton},function(_componentStudioSrsCheckboxDefinitionJs){SrsCheckbox=_componentStudioSrsCheckboxDefinitionJs.SrsCheckbox},function(_componentStudioSrsDateDefinitionJs){SrsDate=_componentStudioSrsDateDefinitionJs.SrsDate},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonIconsReactLibAddAlt){_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSplitScreen){_carbonIconsReactLibSplitScreen.default},function(_carbonIconsReactLibTrashCan){Close20=_carbonIconsReactLibTrashCan.default}],execute:function(){_SrsFilter_=function(_React$Component){function _SrsFilter_(props){_classCallCheck(this,_SrsFilter_);var _this=_possibleConstructorReturn(this,(_SrsFilter_.__proto__||Object.getPrototypeOf(_SrsFilter_)).call(this,props));_this.tableName=_this.props.tablename?_this.props.tablename:_this.props.widgetProps&&_this.props.widgetProps.TableName?_this.props.widgetProps.TableName:"";var targetModelFields=[];if(_this.props.fields&&_this.props.fields.length>0){var tempTargetModelFields=_this.props.fields.filter(function(item){return item.parent==_this.tableName&&"id"!=item.text&&"field"==item.type}),tempTargetModelRelations=_this.props.fields.filter(function(item){return item.parent==_this.tableName&&("one2one"==item.type||"one2many"==item.type)});tempTargetModelFields.map(function(item){var iText=item.text,rName=iText.charAt(0).toLowerCase()+iText.substr(1,iText.length-1),rField=tempTargetModelRelations.filter(function(tmrItem){return tmrItem.text==rName})[0];rField?targetModelFields.push({name:item.text,label:item.text,datatype:"Reference",tableName:rField.to}):targetModelFields.push({name:item.text,label:item.text,datatype:item.datatype})})}return _this.state={fields:targetModelFields,query:_this.props&&_this.props.current_filter&&Object.keys(_this.props.current_filter).length>0?_this.transformFilter(_this.props.current_filter.where):{id:"g-"+nanoid(),combinator:"and",not:!1,rules:[]},format:"json",showCombinatorsBetweenRules:!1,showNotToggle:!1,resetOnFieldChange:!0},_this.props.schema&&0!=Object.keys(_this.props.schema).length?_this.setState({fields:targetModelFields}):$script.runAtServer("mmf.getSchemaData").then(function(schemaData){_this.props.updateStore({updates:{schema:schemaData}});var fields=[];if(schemaData&&schemaData.fields){var _tempTargetModelFields=schemaData.fields.filter(function(item){return item.parent==_this.tableName&&"id"!=item.text&&"field"==item.type}),_tempTargetModelRelations=schemaData.fields.filter(function(item){return item.parent==_this.tableName&&("one2one"==item.type||"one2many"==item.type)});_tempTargetModelFields.map(function(item){var iText=item.text,rName=iText.charAt(0).toLowerCase()+iText.substr(1,iText.length-1),rField=_tempTargetModelRelations.filter(function(tmrItem){return tmrItem.text==rName})[0];rField?fields.push({name:item.text,label:item.text,datatype:"Reference",tableName:rField.to}):fields.push({name:item.text,label:item.text,datatype:item.datatype})})}_this.setState({fields:fields})}),_this.transformFilter=_this.transformFilter.bind(_this),_this.addRuleAction=function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement("div",{className:"addRuleBtn"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("button",{onClick:this.props.handleOnClick},"+ Rule"))}}]),_class}(React.Component),_this.addGroupAction=function(_React$Component3){function _class2(){return _classCallCheck(this,_class2),_possibleConstructorReturn(this,(_class2.__proto__||Object.getPrototypeOf(_class2)).apply(this,arguments))}return _inherits(_class2,_React$Component3),_createClass(_class2,[{key:"render",value:function(){return React.createElement("div",{className:"addRuleBtn"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("button",{onClick:this.props.handleOnClick},"+ Group"))}}]),_class2}(React.Component),_this.closeIcon=function(_React$Component4){function _class3(){return _classCallCheck(this,_class3),_possibleConstructorReturn(this,(_class3.__proto__||Object.getPrototypeOf(_class3)).apply(this,arguments))}return _inherits(_class3,_React$Component4),_createClass(_class3,[{key:"render",value:function(){return React.createElement("div",{className:"closeBtn"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(Close20,{style:{marginTop:3,width:23,height:23,"&:hover":{cursor:"pointer"}},onClick:this.props.handleOnClick}))}}]),_class3}(React.Component),_this.fieldSelector=function(_React$Component5){function _class4(props){return _classCallCheck(this,_class4),_possibleConstructorReturn(this,(_class4.__proto__||Object.getPrototypeOf(_class4)).call(this,props))}return _inherits(_class4,_React$Component5),_createClass(_class4,[{key:"render",value:function(){var _props=this.props,className=_props.className,options=_props.options,title=_props.title,value=_props.value,Wrapper=SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0});return React.createElement(Wrapper,{className:className,value:value,title:title,onChange:this.props.handleOnChange,options:options})}}]),_class4}(React.Component),_this.operatorSelector=function(_React$Component6){function _class5(props){return _classCallCheck(this,_class5),_possibleConstructorReturn(this,(_class5.__proto__||Object.getPrototypeOf(_class5)).call(this,props))}return _inherits(_class5,_React$Component6),_createClass(_class5,[{key:"render",value:function(){var _props2=this.props,className=_props2.className,options=_props2.options,title=_props2.title,value=_props2.value,Wrapper=(_props2.level,_props2.fieldData,_props2.field,SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}));return React.createElement(Wrapper,{className:className,value:value,title:title,onChange:this.props.handleOnChange,options:options})}}]),_class5}(React.Component),_this.valueEditor=function(_React$Component7){function _class6(props){return _classCallCheck(this,_class6),_possibleConstructorReturn(this,(_class6.__proto__||Object.getPrototypeOf(_class6)).call(this,props))}return _inherits(_class6,_React$Component7),_createClass(_class6,[{key:"render",value:function(){var _this8=this,_props3=this.props,fieldData=(_props3.field,_props3.fieldData),title=_props3.title,operator=_props3.operator,value=_props3.value,type=_props3.type,values=(_props3.inputType,_props3.values),className=_props3.className,Wrapper=null;if("null"===operator||"notNull"===operator||"isEmpty"===operator||"isNotEmpty"===operator)return null;switch("isOneOf"==operator&&(type="select"),fieldData&&"DateTime"==fieldData.datatype&&(type="date"),fieldData&&"Reference"==fieldData.datatype&&(type="reference"),type){case"select":return Wrapper=SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}),React.createElement(Wrapper,{className:className,title:title,onChange:this.props.handleOnChange,value:value},"options=",values);case"checkbox":return Wrapper=Toggle,React.createElement("div",{style:{display:"inline-flex",marginLeft:5}},React.createElement(Wrapper,{labelA:"",labelB:"",className:className,title:title,defaultToggled:!!value,onToggle:function(val){return _this8.props.handleOnChange(val)},checked:!!value}));case"radio":return React.createElement("span",{className:className,title:title},values.map(function(v){return React.createElement("label",{key:v.name},React.createElement("input",{type:"radio",value:v.name,checked:value===v.name,onChange:function(e){return handleOnChange(e.target.value)}}),v.label)}));case"date":return Wrapper=SrsDate({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}),React.createElement("div",{style:{display:"inline-flex",marginLeft:2}},React.createElement(Wrapper,{className:className,title:title,onChange:this.props.handleOnChange,value:value},"options=",values));case"reference":var ComponentReference=SrsReference({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}),renderType=React.createElement(ComponentReference,{tablename:fieldData.tableName,displayfield:"Name",secondarydisplayfield:"",filter:JSON.stringify({where:{Name:{like:"Srs%"}}}),searchfields:"Name",title:"Render Type",defaultValue:"",onChange:function(selectedItem){}});return React.createElement("div",{className:"srs-ref-filter",style:{display:"inline-flex",marginLeft:2}},renderType);default:return React.createElement("div",{style:{display:"inline-flex",marginLeft:2}},React.createElement(TextInput,{hideLabel:!0,defaultValue:value,className:className,placeholder:"Enter Value...",onChange:function(e){return _this8.props.handleOnChange(e.target.value)}}))}}}]),_class6}(React.Component),_this.filters={String:[{name:"startsWith",label:"starts with"},{name:"endsWith",label:"ends with"},{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"=",label:"is"},{name:"isNot",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"isAnything",label:"is anything"},{name:"isOneOf",label:"is one of"},{name:"isEmptyString",label:"is empty string"},{name:"<=",label:"less than or is"},{name:">=",label:"greater than or is"},{name:"<>",label:"between"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"}],boolean:[{name:"=",label:"is"},{name:"!=",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"}],integer:[{name:"=",label:"is"},{name:"isNot",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"<",label:"less than"},{name:">",label:"greater than"},{name:"<=",label:"less than or is"},{name:">=",label:"greater than or is"},{name:"<>",label:"between"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDifferent",label:"is different"},{name:"graterThanField",label:"greater than field"},{name:"lessThanField",label:"less than field"},{name:"greaterThanorisField",label:"greater than or is field"},{name:"lessThanorisField",label:"less than or is field"}],DateTime:[{name:"=",label:"on"},{name:"!=",label:"not on"},{name:"<",label:"before"},{name:"<=",label:"at or before"},{name:">",label:"after"},{name:">=",label:"at or after"},{name:"on",label:"on"},{name:"<>",label:"between"},{name:"trend",label:"trend"},{name:"relative",label:"relative"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"},{name:"isMoreThan",label:"is more than"},{name:"isLessThan",label:"is less than"}],Reference:[{name:"=",label:"is"},{name:"!=",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"startsWith",label:"starts with"},{name:"startsWith",label:"ends with"},{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"},{name:"isEmptyString",label:"is empty string"}],choice:[{name:"=",label:"is"},{name:"!=",label:"is not"},{name:"isOneOf",label:"is one of"},{name:"isNotOneOf",label:"is not one of"},{name:"startsWith",label:"starts with"},{name:"startsWith",label:"ends with"},{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"}],list:[{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"}]},_this}return _inherits(_SrsFilter_,_React$Component),_createClass(_SrsFilter_,[{key:"transformFilter",value:function(filter){var _this9=this,result={};filter&&"object"==typeof filter&&(Array.isArray(filter)?filter.map(function(rule){result.rules=result.rules||[];var field=rule&&Object.keys(rule)&&1==Object.keys(rule).length&&Object.keys(rule)[0],operator="=",value=void 0;if(rule[field])if("and"==field||"or"==field){var tempResult={};tempResult.id="g-"+nanoid(),tempResult.combinator=field,tempResult.not=!1,tempResult.rules=_this9.transformFilter(rule[field]),result.rules.push(tempResult)}else"object"==typeof rule[field]?(operator=Object.keys(rule[field])&&1==Object.keys(rule[field]).length&&Object.keys(rule[field])[0],(value=Object.keys(rule[field])&&1==Object.keys(rule[field]).length&&rule[field][Object.keys(rule[field])[0]])&&(value=value.replace(/%/g,"")),result.rules.push({id:"r-"+nanoid(),field:field,operator:operator,value:value})):((value=rule[field])&&(value=value.replace(/%/g,"")),result.rules.push({id:"r-"+nanoid(),field:field,operator:operator,value:value}))}):Object.keys(filter).map(function(filterKey){"and"!=filterKey&&"or"!=filterKey||(result.id="g-"+nanoid(),result.combinator=filterKey,result.not=!1,result.rules=_this9.transformFilter(filter[filterKey]))}));return filter&&"object"==typeof filter&&Array.isArray(filter)?result.rules:result}},{key:"render",value:function(){var _this10=this,formatQuery=function(query){return{where:parseQuery(query)}},operatorMap={startsWith:"like",endsWith:"like",contains:"like",doesNotContain:"nlike","=":"eq","!=":"neq",">":"gt",">=":"gte","<":"lt","<=":"lte",between:"between",in:"inq","not in":"nin",isEmpty:"eq",isNotEmpty:"neq"},parseQuery=function parseQuery(query){var result={};return query.combinator&&(result[query.combinator]=[],query.rules&&query.rules.map(function(rule,indx){if(rule.combinator){var parsedQueryResult=parseQuery(rule);result[query.combinator].push(parsedQueryResult)}else switch(rule.operator){case"startsWith":var stWithRule={};stWithRule[rule.field]={},stWithRule[rule.field][operatorMap[rule.operator]]=rule.value+"%",result[query.combinator].push(stWithRule);break;case"contains":case"doesNotContain":var containRule={};containRule[rule.field]={},containRule[rule.field][operatorMap[rule.operator]]="%"+rule.value+"%",result[query.combinator].push(containRule);break;case"endsWith":var enWithRule={};enWithRule[rule.field]={},enWithRule[rule.field][operatorMap[rule.operator]]="%"+rule.value,result[query.combinator].push(enWithRule);break;case"between":var betWRule={};betWRule[rule.field]={},betWRule[rule.field][operatorMap[rule.operator]]=[0,rule.value],result[query.combinator].push(betWRule);break;case"in":var inRule={};inRule[rule.field]={},inRule[rule.field][operatorMap[rule.operator]]=[0,rule.value],result[query.combinator].push(inRule);break;case"=":case"!=":case">":case"<":case"<=":case">=":case"isEmpty":case"isNotEmpty":var arthRule={};arthRule[rule.field]={},arthRule[rule.field][operatorMap[rule.operator]]=rule.value,result[query.combinator].push(arthRule);break;case"like":case"nlike":var revLikeRule={};revLikeRule[rule.field]={},revLikeRule[rule.field][rule.operator]="%"+rule.value+"%",result[query.combinator].push(revLikeRule);break;case"eq":case"neq":case"gt":case"gte":case"lt":case"lte":case"between":case"inq":case"nin":case"eq":case"neq":var revRule={};revRule[rule.field]={},revRule[rule.field][rule.operator]=rule.value,result[query.combinator].push(revRule)}})),result};this.props.widgetProps&&this.props.widgetProps.updateStore({updates:{current_filter:formatQuery(this.query)}});var filterStyle=this.props.maxheight?{maxHeight:this.props.maxheight}:{};return React.createElement("div",null,React.createElement("div",{className:"flex-box-outer"},React.createElement("div",{className:"control-panel"},React.createElement(Button,{size:"small",style:{marginRight:5,backgroundColor:"darkgray",color:"black"},onClick:function(){return function(){if(!_this10.state.query||!_this10.state.query.rules||0!=_this10.state.query.rules.length){var result=formatQuery(_this10.state.query);if(_this10.props.resultkey){var activeFilters=cloneDeep(_this10.props.active_filters);activeFilters[_this10.props.resultkey]=result,_this10.props.updateStore&&_this10.props.updateStore({updates:{active_filters:activeFilters,current_filter:result,showFilter:!1}})}else _this10.props.updateStore&&_this10.props.updateStore({updates:{current_filter:result,showFilter:!1}})}}()}},"Apply"),React.createElement(Button,{size:"small",style:{marginRight:5,backgroundColor:"darkgray",color:"black"},onClick:function(){return function(){if(_this10.setState({query:{id:"g-"+nanoid(),combinator:"and",not:!1,rules:[]},fields:_this10.state.fields}),_this10.props.resultkey){var activeFilters=cloneDeep(_this10.props.active_filters);activeFilters[_this10.props.resultkey]={},_this10.props.updateStore&&_this10.props.updateStore({updates:{active_filters:activeFilters,current_filter:{},showFilter:!1}})}else _this10.props.updateStore&&_this10.props.updateStore({updates:{current_filter:{},showFilter:!1}})}()}},"Clear")),React.createElement("hr",null),React.createElement("div",{className:"flex-box",style:filterStyle},React.createElement("div",{className:"scroll"},React.createElement(QueryBuilder,{query:this.state.query,fields:this.state.fields,controlElements:{combinatorSelector:SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0,className:"showCombinator"}),addRuleAction:this.addRuleAction,addGroupAction:this.addGroupAction,removeGroupAction:this.closeIcon,notToggle:SrsCheckbox({containerStyles:{display:"inline-flex",marginLeft:2},title:"NOT",className:"notToggle"}),valueEditor:this.valueEditor,fieldSelector:this.fieldSelector,operatorSelector:this.operatorSelector},controlClassnames:{fields:"form-control"},onQueryChange:function(query){_this10.setState({query:query})},getOperators:function(field){var sField=_this10.state.fields.filter(function(fField){return fField.name==field})[0];return sField&&_this10.filters[sField.datatype]||null},getValueEditorType:function(field,operator){switch(field){case"gender":return"radio";case"instrument":return"select";case"isMusician":return"checkbox";default:return"text"}},getInputType:function(field,operator){switch(field){case"age":return"number";default:return"text"}},getValues:function(field,operator){switch(field){case"instrument":return[{name:"Guitar",label:"Guitar"},{name:"Piano",label:"Piano"},{name:"Vocals",label:"Vocals"},{name:"Drums",label:"Drums"}];case"gender":return[{name:"M",label:"Male"},{name:"F",label:"Female"},{name:"O",label:"Other"}];default:return[]}},showCombinatorsBetweenRules:this.state.showCombinatorsBetweenRules,showNotToggle:this.state.showNotToggle,resetOnFieldChange:this.state.resetOnFieldChange})))))}}]),_SrsFilter_}(React.Component),_export("SrsFilter",SrsFilter=function(props){return _SrsFilter_}),_export("SrsFilter",SrsFilter),_export("default",SrsFilter),_export("states",states=[{KeyName:"showFilter",AccessPath:"showFilter",DefaultValue:'{"showFilter": false}'},{KeyName:"fields",AccessPath:"schema.fields",DefaultValue:'{"schema": {"fields": []}}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema": {}}'},{KeyName:"active_filters",AccessPath:"active_filters",DefaultValue:'{"active_filters": {}}'},{KeyName:"current_filter",AccessPath:"current_filter",DefaultValue:'{"current_filter": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsSelect/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,cloneDeep,_SrsSelect_,SrsSelect;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsSelect_=function(_React$Component){function _SrsSelect_(props){_classCallCheck(this,_SrsSelect_);var _this=_possibleConstructorReturn(this,(_SrsSelect_.__proto__||Object.getPrototypeOf(_SrsSelect_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this.updateWidgetProps=_this.updateWidgetProps.bind(_this),_this.state={selectKey:Date.now()},_this}return _inherits(_SrsSelect_,_React$Component),_createClass(_SrsSelect_,[{key:"updateWidgetProps",value:function(inputVal){if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);controlProps[this.props.controlname]=inputVal,this.props.updateStore({updates:{controlProps:controlProps}})}}else if(this.props.iscellcontrol+""=="true"){var controlId=this.props.controlid.replaceAll("_dot_","."),controlIdParts=(controlId=controlId.replace("cell_","")).split("."),formControlName=controlIdParts[0],rowIndx=controlIdParts[1],columnName=controlIdParts[2],cellName=columnName.split("_")[0],parentWidgetId=columnName.split("_")[1],controls=this.props.controls,formControlKey=this.props.pageid+this.props.pagesuffix+"_"+parentWidgetId;controls[formControlKey]=controls[formControlKey]||{},controls[formControlKey][formControlName]=controls[formControlKey][formControlName]||[],controls[formControlKey][formControlName][rowIndx]=controls[formControlKey][formControlName][rowIndx]||{},controls[formControlKey][formControlName][rowIndx][cellName]=inputVal,controls[formControlKey][formControlName][rowIndx].__isCellEdited__=Date.now(),this.props.updateStore({updates:{controls:controls}})}else if(this.props.widgetProps){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=inputVal,this.props.updateStore({updates:{widgetProps:updatedProps}})}}},{key:"handleChange",value:function(e){this.updateWidgetProps(e.target.value),this.props.handleOnChange?this.props.handleOnChange(e.target.value):this.props.onChange&&this.props.onChange(e.target.value)}},{key:"componentDidUpdate",value:function(prevProps){this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&prevProps.widgetProps.value!=this.props.widgetProps.value&&this.setState({selectKey:Date.now()})}},{key:"render",value:function(){var choices=[];if(this.props.options){var options="string"==typeof this.props.options?JSON.parse(this.props.options):this.props.options;options.length>0&&options.map(function(option){choices.push(React.createElement(SelectItem,{value:option.name,text:option.label}))})}else if(this.props.widgetProps&&this.props.widgetProps.ChoiceList){var choiceList=[];try{(choiceList="string"==typeof this.props.widgetProps.ChoiceList?JSON.parse(this.props.widgetProps.ChoiceList):this.props.widgetProps.ChoiceList)&&choiceList.length>0&&choiceList.map(function(choiceItem,indx){choices.push(React.createElement(SelectItem,{value:choiceItem.value,text:choiceItem.name}))})}catch(err){}}var selectName=this.props.title?this.props.title:this.props.widgetProps&&this.props.widgetProps.Label?this.props.widgetProps.Label:"Select",props={name:selectName,className:this.props.className?this.props.className:this.props.widgetProps&&this.props.widgetProps.ClassName?this.props.widgetProps.ClassName:"",onChange:this.handleChange},value=this.props.value?this.props.value:this.props.widgetProps&&this.props.widgetProps.value?this.props.widgetProps.value:"";if((value=value||(this.props.widgetProps&&this.props.widgetProps.DefaultVaue?this.props.widgetProps.DefaultVaue:""))&&(props.defaultValue=value,this.props.widgetProps&&this.props.widgetProps.value!=value)){Object.assign({},this.props.widgetProps);this.updateWidgetProps(value)}this.props.iscellcontrol+""=="true"||this.props.hidelabel+""=="true"||this.props.hideLabel||this.props.widgetProps&&(1==this.props.widgetProps.HideLabel||"true"==this.props.widgetProps.HideLabel)?props.hideLabel=!0:props.labelText=this.props.required+""=="true"?selectName+" *":selectName,(this.props.light+""=="true"||this.props.widgetProps&&("true"==this.props.widgetProps.LightMode||1==this.props.widgetProps.LightMode))&&(props.light=!0);var embeddedStyles=React.createElement("style",null,this.props.inlinestyles||"");this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles));var containerStyles=this.props.containerStyles?this.props.containerStyles:null;return React.createElement("div",{className:containerStyles?"":"srs-prem-container",style:containerStyles},embeddedStyles,React.createElement(Select,_extends({key:this.state.selectKey},props),choices))}}]),_SrsSelect_}(React.Component),_export("SrsSelect",SrsSelect=function(props){return WrappedComponent=_SrsSelect_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsSelect",SrsSelect)}}}),System.register("component/studio/SrsCheckbox/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Checkbox,cloneDeep,_SrsCheckbox_,SrsCheckbox;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Checkbox=_carbonComponentsReact.Checkbox},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsCheckbox_=function(_React$Component){function _SrsCheckbox_(props){_classCallCheck(this,_SrsCheckbox_);var _this=_possibleConstructorReturn(this,(_SrsCheckbox_.__proto__||Object.getPrototypeOf(_SrsCheckbox_)).call(this,props));return _this.onChange=_this.onChange.bind(_this),_this}return _inherits(_SrsCheckbox_,_React$Component),_createClass(_SrsCheckbox_,[{key:"onChange",value:function(val){if(this.props.updateStore){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=val,this.props.updateStore({updates:{widgetProps:updatedProps}})}this.props.handleOnChange?this.props.handleOnChange(val):this.props.onChange&&this.props.onChange(val)}},{key:"render",value:function(){var title=this.props.title?this.props.title:this.props.widgetProps&&this.props.widgetProps.Label?this.props.widgetProps.Label:"Checkbox",isChecked=this.props.checked?this.props.checked:!this.props.widgetProps||!this.props.widgetProps.DefaultValue||this.props.widgetProps.DefaultValue,uid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),props={className:this.props.className?this.props.className:"checkbox",id:this.props.id?this.props.id:uid,onChange:this.onChange,value:isChecked};this.props.hideLabel?props.hideLabel=!0:props.labelText=this.props.required+""=="true"?title+" *":title,isChecked&&(props.defaultChecked=!0);var containerStyles=this.props.containerStyles?this.props.containerStyles:null;return React.createElement("div",{className:containerStyles?"":"srs-prem-container",style:containerStyles},React.createElement("fieldset",null,React.createElement(Checkbox,props)))}}]),_SrsCheckbox_}(React.Component),_export("SrsCheckbox",SrsCheckbox=function(props){return WrappedComponent=_SrsCheckbox_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsCheckbox",SrsCheckbox)}}}),System.register("component/studio/SrsDate/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DatePicker,DatePickerInput,cloneDeep,_SrsDate_,SrsDate;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DatePicker=_carbonComponentsReact.DatePicker,DatePickerInput=_carbonComponentsReact.DatePickerInput},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsDate_=function(_React$Component){function _SrsDate_(props){_classCallCheck(this,_SrsDate_);var _this=_possibleConstructorReturn(this,(_SrsDate_.__proto__||Object.getPrototypeOf(_SrsDate_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsDate_,_React$Component),_createClass(_SrsDate_,[{key:"handleChange",value:function(val){if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps),value=val&&Array.isArray(val)&&val.length>0?val[0]:"";controlProps[this.props.controlname]=value,this.props.updateStore({updates:{controlProps:controlProps}})}}else if(this.props.iscellcontrol+""=="true"){var controlId=this.props.controlid.replaceAll("_dot_","."),_value=val&&Array.isArray(val)&&val.length>0?val[0]:"",controlIdParts=(controlId=controlId.replace("cell_","")).split("."),formControlName=controlIdParts[0],rowIndx=controlIdParts[1],columnName=controlIdParts[2],cellName=columnName.split("_")[0],parentWidgetId=columnName.split("_")[1],controls=this.props.controls,formControlKey=this.props.pageid+this.props.pagesuffix+"_"+parentWidgetId;controls[formControlKey]=controls[formControlKey]||{},controls[formControlKey][formControlName]=controls[formControlKey][formControlName]||[],controls[formControlKey][formControlName][rowIndx]=controls[formControlKey][formControlName][rowIndx]||{},controls[formControlKey][formControlName][rowIndx][cellName]=_value,controls[formControlKey][formControlName][rowIndx].__isCellEdited__=Date.now(),this.props.updateStore({updates:{controls:controls}})}else{var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=val&&Array.isArray(val)&&val.length>0?val[0]:"",this.props.updateStore({updates:{widgetProps:updatedProps}})}}},{key:"render",value:function(){var styles={};try{styles=this.props.widgetProps&&this.props.widgetProps.styles?JSON.parse(this.props.widgetProps.styles):{}}catch(err){}var additionalProps={light:!0};return this.props.widgetProps&&(additionalProps.value=this.props.widgetProps.value),additionalProps.disabled=this.props.disabled+""=="true"||this.props.widgetProps&&this.props.widgetProps.ReadOnly+""=="true",React.createElement("div",{className:"srs-prem-container"},React.createElement(DatePicker,_extends({styles:styles},additionalProps,{id:"date-picker",onChange:this.handleChange,onClose:function(){},datePickerType:"single"}),React.createElement(DatePickerInput,{id:"date-picker-input-id",className:this.props.widgetProps&&this.props.widgetProps.ClassName||this.props.className||"date-class",labelText:this.props.widgetProps&&this.props.widgetProps.Label||(this.props.iscellcontrol+""=="true"?"":"Date"),pattern:"d{1,2}/d{4}",placeholder:"mm/dd/yyyy",invalid:this.props.widgetProps&&this.props.widgetProps.invalid||"",invalidText:this.props.widgetProps&&this.props.widgetProps.InvalidText||"",iconDescription:"Icon description",onClick:function(){}})))}}]),_SrsDate_}(React.Component),_export("SrsDate",SrsDate=function(props){return _SrsDate_}),_export("SrsDate",SrsDate)}}}),System.register("component/studio/SrsFilter/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-querybuilder","nanoid","carbon-components-react","component/studio/SrsSelect/Definition.js","component/studio/SrsButton/Definition.js","component/studio/SrsCheckbox/Definition.js","component/studio/SrsDate/Definition.js","component/studio/SrsReference/Definition.js","lodash.clonedeep","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/split-screen/32","@carbon/icons-react/lib/trash-can/32"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,QueryBuilder,nanoid,Button,TextInput,Toggle,SrsSelect,SrsCheckbox,SrsDate,SrsReference,cloneDeep,Close20,_SrsFilter_,SrsFilter;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactQuerybuilder){QueryBuilder=_reactQuerybuilder.default},function(_nanoid){nanoid=_nanoid.default},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput,Toggle=_carbonComponentsReact.Toggle},function(_componentStudioSrsSelectDefinitionJs){SrsSelect=_componentStudioSrsSelectDefinitionJs.SrsSelect},function(_componentStudioSrsButtonDefinitionJs){_componentStudioSrsButtonDefinitionJs.SrsButton},function(_componentStudioSrsCheckboxDefinitionJs){SrsCheckbox=_componentStudioSrsCheckboxDefinitionJs.SrsCheckbox},function(_componentStudioSrsDateDefinitionJs){SrsDate=_componentStudioSrsDateDefinitionJs.SrsDate},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonIconsReactLibAddAlt){_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSplitScreen){_carbonIconsReactLibSplitScreen.default},function(_carbonIconsReactLibTrashCan){Close20=_carbonIconsReactLibTrashCan.default}],execute:function(){_SrsFilter_=function(_React$Component){function _SrsFilter_(props){_classCallCheck(this,_SrsFilter_);var _this=_possibleConstructorReturn(this,(_SrsFilter_.__proto__||Object.getPrototypeOf(_SrsFilter_)).call(this,props));_this.tableName=_this.props.tablename?_this.props.tablename:_this.props.widgetProps&&_this.props.widgetProps.TableName?_this.props.widgetProps.TableName:"";var targetModelFields=[];if(_this.props.fields&&_this.props.fields.length>0){var tempTargetModelFields=_this.props.fields.filter(function(item){return item.parent==_this.tableName&&"id"!=item.text&&"field"==item.type}),tempTargetModelRelations=_this.props.fields.filter(function(item){return item.parent==_this.tableName&&("one2one"==item.type||"one2many"==item.type)});tempTargetModelFields.map(function(item){var iText=item.text,rName=iText.charAt(0).toLowerCase()+iText.substr(1,iText.length-1),rField=tempTargetModelRelations.filter(function(tmrItem){return tmrItem.text==rName})[0];rField?targetModelFields.push({name:item.text,label:item.text,datatype:"Reference",tableName:rField.to}):targetModelFields.push({name:item.text,label:item.text,datatype:item.datatype})})}return _this.state={fields:targetModelFields,query:_this.props&&_this.props.current_filter&&Object.keys(_this.props.current_filter).length>0?_this.transformFilter(_this.props.current_filter.where):{id:"g-"+nanoid(),combinator:"and",not:!1,rules:[]},format:"json",showCombinatorsBetweenRules:!1,showNotToggle:!1,resetOnFieldChange:!0},_this.props.schema&&0!=Object.keys(_this.props.schema).length?_this.setState({fields:targetModelFields}):$script.runAtServer("mmf.getSchemaData").then(function(schemaData){_this.props.updateStore({updates:{schema:schemaData}});var fields=[];if(schemaData&&schemaData.fields){var _tempTargetModelFields=schemaData.fields.filter(function(item){return item.parent==_this.tableName&&"id"!=item.text&&"field"==item.type}),_tempTargetModelRelations=schemaData.fields.filter(function(item){return item.parent==_this.tableName&&("one2one"==item.type||"one2many"==item.type)});_tempTargetModelFields.map(function(item){var iText=item.text,rName=iText.charAt(0).toLowerCase()+iText.substr(1,iText.length-1),rField=_tempTargetModelRelations.filter(function(tmrItem){return tmrItem.text==rName})[0];rField?fields.push({name:item.text,label:item.text,datatype:"Reference",tableName:rField.to}):fields.push({name:item.text,label:item.text,datatype:item.datatype})})}_this.setState({fields:fields})}),_this.transformFilter=_this.transformFilter.bind(_this),_this.addRuleAction=function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement("div",{className:"addRuleBtn"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("button",{onClick:this.props.handleOnClick},"+ Rule"))}}]),_class}(React.Component),_this.addGroupAction=function(_React$Component3){function _class2(){return _classCallCheck(this,_class2),_possibleConstructorReturn(this,(_class2.__proto__||Object.getPrototypeOf(_class2)).apply(this,arguments))}return _inherits(_class2,_React$Component3),_createClass(_class2,[{key:"render",value:function(){return React.createElement("div",{className:"addRuleBtn"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("button",{onClick:this.props.handleOnClick},"+ Group"))}}]),_class2}(React.Component),_this.closeIcon=function(_React$Component4){function _class3(){return _classCallCheck(this,_class3),_possibleConstructorReturn(this,(_class3.__proto__||Object.getPrototypeOf(_class3)).apply(this,arguments))}return _inherits(_class3,_React$Component4),_createClass(_class3,[{key:"render",value:function(){return React.createElement("div",{className:"closeBtn"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(Close20,{style:{marginTop:3,width:23,height:23,"&:hover":{cursor:"pointer"}},onClick:this.props.handleOnClick}))}}]),_class3}(React.Component),_this.fieldSelector=function(_React$Component5){function _class4(props){return _classCallCheck(this,_class4),_possibleConstructorReturn(this,(_class4.__proto__||Object.getPrototypeOf(_class4)).call(this,props))}return _inherits(_class4,_React$Component5),_createClass(_class4,[{key:"render",value:function(){var _props=this.props,className=_props.className,options=_props.options,title=_props.title,value=_props.value,Wrapper=SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0});return React.createElement(Wrapper,{className:className,value:value,title:title,onChange:this.props.handleOnChange,options:options})}}]),_class4}(React.Component),_this.operatorSelector=function(_React$Component6){function _class5(props){return _classCallCheck(this,_class5),_possibleConstructorReturn(this,(_class5.__proto__||Object.getPrototypeOf(_class5)).call(this,props))}return _inherits(_class5,_React$Component6),_createClass(_class5,[{key:"render",value:function(){var _props2=this.props,className=_props2.className,options=_props2.options,title=_props2.title,value=_props2.value,Wrapper=(_props2.level,_props2.fieldData,_props2.field,SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}));return React.createElement(Wrapper,{className:className,value:value,title:title,onChange:this.props.handleOnChange,options:options})}}]),_class5}(React.Component),_this.valueEditor=function(_React$Component7){function _class6(props){return _classCallCheck(this,_class6),_possibleConstructorReturn(this,(_class6.__proto__||Object.getPrototypeOf(_class6)).call(this,props))}return _inherits(_class6,_React$Component7),_createClass(_class6,[{key:"render",value:function(){var _this8=this,_props3=this.props,fieldData=(_props3.field,_props3.fieldData),title=_props3.title,operator=_props3.operator,value=_props3.value,type=_props3.type,values=(_props3.inputType,_props3.values),className=_props3.className,Wrapper=null;if("null"===operator||"notNull"===operator||"isEmpty"===operator||"isNotEmpty"===operator)return null;switch("isOneOf"==operator&&(type="select"),fieldData&&"DateTime"==fieldData.datatype&&(type="date"),fieldData&&"Reference"==fieldData.datatype&&(type="reference"),type){case"select":return Wrapper=SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}),React.createElement(Wrapper,{className:className,title:title,onChange:this.props.handleOnChange,value:value},"options=",values);case"checkbox":return Wrapper=Toggle,React.createElement("div",{style:{display:"inline-flex",marginLeft:5}},React.createElement(Wrapper,{labelA:"",labelB:"",className:className,title:title,defaultToggled:!!value,onToggle:function(val){return _this8.props.handleOnChange(val)},checked:!!value}));case"radio":return React.createElement("span",{className:className,title:title},values.map(function(v){return React.createElement("label",{key:v.name},React.createElement("input",{type:"radio",value:v.name,checked:value===v.name,onChange:function(e){return handleOnChange(e.target.value)}}),v.label)}));case"date":return Wrapper=SrsDate({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}),React.createElement("div",{style:{display:"inline-flex",marginLeft:2}},React.createElement(Wrapper,{className:className,title:title,onChange:this.props.handleOnChange,value:value},"options=",values));case"reference":var ComponentReference=SrsReference({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}),renderType=React.createElement(ComponentReference,{tablename:fieldData.tableName,displayfield:"Name",secondarydisplayfield:"",filter:JSON.stringify({where:{Name:{like:"Srs%"}}}),searchfields:"Name",title:"Render Type",defaultValue:"",onChange:function(selectedItem){}});return React.createElement("div",{className:"srs-ref-filter",style:{display:"inline-flex",marginLeft:2}},renderType);default:return React.createElement("div",{style:{display:"inline-flex",marginLeft:2}},React.createElement(TextInput,{hideLabel:!0,defaultValue:value,className:className,placeholder:"Enter Value...",onChange:function(e){return _this8.props.handleOnChange(e.target.value)}}))}}}]),_class6}(React.Component),_this.filters={String:[{name:"startsWith",label:"starts with"},{name:"endsWith",label:"ends with"},{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"=",label:"is"},{name:"isNot",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"isAnything",label:"is anything"},{name:"isOneOf",label:"is one of"},{name:"isEmptyString",label:"is empty string"},{name:"<=",label:"less than or is"},{name:">=",label:"greater than or is"},{name:"<>",label:"between"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"}],boolean:[{name:"=",label:"is"},{name:"!=",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"}],integer:[{name:"=",label:"is"},{name:"isNot",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"<",label:"less than"},{name:">",label:"greater than"},{name:"<=",label:"less than or is"},{name:">=",label:"greater than or is"},{name:"<>",label:"between"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDifferent",label:"is different"},{name:"graterThanField",label:"greater than field"},{name:"lessThanField",label:"less than field"},{name:"greaterThanorisField",label:"greater than or is field"},{name:"lessThanorisField",label:"less than or is field"}],DateTime:[{name:"=",label:"on"},{name:"!=",label:"not on"},{name:"<",label:"before"},{name:"<=",label:"at or before"},{name:">",label:"after"},{name:">=",label:"at or after"},{name:"on",label:"on"},{name:"<>",label:"between"},{name:"trend",label:"trend"},{name:"relative",label:"relative"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"},{name:"isMoreThan",label:"is more than"},{name:"isLessThan",label:"is less than"}],Reference:[{name:"=",label:"is"},{name:"!=",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"startsWith",label:"starts with"},{name:"startsWith",label:"ends with"},{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"},{name:"isEmptyString",label:"is empty string"}],choice:[{name:"=",label:"is"},{name:"!=",label:"is not"},{name:"isOneOf",label:"is one of"},{name:"isNotOneOf",label:"is not one of"},{name:"startsWith",label:"starts with"},{name:"startsWith",label:"ends with"},{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"}],list:[{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"}]},_this}return _inherits(_SrsFilter_,_React$Component),_createClass(_SrsFilter_,[{key:"transformFilter",value:function(filter){var _this9=this,result={};filter&&"object"==typeof filter&&(Array.isArray(filter)?filter.map(function(rule){result.rules=result.rules||[];var field=rule&&Object.keys(rule)&&1==Object.keys(rule).length&&Object.keys(rule)[0],operator="=",value=void 0;if(rule[field])if("and"==field||"or"==field){var tempResult={};tempResult.id="g-"+nanoid(),tempResult.combinator=field,tempResult.not=!1,tempResult.rules=_this9.transformFilter(rule[field]),result.rules.push(tempResult)}else"object"==typeof rule[field]?(operator=Object.keys(rule[field])&&1==Object.keys(rule[field]).length&&Object.keys(rule[field])[0],(value=Object.keys(rule[field])&&1==Object.keys(rule[field]).length&&rule[field][Object.keys(rule[field])[0]])&&(value=value.replace(/%/g,"")),result.rules.push({id:"r-"+nanoid(),field:field,operator:operator,value:value})):((value=rule[field])&&(value=value.replace(/%/g,"")),result.rules.push({id:"r-"+nanoid(),field:field,operator:operator,value:value}))}):Object.keys(filter).map(function(filterKey){"and"!=filterKey&&"or"!=filterKey||(result.id="g-"+nanoid(),result.combinator=filterKey,result.not=!1,result.rules=_this9.transformFilter(filter[filterKey]))}));return filter&&"object"==typeof filter&&Array.isArray(filter)?result.rules:result}},{key:"render",value:function(){var _this10=this,formatQuery=function(query){return{where:parseQuery(query)}},operatorMap={startsWith:"like",endsWith:"like",contains:"like",doesNotContain:"nlike","=":"eq","!=":"neq",">":"gt",">=":"gte","<":"lt","<=":"lte",between:"between",in:"inq","not in":"nin",isEmpty:"eq",isNotEmpty:"neq"},parseQuery=function parseQuery(query){var result={};return query.combinator&&(result[query.combinator]=[],query.rules&&query.rules.map(function(rule,indx){if(rule.combinator){var parsedQueryResult=parseQuery(rule);result[query.combinator].push(parsedQueryResult)}else switch(rule.operator){case"startsWith":var stWithRule={};stWithRule[rule.field]={},stWithRule[rule.field][operatorMap[rule.operator]]=rule.value+"%",result[query.combinator].push(stWithRule);break;case"contains":case"doesNotContain":var containRule={};containRule[rule.field]={},containRule[rule.field][operatorMap[rule.operator]]="%"+rule.value+"%",result[query.combinator].push(containRule);break;case"endsWith":var enWithRule={};enWithRule[rule.field]={},enWithRule[rule.field][operatorMap[rule.operator]]="%"+rule.value,result[query.combinator].push(enWithRule);break;case"between":var betWRule={};betWRule[rule.field]={},betWRule[rule.field][operatorMap[rule.operator]]=[0,rule.value],result[query.combinator].push(betWRule);break;case"in":var inRule={};inRule[rule.field]={},inRule[rule.field][operatorMap[rule.operator]]=[0,rule.value],result[query.combinator].push(inRule);break;case"=":case"!=":case">":case"<":case"<=":case">=":case"isEmpty":case"isNotEmpty":var arthRule={};arthRule[rule.field]={},arthRule[rule.field][operatorMap[rule.operator]]=rule.value,result[query.combinator].push(arthRule);break;case"like":case"nlike":var revLikeRule={};revLikeRule[rule.field]={},revLikeRule[rule.field][rule.operator]="%"+rule.value+"%",result[query.combinator].push(revLikeRule);break;case"eq":case"neq":case"gt":case"gte":case"lt":case"lte":case"between":case"inq":case"nin":case"eq":case"neq":var revRule={};revRule[rule.field]={},revRule[rule.field][rule.operator]=rule.value,result[query.combinator].push(revRule)}})),result};this.props.widgetProps&&this.props.widgetProps.updateStore({updates:{current_filter:formatQuery(this.query)}});var filterStyle=this.props.maxheight?{maxHeight:this.props.maxheight}:{};return React.createElement("div",null,React.createElement("div",{className:"flex-box-outer"},React.createElement("div",{className:"control-panel"},React.createElement(Button,{size:"small",style:{marginRight:5,backgroundColor:"darkgray",color:"black"},onClick:function(){return function(){if(!_this10.state.query||!_this10.state.query.rules||0!=_this10.state.query.rules.length){var result=formatQuery(_this10.state.query);if(_this10.props.resultkey){var activeFilters=cloneDeep(_this10.props.active_filters);activeFilters[_this10.props.resultkey]=result,_this10.props.updateStore&&_this10.props.updateStore({updates:{active_filters:activeFilters,current_filter:result,showFilter:!1}})}else _this10.props.updateStore&&_this10.props.updateStore({updates:{current_filter:result,showFilter:!1}})}}()}},"Apply"),React.createElement(Button,{size:"small",style:{marginRight:5,backgroundColor:"darkgray",color:"black"},onClick:function(){return function(){if(_this10.setState({query:{id:"g-"+nanoid(),combinator:"and",not:!1,rules:[]},fields:_this10.state.fields}),_this10.props.resultkey){var activeFilters=cloneDeep(_this10.props.active_filters);activeFilters[_this10.props.resultkey]={},_this10.props.updateStore&&_this10.props.updateStore({updates:{active_filters:activeFilters,current_filter:{},showFilter:!1}})}else _this10.props.updateStore&&_this10.props.updateStore({updates:{current_filter:{},showFilter:!1}})}()}},"Clear")),React.createElement("hr",null),React.createElement("div",{className:"flex-box",style:filterStyle},React.createElement("div",{className:"scroll"},React.createElement(QueryBuilder,{query:this.state.query,fields:this.state.fields,controlElements:{combinatorSelector:SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0,className:"showCombinator"}),addRuleAction:this.addRuleAction,addGroupAction:this.addGroupAction,removeGroupAction:this.closeIcon,notToggle:SrsCheckbox({containerStyles:{display:"inline-flex",marginLeft:2},title:"NOT",className:"notToggle"}),valueEditor:this.valueEditor,fieldSelector:this.fieldSelector,operatorSelector:this.operatorSelector},controlClassnames:{fields:"form-control"},onQueryChange:function(query){_this10.setState({query:query})},getOperators:function(field){var sField=_this10.state.fields.filter(function(fField){return fField.name==field})[0];return sField&&_this10.filters[sField.datatype]||null},getValueEditorType:function(field,operator){switch(field){case"gender":return"radio";case"instrument":return"select";case"isMusician":return"checkbox";default:return"text"}},getInputType:function(field,operator){switch(field){case"age":return"number";default:return"text"}},getValues:function(field,operator){switch(field){case"instrument":return[{name:"Guitar",label:"Guitar"},{name:"Piano",label:"Piano"},{name:"Vocals",label:"Vocals"},{name:"Drums",label:"Drums"}];case"gender":return[{name:"M",label:"Male"},{name:"F",label:"Female"},{name:"O",label:"Other"}];default:return[]}},showCombinatorsBetweenRules:this.state.showCombinatorsBetweenRules,showNotToggle:this.state.showNotToggle,resetOnFieldChange:this.state.resetOnFieldChange})))))}}]),_SrsFilter_}(React.Component),_export("SrsFilter",SrsFilter=function(props){return _SrsFilter_}),_export("SrsFilter",SrsFilter)}}}),System.register("component/studio/SrsForm.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsForm_,SrsForm,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SrsForm_=function(_React$Component){function _SrsForm_(){return _classCallCheck(this,_SrsForm_),_possibleConstructorReturn(this,(_SrsForm_.__proto__||Object.getPrototypeOf(_SrsForm_)).apply(this,arguments))}return _inherits(_SrsForm_,_React$Component),_createClass(_SrsForm_,[{key:"render",value:function(){this.props.widgetProps&&this.props.widgetProps.CreatePageId?this.props.widgetProps.CreatePageId:this.props.createpageid,this.props.widgetProps&&this.props.widgetProps.EditPageId?this.props.widgetProps.EditPageId:this.props.editpageid;var pageParams=this.props.params?JSON.parse(atob(this.props.params)):{};return React.createElement("div",{style:{height:"inherit"}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("page-designer-preview",{shadow:!0,style:{height:"inherit"},previewpageid:this.props.pageid,pageparams:JSON.stringify(pageParams),responsive:"true",widgetspacing:"false"}))}}]),_SrsForm_}(React.Component),_export("SrsForm",SrsForm=function(props){return _SrsForm_}),_export("SrsForm",SrsForm),_export("default",SrsForm),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsForm/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsForm_,SrsForm;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SrsForm_=function(_React$Component){function _SrsForm_(){return _classCallCheck(this,_SrsForm_),_possibleConstructorReturn(this,(_SrsForm_.__proto__||Object.getPrototypeOf(_SrsForm_)).apply(this,arguments))}return _inherits(_SrsForm_,_React$Component),_createClass(_SrsForm_,[{key:"render",value:function(){this.props.widgetProps&&this.props.widgetProps.CreatePageId?this.props.widgetProps.CreatePageId:this.props.createpageid,this.props.widgetProps&&this.props.widgetProps.EditPageId?this.props.widgetProps.EditPageId:this.props.editpageid;var pageParams=this.props.params?JSON.parse(atob(this.props.params)):{};return React.createElement("div",{style:{height:"inherit"}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("page-designer-preview",{shadow:!0,style:{height:"inherit"},previewpageid:this.props.pageid,pageparams:JSON.stringify(pageParams),responsive:"true",widgetspacing:"false"}))}}]),_SrsForm_}(React.Component),_export("SrsForm",SrsForm=function(props){return _SrsForm_}),_export("SrsForm",SrsForm)}}}),System.register("component/studio/SrsGeoMap.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-google-maps","react-geolocated"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,withScriptjs,withGoogleMap,GoogleMap,Marker,geolocated,sourceLocation,markerLocations,googleMapURL,_SrsGeoMap_,SrsGeoMap,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactGoogleMaps){withScriptjs=_reactGoogleMaps.withScriptjs,withGoogleMap=_reactGoogleMaps.withGoogleMap,GoogleMap=_reactGoogleMaps.GoogleMap,Marker=_reactGoogleMaps.Marker},function(_reactGeolocated){geolocated=_reactGeolocated.geolocated}],execute:function(){sourceLocation={lat:17.4903988,lng:78.3677562},markerLocations=[{lat:17.4433571,lng:78.3822111},{lat:17.4647175,lng:78.3542657}],googleMapURL="https://maps.googleapis.com/maps/api/js?key="+"AIzaSyAuO0Ty8grufH2Kih1IM75KtnADifWVy2I"+"&v=3.exp&libraries=geometry,drawing,places",_SrsGeoMap_=function(_React$Component){function _SrsGeoMap_(){return _classCallCheck(this,_SrsGeoMap_),_possibleConstructorReturn(this,(_SrsGeoMap_.__proto__||Object.getPrototypeOf(_SrsGeoMap_)).apply(this,arguments))}return _inherits(_SrsGeoMap_,_React$Component),_createClass(_SrsGeoMap_,[{key:"render",value:function(){if(this.props.isGeolocationAvailable&&this.props.isGeolocationEnabled&&this.props.coords){sourceLocation={lat:this.props.coords.latitude,lng:this.props.coords.longitude};var MapWithAMarker=withScriptjs(withGoogleMap(function(props){return React.createElement(GoogleMap,{defaultZoom:12,defaultCenter:sourceLocation},markerLocations.map(function(markerLocation){return React.createElement(Marker,{position:markerLocation})}))}));return React.createElement(MapWithAMarker,{googleMapURL:googleMapURL,loadingElement:React.createElement("div",{style:{height:"100%"}}),containerElement:React.createElement("div",{style:{height:"400px"}}),mapElement:React.createElement("div",{style:{height:"100%"}})})}return React.createElement("div",null,"Getting location data…")}}]),_SrsGeoMap_}(React.Component),_export("SrsGeoMap",SrsGeoMap=function(props){return geolocated({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3,isGeolocationAvailable:!0,isGeolocationEnabled:!0})(_SrsGeoMap_)}),_export("SrsGeoMap",SrsGeoMap),_export("default",SrsGeoMap),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsGeoMap/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-google-maps","react-geolocated"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,withScriptjs,withGoogleMap,GoogleMap,Marker,geolocated,sourceLocation,markerLocations,googleMapURL,_SrsGeoMap_,SrsGeoMap;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactGoogleMaps){withScriptjs=_reactGoogleMaps.withScriptjs,withGoogleMap=_reactGoogleMaps.withGoogleMap,GoogleMap=_reactGoogleMaps.GoogleMap,Marker=_reactGoogleMaps.Marker},function(_reactGeolocated){geolocated=_reactGeolocated.geolocated}],execute:function(){sourceLocation={lat:17.4903988,lng:78.3677562},markerLocations=[{lat:17.4433571,lng:78.3822111},{lat:17.4647175,lng:78.3542657}],googleMapURL="https://maps.googleapis.com/maps/api/js?key="+"AIzaSyAuO0Ty8grufH2Kih1IM75KtnADifWVy2I"+"&v=3.exp&libraries=geometry,drawing,places",_SrsGeoMap_=function(_React$Component){function _SrsGeoMap_(){return _classCallCheck(this,_SrsGeoMap_),_possibleConstructorReturn(this,(_SrsGeoMap_.__proto__||Object.getPrototypeOf(_SrsGeoMap_)).apply(this,arguments))}return _inherits(_SrsGeoMap_,_React$Component),_createClass(_SrsGeoMap_,[{key:"render",value:function(){if(this.props.isGeolocationAvailable&&this.props.isGeolocationEnabled&&this.props.coords){sourceLocation={lat:this.props.coords.latitude,lng:this.props.coords.longitude};var MapWithAMarker=withScriptjs(withGoogleMap(function(props){return React.createElement(GoogleMap,{defaultZoom:12,defaultCenter:sourceLocation},markerLocations.map(function(markerLocation){return React.createElement(Marker,{position:markerLocation})}))}));return React.createElement(MapWithAMarker,{googleMapURL:googleMapURL,loadingElement:React.createElement("div",{style:{height:"100%"}}),containerElement:React.createElement("div",{style:{height:"400px"}}),mapElement:React.createElement("div",{style:{height:"100%"}})})}return React.createElement("div",null,"Getting location data…")}}]),_SrsGeoMap_}(React.Component),_export("SrsGeoMap",SrsGeoMap=function(props){return geolocated({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3,isGeolocationAvailable:!0,isGeolocationEnabled:!0})(_SrsGeoMap_)}),_export("SrsGeoMap",SrsGeoMap)}}}),System.register("client/script/studio/DataGrid.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/defineProperty.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/objectWithoutProperties.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/toConsumableArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/toArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/slicedToArray.js","react/jsx-runtime","react","clsx","react-dom","carbon-components-react"],function(_export,_context){"use strict";var _defineProperty,_objectWithoutProperties,_toConsumableArray,_toArray,_extends,_slicedToArray,ReactJSX,React,clsx,createPortal,TextInput,jsxs,jsx,Fragment,useCallback,useRef,useEffect,useState,useLayoutEffect,useMemo,memo,cloneElement,forwardRef,useImperativeHandle,SELECT_COLUMN_KEY,SelectColumn,RENDER_BACTCH_SIZE,SORT_TEXT,HeaderRow$1,FilterRow$1,Cell$1,Row$1,GroupCell$1,GroupRowRenderer,SummaryCell$1,SummaryRow$1;function useFocusRef(isCellSelected){var ref=useRef(null);return useLayoutEffect(function(){var _ref$current;isCellSelected&&(null==(_ref$current=ref.current)||_ref$current.focus({preventScroll:!0}))},[isCellSelected]),ref}function SelectCellFormatter(_ref){var value=_ref.value,tabIndex=_ref.tabIndex,isCellSelected=_ref.isCellSelected,disabled=_ref.disabled,onClick=_ref.onClick,onChange=_ref.onChange,ariaLabel=_ref["aria-label"],ariaLabelledBy=_ref["aria-labelledby"],inputRef=useFocusRef(isCellSelected);return jsxs("label",{className:"rdg-checkbox-label"+(disabled?" rdg-checkbox-label-disabled":""),children:[jsx("input",{"aria-label":ariaLabel,"aria-labelledby":ariaLabelledBy,tabIndex:tabIndex,ref:inputRef,type:"checkbox",className:"rdg-checkbox-input",disabled:disabled,checked:value,onChange:function(e){onChange(e.target.checked,e.nativeEvent.shiftKey)},onClick:onClick}),jsx("div",{className:"rdg-checkbox"})]})}function ValueFormatter(props){try{return jsx(Fragment,{children:props.row[props.column.key]})}catch(ex){return null}}function ToggleGroupFormatter(_ref2){var groupKey=_ref2.groupKey,isExpanded=_ref2.isExpanded,isCellSelected=_ref2.isCellSelected,toggleGroup=_ref2.toggleGroup,cellRef=useFocusRef(isCellSelected);return jsxs("span",{ref:cellRef,className:"rdg-group-cell-content",tabIndex:-1,onKeyDown:function(_ref3){"Enter"===_ref3.key&&toggleGroup()},children:[groupKey,jsx("svg",{viewBox:"0 0 14 8",width:"14",height:"8",className:"rdg-caret",children:jsx("path",{d:isExpanded?"M1 1 L 7 7 L 13 1":"M1 7 L 7 1 L 13 7"})})]})}function stopPropagation(event){event.stopPropagation()}function wrapEvent(ourHandler,theirHandler){return void 0===theirHandler?ourHandler:function(event){ourHandler(event),theirHandler(event)}}function useViewportColumns(_ref4){var _defaultColumnOptions,_defaultColumnOptions2,_defaultColumnOptions3,_defaultColumnOptions4,rawColumns=_ref4.rawColumns,columnWidths=_ref4.columnWidths,viewportWidth=_ref4.viewportWidth,scrollLeft=_ref4.scrollLeft,defaultColumnOptions=_ref4.defaultColumnOptions,rawGroupBy=_ref4.rawGroupBy,minColumnWidth=null!=(_defaultColumnOptions=null==defaultColumnOptions?void 0:defaultColumnOptions.minWidth)?_defaultColumnOptions:40,defaultFormatter=null!=(_defaultColumnOptions2=null==defaultColumnOptions?void 0:defaultColumnOptions.formatter)?_defaultColumnOptions2:ValueFormatter,defaultSortable=null!=(_defaultColumnOptions3=null==defaultColumnOptions?void 0:defaultColumnOptions.sortable)&&_defaultColumnOptions3,defaultResizable=null!=(_defaultColumnOptions4=null==defaultColumnOptions?void 0:defaultColumnOptions.resizable)&&_defaultColumnOptions4,_useMemo=useMemo(function(){var left=0,totalWidth=0,allocatedWidths=0,unassignedColumnsCount=0,lastFrozenColumnIndex=-1,totalFrozenColumnWidth=0,columns=rawColumns.map(function(metricsColumn){var width=function(_ref7,columnWidths,viewportWidth){var key=_ref7.key,width=_ref7.width;if(columnWidths.has(key))return columnWidths.get(key);if("number"==typeof width)return width;if("string"==typeof width&&/^\d+%$/.test(width))return Math.floor(viewportWidth*parseInt(width,10)/100);return}(metricsColumn,columnWidths,viewportWidth);void 0===width?unassignedColumnsCount++:(width=clampColumnWidth(width,metricsColumn,minColumnWidth),allocatedWidths+=width);var column=_extends({},metricsColumn,{width:width});return(null==rawGroupBy?void 0:rawGroupBy.includes(column.key))&&(column.frozen=!0,column.rowGroup=!0),column.frozen&&lastFrozenColumnIndex++,column});columns.sort(function(_ref5,_ref6){var aKey=_ref5.key,frozenA=_ref5.frozen,bKey=_ref6.key,frozenB=_ref6.frozen;return aKey===SELECT_COLUMN_KEY?-1:bKey===SELECT_COLUMN_KEY?1:(null==rawGroupBy?void 0:rawGroupBy.includes(aKey))?rawGroupBy.includes(bKey)?rawGroupBy.indexOf(aKey)-rawGroupBy.indexOf(bKey):-1:(null==rawGroupBy?void 0:rawGroupBy.includes(bKey))?1:frozenA?frozenB?0:-1:frozenB?1:0});var unallocatedWidth=viewportWidth-allocatedWidths,unallocatedColumnWidth=Math.max(Math.floor(unallocatedWidth/unassignedColumnsCount),minColumnWidth),groupBy=[],calculatedColumns=columns.map(function(column,idx){var _column$width,_column$sortable,_column$resizable,_column$formatter,_column$groupFormatte,width=null!=(_column$width=column.width)?_column$width:clampColumnWidth(unallocatedColumnWidth,column,minColumnWidth),newColumn=_extends({},column,{idx:idx,width:width,left:left,sortable:null!=(_column$sortable=column.sortable)?_column$sortable:defaultSortable,resizable:null!=(_column$resizable=column.resizable)?_column$resizable:defaultResizable,formatter:null!=(_column$formatter=column.formatter)?_column$formatter:defaultFormatter});newColumn.rowGroup&&(groupBy.push(column.key),newColumn.groupFormatter=null!=(_column$groupFormatte=column.groupFormatter)?_column$groupFormatte:ToggleGroupFormatter);return totalWidth+=width,left+=width,newColumn});if(-1!==lastFrozenColumnIndex){var lastFrozenColumn=calculatedColumns[lastFrozenColumnIndex];lastFrozenColumn.isLastFrozenColumn=!0,totalFrozenColumnWidth=lastFrozenColumn.left+lastFrozenColumn.width}return{columns:calculatedColumns,lastFrozenColumnIndex:lastFrozenColumnIndex,totalFrozenColumnWidth:totalFrozenColumnWidth,totalColumnWidth:totalWidth,groupBy:groupBy}},[columnWidths,defaultFormatter,defaultResizable,defaultSortable,minColumnWidth,rawColumns,rawGroupBy,viewportWidth]),columns=_useMemo.columns,lastFrozenColumnIndex=_useMemo.lastFrozenColumnIndex,totalColumnWidth=_useMemo.totalColumnWidth,totalFrozenColumnWidth=_useMemo.totalFrozenColumnWidth,groupBy=_useMemo.groupBy,_useMemo2=useMemo(function(){var viewportLeft=scrollLeft+totalFrozenColumnWidth,viewportRight=scrollLeft+viewportWidth,lastColIdx=columns.length-1,firstUnfrozenColumnIdx=Math.min(lastFrozenColumnIndex+1,lastColIdx);if(viewportLeft>=viewportRight)return[firstUnfrozenColumnIdx,firstUnfrozenColumnIdx];for(var colVisibleStartIdx=firstUnfrozenColumnIdx;colVisibleStartIdx<lastColIdx;){var _columns$colVisibleSt=columns[colVisibleStartIdx];if(_columns$colVisibleSt.left+_columns$colVisibleSt.width>viewportLeft)break;colVisibleStartIdx++}for(var colVisibleEndIdx=colVisibleStartIdx;colVisibleEndIdx<lastColIdx;){var _columns$colVisibleEn=columns[colVisibleEndIdx];if(_columns$colVisibleEn.left+_columns$colVisibleEn.width>=viewportRight)break;colVisibleEndIdx++}return[Math.max(firstUnfrozenColumnIdx,colVisibleStartIdx-1),Math.min(lastColIdx,colVisibleEndIdx+1)]},[columns,lastFrozenColumnIndex,scrollLeft,totalFrozenColumnWidth,viewportWidth]),_useMemo3=_slicedToArray(_useMemo2,2),colOverscanStartIdx=_useMemo3[0],colOverscanEndIdx=_useMemo3[1],viewportColumns=useMemo(function(){for(var viewportColumns=[],colIdx=0;colIdx<=colOverscanEndIdx;colIdx++){var column=columns[colIdx];colIdx<colOverscanStartIdx&&!column.frozen||viewportColumns.push(column)}return viewportColumns},[colOverscanEndIdx,colOverscanStartIdx,columns]);return{columns:columns,viewportColumns:viewportColumns,totalColumnWidth:totalColumnWidth,lastFrozenColumnIndex:lastFrozenColumnIndex,totalFrozenColumnWidth:totalFrozenColumnWidth,groupBy:groupBy}}function clampColumnWidth(width,_ref8,minColumnWidth){var minWidth=_ref8.minWidth,maxWidth=_ref8.maxWidth;return width=Math.max(width,null!=minWidth?minWidth:minColumnWidth),"number"==typeof maxWidth?Math.min(width,maxWidth):width}function useLatestFunc(fn){var ref=useRef(fn);return useEffect(function(){ref.current=fn}),useCallback(function(){ref.current.apply(ref,arguments)},[])}function SortableHeaderCell(_ref14){var column=_ref14.column,onSort=_ref14.onSort,sortColumn=_ref14.sortColumn,sortDirection=_ref14.sortDirection,children=_ref14.children;return sortDirection=sortColumn===column.key&&sortDirection||"NONE",jsxs("span",{className:"rdg-header-sort-cell",onClick:function(){if(onSort){var sortDescendingFirst=column.sortDescendingFirst,direction=void 0;switch(sortDirection){case"ASC":direction=sortDescendingFirst?"NONE":"DESC";break;case"DESC":direction=sortDescendingFirst?"ASC":"NONE";break;default:direction=sortDescendingFirst?"DESC":"ASC"}onSort(column.key,direction)}},children:[jsx("span",{className:"rdg-header-sort-name",children:children}),jsx("span",{children:SORT_TEXT[sortDirection]})]})}function ResizableHeaderCell(_ref15){var children=_ref15.children,column=_ref15.column,onResize=_ref15.onResize;function handleResize(x,target){var width=x-target.getBoundingClientRect().left;width>0&&onResize(column,width)}return cloneElement(children,{onMouseDown:function(event){if(0===event.button){var currentTarget=event.currentTarget,offset=currentTarget.getBoundingClientRect().right-event.clientX;if(!(offset>11)){var onMouseMove=function(event){handleResize(event.clientX+offset,currentTarget)};event.preventDefault(),window.addEventListener("mousemove",onMouseMove),window.addEventListener("mouseup",function onMouseUp(){window.removeEventListener("mousemove",onMouseMove),window.removeEventListener("mouseup",onMouseUp)})}}},onTouchStart:function(event){var touch=event.changedTouches[0],identifier=touch.identifier,currentTarget=event.currentTarget,offset=currentTarget.getBoundingClientRect().right-touch.clientX;if(!(offset>11)){var onTouchMove=function(event){var touch=getTouch(event);touch&&handleResize(touch.clientX+offset,currentTarget)};window.addEventListener("touchmove",onTouchMove),window.addEventListener("touchend",function onTouchEnd(event){getTouch(event)&&(window.removeEventListener("touchmove",onTouchMove),window.removeEventListener("touchend",onTouchEnd))})}function getTouch(event){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=event.changedTouches[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var _touch=_step3.value;if(_touch.identifier===identifier)return _touch}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return null}}})}function HeaderCell(_ref16){var column=_ref16.column,onResize=_ref16.onResize,allRowsSelected=_ref16.allRowsSelected,onAllRowsSelectionChange=_ref16.onAllRowsSelectionChange,sortColumn=_ref16.sortColumn,sortDirection=_ref16.sortDirection,onSort=_ref16.onSort;var cell=column.headerRenderer?jsx(column.headerRenderer,{column:column,sortColumn:sortColumn,sortDirection:sortDirection,onSort:onSort,allRowsSelected:allRowsSelected,onAllRowsSelectionChange:onAllRowsSelectionChange}):column.sortable?jsx(SortableHeaderCell,{column:column,onSort:onSort,sortColumn:sortColumn,sortDirection:sortDirection,children:column.name}):column.name,className=clsx("rdg-cell",column.headerCellClass,column.resizable&&"rdg-cell-resizable",column.frozen&&"rdg-cell-frozen",column.isLastFrozenColumn&&"rdg-cell-frozen-last"),style={width:column.width,left:column.left};return cell=jsx("div",{role:"columnheader","aria-colindex":column.idx+1,"aria-sort":sortColumn===column.key?function(sortDirection){switch(sortDirection){case"ASC":return"ascending";case"DESC":return"descending";default:return"none"}}(sortDirection):void 0,className:className,style:style,children:cell}),column.resizable&&(cell=jsx(ResizableHeaderCell,{column:column,onResize:onResize,children:cell})),cell}function onEditorNavigation(_ref17){var key=_ref17.key,target=_ref17.target;return"Tab"===key&&(target instanceof HTMLInputElement||target instanceof HTMLTextAreaElement||target instanceof HTMLSelectElement)&&target.matches(".rdg-editor-container > :only-child, .rdg-editor-container > label:only-child > :only-child")}function isCtrlKeyHeldDown(e){return(e.ctrlKey||e.metaKey)&&"Control"!==e.key}function assertIsValidKeyGetter(keyGetter){if("function"!=typeof keyGetter)throw new Error("Please specify the rowKeyGetter prop to use selection")}function HeaderRow(_ref21){var columns=_ref21.columns,rows=_ref21.rows,rowKeyGetter=_ref21.rowKeyGetter,onSelectedRowsChange=_ref21.onSelectedRowsChange,allRowsSelected=_ref21.allRowsSelected,onColumnResize=_ref21.onColumnResize,sortColumn=_ref21.sortColumn,sortDirection=_ref21.sortDirection,onSort=_ref21.onSort,handleAllRowsSelectionChange=useCallback(function(checked){if(onSelectedRowsChange){assertIsValidKeyGetter(rowKeyGetter);var newSelectedRows=new Set;if(checked){var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=rows[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var row=_step4.value;newSelectedRows.add(rowKeyGetter(row))}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}onSelectedRowsChange(newSelectedRows)}},[onSelectedRowsChange,rows,rowKeyGetter]);return jsx("div",{role:"row","aria-rowindex":1,className:"rdg-header-row",children:columns.map(function(column){return jsx(HeaderCell,{column:column,onResize:onColumnResize,allRowsSelected:allRowsSelected,onAllRowsSelectionChange:handleAllRowsSelectionChange,onSort:onSort,sortColumn:sortColumn,sortDirection:sortDirection},column.key)})})}function FilterRow(_ref22){var columns=_ref22.columns,filters=_ref22.filters,onFiltersChange=_ref22.onFiltersChange;return jsx("div",{role:"row","aria-rowindex":2,className:"rdg-filter-row",children:columns.map(function(column){var key=column.key,className=clsx("rdg-cell",column.frozen&&"rdg-cell-frozen",column.isLastFrozenColumn&&"rdg-cell-frozen-last"),style={width:column.width,left:column.left};return jsx("div",{style:style,className:className,children:column.filterRenderer&&jsx(column.filterRenderer,{column:column,value:null==filters?void 0:filters[column.key],onChange:function(value){return function(key,value){var newFilters=_extends({},filters);if(value.indexOf("JSON:")>-1){value=value.split("JSON:")[1];try{value=JSON.parse(value)}catch(err){value=""}}newFilters[key]=value,null==onFiltersChange||onFiltersChange(newFilters)}(key,value)}})},key)})})}function Cell(_ref23,ref){var className=_ref23.className,column=_ref23.column,isCellSelected=_ref23.isCellSelected,isCopied=_ref23.isCopied,isDraggedOver=_ref23.isDraggedOver,isRowSelected=_ref23.isRowSelected,row=_ref23.row,rowIdx=_ref23.rowIdx,dragHandleProps=_ref23.dragHandleProps,onRowClick=_ref23.onRowClick,onClick=_ref23.onClick,onDoubleClick=_ref23.onDoubleClick,onContextMenu=_ref23.onContextMenu,onRowChange=_ref23.onRowChange,selectCell=_ref23.selectCell,selectRow=_ref23.selectRow,props=_objectWithoutProperties(_ref23,["className","column","isCellSelected","isCopied","isDraggedOver","isRowSelected","row","rowIdx","dragHandleProps","onRowClick","onClick","onDoubleClick","onContextMenu","onRowChange","selectCell","selectRow"]),cellRef=useRef(null),cellClass=column.cellClass;function selectCellWrapper(openEditor){selectCell({idx:column.idx,rowIdx:rowIdx},openEditor)}return className=clsx("rdg-cell","function"==typeof cellClass?cellClass(row):cellClass,className,column.frozen&&"rdg-cell-frozen",column.isLastFrozenColumn&&"rdg-cell-frozen-last",isCellSelected&&"rdg-cell-selected",isCopied&&"rdg-cell-copied",isDraggedOver&&"rdg-cell-dragged-over"),jsx("div",_extends({role:"gridcell","aria-colindex":column.idx+1,"aria-selected":isCellSelected,ref:function(){for(var _len=arguments.length,refs=Array(_len),_key=0;_key<_len;_key++)refs[_key]=arguments[_key];return useCallback(function(handle){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=refs[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var ref=_step.value;"function"==typeof ref?ref(handle):null!==ref&&(ref.current=handle)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}},refs)}(cellRef,ref),className:className,style:{width:column.width,left:column.left},onClick:wrapEvent(function(){var _column$editorOptions;selectCellWrapper(null==(_column$editorOptions=column.editorOptions)?void 0:_column$editorOptions.editOnClick),null==onRowClick||onRowClick(rowIdx,row,column)},onClick),onDoubleClick:wrapEvent(function(){selectCellWrapper(!0)},onDoubleClick),onContextMenu:wrapEvent(function(){selectCellWrapper()},onContextMenu)},props,{children:!column.rowGroup&&jsxs(Fragment,{children:[jsx(column.formatter,{column:column,rowIdx:rowIdx,row:row,isCellSelected:isCellSelected,isRowSelected:isRowSelected,onRowSelectionChange:function(checked,isShiftClick){selectRow({rowIdx:rowIdx,checked:checked,isShiftClick:isShiftClick})},onRowChange:function(newRow){onRowChange(rowIdx,newRow)}}),dragHandleProps&&jsx("div",_extends({className:"rdg-cell-drag-handle"},dragHandleProps))]})}))}function EditorContainer(_ref24){var _column$editorOptions,row=_ref24.row,column=_ref24.column,onRowChange=_ref24.onRowChange,props=_objectWithoutProperties(_ref24,["row","column","onRowChange"]),onClickCapture=function(onClick){var frameRequestRef=useRef();function cancelAnimationFrameRequest(){"number"==typeof frameRequestRef.current&&(cancelAnimationFrame(frameRequestRef.current),frameRequestRef.current=void 0)}var onClickRef=useRef(function(){throw new Error("Cannot call an event handler while rendering.")});return useEffect(function(){onClickRef.current=onClick}),useEffect(function(){function onOutsideClick(){frameRequestRef.current=void 0,onClickRef.current()}function onWindowCaptureClick(){cancelAnimationFrameRequest(),frameRequestRef.current=requestAnimationFrame(onOutsideClick)}return window.addEventListener("click",onWindowCaptureClick,{capture:!0}),function(){window.removeEventListener("click",onWindowCaptureClick,{capture:!0}),cancelAnimationFrameRequest()}},[]),cancelAnimationFrameRequest}(function(){return onRowChange(row,!0)});if(void 0===column.editor)return null;var editor=jsx("div",{className:"rdg-editor-container",onClickCapture:onClickCapture,children:jsx(column.editor,_extends({row:row,column:column,onRowChange:onRowChange},props))});return(null==(_column$editorOptions=column.editorOptions)?void 0:_column$editorOptions.createPortal)?createPortal(editor,props.editorPortalTarget):editor}function EditCell(_ref25){var className=_ref25.className,column=_ref25.column,row=_ref25.row,rowIdx=_ref25.rowIdx,editorProps=_ref25.editorProps,props=_objectWithoutProperties(_ref25,["className","column","row","rowIdx","editorProps"]),_useState5=useState(null),_useState6=_slicedToArray(_useState5,2),dimensions=_useState6[0],setDimensions=_useState6[1],cellRef=useCallback(function(node){if(null!==node){var _node$getBoundingClie=node.getBoundingClientRect(),left=_node$getBoundingClie.left,top=_node$getBoundingClie.top;setDimensions({left:left,top:top})}},[]),cellClass=column.cellClass;return className=clsx("rdg-cell rdg-cell-selected rdg-cell-editing","function"==typeof cellClass?cellClass(row):cellClass,className,column.frozen&&"rdg-cell-frozen",column.isLastFrozenColumn&&"rdg-cell-frozen-last"),jsx("div",_extends({role:"gridcell","aria-colindex":column.idx+1,"aria-selected":!0,ref:cellRef,className:className,style:{width:column.width,left:column.left}},props,{children:function(){var _document$scrollingEl;if(null!==dimensions){var _ref26=null!=(_document$scrollingEl=document.scrollingElement)?_document$scrollingEl:document.documentElement,docTop=_ref26.scrollTop,docLeft=_ref26.scrollLeft,left=dimensions.left,top=dimensions.top;return jsx(EditorContainer,_extends({},editorProps,{rowIdx:rowIdx,column:column,left:left+docLeft,top:top+docTop}))}}()}))}function Row(_ref27,ref){var _ref27$cellRenderer=_ref27.cellRenderer,CellRenderer=void 0===_ref27$cellRenderer?Cell$1:_ref27$cellRenderer,className=_ref27.className,rowIdx=_ref27.rowIdx,isRowSelected=_ref27.isRowSelected,copiedCellIdx=_ref27.copiedCellIdx,draggedOverCellIdx=_ref27.draggedOverCellIdx,row=_ref27.row,viewportColumns=_ref27.viewportColumns,selectedCellProps=_ref27.selectedCellProps,onRowClick=_ref27.onRowClick,rowClass=_ref27.rowClass,setDraggedOverRowIdx=_ref27.setDraggedOverRowIdx,onMouseEnter=_ref27.onMouseEnter,top=_ref27.top,onRowChange=_ref27.onRowChange,selectCell=_ref27.selectCell,selectRow=_ref27.selectRow,ariaRowIndex=_ref27["aria-rowindex"],ariaSelected=_ref27["aria-selected"],props=_objectWithoutProperties(_ref27,["cellRenderer","className","rowIdx","isRowSelected","copiedCellIdx","draggedOverCellIdx","row","viewportColumns","selectedCellProps","onRowClick","rowClass","setDraggedOverRowIdx","onMouseEnter","top","onRowChange","selectCell","selectRow","aria-rowindex","aria-selected"]);return className=clsx("rdg-row rdg-row-"+(rowIdx%2==0?"even":"odd"),null==rowClass?void 0:rowClass(row),className,isRowSelected&&"rdg-row-selected",-1===(null==selectedCellProps?void 0:selectedCellProps.idx)&&"rdg-group-row-selected"),jsx("div",_extends({role:"row","aria-rowindex":ariaRowIndex,"aria-selected":ariaSelected,ref:ref,className:className,onMouseEnter:wrapEvent(function(){null==setDraggedOverRowIdx||setDraggedOverRowIdx(rowIdx)},onMouseEnter),style:{top:top}},props,{children:viewportColumns.map(function(column){var isCellSelected=(null==selectedCellProps?void 0:selectedCellProps.idx)===column.idx;return"EDIT"===(null==selectedCellProps?void 0:selectedCellProps.mode)&&isCellSelected?jsx(EditCell,{rowIdx:rowIdx,column:column,row:row,onKeyDown:selectedCellProps.onKeyDown,editorProps:selectedCellProps.editorProps},column.key):jsx(CellRenderer,{rowIdx:rowIdx,column:column,row:row,isCopied:copiedCellIdx===column.idx,isDraggedOver:draggedOverCellIdx===column.idx,isCellSelected:isCellSelected,isRowSelected:isRowSelected,dragHandleProps:isCellSelected?selectedCellProps.dragHandleProps:void 0,onFocus:isCellSelected?selectedCellProps.onFocus:void 0,onKeyDown:isCellSelected?selectedCellProps.onKeyDown:void 0,onRowClick:onRowClick,onRowChange:onRowChange,selectCell:selectCell,selectRow:selectRow},column.key)})}))}function GroupCell(_ref28){var id=_ref28.id,rowIdx=_ref28.rowIdx,groupKey=_ref28.groupKey,childRows=_ref28.childRows,isExpanded=_ref28.isExpanded,isCellSelected=_ref28.isCellSelected,isRowSelected=_ref28.isRowSelected,column=_ref28.column,groupColumnIndex=_ref28.groupColumnIndex,selectRow=_ref28.selectRow,toggleGroupWrapper=_ref28.toggleGroup;function toggleGroup(){toggleGroupWrapper(id)}var isLevelMatching=column.rowGroup&&groupColumnIndex===column.idx;return jsx("div",{role:"gridcell","aria-colindex":column.idx+1,className:clsx("rdg-cell",column.frozen&&"rdg-cell-frozen",column.isLastFrozenColumn&&"rdg-cell-frozen-last",isCellSelected&&"rdg-cell-selected"),style:{width:column.width,left:column.left,cursor:isLevelMatching?"pointer":"default"},onClick:isLevelMatching?toggleGroup:void 0,children:column.groupFormatter&&(!column.rowGroup||groupColumnIndex===column.idx)&&jsx(column.groupFormatter,{groupKey:groupKey,childRows:childRows,column:column,isExpanded:isExpanded,isCellSelected:isCellSelected,isRowSelected:isRowSelected,onRowSelectionChange:function(checked){selectRow({rowIdx:rowIdx,checked:checked,isShiftClick:!1})},toggleGroup:toggleGroup})},column.key)}function GroupedRow(_ref29){var id=_ref29.id,groupKey=_ref29.groupKey,viewportColumns=_ref29.viewportColumns,childRows=_ref29.childRows,rowIdx=_ref29.rowIdx,top=_ref29.top,level=_ref29.level,isExpanded=_ref29.isExpanded,selectedCellIdx=_ref29.selectedCellIdx,isRowSelected=_ref29.isRowSelected,selectCell=_ref29.selectCell,selectRow=_ref29.selectRow,toggleGroup=_ref29.toggleGroup,props=_objectWithoutProperties(_ref29,["id","groupKey","viewportColumns","childRows","rowIdx","top","level","isExpanded","selectedCellIdx","isRowSelected","selectCell","selectRow","toggleGroup"]),idx=viewportColumns[0].key===SELECT_COLUMN_KEY?level+1:level;return jsx("div",_extends({role:"row","aria-level":level,"aria-expanded":isExpanded,className:clsx("rdg-row rdg-group-row rdg-row-"+(rowIdx%2==0?"even":"odd"),isRowSelected&&"rdg-row-selected",-1===selectedCellIdx&&"rdg-group-row-selected"),onClick:function(){selectCell({rowIdx:rowIdx,idx:-1})},style:{top:top}},props,{children:viewportColumns.map(function(column){return jsx(GroupCell$1,{id:id,rowIdx:rowIdx,groupKey:groupKey,childRows:childRows,isExpanded:isExpanded,isRowSelected:isRowSelected,isCellSelected:selectedCellIdx===column.idx,column:column,groupColumnIndex:idx,selectRow:selectRow,toggleGroup:toggleGroup},column.key)})}))}function SummaryCell(_ref30){var column=_ref30.column,row=_ref30.row,SummaryFormatter=column.summaryFormatter,width=column.width,left=column.left,summaryCellClass=column.summaryCellClass,className=clsx("rdg-cell","function"==typeof summaryCellClass?summaryCellClass(row):summaryCellClass,column.frozen&&"rdg-cell-frozen",column.isLastFrozenColumn&&"rdg-cell-frozen-last");return jsx("div",{role:"gridcell","aria-colindex":column.idx+1,className:className,style:{width:width,left:left},children:SummaryFormatter&&jsx(SummaryFormatter,{column:column,row:row})})}function SummaryRow(_ref31){var rowIdx=_ref31.rowIdx,row=_ref31.row,viewportColumns=_ref31.viewportColumns,bottom=_ref31.bottom,ariaRowIndex=_ref31["aria-rowindex"];return jsx("div",{role:"row","aria-rowindex":ariaRowIndex,className:"rdg-row rdg-row-"+(rowIdx%2==0?"even":"odd")+" rdg-summary-row",style:{bottom:bottom},children:viewportColumns.map(function(column){return jsx(SummaryCell$1,{column:column,row:row},column.key)})})}function DataGrid(_ref32,ref){var _summaryRows$length,rawColumns=_ref32.columns,rawRows=_ref32.rows,summaryRows=_ref32.summaryRows,rowKeyGetter=_ref32.rowKeyGetter,onRowsChange=_ref32.onRowsChange,_ref32$rowHeight=_ref32.rowHeight,rowHeight=void 0===_ref32$rowHeight?35:_ref32$rowHeight,_ref32$headerRowHeigh=_ref32.headerRowHeight,headerRowHeight=void 0===_ref32$headerRowHeigh?rowHeight:_ref32$headerRowHeigh,_ref32$headerFiltersH=_ref32.headerFiltersHeight,headerFiltersHeight=void 0===_ref32$headerFiltersH?45:_ref32$headerFiltersH,selectedRows=_ref32.selectedRows,onSelectedRowsChange=_ref32.onSelectedRowsChange,sortColumn=_ref32.sortColumn,sortDirection=_ref32.sortDirection,onSort=_ref32.onSort,filters=_ref32.filters,onFiltersChange=_ref32.onFiltersChange,defaultColumnOptions=_ref32.defaultColumnOptions,rawGroupBy=_ref32.groupBy,rowGrouper=_ref32.rowGrouper,expandedGroupIds=_ref32.expandedGroupIds,onExpandedGroupIdsChange=_ref32.onExpandedGroupIdsChange,_ref32$rowRenderer=_ref32.rowRenderer,RowRenderer=void 0===_ref32$rowRenderer?Row$1:_ref32$rowRenderer,EmptyRowsRenderer=_ref32.emptyRowsRenderer,onRowClick=_ref32.onRowClick,onScroll=_ref32.onScroll,onColumnResize=_ref32.onColumnResize,onSelectedCellChange=_ref32.onSelectedCellChange,onFill=_ref32.onFill,onPaste=_ref32.onPaste,_ref32$enableFilterRo=(_ref32.getCellActions,_ref32.enableDragAndDrop,_ref32.enableFilterRow),enableFilterRow=void 0!==_ref32$enableFilterRo&&_ref32$enableFilterRo,_ref32$cellNavigation=_ref32.cellNavigationMode,cellNavigationMode=void 0===_ref32$cellNavigation?"NONE":_ref32$cellNavigation,_ref32$editorPortalTa=_ref32.editorPortalTarget,editorPortalTarget=void 0===_ref32$editorPortalTa?document.body:_ref32$editorPortalTa,className=_ref32.className,style=_ref32.style,rowClass=_ref32.rowClass,ariaLabel=_ref32["aria-label"],ariaLabelledBy=_ref32["aria-labelledby"],ariaDescribedBy=_ref32["aria-describedby"],_useState7=useState(0),_useState8=_slicedToArray(_useState7,2),scrollTop=_useState8[0],setScrollTop=_useState8[1],_useState9=useState(0),_useState10=_slicedToArray(_useState9,2),scrollLeft=_useState10[0],setScrollLeft=_useState10[1],_useState11=useState(function(){return new Map}),_useState12=_slicedToArray(_useState11,2),columnWidths=_useState12[0],setColumnWidths=_useState12[1],_useState13=useState({idx:-1,rowIdx:-1,mode:"SELECT"}),_useState14=_slicedToArray(_useState13,2),selectedPosition=_useState14[0],setSelectedPosition=_useState14[1],_useState15=useState(null),_useState16=_slicedToArray(_useState15,2),copiedCell=_useState16[0],setCopiedCell=_useState16[1],_useState17=useState(!1),_useState18=_slicedToArray(_useState17,2),isDragging=_useState18[0],setDragging=_useState18[1],_useState19=useState(void 0),_useState20=_slicedToArray(_useState19,2),draggedOverRowIdx=_useState20[0],setOverRowIdx=_useState20[1],focusSinkRef=useRef(null),prevSelectedPosition=useRef(selectedPosition),latestDraggedOverRowIdx=useRef(draggedOverRowIdx),lastSelectedRowIdx=useRef(-1),isCellFocusable=useRef(!1),selectRowWrapper=useLatestFunc(function(_ref33){var rowIdx=_ref33.rowIdx,checked=_ref33.checked,isShiftClick=_ref33.isShiftClick;if(!onSelectedRowsChange)return;assertIsValidKeyGetter(rowKeyGetter);var newSelectedRows=new Set(selectedRows),row=rows[rowIdx];if(isGroupRow(row)){var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=row.childRows[Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var childRow=_step5.value,_rowKey=rowKeyGetter(childRow);checked?newSelectedRows.add(_rowKey):newSelectedRows.delete(_rowKey)}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}return void onSelectedRowsChange(newSelectedRows)}var rowKey=rowKeyGetter(row);if(checked){newSelectedRows.add(rowKey);var previousRowIdx=lastSelectedRowIdx.current;if(lastSelectedRowIdx.current=rowIdx,isShiftClick&&-1!==previousRowIdx&&previousRowIdx!==rowIdx)for(var step=Math.sign(rowIdx-previousRowIdx),i=previousRowIdx+step;i!==rowIdx;i+=step){var _row=rows[i];isGroupRow(_row)||newSelectedRows.add(rowKeyGetter(_row))}}else newSelectedRows.delete(rowKey),lastSelectedRowIdx.current=-1;onSelectedRowsChange(newSelectedRows)}),selectCellWrapper=useLatestFunc(selectCell),toggleGroupWrapper=useLatestFunc(toggleGroup),handleFormatterRowChangeWrapper=useLatestFunc(function(rowIdx,row){var newRows=[].concat(_toConsumableArray(rawRows));newRows[rowIdx]=row,null==onRowsChange||onRowsChange(newRows)}),_useGridDimensions=function(){var gridRef=useRef(null),_useState=useState(1),_useState2=_slicedToArray(_useState,2),gridWidth=_useState2[0],setGridWidth=_useState2[1],_useState3=useState(1),_useState4=_slicedToArray(_useState3,2),gridHeight=_useState4[0],setGridHeight=_useState4[1];return useLayoutEffect(function(){var ResizeObserver=window.ResizeObserver;if(null!=ResizeObserver){var resizeObserver=new ResizeObserver(function(entries){var _entries$0$contentRec=entries[0].contentRect,width=_entries$0$contentRec.width,height=_entries$0$contentRec.height;setGridWidth(width),setGridHeight(height)});return resizeObserver.observe(gridRef.current),function(){resizeObserver.disconnect()}}},[]),[gridRef,gridWidth,gridHeight]}(),_useGridDimensions2=_slicedToArray(_useGridDimensions,3),gridRef=_useGridDimensions2[0],gridWidth=_useGridDimensions2[1],gridHeight=_useGridDimensions2[2],headerRowsCount=enableFilterRow?2:1,summaryRowsCount=null!=(_summaryRows$length=null==summaryRows?void 0:summaryRows.length)?_summaryRows$length:0,totalHeaderHeight=headerRowHeight+(enableFilterRow?headerFiltersHeight:0),clientHeight=gridHeight-totalHeaderHeight-summaryRowsCount*rowHeight,isSelectable=void 0!==selectedRows&&void 0!==onSelectedRowsChange,_useViewportColumns=useViewportColumns({rawColumns:rawColumns,columnWidths:columnWidths,scrollLeft:scrollLeft,viewportWidth:gridWidth,defaultColumnOptions:defaultColumnOptions,rawGroupBy:rowGrouper?rawGroupBy:void 0}),columns=_useViewportColumns.columns,viewportColumns=_useViewportColumns.viewportColumns,totalColumnWidth=_useViewportColumns.totalColumnWidth,lastFrozenColumnIndex=_useViewportColumns.lastFrozenColumnIndex,totalFrozenColumnWidth=_useViewportColumns.totalFrozenColumnWidth,groupBy=_useViewportColumns.groupBy,_useViewportRows=function(_ref9){var rawRows=_ref9.rawRows,rowHeight=_ref9.rowHeight,clientHeight=_ref9.clientHeight,scrollTop=_ref9.scrollTop,groupBy=_ref9.groupBy,rowGrouper=_ref9.rowGrouper,expandedGroupIds=_ref9.expandedGroupIds,_useMemo4=useMemo(function(){return 0!==groupBy.length&&rowGrouper?function groupRows(rows,_ref10,startRowIndex){var _ref11=_toArray(_ref10),groupByKey=_ref11[0],remainingGroupByKeys=_ref11.slice(1),groupRowsCount=0,groups={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=Object.entries(rowGrouper(rows,groupByKey))[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _step2$value=_slicedToArray(_step2.value,2),key=_step2$value[0],childRows=_step2$value[1],_ref12=0===remainingGroupByKeys.length?[childRows,childRows.length]:groupRows(childRows,remainingGroupByKeys,startRowIndex+groupRowsCount+1),_ref13=_slicedToArray(_ref12,2),childGroups=_ref13[0],childRowsCount=_ref13[1];groups[key]={childRows:childRows,childGroups:childGroups,startRowIndex:startRowIndex+groupRowsCount},groupRowsCount+=childRowsCount+1}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return[groups,groupRowsCount]}(rawRows,groupBy,0):[void 0,rawRows.length]},[groupBy,rowGrouper,rawRows]),_useMemo5=_slicedToArray(_useMemo4,2),groupedRows=_useMemo5[0],rowsCount=_useMemo5[1],_useMemo6=useMemo(function(){var allGroupRows=new Set;if(!groupedRows)return[rawRows,allGroupRows];var flattenedRows=[];return function expandGroup(rows,parentId,level){Array.isArray(rows)?flattenedRows.push.apply(flattenedRows,_toConsumableArray(rows)):Object.keys(rows).forEach(function(groupKey,posInSet,keys){var _expandedGroupIds$has,id=void 0!==parentId?parentId+"__"+groupKey:groupKey,isExpanded=null!=(_expandedGroupIds$has=null==expandedGroupIds?void 0:expandedGroupIds.has(id))&&_expandedGroupIds$has,_rows$groupKey=rows[groupKey],childRows=_rows$groupKey.childRows,childGroups=_rows$groupKey.childGroups,startRowIndex=_rows$groupKey.startRowIndex,groupRow={id:id,parentId:parentId,groupKey:groupKey,isExpanded:isExpanded,childRows:childRows,level:level,posInSet:posInSet,startRowIndex:startRowIndex,setSize:keys.length};flattenedRows.push(groupRow),allGroupRows.add(groupRow),isExpanded&&expandGroup(childGroups,id,level+1)})}(groupedRows,void 0,0),[flattenedRows,allGroupRows]},[expandedGroupIds,groupedRows,rawRows]),_useMemo7=_slicedToArray(_useMemo6,2),rows=_useMemo7[0],allGroupRows=_useMemo7[1],rowVisibleStartIdx=Math.floor(scrollTop/rowHeight),rowVisibleEndIdx=Math.min(rows.length-1,Math.floor((scrollTop+clientHeight)/rowHeight));return{rowOverscanStartIdx:Math.max(0,Math.floor((rowVisibleStartIdx-4)/RENDER_BACTCH_SIZE)*RENDER_BACTCH_SIZE),rowOverscanEndIdx:Math.min(rows.length-1,Math.ceil((rowVisibleEndIdx+4)/RENDER_BACTCH_SIZE)*RENDER_BACTCH_SIZE),rows:rows,rowsCount:rowsCount,isGroupRow:function(row){return allGroupRows.has(row)}}}({rawRows:rawRows,groupBy:groupBy,rowGrouper:rowGrouper,rowHeight:rowHeight,clientHeight:clientHeight,scrollTop:scrollTop,expandedGroupIds:expandedGroupIds}),rowOverscanStartIdx=_useViewportRows.rowOverscanStartIdx,rowOverscanEndIdx=_useViewportRows.rowOverscanEndIdx,rows=_useViewportRows.rows,rowsCount=_useViewportRows.rowsCount,isGroupRow=_useViewportRows.isGroupRow,hasGroups=groupBy.length>0&&rowGrouper,minColIdx=hasGroups?-1:0,enableCellDragAndDrop=!hasGroups&&void 0!==onFill;useLayoutEffect(function(){selectedPosition!==prevSelectedPosition.current&&"EDIT"!==selectedPosition.mode&&isCellWithinBounds(selectedPosition)&&(prevSelectedPosition.current=selectedPosition,scrollToCell(selectedPosition),isCellFocusable.current?isCellFocusable.current=!1:focusSinkRef.current.focus({preventScroll:!0}))}),useImperativeHandle(ref,function(){return{scrollToColumn:function(idx){scrollToCell({idx:idx})},scrollToRow:function(rowIdx){var current=gridRef.current;current&&current.scrollTo({top:rowIdx*rowHeight,behavior:"smooth"})},selectCell:selectCell}});var handleColumnResize=useCallback(function(column,width){var newColumnWidths=new Map(columnWidths);newColumnWidths.set(column.key,width),setColumnWidths(newColumnWidths),null==onColumnResize||onColumnResize(column.idx,width)},[columnWidths,onColumnResize]),setDraggedOverRowIdx=useCallback(function(rowIdx){setOverRowIdx(rowIdx),latestDraggedOverRowIdx.current=rowIdx},[]);function toggleGroup(expandedGroupId){if(onExpandedGroupIdsChange){var newExpandedGroupIds=new Set(expandedGroupIds);newExpandedGroupIds.has(expandedGroupId)?newExpandedGroupIds.delete(expandedGroupId):newExpandedGroupIds.add(expandedGroupId),onExpandedGroupIdsChange(newExpandedGroupIds)}}function handleKeyDown(event){var idx,rowIdx,key=event.key,keyCode=event.keyCode,row=rows[selectedPosition.rowIdx];if(onPaste&&isCtrlKeyHeldDown(event)&&isCellWithinBounds(selectedPosition)&&!isGroupRow(row)&&-1!==selectedPosition.idx&&"SELECT"===selectedPosition.mode){if(67===keyCode)return idx=selectedPosition.idx,rowIdx=selectedPosition.rowIdx,void setCopiedCell({row:rawRows[getRawRowIdx(rowIdx)],columnKey:columns[idx].key});if(86===keyCode)return void function(){var idx=selectedPosition.idx,rowIdx=selectedPosition.rowIdx,targetRow=rawRows[getRawRowIdx(rowIdx)];if(!onPaste||!onRowsChange||null===copiedCell||!isCellEditable(selectedPosition))return;var updatedTargetRow=onPaste({sourceRow:copiedCell.row,sourceColumnKey:copiedCell.columnKey,targetRow:targetRow,targetColumnKey:columns[idx].key}),updatedRows=[].concat(_toConsumableArray(rawRows));updatedRows[rowIdx]=updatedTargetRow,onRowsChange(updatedRows)}()}if(isCellWithinBounds(selectedPosition)&&isGroupRow(row)&&-1===selectedPosition.idx&&("ArrowLeft"===key&&row.isExpanded||"ArrowRight"===key&&!row.isExpanded))return event.preventDefault(),void toggleGroup(row.id);switch(event.key){case"Escape":return setCopiedCell(null),void closeEditor();case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"Tab":case"Home":case"End":case"PageUp":case"PageDown":!function(event){if("EDIT"===selectedPosition.mode){var _columns$selectedPosi2,_columns$selectedPosi3,onNavigation=null!=(_columns$selectedPosi2=null==(_columns$selectedPosi3=columns[selectedPosition.idx].editorOptions)?void 0:_columns$selectedPosi3.onNavigation)?_columns$selectedPosi2:onEditorNavigation;if(!onNavigation(event))return}var key=event.key,shiftKey=event.shiftKey,ctrlKey=isCtrlKeyHeldDown(event),nextPosition=function(key,ctrlKey,shiftKey){var idx=selectedPosition.idx,rowIdx=selectedPosition.rowIdx,row=rows[rowIdx],isRowSelected=isCellWithinBounds(selectedPosition)&&-1===idx;if("ArrowLeft"===key&&isRowSelected&&isGroupRow(row)&&!row.isExpanded&&0!==row.level){for(var parentRowIdx=-1,i=selectedPosition.rowIdx-1;i>=0;i--){var parentRow=rows[i];if(isGroupRow(parentRow)&&parentRow.id===row.parentId){parentRowIdx=i;break}}if(-1!==parentRowIdx)return{idx:idx,rowIdx:parentRowIdx}}switch(key){case"ArrowUp":return{idx:idx,rowIdx:rowIdx-1};case"ArrowDown":return{idx:idx,rowIdx:rowIdx+1};case"ArrowLeft":return{idx:idx-1,rowIdx:rowIdx};case"ArrowRight":return{idx:idx+1,rowIdx:rowIdx};case"Tab":return-1===selectedPosition.idx&&-1===selectedPosition.rowIdx?shiftKey?{idx:columns.length-1,rowIdx:rows.length-1}:{idx:0,rowIdx:0}:{idx:idx+(shiftKey?-1:1),rowIdx:rowIdx};case"Home":return isRowSelected?{idx:idx,rowIdx:0}:ctrlKey?{idx:0,rowIdx:0}:{idx:0,rowIdx:rowIdx};case"End":return isRowSelected?{idx:idx,rowIdx:rows.length-1}:ctrlKey?{idx:columns.length-1,rowIdx:rows.length-1}:{idx:columns.length-1,rowIdx:rowIdx};case"PageUp":return{idx:idx,rowIdx:rowIdx-Math.floor(clientHeight/rowHeight)};case"PageDown":return{idx:idx,rowIdx:rowIdx+Math.floor(clientHeight/rowHeight)};default:return selectedPosition}}(key,ctrlKey,shiftKey),mode=cellNavigationMode;if("Tab"===key){if(function(_ref20){var cellNavigationMode=_ref20.cellNavigationMode,columns=_ref20.columns,rowsCount=_ref20.rowsCount,_ref20$selectedPositi=_ref20.selectedPosition,rowIdx=_ref20$selectedPositi.rowIdx,idx=_ref20$selectedPositi.idx,shiftKey=_ref20.shiftKey;if("NONE"===cellNavigationMode||"CHANGE_ROW"===cellNavigationMode){var atLastCellInRow=idx===columns.length-1;return shiftKey?0===idx&&0===rowIdx:atLastCellInRow&&rowIdx===rowsCount-1}return!1}({shiftKey:shiftKey,cellNavigationMode:cellNavigationMode,columns:columns,rowsCount:rows.length,selectedPosition:selectedPosition}))return void commitEditorChanges();mode="NONE"===cellNavigationMode?"CHANGE_ROW":cellNavigationMode}event.preventDefault(),selectCell(nextPosition=function(_ref19){var cellNavigationMode=_ref19.cellNavigationMode,columns=_ref19.columns,rowsCount=_ref19.rowsCount,nextPosition=_ref19.nextPosition;if("NONE"!==cellNavigationMode){var idx=nextPosition.idx,rowIdx=nextPosition.rowIdx,columnsCount=columns.length,isBeforeFirstColumn=-1===idx;if(idx===columnsCount){if("CHANGE_ROW"===cellNavigationMode){if(rowIdx!==rowsCount-1)return{idx:0,rowIdx:rowIdx+1}}else if("LOOP_OVER_ROW"===cellNavigationMode)return{rowIdx:rowIdx,idx:0}}else if(isBeforeFirstColumn)if("CHANGE_ROW"===cellNavigationMode){if(0!==rowIdx)return{rowIdx:rowIdx-1,idx:columnsCount-1}}else if("LOOP_OVER_ROW"===cellNavigationMode)return{rowIdx:rowIdx,idx:columnsCount-1}}return nextPosition}({columns:columns,rowsCount:rows.length,cellNavigationMode:mode,nextPosition:nextPosition}))}(event);break;default:!function(event){var _column$editorOptions;if(!isCellWithinBounds(selectedPosition))return;var row=rows[selectedPosition.rowIdx];if(isGroupRow(row))return;var key=event.key,column=columns[selectedPosition.idx];if("EDIT"===selectedPosition.mode)return void("Enter"===key&&(commitEditorChanges(),closeEditor()));if(null==(_column$editorOptions=column.editorOptions)||null==_column$editorOptions.onCellKeyDown||_column$editorOptions.onCellKeyDown(event),event.isDefaultPrevented())return;isCellEditable(selectedPosition)&&function(event){return(keycode=event.keyCode)>47&&keycode<58||32===keycode||13===keycode||keycode>64&&keycode<91||keycode>95&&keycode<112||keycode>185&&keycode<193||keycode>218&&keycode<223||["Enter","F2","Backspace","Delete"].includes(event.key);var keycode}(event)&&setSelectedPosition(function(_ref34){var idx=_ref34.idx,rowIdx=_ref34.rowIdx;return{idx:idx,rowIdx:rowIdx,key:key,mode:"EDIT",row:row,originalRow:row}})}(event)}}function handleFocus(){isCellFocusable.current=!0}function getRawRowIdx(rowIdx){return hasGroups?rawRows.indexOf(rows[rowIdx]):rowIdx}function commitEditorChanges(){var _columns$selectedPosi;if(void 0!==(null==(_columns$selectedPosi=columns[selectedPosition.idx])?void 0:_columns$selectedPosi.editor)&&"SELECT"!==selectedPosition.mode&&selectedPosition.row!==selectedPosition.originalRow){var updatedRows=[].concat(_toConsumableArray(rawRows));updatedRows[getRawRowIdx(selectedPosition.rowIdx)]=selectedPosition.row,null==onRowsChange||onRowsChange(updatedRows)}}function handleMouseDown(event){function onMouseOver(event){1!==event.buttons&&onMouseUp()}function onMouseUp(){window.removeEventListener("mouseover",onMouseOver),window.removeEventListener("mouseup",onMouseUp),setDragging(!1),function(){var overRowIdx=latestDraggedOverRowIdx.current;if(void 0!==overRowIdx&&onFill&&onRowsChange){for(var idx=selectedPosition.idx,rowIdx=selectedPosition.rowIdx,sourceRow=rawRows[rowIdx],startRowIndex=rowIdx<overRowIdx?rowIdx+1:overRowIdx,endRowIndex=rowIdx<overRowIdx?overRowIdx+1:rowIdx,targetRows=rawRows.slice(startRowIndex,endRowIndex),updatedTargetRows=onFill({columnKey:columns[idx].key,sourceRow:sourceRow,targetRows:targetRows}),updatedRows=[].concat(_toConsumableArray(rawRows)),i=startRowIndex;i<endRowIndex;i++)updatedRows[i]=updatedTargetRows[i-startRowIndex];onRowsChange(updatedRows),setDraggedOverRowIdx(void 0)}}()}1===event.buttons&&(setDragging(!0),window.addEventListener("mouseover",onMouseOver),window.addEventListener("mouseup",onMouseUp))}function handleDoubleClick(event){if(event.stopPropagation(),onFill&&onRowsChange){for(var idx=selectedPosition.idx,rowIdx=selectedPosition.rowIdx,sourceRow=rawRows[rowIdx],targetRows=rawRows.slice(rowIdx+1),updatedTargetRows=onFill({columnKey:columns[idx].key,sourceRow:sourceRow,targetRows:targetRows}),updatedRows=[].concat(_toConsumableArray(rawRows)),i=rowIdx+1;i<updatedRows.length;i++)updatedRows[i]=updatedTargetRows[i-rowIdx-1];onRowsChange(updatedRows)}}function handleEditorRowChange(row,commitChanges){if("SELECT"!==selectedPosition.mode)if(commitChanges){var updatedRows=[].concat(_toConsumableArray(rawRows));updatedRows[getRawRowIdx(selectedPosition.rowIdx)]=row,null==onRowsChange||onRowsChange(updatedRows),closeEditor()}else setSelectedPosition(function(position){return _extends({},position,{row:row})})}function handleOnClose(commitChanges){commitChanges&&commitEditorChanges(),closeEditor()}function isCellWithinBounds(_ref35){var idx=_ref35.idx,rowIdx=_ref35.rowIdx;return rowIdx>=0&&rowIdx<rows.length&&idx>=minColIdx&&idx<columns.length}function isCellEditable(position){return isCellWithinBounds(position)&&function(_ref18){var selectedPosition=_ref18.selectedPosition,columns=_ref18.columns,rows=_ref18.rows,isGroupRow=_ref18.isGroupRow,column=columns[selectedPosition.idx],row=rows[selectedPosition.rowIdx];return null!=column.editor&&!column.rowGroup&&!isGroupRow(row)&&!1!==("function"==typeof column.editable?column.editable(row):column.editable)}({columns:columns,rows:rows,selectedPosition:position,isGroupRow:isGroupRow})}function selectCell(position){var enableEditor=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(isCellWithinBounds(position)){if(commitEditorChanges(),enableEditor&&isCellEditable(position)){var row=rows[position.rowIdx];setSelectedPosition(_extends({},position,{mode:"EDIT",key:null,row:row,originalRow:row}))}else setSelectedPosition(_extends({},position,{mode:"SELECT"}));null==onSelectedCellChange||onSelectedCellChange(_extends({},position))}}function closeEditor(){"SELECT"!==selectedPosition.mode&&setSelectedPosition(function(_ref36){return{idx:_ref36.idx,rowIdx:_ref36.rowIdx,mode:"SELECT"}})}function scrollToCell(_ref37){var idx=_ref37.idx,rowIdx=_ref37.rowIdx,current=gridRef.current;if(current){if("number"==typeof idx&&idx>lastFrozenColumnIndex){var clientWidth=current.clientWidth,_columns$idx=columns[idx],left=_columns$idx.left,width=_columns$idx.width;if(left<scrollLeft+width+totalFrozenColumnWidth||left+width>clientWidth+scrollLeft){var newScrollLeft=function(columns,idx,currentScrollLeft,currentClientWidth){for(var left=0,frozen=0,i=0;i<idx;i++){var column=columns[i];column&&(column.width&&(left+=column.width),column.frozen&&(frozen+=column.width))}var selectedColumn=columns[idx];if(selectedColumn){var scrollLeft=left-frozen-currentScrollLeft,scrollRight=left+selectedColumn.width-currentScrollLeft;if(scrollLeft<0)return scrollLeft;if(scrollRight>currentClientWidth)return scrollRight-currentClientWidth}return 0}(columns,idx,scrollLeft,clientWidth);current.scrollLeft=scrollLeft+newScrollLeft}}"number"==typeof rowIdx&&(rowIdx*rowHeight<scrollTop?current.scrollTop=rowIdx*rowHeight:(rowIdx+1)*rowHeight>scrollTop+clientHeight&&(current.scrollTop=(rowIdx+1)*rowHeight-clientHeight))}}function getDraggedOverCellIdx(currentRowIdx){if(void 0!==draggedOverRowIdx){var rowIdx=selectedPosition.rowIdx;return(rowIdx<draggedOverRowIdx?rowIdx<currentRowIdx&&currentRowIdx<=draggedOverRowIdx:rowIdx>currentRowIdx&&currentRowIdx>=draggedOverRowIdx)?selectedPosition.idx:void 0}}function getSelectedCellProps(rowIdx){if(selectedPosition.rowIdx===rowIdx)return"EDIT"===selectedPosition.mode?{mode:"EDIT",idx:selectedPosition.idx,onKeyDown:handleKeyDown,editorProps:{editorPortalTarget:editorPortalTarget,rowHeight:rowHeight,row:selectedPosition.row,onRowChange:handleEditorRowChange,onClose:handleOnClose}}:{mode:"SELECT",idx:selectedPosition.idx,onFocus:handleFocus,onKeyDown:handleKeyDown,dragHandleProps:enableCellDragAndDrop&&isCellEditable(selectedPosition)?{onMouseDown:handleMouseDown,onDoubleClick:handleDoubleClick}:void 0}}return(selectedPosition.idx>=columns.length||selectedPosition.rowIdx>=rows.length)&&(setSelectedPosition({idx:-1,rowIdx:-1,mode:"SELECT"}),setDraggedOverRowIdx(void 0)),"EDIT"===selectedPosition.mode&&rows[selectedPosition.rowIdx]!==selectedPosition.originalRow&&closeEditor(),jsxs("div",{role:hasGroups?"treegrid":"grid","aria-label":ariaLabel,"aria-labelledby":ariaLabelledBy,"aria-describedby":ariaDescribedBy,"aria-multiselectable":!!isSelectable||void 0,"aria-colcount":columns.length,"aria-rowcount":headerRowsCount+rowsCount+summaryRowsCount,className:clsx("rdg",className,isDragging&&"rdg-viewport-dragging"),style:_extends({},style,{"--header-row-height":headerRowHeight+"px","--filter-row-height":headerFiltersHeight+"px","--row-width":totalColumnWidth+"px","--row-height":rowHeight+"px"}),ref:gridRef,onScroll:function(event){var _event$currentTarget=event.currentTarget,scrollTop=_event$currentTarget.scrollTop,scrollLeft=_event$currentTarget.scrollLeft;setScrollTop(scrollTop),setScrollLeft(scrollLeft),null==onScroll||onScroll(event)},children:[jsx(HeaderRow$1,{rowKeyGetter:rowKeyGetter,rows:rawRows,columns:viewportColumns,onColumnResize:handleColumnResize,allRowsSelected:(null==selectedRows?void 0:selectedRows.size)===rawRows.length,onSelectedRowsChange:onSelectedRowsChange,sortColumn:sortColumn,sortDirection:sortDirection,onSort:onSort}),enableFilterRow&&jsx(FilterRow$1,{columns:viewportColumns,filters:filters,onFiltersChange:onFiltersChange}),0===rows.length&&EmptyRowsRenderer?jsx(EmptyRowsRenderer,{}):jsxs(Fragment,{children:[jsx("div",{ref:focusSinkRef,tabIndex:0,className:"rdg-focus-sink",onKeyDown:handleKeyDown}),jsx("div",{style:{height:Math.max(rows.length*rowHeight,clientHeight)}}),function(){for(var rowElements=[],startRowIndex=0,rowIdx=rowOverscanStartIdx;rowIdx<=rowOverscanEndIdx;rowIdx++){var row=rows[rowIdx],top=rowIdx*rowHeight+totalHeaderHeight;if(isGroupRow(row))startRowIndex=row.startRowIndex,rowElements.push(jsx(GroupRowRenderer,{"aria-level":row.level+1,"aria-setsize":row.setSize,"aria-posinset":row.posInSet+1,"aria-rowindex":headerRowsCount+startRowIndex+1,id:row.id,groupKey:row.groupKey,viewportColumns:viewportColumns,childRows:row.childRows,rowIdx:rowIdx,top:top,level:row.level,isExpanded:row.isExpanded,selectedCellIdx:selectedPosition.rowIdx===rowIdx?selectedPosition.idx:void 0,isRowSelected:isSelectable&&row.childRows.every(function(cr){return null==selectedRows?void 0:selectedRows.has(rowKeyGetter(cr))}),onFocus:selectedPosition.rowIdx===rowIdx?handleFocus:void 0,onKeyDown:selectedPosition.rowIdx===rowIdx?handleKeyDown:void 0,selectCell:selectCellWrapper,selectRow:selectRowWrapper,toggleGroup:toggleGroupWrapper},row.id));else{startRowIndex++;var _selectedRows$has,key=hasGroups?startRowIndex:rowIdx,isRowSelected=!1;"function"==typeof rowKeyGetter&&(key=rowKeyGetter(row),isRowSelected=null!=(_selectedRows$has=null==selectedRows?void 0:selectedRows.has(key))&&_selectedRows$has),rowElements.push(jsx(RowRenderer,{"aria-rowindex":headerRowsCount+(hasGroups?startRowIndex:rowIdx)+1,"aria-selected":isSelectable?isRowSelected:void 0,rowIdx:rowIdx,row:row,viewportColumns:viewportColumns,isRowSelected:isRowSelected,onRowClick:onRowClick,rowClass:rowClass,top:top,copiedCellIdx:null!==copiedCell&&copiedCell.row===row?columns.findIndex(function(c){return c.key===copiedCell.columnKey}):void 0,draggedOverCellIdx:getDraggedOverCellIdx(rowIdx),setDraggedOverRowIdx:isDragging?setDraggedOverRowIdx:void 0,selectedCellProps:getSelectedCellProps(rowIdx),onRowChange:handleFormatterRowChangeWrapper,selectCell:selectCellWrapper,selectRow:selectRowWrapper},key))}}return rowElements}(),null==summaryRows?void 0:summaryRows.map(function(row,rowIdx){return jsx(SummaryRow$1,{"aria-rowindex":headerRowsCount+rowsCount+rowIdx+1,rowIdx:rowIdx,row:row,bottom:rowHeight*(summaryRows.length-1-rowIdx),viewportColumns:viewportColumns},rowIdx)})]})]})}function autoFocusAndSelect(input){null==input||input.focus(),null==input||input.select()}function TextEditor(_ref38){var row=_ref38.row,column=_ref38.column,onRowChange=_ref38.onRowChange,onClose=_ref38.onClose;return React.createElement(TextInput,{light:"true",hideLabel:"true",placeholder:"Enter Value...",ref:autoFocusAndSelect,value:row[column.key],onChange:function(e){return onRowChange(_extends({},row,_defineProperty({},column.key,e.target.value)))},onBlur:function(){return onClose(!0)}})}return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs){_defineProperty=_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersObjectWithoutPropertiesJs){_objectWithoutProperties=_npmSystemjsPluginBabel0025BabelHelpersObjectWithoutPropertiesJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs){_toConsumableArray=_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersToArrayJs){_toArray=_npmSystemjsPluginBabel0025BabelHelpersToArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs){_slicedToArray=_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs.default},function(_reactJsxRuntime){ReactJSX=_reactJsxRuntime.default},function(_react){React=_react.default},function(_clsx){clsx=_clsx.default},function(_reactDom){createPortal=_reactDom.createPortal},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.NumberInput}],execute:function(){jsxs=ReactJSX.jsxs,jsx=ReactJSX.jsx,Fragment=ReactJSX.Fragment,useCallback=React.useCallback,useRef=React.useRef,useEffect=React.useEffect,useState=React.useState,useLayoutEffect=React.useLayoutEffect,useMemo=React.useMemo,memo=React.memo,cloneElement=React.cloneElement,forwardRef=React.forwardRef,useImperativeHandle=React.useImperativeHandle,_export("SELECT_COLUMN_KEY",SELECT_COLUMN_KEY="select-row"),_export("SelectColumn",SelectColumn={key:SELECT_COLUMN_KEY,name:"",width:35,maxWidth:35,resizable:!1,sortable:!1,frozen:!0,headerRenderer:function(props){return jsx(SelectCellFormatter,{"aria-label":"Select All",value:props.allRowsSelected,onChange:props.onAllRowsSelectionChange})},formatter:function(props){return jsx(SelectCellFormatter,{"aria-label":"Select",tabIndex:-1,isCellSelected:props.isCellSelected,value:props.isRowSelected,onClick:stopPropagation,onChange:props.onRowSelectionChange})},groupFormatter:function(props){return jsx(SelectCellFormatter,{"aria-label":"Select Group",tabIndex:-1,isCellSelected:props.isCellSelected,value:props.isRowSelected,onChange:props.onRowSelectionChange,onClick:stopPropagation})}}),RENDER_BACTCH_SIZE=8,SORT_TEXT={ASC:"▲",DESC:"▼",NONE:""},HeaderRow$1=memo(HeaderRow),FilterRow$1=memo(FilterRow),_export("Cell",Cell$1=memo(forwardRef(Cell))),_export("Row",Row$1=memo(forwardRef(Row))),GroupCell$1=memo(GroupCell),GroupRowRenderer=memo(GroupedRow),SummaryCell$1=memo(SummaryCell),SummaryRow$1=memo(SummaryRow),_export("default",forwardRef(DataGrid)),_export("Cell",Cell$1),_export("Row",Row$1),_export("SELECT_COLUMN_KEY",SELECT_COLUMN_KEY),_export("SelectCellFormatter",SelectCellFormatter),_export("SelectColumn",SelectColumn),_export("SortableHeaderCell",SortableHeaderCell),_export("TextEditor",TextEditor),_export("ToggleGroupFormatter",ToggleGroupFormatter),_export("ValueFormatter",ValueFormatter)}}}),System.register("client/script/studio/DataGridFilters.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","component/studio/SrsReference/Definition.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,SrsReference,TextFilter,NumberFilter;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.NumberInput},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference}],execute:function(){TextFilter=function(_React$Component){function TextFilter(){return _classCallCheck(this,TextFilter),_possibleConstructorReturn(this,(TextFilter.__proto__||Object.getPrototypeOf(TextFilter)).apply(this,arguments))}return _inherits(TextFilter,_React$Component),_createClass(TextFilter,[{key:"render",value:function(){var _this2=this;return React.createElement("div",{className:"rdg-filter-container"},React.createElement(TextInput,{light:"true",hideLabel:"true",placeholder:"%xyz%",className:"rdg-filter",style:{width:"100%",fontSize:14,font:"400 13.3333px Arial",padding:5,borderWidth:1,borderStyle:"inset",borderImage:"initial",cursor:"text"},value:this.props.value,onChange:function(e){return _this2.props.onChange(e.target.value)}}))}}]),TextFilter}(React.Component),NumberFilter=function(_React$Component2){function NumberFilter(props){_classCallCheck(this,NumberFilter);var _this3=_possibleConstructorReturn(this,(NumberFilter.__proto__||Object.getPrototypeOf(NumberFilter)).call(this,props));return _this3.state={invalid:!1,value:_this3.props.value},_this3}return _inherits(NumberFilter,_React$Component2),_createClass(NumberFilter,[{key:"render",value:function(){var _this4=this,filteredValue=this.state.value;if("object"==typeof filteredValue&&1==Object.keys(filteredValue).length){var operator=Object.keys(filteredValue)[0];filteredValue=operator+filteredValue[operator]}return React.createElement("div",{className:"rdg-filter-container"},React.createElement(TextInput,{light:"true",hideLabel:"true",placeholder:"[<,>,=]xyz",className:"rdg-filter",invalid:this.state.invalid,style:{width:"100%",fontSize:14,font:"400 13.3333px Arial",padding:5,borderWidth:1,borderStyle:"inset",borderImage:"initial",cursor:"text"},value:filteredValue,onChange:function(e){var filterValue=e.target.value;if(filterValue.startsWith("<")||filterValue.startsWith(">")){var _operator="<"==filterValue[0]?"lt":"gt";if(filterValue=filterValue.slice(1))if(isNaN(filterValue))_this4.setState({invalid:!0,value:e.target.value});else{var queryObj={};queryObj[_operator]=filterValue?parseFloat(filterValue):0,_this4.props.onChange("JSON:"+JSON.stringify(queryObj)),_this4.setState({invalid:!1,value:e.target.value})}else _this4.setState({invalid:!1,value:e.target.value})}else filterValue.startsWith("=")?(filterValue=filterValue.slice(1))?isNaN(filterValue)?_this4.setState({invalid:!0,value:e.target.value}):(_this4.props.onChange(e.target.value),_this4.setState({invalid:!1,value:e.target.value})):_this4.setState({invalid:!1,value:e.target.value}):filterValue?isNaN(filterValue)?_this4.setState({invalid:!0,value:e.target.value}):(_this4.props.onChange(e.target.value),_this4.setState({invalid:!1,value:e.target.value})):_this4.setState({invalid:!1,value:e.target.value})}}))}}]),NumberFilter}(React.Component),_export("default",{TextFilter:TextFilter,NumberFilter:NumberFilter,ReferenceFilterFn:function(options,shadow){return function(_React$Component3){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component3),_createClass(_class,[{key:"render",value:function(){var _this6=this,ReferenceField=SrsReference();return React.createElement(ReferenceField,{hideLabel:"true",title:"Filter",light:"true",className:"rdg-filter",onFocus:function(e){1==$(".bx--list-box__menu",$(e.currentTarget).closest(".bx--list-box__wrapper")).length?$(".rdg-filter-row",shadow).css("height",45):$(".rdg-filter-row",shadow).css("height",300)},onBlur:function(e){$(".rdg-filter-row",shadow).css("height",45)},tablename:options.tableName,displayfield:options.displayField,secondarydisplayfield:options.secondaryDisplayField,filter:options.filter,defaultValue:this.props.value,searchfields:options.searchfields,showOpenRecord:"false",showClearButton:"false",onChange:function(selectedItem){$(".rdg-filter-row",shadow).css("height",45),_this6.props.onChange(selectedItem?selectedItem.id:"")}})}}]),_class}(React.Component)}})}}}),System.register("component/studio/RenderIcon/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_RenderIcon_,RenderIcon;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_RenderIcon_=function(_React$Component){function _RenderIcon_(props){_classCallCheck(this,_RenderIcon_);var _this=_possibleConstructorReturn(this,(_RenderIcon_.__proto__||Object.getPrototypeOf(_RenderIcon_)).call(this,props));return _this.state={reload:!1,defaultIconURL:"@carbon/icons-react/lib/apps/16.js",iconURL:_this.props.iconName?"@carbon/icons-react/lib/"+_this.props.iconName+".js":""},_this}return _inherits(_RenderIcon_,_React$Component),_createClass(_RenderIcon_,[{key:"componentDidMount",value:function(){var _this2=this,iconURL=this.state.iconURL?this.state.iconURL:this.state.defaultIconURL;System.import(iconURL).then(function(iconDef){_this2.cardIcon=iconDef,_this2.setState({reload:!_this2.state.reload})})}},{key:"render",value:function(){if(!this.cardIcon)return null;var CardIcon=this.cardIcon;return React.createElement(CardIcon,{style:{width:20,height:"100%",cursor:"pointer"},onClick:this.props.onClick})}}]),_RenderIcon_}(React.Component),_export("RenderIcon",RenderIcon=function(props){return _RenderIcon_}),_export("RenderIcon",RenderIcon)}}}),System.register("component/studio/SrsGrid.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/defineProperty.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/toConsumableArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/studio/DataGrid.js","@carbon/icons-react/lib/filter/20","@carbon/icons-react/lib/subtract--alt/20","@carbon/icons-react/lib/view--mode-2/20","client/script/studio/DataGridFilters.js","carbon-components-react","component/studio/RenderIcon/Definition.js","lodash.debounce","lodash","lodash.clonedeep","@fortawesome/fontawesome-svg-core","@fortawesome/react-fontawesome","@fortawesome/free-solid-svg-icons"],function(_export,_context7){"use strict";var _defineProperty,_toConsumableArray,_extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ReactDataGrid,TextEditor,NumberEditor,SelectColumn,Filter20,FilterRemove20,FilterRenderers,Button,MultiSelect,Tile,RenderIcon,debounce,_,cloneDeep,library,FontAwesomeIcon,faBookOpen,_SrsGrid_,SrsGrid,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs){_defineProperty=_npmSystemjsPluginBabel0025BabelHelpersDefinePropertyJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs){_toConsumableArray=_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptStudioDataGridJs){ReactDataGrid=_clientScriptStudioDataGridJs.default,TextEditor=_clientScriptStudioDataGridJs.TextEditor,NumberEditor=_clientScriptStudioDataGridJs.NumberEditor,SelectColumn=_clientScriptStudioDataGridJs.SelectColumn},function(_carbonIconsReactLibFilter){Filter20=_carbonIconsReactLibFilter.default},function(_carbonIconsReactLibSubtractAlt){FilterRemove20=_carbonIconsReactLibSubtractAlt.default},function(_carbonIconsReactLibViewMode){_carbonIconsReactLibViewMode.default},function(_clientScriptStudioDataGridFiltersJs){FilterRenderers=_clientScriptStudioDataGridFiltersJs.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button,MultiSelect=_carbonComponentsReact.MultiSelect,_carbonComponentsReact.Dropdown,Tile=_carbonComponentsReact.Tile},function(_componentStudioRenderIconDefinitionJs){RenderIcon=_componentStudioRenderIconDefinitionJs.RenderIcon},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_lodash){_=_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_fortawesomeFontawesomeSvgCore){library=_fortawesomeFontawesomeSvgCore.library},function(_fortawesomeReactFontawesome){FontAwesomeIcon=_fortawesomeReactFontawesome.FontAwesomeIcon},function(_fortawesomeFreeSolidSvgIcons){faBookOpen=_fortawesomeFreeSolidSvgIcons.faBookOpen}],execute:function(){_SrsGrid_=function(_React$Component){function _SrsGrid_(props){var _this2=this;_classCallCheck(this,_SrsGrid_);var _this=_possibleConstructorReturn(this,(_SrsGrid_.__proto__||Object.getPrototypeOf(_SrsGrid_)).call(this,props));_this.fieldTypes={string:{resizable:!0,sortable:!0,editable:!0,editor:TextEditor,filter:FilterRenderers.TextFilter,inlinefilter:!1},number:{resizable:!0,sortable:!0,editable:!0,editor:NumberEditor,filter:FilterRenderers.NumberFilter,inlinefilter:!1},reference:{resizable:!0,editable:!1,editor:TextEditor,filter:FilterRenderers.ReferenceFilterFn,inlinefilter:!1}};var tableName=_this.props.tableName?_this.props.tableName:_this.props.tablename||(_this.props.widgetProps&&_this.props.widgetProps.TableName?_this.props.widgetProps.TableName:""),scope="mmf";if(tableName&&tableName.indexOf("_")>-1){var tableNameParts=tableName.split("_");tableName=tableNameParts.splice(0,tableNameParts.length-1).join("_"),scope=tableNameParts.splice(tableNameParts.length-1).join("_")}var widgetProps=_this.props.widgetProps,groupFields=[];if(widgetProps&&widgetProps.GroupFields&&widgetProps.GroupFields.length>0)for(var groupFieldIndx in!0,widgetProps.GroupFields){var groupField=widgetProps.GroupFields[groupFieldIndx];groupFields.push({id:groupField.name,text:groupField.value})}else if(_this.props.groupfields){var inputGroupFields=_this.props.groupfields?"string"==typeof _this.props.groupfields?JSON.parse(_this.props.groupfields):_this.props.groupfields:[];if(inputGroupFields&&inputGroupFields.length>0)for(var _groupFieldIndx in!0,inputGroupFields){var _groupField=inputGroupFields[_groupFieldIndx];groupFields.push({id:_groupField.name,text:_groupField.value})}}_this.references={};var dataFilter=_this.props.filter?_this.props.filter:_this.props.widgetProps&&_this.props.widgetProps.Filter?_this.props.widgetProps.Filter:{};try{dataFilter="string"==typeof dataFilter?JSON.parse(dataFilter):dataFilter}catch(err){dataFilter={}}dataFilter&&Object.keys(dataFilter).length>0&&!dataFilter.where&&(dataFilter={where:dataFilter});var treeField=_this.props.treefield?_this.props.treefield:_this.props.widgetProps&&_this.props.widgetProps.TreeFilter?_this.props.widgetProps.TreeFilter:"",fields=_this.props.fields?_this.props.fields:_this.props.widgetProps&&_this.props.widgetProps.Fields?_this.props.widgetProps.Fields:[];try{fields="string"==typeof fields?JSON.parse(fields):fields}catch(err){}var viewName=_this.props.view?_this.props.view:_this.props.widgetProps&&_this.props.widgetProps.View?_this.props.widgetProps.View:"",compactMode=_this.props.compact+""!="false",headerRowHeight=_this.props.headerheight||35,headerFiltersHeight=compactMode?45:_this.props.headerfilterheight||45,rowHeight=compactMode?_this.props.rowheight||35:70;return _this.state={enableGroupFields:!0,availableGroupColumns:groupFields,selectedGroupColumns:[],listkey:Date.now(),fields:fields,groupByFields:[],expandedGroupIds:new Set,enableFilterRow:!0,filters:{},selectedRows:new Set,sortColumn:"",sortDirection:"",rows:[],dataFilter:dataFilter,tableName:tableName,scope:scope,viewName:viewName,isReady:!1,expandedRows:{},treeField:treeField,headerRowHeight:headerRowHeight,headerFiltersHeight:headerFiltersHeight,rowHeight:rowHeight},_this.onGridRowsUpdated=_this.onGridRowsUpdated.bind(_this),_this.onSortEnd=_this.onSortEnd.bind(_this),_this.getRowsWithReferenceDisplayNames=_this.getRowsWithReferenceDisplayNames.bind(_this),_this.onCellExpand=_this.onCellExpand.bind(_this),_this.getSubRowDetails=_this.getSubRowDetails.bind(_this),_this.updateSubRowDetails=_this.updateSubRowDetails.bind(_this),_this.updateWidgetProps=_this.updateWidgetProps.bind(_this),_this.filterData=debounce(function(){var _ref;$qry.getRecords(_this.state.scope&&"mmf"!=_this.state.scope?_this.state.tableName+"_"+_this.state.scope:_this.state.tableName,_this.state.dataFilter,_this.state.fieldCodes).then((_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(dataRecords){var rows,updateRows;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return rows=dataRecords&&dataRecords.length>0?dataRecords:[],_context.next=3,_this.getRowsWithReferenceDisplayNames(rows,_this.state.referenceColumns);case 3:updateRows=_context.sent,_this.setState({origRows:rows,rows:updateRows});case 5:case"end":return _context.stop()}},_callee,_this2)})),function(_x){return _ref.apply(this,arguments)}))},500),library.add(faBookOpen),$ele&&$ele.registerElement("SrsSortableList","studio","React"),_this}return _inherits(_SrsGrid_,_React$Component),_createClass(_SrsGrid_,[{key:"updateWidgetProps",value:function(widgetProps){if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);if(widgetProps.ActionClicked){var tableName="mmf"!=this.state.scope?this.state.tableName+"_"+this.state.scope:this.state.tableName;controlProps.control_action={actionClicked:widgetProps.ActionClicked.name,actionPayload:_extends({actionName:widgetProps.ActionClicked.name,clickts:widgetProps.ActionClicked.clickts,listName:this.props.controlname},widgetProps.ActionClicked.actionPayload,{record:widgetProps.ActionClicked.actionPayload?widgetProps.ActionClicked.actionPayload.row:{},tableName:widgetProps.ActionClicked.actionPayload.tableName||tableName,view:this.state.viewName})}}this.props.updateStore({updates:{controlProps:controlProps}})}}else this.props.widgetProps&&this.props.updateStore({updates:{widgetProps:widgetProps}})}},{key:"onGridRowsUpdated",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(_ref3){var rows,i,updateRows,fromRow=_ref3.fromRow,toRow=_ref3.toRow,updated=_ref3.updated;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:for(rows=this.state.rows.slice(),i=fromRow;i<=toRow;i++)rows[i]=_extends({},rows[i],updated);return _context2.next=4,this.getRowsWithReferenceDisplayNames(rows,this.state.referenceColumns);case 4:updateRows=_context2.sent,this.setState({rows:updateRows,origRows:rows}),this.props.onChange&&this.props.onChange(rows);case 7:case"end":return _context2.stop()}},_callee2,this)}));return function(_x2){return _ref2.apply(this,arguments)}}()},{key:"onCellExpand",value:function(args){return function(_ref4){var rows=_ref4.rows,expandedRows=_ref4.expandedRows,rowKey=args.rowData.uid,rowIndex=rows.indexOf(args.rowData),subRows=args.expandArgs.children;return expandedRows&&!expandedRows[rowKey]?(expandedRows[rowKey]=!0,updateSubRowDetails(subRows,args.rowData.treeDepth),rows.splice.apply(rows,[rowIndex+1,0].concat(_toConsumableArray(subRows)))):expandedRows[rowKey]&&(expandedRows[rowKey]=!1,rows.splice(rowIndex+1,subRows.length)),{expandedRows:expandedRows,rows:rows}}}},{key:"getSubRowDetails",value:function(expandedRows){var _this3=this;return function(rowItem){var isExpanded=!!expandedRows[rowItem.uid]&&expandedRows[rowItem.uid];return{group:rowItem.teamMembers&&rowItem.teamMembers.length>0,expanded:isExpanded,children:rowItem.children,field:_this3.props.treepivotfield,treeDepth:rowItem.treeDepth||0,siblingIndex:rowItem.siblingIndex,numberSiblings:rowItem.numberSiblings}}}},{key:"updateSubRowDetails",value:function(subRows,parentTreeDepth){var treeDepth=parentTreeDepth||0;subRows.forEach(function(sr,i){sr.treeDepth=treeDepth+1,sr.siblingIndex=i,sr.numberSiblings=subRows.length})}},{key:"componentDidMount",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var _ref6,fieldCodes,columns,availableGroupColumns,referenceColumns,dataRecords,rows,updateRows,shadowRoot;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!this.state.tableName){_context3.next=16;break}return _context3.next=3,this.getColumnsAndFieldCodes(this.state.tableName,this.state.scope,this.state.viewName,this.state.fields);case 3:return _ref6=_context3.sent,fieldCodes=_ref6.fieldCodes,columns=_ref6.columns,availableGroupColumns=_ref6.availableGroupColumns,referenceColumns=_ref6.referenceColumns,_context3.next=10,$qry.getRecords(this.state.scope&&"mmf"!=this.state.scope?this.state.tableName+"_"+this.state.scope:this.state.tableName,this.state.dataFilter,fieldCodes);case 10:return dataRecords=_context3.sent,rows=dataRecords&&dataRecords.length>0?dataRecords:[],_context3.next=14,this.getRowsWithReferenceDisplayNames(rows,referenceColumns);case 14:updateRows=_context3.sent,this.setState({origRows:rows,rows:updateRows,columns:columns,fieldCodes:fieldCodes,isReady:!0,availableGroupColumns:availableGroupColumns,referenceColumns:referenceColumns});case 16:(shadowRoot=this.props.shadow)&&1==$(".rdg-filter-row",shadowRoot).length&&$(".rdg-filter-row",shadowRoot)[0].addEventListener("click",function(e){setTimeout(function(){0==$(".bx--list-box__menu",shadowRoot).length&&$(".rdg-filter-row",shadowRoot).css("height",45)},30)});case 18:case"end":return _context3.stop()}},_callee3,this)}));return function(){return _ref5.apply(this,arguments)}}()},{key:"getRowsWithReferenceDisplayNames",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(inputRows,referenceColumns){var referenceData,inputRowsIndx,inputRow,referenceFieldNames,referenceFieldNameIndx,referenceFieldName,refColumnNames,refColumnNamesIndx,refColumnName,tableName,displayField,recordIds,recordData,recordDataIndx,recItem,outputRows,rowIndx,rowItem,_referenceFieldNames,_referenceFieldNameIndx,_referenceFieldName;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(referenceData={},!(inputRows&&inputRows.length>0&&referenceColumns&&Object.keys(referenceColumns).length>0)){_context4.next=27;break}for(inputRowsIndx in inputRows)for(referenceFieldNameIndx in inputRow=inputRows[inputRowsIndx],referenceFieldNames=Object.keys(referenceColumns))referenceFieldName=referenceFieldNames[referenceFieldNameIndx],referenceColumns[referenceFieldName]=referenceColumns[referenceFieldName]||{},referenceColumns[referenceFieldName].recordIds=referenceColumns[referenceFieldName].recordIds||[],referenceColumns[referenceFieldName].recordIds.push(inputRow[referenceFieldName]);refColumnNames=Object.keys(referenceColumns),_context4.t0=_regeneratorRuntime.keys(refColumnNames);case 5:if((_context4.t1=_context4.t0()).done){_context4.next=22;break}if(refColumnNamesIndx=_context4.t1.value,refColumnName=refColumnNames[refColumnNamesIndx],tableName=referenceColumns[refColumnName].table,displayField=referenceColumns[refColumnName].displayField,recordIds=referenceColumns[refColumnName].recordIds,!(tableName&&displayField&&recordIds&&recordIds.length>0)){_context4.next=17;break}return _context4.next=14,$qry.getRecords(tableName,{where:{uid:{inq:recordIds}}},["uid",displayField]);case 14:_context4.t2=_context4.sent,_context4.next=18;break;case 17:_context4.t2=null;case 18:if((recordData=_context4.t2)&&recordData.length>0)for(recordDataIndx in recordData)recItem=recordData[recordDataIndx],referenceData[refColumnName]=referenceData[refColumnName]||{},referenceData[refColumnName][recItem.uid]=referenceData[refColumnName][recItem.uid]||{},referenceData[refColumnName][recItem.uid]=recItem[displayField];_context4.next=5;break;case 22:for(rowIndx in outputRows=cloneDeep(inputRows))for(_referenceFieldNameIndx in rowItem=outputRows[rowIndx],_referenceFieldNames=Object.keys(referenceColumns))_referenceFieldName=_referenceFieldNames[_referenceFieldNameIndx],referenceData&&referenceData[_referenceFieldName]&&referenceData[_referenceFieldName][rowItem[_referenceFieldName]]&&(rowItem[_referenceFieldName]=referenceData[_referenceFieldName][rowItem[_referenceFieldName]]);return _context4.abrupt("return",outputRows);case 27:return _context4.abrupt("return",inputRows);case 28:case"end":return _context4.stop()}},_callee4,this)}));return function(_x3,_x4){return _ref7.apply(this,arguments)}}()},{key:"getColumnsAndFieldCodes",value:function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(tableName,scope,viewName,fields){var hideRowClick,selectRow,fieldCodes,columns,availableGroupColumns,referenceColumns,columnsInit,rowActions,recordDetailColumn,templateRecord,dataRecord,filteredData,fieldConfiguration,fieldNames,_loop,fieldNamesIndx,ActionItem,rowActionsColumn,allColumns,_this4=this;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(hideRowClick=this.props.norowclick?this.props.norowclick+""=="true":!(!this.props.widgetProps||!this.props.widgetProps.HideRowClickAction)&&this.props.widgetProps.HideRowClickAction+""=="true",selectRow=this.props.widgetProps?this.props.widgetProps.EnableRowSelect+""=="true":!(!this.props.rowselect||this.props.rowselect+""!="true"),fieldCodes=["uid"],columns=[],availableGroupColumns=[],referenceColumns={},columnsInit=selectRow?[SelectColumn]:[],rowActions=this.props.rowactions?this.props.rowactions:null)try{rowActions=JSON.parse(rowActions)}catch(err){}if(fields&&"string"==typeof fields)try{fields=JSON.parse(fields)}catch(err){fields=[{name:"uid",value:"uid",type:"string"}]}if(hideRowClick||((recordDetailColumn={key:"recordid",width:50,name:"",editable:!1,resizable:!1}).formatter=function(_ref9){var row=_ref9.row;return React.createElement(React.Fragment,null,React.createElement(FontAwesomeIcon,{style:{cursor:"pointer",height:20,width:20},icon:"book-open",onClick:function(e){if(_this4.props.onRowClick)_this4.props.onRowClick(row);else{var widgetProps=Object.assign({},_this4.props.widgetProps);widgetProps.ActionClicked={name:"open_record",actionPayload:{row:row,tableName:_this4.state.scope&&"mmf"!=_this4.state.scope?_this4.state.tableName+"_"+_this4.state.scope:_this4.state.tableName},clickts:Date.now()},_this4.updateWidgetProps(widgetProps)}}}))},columns.push(recordDetailColumn)),!(fields&&fields.length>0)){_context5.next=15;break}fields.map(function(fieldItem){var fieldActions=fieldItem.actions;if("uid"!=fieldItem.value&&fieldItem.value){var columnObj={key:fieldItem.value,name:fieldItem.name,editable:!0,resizable:!0};if(fieldItem.value&&fieldCodes.push(fieldItem.value),"Reference"==fieldItem.widgetType&&fieldItem.tableName&&fieldItem.displayField&&(referenceColumns[fieldItem.value]={table:fieldItem.tableName,displayField:fieldItem.displayField}),fieldItem.type||fieldItem.dataType){var fieldType=fieldItem.type||fieldItem.dataType,columnEditor=_this4.fieldTypes[fieldType]&&_this4.fieldTypes[fieldType].editor?_this4.fieldTypes[fieldType].editor:null,columnFilter=null;columnFilter="Reference"==fieldItem.widgetType&&fieldItem.tableName&&fieldItem.displayField?_this4.fieldTypes.reference.filter({tableName:fieldItem.tableName,displayField:fieldItem.displayField,secondaryDisplayField:fieldItem.secondaryDisplayField,filter:fieldItem.filter,searchfields:fieldItem.searchfields},_this4.props.shadow):_this4.fieldTypes[fieldType]&&_this4.fieldTypes[fieldType].filter?_this4.fieldTypes[fieldType].filter:columnFilter;var columnInlineFilter=_this4.fieldTypes[fieldType]&&_this4.fieldTypes[fieldType].inlinefilter;columnEditor&&(columnObj.editor=columnEditor),columnObj.sortable=_this4.fieldTypes[fieldType].sortable,columnFilter?(columnObj.filterRenderer=columnFilter,columnObj.formatter=function(_ref10){var row=_ref10.row,cellValue=row[fieldItem.value];"Reference"==fieldItem.widgetType&&fieldItem.tableName&&fieldItem.displayField&&(cellValue=React.createElement(React.Fragment,null,React.createElement("a",{style:{cursor:"pointer",color:"#009c9f",fontWeight:"bold"},onClick:function(e){var referenceRecordId="";if(_this4.state.origRows&&_this4.state.origRows){var rowItem=_this4.state.origRows.filter(function(item){return item.uid==row.uid});rowItem&&1==rowItem.length&&(referenceRecordId=(rowItem=rowItem[0])[fieldItem.value])}var referedRecord={uid:referenceRecordId,tableName:fieldItem.tableName,view:_this4.state.viewName};if(_this4.props.onRowClick)_this4.props.onRowClick(referedRecord);else{var widgetProps=Object.assign({},_this4.props.widgetProps);widgetProps.ActionClicked={name:"open_record",actionPayload:{row:referedRecord,tableName:fieldItem.tableName},clickts:Date.now()},_this4.updateWidgetProps(widgetProps)}}},row[fieldItem.value])));var cellActions=[];return fieldActions&&fieldActions.map(function(fieldAction){cellActions.push(React.createElement(ActionItem,{iconName:fieldAction.icon,onClick:function(e){if(_this4.props.onActionClick)_this4.props.onActionClick(row,fieldAction.name);else{var widgetProps=Object.assign({},_this4.props.widgetProps);widgetProps.ActionClicked={name:fieldAction.name,actionPayload:{row:row,tableName:_this4.state.scope&&"mmf"!=_this4.state.scope?_this4.state.tableName+"_"+_this4.state.scope:_this4.state.tableName},clickts:Date.now()},_this4.updateWidgetProps(widgetProps)}}}))}),React.createElement(React.Fragment,null,cellValue,React.createElement("div",{className:"cellactions",style:{float:"right"}},cellActions),columnInlineFilter&&columnInlineFilter+""=="true"?React.createElement(React.Fragment,null,React.createElement(Filter20,{className:"cellActions showFilter",onClick:function(e){return console.log("Match filter")}}),React.createElement(FilterRemove20,{className:"cellActions removeFilter",onClick:function(e){return console.log("Unmatch filter")}})):null)}):columnObj.formatter=function(_ref11){var row=_ref11.row,cellValue=row[fieldItem.value];return"Reference"==fieldItem.widgetType&&fieldItem.tableName&&fieldItem.displayField&&(cellValue=React.createElement(React.Fragment,null,React.createElement("a",{style:{cursor:"pointer",color:"#009c9f",fontWeight:"bold"},onClick:function(e){var referenceRecordId="";if(_this4.state.origRows&&_this4.state.origRows){var rowItem=_this4.state.origRows.filter(function(item){return item.uid==row.uid});rowItem&&1==rowItem.length&&(referenceRecordId=(rowItem=rowItem[0])[fieldItem.value])}var referedRecord={uid:referenceRecordId,tableName:fieldItem.tableName,view:_this4.state.viewName};if(_this4.props.onRowClick)_this4.props.onRowClick(referedRecord);else{var widgetProps=Object.assign({},_this4.props.widgetProps);widgetProps.ActionClicked={name:"open_record",actionPayload:{row:referedRecord,tableName:fieldItem.tableName},clickts:Date.now()},_this4.updateWidgetProps(widgetProps)}}},row[fieldItem.value]))),React.createElement(React.Fragment,null,cellValue)}}columns.push(columnObj)}}),_context5.next=22;break;case 15:return _context5.next=17,$qry.getRecords("FormTemplate_studio",{where:{and:[{ModelName:tableName,View:viewName||"Default",Scope:scope},{}]}},["uid","View","schema","listschema"]);case 17:(templateRecord=_context5.sent)&&templateRecord.length>0&&(dataRecord=templateRecord[0],templateRecord.length>1&&(filteredData=templateRecord.filter(function(dataItem){return dataItem.View==viewName}))&&1==filteredData.length&&(dataRecord=filteredData[0]),templateRecord=dataRecord),fieldConfiguration=templateRecord.listschema?templateRecord.listschema:templateRecord.schema?templateRecord.schema:{};try{fieldConfiguration=(fieldConfiguration="string"==typeof fieldConfiguration?JSON.parse(fieldConfiguration):fieldConfiguration).properties?fieldConfiguration.properties:""}catch(err){fieldConfiguration=""}if(fieldConfiguration)for(fieldNamesIndx in fieldNames=Object.keys(fieldConfiguration),_loop=function(fieldNamesIndx){var fieldName=fieldNames[fieldNamesIndx],fieldData=fieldConfiguration[fieldName];if(fieldData&&"uid"!=fieldData.code&&fieldData.code){var columnObj={key:fieldData.code,name:fieldData.label,editable:!0,resizable:!0};if(availableGroupColumns.push({text:fieldData.code,id:fieldData.code}),fieldData.code&&fieldCodes.push(fieldData.code),"Reference"==fieldData.widgetType&&fieldData.tableName&&fieldData.displayField&&(referenceColumns[fieldData.code]={table:fieldData.tableName,displayField:fieldData.displayField,uid:fieldData.uid}),fieldData.type||fieldData.dataType){var fieldType=fieldData.type||fieldData.dataType,columnEditor=_this4.fieldTypes[fieldType]&&_this4.fieldTypes[fieldType].editor?_this4.fieldTypes[fieldType].editor:null,columnFilter=null;columnFilter="Reference"==fieldData.widgetType&&fieldData.tableName&&fieldData.displayField?_this4.fieldTypes.reference.filter({tableName:fieldData.tableName,displayField:fieldData.displayField,secondaryDisplayField:fieldData.secondaryDisplayField,filter:fieldData.filter,searchfields:fieldData.searchfields},_this4.props.shadow):_this4.fieldTypes[fieldType]&&_this4.fieldTypes[fieldType].filter?_this4.fieldTypes[fieldType].filter:columnFilter,columnEditor&&(columnObj.editor=columnEditor),columnFilter?(columnObj.sortable=_this4.fieldTypes[fieldType].sortable,columnObj.filterRenderer=columnFilter,columnObj.formatter=function(_ref12){var row=_ref12.row,cellValue=row[fieldData.code];return"Reference"==fieldData.widgetType&&fieldData.tableName&&fieldData.displayField&&(cellValue=React.createElement(React.Fragment,null,React.createElement("a",{style:{cursor:"pointer",color:"#009c9f",fontWeight:"bold"},onClick:function(e){var referenceRecordId="";if(_this4.state.origRows&&_this4.state.origRows){var rowItem=_this4.state.origRows.filter(function(item){return item.uid==row.uid});rowItem&&1==rowItem.length&&(referenceRecordId=(rowItem=rowItem[0])[fieldData.code])}var referedRecord={uid:referenceRecordId,tableName:fieldData.tableName,view:_this4.state.viewName};if(_this4.props.onRowClick)_this4.props.onRowClick(referedRecord);else{var widgetProps=Object.assign({},_this4.props.widgetProps);widgetProps.ActionClicked={name:"open_record",actionPayload:{row:referedRecord,tableName:fieldData.tableName},clickts:Date.now()},_this4.updateWidgetProps(widgetProps)}}},row[fieldData.code]))),React.createElement(React.Fragment,null,cellValue,_this4.fieldTypes[fieldType].inlinefilter?React.createElement(React.Fragment,null,React.createElement(Filter20,{className:"cellActions showFilter",onClick:function(e){return console.log("Match filter")}}),React.createElement(FilterRemove20,{className:"cellActions removeFilter",onClick:function(e){return console.log("Unmatch filter")}})):null)}):columnObj.formatter=function(_ref13){var row=_ref13.row;return React.createElement(React.Fragment,null,row[fieldData.code])}}columns.push(columnObj)}},fieldNames)_loop(fieldNamesIndx);case 22:return ActionItem=RenderIcon(),rowActions&&rowActions.length>0&&((rowActionsColumn={key:"record_actions",width:50,name:"Action(s)",editable:!1,resizable:!1}).formatter=function(_ref14){var row=_ref14.row,actionItems=[];return rowActions.map(function(rowAction){actionItems.push(React.createElement(ActionItem,{iconName:rowAction.icon,onClick:function(e){if(_this4.props.onActionClick)_this4.props.onActionClick(row,rowAction.name);else{var widgetProps=Object.assign({},_this4.props.widgetProps);widgetProps.ActionClicked={name:rowAction.name,actionPayload:{row:row,tableName:_this4.state.scope&&"mmf"!=_this4.state.scope?_this4.state.tableName+"_"+_this4.state.scope:_this4.state.tableName},clickts:Date.now()},_this4.updateWidgetProps(widgetProps)}}}))}),React.createElement(React.Fragment,null,actionItems)},columns.push(rowActionsColumn)),allColumns=columnsInit.concat(columns),_context5.abrupt("return",{fieldCodes:fieldCodes,columns:allColumns,availableGroupColumns:availableGroupColumns,referenceColumns:referenceColumns});case 26:case"end":return _context5.stop()}},_callee5,this)}));return function(_x5,_x6,_x7,_x8){return _ref8.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref15=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(prevProps,prevState){var self,tableName,prevTableName,scope,viewName,prevViewName,_ref16,fieldCodes,columns,availableGroupColumns,dataRecords,rows,rowIds,rowIndx,row,treeDataFilter,childRecords,childRecordIndx,childRecord,dataRowId,treeFieldUID,updateRows,tableNameParts,dataFilter,treeField,sortedList,groupByFields,selectedItemIndx,selectedItem,currentFilter,newFilter,filterKeys,filterKeyIndx,filterKey,filterValue,_dataRecords,_rows,_rowIds,_rowIndx,_row,_treeDataFilter,_childRecords,_childRecordIndx,_childRecord,_dataRowId,_treeFieldUID;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(self=this,this.state.isReady){_context6.next=3;break}return _context6.abrupt("return");case 3:if(tableName=this.props.tableName?this.props.tableName:this.props.tablename||(this.props.widgetProps&&this.props.widgetProps.TableName?this.props.widgetProps.TableName:""),prevTableName=prevProps.tableName?prevProps.tableName:prevProps.tablename||(prevProps.widgetProps&&prevProps.widgetProps.TableName?prevProps.widgetProps.TableName:""),scope="mmf",viewName=this.props.view?this.props.view:this.props.widgetProps&&this.props.widgetProps.View?this.props.widgetProps.View:"",prevViewName=prevProps.view?prevProps.view:prevProps.widgetProps&&prevProps.widgetProps.View?prevProps.widgetProps.View:"",!tableName){_context6.next=43;break}if(prevState.tableName==this.state.tableName&&prevState.viewName==this.state.viewName){_context6.next=20;break}return _context6.next=12,this.getColumnsAndFieldCodes(this.state.tableName,this.state.scope,this.state.viewName,this.state.fields);case 12:_ref16=_context6.sent,fieldCodes=_ref16.fieldCodes,columns=_ref16.columns,availableGroupColumns=_ref16.availableGroupColumns,_ref16.referenceColumns,this.setState({fieldCodes:fieldCodes,columns:columns,availableGroupColumns:availableGroupColumns}),_context6.next=37;break;case 20:if(!(prevState.fieldCodes&&!_.isEqual(prevState.fieldCodes,this.state.fieldCodes)||prevState.columns&&!_.isEqual(prevState.columns,this.state.columns))){_context6.next=37;break}return _context6.next=23,$qry.getRecords(this.state.scope&&"mmf"!=this.state.scope?this.state.tableName+"_"+this.state.scope:this.state.tableName,this.state.dataFilter,this.state.fieldCodes);case 23:if(dataRecords=_context6.sent,rows=dataRecords&&dataRecords.length>0?dataRecords:[],!(this.props.treepivotfield&&this.state.treeField&&rows&&rows.length>0)){_context6.next=33;break}for(rowIndx in rowIds=[],rows)row=rows[rowIndx],rowIds.push(row.uid);return treeDataFilter={where:_defineProperty({},this.state.treeField,{inq:rowIds})},_context6.next=31,$qry.getRecords(this.state.scope&&"mmf"!=this.state.scope?this.state.tableName+"_"+this.state.scope:this.state.tableName,treeDataFilter,this.state.fieldCodes);case 31:if((childRecords=_context6.sent)&&childRecords.length>0)for(childRecordIndx in childRecords)childRecord=childRecords[childRecordIndx],dataRowId=childRecord.uid,treeFieldUID=childRecord[this.state.treeField],rows[treeFieldUID].children=rows[dataRowId].children||[],rows[treeFieldUID].children.push(childRecord);case 33:return _context6.next=35,this.getRowsWithReferenceDisplayNames(rows,this.state.referenceColumns);case 35:updateRows=_context6.sent,self.setState({origRows:rows,rows:updateRows});case 37:if(tableName==prevTableName&&viewName==prevViewName||(tableName&&tableName.indexOf("_")>-1&&(tableNameParts=tableName.split("_"),tableName=tableNameParts.splice(0,tableNameParts.length-1).join("_"),scope=tableNameParts.splice(tableNameParts.length-1).join("_")),this.setState({tableName:tableName,scope:scope,viewName:viewName,isReady:!0})),!_.isEqual(prevProps.filter,this.props.filter)||prevProps.widgetProps&&this.props.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&!_.isEqual(prevProps.widgetProps.Filter,this.props.widgetProps.Filter)){dataFilter=this.props.filter?this.props.filter:this.props.widgetProps&&this.props.widgetProps.Filter?this.props.widgetProps.Filter:{};try{dataFilter=dataFilter?"string"==typeof dataFilter?JSON.parse(dataFilter):dataFilter:{}}catch(err){}this.setState({dataFilter:dataFilter})}if((!_.isEqual(prevProps.treefield,this.props.treefield)||prevProps.widgetProps&&this.props.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&!_.isEqual(prevProps.widgetProps.TreeField,this.props.widgetProps.TreeField))&&(treeField=this.props.treefield?this.props.treefield:this.props.widgetProps&&this.props.widgetProps.TreeFilter?this.props.widgetProps.TreeFilter:"",this.setState({treeField:treeField})),_.isEqual(prevState.dataFilter,this.state.dataFilter)||this.filterData(),this.props.sortedlist&&this.props.sortedlist[this.state.listkey]&&(!prevProps.sortedlist||!prevProps.sortedlist[this.state.listkey]||!_.isEqual(prevProps.sortedlist,this.props.sortedlist)&&!_.isEqual(prevProps.sortedlist[this.state.listkey],this.props.sortedlist[this.state.listkey]))){if(sortedList=this.props.sortedlist[this.state.listkey],groupByFields=[],sortedList&&sortedList.length>0)for(selectedItemIndx in sortedList)selectedItem=sortedList[selectedItemIndx],groupByFields.push(selectedItem.id);this.setState({selectedGroupColumns:sortedList,groupByFields:groupByFields})}if(!_.isEqual(prevState.filters,this.state.filters)&&this.state.filters){if(currentFilter=(currentFilter=this.props.filter?"string"==typeof this.props.filter?JSON.parse(this.props.filter):this.props.filter:{}).where?currentFilter.where:currentFilter,newFilter={where:{}},filterKeys=Object.keys(this.state.filters),newFilter.where.and=[currentFilter],filterKeys)for(filterKeyIndx in filterKeys)filterKey=filterKeys[filterKeyIndx],(filterValue=this.state.filters[filterKey])&&("string"==typeof filterValue?newFilter.where.and.push(_defineProperty({},filterKey,{like:filterValue})):newFilter.where.and.push(_defineProperty({},filterKey,filterValue)));this.setState({dataFilter:newFilter})}case 43:if(prevProps.reload==this.props.reload){_context6.next=60;break}return _context6.next=46,$qry.getRecords(this.state.scope&&"mmf"!=this.state.scope?this.state.tableName+"_"+this.state.scope:this.state.tableName,this.state.dataFilter,this.state.fieldCodes);case 46:if(_dataRecords=_context6.sent,_rows=_dataRecords&&_dataRecords.length>0?_dataRecords:[],!(this.props.treepivotfield&&this.state.treeField&&_rows&&_rows.length>0)){_context6.next=56;break}for(_rowIndx in _rowIds=[],_rows)_row=_rows[_rowIndx],_rowIds.push(_row.uid);return _treeDataFilter={where:_defineProperty({},this.state.treeField,{inq:_rowIds})},_context6.next=54,$qry.getRecords(this.state.scope&&"mmf"!=this.state.scope?this.state.tableName+"_"+this.state.scope:this.state.tableName,_treeDataFilter,this.state.fieldCodes);case 54:if((_childRecords=_context6.sent)&&_childRecords.length>0)for(_childRecordIndx in _childRecords)_childRecord=_childRecords[_childRecordIndx],_dataRowId=_childRecord.uid,_treeFieldUID=_childRecord[this.state.treeField],_rows[_treeFieldUID].children=_rows[_dataRowId].children||[],_rows[_treeFieldUID].children.push(_childRecord);case 56:return _context6.next=58,this.getRowsWithReferenceDisplayNames(_rows,this.state.referenceColumns);case 58:_context6.sent,self.setState({reload:!this.state.reload});case 60:_.isEqual(prevState.rows,this.state.rows)||this.setState({reload:!this.state.reload});case 61:case"end":return _context6.stop()}},_callee6,this)}));return function(_x9,_x10){return _ref15.apply(this,arguments)}}()},{key:"onSortEnd",value:function(_ref17){var oldIndex=_ref17.oldIndex,newIndex=_ref17.newIndex;if(Array.isArray(this.state.selectedOptions)){var newOptions=[].concat(_toConsumableArray(this.state.selectedOptions));newOptions.splice(newIndex<0?newOptions.length+newIndex:newIndex,0,newOptions.splice(oldIndex,1)[0]),this.setState({selectedOptions:newOptions,expandedGroupIds:new Set})}}},{key:"render",value:function(){var _this5=this,options=[{id:"Filter",text:"Filter"}];this.state.enableGroupFields&&options.push({id:"Group",text:"Group"});var actionNames=this.props.actionNames?this.props.actionNames:this.props.actionnames||(this.props.widgetProps?this.props.widgetProps.ActionNames:[]);if(actionNames&&"string"==typeof actionNames)try{actionNames=JSON.parse(actionNames)}catch(err){actionNames=[]}var titlestyles=this.props.titlestyles,title=this.props.title?this.props.title:this.state.tableName+" List";try{titlestyles=(titlestyles=titlestyles&&"string"==typeof titlestyles?JSON.parse(titlestyles):titlestyles)||{textAlign:"left",fontWeight:"bold",fontSize:"large",fontFamily:"serif",letterSpacing:1.5,marginRight:20,paddingTop:10}}catch(err){}var gridTopStyles={height:"inherit",textAlign:"left"},gridStyles={minHeight:"100%"};return this.props.noscroll+""!="false"&&(gridStyles.height=this.state.rows.length*this.state.rowHeight+this.state.headerRowHeight+5+(this.state.enableFilterRow?this.state.headerFiltersHeight:0)+"px",gridTopStyles.overflow="auto"),this.state.isReady?React.createElement("div",{className:this.props.hideborder?"gridTopNoBorder":"gridTop",style:gridTopStyles},React.createElement("style",null,this.props.inlinestyles||""),this.props.label?React.createElement("label",{className:"bx--label",style:{display:this.props.visible+""=="true"?"block":"none"}},this.props.label):null,React.createElement("div",{style:{display:"flex",flexDirection:"row",placeContent:"flex-end",right:0,paddingLeft:5,paddingRight:5,position:"sticky",top:0,zIndex:100}},React.createElement(Tile,{style:{width:"100%",display:"flex",backgroundColor:"#e8edf5"}},this.props.showtitle+""!="false"||this.props.widgetProps&&this.props.widgetProps.ShowTitle+""=="true"?React.createElement("div",{style:titlestyles},title):null,actionNames&&actionNames.map(function(actionObj){var actionName=actionObj,actionPayload=null;return"object"==typeof actionObj&&(actionName=actionObj.name,actionPayload={value:actionObj.value,selectedRows:_this5.state.selectedRows}),React.createElement(Button,{style:{marginRight:10,float:"right",backgroundColor:"white",border:"1px solid #b610e0",color:"#3400ff"},size:"small",light:"true",onClick:function(){if(_this5.props.onActionPerformed)_this5.props.onActionPerformed(actionName,actionPayload);else{var widgetProps=Object.assign({},_this5.props.widgetProps);widgetProps.ActionClicked={name:actionName,actionPayload:actionPayload,clickts:Date.now()},_this5.updateWidgetProps(widgetProps)}}},actionName)}),this.state.showGroup?React.createElement("div",{style:{display:this.state.enableGroupFields?"contents":"none",flexDirection:"row",border:"1px solid #0f61fe",padding:1,overflow:"auto"}},React.createElement(MultiSelect.Filterable,{placeholder:"Filter Fields...",type:"inline",size:"sm",light:"true",label:"Fields",titleText:"Group",items:this.state.availableGroupColumns,itemToString:function(item){return item?item.text:""},initialSelectedItems:this.state.selectedGroupColumns,onChange:function(e){var groupByFields=[];if(e.selectedItems&&e.selectedItems.length>0)for(var selectedItemIndx in e.selectedItems){var selectedItem=e.selectedItems[selectedItemIndx];groupByFields.push(selectedItem.id)}_this5.setState({selectedGroupColumns:e.selectedItems,groupByFields:groupByFields})}}),this.state.selectedGroupColumns&&this.state.selectedGroupColumns.length>1?React.createElement("srs-sortable-list",{listkey:this.state.listkey,axis:"x",lockaxis:"x",inputdata:JSON.stringify(this.state.selectedGroupColumns)}):null):null,this.state.showFilter?React.createElement(Button,{style:{marginRight:10},size:"small",light:"true",onClick:function(){return _this5.setState({enableFilterRow:!_this5.state.enableFilterRow})}},this.state.enableFilterRow?"Hide":"Show"," Filter"):null,this.props.hidefilter+""!="true"?React.createElement(MultiSelect.Filterable,{placeholder:"Show/Hide",light:"true",items:options,itemToString:function(item){return item?item.text:""},onChange:function(e){var selectedItems=e.selectedItems,showGroup=!1,showFilter=!1;for(var selectedItemIndx in selectedItems){var selectedItem=selectedItems[selectedItemIndx];"Filter"==selectedItem.id&&(showFilter=!0),"Group"==selectedItem.id&&(showGroup=!0)}_this5.setState({showFilter:showFilter,showGroup:showGroup})}}):null)),this.state.columns?React.createElement(ReactDataGrid,{columns:this.state.columns,rows:this.state.rows,enableDragAndDrop:!0,headerRowHeight:this.state.headerRowHeight,rowHeight:this.state.rowHeight,rowGetter:function(i){return _this5.state.rows[i]},rowsCount:this.state.rows.length,onGridRowsUpdated:this.onGridRowsUpdated,enableCellSelect:!0,onRowsChange:function(updatedRows){_this5.setState({rows:updatedRows}),_this5.props.onChange&&_this5.props.onChange(updatedRows)},handleEditorRowChange:function(row,selected){return console.log(row)},onColumnResize:function(idx,width){},defaultColumnOptions:{resizable:!0},sortColumn:this.state.sortColumn,sortDirection:this.state.sortDirection,onSort:function(columnKey,direction){var rows=_this5.state.rows,nosortRows=_this5.state.nosortRows?_this5.state.nosortRows:_this5.state.rows,sortColumn=columnKey,sortDirection=direction;rows="NONE"!=sortDirection?(rows=cloneDeep(_this5.state.rows)).sort(function(a,b){return a[sortColumn]<b[sortColumn]?"ASC"==sortDirection?-1:1:a[sortColumn]>b[sortColumn]?"ASC"==sortDirection?1:-1:0}):_this5.state.nosortRows?_this5.state.nosortRows:_this5.state.rows,_this5.setState({rows:rows,nosortRows:nosortRows,sortColumn:columnKey,sortDirection:direction})},rowKeyGetter:function(row){return row.uid},selectedRows:this.state.selectedRows,onSelectedRowsChange:function(rows){_this5.setState({selectedRows:rows})},enableFilterRow:this.state.enableFilterRow,filters:this.state.filters,onFiltersChange:function(filters){_this5.setState({filters:filters})},groupBy:this.state.groupByFields,rowGrouper:_.groupBy,expandedGroupIds:this.state.expandedGroupIds,onExpandedGroupIdsChange:function(groupIds){return _this5.setState({expandedGroupIds:groupIds})},style:gridStyles}):null):null}}]),_SrsGrid_}(React.Component),_export("SrsGrid",SrsGrid=function(props){return _SrsGrid_}),_export("SrsGrid",SrsGrid),_export("default",SrsGrid),_export("states",states=[{KeyName:"controlProps",AccessPath:"controls.${pageid}${pagesuffix}_${controlid}",DefaultValue:'{"controls": {"${pageid}${pagesuffix}_${controlid}": {}}}'},{KeyName:"sortedlist",AccessPath:"sortedlist",DefaultValue:'{"sortedlist": {}}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsGroupButton.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/checkbox--checked--filled/32","@carbon/icons-react/lib/document--blank/32","@carbon/icons-react/lib/link/32","@carbon/icons-react/lib/page--first/32","@carbon/icons-react/lib/list/32","lodash","lodash.clonedeep"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Page,_,cloneDeep,_SrsGroupButton_,SrsGroupButton,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibCheckboxCheckedFilled){_carbonIconsReactLibCheckboxCheckedFilled.default},function(_carbonIconsReactLibDocumentBlank){_carbonIconsReactLibDocumentBlank.default},function(_carbonIconsReactLibLink){_carbonIconsReactLibLink.default},function(_carbonIconsReactLibPageFirst){Page=_carbonIconsReactLibPageFirst.default},function(_carbonIconsReactLibList){_carbonIconsReactLibList.default},function(_lodash){_=_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsGroupButton_=function(_React$Component){function _SrsGroupButton_(props){_classCallCheck(this,_SrsGroupButton_);var _this=_possibleConstructorReturn(this,(_SrsGroupButton_.__proto__||Object.getPrototypeOf(_SrsGroupButton_)).call(this,props)),buttonList=_this.props.widgetProps&&_this.props.widgetProps.ButtonList?"string"==typeof _this.props.widgetProps.ButtonList?JSON.parse(_this.props.widgetProps.ButtonList):_this.props.widgetProps.ButtonList:[{name:"Home",value:"page--first/32"}];return _this.state={reload:!1,buttonListEl:[]},_this.getButtonListEl=_this.getButtonListEl.bind(_this),_this.getButtonListEl(buttonList),_this}return _inherits(_SrsGroupButton_,_React$Component),_createClass(_SrsGroupButton_,[{key:"componentDidUpdate",value:function(prevProps){if(this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)){var buttonList=this.props.widgetProps&&this.props.widgetProps.ButtonList?"string"==typeof this.props.widgetProps.ButtonList?JSON.parse(this.props.widgetProps.ButtonList):this.props.widgetProps.ButtonList:[{name:"Home",value:"page--first/32"}];buttonList&&this.getButtonListEl(buttonList)}}},{key:"getButtonListEl",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(buttonList){var iconStyle,buttonListEl,buttionListIndx,buttonItem,IconBtn,_this2=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(iconStyle={},buttonListEl=[],!buttonList){_context.next=26;break}iconStyle.width=100/buttonList.length+"%",_context.t0=_regeneratorRuntime.keys(buttonList);case 5:if((_context.t1=_context.t0()).done){_context.next=25;break}if(buttionListIndx=_context.t1.value,!(buttonItem=buttonList[buttionListIndx]).value||!buttonItem.value.startsWith("/file/")){_context.next=12;break}buttonListEl.push(React.createElement("img",{value:buttonItem.name,src:buttonItem.value,alt:"Btn",onClick:function(e){var widgetProps=cloneDeep(_this2.props.widgetProps);widgetProps.ActiveButton=e.target.getAttribute("value"),widgetProps.lastChanged=Date.now(),_this2.props.updateStore({updates:{widgetProps:widgetProps}})},style:{height:32,width:32},style:iconStyle,className:"iconBtn"})),_context.next=23;break;case 12:return IconBtn=Page,_context.prev=13,_context.next=16,System.import("@carbon/icons-react/lib/"+buttonItem.value);case 16:IconBtn=_context.sent,_context.next=22;break;case 19:_context.prev=19,_context.t2=_context.catch(13),IconBtn=Page;case 22:buttonListEl.push(React.createElement("div",{className:"btnItem",style:iconStyle},React.createElement(IconBtn,{onClick:function(e){var widgetProps=cloneDeep(_this2.props.widgetProps);widgetProps.ActiveButton=$(e.target).closest("svg").attr("value"),widgetProps.lastChanged=Date.now(),_this2.props.updateStore({updates:{widgetProps:widgetProps}})},value:buttonItem.name,label:buttonItem.name,className:"iconBtn"}),React.createElement("div",{className:"labelBtn"},buttonItem.name)));case 23:_context.next=5;break;case 25:this.setState({buttonListEl:buttonListEl});case 26:case"end":return _context.stop()}},_callee,this,[[13,19]])}));return function(_x){return _ref.apply(this,arguments)}}()},{key:"render",value:function(){var styles={display:"flex",height:"inherit",backgroundColor:"#bbd4be"};if(this.props.widgetProps&&this.props.widgetProps.Styles){var customStyles="string"==typeof this.props.widgetProps.Styles?JSON.parse(this.props.widgetProps.Styles):this.props.widgetProps.Styles;styles=_extends({},styles,customStyles)}return React.createElement("div",{style:styles},this.state.buttonListEl)}}]),_SrsGroupButton_}(React.Component),_export("SrsGroupButton",SrsGroupButton=function(props){return _SrsGroupButton_}),_export("SrsGroupButton",SrsGroupButton),_export("default",SrsGroupButton),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsGroupButton/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/checkbox--checked--filled/32","@carbon/icons-react/lib/document--blank/32","@carbon/icons-react/lib/link/32","@carbon/icons-react/lib/page--first/32","@carbon/icons-react/lib/list/32","lodash","lodash.clonedeep"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Page,_,cloneDeep,_SrsGroupButton_,SrsGroupButton;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibCheckboxCheckedFilled){_carbonIconsReactLibCheckboxCheckedFilled.default},function(_carbonIconsReactLibDocumentBlank){_carbonIconsReactLibDocumentBlank.default},function(_carbonIconsReactLibLink){_carbonIconsReactLibLink.default},function(_carbonIconsReactLibPageFirst){Page=_carbonIconsReactLibPageFirst.default},function(_carbonIconsReactLibList){_carbonIconsReactLibList.default},function(_lodash){_=_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsGroupButton_=function(_React$Component){function _SrsGroupButton_(props){_classCallCheck(this,_SrsGroupButton_);var _this=_possibleConstructorReturn(this,(_SrsGroupButton_.__proto__||Object.getPrototypeOf(_SrsGroupButton_)).call(this,props)),buttonList=_this.props.widgetProps&&_this.props.widgetProps.ButtonList?"string"==typeof _this.props.widgetProps.ButtonList?JSON.parse(_this.props.widgetProps.ButtonList):_this.props.widgetProps.ButtonList:[{name:"Home",value:"page--first/32"}];return _this.state={reload:!1,buttonListEl:[]},_this.getButtonListEl=_this.getButtonListEl.bind(_this),_this.getButtonListEl(buttonList),_this}return _inherits(_SrsGroupButton_,_React$Component),_createClass(_SrsGroupButton_,[{key:"componentDidUpdate",value:function(prevProps){if(this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)){var buttonList=this.props.widgetProps&&this.props.widgetProps.ButtonList?"string"==typeof this.props.widgetProps.ButtonList?JSON.parse(this.props.widgetProps.ButtonList):this.props.widgetProps.ButtonList:[{name:"Home",value:"page--first/32"}];buttonList&&this.getButtonListEl(buttonList)}}},{key:"getButtonListEl",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(buttonList){var iconStyle,buttonListEl,buttionListIndx,buttonItem,IconBtn,_this2=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(iconStyle={},buttonListEl=[],!buttonList){_context.next=26;break}iconStyle.width=100/buttonList.length+"%",_context.t0=_regeneratorRuntime.keys(buttonList);case 5:if((_context.t1=_context.t0()).done){_context.next=25;break}if(buttionListIndx=_context.t1.value,!(buttonItem=buttonList[buttionListIndx]).value||!buttonItem.value.startsWith("/file/")){_context.next=12;break}buttonListEl.push(React.createElement("img",{value:buttonItem.name,src:buttonItem.value,alt:"Btn",onClick:function(e){var widgetProps=cloneDeep(_this2.props.widgetProps);widgetProps.ActiveButton=e.target.getAttribute("value"),widgetProps.lastChanged=Date.now(),_this2.props.updateStore({updates:{widgetProps:widgetProps}})},style:{height:32,width:32},style:iconStyle,className:"iconBtn"})),_context.next=23;break;case 12:return IconBtn=Page,_context.prev=13,_context.next=16,System.import("@carbon/icons-react/lib/"+buttonItem.value);case 16:IconBtn=_context.sent,_context.next=22;break;case 19:_context.prev=19,_context.t2=_context.catch(13),IconBtn=Page;case 22:buttonListEl.push(React.createElement("div",{className:"btnItem",style:iconStyle},React.createElement(IconBtn,{onClick:function(e){var widgetProps=cloneDeep(_this2.props.widgetProps);widgetProps.ActiveButton=$(e.target).closest("svg").attr("value"),widgetProps.lastChanged=Date.now(),_this2.props.updateStore({updates:{widgetProps:widgetProps}})},value:buttonItem.name,label:buttonItem.name,className:"iconBtn"}),React.createElement("div",{className:"labelBtn"},buttonItem.name)));case 23:_context.next=5;break;case 25:this.setState({buttonListEl:buttonListEl});case 26:case"end":return _context.stop()}},_callee,this,[[13,19]])}));return function(_x){return _ref.apply(this,arguments)}}()},{key:"render",value:function(){var styles={display:"flex",height:"inherit",backgroundColor:"#bbd4be"};if(this.props.widgetProps&&this.props.widgetProps.Styles){var customStyles="string"==typeof this.props.widgetProps.Styles?JSON.parse(this.props.widgetProps.Styles):this.props.widgetProps.Styles;styles=_extends({},styles,customStyles)}return React.createElement("div",{style:styles},this.state.buttonListEl)}}]),_SrsGroupButton_}(React.Component),_export("SrsGroupButton",SrsGroupButton=function(props){return _SrsGroupButton_}),_export("SrsGroupButton",SrsGroupButton)}}}),System.register("component/studio/SrsHtml.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-html-parser"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ReactHtmlParser,convertNodeToElement,_SrsHtml_,SrsHtml,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactHtmlParser){ReactHtmlParser=_reactHtmlParser.default,_reactHtmlParser.processNodes,convertNodeToElement=_reactHtmlParser.convertNodeToElement,_reactHtmlParser.htmlparser2}],execute:function(){_SrsHtml_=function(_React$Component){function _SrsHtml_(props){_classCallCheck(this,_SrsHtml_);var _this=_possibleConstructorReturn(this,(_SrsHtml_.__proto__||Object.getPrototypeOf(_SrsHtml_)).call(this,props));return _this.htmlParserTransform=_this.htmlParserTransform.bind(_this),_this}return _inherits(_SrsHtml_,_React$Component),_createClass(_SrsHtml_,[{key:"htmlParserTransform",value:function(node,index){var self=this;if(node.attribs&&node.attribs.action_name){var actionName=node.attribs.action_name,actionType=node.attribs.action_type,targetAttrs=node.attribs.action_target?node.attribs.action_target:"value",tagName=node.name,nodeProps=node.attribs||{};delete nodeProps.action_name,delete nodeProps.action_type,delete nodeProps.action_target,delete nodeProps["on"+actionType];var action2EventMap={click:"onClick",change:"onChange"};switch(action2EventMap[actionType]){case"onClick":nodeProps[action2EventMap[actionType]]=function(e){var widgetProps=self.props&&self.props.widgetProps?self.props.widgetProps:{};widgetProps=Object.assign({},widgetProps);var elAttrbutes=targetAttrs.split(","),targetElementValue={};elAttrbutes&&elAttrbutes.length>0&&elAttrbutes.map(function(elAttrbute){targetElementValue[elAttrbute]=e.target&&$(e.target).attr(elAttrbute)?$(e.target).attr(elAttrbute):""}),widgetProps.TargetElement=targetElementValue,widgetProps.TargetActionName=actionName,widgetProps.TargetActionDuration=Date.now(),self.props.updateStore({updates:{widgetProps:widgetProps}})};break;case"onChange":nodeProps[action2EventMap[actionType]]=function(e){var widgetProps=self.props&&self.props.widgetProps?self.props.widgetProps:{};widgetProps=Object.assign({},widgetProps);var elAttrbutes=targetAttrs.split(","),targetElementValue={};elAttrbutes&&elAttrbutes.length>0&&elAttrbutes.map(function(elAttrbute){targetElementValue[elAttrbute]=e.target&&e.target.value?e.target.value:""}),widgetProps.TargetElement=targetElementValue,widgetProps.TargetActionName=actionName,widgetProps.TargetActionDuration=Date.now(),self.props.updateStore({updates:{widgetProps:widgetProps}})}}var el=convertNodeToElement(node,index,self.htmlParserTransform),dynamicEle=React.createElement(tagName,nodeProps,el.props.children);return React.createElement("div",null,dynamicEle)}}},{key:"render",value:function(){var htmlStr=this.props.widgetProps&&this.props.widgetProps.HTMLCode?this.props.widgetProps.HTMLCode:"<div/>",allProps=this.props.widgetProps?this.props.widgetProps:{},matchingParams=(htmlStr="<pre>"+htmlStr+"</pre>").match(/\{{\w+[:\w+]+}}/g);if(matchingParams)for(var matchingParamsIndx in matchingParams){var matchingParam=matchingParams[matchingParamsIndx];if(matchingParam){var paramName=matchingParam.slice(2,matchingParam.length-2);if(paramName&&paramName.indexOf(":")>-1){var paramType=paramName.split(":")[0],paramValue=paramName.split(":")[1];switch(paramType){case"props":var propValue=allProps[paramValue]||allProps["__Dynamic__"+paramValue]||"";htmlStr=htmlStr.replace(matchingParam,propValue);break;case"action":var actionType=paramName.split(":").length>=3?paramName.split(":")[2]:"click",targetElementAttributes=paramName.split(":").length>=4?paramName.split(":")[3]:"value";htmlStr=htmlStr.replace(matchingParam,'action_name="'+paramValue+'" action_type="'+actionType+'" action_target="'+targetElementAttributes+'"')}}}}var htmlEl=ReactHtmlParser(htmlStr,{transform:this.htmlParserTransform}),embeddedStyles=null;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles));var scriptCode=null;return this.props.widgetProps&&this.props.widgetProps.ScriptCode&&(scriptCode=React.createElement("script",null,this.props.widgetProps.ScriptCode)),React.createElement(React.Fragment,null,scriptCode,embeddedStyles,htmlEl)}}]),_SrsHtml_}(React.Component),_export("SrsHtml",SrsHtml=function(props){return _SrsHtml_}),_export("SrsHtml",SrsHtml),_export("default",SrsHtml),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsHtml/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-html-parser"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ReactHtmlParser,convertNodeToElement,_SrsHtml_,SrsHtml;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactHtmlParser){ReactHtmlParser=_reactHtmlParser.default,_reactHtmlParser.processNodes,convertNodeToElement=_reactHtmlParser.convertNodeToElement,_reactHtmlParser.htmlparser2}],execute:function(){_SrsHtml_=function(_React$Component){function _SrsHtml_(props){_classCallCheck(this,_SrsHtml_);var _this=_possibleConstructorReturn(this,(_SrsHtml_.__proto__||Object.getPrototypeOf(_SrsHtml_)).call(this,props));return _this.htmlParserTransform=_this.htmlParserTransform.bind(_this),_this}return _inherits(_SrsHtml_,_React$Component),_createClass(_SrsHtml_,[{key:"htmlParserTransform",value:function(node,index){var self=this;if(node.attribs&&node.attribs.action_name){var actionName=node.attribs.action_name,actionType=node.attribs.action_type,targetAttrs=node.attribs.action_target?node.attribs.action_target:"value",tagName=node.name,nodeProps=node.attribs||{};delete nodeProps.action_name,delete nodeProps.action_type,delete nodeProps.action_target,delete nodeProps["on"+actionType];var action2EventMap={click:"onClick",change:"onChange"};switch(action2EventMap[actionType]){case"onClick":nodeProps[action2EventMap[actionType]]=function(e){var widgetProps=self.props&&self.props.widgetProps?self.props.widgetProps:{};widgetProps=Object.assign({},widgetProps);var elAttrbutes=targetAttrs.split(","),targetElementValue={};elAttrbutes&&elAttrbutes.length>0&&elAttrbutes.map(function(elAttrbute){targetElementValue[elAttrbute]=e.target&&$(e.target).attr(elAttrbute)?$(e.target).attr(elAttrbute):""}),widgetProps.TargetElement=targetElementValue,widgetProps.TargetActionName=actionName,widgetProps.TargetActionDuration=Date.now(),self.props.updateStore({updates:{widgetProps:widgetProps}})};break;case"onChange":nodeProps[action2EventMap[actionType]]=function(e){var widgetProps=self.props&&self.props.widgetProps?self.props.widgetProps:{};widgetProps=Object.assign({},widgetProps);var elAttrbutes=targetAttrs.split(","),targetElementValue={};elAttrbutes&&elAttrbutes.length>0&&elAttrbutes.map(function(elAttrbute){targetElementValue[elAttrbute]=e.target&&e.target.value?e.target.value:""}),widgetProps.TargetElement=targetElementValue,widgetProps.TargetActionName=actionName,widgetProps.TargetActionDuration=Date.now(),self.props.updateStore({updates:{widgetProps:widgetProps}})}}var el=convertNodeToElement(node,index,self.htmlParserTransform),dynamicEle=React.createElement(tagName,nodeProps,el.props.children);return React.createElement("div",null,dynamicEle)}}},{key:"render",value:function(){var htmlStr=this.props.widgetProps&&this.props.widgetProps.HTMLCode?this.props.widgetProps.HTMLCode:"<div/>",allProps=this.props.widgetProps?this.props.widgetProps:{},matchingParams=(htmlStr="<pre>"+htmlStr+"</pre>").match(/\{{\w+[:\w+]+}}/g);if(matchingParams)for(var matchingParamsIndx in matchingParams){var matchingParam=matchingParams[matchingParamsIndx];if(matchingParam){var paramName=matchingParam.slice(2,matchingParam.length-2);if(paramName&&paramName.indexOf(":")>-1){var paramType=paramName.split(":")[0],paramValue=paramName.split(":")[1];switch(paramType){case"props":var propValue=allProps[paramValue]||allProps["__Dynamic__"+paramValue]||"";htmlStr=htmlStr.replace(matchingParam,propValue);break;case"action":var actionType=paramName.split(":").length>=3?paramName.split(":")[2]:"click",targetElementAttributes=paramName.split(":").length>=4?paramName.split(":")[3]:"value";htmlStr=htmlStr.replace(matchingParam,'action_name="'+paramValue+'" action_type="'+actionType+'" action_target="'+targetElementAttributes+'"')}}}}var htmlEl=ReactHtmlParser(htmlStr,{transform:this.htmlParserTransform}),embeddedStyles=null;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles));var scriptCode=null;return this.props.widgetProps&&this.props.widgetProps.ScriptCode&&(scriptCode=React.createElement("script",null,this.props.widgetProps.ScriptCode)),React.createElement(React.Fragment,null,scriptCode,embeddedStyles,htmlEl)}}]),_SrsHtml_}(React.Component),_export("SrsHtml",SrsHtml=function(props){return _SrsHtml_}),_export("SrsHtml",SrsHtml)}}}),System.register("component/studio/SrsIFrame.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-iframe"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Iframe,_SrsIFrame_,SrsIFrame,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactIframe){Iframe=_reactIframe.default}],execute:function(){_SrsIFrame_=function(_React$Component){function _SrsIFrame_(){return _classCallCheck(this,_SrsIFrame_),_possibleConstructorReturn(this,(_SrsIFrame_.__proto__||Object.getPrototypeOf(_SrsIFrame_)).apply(this,arguments))}return _inherits(_SrsIFrame_,_React$Component),_createClass(_SrsIFrame_,[{key:"render",value:function(){var embeddedStyles=null;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles));var URL=this.props.widgetProps&&this.props.widgetProps.URL?this.props.widgetProps.URL:this.props.url?this.props.url:"#";URL=URL.startsWith("/")?location.origin+URL:URL;var queryString="";this.props.widgetProps&&this.props.widgetProps.noCache&&(queryString=queryString?queryString+"&nocache=true":"?nocache=true"),this.props.widgetProps&&this.props.widgetProps.debugMode&&(queryString=queryString?queryString+"&debug=true":"?debug=true"),URL+=queryString;var keyProps=this.props.key?{key:this.props.propkey}:{};return React.createElement("div",{style:{height:"inherit"}},embeddedStyles,React.createElement(Iframe,_extends({url:URL},keyProps,{width:this.props.widgetProps&&this.props.widgetProps.Width?this.props.widgetProps.Width:this.props.width?this.props.width:"0px",height:this.props.widgetProps&&this.props.widgetProps.Height?this.props.widgetProps.Height:this.props.height?this.props.height:"0px",id:this.props.widgetid?this.props.widgetid:this.props.frameid?this.props.frameid:"iframeId",styles:this.props.widgetProps&&this.props.widgetProps.Styles?"string"==typeof this.props.widgetProps.Styles?JSON.parse(this.props.widgetProps.Styles):this.props.widgetProps.Styles:{border:"1px solid lightgreen"},display:"initial",position:"relative"})))}}]),_SrsIFrame_}(React.Component),_export("SrsIFrame",SrsIFrame=function(props){return _SrsIFrame_}),_export("SrsIFrame",SrsIFrame),_export("default",SrsIFrame),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsImage.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","lodash.clonedeep","lodash","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,_,React,_SrsImage_,SrsImage,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_lodashClonedeep){_lodashClonedeep.default},function(_lodash){_=_lodash.default},function(_react){React=_react.default}],execute:function(){_SrsImage_=function(_React$Component){function _SrsImage_(props){_classCallCheck(this,_SrsImage_);var _this=_possibleConstructorReturn(this,(_SrsImage_.__proto__||Object.getPrototypeOf(_SrsImage_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_SrsImage_,_React$Component),_createClass(_SrsImage_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps,this.props)||this.setState({reload:!this.state.reload})}},{key:"render",value:function(){var defaultURL=this.props.widgetProps&&this.props.widgetProps.DefaultURL?this.props.widgetProps.DefaultURL:"/resources/NoResults.jpg",sourceURL=this.props.widgetProps&&this.props.widgetProps.SourceURL?this.props.widgetProps.SourceURL:defaultURL,imageHeight=this.props.widgetProps&&this.props.widgetProps.ImageHeight?parseInt(this.props.widgetProps.ImageHeight):100,imageWidgth=this.props.widgetProps&&this.props.widgetProps.ImageWidth?parseInt(this.props.widgetProps.ImageWidth):100;return React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,'@import url("component/studio/SrsImage/Style.css");'),React.createElement("img",{src:sourceURL,alt:"Image",style:{height:imageHeight,width:imageWidgth}}))}}]),_SrsImage_}(React.Component),_export("SrsImage",SrsImage=function(props){return _SrsImage_}),_export("SrsImage",SrsImage),_export("default",SrsImage),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsImage/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","lodash.clonedeep","lodash","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,_,React,_SrsImage_,SrsImage;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_lodashClonedeep){_lodashClonedeep.default},function(_lodash){_=_lodash.default},function(_react){React=_react.default}],execute:function(){_SrsImage_=function(_React$Component){function _SrsImage_(props){_classCallCheck(this,_SrsImage_);var _this=_possibleConstructorReturn(this,(_SrsImage_.__proto__||Object.getPrototypeOf(_SrsImage_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_SrsImage_,_React$Component),_createClass(_SrsImage_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps,this.props)||this.setState({reload:!this.state.reload})}},{key:"render",value:function(){var defaultURL=this.props.widgetProps&&this.props.widgetProps.DefaultURL?this.props.widgetProps.DefaultURL:"/resources/NoResults.jpg",sourceURL=this.props.widgetProps&&this.props.widgetProps.SourceURL?this.props.widgetProps.SourceURL:defaultURL,imageHeight=this.props.widgetProps&&this.props.widgetProps.ImageHeight?parseInt(this.props.widgetProps.ImageHeight):100,imageWidgth=this.props.widgetProps&&this.props.widgetProps.ImageWidth?parseInt(this.props.widgetProps.ImageWidth):100;return React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,'@import url("component/studio/SrsImage/Style.css");'),React.createElement("img",{src:sourceURL,alt:"Image",style:{height:imageHeight,width:imageWidgth}}))}}]),_SrsImage_}(React.Component),_export("SrsImage",SrsImage=function(props){return _SrsImage_}),_export("SrsImage",SrsImage)}}}),System.register("component/studio/SrsKeyValuePair.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/toConsumableArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","@carbon/icons-react/lib/settings/16","lodash.clonedeep"],function(_export,_context){"use strict";var _toConsumableArray,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,Select,SelectItem,AddAlt20,SubAlt20,cloneDeep,_SrsKeyValuePair_,SrsKeyValuePair,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs){_toConsumableArray=_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.Checkbox,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonIconsReactLibSettings){_carbonIconsReactLibSettings.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsKeyValuePair_=function(_React$Component){function _SrsKeyValuePair_(props){_classCallCheck(this,_SrsKeyValuePair_);var _this=_possibleConstructorReturn(this,(_SrsKeyValuePair_.__proto__||Object.getPrototypeOf(_SrsKeyValuePair_)).call(this,props));_this.keyValueList=[{name:"",value:""}];var keyValueList=_this.props.items?_this.props.items:_this.props.widgetProps&&_this.props.widgetProps.items;if(keyValueList)if("string"==typeof keyValueList)try{keyValueList=JSON.parse(keyValueList),_this.keyValueList=keyValueList&&keyValueList.length>0?keyValueList:_this.keyValueList}catch(err){console.error(err.message)}else _this.keyValueList=keyValueList&&keyValueList.length>0?keyValueList:_this.keyValueList;return _this.keyify=_this.keyify.bind(_this),_this.state={keyValueLists:_this.keyValueList,dirty:!1},_this.removeSpecialCharacters=_this.removeSpecialCharacters.bind(_this),_this.updateWidgetProps=_this.updateWidgetProps.bind(_this),_this}return _inherits(_SrsKeyValuePair_,_React$Component),_createClass(_SrsKeyValuePair_,[{key:"updateWidgetProps",value:function(updatedList){if(this.props.widgetProps){var widgetProps=Object.assign({},this.props.widgetProps);widgetProps.value=updatedList,this.props.updateStore({updates:{widgetProps:widgetProps}})}}},{key:"removeSpecialCharacters",value:function(val){return val.replace(/[^a-zA-Z0-9]/g,"_")}},{key:"componentDidUpdate",value:function(prevProps,prevState){if(!_.isEqual(prevProps.items,this.props.items)){var keyValueList=this.props.items?JSON.parse(this.props.items):this.props.widgetProps&&this.props.widgetProps.items?this.props.widgetProps.items:[{name:"",value:""}];this.props.updateStore&&this.props.updateStore({updates:{value:keyValueList}}),keyValueList=keyValueList&&0!=keyValueList.length?keyValueList:[{name:"",value:""}],this.setState({keyValueLists:keyValueList})}}},{key:"keyify",value:function(obj){var _this2=this,prefix=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(obj).reduce(function(res,el){return Array.isArray(obj[el])?res:"object"==typeof obj[el]&&null!==obj[el]?obj[el]?[].concat(_toConsumableArray(res),_toConsumableArray(_this2.keyify(obj[el],prefix+el+"@@"))):res:[].concat(_toConsumableArray(res),[prefix+el])},[])}},{key:"render",value:function(){var _this3=this,keyValueElementList=[],keyList=null,keySelectItems=null,valueList=null,valueSelectItems=null,keyNestedSelectItems=null,valueNestedSelectItems=null,keyLabels=null,valueLabels=null;if(this.props.choices){var choices=JSON.parse(this.props.choices);if(valueList=choices.valueList,keyList=choices.keyList)if(Array.isArray(keyList))(keySelectItems=[]).push(React.createElement(SelectItem,{value:"",text:"Select a key"})),(keyList=keyList.sort(function(a,b){return a<b?-1:a>b?1:0})).map(function(keyItem){return keySelectItems.push(React.createElement(SelectItem,{value:keyItem.name,text:keyItem.value}))});else{keyNestedSelectItems={},keyLabels=[];for(var keyNestedLabels=this.props.keylabels&&JSON.parse(this.props.keylabels);keyNestedLabels&&Object.keys(keyNestedLabels).length>0;){var labelKey=Object.keys(keyNestedLabels)[0];keyLabels.push(labelKey),keyNestedLabels=keyNestedLabels[labelKey]}var listOfKeys=this.keyify(keyList),uniqueSelectItems={};keyLabels&&keyLabels.map(function(labelName,indx){keyNestedSelectItems[labelName]={},keyNestedSelectItems[labelName].no_parent=[],keyNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:"",text:"Select a value"})),listOfKeys&&listOfKeys.map(function(keyName){var targetKeyVal=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx]:keyName;if(targetKeyVal)if(0==indx)uniqueSelectItems[labelName]=uniqueSelectItems[labelName]||{},uniqueSelectItems[labelName].no_parent=uniqueSelectItems[labelName].no_parent||[],-1==uniqueSelectItems[labelName].no_parent.indexOf(targetKeyVal)&&(keyNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),uniqueSelectItems[labelName].no_parent.push(targetKeyVal));else{var parentName=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx-1]:"";parentName&&(uniqueSelectItems[labelName]=uniqueSelectItems[labelName]||{},uniqueSelectItems[labelName][parentName]=uniqueSelectItems[labelName][parentName]||[],-1==uniqueSelectItems[labelName][parentName].indexOf(targetKeyVal)&&(keyNestedSelectItems[labelName][parentName]=keyNestedSelectItems[labelName][parentName]||[React.createElement(SelectItem,{value:"",text:"Select a value"})],keyNestedSelectItems[labelName][parentName].push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),uniqueSelectItems[labelName][parentName].push(targetKeyVal)))}})})}if(valueList)if(Array.isArray(valueList))(valueSelectItems=[]).push(React.createElement(SelectItem,{value:"",text:"Select a value"})),(valueList=valueList.sort(function(a,b){return a<b?-1:a>b?1:0})).map(function(valueItem){return valueSelectItems.push(React.createElement(SelectItem,{value:valueItem.name,text:valueItem.value}))});else{valueNestedSelectItems={},valueLabels=[];for(var valueNestedLabels=this.props.valuelabels&&JSON.parse(this.props.valuelabels);valueNestedLabels&&Object.keys(valueNestedLabels).length>0;){var _labelKey=Object.keys(valueNestedLabels)[0];valueLabels.push(_labelKey),valueNestedLabels=valueNestedLabels[_labelKey]}var _listOfKeys=this.keyify(valueList),_uniqueSelectItems={};valueLabels&&valueLabels.map(function(labelName,indx){valueNestedSelectItems[labelName]={},valueNestedSelectItems[labelName].no_parent=[],valueNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:"",text:"Select a value"})),_listOfKeys&&_listOfKeys.map(function(keyName){var targetKeyVal=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx]:keyName;if(targetKeyVal)if(0==indx)_uniqueSelectItems[labelName]=_uniqueSelectItems[labelName]||{},_uniqueSelectItems[labelName].no_parent=_uniqueSelectItems[labelName].no_parent||[],-1==_uniqueSelectItems[labelName].no_parent.indexOf(targetKeyVal)&&(valueNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),_uniqueSelectItems[labelName].no_parent.push(targetKeyVal));else{var parentName=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx-1]:"";parentName&&(_uniqueSelectItems[labelName]=_uniqueSelectItems[labelName]||{},_uniqueSelectItems[labelName][parentName]=_uniqueSelectItems[labelName][parentName]||[],-1==_uniqueSelectItems[labelName][parentName].indexOf(targetKeyVal)&&(valueNestedSelectItems[labelName][parentName]=valueNestedSelectItems[labelName][parentName]||[React.createElement(SelectItem,{value:"",text:"Select a value"})],valueNestedSelectItems[labelName][parentName].push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),_uniqueSelectItems[labelName][parentName].push(targetKeyVal)))}})})}}return this.state.keyValueLists.forEach(function(pair,i){var keyValueelement=React.createElement("div",{style:{display:"inline-flex"}},keyList&&0!=keyList.length?Array.isArray(keyList)?React.createElement(Select,{hideLabel:!0,onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.name=e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists}),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}}),_this3.updateWidgetProps(newKeyValueLists)},defaultValue:pair.name,value:pair.name},keySelectItems):keyLabels&&keyLabels.map(function(labelName,labelIndx){var pairValues=pair.value&&"string"==typeof pair.value?JSON.parse(pair.value):pair.value;return pairValues=pairValues||[],0==labelIndx||pairValues&&pairValues.length>=labelIndx&&keyNestedSelectItems[labelName]&&keyNestedSelectItems[labelName][pair.value[labelIndx-1]]?React.createElement(Select,{hideLabel:!0,style:{marginLeft:"1rem",width:20},onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=keyValueItem.value||[],keyValueItem.value=keyValueItem.value.reverse().slice(keyValueItem.value.length-labelIndx).reverse(),keyValueItem.value.push(e.target.value))}),_this3.setState({keyValueLists:newKeyValueLists}),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}}),_this3.updateWidgetProps(newKeyValueLists)},defaultValue:pairValues&&pairValues.length>labelIndx?pairValues[labelIndx]:"",value:pairValues&&pairValues.length>labelIndx?pairValues[labelIndx]:""},keyNestedSelectItems[labelName][0==labelIndx?"no_parent":pairValues[labelIndx-1]]):null}):React.createElement(TextInput,{placeholder:_this3.props.placeholder_name||"Enter Name...",onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.name=_this3.props.trim_name?_this3.removeSpecialCharacters(e.target.value):e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists,dirty:!0})},onBlur:function(){if(_this3.state.dirty){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}}),_this3.updateWidgetProps(newKeyValueLists),_this3.setState({dirty:!1})}},defaultValue:pair.name,value:pair.name}),valueList&&0!=valueList.length?Array.isArray(valueList)?React.createElement(Select,{hideLabel:!0,style:{marginLeft:"1rem",width:20},onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists}),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})},defaultValue:pair.value,value:pair.value},valueSelectItems):valueLabels&&valueLabels.map(function(labelName,labelIndx){var pairValues=pair.value&&"string"==typeof pair.value?JSON.parse(pair.value):pair.value;return pairValues=pairValues||[],0==labelIndx||pairValues&&pairValues.length>=labelIndx&&valueNestedSelectItems[labelName]&&valueNestedSelectItems[labelName][pairValues[labelIndx-1]]?React.createElement(Select,{hideLabel:!0,style:{marginLeft:"1rem",width:20},onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists),readyToSave=!0;newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=keyValueItem.value&&"string"==typeof keyValueItem.value?JSON.parse(keyValueItem.value):keyValueItem.value,keyValueItem.value=keyValueItem.value||[],keyValueItem.value=keyValueItem.value.reverse().slice(keyValueItem.value.length-labelIndx).reverse(),keyValueItem.value.push(e.target.value)),readyToSave=readyToSave?!!keyValueItem.name&&keyValueItem.value.length==valueLabels.length:readyToSave}),_this3.setState({keyValueLists:newKeyValueLists}),readyToSave&&_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}}),_this3.updateWidgetProps(newKeyValueLists)},defaultValue:pairValues&&pairValues.length>labelIndx?pair.value[labelIndx]:"",value:pairValues&&pairValues.length>labelIndx?pairValues[labelIndx]:""},valueNestedSelectItems[labelName][0==labelIndx?"no_parent":pairValues[labelIndx-1]]):null}):React.createElement(TextInput,{style:{marginLeft:"1rem"},placeholder:_this3.props.placeholder_value||"Enter Value...",onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=_this3.props.trim_value?_this3.removeSpecialCharacters(e.target.value):e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists})},onBlur:function(){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists),readyToSave=!0;newKeyValueLists.map(function(keyValueItem,indx){readyToSave=readyToSave?!!keyValueItem.name:readyToSave}),readyToSave&&_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}}),_this3.updateWidgetProps(newKeyValueLists)},defaultValue:pair.value,value:pair.value}),_this3.state.keyValueLists.length>0?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);(newKeyValueLists=(newKeyValueLists=newKeyValueLists||[{name:"",value:""}]).filter(function(item,indx){return indx!=i}))&&0!=newKeyValueLists.length||(newKeyValueLists=[{name:"",value:""}]),_this3.setState({keyValueLists:newKeyValueLists}),_this3.updateWidgetProps(newKeyValueLists),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})}}):null,React.createElement(AddAlt20,{onClick:function(){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);(newKeyValueLists=newKeyValueLists||[{name:"",value:""}]).length;newKeyValueLists.push({name:"",value:""}),_this3.setState({keyValueLists:newKeyValueLists})}}));keyValueElementList.push(keyValueelement)}),React.createElement("div",{style:{display:"inline-grid",float:"left"}},React.createElement("label",{className:"bx--label",style:{display:"flex"}},this.props.label||this.props.widgetProps&&this.props.widgetProps.Label||"KeyValuePair"),keyValueElementList)}}]),_SrsKeyValuePair_}(React.Component),_export("SrsKeyValuePair",SrsKeyValuePair=function(props){return _SrsKeyValuePair_}),_export("SrsKeyValuePair",SrsKeyValuePair),_export("default",SrsKeyValuePair),_export("states",states=[{KeyName:"value",AccessPath:"keyvaluepair.${varname}",DefaultValue:'{"keyvaluepair": {"${varname}": []}}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsKeyValuePair/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/toConsumableArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","@carbon/icons-react/lib/settings/16","lodash.clonedeep"],function(_export,_context){"use strict";var _toConsumableArray,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,Select,SelectItem,AddAlt20,SubAlt20,cloneDeep,_SrsKeyValuePair_,SrsKeyValuePair;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs){_toConsumableArray=_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.Checkbox,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonIconsReactLibSettings){_carbonIconsReactLibSettings.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsKeyValuePair_=function(_React$Component){function _SrsKeyValuePair_(props){_classCallCheck(this,_SrsKeyValuePair_);var _this=_possibleConstructorReturn(this,(_SrsKeyValuePair_.__proto__||Object.getPrototypeOf(_SrsKeyValuePair_)).call(this,props));_this.keyValueList=[{name:"",value:""}];var keyValueList=_this.props.items?_this.props.items:_this.props.widgetProps&&_this.props.widgetProps.items;if(keyValueList)if("string"==typeof keyValueList)try{keyValueList=JSON.parse(keyValueList),_this.keyValueList=keyValueList&&keyValueList.length>0?keyValueList:_this.keyValueList}catch(err){console.error(err.message)}else _this.keyValueList=keyValueList&&keyValueList.length>0?keyValueList:_this.keyValueList;return _this.keyify=_this.keyify.bind(_this),_this.state={keyValueLists:_this.keyValueList,dirty:!1},_this.removeSpecialCharacters=_this.removeSpecialCharacters.bind(_this),_this.updateWidgetProps=_this.updateWidgetProps.bind(_this),_this}return _inherits(_SrsKeyValuePair_,_React$Component),_createClass(_SrsKeyValuePair_,[{key:"updateWidgetProps",value:function(updatedList){if(this.props.widgetProps){var widgetProps=Object.assign({},this.props.widgetProps);widgetProps.value=updatedList,this.props.updateStore({updates:{widgetProps:widgetProps}})}}},{key:"removeSpecialCharacters",value:function(val){return val.replace(/[^a-zA-Z0-9]/g,"_")}},{key:"componentDidUpdate",value:function(prevProps,prevState){if(!_.isEqual(prevProps.items,this.props.items)){var keyValueList=this.props.items?JSON.parse(this.props.items):this.props.widgetProps&&this.props.widgetProps.items?this.props.widgetProps.items:[{name:"",value:""}];this.props.updateStore&&this.props.updateStore({updates:{value:keyValueList}}),keyValueList=keyValueList&&0!=keyValueList.length?keyValueList:[{name:"",value:""}],this.setState({keyValueLists:keyValueList})}}},{key:"keyify",value:function(obj){var _this2=this,prefix=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(obj).reduce(function(res,el){return Array.isArray(obj[el])?res:"object"==typeof obj[el]&&null!==obj[el]?obj[el]?[].concat(_toConsumableArray(res),_toConsumableArray(_this2.keyify(obj[el],prefix+el+"@@"))):res:[].concat(_toConsumableArray(res),[prefix+el])},[])}},{key:"render",value:function(){var _this3=this,keyValueElementList=[],keyList=null,keySelectItems=null,valueList=null,valueSelectItems=null,keyNestedSelectItems=null,valueNestedSelectItems=null,keyLabels=null,valueLabels=null;if(this.props.choices){var choices=JSON.parse(this.props.choices);if(valueList=choices.valueList,keyList=choices.keyList)if(Array.isArray(keyList))(keySelectItems=[]).push(React.createElement(SelectItem,{value:"",text:"Select a key"})),(keyList=keyList.sort(function(a,b){return a<b?-1:a>b?1:0})).map(function(keyItem){return keySelectItems.push(React.createElement(SelectItem,{value:keyItem.name,text:keyItem.value}))});else{keyNestedSelectItems={},keyLabels=[];for(var keyNestedLabels=this.props.keylabels&&JSON.parse(this.props.keylabels);keyNestedLabels&&Object.keys(keyNestedLabels).length>0;){var labelKey=Object.keys(keyNestedLabels)[0];keyLabels.push(labelKey),keyNestedLabels=keyNestedLabels[labelKey]}var listOfKeys=this.keyify(keyList),uniqueSelectItems={};keyLabels&&keyLabels.map(function(labelName,indx){keyNestedSelectItems[labelName]={},keyNestedSelectItems[labelName].no_parent=[],keyNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:"",text:"Select a value"})),listOfKeys&&listOfKeys.map(function(keyName){var targetKeyVal=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx]:keyName;if(targetKeyVal)if(0==indx)uniqueSelectItems[labelName]=uniqueSelectItems[labelName]||{},uniqueSelectItems[labelName].no_parent=uniqueSelectItems[labelName].no_parent||[],-1==uniqueSelectItems[labelName].no_parent.indexOf(targetKeyVal)&&(keyNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),uniqueSelectItems[labelName].no_parent.push(targetKeyVal));else{var parentName=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx-1]:"";parentName&&(uniqueSelectItems[labelName]=uniqueSelectItems[labelName]||{},uniqueSelectItems[labelName][parentName]=uniqueSelectItems[labelName][parentName]||[],-1==uniqueSelectItems[labelName][parentName].indexOf(targetKeyVal)&&(keyNestedSelectItems[labelName][parentName]=keyNestedSelectItems[labelName][parentName]||[React.createElement(SelectItem,{value:"",text:"Select a value"})],keyNestedSelectItems[labelName][parentName].push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),uniqueSelectItems[labelName][parentName].push(targetKeyVal)))}})})}if(valueList)if(Array.isArray(valueList))(valueSelectItems=[]).push(React.createElement(SelectItem,{value:"",text:"Select a value"})),(valueList=valueList.sort(function(a,b){return a<b?-1:a>b?1:0})).map(function(valueItem){return valueSelectItems.push(React.createElement(SelectItem,{value:valueItem.name,text:valueItem.value}))});else{valueNestedSelectItems={},valueLabels=[];for(var valueNestedLabels=this.props.valuelabels&&JSON.parse(this.props.valuelabels);valueNestedLabels&&Object.keys(valueNestedLabels).length>0;){var _labelKey=Object.keys(valueNestedLabels)[0];valueLabels.push(_labelKey),valueNestedLabels=valueNestedLabels[_labelKey]}var _listOfKeys=this.keyify(valueList),_uniqueSelectItems={};valueLabels&&valueLabels.map(function(labelName,indx){valueNestedSelectItems[labelName]={},valueNestedSelectItems[labelName].no_parent=[],valueNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:"",text:"Select a value"})),_listOfKeys&&_listOfKeys.map(function(keyName){var targetKeyVal=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx]:keyName;if(targetKeyVal)if(0==indx)_uniqueSelectItems[labelName]=_uniqueSelectItems[labelName]||{},_uniqueSelectItems[labelName].no_parent=_uniqueSelectItems[labelName].no_parent||[],-1==_uniqueSelectItems[labelName].no_parent.indexOf(targetKeyVal)&&(valueNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),_uniqueSelectItems[labelName].no_parent.push(targetKeyVal));else{var parentName=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx-1]:"";parentName&&(_uniqueSelectItems[labelName]=_uniqueSelectItems[labelName]||{},_uniqueSelectItems[labelName][parentName]=_uniqueSelectItems[labelName][parentName]||[],-1==_uniqueSelectItems[labelName][parentName].indexOf(targetKeyVal)&&(valueNestedSelectItems[labelName][parentName]=valueNestedSelectItems[labelName][parentName]||[React.createElement(SelectItem,{value:"",text:"Select a value"})],valueNestedSelectItems[labelName][parentName].push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),_uniqueSelectItems[labelName][parentName].push(targetKeyVal)))}})})}}return this.state.keyValueLists.forEach(function(pair,i){var keyValueelement=React.createElement("div",{style:{display:"inline-flex"}},keyList&&0!=keyList.length?Array.isArray(keyList)?React.createElement(Select,{hideLabel:!0,onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.name=e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists}),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}}),_this3.updateWidgetProps(newKeyValueLists)},defaultValue:pair.name,value:pair.name},keySelectItems):keyLabels&&keyLabels.map(function(labelName,labelIndx){var pairValues=pair.value&&"string"==typeof pair.value?JSON.parse(pair.value):pair.value;return pairValues=pairValues||[],0==labelIndx||pairValues&&pairValues.length>=labelIndx&&keyNestedSelectItems[labelName]&&keyNestedSelectItems[labelName][pair.value[labelIndx-1]]?React.createElement(Select,{hideLabel:!0,style:{marginLeft:"1rem",width:20},onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=keyValueItem.value||[],keyValueItem.value=keyValueItem.value.reverse().slice(keyValueItem.value.length-labelIndx).reverse(),keyValueItem.value.push(e.target.value))}),_this3.setState({keyValueLists:newKeyValueLists}),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}}),_this3.updateWidgetProps(newKeyValueLists)},defaultValue:pairValues&&pairValues.length>labelIndx?pairValues[labelIndx]:"",value:pairValues&&pairValues.length>labelIndx?pairValues[labelIndx]:""},keyNestedSelectItems[labelName][0==labelIndx?"no_parent":pairValues[labelIndx-1]]):null}):React.createElement(TextInput,{placeholder:_this3.props.placeholder_name||"Enter Name...",onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.name=_this3.props.trim_name?_this3.removeSpecialCharacters(e.target.value):e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists,dirty:!0})},onBlur:function(){if(_this3.state.dirty){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}}),_this3.updateWidgetProps(newKeyValueLists),_this3.setState({dirty:!1})}},defaultValue:pair.name,value:pair.name}),valueList&&0!=valueList.length?Array.isArray(valueList)?React.createElement(Select,{hideLabel:!0,style:{marginLeft:"1rem",width:20},onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists}),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})},defaultValue:pair.value,value:pair.value},valueSelectItems):valueLabels&&valueLabels.map(function(labelName,labelIndx){var pairValues=pair.value&&"string"==typeof pair.value?JSON.parse(pair.value):pair.value;return pairValues=pairValues||[],0==labelIndx||pairValues&&pairValues.length>=labelIndx&&valueNestedSelectItems[labelName]&&valueNestedSelectItems[labelName][pairValues[labelIndx-1]]?React.createElement(Select,{hideLabel:!0,style:{marginLeft:"1rem",width:20},onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists),readyToSave=!0;newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=keyValueItem.value&&"string"==typeof keyValueItem.value?JSON.parse(keyValueItem.value):keyValueItem.value,keyValueItem.value=keyValueItem.value||[],keyValueItem.value=keyValueItem.value.reverse().slice(keyValueItem.value.length-labelIndx).reverse(),keyValueItem.value.push(e.target.value)),readyToSave=readyToSave?!!keyValueItem.name&&keyValueItem.value.length==valueLabels.length:readyToSave}),_this3.setState({keyValueLists:newKeyValueLists}),readyToSave&&_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}}),_this3.updateWidgetProps(newKeyValueLists)},defaultValue:pairValues&&pairValues.length>labelIndx?pair.value[labelIndx]:"",value:pairValues&&pairValues.length>labelIndx?pairValues[labelIndx]:""},valueNestedSelectItems[labelName][0==labelIndx?"no_parent":pairValues[labelIndx-1]]):null}):React.createElement(TextInput,{style:{marginLeft:"1rem"},placeholder:_this3.props.placeholder_value||"Enter Value...",onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=_this3.props.trim_value?_this3.removeSpecialCharacters(e.target.value):e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists})},onBlur:function(){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists),readyToSave=!0;newKeyValueLists.map(function(keyValueItem,indx){readyToSave=readyToSave?!!keyValueItem.name:readyToSave}),readyToSave&&_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}}),_this3.updateWidgetProps(newKeyValueLists)},defaultValue:pair.value,value:pair.value}),_this3.state.keyValueLists.length>0?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);(newKeyValueLists=(newKeyValueLists=newKeyValueLists||[{name:"",value:""}]).filter(function(item,indx){return indx!=i}))&&0!=newKeyValueLists.length||(newKeyValueLists=[{name:"",value:""}]),_this3.setState({keyValueLists:newKeyValueLists}),_this3.updateWidgetProps(newKeyValueLists),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})}}):null,React.createElement(AddAlt20,{onClick:function(){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);(newKeyValueLists=newKeyValueLists||[{name:"",value:""}]).length;newKeyValueLists.push({name:"",value:""}),_this3.setState({keyValueLists:newKeyValueLists})}}));keyValueElementList.push(keyValueelement)}),React.createElement("div",{style:{display:"inline-grid",float:"left"}},React.createElement("label",{className:"bx--label",style:{display:"flex"}},this.props.label||this.props.widgetProps&&this.props.widgetProps.Label||"KeyValuePair"),keyValueElementList)}}]),_SrsKeyValuePair_}(React.Component),_export("SrsKeyValuePair",SrsKeyValuePair=function(props){return _SrsKeyValuePair_}),_export("SrsKeyValuePair",SrsKeyValuePair)}}}),System.register("component/studio/SrsLink.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Link,_,_SrsLink_,SrsLink,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Link=_carbonComponentsReact.Link},function(_lodashClonedeep){_lodashClonedeep.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsLink_=function(_React$Component){function _SrsLink_(props){_classCallCheck(this,_SrsLink_);var _this=_possibleConstructorReturn(this,(_SrsLink_.__proto__||Object.getPrototypeOf(_SrsLink_)).call(this,props));return _this.state={reload:!1},_this.onClick=_this.onClick.bind(_this),_this}return _inherits(_SrsLink_,_React$Component),_createClass(_SrsLink_,[{key:"onClick",value:function(e){!this.props.widgetProps||"true"!=this.props.widgetProps.NavigateToURL&&1!=this.props.widgetProps.NavigateToURL||navigateTo(this.props.widgetProps.HREF)}},{key:"componentDidUpdate",value:function(prevProps){this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&(prevProps.widgetProps.value!=this.props.widgetProps.value?this.setState({inputValue:this.props.widgetProps.value}):this.setState({reload:!this.state.reload}))}},{key:"render",value:function(){var additionalProps={};return this.props.widgetProps&&this.props.widgetProps.Inline&&(additionalProps.inline=!0),React.createElement("div",{className:"srs-prem-container"},React.createElement(Link,_extends({styles:this.props.widgetProps&&this.props.widgetProps.Styles?this.props.widgetProps.Styles:{},href:this.props.widgetProps?this.props.widgetProps.HREF:"#"},additionalProps,{onClick:this.onClick}),this.props.widgetProps?this.props.widgetProps.Label:"Link"))}}]),_SrsLink_}(React.Component),_export("SrsLink",SrsLink=function(props){return _SrsLink_}),_export("SrsLink",SrsLink),_export("default",SrsLink),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsLink/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Link,_,_SrsLink_,SrsLink;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Link=_carbonComponentsReact.Link},function(_lodashClonedeep){_lodashClonedeep.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsLink_=function(_React$Component){function _SrsLink_(props){_classCallCheck(this,_SrsLink_);var _this=_possibleConstructorReturn(this,(_SrsLink_.__proto__||Object.getPrototypeOf(_SrsLink_)).call(this,props));return _this.state={reload:!1},_this.onClick=_this.onClick.bind(_this),_this}return _inherits(_SrsLink_,_React$Component),_createClass(_SrsLink_,[{key:"onClick",value:function(e){!this.props.widgetProps||"true"!=this.props.widgetProps.NavigateToURL&&1!=this.props.widgetProps.NavigateToURL||navigateTo(this.props.widgetProps.HREF)}},{key:"componentDidUpdate",value:function(prevProps){this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&(prevProps.widgetProps.value!=this.props.widgetProps.value?this.setState({inputValue:this.props.widgetProps.value}):this.setState({reload:!this.state.reload}))}},{key:"render",value:function(){var additionalProps={};return this.props.widgetProps&&this.props.widgetProps.Inline&&(additionalProps.inline=!0),React.createElement("div",{className:"srs-prem-container"},React.createElement(Link,_extends({styles:this.props.widgetProps&&this.props.widgetProps.Styles?this.props.widgetProps.Styles:{},href:this.props.widgetProps?this.props.widgetProps.HREF:"#"},additionalProps,{onClick:this.onClick}),this.props.widgetProps?this.props.widgetProps.Label:"Link"))}}]),_SrsLink_}(React.Component),_export("SrsLink",SrsLink=function(props){return _SrsLink_}),_export("SrsLink",SrsLink)}}}),System.register("component/studio/SrsLoading.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Loading,_SrsLoading_,SrsLoading,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Loading=_carbonComponentsReact.Loading}],execute:function(){_SrsLoading_=function(_React$Component){function _SrsLoading_(){return _classCallCheck(this,_SrsLoading_),_possibleConstructorReturn(this,(_SrsLoading_.__proto__||Object.getPrototypeOf(_SrsLoading_)).apply(this,arguments))}return _inherits(_SrsLoading_,_React$Component),_createClass(_SrsLoading_,[{key:"render",value:function(){return React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/SrsLoading/Style.css");'),React.createElement(Loading,{small:!(!this.props.small||"true"!=this.props.small),withOverlay:!1,className:"some-class"}))}}]),_SrsLoading_}(React.Component),_export("SrsLoading",SrsLoading=function(props){return _SrsLoading_}),_export("SrsLoading",SrsLoading),_export("default",SrsLoading),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsLoading/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Loading,_SrsLoading_,SrsLoading;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Loading=_carbonComponentsReact.Loading}],execute:function(){_SrsLoading_=function(_React$Component){function _SrsLoading_(){return _classCallCheck(this,_SrsLoading_),_possibleConstructorReturn(this,(_SrsLoading_.__proto__||Object.getPrototypeOf(_SrsLoading_)).apply(this,arguments))}return _inherits(_SrsLoading_,_React$Component),_createClass(_SrsLoading_,[{key:"render",value:function(){return React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/SrsLoading/Style.css");'),React.createElement(Loading,{small:!(!this.props.small||"true"!=this.props.small),withOverlay:!1,className:"some-class"}))}}]),_SrsLoading_}(React.Component),_export("SrsLoading",SrsLoading=function(props){return _SrsLoading_}),_export("SrsLoading",SrsLoading)}}}),System.register("component/studio/SrsMultiButton.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,SelectItemGroup,_SrsMultiButton_,SrsMultiButton,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,SelectItemGroup=_carbonComponentsReact.SelectItemGroup}],execute:function(){_SrsMultiButton_=function(_React$Component){function _SrsMultiButton_(props){_classCallCheck(this,_SrsMultiButton_);var _this=_possibleConstructorReturn(this,(_SrsMultiButton_.__proto__||Object.getPrototypeOf(_SrsMultiButton_)).call(this,props));return _this.selectElement=null,_this}return _inherits(_SrsMultiButton_,_React$Component),_createClass(_SrsMultiButton_,[{key:"render",value:function(){var _this2=this,_props=this.props,size=(_props.label,_props.className,_props.handleOnClick,_props.rules,_props.level,_props.size),buttonOptions=(_props.style,this.props.widgetProps&&this.props.widgetProps.Size&&this.props.widgetProps.Size,this.props.widgetProps&&this.props.widgetProps.ButtonAction&&this.props.widgetProps.ButtonAction,this.props.containerStyles&&this.props.containerStyles,React.createElement(Select,{ref:function(input){return _this2.selectElement=input},id:"select-1",hideLabel:"true",defaultValue:"placeholder-item",style:{backgroundColor:"#0062ff",color:"white"}},React.createElement(SelectItem,{disabled:!0,hidden:!0,value:"placeholder-item",text:"Actions"}),React.createElement(SelectItemGroup,{label:"Category 1"},React.createElement(SelectItem,{value:"option-1",text:"Option 1"}),React.createElement(SelectItem,{value:"option-2",text:"Option 2"})),React.createElement(SelectItemGroup,{label:"Category 2"},React.createElement(SelectItem,{value:"option-3",text:"Option 3"}),React.createElement(SelectItem,{value:"option-4",text:"Option 4"}))));return React.createElement("div",{className:"MultiSelect"},buttonOptions)}}]),_SrsMultiButton_}(React.Component),_export("SrsMultiButton",SrsMultiButton=function(props){return WrappedComponent=_SrsMultiButton_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsMultiButton",SrsMultiButton),_export("default",SrsMultiButton),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsMultiSelect.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MultiSelect,_SrsMultiSelect_,SrsMultiSelect,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){MultiSelect=_carbonComponentsReact.MultiSelect}],execute:function(){_SrsMultiSelect_=function(_React$Component){function _SrsMultiSelect_(props){_classCallCheck(this,_SrsMultiSelect_);var _this=_possibleConstructorReturn(this,(_SrsMultiSelect_.__proto__||Object.getPrototypeOf(_SrsMultiSelect_)).call(this,props));return _this.state={value:""},_this.changeValue=_this.changeValue.bind(_this),_this}return _inherits(_SrsMultiSelect_,_React$Component),_createClass(_SrsMultiSelect_,[{key:"changeValue",value:function(value){console.log(value),this.setState({value:value})}},{key:"render",value:function(){var _this2=this;return React.createElement("div",null,React.createElement(MultiSelect.Filterable,{className:"hour-setMinute",label:"Minute",placeholder:"Filter...",items:Array(59).fill().map(function(e,i){return{text:(i+1).toString(),value:i+1}}),itemToString:function(item){return item?item.text:""},onChange:function(value){_this2.changeValue(value.selectedItems)}}))}}]),_SrsMultiSelect_}(React.Component),_export("SrsMultiSelect",SrsMultiSelect=function(props){return _SrsMultiSelect_}),_export("SrsMultiSelect",SrsMultiSelect),_export("default",SrsMultiSelect),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsMultiSelect/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MultiSelect,_SrsMultiSelect_,SrsMultiSelect;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){MultiSelect=_carbonComponentsReact.MultiSelect}],execute:function(){_SrsMultiSelect_=function(_React$Component){function _SrsMultiSelect_(props){_classCallCheck(this,_SrsMultiSelect_);var _this=_possibleConstructorReturn(this,(_SrsMultiSelect_.__proto__||Object.getPrototypeOf(_SrsMultiSelect_)).call(this,props));return _this.state={value:""},_this.changeValue=_this.changeValue.bind(_this),_this}return _inherits(_SrsMultiSelect_,_React$Component),_createClass(_SrsMultiSelect_,[{key:"changeValue",value:function(value){console.log(value),this.setState({value:value})}},{key:"render",value:function(){var _this2=this;return React.createElement("div",null,React.createElement(MultiSelect.Filterable,{className:"hour-setMinute",label:"Minute",placeholder:"Filter...",items:Array(59).fill().map(function(e,i){return{text:(i+1).toString(),value:i+1}}),itemToString:function(item){return item?item.text:""},onChange:function(value){_this2.changeValue(value.selectedItems)}}))}}]),_SrsMultiSelect_}(React.Component),_export("SrsMultiSelect",SrsMultiSelect=function(props){return _SrsMultiSelect_}),_export("SrsMultiSelect",SrsMultiSelect)}}}),System.register("component/studio/SrsNavigateBtn.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/SrsButton/Definition.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SrsButton,_SrsNavigateBtn_,SrsNavigateBtn,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentStudioSrsButtonDefinitionJs){SrsButton=_componentStudioSrsButtonDefinitionJs.SrsButton}],execute:function(){_SrsNavigateBtn_=function(_React$Component){function _SrsNavigateBtn_(){return _classCallCheck(this,_SrsNavigateBtn_),_possibleConstructorReturn(this,(_SrsNavigateBtn_.__proto__||Object.getPrototypeOf(_SrsNavigateBtn_)).apply(this,arguments))}return _inherits(_SrsNavigateBtn_,_React$Component),_createClass(_SrsNavigateBtn_,[{key:"render",value:function(){var urlProp=this.props.widgetProps&&this.props.widgetProps.URL,pageProp=this.props.widgetProps&&this.props.widgetProps.Page,SrsBtn=SrsButton({URL:urlProp,Page:pageProp}),widgetProps=this.props.widgetProps;return React.createElement(SrsBtn,{widgetProps:widgetProps})}}]),_SrsNavigateBtn_}(React.Component),_export("SrsNavigateBtn",SrsNavigateBtn=function(props){return _SrsNavigateBtn_}),_export("SrsNavigateBtn",SrsNavigateBtn),_export("default",SrsNavigateBtn),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsButton/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/link/32"],function(_export,_context3){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,Link,_SrsButton_,SrsButton;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button},function(_carbonIconsReactLibLink){Link=_carbonIconsReactLibLink.default}],execute:function(){_SrsButton_=function(_React$Component){function _SrsButton_(props){_classCallCheck(this,_SrsButton_);var _this=_possibleConstructorReturn(this,(_SrsButton_.__proto__||Object.getPrototypeOf(_SrsButton_)).call(this,props));return _this.state={icon:Link},_this}return _inherits(_SrsButton_,_React$Component),_createClass(_SrsButton_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var icon;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.props.widgetProps||!this.props.widgetProps.IconPath){_context.next=10;break}return _context.prev=1,_context.next=4,System.import("@carbon/icons-react/lib/"+this.props.widgetProps.IconPath);case 4:icon=_context.sent,this.setState({icon:icon}),_context.next=10;break;case 8:_context.prev=8,_context.t0=_context.catch(1);case 10:case"end":return _context.stop()}},_callee,this,[[1,8]])}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){var icon;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.props.widgetProps||!prevProps.widgetProps||prevProps.widgetProps.IconPath==this.props.widgetProps.IconPath){_context2.next=10;break}return _context2.prev=1,_context2.next=4,System.import("@carbon/icons-react/lib/"+this.props.widgetProps.IconPath);case 4:icon=_context2.sent,this.setState({icon:icon}),_context2.next=10;break;case 8:_context2.prev=8,_context2.t0=_context2.catch(1);case 10:case"end":return _context2.stop()}},_callee2,this,[[1,8]])}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"render",value:function(){var _props=this.props,label=_props.label,handleOnClick=(_props.className,_props.handleOnClick),size=(_props.rules,_props.level,_props.size),props=(_props.style,{size:this.props.widgetProps&&this.props.widgetProps.Size?this.props.widgetProps.Size:size||"large"});handleOnClick&&(props.onClick=handleOnClick),this.props.widgetProps&&("true"==this.props.widgetProps.IconOnly||1==this.props.widgetProps.IconOnly)&&this.props.widgetProps.IconPath&&(props.hasIconOnly=!0,props.iconDescription=this.props.widgetProps.Label,props.renderIcon=this.state.icon,props.tabIndex=0,props.tooltipAlignment="center",props.tooltipPosition="top");this.props.widgetProps&&this.props.widgetProps.ButtonAction&&this.props.widgetProps.ButtonAction;var styles=this.props.widgetProps&&this.props.widgetProps.Styles&&"string"==typeof this.props.widgetProps.Styles?JSON.parse(this.props.widgetProps.Styles):{},containerStyles=this.props.containerStyles?this.props.containerStyles:{};containerStyles=_extends({backgroundColor:"#0095ff"},containerStyles,styles),props.hasIconOnly&&(containerStyles=_extends({},containerStyles,{backgroundColor:"rgb(0, 149, 255)",minWidth:"inherit",width:"inherit",paddingLeft:"2rem",paddingRight:"1rem"}));var embeddedStyles=null;return this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles)),React.createElement("div",{className:containerStyles&&0!=Object.keys(containerStyles).length?"":"srs-prem-container"},embeddedStyles,props.hasIconOnly?React.createElement(Button,_extends({style:containerStyles},props)):React.createElement(Button,_extends({style:containerStyles},props),label||(this.props.widgetProps&&this.props.widgetProps.Label||"Save")))}}]),_SrsButton_}(React.Component),_export("SrsButton",SrsButton=function(props){return WrappedComponent=_SrsButton_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsButton",SrsButton)}}}),System.register("component/studio/SrsNavigateBtn/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/SrsButton/Definition.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SrsButton,_SrsNavigateBtn_,SrsNavigateBtn;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentStudioSrsButtonDefinitionJs){SrsButton=_componentStudioSrsButtonDefinitionJs.SrsButton}],execute:function(){_SrsNavigateBtn_=function(_React$Component){function _SrsNavigateBtn_(){return _classCallCheck(this,_SrsNavigateBtn_),_possibleConstructorReturn(this,(_SrsNavigateBtn_.__proto__||Object.getPrototypeOf(_SrsNavigateBtn_)).apply(this,arguments))}return _inherits(_SrsNavigateBtn_,_React$Component),_createClass(_SrsNavigateBtn_,[{key:"render",value:function(){var urlProp=this.props.widgetProps&&this.props.widgetProps.URL,pageProp=this.props.widgetProps&&this.props.widgetProps.Page,SrsBtn=SrsButton({URL:urlProp,Page:pageProp}),widgetProps=this.props.widgetProps;return React.createElement(SrsBtn,{widgetProps:widgetProps})}}]),_SrsNavigateBtn_}(React.Component),_export("SrsNavigateBtn",SrsNavigateBtn=function(props){return _SrsNavigateBtn_}),_export("SrsNavigateBtn",SrsNavigateBtn)}}}),System.register("component/studio/SrsNavigation.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/fade/16","lodash.clonedeep","lodash","carbon-components-react","component/studio/SrsMultiButton/Definition.js"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,_,SideNav,SideNavItems,SideNavMenu,SideNavMenuItem,SrsMultiButton,_SrsNavigation_,SrsNavigation,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibFade){_carbonIconsReactLibFade.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default},function(_carbonComponentsReact){SideNav=_carbonComponentsReact.SideNav,SideNavItems=_carbonComponentsReact.SideNavItems,SideNavMenu=_carbonComponentsReact.SideNavMenu,SideNavMenuItem=_carbonComponentsReact.SideNavMenuItem,_carbonComponentsReact.SideNavLink},function(_componentStudioSrsMultiButtonDefinitionJs){SrsMultiButton=_componentStudioSrsMultiButtonDefinitionJs.SrsMultiButton}],execute:function(){_SrsNavigation_=function(_React$Component){function _SrsNavigation_(props){_classCallCheck(this,_SrsNavigation_);var _this=_possibleConstructorReturn(this,(_SrsNavigation_.__proto__||Object.getPrototypeOf(_SrsNavigation_)).call(this,props));return _this.state={navTree:{name:"Main",expand:!0,items:[]}},_this.getItemsEl=_this.getItemsEl.bind(_this),$ele&&$ele.registerElement("SideNavLink","studio","React"),_this.mode=_this.props.widgetProps&&_this.props.widgetProps.Mode?_this.props.widgetProps.Mode:"navigate",_this}return _inherits(_SrsNavigation_,_React$Component),_createClass(_SrsNavigation_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var parentId,navTreeItems;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return parentId=this.props.widgetProps?this.props.widgetProps.NavigationParent:this.props.parentId,_context.next=3,$script.runAtServer("mmf.getNavTree",{parentId:parentId});case 3:navTreeItems=_context.sent,this.setState({navTree:{name:"Main",expand:!0,items:navTreeItems}});case 5:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps){var parentId,navTreeItems,updatedWidgetProps;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.props.widgetProps||prevProps.widgetProps.NavigationParent==this.props.widgetProps.NavigationParent){_context2.next=6;break}return parentId=this.props.widgetProps?this.props.widgetProps.NavigationParent:this.props.parentId,_context2.next=4,$script.runAtServer("mmf.getNavTree",{parentId:parentId});case 4:navTreeItems=_context2.sent,this.setState({navTree:{name:"Main",expand:!0,items:navTreeItems}});case 6:_.isEqual(this.props.activeLink,prevProps.activeLink)||((updatedWidgetProps=cloneDeep(this.props.widgetProps)).ActiveLink=this.props.activeLink,this.props.updateStore({updates:{widgetProps:updatedWidgetProps}}));case 7:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"getItemsEl",value:function(items,depth){var _this2=this,itemsEl=[];return items&&items.length>0?(items.map(function(item){if("menu"==item.type){var innerItemEl=_this2.getItemsEl(item.items,depth+1);itemsEl.push(React.createElement(SideNavMenu,{style:{paddingLeft:20*depth},defaultExpanded:!0,title:item.name},innerItemEl))}else"menuitem"==item.type&&itemsEl.push(React.createElement(SideNavMenuItem,{element:"side-nav-link",widgetid:_this2.props.widgetid,href:item.url,mode:_this2.mode,name:item.name},item.name))}),itemsEl):itemsEl}},{key:"render",value:function(){var name="Main",expand=!0,items=[];this.state.navTree&&(name=this.state.navTree.name,expand=this.state.navTree.expand,items=this.state.navTree.items);var itemsEl=this.getItemsEl(items,1),contentEl=null;if("true"==this.props.onecolumn){var multiBtnProps={};this.props.widgetProps&&this.props.widgetProps.OneColumnAnchor&&(multiBtnProps.onColumnanchor="true");var MultiBtn=SrsMultiButton();contentEl=React.createElement(MultiBtn,multiBtnProps)}else contentEl=React.createElement(SideNav,{"aria-label":name,expanded:expand},React.createElement(SideNavItems,null,itemsEl));return React.createElement("div",null," ",contentEl," ")}}]),_SrsNavigation_}(React.Component),_export("SrsNavigation",SrsNavigation=function(props){return _SrsNavigation_}),_export("SrsNavigation",SrsNavigation),_export("default",SrsNavigation),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"activeLink",AccessPath:"navigation.${widgetid}",DefaultValue:'{"navigation": {"${widgetid}": {}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsNavigation/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/fade/16","lodash.clonedeep","lodash","carbon-components-react","component/studio/SrsMultiButton/Definition.js"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,_,SideNav,SideNavItems,SideNavMenu,SideNavMenuItem,SrsMultiButton,_SrsNavigation_,SrsNavigation;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibFade){_carbonIconsReactLibFade.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default},function(_carbonComponentsReact){SideNav=_carbonComponentsReact.SideNav,SideNavItems=_carbonComponentsReact.SideNavItems,SideNavMenu=_carbonComponentsReact.SideNavMenu,SideNavMenuItem=_carbonComponentsReact.SideNavMenuItem,_carbonComponentsReact.SideNavLink},function(_componentStudioSrsMultiButtonDefinitionJs){SrsMultiButton=_componentStudioSrsMultiButtonDefinitionJs.SrsMultiButton}],execute:function(){_SrsNavigation_=function(_React$Component){function _SrsNavigation_(props){_classCallCheck(this,_SrsNavigation_);var _this=_possibleConstructorReturn(this,(_SrsNavigation_.__proto__||Object.getPrototypeOf(_SrsNavigation_)).call(this,props));return _this.state={navTree:{name:"Main",expand:!0,items:[]}},_this.getItemsEl=_this.getItemsEl.bind(_this),$ele&&$ele.registerElement("SideNavLink","studio","React"),_this.mode=_this.props.widgetProps&&_this.props.widgetProps.Mode?_this.props.widgetProps.Mode:"navigate",_this}return _inherits(_SrsNavigation_,_React$Component),_createClass(_SrsNavigation_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var parentId,navTreeItems;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return parentId=this.props.widgetProps?this.props.widgetProps.NavigationParent:this.props.parentId,_context.next=3,$script.runAtServer("mmf.getNavTree",{parentId:parentId});case 3:navTreeItems=_context.sent,this.setState({navTree:{name:"Main",expand:!0,items:navTreeItems}});case 5:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps){var parentId,navTreeItems,updatedWidgetProps;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.props.widgetProps||prevProps.widgetProps.NavigationParent==this.props.widgetProps.NavigationParent){_context2.next=6;break}return parentId=this.props.widgetProps?this.props.widgetProps.NavigationParent:this.props.parentId,_context2.next=4,$script.runAtServer("mmf.getNavTree",{parentId:parentId});case 4:navTreeItems=_context2.sent,this.setState({navTree:{name:"Main",expand:!0,items:navTreeItems}});case 6:_.isEqual(this.props.activeLink,prevProps.activeLink)||((updatedWidgetProps=cloneDeep(this.props.widgetProps)).ActiveLink=this.props.activeLink,this.props.updateStore({updates:{widgetProps:updatedWidgetProps}}));case 7:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"getItemsEl",value:function(items,depth){var _this2=this,itemsEl=[];return items&&items.length>0?(items.map(function(item){if("menu"==item.type){var innerItemEl=_this2.getItemsEl(item.items,depth+1);itemsEl.push(React.createElement(SideNavMenu,{style:{paddingLeft:20*depth},defaultExpanded:!0,title:item.name},innerItemEl))}else"menuitem"==item.type&&itemsEl.push(React.createElement(SideNavMenuItem,{element:"side-nav-link",widgetid:_this2.props.widgetid,href:item.url,mode:_this2.mode,name:item.name},item.name))}),itemsEl):itemsEl}},{key:"render",value:function(){var name="Main",expand=!0,items=[];this.state.navTree&&(name=this.state.navTree.name,expand=this.state.navTree.expand,items=this.state.navTree.items);var itemsEl=this.getItemsEl(items,1),contentEl=null;if("true"==this.props.onecolumn){var multiBtnProps={};this.props.widgetProps&&this.props.widgetProps.OneColumnAnchor&&(multiBtnProps.onColumnanchor="true");var MultiBtn=SrsMultiButton();contentEl=React.createElement(MultiBtn,multiBtnProps)}else contentEl=React.createElement(SideNav,{"aria-label":name,expanded:expand},React.createElement(SideNavItems,null,itemsEl));return React.createElement("div",null," ",contentEl," ")}}]),_SrsNavigation_}(React.Component),_export("SrsNavigation",SrsNavigation=function(props){return _SrsNavigation_}),_export("SrsNavigation",SrsNavigation)}}}),System.register("component/studio/SrsNumber.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,NumberInput,_SrsNumber_,SrsNumber,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){NumberInput=_carbonComponentsReact.NumberInput}],execute:function(){_SrsNumber_=function(_React$Component){function _SrsNumber_(props){_classCallCheck(this,_SrsNumber_);var _this=_possibleConstructorReturn(this,(_SrsNumber_.__proto__||Object.getPrototypeOf(_SrsNumber_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsNumber_,_React$Component),_createClass(_SrsNumber_,[{key:"handleChange",value:function(e){if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);controlProps[this.props.controlname]=e.imaginaryTarget.value,this.props.updateStore({updates:{controlProps:controlProps}})}}else if(this.props.iscellcontrol+""=="true"){var controlId=this.props.controlid.replaceAll("_dot_","."),controlIdParts=(controlId=controlId.replace("cell_","")).split("."),formControlName=controlIdParts[0],rowIndx=controlIdParts[1],columnName=controlIdParts[2],cellName=columnName.split("_")[0],parentWidgetId=columnName.split("_")[1],controls=this.props.controls,formControlKey=this.props.pageid+this.props.pagesuffix+"_"+parentWidgetId;controls[formControlKey]=controls[formControlKey]||{},controls[formControlKey][formControlName]=controls[formControlKey][formControlName]||[],controls[formControlKey][formControlName][rowIndx]=controls[formControlKey][formControlName][rowIndx]||{},controls[formControlKey][formControlName][rowIndx][cellName]=e.imaginaryTarget.value,controls[formControlKey][formControlName][rowIndx].__isCellEdited__=Date.now(),this.props.updateStore({updates:{controls:controls}})}else if(this.props.widgetProps){var updatedProps=this.props.widgetProps;updatedProps.value=e.imaginaryTarget.value,this.props.updateStore({updates:{widgetProps:updatedProps}})}}},{key:"render",value:function(){var fieldValue=this.props.value||this.props.widgetProps&&this.props.widgetProps.value||this.props.widgetProps&&this.props.widgetProps.DefaultValue,additionalProps={};!this.props.widgetProps||"true"!=this.props.widgetProps.LightMode&&1!=this.props.widgetProps.LightMode?this.props.light+""=="true"&&(additionalProps.light=!0):additionalProps.light=!0;var embeddedStyles=null;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles));var styles={};try{styles=this.props.widgetProps&&this.props.widgetProps.styles?JSON.parse(this.props.widgetProps.styles):{}}catch(err){}var labelText=this.props.widgetProps&&this.props.widgetProps.Label||(this.props.iscellcontrol+""=="true"?"":this.props.label||"Number");return labelText=this.props.required+""=="true"?labelText+" *":labelText,React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,this.props.inlinestyles||""),embeddedStyles,React.createElement(NumberInput,_extends({styles:styles},additionalProps,{disabled:this.props.disabled+""=="true"||this.props.widgetProps&&this.props.widgetProps.ReadOnly+""=="true",className:this.props.widgetProps?this.props.widgetProps.ClassName:"",label:labelText,value:this.props.required+""=="true"?fieldValue+" *":fieldValue,defaultValue:this.props.Defaultvalue||(this.props.widgetProps?this.props.widgetProps.DefaultValue:""),invalid:this.props.required+""=="true"&&!fieldValue,invalidText:this.props.invalidtext||(this.props.widgetProps?this.props.widgetProps.InvalidText:""),helperText:this.props.helpertext||(this.props.widgetProps?this.props.widgetProps.helperText:""),onChange:this.handleChange})))}}]),_SrsNumber_}(React.Component),_export("SrsNumber",SrsNumber=function(props){return _SrsNumber_}),_export("SrsNumber",SrsNumber),_export("default",SrsNumber),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"controlProps",AccessPath:"controls.${pageid}${pagesuffix}_${controlid}",DefaultValue:'{"controls": {"${pageid}${pagesuffix}_${controlid}": {}}}'},{KeyName:"controls",AccessPath:"controls",DefaultValue:'{"controls": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsNumber/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,NumberInput,_SrsNumber_,SrsNumber;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){NumberInput=_carbonComponentsReact.NumberInput}],execute:function(){_SrsNumber_=function(_React$Component){function _SrsNumber_(props){_classCallCheck(this,_SrsNumber_);var _this=_possibleConstructorReturn(this,(_SrsNumber_.__proto__||Object.getPrototypeOf(_SrsNumber_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsNumber_,_React$Component),_createClass(_SrsNumber_,[{key:"handleChange",value:function(e){if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);controlProps[this.props.controlname]=e.imaginaryTarget.value,this.props.updateStore({updates:{controlProps:controlProps}})}}else if(this.props.iscellcontrol+""=="true"){var controlId=this.props.controlid.replaceAll("_dot_","."),controlIdParts=(controlId=controlId.replace("cell_","")).split("."),formControlName=controlIdParts[0],rowIndx=controlIdParts[1],columnName=controlIdParts[2],cellName=columnName.split("_")[0],parentWidgetId=columnName.split("_")[1],controls=this.props.controls,formControlKey=this.props.pageid+this.props.pagesuffix+"_"+parentWidgetId;controls[formControlKey]=controls[formControlKey]||{},controls[formControlKey][formControlName]=controls[formControlKey][formControlName]||[],controls[formControlKey][formControlName][rowIndx]=controls[formControlKey][formControlName][rowIndx]||{},controls[formControlKey][formControlName][rowIndx][cellName]=e.imaginaryTarget.value,controls[formControlKey][formControlName][rowIndx].__isCellEdited__=Date.now(),this.props.updateStore({updates:{controls:controls}})}else if(this.props.widgetProps){var updatedProps=this.props.widgetProps;updatedProps.value=e.imaginaryTarget.value,this.props.updateStore({updates:{widgetProps:updatedProps}})}}},{key:"render",value:function(){var fieldValue=this.props.value||this.props.widgetProps&&this.props.widgetProps.value||this.props.widgetProps&&this.props.widgetProps.DefaultValue,additionalProps={};!this.props.widgetProps||"true"!=this.props.widgetProps.LightMode&&1!=this.props.widgetProps.LightMode?this.props.light+""=="true"&&(additionalProps.light=!0):additionalProps.light=!0;var embeddedStyles=null;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles));var styles={};try{styles=this.props.widgetProps&&this.props.widgetProps.styles?JSON.parse(this.props.widgetProps.styles):{}}catch(err){}var labelText=this.props.widgetProps&&this.props.widgetProps.Label||(this.props.iscellcontrol+""=="true"?"":this.props.label||"Number");return labelText=this.props.required+""=="true"?labelText+" *":labelText,React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,this.props.inlinestyles||""),embeddedStyles,React.createElement(NumberInput,_extends({styles:styles},additionalProps,{disabled:this.props.disabled+""=="true"||this.props.widgetProps&&this.props.widgetProps.ReadOnly+""=="true",className:this.props.widgetProps?this.props.widgetProps.ClassName:"",label:labelText,value:this.props.required+""=="true"?fieldValue+" *":fieldValue,defaultValue:this.props.Defaultvalue||(this.props.widgetProps?this.props.widgetProps.DefaultValue:""),invalid:this.props.required+""=="true"&&!fieldValue,invalidText:this.props.invalidtext||(this.props.widgetProps?this.props.widgetProps.InvalidText:""),helperText:this.props.helpertext||(this.props.widgetProps?this.props.widgetProps.helperText:""),onChange:this.handleChange})))}}]),_SrsNumber_}(React.Component),_export("SrsNumber",SrsNumber=function(props){return _SrsNumber_}),_export("SrsNumber",SrsNumber)}}}),System.register("component/studio/SrsPagination.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Pagination,cloneDeep,_,_SrsPagination_,SrsPagination,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Pagination=_carbonComponentsReact.Pagination},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsPagination_=function(_React$Component){function _SrsPagination_(props){_classCallCheck(this,_SrsPagination_);var _this=_possibleConstructorReturn(this,(_SrsPagination_.__proto__||Object.getPrototypeOf(_SrsPagination_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this.state={reload:!1},_this}return _inherits(_SrsPagination_,_React$Component),_createClass(_SrsPagination_,[{key:"handleChange",value:function(val){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.PageSize=val.pageSize,updatedProps.PageNumber=val.page,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps,this.props)}},{key:"render",value:function(){var _this2=this,self=this,widgetProps={disabled:!1,page:self.props.widgetProps&&self.props.widgetProps.PageNumber?parseInt(self.props.widgetProps.PageNumber):0,totalItems:self.props.widgetProps&&self.props.widgetProps.TotalItems?parseInt(self.props.widgetProps.TotalItems):0,pagesUnknown:!1,backwardText:self.props.widgetProps&&self.props.widgetProps.BackwardLabel?self.props.widgetProps.BackwardLabel:"Previous page",forwardText:self.props.widgetProps&&self.props.widgetProps.ForwardLabel?self.props.widgetProps.ForwardLabel:"Next page",pageSize:self.props.widgetProps&&self.props.widgetProps.PageSize?parseInt(self.props.widgetProps.PageSize):10,itemsPerPageText:self.props.widgetProps&&self.props.widgetProps.ItemsPerPageLabel?self.props.widgetProps.ItemsPerPageLabel:"Items per page:"};return widgetProps.pageSizes=[0*widgetProps.pageSize,1*widgetProps.pageSize,2*widgetProps.pageSize,3*widgetProps.pageSize],React.createElement("div",{className:"srs-pagination"},React.createElement(Pagination,_extends({},widgetProps,{onChange:function(e){_this2.handleChange(e)}})))}}]),_SrsPagination_}(React.Component),_export("SrsPagination",SrsPagination=function(props){return _SrsPagination_}),_export("SrsPagination",SrsPagination),_export("default",SrsPagination),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsPagination/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Pagination,cloneDeep,_,_SrsPagination_,SrsPagination;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Pagination=_carbonComponentsReact.Pagination},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsPagination_=function(_React$Component){function _SrsPagination_(props){_classCallCheck(this,_SrsPagination_);var _this=_possibleConstructorReturn(this,(_SrsPagination_.__proto__||Object.getPrototypeOf(_SrsPagination_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this.state={reload:!1},_this}return _inherits(_SrsPagination_,_React$Component),_createClass(_SrsPagination_,[{key:"handleChange",value:function(val){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.PageSize=val.pageSize,updatedProps.PageNumber=val.page,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps,this.props)}},{key:"render",value:function(){var _this2=this,self=this,widgetProps={disabled:!1,page:self.props.widgetProps&&self.props.widgetProps.PageNumber?parseInt(self.props.widgetProps.PageNumber):0,totalItems:self.props.widgetProps&&self.props.widgetProps.TotalItems?parseInt(self.props.widgetProps.TotalItems):0,pagesUnknown:!1,backwardText:self.props.widgetProps&&self.props.widgetProps.BackwardLabel?self.props.widgetProps.BackwardLabel:"Previous page",forwardText:self.props.widgetProps&&self.props.widgetProps.ForwardLabel?self.props.widgetProps.ForwardLabel:"Next page",pageSize:self.props.widgetProps&&self.props.widgetProps.PageSize?parseInt(self.props.widgetProps.PageSize):10,itemsPerPageText:self.props.widgetProps&&self.props.widgetProps.ItemsPerPageLabel?self.props.widgetProps.ItemsPerPageLabel:"Items per page:"};return widgetProps.pageSizes=[0*widgetProps.pageSize,1*widgetProps.pageSize,2*widgetProps.pageSize,3*widgetProps.pageSize],React.createElement("div",{className:"srs-pagination"},React.createElement(Pagination,_extends({},widgetProps,{onChange:function(e){_this2.handleChange(e)}})))}}]),_SrsPagination_}(React.Component),_export("SrsPagination",SrsPagination=function(props){return _SrsPagination_}),_export("SrsPagination",SrsPagination)}}}),System.register("component/studio/SrsPollData.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-polling","lodash"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ReactPolling,_,_SrsPollData_,SrsPollData,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactPolling){ReactPolling=_reactPolling.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsPollData_=function(_React$Component){function _SrsPollData_(props){_classCallCheck(this,_SrsPollData_);var _this=_possibleConstructorReturn(this,(_SrsPollData_.__proto__||Object.getPrototypeOf(_SrsPollData_)).call(this,props)),interval=_this.props.widgetProps&&_this.props.widgetProps.Internal?parseInt(_this.props.widgetProps.Internal):1e4;return _this.state={interval:interval,status:"stop"},_this.fetchData=_this.fetchData.bind(_this),_this}return _inherits(_SrsPollData_,_React$Component),_createClass(_SrsPollData_,[{key:"fetchData",value:function(){var _ref,_this2=this,self=this;return new Promise((_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(resolve,reject){var scriptName,scriptParams,result,widgetProps;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(scriptName=self.props.widgetProps&&self.props.widgetProps.ScriptName,scriptParams=(scriptParams=self.props.widgetProps&&self.props.widgetProps.ScriptParams)?"string"==typeof scriptParams?JSON.parse(scriptParams):scriptParams:{},!scriptName||"start"!=_this2.state.status){_context.next=13;break}return _context.next=6,$script.runAtServer(scriptName,scriptParams);case 6:result=_context.sent,(widgetProps=Object.assign({},self.props.widgetProps)).ScriptOutput=result,self.props.updateStore({updates:{widgetProps:widgetProps}}),resolve(result),_context.next=14;break;case 13:resolve({});case 14:case"end":return _context.stop()}},_callee,_this2)})),function(_x,_x2){return _ref.apply(this,arguments)}))}},{key:"componentDidUpdate",value:function(prevProps,prevState){var prevPropsClone=Object.assign({},prevProps.widgetProps),thisPropsClone=Object.assign({},this.props.widgetProps);if(delete prevPropsClone.ScriptOutput,delete thisPropsClone.ScriptOutput,!_.isEqual(prevPropsClone,thisPropsClone)){var newState={};if(prevProps.widgetProps.State+""!=this.props.widgetProps.State+""){var pollingState=this.props.widgetProps.State+""=="true";newState.status=pollingState?"start":"stop"}prevProps.widgetProps.Interval!=this.props.widgetProps.Interval&&(newState.interval=parseInt(this.props.widgetProps.Interval)),this.setState(_extends({},newState))}}},{key:"render",value:function(){var self=this;return React.createElement("div",{style:{width:0,height:0}},React.createElement(ReactPolling,{url:"https://example.srste.in/posts",interval:this.state.interval,retryCount:3,onSuccess:function(resp){return!0},onFailure:function(){return console.log("handle failure")},promise:this.fetchData,render:function(_ref2){var startPolling=_ref2.startPolling,stopPolling=_ref2.stopPolling,isPolling=_ref2.isPolling;return"stop"==self.state.status&&isPolling?stopPolling():"start"!=self.state.status||isPolling||startPolling(),null}}))}}]),_SrsPollData_}(React.Component),_export("SrsPollData",SrsPollData=function(props){return _SrsPollData_}),_export("SrsPollData",SrsPollData),_export("default",SrsPollData),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsPollData/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-polling","lodash"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ReactPolling,_,_SrsPollData_,SrsPollData;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactPolling){ReactPolling=_reactPolling.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsPollData_=function(_React$Component){function _SrsPollData_(props){_classCallCheck(this,_SrsPollData_);var _this=_possibleConstructorReturn(this,(_SrsPollData_.__proto__||Object.getPrototypeOf(_SrsPollData_)).call(this,props)),interval=_this.props.widgetProps&&_this.props.widgetProps.Internal?parseInt(_this.props.widgetProps.Internal):1e4;return _this.state={interval:interval,status:"stop"},_this.fetchData=_this.fetchData.bind(_this),_this}return _inherits(_SrsPollData_,_React$Component),_createClass(_SrsPollData_,[{key:"fetchData",value:function(){var _ref,_this2=this,self=this;return new Promise((_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(resolve,reject){var scriptName,scriptParams,result,widgetProps;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(scriptName=self.props.widgetProps&&self.props.widgetProps.ScriptName,scriptParams=(scriptParams=self.props.widgetProps&&self.props.widgetProps.ScriptParams)?"string"==typeof scriptParams?JSON.parse(scriptParams):scriptParams:{},!scriptName||"start"!=_this2.state.status){_context.next=13;break}return _context.next=6,$script.runAtServer(scriptName,scriptParams);case 6:result=_context.sent,(widgetProps=Object.assign({},self.props.widgetProps)).ScriptOutput=result,self.props.updateStore({updates:{widgetProps:widgetProps}}),resolve(result),_context.next=14;break;case 13:resolve({});case 14:case"end":return _context.stop()}},_callee,_this2)})),function(_x,_x2){return _ref.apply(this,arguments)}))}},{key:"componentDidUpdate",value:function(prevProps,prevState){var prevPropsClone=Object.assign({},prevProps.widgetProps),thisPropsClone=Object.assign({},this.props.widgetProps);if(delete prevPropsClone.ScriptOutput,delete thisPropsClone.ScriptOutput,!_.isEqual(prevPropsClone,thisPropsClone)){var newState={};if(prevProps.widgetProps.State+""!=this.props.widgetProps.State+""){var pollingState=this.props.widgetProps.State+""=="true";newState.status=pollingState?"start":"stop"}prevProps.widgetProps.Interval!=this.props.widgetProps.Interval&&(newState.interval=parseInt(this.props.widgetProps.Interval)),this.setState(_extends({},newState))}}},{key:"render",value:function(){var self=this;return React.createElement("div",{style:{width:0,height:0}},React.createElement(ReactPolling,{url:"https://example.srste.in/posts",interval:this.state.interval,retryCount:3,onSuccess:function(resp){return!0},onFailure:function(){return console.log("handle failure")},promise:this.fetchData,render:function(_ref2){var startPolling=_ref2.startPolling,stopPolling=_ref2.stopPolling,isPolling=_ref2.isPolling;return"stop"==self.state.status&&isPolling?stopPolling():"start"!=self.state.status||isPolling||startPolling(),null}}))}}]),_SrsPollData_}(React.Component),_export("SrsPollData",SrsPollData=function(props){return _SrsPollData_}),_export("SrsPollData",SrsPollData)}}}),System.register("component/studio/SrsRadio.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,RadioButton,_SrsRadio_,SrsRadio,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){RadioButton=_carbonComponentsReact.RadioButton}],execute:function(){_SrsRadio_=function(_React$Component){function _SrsRadio_(props){_classCallCheck(this,_SrsRadio_);var _this=_possibleConstructorReturn(this,(_SrsRadio_.__proto__||Object.getPrototypeOf(_SrsRadio_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this.items=props.items?props.items:[{id:"id1",label:"Veg"},{id:"id2",label:"Non-Veg"},{id:"id3",label:"Egg"}],_this}return _inherits(_SrsRadio_,_React$Component),_createClass(_SrsRadio_,[{key:"handleChange",value:function(val){console.log(this.props);var updatedProps=this.props.widgetProps;updatedProps.value=val,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"render",value:function(){var radioButtonProps={onChange:this.handleChange,className:"wrapItems",name:"Test",labelPosition:"right",disabled:!1},radioButtonContainer=[];return this.items.map(function(item,idx){radioButtonContainer.push(React.createElement(RadioButton,_extends({id:item.id,value:item.id,labelText:item.label},radioButtonProps)))}),React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,"@import url('/thirdpartylib/carbon-components/styles.css'); @import url('component/studio/SrsRadio/Style.css');"),radioButtonContainer)}}]),_SrsRadio_}(React.Component),_export("SrsRadio",SrsRadio=function(props){return _SrsRadio_}),_export("SrsRadio",SrsRadio),_export("default",SrsRadio),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsRadio/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,RadioButton,_SrsRadio_,SrsRadio;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){RadioButton=_carbonComponentsReact.RadioButton}],execute:function(){_SrsRadio_=function(_React$Component){function _SrsRadio_(props){_classCallCheck(this,_SrsRadio_);var _this=_possibleConstructorReturn(this,(_SrsRadio_.__proto__||Object.getPrototypeOf(_SrsRadio_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this.items=props.items?props.items:[{id:"id1",label:"Veg"},{id:"id2",label:"Non-Veg"},{id:"id3",label:"Egg"}],_this}return _inherits(_SrsRadio_,_React$Component),_createClass(_SrsRadio_,[{key:"handleChange",value:function(val){console.log(this.props);var updatedProps=this.props.widgetProps;updatedProps.value=val,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"render",value:function(){var radioButtonProps={onChange:this.handleChange,className:"wrapItems",name:"Test",labelPosition:"right",disabled:!1},radioButtonContainer=[];return this.items.map(function(item,idx){radioButtonContainer.push(React.createElement(RadioButton,_extends({id:item.id,value:item.id,labelText:item.label},radioButtonProps)))}),React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,"@import url('/thirdpartylib/carbon-components/styles.css'); @import url('component/studio/SrsRadio/Style.css');"),radioButtonContainer)}}]),_SrsRadio_}(React.Component),_export("SrsRadio",SrsRadio=function(props){return _SrsRadio_}),_export("SrsRadio",SrsRadio)}}}),System.register("component/studio/SrsReference.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","@carbon/icons-react/lib/close/32","lodash.debounce","@carbon/icons-react/lib/view--mode-2/20","@fortawesome/fontawesome-svg-core","@fortawesome/react-fontawesome","@fortawesome/free-solid-svg-icons"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ComboBox,cloneDeep,debounce,library,FontAwesomeIcon,faBookOpen,_SrsReference_,SrsReference,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){ComboBox=_carbonComponentsReact.ComboBox},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonIconsReactLibClose){_carbonIconsReactLibClose.default},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_carbonIconsReactLibViewMode){_carbonIconsReactLibViewMode.default},function(_fortawesomeFontawesomeSvgCore){library=_fortawesomeFontawesomeSvgCore.library},function(_fortawesomeReactFontawesome){FontAwesomeIcon=_fortawesomeReactFontawesome.FontAwesomeIcon},function(_fortawesomeFreeSolidSvgIcons){faBookOpen=_fortawesomeFreeSolidSvgIcons.faBookOpen}],execute:function(){_SrsReference_=function(_React$Component){function _SrsReference_(props){_classCallCheck(this,_SrsReference_);var _this=_possibleConstructorReturn(this,(_SrsReference_.__proto__||Object.getPrototypeOf(_SrsReference_)).call(this,props));return _this.state={recordItems:[],selectedItem:null,previousSelectedItem:null,recordKey:Date.now(),reloaded:!1},_this.reloadData=_this.reloadData.bind(_this),_this.updateWidgetProps=_this.updateWidgetProps.bind(_this),_this.onChangeDebounce=debounce(function(val){_this.state.lastSearchKey!=val&&(_this.state.lastSearchKey||val)&&_this.getRecords(val).then(function(recordItems){return _this.setState({recordItems:recordItems,lastSearchKey:val})})},500),_this.onChange=_this.onChange.bind(_this),library.add(faBookOpen),_this}return _inherits(_SrsReference_,_React$Component),_createClass(_SrsReference_,[{key:"getRecords",value:function(filterKey,includeUIDs){var _this2=this;return new Promise(function(resolve,reject){var records=[],filter={};try{filter=_this2.recordMatchingFilter&&"string"==typeof _this2.recordMatchingFilter?JSON.parse(_this2.recordMatchingFilter):_extends({},_this2.recordMatchingFilter)}catch(err){}if(filter){var currentWhereClause=filter.where?filter.where:{},additionalAndClause=null;if(filterKey||includeUIDs)additionalAndClause={or:[]},(_this2.searchFields?_this2.searchFields.split(","):["uid"]).map(function(searchField,indx){var innerClause={};innerClause[searchField]={like:"%"+filterKey+"%"},additionalAndClause.or.push(innerClause)}),includeUIDs&&includeUIDs.length>0&&additionalAndClause.or.push({uid:{inq:includeUIDs}});filter.where=additionalAndClause?{and:[currentWhereClause,additionalAndClause]}:currentWhereClause}var inputParams={tableName:_this2.tableName,fields:[_this2.displayField,_this2.secondaryDisplayField,"uid"],fieldAliases:null,filter:filter};_this2.tableName&&$script.runAtServer("mmf.getRecords",inputParams).then(function(tableRows){tableRows&&!tableRows.error&&tableRows&&tableRows.length>0?(tableRows.map(function(tableRow){var recordData=tableRow.node;records.push({id:recordData.uid,text:_this2.secondaryDisplayField?recordData[_this2.displayField]+" [ "+recordData[_this2.secondaryDisplayField]+" ]":""+recordData[_this2.displayField]})}),resolve(records)):resolve([])})})}},{key:"reloadData",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var fieldValue,records,selectedItem,matchingRecord,item;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return fieldValue=this.props.defaultvalue||this.props.defaultValue||this.props.widgetProps&&(this.props.widgetProps.value||this.props.widgetProps.DefaultValue)||"",_context.next=3,this.getRecords("",[fieldValue]);case 3:records=_context.sent,selectedItem=null,records&&records.length>0&&(matchingRecord=records.filter(function(record){return record.id==fieldValue}),selectedItem=matchingRecord&&matchingRecord.length>0?matchingRecord[0]:selectedItem),item=selectedItem||(fieldValue?{id:fieldValue,text:""}:null),this.setState({recordItems:records,selectedItem:item});case 8:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.reloadData()}},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(prevState.recordKey==this.state.recordKey&&prevState.reloaded==this.state.reloaded){_context2.next=3;break}return _context2.next=3,this.reloadData();case 3:if(this.props.isformcontrol+""!="true"||prevProps.defaultvalue==this.props.defaultvalue&&prevProps.reload==this.props.reload){_context2.next=6;break}return _context2.next=6,this.reloadData();case 6:if(_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&_.isEqual(prevProps.tablename,this.props.tablename)&&_.isEqual(prevProps.displayfield,this.props.displayfield)&&_.isEqual(prevProps.filter,this.props.filter)&&_.isEqual(prevProps.defaultvalue,this.props.defaultvalue)&&_.isEqual(prevProps.defaultValue,this.props.defaultValue)&&_.isEqual(prevProps.searchfields,this.props.searchfields)){_context2.next=24;break}if(_.isEqual(prevProps.filter,this.props.filter)){_context2.next=11;break}this.recordMatchingFilter=this.props.filter?this.props.filter:{},_context2.next=24;break;case 11:if(_.isEqual(prevProps.widgetProps,this.props.widgetProps)||prevProps.widgetProps.value==this.props.widgetProps.value&&prevProps.widgetProps.TableName==this.props.widgetProps.TableName){_context2.next=21;break}if(prevProps.widgetProps.TableName!=this.props.widgetProps.TableName&&(this.tableName=this.props.widgetProps.TableName),""!=this.props.widgetProps.value){_context2.next=17;break}this.setState({lastSearchKey:"",selectedItem:{id:"",text:""},recordKey:Date.now()}),_context2.next=19;break;case 17:return _context2.next=19,this.reloadData();case 19:_context2.next=24;break;case 21:if((prevProps.defaultValue==this.props.defaultValue||this.state.selectedItem&&this.props.defaultValue==this.state.selectedItem.id)&&(prevProps.defaultvalue==this.props.defaultvalue||this.state.selectedItem&&this.props.defaultvalue==this.state.selectedItem.id)){_context2.next=24;break}return _context2.next=24,this.reloadData();case 24:case"end":return _context2.stop()}},_callee2,this)}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"onChange",value:function(_ref3){var selectedItem=_ref3.selectedItem;if(this.props.onChange)this.props.onChange(selectedItem),this.setState({selectedItem:selectedItem,lastSearchKey:null,invalid:!(selectedItem&&selectedItem.uid||this.props.required+""!="true")});else if(this.props.varname){var propName=(this.props.varname?this.props.varname:this.props.uid)+"_refvalue",referencefields=cloneDeep(this.props.referencefields);referencefields[propName]=selectedItem?selectedItem.id:"",this.props.updateStore({updates:{referencefields:referencefields}})}else{var updatedProps=Object.assign({},this.props.widgetProps);updatedProps.value=selectedItem?selectedItem.id:"",this.updateWidgetProps(updatedProps),this.setState({selectedItem:selectedItem,lastSearchKey:null,invalid:!(selectedItem&&selectedItem.uid||this.props.required+""!="true")})}}},{key:"updateWidgetProps",value:function(widgetProps){if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);if(widgetProps.ActionClicked){var tableName=widgetProps.ActionClicked.actionPayload&&widgetProps.ActionClicked.actionPayload.row?widgetProps.ActionClicked.actionPayload.row.tableName:"",recordId=widgetProps.ActionClicked.actionPayload&&widgetProps.ActionClicked.actionPayload.row?widgetProps.ActionClicked.actionPayload.row.uid:"";this.props.defaultvalue||this.props.defaultValue||this.props.widgetProps&&(this.props.widgetProps.value||this.props.widgetProps.DefaultValue);controlProps.control_action={actionClicked:"open_record",actionPayload:{listName:"Reference",actionName:"open_record",clickts:widgetProps.ActionClicked.clickts,tableName:tableName,recordId:recordId}}}else controlProps[this.props.controlname]=widgetProps.value;this.props.updateStore({updates:{controlProps:controlProps}})}}else if(this.props.iscellcontrol+""=="true"){var controlId=this.props.controlid.replaceAll("_dot_","."),controlIdParts=(controlId=controlId.replace("cell_","")).split("."),formControlName=controlIdParts[0],rowIndx=controlIdParts[1],columnName=controlIdParts[2],cellName=columnName.split("_")[0],parentWidgetId=columnName.split("_")[1],controls=this.props.controls,formControlKey=this.props.pageid+this.props.pagesuffix+"_"+parentWidgetId;controls[formControlKey]=controls[formControlKey]||{},controls[formControlKey][formControlName]=controls[formControlKey][formControlName]||[],controls[formControlKey][formControlName][rowIndx]=controls[formControlKey][formControlName][rowIndx]||{},controls[formControlKey][formControlName][rowIndx][cellName]=widgetProps.value,controls[formControlKey][formControlName][rowIndx].__isCellEdited__=Date.now(),this.props.updateStore({updates:{controls:controls}})}else this.props.widgetProps&&this.props.updateStore({updates:{widgetProps:widgetProps}})}},{key:"render",value:function(){var _this3=this;this.tableName=this.props.tablename?this.props.tablename:this.props.widgetProps&&this.props.widgetProps.TableName?this.props.widgetProps.TableName:"",this.displayField=this.props.displayfield?this.props.displayfield:this.props.widgetProps&&this.props.widgetProps.DisplayField?this.props.widgetProps.DisplayField:"",this.secondaryDisplayField=this.props.secondarydisplayfield?this.props.secondarydisplayfield:this.props.widgetProps&&this.props.widgetProps.SecondaryDisplayField?this.props.widgetProps.SecondaryDisplayField:"",this.recordMatchingFilter=this.props.filter?this.props.filter:this.props.widgetProps&&this.props.widgetProps.RecordMatchingFilter?this.props.widgetProps.RecordMatchingFilter:"{}",this.searchFields=this.props.searchfields?this.props.searchfields:this.props.widgetProps&&this.props.widgetProps.SearchFields?this.props.widgetProps.SearchFields:"uid";var selectedItem=this.state.selectedItem,initialSelectedItem=(this.props.defaultvalue||this.props.defaultValue||this.props.widgetProps&&(this.props.widgetProps.value||this.props.widgetProps.DefaultValue),this.state.lastSearchKey?this.state.lastSearchKey:selectedItem),titleText=this.props.hidelabel+""=="true"||this.props.iscellcontrol+""=="true"?"":this.props.title?this.props.title:this.props.widgetProps&&this.props.widgetProps.Label?this.props.widgetProps.Label:"Data Lookup";titleText=titleText&&this.props.required+""=="true"?titleText+" *":titleText;var props={selectedItem:selectedItem||this.state.previousSelectedItem,initialSelectedItem:initialSelectedItem,ariaLabel:"Choose an item",disabled:this.props.disabled&&this.props.disabled+""=="true"||this.props.readOnly&&this.props.readOnly+""=="true",helperText:""+(this.props.widgetProps&&this.props.widgetProps.HelperText?this.props.widgetProps.HelperText:""),invalid:this.state.invalid,invalidText:""+(this.props.widgetProps&&this.props.widgetProps.InvalidText?this.props.widgetProps.InvalidText:"Valid value is required"),light:this.props.light+""=="true"||!(!this.props.widgetProps||this.props.widgetProps.LightMode+""!="true"),onInputChange:this.onChangeDebounce,placeholder:""+(this.props.widgetProps&&this.props.widgetProps.Placeholder?this.props.widgetProps.Placeholder:this.props.placeholder?this.props.placeholder:"Filter..."),titleText:titleText,type:"default"};this.props.hideLabel+""!="true"&&this.props.hidelabel+""!="true"||(props.hideLabel=!0);var showOpenRecord=this.props.showOpenRecord+""=="true"||this.props.showopenrecord+""=="true"||this.props.widgetProps&&this.props.widgetProps.ShowOpenRecord+""=="true",isInlineRef=!!(this.props.isformcontrol+""!="true"&&this.props.widgetProps&&Object.keys(this.props.widgetProps).length>0);return React.createElement(React.Fragment,null,React.createElement("div",{className:isInlineRef?"inlineref":"simpleref",style:{display:"flex"}},React.createElement("style",null,'@import url("/component/studio/SrsReference/Style.css");'),React.createElement("style",null,this.props.inlinestyles),React.createElement(ComboBox,_extends({},props,{onClick:function(e){_this3.getRecords("").then(function(recordItems){return _this3.setState({recordItems:recordItems,selectedItems:null,lastSearchKey:""})}),_this3.props.onClick&&_this3.props.onClick(e)},onBlur:function(e){_this3.props.onBlur&&_this3.props.onBlur(e)},onFocus:function(e){_this3.props.onFocus&&_this3.props.onFocus(e)},items:this.state.recordItems,itemToString:function(item){return item==_this3.state.lastSearchKey?_this3.state.lastSearchKey:item?item.text:""},onChange:this.onChange})),null,showOpenRecord&&(initialSelectedItem||selectedItem)?React.createElement(FontAwesomeIcon,{style:{cursor:"pointer",marginTop:30,marginLeft:2,height:30,width:30},icon:"book-open",onClick:function(e){var widgetProps=Object.assign({},_this3.props.widgetProps);widgetProps.ActionClicked={name:"OpenRecord",actionPayload:{row:{tableName:_this3.tableName,uid:selectedItem?selectedItem.id:initialSelectedItem.id}},clickts:Date.now()},_this3.updateWidgetProps(widgetProps),_this3.props.openRecord&&_this3.props.openRecord(_this3.tableName,selectedItem?selectedItem.id:initialSelectedItem.id)}}):null))}}]),_SrsReference_}(React.Component),_export("SrsReference",SrsReference=function(props){return _SrsReference_}),_export("SrsReference",SrsReference),_export("default",SrsReference),_export("states",states=[{KeyName:"controls",AccessPath:"controls",DefaultValue:'{"controls": {}}'},{KeyName:"referencefields",AccessPath:"referencefields",DefaultValue:'{"referencefields" : {} }'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"controlProps",AccessPath:"controls.${pageid}${pagesuffix}_${controlid}",DefaultValue:'{"controls": {"${pageid}${pagesuffix}_${controlid}": {}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsSelect.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,cloneDeep,_SrsSelect_,SrsSelect,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsSelect_=function(_React$Component){function _SrsSelect_(props){_classCallCheck(this,_SrsSelect_);var _this=_possibleConstructorReturn(this,(_SrsSelect_.__proto__||Object.getPrototypeOf(_SrsSelect_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this.updateWidgetProps=_this.updateWidgetProps.bind(_this),_this.state={selectKey:Date.now()},_this}return _inherits(_SrsSelect_,_React$Component),_createClass(_SrsSelect_,[{key:"updateWidgetProps",value:function(inputVal){if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);controlProps[this.props.controlname]=inputVal,this.props.updateStore({updates:{controlProps:controlProps}})}}else if(this.props.iscellcontrol+""=="true"){var controlId=this.props.controlid.replaceAll("_dot_","."),controlIdParts=(controlId=controlId.replace("cell_","")).split("."),formControlName=controlIdParts[0],rowIndx=controlIdParts[1],columnName=controlIdParts[2],cellName=columnName.split("_")[0],parentWidgetId=columnName.split("_")[1],controls=this.props.controls,formControlKey=this.props.pageid+this.props.pagesuffix+"_"+parentWidgetId;controls[formControlKey]=controls[formControlKey]||{},controls[formControlKey][formControlName]=controls[formControlKey][formControlName]||[],controls[formControlKey][formControlName][rowIndx]=controls[formControlKey][formControlName][rowIndx]||{},controls[formControlKey][formControlName][rowIndx][cellName]=inputVal,controls[formControlKey][formControlName][rowIndx].__isCellEdited__=Date.now(),this.props.updateStore({updates:{controls:controls}})}else if(this.props.widgetProps){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=inputVal,this.props.updateStore({updates:{widgetProps:updatedProps}})}}},{key:"handleChange",value:function(e){this.updateWidgetProps(e.target.value),this.props.handleOnChange?this.props.handleOnChange(e.target.value):this.props.onChange&&this.props.onChange(e.target.value)}},{key:"componentDidUpdate",value:function(prevProps){this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&prevProps.widgetProps.value!=this.props.widgetProps.value&&this.setState({selectKey:Date.now()})}},{key:"render",value:function(){var choices=[];if(this.props.options){var options="string"==typeof this.props.options?JSON.parse(this.props.options):this.props.options;options.length>0&&options.map(function(option){choices.push(React.createElement(SelectItem,{value:option.name,text:option.label}))})}else if(this.props.widgetProps&&this.props.widgetProps.ChoiceList){var choiceList=[];try{(choiceList="string"==typeof this.props.widgetProps.ChoiceList?JSON.parse(this.props.widgetProps.ChoiceList):this.props.widgetProps.ChoiceList)&&choiceList.length>0&&choiceList.map(function(choiceItem,indx){choices.push(React.createElement(SelectItem,{value:choiceItem.value,text:choiceItem.name}))})}catch(err){}}var selectName=this.props.title?this.props.title:this.props.widgetProps&&this.props.widgetProps.Label?this.props.widgetProps.Label:"Select",props={name:selectName,className:this.props.className?this.props.className:this.props.widgetProps&&this.props.widgetProps.ClassName?this.props.widgetProps.ClassName:"",onChange:this.handleChange},value=this.props.value?this.props.value:this.props.widgetProps&&this.props.widgetProps.value?this.props.widgetProps.value:"";if((value=value||(this.props.widgetProps&&this.props.widgetProps.DefaultVaue?this.props.widgetProps.DefaultVaue:""))&&(props.defaultValue=value,this.props.widgetProps&&this.props.widgetProps.value!=value)){Object.assign({},this.props.widgetProps);this.updateWidgetProps(value)}this.props.iscellcontrol+""=="true"||this.props.hidelabel+""=="true"||this.props.hideLabel||this.props.widgetProps&&(1==this.props.widgetProps.HideLabel||"true"==this.props.widgetProps.HideLabel)?props.hideLabel=!0:props.labelText=this.props.required+""=="true"?selectName+" *":selectName,(this.props.light+""=="true"||this.props.widgetProps&&("true"==this.props.widgetProps.LightMode||1==this.props.widgetProps.LightMode))&&(props.light=!0);var embeddedStyles=React.createElement("style",null,this.props.inlinestyles||"");this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles));var containerStyles=this.props.containerStyles?this.props.containerStyles:null;return React.createElement("div",{className:containerStyles?"":"srs-prem-container",style:containerStyles},embeddedStyles,React.createElement(Select,_extends({key:this.state.selectKey},props),choices))}}]),_SrsSelect_}(React.Component),_export("SrsSelect",SrsSelect=function(props){return WrappedComponent=_SrsSelect_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsSelect",SrsSelect),_export("default",SrsSelect),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"controlProps",AccessPath:"controls.${pageid}${pagesuffix}_${controlid}",DefaultValue:'{"controls": {"${pageid}${pagesuffix}_${controlid}": {}}}'},{KeyName:"controls",AccessPath:"controls",DefaultValue:'{"controls": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsSimpleList.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash","lodash.clonedeep","component/mmf/ComponentWrapper/Definition.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_,ComponentWrapper,StructuredListSkeleton,StructuredListWrapper,StructuredListHead,StructuredListBody,StructuredListRow,StructuredListCell,_SrsSimpleList_,SrsSimpleList,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodash){_=_lodash.default},function(_lodashClonedeep){_lodashClonedeep.default},function(_componentMmfComponentWrapperDefinitionJs){ComponentWrapper=_componentMmfComponentWrapperDefinitionJs.ComponentWrapper},function(_carbonComponentsReact){StructuredListSkeleton=_carbonComponentsReact.StructuredListSkeleton,StructuredListWrapper=_carbonComponentsReact.StructuredListWrapper,StructuredListHead=_carbonComponentsReact.StructuredListHead,StructuredListBody=_carbonComponentsReact.StructuredListBody,StructuredListRow=_carbonComponentsReact.StructuredListRow,_carbonComponentsReact.StructuredListInput,StructuredListCell=_carbonComponentsReact.StructuredListCell}],execute:function(){_SrsSimpleList_=function(_React$Component){function _SrsSimpleList_(props){_classCallCheck(this,_SrsSimpleList_);var _this=_possibleConstructorReturn(this,(_SrsSimpleList_.__proto__||Object.getPrototypeOf(_SrsSimpleList_)).call(this,props));return _this.state={activeitem:-1,isLoading:!0,reload:!1},_this.getItemByType=_this.getItemByType.bind(_this),_this}return _inherits(_SrsSimpleList_,_React$Component),_createClass(_SrsSimpleList_,[{key:"componentDidMount",value:function(){this.setState({isLoading:!1})}},{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.widgetProps,this.props.widgetProps)||prevProps.widgetProps.Items==this.props.widgetProps.Items||this.setState({reload:!this.state.reload})}},{key:"getItemByType",value:function(item){var props={};props.componentname=item.tag.name,props.componentscope=item.tag.scope?item.tag.scope:"mmf",props.componenttype=item.tag.type?item.tag.type:"React",props.keyprop=item.keyprop?item.keyprop:"id",props.parentwidgetid=this.props.widgetid,props.parentpageid=this.props.pageid+this.props.pagesuffix;var SubItemCard=ComponentWrapper(props);return React.createElement(SubItemCard,item)}},{key:"render",value:function(){var _this2=this;if(this.state.isLoading)return React.createElement(StructuredListSkeleton,null);var items=this.props.widgetProps&&this.props.widgetProps.Items?"string"==typeof this.props.widgetProps.Items?JSON.parse(this.props.widgetProps.Items):this.props.widgetProps.Items:null;items=!items&&this.props.items&&"string"==typeof this.props.items?JSON.parse(this.props.items):items;var suffix="true"==this.props.unique?Date.now():"";if(!items||0==items.length)return React.createElement("div",{style:{textAlign:"center"}},"No items to show");var className=!this.props.widgetProps||"true"!=this.props.widgetProps.SingleColumn&&1!=this.props.widgetProps.SingleColumn?"true"==this.props.singlecolumn||1==this.props.singlecolumn?"singleColumnList":"simpleList":"singleColumnList";className=className+" "+("Align-"+(this.props.widgetProps&&this.props.widgetProps.Alignment?this.props.widgetProps.Alignment:this.props.alignment?this.props.alignment:"center"));var embeddedStyles=null;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles));var headerName=this.props.widgetProps&&this.props.widgetProps.HeaderName?this.props.widgetProps.HeaderName:"Name";return React.createElement("div",{className:className},embeddedStyles,React.createElement(StructuredListWrapper,{ariaLabel:"Structured list section",selection:!0},React.createElement(StructuredListHead,null,React.createElement(StructuredListRow,{head:!0,label:!1,tabIndex:0},React.createElement(StructuredListCell,{head:!0,noWrap:!1},headerName))),React.createElement(StructuredListBody,null,items&&items.map(function(item,indx){return React.createElement(StructuredListRow,{head:!1,label:!0,tabIndex:0},React.createElement(StructuredListCell,{head:!1,noWrap:!1,onClick:function(e){if((_this2.props.enableitemselect&&"true"==_this2.props.enableitemselect||_this2.props.widgetProps&&(1==_this2.props.widgetProps.EnableItemSelection||"true"==_this2.props.widgetProps.EnableItemSelection))&&(_this2.props.items&&_this2.props.updateStore({updates:{active_list_item:suffix?item.id+"@@"+suffix:item.id}}),_this2.props.widgetid&&_this2.props.widgetProps)){var updatedWidgetProps=Object.assign({},_this2.props.widgetProps);updatedWidgetProps.SelectedItem=item.id,_this2.props.updateStore({updates:{widgetProps:updatedWidgetProps}})}}},item.tag?_this2.getItemByType(item):item.name))}))))}}]),_SrsSimpleList_}(React.Component),_export("SrsSimpleList",SrsSimpleList=function(props){return _SrsSimpleList_}),_export("SrsSimpleList",SrsSimpleList),_export("default",SrsSimpleList),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"active_list_item",AccessPath:"active_list_item.${varname}",DefaultValue:'{"active_list_item": {"${varname}": ""}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsSimpleList/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash","lodash.clonedeep","component/mmf/ComponentWrapper/Definition.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_,ComponentWrapper,StructuredListSkeleton,StructuredListWrapper,StructuredListHead,StructuredListBody,StructuredListRow,StructuredListCell,_SrsSimpleList_,SrsSimpleList;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodash){_=_lodash.default},function(_lodashClonedeep){_lodashClonedeep.default},function(_componentMmfComponentWrapperDefinitionJs){ComponentWrapper=_componentMmfComponentWrapperDefinitionJs.ComponentWrapper},function(_carbonComponentsReact){StructuredListSkeleton=_carbonComponentsReact.StructuredListSkeleton,StructuredListWrapper=_carbonComponentsReact.StructuredListWrapper,StructuredListHead=_carbonComponentsReact.StructuredListHead,StructuredListBody=_carbonComponentsReact.StructuredListBody,StructuredListRow=_carbonComponentsReact.StructuredListRow,_carbonComponentsReact.StructuredListInput,StructuredListCell=_carbonComponentsReact.StructuredListCell}],execute:function(){_SrsSimpleList_=function(_React$Component){function _SrsSimpleList_(props){_classCallCheck(this,_SrsSimpleList_);var _this=_possibleConstructorReturn(this,(_SrsSimpleList_.__proto__||Object.getPrototypeOf(_SrsSimpleList_)).call(this,props));return _this.state={activeitem:-1,isLoading:!0,reload:!1},_this.getItemByType=_this.getItemByType.bind(_this),_this}return _inherits(_SrsSimpleList_,_React$Component),_createClass(_SrsSimpleList_,[{key:"componentDidMount",value:function(){this.setState({isLoading:!1})}},{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.widgetProps,this.props.widgetProps)||prevProps.widgetProps.Items==this.props.widgetProps.Items||this.setState({reload:!this.state.reload})}},{key:"getItemByType",value:function(item){var props={};props.componentname=item.tag.name,props.componentscope=item.tag.scope?item.tag.scope:"mmf",props.componenttype=item.tag.type?item.tag.type:"React",props.keyprop=item.keyprop?item.keyprop:"id",props.parentwidgetid=this.props.widgetid,props.parentpageid=this.props.pageid+this.props.pagesuffix;var SubItemCard=ComponentWrapper(props);return React.createElement(SubItemCard,item)}},{key:"render",value:function(){var _this2=this;if(this.state.isLoading)return React.createElement(StructuredListSkeleton,null);var items=this.props.widgetProps&&this.props.widgetProps.Items?"string"==typeof this.props.widgetProps.Items?JSON.parse(this.props.widgetProps.Items):this.props.widgetProps.Items:null;items=!items&&this.props.items&&"string"==typeof this.props.items?JSON.parse(this.props.items):items;var suffix="true"==this.props.unique?Date.now():"";if(!items||0==items.length)return React.createElement("div",{style:{textAlign:"center"}},"No items to show");var className=!this.props.widgetProps||"true"!=this.props.widgetProps.SingleColumn&&1!=this.props.widgetProps.SingleColumn?"true"==this.props.singlecolumn||1==this.props.singlecolumn?"singleColumnList":"simpleList":"singleColumnList";className=className+" "+("Align-"+(this.props.widgetProps&&this.props.widgetProps.Alignment?this.props.widgetProps.Alignment:this.props.alignment?this.props.alignment:"center"));var embeddedStyles=null;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles));var headerName=this.props.widgetProps&&this.props.widgetProps.HeaderName?this.props.widgetProps.HeaderName:"Name";return React.createElement("div",{className:className},embeddedStyles,React.createElement(StructuredListWrapper,{ariaLabel:"Structured list section",selection:!0},React.createElement(StructuredListHead,null,React.createElement(StructuredListRow,{head:!0,label:!1,tabIndex:0},React.createElement(StructuredListCell,{head:!0,noWrap:!1},headerName))),React.createElement(StructuredListBody,null,items&&items.map(function(item,indx){return React.createElement(StructuredListRow,{head:!1,label:!0,tabIndex:0},React.createElement(StructuredListCell,{head:!1,noWrap:!1,onClick:function(e){if((_this2.props.enableitemselect&&"true"==_this2.props.enableitemselect||_this2.props.widgetProps&&(1==_this2.props.widgetProps.EnableItemSelection||"true"==_this2.props.widgetProps.EnableItemSelection))&&(_this2.props.items&&_this2.props.updateStore({updates:{active_list_item:suffix?item.id+"@@"+suffix:item.id}}),_this2.props.widgetid&&_this2.props.widgetProps)){var updatedWidgetProps=Object.assign({},_this2.props.widgetProps);updatedWidgetProps.SelectedItem=item.id,_this2.props.updateStore({updates:{widgetProps:updatedWidgetProps}})}}},item.tag?_this2.getItemByType(item):item.name))}))))}}]),_SrsSimpleList_}(React.Component),_export("SrsSimpleList",SrsSimpleList=function(props){return _SrsSimpleList_}),_export("SrsSimpleList",SrsSimpleList)}}}),System.register("component/studio/SrsSimpleNavigator.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/fade/16","lodash.clonedeep","lodash","carbon-components-react","component/studio/SrsMultiButton/Definition.js"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,_,SideNav,SideNavItems,SideNavMenu,SideNavMenuItem,SrsMultiButton,_SrsSimpleNavigator_,SrsSimpleNavigator,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibFade){_carbonIconsReactLibFade.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default},function(_carbonComponentsReact){SideNav=_carbonComponentsReact.SideNav,SideNavItems=_carbonComponentsReact.SideNavItems,SideNavMenu=_carbonComponentsReact.SideNavMenu,SideNavMenuItem=_carbonComponentsReact.SideNavMenuItem,_carbonComponentsReact.SideNavLink},function(_componentStudioSrsMultiButtonDefinitionJs){SrsMultiButton=_componentStudioSrsMultiButtonDefinitionJs.SrsMultiButton}],execute:function(){_SrsSimpleNavigator_=function(_React$Component){function _SrsSimpleNavigator_(props){_classCallCheck(this,_SrsSimpleNavigator_);var _this=_possibleConstructorReturn(this,(_SrsSimpleNavigator_.__proto__||Object.getPrototypeOf(_SrsSimpleNavigator_)).call(this,props)),items=_this.props.items?_this.props.items:_this.props.widgetProps&&_this.props.widgetProps.Items?_this.props.widgetProps.Items:[];try{items=items&&"string"==typeof items?JSON.parse(items):items}catch(err){}return _this.state={navTree:{name:"Main",expand:!0,items:items}},_this.getItemsEl=_this.getItemsEl.bind(_this),$ele&&$ele.registerElement("SideNavLink","studio","React"),_this.mode=_this.props.mode?_this.props.mode:_this.props.widgetProps&&_this.props.widgetProps.Mode?_this.props.widgetProps.Mode:"navigate",_this}return _inherits(_SrsSimpleNavigator_,_React$Component),_createClass(_SrsSimpleNavigator_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){var items,_items,updatedWidgetProps;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_.isEqual(prevProps.items,this.props.items)||_.isEqual(this.props.items,this.state.navTree.items)){if(this.props.widgetProps&&prevProps.widgetProps.Items!=this.props.widgetProps.Items){_items=this.props.widgetProps&&this.props.widgetProps.Items?this.props.widgetProps.Items:[];try{_items=_items&&"string"==typeof _items?JSON.parse(_items):_items}catch(err){}this.setState({navTree:{name:"Main",expand:!0,items:_items}})}}else{items=this.props.items?this.props.items:[];try{items=items&&"string"==typeof items?JSON.parse(items):items}catch(err){}this.setState({navTree:{name:"Main",expand:!0,items:items}})}_.isEqual(this.props.activeLink,prevProps.activeLink)||(this.props.widgetProps&&((updatedWidgetProps=Object.assign({},this.props.widgetProps)).ActiveLink=this.props.activeLink,this.props.updateStore({updates:{widgetProps:updatedWidgetProps}})),this.props.setActiveLink&&this.props.setActiveLink(this.props.activeLink));case 2:case"end":return _context2.stop()}},_callee2,this)}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"getItemsEl",value:function(items,depth,parentIndx){var _this2=this,itemsEl=[];return items&&items.length>0?(items.map(function(item,indx){if("menu"==item.type){var innerItemEl=_this2.getItemsEl(item.items,depth+1,parentIndx?parentIndx+"-"+indx:indx);itemsEl.push(React.createElement(SideNavMenu,{style:{paddingLeft:20*depth},ref:"menu-"+(parentIndx||"")+"-"+indx,onClick:function(e){},defaultExpanded:item.hasOwnProperty("expand")?item.expand:0==depth,title:item.name},innerItemEl))}else"menuitem"==item.type&&itemsEl.push(React.createElement(SideNavMenuItem,{element:"side-nav-link",widgetid:_this2.props.widgetid,href:item.url,mode:_this2.mode,name:item.name,ref:"menuitem-"+(parentIndx||"")+"-"+indx},item.name))}),itemsEl):itemsEl}},{key:"render",value:function(){var _this3=this,name="Main",expand=!0,items=[];this.state.navTree&&(name=this.state.navTree.name,expand=this.state.navTree.expand,items=this.state.navTree.items);var itemsEl=this.getItemsEl(items,1),contentEl=null;if("true"==this.props.onecolumn){var multiBtnProps={};this.props.widgetProps&&this.props.widgetProps.OneColumnAnchor&&(multiBtnProps.onColumnanchor="true");var MultiBtn=SrsMultiButton();contentEl=React.createElement(MultiBtn,multiBtnProps)}else contentEl=React.createElement(SideNav,{"aria-label":name,expanded:expand,onToggle:function(a,b){var refs=_this3.refs;if(refs&&Object.keys(refs).length>0){var refKeys=Object.keys(refs),navTree=cloneDeep(_this3.state.navTree);for(var refIndx in refKeys){var refKey=refKeys[refIndx];if(refKey.startsWith("menu-")){var refKeyParts=refKey.split("-"),subNavTree=navTree;for(var refKeyPartIndx in refKeyParts)if(refKeyPartIndx>0){var treeIndx=refKeyParts[refKeyPartIndx];if(treeIndx){treeIndx=parseInt(treeIndx);var nodeInState=subNavTree.items[treeIndx];if(refKeyPartIndx==refKeyParts.length-1){var nodeInRef=refs[refKey];nodeInState&&nodeInState.expand+""!=nodeInRef.getAttribute("aria-expanded")&&(nodeInState.expand="true"==nodeInRef.getAttribute("aria-expanded"))}else subNavTree=nodeInState}}}}_this3.setState({navTree:navTree}),_this3.props.updateNavTree(navTree.items)}}},React.createElement(SideNavItems,null,itemsEl),null);return React.createElement("div",{style:{backgroundColor:"black",height:"inherit"}}," ",contentEl," ")}}]),_SrsSimpleNavigator_}(React.Component),_export("SrsSimpleNavigator",SrsSimpleNavigator=function(props){return _SrsSimpleNavigator_}),_export("SrsSimpleNavigator",SrsSimpleNavigator),_export("default",SrsSimpleNavigator),_export("states",states=[{KeyName:"activeLink",AccessPath:"navigation.${widgetid}",DefaultValue:'{"navigation": {"${widgetid}": {}}}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsSimpleTabs.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Tab,Tabs,_,cloneDeep,_SrsSimpleTabs_,SrsSimpleTabs,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Tab=_carbonComponentsReact.Tab,Tabs=_carbonComponentsReact.Tabs},function(_lodash){_=_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsSimpleTabs_=function(_React$Component){function _SrsSimpleTabs_(props){_classCallCheck(this,_SrsSimpleTabs_);var _this=_possibleConstructorReturn(this,(_SrsSimpleTabs_.__proto__||Object.getPrototypeOf(_SrsSimpleTabs_)).call(this,props)),tabList=_this.props.widgetProps&&_this.props.widgetProps.TabList?"string"==typeof _this.props.widgetProps.TabList?JSON.parse(_this.props.widgetProps.TabList):_this.props.widgetProps.TabList:[{name:"Demo Tab",value:"demotab1"}],defaultTab=_this.props.widgetProps&&_this.props.widgetProps.DefaultValue?_this.props.widgetProps.DefaultValue:"",activeTab=_this.props.widgetProps&&_this.props.widgetProps.ActiveTab?_this.props.widgetProps.ActiveTab:"",defaultTabIndx=0;return(defaultTab=activeTab||defaultTab)&&tabList&&tabList.map(function(tabItem,indx){tabItem.value==defaultTab&&(defaultTabIndx=indx)}),_this.state={reload:!1,tabList:tabList,selectedTab:defaultTabIndx},_this}return _inherits(_SrsSimpleTabs_,_React$Component),_createClass(_SrsSimpleTabs_,[{key:"componentDidUpdate",value:function(prevProps){if(this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&(!this.props.preview||"true"!=this.props.preview)){var tabList=this.props.widgetProps&&this.props.widgetProps.TabList?"string"==typeof this.props.widgetProps.TabList?JSON.parse(this.props.widgetProps.TabList):this.props.widgetProps.TabList:[{name:"Demo Tab",value:"demotab1"}],defaultTab=this.props.widgetProps&&this.props.widgetProps.DefaultValue?this.props.widgetProps.DefaultValue:"",activeTab=this.props.widgetProps&&this.props.widgetProps.ActiveTab?this.props.widgetProps.ActiveTab:"";if(defaultTab=activeTab||defaultTab,tabList){var defaultTabIndx=0;defaultTab&&tabList&&tabList.map(function(tabItem,indx){tabItem.value==defaultTab&&(defaultTabIndx=indx)}),this.setState({tabList:tabList,selectedTab:defaultTabIndx})}}}},{key:"render",value:function(){var _this2=this,tabsList=[];this.state.tabList&&this.state.tabList.map(function(tabItem,indx){tabsList.push(React.createElement(Tab,{label:tabItem.name,value:tabItem.value}))});var embeddedStyles=null;return this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles)),React.createElement("div",null,embeddedStyles,React.createElement(Tabs,{selected:this.state.selectedTab,onSelectionChange:function(val){if(_this2.state.selectedTab!=val){_this2.setState({selectedTab:val});var widgetProps=cloneDeep(_this2.props.widgetProps)||{},tabListItem=_this2.state.tabList[val];widgetProps.ActiveTab=tabListItem?tabListItem.value?tabListItem.value:tabListItem.name:"",_this2.props.updateStore({updates:{widgetProps:widgetProps}})}}},tabsList))}}]),_SrsSimpleTabs_}(React.Component),_export("SrsSimpleTabs",SrsSimpleTabs=function(props){return _SrsSimpleTabs_}),_export("SrsSimpleTabs",SrsSimpleTabs),_export("default",SrsSimpleTabs),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsSimpleTabs/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Tab,Tabs,_,cloneDeep,_SrsSimpleTabs_,SrsSimpleTabs;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Tab=_carbonComponentsReact.Tab,Tabs=_carbonComponentsReact.Tabs},function(_lodash){_=_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsSimpleTabs_=function(_React$Component){function _SrsSimpleTabs_(props){_classCallCheck(this,_SrsSimpleTabs_);var _this=_possibleConstructorReturn(this,(_SrsSimpleTabs_.__proto__||Object.getPrototypeOf(_SrsSimpleTabs_)).call(this,props)),tabList=_this.props.widgetProps&&_this.props.widgetProps.TabList?"string"==typeof _this.props.widgetProps.TabList?JSON.parse(_this.props.widgetProps.TabList):_this.props.widgetProps.TabList:[{name:"Demo Tab",value:"demotab1"}],defaultTab=_this.props.widgetProps&&_this.props.widgetProps.DefaultValue?_this.props.widgetProps.DefaultValue:"",activeTab=_this.props.widgetProps&&_this.props.widgetProps.ActiveTab?_this.props.widgetProps.ActiveTab:"",defaultTabIndx=0;return(defaultTab=activeTab||defaultTab)&&tabList&&tabList.map(function(tabItem,indx){tabItem.value==defaultTab&&(defaultTabIndx=indx)}),_this.state={reload:!1,tabList:tabList,selectedTab:defaultTabIndx},_this}return _inherits(_SrsSimpleTabs_,_React$Component),_createClass(_SrsSimpleTabs_,[{key:"componentDidUpdate",value:function(prevProps){if(this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&(!this.props.preview||"true"!=this.props.preview)){var tabList=this.props.widgetProps&&this.props.widgetProps.TabList?"string"==typeof this.props.widgetProps.TabList?JSON.parse(this.props.widgetProps.TabList):this.props.widgetProps.TabList:[{name:"Demo Tab",value:"demotab1"}],defaultTab=this.props.widgetProps&&this.props.widgetProps.DefaultValue?this.props.widgetProps.DefaultValue:"",activeTab=this.props.widgetProps&&this.props.widgetProps.ActiveTab?this.props.widgetProps.ActiveTab:"";if(defaultTab=activeTab||defaultTab,tabList){var defaultTabIndx=0;defaultTab&&tabList&&tabList.map(function(tabItem,indx){tabItem.value==defaultTab&&(defaultTabIndx=indx)}),this.setState({tabList:tabList,selectedTab:defaultTabIndx})}}}},{key:"render",value:function(){var _this2=this,tabsList=[];this.state.tabList&&this.state.tabList.map(function(tabItem,indx){tabsList.push(React.createElement(Tab,{label:tabItem.name,value:tabItem.value}))});var embeddedStyles=null;return this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles)),React.createElement("div",null,embeddedStyles,React.createElement(Tabs,{selected:this.state.selectedTab,onSelectionChange:function(val){if(_this2.state.selectedTab!=val){_this2.setState({selectedTab:val});var widgetProps=cloneDeep(_this2.props.widgetProps)||{},tabListItem=_this2.state.tabList[val];widgetProps.ActiveTab=tabListItem?tabListItem.value?tabListItem.value:tabListItem.name:"",_this2.props.updateStore({updates:{widgetProps:widgetProps}})}}},tabsList))}}]),_SrsSimpleTabs_}(React.Component),_export("SrsSimpleTabs",SrsSimpleTabs=function(props){return _SrsSimpleTabs_}),_export("SrsSimpleTabs",SrsSimpleTabs)}}}),System.register("component/studio/SrsSortableList.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/slicedToArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/toConsumableArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-sortable-hoc","react-select","@carbon/icons-react/lib/overflow-menu--vertical/20","lodash"],function(_export,_context){"use strict";var _extends,_slicedToArray,_toConsumableArray,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SortableContainer,SortableElement,sortableHandle,DragHandler,_,SortableItem,SortableList,_SrsSortableList_,SrsSortableList,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs){_slicedToArray=_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs){_toConsumableArray=_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactSortableHoc){SortableContainer=_reactSortableHoc.SortableContainer,SortableElement=_reactSortableHoc.SortableElement,sortableHandle=_reactSortableHoc.sortableHandle},function(_reactSelect){_reactSelect.default,_reactSelect.components},function(_carbonIconsReactLibOverflowMenuVertical){DragHandler=_carbonIconsReactLibOverflowMenuVertical.default},function(_lodash){_=_lodash.default}],execute:function(){SortableItem=SortableElement(function(_ref){var value=_ref.value,DraggableHandle=sortableHandle(function(_ref2){return _ref2.children});return React.createElement("div",{style:{display:"flex",flexDirection:"row",height:20,backgroundColor:"white",maxWidth:120,borderRadius:20,fontSize:"small",padding:2,minWidth:80,border:"1px solid #c1bebe",margin:2}},React.createElement(DraggableHandle,null,React.createElement(DragHandler,{className:"dragHandle",style:{zIndex:100,flex:"none",width:15,height:"100%",cursor:"-webkit-grab",cursor:"grab"}})),React.createElement("div",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}},value))}),SortableList=SortableContainer(function(_ref3){var items=_ref3.items,lockaxis=(_ref3.axis,_ref3.lockaxis);return React.createElement("div",{style:{display:"flex",flexDirection:"row",margin:2,padding:2,overflow:"auto",width:"inherit",flexWrap:lockaxis?"unset":"wrap"}},items.map(function(value,index){return React.createElement(SortableItem,{key:"item-"+value,index:index,value:value})}))}),_SrsSortableList_=function(_React$Component){function _SrsSortableList_(props){_classCallCheck(this,_SrsSortableList_);var _this=_possibleConstructorReturn(this,(_SrsSortableList_.__proto__||Object.getPrototypeOf(_SrsSortableList_)).call(this,props)),itemObjects=_this.props.inputdata?"string"==typeof _this.props.inputdata?JSON.parse(_this.props.inputdata):_this.props.inputdata:{},items=[];if(itemObjects&&itemObjects.length>0)for(var itemObjIndx in itemObjects){var itemObj=itemObjects[itemObjIndx];items.push(itemObj.text+"("+itemObj.id+")")}return _this.state={items:items},_this.onSortEnd=_this.onSortEnd.bind(_this),_this.arrayMove=_this.arrayMove.bind(_this),_this}return _inherits(_SrsSortableList_,_React$Component),_createClass(_SrsSortableList_,[{key:"componentDidUpdate",value:function(prevProps,prevState){if(prevProps.inputdata!=this.props.inputdata||!_.isEqual(prevProps.inputdata,this.props.inputdata)){var itemObjects=this.props.inputdata?"string"==typeof this.props.inputdata?JSON.parse(this.props.inputdata):this.props.inputdata:{},items=[];if(itemObjects&&itemObjects.length>0)for(var itemObjIndx in itemObjects){var itemObj=itemObjects[itemObjIndx];items.push(itemObj.text+"("+itemObj.id+")")}this.setState({items:items})}}},{key:"arrayMove",value:function(array,from,to){array=[].concat(_toConsumableArray(array));var startIndex=from<0?array.length+from:from;if(startIndex>=0&&startIndex<array.length){var endIndex=to<0?array.length+to:to,_array$splice=array.splice(from,1),item=_slicedToArray(_array$splice,1)[0];array.splice(endIndex,0,item)}return array}},{key:"onSortEnd",value:function(_ref4){var oldIndex=_ref4.oldIndex,newIndex=_ref4.newIndex,items=this.arrayMove(this.state.items,oldIndex,newIndex);if(this.setState({items:items}),this.props.listkey){var sortedList=Object.assign({},this.props.sortedlist)||{};try{JSON.parse(this.props.inputdata)}catch(err){}var updatedItems=[];if(items&&items.length>0)for(var itemObjIndx in items){var itemParts=items[itemObjIndx].split("("),itemPartsLength=itemParts.length,itemName=itemParts.slice(0,itemPartsLength-1).join("("),itemId=itemParts[itemPartsLength-1].split(")")[0];updatedItems.push({id:itemId,text:itemName})}sortedList[this.props.listkey]=updatedItems,this.props.updateStore({updates:{sortedlist:sortedList}})}}},{key:"render",value:function(){var moreProps={};return this.props.lockaxis&&(moreProps.lockAxis=this.props.lockaxis),React.createElement(SortableList,_extends({axis:this.props.axis?this.props.axis:"x"},moreProps,{useDragHandle:!0,items:this.state.items,onSortEnd:this.onSortEnd}))}}]),_SrsSortableList_}(React.Component),_export("SrsSortableList",SrsSortableList=function(props){return _SrsSortableList_}),_export("SrsSortableList",SrsSortableList),_export("default",SrsSortableList),_export("states",states=[{KeyName:"sortedlist",AccessPath:"sortedlist",DefaultValue:'{"sortedlist": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsSortableList/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/slicedToArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/toConsumableArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-sortable-hoc","react-select","@carbon/icons-react/lib/overflow-menu--vertical/20","lodash"],function(_export,_context){"use strict";var _extends,_slicedToArray,_toConsumableArray,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SortableContainer,SortableElement,sortableHandle,DragHandler,_,SortableItem,SortableList,_SrsSortableList_,SrsSortableList;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs){_slicedToArray=_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs){_toConsumableArray=_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactSortableHoc){SortableContainer=_reactSortableHoc.SortableContainer,SortableElement=_reactSortableHoc.SortableElement,sortableHandle=_reactSortableHoc.sortableHandle},function(_reactSelect){_reactSelect.default,_reactSelect.components},function(_carbonIconsReactLibOverflowMenuVertical){DragHandler=_carbonIconsReactLibOverflowMenuVertical.default},function(_lodash){_=_lodash.default}],execute:function(){SortableItem=SortableElement(function(_ref){var value=_ref.value,DraggableHandle=sortableHandle(function(_ref2){return _ref2.children});return React.createElement("div",{style:{display:"flex",flexDirection:"row",height:20,backgroundColor:"white",maxWidth:120,borderRadius:20,fontSize:"small",padding:2,minWidth:80,border:"1px solid #c1bebe",margin:2}},React.createElement(DraggableHandle,null,React.createElement(DragHandler,{className:"dragHandle",style:{zIndex:100,flex:"none",width:15,height:"100%",cursor:"-webkit-grab",cursor:"grab"}})),React.createElement("div",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}},value))}),SortableList=SortableContainer(function(_ref3){var items=_ref3.items,lockaxis=(_ref3.axis,_ref3.lockaxis);return React.createElement("div",{style:{display:"flex",flexDirection:"row",margin:2,padding:2,overflow:"auto",width:"inherit",flexWrap:lockaxis?"unset":"wrap"}},items.map(function(value,index){return React.createElement(SortableItem,{key:"item-"+value,index:index,value:value})}))}),_SrsSortableList_=function(_React$Component){function _SrsSortableList_(props){_classCallCheck(this,_SrsSortableList_);var _this=_possibleConstructorReturn(this,(_SrsSortableList_.__proto__||Object.getPrototypeOf(_SrsSortableList_)).call(this,props)),itemObjects=_this.props.inputdata?"string"==typeof _this.props.inputdata?JSON.parse(_this.props.inputdata):_this.props.inputdata:{},items=[];if(itemObjects&&itemObjects.length>0)for(var itemObjIndx in itemObjects){var itemObj=itemObjects[itemObjIndx];items.push(itemObj.text+"("+itemObj.id+")")}return _this.state={items:items},_this.onSortEnd=_this.onSortEnd.bind(_this),_this.arrayMove=_this.arrayMove.bind(_this),_this}return _inherits(_SrsSortableList_,_React$Component),_createClass(_SrsSortableList_,[{key:"componentDidUpdate",value:function(prevProps,prevState){if(prevProps.inputdata!=this.props.inputdata||!_.isEqual(prevProps.inputdata,this.props.inputdata)){var itemObjects=this.props.inputdata?"string"==typeof this.props.inputdata?JSON.parse(this.props.inputdata):this.props.inputdata:{},items=[];if(itemObjects&&itemObjects.length>0)for(var itemObjIndx in itemObjects){var itemObj=itemObjects[itemObjIndx];items.push(itemObj.text+"("+itemObj.id+")")}this.setState({items:items})}}},{key:"arrayMove",value:function(array,from,to){array=[].concat(_toConsumableArray(array));var startIndex=from<0?array.length+from:from;if(startIndex>=0&&startIndex<array.length){var endIndex=to<0?array.length+to:to,_array$splice=array.splice(from,1),item=_slicedToArray(_array$splice,1)[0];array.splice(endIndex,0,item)}return array}},{key:"onSortEnd",value:function(_ref4){var oldIndex=_ref4.oldIndex,newIndex=_ref4.newIndex,items=this.arrayMove(this.state.items,oldIndex,newIndex);if(this.setState({items:items}),this.props.listkey){var sortedList=Object.assign({},this.props.sortedlist)||{};try{JSON.parse(this.props.inputdata)}catch(err){}var updatedItems=[];if(items&&items.length>0)for(var itemObjIndx in items){var itemParts=items[itemObjIndx].split("("),itemPartsLength=itemParts.length,itemName=itemParts.slice(0,itemPartsLength-1).join("("),itemId=itemParts[itemPartsLength-1].split(")")[0];updatedItems.push({id:itemId,text:itemName})}sortedList[this.props.listkey]=updatedItems,this.props.updateStore({updates:{sortedlist:sortedList}})}}},{key:"render",value:function(){var moreProps={};return this.props.lockaxis&&(moreProps.lockAxis=this.props.lockaxis),React.createElement(SortableList,_extends({axis:this.props.axis?this.props.axis:"x"},moreProps,{useDragHandle:!0,items:this.state.items,onSortEnd:this.onSortEnd}))}}]),_SrsSortableList_}(React.Component),_export("SrsSortableList",SrsSortableList=function(props){return _SrsSortableList_}),_export("SrsSortableList",SrsSortableList)}}}),System.register("component/studio/SrsSortableNestedList.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","sortablejs/modular/sortable.core.esm.js","react-html-parser","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/add--filled/20","@carbon/icons-react/lib/arrow--up/20","@carbon/icons-react/lib/arrow--down/20","@carbon/icons-react/lib/caret--left/20","client/script/studio/Convert2JSONSchema.js","client/script/studio/Convert2UISchema2.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Sortable,AutoScroll,parse,processNodes,Edit,Add,AddUp,AddDown,Left,convert2UISchema,_SrsSortableNestedList_,SrsSortableNestedList,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_sortablejsModularSortableCoreEsmJs){Sortable=_sortablejsModularSortableCoreEsmJs.default,AutoScroll=_sortablejsModularSortableCoreEsmJs.AutoScroll},function(_reactHtmlParser){parse=_reactHtmlParser.default,processNodes=_reactHtmlParser.processNodes,_reactHtmlParser.convertNodeToElement,_reactHtmlParser.htmlparser2,_reactHtmlParser.attributesToProps},function(_carbonIconsReactLibEdit){Edit=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibAddFilled){Add=_carbonIconsReactLibAddFilled.default},function(_carbonIconsReactLibArrowUp){AddUp=_carbonIconsReactLibArrowUp.default},function(_carbonIconsReactLibArrowDown){AddDown=_carbonIconsReactLibArrowDown.default},function(_carbonIconsReactLibCaretLeft){Left=_carbonIconsReactLibCaretLeft.default},function(_clientScriptStudioConvert2JSONSchemaJs){_clientScriptStudioConvert2JSONSchemaJs.default},function(_clientScriptStudioConvert2UISchema2Js){convert2UISchema=_clientScriptStudioConvert2UISchema2Js.default}],execute:function(){_SrsSortableNestedList_=function(_React$Component){function _SrsSortableNestedList_(props){_classCallCheck(this,_SrsSortableNestedList_);var _this=_possibleConstructorReturn(this,(_SrsSortableNestedList_.__proto__||Object.getPrototypeOf(_SrsSortableNestedList_)).call(this,props));if(window.sortAutoScroll||(Sortable.mount(new AutoScroll),window.sortAutoScroll=!0),_this.defaultData=_this.props.data?_this.props.data:{dataType:"Root",Properties:[]},"string"==typeof _this.defaultData)try{_this.defaultData=JSON.parse(_this.defaultData)}catch(err){}_this.createHTML=_this.createHTML.bind(_this),_this.html2JSON=_this.html2JSON.bind(_this),_this.createDataFromHTML=_this.createDataFromHTML.bind(_this),_this.camelcase2Snakecase=_this.camelcase2Snakecase.bind(_this),_this.snakecase2Camelcase=_this.snakecase2Camelcase.bind(_this),_this.handleChange=_this.handleChange.bind(_this),_this.getDataSchemaFromRawUISchema=_this.getDataSchemaFromRawUISchema.bind(_this);var htmlContent=null;if(_this.defaultData){var htmlContentStr=_this.createHTMLStr(_this.defaultData);htmlContent=_this.createHTML(htmlContentStr)}else htmlContent=React.createElement("div",null,"No data");return _this.state={currentData:_this.defaultData,htmlContent:htmlContent},_this}return _inherits(_SrsSortableNestedList_,_React$Component),_createClass(_SrsSortableNestedList_,[{key:"getDataSchemaFromRawUISchema",value:function(nodeEl,dataSchemaElements){var _this2=this;nodeEl&&nodeEl.elements&&nodeEl.elements.length>0&&nodeEl.elements.map(function(ele,indx){if(ele)if(ele.elements)_this2.getDataSchemaFromRawUISchema(ele,dataSchemaElements);else if("Control"==ele.type){var controlCode="";ele.scope&&ele.scope.indexOf("#/properties/")>-1&&(controlCode=ele.scope.split("#/properties/")[1]),controlCode&&dataSchemaElements.push({type:ele.subtype||"string",code:controlCode,label:ele.label||controlCode,name:controlCode})}})}},{key:"handleChange",value:function(payload){if(this.props.isformcontrol+""=="true"&&this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);if(payload.operation)controlProps[this.props.controlname]={operation:payload.operation,itemtype:payload.itemtype,ts:Date.now()};else{var controlPropData={};payload.updatedJSON&&(controlPropData.data=payload.updatedJSON),payload.uiSchema&&(controlPropData.uiSchema=payload.uiSchema),payload.dataSchema&&(controlPropData.dataSchema=payload.dataSchema),controlProps[this.props.controlname]=controlPropData}this.props.updateStore({updates:{controlProps:controlProps}})}}},{key:"componentDidMount",value:function(){var i,_this3=this;this.refs.topElement&&function(){var nestedSortables=$(_this3.refs.topElement).find(".nested"),createDataFn=_this3.createDataFromHTML;for(i=0;i<nestedSortables.length;i++)new Sortable(nestedSortables[i],{group:"nested",animation:150,fallbackOnBody:!0,invertSwap:!0,swapThreshold:.05,onEnd:function(evt){createDataFn(evt)}})}()}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this4=this,dataProp=this.props.data?this.props.data:{},htmlContentStr=void 0,htmlContent=void 0;if("string"==typeof dataProp)try{dataProp=JSON.parse(dataProp)}catch(err){}if(_.isEqual(prevProps.data,this.props.data)||_.isEqual(dataProp,this.state.currentData)||!this.refs.topElement)if(prevState.enableSorting!=this.state.enableSorting){var i;!function(){var nestedSortables=$(_this4.refs.topElement).find(".nested"),createDataFn=_this4.createDataFromHTML;for(i=0;i<nestedSortables.length;i++)new Sortable(nestedSortables[i],{group:"nested",animation:150,fallbackOnBody:!0,swapThreshold:.65,onEnd:function(evt){createDataFn(evt)}})}()}else if(_.isEqual(prevState.refreshContent,this.state.refreshContent)){if(this.props.delta&&!_.isEqual(prevProps.delta,this.props.delta)){var lineType="",deltaValue={};if("string"==typeof this.props.delta)try{lineType=(deltaValue=JSON.parse(this.props.delta)).dataType}catch(err){}if(lineType){var deltaHtmlSnippet=this.createHTMLStr(deltaValue);$(this.refs.topElement).find(".add-active").replaceWith(deltaHtmlSnippet),htmlContentStr=$(this.refs.topElement)[0].innerHTML,htmlContent=this.createHTML(htmlContentStr),this.setState({htmlContent:htmlContent,htmlContentStr:htmlContentStr,refreshContent:Date.now()})}}}else{var newPayload=this.getDataFromHTML(),updatedContentStr=this.createHTMLStr(newPayload),updatedHtmlContent=this.createHTML(updatedContentStr),uiSchema=convert2UISchema(newPayload),dataSchemaElements=[];this.getDataSchemaFromRawUISchema(uiSchema,dataSchemaElements);var dataSchema={type:"object",properties:{}};for(var dataSchemaElIndx in dataSchemaElements){var dataSchemaEl=dataSchemaElements[dataSchemaElIndx];dataSchema.properties[dataSchemaEl.name]=dataSchemaEl}this.setState({currentData:newPayload,htmlContentStr:updatedContentStr,htmlContent:updatedHtmlContent,enableSorting:Date.now()}),this.handleChange({updatedJSON:newPayload,uiSchema:uiSchema,dataSchema:dataSchema})}else htmlContentStr=this.createHTMLStr(dataProp),htmlContent=this.createHTML(htmlContentStr),this.setState({htmlContent:htmlContent,htmlContentStr:htmlContentStr})}},{key:"getDataFromHTML",value:function(evt){if(this.refs.topElement){var el=this.refs.topElement.children[0];return this.html2JSON(el)}return null}},{key:"createDataFromHTML",value:function(evt){if(this.refs.topElement){var el=this.refs.topElement.children[0],newPayload=this.html2JSON(el);this.setState({currentData:newPayload});var uiSchema=convert2UISchema(newPayload),dataSchemaElements=[];this.getDataSchemaFromRawUISchema(uiSchema,dataSchemaElements);var dataSchema={type:"object",properties:{}};for(var dataSchemaElIndx in dataSchemaElements){var dataSchemaEl=dataSchemaElements[dataSchemaElIndx];dataSchema.properties[dataSchemaEl.name]=dataSchemaEl}this.setState({currentData:newPayload}),this.handleChange({updatedJSON:newPayload,uiSchema:uiSchema,dataSchema:dataSchema})}}},{key:"html2JSON",value:function(e){var _this5=this,output={},isListGroupItem=e.attributes.class&&e.attributes.class&&e.attributes.class.value.indexOf("list-group-item")>-1,isListGroup=!isListGroupItem&&e.attributes.class&&e.attributes.class&&e.attributes.class.value.indexOf("list-group")>-1,isNestedClass=e.attributes.class&&e.attributes.class&&e.attributes.class.value.indexOf("nested")>-1,isNestedAttr=e.attributes.nested&&e.attributes.nested.value+""=="true";if(isListGroup&&isNestedClass)return e.attributes.datatype&&(output.dataType=e.attributes.datatype.value),"Group"==output.dataType&&(output.label=e.attributes.label.value),output.Properties=[],Array.from(e.children,function(el){output.Properties.push(_this5.html2JSON(el))}),output;if(isNestedAttr){if(e.children&&e.children.length>0)for(var childIndx=0;childIndx<e.children.length;childIndx++){var childEl=e.children[childIndx];if(childEl.attributes.class&&childEl.attributes.class&&childEl.attributes.class.value.indexOf("list-group")>-1){output=this.html2JSON(e.children[childIndx]);break}}return output}return e.attributes.datatype&&(output.dataType=e.attributes.datatype.value),isListGroupItem&&Array.from(e.attributes,function(_ref){var name=_ref.name,value=_ref.value;if("datatype"!=name.toLowerCase()&&"class"!=name.toLowerCase()&&"style"!=name.toLowerCase()){var attrName="align1"==name?"align":name;attrName=_this5.snakecase2Camelcase(attrName),value.indexOf("QUOT")>-1&&(value=value.replaceAll("QUOT",'"')),value.startsWith("JSON:")&&(value=value.replace("JSON:",""),value=JSON.parse(value)),output[attrName]="true"==value||"false"==value?"true"==value:value}}),output.controlprops&&(output.controlprops.name?output.label=output.controlprops.name:output.controlprops.label&&(output.label=output.controlprops.label)),output}},{key:"camelcase2Snakecase",value:function(str){return str.replace(/[A-Z]/g,function(letter){return"_"+letter.toLowerCase()})}},{key:"snakecase2Camelcase",value:function(str){return str.replace(/([-_][a-z])/gi,function($1){return $1.toUpperCase().replace("-","").replace("_","")})}},{key:"createHTML",value:function(htmlContentStr){var self=this;return parse(htmlContentStr,{transform:function transform(domNode,nodeIndx){if("control"==domNode.name)return React.createElement("div",{dataType:"Control",label:domNode.attribs.label||"Empty",controlprops:"JSON:"+JSON.stringify(domNode.attribs),onMouseEnter:function(e){e.target;var controlActions=$(e.target).find(".controlactions"),anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],controlactionEl=$(g).find(".controlactions");controlactionEl&&controlactionEl.length>0&&controlactionEl.addClass("hide")}controlActions&&controlActions.length>0&&$(controlActions[0]).removeClass("hide")},onMouseLeave:function(e){e.target;var controlActions=$(e.target).find(".controlactions");controlActions&&controlActions.length>0&&controlActions.addClass("hide")},class:"list-group-item"},React.createElement("div",{class:"grop-item-header"},React.createElement("div",{class:"group-title"},"Control: ",domNode.attribs.label||"Empty"),React.createElement("div",{class:"controlactions hide"},React.createElement(Edit,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1];$(g).find(".list-group-item").removeClass("edit-active")}$(e.target).closest(".list-group-item").addClass("edit-active")}}),React.createElement("div",{class:"create-btn-group collapsed"},React.createElement(Add,{onClick:function(e){var referenceEl=$(e.target).closest(".create-btn-group");if(referenceEl&&referenceEl.length>0){var isSubGroupHidden=referenceEl.find(".create-btn-subgroup").hasClass("hide"),anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1];$(g).find(".create-btn-subgroup").addClass("hide")}isSubGroupHidden?(referenceEl.find(".create-btn-subgroup").removeClass("hide"),referenceEl.removeClass("collapsed"),referenceEl.addClass("expanded")):(referenceEl.find(".create-btn-subgroup").addClass("hide"),referenceEl.removeClass("expanded"),referenceEl.addClass("collapsed"))}}}),React.createElement("div",{class:"create-btn-subgroup hide"},React.createElement(AddUp,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],itemEl=$(g).find(".list-group-item");if(itemEl&&itemEl.length>0)for(var itemElIndx in itemEl){var itemElItem=itemEl[itemElIndx];$(itemElItem).hasClass("add-active")&&($(itemElItem).hasClass("draft")?$(itemElItem).remove():$(itemElItem).removeClass("add-active"))}}var referenceEl=$(e.target).closest(".list-group-item");referenceEl.parent()[0].insertBefore($.parseHTML('<div class="list-group-item add-active draft"/>')[0],referenceEl[0]),self.handleChange({operation:"add-up",itemtype:"control"})}}),React.createElement(AddDown,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],itemEl=$(g).find(".list-group-item");if(itemEl&&itemEl.length>0)for(var itemElIndx in itemEl){var itemElItem=itemEl[itemElIndx];$(itemElItem).hasClass("add-active")&&($(itemElItem).hasClass("draft")?$(itemElItem).remove():$(itemElItem).removeClass("add-active"))}}var referenceEl=$(e.target).closest(".list-group-item"),nextElement=referenceEl[0].nextSibling;nextElement?referenceEl.parent()[0].insertAfter($.parseHTML('<div class="list-group-item add-active draft"/>')[0],nextElement):referenceEl.parent()[0].appendChild($.parseHTML('<div class="list-group-item add-active draft"/>')[0]),self.handleChange({operation:"add-down",itemtype:"control"})}}))),React.createElement(Left,{onClick:function(e){}}))));if("layout"===domNode.name)switch(domNode.attribs.type){case"root":return React.createElement("div",{dataType:"Root",label:domNode.attribs.label||"Empty",class:"list-group-item",nested:"true"},React.createElement("div",{class:"grop-item-header"},React.createElement("div",{class:"group-title"},"Start"),React.createElement("div",{class:"rootcontrolactions"},React.createElement("div",{class:"create-btn-group collapsed"},React.createElement(Add,{onClick:function(e){var referenceEl=$(e.target).closest(".list-group-item");referenceEl.find(".add-active").remove(),(referenceEl=referenceEl.find('.list-group[dataType="Root"]')).append($.parseHTML('<div class="list-group-item add-active draft"/>')[0]),self.handleChange({operation:"add-down",itemtype:"root"})}})))),React.createElement("div",{dataType:"Root",class:"list-group nested"},processNodes(domNode.children,transform)));case"group":return React.createElement("div",{dataType:"Group",label:domNode.attribs.label||"Empty",onMouseEnter:function(e){e.target;var controlActions=$(e.target).find(".controlactions"),anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],controlactionEl=$(g).find(".controlactions");controlactionEl&&controlactionEl.length>0&&controlactionEl.addClass("hide")}controlActions&&controlActions.length>0&&$(controlActions[0]).removeClass("hide")},onMouseLeave:function(e){e.target;var controlActions=$(e.target).find(".controlactions");controlActions&&controlActions.length>0&&controlActions.addClass("hide")},class:"list-group-item",nested:"true"},React.createElement("div",{class:"grop-item-header"},React.createElement("div",{class:"group-title"},"Group: ",domNode.attribs.label||"Empty"),React.createElement("div",{class:"controlactions hide"},React.createElement(Edit,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1];$(g).find(".list-group-item").removeClass("edit-active")}$(e.target).closest(".list-group-item").addClass("edit-active")}}),React.createElement("div",{class:"create-btn-group collapsed"},React.createElement(Add,{onClick:function(e){var referenceEl=$(e.target).closest(".create-btn-group");if(referenceEl&&referenceEl.length>0){var isSubGroupHidden=referenceEl.find(".create-btn-subgroup").hasClass("hide"),anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1];$(g).find(".create-btn-subgroup").addClass("hide")}isSubGroupHidden?(referenceEl.find(".create-btn-subgroup").removeClass("hide"),referenceEl.removeClass("collapsed"),referenceEl.addClass("expanded")):(referenceEl.find(".create-btn-subgroup").addClass("hide"),referenceEl.removeClass("expanded"),referenceEl.addClass("collapsed"))}}}),React.createElement("div",{class:"create-btn-subgroup hide"},React.createElement(AddUp,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],itemEl=$(g).find(".list-group-item");if(itemEl&&itemEl.length>0)for(var itemElIndx in itemEl){var itemElItem=itemEl[itemElIndx];$(itemElItem).hasClass("add-active")&&($(itemElItem).hasClass("draft")?$(itemElItem).remove():$(itemElItem).removeClass("add-active"))}}var referenceEl=$(e.target).closest(".list-group-item");referenceEl.parent()[0].insertBefore($.parseHTML('<div class="list-group-item add-active draft"/>')[0],referenceEl[0]),self.handleChange({operation:"add-up",itemtype:"group"})}}),React.createElement(AddDown,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],itemEl=$(g).find(".list-group-item");if(itemEl&&itemEl.length>0)for(var itemElIndx in itemEl){var itemElItem=itemEl[itemElIndx];$(itemElItem).hasClass("add-active")&&($(itemElItem).hasClass("draft")?$(itemElItem).remove():$(itemElItem).removeClass("add-active"))}}var referenceEl=$(e.target).closest(".list-group-item"),nextElement=referenceEl[0].nextSibling;nextElement?referenceEl.parent()[0].insertAfter($.parseHTML('<div class="list-group-item add-active draft"/>')[0],nextElement):referenceEl.parent()[0].appendChild($.parseHTML('<div class="list-group-item add-active draft"/>')[0]),self.handleChange({operation:"add-down",itemtype:"group"})}}))),React.createElement(Left,{onClick:function(e){}}))),React.createElement("div",{dataType:"Group",label:domNode.attribs.label||"Empty",class:"list-group nested"},processNodes(domNode.children,transform)));case"VerticalLayout":case"HorizontalLayout":case"Categorization":return React.createElement("div",{dataType:domNode.attribs.type,onMouseEnter:function(e){e.target;var controlActions=$(e.target).find(".controlactions"),anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],controlactionEl=$(g).find(".controlactions");controlactionEl&&controlactionEl.length>0&&controlactionEl.addClass("hide")}controlActions&&controlActions.length>0&&$(controlActions[0]).removeClass("hide")},onMouseLeave:function(e){e.target;var controlActions=$(e.target).find(".controlactions");controlActions&&controlActions.length>0&&$(controlActions[0]).addClass("hide")},class:"list-group-item",nested:"true"},React.createElement("div",{class:"grop-item-header"},React.createElement("div",{class:"group-title"},domNode.attribs.type),React.createElement("div",{class:"controlactions hide"},React.createElement(Edit,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1];$(g).find(".list-group-item").removeClass("edit-active")}$(e.target).closest(".list-group-item").addClass("edit-active")}}),React.createElement("div",{class:"create-btn-group collapsed"},React.createElement(Add,{onClick:function(e){var referenceEl=$(e.target).closest(".create-btn-group");if(referenceEl&&referenceEl.length>0){var isSubGroupHidden=referenceEl.find(".create-btn-subgroup").hasClass("hide"),anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1];$(g).find(".create-btn-subgroup").addClass("hide")}isSubGroupHidden?(referenceEl.find(".create-btn-subgroup").removeClass("hide"),referenceEl.removeClass("collapsed"),referenceEl.addClass("expanded")):(referenceEl.find(".create-btn-subgroup").addClass("hide"),referenceEl.removeClass("expanded"),referenceEl.addClass("collapsed"))}}}),React.createElement("div",{class:"create-btn-subgroup hide"},React.createElement(AddUp,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],itemEl=$(g).find(".list-group-item");if(itemEl&&itemEl.length>0)for(var itemElIndx in itemEl){var itemElItem=itemEl[itemElIndx];$(itemElItem).hasClass("add-active")&&($(itemElItem).hasClass("draft")?$(itemElItem).remove():$(itemElItem).removeClass("add-active"))}}var referenceEl=$(e.target).closest(".list-group-item");referenceEl.parent()[0].insertBefore($.parseHTML('<div class="list-group-item add-active draft"/>')[0],referenceEl[0]),self.handleChange({operation:"add-up",itemtype:"group"})}}),React.createElement(AddDown,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],itemEl=$(g).find(".list-group-item");if(itemEl&&itemEl.length>0)for(var itemElIndx in itemEl){var itemElItem=itemEl[itemElIndx];$(itemElItem).hasClass("add-active")&&($(itemElItem).hasClass("draft")?$(itemElItem).remove():$(itemElItem).removeClass("add-active"))}}var referenceEl=$(e.target).closest(".list-group-item"),nextElement=referenceEl[0].nextSibling;nextElement?referenceEl.parent()[0].insertAfter($.parseHTML('<div class="list-group-item add-active draft"/>')[0],nextElement):referenceEl.parent()[0].appendChild($.parseHTML('<div class="list-group-item add-active draft"/>')[0]),self.handleChange({operation:"add-down",itemtype:"group"})}}))),React.createElement(Left,{onClick:function(e){}}))),React.createElement("div",{dataType:domNode.attribs.type,class:"list-group nested"},processNodes(domNode.children,transform)))}}})}},{key:"createHTMLStr",value:function(tempObj){var output="";if(tempObj&&tempObj.dataType){if("Root"==tempObj.dataType){if(output+='<layout type="root">',tempObj.Properties)for(var propsIndx in tempObj.Properties){var prop=tempObj.Properties[propsIndx];output+=this.createHTMLStr(prop)}return output+="</layout>"}if("Group"==tempObj.dataType){if(output=output+'<layout type="group" label="'+tempObj.label+'">',tempObj.Properties)for(var _propsIndx in tempObj.Properties){var _prop=tempObj.Properties[_propsIndx];output+=this.createHTMLStr(_prop)}return output+="</layout>"}if(tempObj.Properties||"VerticalLayout"==tempObj.dataType||"HorizontalLayout"==tempObj.dataType||"Categorization"==tempObj.dataType){if(output=output+'<layout type="'+tempObj.dataType+'" label="'+tempObj.label+'">',tempObj.Properties)for(var _propsIndx2 in tempObj.Properties){var _prop2=tempObj.Properties[_propsIndx2];output+=this.createHTMLStr(_prop2)}return output+="</layout>"}var attrNames=Object.keys(tempObj),attrs="",name="";for(var attrIndx in attrNames){var attrName=attrNames[attrIndx];if("controlprops"!=attrName.toLowerCase()){var changedAttrName="align"==attrName?"align1":this.camelcase2Snakecase(attrName);if("string"!=typeof tempObj[attrName]&&tempObj[attrName])JSON.stringify(tempObj[attrName]).indexOf('"')>-1?attrs+=changedAttrName+'="JSON:'+JSON.stringify(tempObj[attrName]).replaceAll('"',"QUOT")+'"':attrs+=changedAttrName+'="'+JSON.stringify(tempObj[attrName])+'"';else attrs+=changedAttrName+'="'+(tempObj[attrName]?tempObj[attrName]:"").replaceAll('"',"QUOT")+'" '}}return"Control"==tempObj.dataType?name="Control: "+tempObj.scope:"Label"==tempObj.dataType?name="Label: "+tempObj.text:"Actions"==tempObj.dataType?name="Actions":"List"==tempObj.dataType?name="List: "+(tempObj.name||"Empty"):"CustomComponent"==tempObj.dataType&&(name="Custom Component: "+(tempObj.name||"Empty")),"<control "+attrs+' class="list-group-item">'+name+"</control>"}}},{key:"render",value:function(){return React.createElement(React.Fragment,null,React.createElement("style",null,'@import url("/component/studio/SrsSortableNestedList/Style.css");'),React.createElement("div",{ref:"topElement"},this.state.htmlContent))}}]),_SrsSortableNestedList_}(React.Component),_export("SrsSortableNestedList",SrsSortableNestedList=function(props){return _SrsSortableNestedList_}),_export("SrsSortableNestedList",SrsSortableNestedList),_export("default",SrsSortableNestedList),_export("states",states=[{KeyName:"controlProps",AccessPath:"controls.${pageid}${pagesuffix}_${controlid}",DefaultValue:'{"controls": {"${pageid}${pagesuffix}_${controlid}": {}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("client/script/studio/Convert2JSONSchema.js",[],function(_export,_context){"use strict";return _export("default",function(inputObj){var result={};try{result=function convertSubObject(inputObj){var result={},requiredFields=[];if("object"==inputObj.dataType){for(var propIndx in result.type="object",result.properties={},inputObj.Properties){var propObj=inputObj.Properties[propIndx];result.properties[propObj.name]=convertSubObject(propObj),propObj.required+""=="true"&&requiredFields.push(propObj.name)}return requiredFields.length>0&&(result.required=requiredFields),result}if("list"==inputObj.dataType)return result.type="string",result.subtype="list",inputObj.description&&(result.description=inputObj.description),inputObj.table&&(result.table=inputObj.table),inputObj.fields&&(result.fields=inputObj.fields),result;var inputObjKeys=Object.keys(inputObj);for(var inputObjIndx in inputObjKeys){var inputObjKey=inputObjKeys[inputObjIndx];"dataType"==inputObjKey?result.type=inputObj.dataType:result[inputObjKey]=inputObj[inputObjKey]}return result}(inputObj)}catch(err){}return result}),{setters:[],execute:function(){}}}),System.register("client/script/studio/Convert2UISchema2.js",[],function(_export,_context){"use strict";function applyRule(inputObj,result){if(result.rule={},result.rule.condition={},inputObj.rule.effect&&(result.rule.effect=inputObj.rule.effect),inputObj.rule.scope&&(result.rule.condition.scope="#/properties/"+inputObj.rule.scope),"LEAF"==inputObj.rule.condition)result.rule.condition.expectedValue=inputObj.rule.expectedValue;else if("SCHEMA"==inputObj.rule.condition&&(inputObj.rule.schemaType&&"Simple"==inputObj.rule.schemaType.schemaType&&(result.rule.condition.scope="#/properties/"+inputObj.rule.scope,result.rule.condition.schema={enum:[inputObj.rule.schemaType.expectedValue]}),inputObj.rule.schemaType&&("allOf"==inputObj.rule.schemaType.schemaType||"anyOf"==inputObj.rule.schemaType.schemaType||"oneOf"==inputObj.rule.schemaType.schemaType)&&(result.rule.condition.schema={},inputObj.rule.schemaType.Properties))){var expectedValues=[];for(var propIndx in inputObj.rule.schemaType.Properties){var propObj=inputObj.rule.schemaType.Properties[propIndx];expectedValues.push(propObj.expectedValue)}result.rule.condition.schema={enum:expectedValues}}return result}return _export("default",function(inputObj){var result={};try{result=function convertSubObject(inputObj){var result={};if("VerticalLayout"==inputObj.dataType||"HorizontalLayout"==inputObj.dataType||"Group"==inputObj.dataType||"Categorization"==inputObj.dataType||"Category"==inputObj.dataType||"Root"==inputObj.dataType){for(var propIndx in result.type="Root"==inputObj.dataType?"VerticalLayout":inputObj.dataType,inputObj.scope&&(result.scope="#/properties/"+inputObj.scope),inputObj.code&&(result.code=inputObj.code),"Category"!=inputObj.dataType&&"Group"!=inputObj.dataType||(result.label=inputObj.label||inputObj.name),"Categorization"==inputObj.dataType&&inputObj.Stepper+""=="true"&&(result.options={variant:"stepper"},inputObj.StepNavigation+""=="true"&&(result.options.showNavButtons=!0)),inputObj.rule&&(result=applyRule(inputObj,result)),inputObj.inlinestyles&&(result.inlinestyles=inputObj.inlinestyles),result.elements=[],inputObj.Properties){var propObj=inputObj.Properties[propIndx];result.elements.push(convertSubObject(propObj))}return result}if("Control"==inputObj.dataType){result.type=inputObj.dataType;var controlprops=inputObj.controlprops;if(result.scope=controlprops?"#/properties/"+controlprops.scope:inputObj.scope?"#/properties/"+inputObj.scope:"",result.label=controlprops?controlprops.name||controlprops.label:inputObj.label?inputObj.label:"",result.filetypes=controlprops?controlprops.filetypes:inputObj.filetypes?inputObj.filetypes:"",result.inlinestyles=controlprops?controlprops.inlinestyles:inputObj.inlinestyles?inputObj.inlinestyles:"",result.disabled=controlprops&&controlprops.disabled?controlprops.disabled:!!inputObj.disabled&&inputObj.disabled,result.required=controlprops&&controlprops.required?controlprops.required:!!inputObj.required&&inputObj.required,inputObj.widgetType){inputObj.options=null,result.widget={widgetType:inputObj.widgetType};var inputObjKeys=Object.keys(inputObj);for(var inputObjIndx in Object.keys(inputObjKeys)){var inputObjKey=inputObjKeys[inputObjIndx];"dataType"!=inputObjKey&&"scope"!=inputObjKey&&"label"!=inputObjKey&&"widgetType"!=inputObjKey&&"options"!=inputObjKey&&"suggestion"!=inputObjKey&&"rule"!=inputObjKey&&(result.widget[inputObjKey]=inputObj[inputObjKey])}}if(inputObj.options)for(var optionIndx in result.options={},inputObj.options){var option=inputObj.options[optionIndx];result.options[option.name]=option.value}return inputObj.suggestion&&(result.suggestion=inputObj.suggestion),inputObj.rule&&(result=applyRule(inputObj,result)),result}if("CustomComponent"==inputObj.dataType){if(result.type="Control",result.subtype="CustomComponent",result.scope=inputObj.name?"#/properties/"+inputObj.name:"#/properties/customcomponent",inputObj.name&&(result.controlname=inputObj.name),inputObj.componentname&&(result.componentname=inputObj.componentname),inputObj.componentscope&&(result.componentscope=inputObj.componentscope),inputObj.componentprops&&inputObj.componentprops.length>0){var componentProps={};for(var componentpropsIndx in inputObj.componentprops){var componentprop=inputObj.componentprops[componentpropsIndx];componentProps[componentprop.name]=componentprop.value}result.componentprops=componentProps}return inputObj.inlinestyles&&(result.inlinestyles=inputObj.inlinestyles),inputObj.rule&&(result=applyRule(inputObj,result)),result}if("Actions"==inputObj.dataType)return result.type="Control",result.subtype="Actions",result.scope="#/properties/form_actions",inputObj.actions&&(result.actions=inputObj.actions),inputObj.align&&(result.align=inputObj.align),inputObj.inlinestyles&&(result.inlinestyles=inputObj.inlinestyles),inputObj.rule&&(result=applyRule(inputObj,result)),result;if("List"==inputObj.dataType){if(result.type="Control","Simple"==inputObj.listType?result.subtype="SimpleList":"Related"==inputObj.listType?result.subtype="RelatedList":result.subtype="EmbeddedList",result.scope="#/properties/form_list",inputObj.label&&(result.label=inputObj.label),inputObj.inlinestyles&&(result.inlinestyles=inputObj.inlinestyles),inputObj.name&&(result.name=inputObj.name),inputObj.title&&(result.title=inputObj.title),inputObj.hidefilter&&(result.hidefilter=inputObj.hidefilter),inputObj.tableName&&(result.tableName=inputObj.tableName),inputObj.fields&&(result.fields=inputObj.fields),inputObj.groupFields&&(result.groupFields=inputObj.groupFields),inputObj.filter&&(result.filter=inputObj.filter),inputObj.noscroll&&(result.noscroll=inputObj.noscroll+""=="true"),inputObj.compact&&(result.compact=inputObj.compact+""=="true"),inputObj.norowclick&&(result.norowclick=inputObj.norowclick+""=="true"),inputObj.relatedField&&(result.relatedField=inputObj.relatedField),inputObj.parentField&&(result.parentField=inputObj.parentField),inputObj.actions&&(result.actions=inputObj.actions),inputObj.rule&&(result=applyRule(inputObj,result)),inputObj.rowSelection&&inputObj.rowSelection.onClick&&(result.rowClick=!0,"Navigate To"==inputObj.rowSelection.onClick&&(result.navigateToURL=inputObj.rowSelection.navigateToURL)),result.listActions=[],inputObj.listActions&&inputObj.listActions.length>0)for(var listActionsIndx in inputObj.listActions){var listAction=inputObj.listActions[listActionsIndx];listAction.name&&listAction.onClick&&("Navigate To"==listAction.onClick?result.listActions.push({name:listAction.name,navigateToURL:listAction.navigateToURL}):result.listActions.push({name:listAction.name}))}if(result.rowActions=[],inputObj.rowActions&&inputObj.rowActions.length>0)for(var rowActionsIndx in inputObj.rowActions){var rowAction=inputObj.rowActions[rowActionsIndx];result.rowActions.push(rowAction)}return result}return"Label"==inputObj.dataType?(result.type="Control",result.subtype=inputObj.dataType,inputObj.text&&(result.text=inputObj.text),inputObj.name?(result.scope="#/properties/"+inputObj.name,result.nane=inputObj.name):result.scope="#/properties/labelcomponent",inputObj.inlinestyles&&(result.inlinestyles=inputObj.inlinestyles),inputObj.rule&&(result=applyRule(inputObj,result)),result.showtile=!!inputObj.showtile,result):void 0}(inputObj)}catch(err){}return result}),{setters:[],execute:function(){}}}),System.register("component/studio/SrsSortableNestedList/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","sortablejs/modular/sortable.core.esm.js","react-html-parser","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/add--filled/20","@carbon/icons-react/lib/arrow--up/20","@carbon/icons-react/lib/arrow--down/20","@carbon/icons-react/lib/caret--left/20","client/script/studio/Convert2JSONSchema.js","client/script/studio/Convert2UISchema2.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Sortable,AutoScroll,parse,processNodes,Edit,Add,AddUp,AddDown,Left,convert2UISchema,_SrsSortableNestedList_,SrsSortableNestedList;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_sortablejsModularSortableCoreEsmJs){Sortable=_sortablejsModularSortableCoreEsmJs.default,AutoScroll=_sortablejsModularSortableCoreEsmJs.AutoScroll},function(_reactHtmlParser){parse=_reactHtmlParser.default,processNodes=_reactHtmlParser.processNodes,_reactHtmlParser.convertNodeToElement,_reactHtmlParser.htmlparser2,_reactHtmlParser.attributesToProps},function(_carbonIconsReactLibEdit){Edit=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibAddFilled){Add=_carbonIconsReactLibAddFilled.default},function(_carbonIconsReactLibArrowUp){AddUp=_carbonIconsReactLibArrowUp.default},function(_carbonIconsReactLibArrowDown){AddDown=_carbonIconsReactLibArrowDown.default},function(_carbonIconsReactLibCaretLeft){Left=_carbonIconsReactLibCaretLeft.default},function(_clientScriptStudioConvert2JSONSchemaJs){_clientScriptStudioConvert2JSONSchemaJs.default},function(_clientScriptStudioConvert2UISchema2Js){convert2UISchema=_clientScriptStudioConvert2UISchema2Js.default}],execute:function(){_SrsSortableNestedList_=function(_React$Component){function _SrsSortableNestedList_(props){_classCallCheck(this,_SrsSortableNestedList_);var _this=_possibleConstructorReturn(this,(_SrsSortableNestedList_.__proto__||Object.getPrototypeOf(_SrsSortableNestedList_)).call(this,props));if(window.sortAutoScroll||(Sortable.mount(new AutoScroll),window.sortAutoScroll=!0),_this.defaultData=_this.props.data?_this.props.data:{dataType:"Root",Properties:[]},"string"==typeof _this.defaultData)try{_this.defaultData=JSON.parse(_this.defaultData)}catch(err){}_this.createHTML=_this.createHTML.bind(_this),_this.html2JSON=_this.html2JSON.bind(_this),_this.createDataFromHTML=_this.createDataFromHTML.bind(_this),_this.camelcase2Snakecase=_this.camelcase2Snakecase.bind(_this),_this.snakecase2Camelcase=_this.snakecase2Camelcase.bind(_this),_this.handleChange=_this.handleChange.bind(_this),_this.getDataSchemaFromRawUISchema=_this.getDataSchemaFromRawUISchema.bind(_this);var htmlContent=null;if(_this.defaultData){var htmlContentStr=_this.createHTMLStr(_this.defaultData);htmlContent=_this.createHTML(htmlContentStr)}else htmlContent=React.createElement("div",null,"No data");return _this.state={currentData:_this.defaultData,htmlContent:htmlContent},_this}return _inherits(_SrsSortableNestedList_,_React$Component),_createClass(_SrsSortableNestedList_,[{key:"getDataSchemaFromRawUISchema",value:function(nodeEl,dataSchemaElements){var _this2=this;nodeEl&&nodeEl.elements&&nodeEl.elements.length>0&&nodeEl.elements.map(function(ele,indx){if(ele)if(ele.elements)_this2.getDataSchemaFromRawUISchema(ele,dataSchemaElements);else if("Control"==ele.type){var controlCode="";ele.scope&&ele.scope.indexOf("#/properties/")>-1&&(controlCode=ele.scope.split("#/properties/")[1]),controlCode&&dataSchemaElements.push({type:ele.subtype||"string",code:controlCode,label:ele.label||controlCode,name:controlCode})}})}},{key:"handleChange",value:function(payload){if(this.props.isformcontrol+""=="true"&&this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);if(payload.operation)controlProps[this.props.controlname]={operation:payload.operation,itemtype:payload.itemtype,ts:Date.now()};else{var controlPropData={};payload.updatedJSON&&(controlPropData.data=payload.updatedJSON),payload.uiSchema&&(controlPropData.uiSchema=payload.uiSchema),payload.dataSchema&&(controlPropData.dataSchema=payload.dataSchema),controlProps[this.props.controlname]=controlPropData}this.props.updateStore({updates:{controlProps:controlProps}})}}},{key:"componentDidMount",value:function(){var i,_this3=this;this.refs.topElement&&function(){var nestedSortables=$(_this3.refs.topElement).find(".nested"),createDataFn=_this3.createDataFromHTML;for(i=0;i<nestedSortables.length;i++)new Sortable(nestedSortables[i],{group:"nested",animation:150,fallbackOnBody:!0,invertSwap:!0,swapThreshold:.05,onEnd:function(evt){createDataFn(evt)}})}()}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this4=this,dataProp=this.props.data?this.props.data:{},htmlContentStr=void 0,htmlContent=void 0;if("string"==typeof dataProp)try{dataProp=JSON.parse(dataProp)}catch(err){}if(_.isEqual(prevProps.data,this.props.data)||_.isEqual(dataProp,this.state.currentData)||!this.refs.topElement)if(prevState.enableSorting!=this.state.enableSorting){var i;!function(){var nestedSortables=$(_this4.refs.topElement).find(".nested"),createDataFn=_this4.createDataFromHTML;for(i=0;i<nestedSortables.length;i++)new Sortable(nestedSortables[i],{group:"nested",animation:150,fallbackOnBody:!0,swapThreshold:.65,onEnd:function(evt){createDataFn(evt)}})}()}else if(_.isEqual(prevState.refreshContent,this.state.refreshContent)){if(this.props.delta&&!_.isEqual(prevProps.delta,this.props.delta)){var lineType="",deltaValue={};if("string"==typeof this.props.delta)try{lineType=(deltaValue=JSON.parse(this.props.delta)).dataType}catch(err){}if(lineType){var deltaHtmlSnippet=this.createHTMLStr(deltaValue);$(this.refs.topElement).find(".add-active").replaceWith(deltaHtmlSnippet),htmlContentStr=$(this.refs.topElement)[0].innerHTML,htmlContent=this.createHTML(htmlContentStr),this.setState({htmlContent:htmlContent,htmlContentStr:htmlContentStr,refreshContent:Date.now()})}}}else{var newPayload=this.getDataFromHTML(),updatedContentStr=this.createHTMLStr(newPayload),updatedHtmlContent=this.createHTML(updatedContentStr),uiSchema=convert2UISchema(newPayload),dataSchemaElements=[];this.getDataSchemaFromRawUISchema(uiSchema,dataSchemaElements);var dataSchema={type:"object",properties:{}};for(var dataSchemaElIndx in dataSchemaElements){var dataSchemaEl=dataSchemaElements[dataSchemaElIndx];dataSchema.properties[dataSchemaEl.name]=dataSchemaEl}this.setState({currentData:newPayload,htmlContentStr:updatedContentStr,htmlContent:updatedHtmlContent,enableSorting:Date.now()}),this.handleChange({updatedJSON:newPayload,uiSchema:uiSchema,dataSchema:dataSchema})}else htmlContentStr=this.createHTMLStr(dataProp),htmlContent=this.createHTML(htmlContentStr),this.setState({htmlContent:htmlContent,htmlContentStr:htmlContentStr})}},{key:"getDataFromHTML",value:function(evt){if(this.refs.topElement){var el=this.refs.topElement.children[0];return this.html2JSON(el)}return null}},{key:"createDataFromHTML",value:function(evt){if(this.refs.topElement){var el=this.refs.topElement.children[0],newPayload=this.html2JSON(el);this.setState({currentData:newPayload});var uiSchema=convert2UISchema(newPayload),dataSchemaElements=[];this.getDataSchemaFromRawUISchema(uiSchema,dataSchemaElements);var dataSchema={type:"object",properties:{}};for(var dataSchemaElIndx in dataSchemaElements){var dataSchemaEl=dataSchemaElements[dataSchemaElIndx];dataSchema.properties[dataSchemaEl.name]=dataSchemaEl}this.setState({currentData:newPayload}),this.handleChange({updatedJSON:newPayload,uiSchema:uiSchema,dataSchema:dataSchema})}}},{key:"html2JSON",value:function(e){var _this5=this,output={},isListGroupItem=e.attributes.class&&e.attributes.class&&e.attributes.class.value.indexOf("list-group-item")>-1,isListGroup=!isListGroupItem&&e.attributes.class&&e.attributes.class&&e.attributes.class.value.indexOf("list-group")>-1,isNestedClass=e.attributes.class&&e.attributes.class&&e.attributes.class.value.indexOf("nested")>-1,isNestedAttr=e.attributes.nested&&e.attributes.nested.value+""=="true";if(isListGroup&&isNestedClass)return e.attributes.datatype&&(output.dataType=e.attributes.datatype.value),"Group"==output.dataType&&(output.label=e.attributes.label.value),output.Properties=[],Array.from(e.children,function(el){output.Properties.push(_this5.html2JSON(el))}),output;if(isNestedAttr){if(e.children&&e.children.length>0)for(var childIndx=0;childIndx<e.children.length;childIndx++){var childEl=e.children[childIndx];if(childEl.attributes.class&&childEl.attributes.class&&childEl.attributes.class.value.indexOf("list-group")>-1){output=this.html2JSON(e.children[childIndx]);break}}return output}return e.attributes.datatype&&(output.dataType=e.attributes.datatype.value),isListGroupItem&&Array.from(e.attributes,function(_ref){var name=_ref.name,value=_ref.value;if("datatype"!=name.toLowerCase()&&"class"!=name.toLowerCase()&&"style"!=name.toLowerCase()){var attrName="align1"==name?"align":name;attrName=_this5.snakecase2Camelcase(attrName),value.indexOf("QUOT")>-1&&(value=value.replaceAll("QUOT",'"')),value.startsWith("JSON:")&&(value=value.replace("JSON:",""),value=JSON.parse(value)),output[attrName]="true"==value||"false"==value?"true"==value:value}}),output.controlprops&&(output.controlprops.name?output.label=output.controlprops.name:output.controlprops.label&&(output.label=output.controlprops.label)),output}},{key:"camelcase2Snakecase",value:function(str){return str.replace(/[A-Z]/g,function(letter){return"_"+letter.toLowerCase()})}},{key:"snakecase2Camelcase",value:function(str){return str.replace(/([-_][a-z])/gi,function($1){return $1.toUpperCase().replace("-","").replace("_","")})}},{key:"createHTML",value:function(htmlContentStr){var self=this;return parse(htmlContentStr,{transform:function transform(domNode,nodeIndx){if("control"==domNode.name)return React.createElement("div",{dataType:"Control",label:domNode.attribs.label||"Empty",controlprops:"JSON:"+JSON.stringify(domNode.attribs),onMouseEnter:function(e){e.target;var controlActions=$(e.target).find(".controlactions"),anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],controlactionEl=$(g).find(".controlactions");controlactionEl&&controlactionEl.length>0&&controlactionEl.addClass("hide")}controlActions&&controlActions.length>0&&$(controlActions[0]).removeClass("hide")},onMouseLeave:function(e){e.target;var controlActions=$(e.target).find(".controlactions");controlActions&&controlActions.length>0&&controlActions.addClass("hide")},class:"list-group-item"},React.createElement("div",{class:"grop-item-header"},React.createElement("div",{class:"group-title"},"Control: ",domNode.attribs.label||"Empty"),React.createElement("div",{class:"controlactions hide"},React.createElement(Edit,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1];$(g).find(".list-group-item").removeClass("edit-active")}$(e.target).closest(".list-group-item").addClass("edit-active")}}),React.createElement("div",{class:"create-btn-group collapsed"},React.createElement(Add,{onClick:function(e){var referenceEl=$(e.target).closest(".create-btn-group");if(referenceEl&&referenceEl.length>0){var isSubGroupHidden=referenceEl.find(".create-btn-subgroup").hasClass("hide"),anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1];$(g).find(".create-btn-subgroup").addClass("hide")}isSubGroupHidden?(referenceEl.find(".create-btn-subgroup").removeClass("hide"),referenceEl.removeClass("collapsed"),referenceEl.addClass("expanded")):(referenceEl.find(".create-btn-subgroup").addClass("hide"),referenceEl.removeClass("expanded"),referenceEl.addClass("collapsed"))}}}),React.createElement("div",{class:"create-btn-subgroup hide"},React.createElement(AddUp,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],itemEl=$(g).find(".list-group-item");if(itemEl&&itemEl.length>0)for(var itemElIndx in itemEl){var itemElItem=itemEl[itemElIndx];$(itemElItem).hasClass("add-active")&&($(itemElItem).hasClass("draft")?$(itemElItem).remove():$(itemElItem).removeClass("add-active"))}}var referenceEl=$(e.target).closest(".list-group-item");referenceEl.parent()[0].insertBefore($.parseHTML('<div class="list-group-item add-active draft"/>')[0],referenceEl[0]),self.handleChange({operation:"add-up",itemtype:"control"})}}),React.createElement(AddDown,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],itemEl=$(g).find(".list-group-item");if(itemEl&&itemEl.length>0)for(var itemElIndx in itemEl){var itemElItem=itemEl[itemElIndx];$(itemElItem).hasClass("add-active")&&($(itemElItem).hasClass("draft")?$(itemElItem).remove():$(itemElItem).removeClass("add-active"))}}var referenceEl=$(e.target).closest(".list-group-item"),nextElement=referenceEl[0].nextSibling;nextElement?referenceEl.parent()[0].insertAfter($.parseHTML('<div class="list-group-item add-active draft"/>')[0],nextElement):referenceEl.parent()[0].appendChild($.parseHTML('<div class="list-group-item add-active draft"/>')[0]),self.handleChange({operation:"add-down",itemtype:"control"})}}))),React.createElement(Left,{onClick:function(e){}}))));if("layout"===domNode.name)switch(domNode.attribs.type){case"root":return React.createElement("div",{dataType:"Root",label:domNode.attribs.label||"Empty",class:"list-group-item",nested:"true"},React.createElement("div",{class:"grop-item-header"},React.createElement("div",{class:"group-title"},"Start"),React.createElement("div",{class:"rootcontrolactions"},React.createElement("div",{class:"create-btn-group collapsed"},React.createElement(Add,{onClick:function(e){var referenceEl=$(e.target).closest(".list-group-item");referenceEl.find(".add-active").remove(),(referenceEl=referenceEl.find('.list-group[dataType="Root"]')).append($.parseHTML('<div class="list-group-item add-active draft"/>')[0]),self.handleChange({operation:"add-down",itemtype:"root"})}})))),React.createElement("div",{dataType:"Root",class:"list-group nested"},processNodes(domNode.children,transform)));case"group":return React.createElement("div",{dataType:"Group",label:domNode.attribs.label||"Empty",onMouseEnter:function(e){e.target;var controlActions=$(e.target).find(".controlactions"),anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],controlactionEl=$(g).find(".controlactions");controlactionEl&&controlactionEl.length>0&&controlactionEl.addClass("hide")}controlActions&&controlActions.length>0&&$(controlActions[0]).removeClass("hide")},onMouseLeave:function(e){e.target;var controlActions=$(e.target).find(".controlactions");controlActions&&controlActions.length>0&&controlActions.addClass("hide")},class:"list-group-item",nested:"true"},React.createElement("div",{class:"grop-item-header"},React.createElement("div",{class:"group-title"},"Group: ",domNode.attribs.label||"Empty"),React.createElement("div",{class:"controlactions hide"},React.createElement(Edit,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1];$(g).find(".list-group-item").removeClass("edit-active")}$(e.target).closest(".list-group-item").addClass("edit-active")}}),React.createElement("div",{class:"create-btn-group collapsed"},React.createElement(Add,{onClick:function(e){var referenceEl=$(e.target).closest(".create-btn-group");if(referenceEl&&referenceEl.length>0){var isSubGroupHidden=referenceEl.find(".create-btn-subgroup").hasClass("hide"),anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1];$(g).find(".create-btn-subgroup").addClass("hide")}isSubGroupHidden?(referenceEl.find(".create-btn-subgroup").removeClass("hide"),referenceEl.removeClass("collapsed"),referenceEl.addClass("expanded")):(referenceEl.find(".create-btn-subgroup").addClass("hide"),referenceEl.removeClass("expanded"),referenceEl.addClass("collapsed"))}}}),React.createElement("div",{class:"create-btn-subgroup hide"},React.createElement(AddUp,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],itemEl=$(g).find(".list-group-item");if(itemEl&&itemEl.length>0)for(var itemElIndx in itemEl){var itemElItem=itemEl[itemElIndx];$(itemElItem).hasClass("add-active")&&($(itemElItem).hasClass("draft")?$(itemElItem).remove():$(itemElItem).removeClass("add-active"))}}var referenceEl=$(e.target).closest(".list-group-item");referenceEl.parent()[0].insertBefore($.parseHTML('<div class="list-group-item add-active draft"/>')[0],referenceEl[0]),self.handleChange({operation:"add-up",itemtype:"group"})}}),React.createElement(AddDown,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],itemEl=$(g).find(".list-group-item");if(itemEl&&itemEl.length>0)for(var itemElIndx in itemEl){var itemElItem=itemEl[itemElIndx];$(itemElItem).hasClass("add-active")&&($(itemElItem).hasClass("draft")?$(itemElItem).remove():$(itemElItem).removeClass("add-active"))}}var referenceEl=$(e.target).closest(".list-group-item"),nextElement=referenceEl[0].nextSibling;nextElement?referenceEl.parent()[0].insertAfter($.parseHTML('<div class="list-group-item add-active draft"/>')[0],nextElement):referenceEl.parent()[0].appendChild($.parseHTML('<div class="list-group-item add-active draft"/>')[0]),self.handleChange({operation:"add-down",itemtype:"group"})}}))),React.createElement(Left,{onClick:function(e){}}))),React.createElement("div",{dataType:"Group",label:domNode.attribs.label||"Empty",class:"list-group nested"},processNodes(domNode.children,transform)));case"VerticalLayout":case"HorizontalLayout":case"Categorization":return React.createElement("div",{dataType:domNode.attribs.type,onMouseEnter:function(e){e.target;var controlActions=$(e.target).find(".controlactions"),anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],controlactionEl=$(g).find(".controlactions");controlactionEl&&controlactionEl.length>0&&controlactionEl.addClass("hide")}controlActions&&controlActions.length>0&&$(controlActions[0]).removeClass("hide")},onMouseLeave:function(e){e.target;var controlActions=$(e.target).find(".controlactions");controlActions&&controlActions.length>0&&$(controlActions[0]).addClass("hide")},class:"list-group-item",nested:"true"},React.createElement("div",{class:"grop-item-header"},React.createElement("div",{class:"group-title"},domNode.attribs.type),React.createElement("div",{class:"controlactions hide"},React.createElement(Edit,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1];$(g).find(".list-group-item").removeClass("edit-active")}$(e.target).closest(".list-group-item").addClass("edit-active")}}),React.createElement("div",{class:"create-btn-group collapsed"},React.createElement(Add,{onClick:function(e){var referenceEl=$(e.target).closest(".create-btn-group");if(referenceEl&&referenceEl.length>0){var isSubGroupHidden=referenceEl.find(".create-btn-subgroup").hasClass("hide"),anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1];$(g).find(".create-btn-subgroup").addClass("hide")}isSubGroupHidden?(referenceEl.find(".create-btn-subgroup").removeClass("hide"),referenceEl.removeClass("collapsed"),referenceEl.addClass("expanded")):(referenceEl.find(".create-btn-subgroup").addClass("hide"),referenceEl.removeClass("expanded"),referenceEl.addClass("collapsed"))}}}),React.createElement("div",{class:"create-btn-subgroup hide"},React.createElement(AddUp,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],itemEl=$(g).find(".list-group-item");if(itemEl&&itemEl.length>0)for(var itemElIndx in itemEl){var itemElItem=itemEl[itemElIndx];$(itemElItem).hasClass("add-active")&&($(itemElItem).hasClass("draft")?$(itemElItem).remove():$(itemElItem).removeClass("add-active"))}}var referenceEl=$(e.target).closest(".list-group-item");referenceEl.parent()[0].insertBefore($.parseHTML('<div class="list-group-item add-active draft"/>')[0],referenceEl[0]),self.handleChange({operation:"add-up",itemtype:"group"})}}),React.createElement(AddDown,{onClick:function(e){var anchorEls=$(e.target).parents(".list-group-item");if(anchorEls&&anchorEls.length>0){var g=anchorEls[anchorEls.length-1],itemEl=$(g).find(".list-group-item");if(itemEl&&itemEl.length>0)for(var itemElIndx in itemEl){var itemElItem=itemEl[itemElIndx];$(itemElItem).hasClass("add-active")&&($(itemElItem).hasClass("draft")?$(itemElItem).remove():$(itemElItem).removeClass("add-active"))}}var referenceEl=$(e.target).closest(".list-group-item"),nextElement=referenceEl[0].nextSibling;nextElement?referenceEl.parent()[0].insertAfter($.parseHTML('<div class="list-group-item add-active draft"/>')[0],nextElement):referenceEl.parent()[0].appendChild($.parseHTML('<div class="list-group-item add-active draft"/>')[0]),self.handleChange({operation:"add-down",itemtype:"group"})}}))),React.createElement(Left,{onClick:function(e){}}))),React.createElement("div",{dataType:domNode.attribs.type,class:"list-group nested"},processNodes(domNode.children,transform)))}}})}},{key:"createHTMLStr",value:function(tempObj){var output="";if(tempObj&&tempObj.dataType){if("Root"==tempObj.dataType){if(output+='<layout type="root">',tempObj.Properties)for(var propsIndx in tempObj.Properties){var prop=tempObj.Properties[propsIndx];output+=this.createHTMLStr(prop)}return output+="</layout>"}if("Group"==tempObj.dataType){if(output=output+'<layout type="group" label="'+tempObj.label+'">',tempObj.Properties)for(var _propsIndx in tempObj.Properties){var _prop=tempObj.Properties[_propsIndx];output+=this.createHTMLStr(_prop)}return output+="</layout>"}if(tempObj.Properties||"VerticalLayout"==tempObj.dataType||"HorizontalLayout"==tempObj.dataType||"Categorization"==tempObj.dataType){if(output=output+'<layout type="'+tempObj.dataType+'" label="'+tempObj.label+'">',tempObj.Properties)for(var _propsIndx2 in tempObj.Properties){var _prop2=tempObj.Properties[_propsIndx2];output+=this.createHTMLStr(_prop2)}return output+="</layout>"}var attrNames=Object.keys(tempObj),attrs="",name="";for(var attrIndx in attrNames){var attrName=attrNames[attrIndx];if("controlprops"!=attrName.toLowerCase()){var changedAttrName="align"==attrName?"align1":this.camelcase2Snakecase(attrName);if("string"!=typeof tempObj[attrName]&&tempObj[attrName])JSON.stringify(tempObj[attrName]).indexOf('"')>-1?attrs+=changedAttrName+'="JSON:'+JSON.stringify(tempObj[attrName]).replaceAll('"',"QUOT")+'"':attrs+=changedAttrName+'="'+JSON.stringify(tempObj[attrName])+'"';else attrs+=changedAttrName+'="'+(tempObj[attrName]?tempObj[attrName]:"").replaceAll('"',"QUOT")+'" '}}return"Control"==tempObj.dataType?name="Control: "+tempObj.scope:"Label"==tempObj.dataType?name="Label: "+tempObj.text:"Actions"==tempObj.dataType?name="Actions":"List"==tempObj.dataType?name="List: "+(tempObj.name||"Empty"):"CustomComponent"==tempObj.dataType&&(name="Custom Component: "+(tempObj.name||"Empty")),"<control "+attrs+' class="list-group-item">'+name+"</control>"}}},{key:"render",value:function(){return React.createElement(React.Fragment,null,React.createElement("style",null,'@import url("/component/studio/SrsSortableNestedList/Style.css");'),React.createElement("div",{ref:"topElement"},this.state.htmlContent))}}]),_SrsSortableNestedList_}(React.Component),_export("SrsSortableNestedList",SrsSortableNestedList=function(props){return _SrsSortableNestedList_}),_export("SrsSortableNestedList",SrsSortableNestedList)}}}),System.register("component/studio/SrsTabs.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","deep-equal","@carbon/icons-react/lib/edit/16","lodash.get","lodash.clonedeep"],function(_export,_context8){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Tabs,Tab,TabsSkeleton,deepEqual,Edit16,cloneDeep,_SrsTabs_,SrsTabs,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Tabs=_carbonComponentsReact.Tabs,Tab=_carbonComponentsReact.Tab,TabsSkeleton=_carbonComponentsReact.TabsSkeleton},function(_deepEqual){deepEqual=_deepEqual.default},function(_carbonIconsReactLibEdit){Edit16=_carbonIconsReactLibEdit.default},function(_lodashGet){_lodashGet.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsTabs_=function(_React$Component){function _SrsTabs_(props){_classCallCheck(this,_SrsTabs_);var _this=_possibleConstructorReturn(this,(_SrsTabs_.__proto__||Object.getPrototypeOf(_SrsTabs_)).call(this,props));_this.state={template:null,reload:!1,activeTab:0},_this.openPage=_this.openPage.bind(_this),_this.loadPage=_this.loadPage.bind(_this),_this.updatePageParams=_this.updatePageParams.bind(_this),_this.evaluateDynamicParameters=_this.evaluateDynamicParameters.bind(_this);_this.props.widgetProps&&_this.props.widgetProps.ActiveTab&&_this.props.widgetProps.ActiveTab;return _this}return _inherits(_SrsTabs_,_React$Component),_createClass(_SrsTabs_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.updatePageParams();case 2:this.getTabs();case 3:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.props.widgetProps||deepEqual(prevProps.widgetProps,this.props.widgetProps)){_context2.next=9;break}if(prevProps.widgetProps.ActiveTab==this.props.widgetProps.ActiveTab){_context2.next=5;break}this.setState({activeTab:parseInt(this.props.widgetProps.ActiveTab,0)}),_context2.next=7;break;case 5:return _context2.next=7,this.updatePageParams();case 7:_context2.next=13;break;case 9:if(prevState.activeTab==this.state.activeTab){_context2.next=13;break}return _context2.next=12,this.updatePageParams();case 12:this.getTabs();case 13:case"end":return _context2.stop()}},_callee2,this)}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"updatePageParams",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var tabRelations,selectedTabRelation,pageId,pagesuffix,page,existingPageParams,pageProps,parentPageId,parentPage,parentPageParams,pageParamMapping,inputParams,newPageParams,pagesWithNewPageParams;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(_context3.prev=0,tabRelations=JSON.parse(this.props.widgetProps.tabs),tabRelations.length,!1,{},!((selectedTabRelation=tabRelations[this.state.activeTab])&&selectedTabRelation.tabInfo&&selectedTabRelation.tabInfo.page)){_context3.next=24;break}if(pageId=selectedTabRelation.tabInfo.page.page_id,!selectedTabRelation.tabInfo.page.params){_context3.next=24;break}if(pagesuffix=this.props.widgetid+this.state.activeTab,!(page=this.props.pages[pageId+pagesuffix]||{})){_context3.next=24;break}return(existingPageParams=page.pageParams?page.pageParams:null)||(pageProps={},Object.keys(page.props).map(function(pagePropName){"ModelName"==pagePropName&&"ModelScope"==pagePropName||(pageProps[pagePropName]=page.props[pagePropName])}),existingPageParams=pageProps),parentPageId=this.props.preview?this.props.pageid:this.props.activepage.id?this.props.activepage.id:this.props.activepage.page_id,parentPage=cloneDeep(this.props.pages[parentPageId]),parentPageParams=cloneDeep(parentPage.pageParams),(pageParamMapping={})[pageId]=cloneDeep(selectedTabRelation.tabInfo.page.params),inputParams={pageId:pageId,pageParamMapping:pageParamMapping,parentPageParams:parentPageParams,parentPage:parentPage},_context3.next=22,$script.runscript("mmf.getPageParameters",inputParams);case 22:newPageParams=_context3.sent,_.isEqual(newPageParams,existingPageParams)||((pagesWithNewPageParams=cloneDeep(this.props.pages))[pageId+pagesuffix]=pagesWithNewPageParams[pageId+pagesuffix]||{},pagesWithNewPageParams[pageId+pagesuffix].pagereload=!pagesWithNewPageParams[pageId+pagesuffix].pagereload,pagesWithNewPageParams[pageId+pagesuffix].pageParams=newPageParams,this.props.updateStore({updates:{pages:pagesWithNewPageParams}}));case 24:_context3.next=28;break;case 26:_context3.prev=26,_context3.t0=_context3.catch(0);case 28:return _context3.abrupt("return",!1);case 29:case"end":return _context3.stop()}},_callee3,this,[[0,26]])}));return function(){return _ref3.apply(this,arguments)}}()},{key:"openPage",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(page,pageSuffix,parentPage){var pageId,payload,tobeActivePage,pageExists,activePage;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(parentPage?parentPage.id?parentPage.id:parentPage.page_id:"",pageId=page.page_id+pageSuffix,payload={active_page_id:pageId},tobeActivePage=this.props.pages[pageId],pageExists=tobeActivePage&&tobeActivePage.slots&&tobeActivePage.widgets,activePage=void 0,!pageExists){_context4.next=10;break}activePage=cloneDeep(tobeActivePage),_context4.next=13;break;case 10:return _context4.next=12,this.loadPage(page,pageSuffix,parentPage);case 12:activePage=_context4.sent;case 13:activePage.is_open=!0,payload.activepage=activePage,payload.pages=this.props.pages?this.props.pages:{},payload.pages[pageId]=activePage,payload.active_widget_id="",this.props.updateStore({updates:payload});case 19:case"end":return _context4.stop()}},_callee4,this)}));return function(_x3,_x4,_x5){return _ref4.apply(this,arguments)}}()},{key:"loadPage",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(page,pageSuffix,parentPage,tabName){var pageId,queriedPage,pageParamMapping,pageParams,pageProps,allowedPagePropNames,tobeActivePage,slots,widgets,slotsAndWidgets,layoutCodes,defaultLayout,_this2=this;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return pageId=page.page_id,!this.props.preview&&parentPage?parentPage.id?parentPage.id:parentPage.page_id:this.props.pageid,!0,_context5.next=5,$qry.run("mmf.getSlidePropsById",{uid:pageId},"data.slide",!1,!!this.props.preview);case 5:return queriedPage=_context5.sent,pageParamMapping=page.params,pageParams={},pageProps={},"CreateView"!=queriedPage.Type&&"EditView"!=queriedPage.Type||((allowedPagePropNames=Object.keys(queriedPage.props).filter(function(pagePropName){return"ModelName"!=pagePropName&&"ModelScope"!=pagePropName}))&&allowedPagePropNames.map(function(allowedPropName){return pageProps[allowedPropName]=queriedPage.props[allowedPropName]}),pageProps.recordid="recordid"),pageProps&&Object.keys(pageProps).map(function(propName){if(pageParamMapping&&pageParamMapping[propName])switch(pageParamMapping[propName].type){case"widget_props":var widgetName2Map=pageParamMapping[propName].widgetName,widgetPropName2Map=pageParamMapping[propName].widgetPropName?pageParamMapping[propName].widgetPropName:"value";widgetName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){(parentPageWidgetId==widgetName2Map||parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.Name==widgetName2Map)&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props[widgetPropName2Map])});break;case"page_field":var fieldName2Map=pageParamMapping[propName].pageFieldId;fieldName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.FieldName=="@@["+fieldName2Map+"]"&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.value)});break;case"page_param":parentPage&&parentPage.pageParams&&(pageParamMapping[propName].pageParamId?pageParams[propName]=parentPage.pageParams[pageParamMapping[propName].pageParamId]:pageParams[propName]=parentPage.pageParams[propName]);break;default:parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(pageParams[propName]=parentPage.pageParams[propName])}else parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(pageParams[propName]=parentPage.pageParams[propName])}),tobeActivePage={id:pageId,name:queriedPage.Name,scope:queriedPage.Scope,path:queriedPage.Path,pageType:queriedPage.Type,model:queriedPage.props.ModelName,modelscope:queriedPage.props.ModelScope,props:queriedPage.props,pageParams:pageParams},slots={},widgets={},_context5.next=16,$qry.run("pd.getExistingSlotsbySlideId",{Slide:pageId});case 16:return(slotsAndWidgets=_context5.sent)&&slotsAndWidgets.length>0&&slotsAndWidgets.forEach(function(slotWidget){var slot=slotWidget.node;if(slot&&slot.uid){var slotData={};slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.width=slot.width||0,slotData.height=slot.height,slotData.minwidth=slot.minwidth,slotData.minheight=slot.minheight,slotData.maxwidth=slot.maxwidth,slotData.maxheight=slot.maxheight,slotData.resize=slot.resize,slotData.move=slot.move,slotData.Slide=slot.Slide,slotData.Widget=slot.Widget,slotData.Layout=slot.Layout,slots[slot.Layout||"default"]=slots[slot.Layout||"default"]||{},slots[slot.Layout||"default"][slot.uid]=slotData;var widgetData=slot.slotWidget;if(widgetData&&widgetData.uid){var widget={};widget.id=widgetData.uid,widget.Component=widgetData.Component,widget.name=widgetData.component.Name;var prevWidgetTree={};try{prevWidgetTree=_this2.props.currrentWidget.widgettree?"string"==typeof _this2.props.currrentWidget.widgettree?JSON.parse(_this2.props.currrentWidget.widgettree):_this2.props.currrentWidget.widgettree:prevWidgetTree}catch(err){}var widgetTree={};widgetTree[_this2.props.widgetid+"@@"+_this2.props.pageid+_this2.props.pagesuffix+"@@"+tabName]=prevWidgetTree,widget.widgettree=widgetTree;var widgetProps=widgetData.widgetproperties;if(widgetProps&&widgetProps.edges&&widgetProps.edges.length>0){var props={};widgetProps.edges.forEach(function(propNode){var prop=propNode.node;props[prop.name]=prop.value}),widget.props=props}var componentProps=widgetData.component.Props,widgetPropNames=widget.props?Object.keys(widget.props):[];componentProps&&Object.keys(componentProps).length>0&&Object.keys(componentProps).map(function(componentPropName){widgetPropNames&&-1==widgetPropNames.indexOf(componentPropName)&&(widget.props=widget.props||{},widget.props[componentPropName]=componentProps[componentPropName])}),widgets[slot.Layout||"default"]=widgets[slot.Layout||"default"]||{},widgets[slot.Layout||"default"][widgetData.uid]=widget}}}),layoutCodes=Object.keys(slots),defaultLayout=layoutCodes?layoutCodes.default?"default":layoutCodes[0]:"default",tobeActivePage.layouts={slots:slots,widgets:widgets},tobeActivePage.slots=slots[defaultLayout],tobeActivePage.widgets=widgets[defaultLayout],_context5.abrupt("return",tobeActivePage);case 24:case"end":return _context5.stop()}},_callee5,this)}));return function(_x6,_x7,_x8,_x9){return _ref5.apply(this,arguments)}}()},{key:"evaluateDynamicParameters",value:function(dynamicParamMapping,parentPage){var dynamicParams={};return dynamicParamMapping&&Object.keys(dynamicParamMapping).length>0&&Object.keys(dynamicParamMapping).map(function(propName){switch(dynamicParamMapping[propName].type){case"widget_props":var widgetName2Map=dynamicParamMapping[propName].widgetName,widgetPropName2Map=dynamicParamMapping[propName].widgetPropName?dynamicParamMapping[propName].widgetPropName:"value";widgetName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){(parentPageWidgetId==widgetName2Map||parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.Name==widgetName2Map)&&(dynamicParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props[widgetPropName2Map])});break;case"page_field":var fieldName2Map=dynamicParamMapping[propName].pageFieldId;fieldName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.FieldName=="@@["+fieldName2Map+"]"&&(dynamicParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.value)});break;case"page_param":parentPage&&parentPage.pageParams&&(dynamicParamMapping[propName].pageParamId?dynamicParams[propName]=parentPage.pageParams[dynamicParamMapping[propName].pageParamId]:dynamicParams[propName]=parentPage.pageParams[propName]);break;default:parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(dynamicParams[propName]=parentPage.pageParams[propName])}}),dynamicParams}},{key:"getTabs",value:function(){var _ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(){var self,template,widgetProps,isString,parentPageId,tabs,tabsToRender,tabLabel,_loop,_tabInd,_this3=this;return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return self=this,template=null,_context7.next=4,$ele.registerElement("PageDesignerPreview","studio","React");case 4:if(_context7.sent,widgetProps=this.props.widgetProps||{},isString="string"==typeof widgetProps.tabs,parentPageId=this.props.preview?this.props.pageid:this.props.activepage.id?this.props.activepage.id:this.props.activepage.page_id,tabs=[],0!=(tabs=isString?widgetProps.tabs?JSON.parse(widgetProps.tabs):[]:widgetProps.tabs||[]).length){_context7.next=14;break}template=React.createElement(Tabs,{className:"tab-content",selected:this.state.activeTab,tabContentClassName:"tab-content"},React.createElement(Tab,{disabled:!1,label:"Tab0"},React.createElement("div",{className:"some-content",style:{paddingLeft:16}},"Content for first tab goes here."))),_context7.next=24;break;case 14:tabsToRender=[],tabLabel=function(tabName,tabIndx,tabType,props){return React.createElement("span",null,decodeURIComponent(tabName)||"Tab"+tabIndx,"page"!=tabType||self.props.preview?React.createElement("div",null):React.createElement(Edit16,{style:{marginLeft:5},onClick:function(){var pageSuffix=_this3.props.widgetid+tabInd;_this3.openPage(props.page,pageSuffix,self.props.activepage)}}))},_loop=_regeneratorRuntime.mark(function _loop(_tabInd){var tab,tabType,tabName,tabContent,listTable,listFields,listFilter,pageSize,pageId,pageSuffix,currentPage,pages,prevWidgetTree,widgetTree,relation,dynamicParams,recordid,createViewId,editViewId,createView,createpath,editView,editpath;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:tab=tabs[_tabInd],tabType=tab.tabInfo.type,tabName=tab.tabInfo.name,tabContent=React.createElement("div",{className:"some-content",style:{paddingLeft:16}}," Content for  tab goes here."),listTable=void 0,listFields=[],listFilter={},pageSize=10,_context6.t0=tabType,_context6.next="page"===_context6.t0?8:"simple_list"===_context6.t0?24:"related_list"===_context6.t0?31:57;break;case 8:if(pageId=tab.tabInfo.page.page_id,pageSuffix=_this3.props.widgetid+_tabInd,currentPage=_this3.props.pages[pageId+pageSuffix]?_this3.props.pages[pageId+pageSuffix]:null){_context6.next=18;break}return _context6.next=14,_this3.loadPage(tab.tabInfo.page,pageSuffix,_this3.props.pages[parentPageId],tab.tabInfo.name);case 14:currentPage=_context6.sent,(pages=cloneDeep(_this3.props.pages))[pageId+pageSuffix]=currentPage,_this3.props.updateStore({updates:{pages:pages}});case 18:prevWidgetTree={};try{prevWidgetTree=_this3.props.currrentWidget.widgettree?"string"==typeof _this3.props.currrentWidget.widgettree?JSON.parse(_this3.props.currrentWidget.widgettree):_this3.props.currrentWidget.widgettree:prevWidgetTree}catch(err){}return(widgetTree={})[_this3.props.widgetid+"@@"+_this3.props.pageid+"@@"+tabName]=prevWidgetTree,tabContent=React.createElement("page-designer-preview",{preview:_this3.props.preview,widgetid:_this3.props.widgetid,widgettree:JSON.stringify(widgetTree),pageid:_this3.props.pageid,pagesuffix:pageSuffix,previewpageid:pageId,responsive:"true"}),_context6.abrupt("break",57);case 24:return listTable=tab.tabInfo.list.table,listFields=[],tab.tabInfo.list.fields&&tab.tabInfo.list.fields.length>0&&tab.tabInfo.list.fields.map(function(listField){listFields.push(listField.text)}),listFilter=tab.tabInfo.list.filter,pageSize=tab.tabInfo.list.pagesize,tabContent=React.createElement("list-layout",{table:listTable,fields:listFields,filter:listFilter,pagesize:pageSize,editpath:editpath,createpath:createpath}),_context6.abrupt("break",57);case 31:if(listTable=tab.tabInfo.list.table,listFields=[],tab.tabInfo.list.fields&&tab.tabInfo.list.fields.length>0&&tab.tabInfo.list.fields.map(function(listField){listFields.push(listField.text)}),listFilter=tab.tabInfo.list.filter,pageSize=tab.tabInfo.list.pagesize,relation=tab.tabInfo.list.relation,dynamicParams=_this3.evaluateDynamicParameters(tab.tabInfo.list.params,_this3.props.pages[parentPageId]),recordid=dynamicParams&&dynamicParams.recordid?dynamicParams.recordid:"",createViewId=tab.tabInfo.list.createview,editViewId=tab.tabInfo.list.editview,_context6.t1=createViewId,!_context6.t1){_context6.next=46;break}return _context6.next=45,$qry.run("mmf.getSlideById",{pageId:createViewId},"data.MetaSlide.MetaSlideFindOne",!1,!!_this3.props.preview);case 45:_context6.t1=_context6.sent;case 46:if(createView=_context6.t1,createpath=createView?createView.Path:"",_context6.t2=editViewId,!_context6.t2){_context6.next=53;break}return _context6.next=52,$qry.run("mmf.getSlideById",{pageId:editViewId},"data.MetaSlide.MetaSlideFindOne",!1,!!_this3.props.preview);case 52:_context6.t2=_context6.sent;case 53:return editView=_context6.t2,editpath=editView?editView.Path:"",tabContent=React.createElement("list-layout",{table:listTable,fields:listFields,filter:listFilter,pagesize:pageSize,relation:relation,recordid:recordid,editpath:editpath,createpath:createpath}),_context6.abrupt("break",57);case 57:tabsToRender.push(React.createElement(Tab,{label:tabLabel(tab.tabInfo.name,_tabInd,tabType,{page:tab.tabInfo.page})},tabContent));case 58:case"end":return _context6.stop()}},_loop,_this3)}),_tabInd=0;case 18:if(!(_tabInd<tabs.length)){_context7.next=23;break}return _context7.delegateYield(_loop(_tabInd),"t0",20);case 20:_tabInd++,_context7.next=18;break;case 23:template=React.createElement(Tabs,{selected:this.state.activeTab,onSelectionChange:function(val){_this3.state.activeTab!=val&&_this3.setState({activeTab:val})},className:"tab-content",tabContentClassName:"tab-content"},tabsToRender.map(function(tab){return tab}));case 24:this.setState({template:template});case 25:case"end":return _context7.stop()}},_callee6,this)}));return function(){return _ref6.apply(this,arguments)}}()},{key:"render",value:function(){var tabsTemplate=this.state.template?this.state.template:React.createElement(TabsSkeleton,null);return React.createElement("div",{className:!this.props.widgetProps||0!=this.props.widgetProps.ShowHeader&&"false"!=this.props.widgetProps.ShowHeader?"srs-prem-container":"autotabbing"},tabsTemplate)}}]),_SrsTabs_}(React.Component),_export("SrsTabs",SrsTabs=function(props){return _SrsTabs_}),_export("SrsTabs",SrsTabs),_export("default",SrsTabs),_export("states",states=[{KeyName:"activepage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id":""}'},{KeyName:"currrentWidget",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {}}}}}'},{KeyName:"pages",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsTabs/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","deep-equal","@carbon/icons-react/lib/edit/16","lodash.get","lodash.clonedeep"],function(_export,_context8){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Tabs,Tab,TabsSkeleton,deepEqual,Edit16,cloneDeep,_SrsTabs_,SrsTabs;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Tabs=_carbonComponentsReact.Tabs,Tab=_carbonComponentsReact.Tab,TabsSkeleton=_carbonComponentsReact.TabsSkeleton},function(_deepEqual){deepEqual=_deepEqual.default},function(_carbonIconsReactLibEdit){Edit16=_carbonIconsReactLibEdit.default},function(_lodashGet){_lodashGet.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsTabs_=function(_React$Component){function _SrsTabs_(props){_classCallCheck(this,_SrsTabs_);var _this=_possibleConstructorReturn(this,(_SrsTabs_.__proto__||Object.getPrototypeOf(_SrsTabs_)).call(this,props));_this.state={template:null,reload:!1,activeTab:0},_this.openPage=_this.openPage.bind(_this),_this.loadPage=_this.loadPage.bind(_this),_this.updatePageParams=_this.updatePageParams.bind(_this),_this.evaluateDynamicParameters=_this.evaluateDynamicParameters.bind(_this);_this.props.widgetProps&&_this.props.widgetProps.ActiveTab&&_this.props.widgetProps.ActiveTab;return _this}return _inherits(_SrsTabs_,_React$Component),_createClass(_SrsTabs_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.updatePageParams();case 2:this.getTabs();case 3:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.props.widgetProps||deepEqual(prevProps.widgetProps,this.props.widgetProps)){_context2.next=9;break}if(prevProps.widgetProps.ActiveTab==this.props.widgetProps.ActiveTab){_context2.next=5;break}this.setState({activeTab:parseInt(this.props.widgetProps.ActiveTab,0)}),_context2.next=7;break;case 5:return _context2.next=7,this.updatePageParams();case 7:_context2.next=13;break;case 9:if(prevState.activeTab==this.state.activeTab){_context2.next=13;break}return _context2.next=12,this.updatePageParams();case 12:this.getTabs();case 13:case"end":return _context2.stop()}},_callee2,this)}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"updatePageParams",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var tabRelations,selectedTabRelation,pageId,pagesuffix,page,existingPageParams,pageProps,parentPageId,parentPage,parentPageParams,pageParamMapping,inputParams,newPageParams,pagesWithNewPageParams;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(_context3.prev=0,tabRelations=JSON.parse(this.props.widgetProps.tabs),tabRelations.length,!1,{},!((selectedTabRelation=tabRelations[this.state.activeTab])&&selectedTabRelation.tabInfo&&selectedTabRelation.tabInfo.page)){_context3.next=24;break}if(pageId=selectedTabRelation.tabInfo.page.page_id,!selectedTabRelation.tabInfo.page.params){_context3.next=24;break}if(pagesuffix=this.props.widgetid+this.state.activeTab,!(page=this.props.pages[pageId+pagesuffix]||{})){_context3.next=24;break}return(existingPageParams=page.pageParams?page.pageParams:null)||(pageProps={},Object.keys(page.props).map(function(pagePropName){"ModelName"==pagePropName&&"ModelScope"==pagePropName||(pageProps[pagePropName]=page.props[pagePropName])}),existingPageParams=pageProps),parentPageId=this.props.preview?this.props.pageid:this.props.activepage.id?this.props.activepage.id:this.props.activepage.page_id,parentPage=cloneDeep(this.props.pages[parentPageId]),parentPageParams=cloneDeep(parentPage.pageParams),(pageParamMapping={})[pageId]=cloneDeep(selectedTabRelation.tabInfo.page.params),inputParams={pageId:pageId,pageParamMapping:pageParamMapping,parentPageParams:parentPageParams,parentPage:parentPage},_context3.next=22,$script.runscript("mmf.getPageParameters",inputParams);case 22:newPageParams=_context3.sent,_.isEqual(newPageParams,existingPageParams)||((pagesWithNewPageParams=cloneDeep(this.props.pages))[pageId+pagesuffix]=pagesWithNewPageParams[pageId+pagesuffix]||{},pagesWithNewPageParams[pageId+pagesuffix].pagereload=!pagesWithNewPageParams[pageId+pagesuffix].pagereload,pagesWithNewPageParams[pageId+pagesuffix].pageParams=newPageParams,this.props.updateStore({updates:{pages:pagesWithNewPageParams}}));case 24:_context3.next=28;break;case 26:_context3.prev=26,_context3.t0=_context3.catch(0);case 28:return _context3.abrupt("return",!1);case 29:case"end":return _context3.stop()}},_callee3,this,[[0,26]])}));return function(){return _ref3.apply(this,arguments)}}()},{key:"openPage",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(page,pageSuffix,parentPage){var pageId,payload,tobeActivePage,pageExists,activePage;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(parentPage?parentPage.id?parentPage.id:parentPage.page_id:"",pageId=page.page_id+pageSuffix,payload={active_page_id:pageId},tobeActivePage=this.props.pages[pageId],pageExists=tobeActivePage&&tobeActivePage.slots&&tobeActivePage.widgets,activePage=void 0,!pageExists){_context4.next=10;break}activePage=cloneDeep(tobeActivePage),_context4.next=13;break;case 10:return _context4.next=12,this.loadPage(page,pageSuffix,parentPage);case 12:activePage=_context4.sent;case 13:activePage.is_open=!0,payload.activepage=activePage,payload.pages=this.props.pages?this.props.pages:{},payload.pages[pageId]=activePage,payload.active_widget_id="",this.props.updateStore({updates:payload});case 19:case"end":return _context4.stop()}},_callee4,this)}));return function(_x3,_x4,_x5){return _ref4.apply(this,arguments)}}()},{key:"loadPage",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(page,pageSuffix,parentPage,tabName){var pageId,queriedPage,pageParamMapping,pageParams,pageProps,allowedPagePropNames,tobeActivePage,slots,widgets,slotsAndWidgets,layoutCodes,defaultLayout,_this2=this;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return pageId=page.page_id,!this.props.preview&&parentPage?parentPage.id?parentPage.id:parentPage.page_id:this.props.pageid,!0,_context5.next=5,$qry.run("mmf.getSlidePropsById",{uid:pageId},"data.slide",!1,!!this.props.preview);case 5:return queriedPage=_context5.sent,pageParamMapping=page.params,pageParams={},pageProps={},"CreateView"!=queriedPage.Type&&"EditView"!=queriedPage.Type||((allowedPagePropNames=Object.keys(queriedPage.props).filter(function(pagePropName){return"ModelName"!=pagePropName&&"ModelScope"!=pagePropName}))&&allowedPagePropNames.map(function(allowedPropName){return pageProps[allowedPropName]=queriedPage.props[allowedPropName]}),pageProps.recordid="recordid"),pageProps&&Object.keys(pageProps).map(function(propName){if(pageParamMapping&&pageParamMapping[propName])switch(pageParamMapping[propName].type){case"widget_props":var widgetName2Map=pageParamMapping[propName].widgetName,widgetPropName2Map=pageParamMapping[propName].widgetPropName?pageParamMapping[propName].widgetPropName:"value";widgetName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){(parentPageWidgetId==widgetName2Map||parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.Name==widgetName2Map)&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props[widgetPropName2Map])});break;case"page_field":var fieldName2Map=pageParamMapping[propName].pageFieldId;fieldName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.FieldName=="@@["+fieldName2Map+"]"&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.value)});break;case"page_param":parentPage&&parentPage.pageParams&&(pageParamMapping[propName].pageParamId?pageParams[propName]=parentPage.pageParams[pageParamMapping[propName].pageParamId]:pageParams[propName]=parentPage.pageParams[propName]);break;default:parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(pageParams[propName]=parentPage.pageParams[propName])}else parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(pageParams[propName]=parentPage.pageParams[propName])}),tobeActivePage={id:pageId,name:queriedPage.Name,scope:queriedPage.Scope,path:queriedPage.Path,pageType:queriedPage.Type,model:queriedPage.props.ModelName,modelscope:queriedPage.props.ModelScope,props:queriedPage.props,pageParams:pageParams},slots={},widgets={},_context5.next=16,$qry.run("pd.getExistingSlotsbySlideId",{Slide:pageId});case 16:return(slotsAndWidgets=_context5.sent)&&slotsAndWidgets.length>0&&slotsAndWidgets.forEach(function(slotWidget){var slot=slotWidget.node;if(slot&&slot.uid){var slotData={};slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.width=slot.width||0,slotData.height=slot.height,slotData.minwidth=slot.minwidth,slotData.minheight=slot.minheight,slotData.maxwidth=slot.maxwidth,slotData.maxheight=slot.maxheight,slotData.resize=slot.resize,slotData.move=slot.move,slotData.Slide=slot.Slide,slotData.Widget=slot.Widget,slotData.Layout=slot.Layout,slots[slot.Layout||"default"]=slots[slot.Layout||"default"]||{},slots[slot.Layout||"default"][slot.uid]=slotData;var widgetData=slot.slotWidget;if(widgetData&&widgetData.uid){var widget={};widget.id=widgetData.uid,widget.Component=widgetData.Component,widget.name=widgetData.component.Name;var prevWidgetTree={};try{prevWidgetTree=_this2.props.currrentWidget.widgettree?"string"==typeof _this2.props.currrentWidget.widgettree?JSON.parse(_this2.props.currrentWidget.widgettree):_this2.props.currrentWidget.widgettree:prevWidgetTree}catch(err){}var widgetTree={};widgetTree[_this2.props.widgetid+"@@"+_this2.props.pageid+_this2.props.pagesuffix+"@@"+tabName]=prevWidgetTree,widget.widgettree=widgetTree;var widgetProps=widgetData.widgetproperties;if(widgetProps&&widgetProps.edges&&widgetProps.edges.length>0){var props={};widgetProps.edges.forEach(function(propNode){var prop=propNode.node;props[prop.name]=prop.value}),widget.props=props}var componentProps=widgetData.component.Props,widgetPropNames=widget.props?Object.keys(widget.props):[];componentProps&&Object.keys(componentProps).length>0&&Object.keys(componentProps).map(function(componentPropName){widgetPropNames&&-1==widgetPropNames.indexOf(componentPropName)&&(widget.props=widget.props||{},widget.props[componentPropName]=componentProps[componentPropName])}),widgets[slot.Layout||"default"]=widgets[slot.Layout||"default"]||{},widgets[slot.Layout||"default"][widgetData.uid]=widget}}}),layoutCodes=Object.keys(slots),defaultLayout=layoutCodes?layoutCodes.default?"default":layoutCodes[0]:"default",tobeActivePage.layouts={slots:slots,widgets:widgets},tobeActivePage.slots=slots[defaultLayout],tobeActivePage.widgets=widgets[defaultLayout],_context5.abrupt("return",tobeActivePage);case 24:case"end":return _context5.stop()}},_callee5,this)}));return function(_x6,_x7,_x8,_x9){return _ref5.apply(this,arguments)}}()},{key:"evaluateDynamicParameters",value:function(dynamicParamMapping,parentPage){var dynamicParams={};return dynamicParamMapping&&Object.keys(dynamicParamMapping).length>0&&Object.keys(dynamicParamMapping).map(function(propName){switch(dynamicParamMapping[propName].type){case"widget_props":var widgetName2Map=dynamicParamMapping[propName].widgetName,widgetPropName2Map=dynamicParamMapping[propName].widgetPropName?dynamicParamMapping[propName].widgetPropName:"value";widgetName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){(parentPageWidgetId==widgetName2Map||parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.Name==widgetName2Map)&&(dynamicParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props[widgetPropName2Map])});break;case"page_field":var fieldName2Map=dynamicParamMapping[propName].pageFieldId;fieldName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.FieldName=="@@["+fieldName2Map+"]"&&(dynamicParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.value)});break;case"page_param":parentPage&&parentPage.pageParams&&(dynamicParamMapping[propName].pageParamId?dynamicParams[propName]=parentPage.pageParams[dynamicParamMapping[propName].pageParamId]:dynamicParams[propName]=parentPage.pageParams[propName]);break;default:parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(dynamicParams[propName]=parentPage.pageParams[propName])}}),dynamicParams}},{key:"getTabs",value:function(){var _ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(){var self,template,widgetProps,isString,parentPageId,tabs,tabsToRender,tabLabel,_loop,_tabInd,_this3=this;return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return self=this,template=null,_context7.next=4,$ele.registerElement("PageDesignerPreview","studio","React");case 4:if(_context7.sent,widgetProps=this.props.widgetProps||{},isString="string"==typeof widgetProps.tabs,parentPageId=this.props.preview?this.props.pageid:this.props.activepage.id?this.props.activepage.id:this.props.activepage.page_id,tabs=[],0!=(tabs=isString?widgetProps.tabs?JSON.parse(widgetProps.tabs):[]:widgetProps.tabs||[]).length){_context7.next=14;break}template=React.createElement(Tabs,{className:"tab-content",selected:this.state.activeTab,tabContentClassName:"tab-content"},React.createElement(Tab,{disabled:!1,label:"Tab0"},React.createElement("div",{className:"some-content",style:{paddingLeft:16}},"Content for first tab goes here."))),_context7.next=24;break;case 14:tabsToRender=[],tabLabel=function(tabName,tabIndx,tabType,props){return React.createElement("span",null,decodeURIComponent(tabName)||"Tab"+tabIndx,"page"!=tabType||self.props.preview?React.createElement("div",null):React.createElement(Edit16,{style:{marginLeft:5},onClick:function(){var pageSuffix=_this3.props.widgetid+tabInd;_this3.openPage(props.page,pageSuffix,self.props.activepage)}}))},_loop=_regeneratorRuntime.mark(function _loop(_tabInd){var tab,tabType,tabName,tabContent,listTable,listFields,listFilter,pageSize,pageId,pageSuffix,currentPage,pages,prevWidgetTree,widgetTree,relation,dynamicParams,recordid,createViewId,editViewId,createView,createpath,editView,editpath;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:tab=tabs[_tabInd],tabType=tab.tabInfo.type,tabName=tab.tabInfo.name,tabContent=React.createElement("div",{className:"some-content",style:{paddingLeft:16}}," Content for  tab goes here."),listTable=void 0,listFields=[],listFilter={},pageSize=10,_context6.t0=tabType,_context6.next="page"===_context6.t0?8:"simple_list"===_context6.t0?24:"related_list"===_context6.t0?31:57;break;case 8:if(pageId=tab.tabInfo.page.page_id,pageSuffix=_this3.props.widgetid+_tabInd,currentPage=_this3.props.pages[pageId+pageSuffix]?_this3.props.pages[pageId+pageSuffix]:null){_context6.next=18;break}return _context6.next=14,_this3.loadPage(tab.tabInfo.page,pageSuffix,_this3.props.pages[parentPageId],tab.tabInfo.name);case 14:currentPage=_context6.sent,(pages=cloneDeep(_this3.props.pages))[pageId+pageSuffix]=currentPage,_this3.props.updateStore({updates:{pages:pages}});case 18:prevWidgetTree={};try{prevWidgetTree=_this3.props.currrentWidget.widgettree?"string"==typeof _this3.props.currrentWidget.widgettree?JSON.parse(_this3.props.currrentWidget.widgettree):_this3.props.currrentWidget.widgettree:prevWidgetTree}catch(err){}return(widgetTree={})[_this3.props.widgetid+"@@"+_this3.props.pageid+"@@"+tabName]=prevWidgetTree,tabContent=React.createElement("page-designer-preview",{preview:_this3.props.preview,widgetid:_this3.props.widgetid,widgettree:JSON.stringify(widgetTree),pageid:_this3.props.pageid,pagesuffix:pageSuffix,previewpageid:pageId,responsive:"true"}),_context6.abrupt("break",57);case 24:return listTable=tab.tabInfo.list.table,listFields=[],tab.tabInfo.list.fields&&tab.tabInfo.list.fields.length>0&&tab.tabInfo.list.fields.map(function(listField){listFields.push(listField.text)}),listFilter=tab.tabInfo.list.filter,pageSize=tab.tabInfo.list.pagesize,tabContent=React.createElement("list-layout",{table:listTable,fields:listFields,filter:listFilter,pagesize:pageSize,editpath:editpath,createpath:createpath}),_context6.abrupt("break",57);case 31:if(listTable=tab.tabInfo.list.table,listFields=[],tab.tabInfo.list.fields&&tab.tabInfo.list.fields.length>0&&tab.tabInfo.list.fields.map(function(listField){listFields.push(listField.text)}),listFilter=tab.tabInfo.list.filter,pageSize=tab.tabInfo.list.pagesize,relation=tab.tabInfo.list.relation,dynamicParams=_this3.evaluateDynamicParameters(tab.tabInfo.list.params,_this3.props.pages[parentPageId]),recordid=dynamicParams&&dynamicParams.recordid?dynamicParams.recordid:"",createViewId=tab.tabInfo.list.createview,editViewId=tab.tabInfo.list.editview,_context6.t1=createViewId,!_context6.t1){_context6.next=46;break}return _context6.next=45,$qry.run("mmf.getSlideById",{pageId:createViewId},"data.MetaSlide.MetaSlideFindOne",!1,!!_this3.props.preview);case 45:_context6.t1=_context6.sent;case 46:if(createView=_context6.t1,createpath=createView?createView.Path:"",_context6.t2=editViewId,!_context6.t2){_context6.next=53;break}return _context6.next=52,$qry.run("mmf.getSlideById",{pageId:editViewId},"data.MetaSlide.MetaSlideFindOne",!1,!!_this3.props.preview);case 52:_context6.t2=_context6.sent;case 53:return editView=_context6.t2,editpath=editView?editView.Path:"",tabContent=React.createElement("list-layout",{table:listTable,fields:listFields,filter:listFilter,pagesize:pageSize,relation:relation,recordid:recordid,editpath:editpath,createpath:createpath}),_context6.abrupt("break",57);case 57:tabsToRender.push(React.createElement(Tab,{label:tabLabel(tab.tabInfo.name,_tabInd,tabType,{page:tab.tabInfo.page})},tabContent));case 58:case"end":return _context6.stop()}},_loop,_this3)}),_tabInd=0;case 18:if(!(_tabInd<tabs.length)){_context7.next=23;break}return _context7.delegateYield(_loop(_tabInd),"t0",20);case 20:_tabInd++,_context7.next=18;break;case 23:template=React.createElement(Tabs,{selected:this.state.activeTab,onSelectionChange:function(val){_this3.state.activeTab!=val&&_this3.setState({activeTab:val})},className:"tab-content",tabContentClassName:"tab-content"},tabsToRender.map(function(tab){return tab}));case 24:this.setState({template:template});case 25:case"end":return _context7.stop()}},_callee6,this)}));return function(){return _ref6.apply(this,arguments)}}()},{key:"render",value:function(){var tabsTemplate=this.state.template?this.state.template:React.createElement(TabsSkeleton,null);return React.createElement("div",{className:!this.props.widgetProps||0!=this.props.widgetProps.ShowHeader&&"false"!=this.props.widgetProps.ShowHeader?"srs-prem-container":"autotabbing"},tabsTemplate)}}]),_SrsTabs_}(React.Component),_export("SrsTabs",SrsTabs=function(props){return _SrsTabs_}),_export("SrsTabs",SrsTabs)}}}),System.register("component/studio/SrsTextArea.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextArea,cloneDeep,_,_SrsTextArea_,SrsTextArea,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextArea=_carbonComponentsReact.TextArea},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsTextArea_=function(_React$Component){function _SrsTextArea_(props){_classCallCheck(this,_SrsTextArea_);var _this=_possibleConstructorReturn(this,(_SrsTextArea_.__proto__||Object.getPrototypeOf(_SrsTextArea_)).call(this,props)),inputValue="";return inputValue=_this.props.widgetProps&&_this.props.widgetProps.value?_this.props.widgetProps.value:_this.props.value?_this.props.value:"",_this.state={inputValue:inputValue,invalid:!1,reload:!1},_this.handleChange=_this.handleChange.bind(_this),_this.reflectChange=_this.reflectChange.bind(_this),_this}return _inherits(_SrsTextArea_,_React$Component),_createClass(_SrsTextArea_,[{key:"handleChange",value:function(e){this.setState({inputValue:e.target.value,invalid:!e.target.value&&this.props.required+""=="true"})}},{key:"reflectChange",value:function(){var _this2=this;if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);controlProps[this.props.controlname]=this.state.inputValue,this.props.updateStore({updates:{controlProps:controlProps}})}}else if(this.props.iscellcontrol+""=="true"){var controlId=this.props.controlid.replaceAll("_dot_","."),controlIdParts=(controlId=controlId.replace("cell_","")).split("."),formControlName=controlIdParts[0],rowIndx=controlIdParts[1],columnName=controlIdParts[2],cellName=columnName.split("_")[0],parentWidgetId=columnName.split("_")[1],controls=this.props.controls,formControlKey=this.props.pageid+this.props.pagesuffix+"_"+parentWidgetId;controls[formControlKey]=controls[formControlKey]||{},controls[formControlKey][formControlName]=controls[formControlKey][formControlName]||[],controls[formControlKey][formControlName][rowIndx]=controls[formControlKey][formControlName][rowIndx]||{},controls[formControlKey][formControlName][rowIndx][cellName]=this.state.inputValue,controls[formControlKey][formControlName][rowIndx].__isCellEdited__=Date.now(),this.props.updateStore({updates:{controls:controls}})}else if(this.props.widgetProps){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=this.state.inputValue,setTimeout(function(){return _this2.props.updateStore({updates:{widgetProps:updatedProps}})})}}},{key:"componentDidUpdate",value:function(prevProps){this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)?prevProps.widgetProps.value!=this.props.widgetProps.value?this.setState({inputValue:this.props.widgetProps.value}):this.setState({reload:!this.state.reload}):this.props.value!=prevProps.value&&this.setState({inputValue:this.props.value})}},{key:"render",value:function(){var _this3=this,additionalProps={};additionalProps.value=this.state.inputValue||"",(this.props.widgetProps&&("true"==this.props.widgetProps.LightMode||1==this.props.widgetProps.LightMode)||this.props.light+""=="true")&&(additionalProps.light=!0);var embeddedStyles=this.props.inlinestyles;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=this.props.widgetProps.EmbeddedStyles||embeddedStyles||"");var labelText=this.props.label||(this.props.widgetProps?this.props.widgetProps.Label:this.props.label||"Description");return labelText=this.props.required+""=="true"?labelText+" *":labelText,React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,embeddedStyles),React.createElement(TextArea,_extends({},additionalProps,{style:this.props.widgetProps?this.props.widgetProps.styles:this.props.styles?this.props.styles:{},labelText:labelText,placeholder:this.props.placeholder||(this.props.widgetProps?this.props.widgetProps.Placeholder:this.props.placeholder||"Enter Value..."),disabled:this.props.disabled+""=="true"||!!this.props.widgetProps&&this.props.widgetProps.ReadOnly,invalid:this.state.invalid,invalidText:this.props.invalidText||(this.props.widgetProps?this.props.widgetProps.InvalidText:""),helperText:this.props.helperText||(this.props.widgetProps?this.props.widgetProps.helperText:""),onChange:this.handleChange,onBlur:this.reflectChange,onKeyUp:function(e){13===e.keyCode&&_this3.reflectChange()}})))}}]),_SrsTextArea_}(React.Component),_export("SrsTextArea",SrsTextArea=function(props){return _SrsTextArea_}),_export("SrsTextArea",SrsTextArea),_export("default",SrsTextArea),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"controlProps",AccessPath:"controls.${pageid}${pagesuffix}_${controlid}",DefaultValue:'{"controls": {"${pageid}${pagesuffix}_${controlid}": {}}}'},{KeyName:"controls",AccessPath:"controls",DefaultValue:'{"controls": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsTextArea/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextArea,cloneDeep,_,_SrsTextArea_,SrsTextArea;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextArea=_carbonComponentsReact.TextArea},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsTextArea_=function(_React$Component){function _SrsTextArea_(props){_classCallCheck(this,_SrsTextArea_);var _this=_possibleConstructorReturn(this,(_SrsTextArea_.__proto__||Object.getPrototypeOf(_SrsTextArea_)).call(this,props)),inputValue="";return inputValue=_this.props.widgetProps&&_this.props.widgetProps.value?_this.props.widgetProps.value:_this.props.value?_this.props.value:"",_this.state={inputValue:inputValue,invalid:!1,reload:!1},_this.handleChange=_this.handleChange.bind(_this),_this.reflectChange=_this.reflectChange.bind(_this),_this}return _inherits(_SrsTextArea_,_React$Component),_createClass(_SrsTextArea_,[{key:"handleChange",value:function(e){this.setState({inputValue:e.target.value,invalid:!e.target.value&&this.props.required+""=="true"})}},{key:"reflectChange",value:function(){var _this2=this;if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);controlProps[this.props.controlname]=this.state.inputValue,this.props.updateStore({updates:{controlProps:controlProps}})}}else if(this.props.iscellcontrol+""=="true"){var controlId=this.props.controlid.replaceAll("_dot_","."),controlIdParts=(controlId=controlId.replace("cell_","")).split("."),formControlName=controlIdParts[0],rowIndx=controlIdParts[1],columnName=controlIdParts[2],cellName=columnName.split("_")[0],parentWidgetId=columnName.split("_")[1],controls=this.props.controls,formControlKey=this.props.pageid+this.props.pagesuffix+"_"+parentWidgetId;controls[formControlKey]=controls[formControlKey]||{},controls[formControlKey][formControlName]=controls[formControlKey][formControlName]||[],controls[formControlKey][formControlName][rowIndx]=controls[formControlKey][formControlName][rowIndx]||{},controls[formControlKey][formControlName][rowIndx][cellName]=this.state.inputValue,controls[formControlKey][formControlName][rowIndx].__isCellEdited__=Date.now(),this.props.updateStore({updates:{controls:controls}})}else if(this.props.widgetProps){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=this.state.inputValue,setTimeout(function(){return _this2.props.updateStore({updates:{widgetProps:updatedProps}})})}}},{key:"componentDidUpdate",value:function(prevProps){this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)?prevProps.widgetProps.value!=this.props.widgetProps.value?this.setState({inputValue:this.props.widgetProps.value}):this.setState({reload:!this.state.reload}):this.props.value!=prevProps.value&&this.setState({inputValue:this.props.value})}},{key:"render",value:function(){var _this3=this,additionalProps={};additionalProps.value=this.state.inputValue||"",(this.props.widgetProps&&("true"==this.props.widgetProps.LightMode||1==this.props.widgetProps.LightMode)||this.props.light+""=="true")&&(additionalProps.light=!0);var embeddedStyles=this.props.inlinestyles;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=this.props.widgetProps.EmbeddedStyles||embeddedStyles||"");var labelText=this.props.label||(this.props.widgetProps?this.props.widgetProps.Label:this.props.label||"Description");return labelText=this.props.required+""=="true"?labelText+" *":labelText,React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,embeddedStyles),React.createElement(TextArea,_extends({},additionalProps,{style:this.props.widgetProps?this.props.widgetProps.styles:this.props.styles?this.props.styles:{},labelText:labelText,placeholder:this.props.placeholder||(this.props.widgetProps?this.props.widgetProps.Placeholder:this.props.placeholder||"Enter Value..."),disabled:this.props.disabled+""=="true"||!!this.props.widgetProps&&this.props.widgetProps.ReadOnly,invalid:this.state.invalid,invalidText:this.props.invalidText||(this.props.widgetProps?this.props.widgetProps.InvalidText:""),helperText:this.props.helperText||(this.props.widgetProps?this.props.widgetProps.helperText:""),onChange:this.handleChange,onBlur:this.reflectChange,onKeyUp:function(e){13===e.keyCode&&_this3.reflectChange()}})))}}]),_SrsTextArea_}(React.Component),_export("SrsTextArea",SrsTextArea=function(props){return _SrsTextArea_}),_export("SrsTextArea",SrsTextArea)}}}),System.register("component/studio/SrsTextField.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,_,_SrsTextField_,SrsTextField,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.ControlledPasswordInputApp},function(_lodash){_=_lodash.default}],execute:function(){_SrsTextField_=function(_React$Component){function _SrsTextField_(props){_classCallCheck(this,_SrsTextField_);var _this=_possibleConstructorReturn(this,(_SrsTextField_.__proto__||Object.getPrototypeOf(_SrsTextField_)).call(this,props)),inputValue="";return inputValue=_this.props.widgetProps&&_this.props.widgetProps.value?_this.props.widgetProps.value:_this.props.value?_this.props.value:"",_this.state={inputValue:inputValue,invalid:!1,reload:!1},_this.handleChange=_this.handleChange.bind(_this),_this.reflectChange=_this.reflectChange.bind(_this),_this}return _inherits(_SrsTextField_,_React$Component),_createClass(_SrsTextField_,[{key:"handleChange",value:function(e){this.setState({inputValue:e.target.value,invalid:!e.target.value&&this.props.required+""=="true"})}},{key:"reflectChange",value:function(){var _this2=this;if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);controlProps[this.props.controlname]=this.state.inputValue,this.props.updateStore({updates:{controlProps:controlProps}})}}else if(this.props.iscellcontrol+""=="true"){var controlId=this.props.controlid.replaceAll("_dot_","."),controlIdParts=(controlId=controlId.replace("cell_","")).split("."),formControlName=controlIdParts[0],rowIndx=controlIdParts[1],columnName=controlIdParts[2],cellName=columnName.split("_")[0],parentWidgetId=columnName.split("_")[1],controls=this.props.controls,formControlKey=this.props.pageid+this.props.pagesuffix+"_"+parentWidgetId;controls[formControlKey]=controls[formControlKey]||{},controls[formControlKey][formControlName]=controls[formControlKey][formControlName]||[],controls[formControlKey][formControlName][rowIndx]=controls[formControlKey][formControlName][rowIndx]||{},controls[formControlKey][formControlName][rowIndx][cellName]=this.state.inputValue,controls[formControlKey][formControlName][rowIndx].__isCellEdited__=Date.now(),this.props.updateStore({updates:{controls:controls}})}else if(this.props.widgetProps){var updatedProps=Object.assign({},this.props.widgetProps);updatedProps.value=this.state.inputValue,setTimeout(function(){return _this2.props.updateStore({updates:{widgetProps:updatedProps}})})}}},{key:"componentDidUpdate",value:function(prevProps){this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)?prevProps.widgetProps.value!=this.props.widgetProps.value?this.setState({inputValue:this.props.widgetProps.value}):this.setState({reload:!this.state.reload}):prevProps.value!=this.props.value&&this.setState({inputValue:this.props.value})}},{key:"render",value:function(){var _this3=this,additionalProps={};additionalProps.value=this.state.inputValue||"",(this.props.widgetProps&&("true"==this.props.widgetProps.LightMode||1==this.props.widgetProps.LightMode)||this.props.light+""=="true")&&(additionalProps.light=!0);var embeddedStyles=null;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles));var textEl=null,labelText=this.props.widgetProps&&this.props.widgetProps.Label||(this.props.iscellcontrol+""=="true"?"":this.props.label||"Name");labelText=this.props.required+""=="true"?labelText+" *":labelText;var textInputProps=_extends({className:this.props.className,labelText:labelText,placeholder:this.props.placeholder||this.props.widgetProps&&this.props.widgetProps.Placeholder||"Enter Value..."},additionalProps,{disabled:this.props.disabled+""=="true"||this.props.widgetProps&&this.props.widgetProps.ReadOnly+""=="true",invalid:this.state.invalid,invalidText:this.props.invalidText||this.props.widgetProps&&this.props.widgetProps.InvalidText,helperText:this.props.helperText||this.props.widgetProps&&this.props.widgetProps.helperText,onChange:this.handleChange,onBlur:this.reflectChange,onKeyUp:function(e){13===e.keyCode&&_this3.reflectChange()}});return textEl=this.props.widgetProps&&this.props.widgetProps.Password+""=="true"?React.createElement(TextInput.PasswordInput,_extends({},textInputProps,{})):React.createElement(TextInput,textInputProps),React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,this.props.inlinestyles||""),embeddedStyles,textEl)}}]),_SrsTextField_}(React.Component),_export("SrsTextField",SrsTextField=function(props){return _SrsTextField_}),_export("SrsTextField",SrsTextField),_export("default",SrsTextField),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"controlProps",AccessPath:"controls.${pageid}${pagesuffix}_${controlid}",DefaultValue:'{"controls": {"${pageid}${pagesuffix}_${controlid}": {}}}'},{KeyName:"controls",AccessPath:"controls",DefaultValue:'{"controls": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsTextField/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,_,_SrsTextField_,SrsTextField;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.ControlledPasswordInputApp},function(_lodash){_=_lodash.default}],execute:function(){_SrsTextField_=function(_React$Component){function _SrsTextField_(props){_classCallCheck(this,_SrsTextField_);var _this=_possibleConstructorReturn(this,(_SrsTextField_.__proto__||Object.getPrototypeOf(_SrsTextField_)).call(this,props)),inputValue="";return inputValue=_this.props.widgetProps&&_this.props.widgetProps.value?_this.props.widgetProps.value:_this.props.value?_this.props.value:"",_this.state={inputValue:inputValue,invalid:!1,reload:!1},_this.handleChange=_this.handleChange.bind(_this),_this.reflectChange=_this.reflectChange.bind(_this),_this}return _inherits(_SrsTextField_,_React$Component),_createClass(_SrsTextField_,[{key:"handleChange",value:function(e){this.setState({inputValue:e.target.value,invalid:!e.target.value&&this.props.required+""=="true"})}},{key:"reflectChange",value:function(){var _this2=this;if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);controlProps[this.props.controlname]=this.state.inputValue,this.props.updateStore({updates:{controlProps:controlProps}})}}else if(this.props.iscellcontrol+""=="true"){var controlId=this.props.controlid.replaceAll("_dot_","."),controlIdParts=(controlId=controlId.replace("cell_","")).split("."),formControlName=controlIdParts[0],rowIndx=controlIdParts[1],columnName=controlIdParts[2],cellName=columnName.split("_")[0],parentWidgetId=columnName.split("_")[1],controls=this.props.controls,formControlKey=this.props.pageid+this.props.pagesuffix+"_"+parentWidgetId;controls[formControlKey]=controls[formControlKey]||{},controls[formControlKey][formControlName]=controls[formControlKey][formControlName]||[],controls[formControlKey][formControlName][rowIndx]=controls[formControlKey][formControlName][rowIndx]||{},controls[formControlKey][formControlName][rowIndx][cellName]=this.state.inputValue,controls[formControlKey][formControlName][rowIndx].__isCellEdited__=Date.now(),this.props.updateStore({updates:{controls:controls}})}else if(this.props.widgetProps){var updatedProps=Object.assign({},this.props.widgetProps);updatedProps.value=this.state.inputValue,setTimeout(function(){return _this2.props.updateStore({updates:{widgetProps:updatedProps}})})}}},{key:"componentDidUpdate",value:function(prevProps){this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)?prevProps.widgetProps.value!=this.props.widgetProps.value?this.setState({inputValue:this.props.widgetProps.value}):this.setState({reload:!this.state.reload}):prevProps.value!=this.props.value&&this.setState({inputValue:this.props.value})}},{key:"render",value:function(){var _this3=this,additionalProps={};additionalProps.value=this.state.inputValue||"",(this.props.widgetProps&&("true"==this.props.widgetProps.LightMode||1==this.props.widgetProps.LightMode)||this.props.light+""=="true")&&(additionalProps.light=!0);var embeddedStyles=null;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles));var textEl=null,labelText=this.props.widgetProps&&this.props.widgetProps.Label||(this.props.iscellcontrol+""=="true"?"":this.props.label||"Name");labelText=this.props.required+""=="true"?labelText+" *":labelText;var textInputProps=_extends({className:this.props.className,labelText:labelText,placeholder:this.props.placeholder||this.props.widgetProps&&this.props.widgetProps.Placeholder||"Enter Value..."},additionalProps,{disabled:this.props.disabled+""=="true"||this.props.widgetProps&&this.props.widgetProps.ReadOnly+""=="true",invalid:this.state.invalid,invalidText:this.props.invalidText||this.props.widgetProps&&this.props.widgetProps.InvalidText,helperText:this.props.helperText||this.props.widgetProps&&this.props.widgetProps.helperText,onChange:this.handleChange,onBlur:this.reflectChange,onKeyUp:function(e){13===e.keyCode&&_this3.reflectChange()}});return textEl=this.props.widgetProps&&this.props.widgetProps.Password+""=="true"?React.createElement(TextInput.PasswordInput,_extends({},textInputProps,{})):React.createElement(TextInput,textInputProps),React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,this.props.inlinestyles||""),embeddedStyles,textEl)}}]),_SrsTextField_}(React.Component),_export("SrsTextField",SrsTextField=function(props){return _SrsTextField_}),_export("SrsTextField",SrsTextField)}}}),System.register("component/studio/SrsThreeWaySwitch.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsThreeWaySwitch_,SrsThreeWaySwitch,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SrsThreeWaySwitch_=function(_React$Component){function _SrsThreeWaySwitch_(props){_classCallCheck(this,_SrsThreeWaySwitch_);var _this=_possibleConstructorReturn(this,(_SrsThreeWaySwitch_.__proto__||Object.getPrototypeOf(_SrsThreeWaySwitch_)).call(this,props));return _this.state={selected:_this.props.selected},_this.handleChange=_this.handleChange.bind(_this),_this.selectionStyle=_this.selectionStyle.bind(_this),_this}return _inherits(_SrsThreeWaySwitch_,_React$Component),_createClass(_SrsThreeWaySwitch_,[{key:"handleChange",value:function(val){this.setState({selected:val}),this.props.onChange(val)}},{key:"selectionStyle",value:function(){return{left:this.props.values.indexOf(this.state.selected)/this.props.values.length*100+"%"}}},{key:"render",value:function(){var _this2=this,ClickableLabel=function(_ref){var title=_ref.title,onChange=_ref.onChange,id=_ref.id;return React.createElement("label",{onClick:function(){return onChange(title)},className:"switchlabel "+id},title.split(/\s+/).map(function(w){return w[0].toUpperCase()+w.slice(1)}).join(" "))},ConcealedRadio=function(_ref2){var value=_ref2.value,selected=_ref2.selected;return React.createElement("input",{className:"switchradio",type:"radio",name:"switch",checked:selected===value})},selected=this.state.selected;return React.createElement("div",{style:{marginLeft:"40%"}},React.createElement("style",null,'@import url("component/studio/SrsThreeWaySwitch/Style.css");'),React.createElement("div",{className:"switch",style:{width:45*this.props.values.length}},this.props.values.map(function(val){return React.createElement("span",null,React.createElement(ConcealedRadio,{value:val,selected:selected}),React.createElement(ClickableLabel,{title:val,onChange:_this2.handleChange}))}),React.createElement("span",{className:"switchselection",style:this.selectionStyle()})))}}]),_SrsThreeWaySwitch_}(React.Component),_export("SrsThreeWaySwitch",SrsThreeWaySwitch=function(props){return _SrsThreeWaySwitch_}),_export("SrsThreeWaySwitch",SrsThreeWaySwitch),_export("default",SrsThreeWaySwitch),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsTime.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TimePicker,TimePickerSelect,SelectItem,cloneDeep,_SrsTime_,SrsTime,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TimePicker=_carbonComponentsReact.TimePicker,TimePickerSelect=_carbonComponentsReact.TimePickerSelect,SelectItem=_carbonComponentsReact.SelectItem},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsTime_=function(_React$Component){function _SrsTime_(props){_classCallCheck(this,_SrsTime_);var _this=_possibleConstructorReturn(this,(_SrsTime_.__proto__||Object.getPrototypeOf(_SrsTime_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsTime_,_React$Component),_createClass(_SrsTime_,[{key:"handleChange",value:function(val){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=val,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"render",value:function(){try{this.props.widgetProps&&this.props.widgetProps.styles?JSON.parse(this.props.widgetProps.styles):{}}catch(err){}return this.props.widgetProps.value&&this.props.widgetProps.value,React.createElement("div",{className:"srs-prem-container"},React.createElement(TimePicker,{id:"time-picker",onChange:this.handleChange,hideLabel:!1,labelText:this.props.widgetProps&&this.props.widgetProps.Label||"Time",invalidText:this.props.widgetProps&&this.props.widgetProps.InvalidText||""},React.createElement(TimePickerSelect,{id:"time-picker-select-1",labelText:"Please select"},React.createElement(SelectItem,{value:"AM",text:"AM"}),React.createElement(SelectItem,{value:"PM",text:"PM"})),React.createElement(TimePickerSelect,{id:"time-picker-select-2",labelText:"Please select"},React.createElement(SelectItem,{value:"PST",text:"PST"}),React.createElement(SelectItem,{value:"IST",text:"IST"}))))}}]),_SrsTime_}(React.Component),_export("SrsTime",SrsTime=function(props){return _SrsTime_}),_export("SrsTime",SrsTime),_export("default",SrsTime),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsTime/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TimePicker,TimePickerSelect,SelectItem,cloneDeep,_SrsTime_,SrsTime;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TimePicker=_carbonComponentsReact.TimePicker,TimePickerSelect=_carbonComponentsReact.TimePickerSelect,SelectItem=_carbonComponentsReact.SelectItem},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsTime_=function(_React$Component){function _SrsTime_(props){_classCallCheck(this,_SrsTime_);var _this=_possibleConstructorReturn(this,(_SrsTime_.__proto__||Object.getPrototypeOf(_SrsTime_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsTime_,_React$Component),_createClass(_SrsTime_,[{key:"handleChange",value:function(val){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=val,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"render",value:function(){try{this.props.widgetProps&&this.props.widgetProps.styles?JSON.parse(this.props.widgetProps.styles):{}}catch(err){}return this.props.widgetProps.value&&this.props.widgetProps.value,React.createElement("div",{className:"srs-prem-container"},React.createElement(TimePicker,{id:"time-picker",onChange:this.handleChange,hideLabel:!1,labelText:this.props.widgetProps&&this.props.widgetProps.Label||"Time",invalidText:this.props.widgetProps&&this.props.widgetProps.InvalidText||""},React.createElement(TimePickerSelect,{id:"time-picker-select-1",labelText:"Please select"},React.createElement(SelectItem,{value:"AM",text:"AM"}),React.createElement(SelectItem,{value:"PM",text:"PM"})),React.createElement(TimePickerSelect,{id:"time-picker-select-2",labelText:"Please select"},React.createElement(SelectItem,{value:"PST",text:"PST"}),React.createElement(SelectItem,{value:"IST",text:"IST"}))))}}]),_SrsTime_}(React.Component),_export("SrsTime",SrsTime=function(props){return _SrsTime_}),_export("SrsTime",SrsTime)}}}),System.register("component/studio/SrsTitle.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Tile,_SrsTitle_,SrsTitle,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Tile=_carbonComponentsReact.Tile}],execute:function(){_SrsTitle_=function(_React$Component){function _SrsTitle_(){return _classCallCheck(this,_SrsTitle_),_possibleConstructorReturn(this,(_SrsTitle_.__proto__||Object.getPrototypeOf(_SrsTitle_)).apply(this,arguments))}return _inherits(_SrsTitle_,_React$Component),_createClass(_SrsTitle_,[{key:"render",value:function(){var styles={textAlign:"left"};try{var stylesFromProps=this.props.widgetProps&&this.props.widgetProps.Styles?JSON.parse(this.props.widgetProps.Styles):styles;styles=_extends({},styles,stylesFromProps)}catch(err){}var embeddedStyles=this.props.inlinestyles;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=this.props.widgetProps.EmbeddedStyles||embeddedStyles||"");var title=this.props.widgetProps&&this.props.widgetProps.Title?this.props.widgetProps.Title:this.props.title?this.props.title:"Title placeholder",contentEl=this.props.showtile+""=="false"?React.createElement("div",{className:"top",style:styles},title):React.createElement(Tile,{className:"top",style:styles},title);return React.createElement(React.Fragment,null,React.createElement("style",null,embeddedStyles),contentEl)}}]),_SrsTitle_}(React.Component),_export("SrsTitle",SrsTitle=function(props){return _SrsTitle_}),_export("SrsTitle",SrsTitle),_export("default",SrsTitle),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsTitle/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Tile,_SrsTitle_,SrsTitle;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Tile=_carbonComponentsReact.Tile}],execute:function(){_SrsTitle_=function(_React$Component){function _SrsTitle_(){return _classCallCheck(this,_SrsTitle_),_possibleConstructorReturn(this,(_SrsTitle_.__proto__||Object.getPrototypeOf(_SrsTitle_)).apply(this,arguments))}return _inherits(_SrsTitle_,_React$Component),_createClass(_SrsTitle_,[{key:"render",value:function(){var styles={textAlign:"left"};try{var stylesFromProps=this.props.widgetProps&&this.props.widgetProps.Styles?JSON.parse(this.props.widgetProps.Styles):styles;styles=_extends({},styles,stylesFromProps)}catch(err){}var embeddedStyles=this.props.inlinestyles;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=this.props.widgetProps.EmbeddedStyles||embeddedStyles||"");var title=this.props.widgetProps&&this.props.widgetProps.Title?this.props.widgetProps.Title:this.props.title?this.props.title:"Title placeholder",contentEl=this.props.showtile+""=="false"?React.createElement("div",{className:"top",style:styles},title):React.createElement(Tile,{className:"top",style:styles},title);return React.createElement(React.Fragment,null,React.createElement("style",null,embeddedStyles),contentEl)}}]),_SrsTitle_}(React.Component),_export("SrsTitle",SrsTitle=function(props){return _SrsTitle_}),_export("SrsTitle",SrsTitle)}}}),System.register("component/studio/SrsToggle.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Toggle,cloneDeep,_SrsToggle_,SrsToggle,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Toggle=_carbonComponentsReact.Toggle},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsToggle_=function(_React$Component){function _SrsToggle_(props){_classCallCheck(this,_SrsToggle_);var _this=_possibleConstructorReturn(this,(_SrsToggle_.__proto__||Object.getPrototypeOf(_SrsToggle_)).call(this,props));return _this.onChange=_this.onChange.bind(_this),_this}return _inherits(_SrsToggle_,_React$Component),_createClass(_SrsToggle_,[{key:"onChange",value:function(e){if(this.props.updateStore){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.toggled=e.target.checked,this.props.updateStore({updates:{widgetProps:updatedProps}})}this.props.handleOnChange?this.props.handleOnChange(val):this.props.onChange&&this.props.onChange(val)}},{key:"render",value:function(){var uid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),props={id:this.props.id?this.props.id:uid,onChange:this.onChange};this.props.widgetProps&&(props.labelA=this.props.widgetProps.OFF_Label,props.labelB=this.props.widgetProps.ON_Label,"true"!=this.props.widgetProps.value&&1!=this.props.widgetProps.value||(props.toggled=!0),props.defaultToggled="true"==this.props.widgetProps.DefaultValue||1==this.props.widgetProps.DefaultValue);var containerStyles=this.props.containerStyles?this.props.containerStyles:null;return React.createElement("div",{className:containerStyles?"":"srs-prem-container",style:containerStyles},React.createElement("fieldset",null,React.createElement(Toggle,props)))}}]),_SrsToggle_}(React.Component),_export("SrsToggle",SrsToggle=function(props){return WrappedComponent=_SrsToggle_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsToggle",SrsToggle),_export("default",SrsToggle),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsToggle/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Toggle,cloneDeep,_SrsToggle_,SrsToggle;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Toggle=_carbonComponentsReact.Toggle},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsToggle_=function(_React$Component){function _SrsToggle_(props){_classCallCheck(this,_SrsToggle_);var _this=_possibleConstructorReturn(this,(_SrsToggle_.__proto__||Object.getPrototypeOf(_SrsToggle_)).call(this,props));return _this.onChange=_this.onChange.bind(_this),_this}return _inherits(_SrsToggle_,_React$Component),_createClass(_SrsToggle_,[{key:"onChange",value:function(e){if(this.props.updateStore){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.toggled=e.target.checked,this.props.updateStore({updates:{widgetProps:updatedProps}})}this.props.handleOnChange?this.props.handleOnChange(val):this.props.onChange&&this.props.onChange(val)}},{key:"render",value:function(){var uid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),props={id:this.props.id?this.props.id:uid,onChange:this.onChange};this.props.widgetProps&&(props.labelA=this.props.widgetProps.OFF_Label,props.labelB=this.props.widgetProps.ON_Label,"true"!=this.props.widgetProps.value&&1!=this.props.widgetProps.value||(props.toggled=!0),props.defaultToggled="true"==this.props.widgetProps.DefaultValue||1==this.props.widgetProps.DefaultValue);var containerStyles=this.props.containerStyles?this.props.containerStyles:null;return React.createElement("div",{className:containerStyles?"":"srs-prem-container",style:containerStyles},React.createElement("fieldset",null,React.createElement(Toggle,props)))}}]),_SrsToggle_}(React.Component),_export("SrsToggle",SrsToggle=function(props){return WrappedComponent=_SrsToggle_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsToggle",SrsToggle)}}}),System.register("component/studio/SrsTreeSortable.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","sortablejs/modular/sortable.core.esm.js","react-html-parser"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Sortable,AutoScroll,ReactHtmlParser,_SrsTreeSortable_,SrsTreeSortable,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_sortablejsModularSortableCoreEsmJs){Sortable=_sortablejsModularSortableCoreEsmJs.default,AutoScroll=_sortablejsModularSortableCoreEsmJs.AutoScroll},function(_reactHtmlParser){ReactHtmlParser=_reactHtmlParser.default,_reactHtmlParser.processNodes,_reactHtmlParser.convertNodeToElement,_reactHtmlParser.htmlparser2}],execute:function(){_SrsTreeSortable_=function(_React$Component){function _SrsTreeSortable_(props){_classCallCheck(this,_SrsTreeSortable_);var _this=_possibleConstructorReturn(this,(_SrsTreeSortable_.__proto__||Object.getPrototypeOf(_SrsTreeSortable_)).call(this,props));window.sortAutoScroll||(Sortable.mount(new AutoScroll),window.sortAutoScroll=!0),_this.createHTML=_this.createHTML.bind(_this),_this.html2JSON=_this.html2JSON.bind(_this),_this.createDataFromHTML=_this.createDataFromHTML.bind(_this),_this.camelcase2Snakecase=_this.camelcase2Snakecase.bind(_this),_this.snakecase2Camelcase=_this.snakecase2Camelcase.bind(_this);var htmlContent=null;if(_this.props.data){var htmlContentStr=_this.createHTML(_this.props.data);htmlContent=ReactHtmlParser(htmlContentStr)}else htmlContent=React.createElement("div",null,"No data");return _this.state={currentData:_this.props.data,htmlContent:htmlContent},_this}return _inherits(_SrsTreeSortable_,_React$Component),_createClass(_SrsTreeSortable_,[{key:"componentDidMount",value:function(){var i,_this2=this;this.refs.topElement&&function(){var nestedSortables=$(_this2.refs.topElement).find(".nested"),createDataFn=_this2.createDataFromHTML;for(i=0;i<nestedSortables.length;i++)new Sortable(nestedSortables[i],{group:"nested",animation:150,fallbackOnBody:!0,invertSwap:!0,swapThreshold:.05,onEnd:function(evt){createDataFn(evt)}})}()}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this3=this;if(_.isEqual(prevProps.data,this.props.data)||_.isEqual(this.props.data,this.state.currentData)||!this.refs.topElement){if(!_.isEqual(prevState.htmlContent,this.state.htmlContent)){var i;!function(){var nestedSortables=$(_this3.refs.topElement).find(".nested"),createDataFn=_this3.createDataFromHTML;for(i=0;i<nestedSortables.length;i++)new Sortable(nestedSortables[i],{group:"nested",animation:150,fallbackOnBody:!0,swapThreshold:.65,onEnd:function(evt){createDataFn(evt)}})}()}}else{var htmlContentStr=this.createHTML(this.props.data),htmlContent=ReactHtmlParser(htmlContentStr);this.setState({htmlContent:htmlContent})}}},{key:"createDataFromHTML",value:function(evt){if(this.refs.topElement){var el=this.refs.topElement.children[0],result=this.html2JSON(el);this.setState({currentData:result}),this.props.onChange&&this.props.onChange(result)}}},{key:"html2JSON",value:function(e){var _this4=this,output={},isListGroupItem=e.attributes.class&&e.attributes.class&&e.attributes.class.value.indexOf("list-group-item")>-1,isListGroup=!isListGroupItem&&e.attributes.class&&e.attributes.class&&e.attributes.class.value.indexOf("list-group")>-1,isNestedClass=e.attributes.class&&e.attributes.class&&e.attributes.class.value.indexOf("nested")>-1,isNestedAttr=e.attributes.nested&&e.attributes.nested.value+""=="true";return isListGroup&&isNestedClass?(e.attributes.datatype&&(output.dataType=e.attributes.datatype.value),"Group"==output.dataType&&(output.label=e.attributes.label.value),output.Properties=[],Array.from(e.children,function(el){output.Properties.push(_this4.html2JSON(el))}),output):isNestedAttr?this.html2JSON(e.children[0]):(e.attributes.datatype&&(output.dataType=e.attributes.datatype.value),isListGroupItem&&Array.from(e.attributes,function(_ref){var name=_ref.name,value=_ref.value;if("datatype"!=name.toLowerCase()&&"class"!=name.toLowerCase()&&"style"!=name.toLowerCase()){var attrName="align1"==name?"align":name;attrName=_this4.snakecase2Camelcase(attrName),value.indexOf("QUOT")>-1&&(value=value.replaceAll("QUOT",'"')).startsWith("JSON:")&&(value=value.replace("JSON:",""),value=JSON.parse(value)),output[attrName]="true"==value||"false"==value?"true"==value:value}}),output)}},{key:"camelcase2Snakecase",value:function(str){return str.replace(/[A-Z]/g,function(letter){return"_"+letter.toLowerCase()})}},{key:"snakecase2Camelcase",value:function(str){return str.replace(/([-_][a-z])/gi,function($1){return $1.toUpperCase().replace("-","").replace("_","")})}},{key:"createHTML",value:function(tempObj){var output="";if(tempObj&&tempObj.dataType){if("Group"==tempObj.dataType){if(output=output+'<div dataType="Group" code="'+tempObj.code+'" label="'+(tempObj.label||"Empty")+'" class="list-group-item" nested="true">Group: '+(tempObj.label||"Empty")+'\n                                        <div dataType="Group" label="'+(tempObj.label||"Empty")+'" class="list-group nested">',tempObj.Properties)for(var propsIndx in tempObj.Properties){var prop=tempObj.Properties[propsIndx];output+=this.createHTML(prop)}return output+="     </div>\n                                    </div>"}if(tempObj.Properties||"VerticalLayout"==tempObj.dataType||"HorizontalLayout"==tempObj.dataType||"Categorization"==tempObj.dataType){if(output=output+'<div dataType="'+tempObj.dataType+'" code="'+tempObj.code+'" class="list-group-item" nested="true">'+tempObj.dataType+'\n                                        <div dataType="'+tempObj.dataType+'" class="list-group nested">',tempObj.Properties)for(var _propsIndx in tempObj.Properties){var _prop=tempObj.Properties[_propsIndx];output+=this.createHTML(_prop)}return output+="     </div>\n                                    </div>"}var attrNames=Object.keys(tempObj),attrs="",name="";for(var attrIndx in attrNames){var attrName=attrNames[attrIndx],changedAttrName="align"==attrName?"align1":this.camelcase2Snakecase(attrName);if("string"!=typeof tempObj[attrName]&&tempObj[attrName])JSON.stringify(tempObj[attrName]).indexOf('"')>-1?attrs+=changedAttrName+'="JSON:'+JSON.stringify(tempObj[attrName]).replaceAll('"',"QUOT")+'"':attrs+=changedAttrName+'="'+JSON.stringify(tempObj[attrName])+'"';else attrs+=changedAttrName+'="'+(tempObj[attrName]?tempObj[attrName]:"").replaceAll('"',"QUOT")+'" '}return"Control"==tempObj.dataType?name="Control: "+tempObj.scope:"Label"==tempObj.dataType?name="Label: "+tempObj.text:"Actions"==tempObj.dataType?name="Actions":"Group"==tempObj.dataType?name="Group: "+(tempObj.label||"Empty"):"List"==tempObj.dataType?name="List: "+(tempObj.name||"Empty"):"CustomComponent"==tempObj.dataType&&(name="Custom Component: "+(tempObj.name||"Empty")),"<div "+attrs+' class="list-group-item">'+name+"</div>"}}},{key:"render",value:function(){return React.createElement("div",{ref:"topElement"},this.state.htmlContent)}}]),_SrsTreeSortable_}(React.Component),_export("SrsTreeSortable",SrsTreeSortable=function(props){return _SrsTreeSortable_}),_export("SrsTreeSortable",SrsTreeSortable),_export("default",SrsTreeSortable),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsteeHeader.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/user/20","@carbon/icons-react/lib/notification/20","@carbon/icons-react/lib/app-switcher/20","@carbon/icons-react/lib/menu/32","@carbon/icons-react/lib/menu/20","@carbon/icons-react/lib/home/20","@carbon/icons-react/lib/close/20","@carbon/icons-react/lib/arrow--left/20","@carbon/icons-react/lib/arrow--right/20","@carbon/icons-react/lib/pin/20","component/studio/SrsSimpleNavigator/Definition.js","component/studio/SrsReference/Definition.js","carbon-components-react","carbon-components-react/lib/components/UIShell","component/studio/SrsMultiButton/Definition.js"],function(_export,_context4){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Search20,User20,Menu32,Menu20,CloseFilled32,BackwardURL,ForwardURL,SrsSimpleNavigator,SrsReference,TooltipDefinition,Header,HeaderName,HeaderMenu,HeaderMenuItem,HeaderNavigation,HeaderMenuButton,HeaderGlobalAction,HeaderGlobalBar,SideNavMenu,SideNavMenuItem,Search,_SrsteeHeader_,SrsteeHeader,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibUser){User20=_carbonIconsReactLibUser.default},function(_carbonIconsReactLibNotification){_carbonIconsReactLibNotification.default},function(_carbonIconsReactLibAppSwitcher){_carbonIconsReactLibAppSwitcher.default},function(_carbonIconsReactLibMenu){Menu32=_carbonIconsReactLibMenu.default},function(_carbonIconsReactLibMenu2){Menu20=_carbonIconsReactLibMenu2.default},function(_carbonIconsReactLibHome){_carbonIconsReactLibHome.default},function(_carbonIconsReactLibClose){CloseFilled32=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibArrowLeft){BackwardURL=_carbonIconsReactLibArrowLeft.default},function(_carbonIconsReactLibArrowRight){ForwardURL=_carbonIconsReactLibArrowRight.default},function(_carbonIconsReactLibPin){_carbonIconsReactLibPin.default},function(_componentStudioSrsSimpleNavigatorDefinitionJs){SrsSimpleNavigator=_componentStudioSrsSimpleNavigatorDefinitionJs.SrsSimpleNavigator},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_carbonComponentsReact){TooltipDefinition=_carbonComponentsReact.TooltipDefinition,_carbonComponentsReact.OverflowMenu,_carbonComponentsReact.OverflowMenuItem,Search=_carbonComponentsReact.Search},function(_carbonComponentsReactLibComponentsUIShell){Header=_carbonComponentsReactLibComponentsUIShell.Header,HeaderName=_carbonComponentsReactLibComponentsUIShell.HeaderName,HeaderMenu=_carbonComponentsReactLibComponentsUIShell.HeaderMenu,HeaderMenuItem=_carbonComponentsReactLibComponentsUIShell.HeaderMenuItem,HeaderNavigation=_carbonComponentsReactLibComponentsUIShell.HeaderNavigation,HeaderMenuButton=_carbonComponentsReactLibComponentsUIShell.HeaderMenuButton,HeaderGlobalAction=_carbonComponentsReactLibComponentsUIShell.HeaderGlobalAction,HeaderGlobalBar=_carbonComponentsReactLibComponentsUIShell.HeaderGlobalBar,_carbonComponentsReactLibComponentsUIShell.SideNav,_carbonComponentsReactLibComponentsUIShell.SideNavItems,SideNavMenu=_carbonComponentsReactLibComponentsUIShell.SideNavMenu,SideNavMenuItem=_carbonComponentsReactLibComponentsUIShell.SideNavMenuItem},function(_componentStudioSrsMultiButtonDefinitionJs){_componentStudioSrsMultiButtonDefinitionJs.SrsMultiButton}],execute:function(){_SrsteeHeader_=function(_React$Component){function _SrsteeHeader_(props){_classCallCheck(this,_SrsteeHeader_);var _this=_possibleConstructorReturn(this,(_SrsteeHeader_.__proto__||Object.getPrototypeOf(_SrsteeHeader_)).call(this,props));return _this.state={searchExpand:!1,expanded:!1,isSideNavExpanded:!1,isSideNavPinned:!1,sideNavEl:null,showPicker:!1},_this.toggleSearch=_this.toggleSearch.bind(_this),_this.accessToken=document.cookie?document.cookie.replace(/(?:(?:^|.*;\s*)authorization\s*\=\s*([^;]*).*$)|^.*$/,"$1"):null,_this.getScopes=_this.getScopes.bind(_this),_this.accessToken&&_this.getScopes().then(function(scopesData){var allScopes={};Object.keys(scopesData).map(function(scopeItemKey,indx){"currentScope"!=scopeItemKey&&(allScopes[scopeItemKey]=scopesData[scopeItemKey])}),_this.props.updateStore({updates:{scopes:allScopes,currentscope:scopesData.currentScope?scopesData.currentScope:_this.props.currentscope?_this.props.currentscope:"studio",currentscopeid:scopesData.currentScope?allScopes[scopesData.currentScope].uid:""}})}),_this.openModule=_this.openModule.bind(_this),_this}return _inherits(_SrsteeHeader_,_React$Component),_createClass(_SrsteeHeader_,[{key:"getScopes",value:function(){return new Promise(function(resolve,reject){window.scopes?resolve(window.scopes):$script.getscript("mmf.getScopes").then(function(_ref){(0,_ref.default)().then(function(scopesData){window.scopes=scopesData,resolve(scopesData)})})})}},{key:"toggleSearch",value:function(){this.setState({searchExpand:!this.state.searchExpand})}},{key:"logout",value:function(){document.cookie="authorization=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",location.href="/login"}},{key:"componentDidMount",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var Navigator,navigationActions,self,sideNavEl,moduleData,moduleIds,moduleEls,_loop,moduleIdIndx,fixedModuleEl,_this2=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(Navigator=SrsSimpleNavigator(),navigationActions=[],self=this,this.props.urlhistory&&this.props.urlhistory.length>1&&navigationActions.push({icon:BackwardURL,onClick:function(e){var historyURL=_this2.props.urlhistory||[];if(historyURL&&historyURL.length>0){var currentURL=historyURL.pop(),backURL=historyURL.pop(),forwardURLs=_this2.props.urlforward||[];forwardURLs.push(currentURL),_this2.props.updateStore({updates:{urlforward:forwardURLs,urlhistory:historyURL}}),navigateTo(backURL)}}}),this.props.urlforward&&this.props.urlforward.length>0&&navigationActions.push({icon:ForwardURL,onClick:function(e){var forwardURL=_this2.props.urlforward||[];if(forwardURL&&forwardURL.length>0){var urlForward=forwardURL.pop();_this2.props.updateStore({updates:{urlforward:forwardURL}}),navigateTo(urlForward)}}}),sideNavEl=React.createElement(Navigator,{actions:navigationActions.concat([{icon:CloseFilled32,onClick:function(e){_this2.props.updateStore({updates:{sideNavOpen:"close",sideNavPinned:!1}}),_this2.setState({isSideNavExpanded:!1,isSideNavPinned:!1})},active:this.state.isSideNavExpanded}]),items:this.props.headerMenuItems,updateNavTree:function(items){self.props.updateStore({updates:{headerMenuItems:items}})}}),moduleData={},moduleIds=[],_context.prev=8,_context.t0=this.state.modules,_context.t0){_context.next=14;break}return _context.next=13,$script.runAtServer("studio.getModules");case 13:_context.t0=_context.sent;case 14:moduleData=_context.t0,moduleIds=Object.keys(moduleData),_context.next=20;break;case 18:_context.prev=18,_context.t1=_context.catch(8);case 20:for(moduleIdIndx in moduleEls=[],_loop=function(moduleIdIndx){var moduleId=moduleIds[moduleIdIndx],moduleObj=moduleData[moduleId];moduleEls.push(React.createElement("div",{className:"fixedMenuItemFreeText",style:{backgroundColor:moduleObj.color||"white"},onClick:function(e){return _this2.openModule(moduleObj.uid)}},React.createElement(TooltipDefinition,{tooltipText:moduleObj.label},moduleObj.abbr)))},moduleIds)_loop(moduleIdIndx);fixedModuleEl=React.createElement("div",{className:"fixedMenu"},moduleEls),this.setState({sideNavEl:sideNavEl,fixedModuleEl:fixedModuleEl,modules:moduleData,moduleIds:moduleIds}),this.props.openedModuleId||moduleIds&&moduleIds.length>0&&moduleData[moduleIds[0]].uid,this.props.openedModuleId||this.openModule(this.props.openedModuleId||moduleData[moduleIds[0]].uid);case 27:case"end":return _context.stop()}},_callee,this,[[8,18]])}));return function(){return _ref2.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this3=this,self=this,navigationActions=[];if(!_.isEqual(prevProps.headerMenuItems,this.props.headerMenuItems)){this.props.headerMenuItems&&this.props.headerMenuItems.length>0?this.props.updateStore({updates:{sideNavOpen:"open",sideNavPinned:!0}}):this.props.updateStore({updates:{sideNavOpen:"close",sideNavPinned:!1}});var Navigator=SrsSimpleNavigator();this.props.urlhistory&&this.props.urlhistory.length>1&&navigationActions.push({icon:BackwardURL,onClick:function(e){var historyURL=_this3.props.urlhistory||[];if(historyURL&&historyURL.length>0){var currentURL=historyURL.pop(),backURL=historyURL.pop(),forwardURLs=_this3.props.urlforward||[];forwardURLs.push(currentURL),_this3.props.updateStore({updates:{urlforward:forwardURLs,urlhistory:historyURL}}),navigateTo(backURL)}}}),this.props.urlforward&&this.props.urlforward.length>0&&navigationActions.push({icon:ForwardURL,onClick:function(e){var forwardURL=_this3.props.urlforward||[];if(forwardURL&&forwardURL.length>0){var urlForward=forwardURL.pop();_this3.props.updateStore({updates:{urlforward:forwardURL}}),navigateTo(urlForward)}}});var sideNavEl=React.createElement(Navigator,{actions:navigationActions.concat([{icon:CloseFilled32,onClick:function(e){_this3.props.updateStore({updates:{sideNavOpen:"close",sideNavPinned:!1}}),_this3.setState({isSideNavExpanded:!1,isSideNavPinned:!1})},active:this.state.isSideNavExpanded}]),items:this.props.headerMenuItems,updateNavTree:function(items){self.props.updateStore({updates:{headerMenuItems:items}})}});this.setState({sideNavEl:sideNavEl})}}},{key:"openModule",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(moduleId){var results;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,$script.runAtServer("studio.getModuleItems",{moduleId:moduleId});case 2:results=_context2.sent,this.props.updateStore({updates:{headerMenuItems:results,openedModuleId:moduleId}});case 4:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref3.apply(this,arguments)}}()},{key:"render",value:function(){var _ref5,_this4=this,searchbar=React.createElement(React.Fragment,null,this.state.searchExpand?React.createElement(Search,{className:"srstee-search",light:"true",name:"",defaultValue:"",labelText:"Search",closeButtonLabelText:"",placeHolderText:"Search",onKeyDown:function(e){if("Enter"===e.key&&_this4.state.searchText&&_this4.state.searchText.indexOf("/")>-1){var searchParts=_this4.state.searchText.split("/");switch(searchParts[0].toLowerCase()){case"list":if(searchParts.length>1){var navigateToUrl="/list/table/"+searchParts[1];navigateTo(navigateToUrl)}break;case"form":if(searchParts.length>2){var _navigateToUrl="/form/table/"+searchParts[1]+"/id/"+searchParts[2];navigateTo(_navigateToUrl)}else if(searchParts.length>1){var _navigateToUrl2="/form/table/"+searchParts[1];navigateTo(_navigateToUrl2)}break;case"template":if(searchParts.length>1){var _navigateToUrl3="/form/template/"+searchParts[1];navigateTo(_navigateToUrl3)}}}},onChange:function(e){_this4.setState({searchText:e.target.value})},id:"search-1"}):null,React.createElement(HeaderGlobalAction,{"aria-label":"Search",onClick:this.toggleSearch},React.createElement(Search20,null))),menuItems=this.props.headerMenuItems?this.props.headerMenuItems:{Studio:"/workmania/page-designer",Designer:"/workmania/page-designer",IDE:"/workmania/graphiql-view","Script Runner":"/workmania/script-runner",Palettes:"/studio/palettes",Tables:"/studio/db",Workflow:"/wfmodeler"},headerNavMenu=(React.createElement(SideNavMenu,{"aria-label":"Menu",renderMenuContent:function(_ref4){_ref4.ariaLabel;return React.createElement("button",{className:"bx--header__action"},React.createElement(Menu32,{className:"bx--header__action--active"}))}},menuItems&&Object.keys(menuItems).map(function(menuItemName){return React.createElement(SideNavMenuItem,{onClick:function(){navigateTo(menuItems[menuItemName])}},menuItemName)})),React.createElement(HeaderMenuButton,{"aria-label":"Open menu",isCollapsible:!0,onClick:function(e){_this4.props.updateStore({updates:{sideNavOpen:1==_this4.state.isSideNavExpanded?"open":"close",sideNavPinned:1==_this4.state.isSideNavExpanded}}),_this4.setState({isSideNavExpanded:!_this4.state.isSideNavExpanded})},isActive:this.state.isSideNavExpanded}),React.createElement(React.Fragment,null,React.createElement(Menu20,{className:this.props.sideNavPinned?"menubtn":"menubtn-closed",onClick:function(e){_this4.props.updateStore({updates:{sideNavOpen:1==_this4.state.isSideNavExpanded?"open":"close",sideNavPinned:1==_this4.state.isSideNavExpanded}}),_this4.setState({isSideNavExpanded:!_this4.state.isSideNavExpanded})}}),this.state.fixedModuleEl,React.createElement("div",{style:{display:"open"!=this.props.sideNavOpen||window.location.pathname.startsWith("/login")?"none":"block"},className:this.props.sideNavPinned?"pinnedSideNav":"sideNav"},this.state.sideNavEl))),ReferenceField=(this.props.preview&&"studio"!=this.props.currentscope||React.createElement(HeaderNavigation,{"aria-label":"",style:{marginLeft:20}},React.createElement(HeaderMenu,{"aria-label":"Studio",menuLinkName:"Studio"},React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/page-designer")}},"Designer"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/srstee-ide")}},"IDE"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/graphiql-view")}},"Query Builder"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/script-runner")}},"Script Runner"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/studio/palettes")}},"Palettes"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/studio/db")}},"Tables"))),SrsReference()),headerDetails=(this.accessToken&&React.createElement(ReferenceField,{light:"true",title:"",tablename:"MetaScope",displayfield:"Name",secondarydisplayfield:"",filter:{},defaultValue:this.props.currentscopeid,searchfields:"Name,Code",showClearButton:"false",placeholder:"Choose Application",onChange:(_ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(selectedItem){var scopeRecord,scopeCode,result,_menuItems;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!selectedItem||!selectedItem.id){_context3.next=22;break}return _context3.next=3,$qry.getCachableRecords("MetaScope",{where:{uid:selectedItem.id}},["uid","Code"]);case 3:if(scopeRecord=_context3.sent,!(scopeCode=scopeRecord&&scopeRecord.length>0?scopeRecord[0].Code:"")){_context3.next=21;break}return _context3.next=8,$script.runAtServer("mmf.bindScope2User",{code:scopeCode});case 8:if((result=_context3.sent).result&&result.code?_this4.props.addFlashMessage({title:"Success - ",subtitle:"Application is now switched to "+result.code}):_this4.props.addErrorMessage({title:"Error - ",subtitle:"Something went wrong, please try again later!"}),_menuItems=null,!$qry.cache["studio.getMenuItems_"+scopeCode]){_context3.next=15;break}_menuItems=$qry.cache["studio.getMenuItems_"+scopeCode],_context3.next=18;break;case 15:return _context3.next=17,$script.runscript("studio.getMenuItems",{scope:scopeCode});case 17:_menuItems=_context3.sent;case 18:_this4.props.updateStore({updates:{currentscope:scopeCode,currentscopeid:selectedItem.id,headerMenuItems:_menuItems}}),_context3.next=22;break;case 21:_this4.props.addErrorMessage({title:"Error - ",subtitle:"Something went wrong, please try again later!"});case 22:case"end":return _context3.stop()}},_callee3,_this4)})),function(_x2){return _ref5.apply(this,arguments)})}),this.accessToken?React.createElement(React.Fragment,null,React.createElement(HeaderGlobalBar,null,"studio"==this.props.currentscope?searchbar:null,React.createElement(HeaderMenu,{"aria-label":"App User",className:"avatarMenuItems",renderMenuContent:function(){return React.createElement("span",{style:{backgroundColor:"#c3c3c3",padding:10,borderRadius:"50%"}},React.createElement(User20,null))}},React.createElement(HeaderMenuItem,{href:"#"},"Profile"),React.createElement(HeaderMenuItem,{href:"/logout"},"Logout")))):null);return React.createElement("div",{className:"srs-header"},React.createElement(Header,{"aria-label":"Srstee"},React.createElement("div",{className:"bx--header-logo",style:{width:30,height:30}},React.createElement("img",{src:"/resources/logo.gif",width:"29px",height:"29px",style:{border:"1px solid #5a9f6f",borderRadius:30,backgroundColor:"#292828"}})),headerNavMenu,React.createElement(HeaderName,{href:"https://www.srste.in",prefix:""},"Srste Platform"),headerDetails))}}]),_SrsteeHeader_}(React.Component),_export("SrsteeHeader",SrsteeHeader=function(props){return _SrsteeHeader_}),_export("SrsteeHeader",SrsteeHeader),_export("default",SrsteeHeader),_export("states",states=[{KeyName:"openedModuleId",AccessPath:"openedModuleId",DefaultValue:'{"openedModuleId": ""}'},{KeyName:"switch_from",AccessPath:"switch_from",DefaultValue:'{"switch_from": ""}'},{KeyName:"showNav",AccessPath:"showNav",DefaultValue:'{"showNav":true}'},{KeyName:"scopes",AccessPath:"scopes",DefaultValue:'{"scopes": {}}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"headerMenuItems",AccessPath:"header.menuitems",DefaultValue:'{"header": {"menuitems": {}}}'},{KeyName:"sideNavOpen",AccessPath:"sideNavOpen",DefaultValue:'{"sideNavOpen": "close"}'},{KeyName:"switch_to",AccessPath:"switch_to",DefaultValue:'{"switch_to": ""}'},{KeyName:"loggedIn",AccessPath:"loggedIn",DefaultValue:'{"loggedIn":false}'},{KeyName:"urlforward",AccessPath:"urlforward",DefaultValue:'{"urlforward": []}'},{KeyName:"sideNavPinned",AccessPath:"sideNavPinned",DefaultValue:'{"sideNavPinned": false}'},{KeyName:"urlhistory",AccessPath:"urlhistory",DefaultValue:'{"urlhistory": []}'},{KeyName:"currentscopeid",AccessPath:"currentscopeid",DefaultValue:'{"currentscopeid": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsSimpleNavigator/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/fade/16","lodash.clonedeep","lodash","carbon-components-react","component/studio/SrsMultiButton/Definition.js"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,_,SideNav,SideNavItems,SideNavMenu,SideNavMenuItem,SrsMultiButton,_SrsSimpleNavigator_,SrsSimpleNavigator;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibFade){_carbonIconsReactLibFade.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default},function(_carbonComponentsReact){SideNav=_carbonComponentsReact.SideNav,SideNavItems=_carbonComponentsReact.SideNavItems,SideNavMenu=_carbonComponentsReact.SideNavMenu,SideNavMenuItem=_carbonComponentsReact.SideNavMenuItem,_carbonComponentsReact.SideNavLink},function(_componentStudioSrsMultiButtonDefinitionJs){SrsMultiButton=_componentStudioSrsMultiButtonDefinitionJs.SrsMultiButton}],execute:function(){_SrsSimpleNavigator_=function(_React$Component){function _SrsSimpleNavigator_(props){_classCallCheck(this,_SrsSimpleNavigator_);var _this=_possibleConstructorReturn(this,(_SrsSimpleNavigator_.__proto__||Object.getPrototypeOf(_SrsSimpleNavigator_)).call(this,props)),items=_this.props.items?_this.props.items:_this.props.widgetProps&&_this.props.widgetProps.Items?_this.props.widgetProps.Items:[];try{items=items&&"string"==typeof items?JSON.parse(items):items}catch(err){}return _this.state={navTree:{name:"Main",expand:!0,items:items}},_this.getItemsEl=_this.getItemsEl.bind(_this),$ele&&$ele.registerElement("SideNavLink","studio","React"),_this.mode=_this.props.mode?_this.props.mode:_this.props.widgetProps&&_this.props.widgetProps.Mode?_this.props.widgetProps.Mode:"navigate",_this}return _inherits(_SrsSimpleNavigator_,_React$Component),_createClass(_SrsSimpleNavigator_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){var items,_items,updatedWidgetProps;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_.isEqual(prevProps.items,this.props.items)||_.isEqual(this.props.items,this.state.navTree.items)){if(this.props.widgetProps&&prevProps.widgetProps.Items!=this.props.widgetProps.Items){_items=this.props.widgetProps&&this.props.widgetProps.Items?this.props.widgetProps.Items:[];try{_items=_items&&"string"==typeof _items?JSON.parse(_items):_items}catch(err){}this.setState({navTree:{name:"Main",expand:!0,items:_items}})}}else{items=this.props.items?this.props.items:[];try{items=items&&"string"==typeof items?JSON.parse(items):items}catch(err){}this.setState({navTree:{name:"Main",expand:!0,items:items}})}_.isEqual(this.props.activeLink,prevProps.activeLink)||(this.props.widgetProps&&((updatedWidgetProps=Object.assign({},this.props.widgetProps)).ActiveLink=this.props.activeLink,this.props.updateStore({updates:{widgetProps:updatedWidgetProps}})),this.props.setActiveLink&&this.props.setActiveLink(this.props.activeLink));case 2:case"end":return _context2.stop()}},_callee2,this)}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"getItemsEl",value:function(items,depth,parentIndx){var _this2=this,itemsEl=[];return items&&items.length>0?(items.map(function(item,indx){if("menu"==item.type){var innerItemEl=_this2.getItemsEl(item.items,depth+1,parentIndx?parentIndx+"-"+indx:indx);itemsEl.push(React.createElement(SideNavMenu,{style:{paddingLeft:20*depth},ref:"menu-"+(parentIndx||"")+"-"+indx,onClick:function(e){},defaultExpanded:item.hasOwnProperty("expand")?item.expand:0==depth,title:item.name},innerItemEl))}else"menuitem"==item.type&&itemsEl.push(React.createElement(SideNavMenuItem,{element:"side-nav-link",widgetid:_this2.props.widgetid,href:item.url,mode:_this2.mode,name:item.name,ref:"menuitem-"+(parentIndx||"")+"-"+indx},item.name))}),itemsEl):itemsEl}},{key:"render",value:function(){var _this3=this,name="Main",expand=!0,items=[];this.state.navTree&&(name=this.state.navTree.name,expand=this.state.navTree.expand,items=this.state.navTree.items);var itemsEl=this.getItemsEl(items,1),contentEl=null;if("true"==this.props.onecolumn){var multiBtnProps={};this.props.widgetProps&&this.props.widgetProps.OneColumnAnchor&&(multiBtnProps.onColumnanchor="true");var MultiBtn=SrsMultiButton();contentEl=React.createElement(MultiBtn,multiBtnProps)}else contentEl=React.createElement(SideNav,{"aria-label":name,expanded:expand,onToggle:function(a,b){var refs=_this3.refs;if(refs&&Object.keys(refs).length>0){var refKeys=Object.keys(refs),navTree=cloneDeep(_this3.state.navTree);for(var refIndx in refKeys){var refKey=refKeys[refIndx];if(refKey.startsWith("menu-")){var refKeyParts=refKey.split("-"),subNavTree=navTree;for(var refKeyPartIndx in refKeyParts)if(refKeyPartIndx>0){var treeIndx=refKeyParts[refKeyPartIndx];if(treeIndx){treeIndx=parseInt(treeIndx);var nodeInState=subNavTree.items[treeIndx];if(refKeyPartIndx==refKeyParts.length-1){var nodeInRef=refs[refKey];nodeInState&&nodeInState.expand+""!=nodeInRef.getAttribute("aria-expanded")&&(nodeInState.expand="true"==nodeInRef.getAttribute("aria-expanded"))}else subNavTree=nodeInState}}}}_this3.setState({navTree:navTree}),_this3.props.updateNavTree(navTree.items)}}},React.createElement(SideNavItems,null,itemsEl),null);return React.createElement("div",{style:{backgroundColor:"black",height:"inherit"}}," ",contentEl," ")}}]),_SrsSimpleNavigator_}(React.Component),_export("SrsSimpleNavigator",SrsSimpleNavigator=function(props){return _SrsSimpleNavigator_}),_export("SrsSimpleNavigator",SrsSimpleNavigator)}}}),System.register("component/studio/SrsReference/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","@carbon/icons-react/lib/close/32","lodash.debounce","@carbon/icons-react/lib/view--mode-2/20","@fortawesome/fontawesome-svg-core","@fortawesome/react-fontawesome","@fortawesome/free-solid-svg-icons"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ComboBox,cloneDeep,debounce,library,FontAwesomeIcon,faBookOpen,_SrsReference_,SrsReference;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){ComboBox=_carbonComponentsReact.ComboBox},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonIconsReactLibClose){_carbonIconsReactLibClose.default},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_carbonIconsReactLibViewMode){_carbonIconsReactLibViewMode.default},function(_fortawesomeFontawesomeSvgCore){library=_fortawesomeFontawesomeSvgCore.library},function(_fortawesomeReactFontawesome){FontAwesomeIcon=_fortawesomeReactFontawesome.FontAwesomeIcon},function(_fortawesomeFreeSolidSvgIcons){faBookOpen=_fortawesomeFreeSolidSvgIcons.faBookOpen}],execute:function(){_SrsReference_=function(_React$Component){function _SrsReference_(props){_classCallCheck(this,_SrsReference_);var _this=_possibleConstructorReturn(this,(_SrsReference_.__proto__||Object.getPrototypeOf(_SrsReference_)).call(this,props));return _this.state={recordItems:[],selectedItem:null,previousSelectedItem:null,recordKey:Date.now(),reloaded:!1},_this.reloadData=_this.reloadData.bind(_this),_this.updateWidgetProps=_this.updateWidgetProps.bind(_this),_this.onChangeDebounce=debounce(function(val){_this.state.lastSearchKey!=val&&(_this.state.lastSearchKey||val)&&_this.getRecords(val).then(function(recordItems){return _this.setState({recordItems:recordItems,lastSearchKey:val})})},500),_this.onChange=_this.onChange.bind(_this),library.add(faBookOpen),_this}return _inherits(_SrsReference_,_React$Component),_createClass(_SrsReference_,[{key:"getRecords",value:function(filterKey,includeUIDs){var _this2=this;return new Promise(function(resolve,reject){var records=[],filter={};try{filter=_this2.recordMatchingFilter&&"string"==typeof _this2.recordMatchingFilter?JSON.parse(_this2.recordMatchingFilter):_extends({},_this2.recordMatchingFilter)}catch(err){}if(filter){var currentWhereClause=filter.where?filter.where:{},additionalAndClause=null;if(filterKey||includeUIDs)additionalAndClause={or:[]},(_this2.searchFields?_this2.searchFields.split(","):["uid"]).map(function(searchField,indx){var innerClause={};innerClause[searchField]={like:"%"+filterKey+"%"},additionalAndClause.or.push(innerClause)}),includeUIDs&&includeUIDs.length>0&&additionalAndClause.or.push({uid:{inq:includeUIDs}});filter.where=additionalAndClause?{and:[currentWhereClause,additionalAndClause]}:currentWhereClause}var inputParams={tableName:_this2.tableName,fields:[_this2.displayField,_this2.secondaryDisplayField,"uid"],fieldAliases:null,filter:filter};_this2.tableName&&$script.runAtServer("mmf.getRecords",inputParams).then(function(tableRows){tableRows&&!tableRows.error&&tableRows&&tableRows.length>0?(tableRows.map(function(tableRow){var recordData=tableRow.node;records.push({id:recordData.uid,text:_this2.secondaryDisplayField?recordData[_this2.displayField]+" [ "+recordData[_this2.secondaryDisplayField]+" ]":""+recordData[_this2.displayField]})}),resolve(records)):resolve([])})})}},{key:"reloadData",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var fieldValue,records,selectedItem,matchingRecord,item;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return fieldValue=this.props.defaultvalue||this.props.defaultValue||this.props.widgetProps&&(this.props.widgetProps.value||this.props.widgetProps.DefaultValue)||"",_context.next=3,this.getRecords("",[fieldValue]);case 3:records=_context.sent,selectedItem=null,records&&records.length>0&&(matchingRecord=records.filter(function(record){return record.id==fieldValue}),selectedItem=matchingRecord&&matchingRecord.length>0?matchingRecord[0]:selectedItem),item=selectedItem||(fieldValue?{id:fieldValue,text:""}:null),this.setState({recordItems:records,selectedItem:item});case 8:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.reloadData()}},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(prevState.recordKey==this.state.recordKey&&prevState.reloaded==this.state.reloaded){_context2.next=3;break}return _context2.next=3,this.reloadData();case 3:if(this.props.isformcontrol+""!="true"||prevProps.defaultvalue==this.props.defaultvalue&&prevProps.reload==this.props.reload){_context2.next=6;break}return _context2.next=6,this.reloadData();case 6:if(_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&_.isEqual(prevProps.tablename,this.props.tablename)&&_.isEqual(prevProps.displayfield,this.props.displayfield)&&_.isEqual(prevProps.filter,this.props.filter)&&_.isEqual(prevProps.defaultvalue,this.props.defaultvalue)&&_.isEqual(prevProps.defaultValue,this.props.defaultValue)&&_.isEqual(prevProps.searchfields,this.props.searchfields)){_context2.next=24;break}if(_.isEqual(prevProps.filter,this.props.filter)){_context2.next=11;break}this.recordMatchingFilter=this.props.filter?this.props.filter:{},_context2.next=24;break;case 11:if(_.isEqual(prevProps.widgetProps,this.props.widgetProps)||prevProps.widgetProps.value==this.props.widgetProps.value&&prevProps.widgetProps.TableName==this.props.widgetProps.TableName){_context2.next=21;break}if(prevProps.widgetProps.TableName!=this.props.widgetProps.TableName&&(this.tableName=this.props.widgetProps.TableName),""!=this.props.widgetProps.value){_context2.next=17;break}this.setState({lastSearchKey:"",selectedItem:{id:"",text:""},recordKey:Date.now()}),_context2.next=19;break;case 17:return _context2.next=19,this.reloadData();case 19:_context2.next=24;break;case 21:if((prevProps.defaultValue==this.props.defaultValue||this.state.selectedItem&&this.props.defaultValue==this.state.selectedItem.id)&&(prevProps.defaultvalue==this.props.defaultvalue||this.state.selectedItem&&this.props.defaultvalue==this.state.selectedItem.id)){_context2.next=24;break}return _context2.next=24,this.reloadData();case 24:case"end":return _context2.stop()}},_callee2,this)}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"onChange",value:function(_ref3){var selectedItem=_ref3.selectedItem;if(this.props.onChange)this.props.onChange(selectedItem),this.setState({selectedItem:selectedItem,lastSearchKey:null,invalid:!(selectedItem&&selectedItem.uid||this.props.required+""!="true")});else if(this.props.varname){var propName=(this.props.varname?this.props.varname:this.props.uid)+"_refvalue",referencefields=cloneDeep(this.props.referencefields);referencefields[propName]=selectedItem?selectedItem.id:"",this.props.updateStore({updates:{referencefields:referencefields}})}else{var updatedProps=Object.assign({},this.props.widgetProps);updatedProps.value=selectedItem?selectedItem.id:"",this.updateWidgetProps(updatedProps),this.setState({selectedItem:selectedItem,lastSearchKey:null,invalid:!(selectedItem&&selectedItem.uid||this.props.required+""!="true")})}}},{key:"updateWidgetProps",value:function(widgetProps){if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);if(widgetProps.ActionClicked){var tableName=widgetProps.ActionClicked.actionPayload&&widgetProps.ActionClicked.actionPayload.row?widgetProps.ActionClicked.actionPayload.row.tableName:"",recordId=widgetProps.ActionClicked.actionPayload&&widgetProps.ActionClicked.actionPayload.row?widgetProps.ActionClicked.actionPayload.row.uid:"";this.props.defaultvalue||this.props.defaultValue||this.props.widgetProps&&(this.props.widgetProps.value||this.props.widgetProps.DefaultValue);controlProps.control_action={actionClicked:"open_record",actionPayload:{listName:"Reference",actionName:"open_record",clickts:widgetProps.ActionClicked.clickts,tableName:tableName,recordId:recordId}}}else controlProps[this.props.controlname]=widgetProps.value;this.props.updateStore({updates:{controlProps:controlProps}})}}else if(this.props.iscellcontrol+""=="true"){var controlId=this.props.controlid.replaceAll("_dot_","."),controlIdParts=(controlId=controlId.replace("cell_","")).split("."),formControlName=controlIdParts[0],rowIndx=controlIdParts[1],columnName=controlIdParts[2],cellName=columnName.split("_")[0],parentWidgetId=columnName.split("_")[1],controls=this.props.controls,formControlKey=this.props.pageid+this.props.pagesuffix+"_"+parentWidgetId;controls[formControlKey]=controls[formControlKey]||{},controls[formControlKey][formControlName]=controls[formControlKey][formControlName]||[],controls[formControlKey][formControlName][rowIndx]=controls[formControlKey][formControlName][rowIndx]||{},controls[formControlKey][formControlName][rowIndx][cellName]=widgetProps.value,controls[formControlKey][formControlName][rowIndx].__isCellEdited__=Date.now(),this.props.updateStore({updates:{controls:controls}})}else this.props.widgetProps&&this.props.updateStore({updates:{widgetProps:widgetProps}})}},{key:"render",value:function(){var _this3=this;this.tableName=this.props.tablename?this.props.tablename:this.props.widgetProps&&this.props.widgetProps.TableName?this.props.widgetProps.TableName:"",this.displayField=this.props.displayfield?this.props.displayfield:this.props.widgetProps&&this.props.widgetProps.DisplayField?this.props.widgetProps.DisplayField:"",this.secondaryDisplayField=this.props.secondarydisplayfield?this.props.secondarydisplayfield:this.props.widgetProps&&this.props.widgetProps.SecondaryDisplayField?this.props.widgetProps.SecondaryDisplayField:"",this.recordMatchingFilter=this.props.filter?this.props.filter:this.props.widgetProps&&this.props.widgetProps.RecordMatchingFilter?this.props.widgetProps.RecordMatchingFilter:"{}",this.searchFields=this.props.searchfields?this.props.searchfields:this.props.widgetProps&&this.props.widgetProps.SearchFields?this.props.widgetProps.SearchFields:"uid";var selectedItem=this.state.selectedItem,initialSelectedItem=(this.props.defaultvalue||this.props.defaultValue||this.props.widgetProps&&(this.props.widgetProps.value||this.props.widgetProps.DefaultValue),this.state.lastSearchKey?this.state.lastSearchKey:selectedItem),titleText=this.props.hidelabel+""=="true"||this.props.iscellcontrol+""=="true"?"":this.props.title?this.props.title:this.props.widgetProps&&this.props.widgetProps.Label?this.props.widgetProps.Label:"Data Lookup";titleText=titleText&&this.props.required+""=="true"?titleText+" *":titleText;var props={selectedItem:selectedItem||this.state.previousSelectedItem,initialSelectedItem:initialSelectedItem,ariaLabel:"Choose an item",disabled:this.props.disabled&&this.props.disabled+""=="true"||this.props.readOnly&&this.props.readOnly+""=="true",helperText:""+(this.props.widgetProps&&this.props.widgetProps.HelperText?this.props.widgetProps.HelperText:""),invalid:this.state.invalid,invalidText:""+(this.props.widgetProps&&this.props.widgetProps.InvalidText?this.props.widgetProps.InvalidText:"Valid value is required"),light:this.props.light+""=="true"||!(!this.props.widgetProps||this.props.widgetProps.LightMode+""!="true"),onInputChange:this.onChangeDebounce,placeholder:""+(this.props.widgetProps&&this.props.widgetProps.Placeholder?this.props.widgetProps.Placeholder:this.props.placeholder?this.props.placeholder:"Filter..."),titleText:titleText,type:"default"};this.props.hideLabel+""!="true"&&this.props.hidelabel+""!="true"||(props.hideLabel=!0);var showOpenRecord=this.props.showOpenRecord+""=="true"||this.props.showopenrecord+""=="true"||this.props.widgetProps&&this.props.widgetProps.ShowOpenRecord+""=="true",isInlineRef=!!(this.props.isformcontrol+""!="true"&&this.props.widgetProps&&Object.keys(this.props.widgetProps).length>0);return React.createElement(React.Fragment,null,React.createElement("div",{className:isInlineRef?"inlineref":"simpleref",style:{display:"flex"}},React.createElement("style",null,'@import url("/component/studio/SrsReference/Style.css");'),React.createElement("style",null,this.props.inlinestyles),React.createElement(ComboBox,_extends({},props,{onClick:function(e){_this3.getRecords("").then(function(recordItems){return _this3.setState({recordItems:recordItems,selectedItems:null,lastSearchKey:""})}),_this3.props.onClick&&_this3.props.onClick(e)},onBlur:function(e){_this3.props.onBlur&&_this3.props.onBlur(e)},onFocus:function(e){_this3.props.onFocus&&_this3.props.onFocus(e)},items:this.state.recordItems,itemToString:function(item){return item==_this3.state.lastSearchKey?_this3.state.lastSearchKey:item?item.text:""},onChange:this.onChange})),null,showOpenRecord&&(initialSelectedItem||selectedItem)?React.createElement(FontAwesomeIcon,{style:{cursor:"pointer",marginTop:30,marginLeft:2,height:30,width:30},icon:"book-open",onClick:function(e){var widgetProps=Object.assign({},_this3.props.widgetProps);widgetProps.ActionClicked={name:"OpenRecord",actionPayload:{row:{tableName:_this3.tableName,uid:selectedItem?selectedItem.id:initialSelectedItem.id}},clickts:Date.now()},_this3.updateWidgetProps(widgetProps),_this3.props.openRecord&&_this3.props.openRecord(_this3.tableName,selectedItem?selectedItem.id:initialSelectedItem.id)}}):null))}}]),_SrsReference_}(React.Component),_export("SrsReference",SrsReference=function(props){return _SrsReference_}),_export("SrsReference",SrsReference)}}}),System.register("component/studio/SrsMultiButton/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,SelectItemGroup,_SrsMultiButton_,SrsMultiButton;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,SelectItemGroup=_carbonComponentsReact.SelectItemGroup}],execute:function(){_SrsMultiButton_=function(_React$Component){function _SrsMultiButton_(props){_classCallCheck(this,_SrsMultiButton_);var _this=_possibleConstructorReturn(this,(_SrsMultiButton_.__proto__||Object.getPrototypeOf(_SrsMultiButton_)).call(this,props));return _this.selectElement=null,_this}return _inherits(_SrsMultiButton_,_React$Component),_createClass(_SrsMultiButton_,[{key:"render",value:function(){var _this2=this,_props=this.props,size=(_props.label,_props.className,_props.handleOnClick,_props.rules,_props.level,_props.size),buttonOptions=(_props.style,this.props.widgetProps&&this.props.widgetProps.Size&&this.props.widgetProps.Size,this.props.widgetProps&&this.props.widgetProps.ButtonAction&&this.props.widgetProps.ButtonAction,this.props.containerStyles&&this.props.containerStyles,React.createElement(Select,{ref:function(input){return _this2.selectElement=input},id:"select-1",hideLabel:"true",defaultValue:"placeholder-item",style:{backgroundColor:"#0062ff",color:"white"}},React.createElement(SelectItem,{disabled:!0,hidden:!0,value:"placeholder-item",text:"Actions"}),React.createElement(SelectItemGroup,{label:"Category 1"},React.createElement(SelectItem,{value:"option-1",text:"Option 1"}),React.createElement(SelectItem,{value:"option-2",text:"Option 2"})),React.createElement(SelectItemGroup,{label:"Category 2"},React.createElement(SelectItem,{value:"option-3",text:"Option 3"}),React.createElement(SelectItem,{value:"option-4",text:"Option 4"}))));return React.createElement("div",{className:"MultiSelect"},buttonOptions)}}]),_SrsMultiButton_}(React.Component),_export("SrsMultiButton",SrsMultiButton=function(props){return WrappedComponent=_SrsMultiButton_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsMultiButton",SrsMultiButton)}}}),System.register("component/studio/SrsteeHeader/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/user/20","@carbon/icons-react/lib/notification/20","@carbon/icons-react/lib/app-switcher/20","@carbon/icons-react/lib/menu/32","@carbon/icons-react/lib/menu/20","@carbon/icons-react/lib/home/20","@carbon/icons-react/lib/close/20","@carbon/icons-react/lib/arrow--left/20","@carbon/icons-react/lib/arrow--right/20","@carbon/icons-react/lib/pin/20","component/studio/SrsSimpleNavigator/Definition.js","component/studio/SrsReference/Definition.js","carbon-components-react","carbon-components-react/lib/components/UIShell","component/studio/SrsMultiButton/Definition.js"],function(_export,_context4){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Search20,User20,Menu32,Menu20,CloseFilled32,BackwardURL,ForwardURL,SrsSimpleNavigator,SrsReference,TooltipDefinition,Header,HeaderName,HeaderMenu,HeaderMenuItem,HeaderNavigation,HeaderMenuButton,HeaderGlobalAction,HeaderGlobalBar,SideNavMenu,SideNavMenuItem,Search,_SrsteeHeader_,SrsteeHeader;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibUser){User20=_carbonIconsReactLibUser.default},function(_carbonIconsReactLibNotification){_carbonIconsReactLibNotification.default},function(_carbonIconsReactLibAppSwitcher){_carbonIconsReactLibAppSwitcher.default},function(_carbonIconsReactLibMenu){Menu32=_carbonIconsReactLibMenu.default},function(_carbonIconsReactLibMenu2){Menu20=_carbonIconsReactLibMenu2.default},function(_carbonIconsReactLibHome){_carbonIconsReactLibHome.default},function(_carbonIconsReactLibClose){CloseFilled32=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibArrowLeft){BackwardURL=_carbonIconsReactLibArrowLeft.default},function(_carbonIconsReactLibArrowRight){ForwardURL=_carbonIconsReactLibArrowRight.default},function(_carbonIconsReactLibPin){_carbonIconsReactLibPin.default},function(_componentStudioSrsSimpleNavigatorDefinitionJs){SrsSimpleNavigator=_componentStudioSrsSimpleNavigatorDefinitionJs.SrsSimpleNavigator},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_carbonComponentsReact){TooltipDefinition=_carbonComponentsReact.TooltipDefinition,_carbonComponentsReact.OverflowMenu,_carbonComponentsReact.OverflowMenuItem,Search=_carbonComponentsReact.Search},function(_carbonComponentsReactLibComponentsUIShell){Header=_carbonComponentsReactLibComponentsUIShell.Header,HeaderName=_carbonComponentsReactLibComponentsUIShell.HeaderName,HeaderMenu=_carbonComponentsReactLibComponentsUIShell.HeaderMenu,HeaderMenuItem=_carbonComponentsReactLibComponentsUIShell.HeaderMenuItem,HeaderNavigation=_carbonComponentsReactLibComponentsUIShell.HeaderNavigation,HeaderMenuButton=_carbonComponentsReactLibComponentsUIShell.HeaderMenuButton,HeaderGlobalAction=_carbonComponentsReactLibComponentsUIShell.HeaderGlobalAction,HeaderGlobalBar=_carbonComponentsReactLibComponentsUIShell.HeaderGlobalBar,_carbonComponentsReactLibComponentsUIShell.SideNav,_carbonComponentsReactLibComponentsUIShell.SideNavItems,SideNavMenu=_carbonComponentsReactLibComponentsUIShell.SideNavMenu,SideNavMenuItem=_carbonComponentsReactLibComponentsUIShell.SideNavMenuItem},function(_componentStudioSrsMultiButtonDefinitionJs){_componentStudioSrsMultiButtonDefinitionJs.SrsMultiButton}],execute:function(){_SrsteeHeader_=function(_React$Component){function _SrsteeHeader_(props){_classCallCheck(this,_SrsteeHeader_);var _this=_possibleConstructorReturn(this,(_SrsteeHeader_.__proto__||Object.getPrototypeOf(_SrsteeHeader_)).call(this,props));return _this.state={searchExpand:!1,expanded:!1,isSideNavExpanded:!1,isSideNavPinned:!1,sideNavEl:null,showPicker:!1},_this.toggleSearch=_this.toggleSearch.bind(_this),_this.accessToken=document.cookie?document.cookie.replace(/(?:(?:^|.*;\s*)authorization\s*\=\s*([^;]*).*$)|^.*$/,"$1"):null,_this.getScopes=_this.getScopes.bind(_this),_this.accessToken&&_this.getScopes().then(function(scopesData){var allScopes={};Object.keys(scopesData).map(function(scopeItemKey,indx){"currentScope"!=scopeItemKey&&(allScopes[scopeItemKey]=scopesData[scopeItemKey])}),_this.props.updateStore({updates:{scopes:allScopes,currentscope:scopesData.currentScope?scopesData.currentScope:_this.props.currentscope?_this.props.currentscope:"studio",currentscopeid:scopesData.currentScope?allScopes[scopesData.currentScope].uid:""}})}),_this.openModule=_this.openModule.bind(_this),_this}return _inherits(_SrsteeHeader_,_React$Component),_createClass(_SrsteeHeader_,[{key:"getScopes",value:function(){return new Promise(function(resolve,reject){window.scopes?resolve(window.scopes):$script.getscript("mmf.getScopes").then(function(_ref){(0,_ref.default)().then(function(scopesData){window.scopes=scopesData,resolve(scopesData)})})})}},{key:"toggleSearch",value:function(){this.setState({searchExpand:!this.state.searchExpand})}},{key:"logout",value:function(){document.cookie="authorization=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",location.href="/login"}},{key:"componentDidMount",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var Navigator,navigationActions,self,sideNavEl,moduleData,moduleIds,moduleEls,_loop,moduleIdIndx,fixedModuleEl,_this2=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(Navigator=SrsSimpleNavigator(),navigationActions=[],self=this,this.props.urlhistory&&this.props.urlhistory.length>1&&navigationActions.push({icon:BackwardURL,onClick:function(e){var historyURL=_this2.props.urlhistory||[];if(historyURL&&historyURL.length>0){var currentURL=historyURL.pop(),backURL=historyURL.pop(),forwardURLs=_this2.props.urlforward||[];forwardURLs.push(currentURL),_this2.props.updateStore({updates:{urlforward:forwardURLs,urlhistory:historyURL}}),navigateTo(backURL)}}}),this.props.urlforward&&this.props.urlforward.length>0&&navigationActions.push({icon:ForwardURL,onClick:function(e){var forwardURL=_this2.props.urlforward||[];if(forwardURL&&forwardURL.length>0){var urlForward=forwardURL.pop();_this2.props.updateStore({updates:{urlforward:forwardURL}}),navigateTo(urlForward)}}}),sideNavEl=React.createElement(Navigator,{actions:navigationActions.concat([{icon:CloseFilled32,onClick:function(e){_this2.props.updateStore({updates:{sideNavOpen:"close",sideNavPinned:!1}}),_this2.setState({isSideNavExpanded:!1,isSideNavPinned:!1})},active:this.state.isSideNavExpanded}]),items:this.props.headerMenuItems,updateNavTree:function(items){self.props.updateStore({updates:{headerMenuItems:items}})}}),moduleData={},moduleIds=[],_context.prev=8,_context.t0=this.state.modules,_context.t0){_context.next=14;break}return _context.next=13,$script.runAtServer("studio.getModules");case 13:_context.t0=_context.sent;case 14:moduleData=_context.t0,moduleIds=Object.keys(moduleData),_context.next=20;break;case 18:_context.prev=18,_context.t1=_context.catch(8);case 20:for(moduleIdIndx in moduleEls=[],_loop=function(moduleIdIndx){var moduleId=moduleIds[moduleIdIndx],moduleObj=moduleData[moduleId];moduleEls.push(React.createElement("div",{className:"fixedMenuItemFreeText",style:{backgroundColor:moduleObj.color||"white"},onClick:function(e){return _this2.openModule(moduleObj.uid)}},React.createElement(TooltipDefinition,{tooltipText:moduleObj.label},moduleObj.abbr)))},moduleIds)_loop(moduleIdIndx);fixedModuleEl=React.createElement("div",{className:"fixedMenu"},moduleEls),this.setState({sideNavEl:sideNavEl,fixedModuleEl:fixedModuleEl,modules:moduleData,moduleIds:moduleIds}),this.props.openedModuleId||moduleIds&&moduleIds.length>0&&moduleData[moduleIds[0]].uid,this.props.openedModuleId||this.openModule(this.props.openedModuleId||moduleData[moduleIds[0]].uid);case 27:case"end":return _context.stop()}},_callee,this,[[8,18]])}));return function(){return _ref2.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this3=this,self=this,navigationActions=[];if(!_.isEqual(prevProps.headerMenuItems,this.props.headerMenuItems)){this.props.headerMenuItems&&this.props.headerMenuItems.length>0?this.props.updateStore({updates:{sideNavOpen:"open",sideNavPinned:!0}}):this.props.updateStore({updates:{sideNavOpen:"close",sideNavPinned:!1}});var Navigator=SrsSimpleNavigator();this.props.urlhistory&&this.props.urlhistory.length>1&&navigationActions.push({icon:BackwardURL,onClick:function(e){var historyURL=_this3.props.urlhistory||[];if(historyURL&&historyURL.length>0){var currentURL=historyURL.pop(),backURL=historyURL.pop(),forwardURLs=_this3.props.urlforward||[];forwardURLs.push(currentURL),_this3.props.updateStore({updates:{urlforward:forwardURLs,urlhistory:historyURL}}),navigateTo(backURL)}}}),this.props.urlforward&&this.props.urlforward.length>0&&navigationActions.push({icon:ForwardURL,onClick:function(e){var forwardURL=_this3.props.urlforward||[];if(forwardURL&&forwardURL.length>0){var urlForward=forwardURL.pop();_this3.props.updateStore({updates:{urlforward:forwardURL}}),navigateTo(urlForward)}}});var sideNavEl=React.createElement(Navigator,{actions:navigationActions.concat([{icon:CloseFilled32,onClick:function(e){_this3.props.updateStore({updates:{sideNavOpen:"close",sideNavPinned:!1}}),_this3.setState({isSideNavExpanded:!1,isSideNavPinned:!1})},active:this.state.isSideNavExpanded}]),items:this.props.headerMenuItems,updateNavTree:function(items){self.props.updateStore({updates:{headerMenuItems:items}})}});this.setState({sideNavEl:sideNavEl})}}},{key:"openModule",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(moduleId){var results;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,$script.runAtServer("studio.getModuleItems",{moduleId:moduleId});case 2:results=_context2.sent,this.props.updateStore({updates:{headerMenuItems:results,openedModuleId:moduleId}});case 4:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref3.apply(this,arguments)}}()},{key:"render",value:function(){var _ref5,_this4=this,searchbar=React.createElement(React.Fragment,null,this.state.searchExpand?React.createElement(Search,{className:"srstee-search",light:"true",name:"",defaultValue:"",labelText:"Search",closeButtonLabelText:"",placeHolderText:"Search",onKeyDown:function(e){if("Enter"===e.key&&_this4.state.searchText&&_this4.state.searchText.indexOf("/")>-1){var searchParts=_this4.state.searchText.split("/");switch(searchParts[0].toLowerCase()){case"list":if(searchParts.length>1){var navigateToUrl="/list/table/"+searchParts[1];navigateTo(navigateToUrl)}break;case"form":if(searchParts.length>2){var _navigateToUrl="/form/table/"+searchParts[1]+"/id/"+searchParts[2];navigateTo(_navigateToUrl)}else if(searchParts.length>1){var _navigateToUrl2="/form/table/"+searchParts[1];navigateTo(_navigateToUrl2)}break;case"template":if(searchParts.length>1){var _navigateToUrl3="/form/template/"+searchParts[1];navigateTo(_navigateToUrl3)}}}},onChange:function(e){_this4.setState({searchText:e.target.value})},id:"search-1"}):null,React.createElement(HeaderGlobalAction,{"aria-label":"Search",onClick:this.toggleSearch},React.createElement(Search20,null))),menuItems=this.props.headerMenuItems?this.props.headerMenuItems:{Studio:"/workmania/page-designer",Designer:"/workmania/page-designer",IDE:"/workmania/graphiql-view","Script Runner":"/workmania/script-runner",Palettes:"/studio/palettes",Tables:"/studio/db",Workflow:"/wfmodeler"},headerNavMenu=(React.createElement(SideNavMenu,{"aria-label":"Menu",renderMenuContent:function(_ref4){_ref4.ariaLabel;return React.createElement("button",{className:"bx--header__action"},React.createElement(Menu32,{className:"bx--header__action--active"}))}},menuItems&&Object.keys(menuItems).map(function(menuItemName){return React.createElement(SideNavMenuItem,{onClick:function(){navigateTo(menuItems[menuItemName])}},menuItemName)})),React.createElement(HeaderMenuButton,{"aria-label":"Open menu",isCollapsible:!0,onClick:function(e){_this4.props.updateStore({updates:{sideNavOpen:1==_this4.state.isSideNavExpanded?"open":"close",sideNavPinned:1==_this4.state.isSideNavExpanded}}),_this4.setState({isSideNavExpanded:!_this4.state.isSideNavExpanded})},isActive:this.state.isSideNavExpanded}),React.createElement(React.Fragment,null,React.createElement(Menu20,{className:this.props.sideNavPinned?"menubtn":"menubtn-closed",onClick:function(e){_this4.props.updateStore({updates:{sideNavOpen:1==_this4.state.isSideNavExpanded?"open":"close",sideNavPinned:1==_this4.state.isSideNavExpanded}}),_this4.setState({isSideNavExpanded:!_this4.state.isSideNavExpanded})}}),this.state.fixedModuleEl,React.createElement("div",{style:{display:"open"!=this.props.sideNavOpen||window.location.pathname.startsWith("/login")?"none":"block"},className:this.props.sideNavPinned?"pinnedSideNav":"sideNav"},this.state.sideNavEl))),ReferenceField=(this.props.preview&&"studio"!=this.props.currentscope||React.createElement(HeaderNavigation,{"aria-label":"",style:{marginLeft:20}},React.createElement(HeaderMenu,{"aria-label":"Studio",menuLinkName:"Studio"},React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/page-designer")}},"Designer"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/srstee-ide")}},"IDE"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/graphiql-view")}},"Query Builder"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/script-runner")}},"Script Runner"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/studio/palettes")}},"Palettes"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/studio/db")}},"Tables"))),SrsReference()),headerDetails=(this.accessToken&&React.createElement(ReferenceField,{light:"true",title:"",tablename:"MetaScope",displayfield:"Name",secondarydisplayfield:"",filter:{},defaultValue:this.props.currentscopeid,searchfields:"Name,Code",showClearButton:"false",placeholder:"Choose Application",onChange:(_ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(selectedItem){var scopeRecord,scopeCode,result,_menuItems;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!selectedItem||!selectedItem.id){_context3.next=22;break}return _context3.next=3,$qry.getCachableRecords("MetaScope",{where:{uid:selectedItem.id}},["uid","Code"]);case 3:if(scopeRecord=_context3.sent,!(scopeCode=scopeRecord&&scopeRecord.length>0?scopeRecord[0].Code:"")){_context3.next=21;break}return _context3.next=8,$script.runAtServer("mmf.bindScope2User",{code:scopeCode});case 8:if((result=_context3.sent).result&&result.code?_this4.props.addFlashMessage({title:"Success - ",subtitle:"Application is now switched to "+result.code}):_this4.props.addErrorMessage({title:"Error - ",subtitle:"Something went wrong, please try again later!"}),_menuItems=null,!$qry.cache["studio.getMenuItems_"+scopeCode]){_context3.next=15;break}_menuItems=$qry.cache["studio.getMenuItems_"+scopeCode],_context3.next=18;break;case 15:return _context3.next=17,$script.runscript("studio.getMenuItems",{scope:scopeCode});case 17:_menuItems=_context3.sent;case 18:_this4.props.updateStore({updates:{currentscope:scopeCode,currentscopeid:selectedItem.id,headerMenuItems:_menuItems}}),_context3.next=22;break;case 21:_this4.props.addErrorMessage({title:"Error - ",subtitle:"Something went wrong, please try again later!"});case 22:case"end":return _context3.stop()}},_callee3,_this4)})),function(_x2){return _ref5.apply(this,arguments)})}),this.accessToken?React.createElement(React.Fragment,null,React.createElement(HeaderGlobalBar,null,"studio"==this.props.currentscope?searchbar:null,React.createElement(HeaderMenu,{"aria-label":"App User",className:"avatarMenuItems",renderMenuContent:function(){return React.createElement("span",{style:{backgroundColor:"#c3c3c3",padding:10,borderRadius:"50%"}},React.createElement(User20,null))}},React.createElement(HeaderMenuItem,{href:"#"},"Profile"),React.createElement(HeaderMenuItem,{href:"/logout"},"Logout")))):null);return React.createElement("div",{className:"srs-header"},React.createElement(Header,{"aria-label":"Srstee"},React.createElement("div",{className:"bx--header-logo",style:{width:30,height:30}},React.createElement("img",{src:"/resources/logo.gif",width:"29px",height:"29px",style:{border:"1px solid #5a9f6f",borderRadius:30,backgroundColor:"#292828"}})),headerNavMenu,React.createElement(HeaderName,{href:"https://www.srste.in",prefix:""},"Srste Platform"),headerDetails))}}]),_SrsteeHeader_}(React.Component),_export("SrsteeHeader",SrsteeHeader=function(props){return _SrsteeHeader_}),_export("SrsteeHeader",SrsteeHeader)}}}),System.register("component/studio/SrsteeIDE.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/studio/StudioUtil.js","client/script/studio/StudioFormUtil.js","carbon-components-react","@carbon/icons-react/lib/close/20","@carbon/icons-react/lib/add--alt/32","lodash.clonedeep","lodash.debounce"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MonacoEditor,StudioUtil,StudioFormUtil,Select,SelectItem,TextInput,OverflowMenu,OverflowMenuItem,Close20,AddAlt32,cloneDeep,debounce,ideScope,SrsteeIDE,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_clientScriptStudioStudioUtilJs){StudioUtil=_clientScriptStudioStudioUtilJs.StudioUtil},function(_clientScriptStudioStudioFormUtilJs){StudioFormUtil=_clientScriptStudioStudioFormUtilJs.StudioFormUtil},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput,OverflowMenu=_carbonComponentsReact.OverflowMenu,OverflowMenuItem=_carbonComponentsReact.OverflowMenuItem},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibAddAlt){AddAlt32=_carbonIconsReactLibAddAlt.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){history.pushState(null,null,location.href),window.onpopstate=function(){history.go(1)},ideScope={Container:function(_React$Component){function Container(props){_classCallCheck(this,Container);var _this=_possibleConstructorReturn(this,(Container.__proto__||Object.getPrototypeOf(Container)).call(this,props)),studioUtil=new StudioUtil;return studioUtil.bindAllMethods.bind(_this)(),_this.state=studioUtil.getInitialState(),_this.topElement=React.createRef(),_this.studioFormUtil=new StudioFormUtil,_this.editorDidMount=_this.editorDidMount.bind(_this),_this.editor=null,_this.editorModel=null,_this.editorModelViewState=null,_this.activeFileIndex=-1,_this.editorContent=null,_this.restoreEditor=_this.restoreEditor.bind(_this),_this.getModels(_this.refreshModels.bind(_this)),_this.resizeSideBarGrid=_this.resizeSideBarGrid.bind(_this),_this.resizeSideBarGridDebounceFn=debounce(function(){_this.resizeSideBarGrid()}),_this.resizeFooterPaneGrid=_this.resizeFooterPaneGrid.bind(_this),window.addEventListener("resize",self.resizeSideBarGridDebounceFn),_this}return _inherits(Container,_React$Component),_createClass(Container,[{key:"resizeSideBarGrid",value:function(){var self=this,parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".searchPane",this.props.shadow).length>0?$(".searchPane",this.props.shadow):$(".searchPane",parentNode),topLevelEl=$(".top-level",this.props.shadow).length>0?$(".top-level",this.props.shadow):$(".top-level",parentNode),contentAreaEl=$(".sr-editorial-space",this.props.shadow).length>0?$(".sr-editorial-space",this.props.shadow):$(".sr-editorial-space",parentNode);if(searchPane.length>0){var searchPaneRect=searchPane[0].getBoundingClientRect(),contentAreaWidth=topLevelEl[0].getBoundingClientRect().width-searchPaneRect.width-5;setTimeout(function(){contentAreaEl.width(contentAreaWidth),window.removeEventListener("resize",self.resizeSideBarGridDebounceFn),window.addEventListener("resize",self.resizeSideBarGridDebounceFn)})}}},{key:"resizeFooterPaneGrid",value:function(){var parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,contentPane=$(".sr-editorial-space > .content",this.props.shadow).length>0?$(".sr-editorial-space > .content",this.props.shadow):$(".sr-editorial-space > .content",parentNode),topLevelEl=$(".sr-editorial-space",this.props.shadow).length>0?$(".sr-editorial-space",this.props.shadow):$(".sr-editorial-space",parentNode),footerPane=$(".sr-editorial-space > .footerPane",this.props.shadow).length>0?$(".sr-editorial-space > .footerPane",this.props.shadow):$(".sr-editorial-space > .footerPane",parentNode);if(contentPane.length>0){var contentPaneRect=contentPane[0].getBoundingClientRect(),footerPaneHeight=topLevelEl[0].getBoundingClientRect().height-contentPaneRect.height;footerPane.height(footerPaneHeight);var editorState=cloneDeep(this.state.editor);editorState.height=contentPaneRect.height,this.setState({editor:editorState})}}},{key:"componentDidMount",value:function(){var self=this;(!this.state.openedForms||0==this.state.openedForms.length||1==this.state.openedForms.length&&-1==this.state.openedForms[0].file_id)&&this.props.ideFiles&&this.props.ideFiles.length>0&&this.loadIDEFiles(this.props.ideFiles),this.searchChanged();var parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".searchPane",this.props.shadow).length>0?$(".searchPane",this.props.shadow):$(".searchPane",parentNode);if(window.addEventListener("focus",self.resizeSideBarGridDebounceFn),window.addEventListener("focus",this.resizeSideBarGridDebounceFn),searchPane&&searchPane.length>0){searchPane[0].addEventListener("resize",this.resizeSideBarGridDebounceFn),new MutationObserver(function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}}).observe(searchPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})}var contentPane=$(".sr-editorial-space > .content",this.props.shadow).length>0?$(".sr-editorial-space > .content",this.props.shadow):$(".sr-editorial-space > .content",parentNode);if(contentPane&&contentPane.length>0){contentPane[0].addEventListener("resize",this.resizeFooterPaneGrid),new MutationObserver(function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}}).observe(contentPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})}setTimeout(function(){return self.this.resizeSideBarGrid()},1e3)}},{key:"componentDidUnmount",value:function(){window.removeEventListener("resize",this.resizeSideBarGridDebounceFn)}},{key:"componentDidUpdate",value:function(prevProps){var _this2=this;if(prevProps.sideNavOpen!=this.props.sideNavOpen&&this.resizeSideBarGridDebounceFn(),prevProps.ide_reload!=this.props.ide_reload&&this.setState({reload:!this.state.reload}),prevProps.showpreview==this.props.showpreview||prevProps.showpreview_target==this.props.showpreview_target||"ide_state"!=this.props.showpreview_target&&"ide_actions"!=this.props.showpreview_target&&"ide_props"!=this.props.showpreview_target&&"ide_deps"!=this.props.showpreview_target||(this.setState({showWebComponentPreview:this.props.showpreview,showPreviewTarget:this.props.showpreview_target}),0==this.props.showpreview&&this.restoreEditor()),this.activeFileIndex>-1&&this.refs)if(this.refs["file"+this.activeFileIndex])setTimeout(function(){return _this2.refs["file"+_this2.activeFileIndex].scrollIntoView({block:"end",behavior:"smooth"})},100);else{var lastFileIndx=-1;Object.keys(this.refs).map(function(refKey){if(refKey.indexOf("file")>-1){var fileIndx=parseInt(refKey.split("file")[1]);fileIndx>lastFileIndx&&(lastFileIndx=fileIndx)}}),setTimeout(function(){return _this2.refs["file"+lastFileIndx].scrollIntoView({block:"end",behavior:"smooth"})},100)}}},{key:"componentDidCatch",value:function(error,info){console.log("error = "+error)}},{key:"editorDidMount",value:function(editor,monaco){monaco.languages.registerCompletionItemProvider("javascript",{provideCompletionItems:function(model,position){return[{label:'let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',documentation:"Utility to get the records"},{label:'let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',documentation:"Utility to get the record count of the matching filter"},{label:'createRecord = await $qry.createRecord("[model]_[scope]", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - createRecord = await $qry.createRecord("[model]_[scope]", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to create a new record"},{label:'updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to update an existing record"},{label:'deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',documentation:"Utility to delete a record"},{label:'deleteRecords = await $qry.deleteRecords("[model]_[scope]", "{uid: {"inq": ["id1", "id"]}}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "filter")',documentation:"Utility to delete multiple records"},{label:'tableDelete = await $qry._run(`mutation($inputData:[Table]DestroyAllInput!) {\n\t\t[Table]DestroyAll(input:$inputData){\n\t\t\tobj\n\t\t}\t}`, { "inputData": { "where": { "[FieldName]":"${varname}"} } },\n\t\t"data.[Table]DestroyAll.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-delete",documentation:"Delete query to remove the records from the table"},{label:'$qry.run("{queryName}", "{variables}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'await $qry.run("{queryName}", "{variables}")',documentation:"Utility to mutate/fetch data from server using GraphQL"},{label:'tableRead = await $qry._run(`query($input:JSON){\n\t[Table]{\n\t\t[Table]Find(filter: $input) @_(get: "edges"){\n\t\t\tedges @_(keyBy: "node.uid", mapValues:"node"){\n\t\t\t\tnode{\n\t\t\t\t\tuid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}`, { "input": { "where": { "uid": "${varname}" } } },\n"data.[Table].[Table]Find");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-read",documentation:"Open query to get the data from the table"},{label:'tableUpsert = await $qry._run(`mutation($input: [Table]UpsertWithWhereInput!){\n\t[Table]UpsertWithWhere(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "where": { "uid": "${varname}" }, "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]UpsertWithWhere.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-upsert",documentation:"Query to update the data in the table"},{label:'tableCreate = await $qry._run(`mutation($input: [Table]CreateInput!){\n\t[Table]Create(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]Create.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-create",documentation:"Query to create the record with the data"}]}});this.editor=editor,this.monaco=monaco,this.editorModel=editor.getModel(),this.restoreEditor()}},{key:"restoreEditor",value:function(){var self=this,saveEditorValue=this.editor.setValue.bind(this.editor);this.editor.setValue=function(val){saveEditorValue(val),self.state.form.position?(self.editor.setPosition(self.state.form.position),self.editor.revealLine(self.state.form.position.lineNumber),self.editor.revealLineInCenter(self.state.form.position.lineNumber)):(self.editor.setPosition({lineNumber:1,column:1}),self.editor.revealLine(1),self.editor.revealLineInCenter(15)),self.editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:this.editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(this.editor._themeService._styleElement),this.editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"render",value:function(){var editorCode,requireConfig={url:"/thirdpartylib/require.js",paths:{vs:window.noCDN?"/thirdpartylib/monaco/min/vs":"https://unpkg.com/srstecdn@latest/monaco/min/vs"},waitSeconds:15},searchResults=this.studioFormUtil.getSearchPaneDetails.bind(this)(),editorToolkit=this.studioFormUtil.getEditorToolKit.bind(this)(),previewPane=this.studioFormUtil.getPreviewContentPane.bind(this)(),footerTabs=this.studioFormUtil.getFooterTabs.bind(this)(),footerContent=this.studioFormUtil.getFooterContent.bind(this)();if(this.state.form.mode)switch(this.state.form.mode){case"css":editorCode=this.state.form.css;break;case"html":editorCode=this.state.form.html;break;case"js":editorCode=this.state.form.code;break;case"import":editorCode=this.state.form.ImportScript;break;case"export":editorCode=this.state.form.ExportScript}else editorCode=this.state.form.code;var contentTabArry=[];if(this.state.openedForms){var _self=this;this.activeFileIndex=-1,this.state.openedForms.forEach(function(openedFile,indx){"contentTabActive"==openedFile.className&&(_self.activeFileIndex=indx),contentTabArry.push(React.createElement("div",{ref:"file"+indx,className:"contentTabItems"},React.createElement("div",{key:"-1",class:openedFile.className,onClick:function(){return _self.makeFormActive(openedFile)}},openedFile.fileName),React.createElement(Close20,{className:"closeTab",onClick:function(){return _self.removeForm(openedFile)}})))})}var contentTabs=React.createElement("div",{class:"contentTabs"},contentTabArry);this.topElement&&this.topElement.current&&(this.state.resetEditor&&(this.restoreEditor(),this.setState({resetEditor:!1})),this.editorContent=React.createElement(MonacoEditor,{width:this.state.editor.width,height:this.state.editor.height,language:"javascript",theme:"vs-dark",value:editorCode,defaultValue:editorCode,options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1},onChange:this.codeChanged,requireConfig:requireConfig,editorWillMount:this.editorWillMount,editorDidMount:this.editorDidMount}));var notificationBar=this.props.embedded+""!="true"&&this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",null):null;return React.createElement("div",{className:"top-level",ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ErrorBoundary/Style.css"); @import url("component/studio/SrsteeIDE/Style.css"); @import url("/thirdpartylib/monaco/min/vs/editor/editor.main.css")'),notificationBar,React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsMode.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/lib/typescriptServices.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsWorker.js"}),React.createElement("div",{className:"searchPane resizable-sidebar"},React.createElement("div",{className:"sr-new-file-menu"},React.createElement("label",{htmlFor:"button",className:"sr-new-file"},"New File"),React.createElement(OverflowMenu,{renderIcon:function(){return React.createElement(AddAlt32,null)},"data-floating-menu-container":"true"},React.createElement(OverflowMenuItem,{itemText:"Page",onClick:this.addNewFile,value:"page"}),React.createElement(OverflowMenuItem,{itemText:"Component",onClick:this.addNewFile,value:"component"}),React.createElement(OverflowMenuItem,{itemText:"Style",onClick:this.addNewFile,value:"style"}),React.createElement(OverflowMenuItem,{itemText:"Client Scripts",onClick:this.addNewFile,value:"client_script"}),React.createElement(OverflowMenuItem,{itemText:"Common Scripts",onClick:this.addNewFile,value:"common_script"}),React.createElement(OverflowMenuItem,{itemText:"Server Scripts",onClick:this.addNewFile,value:"server_script"}),React.createElement(OverflowMenuItem,{itemText:"Model",onClick:this.addNewFile,value:"model"}),React.createElement(OverflowMenuItem,{itemText:"Opertaion Hook",onClick:this.addNewFile,value:"operation_hook"}),React.createElement(OverflowMenuItem,{itemText:"Resources",onClick:this.addNewFile,value:"resource"}),React.createElement(OverflowMenuItem,{itemText:"Rendering Templates",onClick:this.addNewFile,value:"template"}),React.createElement(OverflowMenuItem,{itemText:"Rest Methods",onClick:this.addNewFile,value:"restmethod"}),React.createElement(OverflowMenuItem,{itemText:"Import Export",onClick:this.addNewFile,value:"import_export"}),React.createElement(OverflowMenuItem,{itemText:"Widget Actions",onClick:this.addNewFile,value:"widget_action"}),React.createElement(OverflowMenuItem,{itemText:"Page Actions",onClick:this.addNewFile,value:"page_action"}))),React.createElement(Select,{labelText:"Category",onChange:this.searchCategoryUpdated,value:this.state.search.ide_type,defaultValue:"component",id:"category",required:"required"},React.createElement(SelectItem,{value:"page",text:"Page"}),React.createElement(SelectItem,{value:"component",text:"Component"}),React.createElement(SelectItem,{value:"client_script",text:"Client Script"}),React.createElement(SelectItem,{value:"common_script",text:"Common Script"}),React.createElement(SelectItem,{value:"server_script",text:"Server Script"}),React.createElement(SelectItem,{value:"operation_hook",text:"Operation Hook"}),React.createElement(SelectItem,{value:"resource",text:"Resources"}),React.createElement(SelectItem,{value:"template",text:"Rendering Templates"}),React.createElement(SelectItem,{value:"restmethod",text:"Rest Methods"}),React.createElement(SelectItem,{value:"import_export",text:"Import Export"}),React.createElement(SelectItem,{value:"widget_action",text:"Widget Actions"}),React.createElement(SelectItem,{value:"page_action",text:"Page Actions"}),React.createElement(SelectItem,{value:"style",text:"Styles"})),React.createElement(TextInput,{placeholder:"Search here...",onChange:this.searchChanged,required:"required",className:"sr-search-bar"}),React.createElement("div",{className:"searchResults"},searchResults)),React.createElement("div",{className:"sr-editorial-space"},React.createElement("div",{className:"content"},React.createElement("div",{className:this.state.editor.className},contentTabs,editorToolkit,this.editorContent)),React.createElement("div",{className:"footerPane"},footerTabs,footerContent),previewPane))}}]),Container}(React.Component)},_export("SrsteeIDE",SrsteeIDE=function(deps){return ideScope.Container}),_export("SrsteeIDE",SrsteeIDE),_export("default",SrsteeIDE),_export("states",states=[{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": ""}'},{KeyName:"ideFiles",AccessPath:"ideFiles",DefaultValue:'{"ideFiles": []}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"ide_reload",AccessPath:"ide_reload",DefaultValue:'{"ide_reload": false}'},{KeyName:"notifications",AccessPath:"notifications",DefaultValue:'{"notifications": []}'},{KeyName:"ide_state",AccessPath:"ide_state",DefaultValue:'{"ide_state": {}}'},{KeyName:"sideNavOpen",AccessPath:"sideNavOpen",DefaultValue:'{"sideNavOpen": "open"}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("client/script/studio/StudioUtil.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","client/script/persist/MMFAPI.js","lodash.debounce"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,MMFAPI,debounce,StudioUtil;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){_export("StudioUtil",StudioUtil={StudioUtil:function(){var _ref2,self=this;this.bindAllMethods=function(){this.componentTypeUpdated=self.componentTypeUpdated.bind(this),this.styleTypeUpdated=self.styleTypeUpdated.bind(this),this.componentVersionChanged=self.componentVersionChanged.bind(this),this.triggerTypeUpdated=self.triggerTypeUpdated.bind(this),this.fileTypeUpdated=self.fileTypeUpdated.bind(this),this.refreshModels=self.refreshModels.bind(this),this.refreshAllModels=self.refreshAllModels.bind(this),this.scopeChanged=self.scopeChanged.bind(this),this.fileNameChanged=self.fileNameChanged.bind(this),this.saveForm=self.saveForm.bind(this),this.saveReusableScript=self.saveReusableScript.bind(this),this.saveImportExport=self.saveImportExport.bind(this),this.saveResource=self.saveResource.bind(this),this.saveTemplate=self.saveTemplate.bind(this),this.saveOperationHook=self.saveOperationHook.bind(this),this.saveComponent=self.saveComponent.bind(this),this.saveModel=self.saveModel.bind(this),this.savePage=self.savePage.bind(this),this.saveRestMethod=self.saveRestMethod.bind(this),this.saveWidgetAction=self.saveWidgetAction.bind(this),this.savePageAction=self.savePageAction.bind(this),this.padDefaultModelProps=self.padDefaultModelProps.bind(this),this.deleteRecord=self.deleteRecord.bind(this),this.getModels=self.getModels.bind(this),this.getAllModels=self.getAllModels.bind(this),this.resetForm=self.resetForm.bind(this),this.fetchRecord=self.fetchRecord.bind(this),this.loadForm=self.loadForm.bind(this),this._loadForm=self._loadForm.bind(this),this.searchChanged=self.searchChanged.bind(this),this.searchHandler=self.searchHandler.bind(this),this.codeChanged=self.codeChanged.bind(this),this.resizeEditor=self.resizeEditor.bind(this),this.hookonModelFieldUpdated=self.hookonModelFieldUpdated.bind(this),this.orderChanged=self.orderChanged.bind(this),this.contentTypeChanged=self.contentTypeChanged.bind(this),this.reloadPreview=self.reloadPreview.bind(this),this.componentCodeModeChanged=self.componentCodeModeChanged.bind(this),this.importExportModeChanged=self.importExportModeChanged.bind(this),this.cancelPreview=self.cancelPreview.bind(this),this.removeForm=self.removeForm.bind(this),this.addFormToTabs=self.addFormToTabs.bind(this),this.makeFormActive=self.makeFormActive.bind(this),this.searchCategoryUpdated=self.searchCategoryUpdated.bind(this),this.footerTabChange=self.footerTabChange.bind(this),this.pagePathChanged=self.pagePathChanged.bind(this),this.relativePathChanged=self.relativePathChanged.bind(this),this.addNewFile=self.addNewFile.bind(this),this.loadIDEFiles=self.loadIDEFiles.bind(this),this.updateActiveForm=self.updateActiveForm.bind(this)},this.updateActiveForm=function(form){var updatedIDEFiles=[];this.props.ideFiles&&this.props.ideFiles.map(function(ideFile,indx){"contentTabActive"==ideFile.className?updatedIDEFiles.push(form):updatedIDEFiles.push(ideFile)}),this.setState({form:form}),this.props.updateStore({updates:{ideFiles:updatedIDEFiles}})},this.loadIDEFiles=function(ideFiles){var activeForm=ideFiles.filter(function(ideFile,indx){return"contentTabActive"==ideFile.className});this.setState({openedForms:ideFiles,form:activeForm[0]})},this.makeFormActive=function(inputForm){var activeForm,openedForms=this.state.openedForms,tobeActiveForm=inputForm||this.state.form;if((activeForm=(activeForm=openedForms.filter(function(currentForm){return"contentTabActive"==currentForm.className}))&&activeForm.length>0?activeForm[0]:activeForm)!==tobeActiveForm){var position=this.editor.getPosition();activeForm.position=position,openedForms.forEach(function(currentForm,indx){currentForm.className=currentForm===tobeActiveForm?"contentTabActive":"contentTab"}),this.setState({openedForms:openedForms,form:tobeActiveForm}),this.props.updateStore({updates:{ideFiles:openedForms}})}},this.footerTabChange=function(e){var changer="form_field";switch(e.target.getAttribute("type")&&"button"!=e.target.getAttribute("type")||e.target.parentElement.getAttribute("type")){case"form_field":changer="form_field";break;case"function":changer="function";break;case"console":changer="console";break;case"state":changer="state";break;case"action":changer="action";break;case"dependency":changer="dependency";break;case"validation":changer="validation";break;case"props":changer="props"}this.setState({footerChanger:changer})},this.pagePathChanged=function(e){var form=this.state.form,newValue=e.target.value;form.pagePath=newValue,this.updateActiveForm(form)},this.relativePathChanged=function(e){var form=this.state.form,newValue=e.target.value;form.relativePath=newValue,this.updateActiveForm(form)},this.removeForm=function(form){var tobeActiveForm,openedForms=this.state.openedForms;(openedForms=openedForms.filter(function(currentForm){return currentForm!==form}))&&openedForms.length>0?(openedForms.forEach(function(currentForm,indx){currentForm.className="contentTab"}),(tobeActiveForm=openedForms[openedForms.length-1]).className="contentTabActive"):(tobeActiveForm={file_id:-1,fileName:"Unnamed",className:"contentTabActive",type:"none",code:"//Welcome! Select the file type and file name to start adding new content...\n"},openedForms.push(tobeActiveForm)),this.setState({openedForms:openedForms,form:tobeActiveForm}),this.props.updateStore({updates:{ideFiles:openedForms}})},this.getInitialState=function(){var initForm={file_id:-1,fileName:"Unnamed",type:"none",className:"contentTabActive",code:"//Welcome! Select the file type and file name to start adding new content...\n"};return{modelData:{},allModelData:{},openedForms:[initForm],defaultFileType:"none",defaultText:"//Welcome! Select the file type and file name to start adding new content...\n",defaultFileName:"Unnamed",form:initForm,searchUpdated:!1,searchTree:[],search:{ide_type:"component"},previewReload:!1,PreviewComponent:null,model2tableMapper:{model:"MetaModel",component:"MetaComponent",style:"MetaStyle",page:"MetaRoute",restmethod:"MetaRestMethod",operation_hook:"MetaOperationHook",client_script:"MetaReusableScript",common_script:"MetaReusableScript",server_script:"MetaReusableScript",import_export:"MetaLocalSync",resource:"MetaResource",template:"MetaTemplate",widget_action:"MetaWidgetAction",page_action:"MetaSlideAction"},model2FieldsMapper:{model:["uid","Name","Scope","Definition"],component:["uid","Name","Scope","Definition","Type","CSS","WebComponent","Version"],style:["uid","Name","Styles","Scope","Type"],page:["uid","Name","Scope","Path","HTML"],restmethod:["uid","Name","Scope","Path","Definition","Type","Collection","is_public"],operation_hook:["uid","Name","Scope","Definition","Type","Model","Order"],client_script:["uid","Name","Scope","Definition","Type"],common_script:["uid","Name","Scope","Definition","Type"],server_script:["uid","Name","Scope","Definition","Type"],import_export:["uid","Name","Field","Order","Active","LocalPath","Table","Level","ImportScript","ExportScript","ImportCondition","ExportCondition"],resource:["uid","Name","Scope","Definition","Type"],template:["uid","Name","Scope","Definition"],widget_action:["uid","Name","Scope","Definition","Order","Trigger","Active"],page_action:["uid","Name","Scope","Definition","Order","Active"]},model2UniqueNameMapper:{model:"Name",component:"Name",page:"Name",restmethod:"Name",style:"Name",operation_hook:"Name",client_script:"Name",common_script:"Name",server_script:"Name",import_export:"Name",resource:"Name",template:"Name",widget_action:"Name",page_action:"Name"},searchResults:[],defaultCode:{model:'{\n  "Comments": "This is the example of the application model template",\n  "Applicant Name": {\n    "type": "String",\n    "required": true\n  },\n  "Qualifications": {\n    "type": "Text",\n    "required": true\n  }\n}',operation_hook:{"before.save":"function(){\n  /* Global variables - \n    past, live, changes, isNew, swap, $tbl, $fnc \n  */\n  //business logic\n\n}","after.save":"function(){\n  /* Global variables - \n    past, live, changes, isNew, swap, $tbl, $fnc \n  */\n  //business logic\n\n}","before.delete":"function(){\n  /* Global variables - \n    past, live, changes, isNew, swap, $tbl, $fnc \n  */\n  //business logic\n\n}","after.delete":"function(){\n  /* Global variables - \n    past, live, changes, isNew, swap, $tbl, $fnc \n  */\n  //business logic\n\n}"},component:'import React from "react"\nvar _$Component_ = class extends React.Component{\n    render(){\n        return (<div>\n                    <h2>Hello World!</h2>\n                </div>);\n    }\n}\n\nvar $Component = function(props) {\n   return _$Component_\n};\nexport {$Component};\n\n',style:"",page:"\x3c!--Add the page html--\x3e\n",import_export:{importScript:"(function() { \n //$input, $qry, $script, $fileUID, $fileContent, $topReject \n  $topResolve({}); \n})",exportScript:"(function() {\n  //$live, $qry, $script, $topResolve, $topReject \n  $topResolve({}); \n})"},reusable_script:'function() {\n   /*Usage: \n     var rs = new $fnc.<ReusableScriptName>();\n     var result = rs.method1();\n   */\n\n   /* Available global variables - \n     $tbl -- global object to access the available Models for any CRUD operations\n     $fnc -- global object to refer to any other Reusable Scripts\n   */\n   this.<MethodName> = function() {\n     //$tbl.ApplicationForm.find({"where":{"id":"3"}}, callback);\n     //var scriptObject = new $fnc.<AnotherScriptName>();\n     //var result = scriptObject.<MethodName>(...<Parameters>)\n   }\n}\n',reusable_ui_script:"var <scope> = {\n  <ScriptName>: function () {\n    var self = this;\n    this.<methodName> = function () {\n\n    }\n  }\n};\n\nvar <ScriptName> = <scope>.<ScriptName>;\nexport { <ScriptName> }\n",resource:"<xml/>\n",template:"export default function(name, templateDefinition, properties, rootElem) {\n//.... implement render function\n//Example - ReactDOM.render(<ReactComponent {...properties} />, rootElem);\n}\n",widget_action:"(function() {\n\t//$live, $widgets, $fields, $notifier, $qry, $script, navigateTo(url) \n})",page_action:"(function() {\n\t//$pageData, $widgets, $notifier, $qry, $script, navigateTo(url) \n})",restmethod:"(function() {\n\t//$pathParams, request, response, $resolve\n})"},defaultComponentVersion:"1.0.0",defaultTriggerType:"before.save",defaultComponentType:null,defaultStyleType:"css",editor:{width:.8*screen.width,height:.55*screen.height,mode:"collapsed",className:"editorNormal"},showPreview:!1,footerChanger:"form_field",searchResults:null}},this.componentTypeUpdated=function(e){var form=this.state.form,newValue=e.target.value;form.component_type=newValue},this.styleTypeUpdated=function(e){var form=this.state.form,newValue=e.target.value;form.style_type=newValue,this.updateActiveForm(form)},this.componentVersionChanged=function(e){var form=this.state.form,newValue=e.target.value;form.componentVersion=newValue,this.updateActiveForm(form)},this.triggerTypeUpdated=function(e){var form=this.state.form,newValue=e.target.value;form.trigger_type=newValue,newValue&&(form.file_id&&-1!=form.file_id||(form.code=this.state.defaultCode[form.type][newValue])),this.updateActiveForm(form)},this.addNewFile=function(e){var fileType=e.target.value||e.currentTarget.attributes.value.value,form={file_id:-1,fileName:"Unnamed",className:"contentTabActive",type:fileType,position:{lineNumber:1,column:1}};fileType?"operation_hook"==fileType?(form.modelId=form.file_id,this.getModels(this.refreshModels.bind(this)),form.component_type=this.state.defaultComponentType,form.trigger_type=this.state.defaultTriggerType,form.code=this.state.defaultCode[form.type][form.trigger_type],form.css="/* add css styles to the component */",form.html="\x3c!-- add html code to be injected when rendering the component --\x3e",form.mode="js"):"import_export"==fileType?(this.getAllModels(this.refreshAllModels.bind(this)),form.fileName="Unnamed",form.order=1,form.active=!0,form.Table="",form.Field="",form.level="Table",form.localPath="/",form.ImportScript=this.state.defaultCode[form.type].importScript,form.ExportScript=this.state.defaultCode[form.type].exportScript,form.ImportCondition="",form.ExportCondition="",form.mode="import"):"resource"==fileType?form.content_type="xml":form.code=this.state.defaultCode[form.type]:form.code="//Great to see you again... select the file type and search for any specific file you want to work with...",this.addFormToTabs(form,!0)},this.fileTypeUpdated=function(e){var form=this.state.form,modelId=form.file_id,newValue=e.target.value||e.currentTarget.attributes.value.value;this.state.form.type=newValue,form.type?("operation_hook"==form.type?(form.modelId=modelId,this.getModels(this.refreshModels.bind(this)),form.component_type=this.state.defaultComponentType,form.trigger_type=this.state.defaultTriggerType,form.code=this.state.defaultCode[form.type][form.trigger_type],form.css="/* add css styles to the component */",form.html="\x3c!-- add html code to be injected when rendering the component --\x3e",form.mode="js"):"import_export"==form.type?(this.getAllModels(this.refreshAllModels.bind(this)),form.fileName="Unnamed",form.order=1,form.active=!0,form.Table="",form.Field="",form.level="Table",form.localPath="/",form.ImportScript=this.state.defaultCode[form.type].importScript,form.ExportScript=this.state.defaultCode[form.type].exportScript,form.ImportCondition="",form.ExportCondition="",form.mode="import"):"resource"==form.type?form.content_type="xml":form.code=this.state.defaultCode[this.state.form.type],this.updateActiveForm(form)):(form.code="//Great to see you again... select the file type and search for any specific file you want to work with...",this.updateActiveForm(form))},this.searchCategoryUpdated=function(e){var newValue=e.target.value,searchObj=this.state.search;searchObj.ide_type=newValue,this.setState({search:searchObj,searchUpdated:!0}),this.getModels(this.refreshModels.bind(this)),this.getAllModels(this.refreshAllModels.bind(this)),this.searchChanged()},this.refreshModels=function(results){var self=this;if(results){var form=self.state.form,modelData=self.state.modelData;modelData.modelsForLookup=[],modelData.modelIds={},results.forEach(function(result){var model={};model.id=result.Name+"_"+result.Scope,model.text=result.Name+"["+result.Scope+"]",modelData.modelsForLookup.push(model),modelData.modelIds[model.text]=model.id}),self.setState({modelData:modelData}),Object.keys(modelData.modelIds).forEach(function(modelName){self.state.modelData.modelIds[modelName]==form.modelId&&(form.modelName=modelName)}),self.setState({form:form})}},this.refreshAllModels=function(modelNames){if(modelNames){var form=this.state.form,allModelData=this.state.allModelData||{};allModelData.allModelsForLookup=[],modelNames.forEach(function(modelName){var model={},modelId=modelName;modelName.indexOf("[")>-1&&(modelId=modelName.replace("[","_").replace("]","")),model.id=modelId,model.text=modelName,allModelData.allModelsForLookup.push(model)}),allModelData.allModelsForLookup.forEach(function(modelObj){modelObj.id==form.modelId&&(form.modelName=modelObj.text)}),this.updateActiveForm(form),this.setState({allModelData:allModelData})}},this.scopeChanged=function(e){var form=this.state.form,newValue=e.target.value;form.scope=newValue,this.updateActiveForm(form)},this.fileNameChanged=function(e){var form=this.state.form,newValue=e.target.value;form.fileName=newValue,this.updateActiveForm(form)},this.saveForm=function(){var form=this.state.form;if(form&&form.fileName&&(form.scope&&form.code||"import_export"==form.type||"widget_action"==form.type||"page_action"==form.type))switch(form.type){case"model":this.saveModel();break;case"component":this.saveComponent();break;case"style":this.saveStyles();break;case"page":this.savePage();break;case"restmethod":this.saveRestMethod();break;case"operation_hook":this.saveOperationHook();break;case"client_script":case"common_script":case"server_script":this.saveReusableScript();break;case"resource":this.saveResource();break;case"template":this.saveTemplate();break;case"import_export":this.saveImportExport();break;case"widget_action":this.saveWidgetAction();break;case"page_action":this.savePageAction()}},this.savePageAction=function(){var _this=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Definition:form.code,Scope:form.scope,Active:form.active,Order:form.order};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid"],function(data){form.file_id=data.uid,_this.updateActiveForm(form),_this.props.addFlashMessage({title:"Success - ",subtitle:"Updated page action "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid"],function(data){form.file_id=data.uid,_this.updateActiveForm(form),_this.props.addFlashMessage({title:"Success - ",subtitle:"New page action "+form.fileName+" created."})})}},this.saveWidgetAction=function(){var _this2=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var fileName=form.widgetFullName||form.fileName,payload={Name:fileName,Definition:form.code,Scope:form.scope,Trigger:fileName.indexOf("@@")>-1?form.trigger:"System",Active:form.active,Order:form.order};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid"],function(data){form.file_id=data.uid,_this2.updateActiveForm(form),_this2.props.addFlashMessage({title:"Success - ",subtitle:"Updated widget action "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid"],function(data){form.file_id=data.uid,_this2.updateActiveForm(form),_this2.props.addFlashMessage({title:"Success - ",subtitle:"New widget action "+form.fileName+" created."})})}},this.saveRestMethod=function(){var _this3=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Definition:form.code,Path:form.relativePath,Scope:form.scope,Type:form.method_type,Collection:form.collection,is_public:form.is_public};JSON.stringify(payload,null,"\t");form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid"],function(data){form.file_id=data.uid,_this3.updateActiveForm(form),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Updated rest method "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid"],function(data){form.file_id=data.uid,_this3.updateActiveForm(form),_this3.props.addFlashMessage({title:"Success - ",subtitle:"New rest method "+form.fileName+" created."})})}},this.savePage=function(){var _this4=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,HTML:form.code,Path:form.pagePath,Scope:form.scope};JSON.stringify(payload,null,"\t");form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid","HTML"],function(data){form.file_id=data.uid,form.code=data.HTML?data.HTML.replace(/\[QUOTE\]/g,'\\"'):data.HTML,form.content_type="page",_this4.updateActiveForm(form),_this4.props.addFlashMessage({title:"Success - ",subtitle:"Updated page "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid","HTML"],function(data){form.file_id=data.uid,form.code=data.HTML?data.HTML.replace(/\[QUOTE\]/g,'\\"'):data.HTML,form.content_type="page",_this4.updateActiveForm(form),_this4.props.addFlashMessage({title:"Success - ",subtitle:"New page "+form.fileName+" created."})})}},this.saveResource=function(){var _this5=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Definition:form.code,Scope:form.scope};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid","Definition","Scope"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,_this5.updateActiveForm(form),_this5.props.addFlashMessage({title:"Success - ",subtitle:"Updated resource "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid","Definition","Scope"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,_this5.updateActiveForm(form),_this5.props.addFlashMessage({title:"Success - ",subtitle:"New resource "+form.fileName+" created."})})}},this.saveImportExport=function(){var _this6=this,form=this.state.form,importScript=form.importScript+"",exportScript=form.exportScript+"";if(importScript.indexOf("'")>-1||exportScript.indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Order:form.order,Active:form.active,Table:form.Table,Field:form.Field,Level:form.level,LocalPath:form.localPath,ImportScript:form.ImportScript,ExportScript:form.ExportScript,ImportCondition:form.ImportCondition,ExportCondition:form.ExportCondition};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid"],function(data){form.file_id=data.uid,_this6.updateActiveForm(form),_this6.props.addFlashMessage({title:"Success - ",subtitle:"Updated import/export file - "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid"],function(data){form.file_id=data.uid,_this6.updateActiveForm(form),_this6.props.addFlashMessage({title:"Success - ",subtitle:"New import/export "+form.fileName+" created."})})}},this.saveTemplate=function(){var _this7=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Definition:form.code,Scope:form.scope};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid","Definition","Scope"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,_this7.updateActiveForm(form),_this7.props.addFlashMessage({title:"Success - ",subtitle:"Updated template "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid","Definition","Scope"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,_this7.updateActiveForm(form),_this7.props.addFlashMessage({title:"Success - ",subtitle:"New template "+form.fileName+" created."})})}},this.saveReusableScript=function(){var _this8=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var contentType="common_script"==form.type?"common":"client_script"==form.type?"client":"server_script"==form.type?"server":form.type,payload={Name:form.fileName,Scope:form.scope,Definition:form.code,Type:contentType};form.file_id&&-1!=form.file_id?(MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid","Definition","Scope","Type"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,form.type==data.Type=="common"||("client"==data.Type||("server"==data.Type||data.Type)),_this8.updateActiveForm(form),_this8.props.addFlashMessage({title:"Success - ",subtitle:"Updated reusable script "+form.fileName})}),fetch("/reload_cache")):(MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid","Definition","Scope","Type"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,form.type==data.Type=="common"||("client"==data.Type||("server"==data.Type||data.Type)),_this8.updateActiveForm(form),_this8.props.addFlashMessage({title:"Success - ",subtitle:"New reusable script "+form.fileName+" created."})}),fetch("/reload_cache"))}},this.saveOperationHook=function(){var _this9=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Scope:form.scope,Definition:form.code,Model:form.modelId,Type:form.trigger_type,Order:form.order};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord("MetaOperationHook",form.file_id,payload,["uid","Definition","Scope"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,_this9.updateActiveForm(form),_this9.props.addFlashMessage({title:"Success - ",subtitle:"Updated operation hook "+form.fileName})}):MMFAPI().createRecord("MetaOperationHook",payload,["uid","Definition","Scope"],function(data){form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,form.file_id=data.uid,_this9.updateActiveForm(form),_this9.props.addFlashMessage({title:"Success - ",subtitle:"New operation hook "+form.fileName+" created."})})}},this.saveComponent=function(){var _this10=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Scope:form.scope,Definition:form.code,Type:form.component_type,Version:form.componentVersion,HTML:form.html,CSS:form.css};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid","Definition","Scope","CSS"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,form.css=data.CSS,_this10.updateActiveForm(form),_this10.props.addFlashMessage({title:"Success - ",subtitle:"Updated component "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid","Definition","Scope","CSS"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,form.css=data.CSS,_this10.updateActiveForm(form),_this10.props.addFlashMessage({title:"Success - ",subtitle:"New component "+form.fileName+" created."})})}},this.saveStyles=function(){var _this11=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Scope:form.scope,Styles:form.code,Type:form.style_type};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid","Definition","Scope","CSS"],function(data){form.file_id=data.uid,form.code=data.Styles?data.Styles.replace(/\[QUOTE\]/g,'\\"'):data.Styles,_this11.updateActiveForm(form),_this11.props.addFlashMessage({title:"Success - ",subtitle:"Updated style "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid","Styles","Scope"],function(data){form.file_id=data.uid,form.code=data.Styles?data.Styles.replace(/\[QUOTE\]/g,'\\"'):data.Styles,_this11.updateActiveForm(form),_this11.props.addFlashMessage({title:"Success - ",subtitle:"New style "+form.fileName+" created."})})}},this.cancelPreview=function(){this.setState({showPreview:!1,resetEditor:!0})},this.saveModel=function(){var _this12=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Scope:form.scope,Definition:this.padDefaultModelProps(form.fileName,form.code)};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid","Definition","Scope"],function(data){form.file_id=data.uid;var properties=JSON.parse(data.Definition);properties&&(properties=properties.properties),form.code=JSON.stringify(properties,null,"\t"),_this12.updateActiveForm(form),_this12.props.addFlashMessage({title:"Success - ",subtitle:"Updated model "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid","Definition","Scope"],function(data){form.file_id=data.uid,properties&&(properties=properties.properties),form.code=JSON.stringify(properties,null,"\t"),_this12.updateActiveForm(form),_this12.props.addFlashMessage({title:"Success - ",subtitle:"New model "+form.fileName+" created."})})}},this.padDefaultModelProps=function(name,code){var definition=JSON.parse(code);delete definition.Comments,code=code.replace(/\n/g,"\n\t\t");var paddedDefinition={idInjection:!0,base:"PersistedModel",options:{validateUpsert:!0,public:!0}};return paddedDefinition.name=name,paddedDefinition.plural=name+"s",paddedDefinition.properties=definition,JSON.stringify(paddedDefinition)},this.deleteRecord=function(){var _this13=this,form=this.state.form;self=this,form.file_id&&-1!=form.file_id&&MMFAPI().deleteRecord(this.state.model2tableMapper[form.type],form.file_id,function(data){_this13.removeForm(form)})},this.loadDependencies=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var dependencies;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,System.import("/routes?param.url=/about&");case 2:return dependencies=_context.sent,_context.abrupt("return",dependencies);case 4:case"end":return _context.stop()}},_callee,this)})),this.reloadPreview=function(){var self=this,loadComponentURL="/load/component?param.name="+this.state.form.fileName+"&now="+Date.now();System.import(loadComponentURL).then(function(dependencies){try{System.import("client/script/mmf/PreviewLoader.js").then(function(previewModule){self.editorModelViewState=self.editor.saveViewState(),self.setState({PreviewComponent:previewModule.PreviewLoader(dependencies),showPreview:!0})}).catch(function(err){console.log(err)})}catch(ex){console.log(ex)}}).catch(function(err){console.log("Error while loading the dependencies "+err)})},this.getModels=function(cb){MMFAPI().search(this.state.model2tableMapper.model,this.state.model2FieldsMapper.model,"{}",cb)},this.getAllModels=function(cb){var nonMetaModelTables=["MetaModel","MetaComponent","MetaComponentState","MetaComponentProps","MetaComponentAction","MetaComponentRequires","MetaOperationHook","MetaRelationship","MetaResource","MetaNavigation","MetaReusableScript","MetaQuery","MetaRestMethod","MetaPropery","MetaLocalSync","MetaDocument","MetaPalette","MetaPaletteItem","MetaDocumentMap","MetaDocFragment","MetaRoute","MetaRouteRequires","MetaScope","MetaSlide","MetaSlideAction","MetaSlideProps","MetaSlideSlot","MetaSlideSlotWidget","MetaStyle","MetaTemplate","MetaTransient","MetaWidgetAction","MetaWidgetProps","SrsteeRole","SrsteeTableACL","SrsteeTableACLRole","SrsteeUserRole","SrsteeUserGroup","SrsteeACL","SrsteeFieldACL","SrsteeFieldACLRole","SrsteeGroup","SrsteeGroupRole","SrsteeRecordACL","SrsteeRecordACLRole"];MMFAPI().search(this.state.model2tableMapper.model,this.state.model2FieldsMapper.model,"{}",function(modelsFromMetaModel){var allModelNames=nonMetaModelTables||[];modelsFromMetaModel.map(function(modelItem){allModelNames.push(modelItem.Name+"["+modelItem.Scope+"]")}),cb(allModelNames)})},this.resetForm=function(){var ideType=this.state.form.type?this.state.form.type:this.state.defaultFileType,form={type:ideType,fileName:this.state.defaultFileName,file_id:-1,modelName:"",trigger_type:"",scope:"",code:this.state.defaultText,html:this.state.defaultText,className:"contentTabActive",Type:"none",content_type:"xml"};ideType&&(form.type=ideType);var openedForms=this.state.openedForms;openedForms.push(form),this.setState({openedForms:openedForms,form:form}),this.props.updateStore({updates:{ideFiles:openedForms}})},this.fetchRecord=(_ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(recordId,contentType){var searchQuery,result;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return searchQuery=encodeURIComponent('{"where":{"uid":"'+recordId+'"}}'),_context2.next=3,MMFAPI().search(this.state.model2tableMapper[contentType],this.state.model2FieldsMapper[contentType],searchQuery);case 3:result=_context2.sent,this._loadForm(result,contentType);case 5:case"end":return _context2.stop()}},_callee2,this)})),function(_x,_x2){return _ref2.apply(this,arguments)}),this.loadForm=function(searchKey,contentType){var selectedRecord=this.state.searchResults.filter(function(searchObj){return searchObj.uid==searchKey});this._loadForm(selectedRecord,contentType)},this._loadForm=function(records,contentType){var _this14=this,selectedRecord=records&&records.length>0?records[0]:null;if(selectedRecord){var form={};if(contentType){switch(form.fileName=selectedRecord.Name,form.scope=selectedRecord.Scope,form.code=selectedRecord.Definition,form.type=contentType,form.position={lineNumber:1,column:1},contentType){case"model":var definition=selectedRecord.Definition,properties=JSON.parse(definition);properties&&(properties=properties.properties),form.code=JSON.stringify(properties,null,"\t"),form.file_id=selectedRecord.uid;break;case"component":form.component_type=selectedRecord.Type,form.componentVersion=selectedRecord.Version,form.css=selectedRecord.CSS?selectedRecord.CSS:"/* add css styles to the component */",form.html=selectedRecord.HTML?selectedRecord.HTML:"\x3c!-- add html code to be injected when rendering the component --\x3e",form.file_id=selectedRecord.uid;break;case"style":form.style_type=selectedRecord.Type,form.code=selectedRecord.Styles?selectedRecord.Styles:"\x3c!-- add html code to be injected when rendering the component --\x3e",form.file_id=selectedRecord.uid;break;case"page":form.pagePath=selectedRecord.Path,form.css=selectedRecord.CSS?selectedRecord.CSS:"/* add css styles to the component */",form.code=selectedRecord.HTML?selectedRecord.HTML.replace(/\[QUOTE\]/g,'\\"'):"\x3c!-- add html code to be injected when rendering the component --\x3e",form.file_id=selectedRecord.uid;break;case"restmethod":form.relativePath=selectedRecord.Path,form.file_id=selectedRecord.uid,form.collection=selectedRecord.Collection,form.is_public=selectedRecord.is_public;break;case"import_export":form.fileName=selectedRecord.Name,form.order=selectedRecord.Order,form.active="true"==selectedRecord.Active,form.Table=selectedRecord.Table,form.Field=selectedRecord.Field,form.level=selectedRecord.Level,form.localPath=selectedRecord.LocalPath,form.ImportScript=selectedRecord.ImportScript?selectedRecord.ImportScript:"",form.ExportScript=selectedRecord.ExportScript?selectedRecord.ExportScript:"",form.ImportCondition=selectedRecord.ImportCondition,form.ExportCondition=selectedRecord.ExportCondition,form.file_id=selectedRecord.uid,form.mode="import";break;case"client_script":case"server_script":case"common_script":form.file_id=selectedRecord.uid;break;case"operation_hook":form.file_id=selectedRecord.uid,form.order=selectedRecord.Order?selectedRecord.Order:0,form.modelId=selectedRecord.Model,form.trigger_type=selectedRecord.Type;var matchingModelId=Object.keys(this.state.modelData.modelIds).filter(function(modelNameKey){return _this14.state.modelData.modelIds[modelNameKey]==form.modelId});form.modelName=matchingModelId&&matchingModelId.length>0?matchingModelId[0]:form.modelId;break;case"resource":form.file_id=selectedRecord.uid,form.content_type=selectedRecord.Type;break;case"widget_action":var widgetName=selectedRecord.Name;widgetName=widgetName.indexOf("@@")>-1?widgetName.split("@@")[0]:widgetName,form.widgetFullName=selectedRecord.Name,form.fileName=widgetName,form.file_id=selectedRecord.uid,form.trigger=selectedRecord.Trigger,form.order=selectedRecord.Order,form.active=selectedRecord.Active;break;case"page_action":form.fileName=selectedRecord.Name,form.file_id=selectedRecord.uid,form.order=selectedRecord.Order,form.active=selectedRecord.Active}this.addFormToTabs(form,!0)}}},this.addFormToTabs=function(formObj,makeItActive){var openedForms=this.state.openedForms,existingForm=openedForms.filter(function(inputFormObj){return inputFormObj.file_id==formObj.file_id&&inputFormObj.type==formObj.type});if(existingForm=existingForm?existingForm[0]:existingForm)openedForms.forEach(function(currentForm){currentForm.file_id==existingForm.file_id?(currentForm.className="contentTabActive",formObj=currentForm):currentForm.className="contentTab"});else{var className=makeItActive?"contentTabActive":"contentTab";openedForms.forEach(function(currentlyOpenedForm){currentlyOpenedForm.className="contentTab"}),formObj.className=className,openedForms.push(formObj)}this.setState({openedForms:openedForms,form:formObj,footerChanger:"form_field"}),this.props.updateStore({updates:{ideFiles:openedForms}})},this.searchChanged=debounce(function(e){var searchString=e&&e.target?e.target.value:"";if(searchString){var searchQuery=encodeURIComponent('{"where":{"'+this.state.model2UniqueNameMapper[this.state.search.ide_type]+'":{"like": "%'+searchString+'%"}}}');switch(this.state.search.ide_type){case"client_script":searchQuery=encodeURIComponent('{"where":{"'+this.state.model2UniqueNameMapper[this.state.search.ide_type]+'":{"like": "%'+searchString+'%"}, "Type": "client"}}');break;case"server_script":searchQuery=encodeURIComponent('{"where":{"'+this.state.model2UniqueNameMapper[this.state.search.ide_type]+'":{"like": "%'+searchString+'%"}, "Type": "server"}}');break;case"common_script":searchQuery=encodeURIComponent('{"where":{"'+this.state.model2UniqueNameMapper[this.state.search.ide_type]+'":{"like": "%'+searchString+'%"}, "Type": "common"}}')}MMFAPI().search(this.state.model2tableMapper[this.state.search.ide_type],this.state.model2FieldsMapper[this.state.search.ide_type],searchQuery,this.searchHandler)}else{var _searchQuery=encodeURIComponent("{}");switch(this.state.search.ide_type){case"client_script":_searchQuery=encodeURIComponent('{"where":{"Type": "client"}}');break;case"server_script":_searchQuery=encodeURIComponent('{"where":{"Type": "server"}}');break;case"common_script":_searchQuery=encodeURIComponent('{"where":{"Type": "common"}}')}MMFAPI().search(this.state.model2tableMapper[this.state.search.ide_type],this.state.model2FieldsMapper[this.state.search.ide_type],_searchQuery,this.searchHandler)}},{trailing:!0,leading:!0}),this.searchHandler=function(results){var searchResults=this.state.searchResults;searchResults=results,this.setState({searchResults:searchResults,searchUpdated:!0})},this.codeChanged=function(newValue,e){var form=this.state.form;if(form.mode)switch(form.mode){case"css":form.css=newValue;break;case"html":form.html=newValue;break;case"js":form.code=newValue;break;case"import":form.ImportScript=newValue;break;case"export":form.ExportScript=newValue}else form.mode="js",form.code=newValue;this.updateActiveForm(form)},this.resizeEditor=function(e){var editor=this.state.editor,derivedWidth=.8*screen.width,derivedHeight=.55*screen.height;editor||(editor={width:derivedWidth,height:derivedHeight,mode:"collapsed",className:"editorNormal"});var screenWidth=screen.width,screenHeight=screen.height;switch(editor.mode){case"collapsed":editor={width:screenWidth,height:screenHeight,mode:"expanded",className:"editorFullScreen"};break;case"expanded":editor={width:derivedWidth,height:derivedHeight,mode:"collapsed",className:"editorNormal"}}this.setState({editor:editor})},this.hookonModelFieldUpdated=function(modelValue){var form=this.state.form;form.modelName=modelValue,form.modelId=this.state.modelData.modelIds[modelValue],this.updateActiveForm(form)},this.componentCodeModeChanged=function(){var form=this.state.form;if(form.mode)switch(form.mode){case"js":form.mode="css";break;case"css":form.mode="js"}else form.mode="css";this.updateActiveForm(form)},this.importExportModeChanged=function(){var form=this.state.form;if(form.mode)switch(form.mode){case"import":form.mode="export";break;case"export":form.mode="import"}else form.mode="import";this.updateActiveForm(form)},this.orderChanged=function(e){var form=this.state.form,newValue=e.target.value;form.order=newValue,this.updateActiveForm(form)},this.contentTypeChanged=function(e){var newValue=e.target.value,form=this.state.form;form.content_type=newValue,this.updateActiveForm(form)}}}.StudioUtil),_export("StudioUtil",StudioUtil),_export("default",StudioUtil)}}}),System.register("component/studio/IdeNavigator/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react/lib/components/UIShell"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SideNav,SideNavMenu,SideNavMenuItem,_IdeNavigator_,IdeNavigator;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReactLibComponentsUIShell){_carbonComponentsReactLibComponentsUIShell.Content,SideNav=_carbonComponentsReactLibComponentsUIShell.SideNav,_carbonComponentsReactLibComponentsUIShell.SideNavItems,_carbonComponentsReactLibComponentsUIShell.SideNavLink,SideNavMenu=_carbonComponentsReactLibComponentsUIShell.SideNavMenu,SideNavMenuItem=_carbonComponentsReactLibComponentsUIShell.SideNavMenuItem}],execute:function(){_IdeNavigator_=function(_React$Component){function _IdeNavigator_(props){_classCallCheck(this,_IdeNavigator_);var _this=_possibleConstructorReturn(this,(_IdeNavigator_.__proto__||Object.getPrototypeOf(_IdeNavigator_)).call(this,props));return _this.handleClick=_this.handleClick.bind(_this),_this}return _inherits(_IdeNavigator_,_React$Component),_createClass(_IdeNavigator_,[{key:"transformData",value:function(data){var transformedData={};return data&&data.children&&Object.keys(data.children).map(function(itemsPerScope){transformedData[data.children[itemsPerScope].name]=transformedData[data.children[itemsPerScope].name]||[],data.children[itemsPerScope].children&&data.children[itemsPerScope].children.map(function(scopedItem){transformedData[data.children[itemsPerScope].name].push({id:scopedItem.id,name:scopedItem.name})})}),transformedData}},{key:"handleClick",value:function(e){var recordId=e.target.id?e.target.id:e.target.parentNode.id;this.props.postToggle({id:recordId})}},{key:"render",value:function(){var _this2=this,data=this.transformData(this.props.data),slideNavMenus=[];return Object.keys(data).map(function(scopeKey){var navMenuItems=[];data[scopeKey]&&data[scopeKey].map(function(navMenuItem){navMenuItems.push(React.createElement(SideNavMenuItem,{key:navMenuItem.id,id:navMenuItem.id,onClick:_this2.handleClick,href:"javascript:void(0)"},navMenuItem.name))}),slideNavMenus.push(React.createElement(SideNavMenu,{title:scopeKey},navMenuItems))}),React.createElement("div",null,React.createElement(SideNav,{expanded:!0,isChildOfHeader:!1,"aria-label":"Side navigation"},slideNavMenus))}}]),_IdeNavigator_}(React.Component),_export("IdeNavigator",IdeNavigator=function(props){return _IdeNavigator_}),_export("IdeNavigator",IdeNavigator)}}}),System.register("component/studio/IdeActionMapper/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewAction/Definition.js","client/script/mmf/DesignerConstants.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Search20,Edit20,GraphQLDataUtil,DESIGNER_CONST,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeActionMapper,IdeActionMapper;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibClose){_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewActionDefinitionJs){_componentMmfNewActionDefinitionJs.NewAction},function(_clientScriptMmfDesignerConstantsJs){DESIGNER_CONST=_clientScriptMmfDesignerConstantsJs.DESIGNER_CONST}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeActionMapper=function(_React$Component){function _IdeActionMapper(props){_classCallCheck(this,_IdeActionMapper);var _this=_possibleConstructorReturn(this,(_IdeActionMapper.__proto__||Object.getPrototypeOf(_IdeActionMapper)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],fileId:_this.props.compDetails?_this.props.compDetails.file_id:"-1",fileName:_this.props.compDetails?_this.props.compDetails.fileName:"",rowInfo:null,showPreview:!1,reload:!1,newActionKey:Date.now()},$ele.registerElement("NewAction","mmf","React"),_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_IdeActionMapper,_React$Component),_createClass(_IdeActionMapper,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"componentDidUpdate",value:function(prevProps,prevState){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_actions"==this.props.previewTarget&&(this.createRows(),this.setState({showPreview:!0,reload:!this.state.reload})),prevProps.compDetails&&prevProps.compDetails.file_id!==this.state.fileId&&this.createRows()}},{key:"createRows",value:function(){var self=this;GraphQLDataUtil().getRecord(DESIGNER_CONST.GET_META_COMPONENT_ACTION_BY_ID,{ActionComponent:this.state.fileId}).then(function(instances){if(instances&&instances.length>0){for(var initHead=instances[0].node,headers=Object.keys(initHead).map(function(key){return{key:key,header:key}}),rows=[],tabIn=0;tabIn<instances.length;tabIn++){var tableRow=instances[tabIn].node;tableRow.id=tabIn,rows.push(tableRow)}self.setState({headers:headers,rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"clearAll",value:function(){var checked=this.state.checked;this.state.rows.forEach(function(row,index){checked[index]=!!checked[index]&&!checked[index]}),this.setState({checked:checked,selectAll:!1})}},{key:"getCheckedItems",value:function(){var checkedItems=0;return this.state.checked.forEach(function(entry){entry&&checkedItems++}),checkedItems}},{key:"searchTable",value:function(evt){var newRows=[];this.state.rows.map(function(obj){Object.keys(obj).forEach(function(key){obj[key].toUpperCase().includes(evt.currentTarget.value.toUpperCase())&&!newRows.includes(obj)&&newRows.push(obj)})}),this.setState({filteredRows:newRows})}},{key:"showPreview",value:function(rowData){var rowInfo={};rowData&&rowData.cells&&rowData.cells.length>0&&rowData.cells.forEach(function(cell){var key=cell&&cell.id&&cell.id.split(":")[1];rowInfo[key]=cell.value}),this.setState({rowInfo:rowInfo,showPreview:!0,newActionKey:Date.now()}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"render",value:function(){var _this3=this,self=this,recordData=this.state.rowInfo?JSON.stringify(this.state.rowInfo):null,preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_actions"},React.createElement("new-action",{key:this.state.newActionKey,inline:this.props.inline,record:recordData,component_id:this.state.fileId,component_name:this.state.fileName,lite:!0})):React.createElement("div",null);return React.createElement("div",{className:"ide-action-mapper"},preview,React.createElement("style",null,'@import url("component/studio/IdeActionMapper/Style.css");'),React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails&&props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeActionMapper}(React.Component),_export("IdeActionMapper",IdeActionMapper=function(props){return _IdeActionMapper}),_export("IdeActionMapper",IdeActionMapper)}}}),System.register("component/studio/IdeConsole/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_IdeConsole,IdeConsole;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_IdeConsole=function(_React$Component){function _IdeConsole(){return _classCallCheck(this,_IdeConsole),_possibleConstructorReturn(this,(_IdeConsole.__proto__||Object.getPrototypeOf(_IdeConsole)).apply(this,arguments))}return _inherits(_IdeConsole,_React$Component),_createClass(_IdeConsole,[{key:"render",value:function(){return React.createElement("div",{className:"ide-console"},React.createElement("span",null,"IdeConsole goes here..."))}}]),_IdeConsole}(React.Component),_export("IdeConsole",IdeConsole=function(props){return _IdeConsole}),_export("IdeConsole",IdeConsole)}}}),System.register("component/studio/IdeDependency/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewRouteRequires/Definition.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Edit20,Search20,Close32,GraphQLDataUtil,ErrorBoundary,NewRouteRequires,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeDependency,IdeDependency;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewRouteRequiresDefinitionJs){NewRouteRequires=_componentMmfNewRouteRequiresDefinitionJs.NewRouteRequires}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeDependency=function(_React$Component){function _IdeDependency(props){_classCallCheck(this,_IdeDependency);var _this=_possibleConstructorReturn(this,(_IdeDependency.__proto__||Object.getPrototypeOf(_IdeDependency)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],reload:!1,newStateKey:Date.now()},_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.state.showPreview=!1,_this.state.fileId=_this.props.compDetails.file_id,_this.state.fileName=_this.props.compDetails.fileName,_this.state.rowInfo=null,$ele.registerElement("NewRouteRequires","mmf","React"),_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_IdeDependency,_React$Component),_createClass(_IdeDependency,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_deps"==this.props.previewTarget&&this.setState({showPreview:!0,reload:!this.state.reload}),prevProps.reload==this.props.reload&&prevProps.compDetails.file_id===this.props.compDetails.file_id||this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var self=this;GraphQLDataUtil().getRecord("mmf.getMetaRouteRequiresByRoute",{Router:this.state.fileId}).then(function(instances){if(instances&&instances.length>0){for(var rows=[],tabIn=0;tabIn<instances.length;tabIn++){var instance=instances[tabIn].node,tableRow={};tableRow.id=tabIn,tableRow.RequiredComponent=instance.requiredComponent.Name,tableRow.RequiredComponentId=instance.RequiredComponent,tableRow.Order=instance.Order,tableRow.uid=instance.uid,tableRow.Router=instance.Router,rows.push(tableRow)}self.setState({headers:[{key:"RequiredComponent",header:"RequiredComponent"},{key:"Order",header:"Order"}],rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"getComponentToRender",value:function(){var NewRouteReqComp=NewRouteRequires();return React.createElement("div",{className:"previewPane"},React.createElement(NewRouteReqComp,{routeId:this.state.fileId,routeName:this.state.fileName,isFromStateMapper:!0,rowInfo:this.state.rowInfo}))}},{key:"getPreviewPane",value:function(){var newRouteComp=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(newRouteComp);return React.createElement("div",null,React.createElement("div",{className:"screenOverlay"}),React.createElement(Close32,{className:"cancelPreview",onClick:this.cancelPreview.bind(this)}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.setState({showPreview:!1})}},{key:"showPreview",value:function(rowId){var rowInfo=this.state.rows.filter(function(rowItem){return rowItem.id==rowId});rowInfo=rowInfo&&rowInfo.length>0?rowInfo[0]:null,this.setState({showPreview:!0,rowInfo:rowInfo}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"clearAll",value:function(){var checked=this.state.checked;this.state.rows.forEach(function(row,index){checked[index]=!!checked[index]&&!checked[index]}),this.setState({checked:checked,selectAll:!1})}},{key:"getCheckedItems",value:function(){var checkedItems=0;return this.state.checked.forEach(function(entry){entry&&checkedItems++}),checkedItems}},{key:"searchTable",value:function(evt){var newRows=[];this.state.rows.map(function(obj){Object.keys(obj).forEach(function(key){obj[key].toUpperCase().includes(evt.currentTarget.value.toUpperCase())&&!newRows.includes(obj)&&newRows.push(obj)})}),this.setState({filteredRows:newRows})}},{key:"batchActionClick",value:function(){}},{key:"render",value:function(){var _this3=this,recordData=(this.getCheckedItems(),this.state.rowInfo?JSON.stringify({uid:this.state.rowInfo.uid,component_id:this.state.rowInfo.RequiredComponentId,order:this.state.rowInfo.Order}):null),preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_deps"},React.createElement("new-route-requires",{record:recordData,route_id:this.state.fileId,route_name:this.state.fileName})):React.createElement("div",null),self=this;return React.createElement("div",{className:"ide-state-mapper"},React.createElement("style",null,'@import url("component/studio/IdeDependency/Style.css");'),this.state.showPreview?preview:null,React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row.id)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeDependency}(React.Component),_export("IdeDependency",IdeDependency=function(props){return _IdeDependency}),_export("IdeDependency",IdeDependency)}}}),System.register("component/studio/IdeFormFields/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_IdeFormFields,IdeFormFields;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,_carbonComponentsReact.TextInput}],execute:function(){_IdeFormFields=function(_React$Component){function _IdeFormFields(){return _classCallCheck(this,_IdeFormFields),_possibleConstructorReturn(this,(_IdeFormFields.__proto__||Object.getPrototypeOf(_IdeFormFields)).apply(this,arguments))}return _inherits(_IdeFormFields,_React$Component),_createClass(_IdeFormFields,[{key:"render",value:function(){var groupParentStyle={display:"block",width:"100vw",float:"left",marginBottom:10},groupElementStyle={marginRight:30,width:"20vw",display:"inline-block",float:"left"},groupedItems={},fieldResult=[],formFields=this.props.form&&this.props.form.formFields?this.props.form.formFields:[],fieldCount=0;return[formFields.fileType,formFields.fileName,formFields.scope,formFields.pagePath,formFields.componentType,formFields.styleType,formFields.componentVersion,formFields.hookOnModelField,formFields.content_type,formFields.triggerTypeField,formFields.hookSequenceField,formFields.importFromModel,formFields.importOnModelField,formFields.importExportOrder,formFields.localPathField,formFields.importExportLevel,formFields.importExportActive,formFields.importConditionField,formFields.exportConditionField,formFields.widgetTrigger,formFields.widgetOrder,formFields.widgetActive,formFields.widgetUpdateType,formFields.widgetUpdateTarget,formFields.pageActionActive,formFields.pageActionOrder,formFields.relativePath,formFields.methodType,formFields.methodCollection,formFields.isPublic].map(function(field,indx){if(field){var group=parseInt(fieldCount/4);groupedItems[group]=groupedItems[group]||[],groupedItems[group].push(React.createElement("div",{style:groupElementStyle},field)),fieldCount++}}),Object.keys(groupedItems).length>0&&Object.keys(groupedItems).map(function(groupItemKey,indx){var fieldGroup=React.createElement("div",{style:groupParentStyle},groupedItems[groupItemKey]);fieldResult.push(fieldGroup)}),React.createElement("div",{className:"footerContents"},React.createElement("style",null,'@import url("component/studio/IdeFormFields/Style.css");'),fieldResult)}}]),_IdeFormFields}(React.Component),_export("IdeFormFields",IdeFormFields=function(props){return _IdeFormFields}),_export("IdeFormFields",IdeFormFields)}}}),System.register("component/studio/IdeStateMapper/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewState/Definition.js","client/script/mmf/DesignerConstants.js","component/studio/IdeStateMapper/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Edit20,Search20,Close32,GraphQLDataUtil,ErrorBoundary,NewState,DESIGNER_CONST,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeStateMapper,IdeStateMapper;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewStateDefinitionJs){NewState=_componentMmfNewStateDefinitionJs.NewState},function(_clientScriptMmfDesignerConstantsJs){DESIGNER_CONST=_clientScriptMmfDesignerConstantsJs.DESIGNER_CONST},function(_componentStudioIdeStateMapperStyleCssCss){}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeStateMapper=function(_React$Component){function _IdeStateMapper(props){_classCallCheck(this,_IdeStateMapper);var _this=_possibleConstructorReturn(this,(_IdeStateMapper.__proto__||Object.getPrototypeOf(_IdeStateMapper)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],reload:!1,newStateKey:Date.now()},_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.state.showPreview=!1,_this.state.fileId=_this.props.compDetails.file_id,_this.state.fileName=_this.props.compDetails.fileName,_this.state.rowInfo=null,_this.createRows=_this.createRows.bind(_this),$ele.registerElement("NewState","mmf","React"),_this}return _inherits(_IdeStateMapper,_React$Component),_createClass(_IdeStateMapper,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_state"==this.props.previewTarget&&this.setState({showPreview:!1,reload:!this.state.reload}),prevProps.reload==this.props.reload&&prevProps.compDetails.file_id===this.props.compDetails.file_id||this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var self=this;GraphQLDataUtil().getRecord(DESIGNER_CONST.GET_META_COMPONENT_STATE_BY_ID,{StateComponent:this.state.fileId}).then(function(instances){if(instances&&instances.length>0){for(var initHead=instances[0].node,headers=Object.keys(initHead).map(function(key){return{key:key,header:key}}),rows=[],tabIn=0;tabIn<instances.length;tabIn++){var tableRow=instances[tabIn].node;tableRow.id=tabIn,rows.push(tableRow)}self.setState({headers:headers,rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"getComponentToRender",value:function(){var NewStateComp=NewState();return React.createElement("div",{className:"previewPane"},React.createElement(NewStateComp,{inline:this.props.inline,component_id:this.state.fileId,componentName:this.state.fileName,isFromStateMapper:!0,rowInfo:this.state.rowInfo}))}},{key:"getPreviewPane",value:function(){var newStateComp=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(newStateComp);return previewComponent=React.createElement("preview-component",null,React.createElement("new-state",{key:this.state.newStateKey,inline:this.props.inline,component_id:this.state.fileId,component_name:this.state.fileName,lite:!0})),React.createElement("div",null,React.createElement("div",{className:"screenOverlay"}),React.createElement(Close32,{className:"cancelPreview",onClick:this.cancelPreview.bind(this)}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.setState({showPreview:!1})}},{key:"showPreview",value:function(rowData){var rowInfo={};rowData&&rowData.cells&&rowData.cells.length>0&&rowData.cells.forEach(function(cell){var key=cell&&cell.id&&cell.id.split(":")[1];rowInfo[key]=cell.value}),this.setState({showPreview:!0,rowInfo:rowInfo,newStateKey:Date.now()}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"clearAll",value:function(){var checked=this.state.checked;this.state.rows.forEach(function(row,index){checked[index]=!!checked[index]&&!checked[index]}),this.setState({checked:checked,selectAll:!1})}},{key:"getCheckedItems",value:function(){var checkedItems=0;return this.state.checked.forEach(function(entry){entry&&checkedItems++}),checkedItems}},{key:"searchTable",value:function(evt){var newRows=[];this.state.rows.map(function(obj){Object.keys(obj).forEach(function(key){obj[key].toUpperCase().includes(evt.currentTarget.value.toUpperCase())&&!newRows.includes(obj)&&newRows.push(obj)})}),this.setState({filteredRows:newRows})}},{key:"batchActionClick",value:function(){}},{key:"render",value:function(){var _this3=this,recordData=(this.getCheckedItems(),this.state.rowInfo?JSON.stringify(this.state.rowInfo):null),preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_state"},React.createElement("new-state",{key:this.state.newStateKey,inline:this.props.inline,record:recordData,component_id:this.state.fileId,component_name:this.state.fileName})):React.createElement("div",null),self=this;return React.createElement("div",{className:"ide-state-mapper"},React.createElement("style",null,'@import url("component/studio/IdeStateMapper/Style.css");'),preview,React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeStateMapper}(React.Component),_export("IdeStateMapper",IdeStateMapper=function(props){return _IdeStateMapper}),_export("IdeStateMapper",IdeStateMapper)}}}),System.register("component/studio/IdeValidation/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_IdeValidation,IdeValidation;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_IdeValidation=function(_React$Component){function _IdeValidation(){return _classCallCheck(this,_IdeValidation),_possibleConstructorReturn(this,(_IdeValidation.__proto__||Object.getPrototypeOf(_IdeValidation)).apply(this,arguments))}return _inherits(_IdeValidation,_React$Component),_createClass(_IdeValidation,[{key:"render",value:function(){return React.createElement("div",{className:"ide-validator"},React.createElement("span",null,"IdeValidation goes here..."))}}]),_IdeValidation}(React.Component),_export("IdeValidation",IdeValidation=function(props){return _IdeValidation}),_export("IdeValidation",IdeValidation)}}}),System.register("component/studio/ErrorBoundary/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/ErrorBoundary/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ErrorBoundary,catchFunc;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default,_react.Component},function(_componentStudioErrorBoundaryStyleCssCss){}],execute:function(){_export("ErrorBoundary",ErrorBoundary=function(WrappedComponent){return function(_React$Component){function ErrorBoundaryComp(props){_classCallCheck(this,ErrorBoundaryComp);var _this=_possibleConstructorReturn(this,(ErrorBoundaryComp.__proto__||Object.getPrototypeOf(ErrorBoundaryComp)).call(this,props));return _this.state={error:null,errorInfo:null,hasError:null},_this}return _inherits(ErrorBoundaryComp,_React$Component),_createClass(ErrorBoundaryComp,[{key:"componentDidCatch",value:function(error,errorInfo){catchFunc(error,errorInfo,this)}},{key:"render",value:function(){return this.state.errorInfo?React.createElement("div",{className:"ErrorPane"},React.createElement("style",null,'@import url("component/studio/ErrorBoundary/Style.css");'),React.createElement("h2",null,"Oops!! Something went wrong."),React.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),React.createElement("br",null),this.state.errorInfo.componentStack)):WrappedComponent}}],[{key:"getDerivedStateFromError",value:function(error){return{hasError:!0,error:error.name,errorInfo:error.stack}}}]),ErrorBoundaryComp}(React.Component)}),catchFunc=function(error,errorInfo,ctx){ctx.setState({error:error,errorInfo:errorInfo})},_export("ErrorBoundary",ErrorBoundary)}}}),System.register("component/studio/IdeProps/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewComponentProp/Definition.js","client/script/mmf/DesignerConstants.js","component/studio/IdeStateMapper/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Edit20,Search20,Close32,GraphQLDataUtil,ErrorBoundary,NewComponentProp,DESIGNER_CONST,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeProps_,IdeProps;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewComponentPropDefinitionJs){NewComponentProp=_componentMmfNewComponentPropDefinitionJs.NewComponentProp},function(_clientScriptMmfDesignerConstantsJs){DESIGNER_CONST=_clientScriptMmfDesignerConstantsJs.DESIGNER_CONST},function(_componentStudioIdeStateMapperStyleCssCss){}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeProps_=function(_React$Component){function _IdeProps_(props){_classCallCheck(this,_IdeProps_);var _this=_possibleConstructorReturn(this,(_IdeProps_.__proto__||Object.getPrototypeOf(_IdeProps_)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],reload:!1,newPropsKey:Date.now()},_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.state.showPreview=!1,_this.state.fileId=_this.props.compDetails.file_id,_this.state.fileName=_this.props.compDetails.fileName,_this.state.rowInfo=null,$ele.registerElement("NewComponentProp","mmf","React"),_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_IdeProps_,_React$Component),_createClass(_IdeProps_,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_props"==this.props.previewTarget&&(this.createRows(),this.setState({showPreview:!0,reload:!this.state.reload})),prevProps.reload==this.props.reload&&prevProps.compDetails.file_id===this.props.compDetails.file_id||this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var self=this,componentId=this.state.fileId?this.state.fileId:"";GraphQLDataUtil().getRecord(DESIGNER_CONST.GET_META_COMPONENT_PROP_BY_ID,{componentId:componentId}).then(function(instances){if(instances&&instances.length>0){for(var initHead=instances[0].node,headers=Object.keys(initHead).map(function(key){return{key:key,header:key}}),rows=[],tabIn=0;tabIn<instances.length;tabIn++){var tableRow=instances[tabIn].node;tableRow.id=tabIn,rows.push(tableRow)}var rowsWithZeroOrder=(rows=rows.sort(function(a,b){return a.Order?b.Order?a.Order-b.Order:-1:b.Order?1:-1})).filter(function(row){return 0==row.Order});rows=rows.filter(function(row){return 0!=row.Order}),rows=rowsWithZeroOrder.concat(rows),self.setState({headers:headers,rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"getComponentToRender",value:function(){var NewCompProp=NewComponentProp();return React.createElement("div",{className:"previewPane"},React.createElement(NewCompProp,{key:this.state.newPropsKey,inline:this.props.inline,componentId:this.state.fileId,componentName:this.state.fileName,record:this.state.rowInfo}))}},{key:"getPreviewPane",value:function(){var newStateComp=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(newStateComp);return React.createElement("div",null,React.createElement("div",{className:"screenOverlay"}),React.createElement(Close32,{className:"cancelPreview",onClick:this.cancelPreview.bind(this)}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.setState({showPreview:!1})}},{key:"showPreview",value:function(rowData){var rowInfo={};rowData&&rowData.cells&&rowData.cells.length>0&&rowData.cells.forEach(function(cell){var key=cell&&cell.id&&cell.id.split(":")[1];rowInfo[key]=cell.value}),this.setState({showPreview:!0,rowInfo:rowInfo,newPropsKey:Date.now()}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"render",value:function(){var _this3=this,recordData=this.state.rowInfo?JSON.stringify(this.state.rowInfo):null,preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_props"},React.createElement("new-component-prop",{key:this.state.newPropsKey,inline:this.props.inline,record:recordData,component_id:this.state.fileId,component_name:this.state.fileName})):React.createElement("div",null),self=this;return React.createElement("div",{className:"ide-state-mapper"},React.createElement("style",null,'@import url("component/studio/IdeStateMapper/Style.css");'),preview,React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeProps_}(React.Component),_export("IdeProps",IdeProps=function(props){return _IdeProps_}),_export("IdeProps",IdeProps)}}}),System.register("client/script/studio/StudioFormUtil.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/close/32","@carbon/icons-react/lib/menu/16","component/studio/IdeNavigator/Definition.js","component/studio/ErrorBoundary/Definition.js","component/studio/IdeActionMapper/Definition.js","component/studio/IdeConsole/Definition.js","component/studio/IdeDependency/Definition.js","component/studio/IdeFormFields/Definition.js","component/studio/IdeStateMapper/Definition.js","component/studio/IdeValidation/Definition.js","component/studio/IdeProps/Definition.js"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,TextInput,OverflowMenu,OverflowMenuItem,Tabs,Tab,Checkbox,Close64,Menu16,IdeNavigator,ErrorBoundary,IdeActionMapper,IdeConsole,IdeDependency,IdeFormFields,IdeStateMapper,IdeValidation,IdeProps,studio,StudioFormUtil;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,_carbonComponentsReact.ComboBox,TextInput=_carbonComponentsReact.TextInput,OverflowMenu=_carbonComponentsReact.OverflowMenu,OverflowMenuItem=_carbonComponentsReact.OverflowMenuItem,Tabs=_carbonComponentsReact.Tabs,Tab=_carbonComponentsReact.Tab,Checkbox=_carbonComponentsReact.Checkbox},function(_carbonIconsReactLibClose){Close64=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibMenu){Menu16=_carbonIconsReactLibMenu.default},function(_componentStudioIdeNavigatorDefinitionJs){IdeNavigator=_componentStudioIdeNavigatorDefinitionJs.IdeNavigator},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentStudioIdeActionMapperDefinitionJs){IdeActionMapper=_componentStudioIdeActionMapperDefinitionJs.IdeActionMapper},function(_componentStudioIdeConsoleDefinitionJs){IdeConsole=_componentStudioIdeConsoleDefinitionJs.IdeConsole},function(_componentStudioIdeDependencyDefinitionJs){IdeDependency=_componentStudioIdeDependencyDefinitionJs.IdeDependency},function(_componentStudioIdeFormFieldsDefinitionJs){IdeFormFields=_componentStudioIdeFormFieldsDefinitionJs.IdeFormFields},function(_componentStudioIdeStateMapperDefinitionJs){IdeStateMapper=_componentStudioIdeStateMapperDefinitionJs.IdeStateMapper},function(_componentStudioIdeValidationDefinitionJs){IdeValidation=_componentStudioIdeValidationDefinitionJs.IdeValidation},function(_componentStudioIdePropsDefinitionJs){IdeProps=_componentStudioIdePropsDefinitionJs.IdeProps}],execute:function(){studio={SearchScopeHeader:function(_React$Component){function SearchScopeHeader(){return _classCallCheck(this,SearchScopeHeader),_possibleConstructorReturn(this,(SearchScopeHeader.__proto__||Object.getPrototypeOf(SearchScopeHeader)).apply(this,arguments))}return _inherits(SearchScopeHeader,_React$Component),_createClass(SearchScopeHeader,[{key:"render",value:function(){return React.createElement("div",{className:"searchScopeHeader"},this.props.value)}}]),SearchScopeHeader}(React.Component),StudioFormUtil:function(){var self=this;this.getFormFields=function(){var _this2=this,resultForm={};switch(resultForm.fileType=React.createElement(Select,{onChange:this.fileTypeUpdated,label:"File Type",value:this.state.form.type,defaultValue:"none",required:"required",className:"sr-carb-sele"},React.createElement(SelectItem,{value:"none",text:"Choose File Type"}),React.createElement(SelectItem,{value:"page",text:"Page"}),React.createElement(SelectItem,{value:"restmethod",text:"Rest Method"}),React.createElement(SelectItem,{value:"component",text:"Component"}),React.createElement(SelectItem,{value:"style",text:"Styles"}),React.createElement(SelectItem,{value:"client_script",text:"Client Scripts"}),React.createElement(SelectItem,{value:"server_script",text:"Server Scripts"}),React.createElement(SelectItem,{value:"common_script",text:"Common Scripts"}),React.createElement(SelectItem,{value:"model",text:"Model"}),React.createElement(SelectItem,{value:"operation_hook",text:"Operation Hook"}),React.createElement(SelectItem,{value:"resource",text:"Resources"}),React.createElement(SelectItem,{value:"template",text:"Rendering Templates"}),React.createElement(SelectItem,{value:"import_export",text:"Import Export"}),React.createElement(SelectItem,{value:"widget_action",text:"Widget Action"}),React.createElement(SelectItem,{value:"page_action",text:"Page Action"})),resultForm.fileName=React.createElement(TextInput,{placeholder:"Enter File Name...",labelText:"File Name",defaultValue:"Unnamed",value:this.state.form.fileName,onChange:this.fileNameChanged,required:"required"}),resultForm.scope=React.createElement(TextInput,{placeholder:"Enter the Scope...",labelText:"Scope",value:this.state.form.scope,onChange:this.scopeChanged,required:"required"}),this.state.form.type){case"component":resultForm.componentType=React.createElement(Select,{label:"Type",onChange:this.componentTypeUpdated,value:this.state.form.component_type,required:"required",className:"sr-carb-sele"},React.createElement(SelectItem,{value:"",text:"None"}),React.createElement(SelectItem,{value:"React",text:"React"}),React.createElement(SelectItem,{value:"Snabbdom",text:"Snabbdom"}),React.createElement(SelectItem,{value:"Vue",text:"Vue"})),resultForm.componentVersion=React.createElement(TextInput,{placeholder:"Version Number",labelText:"Version #",value:this.state.form.componentVersion,onChange:this.componentVersionChanged});break;case"page":resultForm.pagePath=React.createElement(TextInput,{placeholder:"Page Path...",labelText:"Page Path",value:this.state.form.pagePath,onChange:this.pagePathChanged,required:"required"});break;case"restmethod":resultForm.relativePath=React.createElement(TextInput,{placeholder:"Relative Path...",labelText:"Relative Path",value:this.state.form.relativePath,onChange:this.relativePathChanged,required:"required"}),resultForm.methodType=React.createElement("div",{className:"bx--form-item"},React.createElement(Select,{labelText:"Method Type",value:this.state.form.method_type,required:"required",className:"sr-carb-sele",onChange:function(e){var value=e.target.value,form=_this2.state.form;form.method_type=value,_this2.setState({form:form})}},React.createElement(SelectItem,{value:"GET",text:"GET"}),React.createElement(SelectItem,{value:"POST",text:"POST"}),React.createElement(SelectItem,{value:"PUT",text:"PUT"}),React.createElement(SelectItem,{value:"PATCH",text:"PATCH"}),React.createElement(SelectItem,{value:"DELETE",text:"DELETE"}))),resultForm.methodCollection=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Collection",labelText:"Collection",value:this.state.form.collection,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.collection=value,_this2.setState({form:form})}}));var isPublicProps={};this.state.form.is_public&&(isPublicProps.checked=!0),resultForm.isPublic=React.createElement("div",{className:"bx--form-item"},React.createElement(Checkbox,_extends({labelText:"Is Public",id:"sr-check-bx",onChange:function(value){var form=_this2.state.form;form.is_public=value,_this2.setState({form:form})}},isPublicProps)));break;case"widget_action":var widgetActiveProps={};this.state.form.active&&(widgetActiveProps.checked=!0),resultForm.widgetTrigger=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Trigger",labelText:"Trigger",value:this.state.form.trigger,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.trigger=value,_this2.setState({form:form})},required:"required"})),resultForm.widgetActive=React.createElement("div",{className:"bx--form-item"},React.createElement(Checkbox,_extends({labelText:"Active",id:"sr-check-bx",onChange:function(value){var form=_this2.state.form;form.active=value,_this2.setState({form:form})}},widgetActiveProps))),resultForm.widgetUpdateType=React.createElement("div",{className:"bx--form-item"},React.createElement(Select,{labelText:"Update Type",value:this.state.form.update_type,required:"required",className:"sr-carb-sele",onChange:function(e){var value=e.target.value,form=_this2.state.form;form.update_type=value,_this2.setState({form:form})}},React.createElement(SelectItem,{value:"Current",text:"Current"}),React.createElement(SelectItem,{value:"Ancestor",text:"Ancestor"}))),resultForm.widgetUpdateTarget="Current"!=this.state.form.update_type?React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Update Target",labelText:"Update Target",value:this.state.form.update_target,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.update_target=value,_this2.setState({form:form})}})):null,resultForm.scope=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Scope",labelText:"Scope",value:this.state.form.scope,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.scope=value,_this2.setState({form:form})},required:"required"})),resultForm.widgetOrder=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Order",labelText:"Order",value:this.state.form.order,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.order=value,_this2.setState({form:form})},required:"required"}));break;case"page_action":var pageActiveProps={};this.state.form.active&&(pageActiveProps.checked=!0),resultForm.pageActionActive=React.createElement("div",{className:"bx--form-item"},React.createElement(Checkbox,_extends({labelText:"Active",id:"sr-check-bx",onChange:function(value){var form=_this2.state.form;form.active=value,_this2.setState({form:form})}},pageActiveProps))),resultForm.scope=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Scope",labelText:"Scope",value:this.state.form.scope,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.scope=value,_this2.setState({form:form})},required:"required"})),resultForm.pageActionOrder=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Order",labelText:"Order",value:this.state.form.order,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.order=value,_this2.setState({form:form})},required:"required"}));break;case"style":resultForm.styleType=React.createElement("div",{className:"bx--form-item"},React.createElement(Select,{onChange:this.styleTypeUpdated,labelText:"Style Type",value:this.state.form.style_type,required:"required",className:"sr-carb-sele"},React.createElement(SelectItem,{value:"css",text:"CSS"}),React.createElement(SelectItem,{value:"scss",text:"SCSS"})));break;case"import_export":resultForm.scope=null;var modelForImportItems=this.state.allModelData.allModelsForLookup,checkboxProps={};this.state.form.active&&(checkboxProps.checked=!0),modelForImportItems||this.getAllModels(this.refreshAllModels.bind(this));var modelForImportSelectItems=[];modelForImportItems&&modelForImportItems.map(function(modelItem){return modelForImportSelectItems.push(React.createElement(SelectItem,{value:modelItem.id,text:modelItem.text}))});var firstImportItem=modelForImportItems&&modelForImportItems.length>0?modelForImportItems[0].text:"";resultForm.importFromModel=React.createElement("div",{className:"bx--form-item"},React.createElement(Select,{labelText:"Model",onChange:function(e){var value=e.target.value,form=_this2.state.form;form.Table=value,_this2.setState({form:form})},value:this.state.form.Table,id:"selectfield",defaultValue:firstImportItem},modelForImportSelectItems)),resultForm.importOnModelField=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Model Field...",labelText:"Model Field",value:this.state.form.Field,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.Field=value,_this2.setState({form:form})},required:"required"})),resultForm.importExportOrder=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Order",labelText:"Order",value:this.state.form.order,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.order=value,_this2.setState({form:form})},required:"required"})),resultForm.localPathField=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"File Path...",labelText:"Filepath Pattern",value:this.state.form.localPath,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.localPath=value,_this2.setState({form:form})},required:"required"})),resultForm.importExportLevel=React.createElement("div",{className:"bx--form-item"},React.createElement(Select,{label:"Level",onChange:function(e){var value=e.target.value,form=_this2.state.form;form.level=value,_this2.setState({form:form})},value:this.state.form.level,required:"required",className:"sr-carb-sele"},React.createElement(SelectItem,{value:"Table",text:"Table",selected:!0}),React.createElement(SelectItem,{value:"Record",text:"Record"}))),resultForm.importExportActive=React.createElement("div",{className:"bx--form-item"},React.createElement(Checkbox,_extends({labelText:"Active",id:"sr-check-bx",onChange:function(value){var form=_this2.state.form;form.active=value,_this2.setState({form:form})}},checkboxProps))),resultForm.importConditionField=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Import condition...",labelText:"Improt condition",value:this.state.form.ImportCondition,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.ImportCondition=value,_this2.setState({form:form})},required:"required"})),resultForm.exportConditionField=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Export condition...",labelText:"Export condition",value:this.state.form.ExportCondition,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.ExportCondition=value,_this2.setState({form:form})},required:"required"}));break;case"operation_hook":var modelItems=this.state.modelData.modelsForLookup;modelItems||this.getModels(this.refreshModels.bind(this));var modelSelectItems=[];modelItems&&modelItems.map(function(modelItem){return modelSelectItems.push(React.createElement(SelectItem,{value:modelItem.id,text:modelItem.text}))});var firstModelItem=modelItems&&modelItems.length>0?modelItems[0].text:"";resultForm.hookOnModelField=React.createElement("div",{className:"bx--form-item"},React.createElement(Select,{labelText:"Trigger Model",onChange:function(e){var value=e.target.value,form=_this2.state.form;form.modelId=value,_this2.setState({form:form})},value:this.state.form.modelId,id:"selectfield",defaultValue:firstModelItem},modelSelectItems)),resultForm.triggerTypeField=React.createElement("div",{className:"bx--form-item"},React.createElement(Select,{labelText:"Trigger Type",onChange:this.triggerTypeUpdated,value:this.state.form.trigger_type,defaultValue:this.state.defaultTriggerType,required:"required",className:"sr-carb-sele"},React.createElement(SelectItem,{value:"before.save",text:"Before Save"}),React.createElement(SelectItem,{value:"after.save",text:"After Save"}),React.createElement(SelectItem,{value:"before.delete",text:"Before Delete"}),React.createElement(SelectItem,{value:"after.delete",text:"After Delete"}))),resultForm.hookSequenceField=React.createElement(TextInput,{placeholder:"Order...",labelText:"Order",value:this.state.form.order,onChange:this.orderChanged,required:"required"});break;case"resource":resultForm.content_type=React.createElement("div",{className:"bx--form-item"},React.createElement("label",{htmlFor:"select-1",className:"bx--label"},"Trigger Type"),React.createElement("select",{labelText:"Content Type",onChange:this.contentTypeChanged,value:this.state.form.content_type,required:"required",className:"sr-carb-sele"},React.createElement(SelectItem,{value:"xml",text:"XML"}),React.createElement(SelectItem,{value:"csv",text:"CSV"}),React.createElement(SelectItem,{value:"json",text:"JSON"})))}return resultForm},this.getSearchPaneDetails=function(){var scopeBasedResults,NavigatorComp=IdeNavigator();return this.state.searchUpdated?(scopeBasedResults=self.getNavigationResults(this.state.searchResults,this.state.search.ide_type),this.setState({searchTree:scopeBasedResults,searchUpdated:!1})):scopeBasedResults=this.state.searchTree,React.createElement(NavigatorComp,{postToggle:self.onToggle.bind(this),data:scopeBasedResults})},this.onToggle=function(node){node.id&&this.loadForm(node.id,this.state.search.ide_type)},this.getNavigationResults=function(searchItems,searchCategoryType){var results={},topLevelSearchField="Scope";switch(searchCategoryType){case"operation_hook":topLevelSearchField="Model";break;case"import_export":topLevelSearchField="Table";break;case"widget_action":topLevelSearchField="Trigger";break;default:topLevelSearchField="Scope"}var finalResult={name:"Search Results",toggled:!0,children:[]};return searchItems&&(searchItems.forEach(function(searchItem){var topLevelSearchValue=searchItem[topLevelSearchField];"Trigger"==topLevelSearchField&&(topLevelSearchValue=searchItem.Name&&searchItem.Name.indexOf("@@")>-1?searchItem.Name.split("@@")[1]:topLevelSearchValue),results[topLevelSearchValue]||(results[topLevelSearchValue]=[]);var searchObj={id:searchItem.uid,name:searchItem.Name&&searchItem.Name.indexOf("@@")>-1?searchItem.Name.split("@@")[0]:searchItem.Name};results[topLevelSearchValue].push(searchObj)}),Object.keys(results).forEach(function(scopeValue){var searchScopeChildren=results[scopeValue],scopeLevelChildObjects=[];searchScopeChildren&&searchScopeChildren.forEach(function(searchScopeChild){scopeLevelChildObjects.push({id:searchScopeChild.id,name:searchScopeChild.name})});var scopeLevelSearchObj={name:scopeValue,toggled:!1,children:scopeLevelChildObjects};finalResult.children.push(scopeLevelSearchObj)})),finalResult},this.getPreviewContentPane=function(){var previewContent;if(this.state&&this.state.form&&"component"==this.state.form.type&&this.state.form.file_id&&-1!=this.state.form.file_id)if(this.state.showPreview){var ComponentToPreview=ErrorBoundary(this.state.PreviewComponent);previewContent=React.createElement("div",null,React.createElement("div",{className:"screenOverlay"}),React.createElement(Close64,{className:"cancelPreview",onClick:this.cancelPreview}),React.createElement(ComponentToPreview,null))}else previewContent=null;return previewContent},this.getEditorToolKit=function(){var editorViewMode,cssOrJSToggler=void 0,saveFileOption=void 0,showHidePreview=void 0,deleteFile=void 0;if(editorViewMode=React.createElement(OverflowMenuItem,{onClick:this.resizeEditor,itemText:"[+/-]"}),this.state&&this.state.form&&"component"==this.state.form.type&&(cssOrJSToggler=React.createElement(OverflowMenuItem,{onClick:this.componentCodeModeChanged,itemText:"JS/CSS"}),this.state.form.file_id&&-1!=this.state.form.file_id&&(showHidePreview=React.createElement(OverflowMenuItem,{onClick:this.reloadPreview,itemText:"Preview"}))),this.state&&this.state.form&&"import_export"==this.state.form.type){var toggleLabel="import"==this.state.form.mode?"Export":"Import";cssOrJSToggler=React.createElement(OverflowMenuItem,{onClick:this.importExportModeChanged,itemText:toggleLabel})}return this.state&&this.state.form&&this.state.form.file_id&&-1!=this.state.form.file_id&&(deleteFile=React.createElement(OverflowMenuItem,{onClick:this.deleteRecord,itemText:"Delete"})),this.state.form&&this.state.form.fileName&&(this.state.form.scope||"import_export"==this.state.form.type&&(this.state.form.ImportScript||this.state.form.ExportScript)||"widget_action"==this.state.form.type)&&(saveFileOption=React.createElement(OverflowMenuItem,{onClick:this.saveForm,itemText:"Save"})),React.createElement("div",{className:"editorToolkit"},React.createElement(OverflowMenu,{flipped:!0,"data-floating-menu-container":!0,renderIcon:function(){return React.createElement(Menu16,null)}},editorViewMode,cssOrJSToggler,saveFileOption,showHidePreview,deleteFile))},this.getFooterTabs=function(){return React.createElement(Tabs,{className:"footerTabs",selected:"0"},React.createElement(Tab,{className:"footerTab",onClick:this.footerTabChange,type:"form_field",label:"Form Fields"}),this.state.search&&"component"==this.state.search.ide_type||"component"==this.state.form.type?React.createElement(Tab,{className:"footerTab",onClick:this.footerTabChange,type:"state",label:"States"}):null,this.state.search&&"component"==this.state.search.ide_type||"component"==this.state.form.type?React.createElement(Tab,{className:"footerTab",onClick:this.footerTabChange,type:"action",label:"Actions"}):null,this.state.search&&"page"==this.state.search.ide_type||"page"==this.state.form.type?React.createElement(Tab,{className:"footerTab",onClick:this.footerTabChange,type:"dependency",label:"Dependencies"}):null,this.state.search&&"component"==this.state.search.ide_type||"component"==this.state.form.type?React.createElement(Tab,{className:"footerTab",onClick:this.footerTabChange,type:"props",label:"Properties"}):null)},this.getFooterContent=function(isInline){var footerContent="";switch(this.state.footerChanger){case"form_field":var formFields=self.getFormFields.bind(this)(),formProps={};formProps.formFields=formFields,formProps.thisContext=this;var FormFieldComp=IdeFormFields();footerContent=React.createElement(FormFieldComp,{form:formProps,reload:this.state.reload});break;case"console":var ConsoleComp=IdeConsole();footerContent=React.createElement(ConsoleComp,{showPreview:this.state.showWebComponentPreview,updateStore:this.props.updateStore,previewTarget:this.state.showPreviewTarget});break;case"state":var StateComp=IdeStateMapper();footerContent=React.createElement(StateComp,{inline:isInline,compDetails:this.state.form,showPreview:this.state.showWebComponentPreview,updateStore:this.props.updateStore,previewTarget:this.state.showPreviewTarget,reload:this.state.reload});break;case"action":var ActionComp=IdeActionMapper();footerContent=React.createElement(ActionComp,{inline:isInline,compDetails:this.state.form,showPreview:this.state.showWebComponentPreview,updateStore:this.props.updateStore,previewTarget:this.state.showPreviewTarget,reload:this.state.reload});break;case"dependency":var DepComp=IdeDependency();footerContent=React.createElement(DepComp,{inline:isInline,compDetails:this.state.form,showPreview:this.state.showWebComponentPreview,updateStore:this.props.updateStore,previewTarget:this.state.showPreviewTarget,reload:this.state.reload});break;case"validation":var ValidationComp=IdeValidation();footerContent=React.createElement(ValidationComp,{showPreview:this.state.showWebComponentPreview,updateStore:this.props.updateStore,previewTarget:this.state.showPreviewTarget});break;case"props":var PropsComp=IdeProps();footerContent=React.createElement(PropsComp,{inline:isInline,compDetails:this.state.form,showPreview:this.state.showWebComponentPreview,updateStore:this.props.updateStore,previewTarget:this.state.showPreviewTarget,reload:this.state.reload})}return footerContent}}},_export("StudioFormUtil",StudioFormUtil=studio.StudioFormUtil),_export("StudioFormUtil",StudioFormUtil),_export("default",StudioFormUtil)}}}),System.register("component/studio/SrsteeIDE/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/studio/StudioUtil.js","client/script/studio/StudioFormUtil.js","carbon-components-react","@carbon/icons-react/lib/close/20","@carbon/icons-react/lib/add--alt/32","lodash.clonedeep","lodash.debounce"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MonacoEditor,StudioUtil,StudioFormUtil,Select,SelectItem,TextInput,OverflowMenu,OverflowMenuItem,Close20,AddAlt32,cloneDeep,debounce,ideScope,SrsteeIDE;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_clientScriptStudioStudioUtilJs){StudioUtil=_clientScriptStudioStudioUtilJs.StudioUtil},function(_clientScriptStudioStudioFormUtilJs){StudioFormUtil=_clientScriptStudioStudioFormUtilJs.StudioFormUtil},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput,OverflowMenu=_carbonComponentsReact.OverflowMenu,OverflowMenuItem=_carbonComponentsReact.OverflowMenuItem},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibAddAlt){AddAlt32=_carbonIconsReactLibAddAlt.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){history.pushState(null,null,location.href),window.onpopstate=function(){history.go(1)},ideScope={Container:function(_React$Component){function Container(props){_classCallCheck(this,Container);var _this=_possibleConstructorReturn(this,(Container.__proto__||Object.getPrototypeOf(Container)).call(this,props)),studioUtil=new StudioUtil;return studioUtil.bindAllMethods.bind(_this)(),_this.state=studioUtil.getInitialState(),_this.topElement=React.createRef(),_this.studioFormUtil=new StudioFormUtil,_this.editorDidMount=_this.editorDidMount.bind(_this),_this.editor=null,_this.editorModel=null,_this.editorModelViewState=null,_this.activeFileIndex=-1,_this.editorContent=null,_this.restoreEditor=_this.restoreEditor.bind(_this),_this.getModels(_this.refreshModels.bind(_this)),_this.resizeSideBarGrid=_this.resizeSideBarGrid.bind(_this),_this.resizeSideBarGridDebounceFn=debounce(function(){_this.resizeSideBarGrid()}),_this.resizeFooterPaneGrid=_this.resizeFooterPaneGrid.bind(_this),window.addEventListener("resize",self.resizeSideBarGridDebounceFn),_this}return _inherits(Container,_React$Component),_createClass(Container,[{key:"resizeSideBarGrid",value:function(){var self=this,parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".searchPane",this.props.shadow).length>0?$(".searchPane",this.props.shadow):$(".searchPane",parentNode),topLevelEl=$(".top-level",this.props.shadow).length>0?$(".top-level",this.props.shadow):$(".top-level",parentNode),contentAreaEl=$(".sr-editorial-space",this.props.shadow).length>0?$(".sr-editorial-space",this.props.shadow):$(".sr-editorial-space",parentNode);if(searchPane.length>0){var searchPaneRect=searchPane[0].getBoundingClientRect(),contentAreaWidth=topLevelEl[0].getBoundingClientRect().width-searchPaneRect.width-5;setTimeout(function(){contentAreaEl.width(contentAreaWidth),window.removeEventListener("resize",self.resizeSideBarGridDebounceFn),window.addEventListener("resize",self.resizeSideBarGridDebounceFn)})}}},{key:"resizeFooterPaneGrid",value:function(){var parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,contentPane=$(".sr-editorial-space > .content",this.props.shadow).length>0?$(".sr-editorial-space > .content",this.props.shadow):$(".sr-editorial-space > .content",parentNode),topLevelEl=$(".sr-editorial-space",this.props.shadow).length>0?$(".sr-editorial-space",this.props.shadow):$(".sr-editorial-space",parentNode),footerPane=$(".sr-editorial-space > .footerPane",this.props.shadow).length>0?$(".sr-editorial-space > .footerPane",this.props.shadow):$(".sr-editorial-space > .footerPane",parentNode);if(contentPane.length>0){var contentPaneRect=contentPane[0].getBoundingClientRect(),footerPaneHeight=topLevelEl[0].getBoundingClientRect().height-contentPaneRect.height;footerPane.height(footerPaneHeight);var editorState=cloneDeep(this.state.editor);editorState.height=contentPaneRect.height,this.setState({editor:editorState})}}},{key:"componentDidMount",value:function(){var self=this;(!this.state.openedForms||0==this.state.openedForms.length||1==this.state.openedForms.length&&-1==this.state.openedForms[0].file_id)&&this.props.ideFiles&&this.props.ideFiles.length>0&&this.loadIDEFiles(this.props.ideFiles),this.searchChanged();var parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".searchPane",this.props.shadow).length>0?$(".searchPane",this.props.shadow):$(".searchPane",parentNode);if(window.addEventListener("focus",self.resizeSideBarGridDebounceFn),window.addEventListener("focus",this.resizeSideBarGridDebounceFn),searchPane&&searchPane.length>0){searchPane[0].addEventListener("resize",this.resizeSideBarGridDebounceFn),new MutationObserver(function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}}).observe(searchPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})}var contentPane=$(".sr-editorial-space > .content",this.props.shadow).length>0?$(".sr-editorial-space > .content",this.props.shadow):$(".sr-editorial-space > .content",parentNode);if(contentPane&&contentPane.length>0){contentPane[0].addEventListener("resize",this.resizeFooterPaneGrid),new MutationObserver(function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}}).observe(contentPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})}setTimeout(function(){return self.this.resizeSideBarGrid()},1e3)}},{key:"componentDidUnmount",value:function(){window.removeEventListener("resize",this.resizeSideBarGridDebounceFn)}},{key:"componentDidUpdate",value:function(prevProps){var _this2=this;if(prevProps.sideNavOpen!=this.props.sideNavOpen&&this.resizeSideBarGridDebounceFn(),prevProps.ide_reload!=this.props.ide_reload&&this.setState({reload:!this.state.reload}),prevProps.showpreview==this.props.showpreview||prevProps.showpreview_target==this.props.showpreview_target||"ide_state"!=this.props.showpreview_target&&"ide_actions"!=this.props.showpreview_target&&"ide_props"!=this.props.showpreview_target&&"ide_deps"!=this.props.showpreview_target||(this.setState({showWebComponentPreview:this.props.showpreview,showPreviewTarget:this.props.showpreview_target}),0==this.props.showpreview&&this.restoreEditor()),this.activeFileIndex>-1&&this.refs)if(this.refs["file"+this.activeFileIndex])setTimeout(function(){return _this2.refs["file"+_this2.activeFileIndex].scrollIntoView({block:"end",behavior:"smooth"})},100);else{var lastFileIndx=-1;Object.keys(this.refs).map(function(refKey){if(refKey.indexOf("file")>-1){var fileIndx=parseInt(refKey.split("file")[1]);fileIndx>lastFileIndx&&(lastFileIndx=fileIndx)}}),setTimeout(function(){return _this2.refs["file"+lastFileIndx].scrollIntoView({block:"end",behavior:"smooth"})},100)}}},{key:"componentDidCatch",value:function(error,info){console.log("error = "+error)}},{key:"editorDidMount",value:function(editor,monaco){monaco.languages.registerCompletionItemProvider("javascript",{provideCompletionItems:function(model,position){return[{label:'let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',documentation:"Utility to get the records"},{label:'let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',documentation:"Utility to get the record count of the matching filter"},{label:'createRecord = await $qry.createRecord("[model]_[scope]", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - createRecord = await $qry.createRecord("[model]_[scope]", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to create a new record"},{label:'updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to update an existing record"},{label:'deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',documentation:"Utility to delete a record"},{label:'deleteRecords = await $qry.deleteRecords("[model]_[scope]", "{uid: {"inq": ["id1", "id"]}}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "filter")',documentation:"Utility to delete multiple records"},{label:'tableDelete = await $qry._run(`mutation($inputData:[Table]DestroyAllInput!) {\n\t\t[Table]DestroyAll(input:$inputData){\n\t\t\tobj\n\t\t}\t}`, { "inputData": { "where": { "[FieldName]":"${varname}"} } },\n\t\t"data.[Table]DestroyAll.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-delete",documentation:"Delete query to remove the records from the table"},{label:'$qry.run("{queryName}", "{variables}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'await $qry.run("{queryName}", "{variables}")',documentation:"Utility to mutate/fetch data from server using GraphQL"},{label:'tableRead = await $qry._run(`query($input:JSON){\n\t[Table]{\n\t\t[Table]Find(filter: $input) @_(get: "edges"){\n\t\t\tedges @_(keyBy: "node.uid", mapValues:"node"){\n\t\t\t\tnode{\n\t\t\t\t\tuid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}`, { "input": { "where": { "uid": "${varname}" } } },\n"data.[Table].[Table]Find");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-read",documentation:"Open query to get the data from the table"},{label:'tableUpsert = await $qry._run(`mutation($input: [Table]UpsertWithWhereInput!){\n\t[Table]UpsertWithWhere(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "where": { "uid": "${varname}" }, "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]UpsertWithWhere.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-upsert",documentation:"Query to update the data in the table"},{label:'tableCreate = await $qry._run(`mutation($input: [Table]CreateInput!){\n\t[Table]Create(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]Create.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-create",documentation:"Query to create the record with the data"}]}});this.editor=editor,this.monaco=monaco,this.editorModel=editor.getModel(),this.restoreEditor()}},{key:"restoreEditor",value:function(){var self=this,saveEditorValue=this.editor.setValue.bind(this.editor);this.editor.setValue=function(val){saveEditorValue(val),self.state.form.position?(self.editor.setPosition(self.state.form.position),self.editor.revealLine(self.state.form.position.lineNumber),self.editor.revealLineInCenter(self.state.form.position.lineNumber)):(self.editor.setPosition({lineNumber:1,column:1}),self.editor.revealLine(1),self.editor.revealLineInCenter(15)),self.editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:this.editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(this.editor._themeService._styleElement),this.editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"render",value:function(){var editorCode,requireConfig={url:"/thirdpartylib/require.js",paths:{vs:window.noCDN?"/thirdpartylib/monaco/min/vs":"https://unpkg.com/srstecdn@latest/monaco/min/vs"},waitSeconds:15},searchResults=this.studioFormUtil.getSearchPaneDetails.bind(this)(),editorToolkit=this.studioFormUtil.getEditorToolKit.bind(this)(),previewPane=this.studioFormUtil.getPreviewContentPane.bind(this)(),footerTabs=this.studioFormUtil.getFooterTabs.bind(this)(),footerContent=this.studioFormUtil.getFooterContent.bind(this)();if(this.state.form.mode)switch(this.state.form.mode){case"css":editorCode=this.state.form.css;break;case"html":editorCode=this.state.form.html;break;case"js":editorCode=this.state.form.code;break;case"import":editorCode=this.state.form.ImportScript;break;case"export":editorCode=this.state.form.ExportScript}else editorCode=this.state.form.code;var contentTabArry=[];if(this.state.openedForms){var _self=this;this.activeFileIndex=-1,this.state.openedForms.forEach(function(openedFile,indx){"contentTabActive"==openedFile.className&&(_self.activeFileIndex=indx),contentTabArry.push(React.createElement("div",{ref:"file"+indx,className:"contentTabItems"},React.createElement("div",{key:"-1",class:openedFile.className,onClick:function(){return _self.makeFormActive(openedFile)}},openedFile.fileName),React.createElement(Close20,{className:"closeTab",onClick:function(){return _self.removeForm(openedFile)}})))})}var contentTabs=React.createElement("div",{class:"contentTabs"},contentTabArry);this.topElement&&this.topElement.current&&(this.state.resetEditor&&(this.restoreEditor(),this.setState({resetEditor:!1})),this.editorContent=React.createElement(MonacoEditor,{width:this.state.editor.width,height:this.state.editor.height,language:"javascript",theme:"vs-dark",value:editorCode,defaultValue:editorCode,options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1},onChange:this.codeChanged,requireConfig:requireConfig,editorWillMount:this.editorWillMount,editorDidMount:this.editorDidMount}));var notificationBar=this.props.embedded+""!="true"&&this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",null):null;return React.createElement("div",{className:"top-level",ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ErrorBoundary/Style.css"); @import url("component/studio/SrsteeIDE/Style.css"); @import url("/thirdpartylib/monaco/min/vs/editor/editor.main.css")'),notificationBar,React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsMode.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/lib/typescriptServices.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsWorker.js"}),React.createElement("div",{className:"searchPane resizable-sidebar"},React.createElement("div",{className:"sr-new-file-menu"},React.createElement("label",{htmlFor:"button",className:"sr-new-file"},"New File"),React.createElement(OverflowMenu,{renderIcon:function(){return React.createElement(AddAlt32,null)},"data-floating-menu-container":"true"},React.createElement(OverflowMenuItem,{itemText:"Page",onClick:this.addNewFile,value:"page"}),React.createElement(OverflowMenuItem,{itemText:"Component",onClick:this.addNewFile,value:"component"}),React.createElement(OverflowMenuItem,{itemText:"Style",onClick:this.addNewFile,value:"style"}),React.createElement(OverflowMenuItem,{itemText:"Client Scripts",onClick:this.addNewFile,value:"client_script"}),React.createElement(OverflowMenuItem,{itemText:"Common Scripts",onClick:this.addNewFile,value:"common_script"}),React.createElement(OverflowMenuItem,{itemText:"Server Scripts",onClick:this.addNewFile,value:"server_script"}),React.createElement(OverflowMenuItem,{itemText:"Model",onClick:this.addNewFile,value:"model"}),React.createElement(OverflowMenuItem,{itemText:"Opertaion Hook",onClick:this.addNewFile,value:"operation_hook"}),React.createElement(OverflowMenuItem,{itemText:"Resources",onClick:this.addNewFile,value:"resource"}),React.createElement(OverflowMenuItem,{itemText:"Rendering Templates",onClick:this.addNewFile,value:"template"}),React.createElement(OverflowMenuItem,{itemText:"Rest Methods",onClick:this.addNewFile,value:"restmethod"}),React.createElement(OverflowMenuItem,{itemText:"Import Export",onClick:this.addNewFile,value:"import_export"}),React.createElement(OverflowMenuItem,{itemText:"Widget Actions",onClick:this.addNewFile,value:"widget_action"}),React.createElement(OverflowMenuItem,{itemText:"Page Actions",onClick:this.addNewFile,value:"page_action"}))),React.createElement(Select,{labelText:"Category",onChange:this.searchCategoryUpdated,value:this.state.search.ide_type,defaultValue:"component",id:"category",required:"required"},React.createElement(SelectItem,{value:"page",text:"Page"}),React.createElement(SelectItem,{value:"component",text:"Component"}),React.createElement(SelectItem,{value:"client_script",text:"Client Script"}),React.createElement(SelectItem,{value:"common_script",text:"Common Script"}),React.createElement(SelectItem,{value:"server_script",text:"Server Script"}),React.createElement(SelectItem,{value:"operation_hook",text:"Operation Hook"}),React.createElement(SelectItem,{value:"resource",text:"Resources"}),React.createElement(SelectItem,{value:"template",text:"Rendering Templates"}),React.createElement(SelectItem,{value:"restmethod",text:"Rest Methods"}),React.createElement(SelectItem,{value:"import_export",text:"Import Export"}),React.createElement(SelectItem,{value:"widget_action",text:"Widget Actions"}),React.createElement(SelectItem,{value:"page_action",text:"Page Actions"}),React.createElement(SelectItem,{value:"style",text:"Styles"})),React.createElement(TextInput,{placeholder:"Search here...",onChange:this.searchChanged,required:"required",className:"sr-search-bar"}),React.createElement("div",{className:"searchResults"},searchResults)),React.createElement("div",{className:"sr-editorial-space"},React.createElement("div",{className:"content"},React.createElement("div",{className:this.state.editor.className},contentTabs,editorToolkit,this.editorContent)),React.createElement("div",{className:"footerPane"},footerTabs,footerContent),previewPane))}}]),Container}(React.Component)},_export("SrsteeIDE",SrsteeIDE=function(deps){return ideScope.Container}),_export("SrsteeIDE",SrsteeIDE)}}}),System.register("component/studio/WidgetContainer.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.clonedeep","@carbon/icons-react/lib/close/20","@carbon/icons-react/lib/script/20","@carbon/icons-react/lib/chart--relationship/20","lodash.get","lodash.set","deepmerge","lodash.debounce"],function(_export,_context6){"use strict";var _regeneratorRuntime,_asyncToGenerator,_extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,Close20,Script20,Props20,lodashget,lodashset,deepmerge,_WidgetContainer_,WidgetContainer,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibScript){Script20=_carbonIconsReactLibScript.default},function(_carbonIconsReactLibChartRelationship){Props20=_carbonIconsReactLibChartRelationship.default},function(_lodashGet){lodashget=_lodashGet.default},function(_lodashSet){lodashset=_lodashSet.default},function(_deepmerge){deepmerge=_deepmerge.default},function(_lodashDebounce){_lodashDebounce.default}],execute:function(){_WidgetContainer_=function(_React$Component){function _WidgetContainer_(props){_classCallCheck(this,_WidgetContainer_);var _this=_possibleConstructorReturn(this,(_WidgetContainer_.__proto__||Object.getPrototypeOf(_WidgetContainer_)).call(this,props));_this.widgetTag=_this.props.widgetProps&&_this.props.widgetProps.Tag?_this.props.widgetProps.Tag:props.tag?props.tag:"div",_this.executeWidgetActions=_this.executeWidgetActions.bind(_this),_this.makeWidgetActive=_this.makeWidgetActive.bind(_this),_this.executeOnDemandActions=_this.executeOnDemandActions.bind(_this),_this.updateWidgetPropsAndAncestors=_this.updateWidgetPropsAndAncestors.bind(_this),_this.reconcileWidgetData=_this.reconcileWidgetData.bind(_this),_this.updatePageParams=_this.updatePageParams.bind(_this),_this.setMenuItems=_this.setMenuItems.bind(_this),_this.setPageState=_this.setPageState.bind(_this),_this.getPageState=_this.getPageState.bind(_this),_this.filterKeys=_this.filterKeys.bind(_this),_this.filterWidgetProps=_this.filterWidgetProps.bind(_this),_this.setPageStateWithPreload=_this.setPageStateWithPreload.bind(_this),_this.prevWidgetProps=null,_this.currentWidgetProps=null,_this.state={propAnchorStyle:{height:"inherit",overflow:"hidden",textAlign:"center"},reload:!1,isReady:!1,isWidgetPreLoaded:!_this.props.is_design_time&&_this.props.widgetProps&&Object.keys(_this.props.widgetProps).length>0},_this.handleChange=_this.handleChange.bind(_this),_this.widgetref=React.createRef();return _this}return _inherits(_WidgetContainer_,_React$Component),_createClass(_WidgetContainer_,[{key:"setMenuItems",value:function(menuItems){this.props.updateStore({updates:{headerMenuItems:menuItems}})}},{key:"setPageState",value:function(recentUpdates){var pageState=cloneDeep(this.props.pageState)||{},pageStateLayout=void 0;recentUpdates.layout&&(pageStateLayout=deepmerge.all([pageState.layout,recentUpdates.layout])),pageState=_extends({},pageState,recentUpdates),pageStateLayout&&(pageState.layout=pageStateLayout),this.props.pageState.parentstate&&pageState.parentstate&&!_.isEqual(this.props.pageState.parentstate,pageState.parentstate)&&(this.props.pageState.parentstate.removed&&Object.keys(this.props.pageState.parentstate).length>1&&delete pageState.parentstate.removed,pageState.parentstate.clickts=Date.now()),_.isEqual(this.props.pageState,pageState)||(pageState.clickts=Date.now(),this.props.updateStore({updates:{pageState:pageState}}))}},{key:"reconcileWidgetData",value:function(currentWidgetProps,newWidgetProps,pageState){var $widgetProps=_extends({},currentWidgetProps,newWidgetProps);if($widgetProps)for(var widgetPropName in $widgetProps)if(widgetPropName&&widgetPropName.indexOf("__State__")>-1){var widgetPropPathValue=$widgetProps[widgetPropName],wpropName=widgetPropName.split("__State__")[1];if(widgetPropPathValue&&pageState&&Object.keys(pageState).length>0){var newPropVal=lodashget(pageState,widgetPropPathValue);void 0!=newPropVal&&null!=newPropVal&&($widgetProps[wpropName]="string"==typeof newPropVal||"boolean"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}return $widgetProps}},{key:"getPageState",value:function(){return cloneDeep(this.props.pageState)}},{key:"setPageStateWithPreload",value:function(recentUpdates,$widgets){var pageState=this.props.pageState?cloneDeep(this.props.pageState):{},pageStateLayout=void 0;if(recentUpdates.layout&&(pageStateLayout=deepmerge.all([pageState.layout,recentUpdates.layout])),pageState=_extends({},pageState,recentUpdates),pageStateLayout&&(pageState.layout=pageStateLayout),$widgets)for(var widgetIndx in $widgets){var widget=$widgets[widgetIndx];if(widget){var widgetProps=widget.props;if(widgetProps&&Object.keys(widgetProps).length>0){var widgetPropNames=Object.keys(widgetProps);for(var widgetPropIndx in widgetPropNames){var widgetPropName=widgetPropNames[widgetPropIndx];if(widgetPropName.indexOf("__State__")>-1){var widgetPropPathValue=widgetProps[widgetPropName],wpropName=widgetPropName.split("__State__")[1];if(widgetPropPathValue&&pageState&&Object.keys(pageState).length>0){var newPropVal=lodashget(pageState,widgetPropPathValue);void 0!=newPropVal&&null!=newPropVal&&(widgetProps[wpropName]="string"==typeof newPropVal||"boolean"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}}}}}return pageState.clickts=Date.now(),this.props.updateStore({updates:{pageState:pageState}}),$widgets}},{key:"handleChange",value:function(e){e.stopPropagation()}},{key:"componentDidUpdate",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(prevProps,prevState){var self,ghostWidgetPropsCall,shadowRoot,gridStackItemEl,_shadowRoot,_gridStackItemEl,widgetElement,updatedWidgetProps,pageId,pageParamInState,pageIdInState,isLayoutChanged,pageParamMapping,widgetProps,pageState,_widgetProps,prevFormOutputFiltered,currentFormOutputFiltered,currentWidgetActionEvaluated,pageDataWidgetNames,widgetIdIndx,widgetId,_this2=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(self=this,this.state.isReady){_context.next=3;break}return _context.abrupt("return");case 3:if(ghostWidgetPropsCall=this.prevWidgetProps&&_.isEqual(prevProps.widgetProps,this.prevWidgetProps)&&this.currentWidgetProps&&_.isEqual(this.currentWidgetProps,this.props.widgetProps),this.prevWidgetProps=prevProps.widgetProps,this.currentWidgetProps=this.props.widgetProps,this.props.widgetProps&&this.props.widgetProps.hasOwnProperty("OneColumnBottomAnchor")&&(shadowRoot=this.props.shadow)&&shadowRoot.host&&(gridStackItemEl=$(this.props.shadow.host).closest(".grid-stack-item"))&&gridStackItemEl.length>0&&("true"==this.props.widgetProps.OneColumnBottomAnchor?!this.props.pageState||1!=this.props.pageState.oneColumn&&"true"!=this.props.pageState.oneColumn?$(gridStackItemEl).removeClass("OneColumnBottomAnchor"):$(gridStackItemEl).hasClass("OneColumnBottomAnchor")||$(gridStackItemEl).addClass("OneColumnBottomAnchor"):$(gridStackItemEl).removeClass("OneColumnBottomAnchor")),this.props.widgetProps&&this.props.widgetProps.hasOwnProperty("OneColumnTopAnchor")&&(_shadowRoot=this.props.shadow)&&_shadowRoot.host&&(_gridStackItemEl=$(this.props.shadow.host).closest(".grid-stack-item"))&&_gridStackItemEl.length>0&&("true"==this.props.widgetProps.OneColumnTopAnchor?!this.props.pageState||1!=this.props.pageState.oneColumn&&"true"!=this.props.pageState.oneColumn?$(_gridStackItemEl).removeClass("OneColumnTopAnchor"):$(_gridStackItemEl).hasClass("OneColumnTopAnchor")||$(_gridStackItemEl).addClass("OneColumnTopAnchor"):$(_gridStackItemEl).removeClass("OneColumnTopAnchor")),"srs-board"!=this.widgetTag&&"planning-board"!=this.widgetTag||this.props.preview||prevProps.widgetProps.TableName==this.props.widgetProps.TableName||setTimeout(function(){var updatedWidgetProps=Object.assign({},_this2.props.widgetProps);updatedWidgetProps.LaneField="",updatedWidgetProps.BoardFilter=JSON.stringify({}),updatedWidgetProps.FieldMapping=JSON.stringify([]),_this2.props.updateStore({updates:{widgetProps:updatedWidgetProps}}),_this2.setState({reload:!_this2.state.reload})}),prevProps.currentWidget&&this.props.currentWidget&&prevProps.currentWidget.reload!=this.props.currentWidget.reload&&this.preview&&this.setState({reload:!this.state.reload}),widgetElement=null,this.widgetref.current&&this.widgetref.current.getRootNode()&&(widgetElement=11==this.widgetref.current.getRootNode().nodeType?$(this.widgetref.current.getRootNode().host).closest(".grid-stack-item"):$(this.widgetref.current).closest(".grid-stack-item")),widgetElement&&widgetElement.length>0&&this.props.is_design_time&&(this.props.active_widget_id==this.props.widgetid?$(widgetElement).addClass("widgetactive"):$(widgetElement).removeClass("widgetactive")),"page-designer-preview"!=this.widgetTag||this.props.is_design_time){_context.next=30;break}if(!(prevProps&&prevProps.widgetProps&&this.props.widgetProps)){_context.next=30;break}if(prevProps.widgetProps.PageId!=this.props.widgetProps.PageId){_context.next=29;break}if(updatedWidgetProps=Object.assign({},this.props.widgetProps),pageId=updatedWidgetProps.PageId,pageParamInState=this.props.widgetProps&&this.props.widgetProps.__State__PageParams?this.props.widgetProps.__State__PageParams:null,pageIdInState=this.props.widgetProps&&this.props.widgetProps.__State__PageId?this.props.widgetProps.__State__PageId:null,isLayoutChanged=prevProps.pageState&&this.props.pageState&&prevProps.pageState.currentLayout!=this.props.pageState.currentLayout,pageParamMapping=null,pageParamInState)try{pageParamMapping=(pageParamMapping=this.props.pageState[pageParamInState])&&"string"==typeof pageParamMapping?JSON.parse(pageParamMapping):pageParamMapping}catch(err){}if(pageIdInState&&this.props.pageState&&this.props.pageState[pageIdInState]&&(pageId=this.props.pageState[pageIdInState]),!this.props.pages||!this.props.pages[pageId+this.props.pagesuffix]){_context.next=27;break}return _context.next=27,this.updatePageParams(pageId,this.props.pagesuffix,pageParamMapping,isLayoutChanged?this.props.pageState.currentLayout:null);case 27:_context.next=30;break;case 29:this.setState({reload:!this.state.reload});case 30:if(_.isEqual(this.props,prevProps)||this.props.is_design_time){_context.next=78;break}if(!this.props.preview){_context.next=78;break}if(prevProps.pageState&&this.props.pageState&&prevProps.pageState.oneColumn!=this.props.pageState.oneColumn&&this.setState({reload:!this.state.reload}),!(!prevProps.widgetProps&&this.props.widgetProps&&Object.keys(this.props.widgetProps).length>0)){_context.next=40;break}widgetProps=Object.assign({},this.props.widgetProps),pageState=self.props.pageState?Object.assign({},self.props.pageState):{},Object.keys(widgetProps).map(function(currentWidgetPropName){if(currentWidgetPropName.startsWith("__State__")){var propPath=_this2.props.widgetProps[currentWidgetPropName],wpropName=currentWidgetPropName.split("__State__")[1],newValue=lodashget(pageState,propPath);widgetProps[wpropName]=newValue}}),_.isEqual(widgetProps,this.props.widgetProps)||(this.props.updateStore({updates:{widgetProps:widgetProps}}),this.setState({reload:!this.state.reload,isWidgetPreLoaded:!1})),_context.next=78;break;case 40:if(!prevProps.widgetProps||!this.props.widgetProps||_.isEqual(prevProps.widgetProps,this.props.widgetProps)||ghostWidgetPropsCall){_context.next=53;break}if(pageState=self.props.pageState?Object.assign({},self.props.pageState):{},this.state.isWidgetPreLoaded?(_widgetProps=Object.assign({},this.props.widgetProps),Object.keys(_widgetProps).map(function(currentWidgetPropName){if(currentWidgetPropName.startsWith("__State__")){var propPath=_this2.props.widgetProps[currentWidgetPropName],wpropName=currentWidgetPropName.split("__State__")[1],newValue=lodashget(pageState,propPath);_widgetProps[wpropName]=newValue}}),_.isEqual(_widgetProps,this.props.widgetProps)||(this.props.updateStore({updates:{widgetProps:_widgetProps}}),this.setState({reload:!this.state.reload,isWidgetPreLoaded:!1}))):(Object.keys(this.props.widgetProps).map(function(currentWidgetPropName){if(currentWidgetPropName.startsWith("__State__")&&("page-designer-preview"!=_this2.widgetTag||"page-designer-preview"!=_this2.widgetTag&&"__State__PageParams"!=currentWidgetPropName)){var propPath=self.props.widgetProps[currentWidgetPropName],wpropName=currentWidgetPropName.split("__State__")[1],newValue=_this2.props.widgetProps[wpropName];if(prevProps.widgetProps[wpropName]!=newValue){try{newValue=JSON.parse(newValue)}catch(err){}lodashset(pageState,propPath,newValue)}}}),_.isEqual(this.props.pageState,pageState)||this.props.updateStore({updates:{pageState:pageState}})),"true"!=this.props.widgetProps.TriggerActionOnChange&&1!=this.props.widgetProps.TriggerActionOnChange||this.state.isWidgetPreLoaded||!this.state.isReady){_context.next=49;break}if(prevFormOutputFiltered=this.filterWidgetProps(prevProps.widgetProps||{}),currentFormOutputFiltered=this.filterWidgetProps(this.props.widgetProps||{}),_.isEqual(prevFormOutputFiltered,currentFormOutputFiltered)){_context.next=49;break}return _context.next=49,this.executeOnDemandActions("onChange",prevProps);case 49:_.isEqual(prevProps.widgetProps.value,this.props.widgetProps.value)||this.updateWidgetPropsAndAncestors(null),this.setState({reload:!this.state.reload,isWidgetPreLoaded:!1}),_context.next=78;break;case 53:if(!prevProps.pageState||!this.props.pageState||_.isEqual(prevProps.pageState,this.props.pageState)){_context.next=58;break}return _context.next=56,this.executeWidgetActions(prevProps);case 56:_context.next=78;break;case 58:if(!prevProps.currentWidget||!this.props.currentWidget||prevProps.currentWidget.BubbledReload==this.props.currentWidget.BubbledReload){_context.next=63;break}return _context.next=61,this.executeWidgetActions(prevProps);case 61:_context.next=78;break;case 63:if(!this.props.preview){_context.next=78;break}if(!this.props.pageData||!this.props.pageData.widgets){_context.next=78;break}currentWidgetActionEvaluated=!1,pageDataWidgetNames=Object.keys(this.props.pageData.widgets),_context.t0=_regeneratorRuntime.keys(pageDataWidgetNames);case 68:if((_context.t1=_context.t0()).done){_context.next=78;break}if(widgetIdIndx=_context.t1.value,widgetId=pageDataWidgetNames[widgetIdIndx],currentWidgetActionEvaluated||!prevProps.pageData||_.isEqual(this.props.pageData.widgets[widgetId],prevProps.pageData.widgets[widgetId])||widgetId==this.props.widgetid){_context.next=75;break}return currentWidgetActionEvaluated=!0,_context.next=75,this.executeWidgetActions(prevProps);case 75:widgetId!=this.props.widgetid||_.isEqual(prevProps.widgetProps,this.props.widgetProps)||this.updateWidgetPropsAndAncestors(null),_context.next=68;break;case 78:case"end":return _context.stop()}},_callee,this)}));return function(_x,_x2){return _ref.apply(this,arguments)}}()},{key:"filterKeys",value:function(obj,_filterKeys){var result={},key=void 0;for(key in obj)obj.hasOwnProperty(key)&&-1==_filterKeys.indexOf(key)&&(result[key]=obj[key]);return result}},{key:"filterWidgetProps",value:function(widgetProps){var filteredWidgetProps={},key=void 0;for(key in widgetProps)if(widgetProps.hasOwnProperty(key))if("FormOutput"!=key)void 0!=widgetProps[key]&&(filteredWidgetProps[key]=widgetProps[key]);else{var formOutput=this.filterKeys(widgetProps[key],["form_list","form_actions"]);filteredWidgetProps[key]=formOutput}return filteredWidgetProps}},{key:"componentDidMount",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var shadowRoot,gridStackItemEl,_shadowRoot2,_gridStackItemEl2,widgetProps,pageState,updatedState,_this3=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return this.props.widgetProps&&this.props.widgetProps.hasOwnProperty("OneColumnBottomAnchor")&&(shadowRoot=this.props.shadow)&&shadowRoot.host&&(gridStackItemEl=$(this.props.shadow.host).closest(".grid-stack-item"))&&gridStackItemEl.length>0&&("true"==this.props.widgetProps.OneColumnBottomAnchor?!this.props.pageState||1!=this.props.pageState.oneColumn&&"true"!=this.props.pageState.oneColumn?$(gridStackItemEl).removeClass("OneColumnBottomAnchor"):$(gridStackItemEl).hasClass("OneColumnBottomAnchor")||$(gridStackItemEl).addClass("OneColumnBottomAnchor"):$(gridStackItemEl).removeClass("OneColumnBottomAnchor")),this.props.widgetProps&&this.props.widgetProps.hasOwnProperty("OneColumnTopAnchor")&&(_shadowRoot2=this.props.shadow)&&_shadowRoot2.host&&(_gridStackItemEl2=$(this.props.shadow.host).closest(".grid-stack-item"))&&_gridStackItemEl2.length>0&&("true"==this.props.widgetProps.OneColumnTopAnchor?!this.props.pageState||1!=this.props.pageState.oneColumn&&"true"!=this.props.pageState.oneColumn?$(_gridStackItemEl2).removeClass("OneColumnTopAnchor"):$(_gridStackItemEl2).hasClass("OneColumnTopAnchor")||$(_gridStackItemEl2).addClass("OneColumnTopAnchor"):$(_gridStackItemEl2).removeClass("OneColumnTopAnchor")),widgetProps=this.props.widgetProps?Object.assign({},this.props.widgetProps):null,pageState=this.props.pageState?Object.assign({},this.props.pageState):{},widgetProps&&Object.keys(widgetProps).map(function(currentWidgetPropName){if(currentWidgetPropName.startsWith("__State__")){var propPath=_this3.props.widgetProps[currentWidgetPropName],wpropName=currentWidgetPropName.split("__State__")[1],newValue=lodashget(pageState,propPath);widgetProps[wpropName]=newValue}}),widgetProps&&!_.isEqual(widgetProps,this.props.widgetProps)&&this.props.updateStore({updates:{widgetProps:widgetProps}}),_context2.next=8,this.executeWidgetActions();case 8:updatedState={isReady:!0},this.state.isWidgetPreLoaded&&(updatedState.isWidgetPreLoaded=!1),this.setState(_extends({},updatedState));case 11:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"updatePageParams",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(pageId,pagesuffix,inputPageParamMapping,inputLayout){var isPageChanged,page,existingPageParams,pageProps,pageParamMapping,pagesWithNewPageParams,subPageName,inputParams,newPageParams,cacheKey;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(isPageChanged=!1,!1,_context3.prev=2,{},page=pageId&&this.props.pages[pageId+pagesuffix]?this.props.pages[pageId+pagesuffix]:{},pageId&&this.props.pages[pageId+pagesuffix]?page=this.props.pages[pageId+pagesuffix]:(page={},isPageChanged=!0,!0),(existingPageParams=page.pageParams?page.pageParams:null)||(pageProps={},page.props&&Object.keys(page.props).map(function(pagePropName){"ModelName"==pagePropName&&"ModelScope"==pagePropName||(pageProps[pagePropName]=page.props[pagePropName])}),existingPageParams=pageProps),{},pageParamMapping=inputPageParamMapping||null,pagesWithNewPageParams=Object.assign({},this.props.pages),inputLayout&&(pagesWithNewPageParams[pageId+pagesuffix]=pagesWithNewPageParams[pageId+pagesuffix]||{},pagesWithNewPageParams[pageId+pagesuffix].currentLayout!=inputLayout&&(pagesWithNewPageParams[pageId+pagesuffix].currentLayout=inputLayout,pagesWithNewPageParams[pageId+pagesuffix].pagereload=!pagesWithNewPageParams[pageId+pagesuffix].pagereload,isPageChanged=!0)),pageParamMapping="string"==typeof(pageParamMapping=pageParamMapping||(this.props&&this.props.widgetProps&&this.props.widgetProps.PageParams?this.props.widgetProps.PageParams:{}))?JSON.parse(pageParamMapping):pageParamMapping,subPageName=this.props.pagesuffix&&"_pagemodel"==this.props.pagesuffix?"pagemodel":this.props.pagename,inputParams={pageId:pageId,pageParamMapping:pageParamMapping,parentPageParams:this.props.pageData.pageParams?Object.assign({},this.props.pageData.pageParams):{},parentPage:this.props.pageData,containerSubPageName:subPageName,pageState:this.props.pageState,mode:"widget"},newPageParams=null,cacheKey="scriptresult_mmf.getPageParameters_"+JSON.stringify(inputParams),!$qry.cache[cacheKey]){_context3.next=22;break}newPageParams=$qry.cache[cacheKey],_context3.next=26;break;case 22:return _context3.next=24,$script.runscript("mmf.getPageParameters",inputParams);case 24:newPageParams=_context3.sent,$qry.cache[cacheKey]=newPageParams;case 26:newPageParams=newPageParams||{},!isPageChanged&&_.isEqual(newPageParams,existingPageParams)||(isPageChanged=!0,pagesWithNewPageParams[pageId+pagesuffix]=pagesWithNewPageParams[pageId+pagesuffix]||{},pagesWithNewPageParams[pageId+pagesuffix].pagereload=!pagesWithNewPageParams[pageId+pagesuffix].pagereload,pagesWithNewPageParams[pageId+pagesuffix].pageParams=newPageParams),isPageChanged&&!_.isEqual(this.props.pages,pagesWithNewPageParams)&&this.props.updateStore({updates:{pages:pagesWithNewPageParams}}),_context3.next=33;break;case 31:_context3.prev=31,_context3.t0=_context3.catch(2);case 33:return _context3.abrupt("return",isPageChanged);case 34:case"end":return _context3.stop()}},_callee3,this,[[2,31]])}));return function(_x3,_x4,_x5,_x6){return _ref3.apply(this,arguments)}}()},{key:"executeWidgetActions",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(prevProps){var self,widgetActionURL,actionsModule,widgetActions,widgetProperties,ctx,bubbledSource,bubbledSourceParts,bubbledWidgetId,bubbledPageId,srcWidgetName,srcWidget,srcWidgetProps,srcPage,srcPageName,widgetProps,_this4=this;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(self=this,this.props.widgetid&&this.props.preview){_context5.next=3;break}return _context5.abrupt("return");case 3:return widgetActionURL="/widget/"+this.props.widgetid+"/Action.js",self.props.nocache&&"true"==self.props.nocache&&(widgetActionURL=widgetActionURL+"?key="+Date.now()),_context5.next=7,System.import(widgetActionURL);case 7:if(actionsModule=_context5.sent,widgetActions=actionsModule.default,widgetProperties=cloneDeep(self.props.widgetProps),ctx={currentscope:self.props.currentscope,prevpagedata:prevProps?prevProps.pageData:null,cloneDeep:cloneDeep},prevProps&&prevProps.currentWidget&&this.props.currentWidget&&prevProps.currentWidget.BubbledReload!=this.props.currentWidget.BubbledReload&&(bubbledSource=this.props.currentWidget.BubbledSource)&&bubbledSource.indexOf("@@")>-1&&2==(bubbledSourceParts=bubbledSource.split("@@")).length&&(bubbledWidgetId=bubbledSourceParts[0],bubbledPageId=bubbledSourceParts[1],this.props.pages&&this.props.pages[bubbledPageId]&&this.props.pages[bubbledPageId].widgets&&this.props.pages[bubbledPageId].widgets[bubbledWidgetId]&&(ctx.bubbledsource=this.props.pages[bubbledPageId].widgets[bubbledWidgetId],ctx.bubbledpage=this.props.pages[bubbledPageId])),srcWidgetName=ctx.bubbledsource&&ctx.bubbledsource.props&&ctx.bubbledsource.props.Name?ctx.bubbledsource.props.Name:ctx.bubbledsource?ctx.bubbledsource.id:"",srcWidget=ctx.bubbledsource,srcWidgetProps=ctx.bubbledsource?ctx.bubbledsource.props:{},srcPage=ctx.bubbledpage,srcPageName=srcPage?srcPage.name:"",this.props.widgetProps&&Object.keys(this.props.widgetProps).map(function(currentWidgetPropName){if(srcWidget&&srcPageName&&srcWidgetName&&currentWidgetPropName.startsWith("__Child__")){var currentWidgetPropValue=_this4.props.widgetProps[currentWidgetPropName];if(3==(currentWidgetPropValue=(currentWidgetPropValue=currentWidgetPropValue&&"string"==typeof currentWidgetPropValue?JSON.parse(currentWidgetPropValue):currentWidgetPropValue)||[]).length){var currentPropPageName=currentWidgetPropValue[0],currentPropWidgetName=currentWidgetPropValue[1],currentPropWidgetPropName=currentWidgetPropValue[2];if(srcPageName==currentPropPageName&&srcWidgetName==currentPropWidgetName){var propName=currentWidgetPropName.split("__Child__")[1];widgetProperties[propName]=srcWidgetProps[currentPropWidgetPropName]}}}if(currentWidgetPropName.startsWith("__Sibling__")){var _currentWidgetPropValue=_this4.props.widgetProps[currentWidgetPropName];if(2==(_currentWidgetPropValue=(_currentWidgetPropValue=_currentWidgetPropValue&&"string"==typeof _currentWidgetPropValue?JSON.parse(_currentWidgetPropValue):_currentWidgetPropValue)||[]).length){var _currentPropWidgetName=_currentWidgetPropValue[0],_currentPropWidgetPropName=_currentWidgetPropValue[1];_this4.props.pageData.widgets&&Object.keys(_this4.props.pageData.widgets).map(function(siblingWidgetId){var siblingWidget=_this4.props.pageData.widgets[siblingWidgetId];if((siblingWidget.props&&siblingWidget.props.Name?siblingWidget.props.Name:siblingWidget.id)==_currentPropWidgetName&&siblingWidget.props&&siblingWidget.props[_currentPropWidgetPropName]){var _propName=currentWidgetPropName.split("__Sibling__")[1];widgetProperties[_propName]=siblingWidget.props[_currentPropWidgetPropName]}})}}if(currentWidgetPropName.startsWith("__State__")){var propValue=self.props.widgetProps[currentWidgetPropName],wpropName=currentWidgetPropName.split("__State__")[1];if(prevProps&&prevProps.widgetProps&&prevProps.widgetProps[wpropName]==_this4.props.widgetProps[wpropName]&&propValue&&self.props.pageState&&Object.keys(self.props.pageState).length>0){var newPropVal=lodashget(self.props.pageState,propValue);void 0!=newPropVal&&null!=newPropVal&&(widgetProperties[wpropName]="string"==typeof newPropVal||"boolean"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}}),!(widgetActions&&Object.keys(widgetActions).length>0)){_context5.next=22;break}return _context5.next=21,Object.keys(widgetActions).map(function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(widgetActionKey){var actionNameParts,notifier,result,data;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!(widgetActionKey.indexOf("__")>-1)){_context4.next=15;break}if(actionNameParts=widgetActionKey.split("__"),actionNameParts.slice(0,actionNameParts.length-1).join("__"),"Always"!=actionNameParts.slice(actionNameParts.length-1).join("")){_context4.next=15;break}if(notifier={getState:self.getPageState,setState:self.setPageState,setStateWithPreload:self.setPageStateWithPreload,setMenuItems:self.setMenuItems,openModal:self.props.openModal,closeModal:self.props.closeModal,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},!(result=widgetActions[widgetActionKey](self.props.pageData,widgetProperties,notifier,ctx)).then){_context4.next=14;break}return _context4.next=10,result;case 10:data=_context4.sent,widgetProperties=self.reconcileWidgetData(widgetProperties,data,self.props.pageState),_context4.next=15;break;case 14:widgetProperties=self.reconcileWidgetData(widgetProperties,result,self.props.pageState);case 15:case"end":return _context4.stop()}},_callee4,_this4)}));return function(_x8){return _ref5.apply(this,arguments)}}());case 21:_.isEqual(widgetProperties,self.props.widgetProps)?prevProps&&prevProps.currentWidget&&this.props.currentWidget&&prevProps.currentWidget.BubbledReload==this.props.currentWidget.BubbledReload&&"SrsTabs"==this.props.currentWidget.name&&((widgetProps=Object.assign({},this.props.widgetProps)).Reload=!widgetProps.Reload,this.props.updateStore({updates:{widgetProps:widgetProps}})):this.updateWidgetPropsAndAncestors(widgetProperties);case 22:case"end":return _context5.stop()}},_callee5,this)}));return function(_x7){return _ref4.apply(this,arguments)}}()},{key:"updateWidgetPropsAndAncestors",value:function(inputWidgetProps){var updatedWidgetProps=inputWidgetProps;if(this.props.currentWidget&&this.props.currentWidget.widgettree){var widgetTree=this.props.currentWidget.widgettree&&"string"==typeof this.props.currentWidget.widgettree?JSON.parse(this.props.currentWidget.widgettree):this.props.currentWidget.widgettree;if(widgetTree&&Object.keys(widgetTree).length>0){for(var pages=Object.assign({},this.props.pages),widgetTreeKey=Object.keys(widgetTree)[0];widgetTreeKey;){var widgetTreeKeyParts=widgetTreeKey&&widgetTreeKey.split("@@");if(widgetTreeKeyParts&&widgetTreeKeyParts.length>=2){var widgetTreeKeyWidgetId=widgetTreeKeyParts[0],widgetTreeKeyPageId=widgetTreeKeyParts[1];pages[widgetTreeKeyPageId]&&pages[widgetTreeKeyPageId].widgets&&pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId]&&(pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId].BubbledReload=!pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId].BubbledReload,pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId].BubbledSource=this.props.widgetid+"@@"+this.props.pageid+this.props.pagesuffix)}widgetTreeKey=(widgetTree=widgetTree[widgetTreeKey])&&Object.keys(widgetTree).length>0?Object.keys(widgetTree)[0]:null}updatedWidgetProps&&pages[this.props.pageid+this.props.pagesuffix]&&pages[this.props.pageid+this.props.pagesuffix].widgets&&(pages[this.props.pageid+this.props.pagesuffix].widgets[this.props.widgetid]=pages[this.props.pageid+this.props.pagesuffix].widgets[this.props.widgetid]||{},pages[this.props.pageid+this.props.pagesuffix].widgets[this.props.widgetid].props=updatedWidgetProps),this.props.updateStore({updates:{pages:pages}})}else updatedWidgetProps&&this.props.updateStore({updates:{widgetProps:updatedWidgetProps}})}else updatedWidgetProps&&this.props.updateStore({updates:{widgetProps:updatedWidgetProps}})}},{key:"executeOnDemandActions",value:function(triggerType,prevProps){var self=this;if(this.props.widgetid&&self.props.widgetProps){var widgetActionURL="/widget/"+this.props.widgetid+"/Action.js";self.props.nocache&&"true"==self.props.nocache&&(widgetActionURL=widgetActionURL+"?key="+Date.now()),System.import(widgetActionURL).then(function(actionsModule){var widgetActions=actionsModule.default,widgetProperties=cloneDeep(self.props.widgetProps);widgetActions&&Object.keys(widgetActions).length>0&&Object.keys(widgetActions).map(function(widgetActionKey){if(widgetActionKey.indexOf("__")>-1){var actionNameParts=widgetActionKey.split("__"),actionName=actionNameParts.slice(0,actionNameParts.length-1).join("__"),actionType=actionNameParts.slice(actionNameParts.length-1).join("");if(actionType==triggerType){var notifier={setState:self.setPageState,getState:self.getPageState,setStateWithPreload:self.setPageStateWithPreload,setMenuItems:self.setMenuItems,openModal:self.props.openModal,closeModal:self.props.closeModal,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},ctx={currentscope:self.props.currentscope,cloneDeep:cloneDeep};prevProps&&(ctx.prevpagedata=prevProps.pageData);try{var result=widgetActions[widgetActionKey](self.props.pageData,widgetProperties,notifier,ctx);result.then?result.then(function(data){widgetProperties=self.reconcileWidgetData(widgetProperties,data,self.props.pageState),self.props.widgetProps&&!_.isEqual(widgetProperties,self.props.widgetProps)&&self.props.updateStore({updates:{widgetProps:widgetProperties}})}):(widgetProperties=self.reconcileWidgetData(widgetProperties,result,self.props.pageState),self.props.widgetProps&&!_.isEqual(widgetProperties,self.props.widgetProps)&&self.updateWidgetPropsAndAncestors(widgetProperties))}catch(err){self.props.addErrorMessage({title:"SRS0001 - ",subtitle:"Something went wrong, please contact your system administrator."}),console.error(err.message)}}if("System"==actionType&&"onClick"==triggerType&&self.props.widgetProps&&self.props.widgetProps.ButtonAction&&self.props.widgetProps.ButtonAction==actionName){var _notifier={setState:self.setPageState,getState:self.getPageState,setStateWithPreload:self.setPageStateWithPreload,setMenuItems:self.setMenuItems,openModal:self.props.openModal,closeModal:self.props.closeModal,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_ctx={currentscope:self.props.currentscope,cloneDeep:cloneDeep};try{var _result=widgetActions[widgetActionKey](self.props.pageData,widgetProperties,_notifier,_ctx);_result.then?_result.then(function(data){widgetProperties=self.reconcileWidgetData(widgetProperties,data,self.props.pageState),self.props.widgetProps&&!_.isEqual(widgetProperties,self.props.widgetProps)&&self.updateWidgetPropsAndAncestors(widgetProperties)}):(widgetProperties=self.reconcileWidgetData(widgetProperties,_result,self.props.pageState),self.props.widgetProps&&!_.isEqual(widgetProperties,self.props.widgetProps)&&self.updateWidgetPropsAndAncestors(widgetProperties))}catch(err){self.props.addErrorMessage({title:"SRS0001 - ",subtitle:"Something went wrong, please contact your system administrator."}),console.error(err.message)}}}})}).catch(function(err){console.error(err)})}}},{key:"makeWidgetActive",value:function(e){this.props.pageid!=this.props.active_page_id||this.props.preview||this.props.updateStore({updates:{active_widget_id:this.props.widgetid,component_id:this.props.componentid}}),this.props.preview&&this.executeOnDemandActions("onClick")}},{key:"render",value:function(){var _this5=this,widgetKey=this.props.widgetid;"srs-board"!=this.widgetTag&&"planning-board"!=this.widgetTag||this.props.preview||(widgetKey="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)})),this.widgetTag=this.props.widgetProps&&this.props.widgetProps.Tag?this.props.widgetProps.Tag:this.props.tag?this.props.tag:"div";var extraProps={},widgetInstanceStyles={height:"inherit"};if(this.props.widgetProps){var widgetTree={},prevWidgetTree=this.props.currentWidget&&this.props.currentWidget.widgettree&&"string"==typeof this.props.currentWidget.widgettree?JSON.parse(this.props.currentWidget.widgettree):this.props.currentWidget?this.props.currentWidget.widgettree:{};if(this.props.pageData.name?this.props.pageData.name:this.props.widgetProps.Name?this.props.widgetProps.Name:"","page-designer-preview"==this.widgetTag){extraProps.previewpageid=this.props.widgetProps.PageId,extraProps.pagesuffix="";var tempPrevWidgetTree=prevWidgetTree?Object.assign({},prevWidgetTree):{};widgetTree[this.props.widgetid+"@@"+this.props.pageid+this.props.pagesuffix+"@@"+this.props.pageData.name]=tempPrevWidgetTree,extraProps.widgettree=JSON.stringify(widgetTree),extraProps.parentstate=JSON.stringify(this.props.pageState),extraProps.pagesuffix=this.props.pagesuffix}}this.props.lite&&"page-designer-preview"!=this.widgetTag&&(extraProps.lite=!0),"page-designer"==this.widgetTag&&(extraProps.as_widget=!0,extraProps.preview=this.props.preview),!this.props.widgetProps||"true"!=this.props.widgetProps.Invisible&&1!=this.props.widgetProps.Invisible||((widgetInstanceStyles=widgetInstanceStyles||{}).visibility="hidden");var allProps=Object.assign(_extends({},extraProps),{pageid:this.props.pageid,pagesuffix:this.props.pagesuffix,key:widgetKey},{style:widgetInstanceStyles,widgetid:this.props.widgetid,preview:this.props.preview,shadow:"srs-board"==this.widgetTag||"planning-board"==this.widgetTag||"page-designer-preview"==this.widgetTag||!!this.props.shadow,reload:this.state.reload});allProps.onecolumn=this.props.pageState&&this.props.pageState.oneColumn;var widgetInstance=React.createElement(this.widgetTag,allProps);return this.state.isWidgetPreLoaded?React.createElement("div",null,"Loading..."):React.createElement("div",{ref:this.widgetref,style:this.state.propAnchorStyle,onClick:this.makeWidgetActive},widgetInstance,this.props.preview?null:React.createElement("div",{style:{zIndex:100,position:"absolute",top:0,margin:2,right:0,textAlign:"right",width:200,cursor:"pointer",height:30}},React.createElement(Props20,{onClick:function(e){_this5.props.updateStore({updates:{active_widget_id:_this5.props.widgetid,show_widget_props:!_this5.props.show_widget_props}}),e.stopPropagation()},style:{cursor:"pointer",borderRadius:"50%",marginLeft:2,padding:2,border:"1px solid black",backgroundColor:"white"}}),React.createElement(Script20,{onClick:function(e){_this5.props.updateStore({updates:{active_widget_id:_this5.props.widgetid,show_widget_actions:!_this5.props.show_widget_actions}}),e.stopPropagation()},style:{cursor:"pointer",borderRadius:"50%",marginLeft:2,padding:2,border:"1px solid black",backgroundColor:"white"}}),React.createElement(Close20,{onClick:function(e){if(_this5.props.activePageWidgets){var widgets2Delete=cloneDeep(_this5.props.widgets2Delete);widgets2Delete.push(_this5.props.widgetid),_this5.props.updateStore({updates:{widgets2Delete:widgets2Delete}})}e.stopPropagation()},style:{cursor:"pointer",borderRadius:"50%",marginLeft:2,padding:2,border:"1px solid black",backgroundColor:"white"}})))}}]),_WidgetContainer_}(React.Component),_export("WidgetContainer",WidgetContainer=function(props){return _WidgetContainer_}),_export("WidgetContainer",WidgetContainer),_export("default",WidgetContainer),_export("states",states=[{KeyName:"widgets2Delete",AccessPath:"widgets2Delete",DefaultValue:'{"widgets2Delete": []}'},{KeyName:"active_widget_field_value",AccessPath:"active_widget_field_value",DefaultValue:'{"active_widget_field_value": ""}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id": ""}'},{KeyName:"is_design_time",AccessPath:"is_design_time",DefaultValue:'{"is_design_time": false}'},{KeyName:"activePageWidgets",AccessPath:"pages.${active_page_id}.widgets",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {}}}}'},{KeyName:"pages",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"pageData",AccessPath:"pages.${pageid}${pagesuffix}",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {}}}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"headerMenuItems",AccessPath:"header.menuitems",DefaultValue:'{"header": {"menuitems": {}}}'},{KeyName:"show_widget_actions",AccessPath:"show_widget_actions",DefaultValue:'{"show_widget_actions": false}'},{KeyName:"show_widget_props",AccessPath:"show_widget_props",DefaultValue:'{"show_widget_props": false}'},{KeyName:"currentWidget",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {}}}}}'},{KeyName:"pageState",AccessPath:"pagestate.${pageid}${pagesuffix}",DefaultValue:'{"pagestate": {"${pageid}${pagesuffix}": {}}}'},{KeyName:"component_id",AccessPath:"component_id",DefaultValue:'{"component_id":""}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/WidgetContainer/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.clonedeep","@carbon/icons-react/lib/close/20","@carbon/icons-react/lib/script/20","@carbon/icons-react/lib/chart--relationship/20","lodash.get","lodash.set","deepmerge","lodash.debounce"],function(_export,_context6){"use strict";var _regeneratorRuntime,_asyncToGenerator,_extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,Close20,Script20,Props20,lodashget,lodashset,deepmerge,_WidgetContainer_,WidgetContainer;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibScript){Script20=_carbonIconsReactLibScript.default},function(_carbonIconsReactLibChartRelationship){Props20=_carbonIconsReactLibChartRelationship.default},function(_lodashGet){lodashget=_lodashGet.default},function(_lodashSet){lodashset=_lodashSet.default},function(_deepmerge){deepmerge=_deepmerge.default},function(_lodashDebounce){_lodashDebounce.default}],execute:function(){_WidgetContainer_=function(_React$Component){function _WidgetContainer_(props){_classCallCheck(this,_WidgetContainer_);var _this=_possibleConstructorReturn(this,(_WidgetContainer_.__proto__||Object.getPrototypeOf(_WidgetContainer_)).call(this,props));_this.widgetTag=_this.props.widgetProps&&_this.props.widgetProps.Tag?_this.props.widgetProps.Tag:props.tag?props.tag:"div",_this.executeWidgetActions=_this.executeWidgetActions.bind(_this),_this.makeWidgetActive=_this.makeWidgetActive.bind(_this),_this.executeOnDemandActions=_this.executeOnDemandActions.bind(_this),_this.updateWidgetPropsAndAncestors=_this.updateWidgetPropsAndAncestors.bind(_this),_this.reconcileWidgetData=_this.reconcileWidgetData.bind(_this),_this.updatePageParams=_this.updatePageParams.bind(_this),_this.setMenuItems=_this.setMenuItems.bind(_this),_this.setPageState=_this.setPageState.bind(_this),_this.getPageState=_this.getPageState.bind(_this),_this.filterKeys=_this.filterKeys.bind(_this),_this.filterWidgetProps=_this.filterWidgetProps.bind(_this),_this.setPageStateWithPreload=_this.setPageStateWithPreload.bind(_this),_this.prevWidgetProps=null,_this.currentWidgetProps=null,_this.state={propAnchorStyle:{height:"inherit",overflow:"hidden",textAlign:"center"},reload:!1,isReady:!1,isWidgetPreLoaded:!_this.props.is_design_time&&_this.props.widgetProps&&Object.keys(_this.props.widgetProps).length>0},_this.handleChange=_this.handleChange.bind(_this),_this.widgetref=React.createRef();return _this}return _inherits(_WidgetContainer_,_React$Component),_createClass(_WidgetContainer_,[{key:"setMenuItems",value:function(menuItems){this.props.updateStore({updates:{headerMenuItems:menuItems}})}},{key:"setPageState",value:function(recentUpdates){var pageState=cloneDeep(this.props.pageState)||{},pageStateLayout=void 0;recentUpdates.layout&&(pageStateLayout=deepmerge.all([pageState.layout,recentUpdates.layout])),pageState=_extends({},pageState,recentUpdates),pageStateLayout&&(pageState.layout=pageStateLayout),this.props.pageState.parentstate&&pageState.parentstate&&!_.isEqual(this.props.pageState.parentstate,pageState.parentstate)&&(this.props.pageState.parentstate.removed&&Object.keys(this.props.pageState.parentstate).length>1&&delete pageState.parentstate.removed,pageState.parentstate.clickts=Date.now()),_.isEqual(this.props.pageState,pageState)||(pageState.clickts=Date.now(),this.props.updateStore({updates:{pageState:pageState}}))}},{key:"reconcileWidgetData",value:function(currentWidgetProps,newWidgetProps,pageState){var $widgetProps=_extends({},currentWidgetProps,newWidgetProps);if($widgetProps)for(var widgetPropName in $widgetProps)if(widgetPropName&&widgetPropName.indexOf("__State__")>-1){var widgetPropPathValue=$widgetProps[widgetPropName],wpropName=widgetPropName.split("__State__")[1];if(widgetPropPathValue&&pageState&&Object.keys(pageState).length>0){var newPropVal=lodashget(pageState,widgetPropPathValue);void 0!=newPropVal&&null!=newPropVal&&($widgetProps[wpropName]="string"==typeof newPropVal||"boolean"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}return $widgetProps}},{key:"getPageState",value:function(){return cloneDeep(this.props.pageState)}},{key:"setPageStateWithPreload",value:function(recentUpdates,$widgets){var pageState=this.props.pageState?cloneDeep(this.props.pageState):{},pageStateLayout=void 0;if(recentUpdates.layout&&(pageStateLayout=deepmerge.all([pageState.layout,recentUpdates.layout])),pageState=_extends({},pageState,recentUpdates),pageStateLayout&&(pageState.layout=pageStateLayout),$widgets)for(var widgetIndx in $widgets){var widget=$widgets[widgetIndx];if(widget){var widgetProps=widget.props;if(widgetProps&&Object.keys(widgetProps).length>0){var widgetPropNames=Object.keys(widgetProps);for(var widgetPropIndx in widgetPropNames){var widgetPropName=widgetPropNames[widgetPropIndx];if(widgetPropName.indexOf("__State__")>-1){var widgetPropPathValue=widgetProps[widgetPropName],wpropName=widgetPropName.split("__State__")[1];if(widgetPropPathValue&&pageState&&Object.keys(pageState).length>0){var newPropVal=lodashget(pageState,widgetPropPathValue);void 0!=newPropVal&&null!=newPropVal&&(widgetProps[wpropName]="string"==typeof newPropVal||"boolean"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}}}}}return pageState.clickts=Date.now(),this.props.updateStore({updates:{pageState:pageState}}),$widgets}},{key:"handleChange",value:function(e){e.stopPropagation()}},{key:"componentDidUpdate",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(prevProps,prevState){var self,ghostWidgetPropsCall,shadowRoot,gridStackItemEl,_shadowRoot,_gridStackItemEl,widgetElement,updatedWidgetProps,pageId,pageParamInState,pageIdInState,isLayoutChanged,pageParamMapping,widgetProps,pageState,_widgetProps,prevFormOutputFiltered,currentFormOutputFiltered,currentWidgetActionEvaluated,pageDataWidgetNames,widgetIdIndx,widgetId,_this2=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(self=this,this.state.isReady){_context.next=3;break}return _context.abrupt("return");case 3:if(ghostWidgetPropsCall=this.prevWidgetProps&&_.isEqual(prevProps.widgetProps,this.prevWidgetProps)&&this.currentWidgetProps&&_.isEqual(this.currentWidgetProps,this.props.widgetProps),this.prevWidgetProps=prevProps.widgetProps,this.currentWidgetProps=this.props.widgetProps,this.props.widgetProps&&this.props.widgetProps.hasOwnProperty("OneColumnBottomAnchor")&&(shadowRoot=this.props.shadow)&&shadowRoot.host&&(gridStackItemEl=$(this.props.shadow.host).closest(".grid-stack-item"))&&gridStackItemEl.length>0&&("true"==this.props.widgetProps.OneColumnBottomAnchor?!this.props.pageState||1!=this.props.pageState.oneColumn&&"true"!=this.props.pageState.oneColumn?$(gridStackItemEl).removeClass("OneColumnBottomAnchor"):$(gridStackItemEl).hasClass("OneColumnBottomAnchor")||$(gridStackItemEl).addClass("OneColumnBottomAnchor"):$(gridStackItemEl).removeClass("OneColumnBottomAnchor")),this.props.widgetProps&&this.props.widgetProps.hasOwnProperty("OneColumnTopAnchor")&&(_shadowRoot=this.props.shadow)&&_shadowRoot.host&&(_gridStackItemEl=$(this.props.shadow.host).closest(".grid-stack-item"))&&_gridStackItemEl.length>0&&("true"==this.props.widgetProps.OneColumnTopAnchor?!this.props.pageState||1!=this.props.pageState.oneColumn&&"true"!=this.props.pageState.oneColumn?$(_gridStackItemEl).removeClass("OneColumnTopAnchor"):$(_gridStackItemEl).hasClass("OneColumnTopAnchor")||$(_gridStackItemEl).addClass("OneColumnTopAnchor"):$(_gridStackItemEl).removeClass("OneColumnTopAnchor")),"srs-board"!=this.widgetTag&&"planning-board"!=this.widgetTag||this.props.preview||prevProps.widgetProps.TableName==this.props.widgetProps.TableName||setTimeout(function(){var updatedWidgetProps=Object.assign({},_this2.props.widgetProps);updatedWidgetProps.LaneField="",updatedWidgetProps.BoardFilter=JSON.stringify({}),updatedWidgetProps.FieldMapping=JSON.stringify([]),_this2.props.updateStore({updates:{widgetProps:updatedWidgetProps}}),_this2.setState({reload:!_this2.state.reload})}),prevProps.currentWidget&&this.props.currentWidget&&prevProps.currentWidget.reload!=this.props.currentWidget.reload&&this.preview&&this.setState({reload:!this.state.reload}),widgetElement=null,this.widgetref.current&&this.widgetref.current.getRootNode()&&(widgetElement=11==this.widgetref.current.getRootNode().nodeType?$(this.widgetref.current.getRootNode().host).closest(".grid-stack-item"):$(this.widgetref.current).closest(".grid-stack-item")),widgetElement&&widgetElement.length>0&&this.props.is_design_time&&(this.props.active_widget_id==this.props.widgetid?$(widgetElement).addClass("widgetactive"):$(widgetElement).removeClass("widgetactive")),"page-designer-preview"!=this.widgetTag||this.props.is_design_time){_context.next=30;break}if(!(prevProps&&prevProps.widgetProps&&this.props.widgetProps)){_context.next=30;break}if(prevProps.widgetProps.PageId!=this.props.widgetProps.PageId){_context.next=29;break}if(updatedWidgetProps=Object.assign({},this.props.widgetProps),pageId=updatedWidgetProps.PageId,pageParamInState=this.props.widgetProps&&this.props.widgetProps.__State__PageParams?this.props.widgetProps.__State__PageParams:null,pageIdInState=this.props.widgetProps&&this.props.widgetProps.__State__PageId?this.props.widgetProps.__State__PageId:null,isLayoutChanged=prevProps.pageState&&this.props.pageState&&prevProps.pageState.currentLayout!=this.props.pageState.currentLayout,pageParamMapping=null,pageParamInState)try{pageParamMapping=(pageParamMapping=this.props.pageState[pageParamInState])&&"string"==typeof pageParamMapping?JSON.parse(pageParamMapping):pageParamMapping}catch(err){}if(pageIdInState&&this.props.pageState&&this.props.pageState[pageIdInState]&&(pageId=this.props.pageState[pageIdInState]),!this.props.pages||!this.props.pages[pageId+this.props.pagesuffix]){_context.next=27;break}return _context.next=27,this.updatePageParams(pageId,this.props.pagesuffix,pageParamMapping,isLayoutChanged?this.props.pageState.currentLayout:null);case 27:_context.next=30;break;case 29:this.setState({reload:!this.state.reload});case 30:if(_.isEqual(this.props,prevProps)||this.props.is_design_time){_context.next=78;break}if(!this.props.preview){_context.next=78;break}if(prevProps.pageState&&this.props.pageState&&prevProps.pageState.oneColumn!=this.props.pageState.oneColumn&&this.setState({reload:!this.state.reload}),!(!prevProps.widgetProps&&this.props.widgetProps&&Object.keys(this.props.widgetProps).length>0)){_context.next=40;break}widgetProps=Object.assign({},this.props.widgetProps),pageState=self.props.pageState?Object.assign({},self.props.pageState):{},Object.keys(widgetProps).map(function(currentWidgetPropName){if(currentWidgetPropName.startsWith("__State__")){var propPath=_this2.props.widgetProps[currentWidgetPropName],wpropName=currentWidgetPropName.split("__State__")[1],newValue=lodashget(pageState,propPath);widgetProps[wpropName]=newValue}}),_.isEqual(widgetProps,this.props.widgetProps)||(this.props.updateStore({updates:{widgetProps:widgetProps}}),this.setState({reload:!this.state.reload,isWidgetPreLoaded:!1})),_context.next=78;break;case 40:if(!prevProps.widgetProps||!this.props.widgetProps||_.isEqual(prevProps.widgetProps,this.props.widgetProps)||ghostWidgetPropsCall){_context.next=53;break}if(pageState=self.props.pageState?Object.assign({},self.props.pageState):{},this.state.isWidgetPreLoaded?(_widgetProps=Object.assign({},this.props.widgetProps),Object.keys(_widgetProps).map(function(currentWidgetPropName){if(currentWidgetPropName.startsWith("__State__")){var propPath=_this2.props.widgetProps[currentWidgetPropName],wpropName=currentWidgetPropName.split("__State__")[1],newValue=lodashget(pageState,propPath);_widgetProps[wpropName]=newValue}}),_.isEqual(_widgetProps,this.props.widgetProps)||(this.props.updateStore({updates:{widgetProps:_widgetProps}}),this.setState({reload:!this.state.reload,isWidgetPreLoaded:!1}))):(Object.keys(this.props.widgetProps).map(function(currentWidgetPropName){if(currentWidgetPropName.startsWith("__State__")&&("page-designer-preview"!=_this2.widgetTag||"page-designer-preview"!=_this2.widgetTag&&"__State__PageParams"!=currentWidgetPropName)){var propPath=self.props.widgetProps[currentWidgetPropName],wpropName=currentWidgetPropName.split("__State__")[1],newValue=_this2.props.widgetProps[wpropName];if(prevProps.widgetProps[wpropName]!=newValue){try{newValue=JSON.parse(newValue)}catch(err){}lodashset(pageState,propPath,newValue)}}}),_.isEqual(this.props.pageState,pageState)||this.props.updateStore({updates:{pageState:pageState}})),"true"!=this.props.widgetProps.TriggerActionOnChange&&1!=this.props.widgetProps.TriggerActionOnChange||this.state.isWidgetPreLoaded||!this.state.isReady){_context.next=49;break}if(prevFormOutputFiltered=this.filterWidgetProps(prevProps.widgetProps||{}),currentFormOutputFiltered=this.filterWidgetProps(this.props.widgetProps||{}),_.isEqual(prevFormOutputFiltered,currentFormOutputFiltered)){_context.next=49;break}return _context.next=49,this.executeOnDemandActions("onChange",prevProps);case 49:_.isEqual(prevProps.widgetProps.value,this.props.widgetProps.value)||this.updateWidgetPropsAndAncestors(null),this.setState({reload:!this.state.reload,isWidgetPreLoaded:!1}),_context.next=78;break;case 53:if(!prevProps.pageState||!this.props.pageState||_.isEqual(prevProps.pageState,this.props.pageState)){_context.next=58;break}return _context.next=56,this.executeWidgetActions(prevProps);case 56:_context.next=78;break;case 58:if(!prevProps.currentWidget||!this.props.currentWidget||prevProps.currentWidget.BubbledReload==this.props.currentWidget.BubbledReload){_context.next=63;break}return _context.next=61,this.executeWidgetActions(prevProps);case 61:_context.next=78;break;case 63:if(!this.props.preview){_context.next=78;break}if(!this.props.pageData||!this.props.pageData.widgets){_context.next=78;break}currentWidgetActionEvaluated=!1,pageDataWidgetNames=Object.keys(this.props.pageData.widgets),_context.t0=_regeneratorRuntime.keys(pageDataWidgetNames);case 68:if((_context.t1=_context.t0()).done){_context.next=78;break}if(widgetIdIndx=_context.t1.value,widgetId=pageDataWidgetNames[widgetIdIndx],currentWidgetActionEvaluated||!prevProps.pageData||_.isEqual(this.props.pageData.widgets[widgetId],prevProps.pageData.widgets[widgetId])||widgetId==this.props.widgetid){_context.next=75;break}return currentWidgetActionEvaluated=!0,_context.next=75,this.executeWidgetActions(prevProps);case 75:widgetId!=this.props.widgetid||_.isEqual(prevProps.widgetProps,this.props.widgetProps)||this.updateWidgetPropsAndAncestors(null),_context.next=68;break;case 78:case"end":return _context.stop()}},_callee,this)}));return function(_x,_x2){return _ref.apply(this,arguments)}}()},{key:"filterKeys",value:function(obj,_filterKeys){var result={},key=void 0;for(key in obj)obj.hasOwnProperty(key)&&-1==_filterKeys.indexOf(key)&&(result[key]=obj[key]);return result}},{key:"filterWidgetProps",value:function(widgetProps){var filteredWidgetProps={},key=void 0;for(key in widgetProps)if(widgetProps.hasOwnProperty(key))if("FormOutput"!=key)void 0!=widgetProps[key]&&(filteredWidgetProps[key]=widgetProps[key]);else{var formOutput=this.filterKeys(widgetProps[key],["form_list","form_actions"]);filteredWidgetProps[key]=formOutput}return filteredWidgetProps}},{key:"componentDidMount",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var shadowRoot,gridStackItemEl,_shadowRoot2,_gridStackItemEl2,widgetProps,pageState,updatedState,_this3=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return this.props.widgetProps&&this.props.widgetProps.hasOwnProperty("OneColumnBottomAnchor")&&(shadowRoot=this.props.shadow)&&shadowRoot.host&&(gridStackItemEl=$(this.props.shadow.host).closest(".grid-stack-item"))&&gridStackItemEl.length>0&&("true"==this.props.widgetProps.OneColumnBottomAnchor?!this.props.pageState||1!=this.props.pageState.oneColumn&&"true"!=this.props.pageState.oneColumn?$(gridStackItemEl).removeClass("OneColumnBottomAnchor"):$(gridStackItemEl).hasClass("OneColumnBottomAnchor")||$(gridStackItemEl).addClass("OneColumnBottomAnchor"):$(gridStackItemEl).removeClass("OneColumnBottomAnchor")),this.props.widgetProps&&this.props.widgetProps.hasOwnProperty("OneColumnTopAnchor")&&(_shadowRoot2=this.props.shadow)&&_shadowRoot2.host&&(_gridStackItemEl2=$(this.props.shadow.host).closest(".grid-stack-item"))&&_gridStackItemEl2.length>0&&("true"==this.props.widgetProps.OneColumnTopAnchor?!this.props.pageState||1!=this.props.pageState.oneColumn&&"true"!=this.props.pageState.oneColumn?$(_gridStackItemEl2).removeClass("OneColumnTopAnchor"):$(_gridStackItemEl2).hasClass("OneColumnTopAnchor")||$(_gridStackItemEl2).addClass("OneColumnTopAnchor"):$(_gridStackItemEl2).removeClass("OneColumnTopAnchor")),widgetProps=this.props.widgetProps?Object.assign({},this.props.widgetProps):null,pageState=this.props.pageState?Object.assign({},this.props.pageState):{},widgetProps&&Object.keys(widgetProps).map(function(currentWidgetPropName){if(currentWidgetPropName.startsWith("__State__")){var propPath=_this3.props.widgetProps[currentWidgetPropName],wpropName=currentWidgetPropName.split("__State__")[1],newValue=lodashget(pageState,propPath);widgetProps[wpropName]=newValue}}),widgetProps&&!_.isEqual(widgetProps,this.props.widgetProps)&&this.props.updateStore({updates:{widgetProps:widgetProps}}),_context2.next=8,this.executeWidgetActions();case 8:updatedState={isReady:!0},this.state.isWidgetPreLoaded&&(updatedState.isWidgetPreLoaded=!1),this.setState(_extends({},updatedState));case 11:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"updatePageParams",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(pageId,pagesuffix,inputPageParamMapping,inputLayout){var isPageChanged,page,existingPageParams,pageProps,pageParamMapping,pagesWithNewPageParams,subPageName,inputParams,newPageParams,cacheKey;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(isPageChanged=!1,!1,_context3.prev=2,{},page=pageId&&this.props.pages[pageId+pagesuffix]?this.props.pages[pageId+pagesuffix]:{},pageId&&this.props.pages[pageId+pagesuffix]?page=this.props.pages[pageId+pagesuffix]:(page={},isPageChanged=!0,!0),(existingPageParams=page.pageParams?page.pageParams:null)||(pageProps={},page.props&&Object.keys(page.props).map(function(pagePropName){"ModelName"==pagePropName&&"ModelScope"==pagePropName||(pageProps[pagePropName]=page.props[pagePropName])}),existingPageParams=pageProps),{},pageParamMapping=inputPageParamMapping||null,pagesWithNewPageParams=Object.assign({},this.props.pages),inputLayout&&(pagesWithNewPageParams[pageId+pagesuffix]=pagesWithNewPageParams[pageId+pagesuffix]||{},pagesWithNewPageParams[pageId+pagesuffix].currentLayout!=inputLayout&&(pagesWithNewPageParams[pageId+pagesuffix].currentLayout=inputLayout,pagesWithNewPageParams[pageId+pagesuffix].pagereload=!pagesWithNewPageParams[pageId+pagesuffix].pagereload,isPageChanged=!0)),pageParamMapping="string"==typeof(pageParamMapping=pageParamMapping||(this.props&&this.props.widgetProps&&this.props.widgetProps.PageParams?this.props.widgetProps.PageParams:{}))?JSON.parse(pageParamMapping):pageParamMapping,subPageName=this.props.pagesuffix&&"_pagemodel"==this.props.pagesuffix?"pagemodel":this.props.pagename,inputParams={pageId:pageId,pageParamMapping:pageParamMapping,parentPageParams:this.props.pageData.pageParams?Object.assign({},this.props.pageData.pageParams):{},parentPage:this.props.pageData,containerSubPageName:subPageName,pageState:this.props.pageState,mode:"widget"},newPageParams=null,cacheKey="scriptresult_mmf.getPageParameters_"+JSON.stringify(inputParams),!$qry.cache[cacheKey]){_context3.next=22;break}newPageParams=$qry.cache[cacheKey],_context3.next=26;break;case 22:return _context3.next=24,$script.runscript("mmf.getPageParameters",inputParams);case 24:newPageParams=_context3.sent,$qry.cache[cacheKey]=newPageParams;case 26:newPageParams=newPageParams||{},!isPageChanged&&_.isEqual(newPageParams,existingPageParams)||(isPageChanged=!0,pagesWithNewPageParams[pageId+pagesuffix]=pagesWithNewPageParams[pageId+pagesuffix]||{},pagesWithNewPageParams[pageId+pagesuffix].pagereload=!pagesWithNewPageParams[pageId+pagesuffix].pagereload,pagesWithNewPageParams[pageId+pagesuffix].pageParams=newPageParams),isPageChanged&&!_.isEqual(this.props.pages,pagesWithNewPageParams)&&this.props.updateStore({updates:{pages:pagesWithNewPageParams}}),_context3.next=33;break;case 31:_context3.prev=31,_context3.t0=_context3.catch(2);case 33:return _context3.abrupt("return",isPageChanged);case 34:case"end":return _context3.stop()}},_callee3,this,[[2,31]])}));return function(_x3,_x4,_x5,_x6){return _ref3.apply(this,arguments)}}()},{key:"executeWidgetActions",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(prevProps){var self,widgetActionURL,actionsModule,widgetActions,widgetProperties,ctx,bubbledSource,bubbledSourceParts,bubbledWidgetId,bubbledPageId,srcWidgetName,srcWidget,srcWidgetProps,srcPage,srcPageName,widgetProps,_this4=this;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(self=this,this.props.widgetid&&this.props.preview){_context5.next=3;break}return _context5.abrupt("return");case 3:return widgetActionURL="/widget/"+this.props.widgetid+"/Action.js",self.props.nocache&&"true"==self.props.nocache&&(widgetActionURL=widgetActionURL+"?key="+Date.now()),_context5.next=7,System.import(widgetActionURL);case 7:if(actionsModule=_context5.sent,widgetActions=actionsModule.default,widgetProperties=cloneDeep(self.props.widgetProps),ctx={currentscope:self.props.currentscope,prevpagedata:prevProps?prevProps.pageData:null,cloneDeep:cloneDeep},prevProps&&prevProps.currentWidget&&this.props.currentWidget&&prevProps.currentWidget.BubbledReload!=this.props.currentWidget.BubbledReload&&(bubbledSource=this.props.currentWidget.BubbledSource)&&bubbledSource.indexOf("@@")>-1&&2==(bubbledSourceParts=bubbledSource.split("@@")).length&&(bubbledWidgetId=bubbledSourceParts[0],bubbledPageId=bubbledSourceParts[1],this.props.pages&&this.props.pages[bubbledPageId]&&this.props.pages[bubbledPageId].widgets&&this.props.pages[bubbledPageId].widgets[bubbledWidgetId]&&(ctx.bubbledsource=this.props.pages[bubbledPageId].widgets[bubbledWidgetId],ctx.bubbledpage=this.props.pages[bubbledPageId])),srcWidgetName=ctx.bubbledsource&&ctx.bubbledsource.props&&ctx.bubbledsource.props.Name?ctx.bubbledsource.props.Name:ctx.bubbledsource?ctx.bubbledsource.id:"",srcWidget=ctx.bubbledsource,srcWidgetProps=ctx.bubbledsource?ctx.bubbledsource.props:{},srcPage=ctx.bubbledpage,srcPageName=srcPage?srcPage.name:"",this.props.widgetProps&&Object.keys(this.props.widgetProps).map(function(currentWidgetPropName){if(srcWidget&&srcPageName&&srcWidgetName&&currentWidgetPropName.startsWith("__Child__")){var currentWidgetPropValue=_this4.props.widgetProps[currentWidgetPropName];if(3==(currentWidgetPropValue=(currentWidgetPropValue=currentWidgetPropValue&&"string"==typeof currentWidgetPropValue?JSON.parse(currentWidgetPropValue):currentWidgetPropValue)||[]).length){var currentPropPageName=currentWidgetPropValue[0],currentPropWidgetName=currentWidgetPropValue[1],currentPropWidgetPropName=currentWidgetPropValue[2];if(srcPageName==currentPropPageName&&srcWidgetName==currentPropWidgetName){var propName=currentWidgetPropName.split("__Child__")[1];widgetProperties[propName]=srcWidgetProps[currentPropWidgetPropName]}}}if(currentWidgetPropName.startsWith("__Sibling__")){var _currentWidgetPropValue=_this4.props.widgetProps[currentWidgetPropName];if(2==(_currentWidgetPropValue=(_currentWidgetPropValue=_currentWidgetPropValue&&"string"==typeof _currentWidgetPropValue?JSON.parse(_currentWidgetPropValue):_currentWidgetPropValue)||[]).length){var _currentPropWidgetName=_currentWidgetPropValue[0],_currentPropWidgetPropName=_currentWidgetPropValue[1];_this4.props.pageData.widgets&&Object.keys(_this4.props.pageData.widgets).map(function(siblingWidgetId){var siblingWidget=_this4.props.pageData.widgets[siblingWidgetId];if((siblingWidget.props&&siblingWidget.props.Name?siblingWidget.props.Name:siblingWidget.id)==_currentPropWidgetName&&siblingWidget.props&&siblingWidget.props[_currentPropWidgetPropName]){var _propName=currentWidgetPropName.split("__Sibling__")[1];widgetProperties[_propName]=siblingWidget.props[_currentPropWidgetPropName]}})}}if(currentWidgetPropName.startsWith("__State__")){var propValue=self.props.widgetProps[currentWidgetPropName],wpropName=currentWidgetPropName.split("__State__")[1];if(prevProps&&prevProps.widgetProps&&prevProps.widgetProps[wpropName]==_this4.props.widgetProps[wpropName]&&propValue&&self.props.pageState&&Object.keys(self.props.pageState).length>0){var newPropVal=lodashget(self.props.pageState,propValue);void 0!=newPropVal&&null!=newPropVal&&(widgetProperties[wpropName]="string"==typeof newPropVal||"boolean"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}}),!(widgetActions&&Object.keys(widgetActions).length>0)){_context5.next=22;break}return _context5.next=21,Object.keys(widgetActions).map(function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(widgetActionKey){var actionNameParts,notifier,result,data;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!(widgetActionKey.indexOf("__")>-1)){_context4.next=15;break}if(actionNameParts=widgetActionKey.split("__"),actionNameParts.slice(0,actionNameParts.length-1).join("__"),"Always"!=actionNameParts.slice(actionNameParts.length-1).join("")){_context4.next=15;break}if(notifier={getState:self.getPageState,setState:self.setPageState,setStateWithPreload:self.setPageStateWithPreload,setMenuItems:self.setMenuItems,openModal:self.props.openModal,closeModal:self.props.closeModal,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},!(result=widgetActions[widgetActionKey](self.props.pageData,widgetProperties,notifier,ctx)).then){_context4.next=14;break}return _context4.next=10,result;case 10:data=_context4.sent,widgetProperties=self.reconcileWidgetData(widgetProperties,data,self.props.pageState),_context4.next=15;break;case 14:widgetProperties=self.reconcileWidgetData(widgetProperties,result,self.props.pageState);case 15:case"end":return _context4.stop()}},_callee4,_this4)}));return function(_x8){return _ref5.apply(this,arguments)}}());case 21:_.isEqual(widgetProperties,self.props.widgetProps)?prevProps&&prevProps.currentWidget&&this.props.currentWidget&&prevProps.currentWidget.BubbledReload==this.props.currentWidget.BubbledReload&&"SrsTabs"==this.props.currentWidget.name&&((widgetProps=Object.assign({},this.props.widgetProps)).Reload=!widgetProps.Reload,this.props.updateStore({updates:{widgetProps:widgetProps}})):this.updateWidgetPropsAndAncestors(widgetProperties);case 22:case"end":return _context5.stop()}},_callee5,this)}));return function(_x7){return _ref4.apply(this,arguments)}}()},{key:"updateWidgetPropsAndAncestors",value:function(inputWidgetProps){var updatedWidgetProps=inputWidgetProps;if(this.props.currentWidget&&this.props.currentWidget.widgettree){var widgetTree=this.props.currentWidget.widgettree&&"string"==typeof this.props.currentWidget.widgettree?JSON.parse(this.props.currentWidget.widgettree):this.props.currentWidget.widgettree;if(widgetTree&&Object.keys(widgetTree).length>0){for(var pages=Object.assign({},this.props.pages),widgetTreeKey=Object.keys(widgetTree)[0];widgetTreeKey;){var widgetTreeKeyParts=widgetTreeKey&&widgetTreeKey.split("@@");if(widgetTreeKeyParts&&widgetTreeKeyParts.length>=2){var widgetTreeKeyWidgetId=widgetTreeKeyParts[0],widgetTreeKeyPageId=widgetTreeKeyParts[1];pages[widgetTreeKeyPageId]&&pages[widgetTreeKeyPageId].widgets&&pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId]&&(pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId].BubbledReload=!pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId].BubbledReload,pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId].BubbledSource=this.props.widgetid+"@@"+this.props.pageid+this.props.pagesuffix)}widgetTreeKey=(widgetTree=widgetTree[widgetTreeKey])&&Object.keys(widgetTree).length>0?Object.keys(widgetTree)[0]:null}updatedWidgetProps&&pages[this.props.pageid+this.props.pagesuffix]&&pages[this.props.pageid+this.props.pagesuffix].widgets&&(pages[this.props.pageid+this.props.pagesuffix].widgets[this.props.widgetid]=pages[this.props.pageid+this.props.pagesuffix].widgets[this.props.widgetid]||{},pages[this.props.pageid+this.props.pagesuffix].widgets[this.props.widgetid].props=updatedWidgetProps),this.props.updateStore({updates:{pages:pages}})}else updatedWidgetProps&&this.props.updateStore({updates:{widgetProps:updatedWidgetProps}})}else updatedWidgetProps&&this.props.updateStore({updates:{widgetProps:updatedWidgetProps}})}},{key:"executeOnDemandActions",value:function(triggerType,prevProps){var self=this;if(this.props.widgetid&&self.props.widgetProps){var widgetActionURL="/widget/"+this.props.widgetid+"/Action.js";self.props.nocache&&"true"==self.props.nocache&&(widgetActionURL=widgetActionURL+"?key="+Date.now()),System.import(widgetActionURL).then(function(actionsModule){var widgetActions=actionsModule.default,widgetProperties=cloneDeep(self.props.widgetProps);widgetActions&&Object.keys(widgetActions).length>0&&Object.keys(widgetActions).map(function(widgetActionKey){if(widgetActionKey.indexOf("__")>-1){var actionNameParts=widgetActionKey.split("__"),actionName=actionNameParts.slice(0,actionNameParts.length-1).join("__"),actionType=actionNameParts.slice(actionNameParts.length-1).join("");if(actionType==triggerType){var notifier={setState:self.setPageState,getState:self.getPageState,setStateWithPreload:self.setPageStateWithPreload,setMenuItems:self.setMenuItems,openModal:self.props.openModal,closeModal:self.props.closeModal,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},ctx={currentscope:self.props.currentscope,cloneDeep:cloneDeep};prevProps&&(ctx.prevpagedata=prevProps.pageData);try{var result=widgetActions[widgetActionKey](self.props.pageData,widgetProperties,notifier,ctx);result.then?result.then(function(data){widgetProperties=self.reconcileWidgetData(widgetProperties,data,self.props.pageState),self.props.widgetProps&&!_.isEqual(widgetProperties,self.props.widgetProps)&&self.props.updateStore({updates:{widgetProps:widgetProperties}})}):(widgetProperties=self.reconcileWidgetData(widgetProperties,result,self.props.pageState),self.props.widgetProps&&!_.isEqual(widgetProperties,self.props.widgetProps)&&self.updateWidgetPropsAndAncestors(widgetProperties))}catch(err){self.props.addErrorMessage({title:"SRS0001 - ",subtitle:"Something went wrong, please contact your system administrator."}),console.error(err.message)}}if("System"==actionType&&"onClick"==triggerType&&self.props.widgetProps&&self.props.widgetProps.ButtonAction&&self.props.widgetProps.ButtonAction==actionName){var _notifier={setState:self.setPageState,getState:self.getPageState,setStateWithPreload:self.setPageStateWithPreload,setMenuItems:self.setMenuItems,openModal:self.props.openModal,closeModal:self.props.closeModal,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_ctx={currentscope:self.props.currentscope,cloneDeep:cloneDeep};try{var _result=widgetActions[widgetActionKey](self.props.pageData,widgetProperties,_notifier,_ctx);_result.then?_result.then(function(data){widgetProperties=self.reconcileWidgetData(widgetProperties,data,self.props.pageState),self.props.widgetProps&&!_.isEqual(widgetProperties,self.props.widgetProps)&&self.updateWidgetPropsAndAncestors(widgetProperties)}):(widgetProperties=self.reconcileWidgetData(widgetProperties,_result,self.props.pageState),self.props.widgetProps&&!_.isEqual(widgetProperties,self.props.widgetProps)&&self.updateWidgetPropsAndAncestors(widgetProperties))}catch(err){self.props.addErrorMessage({title:"SRS0001 - ",subtitle:"Something went wrong, please contact your system administrator."}),console.error(err.message)}}}})}).catch(function(err){console.error(err)})}}},{key:"makeWidgetActive",value:function(e){this.props.pageid!=this.props.active_page_id||this.props.preview||this.props.updateStore({updates:{active_widget_id:this.props.widgetid,component_id:this.props.componentid}}),this.props.preview&&this.executeOnDemandActions("onClick")}},{key:"render",value:function(){var _this5=this,widgetKey=this.props.widgetid;"srs-board"!=this.widgetTag&&"planning-board"!=this.widgetTag||this.props.preview||(widgetKey="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)})),this.widgetTag=this.props.widgetProps&&this.props.widgetProps.Tag?this.props.widgetProps.Tag:this.props.tag?this.props.tag:"div";var extraProps={},widgetInstanceStyles={height:"inherit"};if(this.props.widgetProps){var widgetTree={},prevWidgetTree=this.props.currentWidget&&this.props.currentWidget.widgettree&&"string"==typeof this.props.currentWidget.widgettree?JSON.parse(this.props.currentWidget.widgettree):this.props.currentWidget?this.props.currentWidget.widgettree:{};if(this.props.pageData.name?this.props.pageData.name:this.props.widgetProps.Name?this.props.widgetProps.Name:"","page-designer-preview"==this.widgetTag){extraProps.previewpageid=this.props.widgetProps.PageId,extraProps.pagesuffix="";var tempPrevWidgetTree=prevWidgetTree?Object.assign({},prevWidgetTree):{};widgetTree[this.props.widgetid+"@@"+this.props.pageid+this.props.pagesuffix+"@@"+this.props.pageData.name]=tempPrevWidgetTree,extraProps.widgettree=JSON.stringify(widgetTree),extraProps.parentstate=JSON.stringify(this.props.pageState),extraProps.pagesuffix=this.props.pagesuffix}}this.props.lite&&"page-designer-preview"!=this.widgetTag&&(extraProps.lite=!0),"page-designer"==this.widgetTag&&(extraProps.as_widget=!0,extraProps.preview=this.props.preview),!this.props.widgetProps||"true"!=this.props.widgetProps.Invisible&&1!=this.props.widgetProps.Invisible||((widgetInstanceStyles=widgetInstanceStyles||{}).visibility="hidden");var allProps=Object.assign(_extends({},extraProps),{pageid:this.props.pageid,pagesuffix:this.props.pagesuffix,key:widgetKey},{style:widgetInstanceStyles,widgetid:this.props.widgetid,preview:this.props.preview,shadow:"srs-board"==this.widgetTag||"planning-board"==this.widgetTag||"page-designer-preview"==this.widgetTag||!!this.props.shadow,reload:this.state.reload});allProps.onecolumn=this.props.pageState&&this.props.pageState.oneColumn;var widgetInstance=React.createElement(this.widgetTag,allProps);return this.state.isWidgetPreLoaded?React.createElement("div",null,"Loading..."):React.createElement("div",{ref:this.widgetref,style:this.state.propAnchorStyle,onClick:this.makeWidgetActive},widgetInstance,this.props.preview?null:React.createElement("div",{style:{zIndex:100,position:"absolute",top:0,margin:2,right:0,textAlign:"right",width:200,cursor:"pointer",height:30}},React.createElement(Props20,{onClick:function(e){_this5.props.updateStore({updates:{active_widget_id:_this5.props.widgetid,show_widget_props:!_this5.props.show_widget_props}}),e.stopPropagation()},style:{cursor:"pointer",borderRadius:"50%",marginLeft:2,padding:2,border:"1px solid black",backgroundColor:"white"}}),React.createElement(Script20,{onClick:function(e){_this5.props.updateStore({updates:{active_widget_id:_this5.props.widgetid,show_widget_actions:!_this5.props.show_widget_actions}}),e.stopPropagation()},style:{cursor:"pointer",borderRadius:"50%",marginLeft:2,padding:2,border:"1px solid black",backgroundColor:"white"}}),React.createElement(Close20,{onClick:function(e){if(_this5.props.activePageWidgets){var widgets2Delete=cloneDeep(_this5.props.widgets2Delete);widgets2Delete.push(_this5.props.widgetid),_this5.props.updateStore({updates:{widgets2Delete:widgets2Delete}})}e.stopPropagation()},style:{cursor:"pointer",borderRadius:"50%",marginLeft:2,padding:2,border:"1px solid black",backgroundColor:"white"}})))}}]),_WidgetContainer_}(React.Component),_export("WidgetContainer",WidgetContainer=function(props){return _WidgetContainer_}),_export("WidgetContainer",WidgetContainer)}}}),System.register("component/studio/WorkItem.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_WorkItem_,WorkItem,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_WorkItem_=function(_React$Component){function _WorkItem_(){return _classCallCheck(this,_WorkItem_),_possibleConstructorReturn(this,(_WorkItem_.__proto__||Object.getPrototypeOf(_WorkItem_)).apply(this,arguments))}return _inherits(_WorkItem_,_React$Component),_createClass(_WorkItem_,[{key:"render",value:function(){return React.createElement("div",{style:{height:20,width:"80%",display:"flex"}},React.createElement("a",{href:"#",className:"bx--label",style:{marginLeft:10,width:"30%"}},"Fun1234"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Test123"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"34"))}}]),_WorkItem_}(React.Component),_export("WorkItem",WorkItem=function(props){return _WorkItem_}),_export("WorkItem",WorkItem),_export("default",WorkItem),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/WorkItem/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_WorkItem_,WorkItem;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_WorkItem_=function(_React$Component){function _WorkItem_(){return _classCallCheck(this,_WorkItem_),_possibleConstructorReturn(this,(_WorkItem_.__proto__||Object.getPrototypeOf(_WorkItem_)).apply(this,arguments))}return _inherits(_WorkItem_,_React$Component),_createClass(_WorkItem_,[{key:"render",value:function(){return React.createElement("div",{style:{height:20,width:"80%",display:"flex"}},React.createElement("a",{href:"#",className:"bx--label",style:{marginLeft:10,width:"30%"}},"Fun1234"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Test123"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"34"))}}]),_WorkItem_}(React.Component),_export("WorkItem",WorkItem=function(props){return _WorkItem_}),_export("WorkItem",WorkItem)}}});
System.register("client/agilecore_styles.js",[],function(_export,_context){"use strict";return _export("default",function(){return{}}),{setters:[],execute:function(){}}});
System.register("client/workflow_styles.js",[],function(_export,_context){"use strict";return _export("default",function(){return{WorkflowModeler:".properties {\n    width: 500px;\n    height: 100vh;\n}\n\n.container {\n    width: calc(100% - 500px);\n    height: 100vh;\n}\n\n.bpp-properties-panel {\n    height: inherit;\n}\n\n.hidden {\n  display: none;\n}\n\n.panel {\n  background-color: #fafafa;\n  border: solid 1px #ccc;\n  border-radius: 2px;\n  font-family: 'Arial', sans-serif;\n  padding: 10px;\n}\n\n.djs-label {\n  font-family: 'Arial', sans-serif;\n}\n\n.bpmn-icon-task.red {\n  color: #cc0000 !important;\n}\n\n.bpmn-icon-task.yellow {\n  color: #ffc800 !important;\n}\n\n.bpmn-icon-task.green {\n  color: #52B415 !important;\n}\n\n#service-configuration {\n    background-color: white;\n    border: 1px solid #008c00;\n    border-radius: 5px;\n    left: 20%;\n    position: absolute;\n    top: 20%;\n    width: 60%;\n    height: 60%;\n}\n\n#hint {\n  bottom: 20px;\n  left: 20px;\n  position: absolute;\n}\n\n.bjs-powered-by {\n    position: fixed !important;\n}\n\n",ServiceTaskConfig:"#head {\n    height: 100% !important;\n}\n\n",NewServiceTask:"/* add css styles to the component */\n\n"}}),{setters:[],execute:function(){}}}),System.register("component/workflow/NewServiceTask.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/persist/MMFAPI.js","carbon-components-react","react-codemirror","codemirror/mode/javascript/javascript","codemirror/mode/xml/xml","codemirror/mode/markdown/markdown","lodash.debounce","@carbon/icons-react/lib/terminal/32","@carbon/icons-react/lib/account/32","component/studio/SrsReference/Definition.js"],function(_export,_context3){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Select,SelectItem,Button,TextInput,ComboBox,CodeMirror,debounce,Editor32,Form32,SrsReference,_NewServiceTask_,NewServiceTask,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,_carbonComponentsReact.Checkbox,TextInput=_carbonComponentsReact.TextInput,ComboBox=_carbonComponentsReact.ComboBox,_carbonComponentsReact.Toggle},function(_reactCodemirror){CodeMirror=_reactCodemirror.default},function(_codemirrorModeJavascriptJavascript){},function(_codemirrorModeXmlXml){},function(_codemirrorModeMarkdownMarkdown){},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_carbonIconsReactLibTerminal){Editor32=_carbonIconsReactLibTerminal.default},function(_carbonIconsReactLibAccount){Form32=_carbonIconsReactLibAccount.default},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference}],execute:function(){_NewServiceTask_=function(_React$Component){function _NewServiceTask_(props,context){_classCallCheck(this,_NewServiceTask_);var _this=_possibleConstructorReturn(this,(_NewServiceTask_.__proto__||Object.getPrototypeOf(_NewServiceTask_)).call(this,props)),rowinfo=_this.props.rowinfo?JSON.parse(_this.props.rowinfo):{};return _this.defaultCode="(function() {\n\t//$live, $pageData, $fields, $widgets, $ctx\n})",_this.state={file_id:rowinfo.uid,Name:rowinfo.Name,Order:rowinfo.Order,Active:!rowinfo||rowinfo.Active,ActionType:"Widget",Trigger:rowinfo.Trigger,UpdateType:rowinfo.Type,Target:rowinfo.Target,Definition:rowinfo.Definition?rowinfo.Definition:_this.defaultCode,isNewRecord:!rowinfo||!rowinfo.uid,ComponentId:_this.props.component_id,ComponentName:"Unnamed"==_this.props.component_name?"":_this.props.component_name,Components:[],ComponentNames:{}},_this.topElement=React.createRef(),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.saveFormDebounced=debounce(function(){_this.saveData()},1e3),_this.saveAsFormDebounced=debounce(function(){_this.saveAsNewData()},1e3),_this.resetDataDebounced=debounce(function(){_this.resetData()},1e3),_this.componentUpdated=_this.componentUpdated.bind(_this),_this.loadComponents=_this.loadComponents.bind(_this),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%",width:"100%",textAlign:"left"},_this.modalButtonGroup={position:"absolute",marginRight:"5%",float:"right",right:0,bottom:20},$ele.registerElement("CodeEditor","studio","React"),_this}return _inherits(_NewServiceTask_,_React$Component),_createClass(_NewServiceTask_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.loadComponents();case 2:if(!this.state.file_id){_context.next=7;break}return _context.next=5,$qry.run("mmf.getWidgetActionById",{uid:this.state.file_id});case 5:(result=_context.sent)&&(this.setState({Name:result.Name,Order:result.Order,Active:result.Active,Trigger:result.Trigger,ActionType:result.Widget?"Widget":"Global",Definition:result.Definition?result.Definition:function(){}}),this.refs.editor.getCodeMirror().setValue(result.Definition));case 7:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps){var rowinfo,prevRowInfo,payload,result;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(prevProps.rowinfo==this.props.rowinfo){_context2.next=18;break}if(rowinfo=this.props.rowinfo?JSON.parse(this.props.rowinfo):{},prevRowInfo=prevProps.rowinfo?JSON.parse(prevProps.rowinfo):{},payload={file_id:rowinfo.uid,Name:rowinfo.Name,Order:rowinfo.Order,Active:!rowinfo||rowinfo.Active,ActionType:"Widget",Trigger:rowinfo.Trigger,UpdateType:rowinfo.Type,Target:rowinfo.Target,Definition:rowinfo.Definition?rowinfo.Definition:this.defaultCode,isNewRecord:!rowinfo||!rowinfo.uid,ComponentId:this.props.component_id,ComponentName:"Unnamed"==this.props.component_name?"":this.props.component_name,Components:[],ComponentNames:[]},rowinfo.uid==prevRowInfo.uid||!rowinfo.uid){_context2.next=11;break}return _context2.next=7,$qry.run("mmf.getWidgetActionById",{uid:rowinfo.uid});case 7:(result=_context2.sent)&&(payload.Name=result.Name,payload.Order=result.Order,payload.Active=result.Active,payload.Trigger=result.Trigger,payload.ActionType=result.Widget?"Widget":"Global",payload.Definition=result.Definition?result.Definition:this.defaultCode,payload.isNewRecord=!1,this.refs.editor.getCodeMirror().setValue(result.Definition?result.Definition:this.defaultCode)),_context2.next=17;break;case 11:payload.Name="",payload.Order="",payload.Active=!0,payload.Definition=this.defaultCode,payload.isNewRecord=!0,this.refs.editor.getCodeMirror().setValue(this.defaultCode);case 17:this.setState(_extends({},payload));case 18:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"codeChanged",value:function(newValue){this.setState({Definition:newValue})}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponents","{}",function(results){var components=[],componentNames={};results&&(results.forEach(function(componentObj){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;components.push({id:componentId,text:componentLabel}),componentNames[componentLabel]=null}),components&&self.setState({Components:components,ComponentNames:componentNames}))})}},{key:"onChange",value:function(e,type){var newValue=e.target.value,stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",Order:"",Active:"",Trigger:"",Definition:""})}},{key:"saveAsNewData",value:function(){var _this2=this,widgetName=this.state.Name;this.state.Name&&-1==this.state.Name.indexOf("@@")&&(widgetName=this.state.Name+"@@"+this.props.activePage.name+"_"+this.props.activePage.scope);var data={Name:widgetName,Scope:this.props.currentscope,Order:this.state.Order,Active:this.state.Active,Widget:"Widget"==this.state.ActionType?this.props.active_widget_id:"",Trigger:this.state.Trigger,Definition:this.state.Definition};MMFAPI().createRecord("MetaWidgetAction",data,["uid"],function(result){result&&result.uid?(_this2.setState({file_id:result.uid,isNewRecord:!1}),_this2.props.addFlashMessage({title:"Success - ",subtitle:"Widget action created successfully."})):_this2.props.addErrorMessage({title:"Error - ",subtitle:"Provide the mandatory fields and try again."})})}},{key:"componentUpdated",value:function(componentValue){this.setState({ComponentName:componentValue,ComponentId:this.state.Components[componentValue]})}},{key:"saveData",value:function(){var _this3=this,widgetName=this.state.Name;this.state.Name&&-1==this.state.Name.indexOf("@@")&&(widgetName=this.state.Name+"@@"+this.props.activePage.name+"_"+this.props.activePage.scope);var data={Name:widgetName,Scope:this.props.currentscope,Order:this.state.Order,Active:this.state.Active,Widget:"Widget"==this.state.ActionType?this.props.active_widget_id:"",Trigger:this.state.Trigger,Definition:this.state.Definition};this.state.file_id?MMFAPI().updateRecord("MetaWidgetAction",this.state.file_id,data,["uid"],function(result){result&&result.uid?(_this3.setState({file_id:result.uid}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Widget action updated successfully."})):result&&!result.errors||_this3.props.addErrorMessage({title:"Error - ",subtitle:"Widget action update operation failed."})}):MMFAPI().createRecord("MetaWidgetAction",data,["uid"],function(result){result&&result.uid?(_this3.setState({file_id:result.uid,isNewRecord:!1}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Widget action created successfully."})):result&&result.errors&&_this3.props.addErrorMessage({title:"Error - ",subtitle:"Widget action create operation failed."})})}},{key:"render",value:function(){var _this4=this,uidField=this.state.file_id?React.createElement(TextInput,{s:3,required:"required",value:this.state.file_id,disabled:"true"}):uidField,normalView=React.createElement(React.Fragment,null,React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Task Name...",onChange:function(e){return _this4.onChange(e,"Name")},labelText:"Service Task Name",required:"required",value:this.state.Name}),React.createElement(Select,{labelText:"Mapper Type",onChange:function(e){_this4.setState({mapperType:e.target.value})},id:"tasktype",value:this.state.mapperType?this.state.mapperType:"Component"},React.createElement(SelectItem,{value:"Component",text:"component"}),React.createElement(SelectItem,{value:"Page",text:"page"}))),React.createElement("div",{style:this.groupElementStyle},"component"==this.state.mapperType?React.createElement(ComboBox,_extends({},{ariaLabel:"Choose an item",disabled:!1,light:!1,placeholder:"Filter",titleText:"Mapper Component",type:"default"},{itemToString:function(item){return item?item.text:""},items:this.state.Components,onChange:function(selectedItem){console.log(selectedItem)}})):React.createElement(SrsReference,_extends({},{title:"Mapper Page",tablename:"MetaSlide",displayfield:"Name",filter:"{}",searchfields:"Name",defaultValue:""},{onChange:function(selectedItem){console.log(selectedItem)}}))),React.createElement("div",{style:{marginBottom:"2%",paddingTop:20,width:"70%",clear:"both"}},React.createElement(CodeMirror,{ref:"editor",value:this.state.Definition,onChange:this.codeChanged,options:{mode:"javascript",theme:"material-darker",width:"70%",height:"50vh",styleActiveLine:!0,lineNumbers:!0,autofocus:!0,lineWrapping:!0},autoFocus:!0})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",size:"small",onClick:function(e){return _this4.saveFormDebounced()}},"Save"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.saveAsFormDebounced()}},"Save As")));return React.createElement("div",{ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/codemirror.css");'),this.state.isNewRecord?React.createElement("h4",{style:this.headerStyle},"New Widget Action - Form"):React.createElement("h4",{style:this.headerStyle},"Widget Action - Edit Form"),this.state.isNewRecord?null:this.state.showingIde?React.createElement(Form32,{style:{position:"absolute",top:0,right:20},onClick:function(e){return _this4.setState({showingIde:!1})}}):React.createElement(Editor32,{style:{position:"absolute",top:0,right:20},onClick:function(e){return _this4.setState({showingIde:!0})}}),normalView)}}]),_NewServiceTask_}(React.Component),_export("NewServiceTask",NewServiceTask=function(props){return _NewServiceTask_}),_export("NewServiceTask",NewServiceTask),_export("default",NewServiceTask),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/workflow/NewServiceTask/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/persist/MMFAPI.js","carbon-components-react","react-codemirror","codemirror/mode/javascript/javascript","codemirror/mode/xml/xml","codemirror/mode/markdown/markdown","lodash.debounce","@carbon/icons-react/lib/terminal/32","@carbon/icons-react/lib/account/32","component/studio/SrsReference/Definition.js"],function(_export,_context3){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Select,SelectItem,Button,TextInput,ComboBox,CodeMirror,debounce,Editor32,Form32,SrsReference,_NewServiceTask_,NewServiceTask;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,_carbonComponentsReact.Checkbox,TextInput=_carbonComponentsReact.TextInput,ComboBox=_carbonComponentsReact.ComboBox,_carbonComponentsReact.Toggle},function(_reactCodemirror){CodeMirror=_reactCodemirror.default},function(_codemirrorModeJavascriptJavascript){},function(_codemirrorModeXmlXml){},function(_codemirrorModeMarkdownMarkdown){},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_carbonIconsReactLibTerminal){Editor32=_carbonIconsReactLibTerminal.default},function(_carbonIconsReactLibAccount){Form32=_carbonIconsReactLibAccount.default},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference}],execute:function(){_NewServiceTask_=function(_React$Component){function _NewServiceTask_(props,context){_classCallCheck(this,_NewServiceTask_);var _this=_possibleConstructorReturn(this,(_NewServiceTask_.__proto__||Object.getPrototypeOf(_NewServiceTask_)).call(this,props)),rowinfo=_this.props.rowinfo?JSON.parse(_this.props.rowinfo):{};return _this.defaultCode="(function() {\n\t//$live, $pageData, $fields, $widgets, $ctx\n})",_this.state={file_id:rowinfo.uid,Name:rowinfo.Name,Order:rowinfo.Order,Active:!rowinfo||rowinfo.Active,ActionType:"Widget",Trigger:rowinfo.Trigger,UpdateType:rowinfo.Type,Target:rowinfo.Target,Definition:rowinfo.Definition?rowinfo.Definition:_this.defaultCode,isNewRecord:!rowinfo||!rowinfo.uid,ComponentId:_this.props.component_id,ComponentName:"Unnamed"==_this.props.component_name?"":_this.props.component_name,Components:[],ComponentNames:{}},_this.topElement=React.createRef(),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this.saveFormDebounced=debounce(function(){_this.saveData()},1e3),_this.saveAsFormDebounced=debounce(function(){_this.saveAsNewData()},1e3),_this.resetDataDebounced=debounce(function(){_this.resetData()},1e3),_this.componentUpdated=_this.componentUpdated.bind(_this),_this.loadComponents=_this.loadComponents.bind(_this),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%",width:"100%",textAlign:"left"},_this.modalButtonGroup={position:"absolute",marginRight:"5%",float:"right",right:0,bottom:20},$ele.registerElement("CodeEditor","studio","React"),_this}return _inherits(_NewServiceTask_,_React$Component),_createClass(_NewServiceTask_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.loadComponents();case 2:if(!this.state.file_id){_context.next=7;break}return _context.next=5,$qry.run("mmf.getWidgetActionById",{uid:this.state.file_id});case 5:(result=_context.sent)&&(this.setState({Name:result.Name,Order:result.Order,Active:result.Active,Trigger:result.Trigger,ActionType:result.Widget?"Widget":"Global",Definition:result.Definition?result.Definition:function(){}}),this.refs.editor.getCodeMirror().setValue(result.Definition));case 7:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps){var rowinfo,prevRowInfo,payload,result;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(prevProps.rowinfo==this.props.rowinfo){_context2.next=18;break}if(rowinfo=this.props.rowinfo?JSON.parse(this.props.rowinfo):{},prevRowInfo=prevProps.rowinfo?JSON.parse(prevProps.rowinfo):{},payload={file_id:rowinfo.uid,Name:rowinfo.Name,Order:rowinfo.Order,Active:!rowinfo||rowinfo.Active,ActionType:"Widget",Trigger:rowinfo.Trigger,UpdateType:rowinfo.Type,Target:rowinfo.Target,Definition:rowinfo.Definition?rowinfo.Definition:this.defaultCode,isNewRecord:!rowinfo||!rowinfo.uid,ComponentId:this.props.component_id,ComponentName:"Unnamed"==this.props.component_name?"":this.props.component_name,Components:[],ComponentNames:[]},rowinfo.uid==prevRowInfo.uid||!rowinfo.uid){_context2.next=11;break}return _context2.next=7,$qry.run("mmf.getWidgetActionById",{uid:rowinfo.uid});case 7:(result=_context2.sent)&&(payload.Name=result.Name,payload.Order=result.Order,payload.Active=result.Active,payload.Trigger=result.Trigger,payload.ActionType=result.Widget?"Widget":"Global",payload.Definition=result.Definition?result.Definition:this.defaultCode,payload.isNewRecord=!1,this.refs.editor.getCodeMirror().setValue(result.Definition?result.Definition:this.defaultCode)),_context2.next=17;break;case 11:payload.Name="",payload.Order="",payload.Active=!0,payload.Definition=this.defaultCode,payload.isNewRecord=!0,this.refs.editor.getCodeMirror().setValue(this.defaultCode);case 17:this.setState(_extends({},payload));case 18:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"codeChanged",value:function(newValue){this.setState({Definition:newValue})}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponents","{}",function(results){var components=[],componentNames={};results&&(results.forEach(function(componentObj){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;components.push({id:componentId,text:componentLabel}),componentNames[componentLabel]=null}),components&&self.setState({Components:components,ComponentNames:componentNames}))})}},{key:"onChange",value:function(e,type){var newValue=e.target.value,stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",Order:"",Active:"",Trigger:"",Definition:""})}},{key:"saveAsNewData",value:function(){var _this2=this,widgetName=this.state.Name;this.state.Name&&-1==this.state.Name.indexOf("@@")&&(widgetName=this.state.Name+"@@"+this.props.activePage.name+"_"+this.props.activePage.scope);var data={Name:widgetName,Scope:this.props.currentscope,Order:this.state.Order,Active:this.state.Active,Widget:"Widget"==this.state.ActionType?this.props.active_widget_id:"",Trigger:this.state.Trigger,Definition:this.state.Definition};MMFAPI().createRecord("MetaWidgetAction",data,["uid"],function(result){result&&result.uid?(_this2.setState({file_id:result.uid,isNewRecord:!1}),_this2.props.addFlashMessage({title:"Success - ",subtitle:"Widget action created successfully."})):_this2.props.addErrorMessage({title:"Error - ",subtitle:"Provide the mandatory fields and try again."})})}},{key:"componentUpdated",value:function(componentValue){this.setState({ComponentName:componentValue,ComponentId:this.state.Components[componentValue]})}},{key:"saveData",value:function(){var _this3=this,widgetName=this.state.Name;this.state.Name&&-1==this.state.Name.indexOf("@@")&&(widgetName=this.state.Name+"@@"+this.props.activePage.name+"_"+this.props.activePage.scope);var data={Name:widgetName,Scope:this.props.currentscope,Order:this.state.Order,Active:this.state.Active,Widget:"Widget"==this.state.ActionType?this.props.active_widget_id:"",Trigger:this.state.Trigger,Definition:this.state.Definition};this.state.file_id?MMFAPI().updateRecord("MetaWidgetAction",this.state.file_id,data,["uid"],function(result){result&&result.uid?(_this3.setState({file_id:result.uid}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Widget action updated successfully."})):result&&!result.errors||_this3.props.addErrorMessage({title:"Error - ",subtitle:"Widget action update operation failed."})}):MMFAPI().createRecord("MetaWidgetAction",data,["uid"],function(result){result&&result.uid?(_this3.setState({file_id:result.uid,isNewRecord:!1}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Widget action created successfully."})):result&&result.errors&&_this3.props.addErrorMessage({title:"Error - ",subtitle:"Widget action create operation failed."})})}},{key:"render",value:function(){var _this4=this,uidField=this.state.file_id?React.createElement(TextInput,{s:3,required:"required",value:this.state.file_id,disabled:"true"}):uidField,normalView=React.createElement(React.Fragment,null,React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Task Name...",onChange:function(e){return _this4.onChange(e,"Name")},labelText:"Service Task Name",required:"required",value:this.state.Name}),React.createElement(Select,{labelText:"Mapper Type",onChange:function(e){_this4.setState({mapperType:e.target.value})},id:"tasktype",value:this.state.mapperType?this.state.mapperType:"Component"},React.createElement(SelectItem,{value:"Component",text:"component"}),React.createElement(SelectItem,{value:"Page",text:"page"}))),React.createElement("div",{style:this.groupElementStyle},"component"==this.state.mapperType?React.createElement(ComboBox,_extends({},{ariaLabel:"Choose an item",disabled:!1,light:!1,placeholder:"Filter",titleText:"Mapper Component",type:"default"},{itemToString:function(item){return item?item.text:""},items:this.state.Components,onChange:function(selectedItem){console.log(selectedItem)}})):React.createElement(SrsReference,_extends({},{title:"Mapper Page",tablename:"MetaSlide",displayfield:"Name",filter:"{}",searchfields:"Name",defaultValue:""},{onChange:function(selectedItem){console.log(selectedItem)}}))),React.createElement("div",{style:{marginBottom:"2%",paddingTop:20,width:"70%",clear:"both"}},React.createElement(CodeMirror,{ref:"editor",value:this.state.Definition,onChange:this.codeChanged,options:{mode:"javascript",theme:"material-darker",width:"70%",height:"50vh",styleActiveLine:!0,lineNumbers:!0,autofocus:!0,lineWrapping:!0},autoFocus:!0})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",size:"small",onClick:function(e){return _this4.saveFormDebounced()}},"Save"),React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this4.saveAsFormDebounced()}},"Save As")));return React.createElement("div",{ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/codemirror.css");'),this.state.isNewRecord?React.createElement("h4",{style:this.headerStyle},"New Widget Action - Form"):React.createElement("h4",{style:this.headerStyle},"Widget Action - Edit Form"),this.state.isNewRecord?null:this.state.showingIde?React.createElement(Form32,{style:{position:"absolute",top:0,right:20},onClick:function(e){return _this4.setState({showingIde:!1})}}):React.createElement(Editor32,{style:{position:"absolute",top:0,right:20},onClick:function(e){return _this4.setState({showingIde:!0})}}),normalView)}}]),_NewServiceTask_}(React.Component),_export("NewServiceTask",NewServiceTask=function(props){return _NewServiceTask_}),_export("NewServiceTask",NewServiceTask)}}}),System.register("component/workflow/RecordForm.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_RecordForm_,RecordForm,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_RecordForm_=function(_React$Component){function _RecordForm_(){return _classCallCheck(this,_RecordForm_),_possibleConstructorReturn(this,(_RecordForm_.__proto__||Object.getPrototypeOf(_RecordForm_)).apply(this,arguments))}return _inherits(_RecordForm_,_React$Component),_createClass(_RecordForm_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Record Form!"),React.createElement("input",{type:"text"}))}}]),_RecordForm_}(React.Component),_export("RecordForm",RecordForm=function(props){return _RecordForm_}),_export("RecordForm",RecordForm),_export("default",RecordForm),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/workflow/RecordForm/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_RecordForm_,RecordForm;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_RecordForm_=function(_React$Component){function _RecordForm_(){return _classCallCheck(this,_RecordForm_),_possibleConstructorReturn(this,(_RecordForm_.__proto__||Object.getPrototypeOf(_RecordForm_)).apply(this,arguments))}return _inherits(_RecordForm_,_React$Component),_createClass(_RecordForm_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Record Form!"),React.createElement("input",{type:"text"}))}}]),_RecordForm_}(React.Component),_export("RecordForm",RecordForm=function(props){return _RecordForm_}),_export("RecordForm",RecordForm)}}}),System.register("component/workflow/ServiceTaskConfig.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","component/studio/SrsReference/Definition.js","component/mmf/ComponentWrapper/Definition.js","bpmn-js/lib/util/ModelUtil","component/studio/RenderComponent/Definition.js"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SrsReference,ComponentWrapper,RenderComponent,_ServiceTaskConfig_,ServiceTaskConfig,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,_carbonComponentsReact.Button,_carbonComponentsReact.Checkbox,_carbonComponentsReact.TextInput},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_componentMmfComponentWrapperDefinitionJs){ComponentWrapper=_componentMmfComponentWrapperDefinitionJs.ComponentWrapper},function(_bpmnJsLibUtilModelUtil){_bpmnJsLibUtilModelUtil.is,_bpmnJsLibUtilModelUtil.getBusinessObject},function(_componentStudioRenderComponentDefinitionJs){RenderComponent=_componentStudioRenderComponentDefinitionJs.RenderComponent}],execute:function(){_ServiceTaskConfig_=function(_React$Component){function _ServiceTaskConfig_(props){_classCallCheck(this,_ServiceTaskConfig_);var _this=_possibleConstructorReturn(this,(_ServiceTaskConfig_.__proto__||Object.getPrototypeOf(_ServiceTaskConfig_)).call(this,props));return _this.getServiceTaskMapper=_this.getServiceTaskMapper.bind(_this),$ele&&$ele.registerElement("PageDesignerPreview","studio","React"),_this.state={taskMapper:null},_this}return _inherits(_ServiceTaskConfig_,_React$Component),_createClass(_ServiceTaskConfig_,[{key:"getServiceTaskMapper",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(taskId,elemId){var props,serviceTaskRecord,componentRecord,ServiceTaskMapper,pageProps,pageEl;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return props={},_context.next=3,$qry.getRecords("ServiceTask_workflow",{where:{uid:taskId}},["TaskMapper","MapperType"]);case 3:if(serviceTaskRecord=_context.sent,console.log(serviceTaskRecord),!serviceTaskRecord||1!=serviceTaskRecord.length){_context.next=17;break}if("component"!=serviceTaskRecord[0].MapperType){_context.next=13;break}return _context.next=9,$qry.getRecords("MetaComponent",{where:{uid:serviceTaskRecord[0].TaskMapper}},["Name","Scope","Type"]);case 9:(componentRecord=_context.sent)&&componentRecord.length>0&&(componentRecord=componentRecord[0],props.componentname=componentRecord.Name,props.componentscope=componentRecord.Scope,props.componenttype=componentRecord.Type,props.keyprop="id",ServiceTaskMapper=ComponentWrapper(props),this.setState({taskMapper:React.createElement(ServiceTaskMapper,{elementid:elemId})})),_context.next=17;break;case 13:this.pageId=serviceTaskRecord[0].TaskMapper,pageProps={shadow:!0,style:{height:"inherit",width:"100%"},previewpageid:this.pageId,pagesuffix:"",preview:"true",responsive:"true",widgetspacing:"false",overlayfitcontent:"true"},pageEl=React.createElement("page-designer-preview",pageProps),this.setState({taskMapper:React.createElement("div",{style:{height:"85%",maxHeight:"85%",overflow:"auto",marginTop:10,backgroundColor:"white"}},pageEl)});case 17:case"end":return _context.stop()}},_callee,this)}));return function(_x,_x2){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(prevProps,prevState){if(this.props.pagesState&&this.props.pagesState[this.pageId]){var taskConfig=this.props.pagesState[this.pageId].taskConfig;if(taskConfig&&Object.keys(taskConfig).length>0){var wfElementsData=Object.assign({},this.props.wfElementsData);wfElementsData[this.props.elementid]=wfElementsData[this.props.elementid]||{},wfElementsData[this.props.elementid].taskConfig=taskConfig,this.props.updateStore({updates:{wfElementsData:wfElementsData}})}}}},{key:"render",value:function(){SrsReference();var Component2Render=RenderComponent(),componentprops={templateid:"7753c6c0-9a12-11eb-88f1-119921dbf335",key:this.props.elementid,inlinestyles:"\n                #head {\n                    height: 100% !important;\n                }\n\n                .form_header { \n                    padding: 0px !important;\n                    height: 100% !important;\n                }\n        "},configEl=React.createElement(Component2Render,{key:this.props.elementid||Date.now(),name:"SrsDynamicForm",scope:"studio",params:componentprops});return React.createElement(React.Fragment,null,configEl)}}]),_ServiceTaskConfig_}(React.Component),_export("ServiceTaskConfig",ServiceTaskConfig=function(props){return _ServiceTaskConfig_}),_export("ServiceTaskConfig",ServiceTaskConfig),_export("default",ServiceTaskConfig),_export("states",states=[{KeyName:"pagesState",AccessPath:"pagestate",DefaultValue:'{"pagestate": {}}'},{KeyName:"wfElementsData",AccessPath:"workflow.elements",DefaultValue:'{"workflow": {"elements": {}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/workflow/ServiceTaskConfig/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","component/studio/SrsReference/Definition.js","component/mmf/ComponentWrapper/Definition.js","bpmn-js/lib/util/ModelUtil","component/studio/RenderComponent/Definition.js"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SrsReference,ComponentWrapper,RenderComponent,_ServiceTaskConfig_,ServiceTaskConfig;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,_carbonComponentsReact.Button,_carbonComponentsReact.Checkbox,_carbonComponentsReact.TextInput},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_componentMmfComponentWrapperDefinitionJs){ComponentWrapper=_componentMmfComponentWrapperDefinitionJs.ComponentWrapper},function(_bpmnJsLibUtilModelUtil){_bpmnJsLibUtilModelUtil.is,_bpmnJsLibUtilModelUtil.getBusinessObject},function(_componentStudioRenderComponentDefinitionJs){RenderComponent=_componentStudioRenderComponentDefinitionJs.RenderComponent}],execute:function(){_ServiceTaskConfig_=function(_React$Component){function _ServiceTaskConfig_(props){_classCallCheck(this,_ServiceTaskConfig_);var _this=_possibleConstructorReturn(this,(_ServiceTaskConfig_.__proto__||Object.getPrototypeOf(_ServiceTaskConfig_)).call(this,props));return _this.getServiceTaskMapper=_this.getServiceTaskMapper.bind(_this),$ele&&$ele.registerElement("PageDesignerPreview","studio","React"),_this.state={taskMapper:null},_this}return _inherits(_ServiceTaskConfig_,_React$Component),_createClass(_ServiceTaskConfig_,[{key:"getServiceTaskMapper",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(taskId,elemId){var props,serviceTaskRecord,componentRecord,ServiceTaskMapper,pageProps,pageEl;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return props={},_context.next=3,$qry.getRecords("ServiceTask_workflow",{where:{uid:taskId}},["TaskMapper","MapperType"]);case 3:if(serviceTaskRecord=_context.sent,console.log(serviceTaskRecord),!serviceTaskRecord||1!=serviceTaskRecord.length){_context.next=17;break}if("component"!=serviceTaskRecord[0].MapperType){_context.next=13;break}return _context.next=9,$qry.getRecords("MetaComponent",{where:{uid:serviceTaskRecord[0].TaskMapper}},["Name","Scope","Type"]);case 9:(componentRecord=_context.sent)&&componentRecord.length>0&&(componentRecord=componentRecord[0],props.componentname=componentRecord.Name,props.componentscope=componentRecord.Scope,props.componenttype=componentRecord.Type,props.keyprop="id",ServiceTaskMapper=ComponentWrapper(props),this.setState({taskMapper:React.createElement(ServiceTaskMapper,{elementid:elemId})})),_context.next=17;break;case 13:this.pageId=serviceTaskRecord[0].TaskMapper,pageProps={shadow:!0,style:{height:"inherit",width:"100%"},previewpageid:this.pageId,pagesuffix:"",preview:"true",responsive:"true",widgetspacing:"false",overlayfitcontent:"true"},pageEl=React.createElement("page-designer-preview",pageProps),this.setState({taskMapper:React.createElement("div",{style:{height:"85%",maxHeight:"85%",overflow:"auto",marginTop:10,backgroundColor:"white"}},pageEl)});case 17:case"end":return _context.stop()}},_callee,this)}));return function(_x,_x2){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(prevProps,prevState){if(this.props.pagesState&&this.props.pagesState[this.pageId]){var taskConfig=this.props.pagesState[this.pageId].taskConfig;if(taskConfig&&Object.keys(taskConfig).length>0){var wfElementsData=Object.assign({},this.props.wfElementsData);wfElementsData[this.props.elementid]=wfElementsData[this.props.elementid]||{},wfElementsData[this.props.elementid].taskConfig=taskConfig,this.props.updateStore({updates:{wfElementsData:wfElementsData}})}}}},{key:"render",value:function(){SrsReference();var Component2Render=RenderComponent(),componentprops={templateid:"7753c6c0-9a12-11eb-88f1-119921dbf335",key:this.props.elementid,inlinestyles:"\n                #head {\n                    height: 100% !important;\n                }\n\n                .form_header { \n                    padding: 0px !important;\n                    height: 100% !important;\n                }\n        "},configEl=React.createElement(Component2Render,{key:this.props.elementid||Date.now(),name:"SrsDynamicForm",scope:"studio",params:componentprops});return React.createElement(React.Fragment,null,configEl)}}]),_ServiceTaskConfig_}(React.Component),_export("ServiceTaskConfig",ServiceTaskConfig=function(props){return _ServiceTaskConfig_}),_export("ServiceTaskConfig",ServiceTaskConfig)}}}),System.register("component/workflow/WFCreateRecordMapper.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_WFCreateRecordMapper_,WFCreateRecordMapper,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_WFCreateRecordMapper_=function(_React$Component){function _WFCreateRecordMapper_(){return _classCallCheck(this,_WFCreateRecordMapper_),_possibleConstructorReturn(this,(_WFCreateRecordMapper_.__proto__||Object.getPrototypeOf(_WFCreateRecordMapper_)).apply(this,arguments))}return _inherits(_WFCreateRecordMapper_,_React$Component),_createClass(_WFCreateRecordMapper_,[{key:"render",value:function(){return React.createElement("div",{style:{height:"inherit"}})}}]),_WFCreateRecordMapper_}(React.Component),_export("WFCreateRecordMapper",WFCreateRecordMapper=function(props){return _WFCreateRecordMapper_}),_export("WFCreateRecordMapper",WFCreateRecordMapper),_export("default",WFCreateRecordMapper),_export("states",states=[{KeyName:"wfElementData",AccessPath:"workflow.elements.${elementid}",DefaultValue:'{"workflow": {"elements": {"${elementid}": {}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/workflow/WFCreateRecordMapper/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_WFCreateRecordMapper_,WFCreateRecordMapper;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_WFCreateRecordMapper_=function(_React$Component){function _WFCreateRecordMapper_(){return _classCallCheck(this,_WFCreateRecordMapper_),_possibleConstructorReturn(this,(_WFCreateRecordMapper_.__proto__||Object.getPrototypeOf(_WFCreateRecordMapper_)).apply(this,arguments))}return _inherits(_WFCreateRecordMapper_,_React$Component),_createClass(_WFCreateRecordMapper_,[{key:"render",value:function(){return React.createElement("div",{style:{height:"inherit"}})}}]),_WFCreateRecordMapper_}(React.Component),_export("WFCreateRecordMapper",WFCreateRecordMapper=function(props){return _WFCreateRecordMapper_}),_export("WFCreateRecordMapper",WFCreateRecordMapper)}}}),System.register("component/workflow/WorkflowModeler.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","https://unpkg.com/bpmn-js@7.4.0/dist/assets/bpmn-font/css/bpmn.css!css","https://unpkg.com/bpmn-js-properties-panel@0.37.3/dist/assets/bpmn-js-properties-panel.css!css","client/script/workflow/CustomContextPad.js","client/script/workflow/CustomPalette.js","client/script/workflow/CustomRenderer.js","client/script/workflow/BPMNMoodle.js","client/script/workflow/CamundaProps.js","bpmn-js/lib/util/ModelUtil"],function(_export,_context6){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,CustomContextPad,CustomPalette,CustomRenderer,camundaModdleDescriptor,getBusinessObject,_WorkflowModeler_,WorkflowModeler,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_httpsUnpkgComBpmnJs740DistAssetsBpmnFontCssBpmnCssCss){},function(_httpsUnpkgComBpmnJsPropertiesPanel0373DistAssetsBpmnJsPropertiesPanelCssCss){},function(_clientScriptWorkflowCustomContextPadJs){CustomContextPad=_clientScriptWorkflowCustomContextPadJs.default},function(_clientScriptWorkflowCustomPaletteJs){CustomPalette=_clientScriptWorkflowCustomPaletteJs.default},function(_clientScriptWorkflowCustomRendererJs){CustomRenderer=_clientScriptWorkflowCustomRendererJs.default},function(_clientScriptWorkflowBPMNMoodleJs){_clientScriptWorkflowBPMNMoodleJs.default},function(_clientScriptWorkflowCamundaPropsJs){camundaModdleDescriptor=_clientScriptWorkflowCamundaPropsJs.default},function(_bpmnJsLibUtilModelUtil){_bpmnJsLibUtilModelUtil.is,getBusinessObject=_bpmnJsLibUtilModelUtil.getBusinessObject}],execute:function(){_WorkflowModeler_=function(_React$Component){function _WorkflowModeler_(props){_classCallCheck(this,_WorkflowModeler_);var _this=_possibleConstructorReturn(this,(_WorkflowModeler_.__proto__||Object.getPrototypeOf(_WorkflowModeler_)).call(this,props)),activityInfo={};try{_this.props.activityinfo&&"string"==typeof _this.props.activityinfo&&(activityInfo=JSON.parse(_this.props.activityinfo))}catch(err){}return _this.importHandler=function(err){if(err)return console.error("Could not import BPMN 2.0 diagram",err)},_this.state={defaultXML:_this.props.inputxml?_this.props.inputxml:'<?xml version="1.0" encoding="UTF-8"?>\n                            <bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd">\n                                <bpmn2:process id="easy_starter_1" isExecutable="true">\n                                    <bpmn2:startEvent id="StartEvent_1" name="Starter">\n                                        <bpmn2:messageEventDefinition id="MessageEventDefinition_1cmsr41" messageRef="Message_1aijrsk" />\n                                    </bpmn2:startEvent>\n                                </bpmn2:process>\n                                <bpmn2:message id="Message_1aijrsk" name="easy_starter_1" />\n                                <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n                                    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="easy_starter_1">\n                                        <bpmndi:BPMNShape id="Event_0noed7l_di" bpmnElement="StartEvent_1">\n                                            <dc:Bounds x="482" y="172" width="36" height="36" />\n                                            <bpmndi:BPMNLabel>\n                                                <dc:Bounds x="483" y="215" width="35" height="14" />\n                                            </bpmndi:BPMNLabel>\n                                        </bpmndi:BPMNShape>\n                                    </bpmndi:BPMNPlane>\n                                </bpmndi:BPMNDiagram></bpmn2:definitions>',showTaskConfig:!1,activityInfo:activityInfo},_this.eventHandler=_this.eventHandler.bind(_this),_this.getExtensionElement=_this.getExtensionElement.bind(_this),_this.updateWidgetProps=_this.updateWidgetProps.bind(_this),_this.elements={},$ele.registerElement("ServiceTaskConfig","workflow","React"),_this}return _inherits(_WorkflowModeler_,_React$Component),_createClass(_WorkflowModeler_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var BpmnModeler,propertiesPanelModule,propertiesProviderModule,container,propertiesPane,self,additionalModules1,propertiesPanel,_this2=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,System.import("ids");case 2:return window.Ids=_context.sent,_context.next=5,System.import("bpmn-js/lib/Modeler.js");case 5:return BpmnModeler=_context.sent,_context.next=8,System.import("bpmn-js-properties-panel");case 8:return propertiesPanelModule=_context.sent,_context.next=11,System.import("bpmn-js-properties-panel/lib/provider/camunda");case 11:if(propertiesProviderModule=_context.sent,container=this.refs.topcontainer?$(this.refs.topcontainer).find(".container"):null,propertiesPane=this.refs.topcontainer?$(this.refs.topcontainer).find(".properties")[0]:null,self=this,_context.prev=15,additionalModules1={__init__:["customContextPad","customPalette","customRenderer"],customContextPad:["type",CustomContextPad],customPalette:["type",CustomPalette],customRenderer:["type",CustomRenderer]},[propertiesPanelModule,propertiesProviderModule],this.modeler=new BpmnModeler.default({additionalModules:[additionalModules1,propertiesPanelModule,propertiesProviderModule],container:container,propertiesPanel:{parent:propertiesPane},moddleExtensions:{camunda:camundaModdleDescriptor}}),window.addEventListener("click",function(event){event.target;if(event.composed){var composedPaths=event.composedPath(),taskConfigEl=$(_this2.refs.topcontainer).find("#service-configuration")?$(_this2.refs.topcontainer).find("#service-configuration")[0]:null,matchedPaths=composedPaths.filter(function(el){return el==taskConfigEl});if(matchedPaths&&matchedPaths.length>0)return;self.setState({showTaskConfig:!1})}}),!this.props.widgetProps||!this.props.widgetProps.BPMN_XML){_context.next=25;break}return _context.next=23,this.modeler.importXML(this.props.widgetProps.BPMN_XML,this.importHandler);case 23:_context.next=27;break;case 25:return _context.next=27,this.modeler.importXML(this.state.defaultXML,this.importHandler);case 27:this.eventHandler(this.modeler),container.removeClass("with-error").addClass("with-diagram"),(propertiesPanel=this.modeler.get("propertiesPanel")).detach(),propertiesPanel.attachTo(propertiesPane),_context.next=39;break;case 34:_context.prev=34,_context.t0=_context.catch(15),container.removeClass("with-diagram").addClass("with-error"),container.find(".error pre").text(_context.t0.message),console.error(_context.t0);case 39:case"end":return _context.stop()}},_callee,this,[[15,34]])}));return function(){return _ref.apply(this,arguments)}}()},{key:"eventHandler",value:function(bpmnModeler){var _this3=this;this.moddle=bpmnModeler.get("moddle"),this.modeling=bpmnModeler.get("modeling");var _ref2,_ref3,self=this,businessObject=void 0,element=void 0;bpmnModeler.on("shape.added",(_ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(event){var xmlData,widgetProps;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return event.originalEvent&&event.originalEvent.preventDefault(),event.originalEvent&&event.originalEvent.stopPropagation(),_context2.next=4,self.modeler.saveXML({format:!1});case 4:xmlData=_context2.sent,(widgetProps=Object.assign({},self.props.widgetProps)).BPMN_XML=xmlData.xml,widgetProps.BPMN_XML=widgetProps.BPMN_XML.replace('isExecutable="false"','isExecutable="true"'),self.updateWidgetProps(widgetProps);case 9:case"end":return _context2.stop()}},_callee2,_this3)})),function(_x){return _ref2.apply(this,arguments)})),bpmnModeler.on("shape.removed",(_ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(event){var xmlData,widgetProps;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return event.originalEvent&&event.originalEvent.preventDefault(),event.originalEvent&&event.originalEvent.stopPropagation(),_context3.next=4,self.modeler.saveXML({format:!1});case 4:xmlData=_context3.sent,(widgetProps=Object.assign({},self.props.widgetProps)).BPMN_XML=xmlData.xml,widgetProps.BPMN_XML=widgetProps.BPMN_XML.replace('isExecutable="false"','isExecutable="true"'),self.updateWidgetProps(widgetProps);case 9:case"end":return _context3.stop()}},_callee3,_this3)})),function(_x2){return _ref3.apply(this,arguments)})),bpmnModeler.on("element.contextmenu",100,function(event){if(event.originalEvent.preventDefault(),event.originalEvent.stopPropagation(),(element=event.element).parent&&(businessObject=getBusinessObject(element),_this3.elements[businessObject.id]=element,_this3.activeElementId=businessObject.id,"external"==businessObject.type&&("$srste"==businessObject.topic||"$srste"==businessObject.name))){var widgetProps=Object.assign({},_this3.props.widgetProps);widgetProps.ActionClicked="open_activity",widgetProps.actionPayload={activityId:businessObject.id,businessObject:businessObject},_this3.updateWidgetProps(widgetProps)}})}},{key:"getExtensionElement",value:function(element,type){if(element.extensionElements)return element.extensionElements.values.filter(function(extensionElement){return extensionElement.$instanceOf(type)})[0]}},{key:"updateWidgetProps",value:function(widgetProps){if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);widgetProps.ActionClicked?controlProps.control_action={actionClicked:widgetProps.ActionClicked,actionPayload:_extends({listName:"Activity",actionName:widgetProps.ActionClicked,clickts:Date.now()},widgetProps.actionPayload)}:(controlProps.control_action&&delete controlProps.control_action,controlProps[this.props.controlname]=widgetProps.BPMN_XML),this.props.updateStore({updates:{controlProps:controlProps}})}}else this.props.widgetProps&&this.props.updateStore({updates:{widgetProps:widgetProps}})}},{key:"shouldComponentUpdate",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(nextProps,nextState){return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!nextProps.inputxml){_context4.next=4;break}return _context4.abrupt("return",nextProps.inputxml!=this.state.defaultXML);case 4:return _context4.abrupt("return",!0);case 5:case"end":return _context4.stop()}},_callee4,this)}));return function(_x3,_x4){return _ref4.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(prevProps,prevState){var self,activityInfo,activityIds,activityIdIndx,elementId,taskConfig,serviceTaskTopic,moddle,inputParameter,inputOutput,extensionElements,xmlData,widgetProps,_xmlData,_widgetProps;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(self=this,prevProps.activityinfo==this.props.activityinfo){_context5.next=7;break}activityInfo=Object.assign({},this.state.activityInfo);try{"string"==typeof this.props.activityinfo&&(activityInfo=JSON.parse(this.props.activityinfo))}catch(err){}_.isEqual(this.state.activityInfo,activityInfo)||this.setState({activityInfo:activityInfo}),_context5.next=39;break;case 7:if(_.isEqual(prevState.activityInfo,this.state.activityInfo)){_context5.next=21;break}if(!((activityIds=Object.keys(this.state.activityInfo))&&activityIds.length>0)){_context5.next=19;break}for(activityIdIndx in activityIds)elementId=activityIds[activityIdIndx],_.isEqual(prevState.activityInfo[elementId],this.state.activityInfo[elementId])||(taskConfig=this.state.activityInfo[elementId]?this.state.activityInfo[elementId].taskConfig:null,serviceTaskTopic=taskConfig&&taskConfig.config&&taskConfig.config.ServiceTaskName?taskConfig.config.ServiceTaskName:"$srste",taskConfig&&(moddle=self.modeler.get("moddle"),inputParameter=moddle.create("camunda:InputParameter",{type:"string",name:"taskConfig",value:JSON.stringify(taskConfig)}),inputOutput=moddle.create("camunda:InputOutput",{inputParameters:[inputParameter]}),(extensionElements=self.getExtensionElement(self.elements[elementId])||moddle.create("bpmn:ExtensionElements")).get("values").push(inputOutput),self.modeling.updateProperties(self.elements[elementId],{extensionElements:extensionElements,topic:serviceTaskTopic})));return _context5.next=13,self.modeler.saveXML({format:!1});case 13:xmlData=_context5.sent,(widgetProps=Object.assign({},self.props.widgetProps)).BPMN_XML=xmlData.xml,widgetProps.BPMN_XML=widgetProps.BPMN_XML.replace('isExecutable="false"','isExecutable="true"'),this.currentXML=widgetProps.BPMN_XML,self.updateWidgetProps(widgetProps);case 19:_context5.next=39;break;case 21:if(prevState.defaultXML==this.state.defaultXML){_context5.next=24;break}_context5.next=39;break;case 24:if(prevProps.inputxml==this.props.inputxml||this.props.inputxml==this.currentXML){_context5.next=28;break}this.setState({defaultXML:this.props.inputxml}),_context5.next=39;break;case 28:if(!(prevProps.savets!=this.props.savets||this.props.widgetProps&&prevProps.widgetProps&&prevProps.widgetProps.UpdateXML!=this.props.widgetProps.UpdateXML)){_context5.next=38;break}return _context5.next=31,this.modeler.saveXML({format:!1});case 31:_xmlData=_context5.sent,(_widgetProps=Object.assign({},self.props.widgetProps)).BPMN_XML=_xmlData.xml,_widgetProps.BPMN_XML=_widgetProps.BPMN_XML.replace('isExecutable="false"','isExecutable="true"'),self.updateWidgetProps(_widgetProps),_context5.next=39;break;case 38:prevProps.widgetProps&&this.props.widgetProps&&prevProps.widgetProps.BPMN_XML!=this.props.widgetProps.BPMN_XML&&this.props.widgetProps.BPMN_XML&&this.props.addFlashMessage({title:"Success - ",subtitle:"Loaded the workflow successfully!"});case 39:prevProps.wfElementsData&&this.props.wfElementsData&&!_.isEqual(prevProps.wfElementsData,this.props.wfElementsData)&&Object.keys(this.props.wfElementsData).map(function(elementId){if(!_.isEqual(prevProps.wfElementsData[elementId],self.props.wfElementsData[elementId])){var _taskConfig=self.props.wfElementsData[elementId]?self.props.wfElementsData[elementId].taskConfig:null,_serviceTaskTopic=_taskConfig&&_taskConfig.config&&_taskConfig.config.ServiceTaskName?_taskConfig.config.ServiceTaskName:"$srste";if(_taskConfig){var _moddle=self.modeler.get("moddle"),_inputParameter=_moddle.create("camunda:InputParameter",{type:"string",name:"taskConfig",value:JSON.stringify(_taskConfig)}),_inputOutput=_moddle.create("camunda:InputOutput",{inputParameters:[_inputParameter]}),_extensionElements=self.getExtensionElement(self.elements[elementId])||_moddle.create("bpmn:ExtensionElements");_extensionElements.get("values").push(_inputOutput),self.modeling.updateProperties(self.elements[elementId],{extensionElements:_extensionElements,topic:_serviceTaskTopic}),self.props.addFlashMessage({title:"Success - ",subtitle:"Applied the service task configuration!"})}}});case 40:case"end":return _context5.stop()}},_callee5,this)}));return function(_x5,_x6){return _ref5.apply(this,arguments)}}()},{key:"render",value:function(){return React.createElement("div",{ref:"topcontainer",style:{height:"inherit"}},React.createElement("style",null,'@import url("https://unpkg.com/bpmn-js@7.4.0/dist/assets/diagram-js.css"); @import url("https://unpkg.com/bpmn-js@7.4.0/dist/assets/bpmn-font/css/bpmn.css"); @import url("https://unpkg.com/bpmn-js-properties-panel@0.37.3/dist/assets/bpmn-js-properties-panel.css");'),React.createElement("style",null,this.props.inlinestyles),React.createElement("div",{style:{display:"flex",height:"inherit"}},React.createElement("div",{className:"container",style:{height:"inherit",display:"flex",flexDirection:"column"}}),React.createElement("div",{className:"properties",id:"properties",style:{display:"flex",flexDirection:"column"}})))}}]),_WorkflowModeler_}(React.Component),_export("WorkflowModeler",WorkflowModeler=function(props){return _WorkflowModeler_}),_export("WorkflowModeler",WorkflowModeler),_export("default",WorkflowModeler),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"controlProps",AccessPath:"controls.${pageid}${pagesuffix}_${controlid}",DefaultValue:'{"controls": {"${pageid}${pagesuffix}_${controlid}": {}}}'},{KeyName:"wfElementsData",AccessPath:"workflow.elements",DefaultValue:'{"workflow": {"elements": {}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("client/script/workflow/CustomContextPad.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,CMD_QRY,CustomContextPad;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default}],execute:function(){CMD_QRY="$srste",CustomContextPad=function(){function CustomContextPad(bpmnFactory,config,contextPad,create,elementFactory,injector,translate){_classCallCheck(this,CustomContextPad),this.bpmnFactory=bpmnFactory,this.create=create,this.elementFactory=elementFactory,this.translate=translate,!1!==config.autoPlace&&(this.autoPlace=injector.get("autoPlace",!1)),contextPad.registerProvider(this)}return _createClass(CustomContextPad,[{key:"getContextPadEntries",value:function(element){var autoPlace=this.autoPlace,bpmnFactory=this.bpmnFactory,create=this.create,elementFactory=this.elementFactory;function appendServiceTaskStart(suitabilityScore){return function(event){var businessObject=bpmnFactory.create("bpmn:ServiceTask");businessObject.type="external",businessObject.topic=cmd;var shape=elementFactory.createShape({type:"bpmn:ServiceTask",businessObject:businessObject});create.start(event,shape,element)}}return{"append.srste":{group:"model",className:"bpmn-icon-task green",title:(0,this.translate)("Srste ServiceTask"),action:{click:function(cmd){return function(event,element){if(autoPlace){var businessObject=bpmnFactory.create("bpmn:ServiceTask");businessObject.type="external",businessObject.topic=cmd,businessObject.name=cmd;var shape=elementFactory.createShape({type:"bpmn:ServiceTask",businessObject:businessObject});autoPlace.append(element,shape)}else appendServiceTaskStart()}}(CMD_QRY),dragstart:appendServiceTaskStart()}}}}}]),CustomContextPad}(),_export("default",CustomContextPad),CustomContextPad.$inject=["bpmnFactory","config","contextPad","create","elementFactory","injector","translate"]}}}),System.register("client/script/workflow/CustomPalette.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,CMD_QRY,CustomPalette;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default}],execute:function(){CMD_QRY="$srste",CustomPalette=function(){function CustomPalette(bpmnFactory,create,elementFactory,palette,translate){_classCallCheck(this,CustomPalette),this.bpmnFactory=bpmnFactory,this.create=create,this.elementFactory=elementFactory,this.translate=translate,palette.registerProvider(this)}return _createClass(CustomPalette,[{key:"getPaletteEntries",value:function(element){var bpmnFactory=this.bpmnFactory,create=this.create,elementFactory=this.elementFactory;function createTask(suitabilityScore){return function(event){var businessObject=bpmnFactory.create("bpmn:ServiceTask");businessObject.suitable=suitabilityScore;var shape=elementFactory.createShape({type:"bpmn:ServiceTask",businessObject:businessObject});create.start(event,shape)}}return{"create.srstetask":{group:"activity",className:"bpmn-icon-task green",title:(0,this.translate)("Create Srste Task"),action:{dragstart:createTask(CMD_QRY),click:createTask(CMD_QRY)}}}}}]),CustomPalette}(),_export("default",CustomPalette),CustomPalette.$inject=["bpmnFactory","create","elementFactory","palette","translate"]}}}),System.register("client/script/workflow/CustomRenderer.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","diagram-js/lib/draw/BaseRenderer","tiny-svg","bpmn-js/lib/draw/BpmnRenderUtil","bpmn-js/lib/util/ModelUtil","min-dash"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,BaseRenderer,svgAppend,svgAttr,svgClasses,svgCreate,getRoundRectPath,is,getBusinessObject,isNil,HIGH_PRIORITY,TASK_BORDER_RADIUS,COLOR_GREEN,CustomRenderer;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_diagramJsLibDrawBaseRenderer){BaseRenderer=_diagramJsLibDrawBaseRenderer.default},function(_tinySvg){svgAppend=_tinySvg.append,svgAttr=_tinySvg.attr,svgClasses=_tinySvg.classes,svgCreate=_tinySvg.create},function(_bpmnJsLibDrawBpmnRenderUtil){getRoundRectPath=_bpmnJsLibDrawBpmnRenderUtil.getRoundRectPath},function(_bpmnJsLibUtilModelUtil){is=_bpmnJsLibUtilModelUtil.is,getBusinessObject=_bpmnJsLibUtilModelUtil.getBusinessObject},function(_minDash){isNil=_minDash.isNil}],execute:function(){HIGH_PRIORITY=1500,TASK_BORDER_RADIUS=2,COLOR_GREEN="#52B415","#ffc800","#cc0000",CustomRenderer=function(_BaseRenderer){function CustomRenderer(eventBus,bpmnRenderer){_classCallCheck(this,CustomRenderer);var _this=_possibleConstructorReturn(this,(CustomRenderer.__proto__||Object.getPrototypeOf(CustomRenderer)).call(this,eventBus,HIGH_PRIORITY));return _this.bpmnRenderer=bpmnRenderer,_this}return _inherits(CustomRenderer,BaseRenderer),_createClass(CustomRenderer,[{key:"canRender",value:function(element){return!element.labelTarget}},{key:"drawShape",value:function(parentNode,element){var shape=this.bpmnRenderer.drawShape(parentNode,element),cmd=this.getServiceTaskCmd(element);if(!isNil(cmd)){var color=this.getColor(cmd),rect=function(parentNode,width,height,borderRadius,color){var rect=svgCreate("rect");return svgAttr(rect,{width:width,height:height,rx:borderRadius,ry:borderRadius,stroke:color,strokeWidth:2,fill:color}),svgAppend(parentNode,rect),rect}(parentNode,100,20,TASK_BORDER_RADIUS,color);svgAttr(rect,{transform:"translate(-20, -10)"});var text=svgCreate("text");svgAttr(text,{fill:"#fff",transform:"translate(-15, 5)"}),svgClasses(text).add("djs-label");var textVal=cmd.length>10?cmd.substr(0,10)+"...":cmd;svgAppend(text,document.createTextNode(textVal)),svgAppend(parentNode,text)}return shape}},{key:"getShapePath",value:function(shape){return is(shape,"bpmn:Task")?getRoundRectPath(shape,TASK_BORDER_RADIUS):this.bpmnRenderer.getShapePath(shape)}},{key:"getServiceTaskCmd",value:function(element){return getBusinessObject(element).topic}},{key:"getColor",value:function(cmd){var color=COLOR_GREEN;switch(cmd){case"$srste":color=COLOR_GREEN}return color}}]),CustomRenderer}(),_export("default",CustomRenderer),CustomRenderer.$inject=["eventBus","bpmnRenderer"]}}}),System.register("client/script/workflow/BPMNMoodle.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){_export("default",{name:"QualityAssurance",uri:"http://some-company/schema/bpmn/qa",prefix:"qa",xml:{tagAlias:"lowerCase"},types:[{name:"AnalyzedNode",extends:["bpmn:FlowNode"],properties:[{name:"suitable",isAttr:!0,type:"Integer"}]},{name:"AnalysisDetails",superClass:["Element"],properties:[{name:"lastChecked",isAttr:!0,type:"String"},{name:"nextCheck",isAttr:!0,type:"String"},{name:"comments",isMany:!0,type:"Comment"}]},{name:"Comment",properties:[{name:"author",isAttr:!0,type:"String"},{name:"text",isBody:!0,type:"String"}]}],emumerations:[],associations:[]})}}}),System.register("client/script/workflow/CamundaProps.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){_export("default",{name:"Camunda",uri:"http://camunda.org/schema/1.0/bpmn",prefix:"camunda",xml:{tagAlias:"lowerCase"},associations:[],types:[{name:"AnalyzedNode",extends:["bpmn:FlowNode"],properties:[{name:"suitable",isAttr:!0,type:"Integer"}]},{name:"AnalysisDetails",superClass:["Element"],properties:[{name:"lastChecked",isAttr:!0,type:"String"},{name:"nextCheck",isAttr:!0,type:"String"},{name:"comments",isMany:!0,type:"Comment"}]},{name:"Comment",properties:[{name:"author",isAttr:!0,type:"String"},{name:"text",isBody:!0,type:"String"}]},{name:"Definitions",isAbstract:!0,extends:["bpmn:Definitions"],properties:[{name:"diagramRelationId",isAttr:!0,type:"String"}]},{name:"InOutBinding",superClass:["Element"],isAbstract:!0,properties:[{name:"source",isAttr:!0,type:"String"},{name:"sourceExpression",isAttr:!0,type:"String"},{name:"target",isAttr:!0,type:"String"},{name:"businessKey",isAttr:!0,type:"String"},{name:"local",isAttr:!0,type:"Boolean",default:!1},{name:"variables",isAttr:!0,type:"String"}]},{name:"In",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity","bpmn:SignalEventDefinition"]}},{name:"Out",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"AsyncCapable",isAbstract:!0,extends:["bpmn:Activity","bpmn:Gateway","bpmn:Event"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1},{name:"asyncBefore",isAttr:!0,type:"Boolean",default:!1},{name:"asyncAfter",isAttr:!0,type:"Boolean",default:!1},{name:"exclusive",isAttr:!0,type:"Boolean",default:!0}]},{name:"JobPriorized",isAbstract:!0,extends:["bpmn:Process","camunda:AsyncCapable"],properties:[{name:"jobPriority",isAttr:!0,type:"String"}]},{name:"SignalEventDefinition",isAbstract:!0,extends:["bpmn:SignalEventDefinition"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1}]},{name:"ErrorEventDefinition",isAbstract:!0,extends:["bpmn:ErrorEventDefinition"],properties:[{name:"errorCodeVariable",isAttr:!0,type:"String"},{name:"errorMessageVariable",isAttr:!0,type:"String"}]},{name:"Error",isAbstract:!0,extends:["bpmn:Error"],properties:[{name:"camunda:errorMessage",isAttr:!0,type:"String"}]},{name:"PotentialStarter",superClass:["Element"],properties:[{name:"resourceAssignmentExpression",type:"bpmn:ResourceAssignmentExpression"}]},{name:"FormSupported",isAbstract:!0,extends:["bpmn:StartEvent","bpmn:UserTask"],properties:[{name:"formHandlerClass",isAttr:!0,type:"String"},{name:"formKey",isAttr:!0,type:"String"}]},{name:"TemplateSupported",isAbstract:!0,extends:["bpmn:Process","bpmn:FlowElement"],properties:[{name:"modelerTemplate",isAttr:!0,type:"String"}]},{name:"Initiator",isAbstract:!0,extends:["bpmn:StartEvent"],properties:[{name:"initiator",isAttr:!0,type:"String"}]},{name:"ScriptTask",isAbstract:!0,extends:["bpmn:ScriptTask"],properties:[{name:"resultVariable",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"}]},{name:"Process",isAbstract:!0,extends:["bpmn:Process"],properties:[{name:"candidateStarterGroups",isAttr:!0,type:"String"},{name:"candidateStarterUsers",isAttr:!0,type:"String"},{name:"versionTag",isAttr:!0,type:"String"},{name:"historyTimeToLive",isAttr:!0,type:"String"},{name:"isStartableInTasklist",isAttr:!0,type:"Boolean",default:!0}]},{name:"EscalationEventDefinition",isAbstract:!0,extends:["bpmn:EscalationEventDefinition"],properties:[{name:"escalationCodeVariable",isAttr:!0,type:"String"}]},{name:"FormalExpression",isAbstract:!0,extends:["bpmn:FormalExpression"],properties:[{name:"resource",isAttr:!0,type:"String"}]},{name:"Assignable",extends:["bpmn:UserTask"],properties:[{name:"assignee",isAttr:!0,type:"String"},{name:"candidateUsers",isAttr:!0,type:"String"},{name:"candidateGroups",isAttr:!0,type:"String"},{name:"dueDate",isAttr:!0,type:"String"},{name:"followUpDate",isAttr:!0,type:"String"},{name:"priority",isAttr:!0,type:"String"}]},{name:"CallActivity",extends:["bpmn:CallActivity"],properties:[{name:"calledElementBinding",isAttr:!0,type:"String",default:"latest"},{name:"calledElementVersion",isAttr:!0,type:"String"},{name:"calledElementVersionTag",isAttr:!0,type:"String"},{name:"calledElementTenantId",isAttr:!0,type:"String"},{name:"caseRef",isAttr:!0,type:"String"},{name:"caseBinding",isAttr:!0,type:"String",default:"latest"},{name:"caseVersion",isAttr:!0,type:"String"},{name:"caseTenantId",isAttr:!0,type:"String"},{name:"variableMappingClass",isAttr:!0,type:"String"},{name:"variableMappingDelegateExpression",isAttr:!0,type:"String"}]},{name:"ServiceTaskLike",extends:["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"resultVariable",isAttr:!0,type:"String"}]},{name:"DmnCapable",extends:["bpmn:BusinessRuleTask"],properties:[{name:"decisionRef",isAttr:!0,type:"String"},{name:"decisionRefBinding",isAttr:!0,type:"String",default:"latest"},{name:"decisionRefVersion",isAttr:!0,type:"String"},{name:"mapDecisionResult",isAttr:!0,type:"String",default:"resultList"},{name:"decisionRefTenantId",isAttr:!0,type:"String"}]},{name:"ExternalCapable",extends:["camunda:ServiceTaskLike"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"topic",isAttr:!0,type:"String"}]},{name:"TaskPriorized",extends:["bpmn:Process","camunda:ExternalCapable"],properties:[{name:"taskPriority",isAttr:!0,type:"String"}]},{name:"Properties",superClass:["Element"],meta:{allowedIn:["*"]},properties:[{name:"values",type:"Property",isMany:!0}]},{name:"Property",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0}]},{name:"Connector",superClass:["Element"],meta:{allowedIn:["camunda:ServiceTaskLike"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"}]},{name:"InputOutput",superClass:["Element"],meta:{allowedIn:["bpmn:FlowNode","camunda:Connector"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"},{name:"inputParameters",isMany:!0,type:"InputParameter"},{name:"outputParameters",isMany:!0,type:"OutputParameter"}]},{name:"InputOutputParameter",properties:[{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"InputOutputParameterDefinition",isAbstract:!0},{name:"List",superClass:["InputOutputParameterDefinition"],properties:[{name:"items",isMany:!0,type:"InputOutputParameterDefinition"}]},{name:"Map",superClass:["InputOutputParameterDefinition"],properties:[{name:"entries",isMany:!0,type:"Entry"}]},{name:"Entry",properties:[{name:"key",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"Value",superClass:["InputOutputParameterDefinition"],properties:[{name:"id",isAttr:!0,type:"String"},{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Script",superClass:["InputOutputParameterDefinition"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Field",superClass:["Element"],meta:{allowedIn:["camunda:ServiceTaskLike","camunda:ExecutionListener","camunda:TaskListener"]},properties:[{name:"name",isAttr:!0,type:"String"},{name:"expression",type:"String"},{name:"stringValue",isAttr:!0,type:"String"},{name:"string",type:"String"}]},{name:"InputParameter",superClass:["InputOutputParameter"]},{name:"OutputParameter",superClass:["InputOutputParameter"]},{name:"Collectable",isAbstract:!0,extends:["bpmn:MultiInstanceLoopCharacteristics"],superClass:["camunda:AsyncCapable"],properties:[{name:"collection",isAttr:!0,type:"String"},{name:"elementVariable",isAttr:!0,type:"String"}]},{name:"FailedJobRetryTimeCycle",superClass:["Element"],meta:{allowedIn:["camunda:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},properties:[{name:"body",isBody:!0,type:"String"}]},{name:"ExecutionListener",superClass:["Element"],meta:{allowedIn:["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"TaskListener",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0},{name:"id",type:"String",isAttr:!0},{name:"eventDefinitions",type:"bpmn:TimerEventDefinition",isMany:!0}]},{name:"FormProperty",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"required",type:"String",isAttr:!0},{name:"readable",type:"String",isAttr:!0},{name:"writable",type:"String",isAttr:!0},{name:"variable",type:"String",isAttr:!0},{name:"expression",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"default",type:"String",isAttr:!0},{name:"values",type:"Value",isMany:!0}]},{name:"FormData",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"fields",type:"FormField",isMany:!0},{name:"businessKey",type:"String",isAttr:!0}]},{name:"FormField",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"label",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"defaultValue",type:"String",isAttr:!0},{name:"properties",type:"Properties"},{name:"validation",type:"Validation"},{name:"values",type:"Value",isMany:!0}]},{name:"Validation",superClass:["Element"],properties:[{name:"constraints",type:"Constraint",isMany:!0}]},{name:"Constraint",superClass:["Element"],properties:[{name:"name",type:"String",isAttr:!0},{name:"config",type:"String",isAttr:!0}]},{name:"ConditionalEventDefinition",isAbstract:!0,extends:["bpmn:ConditionalEventDefinition"],properties:[{name:"variableName",isAttr:!0,type:"String"},{name:"variableEvents",isAttr:!0,type:"String"}]}],emumerations:[]})}}}),System.register("component/workflow/WorkflowModeler/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","https://unpkg.com/bpmn-js@7.4.0/dist/assets/bpmn-font/css/bpmn.css!css","https://unpkg.com/bpmn-js-properties-panel@0.37.3/dist/assets/bpmn-js-properties-panel.css!css","client/script/workflow/CustomContextPad.js","client/script/workflow/CustomPalette.js","client/script/workflow/CustomRenderer.js","client/script/workflow/BPMNMoodle.js","client/script/workflow/CamundaProps.js","bpmn-js/lib/util/ModelUtil"],function(_export,_context6){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,CustomContextPad,CustomPalette,CustomRenderer,camundaModdleDescriptor,getBusinessObject,_WorkflowModeler_,WorkflowModeler;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_httpsUnpkgComBpmnJs740DistAssetsBpmnFontCssBpmnCssCss){},function(_httpsUnpkgComBpmnJsPropertiesPanel0373DistAssetsBpmnJsPropertiesPanelCssCss){},function(_clientScriptWorkflowCustomContextPadJs){CustomContextPad=_clientScriptWorkflowCustomContextPadJs.default},function(_clientScriptWorkflowCustomPaletteJs){CustomPalette=_clientScriptWorkflowCustomPaletteJs.default},function(_clientScriptWorkflowCustomRendererJs){CustomRenderer=_clientScriptWorkflowCustomRendererJs.default},function(_clientScriptWorkflowBPMNMoodleJs){_clientScriptWorkflowBPMNMoodleJs.default},function(_clientScriptWorkflowCamundaPropsJs){camundaModdleDescriptor=_clientScriptWorkflowCamundaPropsJs.default},function(_bpmnJsLibUtilModelUtil){_bpmnJsLibUtilModelUtil.is,getBusinessObject=_bpmnJsLibUtilModelUtil.getBusinessObject}],execute:function(){_WorkflowModeler_=function(_React$Component){function _WorkflowModeler_(props){_classCallCheck(this,_WorkflowModeler_);var _this=_possibleConstructorReturn(this,(_WorkflowModeler_.__proto__||Object.getPrototypeOf(_WorkflowModeler_)).call(this,props)),activityInfo={};try{_this.props.activityinfo&&"string"==typeof _this.props.activityinfo&&(activityInfo=JSON.parse(_this.props.activityinfo))}catch(err){}return _this.importHandler=function(err){if(err)return console.error("Could not import BPMN 2.0 diagram",err)},_this.state={defaultXML:_this.props.inputxml?_this.props.inputxml:'<?xml version="1.0" encoding="UTF-8"?>\n                            <bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd">\n                                <bpmn2:process id="easy_starter_1" isExecutable="true">\n                                    <bpmn2:startEvent id="StartEvent_1" name="Starter">\n                                        <bpmn2:messageEventDefinition id="MessageEventDefinition_1cmsr41" messageRef="Message_1aijrsk" />\n                                    </bpmn2:startEvent>\n                                </bpmn2:process>\n                                <bpmn2:message id="Message_1aijrsk" name="easy_starter_1" />\n                                <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n                                    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="easy_starter_1">\n                                        <bpmndi:BPMNShape id="Event_0noed7l_di" bpmnElement="StartEvent_1">\n                                            <dc:Bounds x="482" y="172" width="36" height="36" />\n                                            <bpmndi:BPMNLabel>\n                                                <dc:Bounds x="483" y="215" width="35" height="14" />\n                                            </bpmndi:BPMNLabel>\n                                        </bpmndi:BPMNShape>\n                                    </bpmndi:BPMNPlane>\n                                </bpmndi:BPMNDiagram></bpmn2:definitions>',showTaskConfig:!1,activityInfo:activityInfo},_this.eventHandler=_this.eventHandler.bind(_this),_this.getExtensionElement=_this.getExtensionElement.bind(_this),_this.updateWidgetProps=_this.updateWidgetProps.bind(_this),_this.elements={},$ele.registerElement("ServiceTaskConfig","workflow","React"),_this}return _inherits(_WorkflowModeler_,_React$Component),_createClass(_WorkflowModeler_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var BpmnModeler,propertiesPanelModule,propertiesProviderModule,container,propertiesPane,self,additionalModules1,propertiesPanel,_this2=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,System.import("ids");case 2:return window.Ids=_context.sent,_context.next=5,System.import("bpmn-js/lib/Modeler.js");case 5:return BpmnModeler=_context.sent,_context.next=8,System.import("bpmn-js-properties-panel");case 8:return propertiesPanelModule=_context.sent,_context.next=11,System.import("bpmn-js-properties-panel/lib/provider/camunda");case 11:if(propertiesProviderModule=_context.sent,container=this.refs.topcontainer?$(this.refs.topcontainer).find(".container"):null,propertiesPane=this.refs.topcontainer?$(this.refs.topcontainer).find(".properties")[0]:null,self=this,_context.prev=15,additionalModules1={__init__:["customContextPad","customPalette","customRenderer"],customContextPad:["type",CustomContextPad],customPalette:["type",CustomPalette],customRenderer:["type",CustomRenderer]},[propertiesPanelModule,propertiesProviderModule],this.modeler=new BpmnModeler.default({additionalModules:[additionalModules1,propertiesPanelModule,propertiesProviderModule],container:container,propertiesPanel:{parent:propertiesPane},moddleExtensions:{camunda:camundaModdleDescriptor}}),window.addEventListener("click",function(event){event.target;if(event.composed){var composedPaths=event.composedPath(),taskConfigEl=$(_this2.refs.topcontainer).find("#service-configuration")?$(_this2.refs.topcontainer).find("#service-configuration")[0]:null,matchedPaths=composedPaths.filter(function(el){return el==taskConfigEl});if(matchedPaths&&matchedPaths.length>0)return;self.setState({showTaskConfig:!1})}}),!this.props.widgetProps||!this.props.widgetProps.BPMN_XML){_context.next=25;break}return _context.next=23,this.modeler.importXML(this.props.widgetProps.BPMN_XML,this.importHandler);case 23:_context.next=27;break;case 25:return _context.next=27,this.modeler.importXML(this.state.defaultXML,this.importHandler);case 27:this.eventHandler(this.modeler),container.removeClass("with-error").addClass("with-diagram"),(propertiesPanel=this.modeler.get("propertiesPanel")).detach(),propertiesPanel.attachTo(propertiesPane),_context.next=39;break;case 34:_context.prev=34,_context.t0=_context.catch(15),container.removeClass("with-diagram").addClass("with-error"),container.find(".error pre").text(_context.t0.message),console.error(_context.t0);case 39:case"end":return _context.stop()}},_callee,this,[[15,34]])}));return function(){return _ref.apply(this,arguments)}}()},{key:"eventHandler",value:function(bpmnModeler){var _this3=this;this.moddle=bpmnModeler.get("moddle"),this.modeling=bpmnModeler.get("modeling");var _ref2,_ref3,self=this,businessObject=void 0,element=void 0;bpmnModeler.on("shape.added",(_ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(event){var xmlData,widgetProps;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return event.originalEvent&&event.originalEvent.preventDefault(),event.originalEvent&&event.originalEvent.stopPropagation(),_context2.next=4,self.modeler.saveXML({format:!1});case 4:xmlData=_context2.sent,(widgetProps=Object.assign({},self.props.widgetProps)).BPMN_XML=xmlData.xml,widgetProps.BPMN_XML=widgetProps.BPMN_XML.replace('isExecutable="false"','isExecutable="true"'),self.updateWidgetProps(widgetProps);case 9:case"end":return _context2.stop()}},_callee2,_this3)})),function(_x){return _ref2.apply(this,arguments)})),bpmnModeler.on("shape.removed",(_ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(event){var xmlData,widgetProps;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return event.originalEvent&&event.originalEvent.preventDefault(),event.originalEvent&&event.originalEvent.stopPropagation(),_context3.next=4,self.modeler.saveXML({format:!1});case 4:xmlData=_context3.sent,(widgetProps=Object.assign({},self.props.widgetProps)).BPMN_XML=xmlData.xml,widgetProps.BPMN_XML=widgetProps.BPMN_XML.replace('isExecutable="false"','isExecutable="true"'),self.updateWidgetProps(widgetProps);case 9:case"end":return _context3.stop()}},_callee3,_this3)})),function(_x2){return _ref3.apply(this,arguments)})),bpmnModeler.on("element.contextmenu",100,function(event){if(event.originalEvent.preventDefault(),event.originalEvent.stopPropagation(),(element=event.element).parent&&(businessObject=getBusinessObject(element),_this3.elements[businessObject.id]=element,_this3.activeElementId=businessObject.id,"external"==businessObject.type&&("$srste"==businessObject.topic||"$srste"==businessObject.name))){var widgetProps=Object.assign({},_this3.props.widgetProps);widgetProps.ActionClicked="open_activity",widgetProps.actionPayload={activityId:businessObject.id,businessObject:businessObject},_this3.updateWidgetProps(widgetProps)}})}},{key:"getExtensionElement",value:function(element,type){if(element.extensionElements)return element.extensionElements.values.filter(function(extensionElement){return extensionElement.$instanceOf(type)})[0]}},{key:"updateWidgetProps",value:function(widgetProps){if(this.props.isformcontrol+""=="true"){if(this.props.controlname){var controlProps=Object.assign({},this.props.controlProps);widgetProps.ActionClicked?controlProps.control_action={actionClicked:widgetProps.ActionClicked,actionPayload:_extends({listName:"Activity",actionName:widgetProps.ActionClicked,clickts:Date.now()},widgetProps.actionPayload)}:(controlProps.control_action&&delete controlProps.control_action,controlProps[this.props.controlname]=widgetProps.BPMN_XML),this.props.updateStore({updates:{controlProps:controlProps}})}}else this.props.widgetProps&&this.props.updateStore({updates:{widgetProps:widgetProps}})}},{key:"shouldComponentUpdate",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(nextProps,nextState){return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!nextProps.inputxml){_context4.next=4;break}return _context4.abrupt("return",nextProps.inputxml!=this.state.defaultXML);case 4:return _context4.abrupt("return",!0);case 5:case"end":return _context4.stop()}},_callee4,this)}));return function(_x3,_x4){return _ref4.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(prevProps,prevState){var self,activityInfo,activityIds,activityIdIndx,elementId,taskConfig,serviceTaskTopic,moddle,inputParameter,inputOutput,extensionElements,xmlData,widgetProps,_xmlData,_widgetProps;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(self=this,prevProps.activityinfo==this.props.activityinfo){_context5.next=7;break}activityInfo=Object.assign({},this.state.activityInfo);try{"string"==typeof this.props.activityinfo&&(activityInfo=JSON.parse(this.props.activityinfo))}catch(err){}_.isEqual(this.state.activityInfo,activityInfo)||this.setState({activityInfo:activityInfo}),_context5.next=39;break;case 7:if(_.isEqual(prevState.activityInfo,this.state.activityInfo)){_context5.next=21;break}if(!((activityIds=Object.keys(this.state.activityInfo))&&activityIds.length>0)){_context5.next=19;break}for(activityIdIndx in activityIds)elementId=activityIds[activityIdIndx],_.isEqual(prevState.activityInfo[elementId],this.state.activityInfo[elementId])||(taskConfig=this.state.activityInfo[elementId]?this.state.activityInfo[elementId].taskConfig:null,serviceTaskTopic=taskConfig&&taskConfig.config&&taskConfig.config.ServiceTaskName?taskConfig.config.ServiceTaskName:"$srste",taskConfig&&(moddle=self.modeler.get("moddle"),inputParameter=moddle.create("camunda:InputParameter",{type:"string",name:"taskConfig",value:JSON.stringify(taskConfig)}),inputOutput=moddle.create("camunda:InputOutput",{inputParameters:[inputParameter]}),(extensionElements=self.getExtensionElement(self.elements[elementId])||moddle.create("bpmn:ExtensionElements")).get("values").push(inputOutput),self.modeling.updateProperties(self.elements[elementId],{extensionElements:extensionElements,topic:serviceTaskTopic})));return _context5.next=13,self.modeler.saveXML({format:!1});case 13:xmlData=_context5.sent,(widgetProps=Object.assign({},self.props.widgetProps)).BPMN_XML=xmlData.xml,widgetProps.BPMN_XML=widgetProps.BPMN_XML.replace('isExecutable="false"','isExecutable="true"'),this.currentXML=widgetProps.BPMN_XML,self.updateWidgetProps(widgetProps);case 19:_context5.next=39;break;case 21:if(prevState.defaultXML==this.state.defaultXML){_context5.next=24;break}_context5.next=39;break;case 24:if(prevProps.inputxml==this.props.inputxml||this.props.inputxml==this.currentXML){_context5.next=28;break}this.setState({defaultXML:this.props.inputxml}),_context5.next=39;break;case 28:if(!(prevProps.savets!=this.props.savets||this.props.widgetProps&&prevProps.widgetProps&&prevProps.widgetProps.UpdateXML!=this.props.widgetProps.UpdateXML)){_context5.next=38;break}return _context5.next=31,this.modeler.saveXML({format:!1});case 31:_xmlData=_context5.sent,(_widgetProps=Object.assign({},self.props.widgetProps)).BPMN_XML=_xmlData.xml,_widgetProps.BPMN_XML=_widgetProps.BPMN_XML.replace('isExecutable="false"','isExecutable="true"'),self.updateWidgetProps(_widgetProps),_context5.next=39;break;case 38:prevProps.widgetProps&&this.props.widgetProps&&prevProps.widgetProps.BPMN_XML!=this.props.widgetProps.BPMN_XML&&this.props.widgetProps.BPMN_XML&&this.props.addFlashMessage({title:"Success - ",subtitle:"Loaded the workflow successfully!"});case 39:prevProps.wfElementsData&&this.props.wfElementsData&&!_.isEqual(prevProps.wfElementsData,this.props.wfElementsData)&&Object.keys(this.props.wfElementsData).map(function(elementId){if(!_.isEqual(prevProps.wfElementsData[elementId],self.props.wfElementsData[elementId])){var _taskConfig=self.props.wfElementsData[elementId]?self.props.wfElementsData[elementId].taskConfig:null,_serviceTaskTopic=_taskConfig&&_taskConfig.config&&_taskConfig.config.ServiceTaskName?_taskConfig.config.ServiceTaskName:"$srste";if(_taskConfig){var _moddle=self.modeler.get("moddle"),_inputParameter=_moddle.create("camunda:InputParameter",{type:"string",name:"taskConfig",value:JSON.stringify(_taskConfig)}),_inputOutput=_moddle.create("camunda:InputOutput",{inputParameters:[_inputParameter]}),_extensionElements=self.getExtensionElement(self.elements[elementId])||_moddle.create("bpmn:ExtensionElements");_extensionElements.get("values").push(_inputOutput),self.modeling.updateProperties(self.elements[elementId],{extensionElements:_extensionElements,topic:_serviceTaskTopic}),self.props.addFlashMessage({title:"Success - ",subtitle:"Applied the service task configuration!"})}}});case 40:case"end":return _context5.stop()}},_callee5,this)}));return function(_x5,_x6){return _ref5.apply(this,arguments)}}()},{key:"render",value:function(){return React.createElement("div",{ref:"topcontainer",style:{height:"inherit"}},React.createElement("style",null,'@import url("https://unpkg.com/bpmn-js@7.4.0/dist/assets/diagram-js.css"); @import url("https://unpkg.com/bpmn-js@7.4.0/dist/assets/bpmn-font/css/bpmn.css"); @import url("https://unpkg.com/bpmn-js-properties-panel@0.37.3/dist/assets/bpmn-js-properties-panel.css");'),React.createElement("style",null,this.props.inlinestyles),React.createElement("div",{style:{display:"flex",height:"inherit"}},React.createElement("div",{className:"container",style:{height:"inherit",display:"flex",flexDirection:"column"}}),React.createElement("div",{className:"properties",id:"properties",style:{display:"flex",flexDirection:"column"}})))}}]),_WorkflowModeler_}(React.Component),_export("WorkflowModeler",WorkflowModeler=function(props){return _WorkflowModeler_}),_export("WorkflowModeler",WorkflowModeler)}}});
System.register("client/blockly_styles.js",[],function(_export,_context){"use strict";return _export("default",function(){return{BlocklyWorkspace:".blocklySvg {\n    background-color: #343436;\n}\n\n.blocklyMainBackground {\n    stroke-width: 20;\n    stroke: #4f5156;\n}\n\n.mainBlocklyContainer {\n    position:relative;\n    width: 100%;\n    height: 98vh;    \n}\n\n.contentBlocklyContainer {\n    position:relative;\n    width: auto;\n    height: auto;\n}\n\n.blocklyToolboxDiv {\n    background-color: #4f5157;\n    color: white;\n}\n\n.blocklyScrollbarVertical {\n    width:10px;\n}\n\n.blocklyScrollbarHorizontal {\n    width: 10px;\n    background-color: #4f5156;\n}\n\n.blocklyMainWorkspaceScrollbar {\n    width:10px;\n    background-color: #4f5156;\n}\n\n",BlocklyDrawer:"/* add css styles to the component */\n\n"}}),{setters:[],execute:function(){}}}),System.register("client/script/blockly/Blocks.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){window.Blockly_Blocks=window.Blockly_Blocks||{},window.Blockly_Blocks.table={init:function(){this.appendDummyInput().appendField("Table").appendField(new Blockly.FieldTextInput("Name..."),"Name").appendField(new Blockly.FieldTextInput("Description..."),"Description"),this.appendStatementInput("Field").setCheck(null),this.setNextStatement(!0,null),this.setColour(120),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.field={init:function(){this.appendDummyInput().appendField("Field").appendField(new Blockly.FieldTextInput("Display Name"),"Label").appendField(new Blockly.FieldTextInput("Name..."),"Name"),this.appendDummyInput().setAlign(Blockly.ALIGN_CENTRE).appendField(new Blockly.FieldDropdown([["String","String"],["Boolean","Boolean"],["Number","Number"],["Date","Date"],["Text","Text"]]),"Type"),this.appendStatementInput("NAME").setCheck(null),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.nullable={init:function(){this.appendDummyInput().appendField("Nullable"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.required={init:function(){this.appendDummyInput().appendField("Is Required"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.index={init:function(){this.appendDummyInput().appendField("Is Index"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.hidden={init:function(){this.appendDummyInput().appendField("Is Hidden"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.id={init:function(){this.appendDummyInput().appendField("Is ID"),this.appendDummyInput().setAlign(Blockly.ALIGN_CENTRE).appendField("Generated").appendField(new Blockly.FieldDropdown([["yes","true"],["no","false"]]),"is_generated"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.default={init:function(){this.appendDummyInput().appendField("Default").appendField("Value=").appendField(new Blockly.FieldTextInput("default value.."),"defaultvalue"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.relationship={init:function(){this.appendDummyInput().appendField("Relationship -"),this.appendDummyInput().appendField("Table -").appendField(new Blockly.FieldDropdown([["None","none"],["t1","T1"]]),"table1").appendField(new Blockly.FieldDropdown([["hasMany","Has Many"],["hasOne","Has One"]]),"Type").appendField("with"),this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField(new Blockly.FieldDropdown([["None","none"],["t2","T2"]]),"table2").appendField("via").appendField(new Blockly.FieldTextInput("Foreign Key"),"field1"),this.setColour(315),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.acl={init:function(){this.appendDummyInput().appendField("ACL  on").appendField(new Blockly.FieldDropdown([["Choose Table","none"]]),"table").appendField(new Blockly.FieldDropdown([["Choose Property","none"],["*","all"]]),"property"),this.appendDummyInput().setAlign(Blockly.ALIGN_CENTRE).appendField(new Blockly.FieldDropdown([["ALLOW","allow"],["DENY","deny"]]),"permission").appendField(new Blockly.FieldDropdown([["Choose Type","none"],["ROLE","role"],["USER","user"],["APPLICATION","application"]]),"principalType").appendField(new Blockly.FieldTextInput("Principal ID"),"principalId"),this.setInputsInline(!1),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.role_mapping={init:function(){this.appendDummyInput().appendField("Role ").appendField(new Blockly.FieldTextInput("Role Id"),"roleId"),this.appendStatementInput("NAME").setCheck("principal"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.principal={init:function(){this.appendDummyInput().appendField("Principal -").appendField(new Blockly.FieldDropdown([["ROLE","role"],["USER","user"],["APPLICATION","application"]]),"principalType").appendField(new Blockly.FieldTextInput("Principal ID"),"principalId"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.traps={init:function(){this.appendDummyInput().appendField("Traps on ").appendField(new Blockly.FieldDropdown([["Choose the table","none"]]),"table"),this.appendStatementInput("traps").setCheck(null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.trapsholder={init:function(){this.appendDummyInput().appendField("Traps on ").appendField(new Blockly.FieldDropdown([["Choose the table","none"]]),"table"),this.appendStatementInput("traps").setCheck(null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.trap={init:function(){this.appendDummyInput().appendField("Trap - ").appendField(new Blockly.FieldDropdown([["Before Save","beforeSave"],["After Save","afterSave"],["Before Delete","beforeDelete"],["After Delete","afterDelete"],["Access","access"]]),"trapType"),this.appendStatementInput("NAME").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(75),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.trap_logic={init:function(){this.appendDummyInput().appendField("On condition -"),this.appendValueInput("condition").setCheck(null),this.appendStatementInput("business_logic").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(195),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.trap_globals={init:function(){this.appendDummyInput().appendField("Global -").appendField(new Blockly.FieldDropdown([["past","past"],["live","live"],["change","change"],["isNew","isNew"],["$qry","qry"],["$script","script"],["swap","swap"]]),"trap_global"),this.setOutput(!0,null),this.setColour(285),this.setTooltip("Global Variables"),this.setHelpUrl("")}},window.Blockly_Blocks.call_function={init:function(){this.appendDummyInput().appendField("Call Fx() -"),this.appendStatementInput("input_parameters").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(90),this.setTooltip(""),this.setHelpUrl("")}},_export("default",'<xml>   <category name="Control">        <block type="table"></block>        <block type="controls_for">    </category>    </xml>')}}}),System.register("client/script/blockly/CoreToolbox.js",[],function(_export,_context){"use strict";var CoreToolbox;return{setters:[],execute:function(){_export("CoreToolbox",CoreToolbox=function(){return new Promise(function(resolve,reject){$script.get("mmf.GetResourceData").then(function(loadedScript){(0,loadedScript.default)("CoreToolbox","blockly").then(function(data){resolve(data)}).catch(function(err){console.log(err),resolve("")})})})}),_export("CoreToolbox",CoreToolbox),_export("default",CoreToolbox)}}}),System.register("client/script/blockly/DataBlockGenerator.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){window.Blockly_JavaScript=window.Blockly_JavaScript||{},window.Blockly_JavaScript.table=function(block){var tableConfig={},codeObj={name:"",plural:"",idInjection:!1,base:"PersistedModel",options:{validateUpsert:!0,public:!0},properties:{uid:{type:"String",id:!0,defaultFn:"guid"}}},tableName=block.getFieldValue("Name");tableName&&(codeObj.name=tableName,codeObj.plural=tableName+"s");var scope=block.getFieldValue("Scope"),childBlocks=block.getChildren(),aclsArray=[],traps=[];if(childBlocks&&childBlocks.length>0){var childBlock=childBlocks[0];do{if("fields"==childBlock.type){var fieldChildBlock=childBlock.getChildren()[0];if(fieldChildBlock)do{fieldChildBlock.getFieldValue("Label");var fieldName=fieldChildBlock.getFieldValue("Name"),fieldType=fieldChildBlock.getFieldValue("Type");fieldType&&(codeObj.properties[fieldName]={type:fieldType});var fieldChildBlocks=fieldChildBlock.getChildren();if(fieldChildBlocks&&fieldChildBlocks.length>0){var fieldPropBlock=fieldChildBlocks[0];do{switch(fieldPropBlock.type){case"nullable":codeObj.properties[fieldName].nullable=!0;break;case"required":codeObj.properties[fieldName].required=!0;break;case"index":codeObj.properties[fieldName].index=!0;break;case"hidden":codeObj.properties[fieldName].hidden=!0;break;case"default_value":codeObj.properties[fieldName].default_value=fieldPropBlock.getFieldValue("defaultvalue")}}while(null!=(fieldPropBlock=fieldPropBlock.getNextBlock()))}}while(null!=(fieldChildBlock=fieldChildBlock.getNextBlock()))}else if("acls"==childBlock.type){var aclChildBlock=childBlock.getChildren()[0];if(aclChildBlock)do{var code={};code.field=aclChildBlock.getFieldValue("property"),code.permission=aclChildBlock.getFieldValue("permission"),code.accesslevel=aclChildBlock.getFieldValue("principalType"),code.principalid=aclChildBlock.getFieldValue("principalId"),aclsArray.push(code),codeObj.acls=aclsArray}while(null!=(aclChildBlock=aclChildBlock.getNextBlock()))}else if("traps"==childBlock.type){var trapChildBlock=childBlock.getChildren()[0];if(trapChildBlock)do{var _code={};_code.type=trapChildBlock.getFieldValue("trapType"),_code.trapName=trapChildBlock.getFieldValue("trapName"),traps.push(_code)}while(null!=(trapChildBlock=trapChildBlock.getNextBlock()))}}while(null!=(childBlock=childBlock.getNextBlock()))}return tableConfig.traps=traps,tableConfig.config=codeObj,tableConfig.scope=scope,tableConfig.name=tableName,[JSON.stringify(tableConfig,null,"\t")]},window.Blockly_JavaScript.field=function(block){return[""]},window.Blockly_JavaScript.relationship=function(block){var code={};return code.name=block.getFieldValue("Name"),code.table1=block.getFieldValue("table1"),code.relation=block.getFieldValue("Type"),code.table2=block.getFieldValue("table2"),code.foreignKey=block.getFieldValue("foreignKey"),code.foreignKeyAlias=block.getFieldValue("foreignKeyAlias"),[JSON.stringify(code,null,"\t")]},window.Blockly_JavaScript.nullable=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},window.Blockly_JavaScript.required=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},window.Blockly_JavaScript.hidden=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},window.Blockly_JavaScript.index=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},window.Blockly_JavaScript.default_value=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},window.Blockly_JavaScript.acl=function(block){var code={};return code.table=block.getFieldValue("table"),code.field=block.getFieldValue("property"),code.permission=block.getFieldValue("permission"),code.accesslevel=block.getFieldValue("principalType"),code.principalid=block.getFieldValue("principalId"),[JSON.stringify(code,null,"\t")]},window.Blockly_JavaScript.role_mapping=function(block){var code={};code.name=block.getFieldValue("name"),code.description=block.getFieldValue("description");var childBlocks=block.getChildren();if(childBlocks&&childBlocks.length>0){var fieldBlock=childBlocks[0];do{if("principal"==fieldBlock.type){var principal={};principal.principalType=fieldBlock.getFieldValue("principalType"),principal.principalId=fieldBlock.getFieldValue("principalId"),code.role_mapping=principal}}while(null!=(fieldBlock=fieldBlock.getNextBlock()))}return[JSON.stringify(code,null,"\t")]},window.Blockly_JavaScript.principal=function(block){var code={};return code.principalType=block.getFieldValue("principalType"),code.principalId=block.getFieldValue("principalId"),[JSON.stringify(code,null,"\t")]},window.Blockly_JavaScript.trap=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},_export("default",window.Blockly_JavaScript)}}}),System.register("client/script/blockly/DataBlocks.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){window.Blockly_Blocks=window.Blockly_Blocks||{},window.Blockly_JavaScript={},window.Blockly_EventHandler={},window.Blockly_Blocks.table={init:function(){this.jsonInit({type:"table",message0:"Table %1 %2 %3 %4",args0:[{type:"field_input",name:"Name",text:"Name"},{type:"field_input",name:"Scope",text:"Scope"},{type:"input_dummy"},{type:"input_statement",name:"Field",check:"Field"}],nextStatement:null,colour:120,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.fields={init:function(){this.jsonInit({type:"fields",message0:"Fields - %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:330,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.acls={init:function(){this.jsonInit({type:"acls",message0:"ACLs - %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.traps={init:function(){this.jsonInit({type:"traps",message0:"Traps - %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.trap={init:function(){this.jsonInit({type:"trap",message0:"CallTrap - %1 %2",args0:[{type:"field_dropdown",name:"trapType",options:[["Before Save","beforeSave"],["After Save","afterSave"],["Before Delete","beforeDelete"],["After Delete","afterDelete"],["Access","access"]]},{type:"field_dropdown",name:"trapName",options:[["None","none"]]}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.field={init:function(){this.jsonInit({type:"field",message0:"Field %1 %2 %3 %4 %5 %6",args0:[{type:"field_input",name:"Label",text:"Display Name"},{type:"field_input",name:"Name",text:"Name..."},{type:"input_dummy"},{type:"field_dropdown",name:"Type",options:[["String","String"],["Boolean","Boolean"],["Number","Number"],["Date","Date"],["Text","Text"]]},{type:"input_dummy",align:"CENTRE"},{type:"input_statement",name:"NAME"}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.relationship={init:function(){this.jsonInit({type:"relationship",lastDummyAlign0:"RIGHT",message0:"Relationship - %1 %2 on Table - %3 %4 with %5 Table - %6 via %7 alias as %8",args0:[{type:"field_input",name:"Name",text:"Name"},{type:"input_dummy"},{type:"field_dropdown",name:"table1",options:[["None","none"]]},{type:"field_dropdown",name:"Type",options:[["Belongs To","belongsTo"],["Has Many","hasMany"],["Has One","hasOne"]]},{type:"input_dummy"},{type:"field_dropdown",name:"table2",options:[["None","none"]]},{type:"field_input",name:"foreignKey",text:"Foreign Key"},{type:"field_input",name:"foreignKeyAlias",text:"Foreign Key Alias"}],colour:315,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.nullable={init:function(){this.jsonInit({type:"nullable",message0:"Nullable",previousStatement:null,nextStatement:null,colour:0,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.required={init:function(){this.jsonInit({type:"required",message0:"Is Required",previousStatement:null,nextStatement:null,colour:0,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.index={init:function(){this.jsonInit({type:"index",message0:"Is Index",previousStatement:null,nextStatement:null,colour:0,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.hidden={init:function(){this.jsonInit({type:"hidden",message0:"Is Hidden",previousStatement:null,nextStatement:null,colour:0,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.default_value={init:function(){this.jsonInit({type:"default",message0:"Default Value= %1",args0:[{type:"field_input",name:"defaultvalue",text:"default value.."}],previousStatement:null,nextStatement:null,colour:0,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.acl={init:function(){this.jsonInit({type:"acl",lastDummyAlign0:"CENTRE",message0:"ACL  on %1 %2 %3 %4 %5",args0:[{type:"field_dropdown",name:"property",options:[["Choose Property","none"],["*","all"]]},{type:"input_dummy"},{type:"field_dropdown",name:"permission",options:[["ALLOW","allow"],["DENY","deny"]]},{type:"field_dropdown",name:"principalType",options:[["Choose Type","none"],["ROLE","ROLE"],["USER","USER"],["APPLICATION","APPLICATION"]]},{type:"field_input",name:"principalId",text:"Principal ID"}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.role_mapping={init:function(){this.jsonInit({type:"role_mapping",message0:"Role  %1 %2 %3 %4",args0:[{type:"field_input",name:"name",text:"Name"},{type:"field_input",name:"description",text:"Description"},{type:"input_dummy"},{type:"input_statement",name:"NAME",check:"principal"}],colour:230,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.principal={init:function(){this.jsonInit({type:"principal",message0:"Principal - %1 %2",args0:[{type:"field_dropdown",name:"principalType",options:[["ROLE","ROLE"],["USER","USER"],["APPLICATION","APPLICATION"]]},{type:"field_input",name:"principalId",text:"Principal ID"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""})}},_export("default",window.Blockly_Blocks)}}}),System.register("client/script/blockly/DataBlocksEventHandlers.js",[],function(_export,_context){"use strict";var tableOptions,trapOptions,pageCompOptions,fieldOptionsMap;function getOptions(query){return new Promise(function(resolve,reject){$qry.run(query).then(function(qryResult){resolve(qryResult)})})}function setTrapOptions(innerChildBlock){1==trapOptions.length?getOptions("mmf.getTraps").then(function(traps){if(traps&&traps.length>0)for(var i=0;i<traps.length;i++){var node=traps[i].node,trapOption=[node.Name,node.uid];trapOptions.push(trapOption)}innerChildBlock.getField("trapName").menuGenerator_=trapOptions}):innerChildBlock.getField("trapName").menuGenerator_=trapOptions}function setTableOptions(blk){1==tableOptions.length?getOptions("mmf.getModels").then(function(tables){if(tables&&tables.length>0)for(var i=0;i<tables.length;i++){var node=tables[i].node,tableOption=[node.Name,node.Name];tableOptions.push(tableOption);for(var definition=JSON.parse(node.Definition),fields=Object.keys(definition.properties),fieldOptions=[],index=0;index<fields.length;index++){var fieldOption=[fields[index],fields[index]];fieldOptions.push(fieldOption)}fieldOptionsMap[node.Name]=fieldOptions}blk.getField("table").menuGenerator_=tableOptions}):blk.getField("table").menuGenerator_=tableOptions}function setFieldOptions(blk,tableName){var tables=Object.keys(fieldOptionsMap);tables&&tables.length>0&&(blk.getField("fields").menuGenerator_=fieldOptionsMap[tableName])}return{setters:[],execute:function(){tableOptions=[["None","none"]],trapOptions=[["None","none"]],pageCompOptions=[["None","none"]],fieldOptionsMap={},Blockly_EventHandler.updateTableOptions=function(event,Blockly){if(event.type==Blockly.Events.CREATE){if(event.blockId)if((blk=Blockly.getMainWorkspace().getBlockById(event.blockId))&&"relationship"==blk.type)1==tableOptions.length?getOptions("mmf.getModels").then(function(tables){if(tables&&tables.length>0)for(var i=0;i<tables.length;i++){var node=tables[i].node,tableOption=[node.Name,node.Name];tableOptions.push(tableOption)}blk.getField("table1").menuGenerator_=tableOptions,blk.getField("table2").menuGenerator_=tableOptions}):(blk.getField("table1").menuGenerator_=tableOptions,blk.getField("table2").menuGenerator_=tableOptions);else if(blk&&"trap"==blk.type)setTrapOptions(blk);else if(blk&&"table"==blk.type){var _childBlocks=blk.getChildren();if(_childBlocks&&_childBlocks.length>0){var _childBlock=_childBlocks[0];do{if("traps"==_childBlock.type){var innerChildBlocks=_childBlock.getChildren();if(innerChildBlocks&&innerChildBlocks.length>0){var innerChildBlock=innerChildBlocks[0];do{"trap"==innerChildBlock.type&&setTrapOptions(innerChildBlock)}while(null!=(innerChildBlock=innerChildBlock.getNextBlock()))}}}while(null!=(_childBlock=_childBlock.getNextBlock()))}}else if(blk&&"read_query"==blk.type)setTableOptions(blk);else if(blk&&("query_head"==blk.type||"mutation"==blk.type)&&blk.getChildren().length>0){"read_query"==(blk=blk.getChildren()[0]).type&&setTableOptions(blk)}else blk&&"page_component"==blk.type&&function(innerChildBlock){1==pageCompOptions.length?getOptions("mmf.getComponents").then(function(components){if(components&&components.length>0)for(var i=0;i<components.length;i++){var node=components[i].node,compOption=[node.Name,node.uid];pageCompOptions.push(compOption)}innerChildBlock.getField("componentName").menuGenerator_=pageCompOptions}):innerChildBlock.getField("componentName").menuGenerator_=pageCompOptions}(blk)}else if(event.type==Blockly.Events.CHANGE){if(event.blockId)if((blk=Blockly.getMainWorkspace().getBlockById(event.blockId))&&"read_query"==blk.type){var tableValue=blk.getFieldValue("table"),children=blk.getChildren(),fieldBlock=null;if(children&&children.length>0)for(var index=0;index<children.length;index++){var block=children[index];if(block&&("find_method"==block.type||"findone_method"==block.type||"findbyid_method"==block.type||"mution_output"==block.type)){var childBlocks=block.getChildren();if(childBlocks&&childBlocks.length>0)for(var cIndex=0;cIndex<childBlocks.length;cIndex++){var childBlock=childBlocks[cIndex];if("field_to_read"==childBlock.type){fieldBlock=childBlock;break}}}}fieldBlock&&setFieldOptions(fieldBlock,tableValue)}}else if(event.type==Blockly.Events.MOVE&&event.blockId){var blk,readQueryBlock=null;if((blk=Blockly.getMainWorkspace().getBlockById(event.blockId))&&"field_to_read"==blk.type){for(var parentBlock=blk.getParent();parentBlock;){if("read_query"==parentBlock.type){readQueryBlock=parentBlock;break}parentBlock=parentBlock.getParent()}if(readQueryBlock){tableValue=readQueryBlock.getFieldValue("table");setFieldOptions(blk,tableValue)}}}},_export("default",Blockly_EventHandler)}}}),System.register("client/script/blockly/DefaultToolbox.js",[],function(_export,_context){"use strict";return _export("default",function(){return{DefaultBlocks:Object.keys(Blockly_Blocks).map(function(blockName,index){return{name:blockName,category:"Default",block:Blockly_Blocks[blockName],generator:Blockly_JavaScript[blockName]}}),DefaultBlocksCategories:{Default:{colour:"270"}}}}),{setters:[],execute:function(){}}}),System.register("client/script/blockly/FlowBlocks.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){window.Blockly_Blocks=window.Blockly_Blocks||{},window.Blockly_Blocks.parallel={init:function(){this.jsonInit({type:"parallel",message0:"Parallel - %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.parallel_block={init:function(){this.jsonInit({type:"parallel_block",message0:"Parallel Block - %1 %2 %3",args0:[{type:"field_input",name:"BLOCK_NAME",text:" Name"},{type:"input_dummy"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.join_blocks={init:function(){this.jsonInit({type:"join_blocks",message0:"Join -  %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""})}},_export("default",window.Blockly_Blocks)}}}),System.register("client/script/blockly/InboundToolbox.js",[],function(_export,_context){"use strict";var InboundToolbox;return{setters:[],execute:function(){_export("InboundToolbox",InboundToolbox=function(){return new Promise(function(resolve,reject){$script.get("mmf.GetResourceData").then(function(loadedScript){(0,loadedScript.default)("InboundToolbox","blockly").then(function(data){resolve(data)}).catch(function(err){console.log(err),resolve("")})})})}),_export("InboundToolbox",InboundToolbox),_export("default",ImportToolbox)}}}),System.register("client/script/blockly/LoadToolbox.js",[],function(_export,_context){"use strict";var LoadToolbox;return{setters:[],execute:function(){_export("LoadToolbox",LoadToolbox=function(name,scope){return new Promise(function(resolve,reject){$script.getscript("mmf.GetResourceData").then(function(loadedScript){(0,loadedScript.default)(name,scope).then(function(data){resolve(data)}).catch(function(err){console.log(err),resolve("")})})})}),_export("LoadToolbox",LoadToolbox),_export("default",LoadToolbox)}}}),System.register("client/script/blockly/LogicBlockGenerator.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){window.Blockly_JavaScript=window.Blockly_JavaScript||{},window.Blockly_JavaScript.switch=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},window.Blockly_JavaScript.case_when=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},window.Blockly_JavaScript.matches=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},window.Blockly_JavaScript.htov=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},window.Blockly_JavaScript.vtoh=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},window.Blockly_JavaScript.traps_holder=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},window.Blockly_JavaScript.trap_logic=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},window.Blockly_JavaScript.trap_globals=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},_export("default",window.Blockly_JavaScript)}}}),System.register("client/script/blockly/LogicBlocks.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){window.Blockly_Blocks=window.Blockly_Blocks||{},window.Blockly_Blocks.switch={init:function(){this.jsonInit({type:"switch",message0:"Switch on %1 %2 %3",args0:[{type:"input_dummy"},{type:"input_value",name:"condition_eval"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.case_when={init:function(){this.jsonInit({type:"switch_when",message0:"when -  %1 %2 %3",args0:[{type:"input_dummy"},{type:"input_value",name:"matches -"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.matches={init:function(){this.jsonInit({type:"matches",message0:"matches - %1 %2",args0:[{type:"field_dropdown",name:"type",options:[["RegEx","regex"],["String-Compare","string"],["Number-Compare","number"],["Script Evaluation","script"]]},{type:"field_input",name:"matchTo",text:"value"}],output:null,colour:230,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.htov={init:function(){this.jsonInit({type:"adapter_htov",message0:"h2v -  %1 %2",args0:[{type:"input_dummy"},{type:"input_value",name:"NAME"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.vtoh={init:function(){this.jsonInit({type:"adapter_vtoh",message0:"v2h - %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"NAME"}],output:null,colour:230,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.traps_holder={init:function(){this.jsonInit({type:"traps",message0:"Traps on  %1 %2 %3",args0:[{type:"field_dropdown",name:"table",options:[["Choose the table","none"]]},{type:"input_dummy"},{type:"input_statement",name:"traps"}],colour:230,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.trap_definition={init:function(){this.jsonInit({type:"trap",message0:"Trap -  %1 %2 %3",args0:[{type:"field_input",name:"name",text:"Name"},{type:"input_dummy"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:75,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.trap_logic={init:function(){this.jsonInit({type:"trap_logic",message0:"On condition - %1 %2 %3",args0:[{type:"input_dummy"},{type:"input_value",name:"condition"},{type:"input_statement",name:"business_logic"}],previousStatement:null,nextStatement:null,colour:195,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.trap_globals={init:function(){this.jsonInit({type:"trap_globals",message0:"Global - %1",args0:[{type:"field_dropdown",name:"trap_global",options:[["past","past"],["live","live"],["change","change"],["isNew","isNew"],["$qry","qry"],["$script","script"],["swap","swap"]]}],output:null,colour:285,tooltip:"Global Variables",helpUrl:""})}},_export("default",window.Blockly_Blocks)}}}),System.register("client/script/blockly/MapBlockGenerator.js",[],function(_export,_context){"use strict";return _export("default",function(BlocklyInternal){window.Blockly_JavaScript=window.Blockly_JavaScript||{},window.Blockly_JavaScript.map=function(block){return[block.getFieldValue("map"),BlocklyInternal.JavaScript.ORDER_NONE]},window.Blockly_JavaScript.dicts_create_with_container=function(block){return[JSON.stringify({},null,"\t")]},window.Blockly_JavaScript.dicts_create_with_item=function(block){var value_key=BlocklyInternal.JavaScript.valueToCode(block,"key",BlocklyInternal.JavaScript.ORDER_ATOMIC),value_value=BlocklyInternal.JavaScript.valueToCode(block,"value",BlocklyInternal.JavaScript.ORDER_ATOMIC),code={};return code[value_key.replace(new RegExp('"',"g"),"")]=value_value.replace(new RegExp('"',"g"),""),[JSON.stringify(code,null,"\t")]},window.Blockly_JavaScript.dicts_create_with=function(block){for(var elements=new Array(block.itemCount_),i=0;i<block.itemCount_;i++)elements[i]=BlocklyInternal.JavaScript.valueToCode(block,"ADD"+i,BlocklyInternal.JavaScript.ORDER_COMMA)||"null";var code="["+elements.join(", ")+"]";return[JSON.stringify(code,null,"\t")]},window.Blockly_JavaScript.dict_get=function(block){return[JSON.stringify({},null,"\t")]},window.Blockly_JavaScript.empty_map=function(block){return[JSON.stringify({},null,"\t")]},window.Blockly_JavaScript.size_of=function(block){return"Object.keys("+BlocklyInternal.JavaScript.valueToCode(block,"map",window.Blockly_JavaScript.ORDER_ATOMIC)+").length"},window.Blockly_JavaScript.is_empty=function(block){return"Object.keys("+BlocklyInternal.JavaScript.valueToCode(block,"key",BlocklyInternal.JavaScript.ORDER_ATOMIC)+").length == 0"},window.Blockly_JavaScript.map_get=function(block){return["return "+BlocklyInternal.JavaScript.valueToCode(block,"map",BlocklyInternal.JavaScript.ORDER_ATOMIC)+"["+BlocklyInternal.JavaScript.valueToCode(block,"value",BlocklyInternal.JavaScript.ORDER_ATOMIC)+"]"]},window.Blockly_JavaScript.map_set=function(block){return BlocklyInternal.JavaScript.valueToCode(block,"map",BlocklyInternal.JavaScript.ORDER_ATOMIC)+"["+BlocklyInternal.JavaScript.valueToCode(block,"key",BlocklyInternal.JavaScript.ORDER_ATOMIC)+"] = "+BlocklyInternal.JavaScript.valueToCode(block,"value",BlocklyInternal.JavaScript.ORDER_ATOMIC)},window.Blockly_JavaScript.map_keys=function(block){return"Object.keys("+BlocklyInternal.JavaScript.valueToCode(block,"map_keys",BlocklyInternal.JavaScript.ORDER_ATOMIC)+")"},window.Blockly_JavaScript.maps_create_with=function(block){for(var elements=new Array(block.itemCount_),i=0;i<block.itemCount_;i++)elements[i]=BlocklyInternal.JavaScript.valueToCode(block,"ADD"+i,BlocklyInternal.JavaScript.ORDER_COMMA)||"null";return["{"+elements.join(", ")+"}",BlocklyInternal.JavaScript.ORDER_ATOMIC]},window.Blockly_JavaScript.script_definition=function(block){for(var text_name=block.getFieldValue("name"),elements=new Array(block.itemCount_),i=0;i<block.itemCount_;i++)elements[i]=BlocklyInternal.JavaScript.valueToCode(block,"ADD"+i,BlocklyInternal.JavaScript.ORDER_COMMA)||"null";return["function "+text_name+"("+elements.join(", ")+"){\n"+BlocklyInternal.JavaScript.statementToCode(block,"script_body")+"\n}",BlocklyInternal.JavaScript.ORDER_NONE]},window.Blockly_JavaScript.get_input_param=function(block){return"input["+BlocklyInternal.JavaScript.valueToCode(block,"input_object",BlocklyInternal.JavaScript.ORDER_ATOMIC)+"]"}}),{setters:[],execute:function(){}}}),System.register("client/script/blockly/MapBlocks.js",[],function(_export,_context){"use strict";return _export("default",function(BlocklyInternal){var BlocklyMsg=BlocklyMsg||{};window.Blockly_Blocks=window.Blockly_Blocks||{},BlocklyMsg.TYPE_CHECK="check type of",BlocklyMsg.DICT_KEYS="get all keys of ",BlocklyMsg.DICT_GET="create map with",BlocklyMsg.DICT_GET_TO="as",BlocklyMsg.DICTS_CREATE_WITH_INPUT_WITH="dict of",BlocklyMsg.DICTS_CREATE_WITH_TOOLTIP="Create a new dictionary",BlocklyMsg.DICTS_CREATE_EMPTY_TITLE="Create empty dict",BlocklyMsg.DICTS_CREATE_WITH_CONTAINER_TITLE_ADD="key-value pairs",BlocklyMsg.DICTS_CREATE_WITH_CONTAINER_TOOLTIP="**",BlocklyMsg.DICTS_CREATE_WITH_ITEM_TITLE="key-value",BlocklyMsg.DICTS_CREATE_WITH_ITEM_TOOLTIP="Make a new key-value pair",BlocklyMsg.DICTS_CREATE_WITH_ITEM_KEY="key",BlocklyMsg.DICTS_CREATE_WITH_ITEM_VALUE="value",BlocklyMsg.CREATE_EMPTY_MAP="create empty map",BlocklyMsg.SIZE_OF="size of",BlocklyMsg.IS_EMPTY="is empty",window.Blockly_Blocks.map={init:function(){this.appendDummyInput().appendField(new BlocklyInternal.FieldDropdown([["map1","map1"],["map2","map2"],["map3","map3"]]),"map"),this.setOutput(!0,null),this.setColour(345),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.empty_map={init:function(){this.appendDummyInput().appendField(BlocklyMsg.CREATE_EMPTY_MAP),this.setOutput(!0,null),this.setColour(345),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.size_of={init:function(){this.appendValueInput("map").setCheck(null).appendField(BlocklyMsg.SIZE_OF),this.appendDummyInput(),this.setOutput(!0,null),this.setColour(345),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.is_empty={init:function(){this.appendValueInput("key").setCheck(null).appendField(BlocklyMsg.IS_EMPTY),this.appendDummyInput(),this.setOutput(!0,null),this.setColour(345),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.map_get={init:function(){this.appendValueInput("map").setCheck(null).appendField("in Map"),this.appendDummyInput(),this.appendValueInput("value").setCheck(null).appendField("get"),this.setOutput(!0,null),this.setColour(345),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.map_set={init:function(){this.appendValueInput("map").setCheck(null).appendField("in Map"),this.appendValueInput("key").setCheck(null).appendField("set"),this.appendValueInput("value").setCheck(null).appendField("as"),this.appendDummyInput(),this.setOutput(!0,null),this.setColour(345),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.map_keys={init:function(){this.appendValueInput("map_keys").setCheck(null).appendField("get keys of"),this.appendDummyInput(),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.dicts_create_with_container={init:function(){this.setColour(345),this.appendDummyInput().appendField(BlocklyMsg.DICTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendValueInput("STACK"),this.setTooltip(BlocklyMsg.DICTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},window.Blockly_Blocks.dicts_create_with_item={init:function(){this.appendValueInput("key").setCheck(null).appendField("key"),this.appendDummyInput(),this.appendValueInput("value").setCheck(null).appendField("value"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},window.Blockly_Blocks.dicts_create_with={init:function(){this.setColour(345),this.appendDummyInput("TITLE_TEXT").appendField(BlocklyMsg.DICTS_CREATE_WITH_INPUT_WITH),this.appendValueInput("KEY0"),this.setOutput(!0,"dict"),this.setMutator(new BlocklyInternal.Mutator(["dicts_create_with_item"])),this.setTooltip(BlocklyMsg.DICTS_CREATE_WITH_TOOLTIP),this.itemCount_=1},mutationToDom:function(workspace){var container=document.createElement("mutation");return container.setAttribute("items",this.itemCount_),container},domToMutation:function(container){this.removeInput("TITLE_TEXT");for(var x=0;x<this.itemCount_;x++)this.removeInput("KEY"+x),this.removeInput("VALUE"+x);this.itemCount_=parseInt(container.getAttribute("items"),10),this.appendDummyInput("TITLE_TEXT").appendField(BlocklyMsg.DICTS_CREATE_WITH_INPUT_WITH);for(x=0;x<this.itemCount_;x++)this.appendValueInput("KEY"+x).setCheck(null).appendField(BlocklyMsg.DICTS_CREATE_WITH_ITEM_KEY)},decompose:function(workspace){var containerBlock=workspace.newBlock("dicts_create_with_container");containerBlock.initSvg();for(var connection=containerBlock.getInput("STACK").connection,x=0;x<this.itemCount_;x++){var itemBlock=workspace.newBlock("dicts_create_with_item");itemBlock.initSvg(),connection.connect(itemBlock.previousConnection),connection=itemBlock.nextConnection}return containerBlock},compose:function(containerBlock){if(0==this.itemCount_)this.removeInput("EMPTY");else{this.removeInput("TITLE_TEXT");for(var x=this.itemCount_-1;x>=0;x--)this.removeInput("KEY"+x),this.removeInput("VALUE"+x)}this.itemCount_=0;var itemBlock=containerBlock.getInputTargetBlock("STACK");for(this.appendDummyInput("TITLE_TEXT").appendField(BlocklyMsg.DICTS_CREATE_WITH_INPUT_WITH);itemBlock;){this.appendValueInput("KEY"+this.itemCount_).appendField(BlocklyMsg.DICTS_CREATE_WITH_ITEM_KEY);this.itemCount_++,itemBlock=itemBlock.nextConnection&&itemBlock.nextConnection.targetBlock()}0==this.itemCount_&&this.appendDummyInput("EMPTY").appendField(BlocklyMsg.DICTS_CREATE_EMPTY_TITLE)},saveConnections:function(containerBlock){for(var itemBlock=containerBlock.getInputTargetBlock("STACK"),x=0;itemBlock;){this.getInput("KEY"+x);x++,itemBlock=itemBlock.nextConnection&&itemBlock.nextConnection.targetBlock()}}},window.Blockly_Blocks.dict_get={init:function(){this.setColour(345),this.appendValueInput("ITEM").appendField(BlocklyMsg.DICT_GET),this.appendValueInput("DICT").setCheck("dict").appendField(BlocklyMsg.DICT_GET_TO),this.setInputsInline(!0),this.setOutput(!0)}},window.Blockly_Blocks.maps_create_with={init:function(){this.setHelpUrl(""),this.setColour(345),this.itemCount_=1,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new BlocklyInternal.Mutator(["maps_create_with_item"])),this.setTooltip("maps create with")},mutationToDom:function(){var container=document.createElement("mutation");return container.setAttribute("items",this.itemCount_),container},domToMutation:function(xmlElement){this.itemCount_=parseInt(xmlElement.getAttribute("items"),10),this.updateShape_()},decompose:function(workspace){var containerBlock=workspace.newBlock("maps_create_with_container");containerBlock.initSvg();for(var connection=containerBlock.getInput("STACK").connection,i=0;i<this.itemCount_;i++){var itemBlock=workspace.newBlock("maps_create_with_item");itemBlock.initSvg(),connection.connect(itemBlock.previousConnection),connection=itemBlock.nextConnection}return containerBlock},compose:function(containerBlock){for(var itemBlock=containerBlock.getInputTargetBlock("STACK"),connections=[];itemBlock;)connections.push(itemBlock.valueConnection_),itemBlock=itemBlock.nextConnection&&itemBlock.nextConnection.targetBlock();for(var i=0;i<this.itemCount_;i++){var connection=this.getInput("ADD"+i).connection.targetConnection;connection&&-1==connections.indexOf(connection)&&connection.disconnect()}this.itemCount_=connections.length,this.updateShape_();for(i=0;i<this.itemCount_;i++)BlocklyInternal.Mutator.reconnect(connections[i],this,"ADD"+i)},saveConnections:function(containerBlock){for(var itemBlock=containerBlock.getInputTargetBlock("STACK"),i=0;itemBlock;){var input=this.getInput("ADD"+i);itemBlock.valueConnection_=input&&input.connection.targetConnection,i++,itemBlock=itemBlock.nextConnection&&itemBlock.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField("empty map");for(var i=0;i<this.itemCount_;i++)if(!this.getInput("ADD"+i)){var input=this.appendValueInput("ADD"+i);0==i&&input.appendField("map")}for(;this.getInput("ADD"+i);)this.removeInput("ADD"+i),i++}},window.Blockly_Blocks.maps_create_with_container={init:function(){this.setColour(345),this.appendDummyInput().appendField("key-value"),this.appendStatementInput("STACK"),this.setTooltip("container"),this.contextMenu=!1}},window.Blockly_Blocks.maps_create_with_item={init:function(){this.setColour(345),this.appendDummyInput().appendField("key-value pair"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip("maps create with"),this.contextMenu=!1}},window.Blockly_Blocks.script_parameter={init:function(){this.setColour(345),this.appendDummyInput().appendField("script param"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip("script param"),this.contextMenu=!1}},window.Blockly_Blocks.script_parameter_container={init:function(){this.setColour(345),this.appendDummyInput().appendField("param"),this.appendStatementInput("STACK"),this.setTooltip("container"),this.contextMenu=!1}},window.Blockly_Blocks.script_definition={init:function(){this.appendDummyInput().appendField("Script - ").appendField(new BlocklyInternal.FieldTextInput("name"),"name"),this.itemCount_=1,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new BlocklyInternal.Mutator(["script_parameter"])),this.setColour(230),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")},mutationToDom:function(){var container=document.createElement("mutation");return container.setAttribute("items",this.itemCount_),container},domToMutation:function(xmlElement){this.itemCount_=parseInt(xmlElement.getAttribute("items"),10),this.updateShape_()},decompose:function(workspace){var containerBlock=workspace.newBlock("script_parameter_container");containerBlock.initSvg();for(var connection=containerBlock.getInput("STACK").connection,i=0;i<this.itemCount_;i++){var itemBlock=workspace.newBlock("script_parameter");itemBlock.initSvg(),connection.connect(itemBlock.previousConnection),connection=itemBlock.nextConnection}return containerBlock},compose:function(containerBlock){for(var itemBlock=containerBlock.getInputTargetBlock("STACK"),connections=[];itemBlock;)connections.push(itemBlock.valueConnection_),itemBlock=itemBlock.nextConnection&&itemBlock.nextConnection.targetBlock();for(var i=0;i<this.itemCount_;i++){var connection=this.getInput("ADD"+i).connection.targetConnection;connection&&-1==connections.indexOf(connection)&&connection.disconnect()}this.itemCount_=connections.length,this.updateShape_();for(i=0;i<this.itemCount_;i++)BlocklyInternal.Mutator.reconnect(connections[i],this,"ADD"+i)},saveConnections:function(containerBlock){for(var itemBlock=containerBlock.getInputTargetBlock("STACK"),i=0;itemBlock;){var input=this.getInput("ADD"+i);itemBlock.valueConnection_=input&&input.connection.targetConnection,i++,itemBlock=itemBlock.nextConnection&&itemBlock.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField("empty param");for(var i=0;i<this.itemCount_;i++)if(!this.getInput("ADD"+i)){var input=this.appendValueInput("ADD"+i);0==i&&input.appendField("Params")}for(;this.getInput("ADD"+i);)this.removeInput("ADD"+i),i++;this.updateBody()},updateBody:function(){this.getInput("script_body")&&this.removeInput("script_body"),this.getInput("BodyField")&&this.removeInput("BodyField"),this.getInput("Body")&&this.removeInput("Body"),this.appendDummyInput("Body"),this.appendDummyInput("BodyField").appendField("Body"),this.appendStatementInput("script_body").setCheck(null)}},window.Blockly_Blocks.get_input_param={init:function(){this.appendValueInput("input_object").setCheck(null).appendField("get input"),this.appendDummyInput(),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}}}),{setters:[],execute:function(){}}}),System.register("client/script/blockly/PageBlockGenerator.js",["client/script/mmf/DesignerUtil.js"],function(_export,_context){"use strict";return{setters:[function(_clientScriptMmfDesignerUtilJs){_clientScriptMmfDesignerUtilJs.DesignerUtil}],execute:function(){window.Blockly_JavaScript=window.Blockly_JavaScript||{},window.Blockly_JavaScript.grid=function(block){var code={},rowBlockCode={},columnBlockCode={},requires=[],compCss="display:grid;\ngrid-template-columns:",pageName=block.getFieldValue("Name"),scope=block.getFieldValue("Scope"),path=block.getFieldValue("Path"),childBlocks=block.getChildren();if(childBlocks&&childBlocks.length>0){var childBlock=childBlocks[0];do{if("grid_row"==childBlock.type){for(var columns=childBlock.getFieldValue("template_columns"),unit=childBlock.getFieldValue("template_units"),units="",index=0;index<columns;index++)units+="1"+unit+" ";var row='<div style="'+(compCss+=units+";")+'">';rowBlockCode.row=row;var innerChilds=childBlock.getChildren();if(innerChilds&&innerChilds.length>0){var innerChild=innerChilds[0];do{if("grid_column"==innerChild.type){var col=columnBlockCode.column?columnBlockCode.column:"";columnBlockCode.column=col+'<div class="page_column">';var componentChilds=innerChild.getChildren();if(componentChilds&&componentChilds.length>0){var componentChild=componentChilds[1]?componentChilds[1]:componentChilds[0];do{if("page_component"==componentChild.type){var component=componentChild.getFieldValue("componentName");requires.push(component);var componentName=componentChild.getField("componentName").text_;componentName=componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),columnBlockCode.column=columnBlockCode.column+"<"+componentName+"/>"}}while(null!=(componentChild=componentChild.getNextBlock()))}columnBlockCode.column=columnBlockCode.column+"</div>"}}while(null!=(innerChild=innerChild.getNextBlock()))}var column=columnBlockCode.column?columnBlockCode.column:"";rowBlockCode.row=rowBlockCode.row+column+"</div>"}}while(null!=(childBlock=childBlock.getNextBlock()))}var compCode=rowBlockCode.row?rowBlockCode.row:"";return code.Name=pageName,code.Scope=scope,code.Path=path,code.Html=compCode,code.Requires=requires,code.content="Please save component to see preview",JSON.stringify(code,null,"\t")},window.Blockly_JavaScript.grid_row=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},window.Blockly_JavaScript.grid_column=function(block){return["",window.Blockly_JavaScript.ORDER_MEMBER]},Blockly_JavaScript.page_component=function(block){return["",Blockly_JavaScript.ORDER_MEMBER]},_export("default",window.Blockly_JavaScript)}}}),System.registerDynamic("client/script/blockly/PageBlocks.js",[],!1,function($__require,$__exports,$__module){var _retrieveGlobal=System.registry.get("@@global-helpers").prepareGlobal($__module.id,null,null);return window.Blockly_Blocks=window.Blockly_Blocks||{},window.Blockly_Blocks.grid={init:function(){this.jsonInit({type:"grid",message0:"Grid - %1 Scope %2 Path %3 %4 %5",args0:[{type:"field_input",name:"Name",text:"Name"},{type:"field_input",name:"Scope",text:"Scope"},{type:"field_input",name:"Path",text:"Path"},{type:"input_dummy"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:330,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.grid_row={init:function(){this.jsonInit({type:"grid_row",message0:"Template-Columns %1 - Units %2 %3 %4",args0:[{type:"field_input",name:"template_columns",text:"1"},{type:"field_dropdown",name:"template_units",options:[["Fr","fr"],["Px","px"]]},{type:"input_dummy"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:120,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.grid_column={init:function(){this.jsonInit({type:"grid_column",message0:"TemplateColumn %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:140,tooltip:"",helpUrl:""})}},Blockly_Blocks.page_component={init:function(){this.jsonInit({type:"page_component",message0:"Component %1 %2 Props %3 %4",args0:[{type:"field_dropdown",name:"componentName",options:[["None","none"]]},{type:"input_dummy"},{type:"input_value",name:"NAME"},{type:"input_dummy"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""})}},_retrieveGlobal()}),System.register("client/script/blockly/QueryBlockGenerator.js",[],function(_export,_context){"use strict";return _export("default",function(BlocklyInternal){window.Blockly_JavaScript=window.Blockly_JavaScript||{},Blockly_JavaScript.query_head=function(block){var code={},name=block.getFieldValue("NAME"),scope=block.getFieldValue("scope"),query="query{",variables="",fields=[],tableName="",variableName="",variableType="",findClause="";code.name=name,code.scope=scope;var queryBlocks=block.getChildren();if(queryBlocks&&queryBlocks.length>0){var queryBlock=queryBlocks[0];do{if("read_query"==queryBlock.type){var table=queryBlock.getFieldValue("table");tableName=table,query+=table+"{";var findBlocks=queryBlock.getChildren();if(findBlocks&&findBlocks.length>0){var findBlock=findBlocks[0];if("query_variables"==findBlock.type&&(findBlock=findBlocks.length>1?findBlocks[1]:null),findBlock)do{if("find_method"==findBlock.type){var fieldBlocks=findBlock.getChildren();if(fieldBlocks&&fieldBlocks.length>0){var fieldBlock=fieldBlocks[0];if("field_to_read"==fieldBlock.type){findClause="Find",query+=table+"Find{\n edges { \n node { \n";do{var fieldName=fieldBlock.getFieldValue("fields");fieldName&&(query+=fieldName+"\n",fields.push(fieldName))}while(null!=(fieldBlock=fieldBlock.getNextBlock()));query+="}\n}\n}"}}}else if("findone_method"==findBlock.type){var _fieldBlocks=findBlock.getChildren();if(_fieldBlocks&&_fieldBlocks.length>0){var _fieldBlock=_fieldBlocks[0];if("field_to_read"==_fieldBlock.type){findClause="FindOne",query+=table+"FindOne{\n";do{var _fieldName=_fieldBlock.getFieldValue("fields");_fieldName&&(query+=_fieldName+"\n",fields.push(_fieldName))}while(null!=(_fieldBlock=_fieldBlock.getNextBlock()));query+="}"}}}else if("findbyid_method"==findBlock.type){var _fieldBlocks2=findBlock.getChildren();if(_fieldBlocks2&&_fieldBlocks2.length>0){var _fieldBlock2=_fieldBlocks2[0];if("field_to_read"==_fieldBlock2.type){findClause="FindById",query+=table+"FindById{\n";do{var _fieldName2=_fieldBlock2.getFieldValue("fields");_fieldName2&&(query+=_fieldName2+"\n",fields.push(_fieldName2))}while(null!=(_fieldBlock2=_fieldBlock2.getNextBlock()));query+="}"}}}}while(null!=(findBlock=findBlock.getNextBlock()))}query+="\n}"}else if("query_variables"==queryBlock.type){variableName=queryBlock.getFieldValue("name"),variableType=queryBlock.getFieldValue("variable_type"),variables=BlocklyInternal.JavaScript.valueToCode(queryBlock,"NAME",BlocklyInternal.JavaScript.ORDER_ATOMIC)}}while(null!=(queryBlock=queryBlock.getNextBlock()))}return query+="\n}",code.query=query,code.variables=variables,code.variableName=variableName,code.variableType=variableType,code.fields=fields,code.table=tableName,code.findClause=findClause,JSON.stringify(code,null,"\t")},Blockly_JavaScript.read_query=function(block){var code={},table=block.getFieldValue("table"),statement=BlocklyInternal.JavaScript.statementToCode(block,"NAME"),readBock="";code.table=table;try{readBock=statement?JSON.parse(statement):""}catch(e){readBock=statement,console.log("Unable to parse...")}return code.fields=readBock,JSON.stringify(code,null,"\t")},Blockly_JavaScript.query_variables=function(block){return JSON.stringify({test:"test"},null,"\t")},Blockly_JavaScript.field_to_read=function(block){var code={},name=block.getFieldValue("fields"),alias=BlocklyInternal.JavaScript.valueToCode(block,"alias",BlocklyInternal.JavaScript.ORDER_ATOMIC);return code.name=name,code.alias=alias,JSON.stringify(code,null,"\t")},Blockly_JavaScript.find_method=function(block){var code={},fields=BlocklyInternal.JavaScript.statementToCode(block,"Fields"),filter=BlocklyInternal.JavaScript.valueToCode(block,"filter",BlocklyInternal.JavaScript.ORDER_ATOMIC),first=BlocklyInternal.JavaScript.valueToCode(block,"first",BlocklyInternal.JavaScript.ORDER_ATOMIC),last=BlocklyInternal.JavaScript.valueToCode(block,"last",BlocklyInternal.JavaScript.ORDER_ATOMIC),before=BlocklyInternal.JavaScript.valueToCode(block,"before",BlocklyInternal.JavaScript.ORDER_ATOMIC),after=BlocklyInternal.JavaScript.valueToCode(block,"after",BlocklyInternal.JavaScript.ORDER_ATOMIC),fieldBlock="";try{fieldBlock=fields?JSON.parse(fields):""}catch(e){fieldBlock=fields,console.log("Unable to parse..")}return code.fields=fieldBlock,code.filter=filter,code.first=first,code.last=last,code.before=before,code.after=after,JSON.stringify(code,null,"\t")},Blockly_JavaScript.findone_method=function(block){var code={},fields=BlocklyInternal.JavaScript.statementToCode(block,"fields"),filter=BlocklyInternal.JavaScript.valueToCode(block,"filter",BlocklyInternal.JavaScript.ORDER_ATOMIC),id=BlocklyInternal.JavaScript.valueToCode(block,"id",BlocklyInternal.JavaScript.ORDER_ATOMIC),fieldBlock="";try{fieldBlock=fields?JSON.parse(fields):""}catch(e){fieldBlock=fields,console.log("Unable to parse..")}return code.fields=fieldBlock,code.filter=filter,code.id=id,JSON.stringify(code,null,"\t")},Blockly_JavaScript.findbyid_method=function(block){var code={},fields=BlocklyInternal.JavaScript.statementToCode(block,"Fields"),filter=BlocklyInternal.JavaScript.valueToCode(block,"filter",BlocklyInternal.JavaScript.ORDER_ATOMIC),fieldBlock="";try{fieldBlock=fields?JSON.parse(fields):""}catch(e){fieldBlock=fields,console.log("Unable to parse..")}return code.fields=fieldBlock,code.filter=filter,JSON.stringify(code,null,"\t")},Blockly_JavaScript.query_count_method=function(block){return BlocklyInternal.JavaScript.valueToCode(block,"where",BlocklyInternal.JavaScript.ORDER_ATOMIC)},Blockly_JavaScript.query_exists_method=function(block){return BlocklyInternal.JavaScript.valueToCode(block,"id",BlocklyInternal.JavaScript.ORDER_ATOMIC)},Blockly_JavaScript.mutation=function(block){var code={},name=block.getFieldValue("NAME"),scope=block.getFieldValue("scope"),variables="",fields=[],tableName="",variableName="",variableType="",mutation="mutation($inputData:";code.name=name,code.scope=scope;var queryBlocks=block.getChildren();if(queryBlocks&&queryBlocks.length>0){var queryBlock=queryBlocks[0];do{if("read_query"==queryBlock.type){var table=queryBlock.getFieldValue("table");tableName=table,mutation+=table+"UpsertWithWhereInput!){";var findBlocks=queryBlock.getChildren();if(findBlocks&&findBlocks.length>0){var findBlock=findBlocks[0];if("query_variables"==findBlock.type&&(findBlock=findBlocks.length>1?findBlocks[1]:null),findBlock)do{if("mution_output"==findBlock.type){var fieldBlocks=findBlock.getChildren();if(fieldBlocks&&fieldBlocks.length>0){var fieldBlock=fieldBlocks[0];if("field_to_read"==fieldBlock.type){mutation+=table+"UpsertWithWhere(input:$inputData){\nobj{\n";do{var fieldName=fieldBlock.getFieldValue("fields");fieldName&&(mutation+=fieldName+"\n",fields.push(fieldName))}while(null!=(fieldBlock=fieldBlock.getNextBlock()));mutation+="}\n}\n"}}}}while(null!=(findBlock=findBlock.getNextBlock()))}mutation+="}"}else if("query_variables"==queryBlock.type){variableName=queryBlock.getFieldValue("name"),variableType=queryBlock.getFieldValue("variable_type"),variables=BlocklyInternal.JavaScript.valueToCode(queryBlock,"NAME",BlocklyInternal.JavaScript.ORDER_ATOMIC)}}while(null!=(queryBlock=queryBlock.getNextBlock()))}return code.mutation=mutation,code.variables=variables,code.variableName=variableName,code.variableType=variableType,code.fields=fields,code.table=tableName,JSON.stringify(code,null,"\t")},Blockly_JavaScript.mution_output=function(block){return JSON.stringify("",null,"\t")}}),{setters:[],execute:function(){}}}),System.register("client/script/blockly/QueryBlocks.js",[],function(_export,_context){"use strict";return{setters:[],execute:function(){window.Blockly_Blocks=window.Blockly_Blocks||{},window.Blockly_Blocks.query_head={init:function(){this.jsonInit({type:"query_head",message0:"Query -  %1 Scope %2 %3 Name %4 %5 %6",args0:[{type:"input_dummy"},{type:"field_input",name:"scope",text:"Scope"},{type:"input_dummy",align:"RIGHT"},{type:"field_input",name:"NAME",text:"name"},{type:"input_dummy",align:"RIGHT"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:30,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.mutation={init:function(){this.jsonInit({type:"mutation",message0:"Mutation -  %1 Scope %2 %3 Name %4 %5 %6",args0:[{type:"input_dummy"},{type:"field_input",name:"scope",text:"Scope"},{type:"input_dummy",align:"RIGHT"},{type:"field_input",name:"NAME",text:"name"},{type:"input_dummy",align:"RIGHT"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:30,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.read_query={init:function(){this.jsonInit({type:"read_query",message0:"Table %1 %2 %3",args0:[{type:"field_dropdown",name:"table",options:[["none","none"]]},{type:"input_dummy"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:60,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.query_variables={init:function(){this.jsonInit({type:"query_variables",message0:"Variables %1 %2 Type %3 %4 %5",args0:[{type:"input_dummy"},{type:"field_input",name:"name",text:"name"},{type:"field_dropdown",name:"variable_type",options:[["JSON","JSON"],["String","String"]]},{type:"input_value",name:"NAME"},{type:"input_dummy"}],previousStatement:null,nextStatement:null,colour:80,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.field_to_read={init:function(){this.jsonInit({type:"field_to_read",message0:"Field -  fields %1",args0:[{type:"field_dropdown",name:"fields",options:[["none","none"]]}],previousStatement:null,nextStatement:null,colour:90,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.mution_output={init:function(){this.jsonInit({type:"mution_output",message0:"Output -  %1 Fields to include - %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"Fields",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.find_method={init:function(){this.jsonInit({type:"find_method",message0:"Find All -  %1 Fields to read - %2 Filter %3 First %4 Last %5 Before %6 After %7",args0:[{type:"input_dummy"},{type:"input_statement",name:"Fields",align:"RIGHT"},{type:"input_value",name:"filter",align:"RIGHT"},{type:"input_value",name:"first",align:"RIGHT"},{type:"input_value",name:"last",align:"RIGHT"},{type:"input_value",name:"before",align:"RIGHT"},{type:"input_value",name:"after",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.findone_method={init:function(){this.jsonInit({type:"findone_method",message0:"Find One -  %1  Fields to read - %2 Filter %3",args0:[{type:"input_dummy"},{type:"input_statement",name:"Fields",align:"RIGHT"},{type:"input_value",name:"filter",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:135,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.findbyid_method={init:function(){this.jsonInit({type:"findbyid_method",message0:"Find By ID -  %1 Fields to read - %2 Filter %3 ID %4",args0:[{type:"input_dummy"},{type:"input_statement",name:"fields"},{type:"input_value",name:"filter",align:"RIGHT"},{type:"input_value",name:"id",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:285,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.query_count_method={init:function(){this.jsonInit({type:"count_method",message0:"Count -  %1 Where %2",args0:[{type:"input_dummy"},{type:"input_value",name:"where",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""})}},window.Blockly_Blocks.query_exists_method={init:function(){this.jsonInit({type:"exists_method",message0:"Exists - %1 ID %2",args0:[{type:"input_dummy"},{type:"input_value",name:"id",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:45,tooltip:"",helpUrl:""})}},_export("default",window.Blockly_Blocks)}}}),System.register("component/blockly/BlocklyDrawer.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","prop-types","node-blockly/browser","component/blockly/BlocklyToolbox/Definition.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,PropTypes,Blockly,BlocklyToolbox,styles,BlocklyDrawer,states,actions;function initTools(tools,Blockly){tools.forEach(function(tool){Blockly.Blocks[tool.name]=tool.block,Blockly.JavaScript[tool.name]=tool.generator})}return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_propTypes){PropTypes=_propTypes.default},function(_nodeBlocklyBrowser){Blockly=_nodeBlocklyBrowser.default},function(_componentBlocklyBlocklyToolboxDefinitionJs){BlocklyToolbox=_componentBlocklyBlocklyToolboxDefinitionJs.BlocklyToolbox}],execute:function(){styles=null,_export("BlocklyDrawer",BlocklyDrawer=function(_React$Component){function BlocklyDrawer(props){_classCallCheck(this,BlocklyDrawer);var _this=_possibleConstructorReturn(this,(BlocklyDrawer.__proto__||Object.getPrototypeOf(BlocklyDrawer)).call(this,props));return _this.onResize=_this.onResize.bind(_this),_this.wrapper=null,_this.content=null,_this.Blockly=_this.props.blockly?_this.props.blockly:Blockly,_this}return _inherits(BlocklyDrawer,_React$Component),_createClass(BlocklyDrawer,[{key:"componentWillMount",value:function(){initTools(this.props.tools,this.Blockly)}},{key:"componentDidMount",value:function(){this.wrapper&&(this.workspacePlayground=this.Blockly.inject(this.content,Object.assign({toolbox:this.toolbox},this.props.injectOptions)),this.props.workspaceXML&&this.Blockly.Xml.domToWorkspace(this.Blockly.Xml.textToDom(this.props.workspaceXML),this.workspacePlayground),this.workspacePlayground.addChangeListener(function(event){if(this.props.onChange){var _self=this;Object.keys(this.props.onChange).forEach(function(changeHandlerName){_self.props.onChange[changeHandlerName].bind(_self)(event,_self.Blockly)})}}.bind(this)),this.Blockly.Variables.getOrCreateVariablePackage(this.workspacePlayground,"var1","myVar","string"),window.addEventListener("resize",this.onResize,!1),this.onResize())}},{key:"componentWillReceiveProps",value:function(nextProps){if(initTools(nextProps.tools),this.workspacePlayground.clear(),this.workspacePlayground.refreshToolboxSelection(),nextProps.workspaceXML){var dom=this.Blockly.Xml.textToDom(nextProps.workspaceXML);this.Blockly.Xml.domToWorkspace(dom,this.workspacePlayground)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function(){var element=this.wrapper;this.content.style.width=element.offsetWidth+"px",this.content.style.height=element.offsetHeight+"px",this.Blockly.svgResize(this.workspacePlayground)}},{key:"render",value:function(){Object.assign({},styles.wrapper,this.props.style);return React.createElement("div",{id:this.props.mainClass,className:this.props.mainClass,ref:function(wrapper){this.wrapper=wrapper}.bind(this)},React.createElement("div",{id:this.props.contentClass,className:this.props.contentClass,ref:function(content){this.content=content}.bind(this)}),React.createElement(BlocklyToolbox,{blockly:this.Blockly,onRef:function(toolbox){this.toolbox=toolbox}.bind(this),tools:this.props.tools,appearance:this.props.appearance,onUpdate:function(){this.workspacePlayground&&this.toolbox&&this.workspacePlayground.updateToolbox(this.toolbox.outerHTML)}},this.props.children))}}]),BlocklyDrawer}(React.Component)),BlocklyDrawer.defaultProps={onChange:function(){},tools:[],workspaceXML:"",injectOptions:{},language:Blockly.JavaScript,appearance:{},className:"",style:{}},BlocklyDrawer.propTypes={tools:PropTypes.arrayOf(PropTypes.shape({name:PropTypes.string,category:PropTypes.string,block:PropTypes.shape({init:PropTypes.func}),generator:PropTypes.func})).isRequired,onChange:PropTypes.func,children:PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node),PropTypes.node]),workspaceXML:PropTypes.string,injectOptions:PropTypes.object,language:PropTypes.object,appearance:PropTypes.object,className:PropTypes.string,style:PropTypes.object},styles={wrapper:{minHeight:"85vh",position:"relative"},content:{position:"relative"}},_export("BlocklyDrawer",BlocklyDrawer),_export("default",BlocklyDrawer),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/blockly/BlocklyToolbox.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","prop-types"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,PropTypes,Xml,styles,BlocklyToolbox,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_propTypes){PropTypes=_propTypes.default}],execute:function(){Xml=function(_React$Component){function Xml(){return _classCallCheck(this,Xml),_possibleConstructorReturn(this,(Xml.__proto__||Object.getPrototypeOf(Xml)).apply(this,arguments))}return _inherits(Xml,_React$Component),_createClass(Xml,[{key:"render",value:function(){var injectedProps=Object.assign({},this.props,{ref:function(x){this.props.onRef(x)}.bind(this)});return delete injectedProps.onRef,React.createElement("xml",injectedProps)}}]),Xml}(React.Component),styles=null,_export("BlocklyToolbox",BlocklyToolbox=function(_React$Component2){function BlocklyToolbox(){return _classCallCheck(this,BlocklyToolbox),_possibleConstructorReturn(this,(BlocklyToolbox.__proto__||Object.getPrototypeOf(BlocklyToolbox)).apply(this,arguments))}return _inherits(BlocklyToolbox,_React$Component2),_createClass(BlocklyToolbox,[{key:"componentDidUpdate",value:function(){this.props.onUpdate()}},{key:"render",value:function(){var props=this.props,appearance=props.appearance||{},groupedByCategory=props.tools.reduce(function(accumulated,item){var result=accumulated;return result[item.category]=result[item.category]||[],result[item.category].push(item.name),result},{}),elements=Object.keys(groupedByCategory).map(function(key){var blocks=groupedByCategory[key].map(function(type){return React.createElement("block",{type:type,key:type})}),categoryAppearance=appearance&&appearance.categories&&appearance.categories[key]||{};return React.createElement("category",_extends({},categoryAppearance,{key:key,name:key}),blocks)});return React.createElement(Xml,{style:styles.toolbox,onRef:props.onRef},elements,props.children)}}]),BlocklyToolbox}(React.Component)),BlocklyToolbox.defaultProps={onRef:function(){},appearance:{},onUpdate:function(){}},BlocklyToolbox.propTypes={onRef:PropTypes.func,onUpdate:PropTypes.func,tools:PropTypes.arrayOf(Object).isRequired,children:PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node),PropTypes.node]),appearance:PropTypes.object},styles={toolbox:{display:"block"}},_export("BlocklyToolbox",BlocklyToolbox),_export("default",BlocklyToolbox),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/blockly/BlocklyWorkspace.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","component/blockly/BlocklyDrawer/Definition.js","component/blockly/BlocklyWorkspace/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,BlocklyDrawer,_Workspace,BlocklyWorkspace,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_componentBlocklyBlocklyDrawerDefinitionJs){BlocklyDrawer=_componentBlocklyBlocklyDrawerDefinitionJs.default},function(_componentBlocklyBlocklyWorkspaceStyleCssCss){}],execute:function(){_Workspace=function(_React$Component){function _Workspace(props){_classCallCheck(this,_Workspace);var _this=_possibleConstructorReturn(this,(_Workspace.__proto__||Object.getPrototypeOf(_Workspace)).call(this,props));return _this.state={code:"",xmlDOMText:'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',newXMLDOMText:'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',reload:1==_this.props.reload&&_this.props.reload,tools:_this.props.tools,categories:_this.props.categories},_this.workspace=null,_this.saveDOM=_this.saveDOM.bind(_this),_this.injectOptions={zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2},trashcan:!0},_this}return _inherits(_Workspace,_React$Component),_createClass(_Workspace,[{key:"componentDidMount",value:function(){this.props.toolboxOnUpdate()}},{key:"componentWillReceiveProps",value:function(nextProps){this.setState({reload:nextProps.reload,tools:nextProps.tools,categories:nextProps.categories})}},{key:"saveDOM",value:function(){}},{key:"render",value:function(){if(!this.workspace||1==this.state.reload){var blocklyWorkspace=React.createElement(BlocklyDrawer,{mainClass:"mainBlocklyContainer",contentClass:"contentBlocklyContainer",name:this.props.name,blockly:this.props.blockly,tools:this.props.tools,onChange:this.props.wsOnChange,workspaceXML:this.state.xmlDOMText,injectOptions:this.injectOptions,appearance:{categories:this.state.categories}});this.workspace=blocklyWorkspace,this.setState({reload:!1})}return React.createElement(React.Fragment,null,this.workspace)}}]),_Workspace}(React.Component),_export("BlocklyWorkspace",BlocklyWorkspace=function(props){return _Workspace}),_export("BlocklyWorkspace",BlocklyWorkspace),_export("default",BlocklyWorkspace),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/blockly/BlocklyToolbox/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","prop-types"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,PropTypes,Xml,styles,BlocklyToolbox;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_propTypes){PropTypes=_propTypes.default}],execute:function(){Xml=function(_React$Component){function Xml(){return _classCallCheck(this,Xml),_possibleConstructorReturn(this,(Xml.__proto__||Object.getPrototypeOf(Xml)).apply(this,arguments))}return _inherits(Xml,_React$Component),_createClass(Xml,[{key:"render",value:function(){var injectedProps=Object.assign({},this.props,{ref:function(x){this.props.onRef(x)}.bind(this)});return delete injectedProps.onRef,React.createElement("xml",injectedProps)}}]),Xml}(React.Component),styles=null,_export("BlocklyToolbox",BlocklyToolbox=function(_React$Component2){function BlocklyToolbox(){return _classCallCheck(this,BlocklyToolbox),_possibleConstructorReturn(this,(BlocklyToolbox.__proto__||Object.getPrototypeOf(BlocklyToolbox)).apply(this,arguments))}return _inherits(BlocklyToolbox,_React$Component2),_createClass(BlocklyToolbox,[{key:"componentDidUpdate",value:function(){this.props.onUpdate()}},{key:"render",value:function(){var props=this.props,appearance=props.appearance||{},groupedByCategory=props.tools.reduce(function(accumulated,item){var result=accumulated;return result[item.category]=result[item.category]||[],result[item.category].push(item.name),result},{}),elements=Object.keys(groupedByCategory).map(function(key){var blocks=groupedByCategory[key].map(function(type){return React.createElement("block",{type:type,key:type})}),categoryAppearance=appearance&&appearance.categories&&appearance.categories[key]||{};return React.createElement("category",_extends({},categoryAppearance,{key:key,name:key}),blocks)});return React.createElement(Xml,{style:styles.toolbox,onRef:props.onRef},elements,props.children)}}]),BlocklyToolbox}(React.Component)),BlocklyToolbox.defaultProps={onRef:function(){},appearance:{},onUpdate:function(){}},BlocklyToolbox.propTypes={onRef:PropTypes.func,onUpdate:PropTypes.func,tools:PropTypes.arrayOf(Object).isRequired,children:PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node),PropTypes.node]),appearance:PropTypes.object},styles={toolbox:{display:"block"}},_export("BlocklyToolbox",BlocklyToolbox)}}}),System.register("component/blockly/BlocklyDrawer/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","prop-types","node-blockly/browser","component/blockly/BlocklyToolbox/Definition.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,PropTypes,Blockly,BlocklyToolbox,styles,BlocklyDrawer;function initTools(tools,Blockly){tools.forEach(function(tool){Blockly.Blocks[tool.name]=tool.block,Blockly.JavaScript[tool.name]=tool.generator})}return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_propTypes){PropTypes=_propTypes.default},function(_nodeBlocklyBrowser){Blockly=_nodeBlocklyBrowser.default},function(_componentBlocklyBlocklyToolboxDefinitionJs){BlocklyToolbox=_componentBlocklyBlocklyToolboxDefinitionJs.BlocklyToolbox}],execute:function(){styles=null,_export("BlocklyDrawer",BlocklyDrawer=function(_React$Component){function BlocklyDrawer(props){_classCallCheck(this,BlocklyDrawer);var _this=_possibleConstructorReturn(this,(BlocklyDrawer.__proto__||Object.getPrototypeOf(BlocklyDrawer)).call(this,props));return _this.onResize=_this.onResize.bind(_this),_this.wrapper=null,_this.content=null,_this.Blockly=_this.props.blockly?_this.props.blockly:Blockly,_this}return _inherits(BlocklyDrawer,_React$Component),_createClass(BlocklyDrawer,[{key:"componentWillMount",value:function(){initTools(this.props.tools,this.Blockly)}},{key:"componentDidMount",value:function(){this.wrapper&&(this.workspacePlayground=this.Blockly.inject(this.content,Object.assign({toolbox:this.toolbox},this.props.injectOptions)),this.props.workspaceXML&&this.Blockly.Xml.domToWorkspace(this.Blockly.Xml.textToDom(this.props.workspaceXML),this.workspacePlayground),this.workspacePlayground.addChangeListener(function(event){if(this.props.onChange){var _self=this;Object.keys(this.props.onChange).forEach(function(changeHandlerName){_self.props.onChange[changeHandlerName].bind(_self)(event,_self.Blockly)})}}.bind(this)),this.Blockly.Variables.getOrCreateVariablePackage(this.workspacePlayground,"var1","myVar","string"),window.addEventListener("resize",this.onResize,!1),this.onResize())}},{key:"componentWillReceiveProps",value:function(nextProps){if(initTools(nextProps.tools),this.workspacePlayground.clear(),this.workspacePlayground.refreshToolboxSelection(),nextProps.workspaceXML){var dom=this.Blockly.Xml.textToDom(nextProps.workspaceXML);this.Blockly.Xml.domToWorkspace(dom,this.workspacePlayground)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function(){var element=this.wrapper;this.content.style.width=element.offsetWidth+"px",this.content.style.height=element.offsetHeight+"px",this.Blockly.svgResize(this.workspacePlayground)}},{key:"render",value:function(){Object.assign({},styles.wrapper,this.props.style);return React.createElement("div",{id:this.props.mainClass,className:this.props.mainClass,ref:function(wrapper){this.wrapper=wrapper}.bind(this)},React.createElement("div",{id:this.props.contentClass,className:this.props.contentClass,ref:function(content){this.content=content}.bind(this)}),React.createElement(BlocklyToolbox,{blockly:this.Blockly,onRef:function(toolbox){this.toolbox=toolbox}.bind(this),tools:this.props.tools,appearance:this.props.appearance,onUpdate:function(){this.workspacePlayground&&this.toolbox&&this.workspacePlayground.updateToolbox(this.toolbox.outerHTML)}},this.props.children))}}]),BlocklyDrawer}(React.Component)),BlocklyDrawer.defaultProps={onChange:function(){},tools:[],workspaceXML:"",injectOptions:{},language:Blockly.JavaScript,appearance:{},className:"",style:{}},BlocklyDrawer.propTypes={tools:PropTypes.arrayOf(PropTypes.shape({name:PropTypes.string,category:PropTypes.string,block:PropTypes.shape({init:PropTypes.func}),generator:PropTypes.func})).isRequired,onChange:PropTypes.func,children:PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node),PropTypes.node]),workspaceXML:PropTypes.string,injectOptions:PropTypes.object,language:PropTypes.object,appearance:PropTypes.object,className:PropTypes.string,style:PropTypes.object},styles={wrapper:{minHeight:"85vh",position:"relative"},content:{position:"relative"}},_export("BlocklyDrawer",BlocklyDrawer)}}}),System.register("component/blockly/BlocklyWorkspace/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-dom","component/blockly/BlocklyDrawer/Definition.js","component/blockly/BlocklyWorkspace/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,BlocklyDrawer,_Workspace,BlocklyWorkspace;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactDom){_reactDom.default},function(_componentBlocklyBlocklyDrawerDefinitionJs){BlocklyDrawer=_componentBlocklyBlocklyDrawerDefinitionJs.default},function(_componentBlocklyBlocklyWorkspaceStyleCssCss){}],execute:function(){_Workspace=function(_React$Component){function _Workspace(props){_classCallCheck(this,_Workspace);var _this=_possibleConstructorReturn(this,(_Workspace.__proto__||Object.getPrototypeOf(_Workspace)).call(this,props));return _this.state={code:"",xmlDOMText:'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',newXMLDOMText:'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',reload:1==_this.props.reload&&_this.props.reload,tools:_this.props.tools,categories:_this.props.categories},_this.workspace=null,_this.saveDOM=_this.saveDOM.bind(_this),_this.injectOptions={zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2},trashcan:!0},_this}return _inherits(_Workspace,_React$Component),_createClass(_Workspace,[{key:"componentDidMount",value:function(){this.props.toolboxOnUpdate()}},{key:"componentWillReceiveProps",value:function(nextProps){this.setState({reload:nextProps.reload,tools:nextProps.tools,categories:nextProps.categories})}},{key:"saveDOM",value:function(){}},{key:"render",value:function(){if(!this.workspace||1==this.state.reload){var blocklyWorkspace=React.createElement(BlocklyDrawer,{mainClass:"mainBlocklyContainer",contentClass:"contentBlocklyContainer",name:this.props.name,blockly:this.props.blockly,tools:this.props.tools,onChange:this.props.wsOnChange,workspaceXML:this.state.xmlDOMText,injectOptions:this.injectOptions,appearance:{categories:this.state.categories}});this.workspace=blocklyWorkspace,this.setState({reload:!1})}return React.createElement(React.Fragment,null,this.workspace)}}]),_Workspace}(React.Component),_export("BlocklyWorkspace",BlocklyWorkspace=function(props){return _Workspace}),_export("BlocklyWorkspace",BlocklyWorkspace)}}});

