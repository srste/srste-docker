System.register("client/buildingblock_styles.js",[],function(_export,_context){"use strict";return _export("default",function(){return{QuillEditor:"/* add css styles to the component */\n\n",FileUpload:"/* add css styles to the component */\n\n"}}),{setters:[],execute:function(){}}}),System.register("component/buildingblock/AutoComplete.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/objectWithoutProperties.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","thirdpartylib/formBuilder.css!css"],function(_export,_context){"use strict";var _objectWithoutProperties,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,el,_AutoComplete_,AutoComplete,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersObjectWithoutPropertiesJs){_objectWithoutProperties=_npmSystemjsPluginBabel0025BabelHelpersObjectWithoutPropertiesJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_thirdpartylibFormBuilderCssCss){}],execute:function(){el=React.createElement,_AutoComplete_=function(_React$Component){function _AutoComplete_(props,context){_classCallCheck(this,_AutoComplete_);var _this=_possibleConstructorReturn(this,(_AutoComplete_.__proto__||Object.getPrototypeOf(_AutoComplete_)).call(this,props)),_JSON$parse=JSON.parse(props.attrs),values=_JSON$parse.values,type=_JSON$parse.type,data=_objectWithoutProperties(_JSON$parse,["values","type"]);return _this.values=values,_this.type=type,_this.data=data,_this.hideList=_this.hideList.bind(_this),_this.showList=_this.showList.bind(_this),_this.getActiveOption=_this.getActiveOption.bind(_this),_this.getPreviousOption=_this.getPreviousOption.bind(_this),_this.getNextOption=_this.getNextOption.bind(_this),_this.selectOption=_this.selectOption.bind(_this),_this.isOptionValid=_this.isOptionValid.bind(_this),_this.keyboardNav=_this.keyboardNav.bind(_this),_this.filter=_this.filter.bind(_this),_this.fauxEvents={onFocus:function(evt){var list=evt.target.nextSibling.nextSibling,filteredOptions=_this.filter(list.querySelectorAll("li"),evt.target.value);if(evt.target.addEventListener("keydown",_this.keyboardNav),evt.target.value.length>0){var selectedOption=filteredOptions.length>0?filteredOptions[filteredOptions.length-1]:null;_this.showList(list,selectedOption)}},onBlur:function(evt){if(evt.target.removeEventListener("keydown",_this.keyboardNav),setTimeout(function(){evt.target.nextSibling.nextSibling.style.display="none"},200),_this.data.requireValidOption){var list=evt.target.nextSibling.nextSibling;_this.isOptionValid(list,evt.target.value)||(evt.target.value="",evt.target.nextSibling.value="")}},onChange:function(evt){var list=evt.target.nextSibling.nextSibling;evt.target.nextSibling.value=evt.target.value;var filteredOptions=_this.filter(list.querySelectorAll("li"),evt.target.value);if(0==filteredOptions.length)_this.hideList(list);else{var activeOption=_this.getActiveOption(list);activeOption||(activeOption=filteredOptions[filteredOptions.length-1]),_this.showList(list,activeOption)}}},_this.fauxAttrs=Object.assign({},_this.data,_this.fauxEvents,{id:_this.data.id+"-input",autocomplete:"off"}),_this.hiddenAttrs=Object.assign({},_this.data,{type:"hidden"}),delete _this.fauxAttrs.name,_this}return _inherits(_AutoComplete_,_React$Component),_createClass(_AutoComplete_,[{key:"filter",value:function(elems,term){var filteredElems=[],toggle=["none","block"];(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(toggle=toggle.reverse());for(var i=elems.length-1;i>=0;i--){-1!==elems[i].textContent.toLowerCase().indexOf(term.toLowerCase())?(elems[i].style.display=toggle[0],filteredElems.push(elems[i])):elems[i].style.display=toggle[1]}return filteredElems}},{key:"keyboardNav",value:function(e){var _this2=this,list=e.target.nextSibling.nextSibling,hiddenField=e.target.nextSibling,activeOption=this.getActiveOption(list),direction=new Map([[38,function(){var previous=_this2.getPreviousOption(activeOption);previous&&_this2.selectOption(list,previous)}],[40,function(){var next=_this2.getNextOption(activeOption);next&&_this2.selectOption(list,next)}],[13,function(){activeOption?(e.target.value=activeOption.innerHTML,hiddenField.value=activeOption.getAttribute("value"),"none"===list.style.display?_this2.showList(list,activeOption):_this2.hideList(list)):_this2.config.requireValidOption&&(_this2.isOptionValid(list,e.target.value)||(e.target.value="",e.target.nextSibling.value="")),e.preventDefault()}],[27,function(){_this2.hideList(list)}]]).get(e.keyCode);return direction||(direction=function(){return!1}),direction()}},{key:"hideList",value:function(list){this.selectOption(list,null),list.style.display="none"}},{key:"showList",value:function(list,selectedOption){this.selectOption(list,selectedOption),list.style.display="block",list.style.width=list.parentElement.offsetWidth+"px"}},{key:"getActiveOption",value:function(list){var activeOption=list.getElementsByClassName("active-option")[0];return activeOption&&"none"!==activeOption.style.display?activeOption:null}},{key:"getPreviousOption",value:function(current){var previous=current;do{previous=previous?previous.previousSibling:null}while(null!=previous&&"none"===previous.style.display);return previous}},{key:"getNextOption",value:function(current){var next=current;do{next=next?next.nextSibling:null}while(null!=next&&"none"===next.style.display);return next}},{key:"selectOption",value:function(list,selectedOption){for(var options=list.querySelectorAll("li"),i=0;i<options.length;i++)options[i].classList.remove("active-option");selectedOption&&selectedOption.classList.add("active-option")}},{key:"isOptionValid",value:function(list,value){for(var options=list.querySelectorAll("li"),validValue=!1,i=0;i<options.length;i++)if(options[i].innerHTML===value){validValue=!0;break}return validValue}},{key:"render",value:function(){var _this3=this,field=[];field.push(el("style",{},"@import url('/thirdpartylib/formBuilder.css');")),field.push(el("input",this.fauxAttrs,null)),field.push(el("input",this.hiddenAttrs,null));var options=this.values.map(function(optionData){var label=optionData.label,config={onClick:function(evt){var list=evt.target.parentElement,field=list.previousSibling.previousSibling;field.value=optionData.label,field.nextSibling.value=optionData.value,_this3.hideList(list)},value:optionData.value};return el("li",config,label)});return field.push(el("ul",{id:this.data.id+"-list",className:"fb-"+this.type+"-list"},options)),el.apply(void 0,[React.Fragment,{}].concat(field))}}]),_AutoComplete_}(React.Component),_export("AutoComplete",AutoComplete=function(props){return _AutoComplete_}),_export("AutoComplete",AutoComplete),_export("default",AutoComplete),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/buildingblock/AutoComplete/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/objectWithoutProperties.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","thirdpartylib/formBuilder.css!css"],function(_export,_context){"use strict";var _objectWithoutProperties,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,el,_AutoComplete_,AutoComplete;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersObjectWithoutPropertiesJs){_objectWithoutProperties=_npmSystemjsPluginBabel0025BabelHelpersObjectWithoutPropertiesJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_thirdpartylibFormBuilderCssCss){}],execute:function(){el=React.createElement,_AutoComplete_=function(_React$Component){function _AutoComplete_(props,context){_classCallCheck(this,_AutoComplete_);var _this=_possibleConstructorReturn(this,(_AutoComplete_.__proto__||Object.getPrototypeOf(_AutoComplete_)).call(this,props)),_JSON$parse=JSON.parse(props.attrs),values=_JSON$parse.values,type=_JSON$parse.type,data=_objectWithoutProperties(_JSON$parse,["values","type"]);return _this.values=values,_this.type=type,_this.data=data,_this.hideList=_this.hideList.bind(_this),_this.showList=_this.showList.bind(_this),_this.getActiveOption=_this.getActiveOption.bind(_this),_this.getPreviousOption=_this.getPreviousOption.bind(_this),_this.getNextOption=_this.getNextOption.bind(_this),_this.selectOption=_this.selectOption.bind(_this),_this.isOptionValid=_this.isOptionValid.bind(_this),_this.keyboardNav=_this.keyboardNav.bind(_this),_this.filter=_this.filter.bind(_this),_this.fauxEvents={onFocus:function(evt){var list=evt.target.nextSibling.nextSibling,filteredOptions=_this.filter(list.querySelectorAll("li"),evt.target.value);if(evt.target.addEventListener("keydown",_this.keyboardNav),evt.target.value.length>0){var selectedOption=filteredOptions.length>0?filteredOptions[filteredOptions.length-1]:null;_this.showList(list,selectedOption)}},onBlur:function(evt){if(evt.target.removeEventListener("keydown",_this.keyboardNav),setTimeout(function(){evt.target.nextSibling.nextSibling.style.display="none"},200),_this.data.requireValidOption){var list=evt.target.nextSibling.nextSibling;_this.isOptionValid(list,evt.target.value)||(evt.target.value="",evt.target.nextSibling.value="")}},onChange:function(evt){var list=evt.target.nextSibling.nextSibling;evt.target.nextSibling.value=evt.target.value;var filteredOptions=_this.filter(list.querySelectorAll("li"),evt.target.value);if(0==filteredOptions.length)_this.hideList(list);else{var activeOption=_this.getActiveOption(list);activeOption||(activeOption=filteredOptions[filteredOptions.length-1]),_this.showList(list,activeOption)}}},_this.fauxAttrs=Object.assign({},_this.data,_this.fauxEvents,{id:_this.data.id+"-input",autocomplete:"off"}),_this.hiddenAttrs=Object.assign({},_this.data,{type:"hidden"}),delete _this.fauxAttrs.name,_this}return _inherits(_AutoComplete_,_React$Component),_createClass(_AutoComplete_,[{key:"filter",value:function(elems,term){var filteredElems=[],toggle=["none","block"];(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(toggle=toggle.reverse());for(var i=elems.length-1;i>=0;i--){-1!==elems[i].textContent.toLowerCase().indexOf(term.toLowerCase())?(elems[i].style.display=toggle[0],filteredElems.push(elems[i])):elems[i].style.display=toggle[1]}return filteredElems}},{key:"keyboardNav",value:function(e){var _this2=this,list=e.target.nextSibling.nextSibling,hiddenField=e.target.nextSibling,activeOption=this.getActiveOption(list),direction=new Map([[38,function(){var previous=_this2.getPreviousOption(activeOption);previous&&_this2.selectOption(list,previous)}],[40,function(){var next=_this2.getNextOption(activeOption);next&&_this2.selectOption(list,next)}],[13,function(){activeOption?(e.target.value=activeOption.innerHTML,hiddenField.value=activeOption.getAttribute("value"),"none"===list.style.display?_this2.showList(list,activeOption):_this2.hideList(list)):_this2.config.requireValidOption&&(_this2.isOptionValid(list,e.target.value)||(e.target.value="",e.target.nextSibling.value="")),e.preventDefault()}],[27,function(){_this2.hideList(list)}]]).get(e.keyCode);return direction||(direction=function(){return!1}),direction()}},{key:"hideList",value:function(list){this.selectOption(list,null),list.style.display="none"}},{key:"showList",value:function(list,selectedOption){this.selectOption(list,selectedOption),list.style.display="block",list.style.width=list.parentElement.offsetWidth+"px"}},{key:"getActiveOption",value:function(list){var activeOption=list.getElementsByClassName("active-option")[0];return activeOption&&"none"!==activeOption.style.display?activeOption:null}},{key:"getPreviousOption",value:function(current){var previous=current;do{previous=previous?previous.previousSibling:null}while(null!=previous&&"none"===previous.style.display);return previous}},{key:"getNextOption",value:function(current){var next=current;do{next=next?next.nextSibling:null}while(null!=next&&"none"===next.style.display);return next}},{key:"selectOption",value:function(list,selectedOption){for(var options=list.querySelectorAll("li"),i=0;i<options.length;i++)options[i].classList.remove("active-option");selectedOption&&selectedOption.classList.add("active-option")}},{key:"isOptionValid",value:function(list,value){for(var options=list.querySelectorAll("li"),validValue=!1,i=0;i<options.length;i++)if(options[i].innerHTML===value){validValue=!0;break}return validValue}},{key:"render",value:function(){var _this3=this,field=[];field.push(el("style",{},"@import url('/thirdpartylib/formBuilder.css');")),field.push(el("input",this.fauxAttrs,null)),field.push(el("input",this.hiddenAttrs,null));var options=this.values.map(function(optionData){var label=optionData.label,config={onClick:function(evt){var list=evt.target.parentElement,field=list.previousSibling.previousSibling;field.value=optionData.label,field.nextSibling.value=optionData.value,_this3.hideList(list)},value:optionData.value};return el("li",config,label)});return field.push(el("ul",{id:this.data.id+"-list",className:"fb-"+this.type+"-list"},options)),el.apply(void 0,[React.Fragment,{}].concat(field))}}]),_AutoComplete_}(React.Component),_export("AutoComplete",AutoComplete=function(props){return _AutoComplete_}),_export("AutoComplete",AutoComplete)}}}),System.register("component/buildingblock/FileUpload.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/slicedToArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/taggedTemplateLiteral.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","graphql-tag","react-apollo","apollo-client","apollo-upload-client","apollo-cache-inmemory","carbon-components-react","lodash.clonedeep"],function(_export,_context2){"use strict";var _regeneratorRuntime,_slicedToArray,_asyncToGenerator,_taggedTemplateLiteral,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,gql,Mutation,ApolloProvider,ApolloClient,apolloUploadClient,InMemoryCache,FileUploader,cloneDeep,_templateObject,createUploadLink,apolloClient,_FileUpload_,FileUpload,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs){_slicedToArray=_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs){_taggedTemplateLiteral=_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_graphqlTag){gql=_graphqlTag.default},function(_reactApollo){Mutation=_reactApollo.Mutation,ApolloProvider=_reactApollo.ApolloProvider},function(_apolloClient){ApolloClient=_apolloClient.ApolloClient},function(_apolloUploadClient){apolloUploadClient=_apolloUploadClient.default},function(_apolloCacheInmemory){InMemoryCache=_apolloCacheInmemory.InMemoryCache},function(_carbonComponentsReact){FileUploader=_carbonComponentsReact.FileUploader},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_templateObject=_taggedTemplateLiteral(["\n              mutation($file: Upload!) {\n                singleUpload(file: $file) {\n                  id\n                  filename\n                  mimetype\n                  path\n                }\n              }\n            "],["\n              mutation($file: Upload!) {\n                singleUpload(file: $file) {\n                  id\n                  filename\n                  mimetype\n                  path\n                }\n              }\n            "]),createUploadLink=apolloUploadClient.createUploadLink,apolloClient=function(){var cache=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ApolloClient({ssrMode:"undefined"!=typeof window,cache:(new InMemoryCache).restore(cache),link:createUploadLink({uri:"/graphql"})})}(),_FileUpload_=function(_React$Component){function _FileUpload_(props){_classCallCheck(this,_FileUpload_);var _this=_possibleConstructorReturn(this,(_FileUpload_.__proto__||Object.getPrototypeOf(_FileUpload_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_FileUpload_,_React$Component),_createClass(_FileUpload_,[{key:"render",value:function(){var _this2=this;return React.createElement(ApolloProvider,{client:apolloClient},React.createElement(Mutation,{mutation:gql(_templateObject)},function(mutate){return React.createElement("div",null,React.createElement(FileUploader,{labelTitle:"",labelDescription:"",buttonLabel:_this2.props.widgetProps?_this2.props.widgetProps.Label:"Add files",filenameStatus:"edit",accept:[".jpg",".png"],name:"",size:"small",onChange:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(_ref2){var result,widgetProps,_ref2$target=_ref2.target,validity=_ref2$target.validity,file=_slicedToArray(_ref2$target.files,1)[0];return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!validity.valid){_context.next=5;break}return _context.next=3,mutate({variables:{file:file}});case 3:(result=_context.sent)&&result.data&&result.data.singleUpload&&result.data.singleUpload.id&&((widgetProps=cloneDeep(_this2.props.widgetProps)).UploadedFileId=result.data.singleUpload.id,_this2.props.updateStore({updates:{widgetProps:widgetProps}}));case 5:case"end":return _context.stop()}},_callee,_this2)})),function(_x2){return _ref.apply(this,arguments)})}),React.createElement("img",{src:_this2.props.widgetProps&&_this2.props.widgetProps.UploadedFileId?"/file/"+_this2.props.widgetProps.UploadedFileId:"/file/"+_this2.props.widgetProps.DefaultFileId}));var _ref}))}}]),_FileUpload_}(React.Component),_export("FileUpload",FileUpload=function(props){return _FileUpload_}),_export("FileUpload",FileUpload),_export("default",FileUpload),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/buildingblock/FileUpload/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/slicedToArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/taggedTemplateLiteral.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","graphql-tag","react-apollo","apollo-client","apollo-upload-client","apollo-cache-inmemory","carbon-components-react","lodash.clonedeep"],function(_export,_context2){"use strict";var _regeneratorRuntime,_slicedToArray,_asyncToGenerator,_taggedTemplateLiteral,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,gql,Mutation,ApolloProvider,ApolloClient,apolloUploadClient,InMemoryCache,FileUploader,cloneDeep,_templateObject,createUploadLink,apolloClient,_FileUpload_,FileUpload;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs){_slicedToArray=_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs){_taggedTemplateLiteral=_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_graphqlTag){gql=_graphqlTag.default},function(_reactApollo){Mutation=_reactApollo.Mutation,ApolloProvider=_reactApollo.ApolloProvider},function(_apolloClient){ApolloClient=_apolloClient.ApolloClient},function(_apolloUploadClient){apolloUploadClient=_apolloUploadClient.default},function(_apolloCacheInmemory){InMemoryCache=_apolloCacheInmemory.InMemoryCache},function(_carbonComponentsReact){FileUploader=_carbonComponentsReact.FileUploader},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_templateObject=_taggedTemplateLiteral(["\n              mutation($file: Upload!) {\n                singleUpload(file: $file) {\n                  id\n                  filename\n                  mimetype\n                  path\n                }\n              }\n            "],["\n              mutation($file: Upload!) {\n                singleUpload(file: $file) {\n                  id\n                  filename\n                  mimetype\n                  path\n                }\n              }\n            "]),createUploadLink=apolloUploadClient.createUploadLink,apolloClient=function(){var cache=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ApolloClient({ssrMode:"undefined"!=typeof window,cache:(new InMemoryCache).restore(cache),link:createUploadLink({uri:"/graphql"})})}(),_FileUpload_=function(_React$Component){function _FileUpload_(props){_classCallCheck(this,_FileUpload_);var _this=_possibleConstructorReturn(this,(_FileUpload_.__proto__||Object.getPrototypeOf(_FileUpload_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_FileUpload_,_React$Component),_createClass(_FileUpload_,[{key:"render",value:function(){var _this2=this;return React.createElement(ApolloProvider,{client:apolloClient},React.createElement(Mutation,{mutation:gql(_templateObject)},function(mutate){return React.createElement("div",null,React.createElement(FileUploader,{labelTitle:"",labelDescription:"",buttonLabel:_this2.props.widgetProps?_this2.props.widgetProps.Label:"Add files",filenameStatus:"edit",accept:[".jpg",".png"],name:"",size:"small",onChange:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(_ref2){var result,widgetProps,_ref2$target=_ref2.target,validity=_ref2$target.validity,file=_slicedToArray(_ref2$target.files,1)[0];return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!validity.valid){_context.next=5;break}return _context.next=3,mutate({variables:{file:file}});case 3:(result=_context.sent)&&result.data&&result.data.singleUpload&&result.data.singleUpload.id&&((widgetProps=cloneDeep(_this2.props.widgetProps)).UploadedFileId=result.data.singleUpload.id,_this2.props.updateStore({updates:{widgetProps:widgetProps}}));case 5:case"end":return _context.stop()}},_callee,_this2)})),function(_x2){return _ref.apply(this,arguments)})}),React.createElement("img",{src:_this2.props.widgetProps&&_this2.props.widgetProps.UploadedFileId?"/file/"+_this2.props.widgetProps.UploadedFileId:"/file/"+_this2.props.widgetProps.DefaultFileId}));var _ref}))}}]),_FileUpload_}(React.Component),_export("FileUpload",FileUpload=function(props){return _FileUpload_}),_export("FileUpload",FileUpload)}}}),System.register("component/buildingblock/QuillEditor.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","quill-render","react-render-html"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_render,renderHTML,_QuillEditor_,QuillEditor,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_quillRender){_render=_quillRender.default},function(_reactRenderHtml){renderHTML=_reactRenderHtml.default}],execute:function(){_QuillEditor_=function(_React$Component){function _QuillEditor_(props){_classCallCheck(this,_QuillEditor_);var _this=_possibleConstructorReturn(this,(_QuillEditor_.__proto__||Object.getPrototypeOf(_QuillEditor_)).call(this,props));return _this.state={contents:{ops:[{insert:""}]}},_this.update=_this.update.bind(_this),_this}return _inherits(_QuillEditor_,_React$Component),_createClass(_QuillEditor_,[{key:"update",value:function(delta){var contents=this.quill.getContents();contents&&this.setState({contents:contents})}},{key:"render",value:function(){if(_render.format.block.image=function($,src){var img=$("<img>");img.attr("src",src),this.append(img)},!this.quill){this.quill=new Quill(this.props.editorselector,{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],["link","image"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]]},theme:"snow"}),this.quill.on("text-change",this.update)}var htmlString=_render(this.state.contents.ops);console.log(htmlString);var RenderedHTML=renderHTML(htmlString);return React.createElement("div",null,RenderedHTML)}}]),_QuillEditor_}(React.Component),_export("QuillEditor",QuillEditor=function(props){return _QuillEditor_}),_export("QuillEditor",QuillEditor),_export("default",QuillEditor),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/buildingblock/QuillEditor/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","quill-render","react-render-html"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_render,renderHTML,_QuillEditor_,QuillEditor;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_quillRender){_render=_quillRender.default},function(_reactRenderHtml){renderHTML=_reactRenderHtml.default}],execute:function(){_QuillEditor_=function(_React$Component){function _QuillEditor_(props){_classCallCheck(this,_QuillEditor_);var _this=_possibleConstructorReturn(this,(_QuillEditor_.__proto__||Object.getPrototypeOf(_QuillEditor_)).call(this,props));return _this.state={contents:{ops:[{insert:""}]}},_this.update=_this.update.bind(_this),_this}return _inherits(_QuillEditor_,_React$Component),_createClass(_QuillEditor_,[{key:"update",value:function(delta){var contents=this.quill.getContents();contents&&this.setState({contents:contents})}},{key:"render",value:function(){if(_render.format.block.image=function($,src){var img=$("<img>");img.attr("src",src),this.append(img)},!this.quill){this.quill=new Quill(this.props.editorselector,{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],["link","image"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]]},theme:"snow"}),this.quill.on("text-change",this.update)}var htmlString=_render(this.state.contents.ops);console.log(htmlString);var RenderedHTML=renderHTML(htmlString);return React.createElement("div",null,RenderedHTML)}}]),_QuillEditor_}(React.Component),_export("QuillEditor",QuillEditor=function(props){return _QuillEditor_}),_export("QuillEditor",QuillEditor)}}});99%;\n}\n\n.tab-create{\n    display: inline-flex;\n    padding-bottom: 5px;\n}\n.tabs-panel{\n    display: inline-grid;        \n    width: 100%;\n    text-align: left;\n}\n\n.bx--select {\n    display: contents;\n}\n\n",PageDesignerPreview:".topPreviewContainer {\n    display: block;\n    width: 100%;            \n    background-color: white;\n    height: inherit;\n}\n\n.gridPreviewContent {    \n    display: inline-block;\n    width: 100%;\n    min-height: fit-content;\n    height: inherit;\n    overflow: auto;\n}\n\n.showOverlay {\n    background-color: #171616;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    opacity: 0.2;\n    z-index: 10;\n}\n\n.showOverlay-hide {\n    display: none;\n}\n\n.gridPreviewCanvas {\n    display: block;\n    // min-height: 90vh;\n    max-height: fit-content;\n}\n\n.noWidgetSpacing > .grid-stack-item > .grid-stack-item-content {\n    left: 0px !important;\n    right: 0px !important;\n}\n\n.grid-stack-item-removing {\n    opacity: 0.5;\n}\n\n.savedata {\n    width: 100vw;\n    height: 100px;\n    display: none;\n}\n\n.sidebar {\n    /* background: #3a3f46; */\n    padding-left: 5px;\n    float: left;\n    height: 100vh;\n    /* margin-top: 4px;\n    border-radius: 5px; */\n    overflow: hidden;\n    text-align: center;\n    width: 20%;\n}\n\n\n.sr-nav-tab li {\n    max-width: 100px;\n}\n\n.page-gen-body.bx--text- input__field-wrapper, .sr-prop-body.bx--text- input__field-wrapper{\n    width: 99%;\n}\n.sidebar.grid-stack-item {\n    width: 45%;\n    border: 2px solid #aeaeae;\n    margin: 2px;\n    text-align: center;\n    line-height: 30px;\n    float: left;\n    z-index: 10;\n    background: #ededed;\n    cursor: pointer;\n    display: inline-block;\n}\n\n.sidebar.grid-stack-item.grid-stack-item-content {\n    background: none;\n}\n\n.sidebar.grid-stack-item.grid-stack-item-content:before {\n    width: 33px;\n    height: 150%;\n    display: block;\n    float: left;\n    margin: -3px 5px 0 0;\n    border-right: 1px solid #a0abb9;\n    background-color: #dddddd;\n    content: \"\";\n}\n.sidebar.grid-stack-item.grid-stack-item-content:after {\n    position: absolute;\n    top: 6px;\n    left: 7px;\n    bottom: auto;\n    right: auto;\n    background-position: 0 - 40px;\n    background-image: url(/web_studio/static / src / img / ui / studio_icons@2x.png);\n    background-size: 20px 440px;\n}\n\n.field-img {\n    display: inline-block;\n    float: left;\n    width: 30%;\n    border: 1px solid #c8bdbd;\n}\n\n.field-title {\n    display: inline-block;\n    float: left;\n    width: 70%;\n    font-size: smaller;\n    padding-left: 5px;\n    text-align: left;\n}\n.sr-page-editorial{\n    width: 80%;\n    float: right;\n}\n.content {\n    padding-left: 2px;\n    /* position: relative;\n    float: left;\n    width: 100%; */\n}\n\n.topContainerWithoutPreview{\n    width: 100%;\n}\n\n.gridContent {\n    display: inline-block;\n    width: 100%;    \n}\n\n.gridContent-full {\n    display: inline-block;\n    /* float: left; */\n    /* height: 100vh; */\n    width: 100%;\n    position: relative;\n    /* overflow: hidden; */\n}\n\n.gridCanvas {\n    display: block;\n    /* float: left; */\n    /*background-color: #f4f2f2;*/\n    border: 1px solid grey;\n    min-height: 100vh;\n    max-height: 100vh;\n    overflow: scroll;\n    /* width: 60%; */\n}\n\n.emulator {\n    width: 100%;\n    height: 100%;\n    border: none;\n    will-change: transform;\n}\n\n.dualmode.emulatorContainer {\n    width: 40%;\n    float: right;\n}\n\n.fullscreen.emulatorContainer {\n    width: 0%;\n}\n\n.selectOptions {\n    display: inline-block;\n    float: right;\n    margin-bottom: 10px;\n    position: relative;\n    width: 100%;\n    height: 30px;\n}\n\n.sr-prev-pange{\n    /* overflow-y: scroll;height: 100vh; */\n    overflow: hidden;\n}\n\n/* The device with borders */\n.emulatorFrameContainer {\n    display: inline-block;\n    width: 100%;\n}\n\n.emulatorFrameContainer.tablet {\n    position: relative;\n    width: 550px;\n    height: 650px;\n    --devicewidth: 550px;\n    --deviceheight: 650;\n    border: 16px black solid;\n    border-top-width: 60px;\n    border-bottom-width: 60px;\n    border-radius: 36px;\n    -webkit-transform-origin: 0 0;\n    transform-origin: 0 0;\n    -webkit-transform: scale(.7) translate(-50%);\n    /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n    transform: scale(.7) translate(-50%);\n    /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n}\n\n/* The horizontal line on the top of the device */\n.emulatorFrameContainer.tablet:before {\n    content: '';\n    display: block;\n    width: 60px;\n    height: 5px;\n    position: absolute;\n    top: -30px;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background: #333;\n    border-radius: 10px;\n}\n\n/* The circle on the bottom of the device */\n.emulatorFrameContainer.tablet:after {\n    content: '';\n    display: block;\n    width: 35px;\n    height: 35px;\n    position: absolute;\n    left: 50%;\n    bottom: -65px;\n    transform: translate(-50%, -50%);\n    background: #333;\n    border-radius: 50%;\n}\n\n/* The screen (or content) of the device */\n.emulatorFrameContainer.tablet {\n    top: 1%;\n    left: 50%;\n    background: white;\n    margin: -1px;\n}\n\n.emulatorFrameContainer.smartphone {\n    position: relative;\n    align-content: center;\n    width: 360px;\n    vertical-align: top;\n    float: left;\n    top: 3%;\n    left: 10%;\n    height: 540px;\n    --devicewidth: 360px;\n    --deviceheight: 420px;\n    margin: auto;\n    border: 16px black solid;\n    border-top-width: 60px;\n    border-bottom-width: 60px;\n    border-radius: 36px;\n}\n\n/* The horizontal line on the top of the device */\n.emulatorFrameContainer.smartphone:before {\n    content: '';\n    display: block;\n    width: 60px;\n    height: 5px;\n    position: absolute;\n    top: -30px;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background: #333;\n    border-radius: 10px;\n}\n\n/* The circle on the bottom of the device */\n.emulatorFrameContainer.smartphone:after {\n    content: '';\n    display: block;\n    width: 35px;\n    height: 35px;\n    position: absolute;\n    left: 50%;\n    bottom: -65px;\n    transform: translate(-50%, -50%);\n    background: #333;\n    border-radius: 50%;\n}\n\n.emulatorFrameContainer.laptop {\n    -webkit-transform-origin: 0 0;\n    transform-origin: 0 0;\n    -webkit-transform: scale(.35) translate(-50%);\n    /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n    transform: scale(.35) translate(-50%);\n    /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n    top: 20%;\n    left: 50%;\n    /* float: left; */\n    position: relative;\n    display: inline-block;\n    width: 900px;\n    height: 629px;\n    --devicewidth: 900;\n    --deviceheight: 585px;\n    border-radius: 6px;\n    border-style: solid;\n    border-color: black;\n    border-width: 24px 24px 80px;\n    background-color: black;\n}\n\n/* The keyboard of the laptop */\n.emulatorFrameContainer.laptop:after {\n    content: '';\n    display: block;\n    position: absolute;\n    bottom: -170px;\n    width: 1040px;\n    height: 60px;\n    margin: 80px 0 0 -90px;\n    background: black;\n    border-radius: 6px;\n}\n\n/* The top of the keyboard */\n.emulatorFrameContainer.laptop:before {\n    content: '';\n    display: block;\n    position: absolute;\n    width: 250px;\n    height: 30px;\n    bottom: -110px;\n    left: 50%;\n    -webkit-transform: translate(-50%);\n    transform: translate(-50%);\n    background: #787777;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    z-index: 1;\n}\n.sidebar.nav-tabs a {\n    font-size: x-small;\n    /* color: white; */\n}\n\n.sidebar.nav-tabs a: hover {\n    color: black;\n}\n\n.tabs-icon {\n    background-color: blue;\n}\n\n.sidebar.grid-stack-item.grid-stack-item-content:hover {\n    background: white;\n}\n\n.sectionheader {\n    display: block;\n    float: left;\n    text-align: left;\n    margin-left: 20px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    width: 80%;\n    /* color: white; */\n}\n.fullscreen.topContainer.gridcanvas-actions{\n    position: absolute;\n    z-index: 999;\n    right: 0%;\n}\n\n.dualmode.topContainer.gridcanvas-actions{\n    position: absolute;\n    z-index: 999;\n    right: 32%;\n}\n.gridcanvas-actions-full{\n    position: absolute;\n    z-index: 999;\n    right: 0%;\n}\n.gridcanvas-actions.bx--btn--primary{\n    margin-top: 1px;\n    margin-right: 5px;\n    /* font-weight: 500; */\n    padding: 5px;\n    height: 30px;\n    min-height: 30px;\n}\n\n.gridcanvas-actions.bx--overflow- menu {\n    float: right;\n    background-color: #7dbb86;\n    color: white;\n}\n\n.gridcanvas-actions-full.bx--overflow- menu {\n    /* float: right; */\n    background-color: #7cb985;\n}\n\n.sidebar.widgetContainer {\n    display: none;\n}\n\n.sidebar.draggingWidget {\n    background: #c10848;\n    font-size: xx-small;\n    font-family: fantasy;\n}\n\n.sidebar.draggingWidget:before {\n    content: \"DRAGGING...\";\n    color: white;\n}\n\n.tab-pane {\n    height: 100vh;\n}\n\n.sidebar.widget:hover {\n    border: none;\n}\n\n.gridCanvas.widget:hover {\n    border: 2px dotted blue;\n    margin: 2px;\n}\n\n.pane-body {\n    margin: 5px;\n    background-color: white;\n    overflow-y: auto;\n    min-height: 40vh;\n    border-radius: 5px;\n    padding-top: 10px;\n}\n\n.formFieldInputText {\n    margin-bottom: 10px;\n}\n\n.sr-des-footerPane{\n    position: relative;\n    float: left;\n    /* margin-left: 2px; */\n    padding-left: 2px;\n    width: 100%;\n    min-height: 250px;\n    height: auto;\n    background-color: whitesmoke;\n    overflow: visible;\n    /* border: 1px solid gray; */\n    overflow-y: visible;\n}\n.contentTabs {\n    min-height: 27px;\n    background-color: #c3c3c3;\n    width: 100%;\n    display: inline-block;\n    margin-bottom: 1px;\n    position: relative;\n    z-index: 9;\n    height: auto;\n}\n\n.contentTab {\n    font-size: smaller;\n    color: black;\n    position: relative;\n    float: left;\n    display: inline-block;\n    margin-top: 3px;\n    margin-left: 5px;\n    background-color: #e4e4e4;\n    padding: 3px;\n    width: auto;\n    min-width: 80px;\n    text-align: center;\n    height: auto;\n}\n\n.contentTabActive {\n    font-size: smaller;\n    color: black;\n    cursor: crosshair;\n    position: relative;\n    display: block;\n    float: left;\n    margin-top: 4px;\n    margin-left: 5px;\n    background-color: white;\n    padding: 3px;\n    width: max-content;\n    min-width: 80px;\n    text-align: center;\n    height: 23px;\n    border-bottom: 2px solid #ff4f6b;\n}\n\n.contentTab: hover, .contentTabActive:hover {\n    background-color: white;\n    cursor: default;\n}\n\n.showHidePreview {\n    float: left;\n    color: white;\n    padding-left: 10px;\n    padding-right: 10px;\n    background-color: red;\n}\n\n.closeTab: hover {\n    cursor: pointer;\n    background-color: #dadada;\n}\n\nsvg.closeTab {\n    margin-top: 3px;\n    height: 23px;\n}\n\n.contentTabItems {\n    display: inline-block;\n}\n\n.sr-new-file-menu{\n    text-align: left;\n    padding-left: 10px;\n    padding-top: 10px;\n}\n.sr-new-file{\n    font-weight: 600;\n    padding-left: 50px;\n    position: absolute;\n    padding-top: 9px;\n}\n\n.eidtor-toggle-minimize{\n    position: absolute;\n    z-index: 999;\n    bottom: 0;\n    padding: 3px;\n    right: 33%;\n    cursor: pointer;\n}\n\n.eidtor-toggle-maximize{\n    position: absolute;\n    z-index: 999;\n    padding: 5px;\n    bottom: 0;\n    right: 5px;\n    cursor: pointer;\n}\n.fullscreen.topContainer {\n    width: 100%;\n}\n\n.dualmode.topContainer {\n    width: 60%;\n    float: left;\n}\n\n.tabLabel {\n    width: 100px !important;\n}\n\n.innerTabs {\n    margin-top: 20px !important;\n    margin-left: 20% !important;\n    background-color: #f3f3f3!important;\n    width: 60% !important;\n    margin-bottom: 20px !important;\n}\n\n.widgetactive {\n    border: 2px dotted green;\n}\n\n.pageloader-show {\n    position: absolute;\n    top: 40%;\n    left:46%;\n}\n\n.pageloader-hide {\n    display: none !important;\n}\n\n.bx--inline-loading__checkmark-container {\n    display: none !important;\n}\n\n.bx--inline-loading__text {\n    background: white;\n    z-index: 11;\n    margin-left: -3px;\n    padding: 2px;\n    padding-right: 5px;\n    padding-left: 5px;\n    border-bottom-right-radius: 10%;\n    border-top-right-radius: 10%;\n}\n\n.bx--inline-loading__animation {\n    background-color: white;\n    border-radius: 50%;\n    z-index: 222;\n}\n\n::-webkit-scrollbar {\n    width: 2px;\n    height: 2px;\n}\n \n/* Track */\n::-webkit-scrollbar-track {\n    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); \n    -webkit-border-radius: 10px;\n    border-radius: 10px;\n}\n \n/* Handle */\n::-webkit-scrollbar-thumb {\n    -webkit-border-radius: 10px;\n    border-radius: 10px;\n    background: rgba(255,0,0,0.8); \n    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); \n}\n::-webkit-scrollbar-thumb:window-inactive {\n\tbackground: rgba(255,0,0,0.4); \n}\n\n",PageDesignerPageActions:"/* add css styles to the component */\n\n",PageDesignerGeneral:".page-gen-body {  \n    display: block;    \n    padding: 20px;\n    background-color: white;\n    height: fit-content;\n    overflow: auto;\n}\n.field-mapper{\n    display: flex;\n    width: 55%;\n}\n.mapper-adv{\n    margin-top: 50px;\n}\n.formFieldInputText {\n    width: 98%;\n    clear: both;\n}\n\n.pageType. {\n    text-align: left;\n}\n\n.pageType > .bx--label {\n    display: flex;    \n}\n\n.bx--select {\n    display: contents;\n}\n\n",PageDesignerActions:".previewPane {\n    position: fixed;\n    top: 10%;\n    left: 10%;\n    background-color: white;\n    z-index: 9999;\n    margin-top: 5px;\n    border: 1px solid #848484;\n    padding: 5px;\n    width: 80%;\n    height: 80%;\n    overflow: scroll;\n}\n\n.screenOverlay {\n  position: fixed;\n  background-color: #000000;\n  opacity: 0.5;\n  z-index: 9999;\n  top: 0px;\n  left: 0px;\n  height: 2000px;\n  width: 2000px;\n}\n\n.cancelPreview {\n  position: fixed;\n  z-index: 99999;\n  background-color: white;\n  top: 8%;\n  float: right;\n  border: 1px solid black;\n  border-radius: 50%;\n  right: 9%;\n  color: black;\n}\n\n.cancelPreview:hover {\n  border: 1px solid #4f7955;\n  cursor: pointer;\n}\n\n",PageDesigner:"[draggable=true] {\n  cursor: move;\n}\n\n.sidebar {\n  /* background: #3a3f46; */\n  padding-left: 5px;\n  float: left;\n  height: 93vh;\n  border-right: 1px solid #c3c3c3;\n  /* margin-top: 4px;\n  border-radius: 5px; */\n  overflow-y: hidden;\n  overflow-x: hidden;\n  text-align: center;\n  width: 22%;\n\n  overflow: auto;\n  resize: horizontal;\n  max-width: 35%;\n  min-width: 2%;\n}\n\n.bx--accordion__heading {   \n    top: 0;\n    z-index: 100;\n    background-color: #f3f3f3;\n    border: 1px solid grey;\n}\n\n.grid-stack-item-content {\n  color: #2c3e50;\n  text-align: center;\n}\n\n.gridCanvas>.grid-stack-item {\n    background-color: #f8f8f8;\n}\n\n.gridCanvas>.grid-stack-item.ui-draggable-dragging {\n    background-color: #fbfff6;\n}\n\n.gridCanvas>.grid-stack-item>.grid-stack-item-content {\n    border: 1px solid rgb(195, 195, 195);\n}\n\n.grid-stack-item-removing {\n  opacity: 0.5;\n}\n\n.grid-stack-placeholder {\n    background-color: green;\n}\n\n.savedata {\n  width: 100vw;\n  height: 100px;\n  display: none;\n}\n\n.sidebar {\n  /* background: #3a3f46; */\n  padding-left: 5px;\n  float: left;\n  height: 93vh;\n  border-right: 1px solid #c3c3c3;\n  /* margin-top: 4px;\n  border-radius: 5px; */\n  overflow-y: hidden;\n  overflow-x: hidden;\n  text-align: center;\n  width: 18%;\n}\n\n\n.sr-nav-tab li {\n  max-width: 100px;\n}\n\n.page-gen-body .bx--text-input__field-wrapper, .sr-prop-body .bx--text-input__field-wrapper{\n  width: 99%;\n}\n\n.sidebar .grid-stack-item .grid-stack-item-content {\n  background: none;\n}\n\n.sr-page-topCotainer {\n    flex-flow: row;\n    flex: 1 1 auto;\n}\n\n.field-img {\n    display: inline-block;\n    float: left;\n    width: 30%;\n    border: 1px solid #c8bdbd;\n}\n\n.field-title {\n    display: inline-block;\n    float: left;\n    width: 70%;\n    font-size: smaller;\n    padding-left: 5px;\n    text-align: left;\n}\n.sr-page-editorial{\n  width: 82%;\n  float: right;\n}\n.content {\n  padding-left: 2px;\n  /* position: relative;\n  float: left;\n  width: 100%; */ \n}\n\n.topContainerWithoutPreview{\n  width: 100%;\n}\n\n.gridContent {    \n    display: inline-block;\n    width: 100%;\n    min-height: 90vh;\n    max-height: 90vh;\n    height: 90vh;\n    overflow: scroll;\n    background-color: #f8f8f8;\n}\n\n.gridContent-full {\n  display: inline-block;\n  /* float: left; */\n  /* height: 100vh; */\n  width: 100%;\n  position: relative;\n  /* overflow: hidden; */\n}\n\n.gridCanvas {\n  display: block;  \n  border: 1px solid grey;  \n  min-height: 90vh;\n}\n\n.emulator {\n  width: 100%;\n  height: 100%;\n  border: none;\n  will-change: transform;\n}\n\n.dualmode .emulatorContainer {\n  width: 40%;\n  float: right;\n}\n\n.fullscreen .emulatorContainer {\n  width: 0%;\n}\n\n.selectOptions {\n  display: inline-block;\n  float: right;\n  margin-bottom: 10px;\n  position: relative;\n  width: 100%;\n  height: 30px;\n}\n\n.sr-prev-pange{\n   /* overflow-y: scroll;height: 100vh; */\n    overflow: hidden;\n}\n\n/* The device with borders */\n.emulatorFrameContainer {\n  display: inline-block;\n  width:100%;\n}\n\n.emulatorFrameContainer.tablet {\n  position: relative;\n  width: 550px;\n  height: 650px;\n  --devicewidth: 550px;\n  --deviceheight: 650;\n  border: 16px black solid;\n  border-top-width: 60px;\n  border-bottom-width: 60px;\n  border-radius: 36px;\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0;\n  -webkit-transform: scale(.7) translate(-50%);\n  /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n  transform: scale(.7) translate(-50%);\n  /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n}\n\n/* The horizontal line on the top of the device */\n.emulatorFrameContainer.tablet:before {\n  content: '';\n  display: block;\n  width: 60px;\n  height: 5px;\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: #333;\n  border-radius: 10px;\n}\n\n/* The circle on the bottom of the device */\n.emulatorFrameContainer.tablet:after {\n  content: '';\n  display: block;\n  width: 35px;\n  height: 35px;\n  position: absolute;\n  left: 50%;\n  bottom: -65px;\n  transform: translate(-50%, -50%);\n  background: #333;\n  border-radius: 50%;\n}\n\n/* The screen (or content) of the device */\n.emulatorFrameContainer.tablet {\n  top: 1%;\n  left: 50%;\n  background: white;\n  margin: -1px;\n}\n\n.emulatorFrameContainer.smartphone {\n  position: relative;\n  align-content: center;\n  width: 360px;\n  vertical-align: top;\n  float: left;\n  top: 3%;\n  left: 10%;\n  height: 540px;\n  --devicewidth: 360px;\n  --deviceheight: 420px;\n  margin: auto;\n  border: 16px black solid;\n  border-top-width: 60px;\n  border-bottom-width: 60px;\n  border-radius: 36px;\n}\n\n/* The horizontal line on the top of the device */\n.emulatorFrameContainer.smartphone:before {\n  content: '';\n  display: block;\n  width: 60px;\n  height: 5px;\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: #333;\n  border-radius: 10px;\n}\n\n/* The circle on the bottom of the device */\n.emulatorFrameContainer.smartphone:after {\n  content: '';\n  display: block;\n  width: 35px;\n  height: 35px;\n  position: absolute;\n  left: 50%;\n  bottom: -65px;\n  transform: translate(-50%, -50%);\n  background: #333;\n  border-radius: 50%;\n}\n\n.emulatorFrameContainer.laptop {\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0;\n  -webkit-transform: scale(.35) translate(-50%);\n  /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n  transform: scale(.35) translate(-50%);\n  /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n  top: 20%;\n  left: 50%;\n  /* float: left; */\n  position: relative;\n  display: inline-block;\n  width: 900px;\n  height: 629px;\n  --devicewidth: 900;\n  --deviceheight: 585px;\n  border-radius: 6px;\n  border-style: solid;\n  border-color: black;\n  border-width: 24px 24px 80px;\n  background-color: black;\n}\n\n/* The keyboard of the laptop */\n.emulatorFrameContainer.laptop:after {\n  content: '';\n  display: block;\n  position: absolute;\n  bottom: -170px;\n  width: 1040px;\n  height: 60px;\n  margin: 80px 0 0 -90px;\n  background: black;\n  border-radius: 6px;\n}\n\n/* The top of the keyboard */\n.emulatorFrameContainer.laptop:before {\n  content: '';\n  display: block;\n  position: absolute;\n  width: 250px;\n  height: 30px;\n  bottom: -110px;\n  left: 50%;\n  -webkit-transform: translate(-50%);\n  transform: translate(-50%);\n  background: #787777;\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n  z-index: 1;\n}\n.sidebar .nav-tabs a {\n  font-size: x-small;\n  /* color: white; */\n}\n\n.sidebar .nav-tabs a:hover {\n    color: black;\n}\n\n.tabs-icon {\n  background-color: blue;\n}\n\n.sidebar .grid-stack-item .grid-stack-item-content:hover {\n    background: white;\n}\n\n.fullscreen .topContainer .gridcanvas-actions{\n    position: absolute;\n    z-index: 999;\n    right: 0%;\n}\n\n.dualmode .topContainer .gridcanvas-actions{\n    position: absolute;\n    z-index: 999;\n    right: 30%;\n}\n.gridcanvas-actions-full{\n  position: absolute;\n  z-index: 999;\n  right: 0%;\n}\n.gridcanvas-actions .bx--btn--primary{\n    margin-top: 1px;\n    margin-right: 5px;\n    /* font-weight: 500; */\n    padding: 5px;\n    height: 30px;\n    min-height: 30px;\n}\n\n.gridcanvas-actions .bx--overflow-menu {\n    float: right;\n    background-color: #7dbb86;\n    color: white;\n}\n\n.gridcanvas-actions-full .bx--overflow-menu {\n  /* float: right; */\n  background-color: #7cb985;\n}\n\n.sidebar .widgetContainer {\n    display: none;\n}\n\n.sidebar .draggingWidget {\n    background: #c10848;\n    font-size: xx-small;\n    font-family: fantasy;\n}\n\n.sidebar .draggingWidget:before {\n     content: \"DRAGGING...\";\n     color: white;\n}\n\n.tab-pane {\n    height: 100vh;\n}\n\n.sidebar .widget:hover {\n    border: none;\n}\n\n/*.gridCanvas .widget:hover {\n    border: 2px dotted blue;\n    margin: 2px;\n}*/\n\n.pane-body {\n    margin: 5px;\n    background-color: white;\n    overflow-y: auto;\n    min-height: 40vh;\n    border-radius: 5px;\n    padding-top: 10px;\n}\n\n.formFieldInputText {\n    margin-bottom: 10px;\n}\n\n.sr-des-footerPane{\n  position:relative;\n  float:left;\n  /* margin-left: 2px; */\n  padding-left: 2px;\n  width: 100%;\n  min-height: 250px;\n  height: auto;\n  background-color: whitesmoke;\n  overflow: visible;\n  /* border: 1px solid gray; */\n  overflow-y: visible;\n}\n.contentTabs {\n  min-height: 27px;\n  background-color: #c3c3c3;\n  width: 100%;\n  display: inline-block;\n  margin-bottom: 1px;\n  position: relative;\n  z-index: 9;\n  height: auto;\n}\n\n.contentTab {\nfont-size: smaller;\ncolor: black;\nposition: relative;\nfloat: left;\ndisplay: inline-block;\nmargin-top: 3px;\nmargin-left: 5px;\nbackground-color: #e4e4e4;\npadding: 3px;\nwidth: auto;\nmin-width: 80px;\ntext-align: center;\nheight: auto;\n}\n\n.contentTabActive {\nfont-size: smaller;\ncolor: black;\ncursor: crosshair;\nposition: relative;\ndisplay: block;\nfloat: left;\nmargin-top: 4px;\nmargin-left: 5px;\nbackground-color: white;\npadding: 3px;\nwidth: max-content;\nmin-width: 80px;\ntext-align: center;\nheight: 23px;\nborder-bottom: 2px solid #ff4f6b;\n}\n\n.contentTab:hover, .contentTabActive:hover {\nbackground-color: white;\ncursor: default;\n}\n\n.showHidePreview {\n  float: left;\n  color: white;\n  padding-left: 10px;\n  padding-right: 10px;\n  background-color: red;\n}\n\n.closeTab:hover {\ncursor: pointer;\nbackground-color: #dadada;\n}\n\nsvg.closeTab {\n  margin-top: 3px;\n  height: 23px;\n}\n\n.contentTabItems {\n  display: inline-block;\n}\n\n.sr-new-file-menu{\n  text-align: left;\n    padding-left: 10px;\n    padding-top: 2px;\n}\n.sr-new-file{\n  font-weight: 600;\n     padding-left: 50px; \n    position: absolute;\n    padding-top: 9px;\n}\n\n.eidtor-toggle-minimize{\n  position: absolute;\n  z-index: 999;\n  bottom: 0;\n  padding: 3px;\n  right: 33%;\n  cursor: pointer;\n}\n\n.eidtor-toggle-maximize{\n  position: absolute;\n  z-index: 999;\n  padding: 5px;\n  bottom: 0;\n  right: 5px;\n  cursor: pointer;\n}\n.fullscreen .topContainer {\n    width: 100%;\n}\n\n.dualmode .topContainer {\n    width: 60%;\n    float: left;\n}\n\n.tabLabel {\n    width: 100px !important;\n}\n\n.innerTabs {\n    margin-top: 20px !important;\n    margin-left: 10% !important;    \n    width: 70% !important;\n    margin-bottom: 20px !important;\n}\n\n.widgetactive {\n    border: 2px dotted green;\n}\n\n/* The screen (or content) of the device */\n.emulatorFrameContainer.Tablet {\n  top: 1%;\n  left: 50%;\n  background: white;\n  margin: -1px;\n}\n\n.emulatorFrameContainer.Smartphone {\n  position: relative;\n  align-content: center;\n  width: 360px;\n  vertical-align: top;\n  float: left;\n  top: 3%;\n  left: 10%;\n  height: 540px;\n  --devicewidth: 360px;\n  --deviceheight: 420px;\n  margin: auto;\n  border: 16px black solid;\n  border-top-width: 60px;\n  border-bottom-width: 60px;\n  border-radius: 36px;\n}\n\n/* The horizontal line on the top of the device */\n.emulatorFrameContainer.Smartphone:before {\n  content: '';\n  display: block;\n  width: 60px;\n  height: 5px;\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: #333;\n  border-radius: 10px;\n}\n\n/* The circle on the bottom of the device */\n.emulatorFrameContainer.Smartphone:after {\n  content: '';\n  display: block;\n  width: 35px;\n  height: 35px;\n  position: absolute;\n  left: 50%;\n  bottom: -65px;\n  transform: translate(-50%, -50%);\n  background: #333;\n  border-radius: 50%;\n}\n\n.emulatorFrameContainer.Laptop {\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0;\n  -webkit-transform: scale(.35) translate(-50%);\n  /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n  transform: scale(.55) translate(-50%);\n  /* Scaled down for a better Try-it experience (change to 1 for full scale) */\n  top: 30px;\n  left: 50%;\n  /* float: left; */\n  position: relative;\n  display: inline-block;\n  width: 900px;\n  height: 629px;\n  --devicewidth: 900;\n  --deviceheight: 585px;\n  border-radius: 6px;\n  border-style: solid;\n  border-color: black;\n  border-width: 24px 24px 80px;\n  background-color: black;\n}\n\n/* The keyboard of the laptop */\n.emulatorFrameContainer.Laptop:after {\n  content: '';\n  display: block;\n  position: absolute;\n  bottom: -170px;\n  width: 1040px;\n  height: 60px;\n  margin: 80px 0 0 -90px;\n  background: black;\n  border-radius: 6px;\n}\n\n/* The top of the keyboard */\n.emulatorFrameContainer.Laptop:before {\n  content: '';\n  display: block;\n  position: absolute;\n  width: 250px;\n  height: 30px;\n  bottom: -110px;\n  left: 50%;\n  -webkit-transform: translate(-50%);\n  transform: translate(-50%);\n  background: #787777;\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px;\n  z-index: 1;\n}\n\n.welcomePage {\n    display: block;\n    background-color: #b88e4e;\n    width: 100%;\n    height: 100%;\n    min-height: 50vh;\n    background-size: cover;\n    background-image: url(\"/resources/welcomepage.jpg\");\n}\n\n.bx--accordion__content {\n    padding: 0px !important;\n    overflow-y: auto;\n    max-height: 60vh;\n}\n\n.widgetPropHeader {\n    cursor: pointer;\n}\n\n.bx--header__menu-item.bx--header__menu-title {\n    color: black !important;\n    font-size: large !important;\n    padding: 10px !important;\n    text-decoration: underline !important;\n}\n\n.bx--header__menu-item.bx--header__menu-title:hover, .bx--header__menu-item.bx--header__menu-title[aria-expanded=\"true\"] {\n    color: white !important;\n    text-decoration: none !important;\n}\n\n",OverlayLayout:".grid-stack>.grid-stack-item>.grid-stack-item-content {\n    left: 0px !important;\n    right: 0px !important;\n}\n\n",LayoutCreator:"/* add css styles to the component */\n\n",IdeValidation:".ide_comp{\n    \n}\n\n",IdeStateMapper:".ide-state-mapper{\n    \n}\n.rt-tr-group{\n    cursor: pointer;\n}\n.state-btn{\n    position: relative;\n    left: 82%;\n}\n\n.ReactTable .-pagination {\n    height: 50px;\n    width: 20%;\n    float: left;\n    margin-left: 40%;\n}\n\n.ReactTable .-pagination .-pageJump input {\n    height: 25px;\n}\n\n",IdeProps:"/* add css styles to the component */\n\n",IdeNavigator:"/* add css styles to the component */\n\n",IdeFormFields:".ide_comp{\n    display: inline-flex;\n    width:100%;\n}\n\n",IdeDependency:".ide-dependency{\n    \n}\n\n",IdeConsole:".ide-consol{\n    \n}\n\n",IdeActionMapper:".ide-action-mapper{\n    \n}\n\n.rt-tr-group{\n    cursor: pointer;\n}\n\n.action-btn{\n    position: relative;\n    left: 82%;\n}\n\n",IconPicker:"/* add css styles to the component */\n\n",GridCanvas:"/* add css styles to the component */\n\n",GraphiqlView:'.showNav {\n  height: 90%;\n  Width: 30%;\n}\n\n.btn-cls {\n    color: #fff !important;\n    margin-left: 5px;\n}\n\n.hideNav {\n    height: 40px;\n    width: 40px;\n    background-color: #eaeaea;\n    z-index: 999;\n    overflow: hidden;\n}\n\n.graphiql-container {\n    width: 100%;\n    box-shadow: 0 1.6px 3.6px 0 rgba(0, 0, 0, .132), 0 0.3px 0.9px 0 rgba(0, 0, 0, .108);\n}\n\n.graphiql-container,\n.graphiql-container button,\n.graphiql-container input {\n  color: #141823;\n  font-family:\n    system,\n    -apple-system,\n    "San Francisco",\n    ".SFNSDisplay-Regular",\n    "Segoe UI",\n    Segoe,\n    "Segoe WP",\n    "Helvetica Neue",\n    helvetica,\n    "Lucida Grande",\n    arial,\n    sans-serif;\n    font-size: 14px;\n}\n\n.graphiql-container {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: fixed;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n    -ms-flex-direction: row;\n    flex-direction: row;\n    height: 100vh;\n    top: 50px;\n    overflow: scroll;\n}\n\n.graphiql-container .editorWrap {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  overflow-x: hidden;\n}\n\n.graphiql-container .title {\n  font-size: 18px;\n  margin-left: 30px;\n}\n\n.graphiql-container .title em {\n  font-family: georgia;\n  font-size: 19px;\n}\n\n.graphiql-container .topBarWrap {\n  display: -webkit-box;\n  height: 40px;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n}\n\n.graphiql-container .topBar {\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  background: -webkit-gradient(linear, left top, left bottom, from(#f7f7f7), to(#e2e2e2));\n  background: linear-gradient(#f7f7f7, #e2e2e2);\n  border-bottom: 1px solid #d0d0d0;\n  cursor: default;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: row;\n  flex-direction: row;\n  -webkit-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  height: 34px;\n  overflow-y: visible;\n  padding: 7px 14px 6px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  height: 40px;\n}\n\n.graphiql-container .toolbar {\n  overflow-x: visible;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n\n.graphiql-container .docExplorerShow,\n.graphiql-container .historyShow {\n  background: -webkit-gradient(linear, left top, left bottom, from(#f7f7f7), to(#e2e2e2));\n  background: linear-gradient(#f7f7f7, #e2e2e2);\n  border-radius: 0;\n  border-bottom: 1px solid #d0d0d0;\n  border-right: none;\n  border-top: none;\n  color: #3B5998;\n  cursor: pointer;\n  font-size: 14px;\n  margin: 0;\n  outline: 0;\n  padding: 2px 20px 0 18px;\n}\n\n.graphiql-container .docExplorerShow {\n  border-left: 1px solid rgba(0, 0, 0, 0.2);\n}\n\n.graphiql-container .historyShow {\n  border-right: 1px solid rgba(0, 0, 0, 0.2);\n  border-left: 0;\n}\n\n.graphiql-container .docExplorerShow:before {\n  border-left: 2px solid #3B5998;\n  border-top: 2px solid #3B5998;\n  content: "";\n  display: inline-block;\n  height: 9px;\n  margin: 0 3px -1px 0;\n  position: relative;\n  -webkit-transform: rotate(-45deg);\n          transform: rotate(-45deg);\n  width: 9px;\n}\n\n.graphiql-container .editorBar {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n\n.graphiql-container .queryWrap {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n\n.graphiql-container .resultWrap {\n  border-left: solid 1px #e0e0e0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  position: relative;\n}\n\n.graphiql-container .docExplorerWrap,\n.graphiql-container .historyPaneWrap {\n  background: white;\n  -webkit-box-shadow: 0 0 8px rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 8px rgba(0, 0, 0, 0.15);\n  position: relative;\n  z-index: 3;\n}\n\n.graphiql-container .historyPaneWrap {\n  min-width: 150px;\n  width: 150px !important;\n  display: none !important;\n  z-index: 5;\n}\n\n.graphiql-container .docExplorerResizer {\n  cursor: col-resize;\n  height: 100%;\n  left: -5px;\n  position: absolute;\n  top: 0;\n  width: 10px;\n  z-index: 10;\n}\n\n.graphiql-container .docExplorerHide {\n  cursor: pointer;\n  font-size: 18px;\n  margin: -7px -8px -6px 0;\n  padding: 18px 16px 15px 12px;\n}\n\n.graphiql-container div .query-editor {\n  -webkit-box-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  height: 80%;\n  position: relative;\n}\n\n.graphiql-container .variable-editor {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -ms-flex-direction: column;\n  flex-direction: column;\n  height: 80px;\n  position: relative;\n}\n\n.graphiql-container .variable-editor-title {\n  background: #eeeeee;\n  border-bottom: 1px solid #d6d6d6;\n  border-top: 1px solid #e0e0e0;\n  color: #777;\n  font-variant: small-caps;\n  font-weight: bold;\n  letter-spacing: 1px;\n  line-height: 14px;\n  padding: 6px 0 8px 43px;\n  text-transform: lowercase;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.graphiql-container .codemirrorWrap {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  height: 100%;\n  position: relative;\n}\n\n.graphiql-container .result-window {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  height: 100%;\n  position: relative;\n}\n\n.graphiql-container .footer {\n  background: #f6f7f8;\n  border-left: 1px solid #e0e0e0;\n  border-top: 1px solid #e0e0e0;\n  margin-left: 12px;\n  position: relative;\n}\n\n.graphiql-container .footer:before {\n  background: #eeeeee;\n  bottom: 0;\n  content: " ";\n  left: -13px;\n  position: absolute;\n  top: -1px;\n  width: 12px;\n}\n\n/* No `.graphiql-container` here so themes can overwrite */\n.result-window .CodeMirror {\n  background: #f6f7f8;\n}\n\n.graphiql-container .result-window .CodeMirror-gutters {\n  background-color: #eeeeee;\n  border-color: #e0e0e0;\n  cursor: col-resize;\n}\n\n.graphiql-container .result-window .CodeMirror-foldgutter,\n.graphiql-container .result-window .CodeMirror-foldgutter-open:after,\n.graphiql-container .result-window .CodeMirror-foldgutter-folded:after {\n  padding-left: 3px;\n}\n\n.graphiql-container .toolbar-button {\n  align-self: center;\n  background: #fdfdfd;\n  background: -webkit-gradient(linear, left top, left bottom, from(#f9f9f9), to(#ececec));\n  background: linear-gradient(#f9f9f9, #ececec);\n  border-radius: 3px;\n  -webkit-box-shadow:\n    inset 0 0 0 1px rgba(0,0,0,0.20),\n    0 1px 0 rgba(255,255,255, 0.7),\n    inset 0 1px #fff;\n          box-shadow:\n    inset 0 0 0 1px rgba(0,0,0,0.20),\n    0 1px 0 rgba(255,255,255, 0.7),\n    inset 0 1px #fff;\n  color: #555;\n  cursor: pointer;\n  display: inline-block;\n  margin: 0 5px;\n  padding: 3px 11px 5px;\n  text-decoration: none;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  max-width: 150px;\n}\n\n.graphiql-container .toolbar-button:active {\n  background: -webkit-gradient(linear, left top, left bottom, from(#ececec), to(#d5d5d5));\n  background: linear-gradient(#ececec, #d5d5d5);\n  -webkit-box-shadow:\n    0 1px 0 rgba(255, 255, 255, 0.7),\n    inset 0 0 0 1px rgba(0,0,0,0.10),\n    inset 0 1px 1px 1px rgba(0, 0, 0, 0.12),\n    inset 0 0 5px rgba(0, 0, 0, 0.1);\n          box-shadow:\n    0 1px 0 rgba(255, 255, 255, 0.7),\n    inset 0 0 0 1px rgba(0,0,0,0.10),\n    inset 0 1px 1px 1px rgba(0, 0, 0, 0.12),\n    inset 0 0 5px rgba(0, 0, 0, 0.1);\n}\n\n.graphiql-container .toolbar-button.error {\n  background: -webkit-gradient(linear, left top, left bottom, from(#fdf3f3), to(#e6d6d7));\n  background: linear-gradient(#fdf3f3, #e6d6d7);\n  color: #b00;\n}\n\n.graphiql-container .toolbar-button-group {\n  margin: 0 5px;\n  white-space: nowrap;\n}\n\n.graphiql-container .toolbar-button-group > * {\n  margin: 0;\n}\n\n.graphiql-container .toolbar-button-group > *:not(:last-child) {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n\n.graphiql-container .toolbar-button-group > *:not(:first-child) {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  margin-left: -1px;\n}\n\n// .graphiql-container .execute-button-wrap {\n//   height: 40px;\n//   margin: 0 14px 0 28px;\n//   position: relative;\n// }\n\n.graphiql-container .execute-button {\n  background: -webkit-gradient(linear, left top, left bottom, from(#fdfdfd), to(#d2d3d6));\n  background: linear-gradient(#fdfdfd, #d2d3d6);\n  border-radius: 17px;\n  border: 1px solid rgba(0,0,0,0.25);\n  -webkit-box-shadow: 0 1px 0 #fff;\n          box-shadow: 0 1px 0 #fff;\n  cursor: pointer;\n  fill: #444;\n  height: 34px;\n  margin: 0;\n  padding: 0;\n  width: 34px;\n}\n\n.graphiql-container .execute-button svg {\n  pointer-events: none;\n}\n\n.graphiql-container .execute-button:active {\n  background: -webkit-gradient(linear, left top, left bottom, from(#e6e6e6), to(#c3c3c3));\n  background: linear-gradient(#e6e6e6, #c3c3c3);\n  -webkit-box-shadow:\n    0 1px 0 #fff,\n    inset 0 0 2px rgba(0, 0, 0, 0.2),\n    inset 0 0 6px rgba(0, 0, 0, 0.1);\n          box-shadow:\n    0 1px 0 #fff,\n    inset 0 0 2px rgba(0, 0, 0, 0.2),\n    inset 0 0 6px rgba(0, 0, 0, 0.1);\n}\n\n.graphiql-container .execute-button:focus {\n  outline: 0;\n}\n\n.graphiql-container .toolbar-menu,\n.graphiql-container .toolbar-select {\n  position: relative;\n}\n\n.graphiql-container .execute-options,\n.graphiql-container .toolbar-menu-items,\n.graphiql-container .toolbar-select-options {\n  background: #fff;\n  -webkit-box-shadow:\n    0 0 0 1px rgba(0,0,0,0.1),\n    0 2px 4px rgba(0,0,0,0.25);\n          box-shadow:\n    0 0 0 1px rgba(0,0,0,0.1),\n    0 2px 4px rgba(0,0,0,0.25);\n  margin: 0;\n  padding: 6px 0;\n  position: absolute;\n  z-index: 100;\n}\n\n.graphiql-container .execute-options {\n  min-width: 100px;\n  top: 37px;\n  left: -1px;\n}\n\n.graphiql-container .toolbar-menu-items {\n  left: 1px;\n  margin-top: -1px;\n  min-width: 110%;\n  top: 100%;\n  visibility: hidden;\n}\n\n.graphiql-container .toolbar-menu-items.open {\n  visibility: visible;\n}\n\n.graphiql-container .toolbar-select-options {\n  left: 0;\n  min-width: 100%;\n  top: -5px;\n  visibility: hidden;\n}\n\n.graphiql-container .toolbar-select-options.open {\n  visibility: visible;\n}\n\n.graphiql-container .execute-options > li,\n.graphiql-container .toolbar-menu-items > li,\n.graphiql-container .toolbar-select-options > li {\n  cursor: pointer;\n  display: block;\n  margin: none;\n  max-width: 300px;\n  overflow: hidden;\n  padding: 2px 20px 4px 11px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.graphiql-container .execute-options > li.selected,\n.graphiql-container .toolbar-menu-items > li.hover,\n.graphiql-container .toolbar-menu-items > li:active,\n.graphiql-container .toolbar-menu-items > li:hover,\n.graphiql-container .toolbar-select-options > li.hover,\n.graphiql-container .toolbar-select-options > li:active,\n.graphiql-container .toolbar-select-options > li:hover,\n.graphiql-container .history-contents > p:hover,\n.graphiql-container .history-contents > p:active {\n  background: #e10098;\n  color: #fff;\n}\n\n.graphiql-container .toolbar-select-options > li > svg {\n  display: inline;\n  fill: #666;\n  margin: 0 -6px 0 6px;\n  pointer-events: none;\n  vertical-align: middle;\n}\n\n.graphiql-container .toolbar-select-options > li.hover > svg,\n.graphiql-container .toolbar-select-options > li:active > svg,\n.graphiql-container .toolbar-select-options > li:hover > svg {\n  fill: #fff;\n}\n\n.graphiql-container .CodeMirror-scroll {\n  overflow-scrolling: touch;\n}\n\n.graphiql-container .CodeMirror {\n  color: #141823;\n  font-family:\n    "Consolas",\n    "Inconsolata",\n    "Droid Sans Mono",\n    "Monaco",\n    monospace;\n  font-size: 13px;\n  height: 100%;\n  left: 0;\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n\n.graphiql-container .CodeMirror-lines {\n  padding: 20px 0;\n}\n\n.CodeMirror-hint-information .content {\n  box-orient: vertical;\n  color: #141823;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  font-family: system, -apple-system, "San Francisco", ".SFNSDisplay-Regular", "Segoe UI", Segoe, "Segoe WP", "Helvetica Neue", helvetica, "Lucida Grande", arial, sans-serif;\n  font-size: 13px;\n  line-clamp: 3;\n  line-height: 16px;\n  max-height: 48px;\n  overflow: hidden;\n  text-overflow: -o-ellipsis-lastline;\n}\n\n.CodeMirror-hint-information .content p:first-child {\n  margin-top: 0;\n}\n\n.CodeMirror-hint-information .content p:last-child {\n  margin-bottom: 0;\n}\n\n.CodeMirror-hint-information .infoType {\n  color: #CA9800;\n  cursor: pointer;\n  display: inline;\n  margin-right: 0.5em;\n}\n\n.autoInsertedLeaf.cm-property {\n  -webkit-animation-duration: 6s;\n          animation-duration: 6s;\n  -webkit-animation-name: insertionFade;\n          animation-name: insertionFade;\n  border-bottom: 2px solid rgba(255, 255, 255, 0);\n  border-radius: 2px;\n  margin: -2px -4px -1px;\n  padding: 2px 4px 1px;\n}\n\n@-webkit-keyframes insertionFade {\n  from, to {\n    background: rgba(255, 255, 255, 0);\n    border-color: rgba(255, 255, 255, 0);\n  }\n\n  15%, 85% {\n    background: #fbffc9;\n    border-color: #f0f3c0;\n  }\n}\n\n@keyframes insertionFade {\n  from, to {\n    background: rgba(255, 255, 255, 0);\n    border-color: rgba(255, 255, 255, 0);\n  }\n\n  15%, 85% {\n    background: #fbffc9;\n    border-color: #f0f3c0;\n  }\n}\n\ndiv.CodeMirror-lint-tooltip {\n  background-color: white;\n  border-radius: 2px;\n  border: 0;\n  color: #141823;\n  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.45);\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.45);\n  font-family:\n    system,\n    -apple-system,\n    "San Francisco",\n    ".SFNSDisplay-Regular",\n    "Segoe UI",\n    Segoe,\n    "Segoe WP",\n    "Helvetica Neue",\n    helvetica,\n    "Lucida Grande",\n    arial,\n    sans-serif;\n  font-size: 13px;\n  line-height: 16px;\n  max-width: 430px;\n  opacity: 0;\n  padding: 8px 10px;\n  -webkit-transition: opacity 0.15s;\n  transition: opacity 0.15s;\n  white-space: pre-wrap;\n}\n\ndiv.CodeMirror-lint-tooltip > * {\n  padding-left: 23px;\n}\n\ndiv.CodeMirror-lint-tooltip > * + * {\n  margin-top: 12px;\n}\n\n/* COLORS */\n\n.graphiql-container .CodeMirror-foldmarker {\n  border-radius: 4px;\n  background: #08f;\n  background: -webkit-gradient(linear, left top, left bottom, from(#43A8FF), to(#0F83E8));\n  background: linear-gradient(#43A8FF, #0F83E8);\n  -webkit-box-shadow:\n    0 1px 1px rgba(0, 0, 0, 0.2),\n    inset 0 0 0 1px rgba(0, 0, 0, 0.1);\n          box-shadow:\n    0 1px 1px rgba(0, 0, 0, 0.2),\n    inset 0 0 0 1px rgba(0, 0, 0, 0.1);\n  color: white;\n  font-family: arial;\n  font-size: 12px;\n  line-height: 0;\n  margin: 0 3px;\n  padding: 0px 4px 1px;\n  text-shadow: 0 -1px rgba(0, 0, 0, 0.1);\n}\n\n.graphiql-container div.CodeMirror span.CodeMirror-matchingbracket {\n  color: #555;\n  text-decoration: underline;\n}\n\n.graphiql-container div.CodeMirror span.CodeMirror-nonmatchingbracket {\n  color: #f00;\n}\n\n/* Comment */\n.cm-comment {\n  color: #999;\n}\n\n/* Punctuation */\n.cm-punctuation {\n  color: #555;\n}\n\n/* Keyword */\n.cm-keyword {\n  color: #B11A04;\n}\n\n/* OperationName, FragmentName */\n.cm-def {\n  color: #D2054E;\n}\n\n/* FieldName */\n.cm-property {\n  color: #1F61A0;\n}\n\n/* FieldAlias */\n.cm-qualifier {\n  color: #1C92A9;\n}\n\n/* ArgumentName and ObjectFieldName */\n.cm-attribute {\n  color: #8B2BB9;\n}\n\n/* Number */\n.cm-number {\n  color: #2882F9;\n}\n\n/* String */\n.cm-string {\n  color: #D64292;\n}\n\n/* Boolean */\n.cm-builtin {\n  color: #D47509;\n}\n\n/* EnumValue */\n.cm-string-2 {\n  color: #0B7FC7;\n}\n\n/* Variable */\n.cm-variable {\n  color: #397D13;\n}\n\n/* Directive */\n.cm-meta {\n  color: #B33086;\n}\n\n/* Type */\n.cm-atom {\n  color: #CA9800;\n}\n/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  color: black;\n  font-family: monospace;\n  height: 300px;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: white; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n\n.CodeMirror-linenumber {\n  color: #999;\n  min-width: 20px;\n  padding: 0 3px 0 5px;\n  text-align: right;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror .CodeMirror-cursor {\n  border-left: 1px solid black;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.CodeMirror.cm-fat-cursor div.CodeMirror-cursor {\n  background: #7e7;\n  border: 0;\n  width: auto;\n}\n.CodeMirror.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n\n.cm-animate-fat-cursor {\n  -webkit-animation: blink 1.06s steps(1) infinite;\n          animation: blink 1.06s steps(1) infinite;\n  border: 0;\n  width: auto;\n}\n@-webkit-keyframes blink {\n  0% { background: #7e7; }\n  50% { background: none; }\n  100% { background: #7e7; }\n}\n@keyframes blink {\n  0% { background: #7e7; }\n  50% { background: none; }\n  100% { background: #7e7; }\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\ndiv.CodeMirror-overwrite div.CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3 {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0f0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #f22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn"t touch them. */\n\n.CodeMirror {\n  background: white;\n  overflow: hidden;\n  position: relative;\n}\n\n.CodeMirror-scroll {\n  height: 100%;\n  /* 30px is the magic margin used to hide the element"s real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -30px; margin-right: -30px;\n  outline: none; /* Prevent dragging from highlighting the element */\n  overflow: scroll !important; /* Things will break if this is overridden */\n  padding-bottom: 30px;\n  position: relative;\n}\n\n.CodeMirror-sizer {\n  border-right: 30px solid transparent;\n  position: relative;\n  margin-left: 13px;\n}\n\n.result-window > .CodeMirror > .CodeMirror-scroll > .CodeMirror-sizer {\n    margin-left: 13px !important;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  display: none;\n  position: absolute;\n  z-index: 6;\n}\n.CodeMirror-vscrollbar {\n  overflow-x: hidden;\n  overflow-y: scroll;\n  right: 0; top: 0;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-x: scroll;\n  overflow-y: hidden;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  min-height: 100%;\n  position: absolute; left: 0; top: 0;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  display: inline-block;\n  height: 100%;\n  margin-bottom: -30px;\n  vertical-align: top;\n  white-space: normal;\n  /* Hack to make IE7 behave */\n  *zoom:1;\n  *display:inline;\n}\n.CodeMirror-gutter-wrapper {\n  background: none !important;\n  border: none !important;\n  position: absolute;\n  z-index: 4;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  cursor: default;\n  position: absolute;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre {\n  -webkit-tap-highlight-color: transparent;\n  /* Reset some styles that the rest of the page might have set */\n  background: transparent;\n  border-radius: 0;\n  border-width: 0;\n  padding-left: 30px;\n  color: inherit;\n  font-family: inherit;\n  font-size: inherit;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  line-height: inherit;\n  margin: 0;\n  overflow: visible;\n  position: relative;\n  white-space: pre;\n  word-wrap: normal;\n  z-index: 2;\n}\n.CodeMirror-wrap pre {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  overflow: auto;\n  position: relative;\n  z-index: 2;\n}\n\n.CodeMirror-widget {}\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -webkit-box-sizing: content-box;\n          box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  height: 0;\n  overflow: hidden;\n  position: absolute;\n  visibility: hidden;\n  width: 100%;\n}\n\n.CodeMirror-cursor { position: absolute; }\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  position: relative;\n  visibility: hidden;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: #d9d9d9; }\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n\n.cm-searching {\n  background: #ffa;\n  background: rgba(255, 255, 0, .4);\n}\n\n/* IE7 hack to prevent it from returning funny offsetTops on the spans */\n.CodeMirror span { *vertical-align: text-bottom; }\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: ""; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n\n.CodeMirror-dialog {\n  background: inherit;\n  color: inherit;\n  left: 0; right: 0;\n  overflow: hidden;\n  padding: .1em .8em;\n  position: absolute;\n  z-index: 15;\n}\n\n.CodeMirror-dialog-top {\n  border-bottom: 1px solid #eee;\n  top: 0;\n}\n\n.CodeMirror-dialog-bottom {\n  border-top: 1px solid #eee;\n  bottom: 0;\n}\n\n.CodeMirror-dialog input {\n  background: transparent;\n  border: 1px solid #d3d6db;\n  color: inherit;\n  font-family: monospace;\n  outline: none;\n  width: 20em;\n}\n\n.CodeMirror-dialog button {\n  font-size: 70%;\n}\n.graphiql-container .doc-explorer {\n  background: white;\n}\n\n.graphiql-container .doc-explorer-title-bar,\n.graphiql-container .history-title-bar {\n  cursor: default;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  height: 34px;\n  line-height: 14px;\n  padding: 8px 8px 5px;\n  position: relative;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.graphiql-container .doc-explorer-title,\n.graphiql-container .history-title {\n  -webkit-box-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  font-weight: bold;\n  overflow-x: hidden;\n  padding: 10px 0 10px 10px;\n  text-align: center;\n  text-overflow: ellipsis;\n  -webkit-user-select: initial;\n     -moz-user-select: initial;\n      -ms-user-select: initial;\n          user-select: initial;\n  white-space: nowrap;\n}\n\n.graphiql-container .doc-explorer-back {\n  color: #3B5998;\n  cursor: pointer;\n  margin: -7px 0 -6px -8px;\n  overflow-x: hidden;\n  padding: 17px 12px 16px 16px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.doc-explorer-narrow .doc-explorer-back {\n  width: 0;\n}\n\n.graphiql-container .doc-explorer-back:before {\n  border-left: 2px solid #3B5998;\n  border-top: 2px solid #3B5998;\n  content: "";\n  display: inline-block;\n  height: 9px;\n  margin: 0 3px -1px 0;\n  position: relative;\n  -webkit-transform: rotate(-45deg);\n          transform: rotate(-45deg);\n  width: 9px;\n}\n\n.graphiql-container .doc-explorer-rhs {\n  position: relative;\n}\n\n.graphiql-container .doc-explorer-contents,\n.graphiql-container .history-contents {\n  background-color: #ffffff;\n  border-top: 1px solid #d6d6d6;\n  bottom: 0;\n  left: 0;\n  overflow-y: auto;\n  padding: 20px 15px;\n  position: absolute;\n  right: 0;\n  top: 47px;\n}\n\n.graphiql-container .doc-explorer-contents {\n  min-width: 300px;\n}\n\n.graphiql-container .doc-type-description p:first-child ,\n.graphiql-container .doc-type-description blockquote:first-child {\n  margin-top: 0;\n}\n\n.graphiql-container .doc-explorer-contents a {\n  cursor: pointer;\n  text-decoration: none;\n}\n\n.graphiql-container .doc-explorer-contents a:hover {\n  text-decoration: underline;\n}\n\n.graphiql-container .doc-value-description > :first-child {\n  margin-top: 4px;\n}\n\n.graphiql-container .doc-value-description > :last-child {\n  margin-bottom: 4px;\n}\n\n.graphiql-container .doc-category {\n  margin: 20px 0;\n}\n\n.graphiql-container .doc-category-title {\n  border-bottom: 1px solid #e0e0e0;\n  color: #777;\n  cursor: default;\n  font-size: 14px;\n  font-variant: small-caps;\n  font-weight: bold;\n  letter-spacing: 1px;\n  margin: 0 -15px 10px 0;\n  padding: 10px 0;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.graphiql-container .doc-category-item {\n  margin: 12px 0;\n  color: #555;\n}\n\n.graphiql-container .keyword {\n  color: #B11A04;\n}\n\n.graphiql-container .type-name {\n  color: #CA9800;\n}\n\n.graphiql-container .field-name {\n  color: #1F61A0;\n}\n\n.graphiql-container .field-short-description {\n  color: #999;\n  margin-left: 5px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.graphiql-container .enum-value {\n  color: #0B7FC7;\n}\n\n.graphiql-container .arg-name {\n  color: #8B2BB9;\n}\n\n.graphiql-container .arg {\n  display: block;\n  margin-left: 1em;\n}\n\n.graphiql-container .arg:first-child:last-child,\n.graphiql-container .arg:first-child:nth-last-child(2),\n.graphiql-container .arg:first-child:nth-last-child(2) ~ .arg {\n  display: inherit;\n  margin: inherit;\n}\n\n.graphiql-container .arg:first-child:nth-last-child(2):after {\n  content: ", ";\n}\n\n.graphiql-container .arg-default-value {\n  color: #43A047;\n}\n\n.graphiql-container .doc-deprecation {\n  background: #fffae8;\n  -webkit-box-shadow: inset 0 0 1px #bfb063;\n          box-shadow: inset 0 0 1px #bfb063;\n  color: #867F70;\n  line-height: 16px;\n  margin: 8px -8px;\n  max-height: 80px;\n  overflow: hidden;\n  padding: 8px;\n  border-radius: 3px;\n}\n\n.graphiql-container .doc-deprecation:before {\n  content: "Deprecated:";\n  color: #c79b2e;\n  cursor: default;\n  display: block;\n  font-size: 9px;\n  font-weight: bold;\n  letter-spacing: 1px;\n  line-height: 1;\n  padding-bottom: 5px;\n  text-transform: uppercase;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.graphiql-container .doc-deprecation > :first-child {\n  margin-top: 0;\n}\n\n.graphiql-container .doc-deprecation > :last-child {\n  margin-bottom: 0;\n}\n\n.graphiql-container .show-btn {\n  -webkit-appearance: initial;\n  display: block;\n  border-radius: 3px;\n  border: solid 1px #ccc;\n  text-align: center;\n  padding: 8px 12px 10px;\n  width: 100%;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  background: #fbfcfc;\n  color: #555;\n  cursor: pointer;\n}\n\n.graphiql-container .search-box {\n  border-bottom: 1px solid #d3d6db;\n  display: block;\n  font-size: 14px;\n  margin: -15px -15px 12px 0;\n  position: relative;\n}\n\n.graphiql-container .search-box:before {\n  content: "\\26b2";\n  cursor: pointer;\n  display: block;\n  font-size: 24px;\n  position: absolute;\n  top: -2px;\n  -webkit-transform: rotate(-45deg);\n          transform: rotate(-45deg);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.graphiql-container .search-box .search-box-clear {\n  background-color: #d0d0d0;\n  border-radius: 12px;\n  color: #fff;\n  cursor: pointer;\n  font-size: 11px;\n  padding: 1px 5px 2px;\n  position: absolute;\n  right: 3px;\n  top: 8px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.graphiql-container .search-box .search-box-clear:hover {\n  background-color: #b9b9b9;\n}\n\n.graphiql-container .search-box > input {\n  border: none;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  font-size: 14px;\n  outline: none;\n  padding: 6px 24px 8px 20px;\n  width: 100%;\n}\n\n.graphiql-container .error-container {\n  font-weight: bold;\n  left: 0;\n  letter-spacing: 1px;\n  opacity: 0.5;\n  position: absolute;\n  right: 0;\n  text-align: center;\n  text-transform: uppercase;\n  top: 50%;\n  -webkit-transform: translate(0, -50%);\n          transform: translate(0, -50%);\n}\n.CodeMirror-foldmarker {\n  color: blue;\n  cursor: pointer;\n  font-family: arial;\n  line-height: .3;\n  text-shadow: #b9f 1px 1px 2px, #b9f -1px -1px 2px, #b9f 1px -1px 2px, #b9f -1px 1px 2px;\n}\n.CodeMirror-foldgutter {\n  width: .7em;\n}\n.CodeMirror-foldgutter-open,\n.CodeMirror-foldgutter-folded {\n  cursor: pointer;\n}\n.CodeMirror-foldgutter-open:after {\n  content: "\\25BE";\n}\n.CodeMirror-foldgutter-folded:after {\n  content: "\\25B8";\n}\n.graphiql-container .history-contents {\n  font-family: "Consolas", "Inconsolata", "Droid Sans Mono", "Monaco", monospace;\n  padding: 0;\n}\n\n.graphiql-container .history-contents p {\n  font-size: 12px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  margin: 0;\n  padding: 8px;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.graphiql-container .history-contents p:hover {\n  cursor: pointer;\n}\n.CodeMirror-info {\n  background: white;\n  border-radius: 2px;\n  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.45);\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.45);\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #555;\n  font-family:\n    system,\n    -apple-system,\n    "San Francisco",\n    ".SFNSDisplay-Regular",\n    "Segoe UI",\n    Segoe,\n    "Segoe WP",\n    "Helvetica Neue",\n    helvetica,\n    "Lucida Grande",\n    arial,\n    sans-serif;\n  font-size: 13px;\n  line-height: 16px;\n  margin: 8px -8px;\n  max-width: 400px;\n  opacity: 0;\n  overflow: hidden;\n  padding: 8px 8px;\n  position: fixed;\n  -webkit-transition: opacity 0.15s;\n  transition: opacity 0.15s;\n  z-index: 50;\n}\n\n.CodeMirror-info :first-child {\n  margin-top: 0;\n}\n\n.CodeMirror-info :last-child {\n  margin-bottom: 0;\n}\n\n.CodeMirror-info p {\n  margin: 1em 0;\n}\n\n.CodeMirror-info .info-description {\n  color: #777;\n  line-height: 16px;\n  margin-top: 1em;\n  max-height: 80px;\n  overflow: hidden;\n}\n\n.CodeMirror-info .info-deprecation {\n  background: #fffae8;\n  -webkit-box-shadow: inset 0 1px 1px -1px #bfb063;\n          box-shadow: inset 0 1px 1px -1px #bfb063;\n  color: #867F70;\n  line-height: 16px;\n  margin: -8px;\n  margin-top: 8px;\n  max-height: 80px;\n  overflow: hidden;\n  padding: 8px;\n}\n\n.CodeMirror-info .info-deprecation-label {\n  color: #c79b2e;\n  cursor: default;\n  display: block;\n  font-size: 9px;\n  font-weight: bold;\n  letter-spacing: 1px;\n  line-height: 1;\n  padding-bottom: 5px;\n  text-transform: uppercase;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.CodeMirror-info .info-deprecation-label + * {\n  margin-top: 0;\n}\n\n.CodeMirror-info a {\n  text-decoration: none;\n}\n\n.CodeMirror-info a:hover {\n  text-decoration: underline;\n}\n\n.CodeMirror-info .type-name {\n  color: #CA9800;\n}\n\n.CodeMirror-info .field-name {\n  color: #1F61A0;\n}\n\n.CodeMirror-info .enum-value {\n  color: #0B7FC7;\n}\n\n.CodeMirror-info .arg-name {\n  color: #8B2BB9;\n}\n\n.CodeMirror-info .directive-name {\n  color: #B33086;\n}\n.CodeMirror-jump-token {\n  text-decoration: underline;\n  cursor: pointer;\n}\n/* The lint marker gutter */\n.CodeMirror-lint-markers {\n  width: 16px;\n}\n\n.CodeMirror-lint-tooltip {\n  background-color: infobackground;\n  border-radius: 4px 4px 4px 4px;\n  border: 1px solid black;\n  color: infotext;\n  font-family: monospace;\n  font-size: 10pt;\n  max-width: 600px;\n  opacity: 0;\n  overflow: hidden;\n  padding: 2px 5px;\n  position: fixed;\n  -webkit-transition: opacity .4s;\n  transition: opacity .4s;\n  white-space: pre-wrap;\n  z-index: 100;\n}\n\n.CodeMirror-lint-mark-error, .CodeMirror-lint-mark-warning {\n  background-position: left bottom;\n  background-repeat: repeat-x;\n}\n\n.CodeMirror-lint-mark-error {\n  background-image:\n  url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==")\n  ;\n}\n\n.CodeMirror-lint-mark-warning {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=");\n}\n\n.CodeMirror-lint-marker-error, .CodeMirror-lint-marker-warning {\n  background-position: center center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  display: inline-block;\n  height: 16px;\n  position: relative;\n  vertical-align: middle;\n  width: 16px;\n}\n\n.CodeMirror-lint-message-error, .CodeMirror-lint-message-warning {\n  background-position: top left;\n  background-repeat: no-repeat;\n  padding-left: 18px;\n}\n\n.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=");\n}\n\n.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=");\n}\n\n.CodeMirror-lint-marker-multiple {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC");\n  background-position: right bottom;\n  background-repeat: no-repeat;\n  width: 100%; height: 100%;\n}\n.graphiql-container .spinner-container {\n  height: 36px;\n  left: 50%;\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  width: 36px;\n  z-index: 10;\n}\n\n.graphiql-container .spinner {\n  -webkit-animation: rotation .6s infinite linear;\n          animation: rotation .6s infinite linear;\n  border-bottom: 6px solid rgba(150, 150, 150, .15);\n  border-left: 6px solid rgba(150, 150, 150, .15);\n  border-radius: 100%;\n  border-right: 6px solid rgba(150, 150, 150, .15);\n  border-top: 6px solid rgba(150, 150, 150, .8);\n  display: inline-block;\n  height: 24px;\n  position: absolute;\n  vertical-align: middle;\n  width: 24px;\n}\n\n@-webkit-keyframes rotation {\n  from { -webkit-transform: rotate(0deg); transform: rotate(0deg); }\n  to { -webkit-transform: rotate(359deg); transform: rotate(359deg); }\n}\n\n@keyframes rotation {\n  from { -webkit-transform: rotate(0deg); transform: rotate(0deg); }\n  to { -webkit-transform: rotate(359deg); transform: rotate(359deg); }\n}\n.CodeMirror-hints {\n  background: white;\n  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.45);\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.45);\n  font-family: "Consolas", "Inconsolata", "Droid Sans Mono", "Monaco", monospace;\n  font-size: 13px;\n  list-style: none;\n  margin-left: -6px;\n  margin: 0;\n  max-height: 14.5em;\n  overflow-y: auto;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  z-index: 10;\n}\n\n.CodeMirror-hint {\n  border-top: solid 1px #f7f7f7;\n  color: #141823;\n  cursor: pointer;\n  margin: 0;\n  max-width: 300px;\n  overflow: hidden;\n  padding: 2px 6px;\n  white-space: pre;\n}\n\nli.CodeMirror-hint-active {\n  background-color: #08f;\n  border-top-color: white;\n  color: white;\n}\n\n.CodeMirror-hint-information {\n  border-top: solid 1px #c0c0c0;\n  max-width: 300px;\n  padding: 4px 6px;\n  position: relative;\n  z-index: 1;\n}\n\n.CodeMirror-hint-information:first-child {\n  border-bottom: solid 1px #c0c0c0;\n  border-top: none;\n  margin-bottom: -1px;\n}\n\n.CodeMirror-hint-deprecation {\n  background: #fffae8;\n  -webkit-box-shadow: inset 0 1px 1px -1px #bfb063;\n          box-shadow: inset 0 1px 1px -1px #bfb063;\n  color: #867F70;\n  font-family:\n    system,\n    -apple-system,\n    "San Francisco",\n    ".SFNSDisplay-Regular",\n    "Segoe UI",\n    Segoe,\n    "Segoe WP",\n    "Helvetica Neue",\n    helvetica,\n    "Lucida Grande",\n    arial,\n    sans-serif;\n  font-size: 13px;\n  line-height: 16px;\n  margin-top: 4px;\n  max-height: 80px;\n  overflow: hidden;\n  padding: 6px;\n}\n\n.CodeMirror-hint-deprecation .deprecation-label {\n  color: #c79b2e;\n  cursor: default;\n  display: block;\n  font-size: 9px;\n  font-weight: bold;\n  letter-spacing: 1px;\n  line-height: 1;\n  padding-bottom: 5px;\n  text-transform: uppercase;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.CodeMirror-hint-deprecation .deprecation-label + * {\n  margin-top: 0;\n}\n\n.CodeMirror-hint-deprecation :last-child {\n  margin-bottom: 0;\n}\n\n\n.searchPane {    \n    height: 100vh;\n    border-right: 1px solid #c3c3c3;\n    min-height: 600px;\n    overflow-y: auto;\n    float: left;\n    left: 0;\n    top: 0;\n}\n\n.searchItem:hover {\n    cursor: pointer;    \n}\n\n.NoResponse .resultWrap{\n    display:none;\n}\n\n.NoResponse .graphiql-container {\n    width: 50%;\n}\n\n.graphiql-container .execute-button-wrap {\n    position: absolute !important;\n    left: 3rem !important;\n    top: 10px !important;\n    display: none;\n} \n\n.execute-button {\n    border-radius: 0 !important;\n    color: white !important;\n    width: 150px !important;\n    justify-content: center !imporant;\n    text-align: center !important;\n    background: rgb(144, 23, 23) !important;\n    box-shadow: rgba(0, 0, 0, 0.133) 0px 1.6px 3.6px 0px, rgba(0, 0, 0, 0.11) 0px 0.3px 0.9px 0px !important;\n}\n\n.execute-button > svg {\n    display: none !important;\n}\n\n.execute-button:after {\n    content: "Run";\n}\n\n.graphiql-container {\n    width: 80%\n}\n\n.graphiql-container .topBar,\n.graphiql-container .docExplorerShow,\n.graphiql-container .execute-button {\n  background: linear-gradient(#e2e2e2, #f7f7f7);\n}\n.graphiql-container,\n.CodeMirror-hints-wrapper {\n  filter: invert(90%);\n}\n\n.queryWrap {\n    flex: 1 !important;\n}\n\n',ErrorBoundary:".ErrorPane {\n    position: fixed;\n    top: 10%;\n    left: 10%;\n    background-color: white;\n    z-index: 9999;\n    margin-top: 5px;\n    border: 1px solid #848484;\n    padding: 5px;\n    width: 80%;\n    height: 80%;\n    overflow: scroll;\n}\n\n.ErrorPane details {\n    margin-left: 10%;\n    margin-top: 20px;\n}\n\n.ErrorPane h2 {\n    margin-left: 20vw;\n}\n\n",EntityMapper:".toolbarmenu {\n    width: auto !important\n}\n.mapper-adv{\n    padding-top: 3px;\n}\n\n",DynamicWidgetParameter:"/* add css styles to the component */\n\n",DataLoader:"/* add css styles to the component */\n\n"}}),{setters:[],execute:function(){}}}),System.register("component/studio/AGraphiQLView.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","component/studio/GraphiQLView/Definition.js","component/studio/GraphiQLView/Style.css!css","react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,GraphiQLView,React,_AGraphiQLView,AGraphiQLView,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_componentStudioGraphiQLViewDefinitionJs){GraphiQLView=_componentStudioGraphiQLViewDefinitionJs.default},function(_componentStudioGraphiQLViewStyleCssCss){},function(_react){React=_react.default}],execute:function(){_AGraphiQLView=function(_React$Component){function _AGraphiQLView(props){_classCallCheck(this,_AGraphiQLView);var _this=_possibleConstructorReturn(this,(_AGraphiQLView.__proto__||Object.getPrototypeOf(_AGraphiQLView)).call(this,props));return _this.state={fetcher:_this.props.fetcher,query:"",variables:"",response:"",schema:void 0,operationName:null,storage:null,defaultQuery:null,onEditQuery:null,onEditVariables:null,onEditOperationName:null,getDefaultFieldNames:null},_this}return _inherits(_AGraphiQLView,_React$Component),_createClass(_AGraphiQLView,[{key:"handleClickPrettifyButton",value:function(event){var editor=this.graphiql.getQueryEditor(),currentText=editor.getValue(),_require=require("graphql"),parse=_require.parse,prettyText=(0,_require.print)(parse(currentText));editor.setValue(prettyText)}},{key:"render",value:function(){var _this2=this;return React.createElement(GraphiQLView,_extends({ref:function(c){_this2.graphiql=c}},this.state),React.createElement(GraphiQLView.Toolbar,null,"// GraphiQL.Button usage",React.createElement(GraphiQLView.Button,{onClick:this.handleClickPrettifyButton,label:"Prettify",title:"Prettify Query (Shift-Ctrl-P)"}),"// Some other possible toolbar items",React.createElement(GraphiQLView.Menu,{label:"File",title:"File"},React.createElement(GraphiQL.MenuItem,{label:"Save",title:"Save"}))))}}]),_AGraphiQLView}(React.Component),_export("AGraphiQLView",AGraphiQLView=function(props){return _AGraphiQLView}),_export("AGraphiQLView",AGraphiQLView),_export("default",AGraphiQLView),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/AGraphiQLView/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","component/studio/GraphiQLView/Definition.js","component/studio/GraphiQLView/Style.css!css","react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,GraphiQLView,React,_AGraphiQLView,AGraphiQLView;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_componentStudioGraphiQLViewDefinitionJs){GraphiQLView=_componentStudioGraphiQLViewDefinitionJs.default},function(_componentStudioGraphiQLViewStyleCssCss){},function(_react){React=_react.default}],execute:function(){_AGraphiQLView=function(_React$Component){function _AGraphiQLView(props){_classCallCheck(this,_AGraphiQLView);var _this=_possibleConstructorReturn(this,(_AGraphiQLView.__proto__||Object.getPrototypeOf(_AGraphiQLView)).call(this,props));return _this.state={fetcher:_this.props.fetcher,query:"",variables:"",response:"",schema:void 0,operationName:null,storage:null,defaultQuery:null,onEditQuery:null,onEditVariables:null,onEditOperationName:null,getDefaultFieldNames:null},_this}return _inherits(_AGraphiQLView,_React$Component),_createClass(_AGraphiQLView,[{key:"handleClickPrettifyButton",value:function(event){var editor=this.graphiql.getQueryEditor(),currentText=editor.getValue(),_require=require("graphql"),parse=_require.parse,prettyText=(0,_require.print)(parse(currentText));editor.setValue(prettyText)}},{key:"render",value:function(){var _this2=this;return React.createElement(GraphiQLView,_extends({ref:function(c){_this2.graphiql=c}},this.state),React.createElement(GraphiQLView.Toolbar,null,"// GraphiQL.Button usage",React.createElement(GraphiQLView.Button,{onClick:this.handleClickPrettifyButton,label:"Prettify",title:"Prettify Query (Shift-Ctrl-P)"}),"// Some other possible toolbar items",React.createElement(GraphiQLView.Menu,{label:"File",title:"File"},React.createElement(GraphiQL.MenuItem,{label:"Save",title:"Save"}))))}}]),_AGraphiQLView}(React.Component),_export("AGraphiQLView",AGraphiQLView=function(props){return _AGraphiQLView}),_export("AGraphiQLView",AGraphiQLView)}}}),System.register("component/studio/BlankComponent.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_BlankComponent_,BlankComponent,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_BlankComponent_=function(_React$Component){function _BlankComponent_(){return _classCallCheck(this,_BlankComponent_),_possibleConstructorReturn(this,(_BlankComponent_.__proto__||Object.getPrototypeOf(_BlankComponent_)).apply(this,arguments))}return _inherits(_BlankComponent_,_React$Component),_createClass(_BlankComponent_,[{key:"render",value:function(){return React.createElement("div",{style:{height:0}})}}]),_BlankComponent_}(React.Component),_export("BlankComponent",BlankComponent=function(props){return _BlankComponent_}),_export("BlankComponent",BlankComponent),_export("default",BlankComponent),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/BlankComponent/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_BlankComponent_,BlankComponent;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_BlankComponent_=function(_React$Component){function _BlankComponent_(){return _classCallCheck(this,_BlankComponent_),_possibleConstructorReturn(this,(_BlankComponent_.__proto__||Object.getPrototypeOf(_BlankComponent_)).apply(this,arguments))}return _inherits(_BlankComponent_,_React$Component),_createClass(_BlankComponent_,[{key:"render",value:function(){return React.createElement("div",{style:{height:0}})}}]),_BlankComponent_}(React.Component),_export("BlankComponent",BlankComponent=function(props){return _BlankComponent_}),_export("BlankComponent",BlankComponent)}}}),System.register("component/studio/DataLoader.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_DataLoader_,DataLoader,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_DataLoader_=function(_React$Component){function _DataLoader_(){return _classCallCheck(this,_DataLoader_),_possibleConstructorReturn(this,(_DataLoader_.__proto__||Object.getPrototypeOf(_DataLoader_)).apply(this,arguments))}return _inherits(_DataLoader_,_React$Component),_createClass(_DataLoader_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Hello World!"))}}]),_DataLoader_}(React.Component),_export("DataLoader",DataLoader=function(props){return _DataLoader_}),_export("DataLoader",DataLoader),_export("default",DataLoader),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/DataLoader/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_DataLoader_,DataLoader;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_DataLoader_=function(_React$Component){function _DataLoader_(){return _classCallCheck(this,_DataLoader_),_possibleConstructorReturn(this,(_DataLoader_.__proto__||Object.getPrototypeOf(_DataLoader_)).apply(this,arguments))}return _inherits(_DataLoader_,_React$Component),_createClass(_DataLoader_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Hello World!"))}}]),_DataLoader_}(React.Component),_export("DataLoader",DataLoader=function(props){return _DataLoader_}),_export("DataLoader",DataLoader)}}}),System.register("component/studio/DynamicWidgetParameter.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,_DynamicWidgetParameter_,DynamicWidgetParameter,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,_carbonComponentsReact.TextInput},function(_lodashClonedeep){_lodashClonedeep.default}],execute:function(){_DynamicWidgetParameter_=function(_React$Component){function _DynamicWidgetParameter_(props){_classCallCheck(this,_DynamicWidgetParameter_);var _this=_possibleConstructorReturn(this,(_DynamicWidgetParameter_.__proto__||Object.getPrototypeOf(_DynamicWidgetParameter_)).call(this,props)),widgetData={};return _this.props.widgetData&&Object.keys(_this.props.widgetData).map(function(widgetId){var widgetItem=_this.props.widgetData[widgetId],widgetName=widgetItem&&widgetItem.props&&(widgetItem.props.Name||widgetItem.props.Label);widgetData[widgetName=widgetName||widgetId]=widgetItem&&widgetItem.props||{},widgetData[widgetName].id=widgetId}),_this.state={widgetData:widgetData,selectedWidgetName:_this.props.defaultValue},_this.updateProps=_this.updateProps.bind(_this),_this}return _inherits(_DynamicWidgetParameter_,_React$Component),_createClass(_DynamicWidgetParameter_,[{key:"updateProps",value:function(pageParams){this.props.updateProps&&this.props.updateProps(pageParams)}},{key:"render",value:function(){var paramPicker,_this2=this,result=[],widgetsEl=[];return widgetsEl.push(React.createElement(SelectItem,{value:"",text:"None"})),this.state.widgetData&&Object.keys(this.state.widgetData).map(function(widgetName){widgetsEl.push(React.createElement(SelectItem,{value:widgetName,text:widgetName}))}),paramPicker=React.createElement(React.Fragment,null,React.createElement(Select,{onChange:function(e){var selectedWidgetName=e.target.value;_this2.setState({selectedWidgetName:selectedWidgetName}),_this2.updateProps({widgetName:selectedWidgetName})},id:"select_widget",labelText:"Choose the Widget",defaultValue:this.state.selectedWidgetName||""},widgetsEl)),result.push(React.createElement("div",{style:{display:"inline-flex"}},paramPicker)),React.createElement(React.Fragment,null,result)}}]),_DynamicWidgetParameter_}(React.Component),_export("DynamicWidgetParameter",DynamicWidgetParameter=function(props){return _DynamicWidgetParameter_}),_export("DynamicWidgetParameter",DynamicWidgetParameter),_export("default",DynamicWidgetParameter),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/DynamicWidgetParameter/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,_DynamicWidgetParameter_,DynamicWidgetParameter;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,_carbonComponentsReact.TextInput},function(_lodashClonedeep){_lodashClonedeep.default}],execute:function(){_DynamicWidgetParameter_=function(_React$Component){function _DynamicWidgetParameter_(props){_classCallCheck(this,_DynamicWidgetParameter_);var _this=_possibleConstructorReturn(this,(_DynamicWidgetParameter_.__proto__||Object.getPrototypeOf(_DynamicWidgetParameter_)).call(this,props)),widgetData={};return _this.props.widgetData&&Object.keys(_this.props.widgetData).map(function(widgetId){var widgetItem=_this.props.widgetData[widgetId],widgetName=widgetItem&&widgetItem.props&&(widgetItem.props.Name||widgetItem.props.Label);widgetData[widgetName=widgetName||widgetId]=widgetItem&&widgetItem.props||{},widgetData[widgetName].id=widgetId}),_this.state={widgetData:widgetData,selectedWidgetName:_this.props.defaultValue},_this.updateProps=_this.updateProps.bind(_this),_this}return _inherits(_DynamicWidgetParameter_,_React$Component),_createClass(_DynamicWidgetParameter_,[{key:"updateProps",value:function(pageParams){this.props.updateProps&&this.props.updateProps(pageParams)}},{key:"render",value:function(){var paramPicker,_this2=this,result=[],widgetsEl=[];return widgetsEl.push(React.createElement(SelectItem,{value:"",text:"None"})),this.state.widgetData&&Object.keys(this.state.widgetData).map(function(widgetName){widgetsEl.push(React.createElement(SelectItem,{value:widgetName,text:widgetName}))}),paramPicker=React.createElement(React.Fragment,null,React.createElement(Select,{onChange:function(e){var selectedWidgetName=e.target.value;_this2.setState({selectedWidgetName:selectedWidgetName}),_this2.updateProps({widgetName:selectedWidgetName})},id:"select_widget",labelText:"Choose the Widget",defaultValue:this.state.selectedWidgetName||""},widgetsEl)),result.push(React.createElement("div",{style:{display:"inline-flex"}},paramPicker)),React.createElement(React.Fragment,null,result)}}]),_DynamicWidgetParameter_}(React.Component),_export("DynamicWidgetParameter",DynamicWidgetParameter=function(props){return _DynamicWidgetParameter_}),_export("DynamicWidgetParameter",DynamicWidgetParameter)}}}),System.register("component/studio/EntityMapper.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/add/32","@carbon/icons-react/lib/settings/16","@carbon/icons-react/lib/filter/32","@carbon/icons-react/lib/arrow--right/16"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Toolbar,ToolbarItem,Settings32,Connector,_EntityMapper_,EntityMapper,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Tabs,_carbonComponentsReact.Tab,_carbonComponentsReact.TextInput,_carbonComponentsReact.Tag,_carbonComponentsReact.Button,_carbonComponentsReact.FormLabel,_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,_carbonComponentsReact.OverflowMenu,Toolbar=_carbonComponentsReact.Toolbar,ToolbarItem=_carbonComponentsReact.ToolbarItem,_carbonComponentsReact.ToolbarTitle,_carbonComponentsReact.ToolbarOption},function(_carbonIconsReactLibAddAlt){_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibAdd){_carbonIconsReactLibAdd.default},function(_carbonIconsReactLibSettings){Settings32=_carbonIconsReactLibSettings.default},function(_carbonIconsReactLibFilter){_carbonIconsReactLibFilter.default},function(_carbonIconsReactLibArrowRight){Connector=_carbonIconsReactLibArrowRight.default}],execute:function(){_EntityMapper_=function(_React$Component){function _EntityMapper_(props){_classCallCheck(this,_EntityMapper_);var _this=_possibleConstructorReturn(this,(_EntityMapper_.__proto__||Object.getPrototypeOf(_EntityMapper_)).call(this,props));_this.state={addedFields:[],reload:!1},_this.hideNewTab=!1,_this.lastItemType="",_this.currentTable=props.baseTable?props.baseTable:"T1",_this.showFieldMappingDialog=_this.showFieldMappingDialog.bind(_this),_this.sampleCompleteItems=[{id:"field1",text:"field1",selected:!0,parent:"T1",type:"field"},{id:"field3",text:"field3",parent:"T1",type:"one2one",to:"T2"}],_this.tagProps={height:"1rem",fontSize:"small",marginTop:20,display:"inline-block",textAlign:"center",top:-10,paddingBottom:2,paddingLeft:10,paddingRight:10,position:"relative",backgroundColor:"#f3f3f3",borderRadius:"10%",float:"left"},_this.removeTag=_this.removeTag.bind(_this),_this.addField=_this.addField.bind(_this);_this.props.active_widget_field_value;return _this}return _inherits(_EntityMapper_,_React$Component),_createClass(_EntityMapper_,[{key:"showFieldMappingDialog",value:function(){this.props.updateStore({updates:{showpreview:!0}})}},{key:"componentDidUpdate",value:function(prevProps){if(this.props.active_widget_field_value&&!_.isEqual(prevProps.active_widget_field_value,this.props.active_widget_field_value)){var updatedProps=this.props.widgetProps,activeWidgetFieldValue=this.props.active_widget_field_value;updatedProps.FieldName=activeWidgetFieldValue,this.props.updateStore({updates:{widgetProps:updatedProps}})}prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"entity_map"==this.props.showpreview_target&&this.setState({reload:!this.state.reload})}},{key:"addField",value:function(e){console.log(e)}},{key:"removeTag",value:function(e){var fieldValue=e.currentTarget.getAttribute("id"),addedFields=this.state.addedFields;if(addedFields&&addedFields.length>0){var matchedField=addedFields.filter(function(item){return item==fieldValue});matchedField&&1==matchedField.length&&(addedFields=addedFields.splice(0,addedFields.indexOf(matchedField[0])))}var lastAddedFieldValue=addedFields[addedFields.length-1];this.setState({fieldValue:lastAddedFieldValue,addedFields:addedFields})}},{key:"render",value:function(){var _this2=this,connectorStyle={paddingTop:5,top:7,position:"relative"},activeWidgetFieldValue=this.props.active_widget_field_value;if(activeWidgetFieldValue){var propVal=activeWidgetFieldValue;propVal.indexOf("@@[")>-1&&(propVal=(propVal=propVal.split("@@[")[1]).substr(0,propVal.length-1)),activeWidgetFieldValue=propVal.indexOf(".")>-1?propVal.split("."):[propVal]}var previewComponent,tagContainer=activeWidgetFieldValue?activeWidgetFieldValue.map(function(fieldValue,indx){return indx>0?React.createElement(React.Fragment,null,React.createElement(Connector,{style:connectorStyle}),React.createElement("span",{key:fieldValue,id:fieldValue,style:_this2.tagProps},fieldValue)):React.createElement("span",{key:fieldValue,id:fieldValue,style:_this2.tagProps},fieldValue)}):null;return previewComponent=this.props.showpreview?React.createElement("preview-component",{target:"entity_map"},React.createElement("show-field-mapping-dialog",null)):null,React.createElement("div",null,React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/EntityMapper/Style.css");'),previewComponent,React.createElement("label",{class:"bx--label",style:{float:"left",marginLeft:5}},"Field"),React.createElement(Toolbar,{style:{width:"100%"}},React.createElement(ToolbarItem,{style:{width:250}},React.createElement("div",{style:{display:"inline-flex",maxWidth:300,minWidth:300,backgroundColor:"#f3f3f3",borderBottom:"1px solid #8c8c8c",paddingLeft:5,overflow:"auto",maxHeight:40,minHeight:40}},tagContainer)),React.createElement(ToolbarItem,null,React.createElement("div",{className:"mapper-adv"},React.createElement(Settings32,{onClick:this.showFieldMappingDialog})))))}}]),_EntityMapper_}(React.Component),_export("EntityMapper",EntityMapper=function(props){return _EntityMapper_}),_export("EntityMapper",EntityMapper),_export("default",EntityMapper),_export("states",states=[{KeyName:"active_widget_field_value",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}.props.FieldName",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {"${active_widget_id}": {"props": {"FieldName": ""}}}}}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"widgetProps",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}.props",DefaultValue:'{"pages": {"${active_page_id}": {"widgets":{"${active_widget_id}": {"props": {}}}}}}'},{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id":{}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id":{}}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/EntityMapper/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/add/32","@carbon/icons-react/lib/settings/16","@carbon/icons-react/lib/filter/32","@carbon/icons-react/lib/arrow--right/16"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Toolbar,ToolbarItem,Settings32,Connector,_EntityMapper_,EntityMapper;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Tabs,_carbonComponentsReact.Tab,_carbonComponentsReact.TextInput,_carbonComponentsReact.Tag,_carbonComponentsReact.Button,_carbonComponentsReact.FormLabel,_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,_carbonComponentsReact.OverflowMenu,Toolbar=_carbonComponentsReact.Toolbar,ToolbarItem=_carbonComponentsReact.ToolbarItem,_carbonComponentsReact.ToolbarTitle,_carbonComponentsReact.ToolbarOption},function(_carbonIconsReactLibAddAlt){_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibAdd){_carbonIconsReactLibAdd.default},function(_carbonIconsReactLibSettings){Settings32=_carbonIconsReactLibSettings.default},function(_carbonIconsReactLibFilter){_carbonIconsReactLibFilter.default},function(_carbonIconsReactLibArrowRight){Connector=_carbonIconsReactLibArrowRight.default}],execute:function(){_EntityMapper_=function(_React$Component){function _EntityMapper_(props){_classCallCheck(this,_EntityMapper_);var _this=_possibleConstructorReturn(this,(_EntityMapper_.__proto__||Object.getPrototypeOf(_EntityMapper_)).call(this,props));_this.state={addedFields:[],reload:!1},_this.hideNewTab=!1,_this.lastItemType="",_this.currentTable=props.baseTable?props.baseTable:"T1",_this.showFieldMappingDialog=_this.showFieldMappingDialog.bind(_this),_this.sampleCompleteItems=[{id:"field1",text:"field1",selected:!0,parent:"T1",type:"field"},{id:"field3",text:"field3",parent:"T1",type:"one2one",to:"T2"}],_this.tagProps={height:"1rem",fontSize:"small",marginTop:20,display:"inline-block",textAlign:"center",top:-10,paddingBottom:2,paddingLeft:10,paddingRight:10,position:"relative",backgroundColor:"#f3f3f3",borderRadius:"10%",float:"left"},_this.removeTag=_this.removeTag.bind(_this),_this.addField=_this.addField.bind(_this);_this.props.active_widget_field_value;return _this}return _inherits(_EntityMapper_,_React$Component),_createClass(_EntityMapper_,[{key:"showFieldMappingDialog",value:function(){this.props.updateStore({updates:{showpreview:!0}})}},{key:"componentDidUpdate",value:function(prevProps){if(this.props.active_widget_field_value&&!_.isEqual(prevProps.active_widget_field_value,this.props.active_widget_field_value)){var updatedProps=this.props.widgetProps,activeWidgetFieldValue=this.props.active_widget_field_value;updatedProps.FieldName=activeWidgetFieldValue,this.props.updateStore({updates:{widgetProps:updatedProps}})}prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"entity_map"==this.props.showpreview_target&&this.setState({reload:!this.state.reload})}},{key:"addField",value:function(e){console.log(e)}},{key:"removeTag",value:function(e){var fieldValue=e.currentTarget.getAttribute("id"),addedFields=this.state.addedFields;if(addedFields&&addedFields.length>0){var matchedField=addedFields.filter(function(item){return item==fieldValue});matchedField&&1==matchedField.length&&(addedFields=addedFields.splice(0,addedFields.indexOf(matchedField[0])))}var lastAddedFieldValue=addedFields[addedFields.length-1];this.setState({fieldValue:lastAddedFieldValue,addedFields:addedFields})}},{key:"render",value:function(){var _this2=this,connectorStyle={paddingTop:5,top:7,position:"relative"},activeWidgetFieldValue=this.props.active_widget_field_value;if(activeWidgetFieldValue){var propVal=activeWidgetFieldValue;propVal.indexOf("@@[")>-1&&(propVal=(propVal=propVal.split("@@[")[1]).substr(0,propVal.length-1)),activeWidgetFieldValue=propVal.indexOf(".")>-1?propVal.split("."):[propVal]}var previewComponent,tagContainer=activeWidgetFieldValue?activeWidgetFieldValue.map(function(fieldValue,indx){return indx>0?React.createElement(React.Fragment,null,React.createElement(Connector,{style:connectorStyle}),React.createElement("span",{key:fieldValue,id:fieldValue,style:_this2.tagProps},fieldValue)):React.createElement("span",{key:fieldValue,id:fieldValue,style:_this2.tagProps},fieldValue)}):null;return previewComponent=this.props.showpreview?React.createElement("preview-component",{target:"entity_map"},React.createElement("show-field-mapping-dialog",null)):null,React.createElement("div",null,React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/EntityMapper/Style.css");'),previewComponent,React.createElement("label",{class:"bx--label",style:{float:"left",marginLeft:5}},"Field"),React.createElement(Toolbar,{style:{width:"100%"}},React.createElement(ToolbarItem,{style:{width:250}},React.createElement("div",{style:{display:"inline-flex",maxWidth:300,minWidth:300,backgroundColor:"#f3f3f3",borderBottom:"1px solid #8c8c8c",paddingLeft:5,overflow:"auto",maxHeight:40,minHeight:40}},tagContainer)),React.createElement(ToolbarItem,null,React.createElement("div",{className:"mapper-adv"},React.createElement(Settings32,{onClick:this.showFieldMappingDialog})))))}}]),_EntityMapper_}(React.Component),_export("EntityMapper",EntityMapper=function(props){return _EntityMapper_}),_export("EntityMapper",EntityMapper)}}}),System.register("component/studio/ErrorBoundary.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/ErrorBoundary/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ErrorBoundary,catchFunc,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default,_react.Component},function(_componentStudioErrorBoundaryStyleCssCss){}],execute:function(){_export("ErrorBoundary",ErrorBoundary=function(WrappedComponent){return function(_React$Component){function ErrorBoundaryComp(props){_classCallCheck(this,ErrorBoundaryComp);var _this=_possibleConstructorReturn(this,(ErrorBoundaryComp.__proto__||Object.getPrototypeOf(ErrorBoundaryComp)).call(this,props));return _this.state={error:null,errorInfo:null,hasError:null},_this}return _inherits(ErrorBoundaryComp,_React$Component),_createClass(ErrorBoundaryComp,[{key:"componentDidCatch",value:function(error,errorInfo){catchFunc(error,errorInfo,this)}},{key:"render",value:function(){return this.state.errorInfo?React.createElement("div",{className:"ErrorPane"},React.createElement("style",null,'@import url("component/studio/ErrorBoundary/Style.css");'),React.createElement("h2",null,"Oops!! Something went wrong."),React.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),React.createElement("br",null),this.state.errorInfo.componentStack)):WrappedComponent}}],[{key:"getDerivedStateFromError",value:function(error){return{hasError:!0,error:error.name,errorInfo:error.stack}}}]),ErrorBoundaryComp}(React.Component)}),catchFunc=function(error,errorInfo,ctx){ctx.setState({error:error,errorInfo:errorInfo})},_export("ErrorBoundary",ErrorBoundary),_export("default",ErrorBoundary),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/GeoLocation.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-geolocated"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,geolocated,_GeoLocation_,GeoLocation,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactGeolocated){geolocated=_reactGeolocated.geolocated}],execute:function(){_GeoLocation_=function(_React$Component){function _GeoLocation_(){return _classCallCheck(this,_GeoLocation_),_possibleConstructorReturn(this,(_GeoLocation_.__proto__||Object.getPrototypeOf(_GeoLocation_)).apply(this,arguments))}return _inherits(_GeoLocation_,_React$Component),_createClass(_GeoLocation_,[{key:"render",value:function(){return this.props.isGeolocationAvailable?this.props.isGeolocationEnabled?this.props.coords?React.createElement("table",null,React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,"latitude"),React.createElement("td",null,this.props.coords.latitude)),React.createElement("tr",null,React.createElement("td",null,"longitude"),React.createElement("td",null,this.props.coords.longitude)),React.createElement("tr",null,React.createElement("td",null,"altitude"),React.createElement("td",null,this.props.coords.altitude)),React.createElement("tr",null,React.createElement("td",null,"heading"),React.createElement("td",null,this.props.coords.heading)),React.createElement("tr",null,React.createElement("td",null,"speed"),React.createElement("td",null,this.props.coords.speed)))):React.createElement("div",null,"Getting the location data… "):React.createElement("div",null,"Geolocation is not enabled"):React.createElement("div",null,"Your browser does not support Geolocation")}}]),_GeoLocation_}(React.Component),_export("GeoLocation",GeoLocation=function(props){return geolocated({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3,isGeolocationAvailable:!0,isGeolocationEnabled:!0})(_GeoLocation_)}),_export("GeoLocation",GeoLocation),_export("default",GeoLocation),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/GeoLocation/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-geolocated"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,geolocated,_GeoLocation_,GeoLocation;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactGeolocated){geolocated=_reactGeolocated.geolocated}],execute:function(){_GeoLocation_=function(_React$Component){function _GeoLocation_(){return _classCallCheck(this,_GeoLocation_),_possibleConstructorReturn(this,(_GeoLocation_.__proto__||Object.getPrototypeOf(_GeoLocation_)).apply(this,arguments))}return _inherits(_GeoLocation_,_React$Component),_createClass(_GeoLocation_,[{key:"render",value:function(){return this.props.isGeolocationAvailable?this.props.isGeolocationEnabled?this.props.coords?React.createElement("table",null,React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,"latitude"),React.createElement("td",null,this.props.coords.latitude)),React.createElement("tr",null,React.createElement("td",null,"longitude"),React.createElement("td",null,this.props.coords.longitude)),React.createElement("tr",null,React.createElement("td",null,"altitude"),React.createElement("td",null,this.props.coords.altitude)),React.createElement("tr",null,React.createElement("td",null,"heading"),React.createElement("td",null,this.props.coords.heading)),React.createElement("tr",null,React.createElement("td",null,"speed"),React.createElement("td",null,this.props.coords.speed)))):React.createElement("div",null,"Getting the location data… "):React.createElement("div",null,"Geolocation is not enabled"):React.createElement("div",null,"Your browser does not support Geolocation")}}]),_GeoLocation_}(React.Component),_export("GeoLocation",GeoLocation=function(props){return geolocated({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3,isGeolocationAvailable:!0,isGeolocationEnabled:!0})(_GeoLocation_)}),_export("GeoLocation",GeoLocation)}}}),System.register("component/studio/GraphiqlView.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","graphiql","isomorphic-fetch","lodash.clonedeep","react-icons/lib/fa/arrow-circle-left","react-icons/lib/fa/arrow-circle-right","@carbon/icons-react/lib/data--unstructured/32","@carbon/icons-react/lib/close/32","client/script/mmf/$qry.js","carbon-components-react","component/studio/SrsReference/Definition.js","react-copy-to-clipboard"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,GraphiQL,cloneDeep,FieldMapper,Close32,$qry,TextInput,Button,SrsReference,CopyToClipboard,_GraphiQLComp,GraphiqlView,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_graphiql){GraphiQL=_graphiql.default},function(_isomorphicFetch){_isomorphicFetch.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_reactIconsLibFaArrowCircleLeft){_reactIconsLibFaArrowCircleLeft.default},function(_reactIconsLibFaArrowCircleRight){_reactIconsLibFaArrowCircleRight.default},function(_carbonIconsReactLibDataUnstructured){FieldMapper=_carbonIconsReactLibDataUnstructured.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmf$qryJs){$qry=_clientScriptMmf$qryJs.$qry},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,Button=_carbonComponentsReact.Button,_carbonComponentsReact.Link,_carbonComponentsReact.Tabs,_carbonComponentsReact.Tab},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_reactCopyToClipboard){CopyToClipboard=_reactCopyToClipboard.default}],execute:function(){_GraphiQLComp=function(_React$Component){function _GraphiQLComp(props){_classCallCheck(this,_GraphiQLComp);var _this=_possibleConstructorReturn(this,(_GraphiQLComp.__proto__||Object.getPrototypeOf(_GraphiQLComp)).call(this,props));return _this.state={form:{},activeQueryId:"",query:"",variables:"",schema:void 0,operationName:null,theme:"dark",storage:null,defaultQuery:null,onEditOperationName:null,searchResults:[],getDefaultFieldNames:null,hasResponse:!1,fieldMappingValues:{},defaultQueryBuilderObj:{},queryToCopy:""},_this.historyLimit=15,_this.queryNameUpdated=_this.queryNameUpdated.bind(_this),_this.queryScopeUpdated=_this.queryScopeUpdated.bind(_this),_this.queryPathUpdated=_this.queryPathUpdated.bind(_this),_this.onToggle=_this.onToggle.bind(_this),_this.saveQuery=_this.saveQuery.bind(_this),_this.graphiql=React.createRef(),_this.graphQLFetcher=_this.graphQLFetcher.bind(_this),_this.refreshHistory=_this.refreshHistory.bind(_this),_this.loadDetails=_this.loadDetails.bind(_this),_this.queryName="",_this.queryScope="",_this.response="",_this}return _inherits(_GraphiQLComp,_React$Component),_createClass(_GraphiQLComp,[{key:"graphQLFetcher",value:function(graphQLParams){var _this2=this;return new Promise(function(resolve,reject){var updatedVariables=graphQLParams.variables;if(updatedVariables){for(var variables=JSON.stringify(graphQLParams.variables),match=void 0;match=new RegExp("\\${([a-zA-Z0-9_]+)}").exec(variables);)if(match&&2==match.length){var replaceFrom=match[0],replaceTo=_this2.state.fieldMappingValues[match[1]];variables=variables.replace(replaceFrom,replaceTo)}updatedVariables=JSON.parse(variables)}$qry._run(graphQLParams.query,updatedVariables).then(function(response){_this2.graphiql&&_this2.graphiql.current&&_this2.graphiql.current.refresh();var hasResponse=response&&response.data&&!response.data.__schema;_this2.setState({hasResponse:hasResponse}),resolve(response)})})}},{key:"saveQuery",value:function(){var _this3=this,_state$defaultQueryBu=this.state.defaultQueryBuilderObj,defaultQueryName=_state$defaultQueryBu.defaultQueryName,defaultQueryScope=_state$defaultQueryBu.defaultQueryScope,defaultQueryDef=_state$defaultQueryBu.defaultQueryDef,defaultQueryVariables=_state$defaultQueryBu.defaultQueryVariables,defaultQueryPath=_state$defaultQueryBu.defaultQueryPath;defaultQueryName&&$qry.saveQuery(defaultQueryName,defaultQueryScope,defaultQueryDef,defaultQueryVariables,defaultQueryPath).then(function(data){return _this3.props.addFlashMessage({title:"Success - ",subtitle:"Query "+defaultQueryScope+"."+defaultQueryName+" saved!"})})}},{key:"queryNameUpdated",value:function(e){var defaultQueryBuilderObj=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj:{};defaultQueryBuilderObj.defaultQueryName=e.target.value,this.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}},{key:"queryScopeUpdated",value:function(e){var defaultQueryBuilderObj=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj:{};defaultQueryBuilderObj.defaultQueryScope=e.target.value,this.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}},{key:"queryPathUpdated",value:function(e){var defaultQueryBuilderObj=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj:{};defaultQueryBuilderObj.defaultQueryPath=e.target.value,this.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}},{key:"onToggle",value:function(node,toggled){this.state.cursor&&(this.state.cursor.active=!1),node.active=!0,node.children&&(node.toggled=toggled),this.setState({cursor:node})}},{key:"componentDidMount",value:function(){!this.state.activeQueryId&&this.props.activeSearchQueryId&&this.loadDetails(this.props.activeSearchQueryId)}},{key:"loadDetails",value:function(activeQueryId){var _this4=this;this.refreshHistory(activeQueryId).then(function(searchResults){var matchingQuery=searchResults.filter(function(item){return item.uid==activeQueryId}),defaultQueryBuilderObj={};(matchingQuery=1==matchingQuery.length?matchingQuery[0]:null)&&(defaultQueryBuilderObj={defaultQueryName:matchingQuery.Name,defaultQueryScope:matchingQuery.Scope,defaultQueryDef:matchingQuery.Definition,defaultQueryVariables:matchingQuery.Variables,defaultQueryPath:matchingQuery.AccessPath});for(var variables=defaultQueryBuilderObj?defaultQueryBuilderObj.defaultQueryVariables:{},regex=new RegExp("\\${([a-zA-Z0-9_]+)}","g"),match=void 0,fields2Map=[];match=regex.exec(variables);)match&&2==match.length&&fields2Map.push(match[1]);var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this4.state.fieldMappingValues&&_this4.state.fieldMappingValues[inputField]?_this4.state.fieldMappingValues[inputField]:""});var queryStr=_this4.state.showFieldMapper&&defaultQueryBuilderObj&&defaultQueryBuilderObj.defaultQueryName?'$qry.run("'+defaultQueryBuilderObj.defaultQueryScope+"."+defaultQueryBuilderObj.defaultQueryName+'", '+JSON.stringify(inputVariables)+', "'+defaultQueryBuilderObj.defaultQueryPath+'").then((result)=>{ $resolve(result); })':_this4.state.queryToCopy+"";_this4.setState({activeQueryId:activeQueryId,defaultQueryBuilderObj:defaultQueryBuilderObj,searchResults:searchResults,queryToCopy:queryStr})})}},{key:"componentDidUpdate",value:function(prevProps){var _this5=this;_.isEqual(prevProps.recentlySearchedQueries,this.props.recentlySearchedQueries)||this.refreshHistory(this.state.activeQueryId).then(function(searchResults){_this5.setState({searchResults:searchResults})})}},{key:"refreshHistory",value:function(activeQueryId){var _this6=this;return new Promise(function(resolve,reject){if(_this6.props.recentlySearchedQueries){var queryIds=_this6.props.recentlySearchedQueries?_this6.props.recentlySearchedQueries:[];-1==queryIds.indexOf(activeQueryId)&&queryIds.push(activeQueryId),$qry.run("mmf.getQueriesById",{queryIds:queryIds},"data.MetaQuery.MetaQueryFind").then(function(result){if(result&&Object.keys(result)){var searchResults=[];Object.keys(result).map(function(queryId){searchResults.push({uid:queryId,Name:result[queryId].Name,Scope:result[queryId].Scope,Definition:result[queryId].Definition,Variables:result[queryId].Variables,AccessPath:result[queryId].AccessPath})}),resolve(searchResults)}})}})}},{key:"render",value:function(){var _ref,_this7=this,RecordLookup=SrsReference(),searchQueriesProps={title:"Search History",tablename:"MetaQuery",displayfield:"Name",secondarydisplayfield:"Scope",searchfields:"Name,Scope",onChange:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(item){var queries,queriesWithoutCurrentId;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:queries=_this7.props.recentlySearchedQueries,queriesWithoutCurrentId=queries.filter(function(queryId,indx){return queryId!=item.id&&indx<_this7.historyLimit}),queries=[item.id].concat(queriesWithoutCurrentId),_this7.props.updateStore({updates:{recentlySearchedQueries:queries,activeSearchQueryId:item.id}}),_this7.loadDetails(item.id);case 5:case"end":return _context.stop()}},_callee,_this7)})),function(_x){return _ref.apply(this,arguments)})},notificationBar=this.props.notifications&&this.props.notifications.length>0&&!this.props.showpreview?React.createElement("notification-bar",{styles:JSON.stringify({position:"fixed",width:"30%",right:10,minHeight:100,overflow:"auto",display:"block",zIndex:99999,bottom:5})}):null,searchPane=React.createElement("div",{className:"searchPane",style:{width:"20%"}},React.createElement("div",{style:{display:"inline-table",marginLeft:"20%",marginTop:10,marginBottom:10}},React.createElement(Button,_extends({},{kind:"primary",size:"small"},{onClick:function(e){$(".execute-button").click()},style:{justifyContent:"center",backgroundColor:"rgb(144, 23, 23)",boxShadow:"rgba(0, 0, 0, 0.133) 0px 1.6px 3.6px 0px, rgba(0, 0, 0, 0.11) 0px 0.3px 0.9px 0px",paddingLeft:60}}),"Run")),React.createElement("div",{style:{display:"inline-table",marginTop:10,marginLeft:10,marginBottom:20,padding:50,border:"1px solid #d4d3d3",boxShadow:"0 1.6px 3.6px 0 rgba(0, 0, 0, .132), 0 0.3px 0.9px 0 rgba(0, 0, 0, .108)"}},React.createElement(TextInput,{name:"",labelText:"Query Name",style:{float:"left"},className:this.props.className,placeholder:"Enter Name...",onChange:this.queryNameUpdated,required:"required",defaultValue:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryName?this.state.defaultQueryBuilderObj.defaultQueryName:""}),React.createElement(TextInput,{name:"",labelText:"Query Scope",style:{float:"left"},className:this.props.className,placeholder:"Enter Scope...",onChange:this.queryScopeUpdated,required:"required",defaultValue:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryScope?this.state.defaultQueryBuilderObj.defaultQueryScope:""}),React.createElement(TextInput,{name:"",labelText:"Access Path",style:{float:"left"},className:this.props.className,placeholder:"Enter path like data.TableName.TableNameFind.edges...",onChange:this.queryPathUpdated,required:"required",defaultValue:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryPath?this.state.defaultQueryBuilderObj.defaultQueryPath:""}),React.createElement(Button,{className:"btn-cls",style:{justifyContent:"center",marginLeft:"15%",marginTop:"10%"},onClick:this.saveQuery},"Save")),React.createElement("div",null,React.createElement(RecordLookup,searchQueriesProps),React.createElement("div",{className:"searchResults",style:{display:"inline-grid",width:"100%"}},this.state.searchResults.map(function(searchItem){return React.createElement("div",{value:searchItem.uid,className:"searchItem",onClick:function(e){_this7.loadDetails(e.target.getAttribute("value")),_this7.props.updateStore({updates:{activeSearchQueryId:e.target.getAttribute("value")}})},style:{margin:5,padding:5,border:"1px solid grey",borderRadius:"5%",color:_this7.state.activeQueryId==searchItem.uid?"blue":"black"}},searchItem.Name)})))),fieldMapperStyles={left:0,bottom:0,cursor:"pointer",position:"absolute",height:this.state.showFieldMapper?"30%":"5rem",width:this.state.showFieldMapper?"100%":"2rem",zIndex:100};this.state.showFieldMapper?(fieldMapperStyles.borderTop="1px solid #787a80",fieldMapperStyles.backgroundColor="#ececec",fieldMapperStyles.boxShadow="rgba(0, 0, 0, 0.133) 1.6px 0px 0px 3.6px, rgba(0, 0, 0, 0.11) 0.3px 0px 0px 0.9px"):(fieldMapperStyles.border=0,fieldMapperStyles.backgroundColor="#eefef0");for(var variables=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj.defaultQueryVariables:{},regex=new RegExp("\\${([a-zA-Z0-9_]+)}","g"),match=void 0,fields2Map=[];match=regex.exec(variables);)match&&2==match.length&&fields2Map.push(match[1]);var groupParentStyle={display:"block",float:"left",marginBottom:10,marginLeft:30},groupElementStyle={marginRight:30,width:"20vw",display:"inline-block",float:"left"},groupedItems={},fieldResult=[],listOfFields=(this.props.form&&this.props.form.formFields&&this.props.form.formFields,[]);(fields2Map=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[]).map(function(fieldName,indx){listOfFields.push(React.createElement(TextInput,{labelText:fieldName,placeholder:"Enter value...",required:!0,defaultValue:_this7.state.fieldMappingValues?_this7.state.fieldMappingValues[fieldName]:"",onChange:function(e){var fieldValue=e.target.value,fieldMappingValues=cloneDeep(_this7.state.fieldMappingValues);fieldMappingValues[fieldName]=fieldValue;var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this7.state.fieldMappingValues&&_this7.state.fieldMappingValues[inputField]?_this7.state.fieldMappingValues[inputField]:""});var queryStr=_this7.state.defaultQueryBuilderObj&&_this7.state.defaultQueryBuilderObj.defaultQueryName?'$qry.run("'+_this7.state.defaultQueryBuilderObj.defaultQueryScope+"."+_this7.state.defaultQueryBuilderObj.defaultQueryName+'", '+JSON.stringify(inputVariables)+', "'+_this7.state.defaultQueryBuilderObj.defaultQueryPath+'").then((result)=>{ $resolve(result); })':_this7.state.queryToCopy+"";_this7.setState({fieldMappingValues:fieldMappingValues,queryToCopy:queryStr})}}))});var fieldCount=0;return listOfFields.map(function(field,indx){if(field){var group=parseInt(fieldCount/4);groupedItems[group]=groupedItems[group]||[],groupedItems[group].push(React.createElement("div",{style:groupElementStyle},field)),fieldCount++}}),Object.keys(groupedItems).length>0?Object.keys(groupedItems).map(function(groupItemKey,indx){var fieldGroup=React.createElement("div",{style:groupParentStyle},groupedItems[groupItemKey]);fieldResult.push(fieldGroup)}):fieldResult=React.createElement("div",{style:{textAlign:"center",marginTop:"3rem",fontSize:"larger"}},"No fields to mock"),React.createElement("div",{className:this.state.hasResponse?"QueryEditor":"QueryEditor NoResponse",style:{display:"inline-flex",width:"100%"}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/GraphiqlView/Style.css!css");'),React.createElement("div",{style:fieldMapperStyles},this.state.showFieldMapper&&this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryName&&this.state.defaultQueryBuilderObj.defaultQueryScope?React.createElement("div",{style:{float:"right",marginTop:-20,width:"10rem",border:"1px solid blue",backgroundColor:"#76ae7e",color:"white",textAlign:"center",cursor:"copy"}},React.createElement(CopyToClipboard,{text:this.state.queryToCopy,onCopy:function(){return _this7.props.addFlashMessage({title:"Success - ",subtitle:"Query script copied to clipboard!"})}},React.createElement("span",null,"Copy Script"))):null,this.state.showFieldMapper?React.createElement(Close32,{style:{float:"right"},onClick:function(e){return _this7.setState({showFieldMapper:!_this7.state.showFieldMapper})}}):React.createElement(FieldMapper,{style:{float:"left"},onClick:function(e){var queryStr=_this7.state.queryToCopy+"";if(!_this7.state.showFieldMapper){var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this7.state.fieldMappingValues&&_this7.state.fieldMappingValues[inputField]?_this7.state.fieldMappingValues[inputField]:""}),queryStr='$qry.run("'+_this7.state.defaultQueryBuilderObj.defaultQueryScope+"."+_this7.state.defaultQueryBuilderObj.defaultQueryName+'", '+JSON.stringify(inputVariables)+', "'+_this7.state.defaultQueryBuilderObj.defaultQueryPath+'").then((result)=>{ $resolve(result); })'}_this7.setState({showFieldMapper:!_this7.state.showFieldMapper,queryToCopy:queryStr})}}),this.state.showFieldMapper?fieldResult:null),notificationBar,searchPane,React.createElement(GraphiQL,_extends({fetcher:this.graphQLFetcher,ref:this.graphiql},this.state,{query:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryDef?this.state.defaultQueryBuilderObj.defaultQueryDef:"",variables:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryVariables?this.state.defaultQueryBuilderObj.defaultQueryVariables:"",onEditQuery:function(queryVal){var defaultQueryBuilderObj=cloneDeep(_this7.state.defaultQueryBuilderObj);defaultQueryBuilderObj.defaultQueryDef=queryVal,_this7.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})},onEditVariables:function(queryVal){var defaultQueryBuilderObj=cloneDeep(_this7.state.defaultQueryBuilderObj);defaultQueryBuilderObj.defaultQueryVariables=queryVal,_this7.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}}),React.createElement(GraphiQL.Logo,null,"Query Builder"),React.createElement(GraphiQL.Toolbar,null)),this.state.hasResponse?null:React.createElement("div",{className:"noResultPane",style:{width:"30%"}},React.createElement("img",{src:"/resources/NoResults.jpg",style:{width:"20rem",height:"20rem",marginLeft:"15%",marginTop:"15%"}})))}}]),_GraphiQLComp}(React.Component),_export("GraphiqlView",GraphiqlView=function(props){return _GraphiQLComp}),_export("GraphiqlView",GraphiqlView),_export("default",GraphiqlView),_export("states",states=[{KeyName:"activeSearchQueryId",AccessPath:"activeSearchQueryId",DefaultValue:'{"activeSearchQueryId":  ""}'},{KeyName:"recentlySearchedQueries",AccessPath:"recentlySearchedQueries",DefaultValue:'{"recentlySearchedQueries": []}'},{KeyName:"notifications",AccessPath:"notifications",DefaultValue:'{"notifications": []}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/GraphiqlView/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","graphiql","isomorphic-fetch","lodash.clonedeep","react-icons/lib/fa/arrow-circle-left","react-icons/lib/fa/arrow-circle-right","@carbon/icons-react/lib/data--unstructured/32","@carbon/icons-react/lib/close/32","client/script/mmf/$qry.js","carbon-components-react","component/studio/SrsReference/Definition.js","react-copy-to-clipboard"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,GraphiQL,cloneDeep,FieldMapper,Close32,$qry,TextInput,Button,SrsReference,CopyToClipboard,_GraphiQLComp,GraphiqlView;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_graphiql){GraphiQL=_graphiql.default},function(_isomorphicFetch){_isomorphicFetch.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_reactIconsLibFaArrowCircleLeft){_reactIconsLibFaArrowCircleLeft.default},function(_reactIconsLibFaArrowCircleRight){_reactIconsLibFaArrowCircleRight.default},function(_carbonIconsReactLibDataUnstructured){FieldMapper=_carbonIconsReactLibDataUnstructured.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmf$qryJs){$qry=_clientScriptMmf$qryJs.$qry},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,Button=_carbonComponentsReact.Button,_carbonComponentsReact.Link,_carbonComponentsReact.Tabs,_carbonComponentsReact.Tab},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_reactCopyToClipboard){CopyToClipboard=_reactCopyToClipboard.default}],execute:function(){_GraphiQLComp=function(_React$Component){function _GraphiQLComp(props){_classCallCheck(this,_GraphiQLComp);var _this=_possibleConstructorReturn(this,(_GraphiQLComp.__proto__||Object.getPrototypeOf(_GraphiQLComp)).call(this,props));return _this.state={form:{},activeQueryId:"",query:"",variables:"",schema:void 0,operationName:null,theme:"dark",storage:null,defaultQuery:null,onEditOperationName:null,searchResults:[],getDefaultFieldNames:null,hasResponse:!1,fieldMappingValues:{},defaultQueryBuilderObj:{},queryToCopy:""},_this.historyLimit=15,_this.queryNameUpdated=_this.queryNameUpdated.bind(_this),_this.queryScopeUpdated=_this.queryScopeUpdated.bind(_this),_this.queryPathUpdated=_this.queryPathUpdated.bind(_this),_this.onToggle=_this.onToggle.bind(_this),_this.saveQuery=_this.saveQuery.bind(_this),_this.graphiql=React.createRef(),_this.graphQLFetcher=_this.graphQLFetcher.bind(_this),_this.refreshHistory=_this.refreshHistory.bind(_this),_this.loadDetails=_this.loadDetails.bind(_this),_this.queryName="",_this.queryScope="",_this.response="",_this}return _inherits(_GraphiQLComp,_React$Component),_createClass(_GraphiQLComp,[{key:"graphQLFetcher",value:function(graphQLParams){var _this2=this;return new Promise(function(resolve,reject){var updatedVariables=graphQLParams.variables;if(updatedVariables){for(var variables=JSON.stringify(graphQLParams.variables),match=void 0;match=new RegExp("\\${([a-zA-Z0-9_]+)}").exec(variables);)if(match&&2==match.length){var replaceFrom=match[0],replaceTo=_this2.state.fieldMappingValues[match[1]];variables=variables.replace(replaceFrom,replaceTo)}updatedVariables=JSON.parse(variables)}$qry._run(graphQLParams.query,updatedVariables).then(function(response){_this2.graphiql&&_this2.graphiql.current&&_this2.graphiql.current.refresh();var hasResponse=response&&response.data&&!response.data.__schema;_this2.setState({hasResponse:hasResponse}),resolve(response)})})}},{key:"saveQuery",value:function(){var _this3=this,_state$defaultQueryBu=this.state.defaultQueryBuilderObj,defaultQueryName=_state$defaultQueryBu.defaultQueryName,defaultQueryScope=_state$defaultQueryBu.defaultQueryScope,defaultQueryDef=_state$defaultQueryBu.defaultQueryDef,defaultQueryVariables=_state$defaultQueryBu.defaultQueryVariables,defaultQueryPath=_state$defaultQueryBu.defaultQueryPath;defaultQueryName&&$qry.saveQuery(defaultQueryName,defaultQueryScope,defaultQueryDef,defaultQueryVariables,defaultQueryPath).then(function(data){return _this3.props.addFlashMessage({title:"Success - ",subtitle:"Query "+defaultQueryScope+"."+defaultQueryName+" saved!"})})}},{key:"queryNameUpdated",value:function(e){var defaultQueryBuilderObj=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj:{};defaultQueryBuilderObj.defaultQueryName=e.target.value,this.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}},{key:"queryScopeUpdated",value:function(e){var defaultQueryBuilderObj=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj:{};defaultQueryBuilderObj.defaultQueryScope=e.target.value,this.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}},{key:"queryPathUpdated",value:function(e){var defaultQueryBuilderObj=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj:{};defaultQueryBuilderObj.defaultQueryPath=e.target.value,this.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}},{key:"onToggle",value:function(node,toggled){this.state.cursor&&(this.state.cursor.active=!1),node.active=!0,node.children&&(node.toggled=toggled),this.setState({cursor:node})}},{key:"componentDidMount",value:function(){!this.state.activeQueryId&&this.props.activeSearchQueryId&&this.loadDetails(this.props.activeSearchQueryId)}},{key:"loadDetails",value:function(activeQueryId){var _this4=this;this.refreshHistory(activeQueryId).then(function(searchResults){var matchingQuery=searchResults.filter(function(item){return item.uid==activeQueryId}),defaultQueryBuilderObj={};(matchingQuery=1==matchingQuery.length?matchingQuery[0]:null)&&(defaultQueryBuilderObj={defaultQueryName:matchingQuery.Name,defaultQueryScope:matchingQuery.Scope,defaultQueryDef:matchingQuery.Definition,defaultQueryVariables:matchingQuery.Variables,defaultQueryPath:matchingQuery.AccessPath});for(var variables=defaultQueryBuilderObj?defaultQueryBuilderObj.defaultQueryVariables:{},regex=new RegExp("\\${([a-zA-Z0-9_]+)}","g"),match=void 0,fields2Map=[];match=regex.exec(variables);)match&&2==match.length&&fields2Map.push(match[1]);var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this4.state.fieldMappingValues&&_this4.state.fieldMappingValues[inputField]?_this4.state.fieldMappingValues[inputField]:""});var queryStr=_this4.state.showFieldMapper&&defaultQueryBuilderObj&&defaultQueryBuilderObj.defaultQueryName?'$qry.run("'+defaultQueryBuilderObj.defaultQueryScope+"."+defaultQueryBuilderObj.defaultQueryName+'", '+JSON.stringify(inputVariables)+', "'+defaultQueryBuilderObj.defaultQueryPath+'").then((result)=>{ $resolve(result); })':_this4.state.queryToCopy+"";_this4.setState({activeQueryId:activeQueryId,defaultQueryBuilderObj:defaultQueryBuilderObj,searchResults:searchResults,queryToCopy:queryStr})})}},{key:"componentDidUpdate",value:function(prevProps){var _this5=this;_.isEqual(prevProps.recentlySearchedQueries,this.props.recentlySearchedQueries)||this.refreshHistory(this.state.activeQueryId).then(function(searchResults){_this5.setState({searchResults:searchResults})})}},{key:"refreshHistory",value:function(activeQueryId){var _this6=this;return new Promise(function(resolve,reject){if(_this6.props.recentlySearchedQueries){var queryIds=_this6.props.recentlySearchedQueries?_this6.props.recentlySearchedQueries:[];-1==queryIds.indexOf(activeQueryId)&&queryIds.push(activeQueryId),$qry.run("mmf.getQueriesById",{queryIds:queryIds},"data.MetaQuery.MetaQueryFind").then(function(result){if(result&&Object.keys(result)){var searchResults=[];Object.keys(result).map(function(queryId){searchResults.push({uid:queryId,Name:result[queryId].Name,Scope:result[queryId].Scope,Definition:result[queryId].Definition,Variables:result[queryId].Variables,AccessPath:result[queryId].AccessPath})}),resolve(searchResults)}})}})}},{key:"render",value:function(){var _ref,_this7=this,RecordLookup=SrsReference(),searchQueriesProps={title:"Search History",tablename:"MetaQuery",displayfield:"Name",secondarydisplayfield:"Scope",searchfields:"Name,Scope",onChange:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(item){var queries,queriesWithoutCurrentId;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:queries=_this7.props.recentlySearchedQueries,queriesWithoutCurrentId=queries.filter(function(queryId,indx){return queryId!=item.id&&indx<_this7.historyLimit}),queries=[item.id].concat(queriesWithoutCurrentId),_this7.props.updateStore({updates:{recentlySearchedQueries:queries,activeSearchQueryId:item.id}}),_this7.loadDetails(item.id);case 5:case"end":return _context.stop()}},_callee,_this7)})),function(_x){return _ref.apply(this,arguments)})},notificationBar=this.props.notifications&&this.props.notifications.length>0&&!this.props.showpreview?React.createElement("notification-bar",{styles:JSON.stringify({position:"fixed",width:"30%",right:10,minHeight:100,overflow:"auto",display:"block",zIndex:99999,bottom:5})}):null,searchPane=React.createElement("div",{className:"searchPane",style:{width:"20%"}},React.createElement("div",{style:{display:"inline-table",marginLeft:"20%",marginTop:10,marginBottom:10}},React.createElement(Button,_extends({},{kind:"primary",size:"small"},{onClick:function(e){$(".execute-button").click()},style:{justifyContent:"center",backgroundColor:"rgb(144, 23, 23)",boxShadow:"rgba(0, 0, 0, 0.133) 0px 1.6px 3.6px 0px, rgba(0, 0, 0, 0.11) 0px 0.3px 0.9px 0px",paddingLeft:60}}),"Run")),React.createElement("div",{style:{display:"inline-table",marginTop:10,marginLeft:10,marginBottom:20,padding:50,border:"1px solid #d4d3d3",boxShadow:"0 1.6px 3.6px 0 rgba(0, 0, 0, .132), 0 0.3px 0.9px 0 rgba(0, 0, 0, .108)"}},React.createElement(TextInput,{name:"",labelText:"Query Name",style:{float:"left"},className:this.props.className,placeholder:"Enter Name...",onChange:this.queryNameUpdated,required:"required",defaultValue:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryName?this.state.defaultQueryBuilderObj.defaultQueryName:""}),React.createElement(TextInput,{name:"",labelText:"Query Scope",style:{float:"left"},className:this.props.className,placeholder:"Enter Scope...",onChange:this.queryScopeUpdated,required:"required",defaultValue:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryScope?this.state.defaultQueryBuilderObj.defaultQueryScope:""}),React.createElement(TextInput,{name:"",labelText:"Access Path",style:{float:"left"},className:this.props.className,placeholder:"Enter path like data.TableName.TableNameFind.edges...",onChange:this.queryPathUpdated,required:"required",defaultValue:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryPath?this.state.defaultQueryBuilderObj.defaultQueryPath:""}),React.createElement(Button,{className:"btn-cls",style:{justifyContent:"center",marginLeft:"15%",marginTop:"10%"},onClick:this.saveQuery},"Save")),React.createElement("div",null,React.createElement(RecordLookup,searchQueriesProps),React.createElement("div",{className:"searchResults",style:{display:"inline-grid",width:"100%"}},this.state.searchResults.map(function(searchItem){return React.createElement("div",{value:searchItem.uid,className:"searchItem",onClick:function(e){_this7.loadDetails(e.target.getAttribute("value")),_this7.props.updateStore({updates:{activeSearchQueryId:e.target.getAttribute("value")}})},style:{margin:5,padding:5,border:"1px solid grey",borderRadius:"5%",color:_this7.state.activeQueryId==searchItem.uid?"blue":"black"}},searchItem.Name)})))),fieldMapperStyles={left:0,bottom:0,cursor:"pointer",position:"absolute",height:this.state.showFieldMapper?"30%":"5rem",width:this.state.showFieldMapper?"100%":"2rem",zIndex:100};this.state.showFieldMapper?(fieldMapperStyles.borderTop="1px solid #787a80",fieldMapperStyles.backgroundColor="#ececec",fieldMapperStyles.boxShadow="rgba(0, 0, 0, 0.133) 1.6px 0px 0px 3.6px, rgba(0, 0, 0, 0.11) 0.3px 0px 0px 0.9px"):(fieldMapperStyles.border=0,fieldMapperStyles.backgroundColor="#eefef0");for(var variables=this.state.defaultQueryBuilderObj?this.state.defaultQueryBuilderObj.defaultQueryVariables:{},regex=new RegExp("\\${([a-zA-Z0-9_]+)}","g"),match=void 0,fields2Map=[];match=regex.exec(variables);)match&&2==match.length&&fields2Map.push(match[1]);var groupParentStyle={display:"block",float:"left",marginBottom:10,marginLeft:30},groupElementStyle={marginRight:30,width:"20vw",display:"inline-block",float:"left"},groupedItems={},fieldResult=[],listOfFields=(this.props.form&&this.props.form.formFields&&this.props.form.formFields,[]);(fields2Map=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[]).map(function(fieldName,indx){listOfFields.push(React.createElement(TextInput,{labelText:fieldName,placeholder:"Enter value...",required:!0,defaultValue:_this7.state.fieldMappingValues?_this7.state.fieldMappingValues[fieldName]:"",onChange:function(e){var fieldValue=e.target.value,fieldMappingValues=cloneDeep(_this7.state.fieldMappingValues);fieldMappingValues[fieldName]=fieldValue;var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this7.state.fieldMappingValues&&_this7.state.fieldMappingValues[inputField]?_this7.state.fieldMappingValues[inputField]:""});var queryStr=_this7.state.defaultQueryBuilderObj&&_this7.state.defaultQueryBuilderObj.defaultQueryName?'$qry.run("'+_this7.state.defaultQueryBuilderObj.defaultQueryScope+"."+_this7.state.defaultQueryBuilderObj.defaultQueryName+'", '+JSON.stringify(inputVariables)+', "'+_this7.state.defaultQueryBuilderObj.defaultQueryPath+'").then((result)=>{ $resolve(result); })':_this7.state.queryToCopy+"";_this7.setState({fieldMappingValues:fieldMappingValues,queryToCopy:queryStr})}}))});var fieldCount=0;return listOfFields.map(function(field,indx){if(field){var group=parseInt(fieldCount/4);groupedItems[group]=groupedItems[group]||[],groupedItems[group].push(React.createElement("div",{style:groupElementStyle},field)),fieldCount++}}),Object.keys(groupedItems).length>0?Object.keys(groupedItems).map(function(groupItemKey,indx){var fieldGroup=React.createElement("div",{style:groupParentStyle},groupedItems[groupItemKey]);fieldResult.push(fieldGroup)}):fieldResult=React.createElement("div",{style:{textAlign:"center",marginTop:"3rem",fontSize:"larger"}},"No fields to mock"),React.createElement("div",{className:this.state.hasResponse?"QueryEditor":"QueryEditor NoResponse",style:{display:"inline-flex",width:"100%"}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/GraphiqlView/Style.css!css");'),React.createElement("div",{style:fieldMapperStyles},this.state.showFieldMapper&&this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryName&&this.state.defaultQueryBuilderObj.defaultQueryScope?React.createElement("div",{style:{float:"right",marginTop:-20,width:"10rem",border:"1px solid blue",backgroundColor:"#76ae7e",color:"white",textAlign:"center",cursor:"copy"}},React.createElement(CopyToClipboard,{text:this.state.queryToCopy,onCopy:function(){return _this7.props.addFlashMessage({title:"Success - ",subtitle:"Query script copied to clipboard!"})}},React.createElement("span",null,"Copy Script"))):null,this.state.showFieldMapper?React.createElement(Close32,{style:{float:"right"},onClick:function(e){return _this7.setState({showFieldMapper:!_this7.state.showFieldMapper})}}):React.createElement(FieldMapper,{style:{float:"left"},onClick:function(e){var queryStr=_this7.state.queryToCopy+"";if(!_this7.state.showFieldMapper){var inputFields=fields2Map?fields2Map.filter(function(val,indx){return fields2Map.indexOf(val)===indx}):[],inputVariables={};inputFields&&inputFields.map(function(inputField){inputVariables[inputField]=_this7.state.fieldMappingValues&&_this7.state.fieldMappingValues[inputField]?_this7.state.fieldMappingValues[inputField]:""}),queryStr='$qry.run("'+_this7.state.defaultQueryBuilderObj.defaultQueryScope+"."+_this7.state.defaultQueryBuilderObj.defaultQueryName+'", '+JSON.stringify(inputVariables)+', "'+_this7.state.defaultQueryBuilderObj.defaultQueryPath+'").then((result)=>{ $resolve(result); })'}_this7.setState({showFieldMapper:!_this7.state.showFieldMapper,queryToCopy:queryStr})}}),this.state.showFieldMapper?fieldResult:null),notificationBar,searchPane,React.createElement(GraphiQL,_extends({fetcher:this.graphQLFetcher,ref:this.graphiql},this.state,{query:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryDef?this.state.defaultQueryBuilderObj.defaultQueryDef:"",variables:this.state.defaultQueryBuilderObj&&this.state.defaultQueryBuilderObj.defaultQueryVariables?this.state.defaultQueryBuilderObj.defaultQueryVariables:"",onEditQuery:function(queryVal){var defaultQueryBuilderObj=cloneDeep(_this7.state.defaultQueryBuilderObj);defaultQueryBuilderObj.defaultQueryDef=queryVal,_this7.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})},onEditVariables:function(queryVal){var defaultQueryBuilderObj=cloneDeep(_this7.state.defaultQueryBuilderObj);defaultQueryBuilderObj.defaultQueryVariables=queryVal,_this7.setState({defaultQueryBuilderObj:defaultQueryBuilderObj})}}),React.createElement(GraphiQL.Logo,null,"Query Builder"),React.createElement(GraphiQL.Toolbar,null)),this.state.hasResponse?null:React.createElement("div",{className:"noResultPane",style:{width:"30%"}},React.createElement("img",{src:"/resources/NoResults.jpg",style:{width:"20rem",height:"20rem",marginLeft:"15%",marginTop:"15%"}})))}}]),_GraphiQLComp}(React.Component),_export("GraphiqlView",GraphiqlView=function(props){return _GraphiQLComp}),_export("GraphiqlView",GraphiqlView)}}}),System.register("component/studio/GridCanvas.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","thirdpartylib/gridstack/corelib.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,gridStackFn,gridStackUIFn,_GridCanvas_,GridCanvas,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_thirdpartylibGridstackCorelibJs){gridStackFn=_thirdpartylibGridstackCorelibJs.gridStackFn,gridStackUIFn=_thirdpartylibGridstackCorelibJs.gridStackUIFn}],execute:function(){_GridCanvas_=function(_React$Component){function _GridCanvas_(props){_classCallCheck(this,_GridCanvas_);var _this=_possibleConstructorReturn(this,(_GridCanvas_.__proto__||Object.getPrototypeOf(_GridCanvas_)).call(this,props));return $ele&&($ele.registerElement("ListLayout","mmf","React"),$ele.registerElement("GridCanvas","studio","React"),$ele.registerElement("WidgetContainer","studio","React"),$ele.registerElement("QuillEditor","buildingblock","React"),$ele.registerElement("FileUpload","buildingblock","React")),_this.initializeLayout=_this.initializeLayout.bind(_this),_this}return _inherits(_GridCanvas_,_React$Component),_createClass(_GridCanvas_,[{key:"componentDidMount",value:function(){var _this2=this;for(this.rootEl=this.refs.widgetcanvas,this.hostEl=this.rootEl;this.hostEl&&!this.hostEl.shadowRoot;)this.hostEl=this.hostEl.parentElement;this.options={width:12,float:!1,removable:".trash",verticalMargin:10,removable:!0,removeTimeout:100,acceptWidgets:".grid-stack-item",resizable:{handles:"e, se, s, sw, w"},draggable:{handle:".grid-stack-item-content",greedy:!0,drop:function(event,ui){ui.draggable.detach().appendTo($(".gridWidgetCanvas",this.hostEl))}}},gridStackFn($,window,this.rootEl).then(function(gridStackUIObj){gridStackUIFn($,gridStackUIObj,window),$(".gridWidgetCanvas",_this2.hostEl).gridstack(_this2.options),_this2.initializeLayout=_this2.initializeLayout.bind(_this2)})}},{key:"initializeLayout",value:function(hostEl,self){hostEl&&$(".gridWidgetCanvas",hostEl).each(function(){var grid=$(this).data("gridstack");if(grid){grid.removeAll();_.each([{x:1,y:0,width:5,height:2,minHeight:2,maxHeight:4,minWidth:2,maxWidth:12,id:1},{x:6,y:0,width:5,height:2,minWidth:2,maxWidth:12,id:2}],function(node){var eleData={tag:"list-layout"};grid.addWidget($('<div><div class="grid-stack-item-content"><widget-container tag='+eleData.tag+" widgetid="+eleData.widgetid+" widgetprops="+JSON.stringify(eleData)+' class="widgetContainer"></widget-container></div><div/>'),node.x,node.y,node.width,node.height,!1,node.minWidth,node.maxWidth,node.minHeight,node.maxHeight)},this)}})}},{key:"render",value:function(){return React.createElement("div",{className:"grid-stack gridWidgetCanvas",ref:"widgetcanvas"},React.createElement("style",null,"@import url('/thirdpartylib/gridstack/corestyles.css'); @import url('component/studio/PageDesigner/Style.css'); @import url('/thirdpartylib/carbon-components/styles.css'); @import url('/thirdpartylib/carbon-components/styles.css');"))}}]),_GridCanvas_}(React.Component),_export("GridCanvas",GridCanvas=function(props){return _GridCanvas_}),_export("GridCanvas",GridCanvas),_export("default",GridCanvas),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/GridCanvas/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","thirdpartylib/gridstack/corelib.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,gridStackFn,gridStackUIFn,_GridCanvas_,GridCanvas;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_thirdpartylibGridstackCorelibJs){gridStackFn=_thirdpartylibGridstackCorelibJs.gridStackFn,gridStackUIFn=_thirdpartylibGridstackCorelibJs.gridStackUIFn}],execute:function(){_GridCanvas_=function(_React$Component){function _GridCanvas_(props){_classCallCheck(this,_GridCanvas_);var _this=_possibleConstructorReturn(this,(_GridCanvas_.__proto__||Object.getPrototypeOf(_GridCanvas_)).call(this,props));return $ele&&($ele.registerElement("ListLayout","mmf","React"),$ele.registerElement("GridCanvas","studio","React"),$ele.registerElement("WidgetContainer","studio","React"),$ele.registerElement("QuillEditor","buildingblock","React"),$ele.registerElement("FileUpload","buildingblock","React")),_this.initializeLayout=_this.initializeLayout.bind(_this),_this}return _inherits(_GridCanvas_,_React$Component),_createClass(_GridCanvas_,[{key:"componentDidMount",value:function(){var _this2=this;for(this.rootEl=this.refs.widgetcanvas,this.hostEl=this.rootEl;this.hostEl&&!this.hostEl.shadowRoot;)this.hostEl=this.hostEl.parentElement;this.options={width:12,float:!1,removable:".trash",verticalMargin:10,removable:!0,removeTimeout:100,acceptWidgets:".grid-stack-item",resizable:{handles:"e, se, s, sw, w"},draggable:{handle:".grid-stack-item-content",greedy:!0,drop:function(event,ui){ui.draggable.detach().appendTo($(".gridWidgetCanvas",this.hostEl))}}},gridStackFn($,window,this.rootEl).then(function(gridStackUIObj){gridStackUIFn($,gridStackUIObj,window),$(".gridWidgetCanvas",_this2.hostEl).gridstack(_this2.options),_this2.initializeLayout=_this2.initializeLayout.bind(_this2)})}},{key:"initializeLayout",value:function(hostEl,self){hostEl&&$(".gridWidgetCanvas",hostEl).each(function(){var grid=$(this).data("gridstack");if(grid){grid.removeAll();_.each([{x:1,y:0,width:5,height:2,minHeight:2,maxHeight:4,minWidth:2,maxWidth:12,id:1},{x:6,y:0,width:5,height:2,minWidth:2,maxWidth:12,id:2}],function(node){var eleData={tag:"list-layout"};grid.addWidget($('<div><div class="grid-stack-item-content"><widget-container tag='+eleData.tag+" widgetid="+eleData.widgetid+" widgetprops="+JSON.stringify(eleData)+' class="widgetContainer"></widget-container></div><div/>'),node.x,node.y,node.width,node.height,!1,node.minWidth,node.maxWidth,node.minHeight,node.maxHeight)},this)}})}},{key:"render",value:function(){return React.createElement("div",{className:"grid-stack gridWidgetCanvas",ref:"widgetcanvas"},React.createElement("style",null,"@import url('/thirdpartylib/gridstack/corestyles.css'); @import url('component/studio/PageDesigner/Style.css'); @import url('/thirdpartylib/carbon-components/styles.css'); @import url('/thirdpartylib/carbon-components/styles.css');"))}}]),_GridCanvas_}(React.Component),_export("GridCanvas",GridCanvas=function(props){return _GridCanvas_}),_export("GridCanvas",GridCanvas)}}}),System.register("component/studio/IconPicker.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,_IconPicker_,IconPicker,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem}],execute:function(){_IconPicker_=function(_React$Component){function _IconPicker_(props){_classCallCheck(this,_IconPicker_);var _this=_possibleConstructorReturn(this,(_IconPicker_.__proto__||Object.getPrototypeOf(_IconPicker_)).call(this,props));return _this.state={reload:!1,defaultIconURL:"@carbon/icons-react/lib/apps/16.js",iconURL:_this.props.iconURL?_this.props.iconURL:""},_this}return _inherits(_IconPicker_,_React$Component),_createClass(_IconPicker_,[{key:"componentDidMount",value:function(){var _this2=this,iconURL=this.state.iconURL?this.state.iconURL:this.state.defaultIconURL;System.import(iconURL).then(function(iconDef){_this2.cardIcon=iconDef,_this2.setState({reload:!_this2.state.reload})})}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this3=this;if(prevState.iconURL!=this.state.iconURL){var iconURL=this.state.iconURL?this.state.iconURL:this.defaultIconURL;System.import(iconURL).then(function(iconDef){_this3.cardIcon=iconDef,_this3.setState({reload:!_this3.state.reload})})}}},{key:"render",value:function(){var _this4=this;if(!this.cardIcon)return React.createElement("div",null,"Loading...");var CardIcon=this.cardIcon;return React.createElement("div",{style:{display:"inline-flex"}},React.createElement("style",null,'@import url("component/studio/IconPicker/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(Select,{style:{float:"left",marginTop:3,width:"50%"},labelText:"Icon Picker",onChange:function(e){_this4.setState({iconURL:"@carbon/icons-react/lib/"+e.target.value+".js"}),_this4.props.updateStore&&_this4.props.updateStore({updates:{selectedIcon:{iconName:e.target.value}}})},id:"iconpicker"},React.createElement(SelectItem,{value:"archive/32",text:"Archive"}),React.createElement(SelectItem,{value:"restaurant/32",text:"Restaurant"}),React.createElement(SelectItem,{value:"apps/16",text:"Apps"}),React.createElement(SelectItem,{value:"awake/16",text:"Awake"}),React.createElement(SelectItem,{value:"bluetooth/32",text:"Bluetooth"}),React.createElement(SelectItem,{value:"bookmark/32",text:"Bookmark"}),React.createElement(SelectItem,{value:"calculator/32",text:"Calculator"})),React.createElement(CardIcon,{style:{float:"left",width:32,marginTop:32,marginLeft:25,height:32,marginBottom:15}}))}}]),_IconPicker_}(React.Component),_export("IconPicker",IconPicker=function(props){return _IconPicker_}),_export("IconPicker",IconPicker),_export("default",IconPicker),_export("states",states=[{KeyName:"selectedIcon",AccessPath:"selectedIcon",DefaultValue:'{"selectedIcon": {"iconName": "apps/16"}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IconPicker/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,_IconPicker_,IconPicker;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem}],execute:function(){_IconPicker_=function(_React$Component){function _IconPicker_(props){_classCallCheck(this,_IconPicker_);var _this=_possibleConstructorReturn(this,(_IconPicker_.__proto__||Object.getPrototypeOf(_IconPicker_)).call(this,props));return _this.state={reload:!1,defaultIconURL:"@carbon/icons-react/lib/apps/16.js",iconURL:_this.props.iconURL?_this.props.iconURL:""},_this}return _inherits(_IconPicker_,_React$Component),_createClass(_IconPicker_,[{key:"componentDidMount",value:function(){var _this2=this,iconURL=this.state.iconURL?this.state.iconURL:this.state.defaultIconURL;System.import(iconURL).then(function(iconDef){_this2.cardIcon=iconDef,_this2.setState({reload:!_this2.state.reload})})}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this3=this;if(prevState.iconURL!=this.state.iconURL){var iconURL=this.state.iconURL?this.state.iconURL:this.defaultIconURL;System.import(iconURL).then(function(iconDef){_this3.cardIcon=iconDef,_this3.setState({reload:!_this3.state.reload})})}}},{key:"render",value:function(){var _this4=this;if(!this.cardIcon)return React.createElement("div",null,"Loading...");var CardIcon=this.cardIcon;return React.createElement("div",{style:{display:"inline-flex"}},React.createElement("style",null,'@import url("component/studio/IconPicker/Style.css"); @import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(Select,{style:{float:"left",marginTop:3,width:"50%"},labelText:"Icon Picker",onChange:function(e){_this4.setState({iconURL:"@carbon/icons-react/lib/"+e.target.value+".js"}),_this4.props.updateStore&&_this4.props.updateStore({updates:{selectedIcon:{iconName:e.target.value}}})},id:"iconpicker"},React.createElement(SelectItem,{value:"archive/32",text:"Archive"}),React.createElement(SelectItem,{value:"restaurant/32",text:"Restaurant"}),React.createElement(SelectItem,{value:"apps/16",text:"Apps"}),React.createElement(SelectItem,{value:"awake/16",text:"Awake"}),React.createElement(SelectItem,{value:"bluetooth/32",text:"Bluetooth"}),React.createElement(SelectItem,{value:"bookmark/32",text:"Bookmark"}),React.createElement(SelectItem,{value:"calculator/32",text:"Calculator"})),React.createElement(CardIcon,{style:{float:"left",width:32,marginTop:32,marginLeft:25,height:32,marginBottom:15}}))}}]),_IconPicker_}(React.Component),_export("IconPicker",IconPicker=function(props){return _IconPicker_}),_export("IconPicker",IconPicker)}}}),System.register("component/studio/IdeActionMapper.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewAction/Definition.js","client/script/mmf/DesignerConstants.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Search20,Edit20,GraphQLDataUtil,DESIGNER_CONST,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeActionMapper,IdeActionMapper,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibClose){_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewActionDefinitionJs){_componentMmfNewActionDefinitionJs.NewAction},function(_clientScriptMmfDesignerConstantsJs){DESIGNER_CONST=_clientScriptMmfDesignerConstantsJs.DESIGNER_CONST}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeActionMapper=function(_React$Component){function _IdeActionMapper(props){_classCallCheck(this,_IdeActionMapper);var _this=_possibleConstructorReturn(this,(_IdeActionMapper.__proto__||Object.getPrototypeOf(_IdeActionMapper)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],fileId:_this.props.compDetails?_this.props.compDetails.file_id:"-1",fileName:_this.props.compDetails?_this.props.compDetails.fileName:"",rowInfo:null,showPreview:!1,reload:!1},$ele.registerElement("NewAction","mmf","React"),_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_IdeActionMapper,_React$Component),_createClass(_IdeActionMapper,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"componentDidUpdate",value:function(prevProps,prevState){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_actions"==this.props.previewTarget&&(this.createRows(),this.setState({showPreview:!0,reload:!this.state.reload})),prevProps.compDetails&&prevProps.compDetails.file_id!==this.state.fileId&&this.createRows()}},{key:"createRows",value:function(){var self=this;GraphQLDataUtil().getRecord(DESIGNER_CONST.GET_META_COMPONENT_ACTION_BY_ID,{ActionComponent:this.state.fileId}).then(function(instances){if(instances&&instances.length>0){for(var initHead=instances[0].node,headers=Object.keys(initHead).map(function(key){return{key:key,header:key}}),rows=[],tabIn=0;tabIn<instances.length;tabIn++){var tableRow=instances[tabIn].node;tableRow.id=tabIn,rows.push(tableRow)}self.setState({headers:headers,rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"clearAll",value:function(){var checked=this.state.checked;this.state.rows.forEach(function(row,index){checked[index]=!!checked[index]&&!checked[index]}),this.setState({checked:checked,selectAll:!1})}},{key:"getCheckedItems",value:function(){var checkedItems=0;return this.state.checked.forEach(function(entry){entry&&checkedItems++}),checkedItems}},{key:"searchTable",value:function(evt){var newRows=[];this.state.rows.map(function(obj){Object.keys(obj).forEach(function(key){obj[key].toUpperCase().includes(evt.currentTarget.value.toUpperCase())&&!newRows.includes(obj)&&newRows.push(obj)})}),this.setState({filteredRows:newRows})}},{key:"showPreview",value:function(rowData){var rowInfo={};rowData&&rowData.cells&&rowData.cells.length>0&&rowData.cells.forEach(function(cell){var key=cell&&cell.id&&cell.id.split(":")[1];rowInfo[key]=cell.value}),this.setState({rowInfo:rowInfo,showPreview:!0}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"render",value:function(){var _this3=this,self=this,recordData=this.state.rowInfo?JSON.stringify(this.state.rowInfo):null,preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_actions"},React.createElement("new-action",{record:recordData,component_id:this.state.fileId,component_name:this.state.fileName,lite:!0})):React.createElement("div",null);return React.createElement("div",{className:"ide-action-mapper"},preview,React.createElement("style",null,'@import url("component/studio/IdeActionMapper/Style.css");'),React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails&&props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeActionMapper}(React.Component),_export("IdeActionMapper",IdeActionMapper=function(props){return _IdeActionMapper}),_export("IdeActionMapper",IdeActionMapper),_export("default",IdeActionMapper),_export("states",states=[{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IdeConsole.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_IdeConsole,IdeConsole,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_IdeConsole=function(_React$Component){function _IdeConsole(){return _classCallCheck(this,_IdeConsole),_possibleConstructorReturn(this,(_IdeConsole.__proto__||Object.getPrototypeOf(_IdeConsole)).apply(this,arguments))}return _inherits(_IdeConsole,_React$Component),_createClass(_IdeConsole,[{key:"render",value:function(){return React.createElement("div",{className:"ide-console"},React.createElement("span",null,"IdeConsole goes here..."))}}]),_IdeConsole}(React.Component),_export("IdeConsole",IdeConsole=function(props){return _IdeConsole}),_export("IdeConsole",IdeConsole),_export("default",IdeConsole),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IdeDependency.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewRouteRequires/Definition.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Edit20,Search20,Close32,GraphQLDataUtil,ErrorBoundary,NewRouteRequires,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeDependency,IdeDependency,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewRouteRequiresDefinitionJs){NewRouteRequires=_componentMmfNewRouteRequiresDefinitionJs.NewRouteRequires}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeDependency=function(_React$Component){function _IdeDependency(props){_classCallCheck(this,_IdeDependency);var _this=_possibleConstructorReturn(this,(_IdeDependency.__proto__||Object.getPrototypeOf(_IdeDependency)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],reload:!1},_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.state.showPreview=!1,_this.state.fileId=_this.props.compDetails.file_id,_this.state.fileName=_this.props.compDetails.fileName,_this.state.rowInfo=null,$ele.registerElement("NewRouteRequires","mmf","React"),_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_IdeDependency,_React$Component),_createClass(_IdeDependency,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_deps"==this.props.previewTarget&&this.setState({showPreview:!0,reload:!this.state.reload}),prevProps.reload==this.props.reload&&prevProps.compDetails.file_id===this.props.compDetails.file_id||this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var self=this;GraphQLDataUtil().getRecord("mmf.getMetaRouteRequiresByRoute",{Router:this.state.fileId}).then(function(instances){if(instances&&instances.length>0){for(var rows=[],tabIn=0;tabIn<instances.length;tabIn++){var instance=instances[tabIn].node,tableRow={};tableRow.id=tabIn,tableRow.RequiredComponent=instance.requiredComponent.Name,tableRow.RequiredComponentId=instance.RequiredComponent,tableRow.Order=instance.Order,tableRow.uid=instance.uid,tableRow.Router=instance.Router,rows.push(tableRow)}self.setState({headers:[{key:"RequiredComponent",header:"RequiredComponent"},{key:"Order",header:"Order"}],rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"getComponentToRender",value:function(){var NewRouteReqComp=NewRouteRequires();return React.createElement("div",{className:"previewPane"},React.createElement(NewRouteReqComp,{routeId:this.state.fileId,routeName:this.state.fileName,isFromStateMapper:!0,rowInfo:this.state.rowInfo}))}},{key:"getPreviewPane",value:function(){var newRouteComp=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(newRouteComp);return React.createElement("div",null,React.createElement("div",{className:"screenOverlay"}),React.createElement(Close32,{className:"cancelPreview",onClick:this.cancelPreview.bind(this)}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.setState({showPreview:!1})}},{key:"showPreview",value:function(rowId){var rowInfo=this.state.rows.filter(function(rowItem){return rowItem.id==rowId});rowInfo=rowInfo&&rowInfo.length>0?rowInfo[0]:null,this.setState({showPreview:!0,rowInfo:rowInfo}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"clearAll",value:function(){var checked=this.state.checked;this.state.rows.forEach(function(row,index){checked[index]=!!checked[index]&&!checked[index]}),this.setState({checked:checked,selectAll:!1})}},{key:"getCheckedItems",value:function(){var checkedItems=0;return this.state.checked.forEach(function(entry){entry&&checkedItems++}),checkedItems}},{key:"searchTable",value:function(evt){var newRows=[];this.state.rows.map(function(obj){Object.keys(obj).forEach(function(key){obj[key].toUpperCase().includes(evt.currentTarget.value.toUpperCase())&&!newRows.includes(obj)&&newRows.push(obj)})}),this.setState({filteredRows:newRows})}},{key:"batchActionClick",value:function(){}},{key:"render",value:function(){var _this3=this,recordData=(this.getCheckedItems(),this.state.rowInfo?JSON.stringify({uid:this.state.rowInfo.uid,component_id:this.state.rowInfo.RequiredComponentId,order:this.state.rowInfo.Order}):null),preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_deps"},React.createElement("new-route-requires",{record:recordData,route_id:this.state.fileId,route_name:this.state.fileName})):React.createElement("div",null),self=this;return React.createElement("div",{className:"ide-state-mapper"},React.createElement("style",null,'@import url("component/studio/IdeDependency/Style.css");'),this.state.showPreview?preview:null,React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row.id)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeDependency}(React.Component),_export("IdeDependency",IdeDependency=function(props){return _IdeDependency}),_export("IdeDependency",IdeDependency),_export("default",IdeDependency),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IdeFormFields.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_IdeFormFields,IdeFormFields,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,_carbonComponentsReact.TextInput}],execute:function(){_IdeFormFields=function(_React$Component){function _IdeFormFields(){return _classCallCheck(this,_IdeFormFields),_possibleConstructorReturn(this,(_IdeFormFields.__proto__||Object.getPrototypeOf(_IdeFormFields)).apply(this,arguments))}return _inherits(_IdeFormFields,_React$Component),_createClass(_IdeFormFields,[{key:"render",value:function(){var groupParentStyle={display:"block",width:"100vw",float:"left",marginBottom:10},groupElementStyle={marginRight:30,width:"20vw",display:"inline-block",float:"left"},groupedItems={},fieldResult=[],formFields=this.props.form&&this.props.form.formFields?this.props.form.formFields:[],fieldCount=0;return[formFields.fileType,formFields.fileName,formFields.scope,formFields.pagePath,formFields.componentType,formFields.styleType,formFields.componentVersion,formFields.hookOnModelField,formFields.content_type,formFields.triggerTypeField,formFields.hookSequenceField,formFields.importFromModel,formFields.importOnModelField,formFields.importExportOrder,formFields.localPathField,formFields.importExportLevel,formFields.importExportActive,formFields.importConditionField,formFields.exportConditionField,formFields.widgetTrigger,formFields.widgetOrder,formFields.widgetActive,formFields.widgetUpdateType,formFields.widgetUpdateTarget,formFields.pageActionActive,formFields.pageActionOrder,formFields.relativePath,formFields.methodType,formFields.methodCollection,formFields.isPublic].map(function(field,indx){if(field){var group=parseInt(fieldCount/4);groupedItems[group]=groupedItems[group]||[],groupedItems[group].push(React.createElement("div",{style:groupElementStyle},field)),fieldCount++}}),Object.keys(groupedItems).length>0&&Object.keys(groupedItems).map(function(groupItemKey,indx){var fieldGroup=React.createElement("div",{style:groupParentStyle},groupedItems[groupItemKey]);fieldResult.push(fieldGroup)}),React.createElement("div",{className:"footerContents"},React.createElement("style",null,'@import url("component/studio/IdeFormFields/Style.css");'),fieldResult)}}]),_IdeFormFields}(React.Component),_export("IdeFormFields",IdeFormFields=function(props){return _IdeFormFields}),_export("IdeFormFields",IdeFormFields),_export("default",IdeFormFields),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IdeNavigator.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react/lib/components/UIShell"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SideNav,SideNavMenu,SideNavMenuItem,_IdeNavigator_,IdeNavigator,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReactLibComponentsUIShell){_carbonComponentsReactLibComponentsUIShell.Content,SideNav=_carbonComponentsReactLibComponentsUIShell.SideNav,_carbonComponentsReactLibComponentsUIShell.SideNavItems,_carbonComponentsReactLibComponentsUIShell.SideNavLink,SideNavMenu=_carbonComponentsReactLibComponentsUIShell.SideNavMenu,SideNavMenuItem=_carbonComponentsReactLibComponentsUIShell.SideNavMenuItem}],execute:function(){_IdeNavigator_=function(_React$Component){function _IdeNavigator_(props){_classCallCheck(this,_IdeNavigator_);var _this=_possibleConstructorReturn(this,(_IdeNavigator_.__proto__||Object.getPrototypeOf(_IdeNavigator_)).call(this,props));return _this.handleClick=_this.handleClick.bind(_this),_this}return _inherits(_IdeNavigator_,_React$Component),_createClass(_IdeNavigator_,[{key:"transformData",value:function(data){var transformedData={};return data&&data.children&&Object.keys(data.children).map(function(itemsPerScope){transformedData[data.children[itemsPerScope].name]=transformedData[data.children[itemsPerScope].name]||[],data.children[itemsPerScope].children&&data.children[itemsPerScope].children.map(function(scopedItem){transformedData[data.children[itemsPerScope].name].push({id:scopedItem.id,name:scopedItem.name})})}),transformedData}},{key:"handleClick",value:function(e){var recordId=e.target.id?e.target.id:e.target.parentNode.id;this.props.postToggle({id:recordId})}},{key:"render",value:function(){var _this2=this,data=this.transformData(this.props.data),slideNavMenus=[];return Object.keys(data).map(function(scopeKey){var navMenuItems=[];data[scopeKey]&&data[scopeKey].map(function(navMenuItem){navMenuItems.push(React.createElement(SideNavMenuItem,{key:navMenuItem.id,id:navMenuItem.id,onClick:_this2.handleClick,href:"javascript:void(0)"},navMenuItem.name))}),slideNavMenus.push(React.createElement(SideNavMenu,{title:scopeKey},navMenuItems))}),React.createElement("div",null,React.createElement(SideNav,{isFixedNav:!0,expanded:!0,isChildOfHeader:!1,"aria-label":"Side navigation"},slideNavMenus))}}]),_IdeNavigator_}(React.Component),_export("IdeNavigator",IdeNavigator=function(props){return _IdeNavigator_}),_export("IdeNavigator",IdeNavigator),_export("default",IdeNavigator),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IdeProps.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewComponentProp/Definition.js","client/script/mmf/DesignerConstants.js","component/studio/IdeStateMapper/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Edit20,Search20,Close32,GraphQLDataUtil,ErrorBoundary,NewComponentProp,DESIGNER_CONST,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeProps_,IdeProps,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewComponentPropDefinitionJs){NewComponentProp=_componentMmfNewComponentPropDefinitionJs.NewComponentProp},function(_clientScriptMmfDesignerConstantsJs){DESIGNER_CONST=_clientScriptMmfDesignerConstantsJs.DESIGNER_CONST},function(_componentStudioIdeStateMapperStyleCssCss){}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeProps_=function(_React$Component){function _IdeProps_(props){_classCallCheck(this,_IdeProps_);var _this=_possibleConstructorReturn(this,(_IdeProps_.__proto__||Object.getPrototypeOf(_IdeProps_)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],reload:!1},_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.state.showPreview=!1,_this.state.fileId=_this.props.compDetails.file_id,_this.state.fileName=_this.props.compDetails.fileName,_this.state.rowInfo=null,$ele.registerElement("NewComponentProp","mmf","React"),_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_IdeProps_,_React$Component),_createClass(_IdeProps_,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_props"==this.props.previewTarget&&(this.createRows(),this.setState({showPreview:!0,reload:!this.state.reload})),prevProps.reload==this.props.reload&&prevProps.compDetails.file_id===this.props.compDetails.file_id||this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var self=this,componentId=this.state.fileId?this.state.fileId:"";GraphQLDataUtil().getRecord(DESIGNER_CONST.GET_META_COMPONENT_PROP_BY_ID,{componentId:componentId}).then(function(instances){if(instances&&instances.length>0){for(var initHead=instances[0].node,headers=Object.keys(initHead).map(function(key){return{key:key,header:key}}),rows=[],tabIn=0;tabIn<instances.length;tabIn++){var tableRow=instances[tabIn].node;tableRow.id=tabIn,rows.push(tableRow)}var rowsWithZeroOrder=(rows=rows.sort(function(a,b){return a.Order?b.Order?a.Order-b.Order:-1:b.Order?1:-1})).filter(function(row){return 0==row.Order});rows=rows.filter(function(row){return 0!=row.Order}),rows=rowsWithZeroOrder.concat(rows),self.setState({headers:headers,rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"getComponentToRender",value:function(){var NewCompProp=NewComponentProp();return React.createElement("div",{className:"previewPane"},React.createElement(NewCompProp,{componentId:this.state.fileId,componentName:this.state.fileName,record:this.state.rowInfo}))}},{key:"getPreviewPane",value:function(){var newStateComp=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(newStateComp);return React.createElement("div",null,React.createElement("div",{className:"screenOverlay"}),React.createElement(Close32,{className:"cancelPreview",onClick:this.cancelPreview.bind(this)}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.setState({showPreview:!1})}},{key:"showPreview",value:function(rowData){var rowInfo={};rowData&&rowData.cells&&rowData.cells.length>0&&rowData.cells.forEach(function(cell){var key=cell&&cell.id&&cell.id.split(":")[1];rowInfo[key]=cell.value}),this.setState({showPreview:!0,rowInfo:rowInfo}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"render",value:function(){var _this3=this,recordData=this.state.rowInfo?JSON.stringify(this.state.rowInfo):null,preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_props"},React.createElement("new-component-prop",{record:recordData,component_id:this.state.fileId,component_name:this.state.fileName})):React.createElement("div",null),self=this;return React.createElement("div",{className:"ide-state-mapper"},React.createElement("style",null,'@import url("component/studio/IdeStateMapper/Style.css");'),preview,React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeProps_}(React.Component),_export("IdeProps",IdeProps=function(props){return _IdeProps_}),_export("IdeProps",IdeProps),_export("default",IdeProps),_export("states",states=[{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IdeStateMapper.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewState/Definition.js","client/script/mmf/DesignerConstants.js","component/studio/IdeStateMapper/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Edit20,Search20,Close32,GraphQLDataUtil,ErrorBoundary,NewState,DESIGNER_CONST,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeStateMapper,IdeStateMapper,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewStateDefinitionJs){NewState=_componentMmfNewStateDefinitionJs.NewState},function(_clientScriptMmfDesignerConstantsJs){DESIGNER_CONST=_clientScriptMmfDesignerConstantsJs.DESIGNER_CONST},function(_componentStudioIdeStateMapperStyleCssCss){}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeStateMapper=function(_React$Component){function _IdeStateMapper(props){_classCallCheck(this,_IdeStateMapper);var _this=_possibleConstructorReturn(this,(_IdeStateMapper.__proto__||Object.getPrototypeOf(_IdeStateMapper)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],reload:!1},_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.state.showPreview=!1,_this.state.fileId=_this.props.compDetails.file_id,_this.state.fileName=_this.props.compDetails.fileName,_this.state.rowInfo=null,_this.createRows=_this.createRows.bind(_this),$ele.registerElement("NewState","mmf","React"),_this}return _inherits(_IdeStateMapper,_React$Component),_createClass(_IdeStateMapper,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_state"==this.props.previewTarget&&this.setState({showPreview:!1,reload:!this.state.reload}),prevProps.reload==this.props.reload&&prevProps.compDetails.file_id===this.props.compDetails.file_id||this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var self=this;GraphQLDataUtil().getRecord(DESIGNER_CONST.GET_META_COMPONENT_STATE_BY_ID,{StateComponent:this.state.fileId}).then(function(instances){if(instances&&instances.length>0){for(var initHead=instances[0].node,headers=Object.keys(initHead).map(function(key){return{key:key,header:key}}),rows=[],tabIn=0;tabIn<instances.length;tabIn++){var tableRow=instances[tabIn].node;tableRow.id=tabIn,rows.push(tableRow)}self.setState({headers:headers,rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"getComponentToRender",value:function(){var NewStateComp=NewState();return React.createElement("div",{className:"previewPane"},React.createElement(NewStateComp,{component_id:this.state.fileId,componentName:this.state.fileName,isFromStateMapper:!0,rowInfo:this.state.rowInfo}))}},{key:"getPreviewPane",value:function(){var newStateComp=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(newStateComp);return previewComponent=React.createElement("preview-component",null,React.createElement("new-state",{component_id:this.state.fileId,component_name:this.state.fileName,lite:!0})),React.createElement("div",null,React.createElement("div",{className:"screenOverlay"}),React.createElement(Close32,{className:"cancelPreview",onClick:this.cancelPreview.bind(this)}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.setState({showPreview:!1})}},{key:"showPreview",value:function(rowData){var rowInfo={};rowData&&rowData.cells&&rowData.cells.length>0&&rowData.cells.forEach(function(cell){var key=cell&&cell.id&&cell.id.split(":")[1];rowInfo[key]=cell.value}),this.setState({showPreview:!0,rowInfo:rowInfo}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"clearAll",value:function(){var checked=this.state.checked;this.state.rows.forEach(function(row,index){checked[index]=!!checked[index]&&!checked[index]}),this.setState({checked:checked,selectAll:!1})}},{key:"getCheckedItems",value:function(){var checkedItems=0;return this.state.checked.forEach(function(entry){entry&&checkedItems++}),checkedItems}},{key:"searchTable",value:function(evt){var newRows=[];this.state.rows.map(function(obj){Object.keys(obj).forEach(function(key){obj[key].toUpperCase().includes(evt.currentTarget.value.toUpperCase())&&!newRows.includes(obj)&&newRows.push(obj)})}),this.setState({filteredRows:newRows})}},{key:"batchActionClick",value:function(){}},{key:"render",value:function(){var _this3=this,recordData=(this.getCheckedItems(),this.state.rowInfo?JSON.stringify(this.state.rowInfo):null),preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_state"},React.createElement("new-state",{record:recordData,component_id:this.state.fileId,component_name:this.state.fileName})):React.createElement("div",null),self=this;return React.createElement("div",{className:"ide-state-mapper"},React.createElement("style",null,'@import url("component/studio/IdeStateMapper/Style.css");'),preview,React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeStateMapper}(React.Component),_export("IdeStateMapper",IdeStateMapper=function(props){return _IdeStateMapper}),_export("IdeStateMapper",IdeStateMapper),_export("default",IdeStateMapper),_export("states",states=[{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/IdeValidation.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_IdeValidation,IdeValidation,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_IdeValidation=function(_React$Component){function _IdeValidation(){return _classCallCheck(this,_IdeValidation),_possibleConstructorReturn(this,(_IdeValidation.__proto__||Object.getPrototypeOf(_IdeValidation)).apply(this,arguments))}return _inherits(_IdeValidation,_React$Component),_createClass(_IdeValidation,[{key:"render",value:function(){return React.createElement("div",{className:"ide-validator"},React.createElement("span",null,"IdeValidation goes here..."))}}]),_IdeValidation}(React.Component),_export("IdeValidation",IdeValidation=function(props){return _IdeValidation}),_export("IdeValidation",IdeValidation),_export("default",IdeValidation),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/LayoutCreator.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash","lodash.clonedeep"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,TextInput,Checkbox,cloneDeep,_LayoutCreator_,LayoutCreator,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput,Checkbox=_carbonComponentsReact.Checkbox},function(_lodash){_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_LayoutCreator_=function(_React$Component){function _LayoutCreator_(props){_classCallCheck(this,_LayoutCreator_);var _this=_possibleConstructorReturn(this,(_LayoutCreator_.__proto__||Object.getPrototypeOf(_LayoutCreator_)).call(this,props));return _this.state={Name:"",Code:"",Needs2Clone:!0},_this.saveLayout=_this.saveLayout.bind(_this),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%",width:"100%",textAlign:"left"},_this.modalButtonGroup={marginLeft:"80%",position:"absolute",clear:"both",bottom:"10%"},_this}return _inherits(_LayoutCreator_,_React$Component),_createClass(_LayoutCreator_,[{key:"saveLayout",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var currentLayoutCode,result,activePage,_activePage;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(currentLayoutCode=this.props.activePage.currentLayout||"default",!this.state.Needs2Clone){_context.next=9;break}return _context.next=4,$script.runAtServer("studio.createLayout",{pageId:this.props.active_page_id,Name:this.state.Name,NeedsClone:this.state.Needs2Clone,SourceLayout:currentLayoutCode});case 4:result=_context.sent,activePage=cloneDeep(this.props.activePage),result.slots&&result.widgets?(activePage.layouts=activePage.layouts||{},activePage.layouts.slots=activePage.layouts.slots||{},activePage.layouts.slots[this.state.Name]=result.slots,activePage.layouts.widgets=activePage.layouts.widgets||{},activePage.layouts.widgets[this.state.Name]=result.widgets,activePage.slots=result.slots,activePage.widgets=result.widgets,activePage.currentLayout=this.state.Name,this.props.updateStore({updates:{activePage:activePage}}),this.props.addFlashMessage({title:"Success - ",subtitle:"Layout saved successfully."})):this.props.addErrorMessage({title:"Error - ",subtitle:"Layout did not save."}),_context.next=13;break;case 9:(_activePage=cloneDeep(this.props.activePage)).currentLayout=this.state.Name,this.props.updateStore({updates:{activePage:_activePage}}),this.props.addFlashMessage({title:"Success - ",subtitle:"Layout saved successfully."});case 13:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this;return React.createElement("div",{ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/codemirror.css");'),React.createElement("h4",{style:this.headerStyle},"Create Layout"),React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Layout Name...",onChange:function(e){return _this2.setState({Name:e.target.value})},labelText:"Layout Name",required:"required",value:this.state.Name}),React.createElement(Checkbox,{labelText:"Clone From current layout?",id:"sr-check-bx",onChange:function(value){_this2.setState({Needs2Clone:value})},checked:this.state.Needs2Clone})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this2.saveLayout()}},"Save")))}}]),_LayoutCreator_}(React.Component),_export("LayoutCreator",LayoutCreator=function(props){return _LayoutCreator_}),_export("LayoutCreator",LayoutCreator),_export("default",LayoutCreator),_export("states",states=[{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/LayoutCreator/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash","lodash.clonedeep"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,TextInput,Checkbox,cloneDeep,_LayoutCreator_,LayoutCreator;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput,Checkbox=_carbonComponentsReact.Checkbox},function(_lodash){_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_LayoutCreator_=function(_React$Component){function _LayoutCreator_(props){_classCallCheck(this,_LayoutCreator_);var _this=_possibleConstructorReturn(this,(_LayoutCreator_.__proto__||Object.getPrototypeOf(_LayoutCreator_)).call(this,props));return _this.state={Name:"",Code:"",Needs2Clone:!0},_this.saveLayout=_this.saveLayout.bind(_this),_this.fieldStyle={marginBottom:"2%",width:"30%",clear:"both"},_this.groupParentStyle={display:"block",width:"100%"},_this.groupElementStyle={marginRight:"2%",width:"30%",display:"inline-block",float:"left"},_this.headerStyle={fontWeight:600,fontSize:16,marginBottom:"1%",width:"100%",textAlign:"left"},_this.modalButtonGroup={marginLeft:"80%",position:"absolute",clear:"both",bottom:"10%"},_this}return _inherits(_LayoutCreator_,_React$Component),_createClass(_LayoutCreator_,[{key:"saveLayout",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var currentLayoutCode,result,activePage,_activePage;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(currentLayoutCode=this.props.activePage.currentLayout||"default",!this.state.Needs2Clone){_context.next=9;break}return _context.next=4,$script.runAtServer("studio.createLayout",{pageId:this.props.active_page_id,Name:this.state.Name,NeedsClone:this.state.Needs2Clone,SourceLayout:currentLayoutCode});case 4:result=_context.sent,activePage=cloneDeep(this.props.activePage),result.slots&&result.widgets?(activePage.layouts=activePage.layouts||{},activePage.layouts.slots=activePage.layouts.slots||{},activePage.layouts.slots[this.state.Name]=result.slots,activePage.layouts.widgets=activePage.layouts.widgets||{},activePage.layouts.widgets[this.state.Name]=result.widgets,activePage.slots=result.slots,activePage.widgets=result.widgets,activePage.currentLayout=this.state.Name,this.props.updateStore({updates:{activePage:activePage}}),this.props.addFlashMessage({title:"Success - ",subtitle:"Layout saved successfully."})):this.props.addErrorMessage({title:"Error - ",subtitle:"Layout did not save."}),_context.next=13;break;case 9:(_activePage=cloneDeep(this.props.activePage)).currentLayout=this.state.Name,this.props.updateStore({updates:{activePage:_activePage}}),this.props.addFlashMessage({title:"Success - ",subtitle:"Layout saved successfully."});case 13:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this;return React.createElement("div",{ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/codemirror.css");'),React.createElement("h4",{style:this.headerStyle},"Create Layout"),React.createElement("div",{style:this.groupElementStyle},React.createElement(TextInput,{placeholder:"Enter Layout Name...",onChange:function(e){return _this2.setState({Name:e.target.value})},labelText:"Layout Name",required:"required",value:this.state.Name}),React.createElement(Checkbox,{labelText:"Clone From current layout?",id:"sr-check-bx",onChange:function(value){_this2.setState({Needs2Clone:value})},checked:this.state.Needs2Clone})),React.createElement("div",{style:this.modalButtonGroup},React.createElement(Button,{waves:"light",size:"small",style:{marginLeft:5},onClick:function(e){return _this2.saveLayout()}},"Save")))}}]),_LayoutCreator_}(React.Component),_export("LayoutCreator",LayoutCreator=function(props){return _LayoutCreator_}),_export("LayoutCreator",LayoutCreator)}}}),System.register("component/studio/NewPageProp.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/persist/MMFAPI.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Button,TextInput,_NewPageProp_,NewPageProp,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){_reactMonacoEditor.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewPageProp_=function(_React$Component){function _NewPageProp_(props){_classCallCheck(this,_NewPageProp_);var _this=_possibleConstructorReturn(this,(_NewPageProp_.__proto__||Object.getPrototypeOf(_NewPageProp_)).call(this,props));return _this.state={ComponentId:_this.props.componentId,ComponentName:"Unnamed"==_this.props.componentName?"":_this.props.componentName,Components:{},ComponentNames:[],Name:_this.props.rowInfo&&_this.props.rowInfo.Name,Value:_this.props.rowInfo&&_this.props.rowInfo.Value,file_id:_this.props.rowInfo&&_this.props.rowInfo.uid,componentData:_this.props.rowInfo?_this.props.rowInfo:null},_this.loadComponents=_this.loadComponents.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.componentUpdated=_this.componentUpdated.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this}return _inherits(_NewPageProp_,_React$Component),_createClass(_NewPageProp_,[{key:"componentDidMount",value:function(){-1==this.props.componentId&&this.loadComponents()}},{key:"codeChanged",value:function(newValue,e){var editor=this.state.editor;editor.code=newValue,this.setState({editor:editor})}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponents","{}",function(results){var components={},componentNames=[];results&&(results.forEach(function(componentObj){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;components[componentLabel]=componentId;var component={};component.id=componentId,component.text=componentObj.Name,componentNames.push(component)}),components&&self.setState({Components:components,ComponentNames:componentNames}))})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",Value:"",ComponentId:"",ComponentName:""})}},{key:"saveAsNewData",value:function(){console.log(this.state);var data={Name:this.state.Name,Value:this.state.DefaultValue,PropsComponent:this.state.ComponentId},self=this;fetch("/api/t1/MetaComponentProps",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"saveData",value:function(){var endPoint="/api/t1/MetaComponentProps",method="POST";this.state.file_id&&(endPoint=endPoint+"/"+this.state.file_id,method="PUT");var data={Name:this.state.Name,Value:this.state.DefaultValue,PropsComponent:this.state.ComponentId},self=this;fetch(endPoint,{method:method,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"componentUpdated",value:function(componentValue){this.setState({ComponentName:componentValue,ComponentId:this.state.Components[componentValue]})}},{key:"render",value:function(){var _this2=this,file_id=this.state.file_id||this.state.componentData&&this.state.componentData.uid,uidField=file_id?React.createElement("div",{className:"sr-field-id"},React.createElement(TextInput,{labelText:"uid",required:"required",value:file_id,disabled:"true"})):uidField,componentName=null;return componentName="object"==typeof this.state.ComponentName?this.state.ComponentName.text:this.state.ComponentName,React.createElement("div",null,React.createElement("style",null,"@import url('component/mmf/NewAction/Style.css');"),React.createElement("h4",{className:"sr-action-header"},"Page Props - Form"),React.createElement("div",{className:"sr-action-alias"},React.createElement(TextInput,{labelText:"Component",value:componentName,disabled:!0}),React.createElement(TextInput,{placeholder:"Enter name...",onChange:function(e){return _this2.onChange(e,"Name")},labelText:"Name",required:"required",value:this.state.Name}),React.createElement(TextInput,{placeholder:"Enter value...",onChange:function(e){return _this2.onChange(e,"Value")},labelText:"Value",required:"required",value:this.state.DefaultValue})),React.createElement("div",{className:"sr-action-btns"},React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveAsNewData()}},"Save As"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.resetData()}},"Reset")))}}]),_NewPageProp_}(React.Component),_export("NewPageProp",NewPageProp=function(props){return _NewPageProp_}),_export("NewPageProp",NewPageProp),_export("default",NewPageProp),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/NewPageProp/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/persist/MMFAPI.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MMFAPI,Button,TextInput,_NewPageProp_,NewPageProp;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){_reactMonacoEditor.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput}],execute:function(){_NewPageProp_=function(_React$Component){function _NewPageProp_(props){_classCallCheck(this,_NewPageProp_);var _this=_possibleConstructorReturn(this,(_NewPageProp_.__proto__||Object.getPrototypeOf(_NewPageProp_)).call(this,props));return _this.state={ComponentId:_this.props.componentId,ComponentName:"Unnamed"==_this.props.componentName?"":_this.props.componentName,Components:{},ComponentNames:[],Name:_this.props.rowInfo&&_this.props.rowInfo.Name,Value:_this.props.rowInfo&&_this.props.rowInfo.Value,file_id:_this.props.rowInfo&&_this.props.rowInfo.uid,componentData:_this.props.rowInfo?_this.props.rowInfo:null},_this.loadComponents=_this.loadComponents.bind(_this),_this.onChange=_this.onChange.bind(_this),_this.resetData=_this.resetData.bind(_this),_this.saveAsNewData=_this.saveAsNewData.bind(_this),_this.saveData=_this.saveData.bind(_this),_this.componentUpdated=_this.componentUpdated.bind(_this),_this.codeChanged=_this.codeChanged.bind(_this),_this}return _inherits(_NewPageProp_,_React$Component),_createClass(_NewPageProp_,[{key:"componentDidMount",value:function(){-1==this.props.componentId&&this.loadComponents()}},{key:"codeChanged",value:function(newValue,e){var editor=this.state.editor;editor.code=newValue,this.setState({editor:editor})}},{key:"loadComponents",value:function(){var self=this;MMFAPI().search("MetaComponents","{}",function(results){var components={},componentNames=[];results&&(results.forEach(function(componentObj){var componentLabel=componentObj.Name+"["+componentObj.Scope+"]",componentId=componentObj.uid;components[componentLabel]=componentId;var component={};component.id=componentId,component.text=componentObj.Name,componentNames.push(component)}),components&&self.setState({Components:components,ComponentNames:componentNames}))})}},{key:"onChange",value:function(e,type){var newValue=e&&e.target?e.target.value:"",stateObj={};stateObj[type]=newValue,this.setState(stateObj)}},{key:"resetData",value:function(){this.setState({file_id:"",Name:"",Value:"",ComponentId:"",ComponentName:""})}},{key:"saveAsNewData",value:function(){console.log(this.state);var data={Name:this.state.Name,Value:this.state.DefaultValue,PropsComponent:this.state.ComponentId},self=this;fetch("/api/t1/MetaComponentProps",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"saveData",value:function(){var endPoint="/api/t1/MetaComponentProps",method="POST";this.state.file_id&&(endPoint=endPoint+"/"+this.state.file_id,method="PUT");var data={Name:this.state.Name,Value:this.state.DefaultValue,PropsComponent:this.state.ComponentId},self=this;fetch(endPoint,{method:method,headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(responseJSON){self.setState({file_id:responseJSON.uid})})}},{key:"componentUpdated",value:function(componentValue){this.setState({ComponentName:componentValue,ComponentId:this.state.Components[componentValue]})}},{key:"render",value:function(){var _this2=this,file_id=this.state.file_id||this.state.componentData&&this.state.componentData.uid,uidField=file_id?React.createElement("div",{className:"sr-field-id"},React.createElement(TextInput,{labelText:"uid",required:"required",value:file_id,disabled:"true"})):uidField,componentName=null;return componentName="object"==typeof this.state.ComponentName?this.state.ComponentName.text:this.state.ComponentName,React.createElement("div",null,React.createElement("style",null,"@import url('component/mmf/NewAction/Style.css');"),React.createElement("h4",{className:"sr-action-header"},"Page Props - Form"),React.createElement("div",{className:"sr-action-alias"},React.createElement(TextInput,{labelText:"Component",value:componentName,disabled:!0}),React.createElement(TextInput,{placeholder:"Enter name...",onChange:function(e){return _this2.onChange(e,"Name")},labelText:"Name",required:"required",value:this.state.Name}),React.createElement(TextInput,{placeholder:"Enter value...",onChange:function(e){return _this2.onChange(e,"Value")},labelText:"Value",required:"required",value:this.state.DefaultValue})),React.createElement("div",{className:"sr-action-btns"},React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveData()}},"Save"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.saveAsNewData()}},"Save As"),React.createElement(Button,{waves:"light",onClick:function(e){return _this2.resetData()}},"Reset")))}}]),_NewPageProp_}(React.Component),_export("NewPageProp",NewPageProp=function(props){return _NewPageProp_}),_export("NewPageProp",NewPageProp)}}}),System.register("component/studio/OverlayLayout.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_OverlayLayout_,OverlayLayout,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashClonedeep){_lodashClonedeep.default}],execute:function(){_OverlayLayout_=function(_React$Component){function _OverlayLayout_(props){_classCallCheck(this,_OverlayLayout_);var _this=_possibleConstructorReturn(this,(_OverlayLayout_.__proto__||Object.getPrototypeOf(_OverlayLayout_)).call(this,props));return _this.state={sideBarWidth:"20%",navBarWidth:"2%"},_this}return _inherits(_OverlayLayout_,_React$Component),_createClass(_OverlayLayout_,[{key:"render",value:function(){var _this2=this,navPage=this.props.widgetProps?this.props.widgetProps.NavPage:"",contentPage=this.props.widgetProps?this.props.widgetProps.ContentPage:"",sideBarPage=this.props.widgetProps?this.props.widgetProps.SideBarPage:"";return React.createElement("div",{style:{width:"100%",height:"inherit",display:"inline-flex"}},React.createElement("page-designer-preview",{uid:"1",onClick:function(e){_this2.setState({navBarWidth:"2%"==_this2.state.navBarWidth?"20%":"2%"})},style:{zIndex:2,position:"absolute",left:0,width:this.state.navBarWidth},widgetid:this.props.widgetid,pageid:this.props.pageid,previewpageid:navPage,pagename:"NavPage",responsive:"true"}),React.createElement("page-designer-preview",{uid:"2",style:{position:"absolute",left:20,width:"100vw"},widgetid:this.props.widgetid,pageid:this.props.pageid,previewpageid:contentPage,pagename:"ContentPage",responsive:"true"}),React.createElement("page-designer-preview",{uid:"3",onClick:function(e){_this2.setState({sideBarWidth:"20%"==_this2.state.sideBarWidth?"10%":"20%"})},style:{zIndex:3,position:"absolute",right:0,width:this.state.sideBarWidth},widgetid:this.props.widgetid,pageid:this.props.pageid,previewpageid:sideBarPage,pagename:"SideBarPage",responsive:"true"}))}}]),_OverlayLayout_}(React.Component),_export("OverlayLayout",OverlayLayout=function(props){return _OverlayLayout_}),_export("OverlayLayout",OverlayLayout),_export("default",OverlayLayout),_export("states",states=[{KeyName:"widgets2Resize",AccessPath:"widgets2Resize",DefaultValue:'{"widgets2Resize": {}}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/OverlayLayout/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_OverlayLayout_,OverlayLayout;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashClonedeep){_lodashClonedeep.default}],execute:function(){_OverlayLayout_=function(_React$Component){function _OverlayLayout_(props){_classCallCheck(this,_OverlayLayout_);var _this=_possibleConstructorReturn(this,(_OverlayLayout_.__proto__||Object.getPrototypeOf(_OverlayLayout_)).call(this,props));return _this.state={sideBarWidth:"20%",navBarWidth:"2%"},_this}return _inherits(_OverlayLayout_,_React$Component),_createClass(_OverlayLayout_,[{key:"render",value:function(){var _this2=this,navPage=this.props.widgetProps?this.props.widgetProps.NavPage:"",contentPage=this.props.widgetProps?this.props.widgetProps.ContentPage:"",sideBarPage=this.props.widgetProps?this.props.widgetProps.SideBarPage:"";return React.createElement("div",{style:{width:"100%",height:"inherit",display:"inline-flex"}},React.createElement("page-designer-preview",{uid:"1",onClick:function(e){_this2.setState({navBarWidth:"2%"==_this2.state.navBarWidth?"20%":"2%"})},style:{zIndex:2,position:"absolute",left:0,width:this.state.navBarWidth},widgetid:this.props.widgetid,pageid:this.props.pageid,previewpageid:navPage,pagename:"NavPage",responsive:"true"}),React.createElement("page-designer-preview",{uid:"2",style:{position:"absolute",left:20,width:"100vw"},widgetid:this.props.widgetid,pageid:this.props.pageid,previewpageid:contentPage,pagename:"ContentPage",responsive:"true"}),React.createElement("page-designer-preview",{uid:"3",onClick:function(e){_this2.setState({sideBarWidth:"20%"==_this2.state.sideBarWidth?"10%":"20%"})},style:{zIndex:3,position:"absolute",right:0,width:this.state.sideBarWidth},widgetid:this.props.widgetid,pageid:this.props.pageid,previewpageid:sideBarPage,pagename:"SideBarPage",responsive:"true"}))}}]),_OverlayLayout_}(React.Component),_export("OverlayLayout",OverlayLayout=function(props){return _OverlayLayout_}),_export("OverlayLayout",OverlayLayout)}}}),System.register("component/studio/PageDesigner.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","jquery","jquery-ui/ui/data","jquery-ui/ui/disable-selection","jquery-ui/ui/focusable","jquery-ui/ui/form","jquery-ui/ui/ie","jquery-ui/ui/keycode","jquery-ui/ui/labels","jquery-ui/ui/jquery-1-7","jquery-ui/ui/plugin","jquery-ui/ui/safe-active-element","jquery-ui/ui/safe-blur","jquery-ui/ui/scroll-parent","jquery-ui/ui/tabbable","jquery-ui/ui/unique-id","jquery-ui/ui/version","jquery-ui/ui/widget","jquery-ui/ui/widgets/mouse","jquery-ui/ui/widgets/draggable","jquery-ui/ui/widgets/droppable","jquery-ui/ui/widgets/resizable","lodash","lodash.clonedeep","lodash.debounce","lodash.get","@carbon/icons-react/lib/menu/16","@carbon/icons-react/lib/close/20","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/maximize/16","@carbon/icons-react/lib/minimize/16","@carbon/icons-react/lib/caret--left/32","@carbon/icons-react/lib/caret--right/32","@carbon/icons-react/lib/caret--left/20","thirdpartylib/gridstack/corelib.js","client/script/studio/PageDesignerUtil.js","component/studio/PageDesignerWidget/Definition.js","client/script/mmf/GraphQLDataUtil.js","carbon-components-react","carbon-components-react/lib/components/UIShell"],function(_export,_context12){"use strict";var _regeneratorRuntime,_extends,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,$,_,cloneDeep,debounce,Close20,Minimize16,ChevronLeft,ChevronRight,ArrowLeft,gridStackFn,gridStackUIFn,PageDesignerUtil,PageDesignerWidget,GraphQLDataUtil,Tab,Tabs,Tile,Accordion,AccordionItem,HeaderMenu,HeaderMenuItem,_PageDesigner_,PageDesigner,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_jquery){$=_jquery.default},function(_jqueryUiUiData){},function(_jqueryUiUiDisableSelection){},function(_jqueryUiUiFocusable){},function(_jqueryUiUiForm){},function(_jqueryUiUiIe){},function(_jqueryUiUiKeycode){},function(_jqueryUiUiLabels){},function(_jqueryUiUiJquery){},function(_jqueryUiUiPlugin){},function(_jqueryUiUiSafeActiveElement){},function(_jqueryUiUiSafeBlur){},function(_jqueryUiUiScrollParent){},function(_jqueryUiUiTabbable){},function(_jqueryUiUiUniqueId){},function(_jqueryUiUiVersion){},function(_jqueryUiUiWidget){},function(_jqueryUiUiWidgetsMouse){},function(_jqueryUiUiWidgetsDraggable){},function(_jqueryUiUiWidgetsDroppable){},function(_jqueryUiUiWidgetsResizable){},function(_lodash){_=_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_lodashGet){_lodashGet.default},function(_carbonIconsReactLibMenu){_carbonIconsReactLibMenu.default},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibAddAlt){_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibMaximize){_carbonIconsReactLibMaximize.default},function(_carbonIconsReactLibMinimize){Minimize16=_carbonIconsReactLibMinimize.default},function(_carbonIconsReactLibCaretLeft){ChevronLeft=_carbonIconsReactLibCaretLeft.default},function(_carbonIconsReactLibCaretRight){ChevronRight=_carbonIconsReactLibCaretRight.default},function(_carbonIconsReactLibCaretLeft2){ArrowLeft=_carbonIconsReactLibCaretLeft2.default},function(_thirdpartylibGridstackCorelibJs){gridStackFn=_thirdpartylibGridstackCorelibJs.gridStackFn,gridStackUIFn=_thirdpartylibGridstackCorelibJs.gridStackUIFn},function(_clientScriptStudioPageDesignerUtilJs){PageDesignerUtil=_clientScriptStudioPageDesignerUtilJs.PageDesignerUtil},function(_componentStudioPageDesignerWidgetDefinitionJs){PageDesignerWidget=_componentStudioPageDesignerWidgetDefinitionJs.PageDesignerWidget},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_carbonComponentsReact){_carbonComponentsReact.Button,_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Tab=_carbonComponentsReact.Tab,Tabs=_carbonComponentsReact.Tabs,_carbonComponentsReact.OverflowMenu,_carbonComponentsReact.OverflowMenuItem,Tile=_carbonComponentsReact.Tile,Accordion=_carbonComponentsReact.Accordion,AccordionItem=_carbonComponentsReact.AccordionItem},function(_carbonComponentsReactLibComponentsUIShell){HeaderMenu=_carbonComponentsReactLibComponentsUIShell.HeaderMenu,HeaderMenuItem=_carbonComponentsReactLibComponentsUIShell.HeaderMenuItem}],execute:function(){_PageDesigner_=function(_React$Component){function _PageDesigner_(props){_classCallCheck(this,_PageDesigner_);var _this=_possibleConstructorReturn(this,(_PageDesigner_.__proto__||Object.getPrototypeOf(_PageDesigner_)).call(this,props));return _this.designerUtil=new PageDesignerUtil,_this.device={smartphone:{width:"360",height:"510"},tablet:{width:"700",height:"900"},laptop:{width:"1366",height:"750"}},_this.state={widgetChanged:0,activeAccordion:0,paletteLoaded:_this.props.palettes&&Object.keys(_this.props.palettes).length>0,isSideBarOpen:!0,accordionLevel:"page",active_widget_id:"",showCreateLayout:!1,reload:!1},_this.initializing=!1,_this.getGridData=_this.getGridData.bind(_this),_this.refreshView=_this.refreshView.bind(_this),_this.updateEmulator=_this.updateEmulator.bind(_this),_this.isSlotUpdated=_this.isSlotUpdated.bind(_this),_this.updateDevice=_this.updateDevice.bind(_this),_this.saveSlides=_this.saveSlides.bind(_this),_this.autoPopulate=_this.autoPopulate.bind(_this),_this.saveWidget=_this.saveWidget.bind(_this),_this.saveWidgetRenderType=_this.saveWidgetRenderType.bind(_this),_this.initializeLayout=_this.initializeLayout.bind(_this),_this.initializeEvents=_this.initializeEvents.bind(_this),_this.handleNewFile=_this.handleNewFile.bind(_this),_this.makePageActive=_this.makePageActive.bind(_this),_this.removePage=_this.removePage.bind(_this),_this.clonePage=_this.clonePage.bind(_this),_this.createLayout=_this.createLayout.bind(_this),_this.deleteLayout=_this.deleteLayout.bind(_this),_this.deletePage=_this.deletePage.bind(_this),_this.hostEl=_this.rootEl=void 0,_this.toggleMode=_this.toggleMode.bind(_this),_this.activePage=cloneDeep(_this.props.activePage),_this.resizeSideBarGrid=_this.resizeSideBarGrid.bind(_this),_this.isSideBarResizable=!1,_this.resizeSideBarGridDebounceFn=debounce(function(){_this.resizeSideBarGrid()}),_this.saveWidgetDebounced=debounce(function(){_this.saveWidget(_this.props.active_widget_id,!0)},20,{trailing:!0,leading:!0}),_this.saveWidgetRenderTypeDebounce=debounce(function(){_this.saveWidgetRenderType(_this.props.active_widget_id,!0)},20,{trailing:!0,leading:!0}),_this.pageSaveDebounced=debounce(function(){_this.props.updateStore({updates:{activePage:_this.activePage}})},20,{trailing:!0,leading:!0}),_this.palettes&&0!=Object.keys(_this.palettes).length||$script.runscript("mmf.getPalettes",{}).then(function(palettesData){_this.palettes=palettesData,_this.setState({paletteLoaded:!0})}),$ele.registerElement("NewWidgetAction","mmf","React"),$ele.registerElement("LayoutCreator","studio","React"),window.addEventListener("resize",self.resizeSideBarGridDebounceFn),$script.runAtServer("mmf.getSchemaData",{}).then(function(schemaData){return _this.props.updateStore({updates:{schema:schemaData}})}),_this.props.updateStore({updates:{is_design_time:!0}}),_this}return _inherits(_PageDesigner_,_React$Component),_createClass(_PageDesigner_,[{key:"refreshView",value:function(){var _this2=this,self=this;this.options={width:96,column:96,float:!0,removable:".trash",verticalMargin:10,cellHeight:20,removable:!0,removeTimeout:100,acceptWidgets:".grid-stack-item",resizable:{handles:"e, se, s, sw, w"},draggable:{handle:".grid-stack-item-content",appendTo:$(self.refs.canvas)}},this.rootEl=this.refs.gridarea,$(".gridContent",this.props.shadow)&&$(".gridContent",this.props.shadow).scroll(function(){return _this2.props.updateStore({updates:{scrollfired:!_this2.props.scrollfired}})}),$(".gridCanvas",this.props.shadow)&&$(".gridCanvas",this.props.shadow).each(function(){$(this).data("gridstack");$(this).data("gridstack",null)}),$(".gridPalette",this.props.shadow)&&$(".gridPalette",this.props.shadow).each(function(){$(this).data("gridstack");$(this).data("gridstack",null)}),gridStackFn($,window,this.refs.gridarea).then(function(gridStackUIObj){if(gridStackUIFn($,gridStackUIObj,window),$(".gridCanvas",_this2.props.shadow).gridstack(_this2.options,!0),$(".gridPalette",_this2.props.shadow).gridstack(_this2.options,!0),_this2.initializeLayout(_this2.props.shadow),_this2.initializeEvents(_this2.rootEl,_this2.props.shadow,self),_this2.props.as_widget&&_this2.props.preview||!_this2.props.pages||0==Object.keys(_this2.props.pages).length){var defaultPage=_this2.designerUtil.getDefaultPage(),pages={};pages[defaultPage.page_id]=defaultPage,_this2.props.updateStore({updates:{active_page_id:defaultPage.page_id,pages:pages}})}})}},{key:"componentDidMount",value:function(){this.state.paletteLoaded&&this.refreshView()}},{key:"resizeSideBarGrid",value:function(){var self=this,parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".sidebar",this.props.shadow).length>0?$(".sidebar",this.props.shadow):$(".sidebar",parentNode),topLevelEl=$(".sr-page-topCotainer",this.props.shadow).length>0?$(".sr-page-topCotainer",this.props.shadow):$(".sr-page-topCotainer",parentNode),contentAreaEl=$(".sr-page-editorial",this.props.shadow).length>0?$(".sr-page-editorial",this.props.shadow):$(".sr-page-editorial",parentNode);if(searchPane.length>0){var searchPaneRect=searchPane[0].getBoundingClientRect(),contentAreaWidth=topLevelEl[0].getBoundingClientRect().width-searchPaneRect.width-5;setTimeout(function(){contentAreaEl.width(contentAreaWidth),window.removeEventListener("resize",self.resizeSideBarGridDebounceFn),window.addEventListener("resize",self.resizeSideBarGridDebounceFn)})}}},{key:"initializeEvents",value:function(rootEl,hostEl,self){var _ref2,_ref3;$(".gridCanvas",hostEl).off("change",function(){}),$(".gridCanvas",hostEl).on("change",function(event,items){var _ref,_this3=this,isPreviewItem=!!(items&&items.length>0&&items[0]&&items[0].el)&&!!$(items[0].el).find("widget-container").attr("preview");if(!self.initializing&&!isPreviewItem){var currentItemsBySlotId=self.getGridData(),activePage=self.props.activePage,previousItemsBySlotId=self.props.activePage.slots;activePage.is_open?(Object.keys(currentItemsBySlotId).map((_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(currentItemSlotId){var curSlot,prevSlot,slotData;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(curSlot=currentItemsBySlotId[currentItemSlotId],prevSlot=previousItemsBySlotId?previousItemsBySlotId[currentItemSlotId]:null,!curSlot||curSlot.isPreview||!prevSlot||!self.isSlotUpdated(curSlot,prevSlot)){_context.next=8;break}return(slotData=_extends({},currentItemsBySlotId[currentItemSlotId])).uid=currentItemSlotId,slotData.Layout=self.props.activePage.currentLayout?self.props.activePage.currentLayout:"default",_context.next=8,$qry.run("pd.saveMetaSlideSlot",slotData);case 8:case"end":return _context.stop()}},_callee,_this3)})),function(_x){return _ref.apply(this,arguments)})),activePage.slots=currentItemsBySlotId,self.activePage=activePage,self.pageSaveDebounced()):console.log("activePage not opened!")}}),$(".sidebar .grid-stack-item",hostEl).draggable({helper:"clone",revert:"invalid",handle:$(".grid-stack-item-content",hostEl),scroll:!0,appendTo:$(rootEl),start:function(event,ui){var eleData=$(this).data().element;($(this).addClass("draggingWidget"),eleData&&eleData.tag)&&$(this).find(".grid-stack-item-content").html('<widget-container style="height: 100%;" shadow="true" pageid='+self.props.active_page_id+" componentid="+eleData.componentid+" tag="+eleData.tag+'\n                            class="widgetContainer" pagesuffix=""></widget-container>')},stop:function(event,ui){$(this).removeClass("draggingWidget");var title=$(this).find(".grid-stack-item-content").data().title;$(this).attr("widgetid",""),$(this).find(".grid-stack-item-content").html(title)}}),$(".gridCanvas",hostEl).off("added",function(){}),$(".gridCanvas",hostEl).on("added",(_ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(event,items){var activePage,activePageWidgets,activePageSlots,activePageLayouts,i,eleData,el,grid,defaultWidth,defaultHeight,maxWidth,maxHeight,componentId,slotData,_slideRes,slotId,widgetPropsRes,widgetId,widgetContainerEl,currentLayout;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(activePage=cloneDeep(self.props.activePage),activePageWidgets=activePage.widgets||{},activePageSlots=activePage.slots||{},activePageLayouts=activePage.layouts||{},0!=self.grid_added){_context2.next=61;break}i=0;case 6:if(!(i<items.length)){_context2.next=59;break}if(!(eleData=items[i].el.data("element"))||!eleData.preview){_context2.next=10;break}return _context2.abrupt("continue",56);case 10:if(!eleData||!eleData.tag){_context2.next=53;break}return el=items[i].el,grid=$(this).data("gridstack"),defaultWidth=items[i].el.data("element").defaultWidth,defaultHeight=items[i].el.data("element").defaultHeight,maxWidth=items[i].el.data("element").maxWidth,maxHeight=items[i].el.data("element").maxHeight,componentId=items[i].el.data("element").componentid,(slotData={}).xposition=el.data("gsX")||0,slotData.yposition=el.data("gsY")||0,slotData.height=el.data("gsHeight")||0,slotData.width=el.data("gsWidth")?el.data("gsWidth"):0,slotData.minwidth=0,slotData.maxwidth=96,slotData.minheight=0,slotData.maxheight=40,slotData.resize=0,slotData.move=0,slotData.Layout=self.props.activePage.currentLayout?self.props.activePage.currentLayout:"default",slotData.Slide=self.props.active_page_id,_context2.next=33,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideSlot",slotData);case 33:return _slideRes=_context2.sent,slotId=_slideRes.uid,activePageSlots[_slideRes.uid]=slotData,_context2.next=38,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideSlotWidget",{Slot:slotId,Component:componentId});case 38:return widgetPropsRes=_context2.sent,widgetId=widgetPropsRes.uid,activePageWidgets[widgetId]={id:widgetId,props:items[i].el.data("element").props,Component:componentId,name:items[i].el.data("element").name},slotData.uid=slotId,slotData.Widget=widgetId,_context2.next=45,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideSlot",slotData);case 45:el.attr("slotid",slotId),el.attr("widgetid",widgetId),el.data("widgetprops",eleData.props),(widgetContainerEl=el.find("widget-container"))&&(widgetContainerEl.attr("slotid",slotId),widgetContainerEl.attr("widgetid",widgetId),widgetContainerEl.data("widgetprops",eleData.props)),grid.update(el,slotData.xposition,slotData.yposition,defaultWidth,defaultHeight),maxWidth&&grid.maxWidth(el,maxWidth),maxHeight&&grid.maxHeight(el,maxHeight);case 53:currentLayout=self.props.currentLayout?self.props.currentLayout:"default",activePageLayouts[currentLayout]={slots:activePageSlots,widgets:activePageWidgets},self.props.updateStore({updates:{activePage:activePage}});case 56:i++,_context2.next=6;break;case 59:_context2.next=62;break;case 61:self.grid_added=self.grid_added-items.length;case 62:case"end":return _context2.stop()}},_callee2,this)})),function(_x2,_x3){return _ref2.apply(this,arguments)})),$(".grid-stack",hostEl).off("removed",function(){}),$(".grid-stack",hostEl).on("removed",(_ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(event,items){var widgetContainerEl,slotId;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(0!=self.grid_removed){_context3.next=14;break}if($(this).data("gridstack"),widgetContainerEl=items&&items[0]&&items[0].el.find("widget-container"),slotId=widgetContainerEl?widgetContainerEl.attr("slotid"):$(event.currentTarget).attr("slotid"),widgetContainerEl?widgetContainerEl.attr("widgetid"):$(event.currentTarget).attr("widgetid"),!slotId){_context3.next=11;break}return _context3.next=8,self.deleteSlideSlot(slotId);case 8:self.props.addFlashMessage({title:"Success - ",subtitle:"Widget removed successfully!"}),_context3.next=12;break;case 11:!self.initializing&&self.props.addErrorMessage({title:"Error - ",subtitle:"Invalid operation. Please contact system administrator."});case 12:_context3.next=16;break;case 14:items&&items.map(function(item){$(item.el).remove()}),self.grid_removed=self.grid_removed-items.length;case 16:case"end":return _context3.stop()}},_callee3,this)})),function(_x4,_x5){return _ref3.apply(this,arguments)}))}},{key:"isSlotUpdated",value:function(currentSlot,previousSlot){return currentSlot.xposition!=previousSlot.xposition||currentSlot.yposition!=previousSlot.yposition||currentSlot.height!=previousSlot.height||currentSlot.width!=previousSlot.width||currentSlot.minwidth!=previousSlot.minwidth||currentSlot.minheight!=previousSlot.minheight||currentSlot.maxwidth!=previousSlot.maxwidth||currentSlot.maxheight!=previousSlot.maxheight}},{key:"initializeLayout",value:function(hostEl,pageData){var _this4=this,self=this,grid=void 0;if(hostEl){$(".gridCanvas",hostEl).each(_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(grid=$(this).data("gridstack")){_context4.next=3;break}return _context4.abrupt("return");case 3:self.initializing=!0,grid.batchUpdate(),self.grid_removed=grid.container&&grid.container.length>0?grid.container.find(".grid-stack-item").length:0;case 6:case"end":return _context4.stop()}},_callee4,this)}))),self.grid_removed>0&&grid.removeAll();var activePage=pageData||(self.props.activePage||{});activePage.slots&&_.each(Object.keys(activePage.slots),function(slotId){var slot=activePage.slots[slotId],widgetId=slot.Widget?slot.Widget:slot.widget&&slot.widget.widgetid?slot.widget.widgetid:"",widgetProps=activePage.widgets[widgetId];if(widgetProps&&widgetProps.name){var name=widgetProps.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),eleData=Object.assign({tag:name,widgetid:widgetId,componentid:widgetProps.Component},widgetProps);$(_this4).attr("slotid",slotId);var activeItemContentEl=grid.$el&&grid.$el.find("#"+widgetId+".grid-stack-item-content");if(!activeItemContentEl&&grid&&grid.container&&grid.container.length>0&&(activeItemContentEl=$(grid.container[0]).find("#"+widgetId+".grid-stack-item-content")),activeItemContentEl&&0!=activeItemContentEl.length){var gridStackItemEl=activeItemContentEl.parent();grid.update(gridStackItemEl,slot.xposition,slot.yposition,slot.width,slot.height)}else{var widgetContainerEl=$("<div>\n                                <div id="+widgetId+' class="grid-stack-item-content">\n                                    <widget-container style="height: 100%;" shadow="true" pageid='+self.props.active_page_id+" tag="+eleData.tag+" \n                                                widgetid="+eleData.widgetid+" componentid="+eleData.componentid+" \n                                                slotid="+slotId+' class="widgetContainer" pagesuffix="">\n                                    </widget-container>\n                                </div>\n                            <div/>');widgetContainerEl.find("widget-container").data("widgetprops",eleData),self.grid_added=self.grid_added?self.grid_added+1:1,grid.addWidget(widgetContainerEl,slot.xposition,slot.yposition,slot.width,slot.height,!1,0,96,0,40)}}},this),grid.commit(),setTimeout(function(){if(self.initializing=!1,!self.isSideBarResizable){var parentNode=self.props.shadow&&self.props.shadow.host&&self.props.shadow.host.parentElement?self.props.shadow.host.parentElement:null,sidebarPane=$(".sidebar",self.props.shadow).length>0?$(".sidebar",self.props.shadow):$(".sidebar",parentNode);if(sidebarPane&&sidebarPane.length>0){sidebarPane[0].addEventListener("resize",self.resizeSideBarGridDebounceFn),new MutationObserver(function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}}).observe(sidebarPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]}),self.isSideBarResizable=!0}}},1e3)}}},{key:"updateEmulator",value:function(deviceValue){this.previewDevice=deviceValue,$(".emulator",this.props.shadow).data("device",deviceValue),$(".emulatorFrameContainer",this.props.shadow).removeClass().addClass("emulatorFrameContainer "+deviceValue),this.props.updateStore({updates:{selectedDevice:deviceValue}})}},{key:"updateDevice",value:function(e){var value=e.target.value;this.updateEmulator(value)}},{key:"clonePage",value:function(){var _this5=this,self=this;$script.runAtServer("studio.clonePage",{pageId:this.props.active_page_id}).then(function(data){self.props.addFlashMessage({title:"Success - ",subtitle:"Page clone is successful. Newly cloned page name is "+data.slideName}),setTimeout(function(){return self.props.updateStore({updates:{reload_slides:!_this5.props.reload_slides}})},1e3)})}},{key:"createLayout",value:function(){this.props.updateStore({updates:{showpreview:!0}}),this.setState({showCreateLayout:!0,reload:!this.state.reload})}},{key:"getGridData",value:function(){var data={},self=this;return _.map($(".grid-stack > .grid-stack-item:visible",this.props.shadow),function(el){(el=$(el)).find(".grid-stack-item-content .widgetContainer")&&el.find(".grid-stack-item-content .widgetContainer").data("widgetprops")&&el.find(".grid-stack-item-content .widgetContainer").data("widgetprops");var node=el.data("_gridstack_node"),slotId=el.find(".grid-stack-item-content .widgetContainer").attr("slotid"),storedSlot=self.props.activePageSlots[slotId];if(storedSlot&&node&&(node.x!=storedSlot.xposition||node.y!=storedSlot.yposition||node.width!=storedSlot.width||node.height!=storedSlot.height)){var activePageWidgets=cloneDeep(self.props.activePageWidgets),changedWidget=activePageWidgets[storedSlot.Widget]||{};changedWidget.reload=!changedWidget.reload,activePageWidgets[storedSlot.Widget]=changedWidget,self.props.updateStore({updates:{activePageWidgets:activePageWidgets}})}data[slotId]={Widget:el.find(".grid-stack-item-content .widgetContainer").attr("widgetid"),Slide:self.props.active_page_id,isPreview:!!el.find(".grid-stack-item-content .widgetContainer").attr("preview")};var defaultCoordinates={xposition:0,yposition:0,width:4,height:4,minwidth:0,minheight:0,maxwidth:96,maxheight:40};data[slotId]=_extends({},data[slotId],defaultCoordinates),isNaN(node.x)||(data[slotId].xposition=parseInt(node.x)),isNaN(node.y)||(data[slotId].yposition=parseInt(node.y)),isNaN(node.width)||(data[slotId].width=isNaN(node.width)?defaultCoordinates.width:parseInt(node.width)),isNaN(node.height)||(data[slotId].height=parseInt(node.height)),isNaN(node.minWidth)||(data[slotId].minwidth=parseInt(node.minWidth)),isNaN(node.minHeight)||(data[slotId].minheight=parseInt(node.minHeight)),isNaN(node.maxWidth)||(data[slotId].maxwidth=parseInt(node.maxWidth)),isNaN(node.maxHeight)||(data[slotId].maxheight=parseInt(node.maxHeight))},this),data}},{key:"toggleMode",value:function(){var gridArea=$(this.refs.gridarea);gridArea&&(gridArea.hasClass("dualmode")?(gridArea.removeClass("dualmode"),gridArea.addClass("fullscreen")):(gridArea.removeClass("fullscreen"),gridArea.addClass("dualmode")))}},{key:"componentDidUpdate",value:function(prevProps,prevState){if(prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"designer"==this.props.showpreview_target&&this.setState({showCreateLayout:!1}),prevProps.active_page_id!==this.props.active_page_id)this.initializeLayout(this.rootEl),this.props.activePage.isNew?this.setState({widgetChanged:0,activeAccordion:0,accordionLevel:"page"}):this.setState({widgetChanged:1,activeAccordion:0,accordionLevel:"page"});else if(prevProps.activePage.currentLayout!=this.props.activePage.currentLayout){var prevLayout=prevProps.activePage.currentLayout,currentLayout=this.props.activePage.currentLayout;if(prevLayout&&"default"!=prevLayout||currentLayout&&"default"!=currentLayout){var activePage=cloneDeep(this.props.activePage);activePage.layouts&&activePage.layouts.slots&&(activePage.slots=activePage.layouts.slots[this.props.activePage.currentLayout],activePage.widgets=activePage.layouts.widgets[this.props.activePage.currentLayout],this.initializeLayout(this.props.shadow,activePage),this.props.updateStore({updates:{activePage:activePage}}))}else;}if(prevProps.active_list_item!=this.props.active_list_item){var widgetId=this.props.active_list_item.split("@@")[0];this.props.updateStore({updates:{active_widget_id:widgetId}}),this.setState({accordionLevel:"widget",activeAccordion:2})}else prevState.paletteLoaded!=this.state.paletteLoaded&&this.state.paletteLoaded&&this.refreshView();prevProps.active_widget_id!=this.props.active_widget_id&&(this.props.active_widget_id&&-1!=this.props.active_widget_id?this.setState({widgetChanged:1,activeAccordion:1}):this.setState({widgetChanged:0}));var widgets2Delete=cloneDeep(this.props.widgets2Delete);if(widgets2Delete&&widgets2Delete.length>0){var gridCanvasEl=$(".gridCanvas",this.props.shadow);try{widgets2Delete.map(function(widgetId){gridCanvasEl&&gridCanvasEl.each(function(){var grid=$(this).data("gridstack");if(grid){var widgetContainerEl=gridCanvasEl.find(".grid-stack-item-content>widget-container[widgetid="+widgetId+"]");widgetContainerEl&&1==widgetContainerEl.length&&widgetContainerEl.parent()&&1==widgetContainerEl.parent().length&&widgetContainerEl.parent().parent()&&1==widgetContainerEl.parent().parent().length&&grid.removeWidget(widgetContainerEl.parent().parent())}})})}catch(err){this.props.addErrorMessage({title:"Error - ",subtitle:"Something went wrong, please contact your administrator."})}this.props.updateStore({updates:{widgets2Delete:[]}})}this.props.active_widget_id&&prevProps.active_widget_id==this.props.active_widget_id&&prevProps.activeWidget&&this.props.activeWidget&&(_.isEqual(prevProps.activeWidget.props,this.props.activeWidget.props)||this.saveWidgetDebounced(),prevProps.activeWidget.Component,this.props.activeWidget.Component)}},{key:"makePageActive",value:function(inputPage){if(inputPage&&(inputPage.id||inputPage.page_id)){var pageId=inputPage.id||inputPage.page_id;this.props.updateStore({updates:{active_page_id:pageId,active_widget_id:""}})}}},{key:"removePage",value:function(page){var pages=this.props.pages,pageId=(Object.keys(pages).length,page.page_id||page.id);if(pageId){delete pages[pageId];var tobeActiveId=null;pageId==this.props.active_page_id&&(tobeActiveId=Object.keys(pages)[0]);var payload={pages:pages};tobeActiveId&&(payload.active_page_id=tobeActiveId,payload.active_widget_id=""),this.initializeLayout(this.rootEl),this.props.updateStore({updates:payload})}}},{key:"handleNewFile",value:function(e){var pageType=e.target.value||e.currentTarget&&e.currentTarget.attributes&&e.currentTarget.attributes.value&&e.currentTarget.attributes.value.value||"",newPage=this.designerUtil.getDefaultPage();newPage.pageType=pageType;var pages=this.props.pages||{};pages[newPage.page_id]=newPage,this.initializeLayout(this.rootEl),this.props.updateStore({updates:{active_page_id:newPage.page_id,pages:pages}})}},{key:"autoPopulate",value:function(){}},{key:"saveSlides",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(){var activePage,pagesInStore,_self,_slideRes2,activePageInStore,widgets,_this6=this;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(activePage=this.props.pages&&this.props.pages[this.props.active_page_id],pagesInStore=this.props.pages,activePage.name&&activePage.scope&&activePage.path&&activePage.model&&activePage.modelscope){_context6.next=8;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Enter mandatory fields in general tab"}),alert("Enter mandatory fields in general tab"),_context6.next=23;break;case 8:if(_self=this,!activePage.isNew){_context6.next=14;break}return _context6.next=12,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlide",{Name:activePage.name,Scope:activePage.scope,Path:activePage.path,Type:activePage.pageType});case 12:(_slideRes2=_context6.sent)&&_slideRes2.uid&&(_self.props.addFlashMessage({title:"Success - ",subtitle:"Page updated!"}),(activePageInStore=(activePageInStore=pagesInStore[this.props.active_page_id])||{}).isNew&&(activePageInStore.isNew=!1,pagesInStore[_slideRes2.uid]=activePageInStore,delete pagesInStore[this.props.active_page_id]),_self.props.updateStore({updates:{active_page_id:_slideRes2.uid,pages:pagesInStore,reload_slides:!0}}));case 14:return _context6.next=16,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelName",Value:activePage.model,PropsSlide:slideRes.uid});case 16:return _context6.sent,_context6.next=19,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelScope",Value:activePage.modelscope,PropsSlide:slideRes.uid});case 19:_context6.sent,slideRes.uid,widgets=activePage.widgets||{},Object.keys(widgets).forEach(function(){var _ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(widKey){return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:_this6.saveWidget(widKey,!1);case 1:case"end":return _context5.stop()}},_callee5,_this6)}));return function(_x6){return _ref6.apply(this,arguments)}}());case 23:case"end":return _context6.stop()}},_callee6,this)}));return function(){return _ref5.apply(this,arguments)}}()},{key:"saveWidgetRenderType",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(widgetId,showNotification){return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(!widgetId||!this.props.activeWidget){_context7.next=4;break}return _context7.next=3,$qry.run("pd.replaceWidgetComponent",{widgetId:widgetId,componentId:this.props.activeWidget.Component});case 3:_context7.sent;case 4:case"end":return _context7.stop()}},_callee7,this)}));return function(_x7,_x8){return _ref7.apply(this,arguments)}}()},{key:"saveWidget",value:function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(widgetId,showNotification){var widget,props,widgetProps,currentWidgetProps,widgetPropsInDB,orderedWidgetPropsInDB,widgetPropIds2Remove,curWidgetPropName,deltaWidgetProps2Update,_this7=this;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(!(widgetId&&this.props.activePage&&this.props.activePage.widgets)){_context8.next=21;break}if(!(widget=this.props.activePage.widgets[widgetId])){_context8.next=21;break}return props=widget.props,widgetProps=[],[],_context8.next=8,$qry._run('query($input:JSON){\n                        MetaWidgetProps{\n                            MetaWidgetPropsFind(filter: $input) @_(get: "edges"){\n                                edges @_(keyBy: "node.name", mapValues:"node"){\n                                    node{\n                                        uid\n                                        name\n                                        value\n                                    }\n                                }\n                            }\n                        }\n                    }',{input:{where:{Widget:widgetId}}},"data.MetaWidgetProps.MetaWidgetPropsFind");case 8:if(currentWidgetProps=_context8.sent,widgetPropsInDB=cloneDeep(currentWidgetProps),orderedWidgetPropsInDB=[],props&&Object.keys(props).forEach(function(key){var widgetProp={},widgetPropInDB={};currentWidgetProps&&Object.keys(currentWidgetProps).indexOf(key)>-1&&delete currentWidgetProps[key],widgetProp.name=key,(props[key]||0==props[key])&&(widgetProp.value="tabs"==key?props[key]:"FieldName"==key?props[key].startsWith("@@[")?props[key]:"@@["+props[key]+"]":props[key],widgetProp.Widget=widgetId,widgetProps.push(widgetProp)),widgetPropInDB.name=key,widgetPropsInDB&&widgetPropsInDB[key]&&(widgetPropsInDB[key].value||0==widgetPropsInDB[key].value)&&(widgetPropInDB.value="tabs"==key?widgetPropsInDB[key].value:"FieldName"==key?widgetPropsInDB[key].value.startsWith("@@[")?widgetPropsInDB[key]:"@@["+widgetPropsInDB[key]+"]":widgetPropsInDB[key].value,widgetPropInDB.Widget=widgetId,orderedWidgetPropsInDB.push(widgetPropInDB))}),!(widgetProps&&widgetProps.length>0)){_context8.next=21;break}if(!(currentWidgetProps&&Object.keys(currentWidgetProps).length>0)){_context8.next=18;break}for(curWidgetPropName in widgetPropIds2Remove=[],currentWidgetProps)currentWidgetProps[curWidgetPropName].uid&&widgetPropIds2Remove.push(currentWidgetProps[curWidgetPropName].uid);return _context8.next=18,$qry._run("mutation($inputData:MetaWidgetPropsDestroyAllInput!) {\n                                MetaWidgetPropsDestroyAll(input:$inputData){\n                                    obj\n                                }\t}",{inputData:{where:{uid:{inq:widgetPropIds2Remove}}}},"data.MetaWidgetPropsDestroyAll.obj");case 18:deltaWidgetProps2Update=[],_.isEqual(widgetProps,orderedWidgetPropsInDB)||widgetProps.map(function(widgetProp){if(widgetPropsInDB&&widgetPropsInDB[widgetProp.name]){var persistedWidgetProp={name:widgetProp.name,value:widgetPropsInDB[widgetProp.name].value,Widget:widgetId};_.isEqual(widgetProp,persistedWidgetProp)||deltaWidgetProps2Update.push(widgetProp)}else deltaWidgetProps2Update.push(widgetProp)}),deltaWidgetProps2Update&&deltaWidgetProps2Update.length>0&&GraphQLDataUtil().saveMultiple("pd.saveMetaWidgetProperty",deltaWidgetProps2Update).then(function(data){showNotification&&_this7.props.addFlashMessage({title:"Success - ",subtitle:"Updated widget!",timeout:500})});case 21:case"end":return _context8.stop()}},_callee8,this)}));return function(_x9,_x10){return _ref8.apply(this,arguments)}}()},{key:"deleteSlideSlot",value:function(){var _ref9=_asyncToGenerator(_regeneratorRuntime.mark(function _callee9(slotId){var activePage,widgetId,currentLayout,active_widget_id;return _regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(this,!((activePage=this.props.pages&&this.props.pages[this.props.active_page_id])&&activePage.slots&&activePage.slots[slotId])){_context9.next=13;break}return _context9.next=5,this.designerUtil.deleteSlot(slotId,activePage.name);case 5:widgetId=activePage.slots[slotId].Widget,delete(activePage=cloneDeep(this.props.activePage)).slots[slotId],delete activePage.widgets[widgetId],currentLayout=this.props.activePage&&this.props.activePage.currentLayout?this.props.activePage.currentLayout:"default",activePage.layouts&&activePage.layouts&&(activePage.layouts.slots=activePage.layouts.slots||{},activePage.layouts.slots[currentLayout]=activePage.slots,activePage.layouts.widgets=activePage.layouts.widgets||{},activePage.layouts.widgets[currentLayout]=activePage.widgets),active_widget_id=this.props.active_widget_id==widgetId?-1:this.props.active_widget_id,this.props.updateStore({updates:{activePage:activePage,active_widget_id:active_widget_id}});case 13:case"end":return _context9.stop()}},_callee9,this)}));return function(_x11){return _ref9.apply(this,arguments)}}()},{key:"deletePage",value:function(){var _ref10=_asyncToGenerator(_regeneratorRuntime.mark(function _callee10(){var allPages,activePage,newActivePageId;return _regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:allPages=this.props.pages,activePage=allPages[this.props.active_page_id],this.designerUtil.deletePage(activePage,this.props.active_page_id),delete allPages[this.props.active_page_id],newActivePageId=allPages&&Object.keys(allPages).length>0?Object.keys(allPages)[0]:"",this.props.updateStore({updates:{pages:allPages,active_page_id:newActivePageId}});case 6:case"end":return _context10.stop()}},_callee10,this)}));return function(){return _ref10.apply(this,arguments)}}()},{key:"deleteLayout",value:function(){var _ref11=_asyncToGenerator(_regeneratorRuntime.mark(function _callee11(){var self,_this8=this;return _regeneratorRuntime.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:self=this,this.props.activePage.currentLayout&&"default"!=this.props.activePage.currentLayout?$script.runAtServer("studio.deleteLayout",{pageId:this.props.active_page_id,layout:this.props.activePage.currentLayout}).then(function(data){var deletedLayout=self.props.activePage.currentLayout,activePage=cloneDeep(self.props.activePage);delete activePage.layouts.slots[deletedLayout],delete activePage.layouts.widgets[deletedLayout],activePage.slots=activePage.layouts.slots.default,activePage.widgets=activePage.layouts.widgets.default,activePage.currentLayout="default",self.props.addFlashMessage({title:"Success - ",subtitle:"Layout "+_this8.props.activePage.currentLayout+" is deleted."}),setTimeout(function(){return self.props.updateStore({updates:{activePage:activePage,reload_slides:!self.props.reload_slides}})})}):self.props.addFlashMessage({title:"Warning - ",subtitle:"Default layout cannot be deleted"});case 2:case"end":return _context11.stop()}},_callee11,this)}));return function(){return _ref11.apply(this,arguments)}}()},{key:"render",value:function(){var _this9=this;if(this.props.as_widget&&!this.props.preview)return React.createElement("div",null,"Page designer will load at runtime...");if(!this.state.paletteLoaded)return React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});var activePage=this.props.pages&&this.props.active_page_id&&this.props.pages[this.props.active_page_id]?this.props.pages[this.props.active_page_id]:{},WidgetPalette=(JSON.stringify(activePage.items||[]),activePage.page_id,JSON.stringify(this.device[this.props.selectedDevice]),PageDesignerWidget()),contentTabArry=[];this.props.pages&&Object.keys(this.props.pages).forEach(function(pageKey){if(-1==pageKey.indexOf("$")&&_this9.props.pages[pageKey]&&(_this9.props.pages[pageKey].is_open||_this9.props.pages[pageKey].isNew)){var page=_this9.props.pages[pageKey];contentTabArry.push(React.createElement("div",{className:"contentTabItems"},React.createElement("div",{key:"-1",className:pageKey==_this9.props.active_page_id?"contentTabActive":"contentTab",onClick:function(){return _this9.makePageActive(page)}},page.name),React.createElement(Close20,{className:"closeTab",onClick:function(){return _this9.removePage(page)}})))}});var contentTabs=React.createElement("div",{class:"contentTabs"},contentTabArry),previewContent=null,pagewidgets=[];this.props.activePageWidgets&&Object.keys(this.props.activePageWidgets).map(function(widgetId){var widgetName=widgetId;_this9.props.activePageWidgets[widgetId]&&_this9.props.activePageWidgets[widgetId].props&&_this9.props.activePageWidgets[widgetId].props.Name&&(widgetName=_this9.props.activePageWidgets[widgetId].props.Name),pagewidgets.push({name:widgetName,id:widgetId})});this.state.activeAccordion;"page"==this.state.accordionLevel&&0!=this.state.activeAccordion&&1!=this.state.activeAccordion&&4!=this.state.activeAccordion?this.setState({activeAccordion:1}):"widget"==this.state.accordionLevel&&2!=this.state.activeAccordion&&3!=this.state.activeAccordion&&this.setState({activeAccordion:2});var pageConfigurations=activePage.isNew?null:React.createElement(Tab,{label:"Settings",onClick:function(){_this9.setState({widgetChanged:1})}},React.createElement(Accordion,{align:"end",style:{overflowY:"auto"}},"page"==this.state.accordionLevel?React.createElement(React.Fragment,null,React.createElement(AccordionItem,{open:0==this.state.activeAccordion,style:{marginTop:10,overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this9.setState({activeAccordion:0})},onHeadingClick:function(){},title:"Page Properties"},React.createElement("page-designer-general",null)),React.createElement(AccordionItem,{open:4==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this9.setState({activeAccordion:4})},onHeadingClick:function(){},title:"Page Actions"},React.createElement("page-designer-page-actions",null)),React.createElement(AccordionItem,{open:1==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this9.setState({activeAccordion:1})},onHeadingClick:function(){},title:"Page Widgets"},React.createElement("srs-simple-list",{items:JSON.stringify(pagewidgets),varname:"widgets",unique:"true",singlecolumn:"true",alignment:"left"}))):React.createElement(React.Fragment,null,React.createElement("div",{className:"widgetPropHeader",onClick:function(e){_this9.setState({accordionLevel:"page",activeAccordion:1,active_widget_id:""})},style:{cursor:"pointer",display:"inline-block",clear:"both",float:"left",textAlign:"left",padding:10,border:"1px solid grey",backgroundColor:"#eff2f4",width:"100%"}},React.createElement(ArrowLeft,{style:{cursor:"pointer"}}),React.createElement("span",{style:{marginLeft:"30%",cursor:"pointer"}},"Widget Details")),React.createElement(AccordionItem,{open:2==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem",clear:"both"},onClick:function(){_this9.setState({activeAccordion:2})},onHeadingClick:function(){},title:"Widget Properties"},React.createElement("page-designer-props",null)),React.createElement(AccordionItem,{open:3==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this9.setState({activeAccordion:3})},onHeadingClick:function(){},title:"Widget Actions"},React.createElement("page-designer-actions",{lite:!0})))));React.createElement("div",{className:"eidtor-toggle-maximize"},React.createElement(Minimize16,{onClick:function(){_this9.props.updateStore({updates:{showRightPane:!0}})}}));var slideSearch=React.createElement("slide-selection-panel",null),notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{styles:JSON.stringify({position:"fixed",width:"30%",right:10,minHeight:100,overflow:"auto",display:"block",zIndex:99999,bottom:5})}):null,previewItem=null;1==this.state.showPreview?previewItem=React.createElement("new-widget-action",{}):1==this.state.showCreateLayout&&(previewItem=React.createElement("layout-creator",{}));var previewComponent=1==this.state.showPreview||1==this.state.showCreateLayout?React.createElement("preview-component",{key:"designer",target:"designer"},previewItem):null,widgetPalette=React.createElement(Tab,{label:"Palette",style:{display:activePage.isNew?"none":"flex"},onClick:function(){_this9.setState({widgetChanged:2})}},React.createElement(WidgetPalette,{palettes:JSON.stringify(this.palettes)}));return React.createElement("div",{className:"sr-page-topCotainer"},React.createElement("style",null,'@import url("/thirdpartylib/gridstack/corestyles.css");'),notificationBar,previewComponent,React.createElement("div",{className:"sidebar"},React.createElement("div",{style:{position:"absolute",backgroundColor:"#77b07f",zIndex:2e4,top:80,left:0,height:"100vh",width:"2%",display:this.state.isSideBarOpen?"none":"block"}}),React.createElement("div",{style:{position:"relative",float:"right",width:32,height:32,cursor:"pointer",zIndex:100},onClick:function(e){if($(e.target)){var sideBarEl=$(e.target).closest(".sidebar");if(_this9.state.isSideBarOpen)sideBarEl.css("width","2%"),sideBarEl.css("min-width","2%"),sideBarEl.css("background-color","rgb(119, 174, 127)"),sideBarEl.parent().find(".sr-page-editorial").css("width","98%");else sideBarEl.css("width","18%"),sideBarEl.css("min-width","10%"),sideBarEl.css("background-color","white"),sideBarEl.parent().find(".sr-page-editorial").css("width","82%");_this9.setState({isSideBarOpen:!_this9.state.isSideBarOpen})}}},this.state.isSideBarOpen?React.createElement(ChevronLeft,{style:{cursor:"pointer"}}):React.createElement(ChevronRight,{style:{cursor:"pointer"}})),React.createElement("div",{className:"sr-new-file-menu"},React.createElement(HeaderMenu,{"aria-label":"File",menuLinkName:"File",style:{backgroundColor:"#181618"}},React.createElement(HeaderMenuItem,{onClick:this.handleNewFile},"New Page"),React.createElement(HeaderMenuItem,{onClick:this.deletePage},"Delete Page"),React.createElement(HeaderMenuItem,{onClick:this.clonePage},"Duplicate Page"),React.createElement(HeaderMenuItem,{onClick:this.createLayout},"New Layout"),React.createElement(HeaderMenuItem,{onClick:this.deleteLayout},"Delete Layout"),React.createElement(HeaderMenuItem,{onClick:this.autoPopulate},"Auto-Layout"))),React.createElement(Tabs,{className:"sr-nav-tab",selected:this.state.widgetChanged,style:{width:"15rem"}},React.createElement(Tab,{label:"Page List",onClick:function(){_this9.setState({widgetChanged:0})}},slideSearch),pageConfigurations,widgetPalette)),React.createElement("div",{className:"sr-page-editorial"},React.createElement("div",{className:"content dualmode",ref:"gridarea"},React.createElement("div",{className:"topContainerWithoutPreview"},contentTabs,React.createElement("div",{className:"trash"}),React.createElement("div",{className:"gridContent"},React.createElement("div",{className:"grid-stack grid-stack-96 gridCanvas",ref:"canvas",style:{display:activePage.isNew?"none":"block"}}),React.createElement("div",{className:"welcomePage",style:{display:activePage.isNew?"block":"none"}},React.createElement(Tile,{style:{backgroundColor:"rgb(127, 86, 33)",color:"white",textAlign:"center",fontSize:"xx-large",fontStyle:"italic"}},"Hello! Welcome to the new page creation form. "),React.createElement("page-designer-general",{style:{position:"absolute",width:"50%",marginLeft:"10%",marginTop:50}})))),previewContent)))}}]),_PageDesigner_}(React.Component),_export("PageDesigner",PageDesigner=function(props){return _PageDesigner_}),_export("PageDesigner",PageDesigner),_export("default",PageDesigner),_export("states",states=[{KeyName:"widgets2Delete",AccessPath:"widgets2Delete",DefaultValue:'{"widgets2Delete": []}'},{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": ""}'},{KeyName:"notifications",AccessPath:"notifications",DefaultValue:'{"notifications": []}'},{KeyName:"reload_slides",AccessPath:"reload_slides",DefaultValue:'{"reload_slides": false}'},{KeyName:"activePageSlots",AccessPath:"pages.${active_page_id}.slots",DefaultValue:'{"pages":{"${active_page_id}":{"slots":{}}}}'},{KeyName:"activeWidget",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {"${active_widget_id}":{}}}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'},{KeyName:"activePageLayouts",AccessPath:"pages.${active_page_id}.layouts",DefaultValue:'{"pages": {"${active_page_id}": {"layouts": {}}}}'},{KeyName:"widgets2Resize",AccessPath:"widgets2Resize",DefaultValue:'{"widgets2Resize": {}}'},{KeyName:"activePageWidgets",AccessPath:"pages.${active_page_id}.widgets",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {}}}}'},{KeyName:"is_design_time",AccessPath:"is_design_time",DefaultValue:'{"is_design_time": false}'},{KeyName:"showNav",AccessPath:"showNav",DefaultValue:'{"showNav":true}'},{KeyName:"slideslot",AccessPath:"pages.${active_page_id}.slots.${slotid}",DefaultValue:'{"pages": {"${active_page_id}": {"slots": {"${slotid}": {}}}}}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"activeTabName",AccessPath:"activeTabName",DefaultValue:'{"activeTabName":"--Unnamed--"}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema": {}}'},{KeyName:"pages",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"active_list_item",AccessPath:"active_list_item.widgets",DefaultValue:'{"active_list_item": {"widgets": ""}}'},{KeyName:"selectedDevice",AccessPath:"selectedDevice",DefaultValue:'{"selectedDevice":"laptop"}'},{KeyName:"activeslideid",AccessPath:"activeslideid",DefaultValue:'{"activeslideid": ""}'},{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview":false}'},{KeyName:"scrollfired",AccessPath:"scrollfired",DefaultValue:'{"scrollfired": false}'},{KeyName:"showRightPane",AccessPath:"showRightPane",DefaultValue:'{"showRightPane": true}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PageDesignerWidget/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/studio/PageDesignerUtil.js","carbon-components-react","@carbon/icons-react/lib/text--align--justify/32","@carbon/icons-react/lib/caret--sort--down/32","@carbon/icons-react/lib/calendar/32","@carbon/icons-react/lib/time/32","@carbon/icons-react/lib/radio-button--checked/32","@carbon/icons-react/lib/checkbox--checked--filled/32","@carbon/icons-react/lib/document--blank/32","@carbon/icons-react/lib/link/32","@carbon/icons-react/lib/page--first/32","@carbon/icons-react/lib/list/32","@carbon/icons-react/lib/image/32","@carbon/icons-react/lib/dashboard/32","@carbon/icons-react/lib/recording/32","@carbon/icons-react/lib/panel-expansion/32","@carbon/icons-react/lib/search/32","@carbon/icons-react/lib/open-panel--filled--left/32","@carbon/icons-react/lib/new-tab/32","@carbon/icons-react/lib/carousel--horizontal/32","@carbon/icons-react/lib/idea/32","@carbon/icons-react/lib/chart--line/32","@carbon/icons-react/lib/code/32"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,PageDesignerUtil,Select,SelectItem,TextArea,SelectIcon,Date,Time,Radio,Checkbox,Toggle,File,Link,Page,List,Image,Board,Loading,NavigateButtons,RecordLookup,SideNav,Tabs,Carousel,Idea,Chart,HTMLCode,_PageDesignerWidget_,PageDesignerWidget;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptStudioPageDesignerUtilJs){PageDesignerUtil=_clientScriptStudioPageDesignerUtilJs.PageDesignerUtil},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_carbonIconsReactLibTextAlignJustify){TextArea=_carbonIconsReactLibTextAlignJustify.default},function(_carbonIconsReactLibCaretSortDown){SelectIcon=_carbonIconsReactLibCaretSortDown.default},function(_carbonIconsReactLibCalendar){Date=_carbonIconsReactLibCalendar.default},function(_carbonIconsReactLibTime){Time=_carbonIconsReactLibTime.default},function(_carbonIconsReactLibRadioButtonChecked){Radio=_carbonIconsReactLibRadioButtonChecked.default},function(_carbonIconsReactLibCheckboxCheckedFilled){Checkbox=_carbonIconsReactLibCheckboxCheckedFilled.default,Toggle=_carbonIconsReactLibCheckboxCheckedFilled.default},function(_carbonIconsReactLibDocumentBlank){File=_carbonIconsReactLibDocumentBlank.default},function(_carbonIconsReactLibLink){Link=_carbonIconsReactLibLink.default},function(_carbonIconsReactLibPageFirst){Page=_carbonIconsReactLibPageFirst.default},function(_carbonIconsReactLibList){List=_carbonIconsReactLibList.default},function(_carbonIconsReactLibImage){Image=_carbonIconsReactLibImage.default},function(_carbonIconsReactLibDashboard){Board=_carbonIconsReactLibDashboard.default},function(_carbonIconsReactLibRecording){Loading=_carbonIconsReactLibRecording.default},function(_carbonIconsReactLibPanelExpansion){NavigateButtons=_carbonIconsReactLibPanelExpansion.default},function(_carbonIconsReactLibSearch){RecordLookup=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibOpenPanelFilledLeft){SideNav=_carbonIconsReactLibOpenPanelFilledLeft.default},function(_carbonIconsReactLibNewTab){Tabs=_carbonIconsReactLibNewTab.default},function(_carbonIconsReactLibCarouselHorizontal){Carousel=_carbonIconsReactLibCarouselHorizontal.default},function(_carbonIconsReactLibIdea){Idea=_carbonIconsReactLibIdea.default},function(_carbonIconsReactLibChartLine){Chart=_carbonIconsReactLibChartLine.default},function(_carbonIconsReactLibCode){HTMLCode=_carbonIconsReactLibCode.default}],execute:function(){_PageDesignerWidget_=function(_React$Component){function _PageDesignerWidget_(props){_classCallCheck(this,_PageDesignerWidget_);var _this=_possibleConstructorReturn(this,(_PageDesignerWidget_.__proto__||Object.getPrototypeOf(_PageDesignerWidget_)).call(this,props));return _this.palettes=props.palettes?JSON.parse(props.palettes):{},_this.orderedPaletteKeys=Object.keys(_this.palettes).sort(function(a,b){return _this.palettes[a].Name==_this.palettes[b].Name?0:_this.palettes[a].Name>_this.palettes[b].Name?1:-1}),_this.state={currentpalette:_this.orderedPaletteKeys.length>0?_this.orderedPaletteKeys[0]:"",reload:!1},_this}return _inherits(_PageDesignerWidget_,_React$Component),_createClass(_PageDesignerWidget_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.palettes,this.props.palettes)||(this.palettes=this.props.palettes?JSON.parse(this.props.palettes):{},this.setState({reload:!this.state.reload}))}},{key:"getPalatteIcon",value:function(key){var palatteIcon=null;switch(key){case"DividerX":palatteIcon=React.createElement("div",{className:"palatte-horizontal-bar"});break;case"DividerY":palatteIcon=React.createElement("div",{className:"palatte-vertical-bar"});break;case"Title":case"Text":palatteIcon=React.createElement("span",{className:"palatte-text-icon"},"Ab");break;case"TextArea":palatteIcon=React.createElement(TextArea,null);break;case"Select":palatteIcon=React.createElement(SelectIcon,{className:"palatte-select-icon"});break;case"Time":palatteIcon=React.createElement(Time,null);break;case"Date":palatteIcon=React.createElement(Date,null);break;case"Radio":palatteIcon=React.createElement(Radio,null);break;case"Number":palatteIcon=React.createElement("span",{className:"palatte-number-icon"},"3.4");break;case"Checkbox":palatteIcon=React.createElement(Checkbox,null);break;case"Toggle":palatteIcon=React.createElement(Toggle,null);break;case"File":palatteIcon=React.createElement(File,null);break;case"Link":palatteIcon=React.createElement(Link,null);break;case"Page":palatteIcon=React.createElement(Page,null);break;case"List":palatteIcon=React.createElement(List,null);break;case"Image":palatteIcon=React.createElement(Image,null);break;case"Board":palatteIcon=React.createElement(Board,null);break;case"Button":palatteIcon=React.createElement("span",{className:"palatte-button-icon"},"B");break;case"Loading":palatteIcon=React.createElement(Loading,null);break;case"NavigateButton":palatteIcon=React.createElement(NavigateButtons,null);break;case"RecordLookup":palatteIcon=React.createElement(RecordLookup,null);break;case"SideNav":palatteIcon=React.createElement(SideNav,null);break;case"Tabs":palatteIcon=React.createElement(Tabs,null);break;case"Carousel":palatteIcon=React.createElement(Carousel,null);break;case"Chart":palatteIcon=React.createElement(Chart,null);break;case"HtmlCode":palatteIcon=React.createElement(HTMLCode,null);break;default:palatteIcon=React.createElement(Idea,null)}return palatteIcon}},{key:"render",value:function(){var _this2=this,eleDefinitionsPerPalette=new PageDesignerUtil(this.palettes).getElementDefintions(),paletteItemSelect=[];this.orderedPaletteKeys.length>0&&this.orderedPaletteKeys.map(function(paletteKey){_this2.palettes[paletteKey]&&paletteItemSelect.push(React.createElement(SelectItem,{value:_this2.palettes[paletteKey].uid,text:_this2.palettes[paletteKey].Name}))});var paletteItemContents=[],self=this;return Object.keys(eleDefinitionsPerPalette).map(function(paletteId){var eleDefinitions=eleDefinitionsPerPalette[paletteId],paletteItemContent=[];eleDefinitions&&Object.keys(eleDefinitions).length>0&&Object.keys(eleDefinitions).map(function(key){var palatteIcon=self.getPalatteIcon(key);paletteItemContent.push(React.createElement("div",{className:"srs-palatte-item"},React.createElement("div",{className:"palatte-icon"},palatteIcon),React.createElement("div",{className:"grid-stack-item","data-gs-width":eleDefinitions[key].defaultWidget,"data-gs-height":eleDefinitions[key].defaultHeight,"data-element":eleDefinitions[key],"data-gs-min-width":eleDefinitions[key].minWidth,"data-gs-min-height":eleDefinitions[key].minHeight,"data-gs-max-width":eleDefinitions[key].maxWidth,"data-gs-max-height":eleDefinitions[key].maxHeight},React.createElement("div",{className:"grid-stack-item-content widget","data-title":key},key))))}),paletteItemContents.push(React.createElement("div",{style:{display:_this2.state.currentpalette==paletteId?"flex":"none"},className:"srs-palatte-container"},paletteItemContent))}),React.createElement("div",{className:"sr-widget-pane"},React.createElement("style",null,'@import url("component/studio/PageDesignerWidget/Style.css");'),React.createElement(Select,{style:{marginTop:20,marginLeft:50},hideLabel:"true",id:"current_palette",defaultValue:"Form",onChange:function(e){_this2.setState({currentpalette:e.target.value})}},paletteItemSelect),React.createElement("div",{className:"sectionheader gridPalette",style:{marginBottom:30,fontFamily:"cursive",fontSize:"larger",color:"#3C0B0B"}},"Palette"),paletteItemContents&&paletteItemContents.length>0?paletteItemContents:React.createElement("div",null,"Palette is empty!"))}}]),_PageDesignerWidget_}(React.Component),_export("PageDesignerWidget",PageDesignerWidget=function(props){return _PageDesignerWidget_}),_export("PageDesignerWidget",PageDesignerWidget)}}}),System.register("component/studio/PageDesigner/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","jquery","jquery-ui/ui/data","jquery-ui/ui/disable-selection","jquery-ui/ui/focusable","jquery-ui/ui/form","jquery-ui/ui/ie","jquery-ui/ui/keycode","jquery-ui/ui/labels","jquery-ui/ui/jquery-1-7","jquery-ui/ui/plugin","jquery-ui/ui/safe-active-element","jquery-ui/ui/safe-blur","jquery-ui/ui/scroll-parent","jquery-ui/ui/tabbable","jquery-ui/ui/unique-id","jquery-ui/ui/version","jquery-ui/ui/widget","jquery-ui/ui/widgets/mouse","jquery-ui/ui/widgets/draggable","jquery-ui/ui/widgets/droppable","jquery-ui/ui/widgets/resizable","lodash","lodash.clonedeep","lodash.debounce","lodash.get","@carbon/icons-react/lib/menu/16","@carbon/icons-react/lib/close/20","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/maximize/16","@carbon/icons-react/lib/minimize/16","@carbon/icons-react/lib/caret--left/32","@carbon/icons-react/lib/caret--right/32","@carbon/icons-react/lib/caret--left/20","thirdpartylib/gridstack/corelib.js","client/script/studio/PageDesignerUtil.js","component/studio/PageDesignerWidget/Definition.js","client/script/mmf/GraphQLDataUtil.js","carbon-components-react","carbon-components-react/lib/components/UIShell"],function(_export,_context12){"use strict";var _regeneratorRuntime,_extends,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,$,_,cloneDeep,debounce,Close20,Minimize16,ChevronLeft,ChevronRight,ArrowLeft,gridStackFn,gridStackUIFn,PageDesignerUtil,PageDesignerWidget,GraphQLDataUtil,Tab,Tabs,Tile,Accordion,AccordionItem,HeaderMenu,HeaderMenuItem,_PageDesigner_,PageDesigner;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_jquery){$=_jquery.default},function(_jqueryUiUiData){},function(_jqueryUiUiDisableSelection){},function(_jqueryUiUiFocusable){},function(_jqueryUiUiForm){},function(_jqueryUiUiIe){},function(_jqueryUiUiKeycode){},function(_jqueryUiUiLabels){},function(_jqueryUiUiJquery){},function(_jqueryUiUiPlugin){},function(_jqueryUiUiSafeActiveElement){},function(_jqueryUiUiSafeBlur){},function(_jqueryUiUiScrollParent){},function(_jqueryUiUiTabbable){},function(_jqueryUiUiUniqueId){},function(_jqueryUiUiVersion){},function(_jqueryUiUiWidget){},function(_jqueryUiUiWidgetsMouse){},function(_jqueryUiUiWidgetsDraggable){},function(_jqueryUiUiWidgetsDroppable){},function(_jqueryUiUiWidgetsResizable){},function(_lodash){_=_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default},function(_lodashGet){_lodashGet.default},function(_carbonIconsReactLibMenu){_carbonIconsReactLibMenu.default},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibAddAlt){_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibMaximize){_carbonIconsReactLibMaximize.default},function(_carbonIconsReactLibMinimize){Minimize16=_carbonIconsReactLibMinimize.default},function(_carbonIconsReactLibCaretLeft){ChevronLeft=_carbonIconsReactLibCaretLeft.default},function(_carbonIconsReactLibCaretRight){ChevronRight=_carbonIconsReactLibCaretRight.default},function(_carbonIconsReactLibCaretLeft2){ArrowLeft=_carbonIconsReactLibCaretLeft2.default},function(_thirdpartylibGridstackCorelibJs){gridStackFn=_thirdpartylibGridstackCorelibJs.gridStackFn,gridStackUIFn=_thirdpartylibGridstackCorelibJs.gridStackUIFn},function(_clientScriptStudioPageDesignerUtilJs){PageDesignerUtil=_clientScriptStudioPageDesignerUtilJs.PageDesignerUtil},function(_componentStudioPageDesignerWidgetDefinitionJs){PageDesignerWidget=_componentStudioPageDesignerWidgetDefinitionJs.PageDesignerWidget},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_carbonComponentsReact){_carbonComponentsReact.Button,_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Tab=_carbonComponentsReact.Tab,Tabs=_carbonComponentsReact.Tabs,_carbonComponentsReact.OverflowMenu,_carbonComponentsReact.OverflowMenuItem,Tile=_carbonComponentsReact.Tile,Accordion=_carbonComponentsReact.Accordion,AccordionItem=_carbonComponentsReact.AccordionItem},function(_carbonComponentsReactLibComponentsUIShell){HeaderMenu=_carbonComponentsReactLibComponentsUIShell.HeaderMenu,HeaderMenuItem=_carbonComponentsReactLibComponentsUIShell.HeaderMenuItem}],execute:function(){_PageDesigner_=function(_React$Component){function _PageDesigner_(props){_classCallCheck(this,_PageDesigner_);var _this=_possibleConstructorReturn(this,(_PageDesigner_.__proto__||Object.getPrototypeOf(_PageDesigner_)).call(this,props));return _this.designerUtil=new PageDesignerUtil,_this.device={smartphone:{width:"360",height:"510"},tablet:{width:"700",height:"900"},laptop:{width:"1366",height:"750"}},_this.state={widgetChanged:0,activeAccordion:0,paletteLoaded:_this.props.palettes&&Object.keys(_this.props.palettes).length>0,isSideBarOpen:!0,accordionLevel:"page",active_widget_id:"",showCreateLayout:!1,reload:!1},_this.initializing=!1,_this.getGridData=_this.getGridData.bind(_this),_this.refreshView=_this.refreshView.bind(_this),_this.updateEmulator=_this.updateEmulator.bind(_this),_this.isSlotUpdated=_this.isSlotUpdated.bind(_this),_this.updateDevice=_this.updateDevice.bind(_this),_this.saveSlides=_this.saveSlides.bind(_this),_this.autoPopulate=_this.autoPopulate.bind(_this),_this.saveWidget=_this.saveWidget.bind(_this),_this.saveWidgetRenderType=_this.saveWidgetRenderType.bind(_this),_this.initializeLayout=_this.initializeLayout.bind(_this),_this.initializeEvents=_this.initializeEvents.bind(_this),_this.handleNewFile=_this.handleNewFile.bind(_this),_this.makePageActive=_this.makePageActive.bind(_this),_this.removePage=_this.removePage.bind(_this),_this.clonePage=_this.clonePage.bind(_this),_this.createLayout=_this.createLayout.bind(_this),_this.deleteLayout=_this.deleteLayout.bind(_this),_this.deletePage=_this.deletePage.bind(_this),_this.hostEl=_this.rootEl=void 0,_this.toggleMode=_this.toggleMode.bind(_this),_this.activePage=cloneDeep(_this.props.activePage),_this.resizeSideBarGrid=_this.resizeSideBarGrid.bind(_this),_this.isSideBarResizable=!1,_this.resizeSideBarGridDebounceFn=debounce(function(){_this.resizeSideBarGrid()}),_this.saveWidgetDebounced=debounce(function(){_this.saveWidget(_this.props.active_widget_id,!0)},20,{trailing:!0,leading:!0}),_this.saveWidgetRenderTypeDebounce=debounce(function(){_this.saveWidgetRenderType(_this.props.active_widget_id,!0)},20,{trailing:!0,leading:!0}),_this.pageSaveDebounced=debounce(function(){_this.props.updateStore({updates:{activePage:_this.activePage}})},20,{trailing:!0,leading:!0}),_this.palettes&&0!=Object.keys(_this.palettes).length||$script.runscript("mmf.getPalettes",{}).then(function(palettesData){_this.palettes=palettesData,_this.setState({paletteLoaded:!0})}),$ele.registerElement("NewWidgetAction","mmf","React"),$ele.registerElement("LayoutCreator","studio","React"),window.addEventListener("resize",self.resizeSideBarGridDebounceFn),$script.runAtServer("mmf.getSchemaData",{}).then(function(schemaData){return _this.props.updateStore({updates:{schema:schemaData}})}),_this.props.updateStore({updates:{is_design_time:!0}}),_this}return _inherits(_PageDesigner_,_React$Component),_createClass(_PageDesigner_,[{key:"refreshView",value:function(){var _this2=this,self=this;this.options={width:96,column:96,float:!0,removable:".trash",verticalMargin:10,cellHeight:20,removable:!0,removeTimeout:100,acceptWidgets:".grid-stack-item",resizable:{handles:"e, se, s, sw, w"},draggable:{handle:".grid-stack-item-content",appendTo:$(self.refs.canvas)}},this.rootEl=this.refs.gridarea,$(".gridContent",this.props.shadow)&&$(".gridContent",this.props.shadow).scroll(function(){return _this2.props.updateStore({updates:{scrollfired:!_this2.props.scrollfired}})}),$(".gridCanvas",this.props.shadow)&&$(".gridCanvas",this.props.shadow).each(function(){$(this).data("gridstack");$(this).data("gridstack",null)}),$(".gridPalette",this.props.shadow)&&$(".gridPalette",this.props.shadow).each(function(){$(this).data("gridstack");$(this).data("gridstack",null)}),gridStackFn($,window,this.refs.gridarea).then(function(gridStackUIObj){if(gridStackUIFn($,gridStackUIObj,window),$(".gridCanvas",_this2.props.shadow).gridstack(_this2.options,!0),$(".gridPalette",_this2.props.shadow).gridstack(_this2.options,!0),_this2.initializeLayout(_this2.props.shadow),_this2.initializeEvents(_this2.rootEl,_this2.props.shadow,self),_this2.props.as_widget&&_this2.props.preview||!_this2.props.pages||0==Object.keys(_this2.props.pages).length){var defaultPage=_this2.designerUtil.getDefaultPage(),pages={};pages[defaultPage.page_id]=defaultPage,_this2.props.updateStore({updates:{active_page_id:defaultPage.page_id,pages:pages}})}})}},{key:"componentDidMount",value:function(){this.state.paletteLoaded&&this.refreshView()}},{key:"resizeSideBarGrid",value:function(){var self=this,parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".sidebar",this.props.shadow).length>0?$(".sidebar",this.props.shadow):$(".sidebar",parentNode),topLevelEl=$(".sr-page-topCotainer",this.props.shadow).length>0?$(".sr-page-topCotainer",this.props.shadow):$(".sr-page-topCotainer",parentNode),contentAreaEl=$(".sr-page-editorial",this.props.shadow).length>0?$(".sr-page-editorial",this.props.shadow):$(".sr-page-editorial",parentNode);if(searchPane.length>0){var searchPaneRect=searchPane[0].getBoundingClientRect(),contentAreaWidth=topLevelEl[0].getBoundingClientRect().width-searchPaneRect.width-5;setTimeout(function(){contentAreaEl.width(contentAreaWidth),window.removeEventListener("resize",self.resizeSideBarGridDebounceFn),window.addEventListener("resize",self.resizeSideBarGridDebounceFn)})}}},{key:"initializeEvents",value:function(rootEl,hostEl,self){var _ref2,_ref3;$(".gridCanvas",hostEl).off("change",function(){}),$(".gridCanvas",hostEl).on("change",function(event,items){var _ref,_this3=this,isPreviewItem=!!(items&&items.length>0&&items[0]&&items[0].el)&&!!$(items[0].el).find("widget-container").attr("preview");if(!self.initializing&&!isPreviewItem){var currentItemsBySlotId=self.getGridData(),activePage=self.props.activePage,previousItemsBySlotId=self.props.activePage.slots;activePage.is_open?(Object.keys(currentItemsBySlotId).map((_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(currentItemSlotId){var curSlot,prevSlot,slotData;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(curSlot=currentItemsBySlotId[currentItemSlotId],prevSlot=previousItemsBySlotId?previousItemsBySlotId[currentItemSlotId]:null,!curSlot||curSlot.isPreview||!prevSlot||!self.isSlotUpdated(curSlot,prevSlot)){_context.next=8;break}return(slotData=_extends({},currentItemsBySlotId[currentItemSlotId])).uid=currentItemSlotId,slotData.Layout=self.props.activePage.currentLayout?self.props.activePage.currentLayout:"default",_context.next=8,$qry.run("pd.saveMetaSlideSlot",slotData);case 8:case"end":return _context.stop()}},_callee,_this3)})),function(_x){return _ref.apply(this,arguments)})),activePage.slots=currentItemsBySlotId,self.activePage=activePage,self.pageSaveDebounced()):console.log("activePage not opened!")}}),$(".sidebar .grid-stack-item",hostEl).draggable({helper:"clone",revert:"invalid",handle:$(".grid-stack-item-content",hostEl),scroll:!0,appendTo:$(rootEl),start:function(event,ui){var eleData=$(this).data().element;($(this).addClass("draggingWidget"),eleData&&eleData.tag)&&$(this).find(".grid-stack-item-content").html('<widget-container style="height: 100%;" shadow="true" pageid='+self.props.active_page_id+" componentid="+eleData.componentid+" tag="+eleData.tag+'\n                            class="widgetContainer" pagesuffix=""></widget-container>')},stop:function(event,ui){$(this).removeClass("draggingWidget");var title=$(this).find(".grid-stack-item-content").data().title;$(this).attr("widgetid",""),$(this).find(".grid-stack-item-content").html(title)}}),$(".gridCanvas",hostEl).off("added",function(){}),$(".gridCanvas",hostEl).on("added",(_ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(event,items){var activePage,activePageWidgets,activePageSlots,activePageLayouts,i,eleData,el,grid,defaultWidth,defaultHeight,maxWidth,maxHeight,componentId,slotData,_slideRes,slotId,widgetPropsRes,widgetId,widgetContainerEl,currentLayout;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(activePage=cloneDeep(self.props.activePage),activePageWidgets=activePage.widgets||{},activePageSlots=activePage.slots||{},activePageLayouts=activePage.layouts||{},0!=self.grid_added){_context2.next=61;break}i=0;case 6:if(!(i<items.length)){_context2.next=59;break}if(!(eleData=items[i].el.data("element"))||!eleData.preview){_context2.next=10;break}return _context2.abrupt("continue",56);case 10:if(!eleData||!eleData.tag){_context2.next=53;break}return el=items[i].el,grid=$(this).data("gridstack"),defaultWidth=items[i].el.data("element").defaultWidth,defaultHeight=items[i].el.data("element").defaultHeight,maxWidth=items[i].el.data("element").maxWidth,maxHeight=items[i].el.data("element").maxHeight,componentId=items[i].el.data("element").componentid,(slotData={}).xposition=el.data("gsX")||0,slotData.yposition=el.data("gsY")||0,slotData.height=el.data("gsHeight")||0,slotData.width=el.data("gsWidth")?el.data("gsWidth"):0,slotData.minwidth=0,slotData.maxwidth=96,slotData.minheight=0,slotData.maxheight=40,slotData.resize=0,slotData.move=0,slotData.Layout=self.props.activePage.currentLayout?self.props.activePage.currentLayout:"default",slotData.Slide=self.props.active_page_id,_context2.next=33,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideSlot",slotData);case 33:return _slideRes=_context2.sent,slotId=_slideRes.uid,activePageSlots[_slideRes.uid]=slotData,_context2.next=38,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideSlotWidget",{Slot:slotId,Component:componentId});case 38:return widgetPropsRes=_context2.sent,widgetId=widgetPropsRes.uid,activePageWidgets[widgetId]={id:widgetId,props:items[i].el.data("element").props,Component:componentId,name:items[i].el.data("element").name},slotData.uid=slotId,slotData.Widget=widgetId,_context2.next=45,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideSlot",slotData);case 45:el.attr("slotid",slotId),el.attr("widgetid",widgetId),el.data("widgetprops",eleData.props),(widgetContainerEl=el.find("widget-container"))&&(widgetContainerEl.attr("slotid",slotId),widgetContainerEl.attr("widgetid",widgetId),widgetContainerEl.data("widgetprops",eleData.props)),grid.update(el,slotData.xposition,slotData.yposition,defaultWidth,defaultHeight),maxWidth&&grid.maxWidth(el,maxWidth),maxHeight&&grid.maxHeight(el,maxHeight);case 53:currentLayout=self.props.currentLayout?self.props.currentLayout:"default",activePageLayouts[currentLayout]={slots:activePageSlots,widgets:activePageWidgets},self.props.updateStore({updates:{activePage:activePage}});case 56:i++,_context2.next=6;break;case 59:_context2.next=62;break;case 61:self.grid_added=self.grid_added-items.length;case 62:case"end":return _context2.stop()}},_callee2,this)})),function(_x2,_x3){return _ref2.apply(this,arguments)})),$(".grid-stack",hostEl).off("removed",function(){}),$(".grid-stack",hostEl).on("removed",(_ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(event,items){var widgetContainerEl,slotId;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(0!=self.grid_removed){_context3.next=14;break}if($(this).data("gridstack"),widgetContainerEl=items&&items[0]&&items[0].el.find("widget-container"),slotId=widgetContainerEl?widgetContainerEl.attr("slotid"):$(event.currentTarget).attr("slotid"),widgetContainerEl?widgetContainerEl.attr("widgetid"):$(event.currentTarget).attr("widgetid"),!slotId){_context3.next=11;break}return _context3.next=8,self.deleteSlideSlot(slotId);case 8:self.props.addFlashMessage({title:"Success - ",subtitle:"Widget removed successfully!"}),_context3.next=12;break;case 11:!self.initializing&&self.props.addErrorMessage({title:"Error - ",subtitle:"Invalid operation. Please contact system administrator."});case 12:_context3.next=16;break;case 14:items&&items.map(function(item){$(item.el).remove()}),self.grid_removed=self.grid_removed-items.length;case 16:case"end":return _context3.stop()}},_callee3,this)})),function(_x4,_x5){return _ref3.apply(this,arguments)}))}},{key:"isSlotUpdated",value:function(currentSlot,previousSlot){return currentSlot.xposition!=previousSlot.xposition||currentSlot.yposition!=previousSlot.yposition||currentSlot.height!=previousSlot.height||currentSlot.width!=previousSlot.width||currentSlot.minwidth!=previousSlot.minwidth||currentSlot.minheight!=previousSlot.minheight||currentSlot.maxwidth!=previousSlot.maxwidth||currentSlot.maxheight!=previousSlot.maxheight}},{key:"initializeLayout",value:function(hostEl,pageData){var _this4=this,self=this,grid=void 0;if(hostEl){$(".gridCanvas",hostEl).each(_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(grid=$(this).data("gridstack")){_context4.next=3;break}return _context4.abrupt("return");case 3:self.initializing=!0,grid.batchUpdate(),self.grid_removed=grid.container&&grid.container.length>0?grid.container.find(".grid-stack-item").length:0;case 6:case"end":return _context4.stop()}},_callee4,this)}))),self.grid_removed>0&&grid.removeAll();var activePage=pageData||(self.props.activePage||{});activePage.slots&&_.each(Object.keys(activePage.slots),function(slotId){var slot=activePage.slots[slotId],widgetId=slot.Widget?slot.Widget:slot.widget&&slot.widget.widgetid?slot.widget.widgetid:"",widgetProps=activePage.widgets[widgetId];if(widgetProps&&widgetProps.name){var name=widgetProps.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),eleData=Object.assign({tag:name,widgetid:widgetId,componentid:widgetProps.Component},widgetProps);$(_this4).attr("slotid",slotId);var activeItemContentEl=grid.$el&&grid.$el.find("#"+widgetId+".grid-stack-item-content");if(!activeItemContentEl&&grid&&grid.container&&grid.container.length>0&&(activeItemContentEl=$(grid.container[0]).find("#"+widgetId+".grid-stack-item-content")),activeItemContentEl&&0!=activeItemContentEl.length){var gridStackItemEl=activeItemContentEl.parent();grid.update(gridStackItemEl,slot.xposition,slot.yposition,slot.width,slot.height)}else{var widgetContainerEl=$("<div>\n                                <div id="+widgetId+' class="grid-stack-item-content">\n                                    <widget-container style="height: 100%;" shadow="true" pageid='+self.props.active_page_id+" tag="+eleData.tag+" \n                                                widgetid="+eleData.widgetid+" componentid="+eleData.componentid+" \n                                                slotid="+slotId+' class="widgetContainer" pagesuffix="">\n                                    </widget-container>\n                                </div>\n                            <div/>');widgetContainerEl.find("widget-container").data("widgetprops",eleData),self.grid_added=self.grid_added?self.grid_added+1:1,grid.addWidget(widgetContainerEl,slot.xposition,slot.yposition,slot.width,slot.height,!1,0,96,0,40)}}},this),grid.commit(),setTimeout(function(){if(self.initializing=!1,!self.isSideBarResizable){var parentNode=self.props.shadow&&self.props.shadow.host&&self.props.shadow.host.parentElement?self.props.shadow.host.parentElement:null,sidebarPane=$(".sidebar",self.props.shadow).length>0?$(".sidebar",self.props.shadow):$(".sidebar",parentNode);if(sidebarPane&&sidebarPane.length>0){sidebarPane[0].addEventListener("resize",self.resizeSideBarGridDebounceFn),new MutationObserver(function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}}).observe(sidebarPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]}),self.isSideBarResizable=!0}}},1e3)}}},{key:"updateEmulator",value:function(deviceValue){this.previewDevice=deviceValue,$(".emulator",this.props.shadow).data("device",deviceValue),$(".emulatorFrameContainer",this.props.shadow).removeClass().addClass("emulatorFrameContainer "+deviceValue),this.props.updateStore({updates:{selectedDevice:deviceValue}})}},{key:"updateDevice",value:function(e){var value=e.target.value;this.updateEmulator(value)}},{key:"clonePage",value:function(){var _this5=this,self=this;$script.runAtServer("studio.clonePage",{pageId:this.props.active_page_id}).then(function(data){self.props.addFlashMessage({title:"Success - ",subtitle:"Page clone is successful. Newly cloned page name is "+data.slideName}),setTimeout(function(){return self.props.updateStore({updates:{reload_slides:!_this5.props.reload_slides}})},1e3)})}},{key:"createLayout",value:function(){this.props.updateStore({updates:{showpreview:!0}}),this.setState({showCreateLayout:!0,reload:!this.state.reload})}},{key:"getGridData",value:function(){var data={},self=this;return _.map($(".grid-stack > .grid-stack-item:visible",this.props.shadow),function(el){(el=$(el)).find(".grid-stack-item-content .widgetContainer")&&el.find(".grid-stack-item-content .widgetContainer").data("widgetprops")&&el.find(".grid-stack-item-content .widgetContainer").data("widgetprops");var node=el.data("_gridstack_node"),slotId=el.find(".grid-stack-item-content .widgetContainer").attr("slotid"),storedSlot=self.props.activePageSlots[slotId];if(storedSlot&&node&&(node.x!=storedSlot.xposition||node.y!=storedSlot.yposition||node.width!=storedSlot.width||node.height!=storedSlot.height)){var activePageWidgets=cloneDeep(self.props.activePageWidgets),changedWidget=activePageWidgets[storedSlot.Widget]||{};changedWidget.reload=!changedWidget.reload,activePageWidgets[storedSlot.Widget]=changedWidget,self.props.updateStore({updates:{activePageWidgets:activePageWidgets}})}data[slotId]={Widget:el.find(".grid-stack-item-content .widgetContainer").attr("widgetid"),Slide:self.props.active_page_id,isPreview:!!el.find(".grid-stack-item-content .widgetContainer").attr("preview")};var defaultCoordinates={xposition:0,yposition:0,width:4,height:4,minwidth:0,minheight:0,maxwidth:96,maxheight:40};data[slotId]=_extends({},data[slotId],defaultCoordinates),isNaN(node.x)||(data[slotId].xposition=parseInt(node.x)),isNaN(node.y)||(data[slotId].yposition=parseInt(node.y)),isNaN(node.width)||(data[slotId].width=isNaN(node.width)?defaultCoordinates.width:parseInt(node.width)),isNaN(node.height)||(data[slotId].height=parseInt(node.height)),isNaN(node.minWidth)||(data[slotId].minwidth=parseInt(node.minWidth)),isNaN(node.minHeight)||(data[slotId].minheight=parseInt(node.minHeight)),isNaN(node.maxWidth)||(data[slotId].maxwidth=parseInt(node.maxWidth)),isNaN(node.maxHeight)||(data[slotId].maxheight=parseInt(node.maxHeight))},this),data}},{key:"toggleMode",value:function(){var gridArea=$(this.refs.gridarea);gridArea&&(gridArea.hasClass("dualmode")?(gridArea.removeClass("dualmode"),gridArea.addClass("fullscreen")):(gridArea.removeClass("fullscreen"),gridArea.addClass("dualmode")))}},{key:"componentDidUpdate",value:function(prevProps,prevState){if(prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"designer"==this.props.showpreview_target&&this.setState({showCreateLayout:!1}),prevProps.active_page_id!==this.props.active_page_id)this.initializeLayout(this.rootEl),this.props.activePage.isNew?this.setState({widgetChanged:0,activeAccordion:0,accordionLevel:"page"}):this.setState({widgetChanged:1,activeAccordion:0,accordionLevel:"page"});else if(prevProps.activePage.currentLayout!=this.props.activePage.currentLayout){var prevLayout=prevProps.activePage.currentLayout,currentLayout=this.props.activePage.currentLayout;if(prevLayout&&"default"!=prevLayout||currentLayout&&"default"!=currentLayout){var activePage=cloneDeep(this.props.activePage);activePage.layouts&&activePage.layouts.slots&&(activePage.slots=activePage.layouts.slots[this.props.activePage.currentLayout],activePage.widgets=activePage.layouts.widgets[this.props.activePage.currentLayout],this.initializeLayout(this.props.shadow,activePage),this.props.updateStore({updates:{activePage:activePage}}))}else;}if(prevProps.active_list_item!=this.props.active_list_item){var widgetId=this.props.active_list_item.split("@@")[0];this.props.updateStore({updates:{active_widget_id:widgetId}}),this.setState({accordionLevel:"widget",activeAccordion:2})}else prevState.paletteLoaded!=this.state.paletteLoaded&&this.state.paletteLoaded&&this.refreshView();prevProps.active_widget_id!=this.props.active_widget_id&&(this.props.active_widget_id&&-1!=this.props.active_widget_id?this.setState({widgetChanged:1,activeAccordion:1}):this.setState({widgetChanged:0}));var widgets2Delete=cloneDeep(this.props.widgets2Delete);if(widgets2Delete&&widgets2Delete.length>0){var gridCanvasEl=$(".gridCanvas",this.props.shadow);try{widgets2Delete.map(function(widgetId){gridCanvasEl&&gridCanvasEl.each(function(){var grid=$(this).data("gridstack");if(grid){var widgetContainerEl=gridCanvasEl.find(".grid-stack-item-content>widget-container[widgetid="+widgetId+"]");widgetContainerEl&&1==widgetContainerEl.length&&widgetContainerEl.parent()&&1==widgetContainerEl.parent().length&&widgetContainerEl.parent().parent()&&1==widgetContainerEl.parent().parent().length&&grid.removeWidget(widgetContainerEl.parent().parent())}})})}catch(err){this.props.addErrorMessage({title:"Error - ",subtitle:"Something went wrong, please contact your administrator."})}this.props.updateStore({updates:{widgets2Delete:[]}})}this.props.active_widget_id&&prevProps.active_widget_id==this.props.active_widget_id&&prevProps.activeWidget&&this.props.activeWidget&&(_.isEqual(prevProps.activeWidget.props,this.props.activeWidget.props)||this.saveWidgetDebounced(),prevProps.activeWidget.Component,this.props.activeWidget.Component)}},{key:"makePageActive",value:function(inputPage){if(inputPage&&(inputPage.id||inputPage.page_id)){var pageId=inputPage.id||inputPage.page_id;this.props.updateStore({updates:{active_page_id:pageId,active_widget_id:""}})}}},{key:"removePage",value:function(page){var pages=this.props.pages,pageId=(Object.keys(pages).length,page.page_id||page.id);if(pageId){delete pages[pageId];var tobeActiveId=null;pageId==this.props.active_page_id&&(tobeActiveId=Object.keys(pages)[0]);var payload={pages:pages};tobeActiveId&&(payload.active_page_id=tobeActiveId,payload.active_widget_id=""),this.initializeLayout(this.rootEl),this.props.updateStore({updates:payload})}}},{key:"handleNewFile",value:function(e){var pageType=e.target.value||e.currentTarget&&e.currentTarget.attributes&&e.currentTarget.attributes.value&&e.currentTarget.attributes.value.value||"",newPage=this.designerUtil.getDefaultPage();newPage.pageType=pageType;var pages=this.props.pages||{};pages[newPage.page_id]=newPage,this.initializeLayout(this.rootEl),this.props.updateStore({updates:{active_page_id:newPage.page_id,pages:pages}})}},{key:"autoPopulate",value:function(){}},{key:"saveSlides",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(){var activePage,pagesInStore,_self,_slideRes2,activePageInStore,widgets,_this6=this;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(activePage=this.props.pages&&this.props.pages[this.props.active_page_id],pagesInStore=this.props.pages,activePage.name&&activePage.scope&&activePage.path&&activePage.model&&activePage.modelscope){_context6.next=8;break}this.props.addErrorMessage({title:"Error - ",subtitle:"Enter mandatory fields in general tab"}),alert("Enter mandatory fields in general tab"),_context6.next=23;break;case 8:if(_self=this,!activePage.isNew){_context6.next=14;break}return _context6.next=12,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlide",{Name:activePage.name,Scope:activePage.scope,Path:activePage.path,Type:activePage.pageType});case 12:(_slideRes2=_context6.sent)&&_slideRes2.uid&&(_self.props.addFlashMessage({title:"Success - ",subtitle:"Page updated!"}),(activePageInStore=(activePageInStore=pagesInStore[this.props.active_page_id])||{}).isNew&&(activePageInStore.isNew=!1,pagesInStore[_slideRes2.uid]=activePageInStore,delete pagesInStore[this.props.active_page_id]),_self.props.updateStore({updates:{active_page_id:_slideRes2.uid,pages:pagesInStore,reload_slides:!0}}));case 14:return _context6.next=16,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelName",Value:activePage.model,PropsSlide:slideRes.uid});case 16:return _context6.sent,_context6.next=19,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelScope",Value:activePage.modelscope,PropsSlide:slideRes.uid});case 19:_context6.sent,slideRes.uid,widgets=activePage.widgets||{},Object.keys(widgets).forEach(function(){var _ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(widKey){return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:_this6.saveWidget(widKey,!1);case 1:case"end":return _context5.stop()}},_callee5,_this6)}));return function(_x6){return _ref6.apply(this,arguments)}}());case 23:case"end":return _context6.stop()}},_callee6,this)}));return function(){return _ref5.apply(this,arguments)}}()},{key:"saveWidgetRenderType",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(widgetId,showNotification){return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(!widgetId||!this.props.activeWidget){_context7.next=4;break}return _context7.next=3,$qry.run("pd.replaceWidgetComponent",{widgetId:widgetId,componentId:this.props.activeWidget.Component});case 3:_context7.sent;case 4:case"end":return _context7.stop()}},_callee7,this)}));return function(_x7,_x8){return _ref7.apply(this,arguments)}}()},{key:"saveWidget",value:function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(widgetId,showNotification){var widget,props,widgetProps,currentWidgetProps,widgetPropsInDB,orderedWidgetPropsInDB,widgetPropIds2Remove,curWidgetPropName,deltaWidgetProps2Update,_this7=this;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(!(widgetId&&this.props.activePage&&this.props.activePage.widgets)){_context8.next=21;break}if(!(widget=this.props.activePage.widgets[widgetId])){_context8.next=21;break}return props=widget.props,widgetProps=[],[],_context8.next=8,$qry._run('query($input:JSON){\n                        MetaWidgetProps{\n                            MetaWidgetPropsFind(filter: $input) @_(get: "edges"){\n                                edges @_(keyBy: "node.name", mapValues:"node"){\n                                    node{\n                                        uid\n                                        name\n                                        value\n                                    }\n                                }\n                            }\n                        }\n                    }',{input:{where:{Widget:widgetId}}},"data.MetaWidgetProps.MetaWidgetPropsFind");case 8:if(currentWidgetProps=_context8.sent,widgetPropsInDB=cloneDeep(currentWidgetProps),orderedWidgetPropsInDB=[],props&&Object.keys(props).forEach(function(key){var widgetProp={},widgetPropInDB={};currentWidgetProps&&Object.keys(currentWidgetProps).indexOf(key)>-1&&delete currentWidgetProps[key],widgetProp.name=key,(props[key]||0==props[key])&&(widgetProp.value="tabs"==key?props[key]:"FieldName"==key?props[key].startsWith("@@[")?props[key]:"@@["+props[key]+"]":props[key],widgetProp.Widget=widgetId,widgetProps.push(widgetProp)),widgetPropInDB.name=key,widgetPropsInDB&&widgetPropsInDB[key]&&(widgetPropsInDB[key].value||0==widgetPropsInDB[key].value)&&(widgetPropInDB.value="tabs"==key?widgetPropsInDB[key].value:"FieldName"==key?widgetPropsInDB[key].value.startsWith("@@[")?widgetPropsInDB[key]:"@@["+widgetPropsInDB[key]+"]":widgetPropsInDB[key].value,widgetPropInDB.Widget=widgetId,orderedWidgetPropsInDB.push(widgetPropInDB))}),!(widgetProps&&widgetProps.length>0)){_context8.next=21;break}if(!(currentWidgetProps&&Object.keys(currentWidgetProps).length>0)){_context8.next=18;break}for(curWidgetPropName in widgetPropIds2Remove=[],currentWidgetProps)currentWidgetProps[curWidgetPropName].uid&&widgetPropIds2Remove.push(currentWidgetProps[curWidgetPropName].uid);return _context8.next=18,$qry._run("mutation($inputData:MetaWidgetPropsDestroyAllInput!) {\n                                MetaWidgetPropsDestroyAll(input:$inputData){\n                                    obj\n                                }\t}",{inputData:{where:{uid:{inq:widgetPropIds2Remove}}}},"data.MetaWidgetPropsDestroyAll.obj");case 18:deltaWidgetProps2Update=[],_.isEqual(widgetProps,orderedWidgetPropsInDB)||widgetProps.map(function(widgetProp){if(widgetPropsInDB&&widgetPropsInDB[widgetProp.name]){var persistedWidgetProp={name:widgetProp.name,value:widgetPropsInDB[widgetProp.name].value,Widget:widgetId};_.isEqual(widgetProp,persistedWidgetProp)||deltaWidgetProps2Update.push(widgetProp)}else deltaWidgetProps2Update.push(widgetProp)}),deltaWidgetProps2Update&&deltaWidgetProps2Update.length>0&&GraphQLDataUtil().saveMultiple("pd.saveMetaWidgetProperty",deltaWidgetProps2Update).then(function(data){showNotification&&_this7.props.addFlashMessage({title:"Success - ",subtitle:"Updated widget!",timeout:500})});case 21:case"end":return _context8.stop()}},_callee8,this)}));return function(_x9,_x10){return _ref8.apply(this,arguments)}}()},{key:"deleteSlideSlot",value:function(){var _ref9=_asyncToGenerator(_regeneratorRuntime.mark(function _callee9(slotId){var activePage,widgetId,currentLayout,active_widget_id;return _regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:if(this,!((activePage=this.props.pages&&this.props.pages[this.props.active_page_id])&&activePage.slots&&activePage.slots[slotId])){_context9.next=13;break}return _context9.next=5,this.designerUtil.deleteSlot(slotId,activePage.name);case 5:widgetId=activePage.slots[slotId].Widget,delete(activePage=cloneDeep(this.props.activePage)).slots[slotId],delete activePage.widgets[widgetId],currentLayout=this.props.activePage&&this.props.activePage.currentLayout?this.props.activePage.currentLayout:"default",activePage.layouts&&activePage.layouts&&(activePage.layouts.slots=activePage.layouts.slots||{},activePage.layouts.slots[currentLayout]=activePage.slots,activePage.layouts.widgets=activePage.layouts.widgets||{},activePage.layouts.widgets[currentLayout]=activePage.widgets),active_widget_id=this.props.active_widget_id==widgetId?-1:this.props.active_widget_id,this.props.updateStore({updates:{activePage:activePage,active_widget_id:active_widget_id}});case 13:case"end":return _context9.stop()}},_callee9,this)}));return function(_x11){return _ref9.apply(this,arguments)}}()},{key:"deletePage",value:function(){var _ref10=_asyncToGenerator(_regeneratorRuntime.mark(function _callee10(){var allPages,activePage,newActivePageId;return _regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:allPages=this.props.pages,activePage=allPages[this.props.active_page_id],this.designerUtil.deletePage(activePage,this.props.active_page_id),delete allPages[this.props.active_page_id],newActivePageId=allPages&&Object.keys(allPages).length>0?Object.keys(allPages)[0]:"",this.props.updateStore({updates:{pages:allPages,active_page_id:newActivePageId}});case 6:case"end":return _context10.stop()}},_callee10,this)}));return function(){return _ref10.apply(this,arguments)}}()},{key:"deleteLayout",value:function(){var _ref11=_asyncToGenerator(_regeneratorRuntime.mark(function _callee11(){var self,_this8=this;return _regeneratorRuntime.wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:self=this,this.props.activePage.currentLayout&&"default"!=this.props.activePage.currentLayout?$script.runAtServer("studio.deleteLayout",{pageId:this.props.active_page_id,layout:this.props.activePage.currentLayout}).then(function(data){var deletedLayout=self.props.activePage.currentLayout,activePage=cloneDeep(self.props.activePage);delete activePage.layouts.slots[deletedLayout],delete activePage.layouts.widgets[deletedLayout],activePage.slots=activePage.layouts.slots.default,activePage.widgets=activePage.layouts.widgets.default,activePage.currentLayout="default",self.props.addFlashMessage({title:"Success - ",subtitle:"Layout "+_this8.props.activePage.currentLayout+" is deleted."}),setTimeout(function(){return self.props.updateStore({updates:{activePage:activePage,reload_slides:!self.props.reload_slides}})})}):self.props.addFlashMessage({title:"Warning - ",subtitle:"Default layout cannot be deleted"});case 2:case"end":return _context11.stop()}},_callee11,this)}));return function(){return _ref11.apply(this,arguments)}}()},{key:"render",value:function(){var _this9=this;if(this.props.as_widget&&!this.props.preview)return React.createElement("div",null,"Page designer will load at runtime...");if(!this.state.paletteLoaded)return React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});var activePage=this.props.pages&&this.props.active_page_id&&this.props.pages[this.props.active_page_id]?this.props.pages[this.props.active_page_id]:{},WidgetPalette=(JSON.stringify(activePage.items||[]),activePage.page_id,JSON.stringify(this.device[this.props.selectedDevice]),PageDesignerWidget()),contentTabArry=[];this.props.pages&&Object.keys(this.props.pages).forEach(function(pageKey){if(-1==pageKey.indexOf("$")&&_this9.props.pages[pageKey]&&(_this9.props.pages[pageKey].is_open||_this9.props.pages[pageKey].isNew)){var page=_this9.props.pages[pageKey];contentTabArry.push(React.createElement("div",{className:"contentTabItems"},React.createElement("div",{key:"-1",className:pageKey==_this9.props.active_page_id?"contentTabActive":"contentTab",onClick:function(){return _this9.makePageActive(page)}},page.name),React.createElement(Close20,{className:"closeTab",onClick:function(){return _this9.removePage(page)}})))}});var contentTabs=React.createElement("div",{class:"contentTabs"},contentTabArry),previewContent=null,pagewidgets=[];this.props.activePageWidgets&&Object.keys(this.props.activePageWidgets).map(function(widgetId){var widgetName=widgetId;_this9.props.activePageWidgets[widgetId]&&_this9.props.activePageWidgets[widgetId].props&&_this9.props.activePageWidgets[widgetId].props.Name&&(widgetName=_this9.props.activePageWidgets[widgetId].props.Name),pagewidgets.push({name:widgetName,id:widgetId})});this.state.activeAccordion;"page"==this.state.accordionLevel&&0!=this.state.activeAccordion&&1!=this.state.activeAccordion&&4!=this.state.activeAccordion?this.setState({activeAccordion:1}):"widget"==this.state.accordionLevel&&2!=this.state.activeAccordion&&3!=this.state.activeAccordion&&this.setState({activeAccordion:2});var pageConfigurations=activePage.isNew?null:React.createElement(Tab,{label:"Settings",onClick:function(){_this9.setState({widgetChanged:1})}},React.createElement(Accordion,{align:"end",style:{overflowY:"auto"}},"page"==this.state.accordionLevel?React.createElement(React.Fragment,null,React.createElement(AccordionItem,{open:0==this.state.activeAccordion,style:{marginTop:10,overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this9.setState({activeAccordion:0})},onHeadingClick:function(){},title:"Page Properties"},React.createElement("page-designer-general",null)),React.createElement(AccordionItem,{open:4==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this9.setState({activeAccordion:4})},onHeadingClick:function(){},title:"Page Actions"},React.createElement("page-designer-page-actions",null)),React.createElement(AccordionItem,{open:1==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this9.setState({activeAccordion:1})},onHeadingClick:function(){},title:"Page Widgets"},React.createElement("srs-simple-list",{items:JSON.stringify(pagewidgets),varname:"widgets",unique:"true",singlecolumn:"true",alignment:"left"}))):React.createElement(React.Fragment,null,React.createElement("div",{className:"widgetPropHeader",onClick:function(e){_this9.setState({accordionLevel:"page",activeAccordion:1,active_widget_id:""})},style:{cursor:"pointer",display:"inline-block",clear:"both",float:"left",textAlign:"left",padding:10,border:"1px solid grey",backgroundColor:"#eff2f4",width:"100%"}},React.createElement(ArrowLeft,{style:{cursor:"pointer"}}),React.createElement("span",{style:{marginLeft:"30%",cursor:"pointer"}},"Widget Details")),React.createElement(AccordionItem,{open:2==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem",clear:"both"},onClick:function(){_this9.setState({activeAccordion:2})},onHeadingClick:function(){},title:"Widget Properties"},React.createElement("page-designer-props",null)),React.createElement(AccordionItem,{open:3==this.state.activeAccordion,style:{overflowY:"hidden",height:"fit-content",maxHeight:"40rem"},onClick:function(){_this9.setState({activeAccordion:3})},onHeadingClick:function(){},title:"Widget Actions"},React.createElement("page-designer-actions",{lite:!0})))));React.createElement("div",{className:"eidtor-toggle-maximize"},React.createElement(Minimize16,{onClick:function(){_this9.props.updateStore({updates:{showRightPane:!0}})}}));var slideSearch=React.createElement("slide-selection-panel",null),notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{styles:JSON.stringify({position:"fixed",width:"30%",right:10,minHeight:100,overflow:"auto",display:"block",zIndex:99999,bottom:5})}):null,previewItem=null;1==this.state.showPreview?previewItem=React.createElement("new-widget-action",{}):1==this.state.showCreateLayout&&(previewItem=React.createElement("layout-creator",{}));var previewComponent=1==this.state.showPreview||1==this.state.showCreateLayout?React.createElement("preview-component",{key:"designer",target:"designer"},previewItem):null,widgetPalette=React.createElement(Tab,{label:"Palette",style:{display:activePage.isNew?"none":"flex"},onClick:function(){_this9.setState({widgetChanged:2})}},React.createElement(WidgetPalette,{palettes:JSON.stringify(this.palettes)}));return React.createElement("div",{className:"sr-page-topCotainer"},React.createElement("style",null,'@import url("/thirdpartylib/gridstack/corestyles.css");'),notificationBar,previewComponent,React.createElement("div",{className:"sidebar"},React.createElement("div",{style:{position:"absolute",backgroundColor:"#77b07f",zIndex:2e4,top:80,left:0,height:"100vh",width:"2%",display:this.state.isSideBarOpen?"none":"block"}}),React.createElement("div",{style:{position:"relative",float:"right",width:32,height:32,cursor:"pointer",zIndex:100},onClick:function(e){if($(e.target)){var sideBarEl=$(e.target).closest(".sidebar");if(_this9.state.isSideBarOpen)sideBarEl.css("width","2%"),sideBarEl.css("min-width","2%"),sideBarEl.css("background-color","rgb(119, 174, 127)"),sideBarEl.parent().find(".sr-page-editorial").css("width","98%");else sideBarEl.css("width","18%"),sideBarEl.css("min-width","10%"),sideBarEl.css("background-color","white"),sideBarEl.parent().find(".sr-page-editorial").css("width","82%");_this9.setState({isSideBarOpen:!_this9.state.isSideBarOpen})}}},this.state.isSideBarOpen?React.createElement(ChevronLeft,{style:{cursor:"pointer"}}):React.createElement(ChevronRight,{style:{cursor:"pointer"}})),React.createElement("div",{className:"sr-new-file-menu"},React.createElement(HeaderMenu,{"aria-label":"File",menuLinkName:"File",style:{backgroundColor:"#181618"}},React.createElement(HeaderMenuItem,{onClick:this.handleNewFile},"New Page"),React.createElement(HeaderMenuItem,{onClick:this.deletePage},"Delete Page"),React.createElement(HeaderMenuItem,{onClick:this.clonePage},"Duplicate Page"),React.createElement(HeaderMenuItem,{onClick:this.createLayout},"New Layout"),React.createElement(HeaderMenuItem,{onClick:this.deleteLayout},"Delete Layout"),React.createElement(HeaderMenuItem,{onClick:this.autoPopulate},"Auto-Layout"))),React.createElement(Tabs,{className:"sr-nav-tab",selected:this.state.widgetChanged,style:{width:"15rem"}},React.createElement(Tab,{label:"Page List",onClick:function(){_this9.setState({widgetChanged:0})}},slideSearch),pageConfigurations,widgetPalette)),React.createElement("div",{className:"sr-page-editorial"},React.createElement("div",{className:"content dualmode",ref:"gridarea"},React.createElement("div",{className:"topContainerWithoutPreview"},contentTabs,React.createElement("div",{className:"trash"}),React.createElement("div",{className:"gridContent"},React.createElement("div",{className:"grid-stack grid-stack-96 gridCanvas",ref:"canvas",style:{display:activePage.isNew?"none":"block"}}),React.createElement("div",{className:"welcomePage",style:{display:activePage.isNew?"block":"none"}},React.createElement(Tile,{style:{backgroundColor:"rgb(127, 86, 33)",color:"white",textAlign:"center",fontSize:"xx-large",fontStyle:"italic"}},"Hello! Welcome to the new page creation form. "),React.createElement("page-designer-general",{style:{position:"absolute",width:"50%",marginLeft:"10%",marginTop:50}})))),previewContent)))}}]),_PageDesigner_}(React.Component),_export("PageDesigner",PageDesigner=function(props){return _PageDesigner_}),_export("PageDesigner",PageDesigner)}}}),System.register("component/studio/PageDesignerActions.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context4){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,_PageDesignerActions_,PageDesignerActions,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button}],execute:function(){_PageDesignerActions_=function(_React$Component){function _PageDesignerActions_(props){_classCallCheck(this,_PageDesignerActions_);var _this=_possibleConstructorReturn(this,(_PageDesignerActions_.__proto__||Object.getPrototypeOf(_PageDesignerActions_)).call(this,props));return _this.state={showPreview:!1,activeActionId:"",items:[],reload:!1},_this.getData=_this.getData.bind(_this),$ele.registerElement("NewWidgetAction","mmf","React"),_this}return _inherits(_PageDesignerActions_,_React$Component),_createClass(_PageDesignerActions_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var items;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.getData();case 2:items=_context.sent,this.setState({items:items});case 4:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"getData",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var widgetActionNames,filter,items;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return widgetActionNames=[],filter={where:{or:[{Widget:this.props.active_widget_id},{Widget:""}]}},_context2.next=4,$qry.getRecords("MetaWidgetAction",filter,["uid","Name"]);case 4:return(items=_context2.sent)&&items.length>0&&items.map(function(item){item.Name&&widgetActionNames.push({name:item.Name,id:item.uid})}),_context2.abrupt("return",widgetActionNames);case 7:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(prevProps){var items,activeActionId,_items;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(prevProps.showpreview==this.props.showpreview||prevProps.showpreview_target==this.props.showpreview_target||"widget_actions"!=this.props.showpreview_target){_context3.next=7;break}return _context3.next=3,this.getData();case 3:items=_context3.sent,this.setState({items:items,activeActionId:"",showPreview:this.props.showpreview,reload:!this.state.reload}),_context3.next=8;break;case 7:prevProps.active_list_item!=this.props.active_list_item&&(activeActionId=this.props.active_list_item.split("@@")[0],this.setState({activeActionId:activeActionId,showPreview:!0,reload:!this.state.reload}),this.props.updateStore({updates:{showpreview:!0}}));case 8:if(prevProps.active_widget_id==this.props.active_widget_id){_context3.next=13;break}return _context3.next=11,this.getData();case 11:_items=_context3.sent,this.setState({items:_items});case 13:case"end":return _context3.stop()}},_callee3,this)}));return function(_x){return _ref3.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this,actionProps={};this.state.activeActionId&&(actionProps.rowinfo=JSON.stringify({uid:this.state.activeActionId}));var previewItem=React.createElement("new-widget-action",actionProps),previewComponent=1==this.state.showPreview?React.createElement("preview-component",{key:"actionform",target:"widget_actions"},previewItem):null;return React.createElement(React.Fragment,null,previewComponent,React.createElement(Button,{waves:"light",size:"small",onClick:function(e){_this2.setState({activeActionId:"",showPreview:!0,reload:!_this2.state.reload}),_this2.props.updateStore({updates:{showpreview:!0}})}},"New"),this.state.items&&this.state.items.length>0?React.createElement("srs-simple-list",{items:JSON.stringify(this.state.items),varname:"widgetactions",unique:"true",singlecolumn:"true",alignment:"left"}):React.createElement("div",{style:{textAlign:"center"}},"No actions to show!"))}}]),_PageDesignerActions_}(React.Component),_export("PageDesignerActions",PageDesignerActions=function(props){return _PageDesignerActions_}),_export("PageDesignerActions",PageDesignerActions),_export("default",PageDesignerActions),_export("states",states=[{KeyName:"active_list_item",AccessPath:"active_list_item.widgetactions",DefaultValue:'{"active_list_item": {"widgetactions": ""}}'},{KeyName:"widgetActions",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}.actions",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {"${active_widget_id}": {"actions":{}}}}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id": ""}'},{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PageDesignerActions/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context4){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,_PageDesignerActions_,PageDesignerActions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button}],execute:function(){_PageDesignerActions_=function(_React$Component){function _PageDesignerActions_(props){_classCallCheck(this,_PageDesignerActions_);var _this=_possibleConstructorReturn(this,(_PageDesignerActions_.__proto__||Object.getPrototypeOf(_PageDesignerActions_)).call(this,props));return _this.state={showPreview:!1,activeActionId:"",items:[],reload:!1},_this.getData=_this.getData.bind(_this),$ele.registerElement("NewWidgetAction","mmf","React"),_this}return _inherits(_PageDesignerActions_,_React$Component),_createClass(_PageDesignerActions_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var items;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.getData();case 2:items=_context.sent,this.setState({items:items});case 4:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"getData",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var widgetActionNames,filter,items;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return widgetActionNames=[],filter={where:{or:[{Widget:this.props.active_widget_id},{Widget:""}]}},_context2.next=4,$qry.getRecords("MetaWidgetAction",filter,["uid","Name"]);case 4:return(items=_context2.sent)&&items.length>0&&items.map(function(item){item.Name&&widgetActionNames.push({name:item.Name,id:item.uid})}),_context2.abrupt("return",widgetActionNames);case 7:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(prevProps){var items,activeActionId,_items;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(prevProps.showpreview==this.props.showpreview||prevProps.showpreview_target==this.props.showpreview_target||"widget_actions"!=this.props.showpreview_target){_context3.next=7;break}return _context3.next=3,this.getData();case 3:items=_context3.sent,this.setState({items:items,activeActionId:"",showPreview:this.props.showpreview,reload:!this.state.reload}),_context3.next=8;break;case 7:prevProps.active_list_item!=this.props.active_list_item&&(activeActionId=this.props.active_list_item.split("@@")[0],this.setState({activeActionId:activeActionId,showPreview:!0,reload:!this.state.reload}),this.props.updateStore({updates:{showpreview:!0}}));case 8:if(prevProps.active_widget_id==this.props.active_widget_id){_context3.next=13;break}return _context3.next=11,this.getData();case 11:_items=_context3.sent,this.setState({items:_items});case 13:case"end":return _context3.stop()}},_callee3,this)}));return function(_x){return _ref3.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this,actionProps={};this.state.activeActionId&&(actionProps.rowinfo=JSON.stringify({uid:this.state.activeActionId}));var previewItem=React.createElement("new-widget-action",actionProps),previewComponent=1==this.state.showPreview?React.createElement("preview-component",{key:"actionform",target:"widget_actions"},previewItem):null;return React.createElement(React.Fragment,null,previewComponent,React.createElement(Button,{waves:"light",size:"small",onClick:function(e){_this2.setState({activeActionId:"",showPreview:!0,reload:!_this2.state.reload}),_this2.props.updateStore({updates:{showpreview:!0}})}},"New"),this.state.items&&this.state.items.length>0?React.createElement("srs-simple-list",{items:JSON.stringify(this.state.items),varname:"widgetactions",unique:"true",singlecolumn:"true",alignment:"left"}):React.createElement("div",{style:{textAlign:"center"}},"No actions to show!"))}}]),_PageDesignerActions_}(React.Component),_export("PageDesignerActions",PageDesignerActions=function(props){return _PageDesignerActions_}),_export("PageDesignerActions",PageDesignerActions)}}}),System.register("component/studio/PageDesignerGeneral.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/settings/16","@carbon/icons-react/lib/launch/16","client/script/mmf/GraphQLDataUtil.js","lodash.clonedeep","component/studio/PreviewComponent/Definition.js","component/studio/ShowTableMappingDialog/Definition.js?now=126"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,Button,Select,SelectItem,Settings32,Launch16,GraphQLDataUtil,cloneDeep,_PageDesignerGeneral_,PageDesignerGeneral,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,Button=_carbonComponentsReact.Button,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_carbonIconsReactLibSettings){Settings32=_carbonIconsReactLibSettings.default},function(_carbonIconsReactLibLaunch){Launch16=_carbonIconsReactLibLaunch.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_componentStudioPreviewComponentDefinitionJs){_componentStudioPreviewComponentDefinitionJs.default},function(_componentStudioShowTableMappingDialogDefinitionJsNow){_componentStudioShowTableMappingDialogDefinitionJsNow.default}],execute:function(){_PageDesignerGeneral_=function(_React$Component){function _PageDesignerGeneral_(props){_classCallCheck(this,_PageDesignerGeneral_);var _this=_possibleConstructorReturn(this,(_PageDesignerGeneral_.__proto__||Object.getPrototypeOf(_PageDesignerGeneral_)).call(this,props));return _this.state={addedFields:[],pagename_invalid:!1,pagescope_invalid:!1,pagepath_invalid:!1,pagemodel_invalid:!1,pageNameUpdated:!1,keyValueLists:{},reload:!1,activepage:_this.props.activepage?_this.props.activepage:{}},_this.updateSlideName=_this.updateSlideName.bind(_this),_this.updateSlideScope=_this.updateSlideScope.bind(_this),_this.updateSlidePath=_this.updateSlidePath.bind(_this),_this.removeSpecialCharacters=_this.removeSpecialCharacters.bind(_this),_this}return _inherits(_PageDesignerGeneral_,_React$Component),_createClass(_PageDesignerGeneral_,[{key:"removeSpecialCharacters",value:function(val){return val.replace(/[^a-zA-Z0-9]/g,"_")}},{key:"updateSlideName",value:function(event){var activepage=cloneDeep(this.state.activepage);activepage.name=this.removeSpecialCharacters(event.target.value),this.setState({pageNameUpdated:!0,activepage:activepage})}},{key:"updateSlideScope",value:function(event){var activepage=cloneDeep(this.state.activepage);activepage.scope=this.removeSpecialCharacters(event.target.value),this.setState({activepage:activepage})}},{key:"updateSlidePath",value:function(event){var activepage=cloneDeep(this.state.activepage);activepage.path=event.target.value,this.setState({activepage:activepage})}},{key:"showTableMappingDialog",value:function(){this.props.updateStore({updates:{showpreview:!0}}),this.setState({showPreview:!0,reload:!this.state.reload})}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this2=this;if(prevProps.active_page_id!=this.props.active_page_id||prevProps.activepage.isNew!=this.props.activepage.isNew)setTimeout(function(){return _this2.setState({activepage:_this2.props.activepage})});else if(prevProps.activepage.currentLayout!=this.props.activepage.currentLayout)setTimeout(function(){return _this2.setState({activepage:_this2.props.activepage})});else if(prevProps.activepage.model!=this.props.activepage.model){var activePage=cloneDeep(this.state.activepage);activePage.isNew=this.props.activepage.isNew,activePage.model=this.props.activepage.model,activePage.modelscope=this.props.activepage.modelscope,this.setState({activepage:activePage})}prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"general"==this.props.showpreview_target&&this.setState({showPreview:!1,reload:!this.state.reload}),_.isEqual(prevProps.keyvaluepair,this.props.keyvaluepair)||this.props.keyvaluepair&&Object.keys(this.props.keyvaluepair).length>0&&Object.keys(this.props.keyvaluepair).map(function(varName){if(!_.isEqual(prevProps.keyvaluepair[varName],_this2.props.keyvaluepair[varName])){var newKeyValueLists=cloneDeep(_this2.state.keyValueLists);newKeyValueLists[varName]=cloneDeep(_this2.props.keyvaluepair[varName]),_this2.setState({keyValueLists:newKeyValueLists})}})}},{key:"closePreviewWindow",value:function(){this.setState({reload:!this.state.reload})}},{key:"render",value:function(){var previewComponent,_this3=this;previewComponent=1==this.state.showPreview?React.createElement("preview-component",{target:"general"},React.createElement("show-table-mapping-dialog",null)):null;var extraProps={},pageParameterItems=[];this.state.keyValueLists&&this.state.keyValueLists[this.props.active_page_id+"_params"]?pageParameterItems=this.state.keyValueLists[this.props.active_page_id+"_params"]:this.state.activepage.props&&Object.keys(this.state.activepage.props).map(function(paramKey){pageParameterItems.push({name:paramKey,value:_this3.state.activepage.props[paramKey]})});var _ref2,_ref,layoutList=[];this.state.activepage&&this.state.activepage.layouts&&this.state.activepage.layouts.slots?Object.keys(this.state.activepage.layouts.slots).map(function(layoutName){return layoutList.push(React.createElement(SelectItem,{value:layoutName,text:layoutName}))}):layoutList.push(React.createElement(SelectItem,{value:"default",text:"default"}));return React.createElement("div",{className:"page-gen-body"},previewComponent,React.createElement(TextInput,_extends({name:"slideName",className:"formFieldInputText"},extraProps,{labelText:"Name",helperText:"*Required",placeholder:"Enter Page Name...",invalid:this.state.pagename_invalid,invalidText:"Value Required",value:this.state.activepage&&this.state.activepage.name||"",onChange:this.updateSlideName})),React.createElement(TextInput,{name:"slideScope",className:"formFieldInputText",helperText:"*Required",readOnly:"true",labelText:"Scope",placeholder:"Enter Page Scope...",invalid:this.state.pagescope_invalid,invalidText:"Value Required",value:this.state.activepage&&this.state.activepage.scope||this.props.currentscope||"",onChange:this.updateSlideScope}),React.createElement("div",{style:{display:"flex",width:"90%"}},React.createElement(TextInput,_extends({name:"slidePath",className:"formFieldInputText",helperText:"*Required"},extraProps,{labelText:"Path",invalid:this.state.pagepath_invalid,invalidText:"Value Required",placeholder:"Enter Page Path...",value:this.state.activepage&&this.state.activepage.path||"",onChange:this.updateSlidePath})),this.state.activepage&&1!=this.state.activepage.isNew?React.createElement("div",{style:{marginTop:35,cursor:"pointer"}},React.createElement(Launch16,{onClick:function(){return window.open(_this3.state.activepage.path)}})):null),React.createElement("div",{className:"pageType",style:{textAlign:"left"}},React.createElement(Select,{labelText:"Type",defaultValue:this.state.activepage?this.state.activepage.pageType:"",value:this.state.activepage?this.state.activepage.pageType:"",onChange:function(e){var activepage=cloneDeep(_this3.state.activepage);activepage.pageType=e.target.value,_this3.setState({activepage:activepage})}},React.createElement(SelectItem,{value:"",text:"Choose page type"}),React.createElement(SelectItem,{value:"CreateView",text:"CreateView"}),React.createElement(SelectItem,{value:"EditView",text:"EditView"}),React.createElement(SelectItem,{value:"FreeForm",text:"Free Form"}))),React.createElement("div",{className:"pageType",style:{textAlign:"left"}},React.createElement(Select,{labelText:"Layout",defaultValue:this.state.activepage&&this.state.activepage.currentLayout?this.state.activepage.currentLayout:"default",value:this.state.activepage?this.state.activepage.currentLayout:"default",onChange:function(e){var activepage=cloneDeep(_this3.props.activepage);activepage.currentLayout=e.target.value,_this3.setState({activepage:activepage}),_this3.props.updateStore({updates:{activepage:activepage}})}},layoutList)),React.createElement("srs-key-value-pair",{varname:this.props.active_page_id+"_params",items:JSON.stringify(pageParameterItems),label:"Page Parameters",placeholder_name:"Enter Param Name...",placeholder_value:"Enter Default Value..."}),!this.state.activepage||"CreateView"!=this.state.activepage.pageType&&"EditView"!=this.state.activepage.pageType?null:React.createElement("div",{className:"field-mapper"},React.createElement(TextInput,{name:"slideModel",className:"formFieldInputText",labelText:"Model",placeholder:"Click gear icon to set the model",helperText:!this.state.activepage||"CreateView"!=this.state.activepage.pageType&&"EditView"!=this.state.activepage.pageType?"":"*Required",invalid:this.state.pagemodel_invalid,invalidText:"Value Required",value:this.state.activepage&&this.state.activepage.model||"",readOnly:!0}),this.state.activepage?React.createElement("div",{className:"mapper-adv"},React.createElement(Settings32,{onClick:function(){_this3.showTableMappingDialog()}})):null),null,React.createElement(Button,{waves:"light",size:"small",style:{marginTop:10,display:this.state.activepage&&this.state.activepage.isNew?"none":"block"},onClick:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(e){var payload,kvparams,queryParams,slideProps,activePage,widgetRecords,visitedWidgetIds,widgetId,widgetActions,widgetActionIds,widgetActionId,widgetActionPayload,nameParts,newWidgetActionName;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return payload={slideId:_this3.props.active_page_id,Name:_this3.state.activepage.name,Scope:_this3.state.activepage.scope?_this3.state.activepage.scope:_this3.props.currentscope,Path:_this3.state.activepage.path,Type:_this3.state.activepage.pageType?_this3.state.activepage.pageType:"CreateView"},_context.next=3,$qry._run("mutation($input: MetaSlideUpsertWithWhereInput!){\n                                        MetaSlideUpsertWithWhere(input: $input){\n                                            obj{\n                                                uid\n                                            }\n                                        }\n                                    }",{input:{where:{uid:_this3.props.active_page_id},data:payload}},"data.MetaSlideUpsertWithWhere.obj");case 3:if(!_this3.props.keyvaluepairs||!_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"]){_context.next=15;break}if(kvparams=_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"],queryParams=[],slideProps={},kvparams.map(function(paramKeyValue){paramKeyValue.name&&(queryParams.push({Name:paramKeyValue.name,Value:paramKeyValue.value,PropsSlide:_this3.props.active_page_id}),slideProps[paramKeyValue.name]=paramKeyValue.value)}),_context.t0=queryParams&&queryParams.length>0,!_context.t0){_context.next=12;break}return _context.next=12,GraphQLDataUtil().saveMultiple("pd.saveMetaSlideProps",queryParams);case 12:(activePage=cloneDeep(_this3.state.activepage)).props=slideProps,_this3.setState({activepage:activePage});case 15:if(!_this3.state.pageNameUpdated){_context.next=45;break}return _context.next=18,$qry._run('query($input:JSON){\n                                        MetaSlideSlot{\n                                            MetaSlideSlotFind(filter: $input) @_(get: "edges"){\n                                                edges @_(keyBy: "node.Widget", mapValues:"node"){\n                                                    node{\n                                                        uid\n                                                        Widget\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }',{input:{where:{Slide:_this3.props.active_page_id}}},"data.MetaSlideSlot.MetaSlideSlotFind");case 18:if(!((widgetRecords=_context.sent)&&Object.keys(widgetRecords).length>0)){_context.next=44;break}visitedWidgetIds=[],_context.t1=_regeneratorRuntime.keys(widgetRecords);case 22:if((_context.t2=_context.t1()).done){_context.next=44;break}if(widgetId=_context.t2.value,-1!=visitedWidgetIds.indexOf(widgetId)){_context.next=42;break}return visitedWidgetIds.push(widgetId),_context.next=28,$qry._run('query($input:JSON){\n                                                    MetaWidgetAction{\n                                                        MetaWidgetActionFind(filter: $input) @_(get: "edges"){\n                                                            edges @_(keyBy: "node.uid", mapValues:"node"){\n                                                                node{\n                                                                    uid\n                                                                    Name\n                                                                    Scope\n                                                                    Order\n                                                                    Widget\n                                                                    Definition\n                                                                    Active\n                                                                    Trigger\n                                                                }\n                                                            }\n                                                        }\n                                                    }\n                                                }',{input:{where:{Widget:widgetId}}},"data.MetaWidgetAction.MetaWidgetActionFind");case 28:if(widgetActions=_context.sent,!((widgetActionIds=Object.keys(widgetActions))&&widgetActionIds.length>0)){_context.next=42;break}_context.t3=_regeneratorRuntime.keys(widgetActions);case 32:if((_context.t4=_context.t3()).done){_context.next=42;break}return widgetActionId=_context.t4.value,widgetActionPayload=cloneDeep(widgetActions[widgetActionId]),nameParts=widgetActionPayload.Name.split("@@"),newWidgetActionName=nameParts[0]+"@@"+_this3.state.activepage.name+"_"+_this3.state.activepage.scope,widgetActionPayload.Name=newWidgetActionName,_context.next=40,$qry._run("mutation($input: MetaWidgetActionUpsertWithWhereInput!){\n                                                                MetaWidgetActionUpsertWithWhere(input: $input){\n                                                                    obj{\n                                                                        uid\n                                                                    }\n                                                                }\n                                                            }",{input:{where:{uid:widgetActionId},data:widgetActionPayload}},"data.MetaWidgetActionUpsertWithWhere.obj");case 40:_context.next=32;break;case 42:_context.next=22;break;case 44:_this3.setState({pageNameUpdated:!1});case 45:_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page updated successfully!"});case 46:case"end":return _context.stop()}},_callee,_this3)})),function(_x){return _ref.apply(this,arguments)})},"Update"),React.createElement(Button,{waves:"light",size:"small",style:{clear:"both",marginTop:10,display:this.state.activepage&&this.state.activepage.isNew?"block":"none"},onClick:(_ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(e){var payload,isValid,pagesInStore,slideRes,activePageInStore,kvparams,queryParams,slots,widgets,slideProps,slotsAndWidgets,tobeActivePage;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(payload={Name:_this3.state.activepage.name,Scope:_this3.state.activepage.scope?_this3.state.activepage.scope:_this3.props.currentscope,Path:_this3.state.activepage.path,Type:_this3.state.activepage.pageType?_this3.state.activepage.pageType:"CreateView"},isValid=!0,payload.Name&&"Unnamed"!=payload.Name||(isValid=!1,_this3.setState({pagename_invalid:!0})),payload.Scope||(isValid=!1,_this3.setState({pagescope_invalid:!0})),payload.Path||(isValid=!1,_this3.setState({pagepath_invalid:!0})),_this3.state.activepage.model||"CreateView"!=payload.Type&&"EditView"!=payload.Type||(isValid=!1,_this3.setState({pagemodel_invalid:!0})),isValid){_context2.next=10;break}_this3.props.addErrorMessage({title:"Error - ",subtitle:"Please fill the mandatory fields and try again...!"}),_context2.next=48;break;case 10:return pagesInStore=_this3.props.pages,_context2.next=13,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlide",payload);case 13:if(!(slideRes=_context2.sent)||!slideRes.uid){_context2.next=48;break}if(activePageInStore=pagesInStore[_this3.props.active_page_id],(activePageInStore=_extends({},activePageInStore,_this3.state.activepage)).isNew&&(activePageInStore.isNew=!1,activePageInStore.is_open=!0,pagesInStore[slideRes.uid]=activePageInStore,delete pagesInStore[_this3.props.active_page_id]),!_this3.props.keyvaluepairs||!_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"]){_context2.next=26;break}if(kvparams=_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"],queryParams=[],kvparams.map(function(paramKeyValue){paramKeyValue.name&&queryParams.push({Name:paramKeyValue.name,Value:paramKeyValue.value,PropsSlide:slideRes.uid})}),_context2.t0=queryParams&&queryParams.length>0,!_context2.t0){_context2.next=26;break}return _context2.next=26,GraphQLDataUtil().saveMultiple("pd.saveMetaSlideProps",queryParams);case 26:if("CreateView"!=payload.Type&&"EditView"!=payload.Type){_context2.next=31;break}return _context2.next=29,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelName",Value:activePageInStore.model,PropsSlide:slideRes.uid});case 29:return _context2.next=31,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelScope",Value:activePageInStore.modelscope,PropsSlide:slideRes.uid});case 31:return _context2.next=33,$script.runAtServer("pd.addDefaultWidget",{slideId:slideRes.uid});case 33:return slots={},widgets={},_context2.next=37,$qry.run("mmf.getSlideProps",{pageId:slideRes.uid});case 37:return slideProps=_context2.sent,_context2.next=40,$qry.run("pd.getExistingSlotsbySlideId",{Slide:slideRes.uid});case 40:(slotsAndWidgets=_context2.sent)&&slotsAndWidgets.length>0&&slotsAndWidgets.forEach(function(slotWidget){var slot=slotWidget.node;if(slot&&slot.uid){var slotData={};slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.width=slot.width||0,slotData.height=slot.height,slotData.minwidth=slot.minwidth,slotData.minheight=slot.minheight,slotData.maxwidth=slot.maxwidth,slotData.maxheight=slot.maxheight,slotData.resize=slot.resize,slotData.move=slot.move,slotData.Slide=slot.Slide,slotData.Widget=slot.Widget,slots[slot.uid]=slotData;var widgetData=slot.slotWidget;if(widgetData&&widgetData.uid){var widget={};widget.id=widgetData.uid,widget.Component=widgetData.Component,widget.name=widgetData.component.Name;var widgetProps=widgetData.widgetproperties;if(widgetProps&&widgetProps.edges&&widgetProps.edges.length>0){var props={};widgetProps.edges.forEach(function(propNode){var prop=propNode.node;props[prop.name]=prop.value}),widget.props=props}widget.props=widget.props||{};var componentProps=widgetData.component.Props,widgetPropNames=Object.keys(widget.props);componentProps&&Object.keys(componentProps).length>0&&Object.keys(componentProps).map(function(componentPropName){widgetPropNames&&-1==widgetPropNames.indexOf(componentPropName)&&(widget.props[componentPropName]=componentProps[componentPropName])}),widgets[widgetData.uid]=widget}}}),(tobeActivePage=pagesInStore[slideRes.uid]).slots=slots,tobeActivePage.props=slideProps,tobeActivePage.widgets=widgets,_this3.props.updateStore({updates:{active_page_id:slideRes.uid,pages:pagesInStore,reload_slides:!0}}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page created!"});case 48:case"end":return _context2.stop()}},_callee2,_this3)})),function(_x2){return _ref2.apply(this,arguments)})},"Save"))}}]),_PageDesignerGeneral_}(React.Component),_export("PageDesignerGeneral",PageDesignerGeneral=function(props){return _PageDesignerGeneral_}),_export("PageDesignerGeneral",PageDesignerGeneral),_export("default",PageDesignerGeneral),_export("states",states=[{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": ""}'},{KeyName:"reload_slides",AccessPath:"reload_slides",DefaultValue:'{"reload_slides": false}'},{KeyName:"keyvaluepairs",AccessPath:"keyvaluepair",DefaultValue:'{"keyvaluepair": {}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"pages",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'},{KeyName:"activepage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PreviewComponent/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/close/32","component/studio/ErrorBoundary/Definition.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Close32,ErrorBoundary,_PreviewComponent_,PreviewComponent;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary}],execute:function(){_PreviewComponent_=function(_React$Component){function _PreviewComponent_(props){_classCallCheck(this,_PreviewComponent_);var _this=_possibleConstructorReturn(this,(_PreviewComponent_.__proto__||Object.getPrototypeOf(_PreviewComponent_)).call(this,props));return _this.getPreviewPane=_this.getPreviewPane.bind(_this),_this.getComponentToRender=_this.getComponentToRender.bind(_this),_this.cancelPreview=_this.cancelPreview.bind(_this),_this.showPreview=_this.showPreview.bind(_this),_this.hidePreview=_this.hidePreview.bind(_this),_this.state={reload:!1},_this}return _inherits(_PreviewComponent_,_React$Component),_createClass(_PreviewComponent_,[{key:"componentDidMount",value:function(){this.showPreview()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showpreview!=this.props.showpreview&&this.setState({reload:!this.state.reload})}},{key:"showPreview",value:function(){this.props.updateStore&&!this.props.showpreview&&this.props.updateStore({updates:{showpreview:!0}})}},{key:"hidePreview",value:function(){this.props.updateStore&&this.props.updateStore({updates:{showpreview:"false",showpreview_target:this.props.target,ide_reload:!this.props.ide_reload}})}},{key:"getComponentToRender",value:function(){return React.createElement("div",{style:{position:"fixed",top:"16%",left:"20%",backgroundColor:"white",zIndex:9999,marginTop:5,border:"1px solid #848484",padding:5,width:"60%",height:"60%",overflow:"scroll"}},React.createElement("slot",null))}},{key:"getPreviewPane",value:function(){var content2Preview=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(content2Preview);return React.createElement("div",null,React.createElement("div",{style:{position:"fixed",backgroundColor:"#000000",opacity:.5,zIndex:9999,top:0,left:0,height:2e3,width:2e3}}),React.createElement(Close32,{className:"cancelPreview",style:{position:"fixed",zIndex:99999,backgroundColor:"white",top:"15%",float:"right",border:"1px solid black",borderRadius:"50%",right:"19%",color:"black"},onClick:this.cancelPreview}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.hidePreview()}},{key:"render",value:function(){var previewContent=this.getPreviewPane(),notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",null):null;return 1==this.props.showpreview||"true"==this.props.showpreview?React.createElement("div",null,notificationBar,previewContent):null}}]),_PreviewComponent_}(React.Component),_export("PreviewComponent",PreviewComponent=function(props){return _PreviewComponent_}),_export("PreviewComponent",PreviewComponent)}}}),System.register("component/studio/PageDesignerGeneral/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/settings/16","@carbon/icons-react/lib/launch/16","client/script/mmf/GraphQLDataUtil.js","lodash.clonedeep","component/studio/PreviewComponent/Definition.js","component/studio/ShowTableMappingDialog/Definition.js?now=126"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,Button,Select,SelectItem,Settings32,Launch16,GraphQLDataUtil,cloneDeep,_PageDesignerGeneral_,PageDesignerGeneral;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,Button=_carbonComponentsReact.Button,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_carbonIconsReactLibSettings){Settings32=_carbonIconsReactLibSettings.default},function(_carbonIconsReactLibLaunch){Launch16=_carbonIconsReactLibLaunch.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_componentStudioPreviewComponentDefinitionJs){_componentStudioPreviewComponentDefinitionJs.default},function(_componentStudioShowTableMappingDialogDefinitionJsNow){_componentStudioShowTableMappingDialogDefinitionJsNow.default}],execute:function(){_PageDesignerGeneral_=function(_React$Component){function _PageDesignerGeneral_(props){_classCallCheck(this,_PageDesignerGeneral_);var _this=_possibleConstructorReturn(this,(_PageDesignerGeneral_.__proto__||Object.getPrototypeOf(_PageDesignerGeneral_)).call(this,props));return _this.state={addedFields:[],pagename_invalid:!1,pagescope_invalid:!1,pagepath_invalid:!1,pagemodel_invalid:!1,pageNameUpdated:!1,keyValueLists:{},reload:!1,activepage:_this.props.activepage?_this.props.activepage:{}},_this.updateSlideName=_this.updateSlideName.bind(_this),_this.updateSlideScope=_this.updateSlideScope.bind(_this),_this.updateSlidePath=_this.updateSlidePath.bind(_this),_this.removeSpecialCharacters=_this.removeSpecialCharacters.bind(_this),_this}return _inherits(_PageDesignerGeneral_,_React$Component),_createClass(_PageDesignerGeneral_,[{key:"removeSpecialCharacters",value:function(val){return val.replace(/[^a-zA-Z0-9]/g,"_")}},{key:"updateSlideName",value:function(event){var activepage=cloneDeep(this.state.activepage);activepage.name=this.removeSpecialCharacters(event.target.value),this.setState({pageNameUpdated:!0,activepage:activepage})}},{key:"updateSlideScope",value:function(event){var activepage=cloneDeep(this.state.activepage);activepage.scope=this.removeSpecialCharacters(event.target.value),this.setState({activepage:activepage})}},{key:"updateSlidePath",value:function(event){var activepage=cloneDeep(this.state.activepage);activepage.path=event.target.value,this.setState({activepage:activepage})}},{key:"showTableMappingDialog",value:function(){this.props.updateStore({updates:{showpreview:!0}}),this.setState({showPreview:!0,reload:!this.state.reload})}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this2=this;if(prevProps.active_page_id!=this.props.active_page_id||prevProps.activepage.isNew!=this.props.activepage.isNew)setTimeout(function(){return _this2.setState({activepage:_this2.props.activepage})});else if(prevProps.activepage.currentLayout!=this.props.activepage.currentLayout)setTimeout(function(){return _this2.setState({activepage:_this2.props.activepage})});else if(prevProps.activepage.model!=this.props.activepage.model){var activePage=cloneDeep(this.state.activepage);activePage.isNew=this.props.activepage.isNew,activePage.model=this.props.activepage.model,activePage.modelscope=this.props.activepage.modelscope,this.setState({activepage:activePage})}prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"general"==this.props.showpreview_target&&this.setState({showPreview:!1,reload:!this.state.reload}),_.isEqual(prevProps.keyvaluepair,this.props.keyvaluepair)||this.props.keyvaluepair&&Object.keys(this.props.keyvaluepair).length>0&&Object.keys(this.props.keyvaluepair).map(function(varName){if(!_.isEqual(prevProps.keyvaluepair[varName],_this2.props.keyvaluepair[varName])){var newKeyValueLists=cloneDeep(_this2.state.keyValueLists);newKeyValueLists[varName]=cloneDeep(_this2.props.keyvaluepair[varName]),_this2.setState({keyValueLists:newKeyValueLists})}})}},{key:"closePreviewWindow",value:function(){this.setState({reload:!this.state.reload})}},{key:"render",value:function(){var previewComponent,_this3=this;previewComponent=1==this.state.showPreview?React.createElement("preview-component",{target:"general"},React.createElement("show-table-mapping-dialog",null)):null;var extraProps={},pageParameterItems=[];this.state.keyValueLists&&this.state.keyValueLists[this.props.active_page_id+"_params"]?pageParameterItems=this.state.keyValueLists[this.props.active_page_id+"_params"]:this.state.activepage.props&&Object.keys(this.state.activepage.props).map(function(paramKey){pageParameterItems.push({name:paramKey,value:_this3.state.activepage.props[paramKey]})});var _ref2,_ref,layoutList=[];this.state.activepage&&this.state.activepage.layouts&&this.state.activepage.layouts.slots?Object.keys(this.state.activepage.layouts.slots).map(function(layoutName){return layoutList.push(React.createElement(SelectItem,{value:layoutName,text:layoutName}))}):layoutList.push(React.createElement(SelectItem,{value:"default",text:"default"}));return React.createElement("div",{className:"page-gen-body"},previewComponent,React.createElement(TextInput,_extends({name:"slideName",className:"formFieldInputText"},extraProps,{labelText:"Name",helperText:"*Required",placeholder:"Enter Page Name...",invalid:this.state.pagename_invalid,invalidText:"Value Required",value:this.state.activepage&&this.state.activepage.name||"",onChange:this.updateSlideName})),React.createElement(TextInput,{name:"slideScope",className:"formFieldInputText",helperText:"*Required",readOnly:"true",labelText:"Scope",placeholder:"Enter Page Scope...",invalid:this.state.pagescope_invalid,invalidText:"Value Required",value:this.state.activepage&&this.state.activepage.scope||this.props.currentscope||"",onChange:this.updateSlideScope}),React.createElement("div",{style:{display:"flex",width:"90%"}},React.createElement(TextInput,_extends({name:"slidePath",className:"formFieldInputText",helperText:"*Required"},extraProps,{labelText:"Path",invalid:this.state.pagepath_invalid,invalidText:"Value Required",placeholder:"Enter Page Path...",value:this.state.activepage&&this.state.activepage.path||"",onChange:this.updateSlidePath})),this.state.activepage&&1!=this.state.activepage.isNew?React.createElement("div",{style:{marginTop:35,cursor:"pointer"}},React.createElement(Launch16,{onClick:function(){return window.open(_this3.state.activepage.path)}})):null),React.createElement("div",{className:"pageType",style:{textAlign:"left"}},React.createElement(Select,{labelText:"Type",defaultValue:this.state.activepage?this.state.activepage.pageType:"",value:this.state.activepage?this.state.activepage.pageType:"",onChange:function(e){var activepage=cloneDeep(_this3.state.activepage);activepage.pageType=e.target.value,_this3.setState({activepage:activepage})}},React.createElement(SelectItem,{value:"",text:"Choose page type"}),React.createElement(SelectItem,{value:"CreateView",text:"CreateView"}),React.createElement(SelectItem,{value:"EditView",text:"EditView"}),React.createElement(SelectItem,{value:"FreeForm",text:"Free Form"}))),React.createElement("div",{className:"pageType",style:{textAlign:"left"}},React.createElement(Select,{labelText:"Layout",defaultValue:this.state.activepage&&this.state.activepage.currentLayout?this.state.activepage.currentLayout:"default",value:this.state.activepage?this.state.activepage.currentLayout:"default",onChange:function(e){var activepage=cloneDeep(_this3.props.activepage);activepage.currentLayout=e.target.value,_this3.setState({activepage:activepage}),_this3.props.updateStore({updates:{activepage:activepage}})}},layoutList)),React.createElement("srs-key-value-pair",{varname:this.props.active_page_id+"_params",items:JSON.stringify(pageParameterItems),label:"Page Parameters",placeholder_name:"Enter Param Name...",placeholder_value:"Enter Default Value..."}),!this.state.activepage||"CreateView"!=this.state.activepage.pageType&&"EditView"!=this.state.activepage.pageType?null:React.createElement("div",{className:"field-mapper"},React.createElement(TextInput,{name:"slideModel",className:"formFieldInputText",labelText:"Model",placeholder:"Click gear icon to set the model",helperText:!this.state.activepage||"CreateView"!=this.state.activepage.pageType&&"EditView"!=this.state.activepage.pageType?"":"*Required",invalid:this.state.pagemodel_invalid,invalidText:"Value Required",value:this.state.activepage&&this.state.activepage.model||"",readOnly:!0}),this.state.activepage?React.createElement("div",{className:"mapper-adv"},React.createElement(Settings32,{onClick:function(){_this3.showTableMappingDialog()}})):null),null,React.createElement(Button,{waves:"light",size:"small",style:{marginTop:10,display:this.state.activepage&&this.state.activepage.isNew?"none":"block"},onClick:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(e){var payload,kvparams,queryParams,slideProps,activePage,widgetRecords,visitedWidgetIds,widgetId,widgetActions,widgetActionIds,widgetActionId,widgetActionPayload,nameParts,newWidgetActionName;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return payload={slideId:_this3.props.active_page_id,Name:_this3.state.activepage.name,Scope:_this3.state.activepage.scope?_this3.state.activepage.scope:_this3.props.currentscope,Path:_this3.state.activepage.path,Type:_this3.state.activepage.pageType?_this3.state.activepage.pageType:"CreateView"},_context.next=3,$qry._run("mutation($input: MetaSlideUpsertWithWhereInput!){\n                                        MetaSlideUpsertWithWhere(input: $input){\n                                            obj{\n                                                uid\n                                            }\n                                        }\n                                    }",{input:{where:{uid:_this3.props.active_page_id},data:payload}},"data.MetaSlideUpsertWithWhere.obj");case 3:if(!_this3.props.keyvaluepairs||!_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"]){_context.next=15;break}if(kvparams=_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"],queryParams=[],slideProps={},kvparams.map(function(paramKeyValue){paramKeyValue.name&&(queryParams.push({Name:paramKeyValue.name,Value:paramKeyValue.value,PropsSlide:_this3.props.active_page_id}),slideProps[paramKeyValue.name]=paramKeyValue.value)}),_context.t0=queryParams&&queryParams.length>0,!_context.t0){_context.next=12;break}return _context.next=12,GraphQLDataUtil().saveMultiple("pd.saveMetaSlideProps",queryParams);case 12:(activePage=cloneDeep(_this3.state.activepage)).props=slideProps,_this3.setState({activepage:activePage});case 15:if(!_this3.state.pageNameUpdated){_context.next=45;break}return _context.next=18,$qry._run('query($input:JSON){\n                                        MetaSlideSlot{\n                                            MetaSlideSlotFind(filter: $input) @_(get: "edges"){\n                                                edges @_(keyBy: "node.Widget", mapValues:"node"){\n                                                    node{\n                                                        uid\n                                                        Widget\n                                                    }\n                                                }\n                                            }\n                                        }\n                                    }',{input:{where:{Slide:_this3.props.active_page_id}}},"data.MetaSlideSlot.MetaSlideSlotFind");case 18:if(!((widgetRecords=_context.sent)&&Object.keys(widgetRecords).length>0)){_context.next=44;break}visitedWidgetIds=[],_context.t1=_regeneratorRuntime.keys(widgetRecords);case 22:if((_context.t2=_context.t1()).done){_context.next=44;break}if(widgetId=_context.t2.value,-1!=visitedWidgetIds.indexOf(widgetId)){_context.next=42;break}return visitedWidgetIds.push(widgetId),_context.next=28,$qry._run('query($input:JSON){\n                                                    MetaWidgetAction{\n                                                        MetaWidgetActionFind(filter: $input) @_(get: "edges"){\n                                                            edges @_(keyBy: "node.uid", mapValues:"node"){\n                                                                node{\n                                                                    uid\n                                                                    Name\n                                                                    Scope\n                                                                    Order\n                                                                    Widget\n                                                                    Definition\n                                                                    Active\n                                                                    Trigger\n                                                                }\n                                                            }\n                                                        }\n                                                    }\n                                                }',{input:{where:{Widget:widgetId}}},"data.MetaWidgetAction.MetaWidgetActionFind");case 28:if(widgetActions=_context.sent,!((widgetActionIds=Object.keys(widgetActions))&&widgetActionIds.length>0)){_context.next=42;break}_context.t3=_regeneratorRuntime.keys(widgetActions);case 32:if((_context.t4=_context.t3()).done){_context.next=42;break}return widgetActionId=_context.t4.value,widgetActionPayload=cloneDeep(widgetActions[widgetActionId]),nameParts=widgetActionPayload.Name.split("@@"),newWidgetActionName=nameParts[0]+"@@"+_this3.state.activepage.name+"_"+_this3.state.activepage.scope,widgetActionPayload.Name=newWidgetActionName,_context.next=40,$qry._run("mutation($input: MetaWidgetActionUpsertWithWhereInput!){\n                                                                MetaWidgetActionUpsertWithWhere(input: $input){\n                                                                    obj{\n                                                                        uid\n                                                                    }\n                                                                }\n                                                            }",{input:{where:{uid:widgetActionId},data:widgetActionPayload}},"data.MetaWidgetActionUpsertWithWhere.obj");case 40:_context.next=32;break;case 42:_context.next=22;break;case 44:_this3.setState({pageNameUpdated:!1});case 45:_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page updated successfully!"});case 46:case"end":return _context.stop()}},_callee,_this3)})),function(_x){return _ref.apply(this,arguments)})},"Update"),React.createElement(Button,{waves:"light",size:"small",style:{clear:"both",marginTop:10,display:this.state.activepage&&this.state.activepage.isNew?"block":"none"},onClick:(_ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(e){var payload,isValid,pagesInStore,slideRes,activePageInStore,kvparams,queryParams,slots,widgets,slideProps,slotsAndWidgets,tobeActivePage;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(payload={Name:_this3.state.activepage.name,Scope:_this3.state.activepage.scope?_this3.state.activepage.scope:_this3.props.currentscope,Path:_this3.state.activepage.path,Type:_this3.state.activepage.pageType?_this3.state.activepage.pageType:"CreateView"},isValid=!0,payload.Name&&"Unnamed"!=payload.Name||(isValid=!1,_this3.setState({pagename_invalid:!0})),payload.Scope||(isValid=!1,_this3.setState({pagescope_invalid:!0})),payload.Path||(isValid=!1,_this3.setState({pagepath_invalid:!0})),_this3.state.activepage.model||"CreateView"!=payload.Type&&"EditView"!=payload.Type||(isValid=!1,_this3.setState({pagemodel_invalid:!0})),isValid){_context2.next=10;break}_this3.props.addErrorMessage({title:"Error - ",subtitle:"Please fill the mandatory fields and try again...!"}),_context2.next=48;break;case 10:return pagesInStore=_this3.props.pages,_context2.next=13,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlide",payload);case 13:if(!(slideRes=_context2.sent)||!slideRes.uid){_context2.next=48;break}if(activePageInStore=pagesInStore[_this3.props.active_page_id],(activePageInStore=_extends({},activePageInStore,_this3.state.activepage)).isNew&&(activePageInStore.isNew=!1,activePageInStore.is_open=!0,pagesInStore[slideRes.uid]=activePageInStore,delete pagesInStore[_this3.props.active_page_id]),!_this3.props.keyvaluepairs||!_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"]){_context2.next=26;break}if(kvparams=_this3.props.keyvaluepairs[_this3.props.active_page_id+"_params"],queryParams=[],kvparams.map(function(paramKeyValue){paramKeyValue.name&&queryParams.push({Name:paramKeyValue.name,Value:paramKeyValue.value,PropsSlide:slideRes.uid})}),_context2.t0=queryParams&&queryParams.length>0,!_context2.t0){_context2.next=26;break}return _context2.next=26,GraphQLDataUtil().saveMultiple("pd.saveMetaSlideProps",queryParams);case 26:if("CreateView"!=payload.Type&&"EditView"!=payload.Type){_context2.next=31;break}return _context2.next=29,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelName",Value:activePageInStore.model,PropsSlide:slideRes.uid});case 29:return _context2.next=31,GraphQLDataUtil().saveOrUpdate("pd.saveMetaSlideProps",{Name:"ModelScope",Value:activePageInStore.modelscope,PropsSlide:slideRes.uid});case 31:return _context2.next=33,$script.runAtServer("pd.addDefaultWidget",{slideId:slideRes.uid});case 33:return slots={},widgets={},_context2.next=37,$qry.run("mmf.getSlideProps",{pageId:slideRes.uid});case 37:return slideProps=_context2.sent,_context2.next=40,$qry.run("pd.getExistingSlotsbySlideId",{Slide:slideRes.uid});case 40:(slotsAndWidgets=_context2.sent)&&slotsAndWidgets.length>0&&slotsAndWidgets.forEach(function(slotWidget){var slot=slotWidget.node;if(slot&&slot.uid){var slotData={};slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.width=slot.width||0,slotData.height=slot.height,slotData.minwidth=slot.minwidth,slotData.minheight=slot.minheight,slotData.maxwidth=slot.maxwidth,slotData.maxheight=slot.maxheight,slotData.resize=slot.resize,slotData.move=slot.move,slotData.Slide=slot.Slide,slotData.Widget=slot.Widget,slots[slot.uid]=slotData;var widgetData=slot.slotWidget;if(widgetData&&widgetData.uid){var widget={};widget.id=widgetData.uid,widget.Component=widgetData.Component,widget.name=widgetData.component.Name;var widgetProps=widgetData.widgetproperties;if(widgetProps&&widgetProps.edges&&widgetProps.edges.length>0){var props={};widgetProps.edges.forEach(function(propNode){var prop=propNode.node;props[prop.name]=prop.value}),widget.props=props}widget.props=widget.props||{};var componentProps=widgetData.component.Props,widgetPropNames=Object.keys(widget.props);componentProps&&Object.keys(componentProps).length>0&&Object.keys(componentProps).map(function(componentPropName){widgetPropNames&&-1==widgetPropNames.indexOf(componentPropName)&&(widget.props[componentPropName]=componentProps[componentPropName])}),widgets[widgetData.uid]=widget}}}),(tobeActivePage=pagesInStore[slideRes.uid]).slots=slots,tobeActivePage.props=slideProps,tobeActivePage.widgets=widgets,_this3.props.updateStore({updates:{active_page_id:slideRes.uid,pages:pagesInStore,reload_slides:!0}}),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Page created!"});case 48:case"end":return _context2.stop()}},_callee2,_this3)})),function(_x2){return _ref2.apply(this,arguments)})},"Save"))}}]),_PageDesignerGeneral_}(React.Component),_export("PageDesignerGeneral",PageDesignerGeneral=function(props){return _PageDesignerGeneral_}),_export("PageDesignerGeneral",PageDesignerGeneral)}}}),System.register("component/studio/PageDesignerPageActions.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context4){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,_PageDesignerPageActions_,PageDesignerPageActions,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button}],execute:function(){_PageDesignerPageActions_=function(_React$Component){function _PageDesignerPageActions_(props){_classCallCheck(this,_PageDesignerPageActions_);var _this=_possibleConstructorReturn(this,(_PageDesignerPageActions_.__proto__||Object.getPrototypeOf(_PageDesignerPageActions_)).call(this,props));return _this.state={showPreview:!1,activeActionId:"",items:[],reload:!1},_this.getData=_this.getData.bind(_this),$ele.registerElement("NewPageAction","mmf","React"),_this}return _inherits(_PageDesignerPageActions_,_React$Component),_createClass(_PageDesignerPageActions_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var items;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.getData();case 2:items=_context.sent,this.setState({items:items});case 4:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"getData",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var pageActionNames,items;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return pageActionNames=[],_context2.next=3,$qry.getRecords("MetaSlideAction",{where:{Slide:this.props.active_page_id}},["uid","Name"]);case 3:return(items=_context2.sent)&&items.length>0&&items.map(function(item){item.Name&&pageActionNames.push({name:item.Name,id:item.uid})}),_context2.abrupt("return",pageActionNames);case 6:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(prevProps){var items,_items,activeActionId;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(prevProps.active_page_id==this.props.active_page_id){_context3.next=5;break}return _context3.next=3,this.getData();case 3:items=_context3.sent,this.setState({items:items});case 5:if(prevProps.showpreview==this.props.showpreview||prevProps.showpreview_target==this.props.showpreview_target||"page_actions"!=this.props.showpreview_target){_context3.next=12;break}return _context3.next=8,this.getData();case 8:_items=_context3.sent,this.setState({items:_items,activeActionId:"",reload:!this.state.reload}),_context3.next=13;break;case 12:prevProps.active_list_item!=this.props.active_list_item&&(this.props.updateStore({updates:{showpreview:!0}}),this.setState({showPreview:!0,reload:!this.state.reload}));case 13:prevProps.active_list_item!=this.props.active_list_item&&(activeActionId=this.props.active_list_item.split("@@")[0],this.setState({activeActionId:activeActionId,showPreview:!0}));case 14:case"end":return _context3.stop()}},_callee3,this)}));return function(_x){return _ref3.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this,actionProps={};this.state.activeActionId&&(actionProps.rowinfo=JSON.stringify({uid:this.state.activeActionId}));var previewItem=React.createElement("new-page-action",actionProps),previewComponent=1==this.state.showPreview?React.createElement("preview-component",{key:"actionform",target:"page_actions"},previewItem):null;return React.createElement(React.Fragment,null,previewComponent,React.createElement(Button,{waves:"light",size:"small",onClick:function(e){_this2.props.updateStore({updates:{showpreview:!0}}),setTimeout(function(){return _this2.setState({activeActionId:"",showPreview:!0,reload:!_this2.state.reload})})}},"New"),this.state.items&&this.state.items.length>0?React.createElement("srs-simple-list",{items:JSON.stringify(this.state.items),varname:"pageactions",unique:"true",singlecolumn:"true",alignment:"left"}):React.createElement("div",{style:{textAlign:"center"}},"No actions to show!"))}}]),_PageDesignerPageActions_}(React.Component),_export("PageDesignerPageActions",PageDesignerPageActions=function(props){return _PageDesignerPageActions_}),_export("PageDesignerPageActions",PageDesignerPageActions),_export("default",PageDesignerPageActions),_export("states",states=[{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"active_list_item",AccessPath:"active_list_item.pageactions",DefaultValue:'{"active_list_item": {"pageactions": ""}}'},{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": ""}'},{KeyName:"pageActions",AccessPath:"pages.${active_page_id}.actions",DefaultValue:'{"pages": {"${active_page_id}": {"actions": {}}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PageDesignerPageActions/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context4){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,_PageDesignerPageActions_,PageDesignerPageActions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button}],execute:function(){_PageDesignerPageActions_=function(_React$Component){function _PageDesignerPageActions_(props){_classCallCheck(this,_PageDesignerPageActions_);var _this=_possibleConstructorReturn(this,(_PageDesignerPageActions_.__proto__||Object.getPrototypeOf(_PageDesignerPageActions_)).call(this,props));return _this.state={showPreview:!1,activeActionId:"",items:[],reload:!1},_this.getData=_this.getData.bind(_this),$ele.registerElement("NewPageAction","mmf","React"),_this}return _inherits(_PageDesignerPageActions_,_React$Component),_createClass(_PageDesignerPageActions_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var items;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.getData();case 2:items=_context.sent,this.setState({items:items});case 4:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"getData",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var pageActionNames,items;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return pageActionNames=[],_context2.next=3,$qry.getRecords("MetaSlideAction",{where:{Slide:this.props.active_page_id}},["uid","Name"]);case 3:return(items=_context2.sent)&&items.length>0&&items.map(function(item){item.Name&&pageActionNames.push({name:item.Name,id:item.uid})}),_context2.abrupt("return",pageActionNames);case 6:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(prevProps){var items,_items,activeActionId;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(prevProps.active_page_id==this.props.active_page_id){_context3.next=5;break}return _context3.next=3,this.getData();case 3:items=_context3.sent,this.setState({items:items});case 5:if(prevProps.showpreview==this.props.showpreview||prevProps.showpreview_target==this.props.showpreview_target||"page_actions"!=this.props.showpreview_target){_context3.next=12;break}return _context3.next=8,this.getData();case 8:_items=_context3.sent,this.setState({items:_items,activeActionId:"",reload:!this.state.reload}),_context3.next=13;break;case 12:prevProps.active_list_item!=this.props.active_list_item&&(this.props.updateStore({updates:{showpreview:!0}}),this.setState({showPreview:!0,reload:!this.state.reload}));case 13:prevProps.active_list_item!=this.props.active_list_item&&(activeActionId=this.props.active_list_item.split("@@")[0],this.setState({activeActionId:activeActionId,showPreview:!0}));case 14:case"end":return _context3.stop()}},_callee3,this)}));return function(_x){return _ref3.apply(this,arguments)}}()},{key:"render",value:function(){var _this2=this,actionProps={};this.state.activeActionId&&(actionProps.rowinfo=JSON.stringify({uid:this.state.activeActionId}));var previewItem=React.createElement("new-page-action",actionProps),previewComponent=1==this.state.showPreview?React.createElement("preview-component",{key:"actionform",target:"page_actions"},previewItem):null;return React.createElement(React.Fragment,null,previewComponent,React.createElement(Button,{waves:"light",size:"small",onClick:function(e){_this2.props.updateStore({updates:{showpreview:!0}}),setTimeout(function(){return _this2.setState({activeActionId:"",showPreview:!0,reload:!_this2.state.reload})})}},"New"),this.state.items&&this.state.items.length>0?React.createElement("srs-simple-list",{items:JSON.stringify(this.state.items),varname:"pageactions",unique:"true",singlecolumn:"true",alignment:"left"}):React.createElement("div",{style:{textAlign:"center"}},"No actions to show!"))}}]),_PageDesignerPageActions_}(React.Component),_export("PageDesignerPageActions",PageDesignerPageActions=function(props){return _PageDesignerPageActions_}),_export("PageDesignerPageActions",PageDesignerPageActions)}}}),System.register("component/studio/PageDesignerPreview.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","jquery","jquery-ui/ui/data","jquery-ui/ui/disable-selection","jquery-ui/ui/focusable","jquery-ui/ui/form","jquery-ui/ui/ie","jquery-ui/ui/keycode","jquery-ui/ui/labels","jquery-ui/ui/jquery-1-7","jquery-ui/ui/plugin","jquery-ui/ui/safe-active-element","jquery-ui/ui/safe-blur","jquery-ui/ui/scroll-parent","jquery-ui/ui/tabbable","jquery-ui/ui/unique-id","jquery-ui/ui/version","jquery-ui/ui/widget","jquery-ui/ui/widgets/mouse","jquery-ui/ui/widgets/draggable","jquery-ui/ui/widgets/droppable","jquery-ui/ui/widgets/resizable","deepmerge","lodash.clonedeep","lodash.get","deep-equal","lodash","thirdpartylib/gridstack/gridstack.min.js"],function(_export,_context11){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,$,deepmerge,cloneDeep,lodashget,deepEqual,_,_PageDesignerPreview_,PageDesignerPreview,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_jquery){$=_jquery.default},function(_jqueryUiUiData){},function(_jqueryUiUiDisableSelection){},function(_jqueryUiUiFocusable){},function(_jqueryUiUiForm){},function(_jqueryUiUiIe){},function(_jqueryUiUiKeycode){},function(_jqueryUiUiLabels){},function(_jqueryUiUiJquery){},function(_jqueryUiUiPlugin){},function(_jqueryUiUiSafeActiveElement){},function(_jqueryUiUiSafeBlur){},function(_jqueryUiUiScrollParent){},function(_jqueryUiUiTabbable){},function(_jqueryUiUiUniqueId){},function(_jqueryUiUiVersion){},function(_jqueryUiUiWidget){},function(_jqueryUiUiWidgetsMouse){},function(_jqueryUiUiWidgetsDraggable){},function(_jqueryUiUiWidgetsDroppable){},function(_jqueryUiUiWidgetsResizable){},function(_deepmerge){deepmerge=_deepmerge.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashGet){lodashget=_lodashGet.default},function(_deepEqual){deepEqual=_deepEqual.default},function(_lodash){_=_lodash.default},function(_thirdpartylibGridstackGridstackMinJs){}],execute:function(){_PageDesignerPreview_=function(_React$Component){function _PageDesignerPreview_(props){_classCallCheck(this,_PageDesignerPreview_);var _this=_possibleConstructorReturn(this,(_PageDesignerPreview_.__proto__||Object.getPrototypeOf(_PageDesignerPreview_)).call(this,props));return _this.state={pageloading:!0,showloader:!1},_this.updatePage=_this.updatePage.bind(_this),_this.registerElements=_this.registerElements.bind(_this),_this.getPreviewItems=_this.getPreviewItems.bind(_this),_this.evaluateQuery=_this.evaluateQuery.bind(_this),_this.parseGraphQLParam=_this.parseGraphQLParam.bind(_this),_this.getPageParams=_this.getPageParams.bind(_this),_this.resizeGrid=_this.resizeGrid.bind(_this),_this.runPageActions=_this.runPageActions.bind(_this),_this.initializeLayout=_this.initializeLayout.bind(_this),_this.viewModelName="",_this.viewData={},_this}return _inherits(_PageDesignerPreview_,_React$Component),_createClass(_PageDesignerPreview_,[{key:"initializeLayout",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(hostEl,activePage){var self;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(hostEl){_context2.next=2;break}return _context2.abrupt("return");case 2:return self=this,_context2.next=5,$(".gridPreviewCanvas",hostEl).each(_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var activePageSlotIds,activePageSlotIdIndx,slotId,slot,widgetId,widgetProps,name,eleData,activeItemContentEl,widgetContainerEl;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(self.grid=self.grid||GridStack.init(self.options,this),self.grid){_context.next=3;break}return _context.abrupt("return");case 3:if(self.grid.batchUpdate(),self.grid.removeAll(!0),self.grid.commit(),self.grid.batchUpdate(),!activePage.slots){_context.next=30;break}activePageSlotIds=Object.keys(activePage.slots),_context.t0=_regeneratorRuntime.keys(activePageSlotIds);case 10:if((_context.t1=_context.t0()).done){_context.next=29;break}if(activePageSlotIdIndx=_context.t1.value,slotId=activePageSlotIds[activePageSlotIdIndx],slot=activePage.slots[slotId],widgetId=slot.Widget?slot.Widget:slot.widget&&slot.widget.widgetid?slot.widget.widgetid:"",!(widgetProps=activePage.widgets[widgetId])||!widgetProps.name){_context.next=27;break}if(name=widgetProps.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),eleData=Object.assign({tag:name,widgetid:widgetId,componentid:widgetProps.Component},widgetProps),$(this).attr("slotid",slotId),!(activeItemContentEl=self.grid.$el.find("#"+widgetId+".grid-stack-item-content"))&&self.grid.container&&self.grid.container.length>0&&(activeItemContentEl=$(self.grid.container[0]).find("#"+widgetId+".grid-stack-item-content")),activeItemContentEl&&0!=activeItemContentEl.length){_context.next=27;break}return(widgetContainerEl=$("<div><div id="+widgetId+' class="grid-stack-item-content">\n                                                <widget-container key='+widgetId+" \n                                                    slotid="+slotId+"\n                                                    componentid="+eleData.componentid+'\n                                                    preview="true" pageid='+self.pageId+"\n                                                    tag="+eleData.tag+"                                                                                             \n                                                    widgetid="+widgetId+' class="widgetContainer"                                             \n                                                    style="height: 100%;" shadow="true"\n                                                    pagesuffix='+self.props.pagesuffix+" ></widget-container></div><div/>")).find("widget-container").data("widgetprops",eleData),_context.next=27,self.grid.addWidget(widgetContainerEl,slot.xposition,slot.yposition,slot.width,slot.height,!1,0,96,0,40);case 27:_context.next=10;break;case 29:self.grid.commit();case 30:case"end":return _context.stop()}},_callee,this)})));case 5:case"end":return _context2.stop()}},_callee2,this)}));return function(_x,_x2){return _ref.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var _this2=this;this.updatePage(),$(this.rootEl).find(".gridPreviewContent")&&(this.props.watchScrolling||this.props.widgetProps&&this.props.widgetProps.WatchScroll)&&$(this.rootEl).find(".gridPreviewContent").scroll(function(){return _this2.props.updateStore({updates:{scrollfired:!_this2.props.scrollfired}})}),(-1==Object.keys(this.props).indexOf("responsive")&&(!this.props.widgetProps||-1==Object.keys(this.props.widgetProps).indexOf("Responsive"))||"true"==this.props.responsive||this.props.widgetProps&&this.props.widgetProps.Responsive&&("true"==this.props.widgetProps.Responsive||1==this.props.widgetProps.Responsive))&&window.addEventListener("resize",this.resizeGrid),this.resizeGrid()}},{key:"componentDidUnmount",value:function(){window.removeEventListener("resize",this.resizeGrid)}},{key:"componentDidUpdate",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(prevProps,prevState){var self,widgets,prevLayout,currentLayout,pageData,layoutCode,_prevLayout,_currentLayout,_pageData,pageState,parentstate,pageId,pageParamMapping,pageParams,parentPageParams,parentPage,inputParams;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(self=this,_.isEqual(prevProps.pageState!=this.props.pageState)||prevProps.pageState&&this.props.pageState&&(prevProps.pageState.showloader!=this.props.pageState.showloader&&this.setState({showloader:this.props.pageState.showloader}),_.isEqual(prevProps.pageState.layout,this.props.pageState.layout)||($(self.rootEl).find(".gridPreviewCanvas"),self.grid&&(self.grid.batchUpdate(),this.props.pageState.layout.options&&self.grid.float(this.props.pageState.layout.options.float),widgets=this.props.pageState.layout&&this.props.pageState.layout.widgets?this.props.pageState.layout.widgets:{},Object.keys(widgets).map(function(widgetName){var widgetId=widgets[widgetName].id,gridStackItemContentEl=self.grid.$el.find("#"+widgetId+".grid-stack-item-content");if(1==gridStackItemContentEl.length){var gridStackItemEl=gridStackItemContentEl.parent();widgets[widgetName].slot&&self.grid.update(gridStackItemEl,widgets[widgetName].slot.x,widgets[widgetName].slot.y,widgets[widgetName].slot.width,widgets[widgetName].slot.height)}else if(widgets[widgetName].slot){var widgetEl=$("<div><div id="+widgetId+' class="grid-stack-item-content">\n                                                <widget-container key='+widgetId+' \n                                                    preview="true" pageid='+self.pageId+"\n                                                    tag="+widgets[widgetName].tag+"                                                                                             \n                                                    widgetid="+widgetId+' class="widgetContainer"                                             \n                                                    style="height: 100%;" shadow="true"\n                                                    pagesuffix='+self.props.pagesuffix+" ></widget-container></div><div/>");self.grid.addWidget(widgetEl,widgets[widgetName].slot.x,widgets[widgetName].slot.y,widgets[widgetName].slot.width,widgets[widgetName].slot.height,!1,0,96,0,40)}}),self.grid.commit(),this.resizeGrid()))),prevProps.pageState&&this.props.pageState&&prevProps.pageState.oneColumn!=this.props.pageState.oneColumn&&this.props.pageData&&this.runPageActions(this.props.pageData,this.props.pageData.pageParams||{}),!prevProps.pageState||!this.props.pageState||prevProps.pageState.currentLayout==this.props.pageState.currentLayout){_context3.next=18;break}if(prevLayout=prevProps.pageState.currentLayout,currentLayout=this.props.pageState.currentLayout,prevLayout&&"default"!=prevLayout||currentLayout&&"default"!=currentLayout){_context3.next=9;break}_context3.next=18;break;case 9:if((pageData=cloneDeep(this.props.pageData)||{}).currentLayout=this.props.pageState?this.props.pageState.currentLayout:pageData.currentLayout,!pageData.layouts||!pageData.layouts.slots){_context3.next=18;break}return layoutCode="mobile"==this.props.pageState.currentLayout?pageData.layouts.slots.mobile?"mobile":"default":this.props.pageState.currentLayout,pageData.slots=pageData.layouts.slots[layoutCode],pageData.widgets=pageData.layouts.widgets[layoutCode],_context3.next=17,this.initializeLayout(self.props.shadow,pageData);case 17:this.props.updateStore({updates:{pageData:pageData}});case 18:if(!prevProps.pageData||!this.props.pageData||prevProps.pageData.id!=this.props.pageData.id||prevProps.pageData.currentLayout==this.props.pageData.currentLayout){_context3.next=32;break}if(this.props.pageData.currentLayout==this.props.pageState.currentLayout){_context3.next=32;break}if(_prevLayout=prevProps.pageData.currentLayout,_currentLayout=this.props.pageData.currentLayout,_prevLayout&&"default"!=_prevLayout||_currentLayout&&"default"!=_currentLayout){_context3.next=25;break}_context3.next=32;break;case 25:if(!(_pageData=cloneDeep(this.props.pageData)).layouts||!_pageData.layouts.slots){_context3.next=32;break}return _pageData.slots=_pageData.layouts.slots[this.props.pageData.currentLayout],_pageData.widgets=_pageData.layouts.widgets[this.props.pageData.currentLayout],_context3.next=31,this.initializeLayout(self.props.shadow,_pageData);case 31:this.props.updateStore({updates:{pageData:_pageData}});case 32:if(_.isEqual(prevProps.parentstate,this.props.parentstate)||(pageState=cloneDeep(this.props.pageState)||{},parentstate=this.props.parentstate?"string"==typeof this.props.parentstate?JSON.parse(this.props.parentstate):this.props.parentstate:{},pageState.parentstate=parentstate,this.props.updateStore({updates:{pageState:pageState}})),prevState.pageloading==this.state.pageloading){_context3.next=37;break}1==this.state.pageloading?this.updatePage(prevProps):!_.isEqual(prevState.widgets,this.state.widgets)&&this.state.widgets&&($(self.rootEl).find(".gridPreviewCanvas"),self.grid.batchUpdate(),self.grid.removeAll(),self.grid&&self.grid.engine&&self.grid.engine._removedNodes&&self.grid.engine._removedNodes.map(function(node){$(node.el).remove()}),this.state.widgets.map(function(widgetObj){var node=widgetObj.node;self.grid&&self.grid.addWidget(widgetObj.ele,node.xposition,node.yposition,node.width,node.height,!1,node.minwidth,node.maxwidth,node.minheight,node.maxheight)}),self.grid.commit(),self.resizeGrid()),_context3.next=66;break;case 37:if(this.props.reload==prevProps.reload&&this.props.pagereload==prevProps.pagereload&&_.isEqual(this.props.items,prevProps.items)){_context3.next=41;break}this.updatePage(prevProps),_context3.next=66;break;case 41:if(!this.props.widgetProps||!prevProps.widgetProps||_.isEqual(this.props.widgetProps,prevProps.widgetProps)){_context3.next=45;break}this.props.parentPage&&this.props.parentPage.widgets&&this.props.parentPage.widgets[this.props.widgetid]&&"SrsTabs"==this.props.parentPage.widgets[this.props.widgetid].name?prevProps.widgetProps.Reload==this.props.widgetProps.Reload&&prevProps.widgetProps.ActiveTab==this.props.widgetProps.ActiveTab&&(_.isEqual(this.pageParams,this.props.pageData.pageParams)||(this.pageParams=this.props.pageData.pageParams,this.updatePage(prevProps))):this.updatePage(prevProps),_context3.next=66;break;case 45:if(_.isEqual(this.props.pageData,prevProps.pageData)){_context3.next=66;break}if(pageId="true"==this.props.widgetProps.is_container?this.props.previewpageid:this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,pageParamMapping=null,pageParams={},!this.props.pagesuffix||!this.props.pageid){_context3.next=53;break}pageParams=this.props.pages[pageId+this.props.pagesuffix]?this.props.pages[pageId+this.props.pagesuffix].pageParams:pageParams,_context3.next=65;break;case 53:if(!prevProps.pageData||!this.props.pageData||_.isEqual(prevProps.pageData.pageParams,this.props.pageData.pageParams)){_context3.next=57;break}pageParams=this.props.pageData.pageParams,_context3.next=65;break;case 57:return pageParamMapping="string"==typeof(pageParamMapping=pageParamMapping||(this.props&&this.props.widgetProps&&this.props.widgetProps.PageParams?this.props.widgetProps.PageParams:{}))?JSON.parse(pageParamMapping):pageParamMapping,parentPageParams=this.props.pageparams?"string"==typeof this.props.pageparams?JSON.parse(this.props.pageparams):this.props.pageparams:{},parentPage=this.props.parentPage,inputParams={pageId:pageId,pageParamMapping:pageParamMapping,parentPageParams:parentPageParams,parentPage:parentPage,isContainer:this.props.widgetProps.is_container,containerSubPageName:this.props.pagename},_context3.next=64,$script.runscript("mmf.getPageParameters",inputParams);case 64:pageParams=_context3.sent;case 65:_.isEqual(pageParams,this.pageParams)||(this.pageParams=pageParams,this.updatePage(prevProps));case 66:case"end":return _context3.stop()}},_callee3,this)}));return function(_x3,_x4){return _ref3.apply(this,arguments)}}()},{key:"resizeGrid",value:function(){if(("true"==this.props.responsive||this.props.widgetProps&&this.props.widgetProps.Responsive&&("true"==this.props.widgetProps.Responsive||1==this.props.widgetProps.Responsive))&&(this.props.preview&&this.rootEl&&this.grid&&this.rootEl.clientWidth>0))if(this.rootEl.clientWidth<700){this.grid.column(1);var pageState=cloneDeep(this.props.pageState)||{};pageState.oneColumn=!0,pageState.currentLayout="mobile",pageState.layout=pageState.layout||{},pageState.layout.options=pageState.layout.options||{},pageState.layout.options.float=!1,this.props.updateStore({updates:{pageState:pageState}})}else{var _pageState=cloneDeep(this.props.pageState)||{};_pageState.oneColumn=!1,_pageState.currentLayout="default",_pageState.layout=_pageState.layout||{},_pageState.layout.options=_pageState.layout.options||{},_pageState.layout.options.float=!0,this.props.updateStore({updates:{pageState:_pageState}}),this.grid.column(96)}}},{key:"parseGraphQLParam",value:function(paramValue){var paramFields=paramValue.split(".");if(paramFields&&paramFields.length>1){var tempObj={};paramFields.slice(1).reduce(function(o,s){return o[s]={}},tempObj);var convertedStr=JSON.stringify(tempObj).replace(":{}","").replace(/"/g,"").replace(/:{/g,"{\n\t\t").replace(/^{/,"{\n\t").replace(/([}]+)/,"\n$1");return paramFields[0]+" "+convertedStr}return paramValue}},{key:"evaluateQuery",value:function(graphQLParams,recordId){var _this3=this;return new Promise(function(resolve,reject){var fields=[];graphQLParams.map(function(graphQLParam){fields.push(_this3.parseGraphQLParam(graphQLParam))});var query="query($inputData:JSON) {\n                    "+_this3.viewModelName+" {\n                        "+_this3.viewModelName+"FindOne(filter: $inputData) {\n                            uid\n                            "+fields.join("\n")+"\n                        }\n                    }\n            }",variables='{\n                    "inputData": {\n                        "where": {\n                        "uid": "'+recordId+'"\n                        }\n                    }\n                }';$qry._run(query,variables).then(function(viewData){var result=("data."+_this3.viewModelName+"."+_this3.viewModelName+"FindOne").split(".").reduce(function(xs,s){return xs&&xs[s]?xs[s]:null},viewData);resolve(result)}).catch(function(err){return resolve({})})})}},{key:"getPageParams",value:function(pageId){var _ref4,_this4=this;return new Promise((_ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(resolve,reject){var parentPageParams,parentPage,pageParamMapping,pageParams,pageProps,allowedPagePropNames,_allowedPagePropNames,pageParamMappingKey;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(parentPageParams=_this4.props.pageparams?"string"==typeof _this4.props.pageparams?JSON.parse(_this4.props.pageparams):_this4.props.pageparams:{},parentPage=_this4.props.parentPage,_context5.t0=_this4.queriedPage,_context5.t0){_context5.next=7;break}return _context5.next=6,$qry.run("mmf.getSlidePropsById",{uid:pageId},"data.slide",!1,!!_this4.props.preview);case 6:_context5.t0=_context5.sent;case 7:_this4.queriedPage=_context5.t0,pageParamMapping="string"==typeof(pageParamMapping=_this4.props&&_this4.props.widgetProps&&_this4.props.widgetProps.PageParams?_this4.props.widgetProps.PageParams:{})?JSON.parse(pageParamMapping):pageParamMapping,pageParams={},pageProps={},"CreateView"==_this4.queriedPage.Type||"EditView"==_this4.queriedPage.Type?((allowedPagePropNames=Object.keys(_this4.queriedPage.props).filter(function(pagePropName){return"ModelName"!=pagePropName&&"ModelScope"!=pagePropName}))&&allowedPagePropNames.map(function(allowedPropName){return pageProps[allowedPropName]=_this4.queriedPage.props[allowedPropName]}),pageProps.recordid="recordid"):(_allowedPagePropNames=Object.keys(_this4.queriedPage.props).filter(function(pagePropName){return"ModelName"!=pagePropName&&"ModelScope"!=pagePropName}))&&_allowedPagePropNames.map(function(allowedPropName){return pageProps[allowedPropName]=_this4.queriedPage.props[allowedPropName]}),pageParamMappingKey="true"==_this4.props.widgetProps.is_container?pageId+"_"+_this4.props.pagename:pageId,pageProps&&Object.keys(pageProps).map(function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(propName){var widgetName2Map,childWidgetPageId,childWidgetName,widgetPropName2Map,childWidgetPage,pages,fieldName2Map;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!(pageParamMapping&&pageParamMapping[pageParamMappingKey]&&pageParamMapping[pageParamMappingKey][propName])){_context4.next=32;break}_context4.t0=pageParamMapping[pageParamMappingKey][propName].type,_context4.next="widget_props"===_context4.t0?4:"page_field"===_context4.t0?23:"page_param"===_context4.t0?26:28;break;case 4:if(widgetName2Map=pageParamMapping[pageParamMappingKey][propName].widgetName,childWidgetPageId=pageParamMapping[pageParamMappingKey][propName].childWidgetPageId,childWidgetName=pageParamMapping[pageParamMappingKey][propName].childWidgetName,widgetPropName2Map="",!childWidgetPageId||!childWidgetName){_context4.next=20;break}if(childWidgetPage=_this4.props.pages[childWidgetPageId]){_context4.next=17;break}return _context4.next=13,$script.runscript("studio.getPageDetails",{pageId:childWidgetPageId},!1,!!_this4.props.preview);case 13:childWidgetPage=_context4.sent,(pages=cloneDeep(_this4.props.pages))[childWidgetPageId]=childWidgetPage,_this4.props.updateStore({updates:{pages:pages}});case 17:childWidgetPage.widgets&&(widgetPropName2Map=pageParamMapping[pageParamMappingKey][propName].widgetPropName?pageParamMapping[pageParamMappingKey][propName].widgetPropName:"value",Object.keys(childWidgetPage.widgets).map(function(targetWidgetId){if(childWidgetPage.widgets[targetWidgetId].props){var targetWidgetName=childWidgetPage.widgets[targetWidgetId].props.Name||childWidgetPage.widgets[targetWidgetId].props.id;childWidgetName==targetWidgetName&&(pageParams[propName]=childWidgetPage.widgets[targetWidgetId].props[widgetPropName2Map])}})),_context4.next=22;break;case 20:widgetPropName2Map=pageParamMapping[pageParamMappingKey][propName].widgetPropName?pageParamMapping[pageParamMappingKey][propName].widgetPropName:"value",widgetName2Map&&parentPage&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){(parentPageWidgetId==widgetName2Map||parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.Name==widgetName2Map)&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props[widgetPropName2Map])});case 22:return _context4.abrupt("break",30);case 23:return(fieldName2Map=pageParamMapping[pageParamMappingKey][propName].pageFieldId)&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.FieldName=="@@["+fieldName2Map+"]"&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.value)}),_context4.abrupt("break",30);case 26:return parentPage&&parentPage.pageParams&&(pageParamMapping[pageParamMappingKey][propName].pageParamId?pageParams[propName]=parentPage.pageParams[pageParamMapping[pageParamMappingKey][propName].pageParamId]:pageParams[propName]=parentPage.pageParams[propName]),_context4.abrupt("break",30);case 28:return parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(pageParams[propName]=parentPage.pageParams[propName]),_context4.abrupt("break",30);case 30:_context4.next=33;break;case 32:parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]?pageParams[propName]=parentPage.pageParams[propName]:parentPageParams&&parentPageParams[propName]&&(pageParams[propName]=parentPageParams[propName]);case 33:case"end":return _context4.stop()}},_callee4,_this4)}));return function(_x7){return _ref5.apply(this,arguments)}}()),resolve(pageParams);case 16:case"end":return _context5.stop()}},_callee5,_this4)})),function(_x5,_x6){return _ref4.apply(this,arguments)}))}},{key:"runPageActions",value:function(){var _ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(pageData,pageParams){var updatedPageData,self,pageId,pageActions,setState,getState,setStateWithPreload,pageActionKeys,pageActionsPromises,_loop,pageActionKeyIndx,dataArry,dataArryIndx,widgetData,widgetNames,updatedWidgetIndx,widgetName,updatedWidgetProps,updatedWidgetId;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return{},updatedPageData=void 0,self=this,pageId=this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,_context6.next=6,System.import("/page/"+pageId+"/Action.js");case 6:if(!(pageActions=_context6.sent)||!pageActions.default){_context6.next=24;break}if(pageActions=pageActions.default,setState=function(recentUpdates){var pageState=self.props.pageState?self.props.pageState:{};pageState=deepmerge.all([pageState,recentUpdates]),self.props.updateStore({updates:{pageState:pageState}})},getState=function(){return cloneDeep(self.props.pageState)},setStateWithPreload=function(recentUpdates,$widgets){var pageState=self.props.pageState?self.props.pageState:{};if(pageState=deepmerge(pageState,recentUpdates),$widgets)for(var widgetIndx in $widgets){var widget=$widgets[widgetIndx];if(widget){var widgetProps=widget.props;if(widgetProps&&Object.keys(widgetProps).length>0){var widgetPropNames=Object.keys(widgetProps);for(var widgetPropIndx in widgetPropNames){var widgetPropName=widgetPropNames[widgetPropIndx];if(widgetPropName.indexOf("__State__")>-1){var widgetPropPathValue=widgetProps[widgetPropName],wpropName=widgetPropName.split("__State__")[1];if(widgetPropPathValue&&pageState&&Object.keys(pageState).length>0){var newPropVal=lodashget(pageState,widgetPropPathValue);newPropVal&&(widgetProps[wpropName]="string"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}}}}}return self.props.updateStore({updates:{pageState:pageState}}),$widgets},!(pageActions&&Object.keys(pageActions).length>0)){_context6.next=24;break}for(pageActionKeyIndx in{},pageActionKeys=Object.keys(pageActions),pageActionsPromises=[],_loop=function(){var pageActionKey=pageActionKeys[pageActionKeyIndx],notifier={getState:getState,setState:setState,setStateWithPreload:setStateWithPreload,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},ctx={currentscope:self.props.currentscope,cloneDeep:cloneDeep},result=pageActions[pageActionKey](pageData,notifier,ctx);result.then?pageActionsPromises.push(result):pageActionsPromises.push(new Promise(function(resolve,reject){return resolve(result)}))},pageActionKeys)_loop();if(updatedPageData=cloneDeep(pageData),!(pageActionsPromises.length>0)){_context6.next=24;break}return _context6.next=22,Promise.all(pageActionsPromises);case 22:if((dataArry=_context6.sent)&&dataArry.length>0)for(dataArryIndx in dataArry)if((widgetData=dataArry[dataArryIndx])&&Object.keys(widgetData).length>0&&(widgetNames=Object.keys(widgetData),widgetData&&widgetNames.length>0))for(updatedWidgetIndx in widgetNames)widgetName=widgetNames[updatedWidgetIndx],updatedWidgetProps=widgetData[widgetName].props,updatedWidgetId=updatedWidgetProps.id,_.isEqual(updatedWidgetProps,pageData.widgets[updatedWidgetId].props)||(updatedPageData.widgets[updatedWidgetId].props=_extends({},updatedPageData.widgets[updatedWidgetId].props,updatedWidgetProps));case 24:return _context6.abrupt("return",updatedPageData||pageData);case 25:case"end":return _context6.stop()}},_callee6,this)}));return function(_x8,_x9){return _ref6.apply(this,arguments)}}()},{key:"getPreviewItems",value:function(previewPage,previousPageParams){var _ref7,_this5=this;return new Promise((_ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(resolve,reject){var pageId,previewItems,accessPaths,slideData,slots,slideProps,viewType,graphQLParams,recordid,previousRecordId;return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(_context7.prev=0,pageId=_this5.props.widgetProps&&_this5.props.widgetProps.PageId?_this5.props.widgetProps.PageId:_this5.props.previewpageid,previewItems=[],accessPaths=["data.slide"].join(),_context7.t0=_this5.slideData,_context7.t0){_context7.next=9;break}return _context7.next=8,$qry.run("mmf.getSlideDetailsById",{uid:pageId},accessPaths,!1,!!_this5.props.preview);case 8:_context7.t0=_context7.sent;case 9:return _this5.slideData=_context7.t0,slideData=_this5.slideData,slots={},_context7.next=14,$qry.run("mmf.getSlideProps",{pageId:pageId},"data.MetaSlideProps.MetaSlidePropsFind",!1,!!_this5.props.preview);case 14:if(slideProps=_context7.sent,slideData.Scope,slideData.Name,viewType=slideData.Type,graphQLParams=[],Object.keys(slideData.slots).map(function(slotKey){var slot=slideData.slots[slotKey];slot&&slot.widget&&slot.widget.widgetproperties&&Object.keys(slot.widget.widgetproperties).map(function(widgetPropKey){var widgetProp=slot.widget.widgetproperties[widgetPropKey];if(widgetProp&&widgetProp.value&&widgetProp.value.startsWith("@@[")){var paramValue=widgetProp.value.split("@@[")[1];paramValue=paramValue.substr(0,paramValue.length-1),graphQLParams.push(paramValue)}})}),recordid=previewPage&&previewPage.pageParams&&previewPage.pageParams.recordid?previewPage.pageParams.recordid:"",previousRecordId=previousPageParams&&previousPageParams.recordid?previousPageParams.recordid:"",!("CreateView"==viewType||"EditView"==viewType&&recordid&&"-1"!=recordid&&recordid!=previousRecordId)){_context7.next=28;break}return _context7.next=25,_this5.evaluateQuery(graphQLParams,recordid);case 25:_context7.t1=_context7.sent,_context7.next=29;break;case 28:_context7.t1=_this5.viewData;case 29:_this5.viewData=_context7.t1,Object.keys(slideData.slots).map(function(slotKey){var slot=slideData.slots[slotKey],slotData={},widgetPropsPair={};slot&&(slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.height=slot.height,slotData.width=slot.width,slotData.minwidth=slot.minwidth,slotData.maxwidth=slot.maxwidth,slotData.minheight=slot.minheight,slotData.maxheight=slot.maxheight,slotData.resize=0,slotData.move=0,slotData.uid=slot.uid,slotData.Layout=slot.Layout,slotData.Slide=pageId,slots[slot.uid]=slotData),slot&&slot.widget&&slot.widget.widgetproperties&&Object.keys(slot.widget.widgetproperties).map(function(widgetPropKey){var widgetProp=slot.widget.widgetproperties[widgetPropKey],paramValue=widgetProp.value;widgetPropsPair[widgetProp.name]=paramValue;var fieldNameWithoutCover=widgetProp.value&&widgetProp.value.indexOf("@@[")>-1?widgetProp.value.split("@@[")[1]:widgetProp.value;if(fieldNameWithoutCover=fieldNameWithoutCover.endsWith("]")?fieldNameWithoutCover.substr(0,fieldNameWithoutCover.length-1):fieldNameWithoutCover,"FieldName"==widgetPropKey&&_this5.viewData&&(widgetPropsPair.value=lodashget(_this5.viewData,fieldNameWithoutCover)),widgetPropKey.startsWith("__Pageparam__")){var widgetPropPageParamKey=widgetPropKey.split("__Pageparam__")[1],referredPageParameter=widgetProp.value;previewPage.pageParams&&(previewPage.pageParams.hasOwnProperty(referredPageParameter)?widgetPropsPair[widgetPropPageParamKey]=previewPage.pageParams[referredPageParameter]:widgetPropsPair[widgetPropPageParamKey]=previewPage.props&&previewPage.props[referredPageParameter])}}),slot&&slot.widget&&(widgetPropsPair.id=slot.widget.uid,slotData.widget={tag:slot.widget.component.Name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),widgetid:slot.widget.uid,component:{name:slot.widget.component?slot.widget.component.Name:"",scope:slot.widget.component?slot.widget.component.Scope:"",type:slot.widget.component?slot.widget.component.Type:"",uid:slot.widget.component?slot.widget.component.uid:""},widgetprops:widgetPropsPair},slotData.widget=slotData.widget||{},slotData.widget.widgetprops=slotData.widget.widgetprops||{},slot.widget.component&&slot.widget.component.Props&&Object.keys(slot.widget.component.Props).map(function(componentPropName){-1==Object.keys(widgetPropsPair).indexOf(componentPropName)&&(slotData.widget.widgetprops[componentPropName]=slot.widget.component.Props[componentPropName])})),previewItems.push(slotData)}),resolve({previewItems:previewItems,slots:slots,props:slideProps}),_context7.next=37;break;case 34:_context7.prev=34,_context7.t2=_context7.catch(0),resolve({});case 37:case"end":return _context7.stop()}},_callee7,_this5,[[0,34]])})),function(_x10,_x11){return _ref7.apply(this,arguments)}))}},{key:"registerElements",value:function(uniqueComponentsToRegister){return new Promise(function(resolve,reject){var promises=[];uniqueComponentsToRegister&&Object.keys(uniqueComponentsToRegister).length>0&&Object.keys(uniqueComponentsToRegister).map(function(componentId){var elePromise=$ele&&$ele.registerElement(uniqueComponentsToRegister[componentId].name,uniqueComponentsToRegister[componentId].scope,uniqueComponentsToRegister[componentId].type);"PageDesigner"==uniqueComponentsToRegister[componentId].name&&"studio"==uniqueComponentsToRegister[componentId].scope&&(promises.push($ele&&$ele.registerElement("PageDesignerGeneral","studio","React")),promises.push($ele&&$ele.registerElement("PageDesignerWidget","studio","React")),promises.push($ele&&$ele.registerElement("PageDesignerProps","studio","React")),promises.push($ele&&$ele.registerElement("PageDesignerActions","studio","React")),promises.push($ele&&$ele.registerElement("SlideSelectionPanel","studio","React"))),promises.push(elePromise)});var listElPromise=$ele&&$ele.registerElement("ListLayout","mmf","React");promises.push(listElPromise),Promise.all(promises).then(function(results){return resolve()})})}},{key:"updatePage",value:function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee10(prevProps){var self,uniquePageId,gridCanvasEl,accessPaths,slideData,scope,name,viewType,previewPage,modelNamePropKey,modelName,modelScopePropKey,modelScope,pageParamMapping,parentPageParams,parentPage,inputParams,_ref9,previewItems,slots,props,widgets,gridElPromises,pageState,currentLayoutInState,_this7=this;return _regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(self=this,this.state.pageloading){_context10.next=4;break}return this.setState({pageloading:!0,pageParams:prevProps.pageData&&prevProps.pageData.pageParams?prevProps.pageData.pageParams:this.state.pageParams}),_context10.abrupt("return");case 4:if(this.rootEl=this.props.shadow&&$("#head",this.props.shadow)&&$("#head",this.props.shadow).length>0?$("#head",this.props.shadow)[0]:this.refs.previewarea,this.options={float:!0,width:96,column:96,staticGrid:!0,verticalMargin:10,cellHeight:20,removable:!1,removeTimeout:100,disableResize:!0,disableDrag:!0,disableOneColumnMode:!0},this.pageId=this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,uniquePageId=this.props.pagesuffix?this.pageId+this.props.pagesuffix:this.pageId,this.pageId){_context10.next=10;break}return _context10.abrupt("return");case 10:return this.props.dimensions?JSON.parse(this.props.dimensions):null,self=this,gridCanvasEl=$(this.rootEl).find(".gridPreviewCanvas"),this.grid||(this.grid=GridStack.init(this.options,gridCanvasEl),this.grid.on("removed",function(event,items){items&&items.map(function(item){$(item.el).remove()})}),this.grid.on("added",function(event,items){}),this.grid.on("change",function(event,items){})),accessPaths=["data.slide"].join(),_context10.next=17,$qry.run("mmf.getSlideDetailsById",{uid:this.pageId},accessPaths,!1,!!this.props.preview);case 17:if(slideData=_context10.sent,scope=slideData.Scope,name=slideData.Name,viewType=slideData.Type,previewPage=this.props.pages&&this.props.pages[uniquePageId]?cloneDeep(this.props.pages[uniquePageId]):{},"CreateView"!=viewType&&"EditView"!=viewType||(modelNamePropKey=Object.keys(slideData.props).filter(function(dataKey){return"ModelName"===slideData.props[dataKey].Name}),modelName=modelNamePropKey&&1==modelNamePropKey.length?slideData.props[modelNamePropKey[0]].Value:"Unknown",modelScopePropKey=Object.keys(slideData.props).filter(function(dataKey){return"ModelScope"===slideData.props[dataKey].Name}),modelScope=modelScopePropKey&&1==modelScopePropKey.length?slideData.props[modelScopePropKey[0]].Value:"Unknown",this.viewModelName="mmf"==modelScope&&modelName.startsWith("Meta")?modelName:modelName+"_"+modelScope,previewPage.model=modelName,previewPage.modelscope=modelScope),previewPage.id=this.pageId,previewPage.name=name,previewPage.scope=scope,previewPage.path=slideData.Path,previewPage.pageType=viewType,this.pageParams){_context10.next=37;break}return pageParamMapping="string"==typeof(pageParamMapping=pageParamMapping||(this.props&&this.props.widgetProps&&this.props.widgetProps.PageParams?this.props.widgetProps.PageParams:{}))?JSON.parse(pageParamMapping):pageParamMapping,parentPageParams=this.props.pageparams?"string"==typeof this.props.pageparams?JSON.parse(this.props.pageparams):this.props.pageparams:{},parentPage=this.props.parentPage,inputParams={pageId:this.pageId,pageParamMapping:pageParamMapping,parentPageParams:parentPageParams,parentPage:parentPage,isContainer:this.props.widgetProps.is_container,containerSubPageName:this.props.pagename},_context10.next=36,$script.runscript("mmf.getPageParameters",inputParams);case 36:this.pageParams=_context10.sent;case 37:if(previewPage.pageParams=this.pageParams,!this.props.items){_context10.next=42;break}_context10.t0=JSON.parse(this.props.items),_context10.next=45;break;case 42:return _context10.next=44,this.getPreviewItems(previewPage,this.state.pageParams);case 44:_context10.t0=_context10.sent;case 45:return _ref9=_context10.t0,previewItems=_ref9.previewItems,slots=_ref9.slots,props=_ref9.props,this.pageParams=previewPage.pageParams,previewPage.widgets=previewPage.widgets||{},previewPage.slots=slots,previewPage.props=props,widgets=[],gridElPromises=[],pageState=this.props.pageState,currentLayoutInState=pageState&&pageState.currentLayout?pageState.currentLayout:"default",_context10.next=59,$(this.rootEl).find(".gridPreviewCanvas").each(function(){var _ref10,_this6=this,gridElPromise=new Promise((_ref10=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(resolve,reject){var uniqueComponentsToRegister,isMobileViewAvailable,itemIndx;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return uniqueComponentsToRegister={},previewItems&&previewItems.length>0&&_.each(previewItems,function(node){node.widget&&node.widget.component&&-1==Object.keys(uniqueComponentsToRegister).indexOf(node.widget.component)&&(uniqueComponentsToRegister[node.widget.component.uid]={name:node.widget.component.name,scope:node.widget.component.scope,type:node.widget.component.type})}),_context8.next=4,self.registerElements(uniqueComponentsToRegister);case 4:if(!self.props.preview){_context8.next=16;break}isMobileViewAvailable=!1,_context8.t0=_regeneratorRuntime.keys(previewItems);case 7:if((_context8.t1=_context8.t0()).done){_context8.next=15;break}if(itemIndx=_context8.t1.value,"mobile"!=previewItems[itemIndx].Layout){_context8.next=13;break}return isMobileViewAvailable=!0,_context8.abrupt("break",15);case 13:_context8.next=7;break;case 15:currentLayoutInState="mobile"==currentLayoutInState?isMobileViewAvailable?currentLayoutInState:"default":currentLayoutInState;case 16:previewItems&&previewItems.length>0&&_.each(previewItems,function(node){if(node.widget&&node.widget.tag){var slot={x:node.xposition,y:node.yposition,width:node.width,height:node.height,minwidth:node.minwidth,maxwidth:node.maxwidth,minheight:node.minheight,maxheight:node.maxheight};"default"==currentLayoutInState&&(!node.Layout||"default"==node.Layout)||"default"!=currentLayoutInState&&currentLayoutInState==node.Layout?widgets.push({ele:$("<div><div id="+node.widget.widgetid+' class="grid-stack-item-content">\n                                                <widget-container key='+node.widget.widgetid+' \n                                                    preview="true" pageid='+self.pageId+"\n                                                    tag="+node.widget.tag+"                                                                                             \n                                                    widgetid="+node.widget.widgetid+' class="widgetContainer"                                             \n                                                    style="height: 100%;" shadow="true"\n                                                    pagesuffix='+self.props.pagesuffix+" ></widget-container></div><div/>"),node:node}):slot={x:0,y:0,width:0,height:0,minwidth:0,maxwidth:96,minheight:0,maxheight:40};var _name=node.widget.component?node.widget.component.name:"",componentId=node.widget.component?node.widget.component.uid:"";previewPage.widgets[node.widget.widgetid]=_extends({},previewPage.widgets[node.widget.widgetid],{name:_name,Component:componentId,id:node.widget.widgetid,widgettree:self.props.widgettree,props:node.widget.widgetprops,slotid:node.uid,Layout:node.Layout,slot:slot})}},_this6),resolve();case 18:case"end":return _context8.stop()}},_callee8,_this6)})),function(_x13,_x14){return _ref10.apply(this,arguments)}));gridElPromises.push(gridElPromise)});case 59:Promise.all(gridElPromises).then(_asyncToGenerator(_regeneratorRuntime.mark(function _callee9(){var layouts,pages,pageData;return _regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.next=2,_this7.runPageActions(previewPage,previewPage.pageParams);case 2:previewPage=_context9.sent,layouts={slots:{},widgets:{}},previewPage.slots&&previewPage.widgets&&(Object.keys(previewPage.slots).map(function(slotId){var pageSlot=previewPage.slots[slotId];layouts.slots[pageSlot.Layout||"default"]=layouts.slots[pageSlot.Layout||"default"]||{},layouts.slots[pageSlot.Layout||"default"][slotId]=pageSlot}),Object.keys(previewPage.widgets).map(function(widgetId){var pageWidget=previewPage.widgets[widgetId];layouts.widgets[pageWidget.Layout||"default"]=layouts.widgets[pageWidget.Layout||"default"]||{},layouts.widgets[pageWidget.Layout||"default"][widgetId]=pageWidget})),previewPage.layouts=layouts,previewPage.currentLayout=currentLayoutInState,previewPage.slots=layouts.slots?layouts.slots[currentLayoutInState]?layouts.slots[currentLayoutInState]:layouts.slots.default:{},previewPage.widgets=layouts.widgets?layouts.widgets[currentLayoutInState]?layouts.widgets[currentLayoutInState]:layouts.widgets.default:{},widgets.length>0&&(!self.grid||self.grid.engine.nodes.length!=widgets.length)?deepEqual(self.props.pages[uniquePageId],previewPage)?($(self.rootEl).find(".gridPreviewCanvas"),self.grid.batchUpdate(),self.grid.removeAll(),self.grid&&self.grid.engine&&self.grid.engine._removedNodes&&self.grid.engine._removedNodes.map(function(node){$(node.el).remove()}),previewPage.widgets.map(function(widgetObj){widgetObj.node;self.grid&&self.grid.addWidget(widgetObj.ele,widgetObj.x,widgetObj.y,widgetObj.width,widgetObj.height,!1,widgetObj.minwidth,widgetObj.maxwidth,widgetObj.minheight,widgetObj.maxheight)}),self.grid.commit(),self.resizeGrid(),self.setState({pageloading:!1})):((pages=cloneDeep(_this7.props.pages)||{})[uniquePageId]=previewPage,_this7.props.updateStore({updates:{pages:pages}}),self.setState({pageloading:!1,widgets:widgets})):self.props.pageData&&self.props.pageData.widgets?deepEqual(self.props.pageData.widgets,previewPage.widgets)?self.setState({pageloading:!1}):((pageData=cloneDeep(self.props.pageData)).pageParams=previewPage.pageParams,Object.keys(pageData.widgets).map(function(pageWidgetId){var updatedPageWidgetProps=_extends({},previewPage.widgets[pageWidgetId].props,pageData.widgets[pageWidgetId].props);previewPage.widgets&&previewPage.widgets[pageWidgetId]&&previewPage.widgets[pageWidgetId].props&&Object.keys(previewPage.widgets[pageWidgetId].props).map(function(widgetProp2Update){if("value"==widgetProp2Update&&(updatedPageWidgetProps.value=previewPage.widgets[pageWidgetId].props.value),widgetProp2Update.startsWith("__Pageparam__")){var tempWidgetPropName=widgetProp2Update.split("__Pageparam__")[1];updatedPageWidgetProps[tempWidgetPropName]=previewPage.widgets[pageWidgetId].props[tempWidgetPropName]}});var updatedPageWidget=_extends({},previewPage.widgets[pageWidgetId],pageData.widgets[pageWidgetId]);updatedPageWidget.props=updatedPageWidgetProps,_.isEqual(updatedPageWidget,pageData.widgets[pageWidgetId])||(pageData.widgets[pageWidgetId]=updatedPageWidget,pageData.widgets[pageWidgetId].reload=!pageData.widgets[pageWidgetId].reload)}),self.props.updateStore({updates:{pageData:pageData}}),self.setState({pageloading:!1})):self.setState({pageloading:!1});case 10:case"end":return _context9.stop()}},_callee9,_this7)}))).catch(function(err){self.setState({pageloading:!1})});case 60:case"end":return _context10.stop()}},_callee10,this)}));return function(_x12){return _ref8.apply(this,arguments)}}()},{key:"render",value:function(){var pageId=this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,canvasClassName=(this.props.widgetspacing?"true"==this.props.widgetspacing:!this.props.widgetProps||("true"==this.props.widgetProps.WidgetSpacing||1==this.props.widgetProps.WidgetSpacing))?"grid-stack grid-stack-96 gridPreviewCanvas":"grid-stack grid-stack-96 gridPreviewCanvas noWidgetSpacing",showOverlayClassName=this.state.pageloading||this.props.pageState&&1==this.props.pageState.showloader?"showOverlay":"showOverlay showOverlay-hide";return pageId?React.createElement("div",{className:"topPreviewContainer",ref:"previewarea"},React.createElement("style",null,'@import url("/thirdpartylib/gridstack/gridstack.min.css"); @import url("/thirdpartylib/gridstack/corestyles.css");'),React.createElement("div",{className:showOverlayClassName}),React.createElement("div",{className:"gridPreviewContent"},React.createElement("div",{className:canvasClassName,style:{height:"fit-content"}})),React.createElement("div",{"data-inline-loading":!0,className:this.state.pageloading||this.props.pageState&&1==this.props.pageState.showloader?"bx--inline-loading pageloader-show":"bx--inline-loading pageloader-hide",role:"alert","aria-live":"assertive"},React.createElement("div",{className:"bx--inline-loading__animation"},React.createElement("div",{"data-inline-loading-spinner":!0,className:"bx--loading bx--loading--small"},React.createElement("svg",{className:"bx--loading__svg",viewBox:"-75 -75 150 150"},React.createElement("circle",{className:"bx--loading__background",cx:"0",cy:"0",r:"26.8125"}),React.createElement("circle",{className:"bx--loading__stroke",cx:"0",cy:"0",r:"26.8125"}))),React.createElement("svg",{focusable:"false",preserveAspectRatio:"xMidYMid meet",style:{willChange:"transform"},xmlns:"http://www.w3.org/2000/svg",className:"bx--inline-loading__checkmark-container",hidden:"","data-inline-loading-finished":"",width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true"},React.createElement("path",{d:"M8,1C4.1,1,1,4.1,1,8c0,3.9,3.1,7,7,7s7-3.1,7-7C15,4.1,11.9,1,8,1z M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z"}),React.createElement("path",{d:"M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z","data-icon-path":"inner-path",opacity:"0"}))),React.createElement("p",{"data-inline-loading-text-active":!0,className:"bx--inline-loading__text"},"Preparing..."),React.createElement("p",{"data-inline-loading-text-finished":!0,hidden:!0,className:"bx--inline-loading__text"},"Data loaded."))):React.createElement("div",{style:{color:"blue"}},"No page found!")}}]),_PageDesignerPreview_}(React.Component),_export("PageDesignerPreview",PageDesignerPreview=function(props){return _PageDesignerPreview_}),_export("PageDesignerPreview",PageDesignerPreview),_export("default",PageDesignerPreview),_export("states",states=[{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id": ""}'},{KeyName:"pages",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"scrollfired",AccessPath:"scrollfired",DefaultValue:'{"scrollfired": false}'},{KeyName:"parentPage",AccessPath:"pages.${pageid}",DefaultValue:'{"pages": {"${pageid}": {}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id":""}'},{KeyName:"pagereload",AccessPath:"pagereload.${pageid}",DefaultValue:'{"pagereload": {"${pageid}": false}}'},{KeyName:"is_design_time",AccessPath:"is_design_time",DefaultValue:'{"is_design_time": false}'},{KeyName:"previewpageid",AccessPath:"previewpageid",DefaultValue:'{"previewpageid": ""}'},{KeyName:"pageData",AccessPath:"pages.${previewpageid}${pagesuffix}",DefaultValue:'{"pages": {"${previewpageid}${pagesuffix}": {}}}'},{KeyName:"pageState",AccessPath:"pagestate.${previewpageid}${pagesuffix}",DefaultValue:'{"pagestate": {"${previewpageid}${pagesuffix}": {}}}'},{KeyName:"pageid",AccessPath:"pageid",DefaultValue:'{"pageid": ""}'},{KeyName:"pagesuffix",AccessPath:"pagesuffix",DefaultValue:'{"pagesuffix":  ""}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PageDesignerPreview/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","jquery","jquery-ui/ui/data","jquery-ui/ui/disable-selection","jquery-ui/ui/focusable","jquery-ui/ui/form","jquery-ui/ui/ie","jquery-ui/ui/keycode","jquery-ui/ui/labels","jquery-ui/ui/jquery-1-7","jquery-ui/ui/plugin","jquery-ui/ui/safe-active-element","jquery-ui/ui/safe-blur","jquery-ui/ui/scroll-parent","jquery-ui/ui/tabbable","jquery-ui/ui/unique-id","jquery-ui/ui/version","jquery-ui/ui/widget","jquery-ui/ui/widgets/mouse","jquery-ui/ui/widgets/draggable","jquery-ui/ui/widgets/droppable","jquery-ui/ui/widgets/resizable","deepmerge","lodash.clonedeep","lodash.get","deep-equal","lodash","thirdpartylib/gridstack/gridstack.min.js"],function(_export,_context11){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,$,deepmerge,cloneDeep,lodashget,deepEqual,_,_PageDesignerPreview_,PageDesignerPreview;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_jquery){$=_jquery.default},function(_jqueryUiUiData){},function(_jqueryUiUiDisableSelection){},function(_jqueryUiUiFocusable){},function(_jqueryUiUiForm){},function(_jqueryUiUiIe){},function(_jqueryUiUiKeycode){},function(_jqueryUiUiLabels){},function(_jqueryUiUiJquery){},function(_jqueryUiUiPlugin){},function(_jqueryUiUiSafeActiveElement){},function(_jqueryUiUiSafeBlur){},function(_jqueryUiUiScrollParent){},function(_jqueryUiUiTabbable){},function(_jqueryUiUiUniqueId){},function(_jqueryUiUiVersion){},function(_jqueryUiUiWidget){},function(_jqueryUiUiWidgetsMouse){},function(_jqueryUiUiWidgetsDraggable){},function(_jqueryUiUiWidgetsDroppable){},function(_jqueryUiUiWidgetsResizable){},function(_deepmerge){deepmerge=_deepmerge.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashGet){lodashget=_lodashGet.default},function(_deepEqual){deepEqual=_deepEqual.default},function(_lodash){_=_lodash.default},function(_thirdpartylibGridstackGridstackMinJs){}],execute:function(){_PageDesignerPreview_=function(_React$Component){function _PageDesignerPreview_(props){_classCallCheck(this,_PageDesignerPreview_);var _this=_possibleConstructorReturn(this,(_PageDesignerPreview_.__proto__||Object.getPrototypeOf(_PageDesignerPreview_)).call(this,props));return _this.state={pageloading:!0,showloader:!1},_this.updatePage=_this.updatePage.bind(_this),_this.registerElements=_this.registerElements.bind(_this),_this.getPreviewItems=_this.getPreviewItems.bind(_this),_this.evaluateQuery=_this.evaluateQuery.bind(_this),_this.parseGraphQLParam=_this.parseGraphQLParam.bind(_this),_this.getPageParams=_this.getPageParams.bind(_this),_this.resizeGrid=_this.resizeGrid.bind(_this),_this.runPageActions=_this.runPageActions.bind(_this),_this.initializeLayout=_this.initializeLayout.bind(_this),_this.viewModelName="",_this.viewData={},_this}return _inherits(_PageDesignerPreview_,_React$Component),_createClass(_PageDesignerPreview_,[{key:"initializeLayout",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(hostEl,activePage){var self;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(hostEl){_context2.next=2;break}return _context2.abrupt("return");case 2:return self=this,_context2.next=5,$(".gridPreviewCanvas",hostEl).each(_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var activePageSlotIds,activePageSlotIdIndx,slotId,slot,widgetId,widgetProps,name,eleData,activeItemContentEl,widgetContainerEl;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(self.grid=self.grid||GridStack.init(self.options,this),self.grid){_context.next=3;break}return _context.abrupt("return");case 3:if(self.grid.batchUpdate(),self.grid.removeAll(!0),self.grid.commit(),self.grid.batchUpdate(),!activePage.slots){_context.next=30;break}activePageSlotIds=Object.keys(activePage.slots),_context.t0=_regeneratorRuntime.keys(activePageSlotIds);case 10:if((_context.t1=_context.t0()).done){_context.next=29;break}if(activePageSlotIdIndx=_context.t1.value,slotId=activePageSlotIds[activePageSlotIdIndx],slot=activePage.slots[slotId],widgetId=slot.Widget?slot.Widget:slot.widget&&slot.widget.widgetid?slot.widget.widgetid:"",!(widgetProps=activePage.widgets[widgetId])||!widgetProps.name){_context.next=27;break}if(name=widgetProps.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),eleData=Object.assign({tag:name,widgetid:widgetId,componentid:widgetProps.Component},widgetProps),$(this).attr("slotid",slotId),!(activeItemContentEl=self.grid.$el.find("#"+widgetId+".grid-stack-item-content"))&&self.grid.container&&self.grid.container.length>0&&(activeItemContentEl=$(self.grid.container[0]).find("#"+widgetId+".grid-stack-item-content")),activeItemContentEl&&0!=activeItemContentEl.length){_context.next=27;break}return(widgetContainerEl=$("<div><div id="+widgetId+' class="grid-stack-item-content">\n                                                <widget-container key='+widgetId+" \n                                                    slotid="+slotId+"\n                                                    componentid="+eleData.componentid+'\n                                                    preview="true" pageid='+self.pageId+"\n                                                    tag="+eleData.tag+"                                                                                             \n                                                    widgetid="+widgetId+' class="widgetContainer"                                             \n                                                    style="height: 100%;" shadow="true"\n                                                    pagesuffix='+self.props.pagesuffix+" ></widget-container></div><div/>")).find("widget-container").data("widgetprops",eleData),_context.next=27,self.grid.addWidget(widgetContainerEl,slot.xposition,slot.yposition,slot.width,slot.height,!1,0,96,0,40);case 27:_context.next=10;break;case 29:self.grid.commit();case 30:case"end":return _context.stop()}},_callee,this)})));case 5:case"end":return _context2.stop()}},_callee2,this)}));return function(_x,_x2){return _ref.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var _this2=this;this.updatePage(),$(this.rootEl).find(".gridPreviewContent")&&(this.props.watchScrolling||this.props.widgetProps&&this.props.widgetProps.WatchScroll)&&$(this.rootEl).find(".gridPreviewContent").scroll(function(){return _this2.props.updateStore({updates:{scrollfired:!_this2.props.scrollfired}})}),(-1==Object.keys(this.props).indexOf("responsive")&&(!this.props.widgetProps||-1==Object.keys(this.props.widgetProps).indexOf("Responsive"))||"true"==this.props.responsive||this.props.widgetProps&&this.props.widgetProps.Responsive&&("true"==this.props.widgetProps.Responsive||1==this.props.widgetProps.Responsive))&&window.addEventListener("resize",this.resizeGrid),this.resizeGrid()}},{key:"componentDidUnmount",value:function(){window.removeEventListener("resize",this.resizeGrid)}},{key:"componentDidUpdate",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(prevProps,prevState){var self,widgets,prevLayout,currentLayout,pageData,layoutCode,_prevLayout,_currentLayout,_pageData,pageState,parentstate,pageId,pageParamMapping,pageParams,parentPageParams,parentPage,inputParams;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(self=this,_.isEqual(prevProps.pageState!=this.props.pageState)||prevProps.pageState&&this.props.pageState&&(prevProps.pageState.showloader!=this.props.pageState.showloader&&this.setState({showloader:this.props.pageState.showloader}),_.isEqual(prevProps.pageState.layout,this.props.pageState.layout)||($(self.rootEl).find(".gridPreviewCanvas"),self.grid&&(self.grid.batchUpdate(),this.props.pageState.layout.options&&self.grid.float(this.props.pageState.layout.options.float),widgets=this.props.pageState.layout&&this.props.pageState.layout.widgets?this.props.pageState.layout.widgets:{},Object.keys(widgets).map(function(widgetName){var widgetId=widgets[widgetName].id,gridStackItemContentEl=self.grid.$el.find("#"+widgetId+".grid-stack-item-content");if(1==gridStackItemContentEl.length){var gridStackItemEl=gridStackItemContentEl.parent();widgets[widgetName].slot&&self.grid.update(gridStackItemEl,widgets[widgetName].slot.x,widgets[widgetName].slot.y,widgets[widgetName].slot.width,widgets[widgetName].slot.height)}else if(widgets[widgetName].slot){var widgetEl=$("<div><div id="+widgetId+' class="grid-stack-item-content">\n                                                <widget-container key='+widgetId+' \n                                                    preview="true" pageid='+self.pageId+"\n                                                    tag="+widgets[widgetName].tag+"                                                                                             \n                                                    widgetid="+widgetId+' class="widgetContainer"                                             \n                                                    style="height: 100%;" shadow="true"\n                                                    pagesuffix='+self.props.pagesuffix+" ></widget-container></div><div/>");self.grid.addWidget(widgetEl,widgets[widgetName].slot.x,widgets[widgetName].slot.y,widgets[widgetName].slot.width,widgets[widgetName].slot.height,!1,0,96,0,40)}}),self.grid.commit(),this.resizeGrid()))),prevProps.pageState&&this.props.pageState&&prevProps.pageState.oneColumn!=this.props.pageState.oneColumn&&this.props.pageData&&this.runPageActions(this.props.pageData,this.props.pageData.pageParams||{}),!prevProps.pageState||!this.props.pageState||prevProps.pageState.currentLayout==this.props.pageState.currentLayout){_context3.next=18;break}if(prevLayout=prevProps.pageState.currentLayout,currentLayout=this.props.pageState.currentLayout,prevLayout&&"default"!=prevLayout||currentLayout&&"default"!=currentLayout){_context3.next=9;break}_context3.next=18;break;case 9:if((pageData=cloneDeep(this.props.pageData)||{}).currentLayout=this.props.pageState?this.props.pageState.currentLayout:pageData.currentLayout,!pageData.layouts||!pageData.layouts.slots){_context3.next=18;break}return layoutCode="mobile"==this.props.pageState.currentLayout?pageData.layouts.slots.mobile?"mobile":"default":this.props.pageState.currentLayout,pageData.slots=pageData.layouts.slots[layoutCode],pageData.widgets=pageData.layouts.widgets[layoutCode],_context3.next=17,this.initializeLayout(self.props.shadow,pageData);case 17:this.props.updateStore({updates:{pageData:pageData}});case 18:if(!prevProps.pageData||!this.props.pageData||prevProps.pageData.id!=this.props.pageData.id||prevProps.pageData.currentLayout==this.props.pageData.currentLayout){_context3.next=32;break}if(this.props.pageData.currentLayout==this.props.pageState.currentLayout){_context3.next=32;break}if(_prevLayout=prevProps.pageData.currentLayout,_currentLayout=this.props.pageData.currentLayout,_prevLayout&&"default"!=_prevLayout||_currentLayout&&"default"!=_currentLayout){_context3.next=25;break}_context3.next=32;break;case 25:if(!(_pageData=cloneDeep(this.props.pageData)).layouts||!_pageData.layouts.slots){_context3.next=32;break}return _pageData.slots=_pageData.layouts.slots[this.props.pageData.currentLayout],_pageData.widgets=_pageData.layouts.widgets[this.props.pageData.currentLayout],_context3.next=31,this.initializeLayout(self.props.shadow,_pageData);case 31:this.props.updateStore({updates:{pageData:_pageData}});case 32:if(_.isEqual(prevProps.parentstate,this.props.parentstate)||(pageState=cloneDeep(this.props.pageState)||{},parentstate=this.props.parentstate?"string"==typeof this.props.parentstate?JSON.parse(this.props.parentstate):this.props.parentstate:{},pageState.parentstate=parentstate,this.props.updateStore({updates:{pageState:pageState}})),prevState.pageloading==this.state.pageloading){_context3.next=37;break}1==this.state.pageloading?this.updatePage(prevProps):!_.isEqual(prevState.widgets,this.state.widgets)&&this.state.widgets&&($(self.rootEl).find(".gridPreviewCanvas"),self.grid.batchUpdate(),self.grid.removeAll(),self.grid&&self.grid.engine&&self.grid.engine._removedNodes&&self.grid.engine._removedNodes.map(function(node){$(node.el).remove()}),this.state.widgets.map(function(widgetObj){var node=widgetObj.node;self.grid&&self.grid.addWidget(widgetObj.ele,node.xposition,node.yposition,node.width,node.height,!1,node.minwidth,node.maxwidth,node.minheight,node.maxheight)}),self.grid.commit(),self.resizeGrid()),_context3.next=66;break;case 37:if(this.props.reload==prevProps.reload&&this.props.pagereload==prevProps.pagereload&&_.isEqual(this.props.items,prevProps.items)){_context3.next=41;break}this.updatePage(prevProps),_context3.next=66;break;case 41:if(!this.props.widgetProps||!prevProps.widgetProps||_.isEqual(this.props.widgetProps,prevProps.widgetProps)){_context3.next=45;break}this.props.parentPage&&this.props.parentPage.widgets&&this.props.parentPage.widgets[this.props.widgetid]&&"SrsTabs"==this.props.parentPage.widgets[this.props.widgetid].name?prevProps.widgetProps.Reload==this.props.widgetProps.Reload&&prevProps.widgetProps.ActiveTab==this.props.widgetProps.ActiveTab&&(_.isEqual(this.pageParams,this.props.pageData.pageParams)||(this.pageParams=this.props.pageData.pageParams,this.updatePage(prevProps))):this.updatePage(prevProps),_context3.next=66;break;case 45:if(_.isEqual(this.props.pageData,prevProps.pageData)){_context3.next=66;break}if(pageId="true"==this.props.widgetProps.is_container?this.props.previewpageid:this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,pageParamMapping=null,pageParams={},!this.props.pagesuffix||!this.props.pageid){_context3.next=53;break}pageParams=this.props.pages[pageId+this.props.pagesuffix]?this.props.pages[pageId+this.props.pagesuffix].pageParams:pageParams,_context3.next=65;break;case 53:if(!prevProps.pageData||!this.props.pageData||_.isEqual(prevProps.pageData.pageParams,this.props.pageData.pageParams)){_context3.next=57;break}pageParams=this.props.pageData.pageParams,_context3.next=65;break;case 57:return pageParamMapping="string"==typeof(pageParamMapping=pageParamMapping||(this.props&&this.props.widgetProps&&this.props.widgetProps.PageParams?this.props.widgetProps.PageParams:{}))?JSON.parse(pageParamMapping):pageParamMapping,parentPageParams=this.props.pageparams?"string"==typeof this.props.pageparams?JSON.parse(this.props.pageparams):this.props.pageparams:{},parentPage=this.props.parentPage,inputParams={pageId:pageId,pageParamMapping:pageParamMapping,parentPageParams:parentPageParams,parentPage:parentPage,isContainer:this.props.widgetProps.is_container,containerSubPageName:this.props.pagename},_context3.next=64,$script.runscript("mmf.getPageParameters",inputParams);case 64:pageParams=_context3.sent;case 65:_.isEqual(pageParams,this.pageParams)||(this.pageParams=pageParams,this.updatePage(prevProps));case 66:case"end":return _context3.stop()}},_callee3,this)}));return function(_x3,_x4){return _ref3.apply(this,arguments)}}()},{key:"resizeGrid",value:function(){if(("true"==this.props.responsive||this.props.widgetProps&&this.props.widgetProps.Responsive&&("true"==this.props.widgetProps.Responsive||1==this.props.widgetProps.Responsive))&&(this.props.preview&&this.rootEl&&this.grid&&this.rootEl.clientWidth>0))if(this.rootEl.clientWidth<700){this.grid.column(1);var pageState=cloneDeep(this.props.pageState)||{};pageState.oneColumn=!0,pageState.currentLayout="mobile",pageState.layout=pageState.layout||{},pageState.layout.options=pageState.layout.options||{},pageState.layout.options.float=!1,this.props.updateStore({updates:{pageState:pageState}})}else{var _pageState=cloneDeep(this.props.pageState)||{};_pageState.oneColumn=!1,_pageState.currentLayout="default",_pageState.layout=_pageState.layout||{},_pageState.layout.options=_pageState.layout.options||{},_pageState.layout.options.float=!0,this.props.updateStore({updates:{pageState:_pageState}}),this.grid.column(96)}}},{key:"parseGraphQLParam",value:function(paramValue){var paramFields=paramValue.split(".");if(paramFields&&paramFields.length>1){var tempObj={};paramFields.slice(1).reduce(function(o,s){return o[s]={}},tempObj);var convertedStr=JSON.stringify(tempObj).replace(":{}","").replace(/"/g,"").replace(/:{/g,"{\n\t\t").replace(/^{/,"{\n\t").replace(/([}]+)/,"\n$1");return paramFields[0]+" "+convertedStr}return paramValue}},{key:"evaluateQuery",value:function(graphQLParams,recordId){var _this3=this;return new Promise(function(resolve,reject){var fields=[];graphQLParams.map(function(graphQLParam){fields.push(_this3.parseGraphQLParam(graphQLParam))});var query="query($inputData:JSON) {\n                    "+_this3.viewModelName+" {\n                        "+_this3.viewModelName+"FindOne(filter: $inputData) {\n                            uid\n                            "+fields.join("\n")+"\n                        }\n                    }\n            }",variables='{\n                    "inputData": {\n                        "where": {\n                        "uid": "'+recordId+'"\n                        }\n                    }\n                }';$qry._run(query,variables).then(function(viewData){var result=("data."+_this3.viewModelName+"."+_this3.viewModelName+"FindOne").split(".").reduce(function(xs,s){return xs&&xs[s]?xs[s]:null},viewData);resolve(result)}).catch(function(err){return resolve({})})})}},{key:"getPageParams",value:function(pageId){var _ref4,_this4=this;return new Promise((_ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(resolve,reject){var parentPageParams,parentPage,pageParamMapping,pageParams,pageProps,allowedPagePropNames,_allowedPagePropNames,pageParamMappingKey;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(parentPageParams=_this4.props.pageparams?"string"==typeof _this4.props.pageparams?JSON.parse(_this4.props.pageparams):_this4.props.pageparams:{},parentPage=_this4.props.parentPage,_context5.t0=_this4.queriedPage,_context5.t0){_context5.next=7;break}return _context5.next=6,$qry.run("mmf.getSlidePropsById",{uid:pageId},"data.slide",!1,!!_this4.props.preview);case 6:_context5.t0=_context5.sent;case 7:_this4.queriedPage=_context5.t0,pageParamMapping="string"==typeof(pageParamMapping=_this4.props&&_this4.props.widgetProps&&_this4.props.widgetProps.PageParams?_this4.props.widgetProps.PageParams:{})?JSON.parse(pageParamMapping):pageParamMapping,pageParams={},pageProps={},"CreateView"==_this4.queriedPage.Type||"EditView"==_this4.queriedPage.Type?((allowedPagePropNames=Object.keys(_this4.queriedPage.props).filter(function(pagePropName){return"ModelName"!=pagePropName&&"ModelScope"!=pagePropName}))&&allowedPagePropNames.map(function(allowedPropName){return pageProps[allowedPropName]=_this4.queriedPage.props[allowedPropName]}),pageProps.recordid="recordid"):(_allowedPagePropNames=Object.keys(_this4.queriedPage.props).filter(function(pagePropName){return"ModelName"!=pagePropName&&"ModelScope"!=pagePropName}))&&_allowedPagePropNames.map(function(allowedPropName){return pageProps[allowedPropName]=_this4.queriedPage.props[allowedPropName]}),pageParamMappingKey="true"==_this4.props.widgetProps.is_container?pageId+"_"+_this4.props.pagename:pageId,pageProps&&Object.keys(pageProps).map(function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(propName){var widgetName2Map,childWidgetPageId,childWidgetName,widgetPropName2Map,childWidgetPage,pages,fieldName2Map;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!(pageParamMapping&&pageParamMapping[pageParamMappingKey]&&pageParamMapping[pageParamMappingKey][propName])){_context4.next=32;break}_context4.t0=pageParamMapping[pageParamMappingKey][propName].type,_context4.next="widget_props"===_context4.t0?4:"page_field"===_context4.t0?23:"page_param"===_context4.t0?26:28;break;case 4:if(widgetName2Map=pageParamMapping[pageParamMappingKey][propName].widgetName,childWidgetPageId=pageParamMapping[pageParamMappingKey][propName].childWidgetPageId,childWidgetName=pageParamMapping[pageParamMappingKey][propName].childWidgetName,widgetPropName2Map="",!childWidgetPageId||!childWidgetName){_context4.next=20;break}if(childWidgetPage=_this4.props.pages[childWidgetPageId]){_context4.next=17;break}return _context4.next=13,$script.runscript("studio.getPageDetails",{pageId:childWidgetPageId},!1,!!_this4.props.preview);case 13:childWidgetPage=_context4.sent,(pages=cloneDeep(_this4.props.pages))[childWidgetPageId]=childWidgetPage,_this4.props.updateStore({updates:{pages:pages}});case 17:childWidgetPage.widgets&&(widgetPropName2Map=pageParamMapping[pageParamMappingKey][propName].widgetPropName?pageParamMapping[pageParamMappingKey][propName].widgetPropName:"value",Object.keys(childWidgetPage.widgets).map(function(targetWidgetId){if(childWidgetPage.widgets[targetWidgetId].props){var targetWidgetName=childWidgetPage.widgets[targetWidgetId].props.Name||childWidgetPage.widgets[targetWidgetId].props.id;childWidgetName==targetWidgetName&&(pageParams[propName]=childWidgetPage.widgets[targetWidgetId].props[widgetPropName2Map])}})),_context4.next=22;break;case 20:widgetPropName2Map=pageParamMapping[pageParamMappingKey][propName].widgetPropName?pageParamMapping[pageParamMappingKey][propName].widgetPropName:"value",widgetName2Map&&parentPage&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){(parentPageWidgetId==widgetName2Map||parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.Name==widgetName2Map)&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props[widgetPropName2Map])});case 22:return _context4.abrupt("break",30);case 23:return(fieldName2Map=pageParamMapping[pageParamMappingKey][propName].pageFieldId)&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.FieldName=="@@["+fieldName2Map+"]"&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.value)}),_context4.abrupt("break",30);case 26:return parentPage&&parentPage.pageParams&&(pageParamMapping[pageParamMappingKey][propName].pageParamId?pageParams[propName]=parentPage.pageParams[pageParamMapping[pageParamMappingKey][propName].pageParamId]:pageParams[propName]=parentPage.pageParams[propName]),_context4.abrupt("break",30);case 28:return parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(pageParams[propName]=parentPage.pageParams[propName]),_context4.abrupt("break",30);case 30:_context4.next=33;break;case 32:parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]?pageParams[propName]=parentPage.pageParams[propName]:parentPageParams&&parentPageParams[propName]&&(pageParams[propName]=parentPageParams[propName]);case 33:case"end":return _context4.stop()}},_callee4,_this4)}));return function(_x7){return _ref5.apply(this,arguments)}}()),resolve(pageParams);case 16:case"end":return _context5.stop()}},_callee5,_this4)})),function(_x5,_x6){return _ref4.apply(this,arguments)}))}},{key:"runPageActions",value:function(){var _ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(pageData,pageParams){var updatedPageData,self,pageId,pageActions,setState,getState,setStateWithPreload,pageActionKeys,pageActionsPromises,_loop,pageActionKeyIndx,dataArry,dataArryIndx,widgetData,widgetNames,updatedWidgetIndx,widgetName,updatedWidgetProps,updatedWidgetId;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return{},updatedPageData=void 0,self=this,pageId=this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,_context6.next=6,System.import("/page/"+pageId+"/Action.js");case 6:if(!(pageActions=_context6.sent)||!pageActions.default){_context6.next=24;break}if(pageActions=pageActions.default,setState=function(recentUpdates){var pageState=self.props.pageState?self.props.pageState:{};pageState=deepmerge.all([pageState,recentUpdates]),self.props.updateStore({updates:{pageState:pageState}})},getState=function(){return cloneDeep(self.props.pageState)},setStateWithPreload=function(recentUpdates,$widgets){var pageState=self.props.pageState?self.props.pageState:{};if(pageState=deepmerge(pageState,recentUpdates),$widgets)for(var widgetIndx in $widgets){var widget=$widgets[widgetIndx];if(widget){var widgetProps=widget.props;if(widgetProps&&Object.keys(widgetProps).length>0){var widgetPropNames=Object.keys(widgetProps);for(var widgetPropIndx in widgetPropNames){var widgetPropName=widgetPropNames[widgetPropIndx];if(widgetPropName.indexOf("__State__")>-1){var widgetPropPathValue=widgetProps[widgetPropName],wpropName=widgetPropName.split("__State__")[1];if(widgetPropPathValue&&pageState&&Object.keys(pageState).length>0){var newPropVal=lodashget(pageState,widgetPropPathValue);newPropVal&&(widgetProps[wpropName]="string"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}}}}}return self.props.updateStore({updates:{pageState:pageState}}),$widgets},!(pageActions&&Object.keys(pageActions).length>0)){_context6.next=24;break}for(pageActionKeyIndx in{},pageActionKeys=Object.keys(pageActions),pageActionsPromises=[],_loop=function(){var pageActionKey=pageActionKeys[pageActionKeyIndx],notifier={getState:getState,setState:setState,setStateWithPreload:setStateWithPreload,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},ctx={currentscope:self.props.currentscope,cloneDeep:cloneDeep},result=pageActions[pageActionKey](pageData,notifier,ctx);result.then?pageActionsPromises.push(result):pageActionsPromises.push(new Promise(function(resolve,reject){return resolve(result)}))},pageActionKeys)_loop();if(updatedPageData=cloneDeep(pageData),!(pageActionsPromises.length>0)){_context6.next=24;break}return _context6.next=22,Promise.all(pageActionsPromises);case 22:if((dataArry=_context6.sent)&&dataArry.length>0)for(dataArryIndx in dataArry)if((widgetData=dataArry[dataArryIndx])&&Object.keys(widgetData).length>0&&(widgetNames=Object.keys(widgetData),widgetData&&widgetNames.length>0))for(updatedWidgetIndx in widgetNames)widgetName=widgetNames[updatedWidgetIndx],updatedWidgetProps=widgetData[widgetName].props,updatedWidgetId=updatedWidgetProps.id,_.isEqual(updatedWidgetProps,pageData.widgets[updatedWidgetId].props)||(updatedPageData.widgets[updatedWidgetId].props=_extends({},updatedPageData.widgets[updatedWidgetId].props,updatedWidgetProps));case 24:return _context6.abrupt("return",updatedPageData||pageData);case 25:case"end":return _context6.stop()}},_callee6,this)}));return function(_x8,_x9){return _ref6.apply(this,arguments)}}()},{key:"getPreviewItems",value:function(previewPage,previousPageParams){var _ref7,_this5=this;return new Promise((_ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(resolve,reject){var pageId,previewItems,accessPaths,slideData,slots,slideProps,viewType,graphQLParams,recordid,previousRecordId;return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(_context7.prev=0,pageId=_this5.props.widgetProps&&_this5.props.widgetProps.PageId?_this5.props.widgetProps.PageId:_this5.props.previewpageid,previewItems=[],accessPaths=["data.slide"].join(),_context7.t0=_this5.slideData,_context7.t0){_context7.next=9;break}return _context7.next=8,$qry.run("mmf.getSlideDetailsById",{uid:pageId},accessPaths,!1,!!_this5.props.preview);case 8:_context7.t0=_context7.sent;case 9:return _this5.slideData=_context7.t0,slideData=_this5.slideData,slots={},_context7.next=14,$qry.run("mmf.getSlideProps",{pageId:pageId},"data.MetaSlideProps.MetaSlidePropsFind",!1,!!_this5.props.preview);case 14:if(slideProps=_context7.sent,slideData.Scope,slideData.Name,viewType=slideData.Type,graphQLParams=[],Object.keys(slideData.slots).map(function(slotKey){var slot=slideData.slots[slotKey];slot&&slot.widget&&slot.widget.widgetproperties&&Object.keys(slot.widget.widgetproperties).map(function(widgetPropKey){var widgetProp=slot.widget.widgetproperties[widgetPropKey];if(widgetProp&&widgetProp.value&&widgetProp.value.startsWith("@@[")){var paramValue=widgetProp.value.split("@@[")[1];paramValue=paramValue.substr(0,paramValue.length-1),graphQLParams.push(paramValue)}})}),recordid=previewPage&&previewPage.pageParams&&previewPage.pageParams.recordid?previewPage.pageParams.recordid:"",previousRecordId=previousPageParams&&previousPageParams.recordid?previousPageParams.recordid:"",!("CreateView"==viewType||"EditView"==viewType&&recordid&&"-1"!=recordid&&recordid!=previousRecordId)){_context7.next=28;break}return _context7.next=25,_this5.evaluateQuery(graphQLParams,recordid);case 25:_context7.t1=_context7.sent,_context7.next=29;break;case 28:_context7.t1=_this5.viewData;case 29:_this5.viewData=_context7.t1,Object.keys(slideData.slots).map(function(slotKey){var slot=slideData.slots[slotKey],slotData={},widgetPropsPair={};slot&&(slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.height=slot.height,slotData.width=slot.width,slotData.minwidth=slot.minwidth,slotData.maxwidth=slot.maxwidth,slotData.minheight=slot.minheight,slotData.maxheight=slot.maxheight,slotData.resize=0,slotData.move=0,slotData.uid=slot.uid,slotData.Layout=slot.Layout,slotData.Slide=pageId,slots[slot.uid]=slotData),slot&&slot.widget&&slot.widget.widgetproperties&&Object.keys(slot.widget.widgetproperties).map(function(widgetPropKey){var widgetProp=slot.widget.widgetproperties[widgetPropKey],paramValue=widgetProp.value;widgetPropsPair[widgetProp.name]=paramValue;var fieldNameWithoutCover=widgetProp.value&&widgetProp.value.indexOf("@@[")>-1?widgetProp.value.split("@@[")[1]:widgetProp.value;if(fieldNameWithoutCover=fieldNameWithoutCover.endsWith("]")?fieldNameWithoutCover.substr(0,fieldNameWithoutCover.length-1):fieldNameWithoutCover,"FieldName"==widgetPropKey&&_this5.viewData&&(widgetPropsPair.value=lodashget(_this5.viewData,fieldNameWithoutCover)),widgetPropKey.startsWith("__Pageparam__")){var widgetPropPageParamKey=widgetPropKey.split("__Pageparam__")[1],referredPageParameter=widgetProp.value;previewPage.pageParams&&(previewPage.pageParams.hasOwnProperty(referredPageParameter)?widgetPropsPair[widgetPropPageParamKey]=previewPage.pageParams[referredPageParameter]:widgetPropsPair[widgetPropPageParamKey]=previewPage.props&&previewPage.props[referredPageParameter])}}),slot&&slot.widget&&(widgetPropsPair.id=slot.widget.uid,slotData.widget={tag:slot.widget.component.Name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),widgetid:slot.widget.uid,component:{name:slot.widget.component?slot.widget.component.Name:"",scope:slot.widget.component?slot.widget.component.Scope:"",type:slot.widget.component?slot.widget.component.Type:"",uid:slot.widget.component?slot.widget.component.uid:""},widgetprops:widgetPropsPair},slotData.widget=slotData.widget||{},slotData.widget.widgetprops=slotData.widget.widgetprops||{},slot.widget.component&&slot.widget.component.Props&&Object.keys(slot.widget.component.Props).map(function(componentPropName){-1==Object.keys(widgetPropsPair).indexOf(componentPropName)&&(slotData.widget.widgetprops[componentPropName]=slot.widget.component.Props[componentPropName])})),previewItems.push(slotData)}),resolve({previewItems:previewItems,slots:slots,props:slideProps}),_context7.next=37;break;case 34:_context7.prev=34,_context7.t2=_context7.catch(0),resolve({});case 37:case"end":return _context7.stop()}},_callee7,_this5,[[0,34]])})),function(_x10,_x11){return _ref7.apply(this,arguments)}))}},{key:"registerElements",value:function(uniqueComponentsToRegister){return new Promise(function(resolve,reject){var promises=[];uniqueComponentsToRegister&&Object.keys(uniqueComponentsToRegister).length>0&&Object.keys(uniqueComponentsToRegister).map(function(componentId){var elePromise=$ele&&$ele.registerElement(uniqueComponentsToRegister[componentId].name,uniqueComponentsToRegister[componentId].scope,uniqueComponentsToRegister[componentId].type);"PageDesigner"==uniqueComponentsToRegister[componentId].name&&"studio"==uniqueComponentsToRegister[componentId].scope&&(promises.push($ele&&$ele.registerElement("PageDesignerGeneral","studio","React")),promises.push($ele&&$ele.registerElement("PageDesignerWidget","studio","React")),promises.push($ele&&$ele.registerElement("PageDesignerProps","studio","React")),promises.push($ele&&$ele.registerElement("PageDesignerActions","studio","React")),promises.push($ele&&$ele.registerElement("SlideSelectionPanel","studio","React"))),promises.push(elePromise)});var listElPromise=$ele&&$ele.registerElement("ListLayout","mmf","React");promises.push(listElPromise),Promise.all(promises).then(function(results){return resolve()})})}},{key:"updatePage",value:function(){var _ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee10(prevProps){var self,uniquePageId,gridCanvasEl,accessPaths,slideData,scope,name,viewType,previewPage,modelNamePropKey,modelName,modelScopePropKey,modelScope,pageParamMapping,parentPageParams,parentPage,inputParams,_ref9,previewItems,slots,props,widgets,gridElPromises,pageState,currentLayoutInState,_this7=this;return _regeneratorRuntime.wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(self=this,this.state.pageloading){_context10.next=4;break}return this.setState({pageloading:!0,pageParams:prevProps.pageData&&prevProps.pageData.pageParams?prevProps.pageData.pageParams:this.state.pageParams}),_context10.abrupt("return");case 4:if(this.rootEl=this.props.shadow&&$("#head",this.props.shadow)&&$("#head",this.props.shadow).length>0?$("#head",this.props.shadow)[0]:this.refs.previewarea,this.options={float:!0,width:96,column:96,staticGrid:!0,verticalMargin:10,cellHeight:20,removable:!1,removeTimeout:100,disableResize:!0,disableDrag:!0,disableOneColumnMode:!0},this.pageId=this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,uniquePageId=this.props.pagesuffix?this.pageId+this.props.pagesuffix:this.pageId,this.pageId){_context10.next=10;break}return _context10.abrupt("return");case 10:return this.props.dimensions?JSON.parse(this.props.dimensions):null,self=this,gridCanvasEl=$(this.rootEl).find(".gridPreviewCanvas"),this.grid||(this.grid=GridStack.init(this.options,gridCanvasEl),this.grid.on("removed",function(event,items){items&&items.map(function(item){$(item.el).remove()})}),this.grid.on("added",function(event,items){}),this.grid.on("change",function(event,items){})),accessPaths=["data.slide"].join(),_context10.next=17,$qry.run("mmf.getSlideDetailsById",{uid:this.pageId},accessPaths,!1,!!this.props.preview);case 17:if(slideData=_context10.sent,scope=slideData.Scope,name=slideData.Name,viewType=slideData.Type,previewPage=this.props.pages&&this.props.pages[uniquePageId]?cloneDeep(this.props.pages[uniquePageId]):{},"CreateView"!=viewType&&"EditView"!=viewType||(modelNamePropKey=Object.keys(slideData.props).filter(function(dataKey){return"ModelName"===slideData.props[dataKey].Name}),modelName=modelNamePropKey&&1==modelNamePropKey.length?slideData.props[modelNamePropKey[0]].Value:"Unknown",modelScopePropKey=Object.keys(slideData.props).filter(function(dataKey){return"ModelScope"===slideData.props[dataKey].Name}),modelScope=modelScopePropKey&&1==modelScopePropKey.length?slideData.props[modelScopePropKey[0]].Value:"Unknown",this.viewModelName="mmf"==modelScope&&modelName.startsWith("Meta")?modelName:modelName+"_"+modelScope,previewPage.model=modelName,previewPage.modelscope=modelScope),previewPage.id=this.pageId,previewPage.name=name,previewPage.scope=scope,previewPage.path=slideData.Path,previewPage.pageType=viewType,this.pageParams){_context10.next=37;break}return pageParamMapping="string"==typeof(pageParamMapping=pageParamMapping||(this.props&&this.props.widgetProps&&this.props.widgetProps.PageParams?this.props.widgetProps.PageParams:{}))?JSON.parse(pageParamMapping):pageParamMapping,parentPageParams=this.props.pageparams?"string"==typeof this.props.pageparams?JSON.parse(this.props.pageparams):this.props.pageparams:{},parentPage=this.props.parentPage,inputParams={pageId:this.pageId,pageParamMapping:pageParamMapping,parentPageParams:parentPageParams,parentPage:parentPage,isContainer:this.props.widgetProps.is_container,containerSubPageName:this.props.pagename},_context10.next=36,$script.runscript("mmf.getPageParameters",inputParams);case 36:this.pageParams=_context10.sent;case 37:if(previewPage.pageParams=this.pageParams,!this.props.items){_context10.next=42;break}_context10.t0=JSON.parse(this.props.items),_context10.next=45;break;case 42:return _context10.next=44,this.getPreviewItems(previewPage,this.state.pageParams);case 44:_context10.t0=_context10.sent;case 45:return _ref9=_context10.t0,previewItems=_ref9.previewItems,slots=_ref9.slots,props=_ref9.props,this.pageParams=previewPage.pageParams,previewPage.widgets=previewPage.widgets||{},previewPage.slots=slots,previewPage.props=props,widgets=[],gridElPromises=[],pageState=this.props.pageState,currentLayoutInState=pageState&&pageState.currentLayout?pageState.currentLayout:"default",_context10.next=59,$(this.rootEl).find(".gridPreviewCanvas").each(function(){var _ref10,_this6=this,gridElPromise=new Promise((_ref10=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(resolve,reject){var uniqueComponentsToRegister,isMobileViewAvailable,itemIndx;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return uniqueComponentsToRegister={},previewItems&&previewItems.length>0&&_.each(previewItems,function(node){node.widget&&node.widget.component&&-1==Object.keys(uniqueComponentsToRegister).indexOf(node.widget.component)&&(uniqueComponentsToRegister[node.widget.component.uid]={name:node.widget.component.name,scope:node.widget.component.scope,type:node.widget.component.type})}),_context8.next=4,self.registerElements(uniqueComponentsToRegister);case 4:if(!self.props.preview){_context8.next=16;break}isMobileViewAvailable=!1,_context8.t0=_regeneratorRuntime.keys(previewItems);case 7:if((_context8.t1=_context8.t0()).done){_context8.next=15;break}if(itemIndx=_context8.t1.value,"mobile"!=previewItems[itemIndx].Layout){_context8.next=13;break}return isMobileViewAvailable=!0,_context8.abrupt("break",15);case 13:_context8.next=7;break;case 15:currentLayoutInState="mobile"==currentLayoutInState?isMobileViewAvailable?currentLayoutInState:"default":currentLayoutInState;case 16:previewItems&&previewItems.length>0&&_.each(previewItems,function(node){if(node.widget&&node.widget.tag){var slot={x:node.xposition,y:node.yposition,width:node.width,height:node.height,minwidth:node.minwidth,maxwidth:node.maxwidth,minheight:node.minheight,maxheight:node.maxheight};"default"==currentLayoutInState&&(!node.Layout||"default"==node.Layout)||"default"!=currentLayoutInState&&currentLayoutInState==node.Layout?widgets.push({ele:$("<div><div id="+node.widget.widgetid+' class="grid-stack-item-content">\n                                                <widget-container key='+node.widget.widgetid+' \n                                                    preview="true" pageid='+self.pageId+"\n                                                    tag="+node.widget.tag+"                                                                                             \n                                                    widgetid="+node.widget.widgetid+' class="widgetContainer"                                             \n                                                    style="height: 100%;" shadow="true"\n                                                    pagesuffix='+self.props.pagesuffix+" ></widget-container></div><div/>"),node:node}):slot={x:0,y:0,width:0,height:0,minwidth:0,maxwidth:96,minheight:0,maxheight:40};var _name=node.widget.component?node.widget.component.name:"",componentId=node.widget.component?node.widget.component.uid:"";previewPage.widgets[node.widget.widgetid]=_extends({},previewPage.widgets[node.widget.widgetid],{name:_name,Component:componentId,id:node.widget.widgetid,widgettree:self.props.widgettree,props:node.widget.widgetprops,slotid:node.uid,Layout:node.Layout,slot:slot})}},_this6),resolve();case 18:case"end":return _context8.stop()}},_callee8,_this6)})),function(_x13,_x14){return _ref10.apply(this,arguments)}));gridElPromises.push(gridElPromise)});case 59:Promise.all(gridElPromises).then(_asyncToGenerator(_regeneratorRuntime.mark(function _callee9(){var layouts,pages,pageData;return _regeneratorRuntime.wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.next=2,_this7.runPageActions(previewPage,previewPage.pageParams);case 2:previewPage=_context9.sent,layouts={slots:{},widgets:{}},previewPage.slots&&previewPage.widgets&&(Object.keys(previewPage.slots).map(function(slotId){var pageSlot=previewPage.slots[slotId];layouts.slots[pageSlot.Layout||"default"]=layouts.slots[pageSlot.Layout||"default"]||{},layouts.slots[pageSlot.Layout||"default"][slotId]=pageSlot}),Object.keys(previewPage.widgets).map(function(widgetId){var pageWidget=previewPage.widgets[widgetId];layouts.widgets[pageWidget.Layout||"default"]=layouts.widgets[pageWidget.Layout||"default"]||{},layouts.widgets[pageWidget.Layout||"default"][widgetId]=pageWidget})),previewPage.layouts=layouts,previewPage.currentLayout=currentLayoutInState,previewPage.slots=layouts.slots?layouts.slots[currentLayoutInState]?layouts.slots[currentLayoutInState]:layouts.slots.default:{},previewPage.widgets=layouts.widgets?layouts.widgets[currentLayoutInState]?layouts.widgets[currentLayoutInState]:layouts.widgets.default:{},widgets.length>0&&(!self.grid||self.grid.engine.nodes.length!=widgets.length)?deepEqual(self.props.pages[uniquePageId],previewPage)?($(self.rootEl).find(".gridPreviewCanvas"),self.grid.batchUpdate(),self.grid.removeAll(),self.grid&&self.grid.engine&&self.grid.engine._removedNodes&&self.grid.engine._removedNodes.map(function(node){$(node.el).remove()}),previewPage.widgets.map(function(widgetObj){widgetObj.node;self.grid&&self.grid.addWidget(widgetObj.ele,widgetObj.x,widgetObj.y,widgetObj.width,widgetObj.height,!1,widgetObj.minwidth,widgetObj.maxwidth,widgetObj.minheight,widgetObj.maxheight)}),self.grid.commit(),self.resizeGrid(),self.setState({pageloading:!1})):((pages=cloneDeep(_this7.props.pages)||{})[uniquePageId]=previewPage,_this7.props.updateStore({updates:{pages:pages}}),self.setState({pageloading:!1,widgets:widgets})):self.props.pageData&&self.props.pageData.widgets?deepEqual(self.props.pageData.widgets,previewPage.widgets)?self.setState({pageloading:!1}):((pageData=cloneDeep(self.props.pageData)).pageParams=previewPage.pageParams,Object.keys(pageData.widgets).map(function(pageWidgetId){var updatedPageWidgetProps=_extends({},previewPage.widgets[pageWidgetId].props,pageData.widgets[pageWidgetId].props);previewPage.widgets&&previewPage.widgets[pageWidgetId]&&previewPage.widgets[pageWidgetId].props&&Object.keys(previewPage.widgets[pageWidgetId].props).map(function(widgetProp2Update){if("value"==widgetProp2Update&&(updatedPageWidgetProps.value=previewPage.widgets[pageWidgetId].props.value),widgetProp2Update.startsWith("__Pageparam__")){var tempWidgetPropName=widgetProp2Update.split("__Pageparam__")[1];updatedPageWidgetProps[tempWidgetPropName]=previewPage.widgets[pageWidgetId].props[tempWidgetPropName]}});var updatedPageWidget=_extends({},previewPage.widgets[pageWidgetId],pageData.widgets[pageWidgetId]);updatedPageWidget.props=updatedPageWidgetProps,_.isEqual(updatedPageWidget,pageData.widgets[pageWidgetId])||(pageData.widgets[pageWidgetId]=updatedPageWidget,pageData.widgets[pageWidgetId].reload=!pageData.widgets[pageWidgetId].reload)}),self.props.updateStore({updates:{pageData:pageData}}),self.setState({pageloading:!1})):self.setState({pageloading:!1});case 10:case"end":return _context9.stop()}},_callee9,_this7)}))).catch(function(err){self.setState({pageloading:!1})});case 60:case"end":return _context10.stop()}},_callee10,this)}));return function(_x12){return _ref8.apply(this,arguments)}}()},{key:"render",value:function(){var pageId=this.props.widgetProps&&this.props.widgetProps.PageId?this.props.widgetProps.PageId:this.props.previewpageid,canvasClassName=(this.props.widgetspacing?"true"==this.props.widgetspacing:!this.props.widgetProps||("true"==this.props.widgetProps.WidgetSpacing||1==this.props.widgetProps.WidgetSpacing))?"grid-stack grid-stack-96 gridPreviewCanvas":"grid-stack grid-stack-96 gridPreviewCanvas noWidgetSpacing",showOverlayClassName=this.state.pageloading||this.props.pageState&&1==this.props.pageState.showloader?"showOverlay":"showOverlay showOverlay-hide";return pageId?React.createElement("div",{className:"topPreviewContainer",ref:"previewarea"},React.createElement("style",null,'@import url("/thirdpartylib/gridstack/gridstack.min.css"); @import url("/thirdpartylib/gridstack/corestyles.css");'),React.createElement("div",{className:showOverlayClassName}),React.createElement("div",{className:"gridPreviewContent"},React.createElement("div",{className:canvasClassName,style:{height:"fit-content"}})),React.createElement("div",{"data-inline-loading":!0,className:this.state.pageloading||this.props.pageState&&1==this.props.pageState.showloader?"bx--inline-loading pageloader-show":"bx--inline-loading pageloader-hide",role:"alert","aria-live":"assertive"},React.createElement("div",{className:"bx--inline-loading__animation"},React.createElement("div",{"data-inline-loading-spinner":!0,className:"bx--loading bx--loading--small"},React.createElement("svg",{className:"bx--loading__svg",viewBox:"-75 -75 150 150"},React.createElement("circle",{className:"bx--loading__background",cx:"0",cy:"0",r:"26.8125"}),React.createElement("circle",{className:"bx--loading__stroke",cx:"0",cy:"0",r:"26.8125"}))),React.createElement("svg",{focusable:"false",preserveAspectRatio:"xMidYMid meet",style:{willChange:"transform"},xmlns:"http://www.w3.org/2000/svg",className:"bx--inline-loading__checkmark-container",hidden:"","data-inline-loading-finished":"",width:"16",height:"16",viewBox:"0 0 16 16","aria-hidden":"true"},React.createElement("path",{d:"M8,1C4.1,1,1,4.1,1,8c0,3.9,3.1,7,7,7s7-3.1,7-7C15,4.1,11.9,1,8,1z M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z"}),React.createElement("path",{d:"M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z","data-icon-path":"inner-path",opacity:"0"}))),React.createElement("p",{"data-inline-loading-text-active":!0,className:"bx--inline-loading__text"},"Preparing..."),React.createElement("p",{"data-inline-loading-text-finished":!0,hidden:!0,className:"bx--inline-loading__text"},"Data loaded."))):React.createElement("div",{style:{color:"blue"}},"No page found!")}}]),_PageDesignerPreview_}(React.Component),_export("PageDesignerPreview",PageDesignerPreview=function(props){return _PageDesignerPreview_}),_export("PageDesignerPreview",PageDesignerPreview)}}}),System.register("component/studio/PageDesignerProps.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","component/studio/SrsReference/Definition.js","component/mmf/PageParameter/Definition.js","client/script/mmf/GraphQLDataUtil.js","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","@carbon/icons-react/lib/settings/16","lodash.debounce","deepmerge","lodash.clonedeep","lodash.get"],function(_export,_context4){"use strict";var _regeneratorRuntime,_extends,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,TextArea,Checkbox,Select,SelectItem,SrsReference,PageParameter,GraphQLDataUtil,AddAlt20,SubAlt20,Settings32,deepmerge,cloneDeep,DEFAULT_PROPS,_PageDesignerProps_,PageDesignerProps,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,TextArea=_carbonComponentsReact.TextArea,Checkbox=_carbonComponentsReact.Checkbox,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_componentMmfPageParameterDefinitionJs){PageParameter=_componentMmfPageParameterDefinitionJs.PageParameter},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonIconsReactLibSettings){Settings32=_carbonIconsReactLibSettings.default},function(_lodashDebounce){_lodashDebounce.default},function(_deepmerge){deepmerge=_deepmerge.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashGet){_lodashGet.default}],execute:function(){DEFAULT_PROPS=[{Name:"Invisible",DefaultValue:!1},{Name:"Required",DefaultValue:!1},{Name:"ReadOnly",DefaultValue:!1},{Name:"TriggerActionOnChange",DefaultValue:!1}],_PageDesignerProps_=function(_React$Component){function _PageDesignerProps_(props){_classCallCheck(this,_PageDesignerProps_);var _this=_possibleConstructorReturn(this,(_PageDesignerProps_.__proto__||Object.getPrototypeOf(_PageDesignerProps_)).call(this,props));_this.state={keyValueLists:{},widgetProps:[],widgetChanged:!0,propsChanges:{},dataLoaded:!1,widgetProps:_this.props.widgetProps||{},showPreview:!1,reload:!1},_this.isTabComponent=!1,_this.handleTextChange=_this.handleTextChange.bind(_this),_this.loadWidgetProps=_this.loadWidgetProps.bind(_this),_this.keyValueOnChange=_this.keyValueOnChange.bind(_this);return _this.updateWidgetProps=function(updatedProps){_this.setState({widgetProps:updatedProps}),_this.props.updateStore({updates:{widgetProps:updatedProps}})},_this.updateWidgetPropsDebounce=function(key,value){var updateProps=cloneDeep(_this.props.widgetProps)||{};updateProps[key]=value,_this.setState({widgetProps:updateProps}),_this.props.updateStore({updates:{widgetProps:updateProps}})},_this.getChildWidgetProps=_this.getChildWidgetProps.bind(_this),_this}return _inherits(_PageDesignerProps_,_React$Component),_createClass(_PageDesignerProps_,[{key:"keyValueOnChange",value:function(keyValueList,changedIndx,propName,value,storeKeyName){var newKeyValueLists=cloneDeep(this.state.keyValueLists);newKeyValueLists[storeKeyName]=newKeyValueLists[storeKeyName]||keyValueList,newKeyValueLists[storeKeyName].map(function(keyValueItem,indx){indx==changedIndx&&(keyValueItem[propName]=value)}),this.setState({keyValueLists:newKeyValueLists}),this.updateWidgetPropsDebounce(storeKeyName,newKeyValueLists[storeKeyName])}},{key:"handleTextChange",value:function(e){var propChanges=cloneDeep(this.state.propChanges)||{};propChanges[e.target.name]=e.target.value,this.setState({propChanges:propChanges})}},{key:"componentDidMount",value:function(){this.loadWidgetProps()}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this2=this;if(prevProps.active_widget_id!==this.props.active_widget_id||prevProps.active_page_id!==this.props.active_page_id){var tobeActiveWidgetProps=this.props.pageData&&this.props.pageData[this.props.active_page_id]&&this.props.pageData[this.props.active_page_id].widgets&&this.props.pageData[this.props.active_page_id].widgets[this.props.active_widget_id]&&this.props.pageData[this.props.active_page_id].widgets[this.props.active_widget_id].props?this.props.pageData[this.props.active_page_id].widgets[this.props.active_widget_id].props:{},keyValueLists={};tobeActiveWidgetProps&&Object.keys(tobeActiveWidgetProps).map(function(tobeActiveWidgetPropName){tobeActiveWidgetPropName.startsWith("__Child__")?(keyValueLists[_this2.props.active_widget_id+"_childparams"]=keyValueLists[_this2.props.active_widget_id+"_childparams"]||[],keyValueLists[_this2.props.active_widget_id+"_childparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__Dynamic__")?(keyValueLists[_this2.props.active_widget_id+"_dynamicparams"]=keyValueLists[_this2.props.active_widget_id+"_dynamicparams"]||[],keyValueLists[_this2.props.active_widget_id+"_dynamicparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__Sibling__")?(keyValueLists[_this2.props.active_widget_id+"_siblingparams"]=keyValueLists[_this2.props.active_widget_id+"_siblingparams"]||[],keyValueLists[_this2.props.active_widget_id+"_siblingparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__Pageparam__")?(keyValueLists[_this2.props.active_widget_id+"_pageparams"]=keyValueLists[_this2.props.active_widget_id+"_pageparams"]||[],keyValueLists[_this2.props.active_widget_id+"_pageparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__State__")&&(keyValueLists[_this2.props.active_widget_id+"_stateparams"]=keyValueLists[_this2.props.active_widget_id+"_stateparams"]||[],keyValueLists[_this2.props.active_widget_id+"_stateparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]}))}),this.setState({widgetChanged:!0,keyValueLists:keyValueLists,widgetProps:cloneDeep(this.props.widgetProps)})}if(!_.isEqual(prevState.widgetProps,this.state.widgetProps)||prevState.widgetChanged!=this.state.widgetChanged&&1==this.state.widgetChanged||prevState.dataLoaded!=this.state.dataLoaded&&!this.state.dataLoaded||!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)){if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_dynamicparams"],this.state.keyValueLists[this.props.active_widget_id+"_dynamicparams"])){var dynamicWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_dynamicparams"];if(dynamicWidgetProps&&dynamicWidgetProps.length>0){var updatedProps=cloneDeep(this.props.widgetProps)||{};for(var propName in updatedProps)propName.startsWith("__Dynamic__")&&delete updatedProps[propName];dynamicWidgetProps.map(function(dynamicWidgetProp){dynamicWidgetProp.name&&(updatedProps["__Dynamic__"+dynamicWidgetProp.name]=dynamicWidgetProp.value?dynamicWidgetProp.value:"")}),!_.isEqual(this.props.widgetProps,updatedProps)&&this.updateWidgetProps(updatedProps)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_pageparams"],this.state.keyValueLists[this.props.active_widget_id+"_pageparams"])){var pageParamWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_pageparams"];if(pageParamWidgetProps&&pageParamWidgetProps.length>0){var _updatedProps=cloneDeep(this.props.widgetProps)||{};for(var _propName in _updatedProps)_propName.startsWith("__Pageparam__")&&delete _updatedProps[_propName];pageParamWidgetProps.map(function(pageParamWidgetProp){pageParamWidgetProp.name&&pageParamWidgetProp.value&&(_updatedProps["__Pageparam__"+pageParamWidgetProp.name]=pageParamWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps)&&this.updateWidgetProps(_updatedProps)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_siblingparams"],this.state.keyValueLists[this.props.active_widget_id+"_siblingparams"])){var siblingWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_siblingparams"];if(siblingWidgetProps&&siblingWidgetProps.length>0){var _updatedProps2=cloneDeep(this.props.widgetProps)||{};for(var _propName2 in _updatedProps2)_propName2.startsWith("__Sibling__")&&delete _updatedProps2[_propName2];siblingWidgetProps.map(function(siblingWidgetProp){siblingWidgetProp.name&&siblingWidgetProp.value&&(_updatedProps2["__Sibling__"+siblingWidgetProp.name]=siblingWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps2)&&this.updateWidgetProps(_updatedProps2)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_childparams"],this.state.keyValueLists[this.props.active_widget_id+"_childparams"])){var childWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_childparams"];if(childWidgetProps&&childWidgetProps.length>0){var _updatedProps3=cloneDeep(this.props.widgetProps)||{};for(var _propName3 in _updatedProps3)_propName3.startsWith("__Child__")&&delete _updatedProps3[_propName3];childWidgetProps.map(function(childWidgetProp){childWidgetProp.name&&childWidgetProp.value&&(_updatedProps3["__Child__"+childWidgetProp.name]=childWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps3)&&this.updateWidgetProps(_updatedProps3)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_stateparams"],this.state.keyValueLists[this.props.active_widget_id+"_stateparams"])){var stateWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_stateparams"];if(stateWidgetProps&&stateWidgetProps.length>0){var _updatedProps4=cloneDeep(this.props.widgetProps)||{};for(var _propName4 in _updatedProps4)_propName4.startsWith("__State__")&&delete _updatedProps4[_propName4];stateWidgetProps.map(function(stateWidgetProp){stateWidgetProp.name&&stateWidgetProp.value&&(_updatedProps4["__State__"+stateWidgetProp.name]=stateWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps4)&&this.updateWidgetProps(_updatedProps4)}}this.loadWidgetProps(prevProps.active_widget_id!==this.props.active_widget_id||prevProps.active_page_id!==this.props.active_page_id)}prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"designer_props"==this.props.showpreview_target&&this.setState({showPreview:!1,reload:!this.state.reload}),_.isEqual(prevProps.keyvaluepair,this.props.keyvaluepair)||this.props.keyvaluepair&&Object.keys(this.props.keyvaluepair).length>0&&Object.keys(this.props.keyvaluepair).map(function(varName){if(!_.isEqual(prevProps.keyvaluepair[varName],_this2.props.keyvaluepair[varName])){!varName.endsWith("_dynamicparams")&&!varName.endsWith("_siblingparams")&&!varName.endsWith("_childparams")&&!varName.endsWith("_stateparams")&&!varName.endsWith("_pageparams")&&_this2.updateWidgetPropsDebounce(varName,_this2.props.keyvaluepair[varName]);var newKeyValueLists=cloneDeep(_this2.state.keyValueLists);newKeyValueLists[varName]=cloneDeep(_this2.props.keyvaluepair[varName]),_this2.setState({keyValueLists:newKeyValueLists})}})}},{key:"getChildWidgetProps",value:function(currentWidget,pageId,widgetType,result){var _this3=this;if("Page"==widgetType){var childPage=this.props.pageData[pageId],pageWidgets=childPage&&childPage.widgets?childPage.widgets:[];return pageWidgets&&Object.keys(pageWidgets).map(function(pageWidgetId){var pageWidget=pageWidgets[pageWidgetId],childWidgetType="";if("PageDesignerPreview"==pageWidget.name?childWidgetType="Page":"SrsTabs"==pageWidget.name?childWidgetType="Tabs":pageWidget&&pageWidget.props&&1==pageWidget.props.is_container&&(childWidgetType="Container"),childWidgetType)result=deepmerge(result,_this3.getChildWidgetProps(pageWidget,pageWidget.props.PageId,childWidgetType,result));else{var childPageName=childPage.name||pageId;result[childPageName]=result[childPageName]||{};var pageWidgetName=pageWidget.props&&pageWidget.props.Name?pageWidget.props.Name:pageWidget.id,childWidgetProps={};pageWidget.props&&Object.keys(pageWidget.props).map(function(pageWidgetPropName){(pageWidgetPropName=pageWidgetPropName.replace("__Child__","").replace("__Sibling__","").replace("__Dynamic__","").replace("__State__","")).endsWith("__params")||pageWidgetPropName.endsWith("__siblingparams")||pageWidgetPropName.endsWith("_pageparams")||pageWidgetPropName.endsWith("_dynamicparams")||pageWidgetPropName.endsWith("_stateparams")||(childWidgetProps[pageWidgetPropName]=pageWidget.props[pageWidgetPropName])}),result[childPageName][pageWidgetName]=childWidgetProps||{}}}),result}if("Tabs"==widgetType){var tabRelations=JSON.parse(currentWidget.props.tabs);return tabRelations&&tabRelations.map(function(tabRelation,indx){if(tabRelation.tabInfo&&tabRelation.tabInfo.page){var _pageId=tabRelation.tabInfo.page.page_id,pagesuffix=currentWidget.id+indx;result=deepmerge(result,_this3.getChildWidgetProps(currentWidget,_pageId+pagesuffix,"Page",result))}}),result}if("Container"!=widgetType)return result}},{key:"loadWidgetProps",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(forceLoad){var propsMap,elementsToRender,widgetProps,dynamicWidgetProps,pageParamWidgetProps,siblingWidgetProps,childWidgetProps,stateWidgetProps,_loop,i,activeWidget,data,widgetDetails,widgetPropsData,_loop2,currentDynamicParams,currentStateParams,currentWidgetPageParamsProps,choiceList,currentSiblingWidgetParams,nestedChoiceList,nestedLabels,widgetType,currentChildWidgetParams,nestedChildChoiceList,tabRelations,nestedChildLabels,_this4=this;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:for(propsMap={},elementsToRender=[],this.isTabComponent=!1,widgetProps=this.state.widgetProps,dynamicWidgetProps=[],pageParamWidgetProps=[],siblingWidgetProps=[],childWidgetProps=[],stateWidgetProps=[],widgetProps&&Object.keys(widgetProps).length>0&&Object.keys(widgetProps).map(function(widgetPropKey,indx){var nodeName=widgetPropKey,nodeValue=widgetProps[widgetPropKey];if("FieldName"==nodeName){if(propsMap[nodeName]="",nodeValue&&nodeValue.indexOf("@@[")>-1){var propVal=nodeValue.split("@@[")[1];propsMap[nodeName]=propVal.substr(0,propVal.length-1)}}else if(nodeName.startsWith("__Dynamic__")){var dynamicWidgetPropName=nodeName.split("__Dynamic__")[1];dynamicWidgetProps.push({name:dynamicWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__Pageparam__")){var pageParamWidgetPropName=nodeName.split("__Pageparam__")[1];pageParamWidgetProps.push({name:pageParamWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__Sibling__")){var siblingWidgetPropName=nodeName.split("__Sibling__")[1];siblingWidgetProps.push({name:siblingWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__Child__")){var childWidgetPropName=nodeName.split("__Child__")[1];childWidgetProps.push({name:childWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__State__")){var stateWidgetPropName=nodeName.split("__State__")[1];stateWidgetProps.push({name:stateWidgetPropName,value:nodeValue})}else propsMap[nodeName]=nodeValue}),this.props.activeWidget.Component,SrsReference(),_loop=function(i){var node=DEFAULT_PROPS[i],element=React.createElement(Checkbox,{labelText:node.Name,name:node.Name,id:"check-box-"+i,defaultChecked:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(value){var updatedProps=cloneDeep(_this4.props.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}});elementsToRender.push(element)},i=0;i<DEFAULT_PROPS.length;i++)_loop(i);if((activeWidget=this.props.activeWidget)&&0!=Object.keys(activeWidget).length&&activeWidget.Component){_context3.next=22;break}return _context3.next=18,GraphQLDataUtil().getRecord("pd.getSlideSlotWidgetById",{widgetId:this.props.active_widget_id});case 18:data=_context3.sent,widgetDetails={Component:data.Component,Slot:data.Slot},activeWidget=_extends({},widgetDetails,activeWidget),this.updateWidgetProps(activeWidget);case 22:if(!this.state.widgetChanged&&!forceLoad){_context3.next=27;break}return _context3.next=25,GraphQLDataUtil().getRecord("pd.GetComponentProps",{PropsComponent:activeWidget.Component});case 25:widgetPropsData=_context3.sent,this.setState({widgetChanged:!1,widgetPropsData:widgetPropsData,keyValueLists:{}});case 27:if(!(this.state.widgetPropsData&&this.state.widgetPropsData.length>0)){_context3.next=47;break}_loop2=_regeneratorRuntime.mark(function _loop2(i){var node,nodeType,updatePropsWithDefaults,element,currentList,selectItems,schemaTables,_selectItems,attributes,tableName,displayFieldName,secondaryDisplayFieldName,filterStr,recordFilter,_NavReference,navFilter,_ComponentReference,_selectItems4,_schemaTables,PageReference,_selectItems5,_tableName,_attributes,widgetName,schemaFields,relatedTableFieldsSelectList,relatedTableName,parentField,allFields,matchingField,relatedFields,relatedTableDisplayField,targetPageIds,_attributes2,_widgetName,pageIdValue,ParamPicker,_loop3,targetPageIdKey,_selectItems6,selectKeyValues,tabWidgetProps,tabs,tabId,_tableName3,_attributes3,_widgetName2,_schemaFields,fieldNames,currentKeyValueList,currentKVList;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(node=_this4.state.widgetPropsData[i].node,nodeType=node.Type,updatePropsWithDefaults=cloneDeep(_this4.state.widgetProps),element=React.createElement(TextInput,{key:node.Name+"_"+_this4.props.active_widget_id,id:node.Name+"_"+_this4.props.active_widget_id,labelText:node.Name,name:node.Name,defaultValue:_this4.state.widgetProps[node.Name]?_this4.state.widgetProps[node.Name]:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,placeholder:node.DefaultValue,onChange:_this4.handleTextChange,onBlur:function(e){var updatedProps=cloneDeep(_this4.state.widgetProps);updatedProps[e.target.name]="Name"==node.Name&&_this4.state.propChanges[e.target.name]?_this4.state.propChanges[e.target.name].replace(/[^a-zA-Z0-9]/g,"_"):_this4.state.propChanges[e.target.name],_this4.updateWidgetProps(updatedProps)}}),"TextArea"==nodeType&&(element=React.createElement(TextArea,{key:node.Name+"_"+_this4.props.active_widget_id,id:node.Name+"_"+_this4.props.active_widget_id,labelText:node.Name,name:node.Name,defaultValue:_this4.state.widgetProps[node.Name]?_this4.state.widgetProps[node.Name]:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,placeholder:node.DefaultValue,onChange:_this4.handleTextChange,onBlur:function(e){var updatedProps=cloneDeep(_this4.state.widgetProps);updatedProps[node.Name]=e.target.value,_this4.updateWidgetProps(updatedProps)}})),"Hidden"==nodeType&&(element=null),"Checkbox"==nodeType&&(element=React.createElement(Checkbox,{key:node.Name+"_"+_this4.props.active_widget_id,labelText:node.Name,name:node.Name,id:node.Name+"_"+_this4.props.active_widget_id,defaultChecked:propsMap.hasOwnProperty(node.Name)?"true"==propsMap[node.Name]||1==propsMap[node.Name]:"true"==node.DefaultValue,onChange:function(value){var wprops=cloneDeep(_this4.state.widgetProps)||{};wprops[node.Name]=value,_this4.updateWidgetProps(wprops)}})),"NestedList"==nodeType&&([],currentList=(currentList=_this4.state.keyValueLists&&_this4.state.keyValueLists[node.Name]?_this4.state.keyValueLists[node.Name]:propsMap[node.Name]?propsMap[node.Name]:[])&&"object"==typeof currentList?JSON.stringify(currentList):currentList||"[]",element=React.createElement("srs-key-value-pair",{varname:node.Name,items:currentList,label:node.Name,placeholder_name:"Name..",placeholder_value:"Value.."})),"TableSelector"==nodeType&&((selectItems=[]).push(React.createElement(SelectItem,{value:"",text:"None"})),(schemaTables=_this4.props.schemaTables||[]).sort(function(a,b){return a==b?0:a>b?1:-1}),schemaTables.map(function(tableName){selectItems.push(React.createElement(SelectItem,{value:tableName,text:tableName}))}),updatePropsWithDefaults[node.Name]||(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),element=React.createElement(Select,{style:{display:"flex"},labelText:node.Name,onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue},selectItems)),"RecordSelector"==nodeType&&node.Attributes){_selectItems=[],attributes=JSON.parse(node.Attributes),tableName=attributes.tableName,displayFieldName=attributes.displayFieldName,secondaryDisplayFieldName=attributes.secondaryDisplayFieldName,filterStr=attributes.filter,_selectItems.push(React.createElement(SelectItem,{value:"",text:"None"})),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),SrsReference(),recordFilter={};try{recordFilter=JSON.parse(filterStr)}catch(err){}element=React.createElement(NavReference,{style:{display:"flex"},tablename:tableName,displayfield:displayFieldName,secondarydisplayfield:secondaryDisplayFieldName,filter:JSON.stringify(recordFilter),searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})}if("NavSelector"==nodeType&&([].push(React.createElement(SelectItem,{value:"",text:"None"})),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),_NavReference=SrsReference(),navFilter={where:{and:[{Scope:_this4.props.currentscope},{Parent:null}]}},element=React.createElement(_NavReference,{style:{display:"flex"},tablename:"MetaNavigation",displayfield:"Name",secondarydisplayfield:"Scope",filter:JSON.stringify(navFilter),searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})),"ComponentSelector"==nodeType&&([].push(React.createElement(SelectItem,{value:"",text:"None"})),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),_ComponentReference=SrsReference(),element=React.createElement(_ComponentReference,{style:{display:"flex"},tablename:"MetaComponent",displayfield:"Name",secondarydisplayfield:"Scope",filter:"",searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})),"PageSelector"==nodeType&&((_selectItems4=[]).push(React.createElement(SelectItem,{value:"",text:"None"})),(_schemaTables=_this4.props.schemaTables||[]).sort(function(a,b){return a==b?0:a>b?1:-1}),_schemaTables.map(function(tableName){_selectItems4.push(React.createElement(SelectItem,{value:tableName,text:tableName}))}),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),PageReference=SrsReference(),element=React.createElement(PageReference,{style:{display:"flex"},tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:"",searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})),"FieldSelector"==nodeType&&(_selectItems5=[],_tableName="",node.Attributes&&("Static"==(_attributes=JSON.parse(node.Attributes)).tableType?_tableName=_attributes.value:(widgetName=_attributes.value&&_attributes.value.widgetName,_tableName=_this4.state.widgetProps[widgetName])),_selectItems5.push(React.createElement(SelectItem,{value:"",text:"None"})),(schemaFields=(schemaFields=_this4.props.schemaFields||[])&&schemaFields.filter(function(field,indx){return field.parent==_tableName&&"id"!==field.id}))&&schemaFields.map(function(fieldObj){"field"==fieldObj.type?_selectItems5.push(React.createElement(SelectItem,{value:fieldObj.id,text:fieldObj.text})):"one2one"==fieldObj.type&&_selectItems5.push(React.createElement(SelectItem,{value:fieldObj.id+"@@"+fieldObj.to,text:fieldObj.text}))}),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),relatedTableFieldsSelectList=[],relatedTableName="",parentField="",propsMap[node.Name]&&propsMap[node.Name].indexOf(".")>-1&&(parentField=propsMap[node.Name].split(".")[0],propsMap[node.Name].split(".")[1],allFields=_this4.props.schemaFields||[],(matchingField=allFields.filter(function(field,indx){return field.id==parentField&&field.parent==_tableName&&"one2one"==field.type}))&&1==matchingField.length&&(relatedTableName=matchingField[0].to),relatedTableFieldsSelectList.push(React.createElement(SelectItem,{value:"",text:"None"})),(relatedFields=(relatedFields=_this4.props.schemaFields||[])&&relatedFields.filter(function(field,indx){return field.parent==relatedTableName&&"field"==field.type&&"id"!==field.id}))&&relatedFields.map(function(fieldObj){relatedTableFieldsSelectList.push(React.createElement(SelectItem,{value:fieldObj.id,text:fieldObj.text}))})),relatedTableDisplayField=relatedTableName?React.createElement(Select,{style:{display:"flex"},labelText:"Related Field",onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=parentField+"."+value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]&&propsMap[node.Name].indexOf(".")>-1?propsMap[node.Name].split(".")[1]:""},relatedTableFieldsSelectList):null,element=React.createElement(React.Fragment,null,React.createElement(Select,{style:{display:"flex"},labelText:node.Name,onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};value.indexOf("@@")>-1?(value=value.split("@@")[0],updatedProps[node.Name]=value+".uid"):updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]?propsMap[node.Name].indexOf(".")>-1?propsMap[node.Name].split(".")[0]+"@@"+relatedTableName:propsMap[node.Name]:node.DefaultValue?node.DefaultValue:""},_selectItems5),relatedTableDisplayField)),"PageParameter"!=nodeType){_context2.next=27;break}if(targetPageIds={},node.Attributes&&("Static"==(_attributes2=JSON.parse(node.Attributes)).pageType?targetPageIds[_attributes2.value]="Page Parameters":(_widgetName=_attributes2.value&&_attributes2.value.widgetName,(pageIdValue=_this4.state.widgetProps[_widgetName])&&(pageIdValue.indexOf(",")>0?pageIdValue.split(",").map(function(pageIdWidgetName){var currentPageId=_this4.state.widgetProps[pageIdWidgetName.trim()];currentPageId&&(targetPageIds[currentPageId+"_"+pageIdWidgetName.trim()]=pageIdWidgetName.trim())}):targetPageIds[pageIdValue]="Page Parameters"))),ParamPicker=null,!(targetPageIds&&Object.keys(targetPageIds).length>0)){_context2.next=26;break}_loop3=_regeneratorRuntime.mark(function _loop3(targetPageIdKey){var targetPageId,matchingPage,isPageModelDriven,isParentPageModelDriven,currentPageParams,parentPageParams,additionalProps,activePageProps;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return targetPageId=targetPageIdKey.indexOf("_")>-1?targetPageIdKey.split("_")[0]:targetPageIdKey,_context.next=3,$qry.run("mmf.getSlideDetailsById",{uid:targetPageId},"data.slide");case 3:if(!(matchingPage=_context.sent)||!matchingPage.uid){_context.next=21;break}isPageModelDriven="FreeForm"!=matchingPage.Type,isParentPageModelDriven=_this4.props.activePage&&_this4.props.activePage.pageType&&"FreeForm"!=_this4.props.activePage.pageType,currentPageParams=[],isPageModelDriven&&_this4.props.activePage&&_this4.props.activePage.pageType&&"CreateView"!=_this4.props.activePage.pageType&&(currentPageParams=["recordid"]),matchingPage.props&&Object.keys(matchingPage.props).map(function(propId){"ModelName"!=matchingPage.props[propId].Name&&"ModelScope"!=matchingPage.props[propId].Name&&currentPageParams.push(matchingPage.props[propId].Name)}),parentPageParams={},isParentPageModelDriven&&(parentPageParams.recordid="Parent Record"),_this4.props.activePage&&_this4.props.activePage.props&&(additionalProps={},activePageProps=_this4.props.activePage&&_this4.props.activePage.props?_this4.props.activePage.props:{},Object.keys(activePageProps).map(function(activePageProp){"ModelName"!=activePageProp&&"ModelScope"!=activePageProp&&(additionalProps[activePageProp]=activePageProps[activePageProp])}),parentPageParams=Object.assign(parentPageParams,additionalProps)),_context.t0=matchingPage.Type,_context.next="CreateView"===_context.t0?16:"EditView"===_context.t0?16:"FreeForm"===_context.t0?18:20;break;case 16:return currentPageParams&&currentPageParams.length>0&&(ParamPicker=PageParameter(),element=React.createElement(React.Fragment,null,React.createElement("div",{className:"bx--label",style:{display:"flex",marginTop:10,marginLeft:2}},targetPageIds[targetPageIdKey]+" Params"),React.createElement(ParamPicker,{updateProps:function(data){var updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=updatedProps[node.Name]||{},updatedProps[node.Name]="string"==typeof updatedProps[node.Name]?JSON.parse(updatedProps[node.Name]):updatedProps[node.Name],updatedProps[node.Name][targetPageIdKey]=data,_this4.updateWidgetProps(updatedProps)},parentPageParams:parentPageParams,pageId:targetPageId,pageData:_this4.props.pageData,widgetData:_this4.props.widgetData,defaultValue:propsMap[node.Name]&&propsMap[node.Name][targetPageIdKey]?propsMap[node.Name][targetPageIdKey]:node.DefaultValue?node.DefaultValue:"",params:currentPageParams}))),_context.abrupt("break",21);case 18:return currentPageParams&&currentPageParams.length>0&&(ParamPicker=PageParameter(),element=React.createElement(ParamPicker,{updateProps:function(data){var updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=updatedProps[node.Name]||{},updatedProps[node.Name][targetPageIdKey]=data,_this4.updateWidgetProps(updatedProps)},parentPageParams:parentPageParams,pageData:_this4.props.pageData,widgetData:_this4.props.widgetData,defaultValue:propsMap[node.Name]&&propsMap[node.Name][targetPageIdKey]?propsMap[node.Name][targetPageIdKey]:node.DefaultValue?node.DefaultValue:"",params:currentPageParams})),_context.abrupt("break",21);case 20:return _context.abrupt("break",21);case 21:elementsToRender.push(element);case 22:case"end":return _context.stop()}},_loop3,_this4)}),_context2.t0=_regeneratorRuntime.keys(targetPageIds);case 21:if((_context2.t1=_context2.t0()).done){_context2.next=26;break}return targetPageIdKey=_context2.t1.value,_context2.delegateYield(_loop3(targetPageIdKey),"t2",24);case 24:_context2.next=21;break;case 26:element=null;case 27:if("Select"==nodeType&&((_selectItems6=[]).push(React.createElement(SelectItem,{value:"",text:"None"})),"",node.Attributes&&(selectKeyValues=JSON.parse(node.Attributes))&&selectKeyValues.length>0&&selectKeyValues.map(function(selectKeyValue){return _selectItems6.push(React.createElement(SelectItem,{value:selectKeyValue.value,text:selectKeyValue.name}))}),element=React.createElement(Select,{style:{display:"flex"},labelText:node.Name,onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue?node.DefaultValue:""},_selectItems6)),"FieldMap"==nodeType&&(element=React.createElement("entity-mapper",{lite:"true",key:"text-element-"+i,id:"text-element-"+i})),"TabMap"!=nodeType){_context2.next=35;break}return _this4.isTabComponent=!0,tabWidgetProps=cloneDeep(_this4.state.widgetProps)||{},0==(tabs=tabWidgetProps.tabs||[]).length&&(tabId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),tabs.push({tab_id:tabId,tabInfo:{name:"",type:""}}),tabWidgetProps.tabs=JSON.stringify(tabs),_this4.updateWidgetProps(tabWidgetProps)),_context2.abrupt("return","continue");case 35:"KeyFieldList"==nodeType&&([],_tableName3="",node.Attributes&&("Static"==(_attributes3=JSON.parse(node.Attributes)).tableType?_tableName3=_attributes3.value:(_widgetName2=_attributes3.value&&_attributes3.value.widgetName,_tableName3=_this4.state.widgetProps[_widgetName2])),_schemaFields=(_schemaFields=_this4.props.schemaFields||[])&&_schemaFields.filter(function(field,indx){return field.parent==_tableName3&&"id"!==field.id}),fieldNames=[],_schemaFields&&_schemaFields.map(function(schemaField){fieldNames.push({name:schemaField.text,value:schemaField.id})}),currentKeyValueList=(currentKeyValueList=_this4.state.keyValueLists&&_this4.state.keyValueLists[node.Name]?_this4.state.keyValueLists[node.Name]:propsMap[node.Name]?propsMap[node.Name]:[])&&"object"==typeof currentKeyValueList?JSON.stringify(currentKeyValueList):currentKeyValueList||"[]",element=React.createElement("srs-key-value-pair",{varname:node.Name,choices:JSON.stringify({valueList:fieldNames}),items:currentKeyValueList,label:node.Name,placeholder_name:"Prop Name..",placeholder_value:"Field Name"})),"KeyValueList"==nodeType&&([],currentKVList=(currentKVList=_this4.state.keyValueLists&&_this4.state.keyValueLists[node.Name]?_this4.state.keyValueLists[node.Name]:propsMap[node.Name]?propsMap[node.Name]:[])&&"object"==typeof currentKVList?JSON.stringify(currentKVList):currentKVList||"[]",element=React.createElement("srs-key-value-pair",{varname:node.Name,items:currentKVList,label:node.Name,placeholder_name:"Name..",placeholder_value:"Value.."})),element&&elementsToRender.push(element);case 38:case"end":return _context2.stop()}},_loop2,_this4)}),i=0;case 30:if(!(i<this.state.widgetPropsData.length)){_context3.next=38;break}return _context3.delegateYield(_loop2(i),"t0",32);case 32:if("continue"!==_context3.t0){_context3.next=35;break}return _context3.abrupt("continue",35);case 35:i++,_context3.next=30;break;case 38:currentDynamicParams=(currentDynamicParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_dynamicparams"]?this.state.keyValueLists[this.props.active_widget_id+"_dynamicparams"]:dynamicWidgetProps||[])&&"object"==typeof currentDynamicParams?JSON.stringify(currentDynamicParams):currentDynamicParams||"[]",elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_dynamicparams",trim_name:"true",label:"Dynamic Parameters",placeholder_name:"Enter Param Name...",items:currentDynamicParams,placeholder_value:"Enter Default Value..."})),currentStateParams=(currentStateParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_stateparams"]?this.state.keyValueLists[this.props.active_widget_id+"_stateparams"]:stateWidgetProps||[])&&"object"==typeof currentStateParams?JSON.stringify(currentStateParams):currentStateParams||"[]",elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_stateparams",label:"State Parameters",placeholder_name:"Enter Param Name...",trim_name:"true",items:currentStateParams,placeholder_value:"Enter value path..."})),this.props.activePage.props&&Object.keys(this.props.activePage.props).length>0&&(currentWidgetPageParamsProps=(currentWidgetPageParamsProps=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_pageparams"]?this.state.keyValueLists[this.props.active_widget_id+"_pageparams"]:pageParamWidgetProps||[])&&"object"==typeof currentWidgetPageParamsProps?JSON.stringify(currentWidgetPageParamsProps):currentWidgetPageParamsProps||"[]",choiceList=[],Object.keys(this.props.activePage.props).map(function(pageParamName){choiceList.push({name:pageParamName,value:pageParamName})}),elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_pageparams",choices:JSON.stringify({valueList:choiceList}),trim_name:"true",items:currentWidgetPageParamsProps,label:"Page Parameter Subscription",placeholder_name:"Enter Name...",placeholder_value:"Enter Default Value..."}))),this.props.activePage.widgets&&Object.keys(this.props.activePage.widgets).length>1&&(currentSiblingWidgetParams=(currentSiblingWidgetParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_siblingparams"]?this.state.keyValueLists[this.props.active_widget_id+"_siblingparams"]:siblingWidgetProps||[])&&"object"==typeof currentSiblingWidgetParams?JSON.stringify(currentSiblingWidgetParams):currentSiblingWidgetParams||"[]",nestedChoiceList={},nestedLabels={"Widget Name":{"Prop Name":""}},this.props.active_widget_id&&this.props.activePage.widgets&&Object.keys(this.props.activePage.widgets).map(function(widgetId){if(widgetId!=_this4.props.active_widget_id){var siblingWidget=_this4.props.activePage.widgets[widgetId],siblingWidgetName=siblingWidget.props&&siblingWidget.props.Name?siblingWidget.props.Name:widgetId,_siblingWidgetProps={};siblingWidget.props&&Object.keys(siblingWidget.props).map(function(siblingWidgetPropName){(siblingWidgetPropName=siblingWidgetPropName.replace("__Child__","").replace("__Sibling__","").replace("__Dynamic__","")).endsWith("_params")||siblingWidgetPropName.endsWith("_siblingparams")||siblingWidgetPropName.endsWith("_pageparams")||siblingWidgetPropName.endsWith("_dynamicparams")||(_siblingWidgetProps[siblingWidgetPropName]=siblingWidget.props[siblingWidgetPropName]||"")}),nestedChoiceList[siblingWidgetName]=_siblingWidgetProps}}),elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_siblingparams",choices:JSON.stringify({valueList:nestedChoiceList}),trim_name:"true",valuelabels:JSON.stringify(nestedLabels),items:currentSiblingWidgetParams,label:"Sibling Widget Subscription",placeholder_name:"Enter Name...",placeholder_value:"Enter Default Value..."}))),!this.props.activeWidget||"PageDesignerPreview"!=this.props.activeWidget.name&&"SrsTabs"!=this.props.activeWidget.name&&1!=this.props.widgetProps.is_container||(widgetType="","PageDesignerPreview"==this.props.activeWidget.name?widgetType="Page":"SrsTabs"==this.props.activeWidget.name?widgetType="Tabs":1==this.state.widgetProps.is_container&&(widgetType="Container"),widgetType&&(currentChildWidgetParams=(currentChildWidgetParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_childparams"]?this.state.keyValueLists[this.props.active_widget_id+"_childparams"]:childWidgetProps||[])&&"object"==typeof currentChildWidgetParams?JSON.stringify(currentChildWidgetParams):currentChildWidgetParams||"[]",nestedChildChoiceList={},"Page"==widgetType?nestedChildChoiceList=this.getChildWidgetProps(this.props.activeWidget,this.state.widgetProps.PageId,widgetType,nestedChildChoiceList):"Tabs"==widgetType&&(tabRelations=JSON.parse(this.props.activeWidget.props.tabs))&&tabRelations.map(function(tabRelation,indx){if(tabRelation.tabInfo&&tabRelation.tabInfo.page){var pageId=tabRelation.tabInfo.page.page_id,pagesuffix=_this4.props.activeWidget.id+indx;nestedChildChoiceList=_extends({},nestedChildChoiceList,_this4.getChildWidgetProps(_this4.props.activeWidget,pageId+pagesuffix,"Page",nestedChildChoiceList))}}),nestedChildLabels={"Page Name":{"Widget Name":{"Prop Name":""}}},elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_childparams",choices:JSON.stringify({valueList:nestedChildChoiceList}),valuelabels:JSON.stringify(nestedChildLabels),items:currentChildWidgetParams,label:"Child Widget Subscription",placeholder_name:"Enter Name...",placeholder_value:"Enter Default Value..."}))));case 47:this.setState({elementsToRender:elementsToRender,dataLoaded:!0});case 48:case"end":return _context3.stop()}},_callee,this)}));return function(_x){return _ref.apply(this,arguments)}}()},{key:"showTabMappingDialog",value:function(tab){this.props.updateStore({updates:{showpreview:!0,active_tab_id:tab.tab_id}}),this.setState({showPreview:!0,reload:!this.state.reload})}},{key:"closePreviewWindow",value:function(){this.setState({reload:!this.state.reload})}},{key:"handleTabNameChange",value:function(e,tab){var value=e.target.value,tabId=tab.tab_id,updatedProps=this.state.widgetProps||{},tabs=[];tabs="string"==typeof updatedProps.tabs?updatedProps.tabs?JSON.parse(updatedProps.tabs):[]:updatedProps.tabs||[];for(var i=0;i<tabs.length;i++){var _tab=tabs[i];_tab.tab_id==tabId&&(_tab.tabInfo.name=encodeURIComponent(value))}updatedProps.tabs=JSON.stringify(tabs),this.updateWidgetProps(updatedProps)}},{key:"addTab",value:function(){var updatedProps=this.state.widgetProps||{},tabs=[];tabs="string"==typeof updatedProps.tabs?updatedProps.tabs?JSON.parse(updatedProps.tabs):[]:updatedProps.tabs||[];var tabId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)});tabs.push({tab_id:tabId,tabInfo:{name:"",type:"",page_id:"",list:{table:"",fields:[],pagesize:10}}}),updatedProps.tabs=JSON.stringify(tabs),this.updateWidgetProps(updatedProps)}},{key:"removeTab",value:function(tab){var tabId=tab.tab_id,updatedProps=this.state.widgetProps||{},tabs=[];tabs="string"==typeof updatedProps.tabs?updatedProps.tabs?JSON.parse(updatedProps.tabs):[]:updatedProps.tabs||[];for(var tabIndex=0,i=0;i<tabs.length;i++){if(tabs[i].tab_id==tabId){tabIndex=i;break}}tabs.splice(tabIndex,1),updatedProps.tabs=JSON.stringify(tabs),this.updateWidgetProps(updatedProps)}},{key:"getTabs",value:function(){var _this5=this,widgetProps=this.state.widgetProps||{},tabs=[],length=(tabs="string"==typeof widgetProps.tabs?widgetProps.tabs?JSON.parse(widgetProps.tabs):[]:widgetProps.tabs||[]).length,tabsToRender=[],result=null;return tabs.forEach(function(tab,i){var element=React.createElement("div",{className:"tab-create"},React.createElement(TextInput,{placeholder:"Tab Name",value:decodeURIComponent(tab.tabInfo.name),onChange:function(e){_this5.handleTabNameChange(e,tab)}}),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){_this5.removeTab(tab)}}):null,React.createElement(AddAlt20,{onClick:function(){_this5.addTab()}}),React.createElement(Settings32,{style:{marginTop:8,marginLeft:5},onClick:function(){_this5.showTabMappingDialog(tab)}}));tabsToRender.push(element)}),tabsToRender.length>0&&(result=React.createElement(React.Fragment,null," ",React.createElement("label",{class:"bx--label"},"Tabs")," ",tabsToRender)),result}},{key:"render",value:function(){var previewComponent,widgetPropsElements=this.state.elementsToRender;previewComponent=1==this.state.showPreview?React.createElement("preview-component",{target:"designer_props"},React.createElement("show-tab-mapping-dialog",null)):null;var tabs=this.isTabComponent?this.getTabs():null;return this.state.dataLoaded?React.createElement("div",{className:"sr-prop-body"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/PageDesignerProps/Style.css");'),previewComponent,React.createElement("div",{className:"tabs-panel"}," ",tabs," "),widgetPropsElements):React.createElement("div",{className:"dataLoading"},"Loading...")}}]),_PageDesignerProps_}(React.Component),_export("PageDesignerProps",PageDesignerProps=function(props){return _PageDesignerProps_}),_export("PageDesignerProps",PageDesignerProps),_export("default",PageDesignerProps),_export("states",states=[{KeyName:"activeWidget",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}",DefaultValue:'{"pages": {"${active_page_id}": {"widgets":{"${active_widget_id}": {}}}}}'},{KeyName:"keyvaluepair",AccessPath:"keyvaluepair",DefaultValue:'{"keyvaluepair": {}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview":false}'},{KeyName:"pageProps",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"widgetProps",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}.props",DefaultValue:'{"pages": {"${active_page_id}": {"widgets":{"${active_widget_id}": {"props": {}}}}}}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id":{}}'},{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": "false"}'},{KeyName:"widgetData",AccessPath:"pages.${active_page_id}.widgets",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {}}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id":""}'},{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"active_tab_id",AccessPath:"active_tab_id",DefaultValue:'{"active_tab_id":""}'},{KeyName:"pageData",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"component_id",AccessPath:"component_id",DefaultValue:'{"component_id":""}'},{KeyName:"schemaFields",AccessPath:"schema.fields",DefaultValue:'{"schema": {"fields": []}}'},{KeyName:"schemaTables",AccessPath:"schema.tables",DefaultValue:'{"schema": {"tables": []}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PageDesignerProps/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","component/studio/SrsReference/Definition.js","component/mmf/PageParameter/Definition.js","client/script/mmf/GraphQLDataUtil.js","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","@carbon/icons-react/lib/settings/16","lodash.debounce","deepmerge","lodash.clonedeep","lodash.get"],function(_export,_context4){"use strict";var _regeneratorRuntime,_extends,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,TextArea,Checkbox,Select,SelectItem,SrsReference,PageParameter,GraphQLDataUtil,AddAlt20,SubAlt20,Settings32,deepmerge,cloneDeep,DEFAULT_PROPS,_PageDesignerProps_,PageDesignerProps;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,TextArea=_carbonComponentsReact.TextArea,Checkbox=_carbonComponentsReact.Checkbox,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_componentMmfPageParameterDefinitionJs){PageParameter=_componentMmfPageParameterDefinitionJs.PageParameter},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonIconsReactLibSettings){Settings32=_carbonIconsReactLibSettings.default},function(_lodashDebounce){_lodashDebounce.default},function(_deepmerge){deepmerge=_deepmerge.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashGet){_lodashGet.default}],execute:function(){DEFAULT_PROPS=[{Name:"Invisible",DefaultValue:!1},{Name:"Required",DefaultValue:!1},{Name:"ReadOnly",DefaultValue:!1},{Name:"TriggerActionOnChange",DefaultValue:!1}],_PageDesignerProps_=function(_React$Component){function _PageDesignerProps_(props){_classCallCheck(this,_PageDesignerProps_);var _this=_possibleConstructorReturn(this,(_PageDesignerProps_.__proto__||Object.getPrototypeOf(_PageDesignerProps_)).call(this,props));_this.state={keyValueLists:{},widgetProps:[],widgetChanged:!0,propsChanges:{},dataLoaded:!1,widgetProps:_this.props.widgetProps||{},showPreview:!1,reload:!1},_this.isTabComponent=!1,_this.handleTextChange=_this.handleTextChange.bind(_this),_this.loadWidgetProps=_this.loadWidgetProps.bind(_this),_this.keyValueOnChange=_this.keyValueOnChange.bind(_this);return _this.updateWidgetProps=function(updatedProps){_this.setState({widgetProps:updatedProps}),_this.props.updateStore({updates:{widgetProps:updatedProps}})},_this.updateWidgetPropsDebounce=function(key,value){var updateProps=cloneDeep(_this.props.widgetProps)||{};updateProps[key]=value,_this.setState({widgetProps:updateProps}),_this.props.updateStore({updates:{widgetProps:updateProps}})},_this.getChildWidgetProps=_this.getChildWidgetProps.bind(_this),_this}return _inherits(_PageDesignerProps_,_React$Component),_createClass(_PageDesignerProps_,[{key:"keyValueOnChange",value:function(keyValueList,changedIndx,propName,value,storeKeyName){var newKeyValueLists=cloneDeep(this.state.keyValueLists);newKeyValueLists[storeKeyName]=newKeyValueLists[storeKeyName]||keyValueList,newKeyValueLists[storeKeyName].map(function(keyValueItem,indx){indx==changedIndx&&(keyValueItem[propName]=value)}),this.setState({keyValueLists:newKeyValueLists}),this.updateWidgetPropsDebounce(storeKeyName,newKeyValueLists[storeKeyName])}},{key:"handleTextChange",value:function(e){var propChanges=cloneDeep(this.state.propChanges)||{};propChanges[e.target.name]=e.target.value,this.setState({propChanges:propChanges})}},{key:"componentDidMount",value:function(){this.loadWidgetProps()}},{key:"componentDidUpdate",value:function(prevProps,prevState){var _this2=this;if(prevProps.active_widget_id!==this.props.active_widget_id||prevProps.active_page_id!==this.props.active_page_id){var tobeActiveWidgetProps=this.props.pageData&&this.props.pageData[this.props.active_page_id]&&this.props.pageData[this.props.active_page_id].widgets&&this.props.pageData[this.props.active_page_id].widgets[this.props.active_widget_id]&&this.props.pageData[this.props.active_page_id].widgets[this.props.active_widget_id].props?this.props.pageData[this.props.active_page_id].widgets[this.props.active_widget_id].props:{},keyValueLists={};tobeActiveWidgetProps&&Object.keys(tobeActiveWidgetProps).map(function(tobeActiveWidgetPropName){tobeActiveWidgetPropName.startsWith("__Child__")?(keyValueLists[_this2.props.active_widget_id+"_childparams"]=keyValueLists[_this2.props.active_widget_id+"_childparams"]||[],keyValueLists[_this2.props.active_widget_id+"_childparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__Dynamic__")?(keyValueLists[_this2.props.active_widget_id+"_dynamicparams"]=keyValueLists[_this2.props.active_widget_id+"_dynamicparams"]||[],keyValueLists[_this2.props.active_widget_id+"_dynamicparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__Sibling__")?(keyValueLists[_this2.props.active_widget_id+"_siblingparams"]=keyValueLists[_this2.props.active_widget_id+"_siblingparams"]||[],keyValueLists[_this2.props.active_widget_id+"_siblingparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__Pageparam__")?(keyValueLists[_this2.props.active_widget_id+"_pageparams"]=keyValueLists[_this2.props.active_widget_id+"_pageparams"]||[],keyValueLists[_this2.props.active_widget_id+"_pageparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]})):tobeActiveWidgetPropName.startsWith("__State__")&&(keyValueLists[_this2.props.active_widget_id+"_stateparams"]=keyValueLists[_this2.props.active_widget_id+"_stateparams"]||[],keyValueLists[_this2.props.active_widget_id+"_stateparams"].push({name:tobeActiveWidgetPropName,value:tobeActiveWidgetProps[tobeActiveWidgetPropName]}))}),this.setState({widgetChanged:!0,keyValueLists:keyValueLists,widgetProps:cloneDeep(this.props.widgetProps)})}if(!_.isEqual(prevState.widgetProps,this.state.widgetProps)||prevState.widgetChanged!=this.state.widgetChanged&&1==this.state.widgetChanged||prevState.dataLoaded!=this.state.dataLoaded&&!this.state.dataLoaded||!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)){if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_dynamicparams"],this.state.keyValueLists[this.props.active_widget_id+"_dynamicparams"])){var dynamicWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_dynamicparams"];if(dynamicWidgetProps&&dynamicWidgetProps.length>0){var updatedProps=cloneDeep(this.props.widgetProps)||{};for(var propName in updatedProps)propName.startsWith("__Dynamic__")&&delete updatedProps[propName];dynamicWidgetProps.map(function(dynamicWidgetProp){dynamicWidgetProp.name&&(updatedProps["__Dynamic__"+dynamicWidgetProp.name]=dynamicWidgetProp.value?dynamicWidgetProp.value:"")}),!_.isEqual(this.props.widgetProps,updatedProps)&&this.updateWidgetProps(updatedProps)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_pageparams"],this.state.keyValueLists[this.props.active_widget_id+"_pageparams"])){var pageParamWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_pageparams"];if(pageParamWidgetProps&&pageParamWidgetProps.length>0){var _updatedProps=cloneDeep(this.props.widgetProps)||{};for(var _propName in _updatedProps)_propName.startsWith("__Pageparam__")&&delete _updatedProps[_propName];pageParamWidgetProps.map(function(pageParamWidgetProp){pageParamWidgetProp.name&&pageParamWidgetProp.value&&(_updatedProps["__Pageparam__"+pageParamWidgetProp.name]=pageParamWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps)&&this.updateWidgetProps(_updatedProps)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_siblingparams"],this.state.keyValueLists[this.props.active_widget_id+"_siblingparams"])){var siblingWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_siblingparams"];if(siblingWidgetProps&&siblingWidgetProps.length>0){var _updatedProps2=cloneDeep(this.props.widgetProps)||{};for(var _propName2 in _updatedProps2)_propName2.startsWith("__Sibling__")&&delete _updatedProps2[_propName2];siblingWidgetProps.map(function(siblingWidgetProp){siblingWidgetProp.name&&siblingWidgetProp.value&&(_updatedProps2["__Sibling__"+siblingWidgetProp.name]=siblingWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps2)&&this.updateWidgetProps(_updatedProps2)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_childparams"],this.state.keyValueLists[this.props.active_widget_id+"_childparams"])){var childWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_childparams"];if(childWidgetProps&&childWidgetProps.length>0){var _updatedProps3=cloneDeep(this.props.widgetProps)||{};for(var _propName3 in _updatedProps3)_propName3.startsWith("__Child__")&&delete _updatedProps3[_propName3];childWidgetProps.map(function(childWidgetProp){childWidgetProp.name&&childWidgetProp.value&&(_updatedProps3["__Child__"+childWidgetProp.name]=childWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps3)&&this.updateWidgetProps(_updatedProps3)}}if(!_.isEqual(prevState.keyValueLists,this.state.keyValueLists)&&!_.isEqual(prevState.keyValueLists[this.props.active_widget_id+"_stateparams"],this.state.keyValueLists[this.props.active_widget_id+"_stateparams"])){var stateWidgetProps=this.props.keyvaluepair[this.props.active_widget_id+"_stateparams"];if(stateWidgetProps&&stateWidgetProps.length>0){var _updatedProps4=cloneDeep(this.props.widgetProps)||{};for(var _propName4 in _updatedProps4)_propName4.startsWith("__State__")&&delete _updatedProps4[_propName4];stateWidgetProps.map(function(stateWidgetProp){stateWidgetProp.name&&stateWidgetProp.value&&(_updatedProps4["__State__"+stateWidgetProp.name]=stateWidgetProp.value)}),!_.isEqual(this.props.widgetProps,_updatedProps4)&&this.updateWidgetProps(_updatedProps4)}}this.loadWidgetProps(prevProps.active_widget_id!==this.props.active_widget_id||prevProps.active_page_id!==this.props.active_page_id)}prevProps.showpreview!=this.props.showpreview&&prevProps.showpreview_target!=this.props.showpreview_target&&"designer_props"==this.props.showpreview_target&&this.setState({showPreview:!1,reload:!this.state.reload}),_.isEqual(prevProps.keyvaluepair,this.props.keyvaluepair)||this.props.keyvaluepair&&Object.keys(this.props.keyvaluepair).length>0&&Object.keys(this.props.keyvaluepair).map(function(varName){if(!_.isEqual(prevProps.keyvaluepair[varName],_this2.props.keyvaluepair[varName])){!varName.endsWith("_dynamicparams")&&!varName.endsWith("_siblingparams")&&!varName.endsWith("_childparams")&&!varName.endsWith("_stateparams")&&!varName.endsWith("_pageparams")&&_this2.updateWidgetPropsDebounce(varName,_this2.props.keyvaluepair[varName]);var newKeyValueLists=cloneDeep(_this2.state.keyValueLists);newKeyValueLists[varName]=cloneDeep(_this2.props.keyvaluepair[varName]),_this2.setState({keyValueLists:newKeyValueLists})}})}},{key:"getChildWidgetProps",value:function(currentWidget,pageId,widgetType,result){var _this3=this;if("Page"==widgetType){var childPage=this.props.pageData[pageId],pageWidgets=childPage&&childPage.widgets?childPage.widgets:[];return pageWidgets&&Object.keys(pageWidgets).map(function(pageWidgetId){var pageWidget=pageWidgets[pageWidgetId],childWidgetType="";if("PageDesignerPreview"==pageWidget.name?childWidgetType="Page":"SrsTabs"==pageWidget.name?childWidgetType="Tabs":pageWidget&&pageWidget.props&&1==pageWidget.props.is_container&&(childWidgetType="Container"),childWidgetType)result=deepmerge(result,_this3.getChildWidgetProps(pageWidget,pageWidget.props.PageId,childWidgetType,result));else{var childPageName=childPage.name||pageId;result[childPageName]=result[childPageName]||{};var pageWidgetName=pageWidget.props&&pageWidget.props.Name?pageWidget.props.Name:pageWidget.id,childWidgetProps={};pageWidget.props&&Object.keys(pageWidget.props).map(function(pageWidgetPropName){(pageWidgetPropName=pageWidgetPropName.replace("__Child__","").replace("__Sibling__","").replace("__Dynamic__","").replace("__State__","")).endsWith("__params")||pageWidgetPropName.endsWith("__siblingparams")||pageWidgetPropName.endsWith("_pageparams")||pageWidgetPropName.endsWith("_dynamicparams")||pageWidgetPropName.endsWith("_stateparams")||(childWidgetProps[pageWidgetPropName]=pageWidget.props[pageWidgetPropName])}),result[childPageName][pageWidgetName]=childWidgetProps||{}}}),result}if("Tabs"==widgetType){var tabRelations=JSON.parse(currentWidget.props.tabs);return tabRelations&&tabRelations.map(function(tabRelation,indx){if(tabRelation.tabInfo&&tabRelation.tabInfo.page){var _pageId=tabRelation.tabInfo.page.page_id,pagesuffix=currentWidget.id+indx;result=deepmerge(result,_this3.getChildWidgetProps(currentWidget,_pageId+pagesuffix,"Page",result))}}),result}if("Container"!=widgetType)return result}},{key:"loadWidgetProps",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(forceLoad){var propsMap,elementsToRender,widgetProps,dynamicWidgetProps,pageParamWidgetProps,siblingWidgetProps,childWidgetProps,stateWidgetProps,_loop,i,activeWidget,data,widgetDetails,widgetPropsData,_loop2,currentDynamicParams,currentStateParams,currentWidgetPageParamsProps,choiceList,currentSiblingWidgetParams,nestedChoiceList,nestedLabels,widgetType,currentChildWidgetParams,nestedChildChoiceList,tabRelations,nestedChildLabels,_this4=this;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:for(propsMap={},elementsToRender=[],this.isTabComponent=!1,widgetProps=this.state.widgetProps,dynamicWidgetProps=[],pageParamWidgetProps=[],siblingWidgetProps=[],childWidgetProps=[],stateWidgetProps=[],widgetProps&&Object.keys(widgetProps).length>0&&Object.keys(widgetProps).map(function(widgetPropKey,indx){var nodeName=widgetPropKey,nodeValue=widgetProps[widgetPropKey];if("FieldName"==nodeName){if(propsMap[nodeName]="",nodeValue&&nodeValue.indexOf("@@[")>-1){var propVal=nodeValue.split("@@[")[1];propsMap[nodeName]=propVal.substr(0,propVal.length-1)}}else if(nodeName.startsWith("__Dynamic__")){var dynamicWidgetPropName=nodeName.split("__Dynamic__")[1];dynamicWidgetProps.push({name:dynamicWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__Pageparam__")){var pageParamWidgetPropName=nodeName.split("__Pageparam__")[1];pageParamWidgetProps.push({name:pageParamWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__Sibling__")){var siblingWidgetPropName=nodeName.split("__Sibling__")[1];siblingWidgetProps.push({name:siblingWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__Child__")){var childWidgetPropName=nodeName.split("__Child__")[1];childWidgetProps.push({name:childWidgetPropName,value:nodeValue})}else if(nodeName.startsWith("__State__")){var stateWidgetPropName=nodeName.split("__State__")[1];stateWidgetProps.push({name:stateWidgetPropName,value:nodeValue})}else propsMap[nodeName]=nodeValue}),this.props.activeWidget.Component,SrsReference(),_loop=function(i){var node=DEFAULT_PROPS[i],element=React.createElement(Checkbox,{labelText:node.Name,name:node.Name,id:"check-box-"+i,defaultChecked:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(value){var updatedProps=cloneDeep(_this4.props.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}});elementsToRender.push(element)},i=0;i<DEFAULT_PROPS.length;i++)_loop(i);if((activeWidget=this.props.activeWidget)&&0!=Object.keys(activeWidget).length&&activeWidget.Component){_context3.next=22;break}return _context3.next=18,GraphQLDataUtil().getRecord("pd.getSlideSlotWidgetById",{widgetId:this.props.active_widget_id});case 18:data=_context3.sent,widgetDetails={Component:data.Component,Slot:data.Slot},activeWidget=_extends({},widgetDetails,activeWidget),this.updateWidgetProps(activeWidget);case 22:if(!this.state.widgetChanged&&!forceLoad){_context3.next=27;break}return _context3.next=25,GraphQLDataUtil().getRecord("pd.GetComponentProps",{PropsComponent:activeWidget.Component});case 25:widgetPropsData=_context3.sent,this.setState({widgetChanged:!1,widgetPropsData:widgetPropsData,keyValueLists:{}});case 27:if(!(this.state.widgetPropsData&&this.state.widgetPropsData.length>0)){_context3.next=47;break}_loop2=_regeneratorRuntime.mark(function _loop2(i){var node,nodeType,updatePropsWithDefaults,element,currentList,selectItems,schemaTables,_selectItems,attributes,tableName,displayFieldName,secondaryDisplayFieldName,filterStr,recordFilter,_NavReference,navFilter,_ComponentReference,_selectItems4,_schemaTables,PageReference,_selectItems5,_tableName,_attributes,widgetName,schemaFields,relatedTableFieldsSelectList,relatedTableName,parentField,allFields,matchingField,relatedFields,relatedTableDisplayField,targetPageIds,_attributes2,_widgetName,pageIdValue,ParamPicker,_loop3,targetPageIdKey,_selectItems6,selectKeyValues,tabWidgetProps,tabs,tabId,_tableName3,_attributes3,_widgetName2,_schemaFields,fieldNames,currentKeyValueList,currentKVList;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(node=_this4.state.widgetPropsData[i].node,nodeType=node.Type,updatePropsWithDefaults=cloneDeep(_this4.state.widgetProps),element=React.createElement(TextInput,{key:node.Name+"_"+_this4.props.active_widget_id,id:node.Name+"_"+_this4.props.active_widget_id,labelText:node.Name,name:node.Name,defaultValue:_this4.state.widgetProps[node.Name]?_this4.state.widgetProps[node.Name]:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,placeholder:node.DefaultValue,onChange:_this4.handleTextChange,onBlur:function(e){var updatedProps=cloneDeep(_this4.state.widgetProps);updatedProps[e.target.name]="Name"==node.Name&&_this4.state.propChanges[e.target.name]?_this4.state.propChanges[e.target.name].replace(/[^a-zA-Z0-9]/g,"_"):_this4.state.propChanges[e.target.name],_this4.updateWidgetProps(updatedProps)}}),"TextArea"==nodeType&&(element=React.createElement(TextArea,{key:node.Name+"_"+_this4.props.active_widget_id,id:node.Name+"_"+_this4.props.active_widget_id,labelText:node.Name,name:node.Name,defaultValue:_this4.state.widgetProps[node.Name]?_this4.state.widgetProps[node.Name]:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,placeholder:node.DefaultValue,onChange:_this4.handleTextChange,onBlur:function(e){var updatedProps=cloneDeep(_this4.state.widgetProps);updatedProps[node.Name]=e.target.value,_this4.updateWidgetProps(updatedProps)}})),"Hidden"==nodeType&&(element=null),"Checkbox"==nodeType&&(element=React.createElement(Checkbox,{key:node.Name+"_"+_this4.props.active_widget_id,labelText:node.Name,name:node.Name,id:node.Name+"_"+_this4.props.active_widget_id,defaultChecked:propsMap.hasOwnProperty(node.Name)?"true"==propsMap[node.Name]||1==propsMap[node.Name]:"true"==node.DefaultValue,onChange:function(value){var wprops=cloneDeep(_this4.state.widgetProps)||{};wprops[node.Name]=value,_this4.updateWidgetProps(wprops)}})),"NestedList"==nodeType&&([],currentList=(currentList=_this4.state.keyValueLists&&_this4.state.keyValueLists[node.Name]?_this4.state.keyValueLists[node.Name]:propsMap[node.Name]?propsMap[node.Name]:[])&&"object"==typeof currentList?JSON.stringify(currentList):currentList||"[]",element=React.createElement("srs-key-value-pair",{varname:node.Name,items:currentList,label:node.Name,placeholder_name:"Name..",placeholder_value:"Value.."})),"TableSelector"==nodeType&&((selectItems=[]).push(React.createElement(SelectItem,{value:"",text:"None"})),(schemaTables=_this4.props.schemaTables||[]).sort(function(a,b){return a==b?0:a>b?1:-1}),schemaTables.map(function(tableName){selectItems.push(React.createElement(SelectItem,{value:tableName,text:tableName}))}),updatePropsWithDefaults[node.Name]||(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),element=React.createElement(Select,{style:{display:"flex"},labelText:node.Name,onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue},selectItems)),"RecordSelector"==nodeType&&node.Attributes){_selectItems=[],attributes=JSON.parse(node.Attributes),tableName=attributes.tableName,displayFieldName=attributes.displayFieldName,secondaryDisplayFieldName=attributes.secondaryDisplayFieldName,filterStr=attributes.filter,_selectItems.push(React.createElement(SelectItem,{value:"",text:"None"})),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),SrsReference(),recordFilter={};try{recordFilter=JSON.parse(filterStr)}catch(err){}element=React.createElement(NavReference,{style:{display:"flex"},tablename:tableName,displayfield:displayFieldName,secondarydisplayfield:secondaryDisplayFieldName,filter:JSON.stringify(recordFilter),searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})}if("NavSelector"==nodeType&&([].push(React.createElement(SelectItem,{value:"",text:"None"})),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),_NavReference=SrsReference(),navFilter={where:{and:[{Scope:_this4.props.currentscope},{Parent:null}]}},element=React.createElement(_NavReference,{style:{display:"flex"},tablename:"MetaNavigation",displayfield:"Name",secondarydisplayfield:"Scope",filter:JSON.stringify(navFilter),searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})),"ComponentSelector"==nodeType&&([].push(React.createElement(SelectItem,{value:"",text:"None"})),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),_ComponentReference=SrsReference(),element=React.createElement(_ComponentReference,{style:{display:"flex"},tablename:"MetaComponent",displayfield:"Name",secondarydisplayfield:"Scope",filter:"",searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})),"PageSelector"==nodeType&&((_selectItems4=[]).push(React.createElement(SelectItem,{value:"",text:"None"})),(_schemaTables=_this4.props.schemaTables||[]).sort(function(a,b){return a==b?0:a>b?1:-1}),_schemaTables.map(function(tableName){_selectItems4.push(React.createElement(SelectItem,{value:tableName,text:tableName}))}),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),PageReference=SrsReference(),element=React.createElement(PageReference,{style:{display:"flex"},tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:"",searchfields:"Name",title:node.Name,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue,onChange:function(selectedItem){var value=selectedItem?selectedItem.id:"",updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)}})),"FieldSelector"==nodeType&&(_selectItems5=[],_tableName="",node.Attributes&&("Static"==(_attributes=JSON.parse(node.Attributes)).tableType?_tableName=_attributes.value:(widgetName=_attributes.value&&_attributes.value.widgetName,_tableName=_this4.state.widgetProps[widgetName])),_selectItems5.push(React.createElement(SelectItem,{value:"",text:"None"})),(schemaFields=(schemaFields=_this4.props.schemaFields||[])&&schemaFields.filter(function(field,indx){return field.parent==_tableName&&"id"!==field.id}))&&schemaFields.map(function(fieldObj){"field"==fieldObj.type?_selectItems5.push(React.createElement(SelectItem,{value:fieldObj.id,text:fieldObj.text})):"one2one"==fieldObj.type&&_selectItems5.push(React.createElement(SelectItem,{value:fieldObj.id+"@@"+fieldObj.to,text:fieldObj.text}))}),!updatePropsWithDefaults[node.Name]&&node.DefaultValue&&(updatePropsWithDefaults[node.Name]=node.DefaultValue,_this4.updateWidgetProps(updatePropsWithDefaults)),relatedTableFieldsSelectList=[],relatedTableName="",parentField="",propsMap[node.Name]&&propsMap[node.Name].indexOf(".")>-1&&(parentField=propsMap[node.Name].split(".")[0],propsMap[node.Name].split(".")[1],allFields=_this4.props.schemaFields||[],(matchingField=allFields.filter(function(field,indx){return field.id==parentField&&field.parent==_tableName&&"one2one"==field.type}))&&1==matchingField.length&&(relatedTableName=matchingField[0].to),relatedTableFieldsSelectList.push(React.createElement(SelectItem,{value:"",text:"None"})),(relatedFields=(relatedFields=_this4.props.schemaFields||[])&&relatedFields.filter(function(field,indx){return field.parent==relatedTableName&&"field"==field.type&&"id"!==field.id}))&&relatedFields.map(function(fieldObj){relatedTableFieldsSelectList.push(React.createElement(SelectItem,{value:fieldObj.id,text:fieldObj.text}))})),relatedTableDisplayField=relatedTableName?React.createElement(Select,{style:{display:"flex"},labelText:"Related Field",onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=parentField+"."+value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]&&propsMap[node.Name].indexOf(".")>-1?propsMap[node.Name].split(".")[1]:""},relatedTableFieldsSelectList):null,element=React.createElement(React.Fragment,null,React.createElement(Select,{style:{display:"flex"},labelText:node.Name,onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};value.indexOf("@@")>-1?(value=value.split("@@")[0],updatedProps[node.Name]=value+".uid"):updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]?propsMap[node.Name].indexOf(".")>-1?propsMap[node.Name].split(".")[0]+"@@"+relatedTableName:propsMap[node.Name]:node.DefaultValue?node.DefaultValue:""},_selectItems5),relatedTableDisplayField)),"PageParameter"!=nodeType){_context2.next=27;break}if(targetPageIds={},node.Attributes&&("Static"==(_attributes2=JSON.parse(node.Attributes)).pageType?targetPageIds[_attributes2.value]="Page Parameters":(_widgetName=_attributes2.value&&_attributes2.value.widgetName,(pageIdValue=_this4.state.widgetProps[_widgetName])&&(pageIdValue.indexOf(",")>0?pageIdValue.split(",").map(function(pageIdWidgetName){var currentPageId=_this4.state.widgetProps[pageIdWidgetName.trim()];currentPageId&&(targetPageIds[currentPageId+"_"+pageIdWidgetName.trim()]=pageIdWidgetName.trim())}):targetPageIds[pageIdValue]="Page Parameters"))),ParamPicker=null,!(targetPageIds&&Object.keys(targetPageIds).length>0)){_context2.next=26;break}_loop3=_regeneratorRuntime.mark(function _loop3(targetPageIdKey){var targetPageId,matchingPage,isPageModelDriven,isParentPageModelDriven,currentPageParams,parentPageParams,additionalProps,activePageProps;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return targetPageId=targetPageIdKey.indexOf("_")>-1?targetPageIdKey.split("_")[0]:targetPageIdKey,_context.next=3,$qry.run("mmf.getSlideDetailsById",{uid:targetPageId},"data.slide");case 3:if(!(matchingPage=_context.sent)||!matchingPage.uid){_context.next=21;break}isPageModelDriven="FreeForm"!=matchingPage.Type,isParentPageModelDriven=_this4.props.activePage&&_this4.props.activePage.pageType&&"FreeForm"!=_this4.props.activePage.pageType,currentPageParams=[],isPageModelDriven&&_this4.props.activePage&&_this4.props.activePage.pageType&&"CreateView"!=_this4.props.activePage.pageType&&(currentPageParams=["recordid"]),matchingPage.props&&Object.keys(matchingPage.props).map(function(propId){"ModelName"!=matchingPage.props[propId].Name&&"ModelScope"!=matchingPage.props[propId].Name&&currentPageParams.push(matchingPage.props[propId].Name)}),parentPageParams={},isParentPageModelDriven&&(parentPageParams.recordid="Parent Record"),_this4.props.activePage&&_this4.props.activePage.props&&(additionalProps={},activePageProps=_this4.props.activePage&&_this4.props.activePage.props?_this4.props.activePage.props:{},Object.keys(activePageProps).map(function(activePageProp){"ModelName"!=activePageProp&&"ModelScope"!=activePageProp&&(additionalProps[activePageProp]=activePageProps[activePageProp])}),parentPageParams=Object.assign(parentPageParams,additionalProps)),_context.t0=matchingPage.Type,_context.next="CreateView"===_context.t0?16:"EditView"===_context.t0?16:"FreeForm"===_context.t0?18:20;break;case 16:return currentPageParams&&currentPageParams.length>0&&(ParamPicker=PageParameter(),element=React.createElement(React.Fragment,null,React.createElement("div",{className:"bx--label",style:{display:"flex",marginTop:10,marginLeft:2}},targetPageIds[targetPageIdKey]+" Params"),React.createElement(ParamPicker,{updateProps:function(data){var updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=updatedProps[node.Name]||{},updatedProps[node.Name]="string"==typeof updatedProps[node.Name]?JSON.parse(updatedProps[node.Name]):updatedProps[node.Name],updatedProps[node.Name][targetPageIdKey]=data,_this4.updateWidgetProps(updatedProps)},parentPageParams:parentPageParams,pageId:targetPageId,pageData:_this4.props.pageData,widgetData:_this4.props.widgetData,defaultValue:propsMap[node.Name]&&propsMap[node.Name][targetPageIdKey]?propsMap[node.Name][targetPageIdKey]:node.DefaultValue?node.DefaultValue:"",params:currentPageParams}))),_context.abrupt("break",21);case 18:return currentPageParams&&currentPageParams.length>0&&(ParamPicker=PageParameter(),element=React.createElement(ParamPicker,{updateProps:function(data){var updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=updatedProps[node.Name]||{},updatedProps[node.Name][targetPageIdKey]=data,_this4.updateWidgetProps(updatedProps)},parentPageParams:parentPageParams,pageData:_this4.props.pageData,widgetData:_this4.props.widgetData,defaultValue:propsMap[node.Name]&&propsMap[node.Name][targetPageIdKey]?propsMap[node.Name][targetPageIdKey]:node.DefaultValue?node.DefaultValue:"",params:currentPageParams})),_context.abrupt("break",21);case 20:return _context.abrupt("break",21);case 21:elementsToRender.push(element);case 22:case"end":return _context.stop()}},_loop3,_this4)}),_context2.t0=_regeneratorRuntime.keys(targetPageIds);case 21:if((_context2.t1=_context2.t0()).done){_context2.next=26;break}return targetPageIdKey=_context2.t1.value,_context2.delegateYield(_loop3(targetPageIdKey),"t2",24);case 24:_context2.next=21;break;case 26:element=null;case 27:if("Select"==nodeType&&((_selectItems6=[]).push(React.createElement(SelectItem,{value:"",text:"None"})),"",node.Attributes&&(selectKeyValues=JSON.parse(node.Attributes))&&selectKeyValues.length>0&&selectKeyValues.map(function(selectKeyValue){return _selectItems6.push(React.createElement(SelectItem,{value:selectKeyValue.value,text:selectKeyValue.name}))}),element=React.createElement(Select,{style:{display:"flex"},labelText:node.Name,onChange:function(e){var value=e.target.value,updatedProps=cloneDeep(_this4.state.widgetProps)||{};updatedProps[node.Name]=value,_this4.updateWidgetProps(updatedProps)},id:node.Name+"_"+_this4.props.active_widget_id,defaultValue:propsMap[node.Name]?propsMap[node.Name]:node.DefaultValue?node.DefaultValue:""},_selectItems6)),"FieldMap"==nodeType&&(element=React.createElement("entity-mapper",{lite:"true",key:"text-element-"+i,id:"text-element-"+i})),"TabMap"!=nodeType){_context2.next=35;break}return _this4.isTabComponent=!0,tabWidgetProps=cloneDeep(_this4.state.widgetProps)||{},0==(tabs=tabWidgetProps.tabs||[]).length&&(tabId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),tabs.push({tab_id:tabId,tabInfo:{name:"",type:""}}),tabWidgetProps.tabs=JSON.stringify(tabs),_this4.updateWidgetProps(tabWidgetProps)),_context2.abrupt("return","continue");case 35:"KeyFieldList"==nodeType&&([],_tableName3="",node.Attributes&&("Static"==(_attributes3=JSON.parse(node.Attributes)).tableType?_tableName3=_attributes3.value:(_widgetName2=_attributes3.value&&_attributes3.value.widgetName,_tableName3=_this4.state.widgetProps[_widgetName2])),_schemaFields=(_schemaFields=_this4.props.schemaFields||[])&&_schemaFields.filter(function(field,indx){return field.parent==_tableName3&&"id"!==field.id}),fieldNames=[],_schemaFields&&_schemaFields.map(function(schemaField){fieldNames.push({name:schemaField.text,value:schemaField.id})}),currentKeyValueList=(currentKeyValueList=_this4.state.keyValueLists&&_this4.state.keyValueLists[node.Name]?_this4.state.keyValueLists[node.Name]:propsMap[node.Name]?propsMap[node.Name]:[])&&"object"==typeof currentKeyValueList?JSON.stringify(currentKeyValueList):currentKeyValueList||"[]",element=React.createElement("srs-key-value-pair",{varname:node.Name,choices:JSON.stringify({valueList:fieldNames}),items:currentKeyValueList,label:node.Name,placeholder_name:"Prop Name..",placeholder_value:"Field Name"})),"KeyValueList"==nodeType&&([],currentKVList=(currentKVList=_this4.state.keyValueLists&&_this4.state.keyValueLists[node.Name]?_this4.state.keyValueLists[node.Name]:propsMap[node.Name]?propsMap[node.Name]:[])&&"object"==typeof currentKVList?JSON.stringify(currentKVList):currentKVList||"[]",element=React.createElement("srs-key-value-pair",{varname:node.Name,items:currentKVList,label:node.Name,placeholder_name:"Name..",placeholder_value:"Value.."})),element&&elementsToRender.push(element);case 38:case"end":return _context2.stop()}},_loop2,_this4)}),i=0;case 30:if(!(i<this.state.widgetPropsData.length)){_context3.next=38;break}return _context3.delegateYield(_loop2(i),"t0",32);case 32:if("continue"!==_context3.t0){_context3.next=35;break}return _context3.abrupt("continue",35);case 35:i++,_context3.next=30;break;case 38:currentDynamicParams=(currentDynamicParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_dynamicparams"]?this.state.keyValueLists[this.props.active_widget_id+"_dynamicparams"]:dynamicWidgetProps||[])&&"object"==typeof currentDynamicParams?JSON.stringify(currentDynamicParams):currentDynamicParams||"[]",elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_dynamicparams",trim_name:"true",label:"Dynamic Parameters",placeholder_name:"Enter Param Name...",items:currentDynamicParams,placeholder_value:"Enter Default Value..."})),currentStateParams=(currentStateParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_stateparams"]?this.state.keyValueLists[this.props.active_widget_id+"_stateparams"]:stateWidgetProps||[])&&"object"==typeof currentStateParams?JSON.stringify(currentStateParams):currentStateParams||"[]",elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_stateparams",label:"State Parameters",placeholder_name:"Enter Param Name...",trim_name:"true",items:currentStateParams,placeholder_value:"Enter value path..."})),this.props.activePage.props&&Object.keys(this.props.activePage.props).length>0&&(currentWidgetPageParamsProps=(currentWidgetPageParamsProps=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_pageparams"]?this.state.keyValueLists[this.props.active_widget_id+"_pageparams"]:pageParamWidgetProps||[])&&"object"==typeof currentWidgetPageParamsProps?JSON.stringify(currentWidgetPageParamsProps):currentWidgetPageParamsProps||"[]",choiceList=[],Object.keys(this.props.activePage.props).map(function(pageParamName){choiceList.push({name:pageParamName,value:pageParamName})}),elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_pageparams",choices:JSON.stringify({valueList:choiceList}),trim_name:"true",items:currentWidgetPageParamsProps,label:"Page Parameter Subscription",placeholder_name:"Enter Name...",placeholder_value:"Enter Default Value..."}))),this.props.activePage.widgets&&Object.keys(this.props.activePage.widgets).length>1&&(currentSiblingWidgetParams=(currentSiblingWidgetParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_siblingparams"]?this.state.keyValueLists[this.props.active_widget_id+"_siblingparams"]:siblingWidgetProps||[])&&"object"==typeof currentSiblingWidgetParams?JSON.stringify(currentSiblingWidgetParams):currentSiblingWidgetParams||"[]",nestedChoiceList={},nestedLabels={"Widget Name":{"Prop Name":""}},this.props.active_widget_id&&this.props.activePage.widgets&&Object.keys(this.props.activePage.widgets).map(function(widgetId){if(widgetId!=_this4.props.active_widget_id){var siblingWidget=_this4.props.activePage.widgets[widgetId],siblingWidgetName=siblingWidget.props&&siblingWidget.props.Name?siblingWidget.props.Name:widgetId,_siblingWidgetProps={};siblingWidget.props&&Object.keys(siblingWidget.props).map(function(siblingWidgetPropName){(siblingWidgetPropName=siblingWidgetPropName.replace("__Child__","").replace("__Sibling__","").replace("__Dynamic__","")).endsWith("_params")||siblingWidgetPropName.endsWith("_siblingparams")||siblingWidgetPropName.endsWith("_pageparams")||siblingWidgetPropName.endsWith("_dynamicparams")||(_siblingWidgetProps[siblingWidgetPropName]=siblingWidget.props[siblingWidgetPropName]||"")}),nestedChoiceList[siblingWidgetName]=_siblingWidgetProps}}),elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_siblingparams",choices:JSON.stringify({valueList:nestedChoiceList}),trim_name:"true",valuelabels:JSON.stringify(nestedLabels),items:currentSiblingWidgetParams,label:"Sibling Widget Subscription",placeholder_name:"Enter Name...",placeholder_value:"Enter Default Value..."}))),!this.props.activeWidget||"PageDesignerPreview"!=this.props.activeWidget.name&&"SrsTabs"!=this.props.activeWidget.name&&1!=this.props.widgetProps.is_container||(widgetType="","PageDesignerPreview"==this.props.activeWidget.name?widgetType="Page":"SrsTabs"==this.props.activeWidget.name?widgetType="Tabs":1==this.state.widgetProps.is_container&&(widgetType="Container"),widgetType&&(currentChildWidgetParams=(currentChildWidgetParams=this.state.keyValueLists&&this.state.keyValueLists[this.props.active_widget_id+"_childparams"]?this.state.keyValueLists[this.props.active_widget_id+"_childparams"]:childWidgetProps||[])&&"object"==typeof currentChildWidgetParams?JSON.stringify(currentChildWidgetParams):currentChildWidgetParams||"[]",nestedChildChoiceList={},"Page"==widgetType?nestedChildChoiceList=this.getChildWidgetProps(this.props.activeWidget,this.state.widgetProps.PageId,widgetType,nestedChildChoiceList):"Tabs"==widgetType&&(tabRelations=JSON.parse(this.props.activeWidget.props.tabs))&&tabRelations.map(function(tabRelation,indx){if(tabRelation.tabInfo&&tabRelation.tabInfo.page){var pageId=tabRelation.tabInfo.page.page_id,pagesuffix=_this4.props.activeWidget.id+indx;nestedChildChoiceList=_extends({},nestedChildChoiceList,_this4.getChildWidgetProps(_this4.props.activeWidget,pageId+pagesuffix,"Page",nestedChildChoiceList))}}),nestedChildLabels={"Page Name":{"Widget Name":{"Prop Name":""}}},elementsToRender.push(React.createElement("srs-key-value-pair",{varname:this.props.active_widget_id+"_childparams",choices:JSON.stringify({valueList:nestedChildChoiceList}),valuelabels:JSON.stringify(nestedChildLabels),items:currentChildWidgetParams,label:"Child Widget Subscription",placeholder_name:"Enter Name...",placeholder_value:"Enter Default Value..."}))));case 47:this.setState({elementsToRender:elementsToRender,dataLoaded:!0});case 48:case"end":return _context3.stop()}},_callee,this)}));return function(_x){return _ref.apply(this,arguments)}}()},{key:"showTabMappingDialog",value:function(tab){this.props.updateStore({updates:{showpreview:!0,active_tab_id:tab.tab_id}}),this.setState({showPreview:!0,reload:!this.state.reload})}},{key:"closePreviewWindow",value:function(){this.setState({reload:!this.state.reload})}},{key:"handleTabNameChange",value:function(e,tab){var value=e.target.value,tabId=tab.tab_id,updatedProps=this.state.widgetProps||{},tabs=[];tabs="string"==typeof updatedProps.tabs?updatedProps.tabs?JSON.parse(updatedProps.tabs):[]:updatedProps.tabs||[];for(var i=0;i<tabs.length;i++){var _tab=tabs[i];_tab.tab_id==tabId&&(_tab.tabInfo.name=encodeURIComponent(value))}updatedProps.tabs=JSON.stringify(tabs),this.updateWidgetProps(updatedProps)}},{key:"addTab",value:function(){var updatedProps=this.state.widgetProps||{},tabs=[];tabs="string"==typeof updatedProps.tabs?updatedProps.tabs?JSON.parse(updatedProps.tabs):[]:updatedProps.tabs||[];var tabId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)});tabs.push({tab_id:tabId,tabInfo:{name:"",type:"",page_id:"",list:{table:"",fields:[],pagesize:10}}}),updatedProps.tabs=JSON.stringify(tabs),this.updateWidgetProps(updatedProps)}},{key:"removeTab",value:function(tab){var tabId=tab.tab_id,updatedProps=this.state.widgetProps||{},tabs=[];tabs="string"==typeof updatedProps.tabs?updatedProps.tabs?JSON.parse(updatedProps.tabs):[]:updatedProps.tabs||[];for(var tabIndex=0,i=0;i<tabs.length;i++){if(tabs[i].tab_id==tabId){tabIndex=i;break}}tabs.splice(tabIndex,1),updatedProps.tabs=JSON.stringify(tabs),this.updateWidgetProps(updatedProps)}},{key:"getTabs",value:function(){var _this5=this,widgetProps=this.state.widgetProps||{},tabs=[],length=(tabs="string"==typeof widgetProps.tabs?widgetProps.tabs?JSON.parse(widgetProps.tabs):[]:widgetProps.tabs||[]).length,tabsToRender=[],result=null;return tabs.forEach(function(tab,i){var element=React.createElement("div",{className:"tab-create"},React.createElement(TextInput,{placeholder:"Tab Name",value:decodeURIComponent(tab.tabInfo.name),onChange:function(e){_this5.handleTabNameChange(e,tab)}}),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){_this5.removeTab(tab)}}):null,React.createElement(AddAlt20,{onClick:function(){_this5.addTab()}}),React.createElement(Settings32,{style:{marginTop:8,marginLeft:5},onClick:function(){_this5.showTabMappingDialog(tab)}}));tabsToRender.push(element)}),tabsToRender.length>0&&(result=React.createElement(React.Fragment,null," ",React.createElement("label",{class:"bx--label"},"Tabs")," ",tabsToRender)),result}},{key:"render",value:function(){var previewComponent,widgetPropsElements=this.state.elementsToRender;previewComponent=1==this.state.showPreview?React.createElement("preview-component",{target:"designer_props"},React.createElement("show-tab-mapping-dialog",null)):null;var tabs=this.isTabComponent?this.getTabs():null;return this.state.dataLoaded?React.createElement("div",{className:"sr-prop-body"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/PageDesignerProps/Style.css");'),previewComponent,React.createElement("div",{className:"tabs-panel"}," ",tabs," "),widgetPropsElements):React.createElement("div",{className:"dataLoading"},"Loading...")}}]),_PageDesignerProps_}(React.Component),_export("PageDesignerProps",PageDesignerProps=function(props){return _PageDesignerProps_}),_export("PageDesignerProps",PageDesignerProps)}}}),System.register("client/script/studio/PageDesignerUtil.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","client/script/mmf/GraphQLDataUtil.js"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_possibleConstructorReturn,_inherits,_classCallCheck,GraphQLDataUtil,Element,DefaultWidget,PageDesignerUtil;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil}],execute:function(){_export("Element",Element=function Element(widgetid,props,attributes){_classCallCheck(this,Element),this.componentid=widgetid,this.props=props,this.tag=attributes.tagName,this.name=attributes.componentName,this.defaultWidth=attributes.defaultWidth,this.defaultHeight=attributes.defaultHeight,this.minHeight=attributes.minHeight,this.minWidth=attributes.minWidth,this.maxHeight=attributes.maxHeight,this.maxWidth=attributes.maxWidth,this.order=attributes.order}),_export("Element",Element),_export("DefaultWidget",DefaultWidget=function(_Element){function DefaultWidget(widgetid,props,attrs){_classCallCheck(this,DefaultWidget);var _this=_possibleConstructorReturn(this,(DefaultWidget.__proto__||Object.getPrototypeOf(DefaultWidget)).call(this,widgetid,props,attrs));return _this.tag="srs-title",_this.defaultWidth=12,_this.defaultHeight=1,_this.minHeight=0,_this.minWidth=0,_this.maxHeight=6,_this.maxWidth=12,_this}return _inherits(DefaultWidget,Element),DefaultWidget}()),_export("DefaultWidget",DefaultWidget),_export("PageDesignerUtil",PageDesignerUtil={PageDesignerUtil:function(palettesData){var _ref,_ref2;this.palettesData=palettesData,this.bindAllMethods=function(){},this.getSlotsData=function(items,slide){var slotsData=[];return items.forEach(function(item){var slotData={};slotData.xposition=item.x||0,slotData.yposition=item.y||0,slotData.height=item.height||0,slotData.minwidth=item.minWidth||0,slotData.maxwidth=item.maxWidth||0,slotData.minheight=item.minHeight||0,slotData.maxheight=item.maxHeight||0,slotData.resize=0,slotData.move=0,slotData.Slide=slide,slotData.componentId=item.component||"comp-uid-placeholder",slotData.slotId=item.id||0,slotsData.push(slotData)}),slotsData},this.getSlotWidgetData=function(slotRes){var slotWidgetsData=[];return slotRes.forEach(function(slot){var slotWidgetData={};slotWidgetData.Slot=slot.uid,slotWidgetData.Component=slot.componentId,slotWidgetsData.push(slotWidgetData)}),slotWidgetsData},this.getWidgetProsData=function(widgetPropsRes){var widgetPropsData=[];return widgetPropsRes.forEach(function(widget){var widgetProps={};widgetProps.Widget=widget.uid,widgetProps.name="Widget Name",widgetProps.value="Widget Value",widgetPropsData.push(widgetProps)}),widgetPropsData},this.getWidgetData=function(widgetRes){var widgetIds=[];return widgetRes.forEach(function(widget){var idData={};idData.Widget=widget.node&&widget.node.uid,widgetIds.push(idData)}),widgetIds},this.getElementDefintions=function(){var _this2=this,result={};return this.palettesData&&0!=Object.keys(this.palettesData).length?(Object.keys(this.palettesData).map(function(paletteKey,indx){result[paletteKey]={};var paletteItems=_this2.palettesData[paletteKey]?_this2.palettesData[paletteKey].items:[];(paletteItems=paletteItems.sort(function(a,b){return a.Order-b.Order}))&&paletteItems.length>0&&paletteItems.map(function(paletteItem,indx){$ele&&$ele.registerElement(paletteItem.component.Name,paletteItem.component.Scope,paletteItem.component.Type);var attrs={tagName:paletteItem.component.Name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),componentName:paletteItem.component.Name,defaultWidth:paletteItem.DefaultWidth,defaultHeight:paletteItem.DefaultHeight,minHeight:paletteItem.MinHeight,minWidth:paletteItem.MinWidth,maxHeight:paletteItem.MaxHeight,maxWidth:paletteItem.MaxWidth};result[paletteKey][paletteItem.Name]=JSON.stringify(new Element(paletteItem.component.uid,{},attrs))})}),result):{}},this.getDefaultPage=function(){return{name:"Unnamed",page_id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),isNew:!0}},this.deleteSlot=(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(slotId,pageName){var res,slotRes,slotDelRes,widgetRes,widgetId;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,GraphQLDataUtil().getRecord("pd.getMetaSlideByName",{Name:pageName});case 2:if(!(res=_context.sent)||!res.uid){_context.next=24;break}return _context.next=6,GraphQLDataUtil().getRecord("pd.getMetaSlideSlotById",{Slide:res.uid,slotId:slotId});case 6:if(!(slotRes=_context.sent)||!slotRes.uid){_context.next=24;break}return _context.next=10,GraphQLDataUtil().deleteRecord("pd.deleteMetaSlideSlotById",{id:slotRes.uid});case 10:if(!((slotDelRes=_context.sent)&&slotDelRes.count>0)){_context.next=24;break}return _context.next=14,GraphQLDataUtil().getRecord("pd.getSlideSlotWidgetBySlot",{Slot:slotRes.uid});case 14:if(!((widgetRes=_context.sent)&&Object.keys(widgetRes).length>0)){_context.next=24;break}return widgetId=widgetRes.uid,_context.next=19,GraphQLDataUtil().deleteRecord("pd.deleteWidgetsBySlotId",{Slot:slotRes.uid});case 19:if(_context.sent,!widgetId){_context.next=24;break}return _context.next=23,GraphQLDataUtil().deleteRecord("pd.deleteWidgetPropertyByWidgetId",{Widget:widgetId});case 23:_context.sent;case 24:case"end":return _context.stop()}},_callee,this)})),function(_x,_x2){return _ref.apply(this,arguments)}),this.deletePage=(_ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(activePage,pageId){var pageRes,slotIds,widgetIds;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!(activePage&&pageId.length>10)){_context2.next=24;break}return _context2.next=3,GraphQLDataUtil().deleteRecord("pd.deleteMetaSlideById",{id:pageId});case 3:if(!((pageRes=_context2.sent)&&pageRes.count>0)){_context2.next=24;break}return _context2.next=7,GraphQLDataUtil().deleteRecord("pd.deleteMetaSlideProps",{PropsSlide:pageId});case 7:return _context2.sent,slotIds=[],widgetIds=[],Object.keys(activePage.slots).forEach(function(slotId){slotIds.push({id:slotId})}),_context2.next=13,GraphQLDataUtil().deleteMultiple("pd.deleteMetaSlideSlotById",slotIds);case 13:return _context2.sent,Object.keys(activePage.widgets).forEach(function(widetId){widgetIds.push({id:widetId})}),_context2.next=17,GraphQLDataUtil().deleteMultiple("pd.deleteMetaSlideSlotWidgetById",widgetIds);case 17:return _context2.sent,_context2.next=20,GraphQLDataUtil().deleteMultiple("pd.deleteWidgetPropertyByWidgetId",widgetIds);case 20:return _context2.sent,_context2.next=23,GraphQLDataUtil().deleteMultiple("pd.deleteWidgetActionByWidgetId",widgetIds);case 23:_context2.sent;case 24:case"end":return _context2.stop()}},_callee2,this)})),function(_x3,_x4){return _ref2.apply(this,arguments)})}}.PageDesignerUtil),_export("PageDesignerUtil",PageDesignerUtil),_export("default",PageDesignerUtil)}}}),System.register("component/studio/PageDesignerWidget.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","client/script/studio/PageDesignerUtil.js","carbon-components-react","@carbon/icons-react/lib/text--align--justify/32","@carbon/icons-react/lib/caret--sort--down/32","@carbon/icons-react/lib/calendar/32","@carbon/icons-react/lib/time/32","@carbon/icons-react/lib/radio-button--checked/32","@carbon/icons-react/lib/checkbox--checked--filled/32","@carbon/icons-react/lib/document--blank/32","@carbon/icons-react/lib/link/32","@carbon/icons-react/lib/page--first/32","@carbon/icons-react/lib/list/32","@carbon/icons-react/lib/image/32","@carbon/icons-react/lib/dashboard/32","@carbon/icons-react/lib/recording/32","@carbon/icons-react/lib/panel-expansion/32","@carbon/icons-react/lib/search/32","@carbon/icons-react/lib/open-panel--filled--left/32","@carbon/icons-react/lib/new-tab/32","@carbon/icons-react/lib/carousel--horizontal/32","@carbon/icons-react/lib/idea/32","@carbon/icons-react/lib/chart--line/32","@carbon/icons-react/lib/code/32"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,PageDesignerUtil,Select,SelectItem,TextArea,SelectIcon,Date,Time,Radio,Checkbox,Toggle,File,Link,Page,List,Image,Board,Loading,NavigateButtons,RecordLookup,SideNav,Tabs,Carousel,Idea,Chart,HTMLCode,_PageDesignerWidget_,PageDesignerWidget,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_clientScriptStudioPageDesignerUtilJs){PageDesignerUtil=_clientScriptStudioPageDesignerUtilJs.PageDesignerUtil},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_carbonIconsReactLibTextAlignJustify){TextArea=_carbonIconsReactLibTextAlignJustify.default},function(_carbonIconsReactLibCaretSortDown){SelectIcon=_carbonIconsReactLibCaretSortDown.default},function(_carbonIconsReactLibCalendar){Date=_carbonIconsReactLibCalendar.default},function(_carbonIconsReactLibTime){Time=_carbonIconsReactLibTime.default},function(_carbonIconsReactLibRadioButtonChecked){Radio=_carbonIconsReactLibRadioButtonChecked.default},function(_carbonIconsReactLibCheckboxCheckedFilled){Checkbox=_carbonIconsReactLibCheckboxCheckedFilled.default,Toggle=_carbonIconsReactLibCheckboxCheckedFilled.default},function(_carbonIconsReactLibDocumentBlank){File=_carbonIconsReactLibDocumentBlank.default},function(_carbonIconsReactLibLink){Link=_carbonIconsReactLibLink.default},function(_carbonIconsReactLibPageFirst){Page=_carbonIconsReactLibPageFirst.default},function(_carbonIconsReactLibList){List=_carbonIconsReactLibList.default},function(_carbonIconsReactLibImage){Image=_carbonIconsReactLibImage.default},function(_carbonIconsReactLibDashboard){Board=_carbonIconsReactLibDashboard.default},function(_carbonIconsReactLibRecording){Loading=_carbonIconsReactLibRecording.default},function(_carbonIconsReactLibPanelExpansion){NavigateButtons=_carbonIconsReactLibPanelExpansion.default},function(_carbonIconsReactLibSearch){RecordLookup=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibOpenPanelFilledLeft){SideNav=_carbonIconsReactLibOpenPanelFilledLeft.default},function(_carbonIconsReactLibNewTab){Tabs=_carbonIconsReactLibNewTab.default},function(_carbonIconsReactLibCarouselHorizontal){Carousel=_carbonIconsReactLibCarouselHorizontal.default},function(_carbonIconsReactLibIdea){Idea=_carbonIconsReactLibIdea.default},function(_carbonIconsReactLibChartLine){Chart=_carbonIconsReactLibChartLine.default},function(_carbonIconsReactLibCode){HTMLCode=_carbonIconsReactLibCode.default}],execute:function(){_PageDesignerWidget_=function(_React$Component){function _PageDesignerWidget_(props){_classCallCheck(this,_PageDesignerWidget_);var _this=_possibleConstructorReturn(this,(_PageDesignerWidget_.__proto__||Object.getPrototypeOf(_PageDesignerWidget_)).call(this,props));return _this.palettes=props.palettes?JSON.parse(props.palettes):{},_this.orderedPaletteKeys=Object.keys(_this.palettes).sort(function(a,b){return _this.palettes[a].Name==_this.palettes[b].Name?0:_this.palettes[a].Name>_this.palettes[b].Name?1:-1}),_this.state={currentpalette:_this.orderedPaletteKeys.length>0?_this.orderedPaletteKeys[0]:"",reload:!1},_this}return _inherits(_PageDesignerWidget_,_React$Component),_createClass(_PageDesignerWidget_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.palettes,this.props.palettes)||(this.palettes=this.props.palettes?JSON.parse(this.props.palettes):{},this.setState({reload:!this.state.reload}))}},{key:"getPalatteIcon",value:function(key){var palatteIcon=null;switch(key){case"DividerX":palatteIcon=React.createElement("div",{className:"palatte-horizontal-bar"});break;case"DividerY":palatteIcon=React.createElement("div",{className:"palatte-vertical-bar"});break;case"Title":case"Text":palatteIcon=React.createElement("span",{className:"palatte-text-icon"},"Ab");break;case"TextArea":palatteIcon=React.createElement(TextArea,null);break;case"Select":palatteIcon=React.createElement(SelectIcon,{className:"palatte-select-icon"});break;case"Time":palatteIcon=React.createElement(Time,null);break;case"Date":palatteIcon=React.createElement(Date,null);break;case"Radio":palatteIcon=React.createElement(Radio,null);break;case"Number":palatteIcon=React.createElement("span",{className:"palatte-number-icon"},"3.4");break;case"Checkbox":palatteIcon=React.createElement(Checkbox,null);break;case"Toggle":palatteIcon=React.createElement(Toggle,null);break;case"File":palatteIcon=React.createElement(File,null);break;case"Link":palatteIcon=React.createElement(Link,null);break;case"Page":palatteIcon=React.createElement(Page,null);break;case"List":palatteIcon=React.createElement(List,null);break;case"Image":palatteIcon=React.createElement(Image,null);break;case"Board":palatteIcon=React.createElement(Board,null);break;case"Button":palatteIcon=React.createElement("span",{className:"palatte-button-icon"},"B");break;case"Loading":palatteIcon=React.createElement(Loading,null);break;case"NavigateButton":palatteIcon=React.createElement(NavigateButtons,null);break;case"RecordLookup":palatteIcon=React.createElement(RecordLookup,null);break;case"SideNav":palatteIcon=React.createElement(SideNav,null);break;case"Tabs":palatteIcon=React.createElement(Tabs,null);break;case"Carousel":palatteIcon=React.createElement(Carousel,null);break;case"Chart":palatteIcon=React.createElement(Chart,null);break;case"HtmlCode":palatteIcon=React.createElement(HTMLCode,null);break;default:palatteIcon=React.createElement(Idea,null)}return palatteIcon}},{key:"render",value:function(){var _this2=this,eleDefinitionsPerPalette=new PageDesignerUtil(this.palettes).getElementDefintions(),paletteItemSelect=[];this.orderedPaletteKeys.length>0&&this.orderedPaletteKeys.map(function(paletteKey){_this2.palettes[paletteKey]&&paletteItemSelect.push(React.createElement(SelectItem,{value:_this2.palettes[paletteKey].uid,text:_this2.palettes[paletteKey].Name}))});var paletteItemContents=[],self=this;return Object.keys(eleDefinitionsPerPalette).map(function(paletteId){var eleDefinitions=eleDefinitionsPerPalette[paletteId],paletteItemContent=[];eleDefinitions&&Object.keys(eleDefinitions).length>0&&Object.keys(eleDefinitions).map(function(key){var palatteIcon=self.getPalatteIcon(key);paletteItemContent.push(React.createElement("div",{className:"srs-palatte-item"},React.createElement("div",{className:"palatte-icon"},palatteIcon),React.createElement("div",{className:"grid-stack-item","data-gs-width":eleDefinitions[key].defaultWidget,"data-gs-height":eleDefinitions[key].defaultHeight,"data-element":eleDefinitions[key],"data-gs-min-width":eleDefinitions[key].minWidth,"data-gs-min-height":eleDefinitions[key].minHeight,"data-gs-max-width":eleDefinitions[key].maxWidth,"data-gs-max-height":eleDefinitions[key].maxHeight},React.createElement("div",{className:"grid-stack-item-content widget","data-title":key},key))))}),paletteItemContents.push(React.createElement("div",{style:{display:_this2.state.currentpalette==paletteId?"flex":"none"},className:"srs-palatte-container"},paletteItemContent))}),React.createElement("div",{className:"sr-widget-pane"},React.createElement("style",null,'@import url("component/studio/PageDesignerWidget/Style.css");'),React.createElement(Select,{style:{marginTop:20,marginLeft:50},hideLabel:"true",id:"current_palette",defaultValue:"Form",onChange:function(e){_this2.setState({currentpalette:e.target.value})}},paletteItemSelect),React.createElement("div",{className:"sectionheader gridPalette",style:{marginBottom:30,fontFamily:"cursive",fontSize:"larger",color:"#3C0B0B"}},"Palette"),paletteItemContents&&paletteItemContents.length>0?paletteItemContents:React.createElement("div",null,"Palette is empty!"))}}]),_PageDesignerWidget_}(React.Component),_export("PageDesignerWidget",PageDesignerWidget=function(props){return _PageDesignerWidget_}),_export("PageDesignerWidget",PageDesignerWidget),_export("default",PageDesignerWidget),_export("states",states=[{KeyName:"palettes",AccessPath:"palettes",DefaultValue:'{"palettes": []}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PageRenderer.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.get","lodash.clonedeep","carbon-components-react","@carbon/icons-react/lib/menu/16"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,_PageRenderer_,PageRenderer,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashGet){_lodashGet.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonComponentsReact){_carbonComponentsReact.Tab,_carbonComponentsReact.Tabs,_carbonComponentsReact.OverflowMenu,_carbonComponentsReact.OverflowMenuItem,_carbonComponentsReact.Tag,_carbonComponentsReact.ComboBox},function(_carbonIconsReactLibMenu){_carbonIconsReactLibMenu.default}],execute:function(){_PageRenderer_=function(_React$Component){function _PageRenderer_(){return _classCallCheck(this,_PageRenderer_),_possibleConstructorReturn(this,(_PageRenderer_.__proto__||Object.getPrototypeOf(_PageRenderer_)).apply(this,arguments))}return _inherits(_PageRenderer_,_React$Component),_createClass(_PageRenderer_,[{key:"componentDidMount",value:function(){var pageState=cloneDeep(this.props.pageState)||{};pageState.oneColumn=!1,this.props.updateStore({updates:{pageState:pageState}})}},{key:"render",value:function(){var pageParams=this.props.params?JSON.parse(atob(this.props.params)):{},notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{style_top:"40"}):null;return React.createElement("div",{style:{height:"inherit"}},notificationBar,React.createElement("page-designer-preview",{shadow:!0,style:{height:"inherit"},previewpageid:this.props.pageid,pagesuffix:"",pageparams:JSON.stringify(pageParams),preview:"true",responsive:"true",widgetspacing:"false"}))}}]),_PageRenderer_}(React.Component),_export("PageRenderer",PageRenderer=function(props){return _PageRenderer_}),_export("PageRenderer",PageRenderer),_export("default",PageRenderer),_export("states",states=[{KeyName:"pageState",AccessPath:"pagestate.${pageid}",DefaultValue:'{"pagestate": {"${pageid}": {}}}'},{KeyName:"notifications",AccessPath:"notifications",DefaultValue:'{"notifications": []}'},{KeyName:"pageData",AccessPath:"pages.${pageid}",DefaultValue:'{"pages": {"${pageid}": {}}}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope":  ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PageRenderer/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.get","lodash.clonedeep","carbon-components-react","@carbon/icons-react/lib/menu/16"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,_PageRenderer_,PageRenderer;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashGet){_lodashGet.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonComponentsReact){_carbonComponentsReact.Tab,_carbonComponentsReact.Tabs,_carbonComponentsReact.OverflowMenu,_carbonComponentsReact.OverflowMenuItem,_carbonComponentsReact.Tag,_carbonComponentsReact.ComboBox},function(_carbonIconsReactLibMenu){_carbonIconsReactLibMenu.default}],execute:function(){_PageRenderer_=function(_React$Component){function _PageRenderer_(){return _classCallCheck(this,_PageRenderer_),_possibleConstructorReturn(this,(_PageRenderer_.__proto__||Object.getPrototypeOf(_PageRenderer_)).apply(this,arguments))}return _inherits(_PageRenderer_,_React$Component),_createClass(_PageRenderer_,[{key:"componentDidMount",value:function(){var pageState=cloneDeep(this.props.pageState)||{};pageState.oneColumn=!1,this.props.updateStore({updates:{pageState:pageState}})}},{key:"render",value:function(){var pageParams=this.props.params?JSON.parse(atob(this.props.params)):{},notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",{style_top:"40"}):null;return React.createElement("div",{style:{height:"inherit"}},notificationBar,React.createElement("page-designer-preview",{shadow:!0,style:{height:"inherit"},previewpageid:this.props.pageid,pagesuffix:"",pageparams:JSON.stringify(pageParams),preview:"true",responsive:"true",widgetspacing:"false"}))}}]),_PageRenderer_}(React.Component),_export("PageRenderer",PageRenderer=function(props){return _PageRenderer_}),_export("PageRenderer",PageRenderer)}}}),System.register("component/studio/PlanningBoard.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.get","component/mmf/ComponentWrapper/Definition.js","lodash.clonedeep","lodash.debounce"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,lodashget,ComponentWrapper,debounce,_PlanningBoard_,PlanningBoard,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashGet){lodashget=_lodashGet.default},function(_componentMmfComponentWrapperDefinitionJs){ComponentWrapper=_componentMmfComponentWrapperDefinitionJs.ComponentWrapper},function(_lodashClonedeep){_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){_PlanningBoard_=function(_React$Component){function _PlanningBoard_(props){_classCallCheck(this,_PlanningBoard_);var _this=_possibleConstructorReturn(this,(_PlanningBoard_.__proto__||Object.getPrototypeOf(_PlanningBoard_)).call(this,props));props.shadow&&(window.sd=window.sd||{},window.sd[props.uid]={doc:props.shadow});var data=_this.props.widgetProps&&_this.props.widgetProps.boardData?JSON.parse(_this.props.widgetProps.boardData):null;data=data||(_this.props.boarddata?JSON.parse(_this.props.boarddata):data),_this.state={reload:!1,boardData:data},_this.loadBoardData=_this.loadBoardData.bind(_this),_this.getBoardOperations=_this.getBoardOperations.bind(_this),_this.refreshBoard=_this.refreshBoard.bind(_this),_this.reactTrello=null,_this.updateLanePosition=debounce(function(){$(".smooth-dnd-container.horizontal>.react-trello-lane:first-child",_this.props.shadow).offset().top;var containerOffsetTop=$(".smooth-dnd-container.horizontal",_this.props.shadow).offset().top;$(".smooth-dnd-container.horizontal>.react-trello-lane:first-child",_this.props.shadow).css("top",containerOffsetTop+5)},50),_this.config={};try{_this.config=_this.props.config?JSON.parse(_this.props.config):_this.props.widgetProps&&_this.props.widgetProps.config?JSON.parse(_this.props.widgetProps.config):{}}catch(err){}return _this.defaultValue={lanes:[{id:"todo",title:"Todo",label:"0/0",style:{width:280},cards:[{id:"card1",title:"Do something...",label:"15 mins",description:"Card details"},{id:"card2",title:"Do nothing...",label:"15 mins",description:"Card details"}]},{id:"doing",title:"Doing",label:"0/0",style:{width:280},cards:[{id:"card3",title:"Do everything...",label:"15 mins",description:"Card details"},{id:"card4",title:"Do anything...",label:"15 mins",description:"Card details"}]},{id:"done",title:"Done",label:"0/0",style:{width:280},cards:[]}]},System.import("react-trello").then(function(defaultFn){_this.reactTrello=defaultFn,_this.setState({reload:!_this.state.reload})}),_this}return _inherits(_PlanningBoard_,_React$Component),_createClass(_PlanningBoard_,[{key:"shouldComponentUpdate",value:function(nextProps,nextState){return this.refs.styles&&!this.styles&&(this.styles=this.refs.styles),!(nextProps.scrollfired==this.props.scrollfired&&this.reactTrello&&nextState.reload==this.state.reload&&(!this.props.widgetProps||_.isEqual(this.props.widgetProps,nextProps.widgetProps)))}},{key:"componentDidMount",value:function(){this.refreshBoard({data:!0,laneHeader:!0,laneFooter:!0,addCardLink:!0,card:!0,newCard:!0,newLane:!0})}},{key:"refreshBoard",value:function(reloads){var _this2=this,laneHeaderComponentId=this.props.widgetProps&&this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;(laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null))&&reloads.laneHeader&&$script.getscript("mmf.loadComponent").then(function(_ref){(0,_ref.default)({componentId:laneHeaderComponentId}).then(function(componentData){componentData&&(_this2.laneHeaderComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,keyPropName:"id",config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var laneFooterComponentId=this.props.widgetProps&&this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;(laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null))&&reloads.laneFooter&&$script.getscript("mmf.loadComponent").then(function(_ref2){(0,_ref2.default)({componentId:laneFooterComponentId}).then(function(componentData){componentData&&(_this2.laneFooterComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var cardComponentId=this.props.widgetProps&&this.props.widgetProps.Card?this.props.widgetProps.Card:null;(cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null))&&reloads.card&&$script.getscript("mmf.loadComponent").then(function(_ref3){(0,_ref3.default)({componentId:cardComponentId}).then(function(componentData){componentData&&(_this2.cardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newLaneComponentId=this.props.widgetProps&&this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;(newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null))&&reloads.newLane&&$script.getscript("mmf.loadComponent").then(function(_ref4){(0,_ref4.default)({componentId:newLaneComponentId}).then(function(componentData){componentData&&(_this2.newLaneComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newCardComponentId=this.props.widgetProps&&this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;(newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null))&&reloads.newCard&&$script.getscript("mmf.loadComponent").then(function(_ref5){(0,_ref5.default)({componentId:newCardComponentId}).then(function(componentData){componentData&&(_this2.newCardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var addCardLinkComponentId=this.props.widgetProps&&this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;(addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null))&&reloads.addCardLink&&$script.getscript("mmf.loadComponent").then(function(_ref6){(0,_ref6.default)({componentId:addCardLinkComponentId}).then(function(componentData){componentData&&(_this2.addCardLinkComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config),add_events_on_host:!0},_this2.setState({reload:!_this2.state.reload}))})}),reloads.data&&this.loadBoardData()}},{key:"componentDidUpdate",value:function(prevProps){if(prevProps.scrollfired!=this.props.scrollfired&&this.updateLanePosition(),prevProps.widgetProps&&this.props.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)){var reloads={data:!1,addCardLink:!1,newCard:!1,card:!1,newLane:!1};prevProps.widgetProps.TableName==this.props.widgetProps.TableName&&prevProps.widgetProps.LaneField==this.props.widgetProps.LaneField&&prevProps.widgetProps.BoardFilter==this.props.widgetProps.BoardFilter&&prevProps.widgetProps.FieldMapping==this.props.widgetProps.FieldMapping||(reloads.data=!0),reloads.laneHeader=prevProps.widgetProps.LaneHeader!=this.props.widgetProps.LaneHeader,reloads.laneFooter=prevProps.widgetProps.LaneFooter!=this.props.widgetProps.LaneFooter,reloads.card=prevProps.widgetProps.Card!=this.props.widgetProps.Card,reloads.newCard=prevProps.widgetProps.NewCard!=this.props.widgetProps.NewCard,reloads.addCardLink=prevProps.widgetProps.AddCardLink!=this.props.widgetProps.AddCardLink,reloads.newLane=prevProps.widgetProps.NewLane!=this.props.widgetProps.NewLane,this.refreshBoard(reloads)}}},{key:"loadBoardData",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var _config,tableName,laneField,boardFilter,fieldMapping,reverseFieldMapping,boardData,cardsPerLane,fields,inputParams,self,_this3=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_config=this.config,tableName=_config.tableName,laneField=_config.laneField,boardFilter=_config.boardFilter,fieldMapping=_config.fieldMapping,reverseFieldMapping={},fieldMapping=fieldMapping||[{name:"id",value:"uid"}],tableName&&laneField&&fieldMapping){_context.next=6;break}return this.setState({boardData:this.defaultValue}),_context.abrupt("return");case 6:boardData={lanes:[]},cardsPerLane={},fields=[],fieldMapping.length>0&&fieldMapping.map(function(fieldMapItem,indx){fieldMapItem.name&&fieldMapItem.value&&(-1==fields.indexOf(fieldMapItem.value)&&fields.push(fieldMapItem.value),reverseFieldMapping[fieldMapItem.value]=reverseFieldMapping[fieldMapItem.value]||[],reverseFieldMapping[fieldMapItem.value].push(fieldMapItem.name))}),-1==fields.indexOf("uid")&&fields.push("uid"),-1==fields.indexOf(laneField)&&fields.push(laneField),inputParams={tableName:tableName,fields:fields,filter:boardFilter||{},fieldAliases:null,schema:this.props.schema},self=this,$script.runscript("mmf.getRecords",inputParams).then(function(records){records&&records.map&&records.map(function(recordNode,indx){var record=recordNode.node,card={};record&&Object.keys(record).map(function(recordField,indx){var cardPropNames=reverseFieldMapping[recordField];cardPropNames&&cardPropNames.map(function(cardPropName){card[cardPropName]=record[recordField]}),record.uid&&(card.uid=record.uid,card.id=record.uid)});var laneValue=lodashget(record,laneField);if(laneField.indexOf(".")>-1){var relationName=laneField.split(".")[0];laneValue=laneValue+"@@@@"+lodashget(record,relationName+".uid")}cardsPerLane[laneValue]=cardsPerLane[laneValue]||[],cardsPerLane[laneValue].push(card)}),cardsPerLane&&Object.keys(cardsPerLane).length>0&&Object.keys(cardsPerLane).map(function(laneName,indx){var cards=cardsPerLane[laneName],height=self.props.shadow&&self.props.shadow.host?$(self.props.shadow.host).parent().css("height"):"",style={width:"100rem"};(height=height?parseInt(height.replace("px","")):-1)>-1&&(style.maxHeight=height-20),0==boardData.lanes.length?style.height="3rem":style.height="inherit";var laneId=laneName,laneTitle=laneName;laneName.indexOf("@@@@")>-1&&(laneTitle=laneName.split("@@@@")[0],laneId=laneName.split("@@@@")[1]);var laneObj={id:laneId,title:laneTitle,label:"",style:style,isvertical:0==boardData.lanes.length,laneDropClass:"laneDropping",cards:0==boardData.lanes.length?cards:[]};boardData.lanes.push(laneObj)}),_this3.setState({boardData:boardData})});case 15:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref7.apply(this,arguments)}}()},{key:"getBoardOperations",value:function(){var _this4=this,boardOperations={onCardMoveAcrossLanes:function(srcLaneId,targetLaneId,cardId,addedIndex){_this4.config},onDataChange:function(newData){},onCardClick:function(cardId,metadata,laneId){},onCardAdd:function(card,laneId){},onCardDelete:function(cardId,laneId){},onLaneAdd:function(params){},onLaneDelete:function(laneId){},onLaneUpdate:function(laneId,data){},onLaneClick:function(laneId){}};return boardOperations}},{key:"componentDidUnmount",value:function(){}},{key:"render",value:function(){var cardComponentId=this.props.widgetProps.Card?this.props.widgetProps.Card:null;cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null);var newLaneComponentId=this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null);var newCardComponentId=this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null);var addCardLinkComponentId=this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null);var laneHeaderComponentId=this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null);var laneFooterComponentId=this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null);try{this.config=this.props.config?JSON.parse(this.props.config):this.props.widgetProps&&this.props.widgetProps.config?JSON.parse(this.props.widgetProps.config):{}}catch(err){this.config={}}if(this.config.tableName=this.props.tablename?this.props.tablename:this.props.widgetProps.TableName?this.props.widgetProps.TableName:this.config.tableName,this.config.laneField=this.props.lanefield?this.props.lanefield:this.props.widgetProps.LaneField?this.props.widgetProps.LaneField:this.config.lanefield,this.config.boardFilter=this.props.boardfilter?JSON.parse(this.props.boardfilter):this.props.widgetProps.BoardFilter?this.props.widgetProps.BoardFilter:this.config.boardFilter,this.config.boardFilter=this.config.boardFilter&&"string"==typeof this.config.boardFilter?JSON.parse(this.config.boardFilter):this.config.boardFilter,this.config.fieldMapping=this.props.fieldmapping?JSON.parse(this.props.fieldmapping):this.props.widgetProps.FieldMapping?this.props.widgetProps.FieldMapping:this.config.fieldMapping,this.config.fieldMapping=this.config.fieldMapping&&"string"==typeof this.config.fieldMapping?JSON.parse(this.config.fieldMapping):this.config.fieldMapping,this.config.boardType=this.props.boardtype?this.props.boardtype:this.props.widgetProps.BoardType?this.props.widgetProps.BoardType:this.config.boardType,!this.reactTrello||!this.state.boardData||laneHeaderComponentId&&!this.laneHeaderComponent||laneFooterComponentId&&!this.laneFooterComponent||cardComponentId&&!this.cardComponent||newLaneComponentId&&!this.newLaneComponent||newCardComponentId&&!this.newCardComponent||addCardLinkComponentId&&!this.addCardLinkComponent)return React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});var theme=this.props.widgetProps&&this.props.widgetProps.Theme?this.props.widgetProps.Theme:[{name:"backgroundColor",value:"#6a9f7194"}],styles={};(theme=(theme=theme||this.props.themeprops)&&"string"==typeof theme?JSON.parse(theme):theme)&&theme.length>0&&theme.map(function(themeItem){styles[themeItem.name]=themeItem.value});var laneDraggable="true"==this.props.widgetProps.laneDraggable;laneDraggable=laneDraggable||!this.props.lanedraggable||"true"==this.props.lanedraggable;var cardDraggable="true"==this.props.widgetProps.cardDraggable;cardDraggable=cardDraggable||!this.props.carddraggable||"true"==this.props.carddraggable;var canAddLanes="true"==this.props.widgetProps.cardDraggable;canAddLanes=canAddLanes||!this.props.canaddlanes||"true"==this.props.canaddlanes;var boardProps={laneDraggable:!1,draggable:!1,style:styles,canAddLanes:!1,editable:!1,dropClass:"dropping",dragClass:"dragging",laneDragClass:"laneDragging",laneDropClass:"laneDropping",cardDragClass:"cardDragging",cardDropClass:"cardDropping"};if(cardComponentId){var Card=ComponentWrapper(this.cardComponent);boardProps.components=boardProps.components||{},boardProps.components.Card=Card}if(newLaneComponentId){var NewLane=ComponentWrapper(this.newLaneComponent);boardProps.components=boardProps.components||{},boardProps.components.NewLaneSection=NewLane}if(newCardComponentId){var NewCard=ComponentWrapper(this.newCardComponent);boardProps.components=boardProps.components||{},boardProps.components.NewCardForm=NewCard}if(addCardLinkComponentId){var AddCardLink=ComponentWrapper(this.addCardLinkComponent);boardProps.components=boardProps.components||{},boardProps.components.AddCardLink=AddCardLink}if(laneFooterComponentId){var LaneFooter=ComponentWrapper(this.laneFooterComponent);boardProps.components=boardProps.components||{},boardProps.components.LaneFooter=LaneFooter}if(laneHeaderComponentId){var LaneHeader=ComponentWrapper(this.laneHeaderComponent);boardProps.components=boardProps.components||{},boardProps.components.LaneHeader=LaneHeader}var boardOperations=this.getBoardOperations(),Board=this.reactTrello?this.reactTrello.default:React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});return this.reactTrello?React.createElement("div",{ref:function(e){setTimeout(function(){if($(e).find(".smooth-dnd-container.horizontal")&&1==$(e).find(".smooth-dnd-container.horizontal").length){var height=$(e).find(".smooth-dnd-container.horizontal")[0].getBoundingClientRect().height;$(e).find(".smooth-dnd-container.horizontal>.react-trello-lane:first-child").css("height",height),$(e).find(".smooth-dnd-container.horizontal>.react-trello-lane:first-child>div:first-child").css("height","3rem")}})},className:"Planboard",style:{height:"inherit",overflowY:"hidden"}},React.createElement("style",null,this.styles),React.createElement(Board,_extends({data:this.state.boardData,style:{height:"inherit"},className:"uid_"+this.props.uid+"_uid"},boardProps,boardOperations))):React.createElement("div",null)}}]),_PlanningBoard_}(React.Component),_export("PlanningBoard",PlanningBoard=function(props){return _PlanningBoard_}),_export("PlanningBoard",PlanningBoard),_export("default",PlanningBoard),_export("states",states=[{KeyName:"scrollfired",AccessPath:"scrollfired",DefaultValue:'{"scrollfired": false}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema" : {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PlanningBoard/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.get","component/mmf/ComponentWrapper/Definition.js","lodash.clonedeep","lodash.debounce"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,lodashget,ComponentWrapper,debounce,_PlanningBoard_,PlanningBoard;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashGet){lodashget=_lodashGet.default},function(_componentMmfComponentWrapperDefinitionJs){ComponentWrapper=_componentMmfComponentWrapperDefinitionJs.ComponentWrapper},function(_lodashClonedeep){_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){_PlanningBoard_=function(_React$Component){function _PlanningBoard_(props){_classCallCheck(this,_PlanningBoard_);var _this=_possibleConstructorReturn(this,(_PlanningBoard_.__proto__||Object.getPrototypeOf(_PlanningBoard_)).call(this,props));props.shadow&&(window.sd=window.sd||{},window.sd[props.uid]={doc:props.shadow});var data=_this.props.widgetProps&&_this.props.widgetProps.boardData?JSON.parse(_this.props.widgetProps.boardData):null;data=data||(_this.props.boarddata?JSON.parse(_this.props.boarddata):data),_this.state={reload:!1,boardData:data},_this.loadBoardData=_this.loadBoardData.bind(_this),_this.getBoardOperations=_this.getBoardOperations.bind(_this),_this.refreshBoard=_this.refreshBoard.bind(_this),_this.reactTrello=null,_this.updateLanePosition=debounce(function(){$(".smooth-dnd-container.horizontal>.react-trello-lane:first-child",_this.props.shadow).offset().top;var containerOffsetTop=$(".smooth-dnd-container.horizontal",_this.props.shadow).offset().top;$(".smooth-dnd-container.horizontal>.react-trello-lane:first-child",_this.props.shadow).css("top",containerOffsetTop+5)},50),_this.config={};try{_this.config=_this.props.config?JSON.parse(_this.props.config):_this.props.widgetProps&&_this.props.widgetProps.config?JSON.parse(_this.props.widgetProps.config):{}}catch(err){}return _this.defaultValue={lanes:[{id:"todo",title:"Todo",label:"0/0",style:{width:280},cards:[{id:"card1",title:"Do something...",label:"15 mins",description:"Card details"},{id:"card2",title:"Do nothing...",label:"15 mins",description:"Card details"}]},{id:"doing",title:"Doing",label:"0/0",style:{width:280},cards:[{id:"card3",title:"Do everything...",label:"15 mins",description:"Card details"},{id:"card4",title:"Do anything...",label:"15 mins",description:"Card details"}]},{id:"done",title:"Done",label:"0/0",style:{width:280},cards:[]}]},System.import("react-trello").then(function(defaultFn){_this.reactTrello=defaultFn,_this.setState({reload:!_this.state.reload})}),_this}return _inherits(_PlanningBoard_,_React$Component),_createClass(_PlanningBoard_,[{key:"shouldComponentUpdate",value:function(nextProps,nextState){return this.refs.styles&&!this.styles&&(this.styles=this.refs.styles),!(nextProps.scrollfired==this.props.scrollfired&&this.reactTrello&&nextState.reload==this.state.reload&&(!this.props.widgetProps||_.isEqual(this.props.widgetProps,nextProps.widgetProps)))}},{key:"componentDidMount",value:function(){this.refreshBoard({data:!0,laneHeader:!0,laneFooter:!0,addCardLink:!0,card:!0,newCard:!0,newLane:!0})}},{key:"refreshBoard",value:function(reloads){var _this2=this,laneHeaderComponentId=this.props.widgetProps&&this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;(laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null))&&reloads.laneHeader&&$script.getscript("mmf.loadComponent").then(function(_ref){(0,_ref.default)({componentId:laneHeaderComponentId}).then(function(componentData){componentData&&(_this2.laneHeaderComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,keyPropName:"id",config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var laneFooterComponentId=this.props.widgetProps&&this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;(laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null))&&reloads.laneFooter&&$script.getscript("mmf.loadComponent").then(function(_ref2){(0,_ref2.default)({componentId:laneFooterComponentId}).then(function(componentData){componentData&&(_this2.laneFooterComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var cardComponentId=this.props.widgetProps&&this.props.widgetProps.Card?this.props.widgetProps.Card:null;(cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null))&&reloads.card&&$script.getscript("mmf.loadComponent").then(function(_ref3){(0,_ref3.default)({componentId:cardComponentId}).then(function(componentData){componentData&&(_this2.cardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newLaneComponentId=this.props.widgetProps&&this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;(newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null))&&reloads.newLane&&$script.getscript("mmf.loadComponent").then(function(_ref4){(0,_ref4.default)({componentId:newLaneComponentId}).then(function(componentData){componentData&&(_this2.newLaneComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newCardComponentId=this.props.widgetProps&&this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;(newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null))&&reloads.newCard&&$script.getscript("mmf.loadComponent").then(function(_ref5){(0,_ref5.default)({componentId:newCardComponentId}).then(function(componentData){componentData&&(_this2.newCardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var addCardLinkComponentId=this.props.widgetProps&&this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;(addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null))&&reloads.addCardLink&&$script.getscript("mmf.loadComponent").then(function(_ref6){(0,_ref6.default)({componentId:addCardLinkComponentId}).then(function(componentData){componentData&&(_this2.addCardLinkComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config),add_events_on_host:!0},_this2.setState({reload:!_this2.state.reload}))})}),reloads.data&&this.loadBoardData()}},{key:"componentDidUpdate",value:function(prevProps){if(prevProps.scrollfired!=this.props.scrollfired&&this.updateLanePosition(),prevProps.widgetProps&&this.props.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)){var reloads={data:!1,addCardLink:!1,newCard:!1,card:!1,newLane:!1};prevProps.widgetProps.TableName==this.props.widgetProps.TableName&&prevProps.widgetProps.LaneField==this.props.widgetProps.LaneField&&prevProps.widgetProps.BoardFilter==this.props.widgetProps.BoardFilter&&prevProps.widgetProps.FieldMapping==this.props.widgetProps.FieldMapping||(reloads.data=!0),reloads.laneHeader=prevProps.widgetProps.LaneHeader!=this.props.widgetProps.LaneHeader,reloads.laneFooter=prevProps.widgetProps.LaneFooter!=this.props.widgetProps.LaneFooter,reloads.card=prevProps.widgetProps.Card!=this.props.widgetProps.Card,reloads.newCard=prevProps.widgetProps.NewCard!=this.props.widgetProps.NewCard,reloads.addCardLink=prevProps.widgetProps.AddCardLink!=this.props.widgetProps.AddCardLink,reloads.newLane=prevProps.widgetProps.NewLane!=this.props.widgetProps.NewLane,this.refreshBoard(reloads)}}},{key:"loadBoardData",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var _config,tableName,laneField,boardFilter,fieldMapping,reverseFieldMapping,boardData,cardsPerLane,fields,inputParams,self,_this3=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_config=this.config,tableName=_config.tableName,laneField=_config.laneField,boardFilter=_config.boardFilter,fieldMapping=_config.fieldMapping,reverseFieldMapping={},fieldMapping=fieldMapping||[{name:"id",value:"uid"}],tableName&&laneField&&fieldMapping){_context.next=6;break}return this.setState({boardData:this.defaultValue}),_context.abrupt("return");case 6:boardData={lanes:[]},cardsPerLane={},fields=[],fieldMapping.length>0&&fieldMapping.map(function(fieldMapItem,indx){fieldMapItem.name&&fieldMapItem.value&&(-1==fields.indexOf(fieldMapItem.value)&&fields.push(fieldMapItem.value),reverseFieldMapping[fieldMapItem.value]=reverseFieldMapping[fieldMapItem.value]||[],reverseFieldMapping[fieldMapItem.value].push(fieldMapItem.name))}),-1==fields.indexOf("uid")&&fields.push("uid"),-1==fields.indexOf(laneField)&&fields.push(laneField),inputParams={tableName:tableName,fields:fields,filter:boardFilter||{},fieldAliases:null,schema:this.props.schema},self=this,$script.runscript("mmf.getRecords",inputParams).then(function(records){records&&records.map&&records.map(function(recordNode,indx){var record=recordNode.node,card={};record&&Object.keys(record).map(function(recordField,indx){var cardPropNames=reverseFieldMapping[recordField];cardPropNames&&cardPropNames.map(function(cardPropName){card[cardPropName]=record[recordField]}),record.uid&&(card.uid=record.uid,card.id=record.uid)});var laneValue=lodashget(record,laneField);if(laneField.indexOf(".")>-1){var relationName=laneField.split(".")[0];laneValue=laneValue+"@@@@"+lodashget(record,relationName+".uid")}cardsPerLane[laneValue]=cardsPerLane[laneValue]||[],cardsPerLane[laneValue].push(card)}),cardsPerLane&&Object.keys(cardsPerLane).length>0&&Object.keys(cardsPerLane).map(function(laneName,indx){var cards=cardsPerLane[laneName],height=self.props.shadow&&self.props.shadow.host?$(self.props.shadow.host).parent().css("height"):"",style={width:"100rem"};(height=height?parseInt(height.replace("px","")):-1)>-1&&(style.maxHeight=height-20),0==boardData.lanes.length?style.height="3rem":style.height="inherit";var laneId=laneName,laneTitle=laneName;laneName.indexOf("@@@@")>-1&&(laneTitle=laneName.split("@@@@")[0],laneId=laneName.split("@@@@")[1]);var laneObj={id:laneId,title:laneTitle,label:"",style:style,isvertical:0==boardData.lanes.length,laneDropClass:"laneDropping",cards:0==boardData.lanes.length?cards:[]};boardData.lanes.push(laneObj)}),_this3.setState({boardData:boardData})});case 15:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref7.apply(this,arguments)}}()},{key:"getBoardOperations",value:function(){var _this4=this,boardOperations={onCardMoveAcrossLanes:function(srcLaneId,targetLaneId,cardId,addedIndex){_this4.config},onDataChange:function(newData){},onCardClick:function(cardId,metadata,laneId){},onCardAdd:function(card,laneId){},onCardDelete:function(cardId,laneId){},onLaneAdd:function(params){},onLaneDelete:function(laneId){},onLaneUpdate:function(laneId,data){},onLaneClick:function(laneId){}};return boardOperations}},{key:"componentDidUnmount",value:function(){}},{key:"render",value:function(){var cardComponentId=this.props.widgetProps.Card?this.props.widgetProps.Card:null;cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null);var newLaneComponentId=this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null);var newCardComponentId=this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null);var addCardLinkComponentId=this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null);var laneHeaderComponentId=this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null);var laneFooterComponentId=this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null);try{this.config=this.props.config?JSON.parse(this.props.config):this.props.widgetProps&&this.props.widgetProps.config?JSON.parse(this.props.widgetProps.config):{}}catch(err){this.config={}}if(this.config.tableName=this.props.tablename?this.props.tablename:this.props.widgetProps.TableName?this.props.widgetProps.TableName:this.config.tableName,this.config.laneField=this.props.lanefield?this.props.lanefield:this.props.widgetProps.LaneField?this.props.widgetProps.LaneField:this.config.lanefield,this.config.boardFilter=this.props.boardfilter?JSON.parse(this.props.boardfilter):this.props.widgetProps.BoardFilter?this.props.widgetProps.BoardFilter:this.config.boardFilter,this.config.boardFilter=this.config.boardFilter&&"string"==typeof this.config.boardFilter?JSON.parse(this.config.boardFilter):this.config.boardFilter,this.config.fieldMapping=this.props.fieldmapping?JSON.parse(this.props.fieldmapping):this.props.widgetProps.FieldMapping?this.props.widgetProps.FieldMapping:this.config.fieldMapping,this.config.fieldMapping=this.config.fieldMapping&&"string"==typeof this.config.fieldMapping?JSON.parse(this.config.fieldMapping):this.config.fieldMapping,this.config.boardType=this.props.boardtype?this.props.boardtype:this.props.widgetProps.BoardType?this.props.widgetProps.BoardType:this.config.boardType,!this.reactTrello||!this.state.boardData||laneHeaderComponentId&&!this.laneHeaderComponent||laneFooterComponentId&&!this.laneFooterComponent||cardComponentId&&!this.cardComponent||newLaneComponentId&&!this.newLaneComponent||newCardComponentId&&!this.newCardComponent||addCardLinkComponentId&&!this.addCardLinkComponent)return React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});var theme=this.props.widgetProps&&this.props.widgetProps.Theme?this.props.widgetProps.Theme:[{name:"backgroundColor",value:"#6a9f7194"}],styles={};(theme=(theme=theme||this.props.themeprops)&&"string"==typeof theme?JSON.parse(theme):theme)&&theme.length>0&&theme.map(function(themeItem){styles[themeItem.name]=themeItem.value});var laneDraggable="true"==this.props.widgetProps.laneDraggable;laneDraggable=laneDraggable||!this.props.lanedraggable||"true"==this.props.lanedraggable;var cardDraggable="true"==this.props.widgetProps.cardDraggable;cardDraggable=cardDraggable||!this.props.carddraggable||"true"==this.props.carddraggable;var canAddLanes="true"==this.props.widgetProps.cardDraggable;canAddLanes=canAddLanes||!this.props.canaddlanes||"true"==this.props.canaddlanes;var boardProps={laneDraggable:!1,draggable:!1,style:styles,canAddLanes:!1,editable:!1,dropClass:"dropping",dragClass:"dragging",laneDragClass:"laneDragging",laneDropClass:"laneDropping",cardDragClass:"cardDragging",cardDropClass:"cardDropping"};if(cardComponentId){var Card=ComponentWrapper(this.cardComponent);boardProps.components=boardProps.components||{},boardProps.components.Card=Card}if(newLaneComponentId){var NewLane=ComponentWrapper(this.newLaneComponent);boardProps.components=boardProps.components||{},boardProps.components.NewLaneSection=NewLane}if(newCardComponentId){var NewCard=ComponentWrapper(this.newCardComponent);boardProps.components=boardProps.components||{},boardProps.components.NewCardForm=NewCard}if(addCardLinkComponentId){var AddCardLink=ComponentWrapper(this.addCardLinkComponent);boardProps.components=boardProps.components||{},boardProps.components.AddCardLink=AddCardLink}if(laneFooterComponentId){var LaneFooter=ComponentWrapper(this.laneFooterComponent);boardProps.components=boardProps.components||{},boardProps.components.LaneFooter=LaneFooter}if(laneHeaderComponentId){var LaneHeader=ComponentWrapper(this.laneHeaderComponent);boardProps.components=boardProps.components||{},boardProps.components.LaneHeader=LaneHeader}var boardOperations=this.getBoardOperations(),Board=this.reactTrello?this.reactTrello.default:React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});return this.reactTrello?React.createElement("div",{ref:function(e){setTimeout(function(){if($(e).find(".smooth-dnd-container.horizontal")&&1==$(e).find(".smooth-dnd-container.horizontal").length){var height=$(e).find(".smooth-dnd-container.horizontal")[0].getBoundingClientRect().height;$(e).find(".smooth-dnd-container.horizontal>.react-trello-lane:first-child").css("height",height),$(e).find(".smooth-dnd-container.horizontal>.react-trello-lane:first-child>div:first-child").css("height","3rem")}})},className:"Planboard",style:{height:"inherit",overflowY:"hidden"}},React.createElement("style",null,this.styles),React.createElement(Board,_extends({data:this.state.boardData,style:{height:"inherit"},className:"uid_"+this.props.uid+"_uid"},boardProps,boardOperations))):React.createElement("div",null)}}]),_PlanningBoard_}(React.Component),_export("PlanningBoard",PlanningBoard=function(props){return _PlanningBoard_}),_export("PlanningBoard",PlanningBoard)}}}),System.register("component/studio/PlanningBoardLaneHeader.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_PlanningBoardLaneHeader_,PlanningBoardLaneHeader,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_PlanningBoardLaneHeader_=function(_React$Component){function _PlanningBoardLaneHeader_(props){return _classCallCheck(this,_PlanningBoardLaneHeader_),_possibleConstructorReturn(this,(_PlanningBoardLaneHeader_.__proto__||Object.getPrototypeOf(_PlanningBoardLaneHeader_)).call(this,props))}return _inherits(_PlanningBoardLaneHeader_,_React$Component),_createClass(_PlanningBoardLaneHeader_,[{key:"render",value:function(){return!!this.props.isvertical&&("string"==typeof this.props.isvertical?Boolean("true"==this.props.isvertical):!!this.props.isvertical)?React.createElement("div",{style:{height:"3rem",display:"flex"}},React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Name"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Category"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Estimates")):React.createElement("div",{style:{height:"inherit",display:"flex",alignItems:"center"}},React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"20%"}},"Team1"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Capacity: 34"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"40%",display:"inline-flex",height:"inherit",alignItems:"center"}},React.createElement("div",{style:{width:"60%",height:"30%",backgroundColor:"darkblue"}}),React.createElement("div",{style:{width:"60%",height:"30%",backgroundColor:"pink"}})))}}]),_PlanningBoardLaneHeader_}(React.Component),_export("PlanningBoardLaneHeader",PlanningBoardLaneHeader=function(props){return _PlanningBoardLaneHeader_}),_export("PlanningBoardLaneHeader",PlanningBoardLaneHeader),_export("default",PlanningBoardLaneHeader),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PlanningBoardLaneHeader/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_PlanningBoardLaneHeader_,PlanningBoardLaneHeader;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_PlanningBoardLaneHeader_=function(_React$Component){function _PlanningBoardLaneHeader_(props){return _classCallCheck(this,_PlanningBoardLaneHeader_),_possibleConstructorReturn(this,(_PlanningBoardLaneHeader_.__proto__||Object.getPrototypeOf(_PlanningBoardLaneHeader_)).call(this,props))}return _inherits(_PlanningBoardLaneHeader_,_React$Component),_createClass(_PlanningBoardLaneHeader_,[{key:"render",value:function(){return!!this.props.isvertical&&("string"==typeof this.props.isvertical?Boolean("true"==this.props.isvertical):!!this.props.isvertical)?React.createElement("div",{style:{height:"3rem",display:"flex"}},React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Name"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Category"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Estimates")):React.createElement("div",{style:{height:"inherit",display:"flex",alignItems:"center"}},React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"20%"}},"Team1"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Capacity: 34"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"40%",display:"inline-flex",height:"inherit",alignItems:"center"}},React.createElement("div",{style:{width:"60%",height:"30%",backgroundColor:"darkblue"}}),React.createElement("div",{style:{width:"60%",height:"30%",backgroundColor:"pink"}})))}}]),_PlanningBoardLaneHeader_}(React.Component),_export("PlanningBoardLaneHeader",PlanningBoardLaneHeader=function(props){return _PlanningBoardLaneHeader_}),_export("PlanningBoardLaneHeader",PlanningBoardLaneHeader)}}}),System.register("component/studio/PreviewComponent.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/close/32","component/studio/ErrorBoundary/Definition.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Close32,ErrorBoundary,_PreviewComponent_,PreviewComponent,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary}],execute:function(){_PreviewComponent_=function(_React$Component){function _PreviewComponent_(props){_classCallCheck(this,_PreviewComponent_);var _this=_possibleConstructorReturn(this,(_PreviewComponent_.__proto__||Object.getPrototypeOf(_PreviewComponent_)).call(this,props));return _this.getPreviewPane=_this.getPreviewPane.bind(_this),_this.getComponentToRender=_this.getComponentToRender.bind(_this),_this.cancelPreview=_this.cancelPreview.bind(_this),_this.showPreview=_this.showPreview.bind(_this),_this.hidePreview=_this.hidePreview.bind(_this),_this.state={reload:!1},_this}return _inherits(_PreviewComponent_,_React$Component),_createClass(_PreviewComponent_,[{key:"componentDidMount",value:function(){this.showPreview()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showpreview!=this.props.showpreview&&this.setState({reload:!this.state.reload})}},{key:"showPreview",value:function(){this.props.updateStore&&!this.props.showpreview&&this.props.updateStore({updates:{showpreview:!0}})}},{key:"hidePreview",value:function(){this.props.updateStore&&this.props.updateStore({updates:{showpreview:"false",showpreview_target:this.props.target,ide_reload:!this.props.ide_reload}})}},{key:"getComponentToRender",value:function(){return React.createElement("div",{style:{position:"fixed",top:"16%",left:"20%",backgroundColor:"white",zIndex:9999,marginTop:5,border:"1px solid #848484",padding:5,width:"60%",height:"60%",overflow:"scroll"}},React.createElement("slot",null))}},{key:"getPreviewPane",value:function(){var content2Preview=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(content2Preview);return React.createElement("div",null,React.createElement("div",{style:{position:"fixed",backgroundColor:"#000000",opacity:.5,zIndex:9999,top:0,left:0,height:2e3,width:2e3}}),React.createElement(Close32,{className:"cancelPreview",style:{position:"fixed",zIndex:99999,backgroundColor:"white",top:"15%",float:"right",border:"1px solid black",borderRadius:"50%",right:"19%",color:"black"},onClick:this.cancelPreview}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.hidePreview()}},{key:"render",value:function(){var previewContent=this.getPreviewPane(),notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",null):null;return 1==this.props.showpreview||"true"==this.props.showpreview?React.createElement("div",null,notificationBar,previewContent):null}}]),_PreviewComponent_}(React.Component),_export("PreviewComponent",PreviewComponent=function(props){return _PreviewComponent_}),_export("PreviewComponent",PreviewComponent),_export("default",PreviewComponent),_export("states",states=[{KeyName:"ide_reload",AccessPath:"ide_reload",DefaultValue:'{"ide_reload": false}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": "false"}'},{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PreviewErrorPage.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_PreviewErrorPage,PreviewErrorPage,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_PreviewErrorPage=function(_React$Component){function _PreviewErrorPage(props,context){_classCallCheck(this,_PreviewErrorPage);var _this=_possibleConstructorReturn(this,(_PreviewErrorPage.__proto__||Object.getPrototypeOf(_PreviewErrorPage)).call(this,props));return _this.state={hasError:!1,error:""},_this}return _inherits(_PreviewErrorPage,_React$Component),_createClass(_PreviewErrorPage,[{key:"componentDidCatch",value:function(error,info){console.log("Error occurred - "+error),this.setState({hasError:!0,error:error})}},{key:"render",value:function(){return this.state.hasError?React.createElement("div",null,React.createElement("h2",null,"Something went wrong!"),this.state.error):this.props.children}}]),_PreviewErrorPage}(React.Component),_export("PreviewErrorPage",PreviewErrorPage=function(props){return _PreviewErrorPage}),_export("PreviewErrorPage",PreviewErrorPage),_export("default",PreviewErrorPage),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/PreviewErrorPage/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_PreviewErrorPage,PreviewErrorPage;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_PreviewErrorPage=function(_React$Component){function _PreviewErrorPage(props,context){_classCallCheck(this,_PreviewErrorPage);var _this=_possibleConstructorReturn(this,(_PreviewErrorPage.__proto__||Object.getPrototypeOf(_PreviewErrorPage)).call(this,props));return _this.state={hasError:!1,error:""},_this}return _inherits(_PreviewErrorPage,_React$Component),_createClass(_PreviewErrorPage,[{key:"componentDidCatch",value:function(error,info){console.log("Error occurred - "+error),this.setState({hasError:!0,error:error})}},{key:"render",value:function(){return this.state.hasError?React.createElement("div",null,React.createElement("h2",null,"Something went wrong!"),this.state.error):this.props.children}}]),_PreviewErrorPage}(React.Component),_export("PreviewErrorPage",PreviewErrorPage=function(props){return _PreviewErrorPage}),_export("PreviewErrorPage",PreviewErrorPage)}}}),System.register("component/studio/ShowFieldMappingDialog.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32"],function(_export,_context4){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,FormGroup,RadioButtonGroup,RadioButton,Select,SelectItem,TextInput,AddAlt20,SubAlt20,_ShowFieldMappingDialog_,ShowFieldMappingDialog,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Breadcrumb,_carbonComponentsReact.BreadcrumbItem,Button=_carbonComponentsReact.Button,FormGroup=_carbonComponentsReact.FormGroup,RadioButtonGroup=_carbonComponentsReact.RadioButtonGroup,RadioButton=_carbonComponentsReact.RadioButton,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default}],execute:function(){_ShowFieldMappingDialog_=function(_React$Component){function _ShowFieldMappingDialog_(props){_classCallCheck(this,_ShowFieldMappingDialog_);var _this=_possibleConstructorReturn(this,(_ShowFieldMappingDialog_.__proto__||Object.getPrototypeOf(_ShowFieldMappingDialog_)).call(this,props));return _this.state={templateChanged:!1,selectedField:null,selectedRelationShip:null,targetModel:null,foreignKey:null,relationShipcreated:!1,modelCreated:!1,fieldList:[{id:"",type:""}],currentBreadCrumbPath:{}},_this.handleConfigurationChange=_this.handleConfigurationChange.bind(_this),_this.handleCancel=_this.handleCancel.bind(_this),_this.getBreadCrumb=_this.getBreadCrumb.bind(_this),_this.updateSchema=_this.updateSchema.bind(_this),_this.getModelName=_this.getModelName.bind(_this),_this.breadCrumbPaths={home:[{name:"",value:""}],existing_field:[{name:"field_selection",value:"Field Selection"}],new_field:[{name:"new_field",value:"Create and select Field"}],existing_relation:[{name:"existing_relation",value:"Field Selection from relationship"}],new_relation_existing_model:[{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],new_relation_new_model:[{name:"create_model",value:"Create Model"},{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}]},_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this}return _inherits(_ShowFieldMappingDialog_,_React$Component),_createClass(_ShowFieldMappingDialog_,[{key:"handleConfigurationChange",value:function(e){this.optionSelected=e.target.value}},{key:"handleNext",value:function(){this.optionSelected?this.setState({templateChanged:!0,currentBreadCrumbPath:{key:this.optionSelected,stage:this.breadCrumbPaths[this.optionSelected][0].name}}):this.props.addErrorMessage({title:"Error - ",subtitle:"Please select one of the available choices"})}},{key:"handleSelect",value:function(){}},{key:"handleCancel",value:function(){this.props.updateStore({updates:{showpreview:!1}})}},{key:"removeField",value:function(index){var fields=this.state.fieldList;fields.splice(index,1),this.setState({fieldList:fields})}},{key:"addField",value:function(){var fieldList=this.state.fieldList;fieldList.push({id:"",datatype:""}),this.setState({fieldList:fieldList})}},{key:"getModelName",value:function(name,scope){return"mmf"==scope&&name.startsWith("Meta")?name:name+"_"+scope}},{key:"getNewRelationShipWithNewModel",value:function(){var _this2=this,template=null;if(this.state.modelCreated)template=this.getNewRelationShipWithExistingModel(this.getModelName(this.state.modelName,this.state.modelScope));else{var fieldList=[],length=this.state.fieldList.length;this.state.fieldList.forEach(function(field,indx){var element=React.createElement("div",{className:"field-create"},React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){(fieldList=_this2.state.fieldList)[indx].id=e.target.value,_this2.setState({fieldList:fieldList})}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){(fieldList=_this2.state.fieldList)[indx].datatype=e.target.value,_this2.setState({fieldList:fieldList})}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(indx){_this2.removeField(indx)}}):null," ",React.createElement(AddAlt20,{onClick:function(e){_this2.addField()}}));fieldList.push(element)}),template=React.createElement("div",null,React.createElement(TextInput,{placeholder:"Model Name",onChange:function(e){_this2.setState({modelName:e.target.value})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",onChange:function(e){_this2.setState({modelScope:e.target.value})}})," ",React.createElement("br",null),fieldList.map(function(element){return element}),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this2.optionSelected="home",_this2.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){_this2.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){var _ref,self=_this2;$qry.waituntil("model.upsert",_this2.getModelName(_this2.state.modelName,_this2.state.modelScope)).then((_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(result){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,self.updateSchema();case 2:_this2.setState({modelCreated:!0});case 3:case"end":return _context.stop()}},_callee,_this2)})),function(_x){return _ref.apply(this,arguments)})),$script.getscript("createModel").then(function(_ref2){(0,_ref2.default)(_this2.state.modelName,_this2.state.modelScope,_this2.state.fieldList).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+_this2.state.modelName+"_"+_this2.state.modelScope+" updated."})})})}},"Create")))}return template}},{key:"updateSchema",value:function(){var _this3=this;return new Promise(function(resolve,reject){var self=_this3;$script.runAtServer("mmf.getSchemaData").then(function(schemaData){self.props.updateStore({updates:{schema:schemaData}}),resolve()})})}},{key:"getNewRelationShipWithExistingModel",value:function(modelNameValue){var _this4=this,tableItems=[];tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables&&this.props.schemaTables.map(function(schemaTable,indx){tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTable}))});var targetModelFields=this.props.schemaFields?this.props.schemaFields:[],targetModel=modelNameValue||this.state.targetModel;targetModelFields=targetModelFields.filter(function(item){return item.parent==targetModel&&"field"==item.type});var targetModelFieldItems=[];targetModelFieldItems.push(React.createElement(SelectItem,{value:"none",text:"Select Field"})),targetModelFields.map(function(item){targetModelFieldItems.push(React.createElement(SelectItem,{value:item.id,text:item.text}))});var targetModelWidget=null;return targetModelWidget=modelNameValue?React.createElement(TextInput,{placeholder:"Target Model",value:modelNameValue}):React.createElement(Select,{labelText:"Target Model",onChange:function(e){_this4.setState({targetModel:e.target.value})}},tableItems),React.createElement("div",null,this.state.relationShipcreated?this.getExistingFieldsTemplate(!0,targetModel):React.createElement(React.Fragment,null,React.createElement(TextInput,{placeholder:"Source Model",value:this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),disabled:!0})," ",React.createElement("br",null),targetModelWidget,React.createElement("br",null),React.createElement(TextInput,{placeholder:"Relatinship Name",onChange:function(e){_this4.setState({relationshipName:e.target.value})}})," ",React.createElement("br",null),React.createElement(Select,{labelText:"Foreign Key",onChange:function(e){_this4.setState({foreignKey:e.target.value})}},targetModelFieldItems),React.createElement("br",null),React.createElement(TextInput,{placeholder:"Alias",onChange:function(e){_this4.setState({relationship_alias:e.target.value})}})," ",React.createElement("br",null),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this4.optionSelected="home",_this4.handleNext()}},"Home"),React.createElement(Button,{onClick:function(){_this4.handleCancel()}},"Cancel"),React.createElement(Button,{onClick:function(){var _ref3,self=_this4;$qry.waituntil("relationship.upsert",_this4.state.relationshipName).then((_ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(result){var active_widget_temp_field_value;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,self.updateSchema();case 2:self.setState({relationShipcreated:!0}),(active_widget_temp_field_value=self.props.active_widget_temp_field_value&&self.props.active_widget_temp_field_value.length>0?self.props.active_widget_temp_field_value:[]).push(self.state.relationship_alias),self.props.updateStore({updates:{active_widget_temp_field_value:active_widget_temp_field_value}});case 6:case"end":return _context2.stop()}},_callee2,_this4)})),function(_x2){return _ref3.apply(this,arguments)})),$script.getscript("mmf.createRelationship").then(function(_ref4){var createRelationshipFn=_ref4.default,sourceModelNameValue=self.getModelName(self.props.activePage.model,self.props.activePage.modelscope);createRelationshipFn(self.state.relationshipName,sourceModelNameValue,targetModel,"belongsTo",self.state.foreignKey,self.state.relationship_alias).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Relationship "+self.state.relationshipName+" created."})})})}},"Create"))))}},{key:"getExistingRelationShipTemplate",value:function(){var _this5=this,relationships=this.props.schemaFields?this.props.schemaFields:[],modelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);relationships=relationships.filter(function(item){return item.parent==modelNameValue&&"one2one"==item.type});var selectedRelationships=[],selectedField=null,selectedFieldInfo=null;if(selectedRelationships.push(React.createElement(SelectItem,{value:"none",text:"Select Relationship"})),relationships.map(function(item){selectedRelationships.push(React.createElement(SelectItem,{value:item.to+"@@"+item.text,text:item.text}))}),this.state.selectedRelationShip){var fieldsInRelatedModel=this.props.schemaFields?this.props.schemaFields:[];fieldsInRelatedModel=fieldsInRelatedModel.filter(function(item){return item.parent==_this5.state.selectedRelationShip.table&&"field"==item.type});var selectFieldsInRelatedModel=[];selectFieldsInRelatedModel.push(React.createElement(SelectItem,{value:"none",text:"Select Fields"})),fieldsInRelatedModel.map(function(item){selectFieldsInRelatedModel.push(React.createElement(SelectItem,{value:item.text+"@@"+item.datatype,text:item.text}))}),selectedField=React.createElement(Select,{labelText:"Select Fields",onChange:function(e){e.target.value&&e.target.value.indexOf("@@")>-1&&_this5.setState({selectedField:{name:e.target.value.split("@@")[0],datatype:e.target.value.split("@@")[1]}})}},selectFieldsInRelatedModel)}return this.state.selectedField&&(selectedFieldInfo=React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected RelationShip"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedRelationShip.table)),React.createElement("br",null),React.createElement("h4",null,"Selected Field"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedField.name),React.createElement("li",null,"Type : ",this.state.selectedField.datatype)))),React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Select Relationship",onChange:function(e){e.target.value&&e.target.value.indexOf("@@")>-1&&_this5.setState({selectedRelationShip:{table:e.target.value.split("@@")[0],name:e.target.value.split("@@")[1]}})}},selectedRelationships),selectedField,selectedFieldInfo,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this5.optionSelected="home",_this5.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this5.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this5.props.updateStore({updates:{active_widget_temp_field_value:[],active_widget_field_value:"@@["+[_this5.state.selectedRelationShip.name,_this5.state.selectedField.name].join(".")+"]",showpreview:!1}})}},"Select")))}},{key:"getNewFieldTemplate",value:function(){var _this6=this;return React.createElement(React.Fragment,null,React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){_this6.setState({fieldName:e.target.value})}})," ",React.createElement("br",null),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){_this6.setState({fieldType:e.target.value})}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"}))," ",React.createElement("br",null),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this6.optionSelected="home",_this6.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var _ref5,self=_this6;$qry.waituntil("model.upsert",_this6.getModelName(_this6.props.activePage.model,_this6.props.activePage.modelscope)).then((_ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(result){return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,self.updateSchema();case 2:_this6.props.updateStore({updates:{active_widget_field_value:"@@["+_this6.state.fieldName+"]",active_widget_temp_field_value:[],showpreview:!1}});case 3:case"end":return _context3.stop()}},_callee3,_this6)})),function(_x3){return _ref5.apply(this,arguments)})),$script.getscript("addFields2Model").then(function(_ref6){(0,_ref6.default)(_this6.props.activePage.model,_this6.props.activePage.modelscope,[{name:_this6.state.fieldName,type:_this6.state.fieldType}]).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+_this6.props.activePage.model+" updated."})})})}},"Create & Select")))}},{key:"getExistingFieldsTemplate",value:function(fromRelationShip,relationshipModelName){var _this7=this,items=this.props.schemaFields?this.props.schemaFields:[],targetModelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);fromRelationShip&&(targetModelNameValue=relationshipModelName),items=items.filter(function(item){return item.parent==targetModelNameValue&&"field"==item.type});var selectItems=[];return selectItems.push(React.createElement(SelectItem,{value:"none",text:"Select Field"})),items.map(function(item){selectItems.push(React.createElement(SelectItem,{value:item.id,text:item.text}))}),React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Select Fields",onChange:function(e){_this7.setState({selectedField:e.target.value})},id:"selectfield"},selectItems),this.state.selectedField?React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected Field"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedField),React.createElement("li",null,"Type : String"))):null,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this7.optionSelected="home",_this7.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this7.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var active_widget_field_value="";if(_this7.props.active_widget_temp_field_value&&_this7.props.active_widget_temp_field_value.length>0)_this7.props.active_widget_temp_field_value.push(_this7.state.selectedField),active_widget_field_value="@@["+_this7.props.active_widget_temp_field_value.join(".")+"]";else if(active_widget_field_value&&active_widget_field_value.indexOf("@@[")>-1){var propVal=active_widget_field_value.split("@@[")[1];(propVal=(propVal=propVal.substr(0,propVal.length-1)).split(".")).push(_this7.state.selectedField),active_widget_field_value="@@["+propVal.join(".")+"]"}else active_widget_field_value="@@["+_this7.state.selectedField+"]";_this7.props.updateStore({updates:{active_widget_field_value:active_widget_field_value,active_widget_temp_field_value:[],showpreview:!1}})}},"Select")))}},{key:"getDefaultTemplate",value:function(){var _this8=this;return React.createElement(React.Fragment,null,React.createElement(FormGroup,{legendText:"Choose a configuration from below options to select the field - "},React.createElement(RadioButtonGroup,{defaultSelected:"item1",legend:"Select from - ",orientation:"vertical"},React.createElement(RadioButton,{value:"existing_field",labelText:"Existing field",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"new_field",labelText:"New field",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"existing_relation",labelText:"Existing relationship",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"new_relation_existing_model",labelText:"New relationship with Existing model",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"new_relation_new_model",labelText:"New relationship with New model",onClick:this.handleConfigurationChange}))),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this8.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this8.handleNext()}},"Next")))}},{key:"getTemplate",value:function(){var template=null;switch(this.optionSelected){case"existing_field":template=this.getExistingFieldsTemplate();break;case"new_field":template=this.getNewFieldTemplate();break;case"existing_relation":template=this.getExistingRelationShipTemplate();break;case"new_relation_existing_model":template=this.getNewRelationShipWithExistingModel();break;case"new_relation_new_model":template=this.getNewRelationShipWithNewModel();break;case"home":default:template=this.getDefaultTemplate()}return template}},{key:"getBreadCrumb",value:function(){var breadCrumbKey=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.key:"",breadCrumbStage=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.stage:"",breadCrumbElements=[];return breadCrumbKey&&"home"!=breadCrumbKey?(breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,"Choose a configuration"))),this.breadCrumbPaths[breadCrumbKey].map(function(breadCrumbItem,indx){breadCrumbItem.name==breadCrumbStage?breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,breadCrumbItem.value))):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,breadCrumbItem.value)))})):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,"Choose a configuration"))),breadCrumbElements}},{key:"render",value:function(){var template=this.getTemplate(),breadCrumb=this.getBreadCrumb();return React.createElement("div",{style:{padding:20}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ShowFieldMappingDialog/Style.css");'),React.createElement("nav",{class:"bx--breadcrumb bx--breadcrumb--no-trailing-slash","aria-label":"breadcrumb"},breadCrumb),React.createElement("div",{className:"rel-options"},template))}}]),_ShowFieldMappingDialog_}(React.Component),_export("ShowFieldMappingDialog",ShowFieldMappingDialog=function(props){return _ShowFieldMappingDialog_}),_export("ShowFieldMappingDialog",ShowFieldMappingDialog),_export("default",ShowFieldMappingDialog),_export("states",states=[{KeyName:"active_widget_temp_field_value",AccessPath:"active_widget_temp_field_value",DefaultValue:'{"active_widget_temp_field_value":[]}'},{KeyName:"active_widget_field_value",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}.props.FieldName",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {"${active_widget_id}": {"props": {"FieldName": ""}}}}}}'},{KeyName:"schemaTables",AccessPath:"schema.tables",DefaultValue:'{"schema": {"tables": []}}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id": ""}'},{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"schemaFields",AccessPath:"schema.fields",DefaultValue:'{"schema": {"fields": []}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema": {}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/ShowFieldMappingDialog/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32"],function(_export,_context4){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,FormGroup,RadioButtonGroup,RadioButton,Select,SelectItem,TextInput,AddAlt20,SubAlt20,_ShowFieldMappingDialog_,ShowFieldMappingDialog;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Breadcrumb,_carbonComponentsReact.BreadcrumbItem,Button=_carbonComponentsReact.Button,FormGroup=_carbonComponentsReact.FormGroup,RadioButtonGroup=_carbonComponentsReact.RadioButtonGroup,RadioButton=_carbonComponentsReact.RadioButton,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default}],execute:function(){_ShowFieldMappingDialog_=function(_React$Component){function _ShowFieldMappingDialog_(props){_classCallCheck(this,_ShowFieldMappingDialog_);var _this=_possibleConstructorReturn(this,(_ShowFieldMappingDialog_.__proto__||Object.getPrototypeOf(_ShowFieldMappingDialog_)).call(this,props));return _this.state={templateChanged:!1,selectedField:null,selectedRelationShip:null,targetModel:null,foreignKey:null,relationShipcreated:!1,modelCreated:!1,fieldList:[{id:"",type:""}],currentBreadCrumbPath:{}},_this.handleConfigurationChange=_this.handleConfigurationChange.bind(_this),_this.handleCancel=_this.handleCancel.bind(_this),_this.getBreadCrumb=_this.getBreadCrumb.bind(_this),_this.updateSchema=_this.updateSchema.bind(_this),_this.getModelName=_this.getModelName.bind(_this),_this.breadCrumbPaths={home:[{name:"",value:""}],existing_field:[{name:"field_selection",value:"Field Selection"}],new_field:[{name:"new_field",value:"Create and select Field"}],existing_relation:[{name:"existing_relation",value:"Field Selection from relationship"}],new_relation_existing_model:[{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],new_relation_new_model:[{name:"create_model",value:"Create Model"},{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}]},_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this}return _inherits(_ShowFieldMappingDialog_,_React$Component),_createClass(_ShowFieldMappingDialog_,[{key:"handleConfigurationChange",value:function(e){this.optionSelected=e.target.value}},{key:"handleNext",value:function(){this.optionSelected?this.setState({templateChanged:!0,currentBreadCrumbPath:{key:this.optionSelected,stage:this.breadCrumbPaths[this.optionSelected][0].name}}):this.props.addErrorMessage({title:"Error - ",subtitle:"Please select one of the available choices"})}},{key:"handleSelect",value:function(){}},{key:"handleCancel",value:function(){this.props.updateStore({updates:{showpreview:!1}})}},{key:"removeField",value:function(index){var fields=this.state.fieldList;fields.splice(index,1),this.setState({fieldList:fields})}},{key:"addField",value:function(){var fieldList=this.state.fieldList;fieldList.push({id:"",datatype:""}),this.setState({fieldList:fieldList})}},{key:"getModelName",value:function(name,scope){return"mmf"==scope&&name.startsWith("Meta")?name:name+"_"+scope}},{key:"getNewRelationShipWithNewModel",value:function(){var _this2=this,template=null;if(this.state.modelCreated)template=this.getNewRelationShipWithExistingModel(this.getModelName(this.state.modelName,this.state.modelScope));else{var fieldList=[],length=this.state.fieldList.length;this.state.fieldList.forEach(function(field,indx){var element=React.createElement("div",{className:"field-create"},React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){(fieldList=_this2.state.fieldList)[indx].id=e.target.value,_this2.setState({fieldList:fieldList})}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){(fieldList=_this2.state.fieldList)[indx].datatype=e.target.value,_this2.setState({fieldList:fieldList})}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(indx){_this2.removeField(indx)}}):null," ",React.createElement(AddAlt20,{onClick:function(e){_this2.addField()}}));fieldList.push(element)}),template=React.createElement("div",null,React.createElement(TextInput,{placeholder:"Model Name",onChange:function(e){_this2.setState({modelName:e.target.value})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",onChange:function(e){_this2.setState({modelScope:e.target.value})}})," ",React.createElement("br",null),fieldList.map(function(element){return element}),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this2.optionSelected="home",_this2.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){_this2.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){var _ref,self=_this2;$qry.waituntil("model.upsert",_this2.getModelName(_this2.state.modelName,_this2.state.modelScope)).then((_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(result){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,self.updateSchema();case 2:_this2.setState({modelCreated:!0});case 3:case"end":return _context.stop()}},_callee,_this2)})),function(_x){return _ref.apply(this,arguments)})),$script.getscript("createModel").then(function(_ref2){(0,_ref2.default)(_this2.state.modelName,_this2.state.modelScope,_this2.state.fieldList).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+_this2.state.modelName+"_"+_this2.state.modelScope+" updated."})})})}},"Create")))}return template}},{key:"updateSchema",value:function(){var _this3=this;return new Promise(function(resolve,reject){var self=_this3;$script.runAtServer("mmf.getSchemaData").then(function(schemaData){self.props.updateStore({updates:{schema:schemaData}}),resolve()})})}},{key:"getNewRelationShipWithExistingModel",value:function(modelNameValue){var _this4=this,tableItems=[];tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables&&this.props.schemaTables.map(function(schemaTable,indx){tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTable}))});var targetModelFields=this.props.schemaFields?this.props.schemaFields:[],targetModel=modelNameValue||this.state.targetModel;targetModelFields=targetModelFields.filter(function(item){return item.parent==targetModel&&"field"==item.type});var targetModelFieldItems=[];targetModelFieldItems.push(React.createElement(SelectItem,{value:"none",text:"Select Field"})),targetModelFields.map(function(item){targetModelFieldItems.push(React.createElement(SelectItem,{value:item.id,text:item.text}))});var targetModelWidget=null;return targetModelWidget=modelNameValue?React.createElement(TextInput,{placeholder:"Target Model",value:modelNameValue}):React.createElement(Select,{labelText:"Target Model",onChange:function(e){_this4.setState({targetModel:e.target.value})}},tableItems),React.createElement("div",null,this.state.relationShipcreated?this.getExistingFieldsTemplate(!0,targetModel):React.createElement(React.Fragment,null,React.createElement(TextInput,{placeholder:"Source Model",value:this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),disabled:!0})," ",React.createElement("br",null),targetModelWidget,React.createElement("br",null),React.createElement(TextInput,{placeholder:"Relatinship Name",onChange:function(e){_this4.setState({relationshipName:e.target.value})}})," ",React.createElement("br",null),React.createElement(Select,{labelText:"Foreign Key",onChange:function(e){_this4.setState({foreignKey:e.target.value})}},targetModelFieldItems),React.createElement("br",null),React.createElement(TextInput,{placeholder:"Alias",onChange:function(e){_this4.setState({relationship_alias:e.target.value})}})," ",React.createElement("br",null),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this4.optionSelected="home",_this4.handleNext()}},"Home"),React.createElement(Button,{onClick:function(){_this4.handleCancel()}},"Cancel"),React.createElement(Button,{onClick:function(){var _ref3,self=_this4;$qry.waituntil("relationship.upsert",_this4.state.relationshipName).then((_ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(result){var active_widget_temp_field_value;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,self.updateSchema();case 2:self.setState({relationShipcreated:!0}),(active_widget_temp_field_value=self.props.active_widget_temp_field_value&&self.props.active_widget_temp_field_value.length>0?self.props.active_widget_temp_field_value:[]).push(self.state.relationship_alias),self.props.updateStore({updates:{active_widget_temp_field_value:active_widget_temp_field_value}});case 6:case"end":return _context2.stop()}},_callee2,_this4)})),function(_x2){return _ref3.apply(this,arguments)})),$script.getscript("mmf.createRelationship").then(function(_ref4){var createRelationshipFn=_ref4.default,sourceModelNameValue=self.getModelName(self.props.activePage.model,self.props.activePage.modelscope);createRelationshipFn(self.state.relationshipName,sourceModelNameValue,targetModel,"belongsTo",self.state.foreignKey,self.state.relationship_alias).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Relationship "+self.state.relationshipName+" created."})})})}},"Create"))))}},{key:"getExistingRelationShipTemplate",value:function(){var _this5=this,relationships=this.props.schemaFields?this.props.schemaFields:[],modelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);relationships=relationships.filter(function(item){return item.parent==modelNameValue&&"one2one"==item.type});var selectedRelationships=[],selectedField=null,selectedFieldInfo=null;if(selectedRelationships.push(React.createElement(SelectItem,{value:"none",text:"Select Relationship"})),relationships.map(function(item){selectedRelationships.push(React.createElement(SelectItem,{value:item.to+"@@"+item.text,text:item.text}))}),this.state.selectedRelationShip){var fieldsInRelatedModel=this.props.schemaFields?this.props.schemaFields:[];fieldsInRelatedModel=fieldsInRelatedModel.filter(function(item){return item.parent==_this5.state.selectedRelationShip.table&&"field"==item.type});var selectFieldsInRelatedModel=[];selectFieldsInRelatedModel.push(React.createElement(SelectItem,{value:"none",text:"Select Fields"})),fieldsInRelatedModel.map(function(item){selectFieldsInRelatedModel.push(React.createElement(SelectItem,{value:item.text+"@@"+item.datatype,text:item.text}))}),selectedField=React.createElement(Select,{labelText:"Select Fields",onChange:function(e){e.target.value&&e.target.value.indexOf("@@")>-1&&_this5.setState({selectedField:{name:e.target.value.split("@@")[0],datatype:e.target.value.split("@@")[1]}})}},selectFieldsInRelatedModel)}return this.state.selectedField&&(selectedFieldInfo=React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected RelationShip"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedRelationShip.table)),React.createElement("br",null),React.createElement("h4",null,"Selected Field"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedField.name),React.createElement("li",null,"Type : ",this.state.selectedField.datatype)))),React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Select Relationship",onChange:function(e){e.target.value&&e.target.value.indexOf("@@")>-1&&_this5.setState({selectedRelationShip:{table:e.target.value.split("@@")[0],name:e.target.value.split("@@")[1]}})}},selectedRelationships),selectedField,selectedFieldInfo,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this5.optionSelected="home",_this5.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this5.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this5.props.updateStore({updates:{active_widget_temp_field_value:[],active_widget_field_value:"@@["+[_this5.state.selectedRelationShip.name,_this5.state.selectedField.name].join(".")+"]",showpreview:!1}})}},"Select")))}},{key:"getNewFieldTemplate",value:function(){var _this6=this;return React.createElement(React.Fragment,null,React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){_this6.setState({fieldName:e.target.value})}})," ",React.createElement("br",null),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){_this6.setState({fieldType:e.target.value})}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"}))," ",React.createElement("br",null),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this6.optionSelected="home",_this6.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var _ref5,self=_this6;$qry.waituntil("model.upsert",_this6.getModelName(_this6.props.activePage.model,_this6.props.activePage.modelscope)).then((_ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(result){return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,self.updateSchema();case 2:_this6.props.updateStore({updates:{active_widget_field_value:"@@["+_this6.state.fieldName+"]",active_widget_temp_field_value:[],showpreview:!1}});case 3:case"end":return _context3.stop()}},_callee3,_this6)})),function(_x3){return _ref5.apply(this,arguments)})),$script.getscript("addFields2Model").then(function(_ref6){(0,_ref6.default)(_this6.props.activePage.model,_this6.props.activePage.modelscope,[{name:_this6.state.fieldName,type:_this6.state.fieldType}]).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+_this6.props.activePage.model+" updated."})})})}},"Create & Select")))}},{key:"getExistingFieldsTemplate",value:function(fromRelationShip,relationshipModelName){var _this7=this,items=this.props.schemaFields?this.props.schemaFields:[],targetModelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);fromRelationShip&&(targetModelNameValue=relationshipModelName),items=items.filter(function(item){return item.parent==targetModelNameValue&&"field"==item.type});var selectItems=[];return selectItems.push(React.createElement(SelectItem,{value:"none",text:"Select Field"})),items.map(function(item){selectItems.push(React.createElement(SelectItem,{value:item.id,text:item.text}))}),React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Select Fields",onChange:function(e){_this7.setState({selectedField:e.target.value})},id:"selectfield"},selectItems),this.state.selectedField?React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected Field"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedField),React.createElement("li",null,"Type : String"))):null,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this7.optionSelected="home",_this7.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this7.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var active_widget_field_value="";if(_this7.props.active_widget_temp_field_value&&_this7.props.active_widget_temp_field_value.length>0)_this7.props.active_widget_temp_field_value.push(_this7.state.selectedField),active_widget_field_value="@@["+_this7.props.active_widget_temp_field_value.join(".")+"]";else if(active_widget_field_value&&active_widget_field_value.indexOf("@@[")>-1){var propVal=active_widget_field_value.split("@@[")[1];(propVal=(propVal=propVal.substr(0,propVal.length-1)).split(".")).push(_this7.state.selectedField),active_widget_field_value="@@["+propVal.join(".")+"]"}else active_widget_field_value="@@["+_this7.state.selectedField+"]";_this7.props.updateStore({updates:{active_widget_field_value:active_widget_field_value,active_widget_temp_field_value:[],showpreview:!1}})}},"Select")))}},{key:"getDefaultTemplate",value:function(){var _this8=this;return React.createElement(React.Fragment,null,React.createElement(FormGroup,{legendText:"Choose a configuration from below options to select the field - "},React.createElement(RadioButtonGroup,{defaultSelected:"item1",legend:"Select from - ",orientation:"vertical"},React.createElement(RadioButton,{value:"existing_field",labelText:"Existing field",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"new_field",labelText:"New field",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"existing_relation",labelText:"Existing relationship",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"new_relation_existing_model",labelText:"New relationship with Existing model",onClick:this.handleConfigurationChange}),React.createElement(RadioButton,{value:"new_relation_new_model",labelText:"New relationship with New model",onClick:this.handleConfigurationChange}))),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this8.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this8.handleNext()}},"Next")))}},{key:"getTemplate",value:function(){var template=null;switch(this.optionSelected){case"existing_field":template=this.getExistingFieldsTemplate();break;case"new_field":template=this.getNewFieldTemplate();break;case"existing_relation":template=this.getExistingRelationShipTemplate();break;case"new_relation_existing_model":template=this.getNewRelationShipWithExistingModel();break;case"new_relation_new_model":template=this.getNewRelationShipWithNewModel();break;case"home":default:template=this.getDefaultTemplate()}return template}},{key:"getBreadCrumb",value:function(){var breadCrumbKey=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.key:"",breadCrumbStage=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.stage:"",breadCrumbElements=[];return breadCrumbKey&&"home"!=breadCrumbKey?(breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,"Choose a configuration"))),this.breadCrumbPaths[breadCrumbKey].map(function(breadCrumbItem,indx){breadCrumbItem.name==breadCrumbStage?breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,breadCrumbItem.value))):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,breadCrumbItem.value)))})):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,"Choose a configuration"))),breadCrumbElements}},{key:"render",value:function(){var template=this.getTemplate(),breadCrumb=this.getBreadCrumb();return React.createElement("div",{style:{padding:20}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ShowFieldMappingDialog/Style.css");'),React.createElement("nav",{class:"bx--breadcrumb bx--breadcrumb--no-trailing-slash","aria-label":"breadcrumb"},breadCrumb),React.createElement("div",{className:"rel-options"},template))}}]),_ShowFieldMappingDialog_}(React.Component),_export("ShowFieldMappingDialog",ShowFieldMappingDialog=function(props){return _ShowFieldMappingDialog_}),_export("ShowFieldMappingDialog",ShowFieldMappingDialog)}}}),System.register("component/studio/ShowTabMappingDialog.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","carbon-addons-cloud-react","@carbon/icons-react/lib/blog/32","@carbon/icons-react/lib/list--bulleted/32","component/mmf/PageParameter/Definition.js","component/mmf/OrderedList/Definition.js","component/studio/SrsReference/Definition.js"],function(_export,_context9){"use strict";var _regeneratorRuntime,_extends,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,NumberInput,Button,MultiSelect,Tabs,Tab,Select,SelectItem,TextInput,OverflowMenu,OverflowMenuItem,AddAlt20,SubAlt20,Card,Icon1,Icon2,PageParameter,OrderedList,SrsReference,_ShowTabMappingDialog_,ShowTabMappingDialog,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){NumberInput=_carbonComponentsReact.NumberInput,_carbonComponentsReact.Breadcrumb,_carbonComponentsReact.BreadcrumbItem,Button=_carbonComponentsReact.Button,_carbonComponentsReact.FormGroup,_carbonComponentsReact.RadioButtonGroup,_carbonComponentsReact.RadioButton,MultiSelect=_carbonComponentsReact.MultiSelect,Tabs=_carbonComponentsReact.Tabs,Tab=_carbonComponentsReact.Tab,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput,OverflowMenu=_carbonComponentsReact.OverflowMenu,OverflowMenuItem=_carbonComponentsReact.OverflowMenuItem},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card},function(_carbonIconsReactLibBlog){Icon1=_carbonIconsReactLibBlog.default},function(_carbonIconsReactLibListBulleted){Icon2=_carbonIconsReactLibListBulleted.default},function(_componentMmfPageParameterDefinitionJs){PageParameter=_componentMmfPageParameterDefinitionJs.PageParameter},function(_componentMmfOrderedListDefinitionJs){OrderedList=_componentMmfOrderedListDefinitionJs.OrderedList},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference}],execute:function(){_ShowTabMappingDialog_=function(_React$Component){function _ShowTabMappingDialog_(props){_classCallCheck(this,_ShowTabMappingDialog_);var _this=_possibleConstructorReturn(this,(_ShowTabMappingDialog_.__proto__||Object.getPrototypeOf(_ShowTabMappingDialog_)).call(this,props));return _this.state={templateChanged:!1,selectedFields:[],selectedRelationShip:null,realtionshipSelected:!1,targetModel:null,foreignKey:null,relationShipcreated:!1,selectedFilter:"",foreignKeyType:"existing",selectedPage:null,fieldList:[{name:"",type:""}],currentBreadCrumbPath:{},pages:[],pageParameters:null,selectedPageSize:10,selectedCreatePageId:"",selectedEditPageId:"",listTitle:""},_this.breadCrumbPaths={home:[{name:"",value:""}],existing_relationship:[{name:"select_relation",value:"Select Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],new_relationship_with_existing_model:[{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],new_relationship_with_new_model:[{name:"create_model",value:"Create Model"},{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],existing_page:[{name:"select_page",value:"Select Page"}]},_this.loadSlides=_this.loadSlides.bind(_this),_this.handleConfigurationChange=_this.handleConfigurationChange.bind(_this),_this.handleSelect=_this.handleSelect.bind(_this),_this.handleNext=_this.handleNext.bind(_this),_this.removeField=_this.removeField.bind(_this),_this.addField=_this.addField.bind(_this),_this.handleSelectPage=_this.handleSelectPage.bind(_this),_this.handleSelectedRelationship=_this.handleSelectedRelationship.bind(_this),_this.handleSimpleList=_this.handleSimpleList.bind(_this),_this.createRelationship=_this.createRelationship.bind(_this),_this.updateSchema=_this.updateSchema.bind(_this),_this.getFieldSelectionTemplate=_this.getFieldSelectionTemplate.bind(_this),_this.getFieldList=_this.getFieldList.bind(_this),_this.getModelName=_this.getModelName.bind(_this),_this.getExistingRelationShipTemplate=_this.getExistingRelationShipTemplate.bind(_this),_this.getNewRelationShipWithNewModel=_this.getNewRelationShipWithNewModel.bind(_this),_this.getNewRelationShipWithExistingModel=_this.getNewRelationShipWithExistingModel.bind(_this),_this.getExistingFieldsTemplate=_this.getExistingFieldsTemplate.bind(_this),_this.getExistingPageTemplate=_this.getExistingPageTemplate.bind(_this),_this.getSimpleListTemplate=_this.getSimpleListTemplate.bind(_this),_this.getDefaultTemplate=_this.getDefaultTemplate.bind(_this),_this.getTemplate=_this.getTemplate.bind(_this),_this.getBreadCrumb=_this.getBreadCrumb.bind(_this),_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this}return _inherits(_ShowTabMappingDialog_,_React$Component),_createClass(_ShowTabMappingDialog_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.current_filter,this.props.current_filter)||this.setState({selectedFilter:this.props.current_filter})}},{key:"handleConfigurationChange",value:function(e){this.optionSelected=e.target.value?e.target.value:e.currentTarget.value?e.currentTarget.value:"",this.handleNext()}},{key:"handleSelect",value:function(){this.setState({realtionshipSelected:!0})}},{key:"handleNext",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var newStateObj;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:newStateObj={},this.optionSelected?("home"==this.optionSelected&&(newStateObj={realtionshipSelected:!1,selectedRelationShip:null,selectedFields:null,selectedFilter:null,selectedPageSize:null,fieldList:null,modelCreated:!1,targetModel:null,foreignKey:"",relationshipName:"",foreignKeyType:null,relationship_alias:"",pages2Show:null,pageParameters:null,selectedPage:null,templateChanged:!0,currentBreadCrumbPath:{key:this.optionSelected,stage:this.breadCrumbPaths[this.optionSelected][0].name}}),this.setState(_extends({},newStateObj))):this.props.addErrorMessage({title:"Error - ",subtitle:"Please select one of the available choices"});case 2:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"removeField",value:function(index){var fields=this.state.fieldList;fields.splice(index,1),this.setState({fieldList:fields})}},{key:"addField",value:function(){var fields=this.state.fieldList;fields.push({name:"",type:""}),this.setState({fieldList:fields})}},{key:"handleDone",value:function(){}},{key:"handleCancel",value:function(){}},{key:"handleSelectPage",value:function(){var _this2=this,selectedPage=this.state.selectedPage,updatedProps=this.props.widgetProps||{},tabs=JSON.parse(updatedProps.tabs)||[],matchingTab=tabs.slice().filter(function(tabToUpdate){return tabToUpdate.tab_id==_this2.props.active_tab_id});(matchingTab=matchingTab&&matchingTab.length>0?matchingTab[0]:null)&&(matchingTab.tabInfo.type="page",matchingTab.tabInfo.page={page_id:selectedPage,params:this.state.pageParameters},updatedProps.tabs=JSON.stringify(tabs),this.props.updateStore({updates:{widgetProps:updatedProps,showpreview:!1}}))}},{key:"handleSimpleList",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var selectedTable,selectedFields,selectedFilter,selectedPageSize,title,selectedCreatePathId,selectedEditPathId,updatedProps,tabs,tabsToUpdate,matchingTab,_this3=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:selectedTable=this.state.selectedTable?this.state.selectedTable:"",selectedFields=this.state.selectedFields?this.state.selectedFields:[],selectedFilter=this.state.selectedFilter?this.state.selectedFilter:{},selectedPageSize=this.state.selectedPageSize?this.state.selectedPageSize:10,title=this.state.listTitle?this.state.listTitle:selectedTable+" List",selectedCreatePathId=this.state.selectedCreatePageId?this.state.selectedCreatePageId.id:"",selectedEditPathId=this.state.selectedEditPathId?this.state.selectedEditPathId.id:"",updatedProps=this.props.widgetProps||{},tabs=JSON.parse(updatedProps.tabs)||[],tabsToUpdate=tabs.slice(),(matchingTab=(matchingTab=tabsToUpdate.filter(function(tabToUpdate){return tabToUpdate.tab_id==_this3.props.active_tab_id}))&&matchingTab.length>0?matchingTab[0]:null)&&(matchingTab.tabInfo.type="simple_list",matchingTab.tabInfo.list={table:selectedTable,fields:selectedFields,filter:selectedFilter,pagesize:selectedPageSize},title&&(matchingTab.tabInfo.list.title=title),selectedCreatePathId&&(matchingTab.tabInfo.list.createview=selectedCreatePathId),selectedEditPathId&&(matchingTab.tabInfo.list.editview=selectedEditPathId),updatedProps.tabs=JSON.stringify(tabs),this.props.updateStore({updates:{widgetProps:updatedProps,showpreview:!1}}));case 13:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"handleSelectedRelationship",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var relationshipName,selectedTable,selectedFields,selectedFilter,selectedPageSize,parentTable,title,selectedCreatePathId,selectedEditPathId,updatedProps,tabs,tabsToUpdate,matchingTab,_this4=this;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:relationshipName=this.state.selectedRelationShip?this.state.selectedRelationShip.name:"",selectedTable=this.state.selectedRelationShip?this.state.selectedRelationShip.table:"",selectedFields=this.state.selectedFields?this.state.selectedFields:[],selectedFilter=this.state.selectedFilter?this.state.selectedFilter:{},selectedPageSize=this.state.selectedPageSize?this.state.selectedPageSize:10,parentTable=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),title=this.state.listTitle?this.state.listTitle:selectedTable+" List",selectedCreatePathId=this.state.selectedCreatePageId?this.state.selectedCreatePageId.id:"",selectedEditPathId=this.state.selectedEditPageId?this.state.selectedEditPageId.id:"",updatedProps=this.props.widgetProps||{},tabs=JSON.parse(updatedProps.tabs)||[],tabsToUpdate=tabs.slice(),(matchingTab=(matchingTab=tabsToUpdate.filter(function(tabToUpdate){return tabToUpdate.tab_id==_this4.props.active_tab_id}))&&matchingTab.length>0?matchingTab[0]:null)&&(matchingTab.tabInfo.type="related_list",matchingTab.tabInfo.list={table:parentTable,fields:selectedFields,filter:selectedFilter,pagesize:selectedPageSize,relation:relationshipName,relatedtable:selectedTable,params:this.state.pageParameters},title&&(matchingTab.tabInfo.list.title=title),selectedCreatePathId&&(matchingTab.tabInfo.list.createview=selectedCreatePathId),selectedEditPathId&&(matchingTab.tabInfo.list.editview=selectedEditPathId),updatedProps.tabs=JSON.stringify(tabs),this.props.updateStore({updates:{widgetProps:updatedProps,showpreview:!1}}));case 15:case"end":return _context3.stop()}},_callee3,this)}));return function(){return _ref3.apply(this,arguments)}}()},{key:"updateSchema",value:function(){var _this5=this;return new Promise(function(resolve,reject){var self=_this5;$script.runAtServer("mmf.getSchemaData").then(function(schemaData){self.props.updateStore({updates:{schema:schemaData}}),resolve()})})}},{key:"createRelationship",value:function(){this.setState({realtionshipSelected:!0})}},{key:"getModelName",value:function(name,scope){return"mmf"==scope&&name.startsWith("Meta")?name:name+"_"+scope}},{key:"getFieldSelectionTemplate",value:function(){var _this6=this,fieldList=this.getFieldList();return React.createElement(React.Fragment,null,React.createElement("h4",null,"Select Fields"),React.createElement("br",null),fieldList.map(function(element){return element}),React.createElement(Button,{style:this.buttonStyle,onClick:function(){_this6.handleDone()}},"Done"))}},{key:"getFieldList",value:function(){var _this7=this,fieldList=[],length=this.state.fieldList.length;return this.state.fieldList.forEach(function(field,i){var element=React.createElement("div",{className:"field-create"},React.createElement(TextInput,{placeholder:"Field Name"}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(){}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(i){_this7.removeField(i)}}):null," ",React.createElement(AddAlt20,{onClick:function(){_this7.addField()}}));fieldList.push(element)}),fieldList}},{key:"getExistingRelationShipTemplate",value:function(){var _this8=this,OrderedListComp=OrderedList(),relationships=this.props.schemaFields?this.props.schemaFields:[],modelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);relationships=relationships.filter(function(item){return item.parent==modelNameValue&&"one2many"==item.type});var selectedRelationships=[],selectedField=null,selectedFieldInfo=null;selectedRelationships.push(React.createElement(SelectItem,{value:"none",text:"Select Relationship"})),relationships.map(function(item){selectedRelationships.push(React.createElement(SelectItem,{value:item.to+"@@"+item.text,text:item.text}))});var selectRelationShipField=null;if(this.state.selectedRelationShip){var fieldsInRelatedModel=this.props.schemaFields?this.props.schemaFields:[],selectFieldsInRelatedModel=[];(fieldsInRelatedModel=fieldsInRelatedModel.filter(function(item){return item.parent==_this8.state.selectedRelationShip.table&&"field"==item.type})).map(function(item){"id"!=item.text&&"uid"!=item.text&&selectFieldsInRelatedModel.push({id:item.text+"@@"+item.datatype,text:item.text})}),selectedField=React.createElement(MultiSelect,{label:"Select Fields",invalid:!1,invalidText:"Invalid Selection",onChange:function(evt){return _this8.setState({selectedFields:evt.selectedItems})},items:selectFieldsInRelatedModel,itemToString:function(item){return item.text}})}else selectRelationShipField=React.createElement("div",{style:{position:"absolute",left:"40%",top:"40%"}},React.createElement(Select,{labelText:"Select Relationship",onChange:function(e){e.target.value&&e.target.value.indexOf("@@")>-1&&_this8.setState({selectedRelationShip:{table:e.target.value.split("@@")[0],name:e.target.value.split("@@")[1]}})}},selectedRelationships));this.state.selectedFields&&this.state.selectedFields.length>0&&(selectedFieldInfo=React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected RelationShip"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedRelationShip.table)),React.createElement("br",null),React.createElement("h4",null,"Selected Fields"),React.createElement(OrderedListComp,{data:this.state.selectedFields,labelAttr:"text",updatedList:function(data){return _this8.setState({selectedFields:data})}})));var pageParametersEl=null,ParamPicker=PageParameter();if(this.state.selectedRelationShip){pageParametersEl=React.createElement(ParamPicker,{updateProps:function(data){return _this8.setState({pageParameters:data})},parentPageParams:{recordid:"Parent Record ID"},widgetData:this.props.widgetData,params:["recordid"]})}var RecordLookup=SrsReference(),editPageProps={title:"Choose Edit Page",tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:JSON.stringify({where:{Type:"EditView"}}),searchfields:"Name",onChange:function(id){_this8.setState({selectedEditPageId:id})}},createPageProps={title:"Choose Create Page",tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:JSON.stringify({where:{Type:"CreateView"}}),searchfields:"Name",onChange:function(id){_this8.setState({selectedCreatePageId:id})}},fieldsAndFilter=this.state.selectedRelationShip?React.createElement(Tabs,{selected:0},React.createElement(Tab,{label:"General"},React.createElement("div",{style:{marginTop:10}},React.createElement(TextInput,{labelText:"List Title",placeholder:"Enter title...",onChange:function(e){_this8.setState({listTitle:e.target.value})}}),React.createElement(NumberInput,{label:"Page Size",value:10,onChange:function(e){_this8.setState({selectedPageSize:e.target.value})}}),React.createElement(RecordLookup,editPageProps),React.createElement(RecordLookup,createPageProps))),React.createElement(Tab,{label:"Field Selection"},React.createElement("div",{style:{marginTop:10}},selectedField,selectedFieldInfo)),React.createElement(Tab,{label:"Apply Filter"},this.state.selectedRelationShip?React.createElement("srs-filter",{maxheight:"15rem",style:{position:"absolute",left:"20%"},tableName:this.state.selectedRelationShip.table}):null),React.createElement(Tab,{label:"Related Record"},React.createElement("div",{style:{display:"inline-flex",position:"absolute",left:"30%",marginTop:20}},pageParametersEl))):null;return React.createElement(React.Fragment,null,selectRelationShipField,fieldsAndFilter,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this8.optionSelected="home",_this8.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this8.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this8.handleSelectedRelationship()}},"Select")))}},{key:"getSimpleListTemplate",value:function(){var _this9=this,OrderedListComp=OrderedList(),tableItems=(this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),[]);tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables&&this.props.schemaTables.sort().map(function(schemaTable,indx){tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTable}))});var selectedField=null,selectedFieldInfo=null,selectedTableEl=null;if(this.state.selectedTable){var fieldItems=[],fields=this.props.schemaFields?this.props.schemaFields:[];(fields=fields.filter(function(item){return item.parent==_this9.state.selectedTable&&"field"==item.type})).map(function(item){"id"!=item.text&&"uid"!=item.text&&fieldItems.push({id:item.text+"@@"+item.datatype,text:item.text})}),selectedField=React.createElement(MultiSelect,{label:"Select Fields",invalid:!1,invalidText:"Invalid Selection",onChange:function(evt){return _this9.setState({selectedFields:evt.selectedItems})},items:fieldItems,itemToString:function(item){return item.text}})}else selectedTableEl=React.createElement("div",{style:{position:"absolute",left:"40%",top:"40%"}},React.createElement(Select,{labelText:"Choose a table",onChange:function(e){_this9.setState({selectedTable:e.target.value})}},tableItems));this.state.selectedFields&&this.state.selectedFields.length>0&&(selectedFieldInfo=React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected Fields"),React.createElement(OrderedListComp,{data:this.state.selectedFields,labelAttr:"text",updatedList:function(data){return _this9.setState({selectedFields:data})}})));var RecordLookup=SrsReference(),editPageProps={tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:{where:{Type:"EditView"}},searchfields:"Name",onChange:function(id){_this9.setState({selectedEditPageId:id})}},createPageProps={tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:{where:{Type:"CreateView"}},searchfields:"Name",onChange:function(id){_this9.setState({selectedCreatePageId:id})}},fieldsAndFilter=this.state.selectedTable?React.createElement(Tabs,{selected:0},React.createElement(Tab,{label:"General"},React.createElement("div",{style:{marginTop:10}},React.createElement(TextInput,{labelText:"List Title",placeholder:"Enter title...",onChange:function(e){_this9.setState({listTitle:e.target.value})}}),React.createElement(NumberInput,{label:"Page Size",value:10,onChange:function(e){_this9.setState({selectedPageSize:e.target.value})}}),React.createElement(RecordLookup,editPageProps),React.createElement(RecordLookup,createPageProps))),React.createElement(Tab,{label:"Field Selection"},React.createElement("div",{style:{marginTop:10}},selectedField,selectedFieldInfo)),React.createElement(Tab,{label:"Apply Filter"},this.state.selectedTable?React.createElement("srs-filter",{maxheight:"15rem",style:{position:"absolute",left:"20%"},tableName:this.state.selectedTable}):null)):null;return React.createElement(React.Fragment,null,selectedTableEl,fieldsAndFilter,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this9.optionSelected="home",_this9.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this9.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this9.handleSimpleList()}},"Select")))}},{key:"getNewRelationShipWithNewModel",value:function(){var _this10=this,template=null;if(this.state.modelCreated)template=this.getNewRelationShipWithExistingModel(this.getModelName(this.state.modelName,this.state.modelScope));else{var fieldList=[],length=this.state.fieldList.length;this.state.fieldList.forEach(function(field,indx){var element=React.createElement("div",{className:"field-create"},React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){(fieldList=_this10.state.fieldList)[indx].id=e.target.value,_this10.setState({fieldList:fieldList})}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){(fieldList=_this10.state.fieldList)[indx].datatype=e.target.value,_this10.setState({fieldList:fieldList})}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(indx){_this10.removeField(indx)}}):null," ",React.createElement(AddAlt20,{onClick:function(e){_this10.addField()}}));fieldList.push(element)}),template=React.createElement("div",null,React.createElement(TextInput,{placeholder:"Model Name",onChange:function(e){_this10.setState({modelName:e.target.value})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",onChange:function(e){_this10.setState({modelScope:e.target.value})}})," ",React.createElement("br",null),fieldList.map(function(element){return element}),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this10.optionSelected="home",_this10.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){_this10.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){var _ref4,self=_this10;$qry.waituntil("model.upsert",_this10.getModelName(_this10.state.modelName,_this10.state.modelScope)).then((_ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(result){return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,self.updateSchema();case 2:_this10.setState({modelCreated:!0,targetModel:_this10.getModelName(_this10.state.modelName,_this10.state.modelScope)});case 3:case"end":return _context4.stop()}},_callee4,_this10)})),function(_x){return _ref4.apply(this,arguments)})),$script.getscript("createModel").then(function(_ref5){(0,_ref5.default)(_this10.state.modelName,_this10.state.modelScope,_this10.state.fieldList).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+_this10.state.modelName+"_"+_this10.state.modelScope+" updated."})})})}},"Create")))}return template}},{key:"getNewRelationShipWithExistingModel",value:function(modelNameValue){var _this11=this,tableItems=[];tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables&&this.props.schemaTables.sort().map(function(schemaTable,indx){tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTable}))});var targetModelFields=this.props.schemaFields?this.props.schemaFields:[],targetModel=modelNameValue||this.state.targetModel;targetModelFields=targetModelFields.filter(function(item){return item.parent==targetModel&&"field"==item.type});var targetModelFieldItems=[];targetModelFieldItems.push(React.createElement(SelectItem,{value:"none",text:"Select Field"})),targetModelFields.map(function(item){"id"!=item.text&&targetModelFieldItems.push(React.createElement(SelectItem,{value:item.id,text:item.text}))});var targetModelWidget=null;targetModelWidget=modelNameValue?React.createElement(TextInput,{placeholder:"Target Model",value:modelNameValue}):React.createElement(Select,{labelText:"Target Model",onChange:function(e){_this11.setState({targetModel:e.target.value})}},tableItems);var formContent=null,foreignKeyField=null;switch(this.state.foreignKeyType){case"existing":foreignKeyField=React.createElement(Select,{labelText:"Foreign Key",onChange:function(e){_this11.setState({foreignKey:e.target.value})}},targetModelFieldItems);break;case"new":foreignKeyField=React.createElement(TextInput,{labelText:"Foreign Key",value:this.state.foreignKey,onChange:function(e){_this11.setState({foreignKey:e.target.value})}})}return formContent=this.state.relationShipcreated?this.getExistingRelationShipTemplate(!0):React.createElement(React.Fragment,null,React.createElement(TextInput,{labelText:"Relationship Name",placeholder:"Relatinship Name",onChange:function(e){_this11.setState({relationshipName:e.target.value})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Source Model",value:this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),disabled:!0})," ",React.createElement("br",null),targetModelWidget,React.createElement("br",null),React.createElement(Select,{labelText:"Choose Foreign Key from",defaultValue:this.state.foreignKeyType,onChange:function(e){_this11.setState({foreignKeyType:e.target.value})}},React.createElement(SelectItem,{value:"existing",text:"Existing Field"}),React.createElement(SelectItem,{value:"new",text:"New Field"})),React.createElement("br",null),foreignKeyField,React.createElement(TextInput,{labelText:"Foreign key Alias",placeholder:"Alias",onChange:function(e){_this11.setState({relationship_alias:e.target.value})}})," ",React.createElement("br",null),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this11.optionSelected="home",_this11.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this11.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var self=_this11,targetModel=self.state.targetModel,targetModelName=targetModel,targetModelScope="mmf";if(!self.state.foreignKey||self.state.foreignKey.indexOf(" ")>-1)_this11.props.addErrorMessage({title:"Error - ",subtitle:"Foreign Key field name contains special characters. Please remove and try again. "});else{if(targetModel.indexOf("_")>-1){var targetModelParts=targetModel.split("_");targetModelName=targetModelParts.slice(0,targetModelParts.length-1).join("_"),targetModelScope=targetModelParts.slice(targetModelParts.length-1).join()}var _ref8,_ref6;"existing"==self.state.foreignKeyType?($qry.waituntil("relationship.upsert",_this11.state.relationshipName).then((_ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(result){return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,self.updateSchema();case 2:self.setState({relationShipcreated:!0,selectedRelationShip:{table:targetModel,name:_this11.state.relationshipName}});case 3:case"end":return _context5.stop()}},_callee5,_this11)})),function(_x2){return _ref6.apply(this,arguments)})),$script.getscript("mmf.createRelationship").then(function(_ref7){var createRelationshipFn=_ref7.default,targetModel=self.state.modelName?self.getModelName(self.state.modelName,self.state.modelScope):self.state.targetModel,sourceModelNameValue=self.getModelName(self.props.activePage.model,self.props.activePage.modelscope);createRelationshipFn(self.state.relationshipName,sourceModelNameValue,targetModel,"hasMany",self.state.foreignKey,self.state.relationship_alias).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Relationship "+self.state.relationshipName+" created."})})})):($qry.waituntil("model.upsert",targetModel).then((_ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(result){return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,self.updateSchema();case 2:$qry.waituntil("relationship.upsert",_this11.state.relationshipName).then(function(){var _ref9=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(result){return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,self.updateSchema();case 2:self.setState({relationShipcreated:!0,selectedRelationShip:{table:targetModel,name:_this11.state.relationshipName}});case 3:case"end":return _context6.stop()}},_callee6,_this11)}));return function(_x4){return _ref9.apply(this,arguments)}}()),$script.getscript("mmf.createRelationship").then(function(_ref10){var createRelationshipFn=_ref10.default,targetModel=self.state.modelName?self.getModelName(self.state.modelName,self.state.modelScope):self.state.targetModel,sourceModelNameValue=self.getModelName(self.props.activePage.model,self.props.activePage.modelscope);createRelationshipFn(self.state.relationshipName,sourceModelNameValue,targetModel,"hasMany",self.state.foreignKey,self.state.relationship_alias).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Relationship "+self.state.relationshipName+" created."})})});case 4:case"end":return _context7.stop()}},_callee7,_this11)})),function(_x3){return _ref8.apply(this,arguments)})),$script.getscript("addFields2Model").then(function(_ref11){(0,_ref11.default)(targetModelName,targetModelScope,[{name:self.state.foreignKey,type:"String"}]).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+ttargetModelName+"_"+targetModelScope+" updated."})})}))}}},"Create"))),React.createElement("div",null,formContent)}},{key:"loadSlides",value:function(){var _ref12=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(){var pages,pageDetails,pageData,_this12=this;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return pages=[],_context8.next=3,$qry.run("mmf.getAllSlides",{Scope:this.props.currentscope});case 3:pageDetails=_context8.sent,pageData=pageDetails&&pageDetails.slides?pageDetails.slides:{},Object.keys(pageData).map(function(pageName){var pageObj=pageData[pageName];pageObj.props&&(Object.keys(pageObj.props).map(function(propKey){switch(pageObj.props[propKey].Name){case"ModelName":pageObj.props[propKey].Value;break;case"ModelScope":pageObj.props[propKey].Value}}),pageObj.uid!=_this12.props.activePage.id&&pages.push(pageObj))}),this.setState({pages2Show:pages});case 7:case"end":return _context8.stop()}},_callee8,this)}));return function(){return _ref12.apply(this,arguments)}}()},{key:"getExistingFieldsTemplate",value:function(fromRelationShip,relationshipModelName){var _this13=this,OrderedListComp=OrderedList(),items=this.props.schemaFields?this.props.schemaFields:[],targetModelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);fromRelationShip&&(targetModelNameValue=relationshipModelName);var selectItems=[];(items=items.filter(function(item){return item.parent==targetModelNameValue&&"field"==item.type})).map(function(item){"id"!=item.text&&"uid"!=item.text&&selectItems.push({id:item.text+"@@"+item.datatype,text:item.text})});var multiSelectItems=React.createElement(MultiSelect,{label:"Select Fields",invalid:!1,invalidText:"Invalid Selection",onChange:function(evt){return _this13.setState({selectedFields:evt.selectedItems})},items:selectItems,itemToString:function(item){return item.text}});return React.createElement(React.Fragment,null,multiSelectItems,this.state.selectedField?React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected Fields"),React.createElement(OrderedListComp,{data:this.state.selectedFields,labelAttr:"text",updatedList:function(data){return _this13.setState({selectedFields:data})}})):null,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this13.optionSelected="home",_this13.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this13.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var active_widget_field_value="";if(_this13.props.active_widget_temp_field_value&&_this13.props.active_widget_temp_field_value.length>0)_this13.props.active_widget_temp_field_value.push(_this13.state.selectedField),active_widget_field_value="@@["+_this13.props.active_widget_temp_field_value.join(".")+"]";else if(active_widget_field_value&&active_widget_field_value.indexOf("@@[")>-1){var propVal=active_widget_field_value.split("@@[")[1];(propVal=(propVal=propVal.substr(0,propVal.length-1)).split(".")).push(_this13.state.selectedField),active_widget_field_value="@@["+propVal.join(".")+"]"}else active_widget_field_value="@@["+_this13.state.selectedField+"]";_this13.props.updateStore({updates:{active_widget_field_value:active_widget_field_value,active_widget_temp_field_value:[],showpreview:!1}})}},"Select")))}},{key:"getExistingPageTemplate",value:function(){var _this14=this,pageToRender=[];pageToRender.push(React.createElement(SelectItem,{labelText:"Choose the page to insert",value:"none",text:"Select Page"})),this.state.pages2Show?this.state.pages2Show.map(function(page){pageToRender.push(React.createElement(SelectItem,{value:page.uid,text:page.Name}))}):this.loadSlides();var pageParametersEl=null,ParamPicker=PageParameter();if(this.state.selectedPage){var matchingPage=this.state.pages2Show.filter(function(page2check){return page2check.uid==_this14.state.selectedPage});if(matchingPage&&1==matchingPage.length){var isParentPageModelDriven=this.props.activePage&&this.props.activePage.pageType&&"FreeForm"!=this.props.activePage.pageType,currentPageParams=[];"CreateView"!=matchingPage[0].Type&&"EditView"!=matchingPage[0].Type||currentPageParams.push("recordid"),matchingPage[0].props&&Object.keys(matchingPage[0].props).map(function(propId){"ModelName"!=matchingPage[0].props[propId].Name&&"ModelScope"!=matchingPage[0].props[propId].Name&&currentPageParams.push(matchingPage[0].props[propId].Name)}),pageParametersEl=React.createElement(ParamPicker,{updateProps:function(data){return _this14.setState({pageParameters:data})},parentPageParams:isParentPageModelDriven?{recordid:"Parent Record"}:this.props.activePage&&this.props.activePage.props||{},widgetData:this.props.widgetData,params:currentPageParams})}}return React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Choose the page",onChange:function(e){_this14.setState({selectedPage:e.target.value})}},pageToRender),React.createElement("br",null),React.createElement("div",{style:{position:"absolute",left:"20%",display:"inline-grid"}},pageParametersEl?React.createElement("label",{className:"bx--label",style:{fontSize:"medium"}},"Page Parameters"):null,pageParametersEl),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this14.optionSelected="home",_this14.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this14.handleSelectPage()}},"Select")))}},{key:"getDefaultTemplate",value:function(){var simpleListStyle={width:"45%",justifyContent:"center",padding:2};return this.props.activePage.model&&this.props.activePage.modelscope||(simpleListStyle.width="100%",simpleListStyle.left="50%"),React.createElement("div",{style:{display:"inline-flex",position:"absolute",left:"20%"}},React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(Icon1,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Insert a Page?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"Got your page ready? If not, create a page first and then insert it here. BTW, you may be asked to wire the params with environment for interactive rendering."),React.createElement(Button,{style:{position:"absolute",bottom:"1rem",left:"5rem"},onClick:this.handleConfigurationChange,value:"existing_page"},"Choose the page")),React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(Icon2,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Insert a List?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"You can insert a related list using an existing relationship or create one from here. Also, you are free to build a non-related simple list by choosing the model and applying the filter."),React.createElement("div",{style:{display:"inline-flex",position:"absolute",bottom:"1rem"}},React.createElement(Button,{style:simpleListStyle,onClick:this.handleConfigurationChange,value:"simple_list"},"Simple List"),this.props.activePage.model&&this.props.activePage.modelscope?React.createElement(OverflowMenu,{style:{backgroundColor:"rgb(0, 98, 255)",color:"rgb(255, 255, 255)",fontSize:"medium",borderWidth:3,borderStyle:"solid",borderColor:"transparent",width:"55%",height:"3rem",padding:3,marginLeft:"1rem"},renderIcon:function(){return React.createElement("div",{style:{padding:"0 1rem"}},"Related List")},"data-floating-menu-container":"true"},React.createElement(OverflowMenuItem,{itemText:"Existing Relationship",onClick:this.handleConfigurationChange,value:"existing_relationship"}),React.createElement(OverflowMenuItem,{itemText:"New Relationship",onClick:this.handleConfigurationChange,value:"new_relationship_with_existing_model"}),React.createElement(OverflowMenuItem,{itemText:"New Model",onClick:this.handleConfigurationChange,value:"new_relationship_with_new_model"})):null)))}},{key:"getTemplate",value:function(){var template=null;switch(this.optionSelected){case"existing_relationship":template=this.getExistingRelationShipTemplate();break;case"new_relationship_with_existing_model":template=this.getNewRelationShipWithExistingModel();break;case"new_relationship_with_new_model":template=this.getNewRelationShipWithNewModel();break;case"existing_page":template=this.getExistingPageTemplate();break;case"simple_list":template=this.getSimpleListTemplate();break;default:template=this.getDefaultTemplate()}return template}},{key:"getBreadCrumb",value:function(){var breadCrumbKey=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.key:"",breadCrumbStage=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.stage:"",breadCrumbElements=[];return breadCrumbKey?(breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,"Choose a configuration"))),this.breadCrumbPaths[breadCrumbKey].map(function(breadCrumbItem,indx){breadCrumbItem.name==breadCrumbStage?breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,breadCrumbItem.value))):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,breadCrumbItem.value)))})):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,"Choose a configuration"))),breadCrumbElements}},{key:"render",value:function(){var template=this.getTemplate(),breadCrumb=this.getBreadCrumb();return React.createElement("div",{style:{overflow:"hidden"}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ShowTabMappingDialog/Style.css"); @import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement("nav",{class:"bx--breadcrumb bx--breadcrumb--no-trailing-slash","aria-label":"breadcrumb",style:{position:"sticky",top:0}},breadCrumb),React.createElement("div",{className:"rel-options",style:{padding:10,height:"25rem",overflow:"scroll",marginLeft:"20%",width:"70%"}},template))}}]),_ShowTabMappingDialog_}(React.Component),_export("ShowTabMappingDialog",ShowTabMappingDialog=function(props){return _ShowTabMappingDialog_}),_export("ShowTabMappingDialog",ShowTabMappingDialog),_export("default",ShowTabMappingDialog),_export("states",states=[{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"current_filter",AccessPath:"current_filter",DefaultValue:'{"current_filter": {}}'},{KeyName:"widgetData",AccessPath:"pages.${active_page_id}.widgets",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {}}}}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"schemaFields",AccessPath:"schema.fields",DefaultValue:'{"schema": {"fields": []}}'},{KeyName:"widgetProps",AccessPath:"pages.${active_page_id}.widgets.${active_widget_id}.props",DefaultValue:'{"pages": {"${active_page_id}": {"widgets":{"${active_widget_id}": {"props": {}}}}}}'},{KeyName:"schemaTables",AccessPath:"schema.tables",DefaultValue:'{"schema": {"tables": []}}'},{KeyName:"active_tab_id",AccessPath:"active_tab_id",DefaultValue:'{"active_tab_id":""}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/ShowTabMappingDialog/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","carbon-addons-cloud-react","@carbon/icons-react/lib/blog/32","@carbon/icons-react/lib/list--bulleted/32","component/mmf/PageParameter/Definition.js","component/mmf/OrderedList/Definition.js","component/studio/SrsReference/Definition.js"],function(_export,_context9){"use strict";var _regeneratorRuntime,_extends,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,NumberInput,Button,MultiSelect,Tabs,Tab,Select,SelectItem,TextInput,OverflowMenu,OverflowMenuItem,AddAlt20,SubAlt20,Card,Icon1,Icon2,PageParameter,OrderedList,SrsReference,_ShowTabMappingDialog_,ShowTabMappingDialog;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){NumberInput=_carbonComponentsReact.NumberInput,_carbonComponentsReact.Breadcrumb,_carbonComponentsReact.BreadcrumbItem,Button=_carbonComponentsReact.Button,_carbonComponentsReact.FormGroup,_carbonComponentsReact.RadioButtonGroup,_carbonComponentsReact.RadioButton,MultiSelect=_carbonComponentsReact.MultiSelect,Tabs=_carbonComponentsReact.Tabs,Tab=_carbonComponentsReact.Tab,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput,OverflowMenu=_carbonComponentsReact.OverflowMenu,OverflowMenuItem=_carbonComponentsReact.OverflowMenuItem},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card},function(_carbonIconsReactLibBlog){Icon1=_carbonIconsReactLibBlog.default},function(_carbonIconsReactLibListBulleted){Icon2=_carbonIconsReactLibListBulleted.default},function(_componentMmfPageParameterDefinitionJs){PageParameter=_componentMmfPageParameterDefinitionJs.PageParameter},function(_componentMmfOrderedListDefinitionJs){OrderedList=_componentMmfOrderedListDefinitionJs.OrderedList},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference}],execute:function(){_ShowTabMappingDialog_=function(_React$Component){function _ShowTabMappingDialog_(props){_classCallCheck(this,_ShowTabMappingDialog_);var _this=_possibleConstructorReturn(this,(_ShowTabMappingDialog_.__proto__||Object.getPrototypeOf(_ShowTabMappingDialog_)).call(this,props));return _this.state={templateChanged:!1,selectedFields:[],selectedRelationShip:null,realtionshipSelected:!1,targetModel:null,foreignKey:null,relationShipcreated:!1,selectedFilter:"",foreignKeyType:"existing",selectedPage:null,fieldList:[{name:"",type:""}],currentBreadCrumbPath:{},pages:[],pageParameters:null,selectedPageSize:10,selectedCreatePageId:"",selectedEditPageId:"",listTitle:""},_this.breadCrumbPaths={home:[{name:"",value:""}],existing_relationship:[{name:"select_relation",value:"Select Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],new_relationship_with_existing_model:[{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],new_relationship_with_new_model:[{name:"create_model",value:"Create Model"},{name:"create_relation",value:"Create Relationship"},{name:"field_selection",value:"Field Selection from relationship"}],existing_page:[{name:"select_page",value:"Select Page"}]},_this.loadSlides=_this.loadSlides.bind(_this),_this.handleConfigurationChange=_this.handleConfigurationChange.bind(_this),_this.handleSelect=_this.handleSelect.bind(_this),_this.handleNext=_this.handleNext.bind(_this),_this.removeField=_this.removeField.bind(_this),_this.addField=_this.addField.bind(_this),_this.handleSelectPage=_this.handleSelectPage.bind(_this),_this.handleSelectedRelationship=_this.handleSelectedRelationship.bind(_this),_this.handleSimpleList=_this.handleSimpleList.bind(_this),_this.createRelationship=_this.createRelationship.bind(_this),_this.updateSchema=_this.updateSchema.bind(_this),_this.getFieldSelectionTemplate=_this.getFieldSelectionTemplate.bind(_this),_this.getFieldList=_this.getFieldList.bind(_this),_this.getModelName=_this.getModelName.bind(_this),_this.getExistingRelationShipTemplate=_this.getExistingRelationShipTemplate.bind(_this),_this.getNewRelationShipWithNewModel=_this.getNewRelationShipWithNewModel.bind(_this),_this.getNewRelationShipWithExistingModel=_this.getNewRelationShipWithExistingModel.bind(_this),_this.getExistingFieldsTemplate=_this.getExistingFieldsTemplate.bind(_this),_this.getExistingPageTemplate=_this.getExistingPageTemplate.bind(_this),_this.getSimpleListTemplate=_this.getSimpleListTemplate.bind(_this),_this.getDefaultTemplate=_this.getDefaultTemplate.bind(_this),_this.getTemplate=_this.getTemplate.bind(_this),_this.getBreadCrumb=_this.getBreadCrumb.bind(_this),_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this}return _inherits(_ShowTabMappingDialog_,_React$Component),_createClass(_ShowTabMappingDialog_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.current_filter,this.props.current_filter)||this.setState({selectedFilter:this.props.current_filter})}},{key:"handleConfigurationChange",value:function(e){this.optionSelected=e.target.value?e.target.value:e.currentTarget.value?e.currentTarget.value:"",this.handleNext()}},{key:"handleSelect",value:function(){this.setState({realtionshipSelected:!0})}},{key:"handleNext",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var newStateObj;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:newStateObj={},this.optionSelected?("home"==this.optionSelected&&(newStateObj={realtionshipSelected:!1,selectedRelationShip:null,selectedFields:null,selectedFilter:null,selectedPageSize:null,fieldList:null,modelCreated:!1,targetModel:null,foreignKey:"",relationshipName:"",foreignKeyType:null,relationship_alias:"",pages2Show:null,pageParameters:null,selectedPage:null,templateChanged:!0,currentBreadCrumbPath:{key:this.optionSelected,stage:this.breadCrumbPaths[this.optionSelected][0].name}}),this.setState(_extends({},newStateObj))):this.props.addErrorMessage({title:"Error - ",subtitle:"Please select one of the available choices"});case 2:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"removeField",value:function(index){var fields=this.state.fieldList;fields.splice(index,1),this.setState({fieldList:fields})}},{key:"addField",value:function(){var fields=this.state.fieldList;fields.push({name:"",type:""}),this.setState({fieldList:fields})}},{key:"handleDone",value:function(){}},{key:"handleCancel",value:function(){}},{key:"handleSelectPage",value:function(){var _this2=this,selectedPage=this.state.selectedPage,updatedProps=this.props.widgetProps||{},tabs=JSON.parse(updatedProps.tabs)||[],matchingTab=tabs.slice().filter(function(tabToUpdate){return tabToUpdate.tab_id==_this2.props.active_tab_id});(matchingTab=matchingTab&&matchingTab.length>0?matchingTab[0]:null)&&(matchingTab.tabInfo.type="page",matchingTab.tabInfo.page={page_id:selectedPage,params:this.state.pageParameters},updatedProps.tabs=JSON.stringify(tabs),this.props.updateStore({updates:{widgetProps:updatedProps,showpreview:!1}}))}},{key:"handleSimpleList",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var selectedTable,selectedFields,selectedFilter,selectedPageSize,title,selectedCreatePathId,selectedEditPathId,updatedProps,tabs,tabsToUpdate,matchingTab,_this3=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:selectedTable=this.state.selectedTable?this.state.selectedTable:"",selectedFields=this.state.selectedFields?this.state.selectedFields:[],selectedFilter=this.state.selectedFilter?this.state.selectedFilter:{},selectedPageSize=this.state.selectedPageSize?this.state.selectedPageSize:10,title=this.state.listTitle?this.state.listTitle:selectedTable+" List",selectedCreatePathId=this.state.selectedCreatePageId?this.state.selectedCreatePageId.id:"",selectedEditPathId=this.state.selectedEditPathId?this.state.selectedEditPathId.id:"",updatedProps=this.props.widgetProps||{},tabs=JSON.parse(updatedProps.tabs)||[],tabsToUpdate=tabs.slice(),(matchingTab=(matchingTab=tabsToUpdate.filter(function(tabToUpdate){return tabToUpdate.tab_id==_this3.props.active_tab_id}))&&matchingTab.length>0?matchingTab[0]:null)&&(matchingTab.tabInfo.type="simple_list",matchingTab.tabInfo.list={table:selectedTable,fields:selectedFields,filter:selectedFilter,pagesize:selectedPageSize},title&&(matchingTab.tabInfo.list.title=title),selectedCreatePathId&&(matchingTab.tabInfo.list.createview=selectedCreatePathId),selectedEditPathId&&(matchingTab.tabInfo.list.editview=selectedEditPathId),updatedProps.tabs=JSON.stringify(tabs),this.props.updateStore({updates:{widgetProps:updatedProps,showpreview:!1}}));case 13:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"handleSelectedRelationship",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var relationshipName,selectedTable,selectedFields,selectedFilter,selectedPageSize,parentTable,title,selectedCreatePathId,selectedEditPathId,updatedProps,tabs,tabsToUpdate,matchingTab,_this4=this;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:relationshipName=this.state.selectedRelationShip?this.state.selectedRelationShip.name:"",selectedTable=this.state.selectedRelationShip?this.state.selectedRelationShip.table:"",selectedFields=this.state.selectedFields?this.state.selectedFields:[],selectedFilter=this.state.selectedFilter?this.state.selectedFilter:{},selectedPageSize=this.state.selectedPageSize?this.state.selectedPageSize:10,parentTable=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),title=this.state.listTitle?this.state.listTitle:selectedTable+" List",selectedCreatePathId=this.state.selectedCreatePageId?this.state.selectedCreatePageId.id:"",selectedEditPathId=this.state.selectedEditPageId?this.state.selectedEditPageId.id:"",updatedProps=this.props.widgetProps||{},tabs=JSON.parse(updatedProps.tabs)||[],tabsToUpdate=tabs.slice(),(matchingTab=(matchingTab=tabsToUpdate.filter(function(tabToUpdate){return tabToUpdate.tab_id==_this4.props.active_tab_id}))&&matchingTab.length>0?matchingTab[0]:null)&&(matchingTab.tabInfo.type="related_list",matchingTab.tabInfo.list={table:parentTable,fields:selectedFields,filter:selectedFilter,pagesize:selectedPageSize,relation:relationshipName,relatedtable:selectedTable,params:this.state.pageParameters},title&&(matchingTab.tabInfo.list.title=title),selectedCreatePathId&&(matchingTab.tabInfo.list.createview=selectedCreatePathId),selectedEditPathId&&(matchingTab.tabInfo.list.editview=selectedEditPathId),updatedProps.tabs=JSON.stringify(tabs),this.props.updateStore({updates:{widgetProps:updatedProps,showpreview:!1}}));case 15:case"end":return _context3.stop()}},_callee3,this)}));return function(){return _ref3.apply(this,arguments)}}()},{key:"updateSchema",value:function(){var _this5=this;return new Promise(function(resolve,reject){var self=_this5;$script.runAtServer("mmf.getSchemaData").then(function(schemaData){self.props.updateStore({updates:{schema:schemaData}}),resolve()})})}},{key:"createRelationship",value:function(){this.setState({realtionshipSelected:!0})}},{key:"getModelName",value:function(name,scope){return"mmf"==scope&&name.startsWith("Meta")?name:name+"_"+scope}},{key:"getFieldSelectionTemplate",value:function(){var _this6=this,fieldList=this.getFieldList();return React.createElement(React.Fragment,null,React.createElement("h4",null,"Select Fields"),React.createElement("br",null),fieldList.map(function(element){return element}),React.createElement(Button,{style:this.buttonStyle,onClick:function(){_this6.handleDone()}},"Done"))}},{key:"getFieldList",value:function(){var _this7=this,fieldList=[],length=this.state.fieldList.length;return this.state.fieldList.forEach(function(field,i){var element=React.createElement("div",{className:"field-create"},React.createElement(TextInput,{placeholder:"Field Name"}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(){}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(i){_this7.removeField(i)}}):null," ",React.createElement(AddAlt20,{onClick:function(){_this7.addField()}}));fieldList.push(element)}),fieldList}},{key:"getExistingRelationShipTemplate",value:function(){var _this8=this,OrderedListComp=OrderedList(),relationships=this.props.schemaFields?this.props.schemaFields:[],modelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);relationships=relationships.filter(function(item){return item.parent==modelNameValue&&"one2many"==item.type});var selectedRelationships=[],selectedField=null,selectedFieldInfo=null;selectedRelationships.push(React.createElement(SelectItem,{value:"none",text:"Select Relationship"})),relationships.map(function(item){selectedRelationships.push(React.createElement(SelectItem,{value:item.to+"@@"+item.text,text:item.text}))});var selectRelationShipField=null;if(this.state.selectedRelationShip){var fieldsInRelatedModel=this.props.schemaFields?this.props.schemaFields:[],selectFieldsInRelatedModel=[];(fieldsInRelatedModel=fieldsInRelatedModel.filter(function(item){return item.parent==_this8.state.selectedRelationShip.table&&"field"==item.type})).map(function(item){"id"!=item.text&&"uid"!=item.text&&selectFieldsInRelatedModel.push({id:item.text+"@@"+item.datatype,text:item.text})}),selectedField=React.createElement(MultiSelect,{label:"Select Fields",invalid:!1,invalidText:"Invalid Selection",onChange:function(evt){return _this8.setState({selectedFields:evt.selectedItems})},items:selectFieldsInRelatedModel,itemToString:function(item){return item.text}})}else selectRelationShipField=React.createElement("div",{style:{position:"absolute",left:"40%",top:"40%"}},React.createElement(Select,{labelText:"Select Relationship",onChange:function(e){e.target.value&&e.target.value.indexOf("@@")>-1&&_this8.setState({selectedRelationShip:{table:e.target.value.split("@@")[0],name:e.target.value.split("@@")[1]}})}},selectedRelationships));this.state.selectedFields&&this.state.selectedFields.length>0&&(selectedFieldInfo=React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected RelationShip"),React.createElement("ul",null,React.createElement("li",null,"Name : ",this.state.selectedRelationShip.table)),React.createElement("br",null),React.createElement("h4",null,"Selected Fields"),React.createElement(OrderedListComp,{data:this.state.selectedFields,labelAttr:"text",updatedList:function(data){return _this8.setState({selectedFields:data})}})));var pageParametersEl=null,ParamPicker=PageParameter();if(this.state.selectedRelationShip){pageParametersEl=React.createElement(ParamPicker,{updateProps:function(data){return _this8.setState({pageParameters:data})},parentPageParams:{recordid:"Parent Record ID"},widgetData:this.props.widgetData,params:["recordid"]})}var RecordLookup=SrsReference(),editPageProps={title:"Choose Edit Page",tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:JSON.stringify({where:{Type:"EditView"}}),searchfields:"Name",onChange:function(id){_this8.setState({selectedEditPageId:id})}},createPageProps={title:"Choose Create Page",tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:JSON.stringify({where:{Type:"CreateView"}}),searchfields:"Name",onChange:function(id){_this8.setState({selectedCreatePageId:id})}},fieldsAndFilter=this.state.selectedRelationShip?React.createElement(Tabs,{selected:0},React.createElement(Tab,{label:"General"},React.createElement("div",{style:{marginTop:10}},React.createElement(TextInput,{labelText:"List Title",placeholder:"Enter title...",onChange:function(e){_this8.setState({listTitle:e.target.value})}}),React.createElement(NumberInput,{label:"Page Size",value:10,onChange:function(e){_this8.setState({selectedPageSize:e.target.value})}}),React.createElement(RecordLookup,editPageProps),React.createElement(RecordLookup,createPageProps))),React.createElement(Tab,{label:"Field Selection"},React.createElement("div",{style:{marginTop:10}},selectedField,selectedFieldInfo)),React.createElement(Tab,{label:"Apply Filter"},this.state.selectedRelationShip?React.createElement("srs-filter",{maxheight:"15rem",style:{position:"absolute",left:"20%"},tableName:this.state.selectedRelationShip.table}):null),React.createElement(Tab,{label:"Related Record"},React.createElement("div",{style:{display:"inline-flex",position:"absolute",left:"30%",marginTop:20}},pageParametersEl))):null;return React.createElement(React.Fragment,null,selectRelationShipField,fieldsAndFilter,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this8.optionSelected="home",_this8.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this8.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this8.handleSelectedRelationship()}},"Select")))}},{key:"getSimpleListTemplate",value:function(){var _this9=this,OrderedListComp=OrderedList(),tableItems=(this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),[]);tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables&&this.props.schemaTables.sort().map(function(schemaTable,indx){tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTable}))});var selectedField=null,selectedFieldInfo=null,selectedTableEl=null;if(this.state.selectedTable){var fieldItems=[],fields=this.props.schemaFields?this.props.schemaFields:[];(fields=fields.filter(function(item){return item.parent==_this9.state.selectedTable&&"field"==item.type})).map(function(item){"id"!=item.text&&"uid"!=item.text&&fieldItems.push({id:item.text+"@@"+item.datatype,text:item.text})}),selectedField=React.createElement(MultiSelect,{label:"Select Fields",invalid:!1,invalidText:"Invalid Selection",onChange:function(evt){return _this9.setState({selectedFields:evt.selectedItems})},items:fieldItems,itemToString:function(item){return item.text}})}else selectedTableEl=React.createElement("div",{style:{position:"absolute",left:"40%",top:"40%"}},React.createElement(Select,{labelText:"Choose a table",onChange:function(e){_this9.setState({selectedTable:e.target.value})}},tableItems));this.state.selectedFields&&this.state.selectedFields.length>0&&(selectedFieldInfo=React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected Fields"),React.createElement(OrderedListComp,{data:this.state.selectedFields,labelAttr:"text",updatedList:function(data){return _this9.setState({selectedFields:data})}})));var RecordLookup=SrsReference(),editPageProps={tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:{where:{Type:"EditView"}},searchfields:"Name",onChange:function(id){_this9.setState({selectedEditPageId:id})}},createPageProps={tablename:"MetaSlide",displayfield:"Name",secondarydisplayfield:"Scope",filter:{where:{Type:"CreateView"}},searchfields:"Name",onChange:function(id){_this9.setState({selectedCreatePageId:id})}},fieldsAndFilter=this.state.selectedTable?React.createElement(Tabs,{selected:0},React.createElement(Tab,{label:"General"},React.createElement("div",{style:{marginTop:10}},React.createElement(TextInput,{labelText:"List Title",placeholder:"Enter title...",onChange:function(e){_this9.setState({listTitle:e.target.value})}}),React.createElement(NumberInput,{label:"Page Size",value:10,onChange:function(e){_this9.setState({selectedPageSize:e.target.value})}}),React.createElement(RecordLookup,editPageProps),React.createElement(RecordLookup,createPageProps))),React.createElement(Tab,{label:"Field Selection"},React.createElement("div",{style:{marginTop:10}},selectedField,selectedFieldInfo)),React.createElement(Tab,{label:"Apply Filter"},this.state.selectedTable?React.createElement("srs-filter",{maxheight:"15rem",style:{position:"absolute",left:"20%"},tableName:this.state.selectedTable}):null)):null;return React.createElement(React.Fragment,null,selectedTableEl,fieldsAndFilter,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this9.optionSelected="home",_this9.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this9.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this9.handleSimpleList()}},"Select")))}},{key:"getNewRelationShipWithNewModel",value:function(){var _this10=this,template=null;if(this.state.modelCreated)template=this.getNewRelationShipWithExistingModel(this.getModelName(this.state.modelName,this.state.modelScope));else{var fieldList=[],length=this.state.fieldList.length;this.state.fieldList.forEach(function(field,indx){var element=React.createElement("div",{className:"field-create"},React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){(fieldList=_this10.state.fieldList)[indx].id=e.target.value,_this10.setState({fieldList:fieldList})}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){(fieldList=_this10.state.fieldList)[indx].datatype=e.target.value,_this10.setState({fieldList:fieldList})}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(indx){_this10.removeField(indx)}}):null," ",React.createElement(AddAlt20,{onClick:function(e){_this10.addField()}}));fieldList.push(element)}),template=React.createElement("div",null,React.createElement(TextInput,{placeholder:"Model Name",onChange:function(e){_this10.setState({modelName:e.target.value})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",onChange:function(e){_this10.setState({modelScope:e.target.value})}})," ",React.createElement("br",null),fieldList.map(function(element){return element}),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this10.optionSelected="home",_this10.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){_this10.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(e){var _ref4,self=_this10;$qry.waituntil("model.upsert",_this10.getModelName(_this10.state.modelName,_this10.state.modelScope)).then((_ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(result){return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,self.updateSchema();case 2:_this10.setState({modelCreated:!0,targetModel:_this10.getModelName(_this10.state.modelName,_this10.state.modelScope)});case 3:case"end":return _context4.stop()}},_callee4,_this10)})),function(_x){return _ref4.apply(this,arguments)})),$script.getscript("createModel").then(function(_ref5){(0,_ref5.default)(_this10.state.modelName,_this10.state.modelScope,_this10.state.fieldList).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+_this10.state.modelName+"_"+_this10.state.modelScope+" updated."})})})}},"Create")))}return template}},{key:"getNewRelationShipWithExistingModel",value:function(modelNameValue){var _this11=this,tableItems=[];tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables&&this.props.schemaTables.sort().map(function(schemaTable,indx){tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTable}))});var targetModelFields=this.props.schemaFields?this.props.schemaFields:[],targetModel=modelNameValue||this.state.targetModel;targetModelFields=targetModelFields.filter(function(item){return item.parent==targetModel&&"field"==item.type});var targetModelFieldItems=[];targetModelFieldItems.push(React.createElement(SelectItem,{value:"none",text:"Select Field"})),targetModelFields.map(function(item){"id"!=item.text&&targetModelFieldItems.push(React.createElement(SelectItem,{value:item.id,text:item.text}))});var targetModelWidget=null;targetModelWidget=modelNameValue?React.createElement(TextInput,{placeholder:"Target Model",value:modelNameValue}):React.createElement(Select,{labelText:"Target Model",onChange:function(e){_this11.setState({targetModel:e.target.value})}},tableItems);var formContent=null,foreignKeyField=null;switch(this.state.foreignKeyType){case"existing":foreignKeyField=React.createElement(Select,{labelText:"Foreign Key",onChange:function(e){_this11.setState({foreignKey:e.target.value})}},targetModelFieldItems);break;case"new":foreignKeyField=React.createElement(TextInput,{labelText:"Foreign Key",value:this.state.foreignKey,onChange:function(e){_this11.setState({foreignKey:e.target.value})}})}return formContent=this.state.relationShipcreated?this.getExistingRelationShipTemplate(!0):React.createElement(React.Fragment,null,React.createElement(TextInput,{labelText:"Relationship Name",placeholder:"Relatinship Name",onChange:function(e){_this11.setState({relationshipName:e.target.value})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Source Model",value:this.getModelName(this.props.activePage.model,this.props.activePage.modelscope),disabled:!0})," ",React.createElement("br",null),targetModelWidget,React.createElement("br",null),React.createElement(Select,{labelText:"Choose Foreign Key from",defaultValue:this.state.foreignKeyType,onChange:function(e){_this11.setState({foreignKeyType:e.target.value})}},React.createElement(SelectItem,{value:"existing",text:"Existing Field"}),React.createElement(SelectItem,{value:"new",text:"New Field"})),React.createElement("br",null),foreignKeyField,React.createElement(TextInput,{labelText:"Foreign key Alias",placeholder:"Alias",onChange:function(e){_this11.setState({relationship_alias:e.target.value})}})," ",React.createElement("br",null),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this11.optionSelected="home",_this11.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this11.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var self=_this11,targetModel=self.state.targetModel,targetModelName=targetModel,targetModelScope="mmf";if(!self.state.foreignKey||self.state.foreignKey.indexOf(" ")>-1)_this11.props.addErrorMessage({title:"Error - ",subtitle:"Foreign Key field name contains special characters. Please remove and try again. "});else{if(targetModel.indexOf("_")>-1){var targetModelParts=targetModel.split("_");targetModelName=targetModelParts.slice(0,targetModelParts.length-1).join("_"),targetModelScope=targetModelParts.slice(targetModelParts.length-1).join()}var _ref8,_ref6;"existing"==self.state.foreignKeyType?($qry.waituntil("relationship.upsert",_this11.state.relationshipName).then((_ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(result){return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,self.updateSchema();case 2:self.setState({relationShipcreated:!0,selectedRelationShip:{table:targetModel,name:_this11.state.relationshipName}});case 3:case"end":return _context5.stop()}},_callee5,_this11)})),function(_x2){return _ref6.apply(this,arguments)})),$script.getscript("mmf.createRelationship").then(function(_ref7){var createRelationshipFn=_ref7.default,targetModel=self.state.modelName?self.getModelName(self.state.modelName,self.state.modelScope):self.state.targetModel,sourceModelNameValue=self.getModelName(self.props.activePage.model,self.props.activePage.modelscope);createRelationshipFn(self.state.relationshipName,sourceModelNameValue,targetModel,"hasMany",self.state.foreignKey,self.state.relationship_alias).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Relationship "+self.state.relationshipName+" created."})})})):($qry.waituntil("model.upsert",targetModel).then((_ref8=_asyncToGenerator(_regeneratorRuntime.mark(function _callee7(result){return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,self.updateSchema();case 2:$qry.waituntil("relationship.upsert",_this11.state.relationshipName).then(function(){var _ref9=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(result){return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,self.updateSchema();case 2:self.setState({relationShipcreated:!0,selectedRelationShip:{table:targetModel,name:_this11.state.relationshipName}});case 3:case"end":return _context6.stop()}},_callee6,_this11)}));return function(_x4){return _ref9.apply(this,arguments)}}()),$script.getscript("mmf.createRelationship").then(function(_ref10){var createRelationshipFn=_ref10.default,targetModel=self.state.modelName?self.getModelName(self.state.modelName,self.state.modelScope):self.state.targetModel,sourceModelNameValue=self.getModelName(self.props.activePage.model,self.props.activePage.modelscope);createRelationshipFn(self.state.relationshipName,sourceModelNameValue,targetModel,"hasMany",self.state.foreignKey,self.state.relationship_alias).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Relationship "+self.state.relationshipName+" created."})})});case 4:case"end":return _context7.stop()}},_callee7,_this11)})),function(_x3){return _ref8.apply(this,arguments)})),$script.getscript("addFields2Model").then(function(_ref11){(0,_ref11.default)(targetModelName,targetModelScope,[{name:self.state.foreignKey,type:"String"}]).then(function(data){self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+ttargetModelName+"_"+targetModelScope+" updated."})})}))}}},"Create"))),React.createElement("div",null,formContent)}},{key:"loadSlides",value:function(){var _ref12=_asyncToGenerator(_regeneratorRuntime.mark(function _callee8(){var pages,pageDetails,pageData,_this12=this;return _regeneratorRuntime.wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return pages=[],_context8.next=3,$qry.run("mmf.getAllSlides",{Scope:this.props.currentscope});case 3:pageDetails=_context8.sent,pageData=pageDetails&&pageDetails.slides?pageDetails.slides:{},Object.keys(pageData).map(function(pageName){var pageObj=pageData[pageName];pageObj.props&&(Object.keys(pageObj.props).map(function(propKey){switch(pageObj.props[propKey].Name){case"ModelName":pageObj.props[propKey].Value;break;case"ModelScope":pageObj.props[propKey].Value}}),pageObj.uid!=_this12.props.activePage.id&&pages.push(pageObj))}),this.setState({pages2Show:pages});case 7:case"end":return _context8.stop()}},_callee8,this)}));return function(){return _ref12.apply(this,arguments)}}()},{key:"getExistingFieldsTemplate",value:function(fromRelationShip,relationshipModelName){var _this13=this,OrderedListComp=OrderedList(),items=this.props.schemaFields?this.props.schemaFields:[],targetModelNameValue=this.getModelName(this.props.activePage.model,this.props.activePage.modelscope);fromRelationShip&&(targetModelNameValue=relationshipModelName);var selectItems=[];(items=items.filter(function(item){return item.parent==targetModelNameValue&&"field"==item.type})).map(function(item){"id"!=item.text&&"uid"!=item.text&&selectItems.push({id:item.text+"@@"+item.datatype,text:item.text})});var multiSelectItems=React.createElement(MultiSelect,{label:"Select Fields",invalid:!1,invalidText:"Invalid Selection",onChange:function(evt){return _this13.setState({selectedFields:evt.selectedItems})},items:selectItems,itemToString:function(item){return item.text}});return React.createElement(React.Fragment,null,multiSelectItems,this.state.selectedField?React.createElement("div",{className:"field-temp"},React.createElement("h4",null,"Selected Fields"),React.createElement(OrderedListComp,{data:this.state.selectedFields,labelAttr:"text",updatedList:function(data){return _this13.setState({selectedFields:data})}})):null,React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this13.optionSelected="home",_this13.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this13.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){var active_widget_field_value="";if(_this13.props.active_widget_temp_field_value&&_this13.props.active_widget_temp_field_value.length>0)_this13.props.active_widget_temp_field_value.push(_this13.state.selectedField),active_widget_field_value="@@["+_this13.props.active_widget_temp_field_value.join(".")+"]";else if(active_widget_field_value&&active_widget_field_value.indexOf("@@[")>-1){var propVal=active_widget_field_value.split("@@[")[1];(propVal=(propVal=propVal.substr(0,propVal.length-1)).split(".")).push(_this13.state.selectedField),active_widget_field_value="@@["+propVal.join(".")+"]"}else active_widget_field_value="@@["+_this13.state.selectedField+"]";_this13.props.updateStore({updates:{active_widget_field_value:active_widget_field_value,active_widget_temp_field_value:[],showpreview:!1}})}},"Select")))}},{key:"getExistingPageTemplate",value:function(){var _this14=this,pageToRender=[];pageToRender.push(React.createElement(SelectItem,{labelText:"Choose the page to insert",value:"none",text:"Select Page"})),this.state.pages2Show?this.state.pages2Show.map(function(page){pageToRender.push(React.createElement(SelectItem,{value:page.uid,text:page.Name}))}):this.loadSlides();var pageParametersEl=null,ParamPicker=PageParameter();if(this.state.selectedPage){var matchingPage=this.state.pages2Show.filter(function(page2check){return page2check.uid==_this14.state.selectedPage});if(matchingPage&&1==matchingPage.length){var isParentPageModelDriven=this.props.activePage&&this.props.activePage.pageType&&"FreeForm"!=this.props.activePage.pageType,currentPageParams=[];"CreateView"!=matchingPage[0].Type&&"EditView"!=matchingPage[0].Type||currentPageParams.push("recordid"),matchingPage[0].props&&Object.keys(matchingPage[0].props).map(function(propId){"ModelName"!=matchingPage[0].props[propId].Name&&"ModelScope"!=matchingPage[0].props[propId].Name&&currentPageParams.push(matchingPage[0].props[propId].Name)}),pageParametersEl=React.createElement(ParamPicker,{updateProps:function(data){return _this14.setState({pageParameters:data})},parentPageParams:isParentPageModelDriven?{recordid:"Parent Record"}:this.props.activePage&&this.props.activePage.props||{},widgetData:this.props.widgetData,params:currentPageParams})}}return React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Choose the page",onChange:function(e){_this14.setState({selectedPage:e.target.value})}},pageToRender),React.createElement("br",null),React.createElement("div",{style:{position:"absolute",left:"20%",display:"inline-grid"}},pageParametersEl?React.createElement("label",{className:"bx--label",style:{fontSize:"medium"}},"Page Parameters"):null,pageParametersEl),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this14.optionSelected="home",_this14.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this14.handleSelectPage()}},"Select")))}},{key:"getDefaultTemplate",value:function(){var simpleListStyle={width:"45%",justifyContent:"center",padding:2};return this.props.activePage.model&&this.props.activePage.modelscope||(simpleListStyle.width="100%",simpleListStyle.left="50%"),React.createElement("div",{style:{display:"inline-flex",position:"absolute",left:"20%"}},React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(Icon1,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Insert a Page?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"Got your page ready? If not, create a page first and then insert it here. BTW, you may be asked to wire the params with environment for interactive rendering."),React.createElement(Button,{style:{position:"absolute",bottom:"1rem",left:"5rem"},onClick:this.handleConfigurationChange,value:"existing_page"},"Choose the page")),React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(Icon2,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Insert a List?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"You can insert a related list using an existing relationship or create one from here. Also, you are free to build a non-related simple list by choosing the model and applying the filter."),React.createElement("div",{style:{display:"inline-flex",position:"absolute",bottom:"1rem"}},React.createElement(Button,{style:simpleListStyle,onClick:this.handleConfigurationChange,value:"simple_list"},"Simple List"),this.props.activePage.model&&this.props.activePage.modelscope?React.createElement(OverflowMenu,{style:{backgroundColor:"rgb(0, 98, 255)",color:"rgb(255, 255, 255)",fontSize:"medium",borderWidth:3,borderStyle:"solid",borderColor:"transparent",width:"55%",height:"3rem",padding:3,marginLeft:"1rem"},renderIcon:function(){return React.createElement("div",{style:{padding:"0 1rem"}},"Related List")},"data-floating-menu-container":"true"},React.createElement(OverflowMenuItem,{itemText:"Existing Relationship",onClick:this.handleConfigurationChange,value:"existing_relationship"}),React.createElement(OverflowMenuItem,{itemText:"New Relationship",onClick:this.handleConfigurationChange,value:"new_relationship_with_existing_model"}),React.createElement(OverflowMenuItem,{itemText:"New Model",onClick:this.handleConfigurationChange,value:"new_relationship_with_new_model"})):null)))}},{key:"getTemplate",value:function(){var template=null;switch(this.optionSelected){case"existing_relationship":template=this.getExistingRelationShipTemplate();break;case"new_relationship_with_existing_model":template=this.getNewRelationShipWithExistingModel();break;case"new_relationship_with_new_model":template=this.getNewRelationShipWithNewModel();break;case"existing_page":template=this.getExistingPageTemplate();break;case"simple_list":template=this.getSimpleListTemplate();break;default:template=this.getDefaultTemplate()}return template}},{key:"getBreadCrumb",value:function(){var breadCrumbKey=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.key:"",breadCrumbStage=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.stage:"",breadCrumbElements=[];return breadCrumbKey?(breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,"Choose a configuration"))),this.breadCrumbPaths[breadCrumbKey].map(function(breadCrumbItem,indx){breadCrumbItem.name==breadCrumbStage?breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,breadCrumbItem.value))):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,breadCrumbItem.value)))})):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,"Choose a configuration"))),breadCrumbElements}},{key:"render",value:function(){var template=this.getTemplate(),breadCrumb=this.getBreadCrumb();return React.createElement("div",{style:{overflow:"hidden"}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ShowTabMappingDialog/Style.css"); @import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement("nav",{class:"bx--breadcrumb bx--breadcrumb--no-trailing-slash","aria-label":"breadcrumb",style:{position:"sticky",top:0}},breadCrumb),React.createElement("div",{className:"rel-options",style:{padding:10,height:"25rem",overflow:"scroll",marginLeft:"20%",width:"70%"}},template))}}]),_ShowTabMappingDialog_}(React.Component),_export("ShowTabMappingDialog",ShowTabMappingDialog=function(props){return _ShowTabMappingDialog_}),_export("ShowTabMappingDialog",ShowTabMappingDialog)}}}),System.register("component/studio/ShowTableMappingDialog.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","carbon-addons-cloud-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","@carbon/icons-react/lib/new-tab/32","@carbon/icons-react/lib/renew/32"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,Select,SelectItem,TextInput,Card,AddAlt20,SubAlt20,NewTab32,Renew32,_ShowTableMappingDialog_,ShowTableMappingDialog,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Breadcrumb,_carbonComponentsReact.BreadcrumbItem,Button=_carbonComponentsReact.Button,_carbonComponentsReact.FormGroup,_carbonComponentsReact.RadioButtonGroup,_carbonComponentsReact.RadioButton,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.FormLabel,_carbonComponentsReact.Tooltip},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonIconsReactLibNewTab){NewTab32=_carbonIconsReactLibNewTab.default},function(_carbonIconsReactLibRenew){Renew32=_carbonIconsReactLibRenew.default}],execute:function(){_ShowTableMappingDialog_=function(_React$Component){function _ShowTableMappingDialog_(props){_classCallCheck(this,_ShowTableMappingDialog_);var _this=_possibleConstructorReturn(this,(_ShowTableMappingDialog_.__proto__||Object.getPrototypeOf(_ShowTableMappingDialog_)).call(this,props));return _this.state={templateChanged:!1,selectedModel:null,modelName:null,scope:_this.props.currentscope?_this.props.currentscope:"",fieldList:[{datatype:"",id:"",parent:"",text:"",type:""}],currentBreadCrumbPath:{}},_this.getModelName=_this.getModelName.bind(_this),_this.breadCrumbPaths={home:[{name:"",value:""}],existing_model:[{name:"model_selection",value:"Model Selection"}],new_model:[{name:"model_field",value:"Create and select Model"}]},_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this.handleConfigurationChange=_this.handleConfigurationChange.bind(_this),_this.removeSpecialCharacters=_this.removeSpecialCharacters.bind(_this),_this}return _inherits(_ShowTableMappingDialog_,_React$Component),_createClass(_ShowTableMappingDialog_,[{key:"handleConfigurationChange",value:function(e){this.optionSelected=e.target.value?e.target.value:e.currentTarget.value?e.currentTarget.value:"",this.handleNext()}},{key:"handleNext",value:function(){this.setState({templateChanged:!0,currentBreadCrumbPath:{key:this.optionSelected,stage:this.breadCrumbPaths[this.optionSelected][0].name}})}},{key:"getDefaultTemplate",value:function(){return React.createElement("div",{style:{display:"inline-flex",position:"absolute",left:"20%"}},React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(Renew32,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Already have the model?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"Got your model ready? Do you know that you can edit the model like adding new fields or removing stale ones before selecting it?"),React.createElement(Button,{style:{position:"absolute",bottom:"1rem",left:"10%"},onClick:this.handleConfigurationChange,value:"existing_model"},"Select Model")),React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(NewTab32,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Build a model?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"Do not have the model yet? Do not worry, just create it right here and select the same to proceed further to build your page that uses the fields of the model."),React.createElement(Button,{style:{position:"absolute",bottom:"1rem",right:"10%"},onClick:this.handleConfigurationChange,value:"new_model"},"Create Model")))}},{key:"removeField",value:function(index){var fields=this.state.fieldList;fields.splice(index,1),this.setState({fieldList:fields})}},{key:"addField",value:function(){var fields=this.state.fieldList;fields.push({datatype:"",id:"",parent:"",text:"",type:"field"}),this.setState({fieldList:fields})}},{key:"getModelName",value:function(name,scope){return"mmf"==scope&&name.startsWith("Meta")?name:name+"_"+scope}},{key:"updateFieldListName",value:function(e,findex){var value=this.removeSpecialCharacters(e.target.value),fields=this.state.fieldList.slice(),field=fields[findex];field.text=value,field.id=value,this.setState({fieldName:value,fieldList:fields})}},{key:"updateFieldListType",value:function(e,findex){var value=e.target.value,fields=this.state.fieldList;fields[findex].datatype=value,this.setState({fieldList:fields})}},{key:"getFieldList",value:function(){var _this2=this,length=this.state.fieldList.length,fieldList=[];return this.state.fieldList.forEach(function(field,i){if(!field.text&&!field.datatype||"id"==field.text||"uid"==field.text||field.text.startsWith("srs_")){var _element=React.createElement("div",{className:"model-create"},React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){_this2.updateFieldListName(e,i)}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){_this2.updateFieldListType(e,i)}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){_this2.removeField(i)}}):null," ",React.createElement(AddAlt20,{onClick:function(){_this2.addField()}}));fieldList.push(_element)}else{var element=React.createElement("div",{className:"model-create"},React.createElement(TextInput,{placeholder:"Field Name",value:field.text,onChange:function(e){_this2.updateFieldListName(e,i)}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",defaultValue:field.datatype,onChange:function(e){_this2.updateFieldListType(e,i)}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){_this2.removeField(i)}}):null," ",React.createElement(AddAlt20,{onClick:function(){_this2.addField()}}));fieldList.push(element)}}),fieldList}},{key:"handleUpdate",value:function(){this.upsertModel()}},{key:"handleSelect",value:function(){var activepage=this.props.activePage;activepage.model=this.state.selectedModel,activepage.modelscope=this.state.selectedModelScope?this.state.selectedModelScope:this.props.currentscope,this.props.updateStore({updates:{activePage:activepage,showpreview:!1}})}},{key:"updateSchema",value:function(){var _this3=this;return new Promise(function(resolve,reject){var self=_this3;$script.runAtServer("mmf.getSchemaData").then(function(schemaData){self.props.updateStore({updates:{schema:schemaData}}),resolve()})})}},{key:"createModel",value:function(){this.upsertModel()}},{key:"createAndSelectModel",value:function(){var _this4=this;this.upsertModel(function(model,scope){var activepage=_this4.props.activePage;activepage.model=model,activepage.modelscope=scope,_this4.props.updateStore({updates:{activePage:activepage,showpreview:!1}})})}},{key:"upsertModel",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(cb){var self,modelName,scope,fieldList,fieldIndx,_this5=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(self=this,modelName=this.state.selectedModel,scope=this.state.selectedModelScope||this.props.currentscope,!(fieldList=this.state.fieldList)){_context2.next=14;break}_context2.t0=_regeneratorRuntime.keys(fieldList);case 6:if((_context2.t1=_context2.t0()).done){_context2.next=14;break}if(fieldIndx=_context2.t1.value,fieldList[fieldIndx].type){_context2.next=11;break}return self.props.addErrorMessage({title:"Error - ",subtitle:"Type is mandatory for field "+fieldList[fieldIndx].text}),_context2.abrupt("return");case 11:fieldList[fieldIndx].type&&"datatime"==fieldList[fieldIndx].type.toLowerCase()&&(fieldList[fieldIndx].type="date"),_context2.next=6;break;case 14:$qry.waituntil("model.upsert",this.getModelName(modelName,scope)).then(function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(result){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,self.updateSchema();case 2:cb&&cb(modelName,scope);case 3:case"end":return _context.stop()}},_callee,_this5)}));return function(_x2){return _ref2.apply(this,arguments)}}()),$script.getscript("createModel").then(function(_ref3){(0,_ref3.default)(modelName,scope,fieldList).then(function(data){cb?self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+modelName+" created and selected."}):self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+modelName+" updated."})})});case 16:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref.apply(this,arguments)}}()},{key:"handleCancel",value:function(){this.props.updateStore({updates:{showpreview:!1}})}},{key:"getExistingModelTemplate",value:function(){var _this6=this,fieldList=this.getFieldList(),tableItems=[];(tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables)&&this.props.schemaTables.sort(function(a,b){return a==b?0:a>b?1:-1}).map(function(schemaTable,indx){var schemaNameArry=schemaTable.indexOf("_")>-1?schemaTable.split("_"):[schemaTable],schemaTableLabel=(schemaNameArry.length>1?schemaNameArry.slice(0,schemaNameArry.length-1):schemaNameArry[0])+"["+(schemaNameArry.length>1?schemaNameArry[schemaNameArry.length-1]:"mmf")+"]";tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTableLabel}))});return React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Model",onChange:function(e){var modelName=e.target.value,updatedList=[],schemaTableName="",schemaTableScope="";if("none"==modelName)updatedList=[{datatype:"",id:"",parent:"",text:"",type:""}],schemaTableName=modelName;else{var targetModelFields=_this6.props.schemaFields?_this6.props.schemaFields:[];updatedList=0==(targetModelFields=targetModelFields.filter(function(item){return item.parent==modelName&&"field"==item.type})).length?_this6.state.fieldList:targetModelFields;var schemaNameArry=modelName.indexOf("_")>-1?modelName.split("_"):[modelName];schemaTableName=schemaNameArry.length>1?schemaNameArry.slice(0,schemaNameArry.length-1).join("_"):schemaNameArry[0],schemaTableScope=schemaNameArry.length>1?schemaNameArry[schemaNameArry.length-1]:"mmf"}_this6.setState({selectedModel:schemaTableName,selectedModelScope:schemaTableScope,fieldList:updatedList})}},tableItems),React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",disabled:!0,value:this.state.selectedModelScope})," ",React.createElement("br",null),React.createElement("div",{className:"FieldList"},fieldList.map(function(element){return element})),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this6.optionSelected="home",_this6.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleUpdate()}},"Update"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleSelect()}},"Select")))}},{key:"removeSpecialCharacters",value:function(val){return val.replace(/[^a-zA-Z0-9]/g,"_")}},{key:"getNewModelTemplate",value:function(){var _this7=this,fieldList=this.getFieldList();return React.createElement(React.Fragment,null,React.createElement(TextInput,{value:this.state.selectedModel,placeholder:"Model Name",onChange:function(e){_this7.setState({selectedModel:_this7.removeSpecialCharacters(e.target.value)})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",value:this.props.currentscope,disabled:!0,onChange:function(e){_this7.setState({selectedModelScope:e.target.value})}})," ",React.createElement("br",null),React.createElement("div",{className:"FieldList"},fieldList.map(function(element){return element})),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this7.optionSelected="home",_this7.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this7.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this7.createAndSelectModel()}},"Create & Select")))}},{key:"getTemplate",value:function(){var template=null;switch(this.optionSelected){case"existing_model":template=this.getExistingModelTemplate();break;case"new_model":template=this.getNewModelTemplate();break;default:template=this.getDefaultTemplate()}return template}},{key:"getBreadCrumb",value:function(){var breadCrumbKey=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.key:"",breadCrumbStage=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.stage:"",breadCrumbElements=[];return breadCrumbKey?(breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,"Choose a configuration"))),this.breadCrumbPaths[breadCrumbKey].map(function(breadCrumbItem,indx){breadCrumbItem.name==breadCrumbStage?breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,breadCrumbItem.value))):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,breadCrumbItem.value)))})):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,"Choose a configuration"))),breadCrumbElements}},{key:"render",value:function(){var template=this.getTemplate(),breadCrumb=this.getBreadCrumb();return React.createElement("div",{style:{padding:10}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ShowTableMappingDialog/Style.css"); @import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement("nav",{class:"bx--breadcrumb bx--breadcrumb--no-trailing-slash","aria-label":"breadcrumb"},breadCrumb),React.createElement("div",{className:"rel-options"},template))}}]),_ShowTableMappingDialog_}(React.Component),_export("ShowTableMappingDialog",ShowTableMappingDialog=function(props){return _ShowTableMappingDialog_}),_export("ShowTableMappingDialog",ShowTableMappingDialog),_export("default",ShowTableMappingDialog),_export("states",states=[{KeyName:"active_widget_field_value",AccessPath:"active_widget_field_value",DefaultValue:'{"active_widget_field_value": []}'},{KeyName:"schemaTables",AccessPath:"schema.tables",DefaultValue:'{"schema": {"tables": []}}'},{KeyName:"activePage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema": {}}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"schemaFields",AccessPath:"schema.fields",DefaultValue:'{"schema": {"fields": []}}'},{KeyName:"scopes",AccessPath:"scopes",DefaultValue:'{"scopes": {}}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/ShowTableMappingDialog/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","carbon-addons-cloud-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","@carbon/icons-react/lib/new-tab/32","@carbon/icons-react/lib/renew/32"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,Select,SelectItem,TextInput,Card,AddAlt20,SubAlt20,NewTab32,Renew32,_ShowTableMappingDialog_,ShowTableMappingDialog;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Breadcrumb,_carbonComponentsReact.BreadcrumbItem,Button=_carbonComponentsReact.Button,_carbonComponentsReact.FormGroup,_carbonComponentsReact.RadioButtonGroup,_carbonComponentsReact.RadioButton,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.FormLabel,_carbonComponentsReact.Tooltip},function(_carbonAddonsCloudReact){Card=_carbonAddonsCloudReact.Card},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonIconsReactLibNewTab){NewTab32=_carbonIconsReactLibNewTab.default},function(_carbonIconsReactLibRenew){Renew32=_carbonIconsReactLibRenew.default}],execute:function(){_ShowTableMappingDialog_=function(_React$Component){function _ShowTableMappingDialog_(props){_classCallCheck(this,_ShowTableMappingDialog_);var _this=_possibleConstructorReturn(this,(_ShowTableMappingDialog_.__proto__||Object.getPrototypeOf(_ShowTableMappingDialog_)).call(this,props));return _this.state={templateChanged:!1,selectedModel:null,modelName:null,scope:_this.props.currentscope?_this.props.currentscope:"",fieldList:[{datatype:"",id:"",parent:"",text:"",type:""}],currentBreadCrumbPath:{}},_this.getModelName=_this.getModelName.bind(_this),_this.breadCrumbPaths={home:[{name:"",value:""}],existing_model:[{name:"model_selection",value:"Model Selection"}],new_model:[{name:"model_field",value:"Create and select Model"}]},_this.buttonStyle={bottom:20,right:"10%",position:"absolute"},_this.handleConfigurationChange=_this.handleConfigurationChange.bind(_this),_this.removeSpecialCharacters=_this.removeSpecialCharacters.bind(_this),_this}return _inherits(_ShowTableMappingDialog_,_React$Component),_createClass(_ShowTableMappingDialog_,[{key:"handleConfigurationChange",value:function(e){this.optionSelected=e.target.value?e.target.value:e.currentTarget.value?e.currentTarget.value:"",this.handleNext()}},{key:"handleNext",value:function(){this.setState({templateChanged:!0,currentBreadCrumbPath:{key:this.optionSelected,stage:this.breadCrumbPaths[this.optionSelected][0].name}})}},{key:"getDefaultTemplate",value:function(){return React.createElement("div",{style:{display:"inline-flex",position:"absolute",left:"20%"}},React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(Renew32,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Already have the model?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"Got your model ready? Do you know that you can edit the model like adding new fields or removing stale ones before selecting it?"),React.createElement(Button,{style:{position:"absolute",bottom:"1rem",left:"10%"},onClick:this.handleConfigurationChange,value:"existing_model"},"Select Model")),React.createElement(Card,{style:{height:"20rem",width:"20rem",backgroundColor:"white",padding:10,margin:5}},React.createElement(NewTab32,{style:{height:"3rem",width:"3rem",marginLeft:"40%",marginTop:6}}),React.createElement("div",{className:"child",style:{textAlign:"center",fontFamily:"sans-serif",fontSize:"larger",color:"#1e7a2b"}},"Build a model?"),React.createElement("div",{style:{padding:5,fontSize:"small",textAlign:"center",fontStyle:"italic",justifyContent:"center",marginTop:"3rem"}},"Do not have the model yet? Do not worry, just create it right here and select the same to proceed further to build your page that uses the fields of the model."),React.createElement(Button,{style:{position:"absolute",bottom:"1rem",right:"10%"},onClick:this.handleConfigurationChange,value:"new_model"},"Create Model")))}},{key:"removeField",value:function(index){var fields=this.state.fieldList;fields.splice(index,1),this.setState({fieldList:fields})}},{key:"addField",value:function(){var fields=this.state.fieldList;fields.push({datatype:"",id:"",parent:"",text:"",type:"field"}),this.setState({fieldList:fields})}},{key:"getModelName",value:function(name,scope){return"mmf"==scope&&name.startsWith("Meta")?name:name+"_"+scope}},{key:"updateFieldListName",value:function(e,findex){var value=this.removeSpecialCharacters(e.target.value),fields=this.state.fieldList.slice(),field=fields[findex];field.text=value,field.id=value,this.setState({fieldName:value,fieldList:fields})}},{key:"updateFieldListType",value:function(e,findex){var value=e.target.value,fields=this.state.fieldList;fields[findex].datatype=value,this.setState({fieldList:fields})}},{key:"getFieldList",value:function(){var _this2=this,length=this.state.fieldList.length,fieldList=[];return this.state.fieldList.forEach(function(field,i){if(!field.text&&!field.datatype||"id"==field.text||"uid"==field.text||field.text.startsWith("srs_")){var _element=React.createElement("div",{className:"model-create"},React.createElement(TextInput,{placeholder:"Field Name",onChange:function(e){_this2.updateFieldListName(e,i)}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",onChange:function(e){_this2.updateFieldListType(e,i)}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){_this2.removeField(i)}}):null," ",React.createElement(AddAlt20,{onClick:function(){_this2.addField()}}));fieldList.push(_element)}else{var element=React.createElement("div",{className:"model-create"},React.createElement(TextInput,{placeholder:"Field Name",value:field.text,onChange:function(e){_this2.updateFieldListName(e,i)}}),React.createElement(Select,{noLabel:"true",labelText:"Field Type",defaultValue:field.datatype,onChange:function(e){_this2.updateFieldListType(e,i)}},React.createElement(SelectItem,{value:"none",text:"Select Field Type"}),React.createElement(SelectItem,{value:"String",text:"String"}),React.createElement(SelectItem,{value:"Text",text:"Text"}),React.createElement(SelectItem,{value:"Date",text:"Date"}),React.createElement(SelectItem,{value:"Boolean",text:"Boolean"}),React.createElement(SelectItem,{value:"Number",text:"Number"})),length>1?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){_this2.removeField(i)}}):null," ",React.createElement(AddAlt20,{onClick:function(){_this2.addField()}}));fieldList.push(element)}}),fieldList}},{key:"handleUpdate",value:function(){this.upsertModel()}},{key:"handleSelect",value:function(){var activepage=this.props.activePage;activepage.model=this.state.selectedModel,activepage.modelscope=this.state.selectedModelScope?this.state.selectedModelScope:this.props.currentscope,this.props.updateStore({updates:{activePage:activepage,showpreview:!1}})}},{key:"updateSchema",value:function(){var _this3=this;return new Promise(function(resolve,reject){var self=_this3;$script.runAtServer("mmf.getSchemaData").then(function(schemaData){self.props.updateStore({updates:{schema:schemaData}}),resolve()})})}},{key:"createModel",value:function(){this.upsertModel()}},{key:"createAndSelectModel",value:function(){var _this4=this;this.upsertModel(function(model,scope){var activepage=_this4.props.activePage;activepage.model=model,activepage.modelscope=scope,_this4.props.updateStore({updates:{activePage:activepage,showpreview:!1}})})}},{key:"upsertModel",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(cb){var self,modelName,scope,fieldList,fieldIndx,_this5=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(self=this,modelName=this.state.selectedModel,scope=this.state.selectedModelScope||this.props.currentscope,!(fieldList=this.state.fieldList)){_context2.next=14;break}_context2.t0=_regeneratorRuntime.keys(fieldList);case 6:if((_context2.t1=_context2.t0()).done){_context2.next=14;break}if(fieldIndx=_context2.t1.value,fieldList[fieldIndx].type){_context2.next=11;break}return self.props.addErrorMessage({title:"Error - ",subtitle:"Type is mandatory for field "+fieldList[fieldIndx].text}),_context2.abrupt("return");case 11:fieldList[fieldIndx].type&&"datatime"==fieldList[fieldIndx].type.toLowerCase()&&(fieldList[fieldIndx].type="date"),_context2.next=6;break;case 14:$qry.waituntil("model.upsert",this.getModelName(modelName,scope)).then(function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(result){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,self.updateSchema();case 2:cb&&cb(modelName,scope);case 3:case"end":return _context.stop()}},_callee,_this5)}));return function(_x2){return _ref2.apply(this,arguments)}}()),$script.getscript("createModel").then(function(_ref3){(0,_ref3.default)(modelName,scope,fieldList).then(function(data){cb?self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+modelName+" created and selected."}):self.props.addFlashMessage({title:"Successful - ",subtitle:"Model "+modelName+" updated."})})});case 16:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref.apply(this,arguments)}}()},{key:"handleCancel",value:function(){this.props.updateStore({updates:{showpreview:!1}})}},{key:"getExistingModelTemplate",value:function(){var _this6=this,fieldList=this.getFieldList(),tableItems=[];(tableItems.push(React.createElement(SelectItem,{value:"none",text:"Select Table"})),this.props.schemaTables)&&this.props.schemaTables.sort(function(a,b){return a==b?0:a>b?1:-1}).map(function(schemaTable,indx){var schemaNameArry=schemaTable.indexOf("_")>-1?schemaTable.split("_"):[schemaTable],schemaTableLabel=(schemaNameArry.length>1?schemaNameArry.slice(0,schemaNameArry.length-1):schemaNameArry[0])+"["+(schemaNameArry.length>1?schemaNameArry[schemaNameArry.length-1]:"mmf")+"]";tableItems.push(React.createElement(SelectItem,{value:schemaTable,text:schemaTableLabel}))});return React.createElement(React.Fragment,null,React.createElement(Select,{labelText:"Model",onChange:function(e){var modelName=e.target.value,updatedList=[],schemaTableName="",schemaTableScope="";if("none"==modelName)updatedList=[{datatype:"",id:"",parent:"",text:"",type:""}],schemaTableName=modelName;else{var targetModelFields=_this6.props.schemaFields?_this6.props.schemaFields:[];updatedList=0==(targetModelFields=targetModelFields.filter(function(item){return item.parent==modelName&&"field"==item.type})).length?_this6.state.fieldList:targetModelFields;var schemaNameArry=modelName.indexOf("_")>-1?modelName.split("_"):[modelName];schemaTableName=schemaNameArry.length>1?schemaNameArry.slice(0,schemaNameArry.length-1).join("_"):schemaNameArry[0],schemaTableScope=schemaNameArry.length>1?schemaNameArry[schemaNameArry.length-1]:"mmf"}_this6.setState({selectedModel:schemaTableName,selectedModelScope:schemaTableScope,fieldList:updatedList})}},tableItems),React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",disabled:!0,value:this.state.selectedModelScope})," ",React.createElement("br",null),React.createElement("div",{className:"FieldList"},fieldList.map(function(element){return element})),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this6.optionSelected="home",_this6.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleUpdate()}},"Update"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this6.handleSelect()}},"Select")))}},{key:"removeSpecialCharacters",value:function(val){return val.replace(/[^a-zA-Z0-9]/g,"_")}},{key:"getNewModelTemplate",value:function(){var _this7=this,fieldList=this.getFieldList();return React.createElement(React.Fragment,null,React.createElement(TextInput,{value:this.state.selectedModel,placeholder:"Model Name",onChange:function(e){_this7.setState({selectedModel:_this7.removeSpecialCharacters(e.target.value)})}})," ",React.createElement("br",null),React.createElement(TextInput,{placeholder:"Scope",value:this.props.currentscope,disabled:!0,onChange:function(e){_this7.setState({selectedModelScope:e.target.value})}})," ",React.createElement("br",null),React.createElement("div",{className:"FieldList"},fieldList.map(function(element){return element})),React.createElement("div",{style:this.buttonStyle},React.createElement(Button,{onClick:function(){_this7.optionSelected="home",_this7.handleNext()}},"Home"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this7.handleCancel()}},"Cancel"),React.createElement(Button,{style:{marginLeft:5},onClick:function(){_this7.createAndSelectModel()}},"Create & Select")))}},{key:"getTemplate",value:function(){var template=null;switch(this.optionSelected){case"existing_model":template=this.getExistingModelTemplate();break;case"new_model":template=this.getNewModelTemplate();break;default:template=this.getDefaultTemplate()}return template}},{key:"getBreadCrumb",value:function(){var breadCrumbKey=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.key:"",breadCrumbStage=this.state.currentBreadCrumbPath?this.state.currentBreadCrumbPath.stage:"",breadCrumbElements=[];return breadCrumbKey?(breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,"Choose a configuration"))),this.breadCrumbPaths[breadCrumbKey].map(function(breadCrumbItem,indx){breadCrumbItem.name==breadCrumbStage?breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,breadCrumbItem.value))):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item"},React.createElement("span",null,breadCrumbItem.value)))})):breadCrumbElements.push(React.createElement("div",{class:"bx--breadcrumb-item currentPage"},React.createElement("span",null,"Choose a configuration"))),breadCrumbElements}},{key:"render",value:function(){var template=this.getTemplate(),breadCrumb=this.getBreadCrumb();return React.createElement("div",{style:{padding:10}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ShowTableMappingDialog/Style.css"); @import url("/thirdpartylib/carbon-components/carbon-addons.css");'),React.createElement("nav",{class:"bx--breadcrumb bx--breadcrumb--no-trailing-slash","aria-label":"breadcrumb"},breadCrumb),React.createElement("div",{className:"rel-options"},template))}}]),_ShowTableMappingDialog_}(React.Component),_export("ShowTableMappingDialog",ShowTableMappingDialog=function(props){return _ShowTableMappingDialog_}),_export("ShowTableMappingDialog",ShowTableMappingDialog)}}}),System.register("component/studio/SideNavLink.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SideNavLink_,SideNavLink,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodash){_lodash.default}],execute:function(){_SideNavLink_=function(_React$Component){function _SideNavLink_(){return _classCallCheck(this,_SideNavLink_),_possibleConstructorReturn(this,(_SideNavLink_.__proto__||Object.getPrototypeOf(_SideNavLink_)).apply(this,arguments))}return _inherits(_SideNavLink_,_React$Component),_createClass(_SideNavLink_,[{key:"render",value:function(){var _this2=this;return React.createElement("div",{className:"sideNavLink",onClick:function(e){"setter"==_this2.props.mode?_this2.props.updateStore({updates:{activeLink:{name:_this2.props.name,url:_this2.props.href}}}):navigateTo(_this2.props.href)}},this.props.name)}}]),_SideNavLink_}(React.Component),_export("SideNavLink",SideNavLink=function(props){return _SideNavLink_}),_export("SideNavLink",SideNavLink),_export("default",SideNavLink),_export("states",states=[{KeyName:"activeLink",AccessPath:"navigation.${widgetid}",DefaultValue:'{"navigation": {"${widgetid}": {}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SideNavLink/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SideNavLink_,SideNavLink;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodash){_lodash.default}],execute:function(){_SideNavLink_=function(_React$Component){function _SideNavLink_(){return _classCallCheck(this,_SideNavLink_),_possibleConstructorReturn(this,(_SideNavLink_.__proto__||Object.getPrototypeOf(_SideNavLink_)).apply(this,arguments))}return _inherits(_SideNavLink_,_React$Component),_createClass(_SideNavLink_,[{key:"render",value:function(){var _this2=this;return React.createElement("div",{className:"sideNavLink",onClick:function(e){"setter"==_this2.props.mode?_this2.props.updateStore({updates:{activeLink:{name:_this2.props.name,url:_this2.props.href}}}):navigateTo(_this2.props.href)}},this.props.name)}}]),_SideNavLink_}(React.Component),_export("SideNavLink",SideNavLink=function(props){return _SideNavLink_}),_export("SideNavLink",SideNavLink)}}}),System.register("component/studio/SlideSelectionPanel.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.clonedeep","carbon-components-react/lib/components/UIShell","carbon-components-react"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,SideNav,SideNavMenu,SideNavMenuItem,SelectSkeleton,_SlideSelectionPanel_,SlideSelectionPanel,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonComponentsReactLibComponentsUIShell){_carbonComponentsReactLibComponentsUIShell.Content,SideNav=_carbonComponentsReactLibComponentsUIShell.SideNav,_carbonComponentsReactLibComponentsUIShell.SideNavItems,_carbonComponentsReactLibComponentsUIShell.SideNavLink,SideNavMenu=_carbonComponentsReactLibComponentsUIShell.SideNavMenu,SideNavMenuItem=_carbonComponentsReactLibComponentsUIShell.SideNavMenuItem},function(_carbonComponentsReact){SelectSkeleton=_carbonComponentsReact.SelectSkeleton}],execute:function(){_SlideSelectionPanel_=function(_React$Component){function _SlideSelectionPanel_(props){_classCallCheck(this,_SlideSelectionPanel_);var _this=_possibleConstructorReturn(this,(_SlideSelectionPanel_.__proto__||Object.getPrototypeOf(_SlideSelectionPanel_)).call(this,props));return _this.state={slidelist:{}},_this.handleClick=_this.handleClick.bind(_this),_this.loadSlides=_this.loadSlides.bind(_this),_this}return _inherits(_SlideSelectionPanel_,_React$Component),_createClass(_SlideSelectionPanel_,[{key:"componentDidMount",value:function(){this.loadSlides()}},{key:"componentDidUpdate",value:function(prevProps){(!_.isEqual(prevProps.pages,this.props.pages)&&Object.keys(prevProps.pages).length!=Object.keys(this.props.pages).length||prevProps.reload_slides!=this.props.reload_slides&&this.props.reload_slides||prevProps.currentscope!=this.props.currentscope)&&(this.loadSlides(),this.props.updateStore({updates:{reload_slides:!1}}))}},{key:"loadSlides",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var slideDetails,slidesData,slides;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,$qry.run("mmf.getAllSlides",{Scope:this.props.currentscope});case 2:slideDetails=_context.sent,slidesData=slideDetails&&slideDetails.slides?slideDetails.slides:{},slides={},Object.keys(slidesData).map(function(slideName){var slideObj=slidesData[slideName];switch(slideObj.Type){case"FreeForm":slides.FreeForm||(slides.FreeForm=[]),slides.FreeForm.push({id:slideObj.uid,name:slideObj.Name,scope:slideObj.Scope,path:slideObj.Path,pageType:slideObj.Type,props:slideObj.props});break;default:var modelName="",modelScope="";Object.keys(slideObj.props).map(function(propKey){"ModelName"===slideObj.props[propKey].Name&&(modelName=slideObj.props[propKey].Value),"ModelScope"===slideObj.props[propKey].Name&&(modelScope=slideObj.props[propKey].Value)}),slides[modelName]||(slides[modelName]=[]),slides[modelName].push({id:slideObj.uid,name:slideObj.Name,scope:slideObj.Scope,pageType:slideObj.Type,path:slideObj.Path,model:modelName,modelScope:modelScope})}}),this.setState({slidelist:slides,loaded:!!this.props.currentscope});case 7:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"handleClick",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(e){var slideId,payload,activeSlide,activePage,itemsNotExists,tobeActivePage,slots,widgets,slideProps,slotsAndWidgets,component2WidgetMap,layoutCodes,defaultLayout,_this2=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(slideId=e.target.id?e.target.id:e.target.parentNode.id,payload={active_page_id:slideId},activeSlide={},Object.keys(this.state.slidelist).map(function(model){var matchingSlide=_this2.state.slidelist[model].filter(function(slide){return slide.id==slideId});matchingSlide&&1==matchingSlide.length&&(Object.assign(activeSlide,matchingSlide[0]),activeSlide.model=model)}),activePage=cloneDeep(this.props.pages[slideId])||{},itemsNotExists=!(activePage.slots&&0!=Object.keys(activePage.slots).length&&activePage.widgets&&0!=Object.keys(activePage.widgets).length),tobeActivePage={id:slideId,name:activeSlide?activeSlide.name:"",scope:activeSlide?activeSlide.scope:"",path:activeSlide?activeSlide.path:"",pageType:activeSlide?activeSlide.pageType:"",model:activeSlide?activeSlide.model:"",modelscope:activeSlide?activeSlide.modelScope:""},!itemsNotExists){_context2.next=30;break}return slots={},widgets={},_context2.next=12,$qry.run("mmf.getSlideProps",{pageId:slideId});case 12:return slideProps=_context2.sent,_context2.next=15,$qry.run("pd.getExistingSlotsbySlideId",{Slide:slideId});case 15:slotsAndWidgets=_context2.sent,component2WidgetMap={},slotsAndWidgets&&slotsAndWidgets.length>0&&slotsAndWidgets.forEach(function(slotWidget){var slot=slotWidget.node;if(slot&&slot.uid){var slotData={};slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.width=slot.width||0,slotData.height=slot.height,slotData.minwidth=slot.minwidth,slotData.minheight=slot.minheight,slotData.maxwidth=slot.maxwidth,slotData.maxheight=slot.maxheight,slotData.resize=slot.resize,slotData.move=slot.move,slotData.Slide=slot.Slide,slotData.Widget=slot.Widget,slotData.Layout=slot.Layout,slots[slot.Layout||"default"]=slots[slot.Layout||"default"]||{},slots[slot.Layout||"default"][slot.uid]=slotData;var widgetData=slot.slotWidget;if(widgetData&&widgetData.uid){var widget={};widget.id=widgetData.uid,widget.Component=widgetData.Component,widget.name=widgetData.component.Name,component2WidgetMap[widgetData.Component]=widgetData.uid;var widgetProps=widgetData.widgetproperties;if(widgetProps&&widgetProps.edges&&widgetProps.edges.length>0){var props={};widgetProps.edges.forEach(function(propNode){var prop=propNode.node;"PageParams"==prop.name?props[prop.name]=prop.value?JSON.parse(prop.value):prop.value:props[prop.name]=prop.value}),widget.props=props}widget.props=widget.props||{};var componentProps=widgetData.component.Props,widgetPropNames=Object.keys(widget.props);componentProps&&Object.keys(componentProps).length>0&&Object.keys(componentProps).map(function(componentPropName){widgetPropNames&&-1==widgetPropNames.indexOf(componentPropName)&&(widget.props[componentPropName]=componentProps[componentPropName])}),widgets[slot.Layout||"default"]=widgets[slot.Layout||"default"]||{},widgets[slot.Layout||"default"][widgetData.uid]=widget}}}),layoutCodes=Object.keys(slots),defaultLayout=layoutCodes?layoutCodes.default?"default":layoutCodes[0]:"default",tobeActivePage.layouts={slots:slots,widgets:widgets},tobeActivePage.slots=slots[defaultLayout],tobeActivePage.props=slideProps,tobeActivePage.widgets=widgets[defaultLayout],tobeActivePage.is_open=!0,tobeActivePage.currentLayout=defaultLayout,payload.activePageSlots=slots[defaultLayout],payload.activePageWidgets=widgets[defaultLayout],_context2.next=38;break;case 30:tobeActivePage.slots=activePage.slots,tobeActivePage.props=activePage.props,tobeActivePage.widgets=activePage.widgets,tobeActivePage.layouts=activePage.layouts,tobeActivePage.currentLayout=activePage.currentLayout,tobeActivePage.is_open=!0,payload.activePageSlots=activePage.slots,payload.activePageWidgets=activePage.widgets;case 38:payload.activepage=tobeActivePage,payload.pages=this.props.pages?this.props.pages:{},payload.pages[slideId]=tobeActivePage,payload.active_widget_id="",this.props.updateStore({updates:payload});case 43:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"render",value:function(){var _this3=this,slideNav=null;if(this.state.loaded){var slideNavMenus=[];this.state.slidelist&&0!=Object.keys(this.state.slidelist).length?(Object.keys(this.state.slidelist).map(function(modelName){var slideNavMenuItems=[];_this3.state.slidelist[modelName].map(function(navMenuItem){slideNavMenuItems.push(React.createElement(SideNavMenuItem,{key:navMenuItem.id,id:navMenuItem.id,onClick:_this3.handleClick,href:"javascript:void(0)"},navMenuItem.scope,".",navMenuItem.name))}),slideNavMenus.push(React.createElement(SideNavMenu,{title:modelName},slideNavMenuItems))}),slideNav=React.createElement("div",{style:{marginTop:20}},React.createElement(SideNav,{isFixedNav:!0,expanded:!0,isChildOfHeader:!1,"aria-label":"Side navigation"},slideNavMenus))):slideNav=React.createElement("div",{className:"noPagesFound"},"No Pages Found!")}else slideNav=React.createElement("div",{style:{width:"300px",marginTop:"20px"}},React.createElement(SelectSkeleton,{hideLabel:"true",size:"small"}));return React.createElement("div",null,React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),slideNav)}}]),_SlideSelectionPanel_}(React.Component),_export("SlideSelectionPanel",SlideSelectionPanel=function(props){return _SlideSelectionPanel_}),_export("SlideSelectionPanel",SlideSelectionPanel),_export("default",SlideSelectionPanel),_export("states",states=[{KeyName:"pages",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id": ""}'},{KeyName:"reload_slides",AccessPath:"reload_slides",DefaultValue:'{"reload_slides": false}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'},{KeyName:"activepage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SlideSelectionPanel/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.clonedeep","carbon-components-react/lib/components/UIShell","carbon-components-react"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,SideNav,SideNavMenu,SideNavMenuItem,SelectSkeleton,_SlideSelectionPanel_,SlideSelectionPanel;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonComponentsReactLibComponentsUIShell){_carbonComponentsReactLibComponentsUIShell.Content,SideNav=_carbonComponentsReactLibComponentsUIShell.SideNav,_carbonComponentsReactLibComponentsUIShell.SideNavItems,_carbonComponentsReactLibComponentsUIShell.SideNavLink,SideNavMenu=_carbonComponentsReactLibComponentsUIShell.SideNavMenu,SideNavMenuItem=_carbonComponentsReactLibComponentsUIShell.SideNavMenuItem},function(_carbonComponentsReact){SelectSkeleton=_carbonComponentsReact.SelectSkeleton}],execute:function(){_SlideSelectionPanel_=function(_React$Component){function _SlideSelectionPanel_(props){_classCallCheck(this,_SlideSelectionPanel_);var _this=_possibleConstructorReturn(this,(_SlideSelectionPanel_.__proto__||Object.getPrototypeOf(_SlideSelectionPanel_)).call(this,props));return _this.state={slidelist:{}},_this.handleClick=_this.handleClick.bind(_this),_this.loadSlides=_this.loadSlides.bind(_this),_this}return _inherits(_SlideSelectionPanel_,_React$Component),_createClass(_SlideSelectionPanel_,[{key:"componentDidMount",value:function(){this.loadSlides()}},{key:"componentDidUpdate",value:function(prevProps){(!_.isEqual(prevProps.pages,this.props.pages)&&Object.keys(prevProps.pages).length!=Object.keys(this.props.pages).length||prevProps.reload_slides!=this.props.reload_slides&&this.props.reload_slides||prevProps.currentscope!=this.props.currentscope)&&(this.loadSlides(),this.props.updateStore({updates:{reload_slides:!1}}))}},{key:"loadSlides",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var slideDetails,slidesData,slides;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,$qry.run("mmf.getAllSlides",{Scope:this.props.currentscope});case 2:slideDetails=_context.sent,slidesData=slideDetails&&slideDetails.slides?slideDetails.slides:{},slides={},Object.keys(slidesData).map(function(slideName){var slideObj=slidesData[slideName];switch(slideObj.Type){case"FreeForm":slides.FreeForm||(slides.FreeForm=[]),slides.FreeForm.push({id:slideObj.uid,name:slideObj.Name,scope:slideObj.Scope,path:slideObj.Path,pageType:slideObj.Type,props:slideObj.props});break;default:var modelName="",modelScope="";Object.keys(slideObj.props).map(function(propKey){"ModelName"===slideObj.props[propKey].Name&&(modelName=slideObj.props[propKey].Value),"ModelScope"===slideObj.props[propKey].Name&&(modelScope=slideObj.props[propKey].Value)}),slides[modelName]||(slides[modelName]=[]),slides[modelName].push({id:slideObj.uid,name:slideObj.Name,scope:slideObj.Scope,pageType:slideObj.Type,path:slideObj.Path,model:modelName,modelScope:modelScope})}}),this.setState({slidelist:slides,loaded:!!this.props.currentscope});case 7:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"handleClick",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(e){var slideId,payload,activeSlide,activePage,itemsNotExists,tobeActivePage,slots,widgets,slideProps,slotsAndWidgets,component2WidgetMap,layoutCodes,defaultLayout,_this2=this;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(slideId=e.target.id?e.target.id:e.target.parentNode.id,payload={active_page_id:slideId},activeSlide={},Object.keys(this.state.slidelist).map(function(model){var matchingSlide=_this2.state.slidelist[model].filter(function(slide){return slide.id==slideId});matchingSlide&&1==matchingSlide.length&&(Object.assign(activeSlide,matchingSlide[0]),activeSlide.model=model)}),activePage=cloneDeep(this.props.pages[slideId])||{},itemsNotExists=!(activePage.slots&&0!=Object.keys(activePage.slots).length&&activePage.widgets&&0!=Object.keys(activePage.widgets).length),tobeActivePage={id:slideId,name:activeSlide?activeSlide.name:"",scope:activeSlide?activeSlide.scope:"",path:activeSlide?activeSlide.path:"",pageType:activeSlide?activeSlide.pageType:"",model:activeSlide?activeSlide.model:"",modelscope:activeSlide?activeSlide.modelScope:""},!itemsNotExists){_context2.next=30;break}return slots={},widgets={},_context2.next=12,$qry.run("mmf.getSlideProps",{pageId:slideId});case 12:return slideProps=_context2.sent,_context2.next=15,$qry.run("pd.getExistingSlotsbySlideId",{Slide:slideId});case 15:slotsAndWidgets=_context2.sent,component2WidgetMap={},slotsAndWidgets&&slotsAndWidgets.length>0&&slotsAndWidgets.forEach(function(slotWidget){var slot=slotWidget.node;if(slot&&slot.uid){var slotData={};slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.width=slot.width||0,slotData.height=slot.height,slotData.minwidth=slot.minwidth,slotData.minheight=slot.minheight,slotData.maxwidth=slot.maxwidth,slotData.maxheight=slot.maxheight,slotData.resize=slot.resize,slotData.move=slot.move,slotData.Slide=slot.Slide,slotData.Widget=slot.Widget,slotData.Layout=slot.Layout,slots[slot.Layout||"default"]=slots[slot.Layout||"default"]||{},slots[slot.Layout||"default"][slot.uid]=slotData;var widgetData=slot.slotWidget;if(widgetData&&widgetData.uid){var widget={};widget.id=widgetData.uid,widget.Component=widgetData.Component,widget.name=widgetData.component.Name,component2WidgetMap[widgetData.Component]=widgetData.uid;var widgetProps=widgetData.widgetproperties;if(widgetProps&&widgetProps.edges&&widgetProps.edges.length>0){var props={};widgetProps.edges.forEach(function(propNode){var prop=propNode.node;"PageParams"==prop.name?props[prop.name]=prop.value?JSON.parse(prop.value):prop.value:props[prop.name]=prop.value}),widget.props=props}widget.props=widget.props||{};var componentProps=widgetData.component.Props,widgetPropNames=Object.keys(widget.props);componentProps&&Object.keys(componentProps).length>0&&Object.keys(componentProps).map(function(componentPropName){widgetPropNames&&-1==widgetPropNames.indexOf(componentPropName)&&(widget.props[componentPropName]=componentProps[componentPropName])}),widgets[slot.Layout||"default"]=widgets[slot.Layout||"default"]||{},widgets[slot.Layout||"default"][widgetData.uid]=widget}}}),layoutCodes=Object.keys(slots),defaultLayout=layoutCodes?layoutCodes.default?"default":layoutCodes[0]:"default",tobeActivePage.layouts={slots:slots,widgets:widgets},tobeActivePage.slots=slots[defaultLayout],tobeActivePage.props=slideProps,tobeActivePage.widgets=widgets[defaultLayout],tobeActivePage.is_open=!0,tobeActivePage.currentLayout=defaultLayout,payload.activePageSlots=slots[defaultLayout],payload.activePageWidgets=widgets[defaultLayout],_context2.next=38;break;case 30:tobeActivePage.slots=activePage.slots,tobeActivePage.props=activePage.props,tobeActivePage.widgets=activePage.widgets,tobeActivePage.layouts=activePage.layouts,tobeActivePage.currentLayout=activePage.currentLayout,tobeActivePage.is_open=!0,payload.activePageSlots=activePage.slots,payload.activePageWidgets=activePage.widgets;case 38:payload.activepage=tobeActivePage,payload.pages=this.props.pages?this.props.pages:{},payload.pages[slideId]=tobeActivePage,payload.active_widget_id="",this.props.updateStore({updates:payload});case 43:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"render",value:function(){var _this3=this,slideNav=null;if(this.state.loaded){var slideNavMenus=[];this.state.slidelist&&0!=Object.keys(this.state.slidelist).length?(Object.keys(this.state.slidelist).map(function(modelName){var slideNavMenuItems=[];_this3.state.slidelist[modelName].map(function(navMenuItem){slideNavMenuItems.push(React.createElement(SideNavMenuItem,{key:navMenuItem.id,id:navMenuItem.id,onClick:_this3.handleClick,href:"javascript:void(0)"},navMenuItem.scope,".",navMenuItem.name))}),slideNavMenus.push(React.createElement(SideNavMenu,{title:modelName},slideNavMenuItems))}),slideNav=React.createElement("div",{style:{marginTop:20}},React.createElement(SideNav,{isFixedNav:!0,expanded:!0,isChildOfHeader:!1,"aria-label":"Side navigation"},slideNavMenus))):slideNav=React.createElement("div",{className:"noPagesFound"},"No Pages Found!")}else slideNav=React.createElement("div",{style:{width:"300px",marginTop:"20px"}},React.createElement(SelectSkeleton,{hideLabel:"true",size:"small"}));return React.createElement("div",null,React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),slideNav)}}]),_SlideSelectionPanel_}(React.Component),_export("SlideSelectionPanel",SlideSelectionPanel=function(props){return _SlideSelectionPanel_}),_export("SlideSelectionPanel",SlideSelectionPanel)}}}),System.register("component/studio/SlideViewer.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SlideViewer_,SlideViewer,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SlideViewer_=function(_React$Component){function _SlideViewer_(){return _classCallCheck(this,_SlideViewer_),_possibleConstructorReturn(this,(_SlideViewer_.__proto__||Object.getPrototypeOf(_SlideViewer_)).apply(this,arguments))}return _inherits(_SlideViewer_,_React$Component),_createClass(_SlideViewer_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Hello World!"))}}]),_SlideViewer_}(React.Component),_export("SlideViewer",SlideViewer=function(props){return _SlideViewer_}),_export("SlideViewer",SlideViewer),_export("default",SlideViewer),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SlideViewer/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SlideViewer_,SlideViewer;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SlideViewer_=function(_React$Component){function _SlideViewer_(){return _classCallCheck(this,_SlideViewer_),_possibleConstructorReturn(this,(_SlideViewer_.__proto__||Object.getPrototypeOf(_SlideViewer_)).apply(this,arguments))}return _inherits(_SlideViewer_,_React$Component),_createClass(_SlideViewer_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("h2",null,"Hello World!"))}}]),_SlideViewer_}(React.Component),_export("SlideViewer",SlideViewer=function(props){return _SlideViewer_}),_export("SlideViewer",SlideViewer)}}}),System.register("component/studio/SrsBoard.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.get","component/mmf/ComponentWrapper/Definition.js","lodash.clonedeep"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,lodashget,ComponentWrapper,_SrsBoard_,SrsBoard,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashGet){lodashget=_lodashGet.default},function(_componentMmfComponentWrapperDefinitionJs){ComponentWrapper=_componentMmfComponentWrapperDefinitionJs.ComponentWrapper},function(_lodashClonedeep){_lodashClonedeep.default}],execute:function(){_SrsBoard_=function(_React$Component){function _SrsBoard_(props){_classCallCheck(this,_SrsBoard_);var _this=_possibleConstructorReturn(this,(_SrsBoard_.__proto__||Object.getPrototypeOf(_SrsBoard_)).call(this,props));props.shadow&&(window.sd=window.sd||{},window.sd[props.uid]={doc:props.shadow});var data=_this.props.widgetProps&&_this.props.widgetProps.boardData?JSON.parse(_this.props.widgetProps.boardData):null;data=data||(_this.props.boarddata?JSON.parse(_this.props.boarddata):data),_this.state={reload:!1,boardData:data},_this.loadBoardData=_this.loadBoardData.bind(_this),_this.getBoardOperations=_this.getBoardOperations.bind(_this),_this.refreshBoard=_this.refreshBoard.bind(_this),_this.reactTrello=null,_this.config={};try{_this.config=_this.props.config?JSON.parse(_this.props.config):_this.props.widgetProps&&_this.props.widgetProps.config?JSON.parse(_this.props.widgetProps.config):{}}catch(err){}return _this.defaultValue={lanes:[{id:"todo",title:"Todo",label:"0/0",style:{width:280},cards:[{id:"card1",title:"Do something...",label:"15 mins",description:"Card details"},{id:"card2",title:"Do nothing...",label:"15 mins",description:"Card details"}]},{id:"doing",title:"Doing",label:"0/0",style:{width:280},cards:[{id:"card3",title:"Do everything...",label:"15 mins",description:"Card details"},{id:"card4",title:"Do anything...",label:"15 mins",description:"Card details"}]},{id:"done",title:"Done",label:"0/0",style:{width:280},cards:[]}]},System.import("react-trello").then(function(defaultFn){_this.reactTrello=defaultFn,_this.setState({reload:!_this.state.reload})}),_this}return _inherits(_SrsBoard_,_React$Component),_createClass(_SrsBoard_,[{key:"shouldComponentUpdate",value:function(nextProps,nextState){return this.refs.styles&&!this.styles&&(this.styles=this.refs.styles),!(this.reactTrello&&nextState.reload==this.props.reload&&(!this.props.widgetProps||_.isEqual(this.props.widgetProps,nextProps.widgetProps)))}},{key:"componentDidMount",value:function(){this.refreshBoard({data:!0,laneHeader:!0,laneFooter:!0,addCardLink:!0,card:!0,newCard:!0,newLane:!0})}},{key:"refreshBoard",value:function(reloads){var _this2=this,laneHeaderComponentId=this.props.widgetProps&&this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;(laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null))&&reloads.laneHeader&&$script.getscript("mmf.loadComponent").then(function(_ref){(0,_ref.default)({componentId:laneHeaderComponentId}).then(function(componentData){componentData&&(_this2.laneHeaderComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var laneFooterComponentId=this.props.widgetProps&&this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;(laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null))&&reloads.laneFooter&&$script.getscript("mmf.loadComponent").then(function(_ref2){(0,_ref2.default)({componentId:laneFooterComponentId}).then(function(componentData){componentData&&(_this2.laneFooterComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var cardComponentId=this.props.widgetProps&&this.props.widgetProps.Card?this.props.widgetProps.Card:null;(cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null))&&reloads.card&&$script.getscript("mmf.loadComponent").then(function(_ref3){(0,_ref3.default)({componentId:cardComponentId}).then(function(componentData){componentData&&(_this2.cardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newLaneComponentId=this.props.widgetProps&&this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;(newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null))&&reloads.newLane&&$script.getscript("mmf.loadComponent").then(function(_ref4){(0,_ref4.default)({componentId:newLaneComponentId}).then(function(componentData){componentData&&(_this2.newLaneComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newCardComponentId=this.props.widgetProps&&this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;(newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null))&&reloads.newCard&&$script.getscript("mmf.loadComponent").then(function(_ref5){(0,_ref5.default)({componentId:newCardComponentId}).then(function(componentData){componentData&&(_this2.newCardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var addCardLinkComponentId=this.props.widgetProps&&this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;(addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null))&&reloads.addCardLink&&$script.getscript("mmf.loadComponent").then(function(_ref6){(0,_ref6.default)({componentId:addCardLinkComponentId}).then(function(componentData){componentData&&(_this2.addCardLinkComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config),add_events_on_host:!0},_this2.setState({reload:!_this2.state.reload}))})}),reloads.data&&this.loadBoardData()}},{key:"componentDidUpdate",value:function(prevProps){if(prevProps.widgetProps&&this.props.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)){var reloads={data:!1,addCardLink:!1,newCard:!1,card:!1,newLane:!1};prevProps.widgetProps.TableName==this.props.widgetProps.TableName&&prevProps.widgetProps.LaneField==this.props.widgetProps.LaneField&&prevProps.widgetProps.BoardFilter==this.props.widgetProps.BoardFilter&&prevProps.widgetProps.FieldMapping==this.props.widgetProps.FieldMapping||(reloads.data=!0),reloads.laneHeader=prevProps.widgetProps.LaneHeader!=this.props.widgetProps.LaneHeader,reloads.laneFooter=prevProps.widgetProps.LaneFooter!=this.props.widgetProps.LaneFooter,reloads.card=prevProps.widgetProps.Card!=this.props.widgetProps.Card,reloads.newCard=prevProps.widgetProps.NewCard!=this.props.widgetProps.NewCard,reloads.addCardLink=prevProps.widgetProps.AddCardLink!=this.props.widgetProps.AddCardLink,reloads.newLane=prevProps.widgetProps.NewLane!=this.props.widgetProps.NewLane,this.refreshBoard(reloads)}this.refs.board&&$(this.refs.board).find(".smooth-dnd-container.vertical").css("height","10rem")}},{key:"loadBoardData",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var _config,tableName,laneField,boardFilter,fieldMapping,reverseFieldMapping,boardData,cardsPerLane,fields,inputParams,self,_this3=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_config=this.config,tableName=_config.tableName,laneField=_config.laneField,boardFilter=_config.boardFilter,fieldMapping=_config.fieldMapping,reverseFieldMapping={},fieldMapping=fieldMapping||[{name:"id",value:"uid"}],tableName&&laneField&&fieldMapping){_context.next=6;break}return this.setState({boardData:this.defaultValue}),_context.abrupt("return");case 6:boardData={lanes:[]},cardsPerLane={},fields=[],fieldMapping.length>0&&fieldMapping.map(function(fieldMapItem,indx){fieldMapItem.name&&fieldMapItem.value&&(-1==fields.indexOf(fieldMapItem.value)&&fields.push(fieldMapItem.value),reverseFieldMapping[fieldMapItem.value]=reverseFieldMapping[fieldMapItem.value]||[],reverseFieldMapping[fieldMapItem.value].push(fieldMapItem.name))}),-1==fields.indexOf("uid")&&fields.push("uid"),-1==fields.indexOf(laneField)&&fields.push(laneField),inputParams={tableName:tableName,fields:fields,filter:boardFilter||{},fieldAliases:null,schema:this.props.schema},self=this,$script.runscript("mmf.getRecords",inputParams).then(function(records){records&&records.map&&records.map(function(recordNode,indx){var record=recordNode.node,card={};record&&Object.keys(record).map(function(recordField,indx){var cardPropNames=reverseFieldMapping[recordField];cardPropNames&&cardPropNames.map(function(cardPropName){card[cardPropName]=record[recordField]}),record.uid&&(card.uid=record.uid,card.id=record.uid)});var laneValue=lodashget(record,laneField);if(laneField.indexOf(".")>-1){var relationName=laneField.split(".")[0];laneValue=laneValue+"@@@@"+lodashget(record,relationName+".uid")}cardsPerLane[laneValue]=cardsPerLane[laneValue]||[],cardsPerLane[laneValue].push(card)}),cardsPerLane&&Object.keys(cardsPerLane).length>0&&Object.keys(cardsPerLane).map(function(laneName,indx){var cards=cardsPerLane[laneName],height=self.props.shadow&&self.props.shadow.host?$(self.props.shadow.host).parent().css("height"):"",style={width:280};(height=height?parseInt(height.replace("px","")):-1)>-1&&(style.maxHeight=height-20);var laneId=laneName,laneTitle=laneName;laneName.indexOf("@@@@")>-1&&(laneTitle=laneName.split("@@@@")[0],laneId=laneName.split("@@@@")[1]);var laneObj={id:laneId,title:laneTitle,label:"Total - "+cards.length,style:style,cards:cards};boardData.lanes.push(laneObj)}),_this3.setState({boardData:boardData})});case 15:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref7.apply(this,arguments)}}()},{key:"getBoardOperations",value:function(){var _this4=this,boardOperations={onCardMoveAcrossLanes:function(srcLaneId,targetLaneId,cardId,addedIndex){_this4.config},onDataChange:function(newData){},onCardClick:function(cardId,metadata,laneId){},onCardAdd:function(card,laneId){},onCardDelete:function(cardId,laneId){},onLaneAdd:function(params){},onLaneDelete:function(laneId){},onLaneUpdate:function(laneId,data){},onLaneClick:function(laneId){}};return boardOperations}},{key:"render",value:function(){var cardComponentId=this.props.widgetProps.Card?this.props.widgetProps.Card:null;cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null);var newLaneComponentId=this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null);var newCardComponentId=this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null);var addCardLinkComponentId=this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null);var laneHeaderComponentId=this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null);var laneFooterComponentId=this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null);try{this.config=this.props.config?JSON.parse(this.props.config):this.props.widgetProps&&this.props.widgetProps.config?JSON.parse(this.props.widgetProps.config):{}}catch(err){this.config={}}if(this.config.tableName=this.props.tablename?this.props.tablename:this.props.widgetProps.TableName?this.props.widgetProps.TableName:this.config.tableName,this.config.laneField=this.props.lanefield?this.props.lanefield:this.props.widgetProps.LaneField?this.props.widgetProps.LaneField:this.config.lanefield,this.config.boardFilter=this.props.boardfilter?JSON.parse(this.props.boardfilter):this.props.widgetProps.BoardFilter?this.props.widgetProps.BoardFilter:this.config.boardFilter,this.config.boardFilter=this.config.boardFilter&&"string"==typeof this.config.boardFilter?JSON.parse(this.config.boardFilter):this.config.boardFilter,this.config.fieldMapping=this.props.fieldmapping?JSON.parse(this.props.fieldmapping):this.props.widgetProps.FieldMapping?this.props.widgetProps.FieldMapping:this.config.fieldMapping,this.config.fieldMapping=this.config.fieldMapping&&"string"==typeof this.config.fieldMapping?JSON.parse(this.config.fieldMapping):this.config.fieldMapping,this.config.boardType=this.props.boardtype?this.props.boardtype:this.props.widgetProps.BoardType?this.props.widgetProps.BoardType:this.config.boardType,!this.reactTrello||!this.state.boardData||laneHeaderComponentId&&!this.laneHeaderComponent||laneFooterComponentId&&!this.laneFooterComponent||cardComponentId&&!this.cardComponent||newLaneComponentId&&!this.newLaneComponent||newCardComponentId&&!this.newCardComponent||addCardLinkComponentId&&!this.addCardLinkComponent)return React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});var theme=this.props.widgetProps&&this.props.widgetProps.Theme?this.props.widgetProps.Theme:[{name:"backgroundColor",value:"#6a9f7194"}],styles={};(theme=(theme=theme||this.props.themeprops)&&"string"==typeof theme?JSON.parse(theme):theme)&&theme.length>0&&theme.map(function(themeItem){styles[themeItem.name]=themeItem.value});var laneDraggable="true"==this.props.widgetProps.laneDraggable;laneDraggable=laneDraggable||!this.props.lanedraggable||"true"==this.props.lanedraggable;var cardDraggable="true"==this.props.widgetProps.cardDraggable;cardDraggable=cardDraggable||!this.props.carddraggable||"true"==this.props.carddraggable;var canAddLanes="true"==this.props.widgetProps.cardDraggable;canAddLanes=canAddLanes||!this.props.canaddlanes||"true"==this.props.canaddlanes;var boardProps={laneDraggable:laneDraggable,draggable:"false",style:styles,canAddLanes:canAddLanes,editable:canAddLanes};if(cardComponentId){var Card=ComponentWrapper(this.cardComponent);boardProps.components=boardProps.components||{},boardProps.components.Card=Card}if(newLaneComponentId){var NewLane=ComponentWrapper(this.newLaneComponent);boardProps.components=boardProps.components||{},boardProps.components.NewLaneSection=NewLane}if(newCardComponentId){var NewCard=ComponentWrapper(this.newCardComponent);boardProps.components=boardProps.components||{},boardProps.components.NewCardForm=NewCard}if(addCardLinkComponentId){var AddCardLink=ComponentWrapper(this.addCardLinkComponent);boardProps.components=boardProps.components||{},boardProps.components.AddCardLink=AddCardLink}var boardOperations=this.getBoardOperations(),Board=this.reactTrello?this.reactTrello.default:React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});return this.reactTrello?React.createElement("div",{ref:"board",className:"backlog"==this.config.boardType?"Backlog":"",style:{height:"inherit",overflowY:"hidden"}},React.createElement("style",null,this.styles),React.createElement(Board,_extends({data:this.state.boardData,style:{height:"inherit"},className:"uid_"+this.props.uid+"_uid"},boardProps,boardOperations))):React.createElement("div",null)}}]),_SrsBoard_}(React.Component),_export("SrsBoard",SrsBoard=function(props){return _SrsBoard_}),_export("SrsBoard",SrsBoard),_export("default",SrsBoard),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema" : {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsBoard/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.get","component/mmf/ComponentWrapper/Definition.js","lodash.clonedeep"],function(_export,_context2){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,lodashget,ComponentWrapper,_SrsBoard_,SrsBoard;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashGet){lodashget=_lodashGet.default},function(_componentMmfComponentWrapperDefinitionJs){ComponentWrapper=_componentMmfComponentWrapperDefinitionJs.ComponentWrapper},function(_lodashClonedeep){_lodashClonedeep.default}],execute:function(){_SrsBoard_=function(_React$Component){function _SrsBoard_(props){_classCallCheck(this,_SrsBoard_);var _this=_possibleConstructorReturn(this,(_SrsBoard_.__proto__||Object.getPrototypeOf(_SrsBoard_)).call(this,props));props.shadow&&(window.sd=window.sd||{},window.sd[props.uid]={doc:props.shadow});var data=_this.props.widgetProps&&_this.props.widgetProps.boardData?JSON.parse(_this.props.widgetProps.boardData):null;data=data||(_this.props.boarddata?JSON.parse(_this.props.boarddata):data),_this.state={reload:!1,boardData:data},_this.loadBoardData=_this.loadBoardData.bind(_this),_this.getBoardOperations=_this.getBoardOperations.bind(_this),_this.refreshBoard=_this.refreshBoard.bind(_this),_this.reactTrello=null,_this.config={};try{_this.config=_this.props.config?JSON.parse(_this.props.config):_this.props.widgetProps&&_this.props.widgetProps.config?JSON.parse(_this.props.widgetProps.config):{}}catch(err){}return _this.defaultValue={lanes:[{id:"todo",title:"Todo",label:"0/0",style:{width:280},cards:[{id:"card1",title:"Do something...",label:"15 mins",description:"Card details"},{id:"card2",title:"Do nothing...",label:"15 mins",description:"Card details"}]},{id:"doing",title:"Doing",label:"0/0",style:{width:280},cards:[{id:"card3",title:"Do everything...",label:"15 mins",description:"Card details"},{id:"card4",title:"Do anything...",label:"15 mins",description:"Card details"}]},{id:"done",title:"Done",label:"0/0",style:{width:280},cards:[]}]},System.import("react-trello").then(function(defaultFn){_this.reactTrello=defaultFn,_this.setState({reload:!_this.state.reload})}),_this}return _inherits(_SrsBoard_,_React$Component),_createClass(_SrsBoard_,[{key:"shouldComponentUpdate",value:function(nextProps,nextState){return this.refs.styles&&!this.styles&&(this.styles=this.refs.styles),!(this.reactTrello&&nextState.reload==this.props.reload&&(!this.props.widgetProps||_.isEqual(this.props.widgetProps,nextProps.widgetProps)))}},{key:"componentDidMount",value:function(){this.refreshBoard({data:!0,laneHeader:!0,laneFooter:!0,addCardLink:!0,card:!0,newCard:!0,newLane:!0})}},{key:"refreshBoard",value:function(reloads){var _this2=this,laneHeaderComponentId=this.props.widgetProps&&this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;(laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null))&&reloads.laneHeader&&$script.getscript("mmf.loadComponent").then(function(_ref){(0,_ref.default)({componentId:laneHeaderComponentId}).then(function(componentData){componentData&&(_this2.laneHeaderComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var laneFooterComponentId=this.props.widgetProps&&this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;(laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null))&&reloads.laneFooter&&$script.getscript("mmf.loadComponent").then(function(_ref2){(0,_ref2.default)({componentId:laneFooterComponentId}).then(function(componentData){componentData&&(_this2.laneFooterComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var cardComponentId=this.props.widgetProps&&this.props.widgetProps.Card?this.props.widgetProps.Card:null;(cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null))&&reloads.card&&$script.getscript("mmf.loadComponent").then(function(_ref3){(0,_ref3.default)({componentId:cardComponentId}).then(function(componentData){componentData&&(_this2.cardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newLaneComponentId=this.props.widgetProps&&this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;(newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null))&&reloads.newLane&&$script.getscript("mmf.loadComponent").then(function(_ref4){(0,_ref4.default)({componentId:newLaneComponentId}).then(function(componentData){componentData&&(_this2.newLaneComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var newCardComponentId=this.props.widgetProps&&this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;(newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null))&&reloads.newCard&&$script.getscript("mmf.loadComponent").then(function(_ref5){(0,_ref5.default)({componentId:newCardComponentId}).then(function(componentData){componentData&&(_this2.newCardComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config)},_this2.setState({reload:!_this2.state.reload}))})});var addCardLinkComponentId=this.props.widgetProps&&this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;(addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null))&&reloads.addCardLink&&$script.getscript("mmf.loadComponent").then(function(_ref6){(0,_ref6.default)({componentId:addCardLinkComponentId}).then(function(componentData){componentData&&(_this2.addCardLinkComponent={componentname:componentData.Name,componentscope:componentData.Scope,componenttype:componentData.Type,config:JSON.stringify(_this2.config),add_events_on_host:!0},_this2.setState({reload:!_this2.state.reload}))})}),reloads.data&&this.loadBoardData()}},{key:"componentDidUpdate",value:function(prevProps){if(prevProps.widgetProps&&this.props.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)){var reloads={data:!1,addCardLink:!1,newCard:!1,card:!1,newLane:!1};prevProps.widgetProps.TableName==this.props.widgetProps.TableName&&prevProps.widgetProps.LaneField==this.props.widgetProps.LaneField&&prevProps.widgetProps.BoardFilter==this.props.widgetProps.BoardFilter&&prevProps.widgetProps.FieldMapping==this.props.widgetProps.FieldMapping||(reloads.data=!0),reloads.laneHeader=prevProps.widgetProps.LaneHeader!=this.props.widgetProps.LaneHeader,reloads.laneFooter=prevProps.widgetProps.LaneFooter!=this.props.widgetProps.LaneFooter,reloads.card=prevProps.widgetProps.Card!=this.props.widgetProps.Card,reloads.newCard=prevProps.widgetProps.NewCard!=this.props.widgetProps.NewCard,reloads.addCardLink=prevProps.widgetProps.AddCardLink!=this.props.widgetProps.AddCardLink,reloads.newLane=prevProps.widgetProps.NewLane!=this.props.widgetProps.NewLane,this.refreshBoard(reloads)}this.refs.board&&$(this.refs.board).find(".smooth-dnd-container.vertical").css("height","10rem")}},{key:"loadBoardData",value:function(){var _ref7=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var _config,tableName,laneField,boardFilter,fieldMapping,reverseFieldMapping,boardData,cardsPerLane,fields,inputParams,self,_this3=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_config=this.config,tableName=_config.tableName,laneField=_config.laneField,boardFilter=_config.boardFilter,fieldMapping=_config.fieldMapping,reverseFieldMapping={},fieldMapping=fieldMapping||[{name:"id",value:"uid"}],tableName&&laneField&&fieldMapping){_context.next=6;break}return this.setState({boardData:this.defaultValue}),_context.abrupt("return");case 6:boardData={lanes:[]},cardsPerLane={},fields=[],fieldMapping.length>0&&fieldMapping.map(function(fieldMapItem,indx){fieldMapItem.name&&fieldMapItem.value&&(-1==fields.indexOf(fieldMapItem.value)&&fields.push(fieldMapItem.value),reverseFieldMapping[fieldMapItem.value]=reverseFieldMapping[fieldMapItem.value]||[],reverseFieldMapping[fieldMapItem.value].push(fieldMapItem.name))}),-1==fields.indexOf("uid")&&fields.push("uid"),-1==fields.indexOf(laneField)&&fields.push(laneField),inputParams={tableName:tableName,fields:fields,filter:boardFilter||{},fieldAliases:null,schema:this.props.schema},self=this,$script.runscript("mmf.getRecords",inputParams).then(function(records){records&&records.map&&records.map(function(recordNode,indx){var record=recordNode.node,card={};record&&Object.keys(record).map(function(recordField,indx){var cardPropNames=reverseFieldMapping[recordField];cardPropNames&&cardPropNames.map(function(cardPropName){card[cardPropName]=record[recordField]}),record.uid&&(card.uid=record.uid,card.id=record.uid)});var laneValue=lodashget(record,laneField);if(laneField.indexOf(".")>-1){var relationName=laneField.split(".")[0];laneValue=laneValue+"@@@@"+lodashget(record,relationName+".uid")}cardsPerLane[laneValue]=cardsPerLane[laneValue]||[],cardsPerLane[laneValue].push(card)}),cardsPerLane&&Object.keys(cardsPerLane).length>0&&Object.keys(cardsPerLane).map(function(laneName,indx){var cards=cardsPerLane[laneName],height=self.props.shadow&&self.props.shadow.host?$(self.props.shadow.host).parent().css("height"):"",style={width:280};(height=height?parseInt(height.replace("px","")):-1)>-1&&(style.maxHeight=height-20);var laneId=laneName,laneTitle=laneName;laneName.indexOf("@@@@")>-1&&(laneTitle=laneName.split("@@@@")[0],laneId=laneName.split("@@@@")[1]);var laneObj={id:laneId,title:laneTitle,label:"Total - "+cards.length,style:style,cards:cards};boardData.lanes.push(laneObj)}),_this3.setState({boardData:boardData})});case 15:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref7.apply(this,arguments)}}()},{key:"getBoardOperations",value:function(){var _this4=this,boardOperations={onCardMoveAcrossLanes:function(srcLaneId,targetLaneId,cardId,addedIndex){_this4.config},onDataChange:function(newData){},onCardClick:function(cardId,metadata,laneId){},onCardAdd:function(card,laneId){},onCardDelete:function(cardId,laneId){},onLaneAdd:function(params){},onLaneDelete:function(laneId){},onLaneUpdate:function(laneId,data){},onLaneClick:function(laneId){}};return boardOperations}},{key:"render",value:function(){var cardComponentId=this.props.widgetProps.Card?this.props.widgetProps.Card:null;cardComponentId=cardComponentId||(this.props.cardcomponent?this.props.cardcomponent:null);var newLaneComponentId=this.props.widgetProps.NewLane?this.props.widgetProps.NewLane:null;newLaneComponentId=newLaneComponentId||(this.props.newlanecomponent?this.props.newlanecomponent:null);var newCardComponentId=this.props.widgetProps.NewCard?this.props.widgetProps.NewCard:null;newCardComponentId=newCardComponentId||(this.props.newcardcomponent?this.props.newcardcomponent:null);var addCardLinkComponentId=this.props.widgetProps.AddCardLink?this.props.widgetProps.AddCardLink:null;addCardLinkComponentId=addCardLinkComponentId||(this.props.addcardlinkcomponent?this.props.addcardlinkcomponent:null);var laneHeaderComponentId=this.props.widgetProps.LaneHeader?this.props.widgetProps.LaneHeader:null;laneHeaderComponentId=laneHeaderComponentId||(this.props.laneheadercomponent?this.props.laneheadercomponent:null);var laneFooterComponentId=this.props.widgetProps.LaneFooter?this.props.widgetProps.LaneFooter:null;laneFooterComponentId=laneFooterComponentId||(this.props.lanefootercomponent?this.props.lanefootercomponent:null);try{this.config=this.props.config?JSON.parse(this.props.config):this.props.widgetProps&&this.props.widgetProps.config?JSON.parse(this.props.widgetProps.config):{}}catch(err){this.config={}}if(this.config.tableName=this.props.tablename?this.props.tablename:this.props.widgetProps.TableName?this.props.widgetProps.TableName:this.config.tableName,this.config.laneField=this.props.lanefield?this.props.lanefield:this.props.widgetProps.LaneField?this.props.widgetProps.LaneField:this.config.lanefield,this.config.boardFilter=this.props.boardfilter?JSON.parse(this.props.boardfilter):this.props.widgetProps.BoardFilter?this.props.widgetProps.BoardFilter:this.config.boardFilter,this.config.boardFilter=this.config.boardFilter&&"string"==typeof this.config.boardFilter?JSON.parse(this.config.boardFilter):this.config.boardFilter,this.config.fieldMapping=this.props.fieldmapping?JSON.parse(this.props.fieldmapping):this.props.widgetProps.FieldMapping?this.props.widgetProps.FieldMapping:this.config.fieldMapping,this.config.fieldMapping=this.config.fieldMapping&&"string"==typeof this.config.fieldMapping?JSON.parse(this.config.fieldMapping):this.config.fieldMapping,this.config.boardType=this.props.boardtype?this.props.boardtype:this.props.widgetProps.BoardType?this.props.widgetProps.BoardType:this.config.boardType,!this.reactTrello||!this.state.boardData||laneHeaderComponentId&&!this.laneHeaderComponent||laneFooterComponentId&&!this.laneFooterComponent||cardComponentId&&!this.cardComponent||newLaneComponentId&&!this.newLaneComponent||newCardComponentId&&!this.newCardComponent||addCardLinkComponentId&&!this.addCardLinkComponent)return React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});var theme=this.props.widgetProps&&this.props.widgetProps.Theme?this.props.widgetProps.Theme:[{name:"backgroundColor",value:"#6a9f7194"}],styles={};(theme=(theme=theme||this.props.themeprops)&&"string"==typeof theme?JSON.parse(theme):theme)&&theme.length>0&&theme.map(function(themeItem){styles[themeItem.name]=themeItem.value});var laneDraggable="true"==this.props.widgetProps.laneDraggable;laneDraggable=laneDraggable||!this.props.lanedraggable||"true"==this.props.lanedraggable;var cardDraggable="true"==this.props.widgetProps.cardDraggable;cardDraggable=cardDraggable||!this.props.carddraggable||"true"==this.props.carddraggable;var canAddLanes="true"==this.props.widgetProps.cardDraggable;canAddLanes=canAddLanes||!this.props.canaddlanes||"true"==this.props.canaddlanes;var boardProps={laneDraggable:laneDraggable,draggable:"false",style:styles,canAddLanes:canAddLanes,editable:canAddLanes};if(cardComponentId){var Card=ComponentWrapper(this.cardComponent);boardProps.components=boardProps.components||{},boardProps.components.Card=Card}if(newLaneComponentId){var NewLane=ComponentWrapper(this.newLaneComponent);boardProps.components=boardProps.components||{},boardProps.components.NewLaneSection=NewLane}if(newCardComponentId){var NewCard=ComponentWrapper(this.newCardComponent);boardProps.components=boardProps.components||{},boardProps.components.NewCardForm=NewCard}if(addCardLinkComponentId){var AddCardLink=ComponentWrapper(this.addCardLinkComponent);boardProps.components=boardProps.components||{},boardProps.components.AddCardLink=AddCardLink}var boardOperations=this.getBoardOperations(),Board=this.reactTrello?this.reactTrello.default:React.createElement("srs-loading",{small:"true",style:{position:"fixed",top:"40vh",left:"45vw"}});return this.reactTrello?React.createElement("div",{ref:"board",className:"backlog"==this.config.boardType?"Backlog":"",style:{height:"inherit",overflowY:"hidden"}},React.createElement("style",null,this.styles),React.createElement(Board,_extends({data:this.state.boardData,style:{height:"inherit"},className:"uid_"+this.props.uid+"_uid"},boardProps,boardOperations))):React.createElement("div",null)}}]),_SrsBoard_}(React.Component),_export("SrsBoard",SrsBoard=function(props){return _SrsBoard_}),_export("SrsBoard",SrsBoard)}}}),System.register("component/studio/SrsButton.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,_SrsButton_,SrsButton,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button}],execute:function(){_SrsButton_=function(_React$Component){function _SrsButton_(props){return _classCallCheck(this,_SrsButton_),_possibleConstructorReturn(this,(_SrsButton_.__proto__||Object.getPrototypeOf(_SrsButton_)).call(this,props))}return _inherits(_SrsButton_,_React$Component),_createClass(_SrsButton_,[{key:"render",value:function(){var _props=this.props,label=_props.label,handleOnClick=(_props.className,_props.handleOnClick),size=(_props.rules,_props.level,_props.size),props=(_props.style,{size:this.props.widgetProps&&this.props.widgetProps.Size?this.props.widgetProps.Size:size||"large"});handleOnClick&&(props.onClick=handleOnClick);this.props.widgetProps&&this.props.widgetProps.ButtonAction&&this.props.widgetProps.ButtonAction;var styles=this.props.widgetProps&&this.props.widgetProps.Styles&&"string"==typeof this.props.widgetProps.Styles?JSON.parse(this.props.widgetProps.Styles):{},containerStyles=this.props.containerStyles?this.props.containerStyles:{};containerStyles=_extends({backgroundColor:"#0095ff"},containerStyles,styles);var embeddedStyles=null;return this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles)),React.createElement("div",{className:containerStyles&&0!=Object.keys(containerStyles).length?"":"srs-prem-container"},embeddedStyles,React.createElement(Button,_extends({style:containerStyles},props),label||(this.props.widgetProps&&this.props.widgetProps.Label||"Save")))}}]),_SrsButton_}(React.Component),_export("SrsButton",SrsButton=function(props){return WrappedComponent=_SrsButton_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsButton",SrsButton),_export("default",SrsButton),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsCarousel.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","image-carousel"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsCarousel_,SrsCarousel,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_imageCarousel){_imageCarousel.default}],execute:function(){_SrsCarousel_=function(_React$Component){function _SrsCarousel_(){return _classCallCheck(this,_SrsCarousel_),_possibleConstructorReturn(this,(_SrsCarousel_.__proto__||Object.getPrototypeOf(_SrsCarousel_)).apply(this,arguments))}return _inherits(_SrsCarousel_,_React$Component),_createClass(_SrsCarousel_,[{key:"componentDidMount",value:function(){var images=this.props.widgetProps&&this.props.widgetProps.Images?this.props.widgetProps.Images:this.props.images?"string"==typeof this.props.images?JSON.parse(this.props.images):this.props.images:["/resources/fresh.jpg","/resources/flowery.jpg"];images=images&&"string"==typeof images?JSON.parse(images):images;var options={target:$(".container",this.props.shadow)[0],showBottomMenu:!1,showSlidesToggle:!0,showBottomToggle:!0};1==$(".container",this.props.shadow).length&&new ImageCarousel(images,options).init()}},{key:"render",value:function(){return React.createElement("div",{className:"container"})}}]),_SrsCarousel_}(React.Component),_export("SrsCarousel",SrsCarousel=function(props){return _SrsCarousel_}),_export("SrsCarousel",SrsCarousel),_export("default",SrsCarousel),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsCarousel/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","image-carousel"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsCarousel_,SrsCarousel;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_imageCarousel){_imageCarousel.default}],execute:function(){_SrsCarousel_=function(_React$Component){function _SrsCarousel_(){return _classCallCheck(this,_SrsCarousel_),_possibleConstructorReturn(this,(_SrsCarousel_.__proto__||Object.getPrototypeOf(_SrsCarousel_)).apply(this,arguments))}return _inherits(_SrsCarousel_,_React$Component),_createClass(_SrsCarousel_,[{key:"componentDidMount",value:function(){var images=this.props.widgetProps&&this.props.widgetProps.Images?this.props.widgetProps.Images:this.props.images?"string"==typeof this.props.images?JSON.parse(this.props.images):this.props.images:["/resources/fresh.jpg","/resources/flowery.jpg"];images=images&&"string"==typeof images?JSON.parse(images):images;var options={target:$(".container",this.props.shadow)[0],showBottomMenu:!1,showSlidesToggle:!0,showBottomToggle:!0};1==$(".container",this.props.shadow).length&&new ImageCarousel(images,options).init()}},{key:"render",value:function(){return React.createElement("div",{className:"container"})}}]),_SrsCarousel_}(React.Component),_export("SrsCarousel",SrsCarousel=function(props){return _SrsCarousel_}),_export("SrsCarousel",SrsCarousel)}}}),System.register("component/studio/SrsChart.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-highcharts"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ReactHighcharts,_SrsChart_,SrsChart,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactHighcharts){ReactHighcharts=_reactHighcharts.default}],execute:function(){_SrsChart_=function(_React$Component){function _SrsChart_(){return _classCallCheck(this,_SrsChart_),_possibleConstructorReturn(this,(_SrsChart_.__proto__||Object.getPrototypeOf(_SrsChart_)).apply(this,arguments))}return _inherits(_SrsChart_,_React$Component),_createClass(_SrsChart_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement(ReactHighcharts,{config:{title:{text:"Solar Employment Growth by Sector, 2010-2016"},subtitle:{text:"Source: thesolarfoundation.com"},yAxis:{title:{text:"Number of Employees"}},xAxis:{accessibility:{rangeDescription:"Range: 2010 to 2017"}},legend:{layout:"vertical",align:"right",verticalAlign:"middle"},plotOptions:{series:{label:{connectorAllowed:!1},pointStart:2010}},series:[{name:"Installation",data:[43934,52503,57177,69658,97031,119931,137133,154175]},{name:"Manufacturing",data:[24916,24064,29742,29851,32490,30282,38121,40434]},{name:"Sales & Distribution",data:[11744,17722,16005,19771,20185,24377,32147,39387]},{name:"Project Development",data:[null,null,7988,12169,15112,22452,34400,34227]},{name:"Other",data:[12908,5948,8105,11248,8989,11816,18274,18111]}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}},domProps:{id:"chartId"}}))}}]),_SrsChart_}(React.Component),_export("SrsChart",SrsChart=function(props){return _SrsChart_}),_export("SrsChart",SrsChart),_export("default",SrsChart),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsChart/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-highcharts"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ReactHighcharts,_SrsChart_,SrsChart;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactHighcharts){ReactHighcharts=_reactHighcharts.default}],execute:function(){_SrsChart_=function(_React$Component){function _SrsChart_(){return _classCallCheck(this,_SrsChart_),_possibleConstructorReturn(this,(_SrsChart_.__proto__||Object.getPrototypeOf(_SrsChart_)).apply(this,arguments))}return _inherits(_SrsChart_,_React$Component),_createClass(_SrsChart_,[{key:"render",value:function(){return React.createElement("div",null,React.createElement(ReactHighcharts,{config:{title:{text:"Solar Employment Growth by Sector, 2010-2016"},subtitle:{text:"Source: thesolarfoundation.com"},yAxis:{title:{text:"Number of Employees"}},xAxis:{accessibility:{rangeDescription:"Range: 2010 to 2017"}},legend:{layout:"vertical",align:"right",verticalAlign:"middle"},plotOptions:{series:{label:{connectorAllowed:!1},pointStart:2010}},series:[{name:"Installation",data:[43934,52503,57177,69658,97031,119931,137133,154175]},{name:"Manufacturing",data:[24916,24064,29742,29851,32490,30282,38121,40434]},{name:"Sales & Distribution",data:[11744,17722,16005,19771,20185,24377,32147,39387]},{name:"Project Development",data:[null,null,7988,12169,15112,22452,34400,34227]},{name:"Other",data:[12908,5948,8105,11248,8989,11816,18274,18111]}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}},domProps:{id:"chartId"}}))}}]),_SrsChart_}(React.Component),_export("SrsChart",SrsChart=function(props){return _SrsChart_}),_export("SrsChart",SrsChart)}}}),System.register("component/studio/SrsCheckbox.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Checkbox,cloneDeep,_SrsCheckbox_,SrsCheckbox,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Checkbox=_carbonComponentsReact.Checkbox},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsCheckbox_=function(_React$Component){function _SrsCheckbox_(props){_classCallCheck(this,_SrsCheckbox_);var _this=_possibleConstructorReturn(this,(_SrsCheckbox_.__proto__||Object.getPrototypeOf(_SrsCheckbox_)).call(this,props));return _this.onChange=_this.onChange.bind(_this),_this}return _inherits(_SrsCheckbox_,_React$Component),_createClass(_SrsCheckbox_,[{key:"onChange",value:function(val){if(this.props.updateStore){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=val,this.props.updateStore({updates:{widgetProps:updatedProps}})}this.props.handleOnChange?this.props.handleOnChange(val):this.props.onChange&&this.props.onChange(val)}},{key:"render",value:function(){var title=this.props.title?this.props.title:this.props.widgetProps&&this.props.widgetProps.Label?this.props.widgetProps.Label:"Checkbox",isChecked=this.props.checked?this.props.checked:!this.props.widgetProps||!this.props.widgetProps.DefaultValue||this.props.widgetProps.DefaultValue,uid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),props={className:this.props.className?this.props.className:"checkbox",id:this.props.id?this.props.id:uid,onChange:this.onChange,value:isChecked};this.props.hideLabel?props.hideLabel=!0:props.labelText=title,isChecked&&(props.defaultChecked=!0);var containerStyles=this.props.containerStyles?this.props.containerStyles:null;return React.createElement("div",{className:containerStyles?"":"srs-prem-container",style:containerStyles},React.createElement("fieldset",null,React.createElement(Checkbox,props)))}}]),_SrsCheckbox_}(React.Component),_export("SrsCheckbox",SrsCheckbox=function(props){return WrappedComponent=_SrsCheckbox_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsCheckbox",SrsCheckbox),_export("default",SrsCheckbox),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsDate.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DatePicker,DatePickerInput,cloneDeep,_SrsDate_,SrsDate,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DatePicker=_carbonComponentsReact.DatePicker,DatePickerInput=_carbonComponentsReact.DatePickerInput},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsDate_=function(_React$Component){function _SrsDate_(props){_classCallCheck(this,_SrsDate_);var _this=_possibleConstructorReturn(this,(_SrsDate_.__proto__||Object.getPrototypeOf(_SrsDate_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsDate_,_React$Component),_createClass(_SrsDate_,[{key:"handleChange",value:function(val){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=val&&Array.isArray(val)&&val.length>0?val[0]:"",this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"render",value:function(){var styles={};try{styles=this.props.widgetProps&&this.props.widgetProps.styles?JSON.parse(this.props.widgetProps.styles):{}}catch(err){}var additionalProps={};return this.props.widgetProps&&(additionalProps.value=this.props.widgetProps.value),React.createElement("div",{className:"srs-prem-container"},React.createElement(DatePicker,_extends({styles:styles},additionalProps,{id:"date-picker",onChange:this.handleChange,onClose:function(){},datePickerType:"single"}),React.createElement(DatePickerInput,{id:"date-picker-input-id",className:this.props.widgetProps&&this.props.widgetProps.ClassName||this.props.className||"date-class",labelText:this.props.widgetProps&&this.props.widgetProps.Label||"Date",pattern:"d{1,2}/d{4}",placeholder:"mm/dd/yyyy",invalid:this.props.widgetProps&&this.props.widgetProps.invalid||"",invalidText:this.props.widgetProps&&this.props.widgetProps.InvalidText||"",iconDescription:"Icon description",onClick:function(){}})))}}]),_SrsDate_}(React.Component),_export("SrsDate",SrsDate=function(props){return _SrsDate_}),_export("SrsDate",SrsDate),_export("default",SrsDate),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsDividerX.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_,_SrsDividerX_,SrsDividerX,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsDividerX_=function(_React$Component){function _SrsDividerX_(props){_classCallCheck(this,_SrsDividerX_);var _this=_possibleConstructorReturn(this,(_SrsDividerX_.__proto__||Object.getPrototypeOf(_SrsDividerX_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_SrsDividerX_,_React$Component),_createClass(_SrsDividerX_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps,this.props)||this.setState({reload:!this.state.reload})}},{key:"render",value:function(){var styles={position:"absolute",height:1,top:"50%",width:"100%",borderBottom:"1px solid black"},widgetStyles={};if(this.props.widgetProps)if("string"==typeof this.props.widgetProps.Styles)try{widgetStyles=JSON.parse(this.props.widgetProps.Styles)}catch(err){}else widgetStyles=this.props.widgetProps.Styles;return styles=_extends({},styles,{widgetStyles:widgetStyles}),React.createElement("div",{style:{height:"inherit"}},React.createElement("div",{style:styles}))}}]),_SrsDividerX_}(React.Component),_export("SrsDividerX",SrsDividerX=function(props){return _SrsDividerX_}),_export("SrsDividerX",SrsDividerX),_export("default",SrsDividerX),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgets}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsDividerX/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_,_SrsDividerX_,SrsDividerX;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsDividerX_=function(_React$Component){function _SrsDividerX_(props){_classCallCheck(this,_SrsDividerX_);var _this=_possibleConstructorReturn(this,(_SrsDividerX_.__proto__||Object.getPrototypeOf(_SrsDividerX_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_SrsDividerX_,_React$Component),_createClass(_SrsDividerX_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps,this.props)||this.setState({reload:!this.state.reload})}},{key:"render",value:function(){var styles={position:"absolute",height:1,top:"50%",width:"100%",borderBottom:"1px solid black"},widgetStyles={};if(this.props.widgetProps)if("string"==typeof this.props.widgetProps.Styles)try{widgetStyles=JSON.parse(this.props.widgetProps.Styles)}catch(err){}else widgetStyles=this.props.widgetProps.Styles;return styles=_extends({},styles,{widgetStyles:widgetStyles}),React.createElement("div",{style:{height:"inherit"}},React.createElement("div",{style:styles}))}}]),_SrsDividerX_}(React.Component),_export("SrsDividerX",SrsDividerX=function(props){return _SrsDividerX_}),_export("SrsDividerX",SrsDividerX)}}}),System.register("component/studio/SrsDividerY.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsDividerY_,SrsDividerY,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SrsDividerY_=function(_React$Component){function _SrsDividerY_(){return _classCallCheck(this,_SrsDividerY_),_possibleConstructorReturn(this,(_SrsDividerY_.__proto__||Object.getPrototypeOf(_SrsDividerY_)).apply(this,arguments))}return _inherits(_SrsDividerY_,_React$Component),_createClass(_SrsDividerY_,[{key:"render",value:function(){return React.createElement("div",{style:{height:"inherit"}},React.createElement("div",{style:{textAlign:"center",width:1,paddingLeft:"50%",height:"inherit",borderRight:"1px solid black"}}))}}]),_SrsDividerY_}(React.Component),_export("SrsDividerY",SrsDividerY=function(props){return _SrsDividerY_}),_export("SrsDividerY",SrsDividerY),_export("default",SrsDividerY),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsDividerY/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsDividerY_,SrsDividerY;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SrsDividerY_=function(_React$Component){function _SrsDividerY_(){return _classCallCheck(this,_SrsDividerY_),_possibleConstructorReturn(this,(_SrsDividerY_.__proto__||Object.getPrototypeOf(_SrsDividerY_)).apply(this,arguments))}return _inherits(_SrsDividerY_,_React$Component),_createClass(_SrsDividerY_,[{key:"render",value:function(){return React.createElement("div",{style:{height:"inherit"}},React.createElement("div",{style:{textAlign:"center",width:1,paddingLeft:"50%",height:"inherit",borderRight:"1px solid black"}}))}}]),_SrsDividerY_}(React.Component),_export("SrsDividerY",SrsDividerY=function(props){return _SrsDividerY_}),_export("SrsDividerY",SrsDividerY)}}}),System.register("component/studio/SrsFile.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/slicedToArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/taggedTemplateLiteral.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","graphql-tag","react-apollo","apollo-client","apollo-upload-client","apollo-cache-inmemory","carbon-components-react","lodash.clonedeep"],function(_export,_context2){"use strict";var _regeneratorRuntime,_slicedToArray,_asyncToGenerator,_taggedTemplateLiteral,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,gql,Mutation,ApolloProvider,ApolloClient,apolloUploadClient,InMemoryCache,FileUploader,cloneDeep,_templateObject,createUploadLink,apolloClient,_SrsFile_,SrsFile,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs){_slicedToArray=_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs){_taggedTemplateLiteral=_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_graphqlTag){gql=_graphqlTag.default},function(_reactApollo){Mutation=_reactApollo.Mutation,ApolloProvider=_reactApollo.ApolloProvider},function(_apolloClient){ApolloClient=_apolloClient.ApolloClient},function(_apolloUploadClient){apolloUploadClient=_apolloUploadClient.default},function(_apolloCacheInmemory){InMemoryCache=_apolloCacheInmemory.InMemoryCache},function(_carbonComponentsReact){FileUploader=_carbonComponentsReact.FileUploader},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_templateObject=_taggedTemplateLiteral(["\n              mutation($file: Upload!) {\n                singleUpload(file: $file) {\n                  id\n                  filename\n                  mimetype\n                  path\n                }\n              }\n            "],["\n              mutation($file: Upload!) {\n                singleUpload(file: $file) {\n                  id\n                  filename\n                  mimetype\n                  path\n                }\n              }\n            "]),createUploadLink=apolloUploadClient.createUploadLink,apolloClient=function(){var cache=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ApolloClient({ssrMode:"undefined"!=typeof window,cache:(new InMemoryCache).restore(cache),link:createUploadLink({uri:"/graphql"})})}(),_SrsFile_=function(_React$Component){function _SrsFile_(props){_classCallCheck(this,_SrsFile_);var _this=_possibleConstructorReturn(this,(_SrsFile_.__proto__||Object.getPrototypeOf(_SrsFile_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_SrsFile_,_React$Component),_createClass(_SrsFile_,[{key:"render",value:function(){var _this2=this;return React.createElement(ApolloProvider,{client:apolloClient},React.createElement(Mutation,{mutation:gql(_templateObject)},function(mutate){return React.createElement("div",null,React.createElement(FileUploader,{buttonLabel:_this2.props.widgetProps?_this2.props.widgetProps.Label:"Add files",filenameStatus:"edit",accept:[".jpg",".png"],name:"",size:"small",onChange:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(_ref2){var result,widgetProps,_ref2$target=_ref2.target,validity=_ref2$target.validity,file=_slicedToArray(_ref2$target.files,1)[0];return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!validity.valid){_context.next=5;break}return _context.next=3,mutate({variables:{file:file}});case 3:(result=_context.sent)&&result.data&&result.data.singleUpload&&result.data.singleUpload.id&&((widgetProps=cloneDeep(_this2.props.widgetProps)).UploadedFileId=result.data.singleUpload.id,_this2.props.updateStore({updates:{widgetProps:widgetProps}}));case 5:case"end":return _context.stop()}},_callee,_this2)})),function(_x2){return _ref.apply(this,arguments)})}),React.createElement("img",{src:_this2.props.widgetProps&&_this2.props.widgetProps.UploadedFileId?"/file/"+_this2.props.widgetProps.UploadedFileId:"/file/"+_this2.props.widgetProps.DefaultFileId}));var _ref}))}}]),_SrsFile_}(React.Component),_export("SrsFile",SrsFile=function(props){return _SrsFile_}),_export("SrsFile",SrsFile),_export("default",SrsFile),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsFile/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/slicedToArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/taggedTemplateLiteral.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","graphql-tag","react-apollo","apollo-client","apollo-upload-client","apollo-cache-inmemory","carbon-components-react","lodash.clonedeep"],function(_export,_context2){"use strict";var _regeneratorRuntime,_slicedToArray,_asyncToGenerator,_taggedTemplateLiteral,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,gql,Mutation,ApolloProvider,ApolloClient,apolloUploadClient,InMemoryCache,FileUploader,cloneDeep,_templateObject,createUploadLink,apolloClient,_SrsFile_,SrsFile;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs){_slicedToArray=_npmSystemjsPluginBabel0025BabelHelpersSlicedToArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs){_taggedTemplateLiteral=_npmSystemjsPluginBabel0025BabelHelpersTaggedTemplateLiteralJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_graphqlTag){gql=_graphqlTag.default},function(_reactApollo){Mutation=_reactApollo.Mutation,ApolloProvider=_reactApollo.ApolloProvider},function(_apolloClient){ApolloClient=_apolloClient.ApolloClient},function(_apolloUploadClient){apolloUploadClient=_apolloUploadClient.default},function(_apolloCacheInmemory){InMemoryCache=_apolloCacheInmemory.InMemoryCache},function(_carbonComponentsReact){FileUploader=_carbonComponentsReact.FileUploader},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_templateObject=_taggedTemplateLiteral(["\n              mutation($file: Upload!) {\n                singleUpload(file: $file) {\n                  id\n                  filename\n                  mimetype\n                  path\n                }\n              }\n            "],["\n              mutation($file: Upload!) {\n                singleUpload(file: $file) {\n                  id\n                  filename\n                  mimetype\n                  path\n                }\n              }\n            "]),createUploadLink=apolloUploadClient.createUploadLink,apolloClient=function(){var cache=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ApolloClient({ssrMode:"undefined"!=typeof window,cache:(new InMemoryCache).restore(cache),link:createUploadLink({uri:"/graphql"})})}(),_SrsFile_=function(_React$Component){function _SrsFile_(props){_classCallCheck(this,_SrsFile_);var _this=_possibleConstructorReturn(this,(_SrsFile_.__proto__||Object.getPrototypeOf(_SrsFile_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_SrsFile_,_React$Component),_createClass(_SrsFile_,[{key:"render",value:function(){var _this2=this;return React.createElement(ApolloProvider,{client:apolloClient},React.createElement(Mutation,{mutation:gql(_templateObject)},function(mutate){return React.createElement("div",null,React.createElement(FileUploader,{buttonLabel:_this2.props.widgetProps?_this2.props.widgetProps.Label:"Add files",filenameStatus:"edit",accept:[".jpg",".png"],name:"",size:"small",onChange:(_ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(_ref2){var result,widgetProps,_ref2$target=_ref2.target,validity=_ref2$target.validity,file=_slicedToArray(_ref2$target.files,1)[0];return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!validity.valid){_context.next=5;break}return _context.next=3,mutate({variables:{file:file}});case 3:(result=_context.sent)&&result.data&&result.data.singleUpload&&result.data.singleUpload.id&&((widgetProps=cloneDeep(_this2.props.widgetProps)).UploadedFileId=result.data.singleUpload.id,_this2.props.updateStore({updates:{widgetProps:widgetProps}}));case 5:case"end":return _context.stop()}},_callee,_this2)})),function(_x2){return _ref.apply(this,arguments)})}),React.createElement("img",{src:_this2.props.widgetProps&&_this2.props.widgetProps.UploadedFileId?"/file/"+_this2.props.widgetProps.UploadedFileId:"/file/"+_this2.props.widgetProps.DefaultFileId}));var _ref}))}}]),_SrsFile_}(React.Component),_export("SrsFile",SrsFile=function(props){return _SrsFile_}),_export("SrsFile",SrsFile)}}}),System.register("component/studio/SrsFilter.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-querybuilder","nanoid","carbon-components-react","component/studio/SrsSelect/Definition.js","component/studio/SrsButton/Definition.js","component/studio/SrsCheckbox/Definition.js","component/studio/SrsDate/Definition.js","component/studio/SrsReference/Definition.js","lodash.clonedeep","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/split-screen/32","@carbon/icons-react/lib/trash-can/32"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,QueryBuilder,nanoid,Button,TextInput,Toggle,SrsSelect,SrsCheckbox,SrsDate,SrsReference,cloneDeep,Close20,_SrsFilter_,SrsFilter,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactQuerybuilder){QueryBuilder=_reactQuerybuilder.default},function(_nanoid){nanoid=_nanoid.default},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput,Toggle=_carbonComponentsReact.Toggle},function(_componentStudioSrsSelectDefinitionJs){SrsSelect=_componentStudioSrsSelectDefinitionJs.SrsSelect},function(_componentStudioSrsButtonDefinitionJs){_componentStudioSrsButtonDefinitionJs.SrsButton},function(_componentStudioSrsCheckboxDefinitionJs){SrsCheckbox=_componentStudioSrsCheckboxDefinitionJs.SrsCheckbox},function(_componentStudioSrsDateDefinitionJs){SrsDate=_componentStudioSrsDateDefinitionJs.SrsDate},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonIconsReactLibAddAlt){_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSplitScreen){_carbonIconsReactLibSplitScreen.default},function(_carbonIconsReactLibTrashCan){Close20=_carbonIconsReactLibTrashCan.default}],execute:function(){_SrsFilter_=function(_React$Component){function _SrsFilter_(props){_classCallCheck(this,_SrsFilter_);var _this=_possibleConstructorReturn(this,(_SrsFilter_.__proto__||Object.getPrototypeOf(_SrsFilter_)).call(this,props));_this.tableName=_this.props.tablename?_this.props.tablename:_this.props.widgetProps&&_this.props.widgetProps.TableName?_this.props.widgetProps.TableName:"";var targetModelFields=[];if(_this.props.fields&&_this.props.fields.length>0){var tempTargetModelFields=_this.props.fields.filter(function(item){return item.parent==_this.tableName&&"id"!=item.text&&"field"==item.type}),tempTargetModelRelations=_this.props.fields.filter(function(item){return item.parent==_this.tableName&&("one2one"==item.type||"one2many"==item.type)});tempTargetModelFields.map(function(item){var iText=item.text,rName=iText.charAt(0).toLowerCase()+iText.substr(1,iText.length-1),rField=tempTargetModelRelations.filter(function(tmrItem){return tmrItem.text==rName})[0];rField?targetModelFields.push({name:item.text,label:item.text,datatype:"Reference",tableName:rField.to}):targetModelFields.push({name:item.text,label:item.text,datatype:item.datatype})})}return _this.state={fields:targetModelFields,query:_this.props&&_this.props.current_filter&&Object.keys(_this.props.current_filter).length>0?_this.transformFilter(_this.props.current_filter.where):{id:"g-"+nanoid(),combinator:"and",not:!1,rules:[]},format:"json",showCombinatorsBetweenRules:!1,showNotToggle:!1,resetOnFieldChange:!0},_this.props.schema&&0!=Object.keys(_this.props.schema).length?_this.setState({fields:targetModelFields}):$script.runAtServer("mmf.getSchemaData").then(function(schemaData){_this.props.updateStore({updates:{schema:schemaData}});var fields=[];if(schemaData&&schemaData.fields){var _tempTargetModelFields=schemaData.fields.filter(function(item){return item.parent==_this.tableName&&"id"!=item.text&&"field"==item.type}),_tempTargetModelRelations=schemaData.fields.filter(function(item){return item.parent==_this.tableName&&("one2one"==item.type||"one2many"==item.type)});_tempTargetModelFields.map(function(item){var iText=item.text,rName=iText.charAt(0).toLowerCase()+iText.substr(1,iText.length-1),rField=_tempTargetModelRelations.filter(function(tmrItem){return tmrItem.text==rName})[0];rField?fields.push({name:item.text,label:item.text,datatype:"Reference",tableName:rField.to}):fields.push({name:item.text,label:item.text,datatype:item.datatype})})}_this.setState({fields:fields})}),_this.transformFilter=_this.transformFilter.bind(_this),_this.addRuleAction=function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement("div",{className:"addRuleBtn"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("button",{onClick:this.props.handleOnClick},"+ Rule"))}}]),_class}(React.Component),_this.addGroupAction=function(_React$Component3){function _class2(){return _classCallCheck(this,_class2),_possibleConstructorReturn(this,(_class2.__proto__||Object.getPrototypeOf(_class2)).apply(this,arguments))}return _inherits(_class2,_React$Component3),_createClass(_class2,[{key:"render",value:function(){return React.createElement("div",{className:"addRuleBtn"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("button",{onClick:this.props.handleOnClick},"+ Group"))}}]),_class2}(React.Component),_this.closeIcon=function(_React$Component4){function _class3(){return _classCallCheck(this,_class3),_possibleConstructorReturn(this,(_class3.__proto__||Object.getPrototypeOf(_class3)).apply(this,arguments))}return _inherits(_class3,_React$Component4),_createClass(_class3,[{key:"render",value:function(){return React.createElement("div",{className:"closeBtn"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(Close20,{style:{marginTop:3,width:23,height:23,"&:hover":{cursor:"pointer"}},onClick:this.props.handleOnClick}))}}]),_class3}(React.Component),_this.fieldSelector=function(_React$Component5){function _class4(props){return _classCallCheck(this,_class4),_possibleConstructorReturn(this,(_class4.__proto__||Object.getPrototypeOf(_class4)).call(this,props))}return _inherits(_class4,_React$Component5),_createClass(_class4,[{key:"render",value:function(){var _props=this.props,className=_props.className,options=_props.options,title=_props.title,value=_props.value,Wrapper=SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0});return React.createElement(Wrapper,{className:className,value:value,title:title,onChange:this.props.handleOnChange,options:options})}}]),_class4}(React.Component),_this.operatorSelector=function(_React$Component6){function _class5(props){return _classCallCheck(this,_class5),_possibleConstructorReturn(this,(_class5.__proto__||Object.getPrototypeOf(_class5)).call(this,props))}return _inherits(_class5,_React$Component6),_createClass(_class5,[{key:"render",value:function(){var _props2=this.props,className=_props2.className,options=_props2.options,title=_props2.title,value=_props2.value,Wrapper=(_props2.level,_props2.fieldData,_props2.field,SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}));return React.createElement(Wrapper,{className:className,value:value,title:title,onChange:this.props.handleOnChange,options:options})}}]),_class5}(React.Component),_this.valueEditor=function(_React$Component7){function _class6(props){return _classCallCheck(this,_class6),_possibleConstructorReturn(this,(_class6.__proto__||Object.getPrototypeOf(_class6)).call(this,props))}return _inherits(_class6,_React$Component7),_createClass(_class6,[{key:"render",value:function(){var _this8=this,_props3=this.props,fieldData=(_props3.field,_props3.fieldData),title=_props3.title,operator=_props3.operator,value=_props3.value,type=_props3.type,values=(_props3.inputType,_props3.values),className=_props3.className,Wrapper=null;if("null"===operator||"notNull"===operator||"isEmpty"===operator||"isNotEmpty"===operator)return null;switch("isOneOf"==operator&&(type="select"),fieldData&&"DateTime"==fieldData.datatype&&(type="date"),fieldData&&"Reference"==fieldData.datatype&&(type="reference"),type){case"select":return Wrapper=SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}),React.createElement(Wrapper,{className:className,title:title,onChange:this.props.handleOnChange,value:value},"options=",values);case"checkbox":return Wrapper=Toggle,React.createElement("div",{style:{display:"inline-flex",marginLeft:5}},React.createElement(Wrapper,{labelA:"",labelB:"",className:className,title:title,defaultToggled:!!value,onToggle:function(val){return _this8.props.handleOnChange(val)},checked:!!value}));case"radio":return React.createElement("span",{className:className,title:title},values.map(function(v){return React.createElement("label",{key:v.name},React.createElement("input",{type:"radio",value:v.name,checked:value===v.name,onChange:function(e){return handleOnChange(e.target.value)}}),v.label)}));case"date":return Wrapper=SrsDate({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}),React.createElement("div",{style:{display:"inline-flex",marginLeft:2}},React.createElement(Wrapper,{className:className,title:title,onChange:this.props.handleOnChange,value:value},"options=",values));case"reference":var ComponentReference=SrsReference({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}),renderType=React.createElement(ComponentReference,{tablename:fieldData.tableName,displayfield:"Name",secondarydisplayfield:"",filter:JSON.stringify({where:{Name:{like:"Srs%"}}}),searchfields:"Name",title:"Render Type",defaultValue:"",onChange:function(selectedItem){}});return React.createElement("div",{className:"srs-ref-filter",style:{display:"inline-flex",marginLeft:2}},renderType);default:return React.createElement("div",{style:{display:"inline-flex",marginLeft:2}},React.createElement(TextInput,{hideLabel:!0,defaultValue:value,className:className,placeholder:"Enter Value...",onChange:function(e){return _this8.props.handleOnChange(e.target.value)}}))}}}]),_class6}(React.Component),_this.filters={String:[{name:"startsWith",label:"starts with"},{name:"endsWith",label:"ends with"},{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"=",label:"is"},{name:"isNot",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"isAnything",label:"is anything"},{name:"isOneOf",label:"is one of"},{name:"isEmptyString",label:"is empty string"},{name:"<=",label:"less than or is"},{name:">=",label:"greater than or is"},{name:"<>",label:"between"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"}],boolean:[{name:"=",label:"is"},{name:"!=",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"}],integer:[{name:"=",label:"is"},{name:"isNot",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"<",label:"less than"},{name:">",label:"greater than"},{name:"<=",label:"less than or is"},{name:">=",label:"greater than or is"},{name:"<>",label:"between"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDifferent",label:"is different"},{name:"graterThanField",label:"greater than field"},{name:"lessThanField",label:"less than field"},{name:"greaterThanorisField",label:"greater than or is field"},{name:"lessThanorisField",label:"less than or is field"}],DateTime:[{name:"=",label:"on"},{name:"!=",label:"not on"},{name:"<",label:"before"},{name:"<=",label:"at or before"},{name:">",label:"after"},{name:">=",label:"at or after"},{name:"on",label:"on"},{name:"<>",label:"between"},{name:"trend",label:"trend"},{name:"relative",label:"relative"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"},{name:"isMoreThan",label:"is more than"},{name:"isLessThan",label:"is less than"}],Reference:[{name:"=",label:"is"},{name:"!=",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"startsWith",label:"starts with"},{name:"startsWith",label:"ends with"},{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"},{name:"isEmptyString",label:"is empty string"}],choice:[{name:"=",label:"is"},{name:"!=",label:"is not"},{name:"isOneOf",label:"is one of"},{name:"isNotOneOf",label:"is not one of"},{name:"startsWith",label:"starts with"},{name:"startsWith",label:"ends with"},{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"}],list:[{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"}]},_this}return _inherits(_SrsFilter_,_React$Component),_createClass(_SrsFilter_,[{key:"transformFilter",value:function(filter){var _this9=this,result={};filter&&"object"==typeof filter&&(Array.isArray(filter)?filter.map(function(rule){result.rules=result.rules||[];var field=rule&&Object.keys(rule)&&1==Object.keys(rule).length&&Object.keys(rule)[0],operator="=",value=void 0;if(rule[field])if("and"==field||"or"==field){var tempResult={};tempResult.id="g-"+nanoid(),tempResult.combinator=field,tempResult.not=!1,tempResult.rules=_this9.transformFilter(rule[field]),result.rules.push(tempResult)}else"object"==typeof rule[field]?(operator=Object.keys(rule[field])&&1==Object.keys(rule[field]).length&&Object.keys(rule[field])[0],(value=Object.keys(rule[field])&&1==Object.keys(rule[field]).length&&rule[field][Object.keys(rule[field])[0]])&&(value=value.replace(/%/g,"")),result.rules.push({id:"r-"+nanoid(),field:field,operator:operator,value:value})):((value=rule[field])&&(value=value.replace(/%/g,"")),result.rules.push({id:"r-"+nanoid(),field:field,operator:operator,value:value}))}):Object.keys(filter).map(function(filterKey){"and"!=filterKey&&"or"!=filterKey||(result.id="g-"+nanoid(),result.combinator=filterKey,result.not=!1,result.rules=_this9.transformFilter(filter[filterKey]))}));return filter&&"object"==typeof filter&&Array.isArray(filter)?result.rules:result}},{key:"render",value:function(){var _this10=this,formatQuery=function(query){return{where:parseQuery(query)}},operatorMap={startsWith:"like",endsWith:"like",contains:"like",doesNotContain:"nlike","=":"eq","!=":"neq",">":"gt",">=":"gte","<":"lt","<=":"lte",between:"between",in:"inq","not in":"nin",isEmpty:"eq",isNotEmpty:"neq"},parseQuery=function parseQuery(query){var result={};return query.combinator&&(result[query.combinator]=[],query.rules&&query.rules.map(function(rule,indx){if(rule.combinator){var parsedQueryResult=parseQuery(rule);result[query.combinator].push(parsedQueryResult)}else switch(rule.operator){case"startsWith":var stWithRule={};stWithRule[rule.field]={},stWithRule[rule.field][operatorMap[rule.operator]]=rule.value+"%",result[query.combinator].push(stWithRule);break;case"contains":case"doesNotContain":var containRule={};containRule[rule.field]={},containRule[rule.field][operatorMap[rule.operator]]="%"+rule.value+"%",result[query.combinator].push(containRule);break;case"endsWith":var enWithRule={};enWithRule[rule.field]={},enWithRule[rule.field][operatorMap[rule.operator]]="%"+rule.value,result[query.combinator].push(enWithRule);break;case"between":var betWRule={};betWRule[rule.field]={},betWRule[rule.field][operatorMap[rule.operator]]=[0,rule.value],result[query.combinator].push(betWRule);break;case"in":var inRule={};inRule[rule.field]={},inRule[rule.field][operatorMap[rule.operator]]=[0,rule.value],result[query.combinator].push(inRule);break;case"=":case"!=":case">":case"<":case"<=":case">=":case"isEmpty":case"isNotEmpty":var arthRule={};arthRule[rule.field]={},arthRule[rule.field][operatorMap[rule.operator]]=rule.value,result[query.combinator].push(arthRule);break;case"like":case"nlike":var revLikeRule={};revLikeRule[rule.field]={},revLikeRule[rule.field][rule.operator]="%"+rule.value+"%",result[query.combinator].push(revLikeRule);break;case"eq":case"neq":case"gt":case"gte":case"lt":case"lte":case"between":case"inq":case"nin":case"eq":case"neq":var revRule={};revRule[rule.field]={},revRule[rule.field][rule.operator]=rule.value,result[query.combinator].push(revRule)}})),result};this.props.widgetProps&&this.props.widgetProps.updateStore({updates:{current_filter:formatQuery(this.query)}});var filterStyle=this.props.maxheight?{maxHeight:this.props.maxheight}:{};return React.createElement("div",null,React.createElement("div",{className:"flex-box-outer"},React.createElement("div",{className:"control-panel"},React.createElement(Button,{size:"small",style:{marginRight:5,backgroundColor:"darkgray",color:"black"},onClick:function(){return function(){if(!_this10.state.query||!_this10.state.query.rules||0!=_this10.state.query.rules.length){var result=formatQuery(_this10.state.query);if(_this10.props.resultkey){var activeFilters=cloneDeep(_this10.props.active_filters);activeFilters[_this10.props.resultkey]=result,_this10.props.updateStore&&_this10.props.updateStore({updates:{active_filters:activeFilters,current_filter:result,showFilter:!1}})}else _this10.props.updateStore&&_this10.props.updateStore({updates:{current_filter:result,showFilter:!1}})}}()}},"Apply"),React.createElement(Button,{size:"small",style:{marginRight:5,backgroundColor:"darkgray",color:"black"},onClick:function(){return function(){if(_this10.setState({query:{id:"g-"+nanoid(),combinator:"and",not:!1,rules:[]},fields:_this10.state.fields}),_this10.props.resultkey){var activeFilters=cloneDeep(_this10.props.active_filters);activeFilters[_this10.props.resultkey]={},_this10.props.updateStore&&_this10.props.updateStore({updates:{active_filters:activeFilters,current_filter:{},showFilter:!1}})}else _this10.props.updateStore&&_this10.props.updateStore({updates:{current_filter:{},showFilter:!1}})}()}},"Clear")),React.createElement("hr",null),React.createElement("div",{className:"flex-box",style:filterStyle},React.createElement("div",{className:"scroll"},React.createElement(QueryBuilder,{query:this.state.query,fields:this.state.fields,controlElements:{combinatorSelector:SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0,className:"showCombinator"}),addRuleAction:this.addRuleAction,addGroupAction:this.addGroupAction,removeGroupAction:this.closeIcon,notToggle:SrsCheckbox({containerStyles:{display:"inline-flex",marginLeft:2},title:"NOT",className:"notToggle"}),valueEditor:this.valueEditor,fieldSelector:this.fieldSelector,operatorSelector:this.operatorSelector},controlClassnames:{fields:"form-control"},onQueryChange:function(query){_this10.setState({query:query})},getOperators:function(field){var sField=_this10.state.fields.filter(function(fField){return fField.name==field})[0];return sField&&_this10.filters[sField.datatype]||null},getValueEditorType:function(field,operator){switch(field){case"gender":return"radio";case"instrument":return"select";case"isMusician":return"checkbox";default:return"text"}},getInputType:function(field,operator){switch(field){case"age":return"number";default:return"text"}},getValues:function(field,operator){switch(field){case"instrument":return[{name:"Guitar",label:"Guitar"},{name:"Piano",label:"Piano"},{name:"Vocals",label:"Vocals"},{name:"Drums",label:"Drums"}];case"gender":return[{name:"M",label:"Male"},{name:"F",label:"Female"},{name:"O",label:"Other"}];default:return[]}},showCombinatorsBetweenRules:this.state.showCombinatorsBetweenRules,showNotToggle:this.state.showNotToggle,resetOnFieldChange:this.state.resetOnFieldChange})))))}}]),_SrsFilter_}(React.Component),_export("SrsFilter",SrsFilter=function(props){return _SrsFilter_}),_export("SrsFilter",SrsFilter),_export("default",SrsFilter),_export("states",states=[{KeyName:"showFilter",AccessPath:"showFilter",DefaultValue:'{"showFilter": false}'},{KeyName:"fields",AccessPath:"schema.fields",DefaultValue:'{"schema": {"fields": []}}'},{KeyName:"schema",AccessPath:"schema",DefaultValue:'{"schema": {}}'},{KeyName:"active_filters",AccessPath:"active_filters",DefaultValue:'{"active_filters": {}}'},{KeyName:"current_filter",AccessPath:"current_filter",DefaultValue:'{"current_filter": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsSelect/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,cloneDeep,_SrsSelect_,SrsSelect;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsSelect_=function(_React$Component){function _SrsSelect_(props){_classCallCheck(this,_SrsSelect_);var _this=_possibleConstructorReturn(this,(_SrsSelect_.__proto__||Object.getPrototypeOf(_SrsSelect_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsSelect_,_React$Component),_createClass(_SrsSelect_,[{key:"handleChange",value:function(e){if(this.props.updateStore){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=e.target.value,this.props.updateStore({updates:{widgetProps:updatedProps}})}this.props.handleOnChange?this.props.handleOnChange(e.target.value):this.props.onChange&&this.props.onChange(e.target.value)}},{key:"render",value:function(){var choices=[];if(this.props.options&&this.props.options.length>0)this.props.options.map(function(option){choices.push(React.createElement(SelectItem,{value:option.name,text:option.label}))});else if(this.props.widgetProps&&this.props.widgetProps.ChoiceList){var choiceList=[];try{(choiceList="string"==typeof this.props.widgetProps.ChoiceList?JSON.parse(this.props.widgetProps.ChoiceList):this.props.widgetProps.ChoiceList)&&choiceList.length>0&&choiceList.map(function(choiceItem,indx){choices.push(React.createElement(SelectItem,{value:choiceItem.value,text:choiceItem.name}))})}catch(err){}}var selectName=this.props.title?this.props.title:this.props.widgetProps&&this.props.widgetProps.Label?this.props.widgetProps.Label:"Select",props={name:selectName,className:this.props.className?this.props.className:this.props.widgetProps&&this.props.widgetProps.ClassName?this.props.widgetProps.ClassName:"",onChange:this.handleChange},value=this.props.value?this.props.value:this.props.widgetProps&&this.props.widgetProps.value?this.props.widgetProps.value:"";if((value=value||(this.props.widgetProps&&this.props.widgetProps.DefaultVaue?this.props.widgetProps.DefaultVaue:""))&&(props.defaultValue=value,this.props.updateStore&&this.props.widgetProps.value!=value)){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=value,this.props.updateStore({updates:{widgetProps:updatedProps}})}this.props.hideLabel||this.props.widgetProps&&(1==this.props.widgetProps.HideLabel||"true"==this.props.widgetProps.HideLabel)?props.hideLabel=!0:props.labelText=selectName;var containerStyles=this.props.containerStyles?this.props.containerStyles:null;return React.createElement("div",{className:containerStyles?"":"srs-prem-container",style:containerStyles},React.createElement(Select,props,choices))}}]),_SrsSelect_}(React.Component),_export("SrsSelect",SrsSelect=function(props){return WrappedComponent=_SrsSelect_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsSelect",SrsSelect)}}}),System.register("component/studio/SrsCheckbox/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Checkbox,cloneDeep,_SrsCheckbox_,SrsCheckbox;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Checkbox=_carbonComponentsReact.Checkbox},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsCheckbox_=function(_React$Component){function _SrsCheckbox_(props){_classCallCheck(this,_SrsCheckbox_);var _this=_possibleConstructorReturn(this,(_SrsCheckbox_.__proto__||Object.getPrototypeOf(_SrsCheckbox_)).call(this,props));return _this.onChange=_this.onChange.bind(_this),_this}return _inherits(_SrsCheckbox_,_React$Component),_createClass(_SrsCheckbox_,[{key:"onChange",value:function(val){if(this.props.updateStore){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=val,this.props.updateStore({updates:{widgetProps:updatedProps}})}this.props.handleOnChange?this.props.handleOnChange(val):this.props.onChange&&this.props.onChange(val)}},{key:"render",value:function(){var title=this.props.title?this.props.title:this.props.widgetProps&&this.props.widgetProps.Label?this.props.widgetProps.Label:"Checkbox",isChecked=this.props.checked?this.props.checked:!this.props.widgetProps||!this.props.widgetProps.DefaultValue||this.props.widgetProps.DefaultValue,uid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),props={className:this.props.className?this.props.className:"checkbox",id:this.props.id?this.props.id:uid,onChange:this.onChange,value:isChecked};this.props.hideLabel?props.hideLabel=!0:props.labelText=title,isChecked&&(props.defaultChecked=!0);var containerStyles=this.props.containerStyles?this.props.containerStyles:null;return React.createElement("div",{className:containerStyles?"":"srs-prem-container",style:containerStyles},React.createElement("fieldset",null,React.createElement(Checkbox,props)))}}]),_SrsCheckbox_}(React.Component),_export("SrsCheckbox",SrsCheckbox=function(props){return WrappedComponent=_SrsCheckbox_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsCheckbox",SrsCheckbox)}}}),System.register("component/studio/SrsDate/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DatePicker,DatePickerInput,cloneDeep,_SrsDate_,SrsDate;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DatePicker=_carbonComponentsReact.DatePicker,DatePickerInput=_carbonComponentsReact.DatePickerInput},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsDate_=function(_React$Component){function _SrsDate_(props){_classCallCheck(this,_SrsDate_);var _this=_possibleConstructorReturn(this,(_SrsDate_.__proto__||Object.getPrototypeOf(_SrsDate_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsDate_,_React$Component),_createClass(_SrsDate_,[{key:"handleChange",value:function(val){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=val&&Array.isArray(val)&&val.length>0?val[0]:"",this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"render",value:function(){var styles={};try{styles=this.props.widgetProps&&this.props.widgetProps.styles?JSON.parse(this.props.widgetProps.styles):{}}catch(err){}var additionalProps={};return this.props.widgetProps&&(additionalProps.value=this.props.widgetProps.value),React.createElement("div",{className:"srs-prem-container"},React.createElement(DatePicker,_extends({styles:styles},additionalProps,{id:"date-picker",onChange:this.handleChange,onClose:function(){},datePickerType:"single"}),React.createElement(DatePickerInput,{id:"date-picker-input-id",className:this.props.widgetProps&&this.props.widgetProps.ClassName||this.props.className||"date-class",labelText:this.props.widgetProps&&this.props.widgetProps.Label||"Date",pattern:"d{1,2}/d{4}",placeholder:"mm/dd/yyyy",invalid:this.props.widgetProps&&this.props.widgetProps.invalid||"",invalidText:this.props.widgetProps&&this.props.widgetProps.InvalidText||"",iconDescription:"Icon description",onClick:function(){}})))}}]),_SrsDate_}(React.Component),_export("SrsDate",SrsDate=function(props){return _SrsDate_}),_export("SrsDate",SrsDate)}}}),System.register("component/studio/SrsReference/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","@carbon/icons-react/lib/close/32","lodash.debounce"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ComboBox,cloneDeep,Close,debounce,_SrsReference_,SrsReference;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){ComboBox=_carbonComponentsReact.ComboBox},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonIconsReactLibClose){Close=_carbonIconsReactLibClose.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){_SrsReference_=function(_React$Component){function _SrsReference_(props){_classCallCheck(this,_SrsReference_);var _this=_possibleConstructorReturn(this,(_SrsReference_.__proto__||Object.getPrototypeOf(_SrsReference_)).call(this,props));return _this.state={recordItems:[],selectedItem:null,previousSelectedItem:null},_this.reloadData=_this.reloadData.bind(_this),_this.onChangeDebounce=debounce(function(val){_this.state.lastSearchKey!=val&&(_this.state.lastSearchKey||val)&&_this.getRecords(val).then(function(recordItems){return _this.setState({recordItems:recordItems,lastSearchKey:val})})},500),_this.reloadData(),_this}return _inherits(_SrsReference_,_React$Component),_createClass(_SrsReference_,[{key:"getRecords",value:function(filterKey,includeUIDs){var _this2=this;return new Promise(function(resolve,reject){var records=[];$script.getscript("mmf.getRecords").then(function(_ref){var getRecordsFn=_ref.default,filter={};try{filter=JSON.parse(_this2.recordMatchingFilter)}catch(err){}if(filter){var currentWhereClause=filter.where?filter.where:{},additionalAndClause=null;if(filterKey||includeUIDs)additionalAndClause={or:[]},_this2.searchFields.split(",").map(function(searchField,indx){var innerClause={};innerClause[searchField]={like:"%"+filterKey+"%"},additionalAndClause.or.push(innerClause)}),includeUIDs&&includeUIDs.length>0&&(additionalAndClause.or.uid={inq:includeUIDs});filter.where=additionalAndClause?{and:[currentWhereClause,additionalAndClause]}:currentWhereClause}getRecordsFn({tableName:_this2.tableName,fields:[_this2.displayField,_this2.secondaryDisplayField,"uid"],fieldAliases:null,filter:filter}).then(function(tableRows){tableRows&&!tableRows.error&&tableRows&&tableRows.length>0?(tableRows.map(function(tableRow){var recordData=tableRow.node;records.push({id:recordData.uid,text:_this2.secondaryDisplayField?recordData[_this2.displayField]+" [ "+recordData[_this2.secondaryDisplayField]+" ]":""+recordData[_this2.displayField]})}),resolve(records)):resolve([])})})})}},{key:"reloadData",value:function(){var _this3=this,fieldValue=this.props.widgetProps?this.props.widgetProps.value||this.props.widgetProps.DefaultValue:this.props.defaultValue;this.getRecords("",[fieldValue]).then(function(records){var selectedItem=null;if(records&&records.length>0){var matchingRecord=records.filter(function(record){return record.id==fieldValue});selectedItem=matchingRecord&&matchingRecord.length>0?matchingRecord[0]:selectedItem}var item=selectedItem||(fieldValue?{id:fieldValue,text:""}:null);_this3.setState({recordItems:records,selectedItem:item})})}},{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&_.isEqual(prevProps.tablename,this.props.tablename)&&_.isEqual(prevProps.displayfield,this.props.displayfield)&&_.isEqual(prevProps.filter,this.props.filter)&&_.isEqual(prevProps.defaultValue,this.props.defaultValue)&&_.isEqual(prevProps.searchfields,this.props.searchfields)||this.reloadData()}},{key:"render",value:function(){var _this4=this;this.tableName=this.props.tablename?this.props.tablename:this.props.widgetProps&&this.props.widgetProps.TableName?this.props.widgetProps.TableName:"",this.displayField=this.props.displayfield?this.props.displayfield:this.props.widgetProps&&this.props.widgetProps.DisplayField?this.props.widgetProps.DisplayField:"",this.secondaryDisplayField=this.props.secondarydisplayfield?this.props.secondarydisplayfield:this.props.widgetProps&&this.props.widgetProps.SecondaryDisplayField?this.props.widgetProps.SecondaryDisplayField:"",this.recordMatchingFilter=this.props.filter?this.props.filter:this.props.widgetProps&&this.props.widgetProps.RecordMatchingFilter?this.props.widgetProps.RecordMatchingFilter:"{}",this.searchFields=this.props.searchfields?this.props.searchfields:this.props.widgetProps&&this.props.widgetProps.SearchFields?this.props.widgetProps.SearchFields:"uid";var invalid=!(!this.props.widgetProps||"true"!=this.props.widgetProps.invalid),selectedItem=this.state.selectedItem,initialSelectedItem=(this.props.defaultValue?this.props.defaultValue:this.props.widgetProps&&(this.props.widgetProps.value||this.props.widgetProps.DefaultValue),this.state.lastSearchKey?this.state.lastSearchKey:selectedItem),titleText=this.props.title?this.props.title:this.props.widgetProps&&this.props.widgetProps.Label?this.props.widgetProps.Label:"Data Lookup",props={selectedItem:selectedItem||this.state.previousSelectedItem,initialSelectedItem:initialSelectedItem,ariaLabel:"Choose an item",disabled:!1,helperText:""+(this.props.widgetProps&&this.props.widgetProps.HelperText?this.props.widgetProps.HelperText:""),invalid:invalid,invalidText:""+(this.props.widgetProps&&this.props.widgetProps.InvalidText?this.props.widgetProps.InvalidText:"Valid value is required"),light:!1,onInputChange:this.onChangeDebounce,placeholder:""+(this.props.widgetProps&&this.props.widgetProps.Placeholder?this.props.widgetProps.Placeholder:"Filter..."),titleText:titleText,type:"default"},onChange=function(_ref2){var selectedItem=_ref2.selectedItem;if(_this4.props.onChange)_this4.props.onChange(selectedItem),_this4.setState({selectedItem:selectedItem,lastSearchKey:null});else if(_this4.props.widgetProps){var updatedProps=cloneDeep(_this4.props.widgetProps);updatedProps.value=selectedItem.id,_this4.props.updateStore({updates:{widgetProps:updatedProps}}),_this4.setState({selectedItem:selectedItem,lastSearchKey:null})}else if(_this4.props.varname){var propName=(_this4.props.varname?_this4.props.varname:_this4.props.uid)+"_refvalue",referencefields=cloneDeep(_this4.props.referencefields);referencefields[propName]=selectedItem.id,_this4.props.updateStore({updates:{referencefields:referencefields}})}};return React.createElement("div",{style:{display:"flex"}},React.createElement("style",null,'@import url("component/studio/SrsReference/Style.css");'),React.createElement(ComboBox,_extends({},props,{onClick:function(e){_this4.getRecords("").then(function(recordItems){return _this4.setState({recordItems:recordItems,selectedItems:null,lastSearchKey:""})})},items:this.state.recordItems,itemToString:function(item){return item==_this4.state.lastSearchKey?_this4.state.lastSearchKey:item?item.text:""},onChange:onChange})),React.createElement(Close,{style:{width:"2rem",height:"2rem",marginTop:"2rem",cursor:"pointer"},onClick:function(e){return onChange({selectedItem:{id:"",text:""}})}}))}}]),_SrsReference_}(React.Component),_export("SrsReference",SrsReference=function(props){return _SrsReference_}),_export("SrsReference",SrsReference)}}}),System.register("component/studio/SrsFilter/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-querybuilder","nanoid","carbon-components-react","component/studio/SrsSelect/Definition.js","component/studio/SrsButton/Definition.js","component/studio/SrsCheckbox/Definition.js","component/studio/SrsDate/Definition.js","component/studio/SrsReference/Definition.js","lodash.clonedeep","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/split-screen/32","@carbon/icons-react/lib/trash-can/32"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,QueryBuilder,nanoid,Button,TextInput,Toggle,SrsSelect,SrsCheckbox,SrsDate,SrsReference,cloneDeep,Close20,_SrsFilter_,SrsFilter;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactQuerybuilder){QueryBuilder=_reactQuerybuilder.default},function(_nanoid){nanoid=_nanoid.default},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,Button=_carbonComponentsReact.Button,TextInput=_carbonComponentsReact.TextInput,Toggle=_carbonComponentsReact.Toggle},function(_componentStudioSrsSelectDefinitionJs){SrsSelect=_componentStudioSrsSelectDefinitionJs.SrsSelect},function(_componentStudioSrsButtonDefinitionJs){_componentStudioSrsButtonDefinitionJs.SrsButton},function(_componentStudioSrsCheckboxDefinitionJs){SrsCheckbox=_componentStudioSrsCheckboxDefinitionJs.SrsCheckbox},function(_componentStudioSrsDateDefinitionJs){SrsDate=_componentStudioSrsDateDefinitionJs.SrsDate},function(_componentStudioSrsReferenceDefinitionJs){SrsReference=_componentStudioSrsReferenceDefinitionJs.SrsReference},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonIconsReactLibAddAlt){_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSplitScreen){_carbonIconsReactLibSplitScreen.default},function(_carbonIconsReactLibTrashCan){Close20=_carbonIconsReactLibTrashCan.default}],execute:function(){_SrsFilter_=function(_React$Component){function _SrsFilter_(props){_classCallCheck(this,_SrsFilter_);var _this=_possibleConstructorReturn(this,(_SrsFilter_.__proto__||Object.getPrototypeOf(_SrsFilter_)).call(this,props));_this.tableName=_this.props.tablename?_this.props.tablename:_this.props.widgetProps&&_this.props.widgetProps.TableName?_this.props.widgetProps.TableName:"";var targetModelFields=[];if(_this.props.fields&&_this.props.fields.length>0){var tempTargetModelFields=_this.props.fields.filter(function(item){return item.parent==_this.tableName&&"id"!=item.text&&"field"==item.type}),tempTargetModelRelations=_this.props.fields.filter(function(item){return item.parent==_this.tableName&&("one2one"==item.type||"one2many"==item.type)});tempTargetModelFields.map(function(item){var iText=item.text,rName=iText.charAt(0).toLowerCase()+iText.substr(1,iText.length-1),rField=tempTargetModelRelations.filter(function(tmrItem){return tmrItem.text==rName})[0];rField?targetModelFields.push({name:item.text,label:item.text,datatype:"Reference",tableName:rField.to}):targetModelFields.push({name:item.text,label:item.text,datatype:item.datatype})})}return _this.state={fields:targetModelFields,query:_this.props&&_this.props.current_filter&&Object.keys(_this.props.current_filter).length>0?_this.transformFilter(_this.props.current_filter.where):{id:"g-"+nanoid(),combinator:"and",not:!1,rules:[]},format:"json",showCombinatorsBetweenRules:!1,showNotToggle:!1,resetOnFieldChange:!0},_this.props.schema&&0!=Object.keys(_this.props.schema).length?_this.setState({fields:targetModelFields}):$script.runAtServer("mmf.getSchemaData").then(function(schemaData){_this.props.updateStore({updates:{schema:schemaData}});var fields=[];if(schemaData&&schemaData.fields){var _tempTargetModelFields=schemaData.fields.filter(function(item){return item.parent==_this.tableName&&"id"!=item.text&&"field"==item.type}),_tempTargetModelRelations=schemaData.fields.filter(function(item){return item.parent==_this.tableName&&("one2one"==item.type||"one2many"==item.type)});_tempTargetModelFields.map(function(item){var iText=item.text,rName=iText.charAt(0).toLowerCase()+iText.substr(1,iText.length-1),rField=_tempTargetModelRelations.filter(function(tmrItem){return tmrItem.text==rName})[0];rField?fields.push({name:item.text,label:item.text,datatype:"Reference",tableName:rField.to}):fields.push({name:item.text,label:item.text,datatype:item.datatype})})}_this.setState({fields:fields})}),_this.transformFilter=_this.transformFilter.bind(_this),_this.addRuleAction=function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement("div",{className:"addRuleBtn"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("button",{onClick:this.props.handleOnClick},"+ Rule"))}}]),_class}(React.Component),_this.addGroupAction=function(_React$Component3){function _class2(){return _classCallCheck(this,_class2),_possibleConstructorReturn(this,(_class2.__proto__||Object.getPrototypeOf(_class2)).apply(this,arguments))}return _inherits(_class2,_React$Component3),_createClass(_class2,[{key:"render",value:function(){return React.createElement("div",{className:"addRuleBtn"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("button",{onClick:this.props.handleOnClick},"+ Group"))}}]),_class2}(React.Component),_this.closeIcon=function(_React$Component4){function _class3(){return _classCallCheck(this,_class3),_possibleConstructorReturn(this,(_class3.__proto__||Object.getPrototypeOf(_class3)).apply(this,arguments))}return _inherits(_class3,_React$Component4),_createClass(_class3,[{key:"render",value:function(){return React.createElement("div",{className:"closeBtn"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement(Close20,{style:{marginTop:3,width:23,height:23,"&:hover":{cursor:"pointer"}},onClick:this.props.handleOnClick}))}}]),_class3}(React.Component),_this.fieldSelector=function(_React$Component5){function _class4(props){return _classCallCheck(this,_class4),_possibleConstructorReturn(this,(_class4.__proto__||Object.getPrototypeOf(_class4)).call(this,props))}return _inherits(_class4,_React$Component5),_createClass(_class4,[{key:"render",value:function(){var _props=this.props,className=_props.className,options=_props.options,title=_props.title,value=_props.value,Wrapper=SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0});return React.createElement(Wrapper,{className:className,value:value,title:title,onChange:this.props.handleOnChange,options:options})}}]),_class4}(React.Component),_this.operatorSelector=function(_React$Component6){function _class5(props){return _classCallCheck(this,_class5),_possibleConstructorReturn(this,(_class5.__proto__||Object.getPrototypeOf(_class5)).call(this,props))}return _inherits(_class5,_React$Component6),_createClass(_class5,[{key:"render",value:function(){var _props2=this.props,className=_props2.className,options=_props2.options,title=_props2.title,value=_props2.value,Wrapper=(_props2.level,_props2.fieldData,_props2.field,SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}));return React.createElement(Wrapper,{className:className,value:value,title:title,onChange:this.props.handleOnChange,options:options})}}]),_class5}(React.Component),_this.valueEditor=function(_React$Component7){function _class6(props){return _classCallCheck(this,_class6),_possibleConstructorReturn(this,(_class6.__proto__||Object.getPrototypeOf(_class6)).call(this,props))}return _inherits(_class6,_React$Component7),_createClass(_class6,[{key:"render",value:function(){var _this8=this,_props3=this.props,fieldData=(_props3.field,_props3.fieldData),title=_props3.title,operator=_props3.operator,value=_props3.value,type=_props3.type,values=(_props3.inputType,_props3.values),className=_props3.className,Wrapper=null;if("null"===operator||"notNull"===operator||"isEmpty"===operator||"isNotEmpty"===operator)return null;switch("isOneOf"==operator&&(type="select"),fieldData&&"DateTime"==fieldData.datatype&&(type="date"),fieldData&&"Reference"==fieldData.datatype&&(type="reference"),type){case"select":return Wrapper=SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}),React.createElement(Wrapper,{className:className,title:title,onChange:this.props.handleOnChange,value:value},"options=",values);case"checkbox":return Wrapper=Toggle,React.createElement("div",{style:{display:"inline-flex",marginLeft:5}},React.createElement(Wrapper,{labelA:"",labelB:"",className:className,title:title,defaultToggled:!!value,onToggle:function(val){return _this8.props.handleOnChange(val)},checked:!!value}));case"radio":return React.createElement("span",{className:className,title:title},values.map(function(v){return React.createElement("label",{key:v.name},React.createElement("input",{type:"radio",value:v.name,checked:value===v.name,onChange:function(e){return handleOnChange(e.target.value)}}),v.label)}));case"date":return Wrapper=SrsDate({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}),React.createElement("div",{style:{display:"inline-flex",marginLeft:2}},React.createElement(Wrapper,{className:className,title:title,onChange:this.props.handleOnChange,value:value},"options=",values));case"reference":var ComponentReference=SrsReference({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0}),renderType=React.createElement(ComponentReference,{tablename:fieldData.tableName,displayfield:"Name",secondarydisplayfield:"",filter:JSON.stringify({where:{Name:{like:"Srs%"}}}),searchfields:"Name",title:"Render Type",defaultValue:"",onChange:function(selectedItem){}});return React.createElement("div",{className:"srs-ref-filter",style:{display:"inline-flex",marginLeft:2}},renderType);default:return React.createElement("div",{style:{display:"inline-flex",marginLeft:2}},React.createElement(TextInput,{hideLabel:!0,defaultValue:value,className:className,placeholder:"Enter Value...",onChange:function(e){return _this8.props.handleOnChange(e.target.value)}}))}}}]),_class6}(React.Component),_this.filters={String:[{name:"startsWith",label:"starts with"},{name:"endsWith",label:"ends with"},{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"=",label:"is"},{name:"isNot",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"isAnything",label:"is anything"},{name:"isOneOf",label:"is one of"},{name:"isEmptyString",label:"is empty string"},{name:"<=",label:"less than or is"},{name:">=",label:"greater than or is"},{name:"<>",label:"between"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"}],boolean:[{name:"=",label:"is"},{name:"!=",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"}],integer:[{name:"=",label:"is"},{name:"isNot",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"<",label:"less than"},{name:">",label:"greater than"},{name:"<=",label:"less than or is"},{name:">=",label:"greater than or is"},{name:"<>",label:"between"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDifferent",label:"is different"},{name:"graterThanField",label:"greater than field"},{name:"lessThanField",label:"less than field"},{name:"greaterThanorisField",label:"greater than or is field"},{name:"lessThanorisField",label:"less than or is field"}],DateTime:[{name:"=",label:"on"},{name:"!=",label:"not on"},{name:"<",label:"before"},{name:"<=",label:"at or before"},{name:">",label:"after"},{name:">=",label:"at or after"},{name:"on",label:"on"},{name:"<>",label:"between"},{name:"trend",label:"trend"},{name:"relative",label:"relative"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"},{name:"isMoreThan",label:"is more than"},{name:"isLessThan",label:"is less than"}],Reference:[{name:"=",label:"is"},{name:"!=",label:"is not"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"},{name:"startsWith",label:"starts with"},{name:"startsWith",label:"ends with"},{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"},{name:"isEmptyString",label:"is empty string"}],choice:[{name:"=",label:"is"},{name:"!=",label:"is not"},{name:"isOneOf",label:"is one of"},{name:"isNotOneOf",label:"is not one of"},{name:"startsWith",label:"starts with"},{name:"startsWith",label:"ends with"},{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"isAnything",label:"is anything"},{name:"isSame",label:"is same"},{name:"isDiffernt",label:"is different"}],list:[{name:"contains",label:"contains"},{name:"doesNotContain",label:"does not contain"},{name:"isEmpty",label:"is empty"},{name:"isNotEmpty",label:"is not empty"}]},_this}return _inherits(_SrsFilter_,_React$Component),_createClass(_SrsFilter_,[{key:"transformFilter",value:function(filter){var _this9=this,result={};filter&&"object"==typeof filter&&(Array.isArray(filter)?filter.map(function(rule){result.rules=result.rules||[];var field=rule&&Object.keys(rule)&&1==Object.keys(rule).length&&Object.keys(rule)[0],operator="=",value=void 0;if(rule[field])if("and"==field||"or"==field){var tempResult={};tempResult.id="g-"+nanoid(),tempResult.combinator=field,tempResult.not=!1,tempResult.rules=_this9.transformFilter(rule[field]),result.rules.push(tempResult)}else"object"==typeof rule[field]?(operator=Object.keys(rule[field])&&1==Object.keys(rule[field]).length&&Object.keys(rule[field])[0],(value=Object.keys(rule[field])&&1==Object.keys(rule[field]).length&&rule[field][Object.keys(rule[field])[0]])&&(value=value.replace(/%/g,"")),result.rules.push({id:"r-"+nanoid(),field:field,operator:operator,value:value})):((value=rule[field])&&(value=value.replace(/%/g,"")),result.rules.push({id:"r-"+nanoid(),field:field,operator:operator,value:value}))}):Object.keys(filter).map(function(filterKey){"and"!=filterKey&&"or"!=filterKey||(result.id="g-"+nanoid(),result.combinator=filterKey,result.not=!1,result.rules=_this9.transformFilter(filter[filterKey]))}));return filter&&"object"==typeof filter&&Array.isArray(filter)?result.rules:result}},{key:"render",value:function(){var _this10=this,formatQuery=function(query){return{where:parseQuery(query)}},operatorMap={startsWith:"like",endsWith:"like",contains:"like",doesNotContain:"nlike","=":"eq","!=":"neq",">":"gt",">=":"gte","<":"lt","<=":"lte",between:"between",in:"inq","not in":"nin",isEmpty:"eq",isNotEmpty:"neq"},parseQuery=function parseQuery(query){var result={};return query.combinator&&(result[query.combinator]=[],query.rules&&query.rules.map(function(rule,indx){if(rule.combinator){var parsedQueryResult=parseQuery(rule);result[query.combinator].push(parsedQueryResult)}else switch(rule.operator){case"startsWith":var stWithRule={};stWithRule[rule.field]={},stWithRule[rule.field][operatorMap[rule.operator]]=rule.value+"%",result[query.combinator].push(stWithRule);break;case"contains":case"doesNotContain":var containRule={};containRule[rule.field]={},containRule[rule.field][operatorMap[rule.operator]]="%"+rule.value+"%",result[query.combinator].push(containRule);break;case"endsWith":var enWithRule={};enWithRule[rule.field]={},enWithRule[rule.field][operatorMap[rule.operator]]="%"+rule.value,result[query.combinator].push(enWithRule);break;case"between":var betWRule={};betWRule[rule.field]={},betWRule[rule.field][operatorMap[rule.operator]]=[0,rule.value],result[query.combinator].push(betWRule);break;case"in":var inRule={};inRule[rule.field]={},inRule[rule.field][operatorMap[rule.operator]]=[0,rule.value],result[query.combinator].push(inRule);break;case"=":case"!=":case">":case"<":case"<=":case">=":case"isEmpty":case"isNotEmpty":var arthRule={};arthRule[rule.field]={},arthRule[rule.field][operatorMap[rule.operator]]=rule.value,result[query.combinator].push(arthRule);break;case"like":case"nlike":var revLikeRule={};revLikeRule[rule.field]={},revLikeRule[rule.field][rule.operator]="%"+rule.value+"%",result[query.combinator].push(revLikeRule);break;case"eq":case"neq":case"gt":case"gte":case"lt":case"lte":case"between":case"inq":case"nin":case"eq":case"neq":var revRule={};revRule[rule.field]={},revRule[rule.field][rule.operator]=rule.value,result[query.combinator].push(revRule)}})),result};this.props.widgetProps&&this.props.widgetProps.updateStore({updates:{current_filter:formatQuery(this.query)}});var filterStyle=this.props.maxheight?{maxHeight:this.props.maxheight}:{};return React.createElement("div",null,React.createElement("div",{className:"flex-box-outer"},React.createElement("div",{className:"control-panel"},React.createElement(Button,{size:"small",style:{marginRight:5,backgroundColor:"darkgray",color:"black"},onClick:function(){return function(){if(!_this10.state.query||!_this10.state.query.rules||0!=_this10.state.query.rules.length){var result=formatQuery(_this10.state.query);if(_this10.props.resultkey){var activeFilters=cloneDeep(_this10.props.active_filters);activeFilters[_this10.props.resultkey]=result,_this10.props.updateStore&&_this10.props.updateStore({updates:{active_filters:activeFilters,current_filter:result,showFilter:!1}})}else _this10.props.updateStore&&_this10.props.updateStore({updates:{current_filter:result,showFilter:!1}})}}()}},"Apply"),React.createElement(Button,{size:"small",style:{marginRight:5,backgroundColor:"darkgray",color:"black"},onClick:function(){return function(){if(_this10.setState({query:{id:"g-"+nanoid(),combinator:"and",not:!1,rules:[]},fields:_this10.state.fields}),_this10.props.resultkey){var activeFilters=cloneDeep(_this10.props.active_filters);activeFilters[_this10.props.resultkey]={},_this10.props.updateStore&&_this10.props.updateStore({updates:{active_filters:activeFilters,current_filter:{},showFilter:!1}})}else _this10.props.updateStore&&_this10.props.updateStore({updates:{current_filter:{},showFilter:!1}})}()}},"Clear")),React.createElement("hr",null),React.createElement("div",{className:"flex-box",style:filterStyle},React.createElement("div",{className:"scroll"},React.createElement(QueryBuilder,{query:this.state.query,fields:this.state.fields,controlElements:{combinatorSelector:SrsSelect({containerStyles:{display:"inline-flex",marginLeft:2},hideLabel:!0,className:"showCombinator"}),addRuleAction:this.addRuleAction,addGroupAction:this.addGroupAction,removeGroupAction:this.closeIcon,notToggle:SrsCheckbox({containerStyles:{display:"inline-flex",marginLeft:2},title:"NOT",className:"notToggle"}),valueEditor:this.valueEditor,fieldSelector:this.fieldSelector,operatorSelector:this.operatorSelector},controlClassnames:{fields:"form-control"},onQueryChange:function(query){_this10.setState({query:query})},getOperators:function(field){var sField=_this10.state.fields.filter(function(fField){return fField.name==field})[0];return sField&&_this10.filters[sField.datatype]||null},getValueEditorType:function(field,operator){switch(field){case"gender":return"radio";case"instrument":return"select";case"isMusician":return"checkbox";default:return"text"}},getInputType:function(field,operator){switch(field){case"age":return"number";default:return"text"}},getValues:function(field,operator){switch(field){case"instrument":return[{name:"Guitar",label:"Guitar"},{name:"Piano",label:"Piano"},{name:"Vocals",label:"Vocals"},{name:"Drums",label:"Drums"}];case"gender":return[{name:"M",label:"Male"},{name:"F",label:"Female"},{name:"O",label:"Other"}];default:return[]}},showCombinatorsBetweenRules:this.state.showCombinatorsBetweenRules,showNotToggle:this.state.showNotToggle,resetOnFieldChange:this.state.resetOnFieldChange})))))}}]),_SrsFilter_}(React.Component),_export("SrsFilter",SrsFilter=function(props){return _SrsFilter_}),_export("SrsFilter",SrsFilter)}}}),System.register("component/studio/SrsForm.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsForm_,SrsForm,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SrsForm_=function(_React$Component){function _SrsForm_(){return _classCallCheck(this,_SrsForm_),_possibleConstructorReturn(this,(_SrsForm_.__proto__||Object.getPrototypeOf(_SrsForm_)).apply(this,arguments))}return _inherits(_SrsForm_,_React$Component),_createClass(_SrsForm_,[{key:"render",value:function(){this.props.widgetProps&&this.props.widgetProps.CreatePageId?this.props.widgetProps.CreatePageId:this.props.createpageid,this.props.widgetProps&&this.props.widgetProps.EditPageId?this.props.widgetProps.EditPageId:this.props.editpageid;var pageParams=this.props.params?JSON.parse(atob(this.props.params)):{};return React.createElement("div",{style:{height:"inherit"}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("page-designer-preview",{shadow:!0,style:{height:"inherit"},previewpageid:this.props.pageid,pageparams:JSON.stringify(pageParams),responsive:"true",widgetspacing:"false"}))}}]),_SrsForm_}(React.Component),_export("SrsForm",SrsForm=function(props){return _SrsForm_}),_export("SrsForm",SrsForm),_export("default",SrsForm),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsForm/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_SrsForm_,SrsForm;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_SrsForm_=function(_React$Component){function _SrsForm_(){return _classCallCheck(this,_SrsForm_),_possibleConstructorReturn(this,(_SrsForm_.__proto__||Object.getPrototypeOf(_SrsForm_)).apply(this,arguments))}return _inherits(_SrsForm_,_React$Component),_createClass(_SrsForm_,[{key:"render",value:function(){this.props.widgetProps&&this.props.widgetProps.CreatePageId?this.props.widgetProps.CreatePageId:this.props.createpageid,this.props.widgetProps&&this.props.widgetProps.EditPageId?this.props.widgetProps.EditPageId:this.props.editpageid;var pageParams=this.props.params?JSON.parse(atob(this.props.params)):{};return React.createElement("div",{style:{height:"inherit"}},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css");'),React.createElement("page-designer-preview",{shadow:!0,style:{height:"inherit"},previewpageid:this.props.pageid,pageparams:JSON.stringify(pageParams),responsive:"true",widgetspacing:"false"}))}}]),_SrsForm_}(React.Component),_export("SrsForm",SrsForm=function(props){return _SrsForm_}),_export("SrsForm",SrsForm)}}}),System.register("component/studio/SrsGeoMap.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-google-maps","react-geolocated"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,withScriptjs,withGoogleMap,GoogleMap,Marker,geolocated,sourceLocation,markerLocations,googleMapURL,_SrsGeoMap_,SrsGeoMap,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactGoogleMaps){withScriptjs=_reactGoogleMaps.withScriptjs,withGoogleMap=_reactGoogleMaps.withGoogleMap,GoogleMap=_reactGoogleMaps.GoogleMap,Marker=_reactGoogleMaps.Marker},function(_reactGeolocated){geolocated=_reactGeolocated.geolocated}],execute:function(){sourceLocation={lat:17.4903988,lng:78.3677562},markerLocations=[{lat:17.4433571,lng:78.3822111},{lat:17.4647175,lng:78.3542657}],googleMapURL="https://maps.googleapis.com/maps/api/js?key="+"AIzaSyAuO0Ty8grufH2Kih1IM75KtnADifWVy2I"+"&v=3.exp&libraries=geometry,drawing,places",_SrsGeoMap_=function(_React$Component){function _SrsGeoMap_(){return _classCallCheck(this,_SrsGeoMap_),_possibleConstructorReturn(this,(_SrsGeoMap_.__proto__||Object.getPrototypeOf(_SrsGeoMap_)).apply(this,arguments))}return _inherits(_SrsGeoMap_,_React$Component),_createClass(_SrsGeoMap_,[{key:"render",value:function(){if(this.props.isGeolocationAvailable&&this.props.isGeolocationEnabled&&this.props.coords){sourceLocation={lat:this.props.coords.latitude,lng:this.props.coords.longitude};var MapWithAMarker=withScriptjs(withGoogleMap(function(props){return React.createElement(GoogleMap,{defaultZoom:12,defaultCenter:sourceLocation},markerLocations.map(function(markerLocation){return React.createElement(Marker,{position:markerLocation})}))}));return React.createElement(MapWithAMarker,{googleMapURL:googleMapURL,loadingElement:React.createElement("div",{style:{height:"100%"}}),containerElement:React.createElement("div",{style:{height:"400px"}}),mapElement:React.createElement("div",{style:{height:"100%"}})})}return React.createElement("div",null,"Getting location data…")}}]),_SrsGeoMap_}(React.Component),_export("SrsGeoMap",SrsGeoMap=function(props){return geolocated({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3,isGeolocationAvailable:!0,isGeolocationEnabled:!0})(_SrsGeoMap_)}),_export("SrsGeoMap",SrsGeoMap),_export("default",SrsGeoMap),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsGeoMap/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-google-maps","react-geolocated"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,withScriptjs,withGoogleMap,GoogleMap,Marker,geolocated,sourceLocation,markerLocations,googleMapURL,_SrsGeoMap_,SrsGeoMap;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactGoogleMaps){withScriptjs=_reactGoogleMaps.withScriptjs,withGoogleMap=_reactGoogleMaps.withGoogleMap,GoogleMap=_reactGoogleMaps.GoogleMap,Marker=_reactGoogleMaps.Marker},function(_reactGeolocated){geolocated=_reactGeolocated.geolocated}],execute:function(){sourceLocation={lat:17.4903988,lng:78.3677562},markerLocations=[{lat:17.4433571,lng:78.3822111},{lat:17.4647175,lng:78.3542657}],googleMapURL="https://maps.googleapis.com/maps/api/js?key="+"AIzaSyAuO0Ty8grufH2Kih1IM75KtnADifWVy2I"+"&v=3.exp&libraries=geometry,drawing,places",_SrsGeoMap_=function(_React$Component){function _SrsGeoMap_(){return _classCallCheck(this,_SrsGeoMap_),_possibleConstructorReturn(this,(_SrsGeoMap_.__proto__||Object.getPrototypeOf(_SrsGeoMap_)).apply(this,arguments))}return _inherits(_SrsGeoMap_,_React$Component),_createClass(_SrsGeoMap_,[{key:"render",value:function(){if(this.props.isGeolocationAvailable&&this.props.isGeolocationEnabled&&this.props.coords){sourceLocation={lat:this.props.coords.latitude,lng:this.props.coords.longitude};var MapWithAMarker=withScriptjs(withGoogleMap(function(props){return React.createElement(GoogleMap,{defaultZoom:12,defaultCenter:sourceLocation},markerLocations.map(function(markerLocation){return React.createElement(Marker,{position:markerLocation})}))}));return React.createElement(MapWithAMarker,{googleMapURL:googleMapURL,loadingElement:React.createElement("div",{style:{height:"100%"}}),containerElement:React.createElement("div",{style:{height:"400px"}}),mapElement:React.createElement("div",{style:{height:"100%"}})})}return React.createElement("div",null,"Getting location data…")}}]),_SrsGeoMap_}(React.Component),_export("SrsGeoMap",SrsGeoMap=function(props){return geolocated({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3,isGeolocationAvailable:!0,isGeolocationEnabled:!0})(_SrsGeoMap_)}),_export("SrsGeoMap",SrsGeoMap)}}}),System.register("component/studio/SrsImage.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","lodash.clonedeep","lodash","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,_,React,_SrsImage_,SrsImage,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_lodashClonedeep){_lodashClonedeep.default},function(_lodash){_=_lodash.default},function(_react){React=_react.default}],execute:function(){_SrsImage_=function(_React$Component){function _SrsImage_(props){_classCallCheck(this,_SrsImage_);var _this=_possibleConstructorReturn(this,(_SrsImage_.__proto__||Object.getPrototypeOf(_SrsImage_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_SrsImage_,_React$Component),_createClass(_SrsImage_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps,this.props)||this.setState({reload:!this.state.reload})}},{key:"render",value:function(){var defaultURL=this.props.widgetProps&&this.props.widgetProps.DefaultURL?this.props.widgetProps.DefaultURL:"/resources/NoResults.jpg",sourceURL=this.props.widgetProps&&this.props.widgetProps.SourceURL?this.props.widgetProps.SourceURL:defaultURL,imageHeight=this.props.widgetProps&&this.props.widgetProps.ImageHeight?parseInt(this.props.widgetProps.ImageHeight):100,imageWidgth=this.props.widgetProps&&this.props.widgetProps.ImageWidth?parseInt(this.props.widgetProps.ImageWidth):100;return React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,'@import url("component/studio/SrsImage/Style.css");'),React.createElement("img",{src:sourceURL,alt:"Image",style:{height:imageHeight,width:imageWidgth}}))}}]),_SrsImage_}(React.Component),_export("SrsImage",SrsImage=function(props){return _SrsImage_}),_export("SrsImage",SrsImage),_export("default",SrsImage),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsImage/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","lodash.clonedeep","lodash","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,_,React,_SrsImage_,SrsImage;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_lodashClonedeep){_lodashClonedeep.default},function(_lodash){_=_lodash.default},function(_react){React=_react.default}],execute:function(){_SrsImage_=function(_React$Component){function _SrsImage_(props){_classCallCheck(this,_SrsImage_);var _this=_possibleConstructorReturn(this,(_SrsImage_.__proto__||Object.getPrototypeOf(_SrsImage_)).call(this,props));return _this.state={reload:!1},_this}return _inherits(_SrsImage_,_React$Component),_createClass(_SrsImage_,[{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps,this.props)||this.setState({reload:!this.state.reload})}},{key:"render",value:function(){var defaultURL=this.props.widgetProps&&this.props.widgetProps.DefaultURL?this.props.widgetProps.DefaultURL:"/resources/NoResults.jpg",sourceURL=this.props.widgetProps&&this.props.widgetProps.SourceURL?this.props.widgetProps.SourceURL:defaultURL,imageHeight=this.props.widgetProps&&this.props.widgetProps.ImageHeight?parseInt(this.props.widgetProps.ImageHeight):100,imageWidgth=this.props.widgetProps&&this.props.widgetProps.ImageWidth?parseInt(this.props.widgetProps.ImageWidth):100;return React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,'@import url("component/studio/SrsImage/Style.css");'),React.createElement("img",{src:sourceURL,alt:"Image",style:{height:imageHeight,width:imageWidgth}}))}}]),_SrsImage_}(React.Component),_export("SrsImage",SrsImage=function(props){return _SrsImage_}),_export("SrsImage",SrsImage)}}}),System.register("component/studio/SrsKeyValuePair.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/toConsumableArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","@carbon/icons-react/lib/settings/16","lodash.clonedeep"],function(_export,_context){"use strict";var _toConsumableArray,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,Select,SelectItem,AddAlt20,SubAlt20,cloneDeep,_SrsKeyValuePair_,SrsKeyValuePair,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs){_toConsumableArray=_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.Checkbox,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonIconsReactLibSettings){_carbonIconsReactLibSettings.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsKeyValuePair_=function(_React$Component){function _SrsKeyValuePair_(props){_classCallCheck(this,_SrsKeyValuePair_);var _this=_possibleConstructorReturn(this,(_SrsKeyValuePair_.__proto__||Object.getPrototypeOf(_SrsKeyValuePair_)).call(this,props));return _this.keyValueList=_this.props.items?JSON.parse(_this.props.items):_this.props.widgetProps&&_this.props.widgetProps.items?_this.props.widgetProps.items:[{name:"",value:""}],_this.keyValueList=_this.keyValueList&&0!=_this.keyValueList.length?_this.keyValueList:[{name:"",value:""}],_this.keyify=_this.keyify.bind(_this),_this.state={keyValueLists:_this.keyValueList,dirty:!1},_this.removeSpecialCharacters=_this.removeSpecialCharacters.bind(_this),_this}return _inherits(_SrsKeyValuePair_,_React$Component),_createClass(_SrsKeyValuePair_,[{key:"removeSpecialCharacters",value:function(val){return val.replace(/[^a-zA-Z0-9]/g,"_")}},{key:"componentDidUpdate",value:function(prevProps,prevState){if(!_.isEqual(prevProps.items,this.props.items)){var keyValueList=this.props.items?JSON.parse(this.props.items):this.props.widgetProps&&this.props.widgetProps.items?this.props.widgetProps.items:[{name:"",value:""}];this.props.updateStore&&this.props.updateStore({updates:{value:keyValueList}}),keyValueList=keyValueList&&0!=keyValueList.length?keyValueList:[{name:"",value:""}],this.setState({keyValueLists:keyValueList})}}},{key:"keyify",value:function(obj){var _this2=this,prefix=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(obj).reduce(function(res,el){return Array.isArray(obj[el])?res:"object"==typeof obj[el]&&null!==obj[el]?obj[el]?[].concat(_toConsumableArray(res),_toConsumableArray(_this2.keyify(obj[el],prefix+el+"@@"))):res:[].concat(_toConsumableArray(res),[prefix+el])},[])}},{key:"render",value:function(){var _this3=this,keyValueElementList=[],keyList=null,keySelectItems=null,valueList=null,valueSelectItems=null,keyNestedSelectItems=null,valueNestedSelectItems=null,keyLabels=null,valueLabels=null;if(this.props.choices){var choices=JSON.parse(this.props.choices);if(valueList=choices.valueList,keyList=choices.keyList)if(Array.isArray(keyList))(keySelectItems=[]).push(React.createElement(SelectItem,{value:"",text:"Select a key"})),(keyList=keyList.sort(function(a,b){return a<b?-1:a>b?1:0})).map(function(keyItem){return keySelectItems.push(React.createElement(SelectItem,{value:keyItem.name,text:keyItem.value}))});else{keyNestedSelectItems={},keyLabels=[];for(var keyNestedLabels=this.props.keylabels&&JSON.parse(this.props.keylabels);keyNestedLabels&&Object.keys(keyNestedLabels).length>0;){var labelKey=Object.keys(keyNestedLabels)[0];keyLabels.push(labelKey),keyNestedLabels=keyNestedLabels[labelKey]}var listOfKeys=this.keyify(keyList),uniqueSelectItems={};keyLabels&&keyLabels.map(function(labelName,indx){keyNestedSelectItems[labelName]={},keyNestedSelectItems[labelName].no_parent=[],keyNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:"",text:"Select a value"})),listOfKeys&&listOfKeys.map(function(keyName){var targetKeyVal=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx]:keyName;if(targetKeyVal)if(0==indx)uniqueSelectItems[labelName]=uniqueSelectItems[labelName]||{},uniqueSelectItems[labelName].no_parent=uniqueSelectItems[labelName].no_parent||[],-1==uniqueSelectItems[labelName].no_parent.indexOf(targetKeyVal)&&(keyNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),uniqueSelectItems[labelName].no_parent.push(targetKeyVal));else{var parentName=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx-1]:"";parentName&&(uniqueSelectItems[labelName]=uniqueSelectItems[labelName]||{},uniqueSelectItems[labelName][parentName]=uniqueSelectItems[labelName][parentName]||[],-1==uniqueSelectItems[labelName][parentName].indexOf(targetKeyVal)&&(keyNestedSelectItems[labelName][parentName]=keyNestedSelectItems[labelName][parentName]||[React.createElement(SelectItem,{value:"",text:"Select a value"})],keyNestedSelectItems[labelName][parentName].push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),uniqueSelectItems[labelName][parentName].push(targetKeyVal)))}})})}if(valueList)if(Array.isArray(valueList))(valueSelectItems=[]).push(React.createElement(SelectItem,{value:"",text:"Select a value"})),(valueList=valueList.sort(function(a,b){return a<b?-1:a>b?1:0})).map(function(valueItem){return valueSelectItems.push(React.createElement(SelectItem,{value:valueItem.name,text:valueItem.value}))});else{valueNestedSelectItems={},valueLabels=[];for(var valueNestedLabels=this.props.valuelabels&&JSON.parse(this.props.valuelabels);valueNestedLabels&&Object.keys(valueNestedLabels).length>0;){var _labelKey=Object.keys(valueNestedLabels)[0];valueLabels.push(_labelKey),valueNestedLabels=valueNestedLabels[_labelKey]}var _listOfKeys=this.keyify(valueList),_uniqueSelectItems={};valueLabels&&valueLabels.map(function(labelName,indx){valueNestedSelectItems[labelName]={},valueNestedSelectItems[labelName].no_parent=[],valueNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:"",text:"Select a value"})),_listOfKeys&&_listOfKeys.map(function(keyName){var targetKeyVal=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx]:keyName;if(targetKeyVal)if(0==indx)_uniqueSelectItems[labelName]=_uniqueSelectItems[labelName]||{},_uniqueSelectItems[labelName].no_parent=_uniqueSelectItems[labelName].no_parent||[],-1==_uniqueSelectItems[labelName].no_parent.indexOf(targetKeyVal)&&(valueNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),_uniqueSelectItems[labelName].no_parent.push(targetKeyVal));else{var parentName=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx-1]:"";parentName&&(_uniqueSelectItems[labelName]=_uniqueSelectItems[labelName]||{},_uniqueSelectItems[labelName][parentName]=_uniqueSelectItems[labelName][parentName]||[],-1==_uniqueSelectItems[labelName][parentName].indexOf(targetKeyVal)&&(valueNestedSelectItems[labelName][parentName]=valueNestedSelectItems[labelName][parentName]||[React.createElement(SelectItem,{value:"",text:"Select a value"})],valueNestedSelectItems[labelName][parentName].push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),_uniqueSelectItems[labelName][parentName].push(targetKeyVal)))}})})}}return this.state.keyValueLists.forEach(function(pair,i){var keyValueelement=React.createElement("div",{style:{display:"inline-flex"}},keyList&&0!=keyList.length?Array.isArray(keyList)?React.createElement(Select,{hideLabel:!0,onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.name=e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists}),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})},defaultValue:pair.name,value:pair.name},keySelectItems):keyLabels&&keyLabels.map(function(labelName,labelIndx){var pairValues=pair.value&&"string"==typeof pair.value?JSON.parse(pair.value):pair.value;return pairValues=pairValues||[],0==labelIndx||pairValues&&pairValues.length>=labelIndx&&keyNestedSelectItems[labelName]&&keyNestedSelectItems[labelName][pair.value[labelIndx-1]]?React.createElement(Select,{hideLabel:!0,style:{marginLeft:"1rem",width:20},onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=keyValueItem.value||[],keyValueItem.value=keyValueItem.value.reverse().slice(keyValueItem.value.length-labelIndx).reverse(),keyValueItem.value.push(e.target.value))}),_this3.setState({keyValueLists:newKeyValueLists}),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})},defaultValue:pairValues&&pairValues.length>labelIndx?pairValues[labelIndx]:"",value:pairValues&&pairValues.length>labelIndx?pairValues[labelIndx]:""},keyNestedSelectItems[labelName][0==labelIndx?"no_parent":pairValues[labelIndx-1]]):null}):React.createElement(TextInput,{placeholder:_this3.props.placeholder_name||"Enter Name...",onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.name=_this3.props.trim_name?_this3.removeSpecialCharacters(e.target.value):e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists,dirty:!0})},onBlur:function(){if(_this3.state.dirty){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}}),_this3.setState({dirty:!1})}},defaultValue:pair.name,value:pair.name}),valueList&&0!=valueList.length?Array.isArray(valueList)?React.createElement(Select,{hideLabel:!0,style:{marginLeft:"1rem",width:20},onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists}),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})},defaultValue:pair.value,value:pair.value},valueSelectItems):valueLabels&&valueLabels.map(function(labelName,labelIndx){var pairValues=pair.value&&"string"==typeof pair.value?JSON.parse(pair.value):pair.value;return pairValues=pairValues||[],0==labelIndx||pairValues&&pairValues.length>=labelIndx&&valueNestedSelectItems[labelName]&&valueNestedSelectItems[labelName][pairValues[labelIndx-1]]?React.createElement(Select,{hideLabel:!0,style:{marginLeft:"1rem",width:20},onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists),readyToSave=!0;newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=keyValueItem.value&&"string"==typeof keyValueItem.value?JSON.parse(keyValueItem.value):keyValueItem.value,keyValueItem.value=keyValueItem.value||[],keyValueItem.value=keyValueItem.value.reverse().slice(keyValueItem.value.length-labelIndx).reverse(),keyValueItem.value.push(e.target.value)),readyToSave=readyToSave?!!keyValueItem.name&&keyValueItem.value.length==valueLabels.length:readyToSave}),_this3.setState({keyValueLists:newKeyValueLists}),readyToSave&&_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})},defaultValue:pairValues&&pairValues.length>labelIndx?pair.value[labelIndx]:"",value:pairValues&&pairValues.length>labelIndx?pairValues[labelIndx]:""},valueNestedSelectItems[labelName][0==labelIndx?"no_parent":pairValues[labelIndx-1]]):null}):React.createElement(TextInput,{style:{marginLeft:"1rem"},placeholder:_this3.props.placeholder_value||"Enter Value...",onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=_this3.props.trim_value?_this3.removeSpecialCharacters(e.target.value):e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists})},onBlur:function(){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists),readyToSave=!0;newKeyValueLists.map(function(keyValueItem,indx){readyToSave=readyToSave?!!keyValueItem.name:readyToSave}),readyToSave&&_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})},defaultValue:pair.value,value:pair.value}),_this3.state.keyValueLists.length>0?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);(newKeyValueLists=(newKeyValueLists=newKeyValueLists||[{name:"",value:""}]).filter(function(item,indx){return indx!=i}))&&0!=newKeyValueLists.length||(newKeyValueLists=[{name:"",value:""}]),_this3.setState({keyValueLists:newKeyValueLists}),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})}}):null,React.createElement(AddAlt20,{onClick:function(){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);(newKeyValueLists=newKeyValueLists||[{name:"",value:""}]).length;newKeyValueLists.push({name:"",value:""}),_this3.setState({keyValueLists:newKeyValueLists})}}));keyValueElementList.push(keyValueelement)}),React.createElement("div",{style:{display:"inline-grid",float:"left"}},React.createElement("label",{className:"bx--label",style:{display:"flex"}},this.props.label||"KeyValuePair"),keyValueElementList)}}]),_SrsKeyValuePair_}(React.Component),_export("SrsKeyValuePair",SrsKeyValuePair=function(props){return _SrsKeyValuePair_}),_export("SrsKeyValuePair",SrsKeyValuePair),_export("default",SrsKeyValuePair),_export("states",states=[{KeyName:"value",AccessPath:"keyvaluepair.${varname}",DefaultValue:'{"keyvaluepair": {"${varname}": []}}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsKeyValuePair/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/toConsumableArray.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/add--alt/32","@carbon/icons-react/lib/subtract--alt/32","@carbon/icons-react/lib/settings/16","lodash.clonedeep"],function(_export,_context){"use strict";var _toConsumableArray,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,Select,SelectItem,AddAlt20,SubAlt20,cloneDeep,_SrsKeyValuePair_,SrsKeyValuePair;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs){_toConsumableArray=_npmSystemjsPluginBabel0025BabelHelpersToConsumableArrayJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.Checkbox,Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_carbonIconsReactLibAddAlt){AddAlt20=_carbonIconsReactLibAddAlt.default},function(_carbonIconsReactLibSubtractAlt){SubAlt20=_carbonIconsReactLibSubtractAlt.default},function(_carbonIconsReactLibSettings){_carbonIconsReactLibSettings.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsKeyValuePair_=function(_React$Component){function _SrsKeyValuePair_(props){_classCallCheck(this,_SrsKeyValuePair_);var _this=_possibleConstructorReturn(this,(_SrsKeyValuePair_.__proto__||Object.getPrototypeOf(_SrsKeyValuePair_)).call(this,props));return _this.keyValueList=_this.props.items?JSON.parse(_this.props.items):_this.props.widgetProps&&_this.props.widgetProps.items?_this.props.widgetProps.items:[{name:"",value:""}],_this.keyValueList=_this.keyValueList&&0!=_this.keyValueList.length?_this.keyValueList:[{name:"",value:""}],_this.keyify=_this.keyify.bind(_this),_this.state={keyValueLists:_this.keyValueList,dirty:!1},_this.removeSpecialCharacters=_this.removeSpecialCharacters.bind(_this),_this}return _inherits(_SrsKeyValuePair_,_React$Component),_createClass(_SrsKeyValuePair_,[{key:"removeSpecialCharacters",value:function(val){return val.replace(/[^a-zA-Z0-9]/g,"_")}},{key:"componentDidUpdate",value:function(prevProps,prevState){if(!_.isEqual(prevProps.items,this.props.items)){var keyValueList=this.props.items?JSON.parse(this.props.items):this.props.widgetProps&&this.props.widgetProps.items?this.props.widgetProps.items:[{name:"",value:""}];this.props.updateStore&&this.props.updateStore({updates:{value:keyValueList}}),keyValueList=keyValueList&&0!=keyValueList.length?keyValueList:[{name:"",value:""}],this.setState({keyValueLists:keyValueList})}}},{key:"keyify",value:function(obj){var _this2=this,prefix=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(obj).reduce(function(res,el){return Array.isArray(obj[el])?res:"object"==typeof obj[el]&&null!==obj[el]?obj[el]?[].concat(_toConsumableArray(res),_toConsumableArray(_this2.keyify(obj[el],prefix+el+"@@"))):res:[].concat(_toConsumableArray(res),[prefix+el])},[])}},{key:"render",value:function(){var _this3=this,keyValueElementList=[],keyList=null,keySelectItems=null,valueList=null,valueSelectItems=null,keyNestedSelectItems=null,valueNestedSelectItems=null,keyLabels=null,valueLabels=null;if(this.props.choices){var choices=JSON.parse(this.props.choices);if(valueList=choices.valueList,keyList=choices.keyList)if(Array.isArray(keyList))(keySelectItems=[]).push(React.createElement(SelectItem,{value:"",text:"Select a key"})),(keyList=keyList.sort(function(a,b){return a<b?-1:a>b?1:0})).map(function(keyItem){return keySelectItems.push(React.createElement(SelectItem,{value:keyItem.name,text:keyItem.value}))});else{keyNestedSelectItems={},keyLabels=[];for(var keyNestedLabels=this.props.keylabels&&JSON.parse(this.props.keylabels);keyNestedLabels&&Object.keys(keyNestedLabels).length>0;){var labelKey=Object.keys(keyNestedLabels)[0];keyLabels.push(labelKey),keyNestedLabels=keyNestedLabels[labelKey]}var listOfKeys=this.keyify(keyList),uniqueSelectItems={};keyLabels&&keyLabels.map(function(labelName,indx){keyNestedSelectItems[labelName]={},keyNestedSelectItems[labelName].no_parent=[],keyNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:"",text:"Select a value"})),listOfKeys&&listOfKeys.map(function(keyName){var targetKeyVal=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx]:keyName;if(targetKeyVal)if(0==indx)uniqueSelectItems[labelName]=uniqueSelectItems[labelName]||{},uniqueSelectItems[labelName].no_parent=uniqueSelectItems[labelName].no_parent||[],-1==uniqueSelectItems[labelName].no_parent.indexOf(targetKeyVal)&&(keyNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),uniqueSelectItems[labelName].no_parent.push(targetKeyVal));else{var parentName=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx-1]:"";parentName&&(uniqueSelectItems[labelName]=uniqueSelectItems[labelName]||{},uniqueSelectItems[labelName][parentName]=uniqueSelectItems[labelName][parentName]||[],-1==uniqueSelectItems[labelName][parentName].indexOf(targetKeyVal)&&(keyNestedSelectItems[labelName][parentName]=keyNestedSelectItems[labelName][parentName]||[React.createElement(SelectItem,{value:"",text:"Select a value"})],keyNestedSelectItems[labelName][parentName].push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),uniqueSelectItems[labelName][parentName].push(targetKeyVal)))}})})}if(valueList)if(Array.isArray(valueList))(valueSelectItems=[]).push(React.createElement(SelectItem,{value:"",text:"Select a value"})),(valueList=valueList.sort(function(a,b){return a<b?-1:a>b?1:0})).map(function(valueItem){return valueSelectItems.push(React.createElement(SelectItem,{value:valueItem.name,text:valueItem.value}))});else{valueNestedSelectItems={},valueLabels=[];for(var valueNestedLabels=this.props.valuelabels&&JSON.parse(this.props.valuelabels);valueNestedLabels&&Object.keys(valueNestedLabels).length>0;){var _labelKey=Object.keys(valueNestedLabels)[0];valueLabels.push(_labelKey),valueNestedLabels=valueNestedLabels[_labelKey]}var _listOfKeys=this.keyify(valueList),_uniqueSelectItems={};valueLabels&&valueLabels.map(function(labelName,indx){valueNestedSelectItems[labelName]={},valueNestedSelectItems[labelName].no_parent=[],valueNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:"",text:"Select a value"})),_listOfKeys&&_listOfKeys.map(function(keyName){var targetKeyVal=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx]:keyName;if(targetKeyVal)if(0==indx)_uniqueSelectItems[labelName]=_uniqueSelectItems[labelName]||{},_uniqueSelectItems[labelName].no_parent=_uniqueSelectItems[labelName].no_parent||[],-1==_uniqueSelectItems[labelName].no_parent.indexOf(targetKeyVal)&&(valueNestedSelectItems[labelName].no_parent.push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),_uniqueSelectItems[labelName].no_parent.push(targetKeyVal));else{var parentName=keyName&&keyName.split("@@").length>=indx+1?keyName.split("@@")[indx-1]:"";parentName&&(_uniqueSelectItems[labelName]=_uniqueSelectItems[labelName]||{},_uniqueSelectItems[labelName][parentName]=_uniqueSelectItems[labelName][parentName]||[],-1==_uniqueSelectItems[labelName][parentName].indexOf(targetKeyVal)&&(valueNestedSelectItems[labelName][parentName]=valueNestedSelectItems[labelName][parentName]||[React.createElement(SelectItem,{value:"",text:"Select a value"})],valueNestedSelectItems[labelName][parentName].push(React.createElement(SelectItem,{value:targetKeyVal,text:targetKeyVal})),_uniqueSelectItems[labelName][parentName].push(targetKeyVal)))}})})}}return this.state.keyValueLists.forEach(function(pair,i){var keyValueelement=React.createElement("div",{style:{display:"inline-flex"}},keyList&&0!=keyList.length?Array.isArray(keyList)?React.createElement(Select,{hideLabel:!0,onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.name=e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists}),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})},defaultValue:pair.name,value:pair.name},keySelectItems):keyLabels&&keyLabels.map(function(labelName,labelIndx){var pairValues=pair.value&&"string"==typeof pair.value?JSON.parse(pair.value):pair.value;return pairValues=pairValues||[],0==labelIndx||pairValues&&pairValues.length>=labelIndx&&keyNestedSelectItems[labelName]&&keyNestedSelectItems[labelName][pair.value[labelIndx-1]]?React.createElement(Select,{hideLabel:!0,style:{marginLeft:"1rem",width:20},onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=keyValueItem.value||[],keyValueItem.value=keyValueItem.value.reverse().slice(keyValueItem.value.length-labelIndx).reverse(),keyValueItem.value.push(e.target.value))}),_this3.setState({keyValueLists:newKeyValueLists}),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})},defaultValue:pairValues&&pairValues.length>labelIndx?pairValues[labelIndx]:"",value:pairValues&&pairValues.length>labelIndx?pairValues[labelIndx]:""},keyNestedSelectItems[labelName][0==labelIndx?"no_parent":pairValues[labelIndx-1]]):null}):React.createElement(TextInput,{placeholder:_this3.props.placeholder_name||"Enter Name...",onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.name=_this3.props.trim_name?_this3.removeSpecialCharacters(e.target.value):e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists,dirty:!0})},onBlur:function(){if(_this3.state.dirty){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}}),_this3.setState({dirty:!1})}},defaultValue:pair.name,value:pair.name}),valueList&&0!=valueList.length?Array.isArray(valueList)?React.createElement(Select,{hideLabel:!0,style:{marginLeft:"1rem",width:20},onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists}),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})},defaultValue:pair.value,value:pair.value},valueSelectItems):valueLabels&&valueLabels.map(function(labelName,labelIndx){var pairValues=pair.value&&"string"==typeof pair.value?JSON.parse(pair.value):pair.value;return pairValues=pairValues||[],0==labelIndx||pairValues&&pairValues.length>=labelIndx&&valueNestedSelectItems[labelName]&&valueNestedSelectItems[labelName][pairValues[labelIndx-1]]?React.createElement(Select,{hideLabel:!0,style:{marginLeft:"1rem",width:20},onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists),readyToSave=!0;newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=keyValueItem.value&&"string"==typeof keyValueItem.value?JSON.parse(keyValueItem.value):keyValueItem.value,keyValueItem.value=keyValueItem.value||[],keyValueItem.value=keyValueItem.value.reverse().slice(keyValueItem.value.length-labelIndx).reverse(),keyValueItem.value.push(e.target.value)),readyToSave=readyToSave?!!keyValueItem.name&&keyValueItem.value.length==valueLabels.length:readyToSave}),_this3.setState({keyValueLists:newKeyValueLists}),readyToSave&&_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})},defaultValue:pairValues&&pairValues.length>labelIndx?pair.value[labelIndx]:"",value:pairValues&&pairValues.length>labelIndx?pairValues[labelIndx]:""},valueNestedSelectItems[labelName][0==labelIndx?"no_parent":pairValues[labelIndx-1]]):null}):React.createElement(TextInput,{style:{marginLeft:"1rem"},placeholder:_this3.props.placeholder_value||"Enter Value...",onChange:function(e){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);newKeyValueLists.map(function(keyValueItem,indx){indx==i&&(keyValueItem.value=_this3.props.trim_value?_this3.removeSpecialCharacters(e.target.value):e.target.value)}),_this3.setState({keyValueLists:newKeyValueLists})},onBlur:function(){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists),readyToSave=!0;newKeyValueLists.map(function(keyValueItem,indx){readyToSave=readyToSave?!!keyValueItem.name:readyToSave}),readyToSave&&_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})},defaultValue:pair.value,value:pair.value}),_this3.state.keyValueLists.length>0?React.createElement(SubAlt20,{style:{paddingRight:1},onClick:function(){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);(newKeyValueLists=(newKeyValueLists=newKeyValueLists||[{name:"",value:""}]).filter(function(item,indx){return indx!=i}))&&0!=newKeyValueLists.length||(newKeyValueLists=[{name:"",value:""}]),_this3.setState({keyValueLists:newKeyValueLists}),_this3.props.updateStore&&_this3.props.updateStore({updates:{value:newKeyValueLists}})}}):null,React.createElement(AddAlt20,{onClick:function(){var newKeyValueLists=cloneDeep(_this3.state.keyValueLists);(newKeyValueLists=newKeyValueLists||[{name:"",value:""}]).length;newKeyValueLists.push({name:"",value:""}),_this3.setState({keyValueLists:newKeyValueLists})}}));keyValueElementList.push(keyValueelement)}),React.createElement("div",{style:{display:"inline-grid",float:"left"}},React.createElement("label",{className:"bx--label",style:{display:"flex"}},this.props.label||"KeyValuePair"),keyValueElementList)}}]),_SrsKeyValuePair_}(React.Component),_export("SrsKeyValuePair",SrsKeyValuePair=function(props){return _SrsKeyValuePair_}),_export("SrsKeyValuePair",SrsKeyValuePair)}}}),System.register("component/studio/SrsLink.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Link,_,_SrsLink_,SrsLink,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Link=_carbonComponentsReact.Link},function(_lodashClonedeep){_lodashClonedeep.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsLink_=function(_React$Component){function _SrsLink_(props){_classCallCheck(this,_SrsLink_);var _this=_possibleConstructorReturn(this,(_SrsLink_.__proto__||Object.getPrototypeOf(_SrsLink_)).call(this,props));return _this.state={reload:!1},_this.onClick=_this.onClick.bind(_this),_this}return _inherits(_SrsLink_,_React$Component),_createClass(_SrsLink_,[{key:"onClick",value:function(e){!this.props.widgetProps||"true"!=this.props.widgetProps.NavigateToURL&&1!=this.props.widgetProps.NavigateToURL||navigateTo(this.props.widgetProps.HREF)}},{key:"componentDidUpdate",value:function(prevProps){this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&(prevProps.widgetProps.value!=this.props.widgetProps.value?this.setState({inputValue:this.props.widgetProps.value}):this.setState({reload:!this.state.reload}))}},{key:"render",value:function(){var additionalProps={};return this.props.widgetProps&&this.props.widgetProps.Inline&&(additionalProps.inline=!0),React.createElement("div",{className:"srs-prem-container"},React.createElement(Link,_extends({styles:this.props.widgetProps&&this.props.widgetProps.Styles?this.props.widgetProps.Styles:{},href:this.props.widgetProps?this.props.widgetProps.HREF:"#"},additionalProps,{onClick:this.onClick}),this.props.widgetProps?this.props.widgetProps.Label:"Link"))}}]),_SrsLink_}(React.Component),_export("SrsLink",SrsLink=function(props){return _SrsLink_}),_export("SrsLink",SrsLink),_export("default",SrsLink),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsLink/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Link,_,_SrsLink_,SrsLink;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Link=_carbonComponentsReact.Link},function(_lodashClonedeep){_lodashClonedeep.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsLink_=function(_React$Component){function _SrsLink_(props){_classCallCheck(this,_SrsLink_);var _this=_possibleConstructorReturn(this,(_SrsLink_.__proto__||Object.getPrototypeOf(_SrsLink_)).call(this,props));return _this.state={reload:!1},_this.onClick=_this.onClick.bind(_this),_this}return _inherits(_SrsLink_,_React$Component),_createClass(_SrsLink_,[{key:"onClick",value:function(e){!this.props.widgetProps||"true"!=this.props.widgetProps.NavigateToURL&&1!=this.props.widgetProps.NavigateToURL||navigateTo(this.props.widgetProps.HREF)}},{key:"componentDidUpdate",value:function(prevProps){this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&(prevProps.widgetProps.value!=this.props.widgetProps.value?this.setState({inputValue:this.props.widgetProps.value}):this.setState({reload:!this.state.reload}))}},{key:"render",value:function(){var additionalProps={};return this.props.widgetProps&&this.props.widgetProps.Inline&&(additionalProps.inline=!0),React.createElement("div",{className:"srs-prem-container"},React.createElement(Link,_extends({styles:this.props.widgetProps&&this.props.widgetProps.Styles?this.props.widgetProps.Styles:{},href:this.props.widgetProps?this.props.widgetProps.HREF:"#"},additionalProps,{onClick:this.onClick}),this.props.widgetProps?this.props.widgetProps.Label:"Link"))}}]),_SrsLink_}(React.Component),_export("SrsLink",SrsLink=function(props){return _SrsLink_}),_export("SrsLink",SrsLink)}}}),System.register("component/studio/SrsLoading.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Loading,_SrsLoading_,SrsLoading,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Loading=_carbonComponentsReact.Loading}],execute:function(){_SrsLoading_=function(_React$Component){function _SrsLoading_(){return _classCallCheck(this,_SrsLoading_),_possibleConstructorReturn(this,(_SrsLoading_.__proto__||Object.getPrototypeOf(_SrsLoading_)).apply(this,arguments))}return _inherits(_SrsLoading_,_React$Component),_createClass(_SrsLoading_,[{key:"render",value:function(){return React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/SrsLoading/Style.css");'),React.createElement(Loading,{small:!(!this.props.small||"true"!=this.props.small),withOverlay:!1,className:"some-class"}))}}]),_SrsLoading_}(React.Component),_export("SrsLoading",SrsLoading=function(props){return _SrsLoading_}),_export("SrsLoading",SrsLoading),_export("default",SrsLoading),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsLoading/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Loading,_SrsLoading_,SrsLoading;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Loading=_carbonComponentsReact.Loading}],execute:function(){_SrsLoading_=function(_React$Component){function _SrsLoading_(){return _classCallCheck(this,_SrsLoading_),_possibleConstructorReturn(this,(_SrsLoading_.__proto__||Object.getPrototypeOf(_SrsLoading_)).apply(this,arguments))}return _inherits(_SrsLoading_,_React$Component),_createClass(_SrsLoading_,[{key:"render",value:function(){return React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/SrsLoading/Style.css");'),React.createElement(Loading,{small:!(!this.props.small||"true"!=this.props.small),withOverlay:!1,className:"some-class"}))}}]),_SrsLoading_}(React.Component),_export("SrsLoading",SrsLoading=function(props){return _SrsLoading_}),_export("SrsLoading",SrsLoading)}}}),System.register("component/studio/SrsMultiButton.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,SelectItemGroup,_SrsMultiButton_,SrsMultiButton,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,SelectItemGroup=_carbonComponentsReact.SelectItemGroup}],execute:function(){_SrsMultiButton_=function(_React$Component){function _SrsMultiButton_(props){_classCallCheck(this,_SrsMultiButton_);var _this=_possibleConstructorReturn(this,(_SrsMultiButton_.__proto__||Object.getPrototypeOf(_SrsMultiButton_)).call(this,props));return _this.selectElement=null,_this}return _inherits(_SrsMultiButton_,_React$Component),_createClass(_SrsMultiButton_,[{key:"render",value:function(){var _this2=this,_props=this.props,size=(_props.label,_props.className,_props.handleOnClick,_props.rules,_props.level,_props.size),buttonOptions=(_props.style,this.props.widgetProps&&this.props.widgetProps.Size&&this.props.widgetProps.Size,this.props.widgetProps&&this.props.widgetProps.ButtonAction&&this.props.widgetProps.ButtonAction,this.props.containerStyles&&this.props.containerStyles,React.createElement(Select,{ref:function(input){return _this2.selectElement=input},id:"select-1",hideLabel:"true",defaultValue:"placeholder-item",style:{backgroundColor:"#0062ff",color:"white"}},React.createElement(SelectItem,{disabled:!0,hidden:!0,value:"placeholder-item",text:"Actions"}),React.createElement(SelectItemGroup,{label:"Category 1"},React.createElement(SelectItem,{value:"option-1",text:"Option 1"}),React.createElement(SelectItem,{value:"option-2",text:"Option 2"})),React.createElement(SelectItemGroup,{label:"Category 2"},React.createElement(SelectItem,{value:"option-3",text:"Option 3"}),React.createElement(SelectItem,{value:"option-4",text:"Option 4"}))));return React.createElement("div",{className:"MultiSelect"},buttonOptions)}}]),_SrsMultiButton_}(React.Component),_export("SrsMultiButton",SrsMultiButton=function(props){return WrappedComponent=_SrsMultiButton_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsMultiButton",SrsMultiButton),_export("default",SrsMultiButton),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsNavigateBtn.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/SrsButton/Definition.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SrsButton,_SrsNavigateBtn_,SrsNavigateBtn,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentStudioSrsButtonDefinitionJs){SrsButton=_componentStudioSrsButtonDefinitionJs.SrsButton}],execute:function(){_SrsNavigateBtn_=function(_React$Component){function _SrsNavigateBtn_(){return _classCallCheck(this,_SrsNavigateBtn_),_possibleConstructorReturn(this,(_SrsNavigateBtn_.__proto__||Object.getPrototypeOf(_SrsNavigateBtn_)).apply(this,arguments))}return _inherits(_SrsNavigateBtn_,_React$Component),_createClass(_SrsNavigateBtn_,[{key:"render",value:function(){var urlProp=this.props.widgetProps&&this.props.widgetProps.URL,pageProp=this.props.widgetProps&&this.props.widgetProps.Page,SrsBtn=SrsButton({URL:urlProp,Page:pageProp}),widgetProps=this.props.widgetProps;return React.createElement(SrsBtn,{widgetProps:widgetProps})}}]),_SrsNavigateBtn_}(React.Component),_export("SrsNavigateBtn",SrsNavigateBtn=function(props){return _SrsNavigateBtn_}),_export("SrsNavigateBtn",SrsNavigateBtn),_export("default",SrsNavigateBtn),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsButton/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Button,_SrsButton_,SrsButton;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Button=_carbonComponentsReact.Button}],execute:function(){_SrsButton_=function(_React$Component){function _SrsButton_(props){return _classCallCheck(this,_SrsButton_),_possibleConstructorReturn(this,(_SrsButton_.__proto__||Object.getPrototypeOf(_SrsButton_)).call(this,props))}return _inherits(_SrsButton_,_React$Component),_createClass(_SrsButton_,[{key:"render",value:function(){var _props=this.props,label=_props.label,handleOnClick=(_props.className,_props.handleOnClick),size=(_props.rules,_props.level,_props.size),props=(_props.style,{size:this.props.widgetProps&&this.props.widgetProps.Size?this.props.widgetProps.Size:size||"large"});handleOnClick&&(props.onClick=handleOnClick);this.props.widgetProps&&this.props.widgetProps.ButtonAction&&this.props.widgetProps.ButtonAction;var styles=this.props.widgetProps&&this.props.widgetProps.Styles&&"string"==typeof this.props.widgetProps.Styles?JSON.parse(this.props.widgetProps.Styles):{},containerStyles=this.props.containerStyles?this.props.containerStyles:{};containerStyles=_extends({backgroundColor:"#0095ff"},containerStyles,styles);var embeddedStyles=null;return this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles)),React.createElement("div",{className:containerStyles&&0!=Object.keys(containerStyles).length?"":"srs-prem-container"},embeddedStyles,React.createElement(Button,_extends({style:containerStyles},props),label||(this.props.widgetProps&&this.props.widgetProps.Label||"Save")))}}]),_SrsButton_}(React.Component),_export("SrsButton",SrsButton=function(props){return WrappedComponent=_SrsButton_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsButton",SrsButton)}}}),System.register("component/studio/SrsNavigateBtn/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/SrsButton/Definition.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SrsButton,_SrsNavigateBtn_,SrsNavigateBtn;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_componentStudioSrsButtonDefinitionJs){SrsButton=_componentStudioSrsButtonDefinitionJs.SrsButton}],execute:function(){_SrsNavigateBtn_=function(_React$Component){function _SrsNavigateBtn_(){return _classCallCheck(this,_SrsNavigateBtn_),_possibleConstructorReturn(this,(_SrsNavigateBtn_.__proto__||Object.getPrototypeOf(_SrsNavigateBtn_)).apply(this,arguments))}return _inherits(_SrsNavigateBtn_,_React$Component),_createClass(_SrsNavigateBtn_,[{key:"render",value:function(){var urlProp=this.props.widgetProps&&this.props.widgetProps.URL,pageProp=this.props.widgetProps&&this.props.widgetProps.Page,SrsBtn=SrsButton({URL:urlProp,Page:pageProp}),widgetProps=this.props.widgetProps;return React.createElement(SrsBtn,{widgetProps:widgetProps})}}]),_SrsNavigateBtn_}(React.Component),_export("SrsNavigateBtn",SrsNavigateBtn=function(props){return _SrsNavigateBtn_}),_export("SrsNavigateBtn",SrsNavigateBtn)}}}),System.register("component/studio/SrsNavigation.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/fade/16","lodash.clonedeep","lodash","carbon-components-react","component/studio/SrsMultiButton/Definition.js"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,_,SideNav,SideNavItems,SideNavMenu,SideNavMenuItem,SrsMultiButton,_SrsNavigation_,SrsNavigation,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibFade){_carbonIconsReactLibFade.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default},function(_carbonComponentsReact){SideNav=_carbonComponentsReact.SideNav,SideNavItems=_carbonComponentsReact.SideNavItems,SideNavMenu=_carbonComponentsReact.SideNavMenu,SideNavMenuItem=_carbonComponentsReact.SideNavMenuItem,_carbonComponentsReact.SideNavLink},function(_componentStudioSrsMultiButtonDefinitionJs){SrsMultiButton=_componentStudioSrsMultiButtonDefinitionJs.SrsMultiButton}],execute:function(){_SrsNavigation_=function(_React$Component){function _SrsNavigation_(props){_classCallCheck(this,_SrsNavigation_);var _this=_possibleConstructorReturn(this,(_SrsNavigation_.__proto__||Object.getPrototypeOf(_SrsNavigation_)).call(this,props));return _this.state={navTree:{name:"Main",expand:!0,items:[]}},_this.getItemsEl=_this.getItemsEl.bind(_this),$ele&&$ele.registerElement("SideNavLink","studio","React"),_this.mode=_this.props.widgetProps&&_this.props.widgetProps.Mode?_this.props.widgetProps.Mode:"navigate",_this}return _inherits(_SrsNavigation_,_React$Component),_createClass(_SrsNavigation_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var parentId,navTreeItems;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return parentId=this.props.widgetProps?this.props.widgetProps.NavigationParent:this.props.parentId,_context.next=3,$script.runAtServer("mmf.getNavTree",{parentId:parentId});case 3:navTreeItems=_context.sent,this.setState({navTree:{name:"Main",expand:!0,items:navTreeItems}});case 5:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps){var parentId,navTreeItems,updatedWidgetProps;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.props.widgetProps||prevProps.widgetProps.NavigationParent==this.props.widgetProps.NavigationParent){_context2.next=6;break}return parentId=this.props.widgetProps?this.props.widgetProps.NavigationParent:this.props.parentId,_context2.next=4,$script.runAtServer("mmf.getNavTree",{parentId:parentId});case 4:navTreeItems=_context2.sent,this.setState({navTree:{name:"Main",expand:!0,items:navTreeItems}});case 6:_.isEqual(this.props.activeLink,prevProps.activeLink)||((updatedWidgetProps=cloneDeep(this.props.widgetProps)).ActiveLink=this.props.activeLink,this.props.updateStore({updates:{widgetProps:updatedWidgetProps}}));case 7:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"getItemsEl",value:function(items,depth){var _this2=this,itemsEl=[];return items&&items.length>0?(items.map(function(item){if("menu"==item.type){var innerItemEl=_this2.getItemsEl(item.items,depth+1);itemsEl.push(React.createElement(SideNavMenu,{style:{paddingLeft:20*depth},defaultExpanded:!0,title:item.name},innerItemEl))}else"menuitem"==item.type&&itemsEl.push(React.createElement(SideNavMenuItem,{element:"side-nav-link",widgetid:_this2.props.widgetid,href:item.url,mode:_this2.mode,name:item.name},item.name))}),itemsEl):itemsEl}},{key:"render",value:function(){var name="Main",expand=!0,items=[];this.state.navTree&&(name=this.state.navTree.name,expand=this.state.navTree.expand,items=this.state.navTree.items);var itemsEl=this.getItemsEl(items,1),contentEl=null;if("true"==this.props.onecolumn){var multiBtnProps={};this.props.widgetProps&&this.props.widgetProps.OneColumnAnchor&&(multiBtnProps.onColumnanchor="true");var MultiBtn=SrsMultiButton();contentEl=React.createElement(MultiBtn,multiBtnProps)}else contentEl=React.createElement(SideNav,{"aria-label":name,expanded:expand},React.createElement(SideNavItems,null,itemsEl));return React.createElement("div",null," ",contentEl," ")}}]),_SrsNavigation_}(React.Component),_export("SrsNavigation",SrsNavigation=function(props){return _SrsNavigation_}),_export("SrsNavigation",SrsNavigation),_export("default",SrsNavigation),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"activeLink",AccessPath:"navigation.${widgetid}",DefaultValue:'{"navigation": {"${widgetid}": {}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsNavigation/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/fade/16","lodash.clonedeep","lodash","carbon-components-react","component/studio/SrsMultiButton/Definition.js"],function(_export,_context3){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,_,SideNav,SideNavItems,SideNavMenu,SideNavMenuItem,SrsMultiButton,_SrsNavigation_,SrsNavigation;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibFade){_carbonIconsReactLibFade.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default},function(_carbonComponentsReact){SideNav=_carbonComponentsReact.SideNav,SideNavItems=_carbonComponentsReact.SideNavItems,SideNavMenu=_carbonComponentsReact.SideNavMenu,SideNavMenuItem=_carbonComponentsReact.SideNavMenuItem,_carbonComponentsReact.SideNavLink},function(_componentStudioSrsMultiButtonDefinitionJs){SrsMultiButton=_componentStudioSrsMultiButtonDefinitionJs.SrsMultiButton}],execute:function(){_SrsNavigation_=function(_React$Component){function _SrsNavigation_(props){_classCallCheck(this,_SrsNavigation_);var _this=_possibleConstructorReturn(this,(_SrsNavigation_.__proto__||Object.getPrototypeOf(_SrsNavigation_)).call(this,props));return _this.state={navTree:{name:"Main",expand:!0,items:[]}},_this.getItemsEl=_this.getItemsEl.bind(_this),$ele&&$ele.registerElement("SideNavLink","studio","React"),_this.mode=_this.props.widgetProps&&_this.props.widgetProps.Mode?_this.props.widgetProps.Mode:"navigate",_this}return _inherits(_SrsNavigation_,_React$Component),_createClass(_SrsNavigation_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var parentId,navTreeItems;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return parentId=this.props.widgetProps?this.props.widgetProps.NavigationParent:this.props.parentId,_context.next=3,$script.runAtServer("mmf.getNavTree",{parentId:parentId});case 3:navTreeItems=_context.sent,this.setState({navTree:{name:"Main",expand:!0,items:navTreeItems}});case 5:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps){var parentId,navTreeItems,updatedWidgetProps;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.props.widgetProps||prevProps.widgetProps.NavigationParent==this.props.widgetProps.NavigationParent){_context2.next=6;break}return parentId=this.props.widgetProps?this.props.widgetProps.NavigationParent:this.props.parentId,_context2.next=4,$script.runAtServer("mmf.getNavTree",{parentId:parentId});case 4:navTreeItems=_context2.sent,this.setState({navTree:{name:"Main",expand:!0,items:navTreeItems}});case 6:_.isEqual(this.props.activeLink,prevProps.activeLink)||((updatedWidgetProps=cloneDeep(this.props.widgetProps)).ActiveLink=this.props.activeLink,this.props.updateStore({updates:{widgetProps:updatedWidgetProps}}));case 7:case"end":return _context2.stop()}},_callee2,this)}));return function(_x){return _ref2.apply(this,arguments)}}()},{key:"getItemsEl",value:function(items,depth){var _this2=this,itemsEl=[];return items&&items.length>0?(items.map(function(item){if("menu"==item.type){var innerItemEl=_this2.getItemsEl(item.items,depth+1);itemsEl.push(React.createElement(SideNavMenu,{style:{paddingLeft:20*depth},defaultExpanded:!0,title:item.name},innerItemEl))}else"menuitem"==item.type&&itemsEl.push(React.createElement(SideNavMenuItem,{element:"side-nav-link",widgetid:_this2.props.widgetid,href:item.url,mode:_this2.mode,name:item.name},item.name))}),itemsEl):itemsEl}},{key:"render",value:function(){var name="Main",expand=!0,items=[];this.state.navTree&&(name=this.state.navTree.name,expand=this.state.navTree.expand,items=this.state.navTree.items);var itemsEl=this.getItemsEl(items,1),contentEl=null;if("true"==this.props.onecolumn){var multiBtnProps={};this.props.widgetProps&&this.props.widgetProps.OneColumnAnchor&&(multiBtnProps.onColumnanchor="true");var MultiBtn=SrsMultiButton();contentEl=React.createElement(MultiBtn,multiBtnProps)}else contentEl=React.createElement(SideNav,{"aria-label":name,expanded:expand},React.createElement(SideNavItems,null,itemsEl));return React.createElement("div",null," ",contentEl," ")}}]),_SrsNavigation_}(React.Component),_export("SrsNavigation",SrsNavigation=function(props){return _SrsNavigation_}),_export("SrsNavigation",SrsNavigation)}}}),System.register("component/studio/SrsNumber.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,NumberInput,_SrsNumber_,SrsNumber,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){NumberInput=_carbonComponentsReact.NumberInput}],execute:function(){_SrsNumber_=function(_React$Component){function _SrsNumber_(props){_classCallCheck(this,_SrsNumber_);var _this=_possibleConstructorReturn(this,(_SrsNumber_.__proto__||Object.getPrototypeOf(_SrsNumber_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsNumber_,_React$Component),_createClass(_SrsNumber_,[{key:"handleChange",value:function(e){var updatedProps=this.props.widgetProps;updatedProps.value=e.imaginaryTarget.value,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"render",value:function(){var fieldValue=this.props.widgetProps.value||this.props.widgetProps.DefaultValue,styles={};try{styles=this.props.widgetProps.styles?JSON.parse(this.props.widgetProps.styles):{}}catch(err){}return React.createElement("div",{className:"srs-prem-container"},React.createElement(NumberInput,{styles:styles,className:this.props.widgetProps.ClassName,label:this.props.widgetProps.Label||"Number",value:fieldValue,defaultValue:this.props.widgetProps.DefaultValue,invalid:this.props.widgetProps.invalid,invalidText:this.props.widgetProps.InvalidText,helperText:this.props.widgetProps.helperText,onChange:this.handleChange}))}}]),_SrsNumber_}(React.Component),_export("SrsNumber",SrsNumber=function(props){return _SrsNumber_}),_export("SrsNumber",SrsNumber),_export("default",SrsNumber),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsNumber/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,NumberInput,_SrsNumber_,SrsNumber;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){NumberInput=_carbonComponentsReact.NumberInput}],execute:function(){_SrsNumber_=function(_React$Component){function _SrsNumber_(props){_classCallCheck(this,_SrsNumber_);var _this=_possibleConstructorReturn(this,(_SrsNumber_.__proto__||Object.getPrototypeOf(_SrsNumber_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsNumber_,_React$Component),_createClass(_SrsNumber_,[{key:"handleChange",value:function(e){var updatedProps=this.props.widgetProps;updatedProps.value=e.imaginaryTarget.value,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"render",value:function(){var fieldValue=this.props.widgetProps.value||this.props.widgetProps.DefaultValue,styles={};try{styles=this.props.widgetProps.styles?JSON.parse(this.props.widgetProps.styles):{}}catch(err){}return React.createElement("div",{className:"srs-prem-container"},React.createElement(NumberInput,{styles:styles,className:this.props.widgetProps.ClassName,label:this.props.widgetProps.Label||"Number",value:fieldValue,defaultValue:this.props.widgetProps.DefaultValue,invalid:this.props.widgetProps.invalid,invalidText:this.props.widgetProps.InvalidText,helperText:this.props.widgetProps.helperText,onChange:this.handleChange}))}}]),_SrsNumber_}(React.Component),_export("SrsNumber",SrsNumber=function(props){return _SrsNumber_}),_export("SrsNumber",SrsNumber)}}}),System.register("component/studio/SrsPagination.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Pagination,cloneDeep,_,_SrsPagination_,SrsPagination,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Pagination=_carbonComponentsReact.Pagination},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsPagination_=function(_React$Component){function _SrsPagination_(props){_classCallCheck(this,_SrsPagination_);var _this=_possibleConstructorReturn(this,(_SrsPagination_.__proto__||Object.getPrototypeOf(_SrsPagination_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this.state={reload:!1},_this}return _inherits(_SrsPagination_,_React$Component),_createClass(_SrsPagination_,[{key:"handleChange",value:function(val){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.PageSize=val.pageSize,updatedProps.PageNumber=val.page,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps,this.props)}},{key:"render",value:function(){var _this2=this,self=this,widgetProps={disabled:!1,page:self.props.widgetProps&&self.props.widgetProps.PageNumber?parseInt(self.props.widgetProps.PageNumber):0,totalItems:self.props.widgetProps&&self.props.widgetProps.TotalItems?parseInt(self.props.widgetProps.TotalItems):0,pagesUnknown:!1,backwardText:self.props.widgetProps&&self.props.widgetProps.BackwardLabel?self.props.widgetProps.BackwardLabel:"Previous page",forwardText:self.props.widgetProps&&self.props.widgetProps.ForwardLabel?self.props.widgetProps.ForwardLabel:"Next page",pageSize:self.props.widgetProps&&self.props.widgetProps.PageSize?parseInt(self.props.widgetProps.PageSize):10,itemsPerPageText:self.props.widgetProps&&self.props.widgetProps.ItemsPerPageLabel?self.props.widgetProps.ItemsPerPageLabel:"Items per page:"};return widgetProps.pageSizes=[0*widgetProps.pageSize,1*widgetProps.pageSize,2*widgetProps.pageSize,3*widgetProps.pageSize],React.createElement("div",{className:"srs-pagination"},React.createElement(Pagination,_extends({},widgetProps,{onChange:function(e){_this2.handleChange(e)}})))}}]),_SrsPagination_}(React.Component),_export("SrsPagination",SrsPagination=function(props){return _SrsPagination_}),_export("SrsPagination",SrsPagination),_export("default",SrsPagination),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsPagination/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Pagination,cloneDeep,_,_SrsPagination_,SrsPagination;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Pagination=_carbonComponentsReact.Pagination},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsPagination_=function(_React$Component){function _SrsPagination_(props){_classCallCheck(this,_SrsPagination_);var _this=_possibleConstructorReturn(this,(_SrsPagination_.__proto__||Object.getPrototypeOf(_SrsPagination_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this.state={reload:!1},_this}return _inherits(_SrsPagination_,_React$Component),_createClass(_SrsPagination_,[{key:"handleChange",value:function(val){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.PageSize=val.pageSize,updatedProps.PageNumber=val.page,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps,this.props)}},{key:"render",value:function(){var _this2=this,self=this,widgetProps={disabled:!1,page:self.props.widgetProps&&self.props.widgetProps.PageNumber?parseInt(self.props.widgetProps.PageNumber):0,totalItems:self.props.widgetProps&&self.props.widgetProps.TotalItems?parseInt(self.props.widgetProps.TotalItems):0,pagesUnknown:!1,backwardText:self.props.widgetProps&&self.props.widgetProps.BackwardLabel?self.props.widgetProps.BackwardLabel:"Previous page",forwardText:self.props.widgetProps&&self.props.widgetProps.ForwardLabel?self.props.widgetProps.ForwardLabel:"Next page",pageSize:self.props.widgetProps&&self.props.widgetProps.PageSize?parseInt(self.props.widgetProps.PageSize):10,itemsPerPageText:self.props.widgetProps&&self.props.widgetProps.ItemsPerPageLabel?self.props.widgetProps.ItemsPerPageLabel:"Items per page:"};return widgetProps.pageSizes=[0*widgetProps.pageSize,1*widgetProps.pageSize,2*widgetProps.pageSize,3*widgetProps.pageSize],React.createElement("div",{className:"srs-pagination"},React.createElement(Pagination,_extends({},widgetProps,{onChange:function(e){_this2.handleChange(e)}})))}}]),_SrsPagination_}(React.Component),_export("SrsPagination",SrsPagination=function(props){return _SrsPagination_}),_export("SrsPagination",SrsPagination)}}}),System.register("component/studio/SrsRadio.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,RadioButton,_SrsRadio_,SrsRadio,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){RadioButton=_carbonComponentsReact.RadioButton}],execute:function(){_SrsRadio_=function(_React$Component){function _SrsRadio_(props){_classCallCheck(this,_SrsRadio_);var _this=_possibleConstructorReturn(this,(_SrsRadio_.__proto__||Object.getPrototypeOf(_SrsRadio_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this.items=props.items?props.items:[{id:"id1",label:"Veg"},{id:"id2",label:"Non-Veg"},{id:"id3",label:"Egg"}],_this}return _inherits(_SrsRadio_,_React$Component),_createClass(_SrsRadio_,[{key:"handleChange",value:function(val){console.log(this.props);var updatedProps=this.props.widgetProps;updatedProps.value=val,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"render",value:function(){var radioButtonProps={onChange:this.handleChange,className:"wrapItems",name:"Test",labelPosition:"right",disabled:!1},radioButtonContainer=[];return this.items.map(function(item,idx){radioButtonContainer.push(React.createElement(RadioButton,_extends({id:item.id,value:item.id,labelText:item.label},radioButtonProps)))}),React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,"@import url('/thirdpartylib/carbon-components/styles.css'); @import url('component/studio/SrsRadio/Style.css');"),radioButtonContainer)}}]),_SrsRadio_}(React.Component),_export("SrsRadio",SrsRadio=function(props){return _SrsRadio_}),_export("SrsRadio",SrsRadio),_export("default",SrsRadio),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsRadio/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,RadioButton,_SrsRadio_,SrsRadio;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){RadioButton=_carbonComponentsReact.RadioButton}],execute:function(){_SrsRadio_=function(_React$Component){function _SrsRadio_(props){_classCallCheck(this,_SrsRadio_);var _this=_possibleConstructorReturn(this,(_SrsRadio_.__proto__||Object.getPrototypeOf(_SrsRadio_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this.items=props.items?props.items:[{id:"id1",label:"Veg"},{id:"id2",label:"Non-Veg"},{id:"id3",label:"Egg"}],_this}return _inherits(_SrsRadio_,_React$Component),_createClass(_SrsRadio_,[{key:"handleChange",value:function(val){console.log(this.props);var updatedProps=this.props.widgetProps;updatedProps.value=val,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"render",value:function(){var radioButtonProps={onChange:this.handleChange,className:"wrapItems",name:"Test",labelPosition:"right",disabled:!1},radioButtonContainer=[];return this.items.map(function(item,idx){radioButtonContainer.push(React.createElement(RadioButton,_extends({id:item.id,value:item.id,labelText:item.label},radioButtonProps)))}),React.createElement("div",{className:"srs-prem-container"},React.createElement("style",null,"@import url('/thirdpartylib/carbon-components/styles.css'); @import url('component/studio/SrsRadio/Style.css');"),radioButtonContainer)}}]),_SrsRadio_}(React.Component),_export("SrsRadio",SrsRadio=function(props){return _SrsRadio_}),_export("SrsRadio",SrsRadio)}}}),System.register("component/studio/SrsReference.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","@carbon/icons-react/lib/close/32","lodash.debounce"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ComboBox,cloneDeep,Close,debounce,_SrsReference_,SrsReference,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){ComboBox=_carbonComponentsReact.ComboBox},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonIconsReactLibClose){Close=_carbonIconsReactLibClose.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){_SrsReference_=function(_React$Component){function _SrsReference_(props){_classCallCheck(this,_SrsReference_);var _this=_possibleConstructorReturn(this,(_SrsReference_.__proto__||Object.getPrototypeOf(_SrsReference_)).call(this,props));return _this.state={recordItems:[],selectedItem:null,previousSelectedItem:null},_this.reloadData=_this.reloadData.bind(_this),_this.onChangeDebounce=debounce(function(val){_this.state.lastSearchKey!=val&&(_this.state.lastSearchKey||val)&&_this.getRecords(val).then(function(recordItems){return _this.setState({recordItems:recordItems,lastSearchKey:val})})},500),_this.reloadData(),_this}return _inherits(_SrsReference_,_React$Component),_createClass(_SrsReference_,[{key:"getRecords",value:function(filterKey,includeUIDs){var _this2=this;return new Promise(function(resolve,reject){var records=[];$script.getscript("mmf.getRecords").then(function(_ref){var getRecordsFn=_ref.default,filter={};try{filter=JSON.parse(_this2.recordMatchingFilter)}catch(err){}if(filter){var currentWhereClause=filter.where?filter.where:{},additionalAndClause=null;if(filterKey||includeUIDs)additionalAndClause={or:[]},_this2.searchFields.split(",").map(function(searchField,indx){var innerClause={};innerClause[searchField]={like:"%"+filterKey+"%"},additionalAndClause.or.push(innerClause)}),includeUIDs&&includeUIDs.length>0&&(additionalAndClause.or.uid={inq:includeUIDs});filter.where=additionalAndClause?{and:[currentWhereClause,additionalAndClause]}:currentWhereClause}getRecordsFn({tableName:_this2.tableName,fields:[_this2.displayField,_this2.secondaryDisplayField,"uid"],fieldAliases:null,filter:filter}).then(function(tableRows){tableRows&&!tableRows.error&&tableRows&&tableRows.length>0?(tableRows.map(function(tableRow){var recordData=tableRow.node;records.push({id:recordData.uid,text:_this2.secondaryDisplayField?recordData[_this2.displayField]+" [ "+recordData[_this2.secondaryDisplayField]+" ]":""+recordData[_this2.displayField]})}),resolve(records)):resolve([])})})})}},{key:"reloadData",value:function(){var _this3=this,fieldValue=this.props.widgetProps?this.props.widgetProps.value||this.props.widgetProps.DefaultValue:this.props.defaultValue;this.getRecords("",[fieldValue]).then(function(records){var selectedItem=null;if(records&&records.length>0){var matchingRecord=records.filter(function(record){return record.id==fieldValue});selectedItem=matchingRecord&&matchingRecord.length>0?matchingRecord[0]:selectedItem}var item=selectedItem||(fieldValue?{id:fieldValue,text:""}:null);_this3.setState({recordItems:records,selectedItem:item})})}},{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&_.isEqual(prevProps.tablename,this.props.tablename)&&_.isEqual(prevProps.displayfield,this.props.displayfield)&&_.isEqual(prevProps.filter,this.props.filter)&&_.isEqual(prevProps.defaultValue,this.props.defaultValue)&&_.isEqual(prevProps.searchfields,this.props.searchfields)||this.reloadData()}},{key:"render",value:function(){var _this4=this;this.tableName=this.props.tablename?this.props.tablename:this.props.widgetProps&&this.props.widgetProps.TableName?this.props.widgetProps.TableName:"",this.displayField=this.props.displayfield?this.props.displayfield:this.props.widgetProps&&this.props.widgetProps.DisplayField?this.props.widgetProps.DisplayField:"",this.secondaryDisplayField=this.props.secondarydisplayfield?this.props.secondarydisplayfield:this.props.widgetProps&&this.props.widgetProps.SecondaryDisplayField?this.props.widgetProps.SecondaryDisplayField:"",this.recordMatchingFilter=this.props.filter?this.props.filter:this.props.widgetProps&&this.props.widgetProps.RecordMatchingFilter?this.props.widgetProps.RecordMatchingFilter:"{}",this.searchFields=this.props.searchfields?this.props.searchfields:this.props.widgetProps&&this.props.widgetProps.SearchFields?this.props.widgetProps.SearchFields:"uid";var invalid=!(!this.props.widgetProps||"true"!=this.props.widgetProps.invalid),selectedItem=this.state.selectedItem,initialSelectedItem=(this.props.defaultValue?this.props.defaultValue:this.props.widgetProps&&(this.props.widgetProps.value||this.props.widgetProps.DefaultValue),this.state.lastSearchKey?this.state.lastSearchKey:selectedItem),titleText=this.props.title?this.props.title:this.props.widgetProps&&this.props.widgetProps.Label?this.props.widgetProps.Label:"Data Lookup",props={selectedItem:selectedItem||this.state.previousSelectedItem,initialSelectedItem:initialSelectedItem,ariaLabel:"Choose an item",disabled:!1,helperText:""+(this.props.widgetProps&&this.props.widgetProps.HelperText?this.props.widgetProps.HelperText:""),invalid:invalid,invalidText:""+(this.props.widgetProps&&this.props.widgetProps.InvalidText?this.props.widgetProps.InvalidText:"Valid value is required"),light:!1,onInputChange:this.onChangeDebounce,placeholder:""+(this.props.widgetProps&&this.props.widgetProps.Placeholder?this.props.widgetProps.Placeholder:"Filter..."),titleText:titleText,type:"default"},onChange=function(_ref2){var selectedItem=_ref2.selectedItem;if(_this4.props.onChange)_this4.props.onChange(selectedItem),_this4.setState({selectedItem:selectedItem,lastSearchKey:null});else if(_this4.props.widgetProps){var updatedProps=cloneDeep(_this4.props.widgetProps);updatedProps.value=selectedItem.id,_this4.props.updateStore({updates:{widgetProps:updatedProps}}),_this4.setState({selectedItem:selectedItem,lastSearchKey:null})}else if(_this4.props.varname){var propName=(_this4.props.varname?_this4.props.varname:_this4.props.uid)+"_refvalue",referencefields=cloneDeep(_this4.props.referencefields);referencefields[propName]=selectedItem.id,_this4.props.updateStore({updates:{referencefields:referencefields}})}};return React.createElement("div",{style:{display:"flex"}},React.createElement("style",null,'@import url("component/studio/SrsReference/Style.css");'),React.createElement(ComboBox,_extends({},props,{onClick:function(e){_this4.getRecords("").then(function(recordItems){return _this4.setState({recordItems:recordItems,selectedItems:null,lastSearchKey:""})})},items:this.state.recordItems,itemToString:function(item){return item==_this4.state.lastSearchKey?_this4.state.lastSearchKey:item?item.text:""},onChange:onChange})),React.createElement(Close,{style:{width:"2rem",height:"2rem",marginTop:"2rem",cursor:"pointer"},onClick:function(e){return onChange({selectedItem:{id:"",text:""}})}}))}}]),_SrsReference_}(React.Component),_export("SrsReference",SrsReference=function(props){return _SrsReference_}),_export("SrsReference",SrsReference),_export("default",SrsReference),_export("states",states=[{KeyName:"referencefields",AccessPath:"referencefields",DefaultValue:'{"referencefields" : {} }'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsSelect.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,cloneDeep,_SrsSelect_,SrsSelect,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsSelect_=function(_React$Component){function _SrsSelect_(props){_classCallCheck(this,_SrsSelect_);var _this=_possibleConstructorReturn(this,(_SrsSelect_.__proto__||Object.getPrototypeOf(_SrsSelect_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsSelect_,_React$Component),_createClass(_SrsSelect_,[{key:"handleChange",value:function(e){if(this.props.updateStore){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=e.target.value,this.props.updateStore({updates:{widgetProps:updatedProps}})}this.props.handleOnChange?this.props.handleOnChange(e.target.value):this.props.onChange&&this.props.onChange(e.target.value)}},{key:"render",value:function(){var choices=[];if(this.props.options&&this.props.options.length>0)this.props.options.map(function(option){choices.push(React.createElement(SelectItem,{value:option.name,text:option.label}))});else if(this.props.widgetProps&&this.props.widgetProps.ChoiceList){var choiceList=[];try{(choiceList="string"==typeof this.props.widgetProps.ChoiceList?JSON.parse(this.props.widgetProps.ChoiceList):this.props.widgetProps.ChoiceList)&&choiceList.length>0&&choiceList.map(function(choiceItem,indx){choices.push(React.createElement(SelectItem,{value:choiceItem.value,text:choiceItem.name}))})}catch(err){}}var selectName=this.props.title?this.props.title:this.props.widgetProps&&this.props.widgetProps.Label?this.props.widgetProps.Label:"Select",props={name:selectName,className:this.props.className?this.props.className:this.props.widgetProps&&this.props.widgetProps.ClassName?this.props.widgetProps.ClassName:"",onChange:this.handleChange},value=this.props.value?this.props.value:this.props.widgetProps&&this.props.widgetProps.value?this.props.widgetProps.value:"";if((value=value||(this.props.widgetProps&&this.props.widgetProps.DefaultVaue?this.props.widgetProps.DefaultVaue:""))&&(props.defaultValue=value,this.props.updateStore&&this.props.widgetProps.value!=value)){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=value,this.props.updateStore({updates:{widgetProps:updatedProps}})}this.props.hideLabel||this.props.widgetProps&&(1==this.props.widgetProps.HideLabel||"true"==this.props.widgetProps.HideLabel)?props.hideLabel=!0:props.labelText=selectName;var containerStyles=this.props.containerStyles?this.props.containerStyles:null;return React.createElement("div",{className:containerStyles?"":"srs-prem-container",style:containerStyles},React.createElement(Select,props,choices))}}]),_SrsSelect_}(React.Component),_export("SrsSelect",SrsSelect=function(props){return WrappedComponent=_SrsSelect_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsSelect",SrsSelect),_export("default",SrsSelect),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsSimpleList.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash","lodash.clonedeep","component/mmf/ComponentWrapper/Definition.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_,cloneDeep,ComponentWrapper,StructuredListSkeleton,StructuredListWrapper,StructuredListHead,StructuredListBody,StructuredListRow,StructuredListCell,_SrsSimpleList_,SrsSimpleList,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodash){_=_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_componentMmfComponentWrapperDefinitionJs){ComponentWrapper=_componentMmfComponentWrapperDefinitionJs.ComponentWrapper},function(_carbonComponentsReact){StructuredListSkeleton=_carbonComponentsReact.StructuredListSkeleton,StructuredListWrapper=_carbonComponentsReact.StructuredListWrapper,StructuredListHead=_carbonComponentsReact.StructuredListHead,StructuredListBody=_carbonComponentsReact.StructuredListBody,StructuredListRow=_carbonComponentsReact.StructuredListRow,_carbonComponentsReact.StructuredListInput,StructuredListCell=_carbonComponentsReact.StructuredListCell}],execute:function(){_SrsSimpleList_=function(_React$Component){function _SrsSimpleList_(props){_classCallCheck(this,_SrsSimpleList_);var _this=_possibleConstructorReturn(this,(_SrsSimpleList_.__proto__||Object.getPrototypeOf(_SrsSimpleList_)).call(this,props));return _this.state={activeitem:-1,isLoading:!0,reload:!1},_this.getItemByType=_this.getItemByType.bind(_this),_this}return _inherits(_SrsSimpleList_,_React$Component),_createClass(_SrsSimpleList_,[{key:"componentDidMount",value:function(){this.setState({isLoading:!1})}},{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.widgetProps,this.props.widgetProps)||this.setState({reload:!this.state.reload})}},{key:"getItemByType",value:function(item){var props={};props.componentname=item.tag.name,props.componentscope=item.tag.scope?item.tag.scope:"mmf",props.componenttype=item.tag.type?item.tag.type:"React";var ProductCard=ComponentWrapper(props);return React.createElement(ProductCard,item)}},{key:"render",value:function(){var _this2=this;if(this.state.isLoading)return React.createElement(StructuredListSkeleton,null);var items=this.props.widgetProps&&this.props.widgetProps.Items?"string"==typeof this.props.widgetProps.Items?JSON.parse(this.props.widgetProps.Items):this.props.widgetProps.Items:null;items=!items&&this.props.items&&"string"==typeof this.props.items?JSON.parse(this.props.items):items;var suffix="true"==this.props.unique?Date.now():"";if(!items||0==items.length)return React.createElement("div",{style:{textAlign:"center"}},"No items to show");var className=!this.props.widgetProps||"true"!=this.props.widgetProps.SingleColumn&&1!=this.props.widgetProps.SingleColumn?"true"==this.props.singlecolumn||1==this.props.singlecolumn?"singleColumnList":"simpleList":"singleColumnList";return className=className+" "+("Align-"+(this.props.widgetProps&&this.props.widgetProps.Alignment?this.props.widgetProps.Alignment:this.props.alignment?this.props.alignment:"center")),React.createElement("div",{className:className},React.createElement(StructuredListWrapper,{ariaLabel:"Structured list section",selection:!0},React.createElement(StructuredListHead,null,React.createElement(StructuredListRow,{head:!0,label:!1,tabIndex:0},React.createElement(StructuredListCell,{head:!0,noWrap:!1},"Name"))),React.createElement(StructuredListBody,null,items.map(function(item,indx){return React.createElement(StructuredListRow,{head:!1,label:!0,tabIndex:0},React.createElement(StructuredListCell,{head:!1,noWrap:!1,onClick:function(e){if(_this2.props.items&&_this2.props.updateStore({updates:{active_list_item:suffix?item.id+"@@"+suffix:item.id}}),_this2.props.widgetid&&_this2.props.widgetProps){var updatedWidgetProps=cloneDeep(_this2.props.widgetProps);updatedWidgetProps.SelectedItem=item.id,_this2.props.updateStore({updates:{widgetProps:updatedWidgetProps}})}}},item.tag?_this2.getItemByType(item):item.name))}))))}}]),_SrsSimpleList_}(React.Component),_export("SrsSimpleList",SrsSimpleList=function(props){return _SrsSimpleList_}),_export("SrsSimpleList",SrsSimpleList),_export("default",SrsSimpleList),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"active_list_item",AccessPath:"active_list_item.${varname}",DefaultValue:'{"active_list_item": {"${varname}": ""}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsSimpleList/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash","lodash.clonedeep","component/mmf/ComponentWrapper/Definition.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_,cloneDeep,ComponentWrapper,StructuredListSkeleton,StructuredListWrapper,StructuredListHead,StructuredListBody,StructuredListRow,StructuredListCell,_SrsSimpleList_,SrsSimpleList;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodash){_=_lodash.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_componentMmfComponentWrapperDefinitionJs){ComponentWrapper=_componentMmfComponentWrapperDefinitionJs.ComponentWrapper},function(_carbonComponentsReact){StructuredListSkeleton=_carbonComponentsReact.StructuredListSkeleton,StructuredListWrapper=_carbonComponentsReact.StructuredListWrapper,StructuredListHead=_carbonComponentsReact.StructuredListHead,StructuredListBody=_carbonComponentsReact.StructuredListBody,StructuredListRow=_carbonComponentsReact.StructuredListRow,_carbonComponentsReact.StructuredListInput,StructuredListCell=_carbonComponentsReact.StructuredListCell}],execute:function(){_SrsSimpleList_=function(_React$Component){function _SrsSimpleList_(props){_classCallCheck(this,_SrsSimpleList_);var _this=_possibleConstructorReturn(this,(_SrsSimpleList_.__proto__||Object.getPrototypeOf(_SrsSimpleList_)).call(this,props));return _this.state={activeitem:-1,isLoading:!0,reload:!1},_this.getItemByType=_this.getItemByType.bind(_this),_this}return _inherits(_SrsSimpleList_,_React$Component),_createClass(_SrsSimpleList_,[{key:"componentDidMount",value:function(){this.setState({isLoading:!1})}},{key:"componentDidUpdate",value:function(prevProps){_.isEqual(prevProps.widgetProps,this.props.widgetProps)||this.setState({reload:!this.state.reload})}},{key:"getItemByType",value:function(item){var props={};props.componentname=item.tag.name,props.componentscope=item.tag.scope?item.tag.scope:"mmf",props.componenttype=item.tag.type?item.tag.type:"React";var ProductCard=ComponentWrapper(props);return React.createElement(ProductCard,item)}},{key:"render",value:function(){var _this2=this;if(this.state.isLoading)return React.createElement(StructuredListSkeleton,null);var items=this.props.widgetProps&&this.props.widgetProps.Items?"string"==typeof this.props.widgetProps.Items?JSON.parse(this.props.widgetProps.Items):this.props.widgetProps.Items:null;items=!items&&this.props.items&&"string"==typeof this.props.items?JSON.parse(this.props.items):items;var suffix="true"==this.props.unique?Date.now():"";if(!items||0==items.length)return React.createElement("div",{style:{textAlign:"center"}},"No items to show");var className=!this.props.widgetProps||"true"!=this.props.widgetProps.SingleColumn&&1!=this.props.widgetProps.SingleColumn?"true"==this.props.singlecolumn||1==this.props.singlecolumn?"singleColumnList":"simpleList":"singleColumnList";return className=className+" "+("Align-"+(this.props.widgetProps&&this.props.widgetProps.Alignment?this.props.widgetProps.Alignment:this.props.alignment?this.props.alignment:"center")),React.createElement("div",{className:className},React.createElement(StructuredListWrapper,{ariaLabel:"Structured list section",selection:!0},React.createElement(StructuredListHead,null,React.createElement(StructuredListRow,{head:!0,label:!1,tabIndex:0},React.createElement(StructuredListCell,{head:!0,noWrap:!1},"Name"))),React.createElement(StructuredListBody,null,items.map(function(item,indx){return React.createElement(StructuredListRow,{head:!1,label:!0,tabIndex:0},React.createElement(StructuredListCell,{head:!1,noWrap:!1,onClick:function(e){if(_this2.props.items&&_this2.props.updateStore({updates:{active_list_item:suffix?item.id+"@@"+suffix:item.id}}),_this2.props.widgetid&&_this2.props.widgetProps){var updatedWidgetProps=cloneDeep(_this2.props.widgetProps);updatedWidgetProps.SelectedItem=item.id,_this2.props.updateStore({updates:{widgetProps:updatedWidgetProps}})}}},item.tag?_this2.getItemByType(item):item.name))}))))}}]),_SrsSimpleList_}(React.Component),_export("SrsSimpleList",SrsSimpleList=function(props){return _SrsSimpleList_}),_export("SrsSimpleList",SrsSimpleList)}}}),System.register("component/studio/SrsTabs.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","deep-equal","@carbon/icons-react/lib/edit/16","lodash.get","lodash.clonedeep"],function(_export,_context8){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Tabs,Tab,TabsSkeleton,deepEqual,Edit16,cloneDeep,_SrsTabs_,SrsTabs,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Tabs=_carbonComponentsReact.Tabs,Tab=_carbonComponentsReact.Tab,TabsSkeleton=_carbonComponentsReact.TabsSkeleton},function(_deepEqual){deepEqual=_deepEqual.default},function(_carbonIconsReactLibEdit){Edit16=_carbonIconsReactLibEdit.default},function(_lodashGet){_lodashGet.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsTabs_=function(_React$Component){function _SrsTabs_(props){_classCallCheck(this,_SrsTabs_);var _this=_possibleConstructorReturn(this,(_SrsTabs_.__proto__||Object.getPrototypeOf(_SrsTabs_)).call(this,props));_this.state={template:null,reload:!1,activeTab:0},_this.openPage=_this.openPage.bind(_this),_this.loadPage=_this.loadPage.bind(_this),_this.updatePageParams=_this.updatePageParams.bind(_this),_this.evaluateDynamicParameters=_this.evaluateDynamicParameters.bind(_this);_this.props.widgetProps&&_this.props.widgetProps.ActiveTab&&_this.props.widgetProps.ActiveTab;return _this}return _inherits(_SrsTabs_,_React$Component),_createClass(_SrsTabs_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.updatePageParams();case 2:this.getTabs();case 3:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.props.widgetProps||deepEqual(prevProps.widgetProps,this.props.widgetProps)){_context2.next=9;break}if(prevProps.widgetProps.ActiveTab==this.props.widgetProps.ActiveTab){_context2.next=5;break}this.setState({activeTab:parseInt(this.props.widgetProps.ActiveTab,0)}),_context2.next=7;break;case 5:return _context2.next=7,this.updatePageParams();case 7:_context2.next=13;break;case 9:if(prevState.activeTab==this.state.activeTab){_context2.next=13;break}return _context2.next=12,this.updatePageParams();case 12:this.getTabs();case 13:case"end":return _context2.stop()}},_callee2,this)}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"updatePageParams",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var tabRelations,selectedTabRelation,pageId,pagesuffix,page,existingPageParams,pageProps,parentPageId,parentPage,parentPageParams,pageParamMapping,inputParams,newPageParams,pagesWithNewPageParams;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(_context3.prev=0,tabRelations=JSON.parse(this.props.widgetProps.tabs),tabRelations.length,!1,{},!((selectedTabRelation=tabRelations[this.state.activeTab])&&selectedTabRelation.tabInfo&&selectedTabRelation.tabInfo.page)){_context3.next=24;break}if(pageId=selectedTabRelation.tabInfo.page.page_id,!selectedTabRelation.tabInfo.page.params){_context3.next=24;break}if(pagesuffix=this.props.widgetid+this.state.activeTab,!(page=this.props.pages[pageId+pagesuffix]||{})){_context3.next=24;break}return(existingPageParams=page.pageParams?page.pageParams:null)||(pageProps={},Object.keys(page.props).map(function(pagePropName){"ModelName"==pagePropName&&"ModelScope"==pagePropName||(pageProps[pagePropName]=page.props[pagePropName])}),existingPageParams=pageProps),parentPageId=this.props.preview?this.props.pageid:this.props.activepage.id?this.props.activepage.id:this.props.activepage.page_id,parentPage=cloneDeep(this.props.pages[parentPageId]),parentPageParams=cloneDeep(parentPage.pageParams),(pageParamMapping={})[pageId]=cloneDeep(selectedTabRelation.tabInfo.page.params),inputParams={pageId:pageId,pageParamMapping:pageParamMapping,parentPageParams:parentPageParams,parentPage:parentPage},_context3.next=22,$script.runscript("mmf.getPageParameters",inputParams);case 22:newPageParams=_context3.sent,_.isEqual(newPageParams,existingPageParams)||((pagesWithNewPageParams=cloneDeep(this.props.pages))[pageId+pagesuffix]=pagesWithNewPageParams[pageId+pagesuffix]||{},pagesWithNewPageParams[pageId+pagesuffix].pagereload=!pagesWithNewPageParams[pageId+pagesuffix].pagereload,pagesWithNewPageParams[pageId+pagesuffix].pageParams=newPageParams,this.props.updateStore({updates:{pages:pagesWithNewPageParams}}));case 24:_context3.next=28;break;case 26:_context3.prev=26,_context3.t0=_context3.catch(0);case 28:return _context3.abrupt("return",!1);case 29:case"end":return _context3.stop()}},_callee3,this,[[0,26]])}));return function(){return _ref3.apply(this,arguments)}}()},{key:"openPage",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(page,pageSuffix,parentPage){var pageId,payload,tobeActivePage,pageExists,activePage;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(parentPage?parentPage.id?parentPage.id:parentPage.page_id:"",pageId=page.page_id+pageSuffix,payload={active_page_id:pageId},tobeActivePage=this.props.pages[pageId],pageExists=tobeActivePage&&tobeActivePage.slots&&tobeActivePage.widgets,activePage=void 0,!pageExists){_context4.next=10;break}activePage=cloneDeep(tobeActivePage),_context4.next=13;break;case 10:return _context4.next=12,this.loadPage(page,pageSuffix,parentPage);case 12:activePage=_context4.sent;case 13:activePage.is_open=!0,payload.activepage=activePage,payload.pages=this.props.pages?this.props.pages:{},payload.pages[pageId]=activePage,payload.active_widget_id="",this.props.updateStore({updates:payload});case 19:case"end":return _context4.stop()}},_callee4,this)}));return function(_x3,_x4,_x5){return _ref4.apply(this,arguments)}}()},{key:"loadPage",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(page,pageSuffix,parentPage,tabName){var pageId,queriedPage,pageParamMapping,pageParams,pageProps,allowedPagePropNames,tobeActivePage,slots,widgets,slotsAndWidgets,layoutCodes,defaultLayout,_this2=this;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return pageId=page.page_id,!this.props.preview&&parentPage?parentPage.id?parentPage.id:parentPage.page_id:this.props.pageid,!0,_context5.next=5,$qry.run("mmf.getSlidePropsById",{uid:pageId},"data.slide",!1,!!this.props.preview);case 5:return queriedPage=_context5.sent,pageParamMapping=page.params,pageParams={},pageProps={},"CreateView"!=queriedPage.Type&&"EditView"!=queriedPage.Type||((allowedPagePropNames=Object.keys(queriedPage.props).filter(function(pagePropName){return"ModelName"!=pagePropName&&"ModelScope"!=pagePropName}))&&allowedPagePropNames.map(function(allowedPropName){return pageProps[allowedPropName]=queriedPage.props[allowedPropName]}),pageProps.recordid="recordid"),pageProps&&Object.keys(pageProps).map(function(propName){if(pageParamMapping&&pageParamMapping[propName])switch(pageParamMapping[propName].type){case"widget_props":var widgetName2Map=pageParamMapping[propName].widgetName,widgetPropName2Map=pageParamMapping[propName].widgetPropName?pageParamMapping[propName].widgetPropName:"value";widgetName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){(parentPageWidgetId==widgetName2Map||parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.Name==widgetName2Map)&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props[widgetPropName2Map])});break;case"page_field":var fieldName2Map=pageParamMapping[propName].pageFieldId;fieldName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.FieldName=="@@["+fieldName2Map+"]"&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.value)});break;case"page_param":parentPage&&parentPage.pageParams&&(pageParamMapping[propName].pageParamId?pageParams[propName]=parentPage.pageParams[pageParamMapping[propName].pageParamId]:pageParams[propName]=parentPage.pageParams[propName]);break;default:parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(pageParams[propName]=parentPage.pageParams[propName])}else parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(pageParams[propName]=parentPage.pageParams[propName])}),tobeActivePage={id:pageId,name:queriedPage.Name,scope:queriedPage.Scope,path:queriedPage.Path,pageType:queriedPage.Type,model:queriedPage.props.ModelName,modelscope:queriedPage.props.ModelScope,props:queriedPage.props,pageParams:pageParams},slots={},widgets={},_context5.next=16,$qry.run("pd.getExistingSlotsbySlideId",{Slide:pageId});case 16:return(slotsAndWidgets=_context5.sent)&&slotsAndWidgets.length>0&&slotsAndWidgets.forEach(function(slotWidget){var slot=slotWidget.node;if(slot&&slot.uid){var slotData={};slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.width=slot.width||0,slotData.height=slot.height,slotData.minwidth=slot.minwidth,slotData.minheight=slot.minheight,slotData.maxwidth=slot.maxwidth,slotData.maxheight=slot.maxheight,slotData.resize=slot.resize,slotData.move=slot.move,slotData.Slide=slot.Slide,slotData.Widget=slot.Widget,slotData.Layout=slot.Layout,slots[slot.Layout||"default"]=slots[slot.Layout||"default"]||{},slots[slot.Layout||"default"][slot.uid]=slotData;var widgetData=slot.slotWidget;if(widgetData&&widgetData.uid){var widget={};widget.id=widgetData.uid,widget.Component=widgetData.Component,widget.name=widgetData.component.Name;var prevWidgetTree={};try{prevWidgetTree=_this2.props.currrentWidget.widgettree?"string"==typeof _this2.props.currrentWidget.widgettree?JSON.parse(_this2.props.currrentWidget.widgettree):_this2.props.currrentWidget.widgettree:prevWidgetTree}catch(err){}var widgetTree={};widgetTree[_this2.props.widgetid+"@@"+_this2.props.pageid+_this2.props.pagesuffix+"@@"+tabName]=prevWidgetTree,widget.widgettree=widgetTree;var widgetProps=widgetData.widgetproperties;if(widgetProps&&widgetProps.edges&&widgetProps.edges.length>0){var props={};widgetProps.edges.forEach(function(propNode){var prop=propNode.node;props[prop.name]=prop.value}),widget.props=props}var componentProps=widgetData.component.Props,widgetPropNames=widget.props?Object.keys(widget.props):[];componentProps&&Object.keys(componentProps).length>0&&Object.keys(componentProps).map(function(componentPropName){widgetPropNames&&-1==widgetPropNames.indexOf(componentPropName)&&(widget.props=widget.props||{},widget.props[componentPropName]=componentProps[componentPropName])}),widgets[slot.Layout||"default"]=widgets[slot.Layout||"default"]||{},widgets[slot.Layout||"default"][widgetData.uid]=widget}}}),layoutCodes=Object.keys(slots),defaultLayout=layoutCodes?layoutCodes.default?"default":layoutCodes[0]:"default",tobeActivePage.layouts={slots:slots,widgets:widgets},tobeActivePage.slots=slots[defaultLayout],tobeActivePage.widgets=widgets[defaultLayout],_context5.abrupt("return",tobeActivePage);case 24:case"end":return _context5.stop()}},_callee5,this)}));return function(_x6,_x7,_x8,_x9){return _ref5.apply(this,arguments)}}()},{key:"evaluateDynamicParameters",value:function(dynamicParamMapping,parentPage){var dynamicParams={};return dynamicParamMapping&&Object.keys(dynamicParamMapping).length>0&&Object.keys(dynamicParamMapping).map(function(propName){switch(dynamicParamMapping[propName].type){case"widget_props":var widgetName2Map=dynamicParamMapping[propName].widgetName,widgetPropName2Map=dynamicParamMapping[propName].widgetPropName?dynamicParamMapping[propName].widgetPropName:"value";widgetName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){(parentPageWidgetId==widgetName2Map||parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.Name==widgetName2Map)&&(dynamicParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props[widgetPropName2Map])});break;case"page_field":var fieldName2Map=dynamicParamMapping[propName].pageFieldId;fieldName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.FieldName=="@@["+fieldName2Map+"]"&&(dynamicParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.value)});break;case"page_param":parentPage&&parentPage.pageParams&&(dynamicParamMapping[propName].pageParamId?dynamicParams[propName]=parentPage.pageParams[dynamicParamMapping[propName].pageParamId]:dynamicParams[propName]=parentPage.pageParams[propName]);break;default:parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(dynamicParams[propName]=parentPage.pageParams[propName])}}),dynamicParams}},{key:"getTabs",value:function(){var _ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(){var self,template,widgetProps,isString,parentPageId,tabs,tabsToRender,tabLabel,_loop,_tabInd,_this3=this;return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return self=this,template=null,_context7.next=4,$ele.registerElement("PageDesignerPreview","studio","React");case 4:if(_context7.sent,widgetProps=this.props.widgetProps||{},isString="string"==typeof widgetProps.tabs,parentPageId=this.props.preview?this.props.pageid:this.props.activepage.id?this.props.activepage.id:this.props.activepage.page_id,tabs=[],0!=(tabs=isString?widgetProps.tabs?JSON.parse(widgetProps.tabs):[]:widgetProps.tabs||[]).length){_context7.next=14;break}template=React.createElement(Tabs,{className:"tab-content",selected:this.state.activeTab,tabContentClassName:"tab-content"},React.createElement(Tab,{disabled:!1,label:"Tab0"},React.createElement("div",{className:"some-content",style:{paddingLeft:16}},"Content for first tab goes here."))),_context7.next=24;break;case 14:tabsToRender=[],tabLabel=function(tabName,tabIndx,tabType,props){return React.createElement("span",null,decodeURIComponent(tabName)||"Tab"+tabIndx,"page"!=tabType||self.props.preview?React.createElement("div",null):React.createElement(Edit16,{style:{marginLeft:5},onClick:function(){var pageSuffix=_this3.props.widgetid+tabInd;_this3.openPage(props.page,pageSuffix,self.props.activepage)}}))},_loop=_regeneratorRuntime.mark(function _loop(_tabInd){var tab,tabType,tabName,tabContent,listTable,listFields,listFilter,pageSize,pageId,pageSuffix,currentPage,pages,prevWidgetTree,widgetTree,relation,dynamicParams,recordid,createViewId,editViewId,createView,createpath,editView,editpath;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:tab=tabs[_tabInd],tabType=tab.tabInfo.type,tabName=tab.tabInfo.name,tabContent=React.createElement("div",{className:"some-content",style:{paddingLeft:16}}," Content for  tab goes here."),listTable=void 0,listFields=[],listFilter={},pageSize=10,_context6.t0=tabType,_context6.next="page"===_context6.t0?8:"simple_list"===_context6.t0?24:"related_list"===_context6.t0?31:57;break;case 8:if(pageId=tab.tabInfo.page.page_id,pageSuffix=_this3.props.widgetid+_tabInd,currentPage=_this3.props.pages[pageId+pageSuffix]?_this3.props.pages[pageId+pageSuffix]:null){_context6.next=18;break}return _context6.next=14,_this3.loadPage(tab.tabInfo.page,pageSuffix,_this3.props.pages[parentPageId],tab.tabInfo.name);case 14:currentPage=_context6.sent,(pages=cloneDeep(_this3.props.pages))[pageId+pageSuffix]=currentPage,_this3.props.updateStore({updates:{pages:pages}});case 18:prevWidgetTree={};try{prevWidgetTree=_this3.props.currrentWidget.widgettree?"string"==typeof _this3.props.currrentWidget.widgettree?JSON.parse(_this3.props.currrentWidget.widgettree):_this3.props.currrentWidget.widgettree:prevWidgetTree}catch(err){}return(widgetTree={})[_this3.props.widgetid+"@@"+_this3.props.pageid+"@@"+tabName]=prevWidgetTree,tabContent=React.createElement("page-designer-preview",{preview:_this3.props.preview,widgetid:_this3.props.widgetid,widgettree:JSON.stringify(widgetTree),pageid:_this3.props.pageid,pagesuffix:pageSuffix,previewpageid:pageId,responsive:"true"}),_context6.abrupt("break",57);case 24:return listTable=tab.tabInfo.list.table,listFields=[],tab.tabInfo.list.fields&&tab.tabInfo.list.fields.length>0&&tab.tabInfo.list.fields.map(function(listField){listFields.push(listField.text)}),listFilter=tab.tabInfo.list.filter,pageSize=tab.tabInfo.list.pagesize,tabContent=React.createElement("list-layout",{table:listTable,fields:listFields,filter:listFilter,pagesize:pageSize,editpath:editpath,createpath:createpath}),_context6.abrupt("break",57);case 31:if(listTable=tab.tabInfo.list.table,listFields=[],tab.tabInfo.list.fields&&tab.tabInfo.list.fields.length>0&&tab.tabInfo.list.fields.map(function(listField){listFields.push(listField.text)}),listFilter=tab.tabInfo.list.filter,pageSize=tab.tabInfo.list.pagesize,relation=tab.tabInfo.list.relation,dynamicParams=_this3.evaluateDynamicParameters(tab.tabInfo.list.params,_this3.props.pages[parentPageId]),recordid=dynamicParams&&dynamicParams.recordid?dynamicParams.recordid:"",createViewId=tab.tabInfo.list.createview,editViewId=tab.tabInfo.list.editview,_context6.t1=createViewId,!_context6.t1){_context6.next=46;break}return _context6.next=45,$qry.run("mmf.getSlideById",{pageId:createViewId},"data.MetaSlide.MetaSlideFindOne",!1,!!_this3.props.preview);case 45:_context6.t1=_context6.sent;case 46:if(createView=_context6.t1,createpath=createView?createView.Path:"",_context6.t2=editViewId,!_context6.t2){_context6.next=53;break}return _context6.next=52,$qry.run("mmf.getSlideById",{pageId:editViewId},"data.MetaSlide.MetaSlideFindOne",!1,!!_this3.props.preview);case 52:_context6.t2=_context6.sent;case 53:return editView=_context6.t2,editpath=editView?editView.Path:"",tabContent=React.createElement("list-layout",{table:listTable,fields:listFields,filter:listFilter,pagesize:pageSize,relation:relation,recordid:recordid,editpath:editpath,createpath:createpath}),_context6.abrupt("break",57);case 57:tabsToRender.push(React.createElement(Tab,{label:tabLabel(tab.tabInfo.name,_tabInd,tabType,{page:tab.tabInfo.page})},tabContent));case 58:case"end":return _context6.stop()}},_loop,_this3)}),_tabInd=0;case 18:if(!(_tabInd<tabs.length)){_context7.next=23;break}return _context7.delegateYield(_loop(_tabInd),"t0",20);case 20:_tabInd++,_context7.next=18;break;case 23:template=React.createElement(Tabs,{selected:this.state.activeTab,onSelectionChange:function(val){_this3.state.activeTab!=val&&_this3.setState({activeTab:val})},className:"tab-content",tabContentClassName:"tab-content"},tabsToRender.map(function(tab){return tab}));case 24:this.setState({template:template});case 25:case"end":return _context7.stop()}},_callee6,this)}));return function(){return _ref6.apply(this,arguments)}}()},{key:"render",value:function(){var tabsTemplate=this.state.template?this.state.template:React.createElement(TabsSkeleton,null);return React.createElement("div",{className:!this.props.widgetProps||0!=this.props.widgetProps.ShowHeader&&"false"!=this.props.widgetProps.ShowHeader?"srs-prem-container":"autotabbing"},tabsTemplate)}}]),_SrsTabs_}(React.Component),_export("SrsTabs",SrsTabs=function(props){return _SrsTabs_}),_export("SrsTabs",SrsTabs),_export("default",SrsTabs),_export("states",states=[{KeyName:"activepage",AccessPath:"pages.${active_page_id}",DefaultValue:'{"pages": {"${active_page_id}": {}}}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id":""}'},{KeyName:"currrentWidget",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {}}}}}'},{KeyName:"pages",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsTabs/Definition.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","deep-equal","@carbon/icons-react/lib/edit/16","lodash.get","lodash.clonedeep"],function(_export,_context8){"use strict";var _regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Tabs,Tab,TabsSkeleton,deepEqual,Edit16,cloneDeep,_SrsTabs_,SrsTabs;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Tabs=_carbonComponentsReact.Tabs,Tab=_carbonComponentsReact.Tab,TabsSkeleton=_carbonComponentsReact.TabsSkeleton},function(_deepEqual){deepEqual=_deepEqual.default},function(_carbonIconsReactLibEdit){Edit16=_carbonIconsReactLibEdit.default},function(_lodashGet){_lodashGet.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsTabs_=function(_React$Component){function _SrsTabs_(props){_classCallCheck(this,_SrsTabs_);var _this=_possibleConstructorReturn(this,(_SrsTabs_.__proto__||Object.getPrototypeOf(_SrsTabs_)).call(this,props));_this.state={template:null,reload:!1,activeTab:0},_this.openPage=_this.openPage.bind(_this),_this.loadPage=_this.loadPage.bind(_this),_this.updatePageParams=_this.updatePageParams.bind(_this),_this.evaluateDynamicParameters=_this.evaluateDynamicParameters.bind(_this);_this.props.widgetProps&&_this.props.widgetProps.ActiveTab&&_this.props.widgetProps.ActiveTab;return _this}return _inherits(_SrsTabs_,_React$Component),_createClass(_SrsTabs_,[{key:"componentDidMount",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,this.updatePageParams();case 2:this.getTabs();case 3:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(prevProps,prevState){return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!this.props.widgetProps||deepEqual(prevProps.widgetProps,this.props.widgetProps)){_context2.next=9;break}if(prevProps.widgetProps.ActiveTab==this.props.widgetProps.ActiveTab){_context2.next=5;break}this.setState({activeTab:parseInt(this.props.widgetProps.ActiveTab,0)}),_context2.next=7;break;case 5:return _context2.next=7,this.updatePageParams();case 7:_context2.next=13;break;case 9:if(prevState.activeTab==this.state.activeTab){_context2.next=13;break}return _context2.next=12,this.updatePageParams();case 12:this.getTabs();case 13:case"end":return _context2.stop()}},_callee2,this)}));return function(_x,_x2){return _ref2.apply(this,arguments)}}()},{key:"updatePageParams",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var tabRelations,selectedTabRelation,pageId,pagesuffix,page,existingPageParams,pageProps,parentPageId,parentPage,parentPageParams,pageParamMapping,inputParams,newPageParams,pagesWithNewPageParams;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(_context3.prev=0,tabRelations=JSON.parse(this.props.widgetProps.tabs),tabRelations.length,!1,{},!((selectedTabRelation=tabRelations[this.state.activeTab])&&selectedTabRelation.tabInfo&&selectedTabRelation.tabInfo.page)){_context3.next=24;break}if(pageId=selectedTabRelation.tabInfo.page.page_id,!selectedTabRelation.tabInfo.page.params){_context3.next=24;break}if(pagesuffix=this.props.widgetid+this.state.activeTab,!(page=this.props.pages[pageId+pagesuffix]||{})){_context3.next=24;break}return(existingPageParams=page.pageParams?page.pageParams:null)||(pageProps={},Object.keys(page.props).map(function(pagePropName){"ModelName"==pagePropName&&"ModelScope"==pagePropName||(pageProps[pagePropName]=page.props[pagePropName])}),existingPageParams=pageProps),parentPageId=this.props.preview?this.props.pageid:this.props.activepage.id?this.props.activepage.id:this.props.activepage.page_id,parentPage=cloneDeep(this.props.pages[parentPageId]),parentPageParams=cloneDeep(parentPage.pageParams),(pageParamMapping={})[pageId]=cloneDeep(selectedTabRelation.tabInfo.page.params),inputParams={pageId:pageId,pageParamMapping:pageParamMapping,parentPageParams:parentPageParams,parentPage:parentPage},_context3.next=22,$script.runscript("mmf.getPageParameters",inputParams);case 22:newPageParams=_context3.sent,_.isEqual(newPageParams,existingPageParams)||((pagesWithNewPageParams=cloneDeep(this.props.pages))[pageId+pagesuffix]=pagesWithNewPageParams[pageId+pagesuffix]||{},pagesWithNewPageParams[pageId+pagesuffix].pagereload=!pagesWithNewPageParams[pageId+pagesuffix].pagereload,pagesWithNewPageParams[pageId+pagesuffix].pageParams=newPageParams,this.props.updateStore({updates:{pages:pagesWithNewPageParams}}));case 24:_context3.next=28;break;case 26:_context3.prev=26,_context3.t0=_context3.catch(0);case 28:return _context3.abrupt("return",!1);case 29:case"end":return _context3.stop()}},_callee3,this,[[0,26]])}));return function(){return _ref3.apply(this,arguments)}}()},{key:"openPage",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(page,pageSuffix,parentPage){var pageId,payload,tobeActivePage,pageExists,activePage;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(parentPage?parentPage.id?parentPage.id:parentPage.page_id:"",pageId=page.page_id+pageSuffix,payload={active_page_id:pageId},tobeActivePage=this.props.pages[pageId],pageExists=tobeActivePage&&tobeActivePage.slots&&tobeActivePage.widgets,activePage=void 0,!pageExists){_context4.next=10;break}activePage=cloneDeep(tobeActivePage),_context4.next=13;break;case 10:return _context4.next=12,this.loadPage(page,pageSuffix,parentPage);case 12:activePage=_context4.sent;case 13:activePage.is_open=!0,payload.activepage=activePage,payload.pages=this.props.pages?this.props.pages:{},payload.pages[pageId]=activePage,payload.active_widget_id="",this.props.updateStore({updates:payload});case 19:case"end":return _context4.stop()}},_callee4,this)}));return function(_x3,_x4,_x5){return _ref4.apply(this,arguments)}}()},{key:"loadPage",value:function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(page,pageSuffix,parentPage,tabName){var pageId,queriedPage,pageParamMapping,pageParams,pageProps,allowedPagePropNames,tobeActivePage,slots,widgets,slotsAndWidgets,layoutCodes,defaultLayout,_this2=this;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return pageId=page.page_id,!this.props.preview&&parentPage?parentPage.id?parentPage.id:parentPage.page_id:this.props.pageid,!0,_context5.next=5,$qry.run("mmf.getSlidePropsById",{uid:pageId},"data.slide",!1,!!this.props.preview);case 5:return queriedPage=_context5.sent,pageParamMapping=page.params,pageParams={},pageProps={},"CreateView"!=queriedPage.Type&&"EditView"!=queriedPage.Type||((allowedPagePropNames=Object.keys(queriedPage.props).filter(function(pagePropName){return"ModelName"!=pagePropName&&"ModelScope"!=pagePropName}))&&allowedPagePropNames.map(function(allowedPropName){return pageProps[allowedPropName]=queriedPage.props[allowedPropName]}),pageProps.recordid="recordid"),pageProps&&Object.keys(pageProps).map(function(propName){if(pageParamMapping&&pageParamMapping[propName])switch(pageParamMapping[propName].type){case"widget_props":var widgetName2Map=pageParamMapping[propName].widgetName,widgetPropName2Map=pageParamMapping[propName].widgetPropName?pageParamMapping[propName].widgetPropName:"value";widgetName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){(parentPageWidgetId==widgetName2Map||parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.Name==widgetName2Map)&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props[widgetPropName2Map])});break;case"page_field":var fieldName2Map=pageParamMapping[propName].pageFieldId;fieldName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.FieldName=="@@["+fieldName2Map+"]"&&(pageParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.value)});break;case"page_param":parentPage&&parentPage.pageParams&&(pageParamMapping[propName].pageParamId?pageParams[propName]=parentPage.pageParams[pageParamMapping[propName].pageParamId]:pageParams[propName]=parentPage.pageParams[propName]);break;default:parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(pageParams[propName]=parentPage.pageParams[propName])}else parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(pageParams[propName]=parentPage.pageParams[propName])}),tobeActivePage={id:pageId,name:queriedPage.Name,scope:queriedPage.Scope,path:queriedPage.Path,pageType:queriedPage.Type,model:queriedPage.props.ModelName,modelscope:queriedPage.props.ModelScope,props:queriedPage.props,pageParams:pageParams},slots={},widgets={},_context5.next=16,$qry.run("pd.getExistingSlotsbySlideId",{Slide:pageId});case 16:return(slotsAndWidgets=_context5.sent)&&slotsAndWidgets.length>0&&slotsAndWidgets.forEach(function(slotWidget){var slot=slotWidget.node;if(slot&&slot.uid){var slotData={};slotData.xposition=slot.xposition,slotData.yposition=slot.yposition,slotData.width=slot.width||0,slotData.height=slot.height,slotData.minwidth=slot.minwidth,slotData.minheight=slot.minheight,slotData.maxwidth=slot.maxwidth,slotData.maxheight=slot.maxheight,slotData.resize=slot.resize,slotData.move=slot.move,slotData.Slide=slot.Slide,slotData.Widget=slot.Widget,slotData.Layout=slot.Layout,slots[slot.Layout||"default"]=slots[slot.Layout||"default"]||{},slots[slot.Layout||"default"][slot.uid]=slotData;var widgetData=slot.slotWidget;if(widgetData&&widgetData.uid){var widget={};widget.id=widgetData.uid,widget.Component=widgetData.Component,widget.name=widgetData.component.Name;var prevWidgetTree={};try{prevWidgetTree=_this2.props.currrentWidget.widgettree?"string"==typeof _this2.props.currrentWidget.widgettree?JSON.parse(_this2.props.currrentWidget.widgettree):_this2.props.currrentWidget.widgettree:prevWidgetTree}catch(err){}var widgetTree={};widgetTree[_this2.props.widgetid+"@@"+_this2.props.pageid+_this2.props.pagesuffix+"@@"+tabName]=prevWidgetTree,widget.widgettree=widgetTree;var widgetProps=widgetData.widgetproperties;if(widgetProps&&widgetProps.edges&&widgetProps.edges.length>0){var props={};widgetProps.edges.forEach(function(propNode){var prop=propNode.node;props[prop.name]=prop.value}),widget.props=props}var componentProps=widgetData.component.Props,widgetPropNames=widget.props?Object.keys(widget.props):[];componentProps&&Object.keys(componentProps).length>0&&Object.keys(componentProps).map(function(componentPropName){widgetPropNames&&-1==widgetPropNames.indexOf(componentPropName)&&(widget.props=widget.props||{},widget.props[componentPropName]=componentProps[componentPropName])}),widgets[slot.Layout||"default"]=widgets[slot.Layout||"default"]||{},widgets[slot.Layout||"default"][widgetData.uid]=widget}}}),layoutCodes=Object.keys(slots),defaultLayout=layoutCodes?layoutCodes.default?"default":layoutCodes[0]:"default",tobeActivePage.layouts={slots:slots,widgets:widgets},tobeActivePage.slots=slots[defaultLayout],tobeActivePage.widgets=widgets[defaultLayout],_context5.abrupt("return",tobeActivePage);case 24:case"end":return _context5.stop()}},_callee5,this)}));return function(_x6,_x7,_x8,_x9){return _ref5.apply(this,arguments)}}()},{key:"evaluateDynamicParameters",value:function(dynamicParamMapping,parentPage){var dynamicParams={};return dynamicParamMapping&&Object.keys(dynamicParamMapping).length>0&&Object.keys(dynamicParamMapping).map(function(propName){switch(dynamicParamMapping[propName].type){case"widget_props":var widgetName2Map=dynamicParamMapping[propName].widgetName,widgetPropName2Map=dynamicParamMapping[propName].widgetPropName?dynamicParamMapping[propName].widgetPropName:"value";widgetName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){(parentPageWidgetId==widgetName2Map||parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.Name==widgetName2Map)&&(dynamicParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props[widgetPropName2Map])});break;case"page_field":var fieldName2Map=dynamicParamMapping[propName].pageFieldId;fieldName2Map&&parentPage.widgets&&Object.keys(parentPage.widgets).map(function(parentPageWidgetId){parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.FieldName=="@@["+fieldName2Map+"]"&&(dynamicParams[propName]=parentPage.widgets[parentPageWidgetId]&&parentPage.widgets[parentPageWidgetId].props&&parentPage.widgets[parentPageWidgetId].props.value)});break;case"page_param":parentPage&&parentPage.pageParams&&(dynamicParamMapping[propName].pageParamId?dynamicParams[propName]=parentPage.pageParams[dynamicParamMapping[propName].pageParamId]:dynamicParams[propName]=parentPage.pageParams[propName]);break;default:parentPage&&parentPage.pageParams&&parentPage.pageParams[propName]&&(dynamicParams[propName]=parentPage.pageParams[propName])}}),dynamicParams}},{key:"getTabs",value:function(){var _ref6=_asyncToGenerator(_regeneratorRuntime.mark(function _callee6(){var self,template,widgetProps,isString,parentPageId,tabs,tabsToRender,tabLabel,_loop,_tabInd,_this3=this;return _regeneratorRuntime.wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return self=this,template=null,_context7.next=4,$ele.registerElement("PageDesignerPreview","studio","React");case 4:if(_context7.sent,widgetProps=this.props.widgetProps||{},isString="string"==typeof widgetProps.tabs,parentPageId=this.props.preview?this.props.pageid:this.props.activepage.id?this.props.activepage.id:this.props.activepage.page_id,tabs=[],0!=(tabs=isString?widgetProps.tabs?JSON.parse(widgetProps.tabs):[]:widgetProps.tabs||[]).length){_context7.next=14;break}template=React.createElement(Tabs,{className:"tab-content",selected:this.state.activeTab,tabContentClassName:"tab-content"},React.createElement(Tab,{disabled:!1,label:"Tab0"},React.createElement("div",{className:"some-content",style:{paddingLeft:16}},"Content for first tab goes here."))),_context7.next=24;break;case 14:tabsToRender=[],tabLabel=function(tabName,tabIndx,tabType,props){return React.createElement("span",null,decodeURIComponent(tabName)||"Tab"+tabIndx,"page"!=tabType||self.props.preview?React.createElement("div",null):React.createElement(Edit16,{style:{marginLeft:5},onClick:function(){var pageSuffix=_this3.props.widgetid+tabInd;_this3.openPage(props.page,pageSuffix,self.props.activepage)}}))},_loop=_regeneratorRuntime.mark(function _loop(_tabInd){var tab,tabType,tabName,tabContent,listTable,listFields,listFilter,pageSize,pageId,pageSuffix,currentPage,pages,prevWidgetTree,widgetTree,relation,dynamicParams,recordid,createViewId,editViewId,createView,createpath,editView,editpath;return _regeneratorRuntime.wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:tab=tabs[_tabInd],tabType=tab.tabInfo.type,tabName=tab.tabInfo.name,tabContent=React.createElement("div",{className:"some-content",style:{paddingLeft:16}}," Content for  tab goes here."),listTable=void 0,listFields=[],listFilter={},pageSize=10,_context6.t0=tabType,_context6.next="page"===_context6.t0?8:"simple_list"===_context6.t0?24:"related_list"===_context6.t0?31:57;break;case 8:if(pageId=tab.tabInfo.page.page_id,pageSuffix=_this3.props.widgetid+_tabInd,currentPage=_this3.props.pages[pageId+pageSuffix]?_this3.props.pages[pageId+pageSuffix]:null){_context6.next=18;break}return _context6.next=14,_this3.loadPage(tab.tabInfo.page,pageSuffix,_this3.props.pages[parentPageId],tab.tabInfo.name);case 14:currentPage=_context6.sent,(pages=cloneDeep(_this3.props.pages))[pageId+pageSuffix]=currentPage,_this3.props.updateStore({updates:{pages:pages}});case 18:prevWidgetTree={};try{prevWidgetTree=_this3.props.currrentWidget.widgettree?"string"==typeof _this3.props.currrentWidget.widgettree?JSON.parse(_this3.props.currrentWidget.widgettree):_this3.props.currrentWidget.widgettree:prevWidgetTree}catch(err){}return(widgetTree={})[_this3.props.widgetid+"@@"+_this3.props.pageid+"@@"+tabName]=prevWidgetTree,tabContent=React.createElement("page-designer-preview",{preview:_this3.props.preview,widgetid:_this3.props.widgetid,widgettree:JSON.stringify(widgetTree),pageid:_this3.props.pageid,pagesuffix:pageSuffix,previewpageid:pageId,responsive:"true"}),_context6.abrupt("break",57);case 24:return listTable=tab.tabInfo.list.table,listFields=[],tab.tabInfo.list.fields&&tab.tabInfo.list.fields.length>0&&tab.tabInfo.list.fields.map(function(listField){listFields.push(listField.text)}),listFilter=tab.tabInfo.list.filter,pageSize=tab.tabInfo.list.pagesize,tabContent=React.createElement("list-layout",{table:listTable,fields:listFields,filter:listFilter,pagesize:pageSize,editpath:editpath,createpath:createpath}),_context6.abrupt("break",57);case 31:if(listTable=tab.tabInfo.list.table,listFields=[],tab.tabInfo.list.fields&&tab.tabInfo.list.fields.length>0&&tab.tabInfo.list.fields.map(function(listField){listFields.push(listField.text)}),listFilter=tab.tabInfo.list.filter,pageSize=tab.tabInfo.list.pagesize,relation=tab.tabInfo.list.relation,dynamicParams=_this3.evaluateDynamicParameters(tab.tabInfo.list.params,_this3.props.pages[parentPageId]),recordid=dynamicParams&&dynamicParams.recordid?dynamicParams.recordid:"",createViewId=tab.tabInfo.list.createview,editViewId=tab.tabInfo.list.editview,_context6.t1=createViewId,!_context6.t1){_context6.next=46;break}return _context6.next=45,$qry.run("mmf.getSlideById",{pageId:createViewId},"data.MetaSlide.MetaSlideFindOne",!1,!!_this3.props.preview);case 45:_context6.t1=_context6.sent;case 46:if(createView=_context6.t1,createpath=createView?createView.Path:"",_context6.t2=editViewId,!_context6.t2){_context6.next=53;break}return _context6.next=52,$qry.run("mmf.getSlideById",{pageId:editViewId},"data.MetaSlide.MetaSlideFindOne",!1,!!_this3.props.preview);case 52:_context6.t2=_context6.sent;case 53:return editView=_context6.t2,editpath=editView?editView.Path:"",tabContent=React.createElement("list-layout",{table:listTable,fields:listFields,filter:listFilter,pagesize:pageSize,relation:relation,recordid:recordid,editpath:editpath,createpath:createpath}),_context6.abrupt("break",57);case 57:tabsToRender.push(React.createElement(Tab,{label:tabLabel(tab.tabInfo.name,_tabInd,tabType,{page:tab.tabInfo.page})},tabContent));case 58:case"end":return _context6.stop()}},_loop,_this3)}),_tabInd=0;case 18:if(!(_tabInd<tabs.length)){_context7.next=23;break}return _context7.delegateYield(_loop(_tabInd),"t0",20);case 20:_tabInd++,_context7.next=18;break;case 23:template=React.createElement(Tabs,{selected:this.state.activeTab,onSelectionChange:function(val){_this3.state.activeTab!=val&&_this3.setState({activeTab:val})},className:"tab-content",tabContentClassName:"tab-content"},tabsToRender.map(function(tab){return tab}));case 24:this.setState({template:template});case 25:case"end":return _context7.stop()}},_callee6,this)}));return function(){return _ref6.apply(this,arguments)}}()},{key:"render",value:function(){var tabsTemplate=this.state.template?this.state.template:React.createElement(TabsSkeleton,null);return React.createElement("div",{className:!this.props.widgetProps||0!=this.props.widgetProps.ShowHeader&&"false"!=this.props.widgetProps.ShowHeader?"srs-prem-container":"autotabbing"},tabsTemplate)}}]),_SrsTabs_}(React.Component),_export("SrsTabs",SrsTabs=function(props){return _SrsTabs_}),_export("SrsTabs",SrsTabs)}}}),System.register("component/studio/SrsTextArea.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextArea,_SrsTextArea_,SrsTextArea,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextArea=_carbonComponentsReact.TextArea}],execute:function(){_SrsTextArea_=function(_React$Component){function _SrsTextArea_(props){_classCallCheck(this,_SrsTextArea_);var _this=_possibleConstructorReturn(this,(_SrsTextArea_.__proto__||Object.getPrototypeOf(_SrsTextArea_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsTextArea_,_React$Component),_createClass(_SrsTextArea_,[{key:"handleChange",value:function(e){var updatedProps=this.props.widgetProps;updatedProps.value=e.target.value,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"render",value:function(){var fieldValue=this.props.widgetProps?this.props.widgetProps.value||this.props.widgetProps.DefaultValue:this.props.value||this.props.defaultvalue,embeddedStyles=null;return this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles)),React.createElement("div",{className:"srs-prem-container"},embeddedStyles,React.createElement(TextArea,{style:this.props.widgetProps?this.props.widgetProps.styles:this.props.styles?this.props.styles:{},labelText:this.props.widgetProps?this.props.widgetProps.Label:this.props.label||"Description",placeholder:this.props.widgetProps?this.props.widgetProps.Placeholder:this.props.placeholder||"Enter Value...",value:fieldValue,disabled:!!this.props.widgetProps&&this.props.widgetProps.ReadOnly,invalid:!!this.props.widgetProps&&this.props.widgetProps.invalid,invalidText:this.props.widgetProps?this.props.widgetProps.InvalidText:"",helperText:this.props.widgetProps?this.props.widgetProps.helperText:"",onChange:this.handleChange}))}}]),_SrsTextArea_}(React.Component),_export("SrsTextArea",SrsTextArea=function(props){return _SrsTextArea_}),_export("SrsTextArea",SrsTextArea),_export("default",SrsTextArea),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsTextArea/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextArea,_SrsTextArea_,SrsTextArea;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextArea=_carbonComponentsReact.TextArea}],execute:function(){_SrsTextArea_=function(_React$Component){function _SrsTextArea_(props){_classCallCheck(this,_SrsTextArea_);var _this=_possibleConstructorReturn(this,(_SrsTextArea_.__proto__||Object.getPrototypeOf(_SrsTextArea_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsTextArea_,_React$Component),_createClass(_SrsTextArea_,[{key:"handleChange",value:function(e){var updatedProps=this.props.widgetProps;updatedProps.value=e.target.value,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"render",value:function(){var fieldValue=this.props.widgetProps?this.props.widgetProps.value||this.props.widgetProps.DefaultValue:this.props.value||this.props.defaultvalue,embeddedStyles=null;return this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles)),React.createElement("div",{className:"srs-prem-container"},embeddedStyles,React.createElement(TextArea,{style:this.props.widgetProps?this.props.widgetProps.styles:this.props.styles?this.props.styles:{},labelText:this.props.widgetProps?this.props.widgetProps.Label:this.props.label||"Description",placeholder:this.props.widgetProps?this.props.widgetProps.Placeholder:this.props.placeholder||"Enter Value...",value:fieldValue,disabled:!!this.props.widgetProps&&this.props.widgetProps.ReadOnly,invalid:!!this.props.widgetProps&&this.props.widgetProps.invalid,invalidText:this.props.widgetProps?this.props.widgetProps.InvalidText:"",helperText:this.props.widgetProps?this.props.widgetProps.helperText:"",onChange:this.handleChange}))}}]),_SrsTextArea_}(React.Component),_export("SrsTextArea",SrsTextArea=function(props){return _SrsTextArea_}),_export("SrsTextArea",SrsTextArea)}}}),System.register("component/studio/SrsTextField.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,cloneDeep,_,_SrsTextField_,SrsTextField,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.ControlledPasswordInputApp},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsTextField_=function(_React$Component){function _SrsTextField_(props){_classCallCheck(this,_SrsTextField_);var _this=_possibleConstructorReturn(this,(_SrsTextField_.__proto__||Object.getPrototypeOf(_SrsTextField_)).call(this,props)),inputValue="";return inputValue=_this.props.widgetProps&&_this.props.widgetProps.value?_this.props.widgetProps.value:"",_this.state={inputValue:inputValue,reload:!1},_this.handleChange=_this.handleChange.bind(_this),_this.reflectChange=_this.reflectChange.bind(_this),_this}return _inherits(_SrsTextField_,_React$Component),_createClass(_SrsTextField_,[{key:"handleChange",value:function(e){this.setState({inputValue:e.target.value})}},{key:"reflectChange",value:function(){if(this.props.widgetProps){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=this.state.inputValue,this.props.updateStore({updates:{widgetProps:updatedProps}})}}},{key:"componentDidUpdate",value:function(prevProps){this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&(prevProps.widgetProps.value!=this.props.widgetProps.value?this.setState({inputValue:this.props.widgetProps.value}):this.setState({reload:!this.state.reload}))}},{key:"render",value:function(){var additionalProps={};additionalProps.value=this.state.inputValue||"",!this.props.widgetProps||"true"!=this.props.widgetProps.LightMode&&1!=this.props.widgetProps.LightMode||(additionalProps.light=!0);var embeddedStyles=null;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles));var textEl=null,textInputProps=_extends({className:this.props.className,labelText:this.props.widgetProps?this.props.widgetProps.Label:"Name",placeholder:this.props.widgetProps?this.props.widgetProps.Placeholder:"Enter Value..."},additionalProps,{disabled:this.props.widgetProps&&(!0===this.props.widgetProps.ReadOnly||"true"===this.props.widgetProps.ReadOnly),invalid:this.props.widgetProps&&this.props.widgetProps.invalid,invalidText:this.props.widgetProps&&this.props.widgetProps.InvalidText,helperText:this.props.widgetProps&&this.props.widgetProps.helperText,onChange:this.handleChange,onBlur:this.reflectChange});return this.props.widgetProps&&(textEl="true"==this.props.widgetProps.Password||1==this.props.widgetProps.Password?React.createElement(TextInput.PasswordInput,_extends({},textInputProps,{})):React.createElement(TextInput,textInputProps)),React.createElement("div",{className:"srs-prem-container"},embeddedStyles,textEl)}}]),_SrsTextField_}(React.Component),_export("SrsTextField",SrsTextField=function(props){return _SrsTextField_}),_export("SrsTextField",SrsTextField),_export("default",SrsTextField),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsTextField/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep","lodash"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TextInput,cloneDeep,_,_SrsTextField_,SrsTextField;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TextInput=_carbonComponentsReact.TextInput,_carbonComponentsReact.ControlledPasswordInputApp},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodash){_=_lodash.default}],execute:function(){_SrsTextField_=function(_React$Component){function _SrsTextField_(props){_classCallCheck(this,_SrsTextField_);var _this=_possibleConstructorReturn(this,(_SrsTextField_.__proto__||Object.getPrototypeOf(_SrsTextField_)).call(this,props)),inputValue="";return inputValue=_this.props.widgetProps&&_this.props.widgetProps.value?_this.props.widgetProps.value:"",_this.state={inputValue:inputValue,reload:!1},_this.handleChange=_this.handleChange.bind(_this),_this.reflectChange=_this.reflectChange.bind(_this),_this}return _inherits(_SrsTextField_,_React$Component),_createClass(_SrsTextField_,[{key:"handleChange",value:function(e){this.setState({inputValue:e.target.value})}},{key:"reflectChange",value:function(){if(this.props.widgetProps){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=this.state.inputValue,this.props.updateStore({updates:{widgetProps:updatedProps}})}}},{key:"componentDidUpdate",value:function(prevProps){this.props.widgetProps&&prevProps.widgetProps&&!_.isEqual(prevProps.widgetProps,this.props.widgetProps)&&(prevProps.widgetProps.value!=this.props.widgetProps.value?this.setState({inputValue:this.props.widgetProps.value}):this.setState({reload:!this.state.reload}))}},{key:"render",value:function(){var additionalProps={};additionalProps.value=this.state.inputValue||"",!this.props.widgetProps||"true"!=this.props.widgetProps.LightMode&&1!=this.props.widgetProps.LightMode||(additionalProps.light=!0);var embeddedStyles=null;this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles));var textEl=null,textInputProps=_extends({className:this.props.className,labelText:this.props.widgetProps?this.props.widgetProps.Label:"Name",placeholder:this.props.widgetProps?this.props.widgetProps.Placeholder:"Enter Value..."},additionalProps,{disabled:this.props.widgetProps&&(!0===this.props.widgetProps.ReadOnly||"true"===this.props.widgetProps.ReadOnly),invalid:this.props.widgetProps&&this.props.widgetProps.invalid,invalidText:this.props.widgetProps&&this.props.widgetProps.InvalidText,helperText:this.props.widgetProps&&this.props.widgetProps.helperText,onChange:this.handleChange,onBlur:this.reflectChange});return this.props.widgetProps&&(textEl="true"==this.props.widgetProps.Password||1==this.props.widgetProps.Password?React.createElement(TextInput.PasswordInput,_extends({},textInputProps,{})):React.createElement(TextInput,textInputProps)),React.createElement("div",{className:"srs-prem-container"},embeddedStyles,textEl)}}]),_SrsTextField_}(React.Component),_export("SrsTextField",SrsTextField=function(props){return _SrsTextField_}),_export("SrsTextField",SrsTextField)}}}),System.register("component/studio/SrsTime.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TimePicker,TimePickerSelect,SelectItem,cloneDeep,_SrsTime_,SrsTime,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TimePicker=_carbonComponentsReact.TimePicker,TimePickerSelect=_carbonComponentsReact.TimePickerSelect,SelectItem=_carbonComponentsReact.SelectItem},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsTime_=function(_React$Component){function _SrsTime_(props){_classCallCheck(this,_SrsTime_);var _this=_possibleConstructorReturn(this,(_SrsTime_.__proto__||Object.getPrototypeOf(_SrsTime_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsTime_,_React$Component),_createClass(_SrsTime_,[{key:"handleChange",value:function(val){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=val,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"render",value:function(){try{this.props.widgetProps&&this.props.widgetProps.styles?JSON.parse(this.props.widgetProps.styles):{}}catch(err){}return this.props.widgetProps.value&&this.props.widgetProps.value,React.createElement("div",{className:"srs-prem-container"},React.createElement(TimePicker,{id:"time-picker",onChange:this.handleChange,hideLabel:!1,labelText:this.props.widgetProps&&this.props.widgetProps.Label||"Time",invalidText:this.props.widgetProps&&this.props.widgetProps.InvalidText||""},React.createElement(TimePickerSelect,{id:"time-picker-select-1",labelText:"Please select"},React.createElement(SelectItem,{value:"AM",text:"AM"}),React.createElement(SelectItem,{value:"PM",text:"PM"})),React.createElement(TimePickerSelect,{id:"time-picker-select-2",labelText:"Please select"},React.createElement(SelectItem,{value:"PST",text:"PST"}),React.createElement(SelectItem,{value:"IST",text:"IST"}))))}}]),_SrsTime_}(React.Component),_export("SrsTime",SrsTime=function(props){return _SrsTime_}),_export("SrsTime",SrsTime),_export("default",SrsTime),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsTime/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,TimePicker,TimePickerSelect,SelectItem,cloneDeep,_SrsTime_,SrsTime;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){TimePicker=_carbonComponentsReact.TimePicker,TimePickerSelect=_carbonComponentsReact.TimePickerSelect,SelectItem=_carbonComponentsReact.SelectItem},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsTime_=function(_React$Component){function _SrsTime_(props){_classCallCheck(this,_SrsTime_);var _this=_possibleConstructorReturn(this,(_SrsTime_.__proto__||Object.getPrototypeOf(_SrsTime_)).call(this,props));return _this.handleChange=_this.handleChange.bind(_this),_this}return _inherits(_SrsTime_,_React$Component),_createClass(_SrsTime_,[{key:"handleChange",value:function(val){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.value=val,this.props.updateStore({updates:{widgetProps:updatedProps}})}},{key:"render",value:function(){try{this.props.widgetProps&&this.props.widgetProps.styles?JSON.parse(this.props.widgetProps.styles):{}}catch(err){}return this.props.widgetProps.value&&this.props.widgetProps.value,React.createElement("div",{className:"srs-prem-container"},React.createElement(TimePicker,{id:"time-picker",onChange:this.handleChange,hideLabel:!1,labelText:this.props.widgetProps&&this.props.widgetProps.Label||"Time",invalidText:this.props.widgetProps&&this.props.widgetProps.InvalidText||""},React.createElement(TimePickerSelect,{id:"time-picker-select-1",labelText:"Please select"},React.createElement(SelectItem,{value:"AM",text:"AM"}),React.createElement(SelectItem,{value:"PM",text:"PM"})),React.createElement(TimePickerSelect,{id:"time-picker-select-2",labelText:"Please select"},React.createElement(SelectItem,{value:"PST",text:"PST"}),React.createElement(SelectItem,{value:"IST",text:"IST"}))))}}]),_SrsTime_}(React.Component),_export("SrsTime",SrsTime=function(props){return _SrsTime_}),_export("SrsTime",SrsTime)}}}),System.register("component/studio/SrsTitle.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Tile,_SrsTitle_,SrsTitle,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Tile=_carbonComponentsReact.Tile}],execute:function(){_SrsTitle_=function(_React$Component){function _SrsTitle_(){return _classCallCheck(this,_SrsTitle_),_possibleConstructorReturn(this,(_SrsTitle_.__proto__||Object.getPrototypeOf(_SrsTitle_)).apply(this,arguments))}return _inherits(_SrsTitle_,_React$Component),_createClass(_SrsTitle_,[{key:"render",value:function(){var styles={textAlign:"center"};try{var stylesFromProps=this.props.widgetProps&&this.props.widgetProps.Styles?JSON.parse(this.props.widgetProps.Styles):styles;styles=_extends({},styles,stylesFromProps)}catch(err){}var embeddedStyles=null;return this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles)),React.createElement("div",null,embeddedStyles,React.createElement(Tile,{style:styles},this.props.widgetProps&&this.props.widgetProps.Title?this.props.widgetProps.Title:"Section title..."))}}]),_SrsTitle_}(React.Component),_export("SrsTitle",SrsTitle=function(props){return _SrsTitle_}),_export("SrsTitle",SrsTitle),_export("default",SrsTitle),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsTitle/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Tile,_SrsTitle_,SrsTitle;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Tile=_carbonComponentsReact.Tile}],execute:function(){_SrsTitle_=function(_React$Component){function _SrsTitle_(){return _classCallCheck(this,_SrsTitle_),_possibleConstructorReturn(this,(_SrsTitle_.__proto__||Object.getPrototypeOf(_SrsTitle_)).apply(this,arguments))}return _inherits(_SrsTitle_,_React$Component),_createClass(_SrsTitle_,[{key:"render",value:function(){var styles={textAlign:"center"};try{var stylesFromProps=this.props.widgetProps&&this.props.widgetProps.Styles?JSON.parse(this.props.widgetProps.Styles):styles;styles=_extends({},styles,stylesFromProps)}catch(err){}var embeddedStyles=null;return this.props.widgetProps&&this.props.widgetProps.EmbeddedStyles&&(embeddedStyles=React.createElement("style",null,this.props.widgetProps.EmbeddedStyles)),React.createElement("div",null,embeddedStyles,React.createElement(Tile,{style:styles},this.props.widgetProps&&this.props.widgetProps.Title?this.props.widgetProps.Title:"Section title..."))}}]),_SrsTitle_}(React.Component),_export("SrsTitle",SrsTitle=function(props){return _SrsTitle_}),_export("SrsTitle",SrsTitle)}}}),System.register("component/studio/SrsToggle.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Toggle,cloneDeep,_SrsToggle_,SrsToggle,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Toggle=_carbonComponentsReact.Toggle},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsToggle_=function(_React$Component){function _SrsToggle_(props){_classCallCheck(this,_SrsToggle_);var _this=_possibleConstructorReturn(this,(_SrsToggle_.__proto__||Object.getPrototypeOf(_SrsToggle_)).call(this,props));return _this.onChange=_this.onChange.bind(_this),_this}return _inherits(_SrsToggle_,_React$Component),_createClass(_SrsToggle_,[{key:"onChange",value:function(e){if(this.props.updateStore){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.toggled=e.target.checked,this.props.updateStore({updates:{widgetProps:updatedProps}})}this.props.handleOnChange?this.props.handleOnChange(val):this.props.onChange&&this.props.onChange(val)}},{key:"render",value:function(){var uid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),props={id:this.props.id?this.props.id:uid,onChange:this.onChange};this.props.widgetProps&&(props.labelA=this.props.widgetProps.OFF_Label,props.labelB=this.props.widgetProps.ON_Label,"true"!=this.props.widgetProps.value&&1!=this.props.widgetProps.value||(props.toggled=!0),props.defaultToggled="true"==this.props.widgetProps.DefaultValue||1==this.props.widgetProps.DefaultValue);var containerStyles=this.props.containerStyles?this.props.containerStyles:null;return React.createElement("div",{className:containerStyles?"":"srs-prem-container",style:containerStyles},React.createElement("fieldset",null,React.createElement(Toggle,props)))}}]),_SrsToggle_}(React.Component),_export("SrsToggle",SrsToggle=function(props){return WrappedComponent=_SrsToggle_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsToggle",SrsToggle),_export("default",SrsToggle),_export("states",states=[{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsToggle/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","lodash.clonedeep"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Toggle,cloneDeep,_SrsToggle_,SrsToggle;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Toggle=_carbonComponentsReact.Toggle},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default}],execute:function(){_SrsToggle_=function(_React$Component){function _SrsToggle_(props){_classCallCheck(this,_SrsToggle_);var _this=_possibleConstructorReturn(this,(_SrsToggle_.__proto__||Object.getPrototypeOf(_SrsToggle_)).call(this,props));return _this.onChange=_this.onChange.bind(_this),_this}return _inherits(_SrsToggle_,_React$Component),_createClass(_SrsToggle_,[{key:"onChange",value:function(e){if(this.props.updateStore){var updatedProps=cloneDeep(this.props.widgetProps);updatedProps.toggled=e.target.checked,this.props.updateStore({updates:{widgetProps:updatedProps}})}this.props.handleOnChange?this.props.handleOnChange(val):this.props.onChange&&this.props.onChange(val)}},{key:"render",value:function(){var uid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)}),props={id:this.props.id?this.props.id:uid,onChange:this.onChange};this.props.widgetProps&&(props.labelA=this.props.widgetProps.OFF_Label,props.labelB=this.props.widgetProps.ON_Label,"true"!=this.props.widgetProps.value&&1!=this.props.widgetProps.value||(props.toggled=!0),props.defaultToggled="true"==this.props.widgetProps.DefaultValue||1==this.props.widgetProps.DefaultValue);var containerStyles=this.props.containerStyles?this.props.containerStyles:null;return React.createElement("div",{className:containerStyles?"":"srs-prem-container",style:containerStyles},React.createElement("fieldset",null,React.createElement(Toggle,props)))}}]),_SrsToggle_}(React.Component),_export("SrsToggle",SrsToggle=function(props){return WrappedComponent=_SrsToggle_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsToggle",SrsToggle)}}}),System.register("component/studio/SrsteeHeader.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/user/20","@carbon/icons-react/lib/notification/20","@carbon/icons-react/lib/app-switcher/20","@carbon/icons-react/lib/menu/32","carbon-components-react/lib/components/UIShell","component/studio/SrsMultiButton/Definition.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Search20,User20,Notification20,AppSwitcher20,Menu32,Header,HeaderName,HeaderMenu,HeaderMenuItem,HeaderNavigation,HeaderGlobalAction,HeaderGlobalBar,Search,_SrsteeHeader_,SrsteeHeader,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibUser){User20=_carbonIconsReactLibUser.default},function(_carbonIconsReactLibNotification){Notification20=_carbonIconsReactLibNotification.default},function(_carbonIconsReactLibAppSwitcher){AppSwitcher20=_carbonIconsReactLibAppSwitcher.default},function(_carbonIconsReactLibMenu){Menu32=_carbonIconsReactLibMenu.default},function(_carbonComponentsReactLibComponentsUIShell){Header=_carbonComponentsReactLibComponentsUIShell.Header,HeaderName=_carbonComponentsReactLibComponentsUIShell.HeaderName,HeaderMenu=_carbonComponentsReactLibComponentsUIShell.HeaderMenu,HeaderMenuItem=_carbonComponentsReactLibComponentsUIShell.HeaderMenuItem,HeaderNavigation=_carbonComponentsReactLibComponentsUIShell.HeaderNavigation,_carbonComponentsReactLibComponentsUIShell.HeaderMenuButton,HeaderGlobalAction=_carbonComponentsReactLibComponentsUIShell.HeaderGlobalAction,HeaderGlobalBar=_carbonComponentsReactLibComponentsUIShell.HeaderGlobalBar},function(_componentStudioSrsMultiButtonDefinitionJs){_componentStudioSrsMultiButtonDefinitionJs.SrsMultiButton},function(_carbonComponentsReact){_carbonComponentsReact.OverflowMenu,_carbonComponentsReact.OverflowMenuItem,Search=_carbonComponentsReact.Search}],execute:function(){_SrsteeHeader_=function(_React$Component){function _SrsteeHeader_(props){_classCallCheck(this,_SrsteeHeader_);var _this=_possibleConstructorReturn(this,(_SrsteeHeader_.__proto__||Object.getPrototypeOf(_SrsteeHeader_)).call(this,props));return _this.state={searchExpand:!1,expanded:!1},_this.expandSearch=_this.expandSearch.bind(_this),_this.accessToken=document.cookie?document.cookie.replace(/(?:(?:^|.*;\s*)authorization\s*\=\s*([^;]*).*$)|^.*$/,"$1"):null,_this.accessToken&&$script.getscript("mmf.getScopes").then(function(_ref){(0,_ref.default)().then(function(scopesData){var allScopes={};Object.keys(scopesData).map(function(scopeItemKey,indx){"currentScope"!=scopeItemKey&&(allScopes[scopeItemKey]=scopesData[scopeItemKey])}),_this.props.updateStore({updates:{scopes:allScopes,currentscope:scopesData.currentScope?scopesData.currentScope:_this.props.currentscope?_this.props.currentscope:"studio"}})})}),_this}return _inherits(_SrsteeHeader_,_React$Component),_createClass(_SrsteeHeader_,[{key:"expandSearch",value:function(){this.setState({searchExpand:!0})}},{key:"logout",value:function(){document.cookie="authorization=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",location.href="/login"}},{key:"render",value:function(){var _this2=this,searchbar=React.createElement(HeaderGlobalAction,{"aria-label":"Search",onClick:this.expandSearch},React.createElement(Search20,null));this.state.searchExpand&&(searchbar=React.createElement(Search,{className:"srstee-search",light:"true",name:"",defaultValue:"",labelText:"Search",closeButtonLabelText:"",placeHolderText:"Search",onChange:function(){},id:"search-1",onBlur:function(){_this2.setState({searchExpand:!1})}}));var headerPageMenu=React.createElement(HeaderMenu,{"aria-label":"Studio",renderMenuContent:function(_ref2){_ref2.ariaLabel;return React.createElement("button",{className:"bx--header__action"},React.createElement(Menu32,{className:"bx--header__action--active"}))}},React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/page-designer")}},"Designer"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/srstee-ide")}},"IDE"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/graphiql-view")}},"Query Builder"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/script-runner")}},"Script Runner"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/studio/palettes")}},"Palettes"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/studio/db")}},"Tables"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/geomap")}},"Maps")),headerNavMenu=this.props.preview&&"studio"!=this.props.currentscope?null:React.createElement(HeaderNavigation,{"aria-label":"",style:{marginLeft:20}},React.createElement(HeaderMenu,{"aria-label":"Studio",menuLinkName:"Studio"},React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/page-designer")}},"Designer"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/srstee-ide")}},"IDE"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/graphiql-view")}},"Query Builder"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/script-runner")}},"Script Runner"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/studio/palettes")}},"Palettes"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/studio/db")}},"Tables"))),headerDetails=this.accessToken?React.createElement(React.Fragment,null,headerNavMenu,React.createElement(HeaderGlobalBar,null,searchbar,React.createElement(HeaderGlobalAction,{"aria-label":"Notifications",onClick:function(){}},React.createElement(Notification20,null)),React.createElement(HeaderGlobalAction,{"aria-label":"App Switcher",onClick:function(){return navigateTo("/workmania/apps-board")}},React.createElement(AppSwitcher20,null)),React.createElement(HeaderMenu,{"aria-label":"App User",className:"avatarMenuItems",renderMenuContent:function(){return React.createElement("span",{style:{backgroundColor:"#c3c3c3",padding:10,borderRadius:"50%"}},React.createElement(User20,null))}},React.createElement(HeaderMenuItem,{href:"#"},"Profile"),React.createElement(HeaderMenuItem,{href:"/logout"},"Logout")))):null;return React.createElement("div",{className:"srs-header"},React.createElement(Header,{"aria-label":"Srstee"},React.createElement("div",{className:"bx--header-logo",style:{width:38,height:38}},React.createElement("img",{src:"/resources/logo.gif",width:"38px",height:"38px"})),headerPageMenu,React.createElement(HeaderName,{href:"#",prefix:"Srste"},"[Platform]"),headerDetails))}}]),_SrsteeHeader_}(React.Component),_export("SrsteeHeader",SrsteeHeader=function(props){return _SrsteeHeader_}),_export("SrsteeHeader",SrsteeHeader),_export("default",SrsteeHeader),_export("states",states=[{KeyName:"switch_from",AccessPath:"switch_from",DefaultValue:'{"switch_from": ""}'},{KeyName:"showNav",AccessPath:"showNav",DefaultValue:'{"showNav":true}'},{KeyName:"scopes",AccessPath:"scopes",DefaultValue:'{"scopes": {}}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"switch_to",AccessPath:"switch_to",DefaultValue:'{"switch_to": ""}'},{KeyName:"loggedIn",AccessPath:"loggedIn",DefaultValue:'{"loggedIn":false}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/SrsMultiButton/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,SelectItemGroup,_SrsMultiButton_,SrsMultiButton;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,SelectItemGroup=_carbonComponentsReact.SelectItemGroup}],execute:function(){_SrsMultiButton_=function(_React$Component){function _SrsMultiButton_(props){_classCallCheck(this,_SrsMultiButton_);var _this=_possibleConstructorReturn(this,(_SrsMultiButton_.__proto__||Object.getPrototypeOf(_SrsMultiButton_)).call(this,props));return _this.selectElement=null,_this}return _inherits(_SrsMultiButton_,_React$Component),_createClass(_SrsMultiButton_,[{key:"render",value:function(){var _this2=this,_props=this.props,size=(_props.label,_props.className,_props.handleOnClick,_props.rules,_props.level,_props.size),buttonOptions=(_props.style,this.props.widgetProps&&this.props.widgetProps.Size&&this.props.widgetProps.Size,this.props.widgetProps&&this.props.widgetProps.ButtonAction&&this.props.widgetProps.ButtonAction,this.props.containerStyles&&this.props.containerStyles,React.createElement(Select,{ref:function(input){return _this2.selectElement=input},id:"select-1",hideLabel:"true",defaultValue:"placeholder-item",style:{backgroundColor:"#0062ff",color:"white"}},React.createElement(SelectItem,{disabled:!0,hidden:!0,value:"placeholder-item",text:"Actions"}),React.createElement(SelectItemGroup,{label:"Category 1"},React.createElement(SelectItem,{value:"option-1",text:"Option 1"}),React.createElement(SelectItem,{value:"option-2",text:"Option 2"})),React.createElement(SelectItemGroup,{label:"Category 2"},React.createElement(SelectItem,{value:"option-3",text:"Option 3"}),React.createElement(SelectItem,{value:"option-4",text:"Option 4"}))));return React.createElement("div",{className:"MultiSelect"},buttonOptions)}}]),_SrsMultiButton_}(React.Component),_export("SrsMultiButton",SrsMultiButton=function(props){return WrappedComponent=_SrsMultiButton_,function(_React$Component2){function _class(){return _classCallCheck(this,_class),_possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}return _inherits(_class,_React$Component2),_createClass(_class,[{key:"render",value:function(){return React.createElement(WrappedComponent,_extends({},this.props,props))}}]),_class}(React.Component);var WrappedComponent}),_export("SrsMultiButton",SrsMultiButton)}}}),System.register("component/studio/SrsteeHeader/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/user/20","@carbon/icons-react/lib/notification/20","@carbon/icons-react/lib/app-switcher/20","@carbon/icons-react/lib/menu/32","carbon-components-react/lib/components/UIShell","component/studio/SrsMultiButton/Definition.js","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Search20,User20,Notification20,AppSwitcher20,Menu32,Header,HeaderName,HeaderMenu,HeaderMenuItem,HeaderNavigation,HeaderGlobalAction,HeaderGlobalBar,Search,_SrsteeHeader_,SrsteeHeader;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibUser){User20=_carbonIconsReactLibUser.default},function(_carbonIconsReactLibNotification){Notification20=_carbonIconsReactLibNotification.default},function(_carbonIconsReactLibAppSwitcher){AppSwitcher20=_carbonIconsReactLibAppSwitcher.default},function(_carbonIconsReactLibMenu){Menu32=_carbonIconsReactLibMenu.default},function(_carbonComponentsReactLibComponentsUIShell){Header=_carbonComponentsReactLibComponentsUIShell.Header,HeaderName=_carbonComponentsReactLibComponentsUIShell.HeaderName,HeaderMenu=_carbonComponentsReactLibComponentsUIShell.HeaderMenu,HeaderMenuItem=_carbonComponentsReactLibComponentsUIShell.HeaderMenuItem,HeaderNavigation=_carbonComponentsReactLibComponentsUIShell.HeaderNavigation,_carbonComponentsReactLibComponentsUIShell.HeaderMenuButton,HeaderGlobalAction=_carbonComponentsReactLibComponentsUIShell.HeaderGlobalAction,HeaderGlobalBar=_carbonComponentsReactLibComponentsUIShell.HeaderGlobalBar},function(_componentStudioSrsMultiButtonDefinitionJs){_componentStudioSrsMultiButtonDefinitionJs.SrsMultiButton},function(_carbonComponentsReact){_carbonComponentsReact.OverflowMenu,_carbonComponentsReact.OverflowMenuItem,Search=_carbonComponentsReact.Search}],execute:function(){_SrsteeHeader_=function(_React$Component){function _SrsteeHeader_(props){_classCallCheck(this,_SrsteeHeader_);var _this=_possibleConstructorReturn(this,(_SrsteeHeader_.__proto__||Object.getPrototypeOf(_SrsteeHeader_)).call(this,props));return _this.state={searchExpand:!1,expanded:!1},_this.expandSearch=_this.expandSearch.bind(_this),_this.accessToken=document.cookie?document.cookie.replace(/(?:(?:^|.*;\s*)authorization\s*\=\s*([^;]*).*$)|^.*$/,"$1"):null,_this.accessToken&&$script.getscript("mmf.getScopes").then(function(_ref){(0,_ref.default)().then(function(scopesData){var allScopes={};Object.keys(scopesData).map(function(scopeItemKey,indx){"currentScope"!=scopeItemKey&&(allScopes[scopeItemKey]=scopesData[scopeItemKey])}),_this.props.updateStore({updates:{scopes:allScopes,currentscope:scopesData.currentScope?scopesData.currentScope:_this.props.currentscope?_this.props.currentscope:"studio"}})})}),_this}return _inherits(_SrsteeHeader_,_React$Component),_createClass(_SrsteeHeader_,[{key:"expandSearch",value:function(){this.setState({searchExpand:!0})}},{key:"logout",value:function(){document.cookie="authorization=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",location.href="/login"}},{key:"render",value:function(){var _this2=this,searchbar=React.createElement(HeaderGlobalAction,{"aria-label":"Search",onClick:this.expandSearch},React.createElement(Search20,null));this.state.searchExpand&&(searchbar=React.createElement(Search,{className:"srstee-search",light:"true",name:"",defaultValue:"",labelText:"Search",closeButtonLabelText:"",placeHolderText:"Search",onChange:function(){},id:"search-1",onBlur:function(){_this2.setState({searchExpand:!1})}}));var headerPageMenu=React.createElement(HeaderMenu,{"aria-label":"Studio",renderMenuContent:function(_ref2){_ref2.ariaLabel;return React.createElement("button",{className:"bx--header__action"},React.createElement(Menu32,{className:"bx--header__action--active"}))}},React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/page-designer")}},"Designer"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/srstee-ide")}},"IDE"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/graphiql-view")}},"Query Builder"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/script-runner")}},"Script Runner"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/studio/palettes")}},"Palettes"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/studio/db")}},"Tables"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/geomap")}},"Maps")),headerNavMenu=this.props.preview&&"studio"!=this.props.currentscope?null:React.createElement(HeaderNavigation,{"aria-label":"",style:{marginLeft:20}},React.createElement(HeaderMenu,{"aria-label":"Studio",menuLinkName:"Studio"},React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/page-designer")}},"Designer"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/srstee-ide")}},"IDE"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/graphiql-view")}},"Query Builder"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/workmania/script-runner")}},"Script Runner"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/studio/palettes")}},"Palettes"),React.createElement(HeaderMenuItem,{onClick:function(){navigateTo("/studio/db")}},"Tables"))),headerDetails=this.accessToken?React.createElement(React.Fragment,null,headerNavMenu,React.createElement(HeaderGlobalBar,null,searchbar,React.createElement(HeaderGlobalAction,{"aria-label":"Notifications",onClick:function(){}},React.createElement(Notification20,null)),React.createElement(HeaderGlobalAction,{"aria-label":"App Switcher",onClick:function(){return navigateTo("/workmania/apps-board")}},React.createElement(AppSwitcher20,null)),React.createElement(HeaderMenu,{"aria-label":"App User",className:"avatarMenuItems",renderMenuContent:function(){return React.createElement("span",{style:{backgroundColor:"#c3c3c3",padding:10,borderRadius:"50%"}},React.createElement(User20,null))}},React.createElement(HeaderMenuItem,{href:"#"},"Profile"),React.createElement(HeaderMenuItem,{href:"/logout"},"Logout")))):null;return React.createElement("div",{className:"srs-header"},React.createElement(Header,{"aria-label":"Srstee"},React.createElement("div",{className:"bx--header-logo",style:{width:38,height:38}},React.createElement("img",{src:"/resources/logo.gif",width:"38px",height:"38px"})),headerPageMenu,React.createElement(HeaderName,{href:"#",prefix:"Srste"},"[Platform]"),headerDetails))}}]),_SrsteeHeader_}(React.Component),_export("SrsteeHeader",SrsteeHeader=function(props){return _SrsteeHeader_}),_export("SrsteeHeader",SrsteeHeader)}}}),System.register("component/studio/SrsteeIDE.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/studio/StudioUtil.js","client/script/studio/StudioFormUtil.js","carbon-components-react","@carbon/icons-react/lib/close/20","@carbon/icons-react/lib/add--alt/32","lodash.clonedeep","lodash.debounce"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MonacoEditor,StudioUtil,StudioFormUtil,Select,SelectItem,TextInput,OverflowMenu,OverflowMenuItem,Close20,AddAlt32,cloneDeep,debounce,ideScope,SrsteeIDE,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_clientScriptStudioStudioUtilJs){StudioUtil=_clientScriptStudioStudioUtilJs.StudioUtil},function(_clientScriptStudioStudioFormUtilJs){StudioFormUtil=_clientScriptStudioStudioFormUtilJs.StudioFormUtil},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput,OverflowMenu=_carbonComponentsReact.OverflowMenu,OverflowMenuItem=_carbonComponentsReact.OverflowMenuItem},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibAddAlt){AddAlt32=_carbonIconsReactLibAddAlt.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){history.pushState(null,null,location.href),window.onpopstate=function(){history.go(1)},ideScope={Container:function(_React$Component){function Container(props){_classCallCheck(this,Container);var _this=_possibleConstructorReturn(this,(Container.__proto__||Object.getPrototypeOf(Container)).call(this,props)),studioUtil=new StudioUtil;return studioUtil.bindAllMethods.bind(_this)(),_this.state=studioUtil.getInitialState(),_this.topElement=React.createRef(),_this.studioFormUtil=new StudioFormUtil,_this.editorDidMount=_this.editorDidMount.bind(_this),_this.editor=null,_this.editorModel=null,_this.editorModelViewState=null,_this.activeFileIndex=-1,_this.editorContent=null,_this.restoreEditor=_this.restoreEditor.bind(_this),_this.getModels(_this.refreshModels.bind(_this)),_this.resizeSideBarGrid=_this.resizeSideBarGrid.bind(_this),_this.resizeSideBarGridDebounceFn=debounce(function(){_this.resizeSideBarGrid()}),_this.resizeFooterPaneGrid=_this.resizeFooterPaneGrid.bind(_this),window.addEventListener("resize",self.resizeSideBarGridDebounceFn),_this}return _inherits(Container,_React$Component),_createClass(Container,[{key:"resizeSideBarGrid",value:function(){var self=this,parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".searchPane",this.props.shadow).length>0?$(".searchPane",this.props.shadow):$(".searchPane",parentNode),topLevelEl=$(".top-level",this.props.shadow).length>0?$(".top-level",this.props.shadow):$(".top-level",parentNode),contentAreaEl=$(".sr-editorial-space",this.props.shadow).length>0?$(".sr-editorial-space",this.props.shadow):$(".sr-editorial-space",parentNode);if(searchPane.length>0){var searchPaneRect=searchPane[0].getBoundingClientRect(),contentAreaWidth=topLevelEl[0].getBoundingClientRect().width-searchPaneRect.width-5;setTimeout(function(){contentAreaEl.width(contentAreaWidth),window.removeEventListener("resize",self.resizeSideBarGridDebounceFn),window.addEventListener("resize",self.resizeSideBarGridDebounceFn)})}}},{key:"resizeFooterPaneGrid",value:function(){var parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,contentPane=$(".sr-editorial-space > .content",this.props.shadow).length>0?$(".sr-editorial-space > .content",this.props.shadow):$(".sr-editorial-space > .content",parentNode),topLevelEl=$(".sr-editorial-space",this.props.shadow).length>0?$(".sr-editorial-space",this.props.shadow):$(".sr-editorial-space",parentNode),footerPane=$(".sr-editorial-space > .footerPane",this.props.shadow).length>0?$(".sr-editorial-space > .footerPane",this.props.shadow):$(".sr-editorial-space > .footerPane",parentNode);if(contentPane.length>0){var contentPaneRect=contentPane[0].getBoundingClientRect(),footerPaneHeight=topLevelEl[0].getBoundingClientRect().height-contentPaneRect.height;footerPane.height(footerPaneHeight);var editorState=cloneDeep(this.state.editor);editorState.height=contentPaneRect.height,this.setState({editor:editorState})}}},{key:"componentDidMount",value:function(){(!this.state.openedForms||0==this.state.openedForms.length||1==this.state.openedForms.length&&-1==this.state.openedForms[0].file_id)&&this.props.ideFiles&&this.props.ideFiles.length>0&&this.loadIDEFiles(this.props.ideFiles),this.searchChanged();var parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".searchPane",this.props.shadow).length>0?$(".searchPane",this.props.shadow):$(".searchPane",parentNode);if(window.addEventListener("focus",this.resizeSideBarGridDebounceFn),window.addEventListener("focus",this.resizeSideBarGridDebounceFn),searchPane&&searchPane.length>0){searchPane[0].addEventListener("resize",this.resizeSideBarGridDebounceFn),new MutationObserver(function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}}).observe(searchPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})}var contentPane=$(".sr-editorial-space > .content",this.props.shadow).length>0?$(".sr-editorial-space > .content",this.props.shadow):$(".sr-editorial-space > .content",parentNode);if(contentPane&&contentPane.length>0){contentPane[0].addEventListener("resize",this.resizeFooterPaneGrid),new MutationObserver(function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}}).observe(contentPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})}}},{key:"componentDidUnmount",value:function(){window.removeEventListener("resize",this.resizeSideBarGridDebounceFn)}},{key:"componentDidUpdate",value:function(prevProps){var _this2=this;if(prevProps.ide_reload!=this.props.ide_reload&&this.setState({reload:!this.state.reload}),prevProps.showpreview==this.props.showpreview||prevProps.showpreview_target==this.props.showpreview_target||"ide_state"!=this.props.showpreview_target&&"ide_actions"!=this.props.showpreview_target&&"ide_props"!=this.props.showpreview_target&&"ide_deps"!=this.props.showpreview_target||(this.setState({showWebComponentPreview:this.props.showpreview,showPreviewTarget:this.props.showpreview_target}),0==this.props.showpreview&&this.restoreEditor()),this.activeFileIndex>-1&&this.refs)if(this.refs["file"+this.activeFileIndex])setTimeout(function(){return _this2.refs["file"+_this2.activeFileIndex].scrollIntoView({block:"end",behavior:"smooth"})},100);else{var lastFileIndx=-1;Object.keys(this.refs).map(function(refKey){if(refKey.indexOf("file")>-1){var fileIndx=parseInt(refKey.split("file")[1]);fileIndx>lastFileIndx&&(lastFileIndx=fileIndx)}}),setTimeout(function(){return _this2.refs["file"+lastFileIndx].scrollIntoView({block:"end",behavior:"smooth"})},100)}}},{key:"componentDidCatch",value:function(error,info){console.log("error = "+error)}},{key:"editorDidMount",value:function(editor,monaco){monaco.languages.registerCompletionItemProvider("javascript",{provideCompletionItems:function(model,position){return[{label:'let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',documentation:"Utility to get the records"},{label:'let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',documentation:"Utility to get the record count of the matching filter"},{label:'createRecord = await $qry.createRecord("[model]_[scope]", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - createRecord = await $qry.createRecord("[model]_[scope]", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to create a new record"},{label:'updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to update an existing record"},{label:'deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',documentation:"Utility to delete a record"},{label:'deleteRecords = await $qry.deleteRecords("[model]_[scope]", "{uid: {"inq": ["id1", "id"]}}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "filter")',documentation:"Utility to delete multiple records"},{label:'tableDelete = await $qry._run(`mutation($inputData:[Table]DestroyAllInput!) {\n\t\t[Table]DestroyAll(input:$inputData){\n\t\t\tobj\n\t\t}\t}`, { "inputData": { "where": { "[FieldName]":"${varname}"} } },\n\t\t"data.[Table]DestroyAll.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-delete",documentation:"Delete query to remove the records from the table"},{label:'$qry.run("{queryName}", "{variables}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'await $qry.run("{queryName}", "{variables}")',documentation:"Utility to mutate/fetch data from server using GraphQL"},{label:'tableRead = await $qry._run(`query($input:JSON){\n\t[Table]{\n\t\t[Table]Find(filter: $input) @_(get: "edges"){\n\t\t\tedges @_(keyBy: "node.uid", mapValues:"node"){\n\t\t\t\tnode{\n\t\t\t\t\tuid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}`, { "input": { "where": { "uid": "${varname}" } } },\n"data.[Table].[Table]Find");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-read",documentation:"Open query to get the data from the table"},{label:'tableUpsert = await $qry._run(`mutation($input: [Table]UpsertWithWhereInput!){\n\t[Table]UpsertWithWhere(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "where": { "uid": "${varname}" }, "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]UpsertWithWhere.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-upsert",documentation:"Query to update the data in the table"},{label:'tableCreate = await $qry._run(`mutation($input: [Table]CreateInput!){\n\t[Table]Create(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]Create.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-create",documentation:"Query to create the record with the data"}]}});this.editor=editor,this.monaco=monaco,this.editorModel=editor.getModel(),this.restoreEditor()}},{key:"restoreEditor",value:function(){var self=this,saveEditorValue=this.editor.setValue.bind(this.editor);this.editor.setValue=function(val){saveEditorValue(val),self.state.form.position?(self.editor.setPosition(self.state.form.position),self.editor.revealLine(self.state.form.position.lineNumber),self.editor.revealLineInCenter(self.state.form.position.lineNumber)):(self.editor.setPosition({lineNumber:1,column:1}),self.editor.revealLine(1),self.editor.revealLineInCenter(15)),self.editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:this.editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(this.editor._themeService._styleElement),this.editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"render",value:function(){var editorCode,searchResults=this.studioFormUtil.getSearchPaneDetails.bind(this)(),editorToolkit=this.studioFormUtil.getEditorToolKit.bind(this)(),previewPane=this.studioFormUtil.getPreviewContentPane.bind(this)(),footerTabs=this.studioFormUtil.getFooterTabs.bind(this)(),footerContent=this.studioFormUtil.getFooterContent.bind(this)();if(this.state.form.mode)switch(this.state.form.mode){case"css":editorCode=this.state.form.css;break;case"html":editorCode=this.state.form.html;break;case"js":editorCode=this.state.form.code;break;case"import":editorCode=this.state.form.ImportScript;break;case"export":editorCode=this.state.form.ExportScript}else editorCode=this.state.form.code;var contentTabArry=[];if(this.state.openedForms){var _self=this;this.activeFileIndex=-1,this.state.openedForms.forEach(function(openedFile,indx){"contentTabActive"==openedFile.className&&(_self.activeFileIndex=indx),contentTabArry.push(React.createElement("div",{ref:"file"+indx,className:"contentTabItems"},React.createElement("div",{key:"-1",class:openedFile.className,onClick:function(){return _self.makeFormActive(openedFile)}},openedFile.fileName),React.createElement(Close20,{className:"closeTab",onClick:function(){return _self.removeForm(openedFile)}})))})}var contentTabs=React.createElement("div",{class:"contentTabs"},contentTabArry);this.topElement&&this.topElement.current&&(this.state.resetEditor&&(this.restoreEditor(),this.setState({resetEditor:!1})),this.editorContent=React.createElement(MonacoEditor,{width:this.state.editor.width,height:this.state.editor.height,language:"javascript",theme:"vs-dark",value:editorCode,defaultValue:editorCode,options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1},onChange:this.codeChanged,requireConfig:{url:"/thirdpartylib/require.js",paths:{vs:"/thirdpartylib/monaco/min/vs"}},editorWillMount:this.editorWillMount,editorDidMount:this.editorDidMount}));var notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",null):null;return React.createElement("div",{className:"top-level",ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ErrorBoundary/Style.css"); @import url("component/studio/SrsteeIDE/Style.css"); @import url("/thirdpartylib/monaco/min/vs/editor/editor.main.css")'),notificationBar,React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsMode.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/lib/typescriptServices.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsWorker.js"}),React.createElement("div",{className:"searchPane resizable-sidebar"},React.createElement("div",{className:"sr-new-file-menu"},React.createElement("label",{htmlFor:"button",className:"sr-new-file"},"New File"),React.createElement(OverflowMenu,{renderIcon:function(){return React.createElement(AddAlt32,null)},"data-floating-menu-container":"true"},React.createElement(OverflowMenuItem,{itemText:"Page",onClick:this.addNewFile,value:"page"}),React.createElement(OverflowMenuItem,{itemText:"Component",onClick:this.addNewFile,value:"component"}),React.createElement(OverflowMenuItem,{itemText:"Style",onClick:this.addNewFile,value:"style"}),React.createElement(OverflowMenuItem,{itemText:"Client Scripts",onClick:this.addNewFile,value:"client_script"}),React.createElement(OverflowMenuItem,{itemText:"Common Scripts",onClick:this.addNewFile,value:"common_script"}),React.createElement(OverflowMenuItem,{itemText:"Server Scripts",onClick:this.addNewFile,value:"server_script"}),React.createElement(OverflowMenuItem,{itemText:"Model",onClick:this.addNewFile,value:"model"}),React.createElement(OverflowMenuItem,{itemText:"Opertaion Hook",onClick:this.addNewFile,value:"operation_hook"}),React.createElement(OverflowMenuItem,{itemText:"Resources",onClick:this.addNewFile,value:"resource"}),React.createElement(OverflowMenuItem,{itemText:"Rendering Templates",onClick:this.addNewFile,value:"template"}),React.createElement(OverflowMenuItem,{itemText:"Rest Methods",onClick:this.addNewFile,value:"restmethod"}),React.createElement(OverflowMenuItem,{itemText:"Import Export",onClick:this.addNewFile,value:"import_export"}),React.createElement(OverflowMenuItem,{itemText:"Widget Actions",onClick:this.addNewFile,value:"widget_action"}),React.createElement(OverflowMenuItem,{itemText:"Page Actions",onClick:this.addNewFile,value:"page_action"}))),React.createElement(Select,{labelText:"Category",onChange:this.searchCategoryUpdated,value:this.state.search.ide_type,defaultValue:"component",id:"category",required:"required"},React.createElement(SelectItem,{value:"page",text:"Page"}),React.createElement(SelectItem,{value:"component",text:"Component"}),React.createElement(SelectItem,{value:"client_script",text:"Client Script"}),React.createElement(SelectItem,{value:"common_script",text:"Common Script"}),React.createElement(SelectItem,{value:"server_script",text:"Server Script"}),React.createElement(SelectItem,{value:"operation_hook",text:"Operation Hook"}),React.createElement(SelectItem,{value:"resource",text:"Resources"}),React.createElement(SelectItem,{value:"template",text:"Rendering Templates"}),React.createElement(SelectItem,{value:"restmethod",text:"Rest Methods"}),React.createElement(SelectItem,{value:"import_export",text:"Import Export"}),React.createElement(SelectItem,{value:"widget_action",text:"Widget Actions"}),React.createElement(SelectItem,{value:"page_action",text:"Page Actions"}),React.createElement(SelectItem,{value:"style",text:"Styles"})),React.createElement(TextInput,{placeholder:"Search here...",onChange:this.searchChanged,required:"required",className:"sr-search-bar"}),React.createElement("div",{className:"searchResults"},searchResults)),React.createElement("div",{className:"sr-editorial-space"},React.createElement("div",{className:"content"},React.createElement("div",{className:this.state.editor.className},contentTabs,editorToolkit,this.editorContent)),React.createElement("div",{className:"footerPane"},footerTabs,footerContent),previewPane))}}]),Container}(React.Component)},_export("SrsteeIDE",SrsteeIDE=function(deps){return ideScope.Container}),_export("SrsteeIDE",SrsteeIDE),_export("default",SrsteeIDE),_export("states",states=[{KeyName:"showpreview_target",AccessPath:"showpreview_target",DefaultValue:'{"showpreview_target": ""}'},{KeyName:"ideFiles",AccessPath:"ideFiles",DefaultValue:'{"ideFiles": []}'},{KeyName:"showpreview",AccessPath:"showpreview",DefaultValue:'{"showpreview": false}'},{KeyName:"ide_reload",AccessPath:"ide_reload",DefaultValue:'{"ide_reload": false}'},{KeyName:"notifications",AccessPath:"notifications",DefaultValue:'{"notifications": []}'},{KeyName:"ide_state",AccessPath:"ide_state",DefaultValue:'{"ide_state": {}}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("client/script/studio/StudioUtil.js",["npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","client/script/persist/MMFAPI.js"],function(_export,_context2){"use strict";var _regeneratorRuntime,_asyncToGenerator,MMFAPI,StudioUtil;return{setters:[function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_clientScriptPersistMMFAPIJs){MMFAPI=_clientScriptPersistMMFAPIJs.MMFAPI}],execute:function(){_export("StudioUtil",StudioUtil={StudioUtil:function(){var self=this;this.bindAllMethods=function(){this.componentTypeUpdated=self.componentTypeUpdated.bind(this),this.styleTypeUpdated=self.styleTypeUpdated.bind(this),this.componentVersionChanged=self.componentVersionChanged.bind(this),this.triggerTypeUpdated=self.triggerTypeUpdated.bind(this),this.fileTypeUpdated=self.fileTypeUpdated.bind(this),this.refreshModels=self.refreshModels.bind(this),this.refreshAllModels=self.refreshAllModels.bind(this),this.scopeChanged=self.scopeChanged.bind(this),this.fileNameChanged=self.fileNameChanged.bind(this),this.saveForm=self.saveForm.bind(this),this.saveReusableScript=self.saveReusableScript.bind(this),this.saveImportExport=self.saveImportExport.bind(this),this.saveResource=self.saveResource.bind(this),this.saveTemplate=self.saveTemplate.bind(this),this.saveOperationHook=self.saveOperationHook.bind(this),this.saveComponent=self.saveComponent.bind(this),this.saveModel=self.saveModel.bind(this),this.savePage=self.savePage.bind(this),this.saveRestMethod=self.saveRestMethod.bind(this),this.saveWidgetAction=self.saveWidgetAction.bind(this),this.savePageAction=self.savePageAction.bind(this),this.padDefaultModelProps=self.padDefaultModelProps.bind(this),this.deleteRecord=self.deleteRecord.bind(this),this.getModels=self.getModels.bind(this),this.getAllModels=self.getAllModels.bind(this),this.resetForm=self.resetForm.bind(this),this.loadForm=self.loadForm.bind(this),this.searchChanged=self.searchChanged.bind(this),this.searchHandler=self.searchHandler.bind(this),this.codeChanged=self.codeChanged.bind(this),this.resizeEditor=self.resizeEditor.bind(this),this.hookonModelFieldUpdated=self.hookonModelFieldUpdated.bind(this),this.orderChanged=self.orderChanged.bind(this),this.contentTypeChanged=self.contentTypeChanged.bind(this),this.reloadPreview=self.reloadPreview.bind(this),this.componentCodeModeChanged=self.componentCodeModeChanged.bind(this),this.importExportModeChanged=self.importExportModeChanged.bind(this),this.cancelPreview=self.cancelPreview.bind(this),this.removeForm=self.removeForm.bind(this),this.addFormToTabs=self.addFormToTabs.bind(this),this.makeFormActive=self.makeFormActive.bind(this),this.searchCategoryUpdated=self.searchCategoryUpdated.bind(this),this.footerTabChange=self.footerTabChange.bind(this),this.pagePathChanged=self.pagePathChanged.bind(this),this.relativePathChanged=self.relativePathChanged.bind(this),this.addNewFile=self.addNewFile.bind(this),this.loadIDEFiles=self.loadIDEFiles.bind(this),this.updateActiveForm=self.updateActiveForm.bind(this)},this.updateActiveForm=function(form){var updatedIDEFiles=[];this.props.ideFiles&&this.props.ideFiles.map(function(ideFile,indx){"contentTabActive"==ideFile.className?updatedIDEFiles.push(form):updatedIDEFiles.push(ideFile)}),this.setState({form:form}),this.props.updateStore({updates:{ideFiles:updatedIDEFiles}})},this.loadIDEFiles=function(ideFiles){var activeForm=ideFiles.filter(function(ideFile,indx){return"contentTabActive"==ideFile.className});this.setState({openedForms:ideFiles,form:activeForm[0]})},this.makeFormActive=function(inputForm){var activeForm,openedForms=this.state.openedForms,tobeActiveForm=inputForm||this.state.form;if((activeForm=(activeForm=openedForms.filter(function(currentForm){return"contentTabActive"==currentForm.className}))&&activeForm.length>0?activeForm[0]:activeForm)!==tobeActiveForm){var position=this.editor.getPosition();activeForm.position=position,openedForms.forEach(function(currentForm,indx){currentForm.className=currentForm===tobeActiveForm?"contentTabActive":"contentTab"}),this.setState({openedForms:openedForms,form:tobeActiveForm}),this.props.updateStore({updates:{ideFiles:openedForms}})}},this.footerTabChange=function(e){var changer="form_field";switch(e.target.getAttribute("type")||e.target.parentElement.getAttribute("type")){case"form_field":changer="form_field";break;case"function":changer="function";break;case"console":changer="console";break;case"state":changer="state";break;case"action":changer="action";break;case"dependency":changer="dependency";break;case"validation":changer="validation";break;case"props":changer="props"}this.setState({footerChanger:changer})},this.pagePathChanged=function(e){var form=this.state.form,newValue=e.target.value;form.pagePath=newValue,this.updateActiveForm(form)},this.relativePathChanged=function(e){var form=this.state.form,newValue=e.target.value;form.relativePath=newValue,this.updateActiveForm(form)},this.removeForm=function(form){var tobeActiveForm,openedForms=this.state.openedForms;(openedForms=openedForms.filter(function(currentForm){return currentForm!==form}))&&openedForms.length>0?(openedForms.forEach(function(currentForm,indx){currentForm.className="contentTab"}),(tobeActiveForm=openedForms[openedForms.length-1]).className="contentTabActive"):(tobeActiveForm={file_id:-1,fileName:"Unnamed",className:"contentTabActive",type:"none",code:"//Welcome! Select the file type and file name to start adding new content...\n"},openedForms.push(tobeActiveForm)),this.setState({openedForms:openedForms,form:tobeActiveForm}),this.props.updateStore({updates:{ideFiles:openedForms}})},this.getInitialState=function(){var initForm={file_id:-1,fileName:"Unnamed",type:"none",className:"contentTabActive",code:"//Welcome! Select the file type and file name to start adding new content...\n"};return{modelData:{},allModelData:{},openedForms:[initForm],defaultFileType:"none",defaultText:"//Welcome! Select the file type and file name to start adding new content...\n",defaultFileName:"Unnamed",form:initForm,searchUpdated:!1,searchTree:[],search:{ide_type:"component"},previewReload:!1,PreviewComponent:null,model2tableMapper:{model:"MetaModel",component:"MetaComponent",style:"MetaStyle",page:"MetaRoute",restmethod:"MetaRestMethod",operation_hook:"MetaOperationHook",client_script:"MetaReusableScript",common_script:"MetaReusableScript",server_script:"MetaReusableScript",import_export:"MetaLocalSync",resource:"MetaResource",template:"MetaTemplate",widget_action:"MetaWidgetAction",page_action:"MetaSlideAction"},model2FieldsMapper:{model:["uid","Name","Scope","Definition"],component:["uid","Name","Scope","Definition","Type","CSS","WebComponent","Version"],style:["uid","Name","Styles","Scope","Type"],page:["uid","Name","Scope","Path","HTML"],restmethod:["uid","Name","Scope","Path","Definition","Type","Collection","is_public"],operation_hook:["uid","Name","Scope","Definition","Type","Model","Order"],client_script:["uid","Name","Scope","Definition","Type"],common_script:["uid","Name","Scope","Definition","Type"],server_script:["uid","Name","Scope","Definition","Type"],import_export:["uid","Name","Field","Order","Active","LocalPath","Table","Level","ImportScript","ExportScript","ImportCondition","ExportCondition"],resource:["uid","Name","Scope","Definition","Type"],template:["uid","Name","Scope","Definition"],widget_action:["uid","Name","Scope","Definition","Order","Trigger","Active"],page_action:["uid","Name","Scope","Definition","Order","Active"]},model2UniqueNameMapper:{model:"Name",component:"Name",page:"Name",restmethod:"Name",style:"Name",operation_hook:"Name",client_script:"Name",common_script:"Name",server_script:"Name",import_export:"Name",resource:"Name",template:"Name",widget_action:"Name",page_action:"Name"},searchResults:[],defaultCode:{model:'{\n  "Comments": "This is the example of the application model template",\n  "Applicant Name": {\n    "type": "String",\n    "required": true\n  },\n  "Qualifications": {\n    "type": "Text",\n    "required": true\n  }\n}',operation_hook:{"before.save":"function(){\n  /* Global variables - \n    past, live, changes, isNew, swap, $tbl, $fnc \n  */\n  //business logic\n\n}","after.save":"function(){\n  /* Global variables - \n    past, live, changes, isNew, swap, $tbl, $fnc \n  */\n  //business logic\n\n}","before.delete":"function(){\n  /* Global variables - \n    past, live, changes, isNew, swap, $tbl, $fnc \n  */\n  //business logic\n\n}","after.delete":"function(){\n  /* Global variables - \n    past, live, changes, isNew, swap, $tbl, $fnc \n  */\n  //business logic\n\n}"},component:'import React from "react"\nvar _$Component_ = class extends React.Component{\n    render(){\n        return (<div>\n                    <h2>Hello World!</h2>\n                </div>);\n    }\n}\n\nvar $Component = function(props) {\n   return _$Component_\n};\nexport {$Component};\n\n',style:"",page:"\x3c!--Add the page html--\x3e\n",import_export:{importScript:"(function() { \n //$input, $qry, $script, $fileUID, $fileContent, $topReject \n  $topResolve({}); \n})",exportScript:"(function() {\n  //$live, $qry, $script, $topResolve, $topReject \n  $topResolve({}); \n})"},reusable_script:'function() {\n   /*Usage: \n     var rs = new $fnc.<ReusableScriptName>();\n     var result = rs.method1();\n   */\n\n   /* Available global variables - \n     $tbl -- global object to access the available Models for any CRUD operations\n     $fnc -- global object to refer to any other Reusable Scripts\n   */\n   this.<MethodName> = function() {\n     //$tbl.ApplicationForm.find({"where":{"id":"3"}}, callback);\n     //var scriptObject = new $fnc.<AnotherScriptName>();\n     //var result = scriptObject.<MethodName>(...<Parameters>)\n   }\n}\n',reusable_ui_script:"var <scope> = {\n  <ScriptName>: function () {\n    var self = this;\n    this.<methodName> = function () {\n\n    }\n  }\n};\n\nvar <ScriptName> = <scope>.<ScriptName>;\nexport { <ScriptName> }\n",resource:"<xml/>\n",template:"export default function(name, templateDefinition, properties, rootElem) {\n//.... implement render function\n//Example - ReactDOM.render(<ReactComponent {...properties} />, rootElem);\n}\n",widget_action:"(function() {\n\t//$live, $widgets, $fields, $notifier, $qry, $script, navigateTo(url) \n})",page_action:"(function() {\n\t//$pageData, $widgets, $notifier, $qry, $script, navigateTo(url) \n})",restmethod:"(function() {\n\t//$pathParams, request, response, $resolve\n})"},defaultComponentVersion:"1.0.0",defaultTriggerType:"before.save",defaultComponentType:null,defaultStyleType:"css",editor:{width:.8*screen.width,height:.55*screen.height,mode:"collapsed",className:"editorNormal"},showPreview:!1,footerChanger:"form_field",searchResults:null}},this.componentTypeUpdated=function(e){var form=this.state.form,newValue=e.target.value;form.component_type=newValue},this.styleTypeUpdated=function(e){var form=this.state.form,newValue=e.target.value;form.style_type=newValue,this.updateActiveForm(form)},this.componentVersionChanged=function(e){var form=this.state.form,newValue=e.target.value;form.componentVersion=newValue,this.updateActiveForm(form)},this.triggerTypeUpdated=function(e){var form=this.state.form,newValue=e.target.value;form.trigger_type=newValue,newValue&&(form.file_id&&-1!=form.file_id||(form.code=this.state.defaultCode[form.type][newValue])),this.updateActiveForm(form)},this.addNewFile=function(e){var fileType=e.target.value||e.currentTarget.attributes.value.value,form={file_id:-1,fileName:"Unnamed",className:"contentTabActive",type:fileType,position:{lineNumber:1,column:1}};fileType?"operation_hook"==fileType?(form.modelId=form.file_id,this.getModels(this.refreshModels.bind(this)),form.component_type=this.state.defaultComponentType,form.trigger_type=this.state.defaultTriggerType,form.code=this.state.defaultCode[form.type][form.trigger_type],form.css="/* add css styles to the component */",form.html="\x3c!-- add html code to be injected when rendering the component --\x3e",form.mode="js"):"import_export"==fileType?(this.getAllModels(this.refreshAllModels.bind(this)),form.fileName="Unnamed",form.order=1,form.active=!0,form.Table="",form.Field="",form.level="Table",form.localPath="/",form.ImportScript=this.state.defaultCode[form.type].importScript,form.ExportScript=this.state.defaultCode[form.type].exportScript,form.ImportCondition="",form.ExportCondition="",form.mode="import"):"resource"==fileType?form.content_type="xml":form.code=this.state.defaultCode[form.type]:form.code="//Great to see you again... select the file type and search for any specific file you want to work with...",this.addFormToTabs(form,!0)},this.fileTypeUpdated=function(e){var form=this.state.form,modelId=form.file_id,newValue=e.target.value||e.currentTarget.attributes.value.value;this.state.form.type=newValue,form.type?("operation_hook"==form.type?(form.modelId=modelId,this.getModels(this.refreshModels.bind(this)),form.component_type=this.state.defaultComponentType,form.trigger_type=this.state.defaultTriggerType,form.code=this.state.defaultCode[form.type][form.trigger_type],form.css="/* add css styles to the component */",form.html="\x3c!-- add html code to be injected when rendering the component --\x3e",form.mode="js"):"import_export"==form.type?(this.getAllModels(this.refreshAllModels.bind(this)),form.fileName="Unnamed",form.order=1,form.active=!0,form.Table="",form.Field="",form.level="Table",form.localPath="/",form.ImportScript=this.state.defaultCode[form.type].importScript,form.ExportScript=this.state.defaultCode[form.type].exportScript,form.ImportCondition="",form.ExportCondition="",form.mode="import"):"resource"==form.type?form.content_type="xml":form.code=this.state.defaultCode[this.state.form.type],this.updateActiveForm(form)):(form.code="//Great to see you again... select the file type and search for any specific file you want to work with...",this.updateActiveForm(form))},this.searchCategoryUpdated=function(e){var newValue=e.target.value,searchObj=this.state.search;searchObj.ide_type=newValue,this.setState({search:searchObj,searchUpdated:!0}),this.getModels(this.refreshModels.bind(this)),this.getAllModels(this.refreshAllModels.bind(this)),this.searchChanged()},this.refreshModels=function(results){var self=this;if(results){var form=self.state.form,modelData=self.state.modelData;modelData.modelsForLookup=[],modelData.modelIds={},results.forEach(function(result){var model={};model.id=result.Name+"_"+result.Scope,model.text=result.Name+"["+result.Scope+"]",modelData.modelsForLookup.push(model),modelData.modelIds[model.text]=model.id}),self.setState({modelData:modelData}),Object.keys(modelData.modelIds).forEach(function(modelName){self.state.modelData.modelIds[modelName]==form.modelId&&(form.modelName=modelName)}),self.setState({form:form})}},this.refreshAllModels=function(modelNames){if(modelNames){var form=this.state.form,allModelData=this.state.allModelData||{};allModelData.allModelsForLookup=[],modelNames.forEach(function(modelName){var model={},modelId=modelName;modelName.indexOf("[")>-1&&(modelId=modelName.replace("[","_").replace("]","")),model.id=modelId,model.text=modelName,allModelData.allModelsForLookup.push(model)}),allModelData.allModelsForLookup.forEach(function(modelObj){modelObj.id==form.modelId&&(form.modelName=modelObj.text)}),this.updateActiveForm(form),this.setState({allModelData:allModelData})}},this.scopeChanged=function(e){var form=this.state.form,newValue=e.target.value;form.scope=newValue,this.updateActiveForm(form)},this.fileNameChanged=function(e){var form=this.state.form,newValue=e.target.value;form.fileName=newValue,this.updateActiveForm(form)},this.saveForm=function(){var form=this.state.form;if(form&&form.fileName&&(form.scope&&form.code||"import_export"==form.type||"widget_action"==form.type||"page_action"==form.type))switch(form.type){case"model":this.saveModel();break;case"component":this.saveComponent();break;case"style":this.saveStyles();break;case"page":this.savePage();break;case"restmethod":this.saveRestMethod();break;case"operation_hook":this.saveOperationHook();break;case"client_script":case"common_script":case"server_script":this.saveReusableScript();break;case"resource":this.saveResource();break;case"template":this.saveTemplate();break;case"import_export":this.saveImportExport();break;case"widget_action":this.saveWidgetAction();break;case"page_action":this.savePageAction()}},this.savePageAction=function(){var _this=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Definition:form.code,Scope:form.scope,Active:form.active,Order:form.order};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid"],function(data){form.file_id=data.uid,_this.updateActiveForm(form),_this.props.addFlashMessage({title:"Success - ",subtitle:"Updated page action "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid"],function(data){form.file_id=data.uid,_this.updateActiveForm(form),_this.props.addFlashMessage({title:"Success - ",subtitle:"New page action "+form.fileName+" created."})})}},this.saveWidgetAction=function(){var _this2=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var fileName=form.widgetFullName||form.fileName,payload={Name:fileName,Definition:form.code,Scope:form.scope,Trigger:fileName.indexOf("@@")>-1?form.trigger:"System",Active:form.active,Order:form.order};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid"],function(data){form.file_id=data.uid,_this2.updateActiveForm(form),_this2.props.addFlashMessage({title:"Success - ",subtitle:"Updated widget action "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid"],function(data){form.file_id=data.uid,_this2.updateActiveForm(form),_this2.props.addFlashMessage({title:"Success - ",subtitle:"New widget action "+form.fileName+" created."})})}},this.saveRestMethod=function(){var _this3=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Definition:form.code,Path:form.relativePath,Scope:form.scope,Type:form.method_type,Collection:form.collection,is_public:form.is_public};JSON.stringify(payload,null,"\t");form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid"],function(data){form.file_id=data.uid,_this3.updateActiveForm(form),_this3.props.addFlashMessage({title:"Success - ",subtitle:"Updated rest method "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid"],function(data){form.file_id=data.uid,_this3.updateActiveForm(form),_this3.props.addFlashMessage({title:"Success - ",subtitle:"New rest method "+form.fileName+" created."})})}},this.savePage=function(){var _this4=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,HTML:form.code,Path:form.pagePath,Scope:form.scope};JSON.stringify(payload,null,"\t");form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid","HTML"],function(data){form.file_id=data.uid,form.code=data.HTML?data.HTML.replace(/\[QUOTE\]/g,'\\"'):data.HTML,form.content_type="page",_this4.updateActiveForm(form),_this4.props.addFlashMessage({title:"Success - ",subtitle:"Updated page "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid","HTML"],function(data){form.file_id=data.uid,form.code=data.HTML?data.HTML.replace(/\[QUOTE\]/g,'\\"'):data.HTML,form.content_type="page",_this4.updateActiveForm(form),_this4.props.addFlashMessage({title:"Success - ",subtitle:"New page "+form.fileName+" created."})})}},this.saveResource=function(){var _this5=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Definition:form.code,Scope:form.scope};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid","Definition","Scope"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,_this5.updateActiveForm(form),_this5.props.addFlashMessage({title:"Success - ",subtitle:"Updated resource "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid","Definition","Scope"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,_this5.updateActiveForm(form),_this5.props.addFlashMessage({title:"Success - ",subtitle:"New resource "+form.fileName+" created."})})}},this.saveImportExport=function(){var _this6=this,form=this.state.form,importScript=form.importScript+"",exportScript=form.exportScript+"";if(importScript.indexOf("'")>-1||exportScript.indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Order:form.order,Active:form.active,Table:form.Table,Field:form.Field,Level:form.level,LocalPath:form.localPath,ImportScript:form.ImportScript,ExportScript:form.ExportScript,ImportCondition:form.ImportCondition,ExportCondition:form.ExportCondition};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid"],function(data){form.file_id=data.uid,_this6.updateActiveForm(form),_this6.props.addFlashMessage({title:"Success - ",subtitle:"Updated import/export file - "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid"],function(data){form.file_id=data.uid,_this6.updateActiveForm(form),_this6.props.addFlashMessage({title:"Success - ",subtitle:"New import/export "+form.fileName+" created."})})}},this.saveTemplate=function(){var _this7=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Definition:form.code,Scope:form.scope};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid","Definition","Scope"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,_this7.updateActiveForm(form),_this7.props.addFlashMessage({title:"Success - ",subtitle:"Updated template "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid","Definition","Scope"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,_this7.updateActiveForm(form),_this7.props.addFlashMessage({title:"Success - ",subtitle:"New template "+form.fileName+" created."})})}},this.saveReusableScript=function(){var _this8=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var contentType="common_script"==form.type?"common":"client_script"==form.type?"client":"server_script"==form.type?"server":form.type,payload={Name:form.fileName,Scope:form.scope,Definition:form.code,Type:contentType};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid","Definition","Scope","Type"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,form.type==data.Type=="common"||("client"==data.Type||("server"==data.Type||data.Type)),_this8.updateActiveForm(form),_this8.props.addFlashMessage({title:"Success - ",subtitle:"Updated reusable script "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid","Definition","Scope","Type"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,form.type==data.Type=="common"||("client"==data.Type||("server"==data.Type||data.Type)),_this8.updateActiveForm(form),_this8.props.addFlashMessage({title:"Success - ",subtitle:"New reusable script "+form.fileName+" created."})})}},this.saveOperationHook=function(){var _this9=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Scope:form.scope,Definition:form.code,Model:form.modelId,Type:form.trigger_type,Order:form.order};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord("MetaOperationHook",form.file_id,payload,["uid","Definition","Scope"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,_this9.updateActiveForm(form),_this9.props.addFlashMessage({title:"Success - ",subtitle:"Updated operation hook "+form.fileName})}):MMFAPI().createRecord("MetaOperationHook",payload,["uid","Definition","Scope"],function(data){form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,form.file_id=data.uid,_this9.updateActiveForm(form),_this9.props.addFlashMessage({title:"Success - ",subtitle:"New operation hook "+form.fileName+" created."})})}},this.saveComponent=function(){var _this10=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Scope:form.scope,Definition:form.code,Type:form.component_type,Version:form.componentVersion,HTML:form.html,CSS:form.css};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid","Definition","Scope","CSS"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,form.css=data.CSS,_this10.updateActiveForm(form),_this10.props.addFlashMessage({title:"Success - ",subtitle:"Updated component "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid","Definition","Scope","CSS"],function(data){form.file_id=data.uid,form.code=data.Definition?data.Definition.replace(/\[QUOTE\]/g,'\\"'):data.Definition,form.css=data.CSS,_this10.updateActiveForm(form),_this10.props.addFlashMessage({title:"Success - ",subtitle:"New component "+form.fileName+" created."})})}},this.saveStyles=function(){var _this11=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Scope:form.scope,Styles:form.code,Type:form.style_type};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid","Definition","Scope","CSS"],function(data){form.file_id=data.uid,form.code=data.Styles?data.Styles.replace(/\[QUOTE\]/g,'\\"'):data.Styles,_this11.updateActiveForm(form),_this11.props.addFlashMessage({title:"Success - ",subtitle:"Updated style "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid","Styles","Scope"],function(data){form.file_id=data.uid,form.code=data.Styles?data.Styles.replace(/\[QUOTE\]/g,'\\"'):data.Styles,_this11.updateActiveForm(form),_this11.props.addFlashMessage({title:"Success - ",subtitle:"New style "+form.fileName+" created."})})}},this.cancelPreview=function(){this.setState({showPreview:!1,resetEditor:!0})},this.saveModel=function(){var _this12=this,form=this.state.form;if((form.code+"").indexOf("'")>-1)this.props.addErrorMessage({title:"Error - ",subtitle:"Single quotes are not allowed. Please replace with double quotes and try again."});else{var payload={Name:form.fileName,Scope:form.scope,Definition:this.padDefaultModelProps(form.fileName,form.code)};form.file_id&&-1!=form.file_id?MMFAPI().updateRecord(this.state.model2tableMapper[form.type],form.file_id,payload,["uid","Definition","Scope"],function(data){form.file_id=data.uid;var properties=JSON.parse(data.Definition);properties&&(properties=properties.properties),form.code=JSON.stringify(properties,null,"\t"),_this12.updateActiveForm(form),_this12.props.addFlashMessage({title:"Success - ",subtitle:"Updated model "+form.fileName})}):MMFAPI().createRecord(this.state.model2tableMapper[form.type],payload,["uid","Definition","Scope"],function(data){form.file_id=data.uid,properties&&(properties=properties.properties),form.code=JSON.stringify(properties,null,"\t"),_this12.updateActiveForm(form),_this12.props.addFlashMessage({title:"Success - ",subtitle:"New model "+form.fileName+" created."})})}},this.padDefaultModelProps=function(name,code){var definition=JSON.parse(code);delete definition.Comments,code=code.replace(/\n/g,"\n\t\t");var paddedDefinition={idInjection:!0,base:"PersistedModel",options:{validateUpsert:!0,public:!0}};return paddedDefinition.name=name,paddedDefinition.plural=name+"s",paddedDefinition.properties=definition,JSON.stringify(paddedDefinition)},this.deleteRecord=function(){var _this13=this,form=this.state.form;self=this,form.file_id&&-1!=form.file_id&&MMFAPI().deleteRecord(this.state.model2tableMapper[form.type],form.file_id,function(data){_this13.removeForm(form)})},this.loadDependencies=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var dependencies;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,System.import("/routes?param.url=/about&");case 2:return dependencies=_context.sent,_context.abrupt("return",dependencies);case 4:case"end":return _context.stop()}},_callee,this)})),this.reloadPreview=function(){var self=this,loadComponentURL="/load/component?param.name="+this.state.form.fileName+"&now="+Date.now();System.import(loadComponentURL).then(function(dependencies){try{System.import("client/script/mmf/PreviewLoader.js").then(function(previewModule){self.editorModelViewState=self.editor.saveViewState(),self.setState({PreviewComponent:previewModule.PreviewLoader(dependencies),showPreview:!0})}).catch(function(err){console.log(err)})}catch(ex){console.log(ex)}}).catch(function(err){console.log("Error while loading the dependencies "+err)})},this.getModels=function(cb){MMFAPI().search(this.state.model2tableMapper.model,this.state.model2FieldsMapper.model,"{}",cb)},this.getAllModels=function(cb){var nonMetaModelTables=["MetaModel","MetaComponent","MetaComponentState","MetaComponentProps","MetaComponentAction","MetaComponentRequires","MetaOperationHook","MetaRelationship","MetaResource","MetaNavigation","MetaReusableScript","MetaQuery","MetaRestMethod","MetaPropery","MetaLocalSync","MetaDocument","MetaPalette","MetaPaletteItem","MetaDocumentMap","MetaDocFragment","MetaRoute","MetaRouteRequires","MetaScope","MetaSlide","MetaSlideAction","MetaSlideProps","MetaSlideSlot","MetaSlideSlotWidget","MetaStyle","MetaTemplate","MetaTransient","MetaWidgetAction","MetaWidgetProps","SrsteeRole","SrsteeTableACL","SrsteeTableACLRole","SrsteeUserRole","SrsteeUserGroup","SrsteeACL","SrsteeFieldACL","SrsteeFieldACLRole","SrsteeGroup","SrsteeGroupRole","SrsteeRecordACL","SrsteeRecordACLRole"];MMFAPI().search(this.state.model2tableMapper.model,this.state.model2FieldsMapper.model,"{}",function(modelsFromMetaModel){var allModelNames=nonMetaModelTables||[];modelsFromMetaModel.map(function(modelItem){allModelNames.push(modelItem.Name+"["+modelItem.Scope+"]")}),cb(allModelNames)})},this.resetForm=function(){var ideType=this.state.form.type?this.state.form.type:this.state.defaultFileType,form={type:ideType,fileName:this.state.defaultFileName,file_id:-1,modelName:"",trigger_type:"",scope:"",code:this.state.defaultText,html:this.state.defaultText,className:"contentTabActive",Type:"none",content_type:"xml"};ideType&&(form.type=ideType);var openedForms=this.state.openedForms;openedForms.push(form),this.setState({openedForms:openedForms,form:form}),this.props.updateStore({updates:{ideFiles:openedForms}})},this.loadForm=function(searchKey,contentType){var _this14=this,selectedRecord=this.state.searchResults.filter(function(searchObj){return searchObj.uid==searchKey});if(selectedRecord=selectedRecord&&selectedRecord.length>0?selectedRecord[0]:null){var form={};if(contentType){switch(form.fileName=selectedRecord.Name,form.scope=selectedRecord.Scope,form.code=selectedRecord.Definition,form.type=contentType,form.position={lineNumber:1,column:1},contentType){case"model":var definition=selectedRecord.Definition,properties=JSON.parse(definition);properties&&(properties=properties.properties),form.code=JSON.stringify(properties,null,"\t"),form.file_id=selectedRecord.uid;break;case"component":form.component_type=selectedRecord.Type,form.componentVersion=selectedRecord.Version,form.css=selectedRecord.CSS?selectedRecord.CSS:"/* add css styles to the component */",form.html=selectedRecord.HTML?selectedRecord.HTML:"\x3c!-- add html code to be injected when rendering the component --\x3e",form.file_id=selectedRecord.uid;break;case"style":form.style_type=selectedRecord.Type,form.code=selectedRecord.Styles?selectedRecord.Styles:"\x3c!-- add html code to be injected when rendering the component --\x3e",form.file_id=selectedRecord.uid;break;case"page":form.pagePath=selectedRecord.Path,form.css=selectedRecord.CSS?selectedRecord.CSS:"/* add css styles to the component */",form.code=selectedRecord.HTML?selectedRecord.HTML.replace(/\[QUOTE\]/g,'\\"'):"\x3c!-- add html code to be injected when rendering the component --\x3e",form.file_id=selectedRecord.uid;break;case"restmethod":form.relativePath=selectedRecord.Path,form.file_id=selectedRecord.uid,form.collection=selectedRecord.Collection,form.is_public=selectedRecord.is_public;break;case"import_export":form.fileName=selectedRecord.Name,form.order=selectedRecord.Order,form.active="true"==selectedRecord.Active,form.Table=selectedRecord.Table,form.Field=selectedRecord.Field,form.level=selectedRecord.Level,form.localPath=selectedRecord.LocalPath,form.ImportScript=selectedRecord.ImportScript?selectedRecord.ImportScript:"",form.ExportScript=selectedRecord.ExportScript?selectedRecord.ExportScript:"",form.ImportCondition=selectedRecord.ImportCondition,form.ExportCondition=selectedRecord.ExportCondition,form.file_id=selectedRecord.uid,form.mode="import";break;case"client_script":case"server_script":case"common_script":form.file_id=selectedRecord.uid;break;case"operation_hook":form.file_id=selectedRecord.uid,form.order=selectedRecord.Order?selectedRecord.Order:0,form.modelId=selectedRecord.Model,form.trigger_type=selectedRecord.Type;var matchingModelId=Object.keys(this.state.modelData.modelIds).filter(function(modelNameKey){return _this14.state.modelData.modelIds[modelNameKey]==form.modelId});form.modelName=matchingModelId&&matchingModelId.length>0?matchingModelId[0]:form.modelId;break;case"resource":form.file_id=selectedRecord.uid,form.content_type=selectedRecord.Type;break;case"widget_action":var widgetName=selectedRecord.Name;widgetName=widgetName.indexOf("@@")>-1?widgetName.split("@@")[0]:widgetName,form.widgetFullName=selectedRecord.Name,form.fileName=widgetName,form.file_id=selectedRecord.uid,form.trigger=selectedRecord.Trigger,form.order=selectedRecord.Order,form.active=selectedRecord.Active;break;case"page_action":form.fileName=selectedRecord.Name,form.file_id=selectedRecord.uid,form.order=selectedRecord.Order,form.active=selectedRecord.Active}this.addFormToTabs(form,!0)}}},this.addFormToTabs=function(formObj,makeItActive){var openedForms=this.state.openedForms,existingForm=openedForms.filter(function(inputFormObj){return inputFormObj.file_id==formObj.file_id&&inputFormObj.type==formObj.type});if(existingForm=existingForm?existingForm[0]:existingForm)openedForms.forEach(function(currentForm){currentForm.file_id==existingForm.file_id?(currentForm.className="contentTabActive",formObj=currentForm):currentForm.className="contentTab"});else{var className=makeItActive?"contentTabActive":"contentTab";openedForms.forEach(function(currentlyOpenedForm){currentlyOpenedForm.className="contentTab"}),formObj.className=className,openedForms.push(formObj)}this.setState({openedForms:openedForms,form:formObj,footerChanger:"form_field"}),this.props.updateStore({updates:{ideFiles:openedForms}})},this.searchChanged=function(e){var searchString=e&&e.target?e.target.value:"";if(searchString){var searchQuery=encodeURIComponent('{"where":{"'+this.state.model2UniqueNameMapper[this.state.search.ide_type]+'":{"like": "%'+searchString+'%"}}}');switch(this.state.search.ide_type){case"client_script":searchQuery=encodeURIComponent('{"where":{"'+this.state.model2UniqueNameMapper[this.state.search.ide_type]+'":{"like": "%'+searchString+'%"}, "Type": "client"}}');break;case"server_script":searchQuery=encodeURIComponent('{"where":{"'+this.state.model2UniqueNameMapper[this.state.search.ide_type]+'":{"like": "%'+searchString+'%"}, "Type": "server"}}');break;case"common_script":searchQuery=encodeURIComponent('{"where":{"'+this.state.model2UniqueNameMapper[this.state.search.ide_type]+'":{"like": "%'+searchString+'%"}, "Type": "common"}}')}MMFAPI().search(this.state.model2tableMapper[this.state.search.ide_type],this.state.model2FieldsMapper[this.state.search.ide_type],searchQuery,this.searchHandler)}else{var _searchQuery=encodeURIComponent("{}");switch(this.state.search.ide_type){case"client_script":_searchQuery=encodeURIComponent('{"where":{"Type": "client"}}');break;case"server_script":_searchQuery=encodeURIComponent('{"where":{"Type": "server"}}');break;case"common_script":_searchQuery=encodeURIComponent('{"where":{"Type": "common"}}')}MMFAPI().search(this.state.model2tableMapper[this.state.search.ide_type],this.state.model2FieldsMapper[this.state.search.ide_type],_searchQuery,this.searchHandler)}},this.searchHandler=function(results){var searchResults=this.state.searchResults;searchResults=results,this.setState({searchResults:searchResults,searchUpdated:!0})},this.codeChanged=function(newValue,e){var form=this.state.form;if(form.mode)switch(form.mode){case"css":form.css=newValue;break;case"html":form.html=newValue;break;case"js":form.code=newValue;break;case"import":form.ImportScript=newValue;break;case"export":form.ExportScript=newValue}else form.mode="js",form.code=newValue;this.updateActiveForm(form)},this.resizeEditor=function(e){var editor=this.state.editor,derivedWidth=.8*screen.width,derivedHeight=.55*screen.height;editor||(editor={width:derivedWidth,height:derivedHeight,mode:"collapsed",className:"editorNormal"});var screenWidth=screen.width,screenHeight=screen.height;switch(editor.mode){case"collapsed":editor={width:screenWidth,height:screenHeight,mode:"expanded",className:"editorFullScreen"};break;case"expanded":editor={width:derivedWidth,height:derivedHeight,mode:"collapsed",className:"editorNormal"}}this.setState({editor:editor})},this.hookonModelFieldUpdated=function(modelValue){var form=this.state.form;form.modelName=modelValue,form.modelId=this.state.modelData.modelIds[modelValue],this.updateActiveForm(form)},this.componentCodeModeChanged=function(){var form=this.state.form;if(form.mode)switch(form.mode){case"js":form.mode="css";break;case"css":form.mode="js"}else form.mode="css";this.updateActiveForm(form)},this.importExportModeChanged=function(){var form=this.state.form;if(form.mode)switch(form.mode){case"import":form.mode="export";break;case"export":form.mode="import"}else form.mode="import";this.updateActiveForm(form)},this.orderChanged=function(e){var form=this.state.form,newValue=e.target.value;form.order=newValue,this.updateActiveForm(form)},this.contentTypeChanged=function(e){var newValue=e.target.value,form=this.state.form;form.content_type=newValue,this.updateActiveForm(form)}}}.StudioUtil),_export("StudioUtil",StudioUtil),_export("default",StudioUtil)}}}),System.register("component/studio/IdeNavigator/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react/lib/components/UIShell"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,SideNav,SideNavMenu,SideNavMenuItem,_IdeNavigator_,IdeNavigator;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReactLibComponentsUIShell){_carbonComponentsReactLibComponentsUIShell.Content,SideNav=_carbonComponentsReactLibComponentsUIShell.SideNav,_carbonComponentsReactLibComponentsUIShell.SideNavItems,_carbonComponentsReactLibComponentsUIShell.SideNavLink,SideNavMenu=_carbonComponentsReactLibComponentsUIShell.SideNavMenu,SideNavMenuItem=_carbonComponentsReactLibComponentsUIShell.SideNavMenuItem}],execute:function(){_IdeNavigator_=function(_React$Component){function _IdeNavigator_(props){_classCallCheck(this,_IdeNavigator_);var _this=_possibleConstructorReturn(this,(_IdeNavigator_.__proto__||Object.getPrototypeOf(_IdeNavigator_)).call(this,props));return _this.handleClick=_this.handleClick.bind(_this),_this}return _inherits(_IdeNavigator_,_React$Component),_createClass(_IdeNavigator_,[{key:"transformData",value:function(data){var transformedData={};return data&&data.children&&Object.keys(data.children).map(function(itemsPerScope){transformedData[data.children[itemsPerScope].name]=transformedData[data.children[itemsPerScope].name]||[],data.children[itemsPerScope].children&&data.children[itemsPerScope].children.map(function(scopedItem){transformedData[data.children[itemsPerScope].name].push({id:scopedItem.id,name:scopedItem.name})})}),transformedData}},{key:"handleClick",value:function(e){var recordId=e.target.id?e.target.id:e.target.parentNode.id;this.props.postToggle({id:recordId})}},{key:"render",value:function(){var _this2=this,data=this.transformData(this.props.data),slideNavMenus=[];return Object.keys(data).map(function(scopeKey){var navMenuItems=[];data[scopeKey]&&data[scopeKey].map(function(navMenuItem){navMenuItems.push(React.createElement(SideNavMenuItem,{key:navMenuItem.id,id:navMenuItem.id,onClick:_this2.handleClick,href:"javascript:void(0)"},navMenuItem.name))}),slideNavMenus.push(React.createElement(SideNavMenu,{title:scopeKey},navMenuItems))}),React.createElement("div",null,React.createElement(SideNav,{isFixedNav:!0,expanded:!0,isChildOfHeader:!1,"aria-label":"Side navigation"},slideNavMenus))}}]),_IdeNavigator_}(React.Component),_export("IdeNavigator",IdeNavigator=function(props){return _IdeNavigator_}),_export("IdeNavigator",IdeNavigator)}}}),System.register("component/studio/IdeActionMapper/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewAction/Definition.js","client/script/mmf/DesignerConstants.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Search20,Edit20,GraphQLDataUtil,DESIGNER_CONST,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeActionMapper,IdeActionMapper;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibClose){_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewActionDefinitionJs){_componentMmfNewActionDefinitionJs.NewAction},function(_clientScriptMmfDesignerConstantsJs){DESIGNER_CONST=_clientScriptMmfDesignerConstantsJs.DESIGNER_CONST}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeActionMapper=function(_React$Component){function _IdeActionMapper(props){_classCallCheck(this,_IdeActionMapper);var _this=_possibleConstructorReturn(this,(_IdeActionMapper.__proto__||Object.getPrototypeOf(_IdeActionMapper)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],fileId:_this.props.compDetails?_this.props.compDetails.file_id:"-1",fileName:_this.props.compDetails?_this.props.compDetails.fileName:"",rowInfo:null,showPreview:!1,reload:!1},$ele.registerElement("NewAction","mmf","React"),_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_IdeActionMapper,_React$Component),_createClass(_IdeActionMapper,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"componentDidUpdate",value:function(prevProps,prevState){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_actions"==this.props.previewTarget&&(this.createRows(),this.setState({showPreview:!0,reload:!this.state.reload})),prevProps.compDetails&&prevProps.compDetails.file_id!==this.state.fileId&&this.createRows()}},{key:"createRows",value:function(){var self=this;GraphQLDataUtil().getRecord(DESIGNER_CONST.GET_META_COMPONENT_ACTION_BY_ID,{ActionComponent:this.state.fileId}).then(function(instances){if(instances&&instances.length>0){for(var initHead=instances[0].node,headers=Object.keys(initHead).map(function(key){return{key:key,header:key}}),rows=[],tabIn=0;tabIn<instances.length;tabIn++){var tableRow=instances[tabIn].node;tableRow.id=tabIn,rows.push(tableRow)}self.setState({headers:headers,rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"clearAll",value:function(){var checked=this.state.checked;this.state.rows.forEach(function(row,index){checked[index]=!!checked[index]&&!checked[index]}),this.setState({checked:checked,selectAll:!1})}},{key:"getCheckedItems",value:function(){var checkedItems=0;return this.state.checked.forEach(function(entry){entry&&checkedItems++}),checkedItems}},{key:"searchTable",value:function(evt){var newRows=[];this.state.rows.map(function(obj){Object.keys(obj).forEach(function(key){obj[key].toUpperCase().includes(evt.currentTarget.value.toUpperCase())&&!newRows.includes(obj)&&newRows.push(obj)})}),this.setState({filteredRows:newRows})}},{key:"showPreview",value:function(rowData){var rowInfo={};rowData&&rowData.cells&&rowData.cells.length>0&&rowData.cells.forEach(function(cell){var key=cell&&cell.id&&cell.id.split(":")[1];rowInfo[key]=cell.value}),this.setState({rowInfo:rowInfo,showPreview:!0}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"render",value:function(){var _this3=this,self=this,recordData=this.state.rowInfo?JSON.stringify(this.state.rowInfo):null,preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_actions"},React.createElement("new-action",{record:recordData,component_id:this.state.fileId,component_name:this.state.fileName,lite:!0})):React.createElement("div",null);return React.createElement("div",{className:"ide-action-mapper"},preview,React.createElement("style",null,'@import url("component/studio/IdeActionMapper/Style.css");'),React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails&&props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeActionMapper}(React.Component),_export("IdeActionMapper",IdeActionMapper=function(props){return _IdeActionMapper}),_export("IdeActionMapper",IdeActionMapper)}}}),System.register("component/studio/IdeConsole/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_IdeConsole,IdeConsole;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_IdeConsole=function(_React$Component){function _IdeConsole(){return _classCallCheck(this,_IdeConsole),_possibleConstructorReturn(this,(_IdeConsole.__proto__||Object.getPrototypeOf(_IdeConsole)).apply(this,arguments))}return _inherits(_IdeConsole,_React$Component),_createClass(_IdeConsole,[{key:"render",value:function(){return React.createElement("div",{className:"ide-console"},React.createElement("span",null,"IdeConsole goes here..."))}}]),_IdeConsole}(React.Component),_export("IdeConsole",IdeConsole=function(props){return _IdeConsole}),_export("IdeConsole",IdeConsole)}}}),System.register("component/studio/IdeDependency/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewRouteRequires/Definition.js"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Edit20,Search20,Close32,GraphQLDataUtil,ErrorBoundary,NewRouteRequires,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeDependency,IdeDependency;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewRouteRequiresDefinitionJs){NewRouteRequires=_componentMmfNewRouteRequiresDefinitionJs.NewRouteRequires}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeDependency=function(_React$Component){function _IdeDependency(props){_classCallCheck(this,_IdeDependency);var _this=_possibleConstructorReturn(this,(_IdeDependency.__proto__||Object.getPrototypeOf(_IdeDependency)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],reload:!1},_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.state.showPreview=!1,_this.state.fileId=_this.props.compDetails.file_id,_this.state.fileName=_this.props.compDetails.fileName,_this.state.rowInfo=null,$ele.registerElement("NewRouteRequires","mmf","React"),_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_IdeDependency,_React$Component),_createClass(_IdeDependency,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_deps"==this.props.previewTarget&&this.setState({showPreview:!0,reload:!this.state.reload}),prevProps.reload==this.props.reload&&prevProps.compDetails.file_id===this.props.compDetails.file_id||this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var self=this;GraphQLDataUtil().getRecord("mmf.getMetaRouteRequiresByRoute",{Router:this.state.fileId}).then(function(instances){if(instances&&instances.length>0){for(var rows=[],tabIn=0;tabIn<instances.length;tabIn++){var instance=instances[tabIn].node,tableRow={};tableRow.id=tabIn,tableRow.RequiredComponent=instance.requiredComponent.Name,tableRow.RequiredComponentId=instance.RequiredComponent,tableRow.Order=instance.Order,tableRow.uid=instance.uid,tableRow.Router=instance.Router,rows.push(tableRow)}self.setState({headers:[{key:"RequiredComponent",header:"RequiredComponent"},{key:"Order",header:"Order"}],rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"getComponentToRender",value:function(){var NewRouteReqComp=NewRouteRequires();return React.createElement("div",{className:"previewPane"},React.createElement(NewRouteReqComp,{routeId:this.state.fileId,routeName:this.state.fileName,isFromStateMapper:!0,rowInfo:this.state.rowInfo}))}},{key:"getPreviewPane",value:function(){var newRouteComp=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(newRouteComp);return React.createElement("div",null,React.createElement("div",{className:"screenOverlay"}),React.createElement(Close32,{className:"cancelPreview",onClick:this.cancelPreview.bind(this)}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.setState({showPreview:!1})}},{key:"showPreview",value:function(rowId){var rowInfo=this.state.rows.filter(function(rowItem){return rowItem.id==rowId});rowInfo=rowInfo&&rowInfo.length>0?rowInfo[0]:null,this.setState({showPreview:!0,rowInfo:rowInfo}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"clearAll",value:function(){var checked=this.state.checked;this.state.rows.forEach(function(row,index){checked[index]=!!checked[index]&&!checked[index]}),this.setState({checked:checked,selectAll:!1})}},{key:"getCheckedItems",value:function(){var checkedItems=0;return this.state.checked.forEach(function(entry){entry&&checkedItems++}),checkedItems}},{key:"searchTable",value:function(evt){var newRows=[];this.state.rows.map(function(obj){Object.keys(obj).forEach(function(key){obj[key].toUpperCase().includes(evt.currentTarget.value.toUpperCase())&&!newRows.includes(obj)&&newRows.push(obj)})}),this.setState({filteredRows:newRows})}},{key:"batchActionClick",value:function(){}},{key:"render",value:function(){var _this3=this,recordData=(this.getCheckedItems(),this.state.rowInfo?JSON.stringify({uid:this.state.rowInfo.uid,component_id:this.state.rowInfo.RequiredComponentId,order:this.state.rowInfo.Order}):null),preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_deps"},React.createElement("new-route-requires",{record:recordData,route_id:this.state.fileId,route_name:this.state.fileName})):React.createElement("div",null),self=this;return React.createElement("div",{className:"ide-state-mapper"},React.createElement("style",null,'@import url("component/studio/IdeDependency/Style.css");'),this.state.showPreview?preview:null,React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row.id)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeDependency}(React.Component),_export("IdeDependency",IdeDependency=function(props){return _IdeDependency}),_export("IdeDependency",IdeDependency)}}}),System.register("component/studio/IdeFormFields/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_IdeFormFields,IdeFormFields;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){_carbonComponentsReact.Select,_carbonComponentsReact.SelectItem,_carbonComponentsReact.TextInput}],execute:function(){_IdeFormFields=function(_React$Component){function _IdeFormFields(){return _classCallCheck(this,_IdeFormFields),_possibleConstructorReturn(this,(_IdeFormFields.__proto__||Object.getPrototypeOf(_IdeFormFields)).apply(this,arguments))}return _inherits(_IdeFormFields,_React$Component),_createClass(_IdeFormFields,[{key:"render",value:function(){var groupParentStyle={display:"block",width:"100vw",float:"left",marginBottom:10},groupElementStyle={marginRight:30,width:"20vw",display:"inline-block",float:"left"},groupedItems={},fieldResult=[],formFields=this.props.form&&this.props.form.formFields?this.props.form.formFields:[],fieldCount=0;return[formFields.fileType,formFields.fileName,formFields.scope,formFields.pagePath,formFields.componentType,formFields.styleType,formFields.componentVersion,formFields.hookOnModelField,formFields.content_type,formFields.triggerTypeField,formFields.hookSequenceField,formFields.importFromModel,formFields.importOnModelField,formFields.importExportOrder,formFields.localPathField,formFields.importExportLevel,formFields.importExportActive,formFields.importConditionField,formFields.exportConditionField,formFields.widgetTrigger,formFields.widgetOrder,formFields.widgetActive,formFields.widgetUpdateType,formFields.widgetUpdateTarget,formFields.pageActionActive,formFields.pageActionOrder,formFields.relativePath,formFields.methodType,formFields.methodCollection,formFields.isPublic].map(function(field,indx){if(field){var group=parseInt(fieldCount/4);groupedItems[group]=groupedItems[group]||[],groupedItems[group].push(React.createElement("div",{style:groupElementStyle},field)),fieldCount++}}),Object.keys(groupedItems).length>0&&Object.keys(groupedItems).map(function(groupItemKey,indx){var fieldGroup=React.createElement("div",{style:groupParentStyle},groupedItems[groupItemKey]);fieldResult.push(fieldGroup)}),React.createElement("div",{className:"footerContents"},React.createElement("style",null,'@import url("component/studio/IdeFormFields/Style.css");'),fieldResult)}}]),_IdeFormFields}(React.Component),_export("IdeFormFields",IdeFormFields=function(props){return _IdeFormFields}),_export("IdeFormFields",IdeFormFields)}}}),System.register("component/studio/IdeStateMapper/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewState/Definition.js","client/script/mmf/DesignerConstants.js","component/studio/IdeStateMapper/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Edit20,Search20,Close32,GraphQLDataUtil,ErrorBoundary,NewState,DESIGNER_CONST,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeStateMapper,IdeStateMapper;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewStateDefinitionJs){NewState=_componentMmfNewStateDefinitionJs.NewState},function(_clientScriptMmfDesignerConstantsJs){DESIGNER_CONST=_clientScriptMmfDesignerConstantsJs.DESIGNER_CONST},function(_componentStudioIdeStateMapperStyleCssCss){}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeStateMapper=function(_React$Component){function _IdeStateMapper(props){_classCallCheck(this,_IdeStateMapper);var _this=_possibleConstructorReturn(this,(_IdeStateMapper.__proto__||Object.getPrototypeOf(_IdeStateMapper)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],reload:!1},_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.state.showPreview=!1,_this.state.fileId=_this.props.compDetails.file_id,_this.state.fileName=_this.props.compDetails.fileName,_this.state.rowInfo=null,_this.createRows=_this.createRows.bind(_this),$ele.registerElement("NewState","mmf","React"),_this}return _inherits(_IdeStateMapper,_React$Component),_createClass(_IdeStateMapper,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_state"==this.props.previewTarget&&this.setState({showPreview:!1,reload:!this.state.reload}),prevProps.reload==this.props.reload&&prevProps.compDetails.file_id===this.props.compDetails.file_id||this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var self=this;GraphQLDataUtil().getRecord(DESIGNER_CONST.GET_META_COMPONENT_STATE_BY_ID,{StateComponent:this.state.fileId}).then(function(instances){if(instances&&instances.length>0){for(var initHead=instances[0].node,headers=Object.keys(initHead).map(function(key){return{key:key,header:key}}),rows=[],tabIn=0;tabIn<instances.length;tabIn++){var tableRow=instances[tabIn].node;tableRow.id=tabIn,rows.push(tableRow)}self.setState({headers:headers,rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"getComponentToRender",value:function(){var NewStateComp=NewState();return React.createElement("div",{className:"previewPane"},React.createElement(NewStateComp,{component_id:this.state.fileId,componentName:this.state.fileName,isFromStateMapper:!0,rowInfo:this.state.rowInfo}))}},{key:"getPreviewPane",value:function(){var newStateComp=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(newStateComp);return previewComponent=React.createElement("preview-component",null,React.createElement("new-state",{component_id:this.state.fileId,component_name:this.state.fileName,lite:!0})),React.createElement("div",null,React.createElement("div",{className:"screenOverlay"}),React.createElement(Close32,{className:"cancelPreview",onClick:this.cancelPreview.bind(this)}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.setState({showPreview:!1})}},{key:"showPreview",value:function(rowData){var rowInfo={};rowData&&rowData.cells&&rowData.cells.length>0&&rowData.cells.forEach(function(cell){var key=cell&&cell.id&&cell.id.split(":")[1];rowInfo[key]=cell.value}),this.setState({showPreview:!0,rowInfo:rowInfo}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"clearAll",value:function(){var checked=this.state.checked;this.state.rows.forEach(function(row,index){checked[index]=!!checked[index]&&!checked[index]}),this.setState({checked:checked,selectAll:!1})}},{key:"getCheckedItems",value:function(){var checkedItems=0;return this.state.checked.forEach(function(entry){entry&&checkedItems++}),checkedItems}},{key:"searchTable",value:function(evt){var newRows=[];this.state.rows.map(function(obj){Object.keys(obj).forEach(function(key){obj[key].toUpperCase().includes(evt.currentTarget.value.toUpperCase())&&!newRows.includes(obj)&&newRows.push(obj)})}),this.setState({filteredRows:newRows})}},{key:"batchActionClick",value:function(){}},{key:"render",value:function(){var _this3=this,recordData=(this.getCheckedItems(),this.state.rowInfo?JSON.stringify(this.state.rowInfo):null),preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_state"},React.createElement("new-state",{record:recordData,component_id:this.state.fileId,component_name:this.state.fileName})):React.createElement("div",null),self=this;return React.createElement("div",{className:"ide-state-mapper"},React.createElement("style",null,'@import url("component/studio/IdeStateMapper/Style.css");'),preview,React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeStateMapper}(React.Component),_export("IdeStateMapper",IdeStateMapper=function(props){return _IdeStateMapper}),_export("IdeStateMapper",IdeStateMapper)}}}),System.register("component/studio/IdeValidation/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_IdeValidation,IdeValidation;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_IdeValidation=function(_React$Component){function _IdeValidation(){return _classCallCheck(this,_IdeValidation),_possibleConstructorReturn(this,(_IdeValidation.__proto__||Object.getPrototypeOf(_IdeValidation)).apply(this,arguments))}return _inherits(_IdeValidation,_React$Component),_createClass(_IdeValidation,[{key:"render",value:function(){return React.createElement("div",{className:"ide-validator"},React.createElement("span",null,"IdeValidation goes here..."))}}]),_IdeValidation}(React.Component),_export("IdeValidation",IdeValidation=function(props){return _IdeValidation}),_export("IdeValidation",IdeValidation)}}}),System.register("component/studio/ErrorBoundary/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","component/studio/ErrorBoundary/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,ErrorBoundary,catchFunc;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default,_react.Component},function(_componentStudioErrorBoundaryStyleCssCss){}],execute:function(){_export("ErrorBoundary",ErrorBoundary=function(WrappedComponent){return function(_React$Component){function ErrorBoundaryComp(props){_classCallCheck(this,ErrorBoundaryComp);var _this=_possibleConstructorReturn(this,(ErrorBoundaryComp.__proto__||Object.getPrototypeOf(ErrorBoundaryComp)).call(this,props));return _this.state={error:null,errorInfo:null,hasError:null},_this}return _inherits(ErrorBoundaryComp,_React$Component),_createClass(ErrorBoundaryComp,[{key:"componentDidCatch",value:function(error,errorInfo){catchFunc(error,errorInfo,this)}},{key:"render",value:function(){return this.state.errorInfo?React.createElement("div",{className:"ErrorPane"},React.createElement("style",null,'@import url("component/studio/ErrorBoundary/Style.css");'),React.createElement("h2",null,"Oops!! Something went wrong."),React.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),React.createElement("br",null),this.state.errorInfo.componentStack)):WrappedComponent}}],[{key:"getDerivedStateFromError",value:function(error){return{hasError:!0,error:error.name,errorInfo:error.stack}}}]),ErrorBoundaryComp}(React.Component)}),catchFunc=function(error,errorInfo,ctx){ctx.setState({error:error,errorInfo:errorInfo})},_export("ErrorBoundary",ErrorBoundary)}}}),System.register("component/studio/IdeProps/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/edit/20","@carbon/icons-react/lib/search/20","@carbon/icons-react/lib/close/32","client/script/mmf/GraphQLDataUtil.js","component/studio/ErrorBoundary/Definition.js","component/mmf/NewComponentProp/Definition.js","client/script/mmf/DesignerConstants.js","component/studio/IdeStateMapper/Style.css!css"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,DataTable,Button,Pagination,Edit20,Search20,Close32,GraphQLDataUtil,ErrorBoundary,NewComponentProp,DESIGNER_CONST,TableContainer,Table,TableHead,TableRow,TableBody,TableCell,TableHeader,TableToolbar,TableSelectRow,TableSelectAll,TableToolbarSearch,TableToolbarContent,TableToolbarAction,_IdeProps_,IdeProps;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){DataTable=_carbonComponentsReact.DataTable,Button=_carbonComponentsReact.Button,Pagination=_carbonComponentsReact.Pagination},function(_carbonIconsReactLibEdit){Edit20=_carbonIconsReactLibEdit.default},function(_carbonIconsReactLibSearch){Search20=_carbonIconsReactLibSearch.default},function(_carbonIconsReactLibClose){Close32=_carbonIconsReactLibClose.default},function(_clientScriptMmfGraphQLDataUtilJs){GraphQLDataUtil=_clientScriptMmfGraphQLDataUtilJs.GraphQLDataUtil},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentMmfNewComponentPropDefinitionJs){NewComponentProp=_componentMmfNewComponentPropDefinitionJs.NewComponentProp},function(_clientScriptMmfDesignerConstantsJs){DESIGNER_CONST=_clientScriptMmfDesignerConstantsJs.DESIGNER_CONST},function(_componentStudioIdeStateMapperStyleCssCss){}],execute:function(){TableContainer=DataTable.TableContainer,Table=DataTable.Table,TableHead=DataTable.TableHead,TableRow=DataTable.TableRow,TableBody=DataTable.TableBody,TableCell=DataTable.TableCell,TableHeader=DataTable.TableHeader,TableToolbar=DataTable.TableToolbar,TableSelectRow=DataTable.TableSelectRow,TableSelectAll=DataTable.TableSelectAll,TableToolbarSearch=DataTable.TableToolbarSearch,TableToolbarContent=DataTable.TableToolbarContent,TableToolbarAction=DataTable.TableToolbarAction,DataTable.TableBatchActions,DataTable.TableBatchAction,_IdeProps_=function(_React$Component){function _IdeProps_(props){_classCallCheck(this,_IdeProps_);var _this=_possibleConstructorReturn(this,(_IdeProps_.__proto__||Object.getPrototypeOf(_IdeProps_)).call(this,props));return _this.state={checked:[],selectAll:!1,rows:[],filteredRows:[],headers:[],rowsSubset:[],reload:!1},_this.PAGINATION_PAGE_SIZE_DEFAULT=5,_this.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT=[5,10],_this.state.showPreview=!1,_this.state.fileId=_this.props.compDetails.file_id,_this.state.fileName=_this.props.compDetails.fileName,_this.state.rowInfo=null,$ele.registerElement("NewComponentProp","mmf","React"),_this.createRows=_this.createRows.bind(_this),_this}return _inherits(_IdeProps_,_React$Component),_createClass(_IdeProps_,[{key:"componentDidMount",value:function(){this.createRows()}},{key:"componentDidUpdate",value:function(prevProps){prevProps.showPreview!=this.props.showPreview&&prevProps.previewTarget!=this.props.previewTarget&&"ide_props"==this.props.previewTarget&&(this.createRows(),this.setState({showPreview:!0,reload:!this.state.reload})),prevProps.reload==this.props.reload&&prevProps.compDetails.file_id===this.props.compDetails.file_id||this.createRows()}},{key:"renderEditable",value:function(cellInfo){return React.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0})}},{key:"createRows",value:function(){var self=this,componentId=this.state.fileId?this.state.fileId:"";GraphQLDataUtil().getRecord(DESIGNER_CONST.GET_META_COMPONENT_PROP_BY_ID,{componentId:componentId}).then(function(instances){if(instances&&instances.length>0){for(var initHead=instances[0].node,headers=Object.keys(initHead).map(function(key){return{key:key,header:key}}),rows=[],tabIn=0;tabIn<instances.length;tabIn++){var tableRow=instances[tabIn].node;tableRow.id=tabIn,rows.push(tableRow)}var rowsWithZeroOrder=(rows=rows.sort(function(a,b){return a.Order?b.Order?a.Order-b.Order:-1:b.Order?1:-1})).filter(function(row){return 0==row.Order});rows=rows.filter(function(row){return 0!=row.Order}),rows=rowsWithZeroOrder.concat(rows),self.setState({headers:headers,rows:rows,rowsSubset:rows.slice(0,self.PAGINATION_PAGE_SIZE_DEFAULT)})}})}},{key:"getComponentToRender",value:function(){var NewCompProp=NewComponentProp();return React.createElement("div",{className:"previewPane"},React.createElement(NewCompProp,{componentId:this.state.fileId,componentName:this.state.fileName,record:this.state.rowInfo}))}},{key:"getPreviewPane",value:function(){var newStateComp=this.getComponentToRender(),ComponentToPreview=ErrorBoundary(newStateComp);return React.createElement("div",null,React.createElement("div",{className:"screenOverlay"}),React.createElement(Close32,{className:"cancelPreview",onClick:this.cancelPreview.bind(this)}),React.createElement(ComponentToPreview,null))}},{key:"cancelPreview",value:function(){this.setState({showPreview:!1})}},{key:"showPreview",value:function(rowData){var rowInfo={};rowData&&rowData.cells&&rowData.cells.length>0&&rowData.cells.forEach(function(cell){var key=cell&&cell.id&&cell.id.split(":")[1];rowInfo[key]=cell.value}),this.setState({showPreview:!0,rowInfo:rowInfo}),this.props.updateStore({updates:{showpreview:!0}})}},{key:"handlePaginationChange",value:function(e){var pageNumber=e.page,pageSize=e.pageSize,start=(pageNumber-1)*pageSize,end=pageNumber*pageSize;this.setState({rowsSubset:this.state.rows.slice(start,end)})}},{key:"selectAll",value:function(){var _this2=this,checked=this.state.checked;this.state.rows.forEach(function(row,index){_this2.state.selectAll?checked[index]=!1:checked[index]=!0}),this.setState({checked:checked,selectAll:!this.state.selectAll})}},{key:"selectRow",value:function(index){var checked=this.state.checked;checked[index]=!checked[index]||!checked[index],this.setState({checked:checked,selectAll:!1!==checked[index]&&this.state.selectAll})}},{key:"render",value:function(){var _this3=this,recordData=this.state.rowInfo?JSON.stringify(this.state.rowInfo):null,preview=this.state.showPreview?React.createElement("preview-component",{target:"ide_props"},React.createElement("new-component-prop",{record:recordData,component_id:this.state.fileId,component_name:this.state.fileName})):React.createElement("div",null),self=this;return React.createElement("div",{className:"ide-state-mapper"},React.createElement("style",null,'@import url("component/studio/IdeStateMapper/Style.css");'),preview,React.createElement(DataTable,{rows:this.state.rowsSubset,headers:this.state.headers,render:function(_ref){var rows=_ref.rows,headers=_ref.headers,getHeaderProps=_ref.getHeaderProps,getSelectionProps=_ref.getSelectionProps,onInputChange=(_ref.getBatchActionProps,_ref.onInputChange);_ref.selectedRows;return React.createElement(TableContainer,{title:_this3.tableName},React.createElement(TableToolbar,null,self.state.showSearch?React.createElement(TableToolbarSearch,{onChange:onInputChange}):null,React.createElement(TableToolbarContent,null,React.createElement(TableToolbarAction,{onClick:function(){self.setState({showSearch:!self.state.showSearch})}},React.createElement(Search20,null)),React.createElement(Button,{small:!0,kind:"primary",onClick:_this3.showPreview.bind(_this3)},"Add new"))),React.createElement(Table,null,React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableSelectAll,getSelectionProps()),headers.map(function(header){return React.createElement(TableHeader,getHeaderProps({header:header}),header.header)}))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableSelectRow,getSelectionProps({row:row})),row.cells.map(function(cell){return React.createElement(TableCell,{key:cell.id},cell.value)}),React.createElement(TableCell,null,React.createElement(Edit20,{onClick:function(){self.showPreview(row)}})))}))),React.createElement(Pagination,{totalItems:_this3.state.rows.length,pageSize:_this3.PAGINATION_PAGE_SIZE_DEFAULT,pageSizes:_this3.PAGINATION_PAGE_SIZE_OPTIONS_DEFAULT,onChange:_this3.handlePaginationChange.bind(_this3)}))}}))}}],[{key:"getDerivedStateFromProps",value:function(props,state){return props.compDetails.file_id!==state.fileId?{fileId:props.compDetails.file_id,fileName:props.compDetails.fileName}:null}}]),_IdeProps_}(React.Component),_export("IdeProps",IdeProps=function(props){return _IdeProps_}),_export("IdeProps",IdeProps)}}}),System.register("client/script/studio/StudioFormUtil.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","carbon-components-react","@carbon/icons-react/lib/close/32","@carbon/icons-react/lib/menu/16","component/studio/IdeNavigator/Definition.js","component/studio/ErrorBoundary/Definition.js","component/studio/IdeActionMapper/Definition.js","component/studio/IdeConsole/Definition.js","component/studio/IdeDependency/Definition.js","component/studio/IdeFormFields/Definition.js","component/studio/IdeStateMapper/Definition.js","component/studio/IdeValidation/Definition.js","component/studio/IdeProps/Definition.js"],function(_export,_context){"use strict";var _extends,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,Select,SelectItem,TextInput,OverflowMenu,OverflowMenuItem,Tabs,Tab,Checkbox,Close64,Menu16,IdeNavigator,ErrorBoundary,IdeActionMapper,IdeConsole,IdeDependency,IdeFormFields,IdeStateMapper,IdeValidation,IdeProps,studio,StudioFormUtil;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,_carbonComponentsReact.ComboBox,TextInput=_carbonComponentsReact.TextInput,OverflowMenu=_carbonComponentsReact.OverflowMenu,OverflowMenuItem=_carbonComponentsReact.OverflowMenuItem,Tabs=_carbonComponentsReact.Tabs,Tab=_carbonComponentsReact.Tab,Checkbox=_carbonComponentsReact.Checkbox},function(_carbonIconsReactLibClose){Close64=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibMenu){Menu16=_carbonIconsReactLibMenu.default},function(_componentStudioIdeNavigatorDefinitionJs){IdeNavigator=_componentStudioIdeNavigatorDefinitionJs.IdeNavigator},function(_componentStudioErrorBoundaryDefinitionJs){ErrorBoundary=_componentStudioErrorBoundaryDefinitionJs.ErrorBoundary},function(_componentStudioIdeActionMapperDefinitionJs){IdeActionMapper=_componentStudioIdeActionMapperDefinitionJs.IdeActionMapper},function(_componentStudioIdeConsoleDefinitionJs){IdeConsole=_componentStudioIdeConsoleDefinitionJs.IdeConsole},function(_componentStudioIdeDependencyDefinitionJs){IdeDependency=_componentStudioIdeDependencyDefinitionJs.IdeDependency},function(_componentStudioIdeFormFieldsDefinitionJs){IdeFormFields=_componentStudioIdeFormFieldsDefinitionJs.IdeFormFields},function(_componentStudioIdeStateMapperDefinitionJs){IdeStateMapper=_componentStudioIdeStateMapperDefinitionJs.IdeStateMapper},function(_componentStudioIdeValidationDefinitionJs){IdeValidation=_componentStudioIdeValidationDefinitionJs.IdeValidation},function(_componentStudioIdePropsDefinitionJs){IdeProps=_componentStudioIdePropsDefinitionJs.IdeProps}],execute:function(){studio={SearchScopeHeader:function(_React$Component){function SearchScopeHeader(){return _classCallCheck(this,SearchScopeHeader),_possibleConstructorReturn(this,(SearchScopeHeader.__proto__||Object.getPrototypeOf(SearchScopeHeader)).apply(this,arguments))}return _inherits(SearchScopeHeader,_React$Component),_createClass(SearchScopeHeader,[{key:"render",value:function(){return React.createElement("div",{className:"searchScopeHeader"},this.props.value)}}]),SearchScopeHeader}(React.Component),StudioFormUtil:function(){var self=this;this.getFormFields=function(){var _this2=this,resultForm={};switch(resultForm.fileType=React.createElement(Select,{onChange:this.fileTypeUpdated,label:"File Type",value:this.state.form.type,defaultValue:"none",required:"required",className:"sr-carb-sele"},React.createElement(SelectItem,{value:"none",text:"Choose File Type"}),React.createElement(SelectItem,{value:"page",text:"Page"}),React.createElement(SelectItem,{value:"restmethod",text:"Rest Method"}),React.createElement(SelectItem,{value:"component",text:"Component"}),React.createElement(SelectItem,{value:"style",text:"Styles"}),React.createElement(SelectItem,{value:"client_script",text:"Client Scripts"}),React.createElement(SelectItem,{value:"server_script",text:"Server Scripts"}),React.createElement(SelectItem,{value:"common_script",text:"Common Scripts"}),React.createElement(SelectItem,{value:"model",text:"Model"}),React.createElement(SelectItem,{value:"operation_hook",text:"Operation Hook"}),React.createElement(SelectItem,{value:"resource",text:"Resources"}),React.createElement(SelectItem,{value:"template",text:"Rendering Templates"}),React.createElement(SelectItem,{value:"import_export",text:"Import Export"}),React.createElement(SelectItem,{value:"widget_action",text:"Widget Action"}),React.createElement(SelectItem,{value:"page_action",text:"Page Action"})),resultForm.fileName=React.createElement(TextInput,{placeholder:"Enter File Name...",labelText:"File Name",defaultValue:"Unnamed",value:this.state.form.fileName,onChange:this.fileNameChanged,required:"required"}),resultForm.scope=React.createElement(TextInput,{placeholder:"Enter the Scope...",labelText:"Scope",value:this.state.form.scope,onChange:this.scopeChanged,required:"required"}),this.state.form.type){case"component":resultForm.componentType=React.createElement(Select,{label:"Type",onChange:this.componentTypeUpdated,value:this.state.form.component_type,required:"required",className:"sr-carb-sele"},React.createElement(SelectItem,{value:"",text:"None"}),React.createElement(SelectItem,{value:"React",text:"React"}),React.createElement(SelectItem,{value:"Snabbdom",text:"Snabbdom"}),React.createElement(SelectItem,{value:"Vue",text:"Vue"})),resultForm.componentVersion=React.createElement(TextInput,{placeholder:"Version Number",labelText:"Version #",value:this.state.form.componentVersion,onChange:this.componentVersionChanged});break;case"page":resultForm.pagePath=React.createElement(TextInput,{placeholder:"Page Path...",labelText:"Page Path",value:this.state.form.pagePath,onChange:this.pagePathChanged,required:"required"});break;case"restmethod":resultForm.relativePath=React.createElement(TextInput,{placeholder:"Relative Path...",labelText:"Relative Path",value:this.state.form.relativePath,onChange:this.relativePathChanged,required:"required"}),resultForm.methodType=React.createElement("div",{className:"bx--form-item"},React.createElement(Select,{labelText:"Method Type",value:this.state.form.method_type,required:"required",className:"sr-carb-sele",onChange:function(e){var value=e.target.value,form=_this2.state.form;form.method_type=value,_this2.setState({form:form})}},React.createElement(SelectItem,{value:"GET",text:"GET"}),React.createElement(SelectItem,{value:"POST",text:"POST"}),React.createElement(SelectItem,{value:"PUT",text:"PUT"}),React.createElement(SelectItem,{value:"PATCH",text:"PATCH"}),React.createElement(SelectItem,{value:"DELETE",text:"DELETE"}))),resultForm.methodCollection=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Collection",labelText:"Collection",value:this.state.form.collection,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.collection=value,_this2.setState({form:form})}}));var isPublicProps={};this.state.form.is_public&&(isPublicProps.checked=!0),resultForm.isPublic=React.createElement("div",{className:"bx--form-item"},React.createElement(Checkbox,_extends({labelText:"Is Public",id:"sr-check-bx",onChange:function(value){var form=_this2.state.form;form.is_public=value,_this2.setState({form:form})}},isPublicProps)));break;case"widget_action":var widgetActiveProps={};this.state.form.active&&(widgetActiveProps.checked=!0),resultForm.widgetTrigger=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Trigger",labelText:"Trigger",value:this.state.form.trigger,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.trigger=value,_this2.setState({form:form})},required:"required"})),resultForm.widgetActive=React.createElement("div",{className:"bx--form-item"},React.createElement(Checkbox,_extends({labelText:"Active",id:"sr-check-bx",onChange:function(value){var form=_this2.state.form;form.active=value,_this2.setState({form:form})}},widgetActiveProps))),resultForm.widgetUpdateType=React.createElement("div",{className:"bx--form-item"},React.createElement(Select,{labelText:"Update Type",value:this.state.form.update_type,required:"required",className:"sr-carb-sele",onChange:function(e){var value=e.target.value,form=_this2.state.form;form.update_type=value,_this2.setState({form:form})}},React.createElement(SelectItem,{value:"Current",text:"Current"}),React.createElement(SelectItem,{value:"Ancestor",text:"Ancestor"}))),resultForm.widgetUpdateTarget="Current"!=this.state.form.update_type?React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Update Target",labelText:"Update Target",value:this.state.form.update_target,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.update_target=value,_this2.setState({form:form})}})):null,resultForm.scope=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Scope",labelText:"Scope",value:this.state.form.scope,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.scope=value,_this2.setState({form:form})},required:"required"})),resultForm.widgetOrder=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Order",labelText:"Order",value:this.state.form.order,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.order=value,_this2.setState({form:form})},required:"required"}));break;case"page_action":var pageActiveProps={};this.state.form.active&&(pageActiveProps.checked=!0),resultForm.pageActionActive=React.createElement("div",{className:"bx--form-item"},React.createElement(Checkbox,_extends({labelText:"Active",id:"sr-check-bx",onChange:function(value){var form=_this2.state.form;form.active=value,_this2.setState({form:form})}},pageActiveProps))),resultForm.scope=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Scope",labelText:"Scope",value:this.state.form.scope,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.scope=value,_this2.setState({form:form})},required:"required"})),resultForm.pageActionOrder=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Order",labelText:"Order",value:this.state.form.order,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.order=value,_this2.setState({form:form})},required:"required"}));break;case"style":resultForm.styleType=React.createElement("div",{className:"bx--form-item"},React.createElement(Select,{onChange:this.styleTypeUpdated,labelText:"Style Type",value:this.state.form.style_type,required:"required",className:"sr-carb-sele"},React.createElement(SelectItem,{value:"css",text:"CSS"}),React.createElement(SelectItem,{value:"scss",text:"SCSS"})));break;case"import_export":resultForm.scope=null;var modelForImportItems=this.state.allModelData.allModelsForLookup,checkboxProps={};this.state.form.active&&(checkboxProps.checked=!0),modelForImportItems||this.getAllModels(this.refreshAllModels.bind(this));var modelForImportSelectItems=[];modelForImportItems&&modelForImportItems.map(function(modelItem){return modelForImportSelectItems.push(React.createElement(SelectItem,{value:modelItem.id,text:modelItem.text}))});var firstImportItem=modelForImportItems&&modelForImportItems.length>0?modelForImportItems[0].text:"";resultForm.importFromModel=React.createElement("div",{className:"bx--form-item"},React.createElement(Select,{labelText:"Model",onChange:function(e){var value=e.target.value,form=_this2.state.form;form.Table=value,_this2.setState({form:form})},value:this.state.form.Table,id:"selectfield",defaultValue:firstImportItem},modelForImportSelectItems)),resultForm.importOnModelField=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Model Field...",labelText:"Model Field",value:this.state.form.Field,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.Field=value,_this2.setState({form:form})},required:"required"})),resultForm.importExportOrder=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Order",labelText:"Order",value:this.state.form.order,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.order=value,_this2.setState({form:form})},required:"required"})),resultForm.localPathField=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"File Path...",labelText:"Filepath Pattern",value:this.state.form.localPath,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.localPath=value,_this2.setState({form:form})},required:"required"})),resultForm.importExportLevel=React.createElement("div",{className:"bx--form-item"},React.createElement(Select,{label:"Level",onChange:function(e){var value=e.target.value,form=_this2.state.form;form.level=value,_this2.setState({form:form})},value:this.state.form.level,required:"required",className:"sr-carb-sele"},React.createElement(SelectItem,{value:"Table",text:"Table",selected:!0}),React.createElement(SelectItem,{value:"Record",text:"Record"}))),resultForm.importExportActive=React.createElement("div",{className:"bx--form-item"},React.createElement(Checkbox,_extends({labelText:"Active",id:"sr-check-bx",onChange:function(value){var form=_this2.state.form;form.active=value,_this2.setState({form:form})}},checkboxProps))),resultForm.importConditionField=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Import condition...",labelText:"Improt condition",value:this.state.form.ImportCondition,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.ImportCondition=value,_this2.setState({form:form})},required:"required"})),resultForm.exportConditionField=React.createElement("div",{className:"bx--form-item"},React.createElement(TextInput,{placeholder:"Export condition...",labelText:"Export condition",value:this.state.form.ExportCondition,onChange:function(e){var value=e.target.value,form=_this2.state.form;form.ExportCondition=value,_this2.setState({form:form})},required:"required"}));break;case"operation_hook":var modelItems=this.state.modelData.modelsForLookup;modelItems||this.getModels(this.refreshModels.bind(this));var modelSelectItems=[];modelItems&&modelItems.map(function(modelItem){return modelSelectItems.push(React.createElement(SelectItem,{value:modelItem.id,text:modelItem.text}))});var firstModelItem=modelItems&&modelItems.length>0?modelItems[0].text:"";resultForm.hookOnModelField=React.createElement("div",{className:"bx--form-item"},React.createElement(Select,{labelText:"Trigger Model",onChange:function(e){var value=e.target.value,form=_this2.state.form;form.modelId=value,_this2.setState({form:form})},value:this.state.form.modelId,id:"selectfield",defaultValue:firstModelItem},modelSelectItems)),resultForm.triggerTypeField=React.createElement("div",{className:"bx--form-item"},React.createElement(Select,{labelText:"Trigger Type",onChange:this.triggerTypeUpdated,value:this.state.form.trigger_type,defaultValue:this.state.defaultTriggerType,required:"required",className:"sr-carb-sele"},React.createElement(SelectItem,{value:"before.save",text:"Before Save"}),React.createElement(SelectItem,{value:"after.save",text:"After Save"}),React.createElement(SelectItem,{value:"before.delete",text:"Before Delete"}),React.createElement(SelectItem,{value:"after.delete",text:"After Delete"}))),resultForm.hookSequenceField=React.createElement(TextInput,{placeholder:"Order...",labelText:"Order",value:this.state.form.order,onChange:this.orderChanged,required:"required"});break;case"resource":resultForm.content_type=React.createElement("div",{className:"bx--form-item"},React.createElement("label",{htmlFor:"select-1",className:"bx--label"},"Trigger Type"),React.createElement("select",{labelText:"Content Type",onChange:this.contentTypeChanged,value:this.state.form.content_type,required:"required",className:"sr-carb-sele"},React.createElement(SelectItem,{value:"xml",text:"XML"}),React.createElement(SelectItem,{value:"csv",text:"CSV"}),React.createElement(SelectItem,{value:"json",text:"JSON"})))}return resultForm},this.getSearchPaneDetails=function(){var scopeBasedResults,NavigatorComp=IdeNavigator();return this.state.searchUpdated?(scopeBasedResults=self.getNavigationResults(this.state.searchResults,this.state.search.ide_type),this.setState({searchTree:scopeBasedResults,searchUpdated:!1})):scopeBasedResults=this.state.searchTree,React.createElement(NavigatorComp,{postToggle:self.onToggle.bind(this),data:scopeBasedResults})},this.onToggle=function(node){node.id&&this.loadForm(node.id,this.state.search.ide_type)},this.getNavigationResults=function(searchItems,searchCategoryType){var results={},topLevelSearchField="Scope";switch(searchCategoryType){case"operation_hook":topLevelSearchField="Model";break;case"import_export":topLevelSearchField="Table";break;case"widget_action":topLevelSearchField="Trigger";break;default:topLevelSearchField="Scope"}var finalResult={name:"Search Results",toggled:!0,children:[]};return searchItems&&(searchItems.forEach(function(searchItem){var topLevelSearchValue=searchItem[topLevelSearchField];"Trigger"==topLevelSearchField&&(topLevelSearchValue=searchItem.Name&&searchItem.Name.indexOf("@@")>-1?searchItem.Name.split("@@")[1]:topLevelSearchValue),results[topLevelSearchValue]||(results[topLevelSearchValue]=[]);var searchObj={id:searchItem.uid,name:searchItem.Name&&searchItem.Name.indexOf("@@")>-1?searchItem.Name.split("@@")[0]:searchItem.Name};results[topLevelSearchValue].push(searchObj)}),Object.keys(results).forEach(function(scopeValue){var searchScopeChildren=results[scopeValue],scopeLevelChildObjects=[];searchScopeChildren&&searchScopeChildren.forEach(function(searchScopeChild){scopeLevelChildObjects.push({id:searchScopeChild.id,name:searchScopeChild.name})});var scopeLevelSearchObj={name:scopeValue,toggled:!1,children:scopeLevelChildObjects};finalResult.children.push(scopeLevelSearchObj)})),finalResult},this.getPreviewContentPane=function(){var previewContent;if(this.state&&this.state.form&&"component"==this.state.form.type&&this.state.form.file_id&&-1!=this.state.form.file_id)if(this.state.showPreview){var ComponentToPreview=ErrorBoundary(this.state.PreviewComponent);previewContent=React.createElement("div",null,React.createElement("div",{className:"screenOverlay"}),React.createElement(Close64,{className:"cancelPreview",onClick:this.cancelPreview}),React.createElement(ComponentToPreview,null))}else previewContent=null;return previewContent},this.getEditorToolKit=function(){var editorViewMode,cssOrJSToggler=void 0,saveFileOption=void 0,showHidePreview=void 0,deleteFile=void 0;if(editorViewMode=React.createElement(OverflowMenuItem,{onClick:this.resizeEditor,itemText:"[+/-]"}),this.state&&this.state.form&&"component"==this.state.form.type&&(cssOrJSToggler=React.createElement(OverflowMenuItem,{onClick:this.componentCodeModeChanged,itemText:"JS/CSS"}),this.state.form.file_id&&-1!=this.state.form.file_id&&(showHidePreview=React.createElement(OverflowMenuItem,{onClick:this.reloadPreview,itemText:"Preview"}))),this.state&&this.state.form&&"import_export"==this.state.form.type){var toggleLabel="import"==this.state.form.mode?"Export":"Import";cssOrJSToggler=React.createElement(OverflowMenuItem,{onClick:this.importExportModeChanged,itemText:toggleLabel})}return this.state&&this.state.form&&this.state.form.file_id&&-1!=this.state.form.file_id&&(deleteFile=React.createElement(OverflowMenuItem,{onClick:this.deleteRecord,itemText:"Delete"})),this.state.form&&this.state.form.fileName&&(this.state.form.scope||"import_export"==this.state.form.type&&(this.state.form.ImportScript||this.state.form.ExportScript)||"widget_action"==this.state.form.type)&&(saveFileOption=React.createElement(OverflowMenuItem,{onClick:this.saveForm,itemText:"Save"})),React.createElement("div",{className:"editorToolkit"},React.createElement(OverflowMenu,{flipped:!0,"data-floating-menu-container":!0,renderIcon:function(){return React.createElement(Menu16,null)}},editorViewMode,cssOrJSToggler,saveFileOption,showHidePreview,deleteFile))},this.getFooterTabs=function(){return React.createElement(Tabs,{className:"footerTabs",selected:"0"},React.createElement(Tab,{className:"footerTab",onClick:this.footerTabChange,type:"form_field",label:"Form Fields"}),this.state.search&&"component"==this.state.search.ide_type||"component"==this.state.form.type?React.createElement(Tab,{className:"footerTab",onClick:this.footerTabChange,type:"state",label:"States"}):null,this.state.search&&"component"==this.state.search.ide_type||"component"==this.state.form.type?React.createElement(Tab,{className:"footerTab",onClick:this.footerTabChange,type:"action",label:"Actions"}):null,this.state.search&&"page"==this.state.search.ide_type||"page"==this.state.form.type?React.createElement(Tab,{className:"footerTab",onClick:this.footerTabChange,type:"dependency",label:"Dependencies"}):null,this.state.search&&"component"==this.state.search.ide_type||"component"==this.state.form.type?React.createElement(Tab,{className:"footerTab",onClick:this.footerTabChange,type:"props",label:"Properties"}):null)},this.getFooterContent=function(){var footerContent="";switch(this.state.footerChanger){case"form_field":var formFields=self.getFormFields.bind(this)(),formProps={};formProps.formFields=formFields,formProps.thisContext=this;var FormFieldComp=IdeFormFields();footerContent=React.createElement(FormFieldComp,{form:formProps,reload:this.state.reload});break;case"console":var ConsoleComp=IdeConsole();footerContent=React.createElement(ConsoleComp,{showPreview:this.state.showWebComponentPreview,updateStore:this.props.updateStore,previewTarget:this.state.showPreviewTarget});break;case"state":var StateComp=IdeStateMapper();footerContent=React.createElement(StateComp,{compDetails:this.state.form,showPreview:this.state.showWebComponentPreview,updateStore:this.props.updateStore,previewTarget:this.state.showPreviewTarget,reload:this.state.reload});break;case"action":var ActionComp=IdeActionMapper();footerContent=React.createElement(ActionComp,{compDetails:this.state.form,showPreview:this.state.showWebComponentPreview,updateStore:this.props.updateStore,previewTarget:this.state.showPreviewTarget,reload:this.state.reload});break;case"dependency":var DepComp=IdeDependency();footerContent=React.createElement(DepComp,{compDetails:this.state.form,showPreview:this.state.showWebComponentPreview,updateStore:this.props.updateStore,previewTarget:this.state.showPreviewTarget,reload:this.state.reload});break;case"validation":var ValidationComp=IdeValidation();footerContent=React.createElement(ValidationComp,{showPreview:this.state.showWebComponentPreview,updateStore:this.props.updateStore,previewTarget:this.state.showPreviewTarget});break;case"props":var PropsComp=IdeProps();footerContent=React.createElement(PropsComp,{compDetails:this.state.form,showPreview:this.state.showWebComponentPreview,updateStore:this.props.updateStore,previewTarget:this.state.showPreviewTarget,reload:this.state.reload})}return footerContent}}},_export("StudioFormUtil",StudioFormUtil=studio.StudioFormUtil),_export("StudioFormUtil",StudioFormUtil),_export("default",StudioFormUtil)}}}),System.register("component/studio/SrsteeIDE/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","react-monaco-editor","client/script/studio/StudioUtil.js","client/script/studio/StudioFormUtil.js","carbon-components-react","@carbon/icons-react/lib/close/20","@carbon/icons-react/lib/add--alt/32","lodash.clonedeep","lodash.debounce"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,MonacoEditor,StudioUtil,StudioFormUtil,Select,SelectItem,TextInput,OverflowMenu,OverflowMenuItem,Close20,AddAlt32,cloneDeep,debounce,ideScope,SrsteeIDE;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_reactMonacoEditor){MonacoEditor=_reactMonacoEditor.default},function(_clientScriptStudioStudioUtilJs){StudioUtil=_clientScriptStudioStudioUtilJs.StudioUtil},function(_clientScriptStudioStudioFormUtilJs){StudioFormUtil=_clientScriptStudioStudioFormUtilJs.StudioFormUtil},function(_carbonComponentsReact){Select=_carbonComponentsReact.Select,SelectItem=_carbonComponentsReact.SelectItem,TextInput=_carbonComponentsReact.TextInput,OverflowMenu=_carbonComponentsReact.OverflowMenu,OverflowMenuItem=_carbonComponentsReact.OverflowMenuItem},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default},function(_carbonIconsReactLibAddAlt){AddAlt32=_carbonIconsReactLibAddAlt.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_lodashDebounce){debounce=_lodashDebounce.default}],execute:function(){history.pushState(null,null,location.href),window.onpopstate=function(){history.go(1)},ideScope={Container:function(_React$Component){function Container(props){_classCallCheck(this,Container);var _this=_possibleConstructorReturn(this,(Container.__proto__||Object.getPrototypeOf(Container)).call(this,props)),studioUtil=new StudioUtil;return studioUtil.bindAllMethods.bind(_this)(),_this.state=studioUtil.getInitialState(),_this.topElement=React.createRef(),_this.studioFormUtil=new StudioFormUtil,_this.editorDidMount=_this.editorDidMount.bind(_this),_this.editor=null,_this.editorModel=null,_this.editorModelViewState=null,_this.activeFileIndex=-1,_this.editorContent=null,_this.restoreEditor=_this.restoreEditor.bind(_this),_this.getModels(_this.refreshModels.bind(_this)),_this.resizeSideBarGrid=_this.resizeSideBarGrid.bind(_this),_this.resizeSideBarGridDebounceFn=debounce(function(){_this.resizeSideBarGrid()}),_this.resizeFooterPaneGrid=_this.resizeFooterPaneGrid.bind(_this),window.addEventListener("resize",self.resizeSideBarGridDebounceFn),_this}return _inherits(Container,_React$Component),_createClass(Container,[{key:"resizeSideBarGrid",value:function(){var self=this,parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".searchPane",this.props.shadow).length>0?$(".searchPane",this.props.shadow):$(".searchPane",parentNode),topLevelEl=$(".top-level",this.props.shadow).length>0?$(".top-level",this.props.shadow):$(".top-level",parentNode),contentAreaEl=$(".sr-editorial-space",this.props.shadow).length>0?$(".sr-editorial-space",this.props.shadow):$(".sr-editorial-space",parentNode);if(searchPane.length>0){var searchPaneRect=searchPane[0].getBoundingClientRect(),contentAreaWidth=topLevelEl[0].getBoundingClientRect().width-searchPaneRect.width-5;setTimeout(function(){contentAreaEl.width(contentAreaWidth),window.removeEventListener("resize",self.resizeSideBarGridDebounceFn),window.addEventListener("resize",self.resizeSideBarGridDebounceFn)})}}},{key:"resizeFooterPaneGrid",value:function(){var parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,contentPane=$(".sr-editorial-space > .content",this.props.shadow).length>0?$(".sr-editorial-space > .content",this.props.shadow):$(".sr-editorial-space > .content",parentNode),topLevelEl=$(".sr-editorial-space",this.props.shadow).length>0?$(".sr-editorial-space",this.props.shadow):$(".sr-editorial-space",parentNode),footerPane=$(".sr-editorial-space > .footerPane",this.props.shadow).length>0?$(".sr-editorial-space > .footerPane",this.props.shadow):$(".sr-editorial-space > .footerPane",parentNode);if(contentPane.length>0){var contentPaneRect=contentPane[0].getBoundingClientRect(),footerPaneHeight=topLevelEl[0].getBoundingClientRect().height-contentPaneRect.height;footerPane.height(footerPaneHeight);var editorState=cloneDeep(this.state.editor);editorState.height=contentPaneRect.height,this.setState({editor:editorState})}}},{key:"componentDidMount",value:function(){(!this.state.openedForms||0==this.state.openedForms.length||1==this.state.openedForms.length&&-1==this.state.openedForms[0].file_id)&&this.props.ideFiles&&this.props.ideFiles.length>0&&this.loadIDEFiles(this.props.ideFiles),this.searchChanged();var parentNode=this.props.shadow&&this.props.shadow.host&&this.props.shadow.host.parentElement?this.props.shadow.host.parentElement:null,searchPane=$(".searchPane",this.props.shadow).length>0?$(".searchPane",this.props.shadow):$(".searchPane",parentNode);if(window.addEventListener("focus",this.resizeSideBarGridDebounceFn),window.addEventListener("focus",this.resizeSideBarGridDebounceFn),searchPane&&searchPane.length>0){searchPane[0].addEventListener("resize",this.resizeSideBarGridDebounceFn),new MutationObserver(function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}}).observe(searchPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})}var contentPane=$(".sr-editorial-space > .content",this.props.shadow).length>0?$(".sr-editorial-space > .content",this.props.shadow):$(".sr-editorial-space > .content",parentNode);if(contentPane&&contentPane.length>0){contentPane[0].addEventListener("resize",this.resizeFooterPaneGrid),new MutationObserver(function(mutations){var el=mutations[0].target,w=el.clientWidth,h=el.clientHeight;if(mutations.map(function(m){return""+m.oldValue}).some(function(prev){return-1===prev.indexOf("width: "+w+"px")||-1===prev.indexOf("height: "+h+"px")})){var event=new CustomEvent("resize",{detail:{width:w,height:h}});el.dispatchEvent(event)}}).observe(contentPane[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["style"]})}}},{key:"componentDidUnmount",value:function(){window.removeEventListener("resize",this.resizeSideBarGridDebounceFn)}},{key:"componentDidUpdate",value:function(prevProps){var _this2=this;if(prevProps.ide_reload!=this.props.ide_reload&&this.setState({reload:!this.state.reload}),prevProps.showpreview==this.props.showpreview||prevProps.showpreview_target==this.props.showpreview_target||"ide_state"!=this.props.showpreview_target&&"ide_actions"!=this.props.showpreview_target&&"ide_props"!=this.props.showpreview_target&&"ide_deps"!=this.props.showpreview_target||(this.setState({showWebComponentPreview:this.props.showpreview,showPreviewTarget:this.props.showpreview_target}),0==this.props.showpreview&&this.restoreEditor()),this.activeFileIndex>-1&&this.refs)if(this.refs["file"+this.activeFileIndex])setTimeout(function(){return _this2.refs["file"+_this2.activeFileIndex].scrollIntoView({block:"end",behavior:"smooth"})},100);else{var lastFileIndx=-1;Object.keys(this.refs).map(function(refKey){if(refKey.indexOf("file")>-1){var fileIndx=parseInt(refKey.split("file")[1]);fileIndx>lastFileIndx&&(lastFileIndx=fileIndx)}}),setTimeout(function(){return _this2.refs["file"+lastFileIndx].scrollIntoView({block:"end",behavior:"smooth"})},100)}}},{key:"componentDidCatch",value:function(error,info){console.log("error = "+error)}},{key:"editorDidMount",value:function(editor,monaco){monaco.languages.registerCompletionItemProvider("javascript",{provideCompletionItems:function(model,position){return[{label:'let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let records = await $qry.getRecords("[model]_[scope]", {}, ["uid"], [pageNumber], [pageSize])',documentation:"Utility to get the records"},{label:'let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - let recordCount = await $qry.getRecordCount("[model]_[scope]", {"Active": 1})',documentation:"Utility to get the record count of the matching filter"},{label:'createRecord = await $qry.createRecord("[model]_[scope]", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - createRecord = await $qry.createRecord("[model]_[scope]", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to create a new record"},{label:'updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", fieldMap, fieldsArray)',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - updateRecord = await $qry.updateRecord("[model]_[scope]", "model_id", {"field": "fieldvalue"}, ["field"])',documentation:"Utility to update an existing record"},{label:'deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "model_id")',documentation:"Utility to delete a record"},{label:'deleteRecords = await $qry.deleteRecords("[model]_[scope]", "{uid: {"inq": ["id1", "id"]}}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'example - deleteRecord = await $qry.deleteRecord("[model]_[scope]", "filter")',documentation:"Utility to delete multiple records"},{label:'tableDelete = await $qry._run(`mutation($inputData:[Table]DestroyAllInput!) {\n\t\t[Table]DestroyAll(input:$inputData){\n\t\t\tobj\n\t\t}\t}`, { "inputData": { "where": { "[FieldName]":"${varname}"} } },\n\t\t"data.[Table]DestroyAll.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-delete",documentation:"Delete query to remove the records from the table"},{label:'$qry.run("{queryName}", "{variables}")',kind:monaco.languages.CompletionItemKind.Keyword,detail:'await $qry.run("{queryName}", "{variables}")',documentation:"Utility to mutate/fetch data from server using GraphQL"},{label:'tableRead = await $qry._run(`query($input:JSON){\n\t[Table]{\n\t\t[Table]Find(filter: $input) @_(get: "edges"){\n\t\t\tedges @_(keyBy: "node.uid", mapValues:"node"){\n\t\t\t\tnode{\n\t\t\t\t\tuid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}`, { "input": { "where": { "uid": "${varname}" } } },\n"data.[Table].[Table]Find");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-read",documentation:"Open query to get the data from the table"},{label:'tableUpsert = await $qry._run(`mutation($input: [Table]UpsertWithWhereInput!){\n\t[Table]UpsertWithWhere(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "where": { "uid": "${varname}" }, "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]UpsertWithWhere.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-upsert",documentation:"Query to update the data in the table"},{label:'tableCreate = await $qry._run(`mutation($input: [Table]CreateInput!){\n\t[Table]Create(input: $input){\n\t\tobj{\n\t\t\tuid\n\t\t}\n\t}\n}`,  { "input": { "data": { "[Field]": "${fieldVarName}", "[Field]": "${fieldVarName}" } } },\n"data.[Table]Create.obj");',kind:monaco.languages.CompletionItemKind.Keyword,detail:"adhoc-create",documentation:"Query to create the record with the data"}]}});this.editor=editor,this.monaco=monaco,this.editorModel=editor.getModel(),this.restoreEditor()}},{key:"restoreEditor",value:function(){var self=this,saveEditorValue=this.editor.setValue.bind(this.editor);this.editor.setValue=function(val){saveEditorValue(val),self.state.form.position?(self.editor.setPosition(self.state.form.position),self.editor.revealLine(self.state.form.position.lineNumber),self.editor.revealLineInCenter(self.state.form.position.lineNumber)):(self.editor.setPosition({lineNumber:1,column:1}),self.editor.revealLine(1),self.editor.revealLineInCenter(15)),self.editor.focus()};for(var containerElem=this.topElement&&this.topElement.current?this.topElement.current:this.editor.domElement,parentShadowRoot=containerElem;parentShadowRoot&&!parentShadowRoot.host;)parentShadowRoot=parentShadowRoot.parentNode;containerElem&&(containerElem.prepend(this.editor._themeService._styleElement),this.editor.viewModel._shadowRoot=parentShadowRoot,window.dispatchEvent(new CustomEvent("ready",{bubbles:!0})))}},{key:"render",value:function(){var editorCode,searchResults=this.studioFormUtil.getSearchPaneDetails.bind(this)(),editorToolkit=this.studioFormUtil.getEditorToolKit.bind(this)(),previewPane=this.studioFormUtil.getPreviewContentPane.bind(this)(),footerTabs=this.studioFormUtil.getFooterTabs.bind(this)(),footerContent=this.studioFormUtil.getFooterContent.bind(this)();if(this.state.form.mode)switch(this.state.form.mode){case"css":editorCode=this.state.form.css;break;case"html":editorCode=this.state.form.html;break;case"js":editorCode=this.state.form.code;break;case"import":editorCode=this.state.form.ImportScript;break;case"export":editorCode=this.state.form.ExportScript}else editorCode=this.state.form.code;var contentTabArry=[];if(this.state.openedForms){var _self=this;this.activeFileIndex=-1,this.state.openedForms.forEach(function(openedFile,indx){"contentTabActive"==openedFile.className&&(_self.activeFileIndex=indx),contentTabArry.push(React.createElement("div",{ref:"file"+indx,className:"contentTabItems"},React.createElement("div",{key:"-1",class:openedFile.className,onClick:function(){return _self.makeFormActive(openedFile)}},openedFile.fileName),React.createElement(Close20,{className:"closeTab",onClick:function(){return _self.removeForm(openedFile)}})))})}var contentTabs=React.createElement("div",{class:"contentTabs"},contentTabArry);this.topElement&&this.topElement.current&&(this.state.resetEditor&&(this.restoreEditor(),this.setState({resetEditor:!1})),this.editorContent=React.createElement(MonacoEditor,{width:this.state.editor.width,height:this.state.editor.height,language:"javascript",theme:"vs-dark",value:editorCode,defaultValue:editorCode,options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!1},onChange:this.codeChanged,requireConfig:{url:"/thirdpartylib/require.js",paths:{vs:"/thirdpartylib/monaco/min/vs"}},editorWillMount:this.editorWillMount,editorDidMount:this.editorDidMount}));var notificationBar=this.props.notifications&&this.props.notifications.length>0?React.createElement("notification-bar",null):null;return React.createElement("div",{className:"top-level",ref:this.topElement},React.createElement("style",null,'@import url("/thirdpartylib/carbon-components/styles.css"); @import url("component/studio/ErrorBoundary/Style.css"); @import url("component/studio/SrsteeIDE/Style.css"); @import url("/thirdpartylib/monaco/min/vs/editor/editor.main.css")'),notificationBar,React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsMode.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/lib/typescriptServices.js"}),React.createElement("script",{src:"/thirdpartylib/monaco/min/vs/language/typescript/tsWorker.js"}),React.createElement("div",{className:"searchPane resizable-sidebar"},React.createElement("div",{className:"sr-new-file-menu"},React.createElement("label",{htmlFor:"button",className:"sr-new-file"},"New File"),React.createElement(OverflowMenu,{renderIcon:function(){return React.createElement(AddAlt32,null)},"data-floating-menu-container":"true"},React.createElement(OverflowMenuItem,{itemText:"Page",onClick:this.addNewFile,value:"page"}),React.createElement(OverflowMenuItem,{itemText:"Component",onClick:this.addNewFile,value:"component"}),React.createElement(OverflowMenuItem,{itemText:"Style",onClick:this.addNewFile,value:"style"}),React.createElement(OverflowMenuItem,{itemText:"Client Scripts",onClick:this.addNewFile,value:"client_script"}),React.createElement(OverflowMenuItem,{itemText:"Common Scripts",onClick:this.addNewFile,value:"common_script"}),React.createElement(OverflowMenuItem,{itemText:"Server Scripts",onClick:this.addNewFile,value:"server_script"}),React.createElement(OverflowMenuItem,{itemText:"Model",onClick:this.addNewFile,value:"model"}),React.createElement(OverflowMenuItem,{itemText:"Opertaion Hook",onClick:this.addNewFile,value:"operation_hook"}),React.createElement(OverflowMenuItem,{itemText:"Resources",onClick:this.addNewFile,value:"resource"}),React.createElement(OverflowMenuItem,{itemText:"Rendering Templates",onClick:this.addNewFile,value:"template"}),React.createElement(OverflowMenuItem,{itemText:"Rest Methods",onClick:this.addNewFile,value:"restmethod"}),React.createElement(OverflowMenuItem,{itemText:"Import Export",onClick:this.addNewFile,value:"import_export"}),React.createElement(OverflowMenuItem,{itemText:"Widget Actions",onClick:this.addNewFile,value:"widget_action"}),React.createElement(OverflowMenuItem,{itemText:"Page Actions",onClick:this.addNewFile,value:"page_action"}))),React.createElement(Select,{labelText:"Category",onChange:this.searchCategoryUpdated,value:this.state.search.ide_type,defaultValue:"component",id:"category",required:"required"},React.createElement(SelectItem,{value:"page",text:"Page"}),React.createElement(SelectItem,{value:"component",text:"Component"}),React.createElement(SelectItem,{value:"client_script",text:"Client Script"}),React.createElement(SelectItem,{value:"common_script",text:"Common Script"}),React.createElement(SelectItem,{value:"server_script",text:"Server Script"}),React.createElement(SelectItem,{value:"operation_hook",text:"Operation Hook"}),React.createElement(SelectItem,{value:"resource",text:"Resources"}),React.createElement(SelectItem,{value:"template",text:"Rendering Templates"}),React.createElement(SelectItem,{value:"restmethod",text:"Rest Methods"}),React.createElement(SelectItem,{value:"import_export",text:"Import Export"}),React.createElement(SelectItem,{value:"widget_action",text:"Widget Actions"}),React.createElement(SelectItem,{value:"page_action",text:"Page Actions"}),React.createElement(SelectItem,{value:"style",text:"Styles"})),React.createElement(TextInput,{placeholder:"Search here...",onChange:this.searchChanged,required:"required",className:"sr-search-bar"}),React.createElement("div",{className:"searchResults"},searchResults)),React.createElement("div",{className:"sr-editorial-space"},React.createElement("div",{className:"content"},React.createElement("div",{className:this.state.editor.className},contentTabs,editorToolkit,this.editorContent)),React.createElement("div",{className:"footerPane"},footerTabs,footerContent),previewPane))}}]),Container}(React.Component)},_export("SrsteeIDE",SrsteeIDE=function(deps){return ideScope.Container}),_export("SrsteeIDE",SrsteeIDE)}}}),System.register("component/studio/WidgetContainer.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.clonedeep","@carbon/icons-react/lib/close/20","react-custom-scrollbars","lodash.get","lodash.set","deepmerge"],function(_export,_context6){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,Close20,Scrollbars,lodashget,lodashset,deepmerge,_WidgetContainer_,WidgetContainer,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default},function(_reactCustomScrollbars){Scrollbars=_reactCustomScrollbars.Scrollbars},function(_lodashGet){lodashget=_lodashGet.default},function(_lodashSet){lodashset=_lodashSet.default},function(_deepmerge){deepmerge=_deepmerge.default}],execute:function(){_WidgetContainer_=function(_React$Component){function _WidgetContainer_(props){_classCallCheck(this,_WidgetContainer_);var _this=_possibleConstructorReturn(this,(_WidgetContainer_.__proto__||Object.getPrototypeOf(_WidgetContainer_)).call(this,props));_this.widgetTag=_this.props.widgetProps&&_this.props.widgetProps.Tag?_this.props.widgetProps.Tag:props.tag?props.tag:"div",_this.executeWidgetActions=_this.executeWidgetActions.bind(_this),_this.makeWidgetActive=_this.makeWidgetActive.bind(_this),_this.executeOnDemandActions=_this.executeOnDemandActions.bind(_this),_this.updateWidgetPropsAndAncestors=_this.updateWidgetPropsAndAncestors.bind(_this),_this.state={propAnchorStyle:{height:"inherit",overflow:"hidden"},reload:!1},_this.handleChange=_this.handleChange.bind(_this),_this.widgetref=React.createRef();return _this}return _inherits(_WidgetContainer_,_React$Component),_createClass(_WidgetContainer_,[{key:"handleChange",value:function(e){e.stopPropagation()}},{key:"componentDidUpdate",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(prevProps){var self,shadowRoot,gridStackItemEl,widgetElement,pageState,currentWidgetActionEvaluated,pageDataWidgetNames,widgetIdIndx,widgetId,_this2=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(self=this,this.props.widgetProps&&this.props.widgetProps.hasOwnProperty("OneColumnAnchor")&&(shadowRoot=this.props.shadow)&&shadowRoot.host&&(gridStackItemEl=$(this.props.shadow.host).closest(".grid-stack-item"))&&gridStackItemEl.length>0&&("true"==this.props.widgetProps.OneColumnAnchor?!this.props.pageState||1!=this.props.pageState.oneColumn&&"true"!=this.props.pageState.oneColumn?$(gridStackItemEl).removeClass("OneColumnAnchor"):$(gridStackItemEl).hasClass("OneColumnAnchor")||$(gridStackItemEl).addClass("OneColumnAnchor"):$(gridStackItemEl).removeClass("OneColumnAnchor")),"srs-board"!=this.widgetTag&&"planning-board"!=this.widgetTag||this.props.preview||prevProps.widgetProps.TableName==this.props.widgetProps.TableName||setTimeout(function(){var updatedWidgetProps=cloneDeep(_this2.props.widgetProps);updatedWidgetProps.LaneField="",updatedWidgetProps.BoardFilter=JSON.stringify({}),updatedWidgetProps.FieldMapping=JSON.stringify([]),_this2.props.updateStore({updates:{widgetProps:updatedWidgetProps}}),_this2.setState({reload:!_this2.state.reload})}),prevProps.currentWidget&&this.props.currentWidget&&prevProps.currentWidget.reload!=this.props.currentWidget.reload&&this.preview&&this.setState({reload:!this.state.reload}),"page-designer-preview"!=this.widgetTag||this.props.is_design_time){_context.next=7;break}return _context.next=7,this.updatePageParams();case 7:if(widgetElement=null,this.widgetref.current&&this.widgetref.current.getRootNode()&&(widgetElement=11==this.widgetref.current.getRootNode().nodeType?$(this.widgetref.current.getRootNode().host).closest(".grid-stack-item"):$(this.widgetref.current).closest(".grid-stack-item")),widgetElement&&widgetElement.length>0&&this.props.is_design_time&&(this.props.active_widget_id==this.props.widgetid?$(widgetElement).addClass("widgetactive"):$(widgetElement).removeClass("widgetactive")),_.isEqual(this.props,prevProps)||this.props.is_design_time){_context.next=48;break}if(!this.props.preview){_context.next=48;break}if(prevProps.pageState&&this.props.pageState&&prevProps.pageState.oneColumn!=this.props.pageState.oneColumn&&this.setState({reload:!this.state.reload}),!prevProps.widgetProps||!this.props.widgetProps||_.isEqual(prevProps.widgetProps,this.props.widgetProps)){_context.next=23;break}if(pageState=self.props.pageState?cloneDeep(self.props.pageState):{},Object.keys(this.props.widgetProps).map(function(currentWidgetPropName){if(currentWidgetPropName.startsWith("__State__")){var propPath=self.props.widgetProps[currentWidgetPropName],wpropName=currentWidgetPropName.split("__State__")[1],newValue=_this2.props.widgetProps[wpropName];try{newValue=JSON.parse(newValue)}catch(err){}lodashset(pageState,propPath,newValue)}}),_.isEqual(this.props.pageState,pageState)||this.props.updateStore({updates:{pageState:pageState}}),"true"!=this.props.widgetProps.TriggerActionOnChange&&1!=this.props.widgetProps.TriggerActionOnChange){_context.next=20;break}return _context.next=20,this.executeOnDemandActions("onChange");case 20:_.isEqual(prevProps.widgetProps.value,this.props.widgetProps.value)||this.updateWidgetPropsAndAncestors(null),_context.next=48;break;case 23:if(!prevProps.pageState||!this.props.pageState||_.isEqual(prevProps.pageState,this.props.pageState)){_context.next=28;break}return _context.next=26,this.executeWidgetActions(prevProps);case 26:_context.next=48;break;case 28:if(!prevProps.currentWidget||!this.props.currentWidget||prevProps.currentWidget.BubbledReload==this.props.currentWidget.BubbledReload){_context.next=33;break}return _context.next=31,this.executeWidgetActions(prevProps);case 31:_context.next=48;break;case 33:if(!this.props.preview){_context.next=48;break}if(!this.props.pageData||!this.props.pageData.widgets){_context.next=48;break}currentWidgetActionEvaluated=!1,pageDataWidgetNames=Object.keys(this.props.pageData.widgets),_context.t0=_regeneratorRuntime.keys(pageDataWidgetNames);case 38:if((_context.t1=_context.t0()).done){_context.next=48;break}if(widgetIdIndx=_context.t1.value,widgetId=pageDataWidgetNames[widgetIdIndx],currentWidgetActionEvaluated||!prevProps.pageData||_.isEqual(this.props.pageData.widgets[widgetId],prevProps.pageData.widgets[widgetId])||widgetId==this.props.widgetid){_context.next=45;break}return currentWidgetActionEvaluated=!0,_context.next=45,this.executeWidgetActions(prevProps);case 45:widgetId!=this.props.widgetid||_.isEqual(prevProps.widgetProps,this.props.widgetProps)||this.updateWidgetPropsAndAncestors(null),_context.next=38;break;case 48:case"end":return _context.stop()}},_callee,this)}));return function(_x){return _ref.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var shadowRoot,gridStackItemEl;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return this.props.widgetProps&&this.props.widgetProps.hasOwnProperty("OneColumnAnchor")&&(shadowRoot=this.props.shadow)&&shadowRoot.host&&(gridStackItemEl=$(this.props.shadow.host).closest(".grid-stack-item"))&&gridStackItemEl.length>0&&("true"==this.props.widgetProps.OneColumnAnchor?!this.props.pageState||1!=this.props.pageState.oneColumn&&"true"!=this.props.pageState.oneColumn?$(gridStackItemEl).removeClass("OneColumnAnchor"):$(gridStackItemEl).hasClass("OneColumnAnchor")||$(gridStackItemEl).addClass("OneColumnAnchor"):$(gridStackItemEl).removeClass("OneColumnAnchor")),_context2.next=3,this.executeWidgetActions();case 3:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"updatePageParams",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var pageId,page,existingPageParams,pageProps,pageParamMapping,inputParams,newPageParams,pagesWithNewPageParams;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,!1,{},pageId=this.props.widgetProps.PageId,page=pageId&&this.props.pages[pageId],(existingPageParams=page.pageParams?page.pageParams:null)||(pageProps={},Object.keys(page.props).map(function(pagePropName){"ModelName"==pagePropName&&"ModelScope"==pagePropName||(pageProps[pagePropName]=page.props[pagePropName])}),existingPageParams=pageProps),{},pageParamMapping="string"==typeof(pageParamMapping=(pageParamMapping=null)||(this.props&&this.props.widgetProps&&this.props.widgetProps.PageParams?this.props.widgetProps.PageParams:{}))?JSON.parse(pageParamMapping):pageParamMapping,inputParams={pageId:pageId,pageParamMapping:pageParamMapping,parentPageParams:this.props.pageData.pageParams?cloneDeep(this.props.pageData.pageParams):{},parentPage:this.props.pageData},_context3.next=14,$script.runscript("mmf.getPageParameters",inputParams);case 14:newPageParams=(newPageParams=_context3.sent)||{},_.isEqual(newPageParams,existingPageParams)||((pagesWithNewPageParams=cloneDeep(this.props.pages))[pageId]=pagesWithNewPageParams[pageId]||{},pagesWithNewPageParams[pageId].pagereload=!pagesWithNewPageParams[pageId].pagereload,pagesWithNewPageParams[pageId].pageParams=newPageParams,this.props.updateStore({updates:{pages:pagesWithNewPageParams}})),_context3.next=21;break;case 19:_context3.prev=19,_context3.t0=_context3.catch(0);case 21:return _context3.abrupt("return",!1);case 22:case"end":return _context3.stop()}},_callee3,this,[[0,19]])}));return function(){return _ref3.apply(this,arguments)}}()},{key:"executeWidgetActions",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(prevProps){var self,actionsModule,widgetActions,widgetProperties,setState,getState,setStateWithPreload,ctx,bubbledSource,bubbledSourceParts,bubbledWidgetId,bubbledPageId,srcWidgetName,srcWidget,srcWidgetProps,srcPage,srcPageName,widgetProps,_this3=this;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(self=this,this.props.widgetid&&this.props.preview){_context5.next=3;break}return _context5.abrupt("return");case 3:return _context5.next=5,System.import("/widget/"+this.props.widgetid+"/Action.js");case 5:if(actionsModule=_context5.sent,widgetActions=actionsModule.default,widgetProperties=cloneDeep(self.props.widgetProps),setState=function(recentUpdates){var pageState=cloneDeep(self.props.pageState)||{};pageState=deepmerge.all([pageState,recentUpdates]),self.props.updateStore({updates:{pageState:pageState}})},getState=function(){return cloneDeep(self.props.pageState)},setStateWithPreload=function(recentUpdates,$widgets){var pageState=self.props.pageState?self.props.pageState:{};if(pageState=deepmerge(pageState,recentUpdates),$widgets)for(var widgetIndx in $widgets){var widget=$widgets[widgetIndx];if(widget){var widgetProps=widget.props;if(widgetProps&&Object.keys(widgetProps).length>0){var widgetPropNames=Object.keys(widgetProps);for(var widgetPropIndx in widgetPropNames){var widgetPropName=widgetPropNames[widgetPropIndx];if(widgetPropName.indexOf("__State__")>-1){var widgetPropPathValue=widgetProps[widgetPropName],wpropName=widgetPropName.split("__State__")[1];if(widgetPropPathValue&&pageState&&Object.keys(pageState).length>0){var newPropVal=lodashget(pageState,widgetPropPathValue);newPropVal&&(widgetProps[wpropName]="string"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}}}}}return self.props.updateStore({updates:{pageState:pageState}}),$widgets},ctx={currentscope:self.props.currentscope,prevpagedata:prevProps?prevProps.pageData:null,cloneDeep:cloneDeep},prevProps&&prevProps.currentWidget&&this.props.currentWidget&&prevProps.currentWidget.BubbledReload!=this.props.currentWidget.BubbledReload&&(bubbledSource=this.props.currentWidget.BubbledSource)&&bubbledSource.indexOf("@@")>-1&&2==(bubbledSourceParts=bubbledSource.split("@@")).length&&(bubbledWidgetId=bubbledSourceParts[0],bubbledPageId=bubbledSourceParts[1],this.props.pages&&this.props.pages[bubbledPageId]&&this.props.pages[bubbledPageId].widgets&&this.props.pages[bubbledPageId].widgets[bubbledWidgetId]&&(ctx.bubbledsource=this.props.pages[bubbledPageId].widgets[bubbledWidgetId],ctx.bubbledpage=this.props.pages[bubbledPageId])),srcWidgetName=ctx.bubbledsource&&ctx.bubbledsource.props&&ctx.bubbledsource.props.Name?ctx.bubbledsource.props.Name:ctx.bubbledsource?ctx.bubbledsource.id:"",srcWidget=ctx.bubbledsource,srcWidgetProps=ctx.bubbledsource?ctx.bubbledsource.props:{},srcPage=ctx.bubbledpage,srcPageName=srcPage?srcPage.name:"",this.props.widgetProps&&Object.keys(this.props.widgetProps).map(function(currentWidgetPropName){if(srcWidget&&srcPageName&&srcWidgetName&&currentWidgetPropName.startsWith("__Child__")){var currentWidgetPropValue=_this3.props.widgetProps[currentWidgetPropName];if(3==(currentWidgetPropValue=(currentWidgetPropValue=currentWidgetPropValue&&"string"==typeof currentWidgetPropValue?JSON.parse(currentWidgetPropValue):currentWidgetPropValue)||[]).length){var currentPropPageName=currentWidgetPropValue[0],currentPropWidgetName=currentWidgetPropValue[1],currentPropWidgetPropName=currentWidgetPropValue[2];if(srcPageName==currentPropPageName&&srcWidgetName==currentPropWidgetName){var propName=currentWidgetPropName.split("__Child__")[1];widgetProperties[propName]=srcWidgetProps[currentPropWidgetPropName]}}}if(currentWidgetPropName.startsWith("__Sibling__")){var _currentWidgetPropValue=_this3.props.widgetProps[currentWidgetPropName];if(2==(_currentWidgetPropValue=(_currentWidgetPropValue=_currentWidgetPropValue&&"string"==typeof _currentWidgetPropValue?JSON.parse(_currentWidgetPropValue):_currentWidgetPropValue)||[]).length){var _currentPropWidgetName=_currentWidgetPropValue[0],_currentPropWidgetPropName=_currentWidgetPropValue[1];_this3.props.pageData.widgets&&Object.keys(_this3.props.pageData.widgets).map(function(siblingWidgetId){var siblingWidget=_this3.props.pageData.widgets[siblingWidgetId];if((siblingWidget.props&&siblingWidget.props.Name?siblingWidget.props.Name:siblingWidget.id)==_currentPropWidgetName&&siblingWidget.props&&siblingWidget.props[_currentPropWidgetPropName]){var _propName=currentWidgetPropName.split("__Sibling__")[1];widgetProperties[_propName]=siblingWidget.props[_currentPropWidgetPropName]}})}}if(currentWidgetPropName.startsWith("__State__")){var propValue=self.props.widgetProps[currentWidgetPropName],wpropName=currentWidgetPropName.split("__State__")[1];if(prevProps&&prevProps.widgetProps&&prevProps.widgetProps[wpropName]==_this3.props.widgetProps[wpropName]&&propValue&&self.props.pageState&&Object.keys(self.props.pageState).length>0){var newPropVal=lodashget(self.props.pageState,propValue);newPropVal&&(widgetProperties[wpropName]="string"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}}),!(widgetActions&&Object.keys(widgetActions).length>0)){_context5.next=23;break}return _context5.next=22,Object.keys(widgetActions).map(function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(widgetActionKey){var actionNameParts,notifier,result,data;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!(widgetActionKey.indexOf("__")>-1)){_context4.next=15;break}if(actionNameParts=widgetActionKey.split("__"),actionNameParts.slice(0,actionNameParts.length-1).join("__"),"Always"!=actionNameParts.slice(actionNameParts.length-1).join("")){_context4.next=15;break}if(notifier={getState:getState,setState:setState,setStateWithPreload:setStateWithPreload,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},!(result=widgetActions[widgetActionKey](self.props.pageData,widgetProperties,notifier,ctx)).then){_context4.next=14;break}return _context4.next=10,result;case 10:data=_context4.sent,widgetProperties=_extends({},widgetProperties,data),_context4.next=15;break;case 14:widgetProperties=_extends({},widgetProperties,result);case 15:case"end":return _context4.stop()}},_callee4,_this3)}));return function(_x3){return _ref5.apply(this,arguments)}}());case 22:_.isEqual(widgetProperties,self.props.widgetProps)?prevProps&&prevProps.currentWidget&&this.props.currentWidget&&prevProps.currentWidget.BubbledReload==this.props.currentWidget.BubbledReload&&"SrsTabs"==this.props.currentWidget.name&&((widgetProps=cloneDeep(this.props.widgetProps)).Reload=!widgetProps.Reload,this.props.updateStore({updates:{widgetProps:widgetProps}})):this.updateWidgetPropsAndAncestors(widgetProperties);case 23:case"end":return _context5.stop()}},_callee5,this)}));return function(_x2){return _ref4.apply(this,arguments)}}()},{key:"updateWidgetPropsAndAncestors",value:function(updatedWidgetProps){if(this.props.currentWidget&&this.props.currentWidget.widgettree){var widgetTree=this.props.currentWidget.widgettree&&"string"==typeof this.props.currentWidget.widgettree?JSON.parse(this.props.currentWidget.widgettree):this.props.currentWidget.widgettree;if(widgetTree&&Object.keys(widgetTree).length>0){for(var pages=cloneDeep(this.props.pages),widgetTreeKey=Object.keys(widgetTree)[0];widgetTreeKey;){var widgetTreeKeyParts=widgetTreeKey&&widgetTreeKey.split("@@");if(widgetTreeKeyParts&&widgetTreeKeyParts.length>=2){var widgetTreeKeyWidgetId=widgetTreeKeyParts[0],widgetTreeKeyPageId=widgetTreeKeyParts[1];pages[widgetTreeKeyPageId]&&pages[widgetTreeKeyPageId].widgets&&pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId]&&(pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId].BubbledReload=!pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId].BubbledReload,pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId].BubbledSource=this.props.widgetid+"@@"+this.props.pageid+this.props.pagesuffix)}widgetTreeKey=(widgetTree=widgetTree[widgetTreeKey])&&Object.keys(widgetTree).length>0?Object.keys(widgetTree)[0]:null}updatedWidgetProps&&pages[this.props.pageid+this.props.pagesuffix]&&pages[this.props.pageid+this.props.pagesuffix].widgets&&(pages[this.props.pageid+this.props.pagesuffix].widgets[this.props.widgetid]=pages[this.props.pageid+this.props.pagesuffix].widgets[this.props.widgetid]||{},pages[this.props.pageid+this.props.pagesuffix].widgets[this.props.widgetid].props=updatedWidgetProps),this.props.updateStore({updates:{pages:pages}})}else updatedWidgetProps&&this.props.updateStore({updates:{widgetProps:updatedWidgetProps}})}else updatedWidgetProps&&this.props.updateStore({updates:{widgetProps:updatedWidgetProps}})}},{key:"executeOnDemandActions",value:function(triggerType){var self=this;this.props.widgetid&&System.import("/widget/"+this.props.widgetid+"/Action.js").then(function(actionsModule){var widgetActions=actionsModule.default,widgetProperties=cloneDeep(self.props.widgetProps),setState=function(recentUpdates){var pageState=cloneDeep(self.props.pageState);pageState=_extends({},pageState,recentUpdates),self.props.updateStore({updates:{pageState:pageState}})},getState=function(){return cloneDeep(self.props.pageState)};widgetActions&&Object.keys(widgetActions).length>0&&Object.keys(widgetActions).map(function(widgetActionKey){if(widgetActionKey.indexOf("__")>-1){var actionNameParts=widgetActionKey.split("__"),actionName=actionNameParts.slice(0,actionNameParts.length-1).join("__"),actionType=actionNameParts.slice(actionNameParts.length-1).join("");if(actionType==triggerType){var notifier={setState:setState,getState:getState,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},ctx={currentscope:self.props.currentscope,cloneDeep:cloneDeep},result=widgetActions[widgetActionKey](self.props.pageData,widgetProperties,notifier,ctx);result.then?result.then(function(data){widgetProperties=_extends({},widgetProperties,data),_.isEqual(widgetProperties,self.props.widgetProps)||self.props.updateStore({updates:{widgetProps:widgetProperties}})}):(widgetProperties=_extends({},widgetProperties,result),_.isEqual(widgetProperties,self.props.widgetProps)||self.updateWidgetPropsAndAncestors(widgetProperties))}if("System"==actionType&&"onClick"==triggerType&&self.props.widgetProps&&self.props.widgetProps.ButtonAction&&self.props.widgetProps.ButtonAction==actionName){var _notifier={setState:setState,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_ctx={currentscope:self.props.currentscope,cloneDeep:cloneDeep},_result=widgetActions[widgetActionKey](self.props.pageData,widgetProperties,_notifier,_ctx);_result.then?_result.then(function(data){widgetProperties=_extends({},widgetProperties,data),_.isEqual(widgetProperties,self.props.widgetProps)||self.updateWidgetPropsAndAncestors(widgetProperties)}):(widgetProperties=_extends({},widgetProperties,_result),_.isEqual(widgetProperties,self.props.widgetProps)||self.updateWidgetPropsAndAncestors(widgetProperties))}}})}).catch(function(err){console.error(err)})}},{key:"makeWidgetActive",value:function(e){this.props.pageid!=this.props.active_page_id||this.props.preview||this.props.updateStore({updates:{active_widget_id:this.props.widgetid,component_id:this.props.componentid}}),this.props.preview&&this.executeOnDemandActions("onClick")}},{key:"render",value:function(){var _this4=this,widgetKey=this.props.widgetid;"srs-board"!=this.widgetTag&&"planning-board"!=this.widgetTag||this.props.preview||(widgetKey="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)})),this.widgetTag=this.props.widgetProps&&this.props.widgetProps.Tag?this.props.widgetProps.Tag:this.props.tag?this.props.tag:"div";var extraProps={},widgetInstanceStyles={height:"inherit"};if(this.props.widgetProps){var widgetTree={},prevWidgetTree=this.props.currentWidget&&this.props.currentWidget.widgettree&&"string"==typeof this.props.currentWidget.widgettree?JSON.parse(this.props.currentWidget.widgettree):this.props.currentWidget?this.props.currentWidget.widgettree:{};if(this.props.pageData.name?this.props.pageData.name:this.props.widgetProps.Name?this.props.widgetProps.Name:"","page-designer-preview"==this.widgetTag){extraProps.previewpageid=this.props.widgetProps.PageId,widgetKey=extraProps.previewpageid+this.props.widgetid,extraProps.pagesuffix="";var tempPrevWidgetTree=prevWidgetTree?cloneDeep(prevWidgetTree):{};widgetTree[this.props.widgetid+"@@"+this.props.pageid+this.props.pagesuffix+"@@"+this.props.pageData.name]=tempPrevWidgetTree,extraProps.widgettree=JSON.stringify(widgetTree),extraProps.parentstate=JSON.stringify(this.props.pageState)}}this.props.lite&&"page-designer-preview"!=this.widgetTag&&(extraProps.lite=!0),"page-designer"==this.widgetTag&&(extraProps.as_widget=!0,extraProps.preview=this.props.preview),!this.props.widgetProps||"true"!=this.props.widgetProps.Invisible&&1!=this.props.widgetProps.Invisible||((widgetInstanceStyles=widgetInstanceStyles||{}).visibility="hidden");var allProps=Object.assign(_extends({},extraProps),{pageid:this.props.pageid,pagesuffix:this.props.pagesuffix,key:widgetKey},{style:widgetInstanceStyles,widgetid:this.props.widgetid,preview:this.props.preview,shadow:"srs-board"==this.widgetTag||"planning-board"==this.widgetTag||"page-designer-preview"==this.widgetTag||!!this.props.shadow,reload:this.state.reload});allProps.onecolumn=this.props.pageState&&this.props.pageState.oneColumn;var widgetInstance=React.createElement(this.widgetTag,allProps),widgetResult=React.createElement("div",{ref:this.widgetref,style:this.state.propAnchorStyle,onClick:this.makeWidgetActive},widgetInstance,this.props.preview?null:React.createElement("div",{onClick:function(e){if(_this4.props.activePageWidgets){var widgets2Delete=cloneDeep(_this4.props.widgets2Delete);widgets2Delete.push(_this4.props.widgetid),_this4.props.updateStore({updates:{widgets2Delete:widgets2Delete}})}e.stopPropagation()},style:{position:"absolute",top:0,margin:2,right:0,backgroundColor:"#e8d8d6",borderRadius:"50%",width:20,cursor:"pointer",height:20}},React.createElement(Close20,null)));this.props.is_design_time||React.createElement(Scrollbars,{styles:{height:"inherit",width:"inherit",padding:this.preview?2:0},autoHide:!0,autoHideTimeout:1e3,autoHideDuration:200,hideTracksWhenNotNeeded:!0,autoHeightMin:0,thumbMinSize:30,universal:!1},widgetResult);return widgetResult}}]),_WidgetContainer_}(React.Component),_export("WidgetContainer",WidgetContainer=function(props){return _WidgetContainer_}),_export("WidgetContainer",WidgetContainer),_export("default",WidgetContainer),_export("states",states=[{KeyName:"widgets2Delete",AccessPath:"widgets2Delete",DefaultValue:'{"widgets2Delete": []}'},{KeyName:"active_widget_field_value",AccessPath:"active_widget_field_value",DefaultValue:'{"active_widget_field_value": ""}'},{KeyName:"widgetProps",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}.props",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {"props": {}}}}}}'},{KeyName:"active_widget_id",AccessPath:"active_widget_id",DefaultValue:'{"active_widget_id": ""}'},{KeyName:"is_design_time",AccessPath:"is_design_time",DefaultValue:'{"is_design_time": false}'},{KeyName:"activePageWidgets",AccessPath:"pages.${active_page_id}.widgets",DefaultValue:'{"pages": {"${active_page_id}": {"widgets": {}}}}'},{KeyName:"pages",AccessPath:"pages",DefaultValue:'{"pages": {}}'},{KeyName:"pageData",AccessPath:"pages.${pageid}${pagesuffix}",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {}}}'},{KeyName:"currentscope",AccessPath:"currentscope",DefaultValue:'{"currentscope": ""}'},{KeyName:"currentWidget",AccessPath:"pages.${pageid}${pagesuffix}.widgets.${widgetid}",DefaultValue:'{"pages": {"${pageid}${pagesuffix}": {"widgets": {"${widgetid}": {}}}}}'},{KeyName:"pageState",AccessPath:"pagestate.${pageid}${pagesuffix}",DefaultValue:'{"pagestate": {"${pageid}${pagesuffix}": {}}}'},{KeyName:"component_id",AccessPath:"component_id",DefaultValue:'{"component_id":""}'},{KeyName:"active_page_id",AccessPath:"active_page_id",DefaultValue:'{"active_page_id": ""}'}]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/WidgetContainer/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/extends.js","npm:systemjs-plugin-babel@0.0.25/regenerator-runtime.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/asyncToGenerator.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react","lodash.clonedeep","@carbon/icons-react/lib/close/20","react-custom-scrollbars","lodash.get","lodash.set","deepmerge"],function(_export,_context6){"use strict";var _extends,_regeneratorRuntime,_asyncToGenerator,_classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,cloneDeep,Close20,Scrollbars,lodashget,lodashset,deepmerge,_WidgetContainer_,WidgetContainer;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersExtendsJs){_extends=_npmSystemjsPluginBabel0025BabelHelpersExtendsJs.default},function(_npmSystemjsPluginBabel0025RegeneratorRuntimeJs){_regeneratorRuntime=_npmSystemjsPluginBabel0025RegeneratorRuntimeJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs){_asyncToGenerator=_npmSystemjsPluginBabel0025BabelHelpersAsyncToGeneratorJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default},function(_lodashClonedeep){cloneDeep=_lodashClonedeep.default},function(_carbonIconsReactLibClose){Close20=_carbonIconsReactLibClose.default},function(_reactCustomScrollbars){Scrollbars=_reactCustomScrollbars.Scrollbars},function(_lodashGet){lodashget=_lodashGet.default},function(_lodashSet){lodashset=_lodashSet.default},function(_deepmerge){deepmerge=_deepmerge.default}],execute:function(){_WidgetContainer_=function(_React$Component){function _WidgetContainer_(props){_classCallCheck(this,_WidgetContainer_);var _this=_possibleConstructorReturn(this,(_WidgetContainer_.__proto__||Object.getPrototypeOf(_WidgetContainer_)).call(this,props));_this.widgetTag=_this.props.widgetProps&&_this.props.widgetProps.Tag?_this.props.widgetProps.Tag:props.tag?props.tag:"div",_this.executeWidgetActions=_this.executeWidgetActions.bind(_this),_this.makeWidgetActive=_this.makeWidgetActive.bind(_this),_this.executeOnDemandActions=_this.executeOnDemandActions.bind(_this),_this.updateWidgetPropsAndAncestors=_this.updateWidgetPropsAndAncestors.bind(_this),_this.state={propAnchorStyle:{height:"inherit",overflow:"hidden"},reload:!1},_this.handleChange=_this.handleChange.bind(_this),_this.widgetref=React.createRef();return _this}return _inherits(_WidgetContainer_,_React$Component),_createClass(_WidgetContainer_,[{key:"handleChange",value:function(e){e.stopPropagation()}},{key:"componentDidUpdate",value:function(){var _ref=_asyncToGenerator(_regeneratorRuntime.mark(function _callee(prevProps){var self,shadowRoot,gridStackItemEl,widgetElement,pageState,currentWidgetActionEvaluated,pageDataWidgetNames,widgetIdIndx,widgetId,_this2=this;return _regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(self=this,this.props.widgetProps&&this.props.widgetProps.hasOwnProperty("OneColumnAnchor")&&(shadowRoot=this.props.shadow)&&shadowRoot.host&&(gridStackItemEl=$(this.props.shadow.host).closest(".grid-stack-item"))&&gridStackItemEl.length>0&&("true"==this.props.widgetProps.OneColumnAnchor?!this.props.pageState||1!=this.props.pageState.oneColumn&&"true"!=this.props.pageState.oneColumn?$(gridStackItemEl).removeClass("OneColumnAnchor"):$(gridStackItemEl).hasClass("OneColumnAnchor")||$(gridStackItemEl).addClass("OneColumnAnchor"):$(gridStackItemEl).removeClass("OneColumnAnchor")),"srs-board"!=this.widgetTag&&"planning-board"!=this.widgetTag||this.props.preview||prevProps.widgetProps.TableName==this.props.widgetProps.TableName||setTimeout(function(){var updatedWidgetProps=cloneDeep(_this2.props.widgetProps);updatedWidgetProps.LaneField="",updatedWidgetProps.BoardFilter=JSON.stringify({}),updatedWidgetProps.FieldMapping=JSON.stringify([]),_this2.props.updateStore({updates:{widgetProps:updatedWidgetProps}}),_this2.setState({reload:!_this2.state.reload})}),prevProps.currentWidget&&this.props.currentWidget&&prevProps.currentWidget.reload!=this.props.currentWidget.reload&&this.preview&&this.setState({reload:!this.state.reload}),"page-designer-preview"!=this.widgetTag||this.props.is_design_time){_context.next=7;break}return _context.next=7,this.updatePageParams();case 7:if(widgetElement=null,this.widgetref.current&&this.widgetref.current.getRootNode()&&(widgetElement=11==this.widgetref.current.getRootNode().nodeType?$(this.widgetref.current.getRootNode().host).closest(".grid-stack-item"):$(this.widgetref.current).closest(".grid-stack-item")),widgetElement&&widgetElement.length>0&&this.props.is_design_time&&(this.props.active_widget_id==this.props.widgetid?$(widgetElement).addClass("widgetactive"):$(widgetElement).removeClass("widgetactive")),_.isEqual(this.props,prevProps)||this.props.is_design_time){_context.next=48;break}if(!this.props.preview){_context.next=48;break}if(prevProps.pageState&&this.props.pageState&&prevProps.pageState.oneColumn!=this.props.pageState.oneColumn&&this.setState({reload:!this.state.reload}),!prevProps.widgetProps||!this.props.widgetProps||_.isEqual(prevProps.widgetProps,this.props.widgetProps)){_context.next=23;break}if(pageState=self.props.pageState?cloneDeep(self.props.pageState):{},Object.keys(this.props.widgetProps).map(function(currentWidgetPropName){if(currentWidgetPropName.startsWith("__State__")){var propPath=self.props.widgetProps[currentWidgetPropName],wpropName=currentWidgetPropName.split("__State__")[1],newValue=_this2.props.widgetProps[wpropName];try{newValue=JSON.parse(newValue)}catch(err){}lodashset(pageState,propPath,newValue)}}),_.isEqual(this.props.pageState,pageState)||this.props.updateStore({updates:{pageState:pageState}}),"true"!=this.props.widgetProps.TriggerActionOnChange&&1!=this.props.widgetProps.TriggerActionOnChange){_context.next=20;break}return _context.next=20,this.executeOnDemandActions("onChange");case 20:_.isEqual(prevProps.widgetProps.value,this.props.widgetProps.value)||this.updateWidgetPropsAndAncestors(null),_context.next=48;break;case 23:if(!prevProps.pageState||!this.props.pageState||_.isEqual(prevProps.pageState,this.props.pageState)){_context.next=28;break}return _context.next=26,this.executeWidgetActions(prevProps);case 26:_context.next=48;break;case 28:if(!prevProps.currentWidget||!this.props.currentWidget||prevProps.currentWidget.BubbledReload==this.props.currentWidget.BubbledReload){_context.next=33;break}return _context.next=31,this.executeWidgetActions(prevProps);case 31:_context.next=48;break;case 33:if(!this.props.preview){_context.next=48;break}if(!this.props.pageData||!this.props.pageData.widgets){_context.next=48;break}currentWidgetActionEvaluated=!1,pageDataWidgetNames=Object.keys(this.props.pageData.widgets),_context.t0=_regeneratorRuntime.keys(pageDataWidgetNames);case 38:if((_context.t1=_context.t0()).done){_context.next=48;break}if(widgetIdIndx=_context.t1.value,widgetId=pageDataWidgetNames[widgetIdIndx],currentWidgetActionEvaluated||!prevProps.pageData||_.isEqual(this.props.pageData.widgets[widgetId],prevProps.pageData.widgets[widgetId])||widgetId==this.props.widgetid){_context.next=45;break}return currentWidgetActionEvaluated=!0,_context.next=45,this.executeWidgetActions(prevProps);case 45:widgetId!=this.props.widgetid||_.isEqual(prevProps.widgetProps,this.props.widgetProps)||this.updateWidgetPropsAndAncestors(null),_context.next=38;break;case 48:case"end":return _context.stop()}},_callee,this)}));return function(_x){return _ref.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var _ref2=_asyncToGenerator(_regeneratorRuntime.mark(function _callee2(){var shadowRoot,gridStackItemEl;return _regeneratorRuntime.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return this.props.widgetProps&&this.props.widgetProps.hasOwnProperty("OneColumnAnchor")&&(shadowRoot=this.props.shadow)&&shadowRoot.host&&(gridStackItemEl=$(this.props.shadow.host).closest(".grid-stack-item"))&&gridStackItemEl.length>0&&("true"==this.props.widgetProps.OneColumnAnchor?!this.props.pageState||1!=this.props.pageState.oneColumn&&"true"!=this.props.pageState.oneColumn?$(gridStackItemEl).removeClass("OneColumnAnchor"):$(gridStackItemEl).hasClass("OneColumnAnchor")||$(gridStackItemEl).addClass("OneColumnAnchor"):$(gridStackItemEl).removeClass("OneColumnAnchor")),_context2.next=3,this.executeWidgetActions();case 3:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref2.apply(this,arguments)}}()},{key:"updatePageParams",value:function(){var _ref3=_asyncToGenerator(_regeneratorRuntime.mark(function _callee3(){var pageId,page,existingPageParams,pageProps,pageParamMapping,inputParams,newPageParams,pagesWithNewPageParams;return _regeneratorRuntime.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,!1,{},pageId=this.props.widgetProps.PageId,page=pageId&&this.props.pages[pageId],(existingPageParams=page.pageParams?page.pageParams:null)||(pageProps={},Object.keys(page.props).map(function(pagePropName){"ModelName"==pagePropName&&"ModelScope"==pagePropName||(pageProps[pagePropName]=page.props[pagePropName])}),existingPageParams=pageProps),{},pageParamMapping="string"==typeof(pageParamMapping=(pageParamMapping=null)||(this.props&&this.props.widgetProps&&this.props.widgetProps.PageParams?this.props.widgetProps.PageParams:{}))?JSON.parse(pageParamMapping):pageParamMapping,inputParams={pageId:pageId,pageParamMapping:pageParamMapping,parentPageParams:this.props.pageData.pageParams?cloneDeep(this.props.pageData.pageParams):{},parentPage:this.props.pageData},_context3.next=14,$script.runscript("mmf.getPageParameters",inputParams);case 14:newPageParams=(newPageParams=_context3.sent)||{},_.isEqual(newPageParams,existingPageParams)||((pagesWithNewPageParams=cloneDeep(this.props.pages))[pageId]=pagesWithNewPageParams[pageId]||{},pagesWithNewPageParams[pageId].pagereload=!pagesWithNewPageParams[pageId].pagereload,pagesWithNewPageParams[pageId].pageParams=newPageParams,this.props.updateStore({updates:{pages:pagesWithNewPageParams}})),_context3.next=21;break;case 19:_context3.prev=19,_context3.t0=_context3.catch(0);case 21:return _context3.abrupt("return",!1);case 22:case"end":return _context3.stop()}},_callee3,this,[[0,19]])}));return function(){return _ref3.apply(this,arguments)}}()},{key:"executeWidgetActions",value:function(){var _ref4=_asyncToGenerator(_regeneratorRuntime.mark(function _callee5(prevProps){var self,actionsModule,widgetActions,widgetProperties,setState,getState,setStateWithPreload,ctx,bubbledSource,bubbledSourceParts,bubbledWidgetId,bubbledPageId,srcWidgetName,srcWidget,srcWidgetProps,srcPage,srcPageName,widgetProps,_this3=this;return _regeneratorRuntime.wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(self=this,this.props.widgetid&&this.props.preview){_context5.next=3;break}return _context5.abrupt("return");case 3:return _context5.next=5,System.import("/widget/"+this.props.widgetid+"/Action.js");case 5:if(actionsModule=_context5.sent,widgetActions=actionsModule.default,widgetProperties=cloneDeep(self.props.widgetProps),setState=function(recentUpdates){var pageState=cloneDeep(self.props.pageState)||{};pageState=deepmerge.all([pageState,recentUpdates]),self.props.updateStore({updates:{pageState:pageState}})},getState=function(){return cloneDeep(self.props.pageState)},setStateWithPreload=function(recentUpdates,$widgets){var pageState=self.props.pageState?self.props.pageState:{};if(pageState=deepmerge(pageState,recentUpdates),$widgets)for(var widgetIndx in $widgets){var widget=$widgets[widgetIndx];if(widget){var widgetProps=widget.props;if(widgetProps&&Object.keys(widgetProps).length>0){var widgetPropNames=Object.keys(widgetProps);for(var widgetPropIndx in widgetPropNames){var widgetPropName=widgetPropNames[widgetPropIndx];if(widgetPropName.indexOf("__State__")>-1){var widgetPropPathValue=widgetProps[widgetPropName],wpropName=widgetPropName.split("__State__")[1];if(widgetPropPathValue&&pageState&&Object.keys(pageState).length>0){var newPropVal=lodashget(pageState,widgetPropPathValue);newPropVal&&(widgetProps[wpropName]="string"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}}}}}return self.props.updateStore({updates:{pageState:pageState}}),$widgets},ctx={currentscope:self.props.currentscope,prevpagedata:prevProps?prevProps.pageData:null,cloneDeep:cloneDeep},prevProps&&prevProps.currentWidget&&this.props.currentWidget&&prevProps.currentWidget.BubbledReload!=this.props.currentWidget.BubbledReload&&(bubbledSource=this.props.currentWidget.BubbledSource)&&bubbledSource.indexOf("@@")>-1&&2==(bubbledSourceParts=bubbledSource.split("@@")).length&&(bubbledWidgetId=bubbledSourceParts[0],bubbledPageId=bubbledSourceParts[1],this.props.pages&&this.props.pages[bubbledPageId]&&this.props.pages[bubbledPageId].widgets&&this.props.pages[bubbledPageId].widgets[bubbledWidgetId]&&(ctx.bubbledsource=this.props.pages[bubbledPageId].widgets[bubbledWidgetId],ctx.bubbledpage=this.props.pages[bubbledPageId])),srcWidgetName=ctx.bubbledsource&&ctx.bubbledsource.props&&ctx.bubbledsource.props.Name?ctx.bubbledsource.props.Name:ctx.bubbledsource?ctx.bubbledsource.id:"",srcWidget=ctx.bubbledsource,srcWidgetProps=ctx.bubbledsource?ctx.bubbledsource.props:{},srcPage=ctx.bubbledpage,srcPageName=srcPage?srcPage.name:"",this.props.widgetProps&&Object.keys(this.props.widgetProps).map(function(currentWidgetPropName){if(srcWidget&&srcPageName&&srcWidgetName&&currentWidgetPropName.startsWith("__Child__")){var currentWidgetPropValue=_this3.props.widgetProps[currentWidgetPropName];if(3==(currentWidgetPropValue=(currentWidgetPropValue=currentWidgetPropValue&&"string"==typeof currentWidgetPropValue?JSON.parse(currentWidgetPropValue):currentWidgetPropValue)||[]).length){var currentPropPageName=currentWidgetPropValue[0],currentPropWidgetName=currentWidgetPropValue[1],currentPropWidgetPropName=currentWidgetPropValue[2];if(srcPageName==currentPropPageName&&srcWidgetName==currentPropWidgetName){var propName=currentWidgetPropName.split("__Child__")[1];widgetProperties[propName]=srcWidgetProps[currentPropWidgetPropName]}}}if(currentWidgetPropName.startsWith("__Sibling__")){var _currentWidgetPropValue=_this3.props.widgetProps[currentWidgetPropName];if(2==(_currentWidgetPropValue=(_currentWidgetPropValue=_currentWidgetPropValue&&"string"==typeof _currentWidgetPropValue?JSON.parse(_currentWidgetPropValue):_currentWidgetPropValue)||[]).length){var _currentPropWidgetName=_currentWidgetPropValue[0],_currentPropWidgetPropName=_currentWidgetPropValue[1];_this3.props.pageData.widgets&&Object.keys(_this3.props.pageData.widgets).map(function(siblingWidgetId){var siblingWidget=_this3.props.pageData.widgets[siblingWidgetId];if((siblingWidget.props&&siblingWidget.props.Name?siblingWidget.props.Name:siblingWidget.id)==_currentPropWidgetName&&siblingWidget.props&&siblingWidget.props[_currentPropWidgetPropName]){var _propName=currentWidgetPropName.split("__Sibling__")[1];widgetProperties[_propName]=siblingWidget.props[_currentPropWidgetPropName]}})}}if(currentWidgetPropName.startsWith("__State__")){var propValue=self.props.widgetProps[currentWidgetPropName],wpropName=currentWidgetPropName.split("__State__")[1];if(prevProps&&prevProps.widgetProps&&prevProps.widgetProps[wpropName]==_this3.props.widgetProps[wpropName]&&propValue&&self.props.pageState&&Object.keys(self.props.pageState).length>0){var newPropVal=lodashget(self.props.pageState,propValue);newPropVal&&(widgetProperties[wpropName]="string"==typeof newPropVal?newPropVal:JSON.stringify(newPropVal))}}}),!(widgetActions&&Object.keys(widgetActions).length>0)){_context5.next=23;break}return _context5.next=22,Object.keys(widgetActions).map(function(){var _ref5=_asyncToGenerator(_regeneratorRuntime.mark(function _callee4(widgetActionKey){var actionNameParts,notifier,result,data;return _regeneratorRuntime.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!(widgetActionKey.indexOf("__")>-1)){_context4.next=15;break}if(actionNameParts=widgetActionKey.split("__"),actionNameParts.slice(0,actionNameParts.length-1).join("__"),"Always"!=actionNameParts.slice(actionNameParts.length-1).join("")){_context4.next=15;break}if(notifier={getState:getState,setState:setState,setStateWithPreload:setStateWithPreload,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},!(result=widgetActions[widgetActionKey](self.props.pageData,widgetProperties,notifier,ctx)).then){_context4.next=14;break}return _context4.next=10,result;case 10:data=_context4.sent,widgetProperties=_extends({},widgetProperties,data),_context4.next=15;break;case 14:widgetProperties=_extends({},widgetProperties,result);case 15:case"end":return _context4.stop()}},_callee4,_this3)}));return function(_x3){return _ref5.apply(this,arguments)}}());case 22:_.isEqual(widgetProperties,self.props.widgetProps)?prevProps&&prevProps.currentWidget&&this.props.currentWidget&&prevProps.currentWidget.BubbledReload==this.props.currentWidget.BubbledReload&&"SrsTabs"==this.props.currentWidget.name&&((widgetProps=cloneDeep(this.props.widgetProps)).Reload=!widgetProps.Reload,this.props.updateStore({updates:{widgetProps:widgetProps}})):this.updateWidgetPropsAndAncestors(widgetProperties);case 23:case"end":return _context5.stop()}},_callee5,this)}));return function(_x2){return _ref4.apply(this,arguments)}}()},{key:"updateWidgetPropsAndAncestors",value:function(updatedWidgetProps){if(this.props.currentWidget&&this.props.currentWidget.widgettree){var widgetTree=this.props.currentWidget.widgettree&&"string"==typeof this.props.currentWidget.widgettree?JSON.parse(this.props.currentWidget.widgettree):this.props.currentWidget.widgettree;if(widgetTree&&Object.keys(widgetTree).length>0){for(var pages=cloneDeep(this.props.pages),widgetTreeKey=Object.keys(widgetTree)[0];widgetTreeKey;){var widgetTreeKeyParts=widgetTreeKey&&widgetTreeKey.split("@@");if(widgetTreeKeyParts&&widgetTreeKeyParts.length>=2){var widgetTreeKeyWidgetId=widgetTreeKeyParts[0],widgetTreeKeyPageId=widgetTreeKeyParts[1];pages[widgetTreeKeyPageId]&&pages[widgetTreeKeyPageId].widgets&&pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId]&&(pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId].BubbledReload=!pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId].BubbledReload,pages[widgetTreeKeyPageId].widgets[widgetTreeKeyWidgetId].BubbledSource=this.props.widgetid+"@@"+this.props.pageid+this.props.pagesuffix)}widgetTreeKey=(widgetTree=widgetTree[widgetTreeKey])&&Object.keys(widgetTree).length>0?Object.keys(widgetTree)[0]:null}updatedWidgetProps&&pages[this.props.pageid+this.props.pagesuffix]&&pages[this.props.pageid+this.props.pagesuffix].widgets&&(pages[this.props.pageid+this.props.pagesuffix].widgets[this.props.widgetid]=pages[this.props.pageid+this.props.pagesuffix].widgets[this.props.widgetid]||{},pages[this.props.pageid+this.props.pagesuffix].widgets[this.props.widgetid].props=updatedWidgetProps),this.props.updateStore({updates:{pages:pages}})}else updatedWidgetProps&&this.props.updateStore({updates:{widgetProps:updatedWidgetProps}})}else updatedWidgetProps&&this.props.updateStore({updates:{widgetProps:updatedWidgetProps}})}},{key:"executeOnDemandActions",value:function(triggerType){var self=this;this.props.widgetid&&System.import("/widget/"+this.props.widgetid+"/Action.js").then(function(actionsModule){var widgetActions=actionsModule.default,widgetProperties=cloneDeep(self.props.widgetProps),setState=function(recentUpdates){var pageState=cloneDeep(self.props.pageState);pageState=_extends({},pageState,recentUpdates),self.props.updateStore({updates:{pageState:pageState}})},getState=function(){return cloneDeep(self.props.pageState)};widgetActions&&Object.keys(widgetActions).length>0&&Object.keys(widgetActions).map(function(widgetActionKey){if(widgetActionKey.indexOf("__")>-1){var actionNameParts=widgetActionKey.split("__"),actionName=actionNameParts.slice(0,actionNameParts.length-1).join("__"),actionType=actionNameParts.slice(actionNameParts.length-1).join("");if(actionType==triggerType){var notifier={setState:setState,getState:getState,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},ctx={currentscope:self.props.currentscope,cloneDeep:cloneDeep},result=widgetActions[widgetActionKey](self.props.pageData,widgetProperties,notifier,ctx);result.then?result.then(function(data){widgetProperties=_extends({},widgetProperties,data),_.isEqual(widgetProperties,self.props.widgetProps)||self.props.updateStore({updates:{widgetProps:widgetProperties}})}):(widgetProperties=_extends({},widgetProperties,result),_.isEqual(widgetProperties,self.props.widgetProps)||self.updateWidgetPropsAndAncestors(widgetProperties))}if("System"==actionType&&"onClick"==triggerType&&self.props.widgetProps&&self.props.widgetProps.ButtonAction&&self.props.widgetProps.ButtonAction==actionName){var _notifier={setState:setState,addFlashMessage:self.props.addFlashMessage,addErrorMessage:self.props.addErrorMessage,addInfoMessage:self.props.addInfoMessage},_ctx={currentscope:self.props.currentscope,cloneDeep:cloneDeep},_result=widgetActions[widgetActionKey](self.props.pageData,widgetProperties,_notifier,_ctx);_result.then?_result.then(function(data){widgetProperties=_extends({},widgetProperties,data),_.isEqual(widgetProperties,self.props.widgetProps)||self.updateWidgetPropsAndAncestors(widgetProperties)}):(widgetProperties=_extends({},widgetProperties,_result),_.isEqual(widgetProperties,self.props.widgetProps)||self.updateWidgetPropsAndAncestors(widgetProperties))}}})}).catch(function(err){console.error(err)})}},{key:"makeWidgetActive",value:function(e){this.props.pageid!=this.props.active_page_id||this.props.preview||this.props.updateStore({updates:{active_widget_id:this.props.widgetid,component_id:this.props.componentid}}),this.props.preview&&this.executeOnDemandActions("onClick")}},{key:"render",value:function(){var _this4=this,widgetKey=this.props.widgetid;"srs-board"!=this.widgetTag&&"planning-board"!=this.widgetTag||this.props.preview||(widgetKey="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)})),this.widgetTag=this.props.widgetProps&&this.props.widgetProps.Tag?this.props.widgetProps.Tag:this.props.tag?this.props.tag:"div";var extraProps={},widgetInstanceStyles={height:"inherit"};if(this.props.widgetProps){var widgetTree={},prevWidgetTree=this.props.currentWidget&&this.props.currentWidget.widgettree&&"string"==typeof this.props.currentWidget.widgettree?JSON.parse(this.props.currentWidget.widgettree):this.props.currentWidget?this.props.currentWidget.widgettree:{};if(this.props.pageData.name?this.props.pageData.name:this.props.widgetProps.Name?this.props.widgetProps.Name:"","page-designer-preview"==this.widgetTag){extraProps.previewpageid=this.props.widgetProps.PageId,widgetKey=extraProps.previewpageid+this.props.widgetid,extraProps.pagesuffix="";var tempPrevWidgetTree=prevWidgetTree?cloneDeep(prevWidgetTree):{};widgetTree[this.props.widgetid+"@@"+this.props.pageid+this.props.pagesuffix+"@@"+this.props.pageData.name]=tempPrevWidgetTree,extraProps.widgettree=JSON.stringify(widgetTree),extraProps.parentstate=JSON.stringify(this.props.pageState)}}this.props.lite&&"page-designer-preview"!=this.widgetTag&&(extraProps.lite=!0),"page-designer"==this.widgetTag&&(extraProps.as_widget=!0,extraProps.preview=this.props.preview),!this.props.widgetProps||"true"!=this.props.widgetProps.Invisible&&1!=this.props.widgetProps.Invisible||((widgetInstanceStyles=widgetInstanceStyles||{}).visibility="hidden");var allProps=Object.assign(_extends({},extraProps),{pageid:this.props.pageid,pagesuffix:this.props.pagesuffix,key:widgetKey},{style:widgetInstanceStyles,widgetid:this.props.widgetid,preview:this.props.preview,shadow:"srs-board"==this.widgetTag||"planning-board"==this.widgetTag||"page-designer-preview"==this.widgetTag||!!this.props.shadow,reload:this.state.reload});allProps.onecolumn=this.props.pageState&&this.props.pageState.oneColumn;var widgetInstance=React.createElement(this.widgetTag,allProps),widgetResult=React.createElement("div",{ref:this.widgetref,style:this.state.propAnchorStyle,onClick:this.makeWidgetActive},widgetInstance,this.props.preview?null:React.createElement("div",{onClick:function(e){if(_this4.props.activePageWidgets){var widgets2Delete=cloneDeep(_this4.props.widgets2Delete);widgets2Delete.push(_this4.props.widgetid),_this4.props.updateStore({updates:{widgets2Delete:widgets2Delete}})}e.stopPropagation()},style:{position:"absolute",top:0,margin:2,right:0,backgroundColor:"#e8d8d6",borderRadius:"50%",width:20,cursor:"pointer",height:20}},React.createElement(Close20,null)));this.props.is_design_time||React.createElement(Scrollbars,{styles:{height:"inherit",width:"inherit",padding:this.preview?2:0},autoHide:!0,autoHideTimeout:1e3,autoHideDuration:200,hideTracksWhenNotNeeded:!0,autoHeightMin:0,thumbMinSize:30,universal:!1},widgetResult);return widgetResult}}]),_WidgetContainer_}(React.Component),_export("WidgetContainer",WidgetContainer=function(props){return _WidgetContainer_}),_export("WidgetContainer",WidgetContainer)}}}),System.register("component/studio/WorkItem.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_WorkItem_,WorkItem,states,actions;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_WorkItem_=function(_React$Component){function _WorkItem_(){return _classCallCheck(this,_WorkItem_),_possibleConstructorReturn(this,(_WorkItem_.__proto__||Object.getPrototypeOf(_WorkItem_)).apply(this,arguments))}return _inherits(_WorkItem_,_React$Component),_createClass(_WorkItem_,[{key:"render",value:function(){return React.createElement("div",{style:{height:20,width:"80%",display:"flex"}},React.createElement("a",{href:"#",className:"bx--label",style:{marginLeft:10,width:"30%"}},"Fun1234"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Test123"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"34"))}}]),_WorkItem_}(React.Component),_export("WorkItem",WorkItem=function(props){return _WorkItem_}),_export("WorkItem",WorkItem),_export("default",WorkItem),_export("states",states=[]),_export("actions",actions={}),_export("states",states),_export("actions",actions)}}}),System.register("component/studio/WorkItem/Definition.js",["npm:systemjs-plugin-babel@0.0.25/babel-helpers/classCallCheck.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/createClass.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/possibleConstructorReturn.js","npm:systemjs-plugin-babel@0.0.25/babel-helpers/inherits.js","react"],function(_export,_context){"use strict";var _classCallCheck,_createClass,_possibleConstructorReturn,_inherits,React,_WorkItem_,WorkItem;return{setters:[function(_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs){_classCallCheck=_npmSystemjsPluginBabel0025BabelHelpersClassCallCheckJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs){_createClass=_npmSystemjsPluginBabel0025BabelHelpersCreateClassJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs){_possibleConstructorReturn=_npmSystemjsPluginBabel0025BabelHelpersPossibleConstructorReturnJs.default},function(_npmSystemjsPluginBabel0025BabelHelpersInheritsJs){_inherits=_npmSystemjsPluginBabel0025BabelHelpersInheritsJs.default},function(_react){React=_react.default}],execute:function(){_WorkItem_=function(_React$Component){function _WorkItem_(){return _classCallCheck(this,_WorkItem_),_possibleConstructorReturn(this,(_WorkItem_.__proto__||Object.getPrototypeOf(_WorkItem_)).apply(this,arguments))}return _inherits(_WorkItem_,_React$Component),_createClass(_WorkItem_,[{key:"render",value:function(){return React.createElement("div",{style:{height:20,width:"80%",display:"flex"}},React.createElement("a",{href:"#",className:"bx--label",style:{marginLeft:10,width:"30%"}},"Fun1234"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"Test123"),React.createElement("div",{className:"bx--label",style:{marginLeft:10,width:"30%"}},"34"))}}]),_WorkItem_}(React.Component),_export("WorkItem",WorkItem=function(props){return _WorkItem_}),_export("WorkItem",WorkItem)}}});